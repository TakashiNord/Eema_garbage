/*
Copyright(c) 2012 Company Name
*/
var Ext=Ext||{};if(!Ext.Direct){Ext.Direct={}}if(!Ext.Toolbar){Ext.Toolbar={}}if(!Ext.app){Ext.app={}}if(!Ext.app.domain){Ext.app.domain={}}if(!Ext.button){Ext.button={}}if(!Ext.chart){Ext.chart={}}if(!Ext.chart.axis){Ext.chart.axis={}}if(!Ext.chart.series){Ext.chart.series={}}if(!Ext.chart.theme){Ext.chart.theme={}}if(!Ext.container){Ext.container={}}if(!Ext.core){Ext.core={}}if(!Ext.data){Ext.data={}}if(!Ext.data.association){Ext.data.association={}}if(!Ext.data.flash){Ext.data.flash={}}if(!Ext.data.proxy){Ext.data.proxy={}}if(!Ext.data.reader){Ext.data.reader={}}if(!Ext.data.writer){Ext.data.writer={}}if(!Ext.dd){Ext.dd={}}if(!Ext.direct){Ext.direct={}}if(!Ext.dom){Ext.dom={}}if(!Ext.draw){Ext.draw={}}if(!Ext.draw.engine){Ext.draw.engine={}}if(!Ext.env){Ext.env={}}if(!Ext.flash){Ext.flash={}}if(!Ext.form){Ext.form={}}if(!Ext.form.Action){Ext.form.Action={}}if(!Ext.form.action){Ext.form.action={}}if(!Ext.form.field){Ext.form.field={}}if(!Ext.fx){Ext.fx={}}if(!Ext.fx.target){Ext.fx.target={}}if(!Ext.grid){Ext.grid={}}if(!Ext.grid.column){Ext.grid.column={}}if(!Ext.grid.feature){Ext.grid.feature={}}if(!Ext.grid.header){Ext.grid.header={}}if(!Ext.grid.locking){Ext.grid.locking={}}if(!Ext.grid.plugin){Ext.grid.plugin={}}if(!Ext.grid.property){Ext.grid.property={}}if(!Ext.layout){Ext.layout={}}if(!Ext.layout.boxOverflow){Ext.layout.boxOverflow={}}if(!Ext.layout.component){Ext.layout.component={}}if(!Ext.layout.component.field){Ext.layout.component.field={}}if(!Ext.layout.container){Ext.layout.container={}}if(!Ext.layout.container.border){Ext.layout.container.border={}}if(!Ext.layout.container.boxOverflow){Ext.layout.container.boxOverflow={}}if(!Ext.list){Ext.list={}}if(!Ext.menu){Ext.menu={}}if(!Ext.panel){Ext.panel={}}if(!Ext.perf){Ext.perf={}}if(!Ext.picker){Ext.picker={}}if(!Ext.resizer){Ext.resizer={}}if(!Ext.selection){Ext.selection={}}if(!Ext.slider){Ext.slider={}}if(!Ext.state){Ext.state={}}if(!Ext.tab){Ext.tab={}}if(!Ext.tip){Ext.tip={}}if(!Ext.toolbar){Ext.toolbar={}}if(!Ext.tree){Ext.tree={}}if(!Ext.tree.plugin){Ext.tree.plugin={}}if(!Ext.util){Ext.util={}}if(!Ext.ux){Ext.ux={}}if(!Ext.ux.form){Ext.ux.form={}}if(!Ext.view){Ext.view={}}if(!Ext.window){Ext.window={}}(function(H){var K,B=["constructor","toString","valueOf","toLocaleString"],G={},x={},I=0,A,D,v,F,M,z,J,E,w=function(){var a,c;D=Ext.Base;v=Ext.ClassManager;for(a=B.length;a-->0;){c=(1<<a);x[G[c]=B[a]]=c}for(a in x){I|=x[a]}I=~I;Function.prototype.$isFunction=1;E=!!(v&&v.addAlias);F=Ext.Class.getPreprocessor("config").fn;M=Ext.Class.getPreprocessor("cachedConfig")&&Ext.Class.getPreprocessor("cachedConfig").fn;J=Ext.Class.getPreprocessor("privates")&&Ext.Class.getPreprocessor("privates").fn;z=Ext.ClassManager.postprocessors.deprecated&&Ext.ClassManager.postprocessors.deprecated.fn;K=D.$staticMembers;if(!K){K=[];for(A in D){if(D.hasOwnProperty(A)){K.push(A)}}}H.derive=C;return C.apply(this,arguments)},u=function(a,h,c){var m=c.enumerableMembers,e=a.prototype,j,d,l,n,o;if(!h){return}if(E){a.addMembers(h)}else{for(j in h){n=h[j];if(n&&n.$isFunction&&!n.$isClass&&n!==Ext.emptyFn&&n!==Ext.identityFn){o=e.hasOwnProperty(j)&&e[j];if(o){n.$previous=o}e[j]=d=n;d.$owner=a;d.$name=j}else{e[j]=n}}for(l=1;m;l<<=1){if(m&l){m&=~l;j=G[l];e[j]=d=h[j];d.$owner=a;d.$name=j}}}},y=function(h){var e=function a(){return h.apply(this,arguments)||null},c,d;e.prototype=Ext.Object.chain(h.prototype);for(c=K.length;c-->0;){d=K[c];e[d]=D[d]}return e},C=function(ad,aq,d,an,ar,ab,at,j,ah,s,ak){var al=function am(){return this.constructor.apply(this,arguments)||null},e=al,aj={enumerableMembers:an&I,onCreated:ak,onBeforeCreated:u,aliases:j},af=d.alternateClassName||[],m=Ext.global,q,n,l,ag,o,au,a,ae,p,ao,h,t,ai,c,ac=v.alternateToName||v.maps.alternateToName,ap=v.nameToAlternates||v.maps.nameToAlternates;for(l=K.length;l-->0;){a=K[l];al[a]=D[a]}if(d.$isFunction){d=d(al)}aj.data=d;ao=d.statics;delete d.statics;d.$className=ad;if("$className" in d){al.$className=d.$className}al.extend(aq);p=al.prototype;al.xtype=d.xtype=ar[0];if(ar){p.xtypes=ar}p.xtypesChain=ab;p.xtypesMap=at;d.alias=j;e.triggerExtended(al,d,aj);if(d.onClassExtended){al.onExtended(d.onClassExtended,al);delete d.onClassExtended}if(d.privates&&J){J.call(Ext.Class,al,d)}if(ao){if(E){al.addStatics(ao)}else{for(h in ao){if(ao.hasOwnProperty(h)){c=ao[h];if(c&&c.$isFunction&&!c.$isClass&&c!==Ext.emptyFn&&c!==Ext.identityFn){al[h]=ai=c;ai.$owner=al;ai.$name=h}al[h]=c}}}}if(d.inheritableStatics){al.addInheritableStatics(d.inheritableStatics);delete d.inheritableStatics}if(p.onClassExtended){e.onExtended(p.onClassExtended,e);delete p.onClassExtended}if(d.config){F.call(Ext.Class,al,d)}if(d.cachedConfig&&M){M.call(Ext.Class,al,d)}if(d.deprecated&&z){z.call(Ext.ClassManager,ad,al,d)}aj.onBeforeCreated(al,aj.data,aj);for(l=0,o=ah&&ah.length;l<o;++l){al.mixin.apply(al,ah[l])}for(l=0,o=j.length;l<o;l++){q=j[l];v.setAlias?v.setAlias(al,q):v.addAlias(al,q)}if(d.singleton){e=new al()}if(!(af instanceof Array)){af=[af]}t=v.getName(e);for(l=0,ag=af.length;l<ag;l++){n=af[l];v.classes[n]=e;if(E){v.addAlternate(al,n)}else{if(t){ac[n]=t;af=ap[t]||(ap[t]=[]);af.push(n)}}}for(l=0,o=s.length;l<o;l+=2){au=s[l];if(!au){au=m}au[s[l+1]]=e}v.classes[ad]=e;if(!E){if(t&&t!==ad){ac[ad]=t;af=ap[t]||(ap[t]=[]);af.push(ad)}}delete p.alternateClassName;if(aj.onCreated){aj.onCreated.call(e,e)}if(ad){v.triggerCreated(ad)}return e};H.derive=w}(Ext.cmd={}));var Ext=Ext||{};Ext._startTime=new Date().getTime();(function(){var y=this,v=Object.prototype,x=v.toString,o=true,n={toString:1},t=function(){},p=function(){var a=p.caller.caller;return a.$owner.prototype[a.$name].apply(this,arguments)},u,q=/\S/,s,w=/\[object\s*(?:Array|Arguments|\w*Collection|\w*List|HTML\s+document\.all\s+class)\]/;Ext.global=y;for(u in n){o=null}if(o){o=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]}Ext.enumerables=o;Ext.apply=function(d,e,a){if(a){Ext.apply(d,a)}if(d&&e&&typeof e==="object"){var c,h,j;for(c in e){d[c]=e[c]}if(o){for(h=o.length;h--;){j=o[h];if(e.hasOwnProperty(j)){d[j]=e[j]}}}}return d};Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{});Ext.apply(Ext,{name:Ext.sandboxName||"Ext",emptyFn:t,identityFn:function(a){return a},emptyString:new String(),baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,applyIf:function(c,d){var a;if(c){for(a in d){if(c[a]===undefined){c[a]=d[a]}}}return c},iterate:function(d,a,c){if(Ext.isEmpty(d)){return}if(c===undefined){c=d}if(Ext.isIterable(d)){Ext.Array.each.call(Ext.Array,d,a,c)}else{Ext.Object.each.call(Ext.Object,d,a,c)}}});Ext.apply(Ext,{extend:(function(){var c=v.constructor,a=function(d){for(var e in d){if(!d.hasOwnProperty(e)){continue}this[e]=d[e]}};return function(m,d,h){if(Ext.isObject(d)){h=d;d=m;m=h.constructor!==c?h.constructor:function(){d.apply(this,arguments)}}var j=function(){},l,e=d.prototype;j.prototype=e;l=m.prototype=new j();l.constructor=m;m.superclass=e;if(e.constructor===c){e.constructor=d}m.override=function(z){Ext.override(m,z)};l.override=a;l.proto=l;m.override(h);m.extend=function(z){return Ext.extend(m,z)};return m}}()),override:function(c,a){if(c.$isClass){c.override(a)}else{if(typeof c=="function"){Ext.apply(c.prototype,a)}else{var h=c.self,e,d;if(h&&h.$isClass){for(e in a){if(a.hasOwnProperty(e)){d=a[e];if(typeof d=="function"){d.$name=e;d.$owner=h;d.$previous=c.hasOwnProperty(e)?c[e]:p}c[e]=d}}}else{Ext.apply(c,a)}}}return c}});Ext.apply(Ext,{valueFrom:function(a,d,c){return Ext.isEmpty(a,c)?d:a},typeOf:function(c){var d,a;if(c===null){return"null"}d=typeof c;if(d==="undefined"||d==="string"||d==="number"||d==="boolean"){return d}a=x.call(c);switch(a){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}if(d==="function"){return"function"}if(d==="object"){if(c.nodeType!==undefined){if(c.nodeType===3){return(q).test(c.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}},coerce:function(a,c){var d=Ext.typeOf(a),e=Ext.typeOf(c),h=typeof a==="string";if(d!==e){switch(e){case"string":return String(a);case"number":return Number(a);case"boolean":return h&&(!a||a==="false")?false:Boolean(a);case"null":return h&&(!a||a==="null")?null:a;case"undefined":return h&&(!a||a==="undefined")?undefined:a;case"date":return h&&isNaN(a)?Ext.Date.parse(a,Ext.Date.defaultFormat):Date(Number(a))}}return a},isEmpty:function(c,a){return(c===null)||(c===undefined)||(!a?c==="":false)||(Ext.isArray(c)&&c.length===0)},isArray:("isArray" in Array)?Array.isArray:function(a){return x.call(a)==="[object Array]"},isDate:function(a){return x.call(a)==="[object Date]"},isObject:(x.call(null)==="[object Object]")?function(a){return a!==null&&a!==undefined&&x.call(a)==="[object Object]"&&a.ownerDocument===undefined}:function(a){return x.call(a)==="[object Object]"},isSimpleObject:function(a){return a instanceof Object&&a.constructor===Object},isPrimitive:function(a){var c=typeof a;return c==="string"||c==="number"||c==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(a){return !!a&&x.call(a)==="[object Function]"}:function(a){return !!a&&typeof a==="function"},isNumber:function(a){return typeof a==="number"&&isFinite(a)},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return typeof a==="string"},isBoolean:function(a){return typeof a==="boolean"},isElement:function(a){return a?a.nodeType===1:false},isTextNode:function(a){return a?a.nodeName==="#text":false},isDefined:function(a){return typeof a!=="undefined"},isIterable:function(a){if(!a||typeof a.length!=="number"||typeof a==="string"||Ext.isFunction(a)){return false}if(!a.propertyIsEnumerable){return !!a.item}if(a.hasOwnProperty("length")&&!a.propertyIsEnumerable("length")){return true}return w.test(x.call(a))}});Ext.apply(Ext,{clone:function(c){var d,e,j,l,a,h;if(c===null||c===undefined){return c}if(c.nodeType&&c.cloneNode){return c.cloneNode(true)}d=x.call(c);if(d==="[object Date]"){return new Date(c.getTime())}if(d==="[object Array]"){e=c.length;a=[];while(e--){a[e]=Ext.clone(c[e])}}else{if(d==="[object Object]"&&c.constructor===Object){a={};for(h in c){a[h]=Ext.clone(c[h])}if(o){for(j=o.length;j--;){l=o[j];if(c.hasOwnProperty(l)){a[l]=c[l]}}}}}return a||c},getUniqueGlobalNamespace:function(){var a=this.uniqueGlobalNamespace,c;if(a===undefined){c=0;do{a="ExtBox"+(++c)}while(Ext.global[a]!==undefined);Ext.global[a]=Ext;this.uniqueGlobalNamespace=a}return a},functionFactoryCache:{},cacheableFunctionFactory:function(){var a=this,e=Array.prototype.slice.call(arguments),h=a.functionFactoryCache,j,d,c;if(Ext.isSandboxed){c=e.length;if(c>0){c--;e[c]="var Ext=window."+Ext.name+";"+e[c]}}j=e.join("");d=h[j];if(!d){d=Function.prototype.constructor.apply(Function.prototype,e);h[j]=d}return d},functionFactory:function(){var a=this,d=Array.prototype.slice.call(arguments),c;if(Ext.isSandboxed){c=d.length;if(c>0){c--;d[c]="var Ext=window."+Ext.name+";"+d[c]}}return Function.prototype.constructor.apply(Function.prototype,d)},Logger:{verbose:t,log:t,info:t,warn:t,error:function(a){throw new Error(a)},deprecate:t}});Ext.type=Ext.typeOf;s=Ext.app;if(!s){s=Ext.app={}}Ext.apply(s,{namespaces:{},collectNamespaces:function(a){var d=Ext.app.namespaces,c;for(c in a){if(a.hasOwnProperty(c)){d[c]=true}}},addNamespaces:function(c){var a=Ext.app.namespaces,d,e;if(!Ext.isArray(c)){c=[c]}for(d=0,e=c.length;d<e;d++){a[c[d]]=true}},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(d){var a=Ext.app.namespaces,e="",c;for(c in a){if(a.hasOwnProperty(c)&&c.length>e.length&&(c+"."===d.substring(0,c.length+1))){e=c}}return e===""?undefined:e}})}());Ext.globalEval=Ext.global.execScript?function(c){execScript(c)}:function($$code){(function(){var Ext=this.Ext;eval($$code)}())};(function(){var l="4.2.4.1720",q=[""],n=/([^\d\.])/,t=/[^\d]/g,m=/[\-+]/g,o=/\s/g,s=/_/g,p;Ext.Version=p=Ext.extend(Object,{isVersion:true,padModes:{"~":NaN,"^":Infinity},release:"",constructor:function(z,e){var y=this,j=y.padModes,w,c,h,d,x,v,a;if(z.isVersion){return z}y.version=a=String(z).toLowerCase().replace(s,".").replace(m,"");w=a.charAt(0);if(w in j){a=a.substring(1);h=j[w]}else{h=e?j[e]:0}y.pad=h;v=a.search(n);y.shortVersion=a;if(v!==-1){y.release=x=a.substr(v,z.length);y.shortVersion=a.substr(0,v);x=p.releaseValueMap[x]||x}y.releaseValue=x||h;y.shortVersion=y.shortVersion.replace(t,"");y.parts=d=a.split(".");for(c=d.length;c--;){d[c]=parseInt(d[c],10)}if(h===Infinity){d.push(h)}y.major=d[0]||h;y.minor=d[1]||h;y.patch=d[2]||h;y.build=d[3]||h;return y},compareTo:function(B){var A=this,e=A.pad,D=A.parts,z=D.length,h=B.isVersion?B:new p(B),x=h.pad,a=h.parts,c=a.length,y=Math.max(z,c),d,j,C;for(d=0;d<y;d++){j=(d<z)?D[d]:e;C=(d<c)?a[d]:x;if(j<C){return -1}if(j>C){return 1}}j=A.releaseValue;C=h.releaseValue;if(j<C){return -1}if(j>C){return 1}return 0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(a){return this.compareTo(a)>0},isGreaterThanOrEqual:function(a){return this.compareTo(a)>=0},isLessThan:function(a){return this.compareTo(a)<0},isLessThanOrEqual:function(a){return this.compareTo(a)<=0},equals:function(a){return this.compareTo(a)===0},match:function(a){a=String(a);return this.version.substr(0,a.length)===a},toArray:function(){var a=this;return[a.getMajor(),a.getMinor(),a.getPatch(),a.getBuild(),a.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(a){return this.compareTo(a)>0},lt:function(a){return this.compareTo(a)<0},gtEq:function(a){return this.compareTo(a)>=0},ltEq:function(a){return this.compareTo(a)<=0}});Ext.apply(p,{releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(a){return !a?0:(isNaN(a)?this.releaseValueMap[a]||a:parseInt(a,10))},compare:function(a,c){var d=a.isVersion?a:new p(a);return d.compareTo(c)}});Ext.apply(Ext,{versions:{},lastRegisteredVersion:null,setVersion:function(a,c){Ext.lastRegisteredVersion=Ext.versions[a]=new p(c);return this},getVersion:function(a){if(a===undefined){return Ext.lastRegisteredVersion}return Ext.versions[a]},checkVersion:function(e,D){var H=Ext.isArray(e),C=H?e:q,A=C.length,z=Ext.versions,E=z.ext||z.touch,d,F,a,j,h,B,c,G;if(!H){q[0]=e}for(d=0;d<A;++d){if(!Ext.isString(B=C[d])){a=Ext.checkVersion(B.and||B.or,!B.or);if(B.not){a=!a}}else{if(B.indexOf(" ")>=0){B=B.replace(o,"")}F=B.indexOf("@");if(F<0){c=B;G=E}else{if(!(G=z[B.substring(0,F)])){if(D){return false}continue}c=B.substring(F+1)}F=c.indexOf("-");if(F<0){if(c.charAt(F=c.length-1)==="+"){j=c.substring(0,F);h=null}else{j=h=c}}else{if(F>0){j=c.substring(0,F);h=c.substring(F+1)}else{j=null;h=c.substring(F+1)}}a=true;if(j){j=new p(j,"~");a=j.ltEq(G)}if(a&&h){h=new p(h,"~");a=h.gtEq(G)}}if(a){if(!D){return true}}else{if(D){return false}}}return !!D},deprecate:function(d,a,e,c){if(p.compare(Ext.getVersion(d),a)<1){e.call(c)}}});Ext.setVersion("core",l)}());Ext.String=(function(){var z=/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,t=/('|\\)/g,A=/\{\d+\}/,G=/([-.*+?\^${}()|\[\]\/\\])/g,J=/^\s+|\s+$/g,x=/\s+/,v=/(^[^a-z]*|[^\w])/gi,D,H,B,E,C=function(a,c){return D[c]},w=function(a,c){return(c in H)?H[c]:String.fromCharCode(parseInt(c.substr(2),10))},F=function(a,c){if(a===null||a===undefined||c===null||c===undefined){return false}return c.length<=a.length},u={useFormat:false,compiled:true,stringFormat:true},y={},I=function(a){if(A.test(a)){a=new Ext.Template(a,u);return function(){return a.apply(arguments)}}else{return function(){return a}}};return{insert:function(c,a,d){if(!c){return a}if(!a){return c}var e=c.length;if(!d&&d!==0){d=e}if(d<0){d*=-1;if(d>=e){d=0}else{d=e-d}}if(d===0){c=a+c}else{if(d>=c.length){c+=a}else{c=c.substr(0,d)+a+c.substr(d)}}return c},startsWith:function(c,a,d){var e=F(c,a);if(e){if(d){c=c.toLowerCase();a=a.toLowerCase()}e=c.lastIndexOf(a,0)===0}return e},endsWith:function(a,d,c){var e=F(a,d);if(e){if(c){a=a.toLowerCase();d=d.toLowerCase()}e=a.indexOf(d,a.length-d.length)!==-1}return e},createVarName:function(a){return a.replace(v,"")},htmlEncode:function(a){return(!a)?a:String(a).replace(B,C)},htmlDecode:function(a){return(!a)?a:String(a).replace(E,w)},hasHtmlCharacters:function(a){return B.test(a)},addCharacterEntities:function(e){var h=[],a=[],d,c;for(d in e){c=e[d];H[d]=c;D[c]=d;h.push(c);a.push(d)}B=new RegExp("("+h.join("|")+")","g");E=new RegExp("("+a.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){D={};H={};this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(a,c){if(!Ext.isEmpty(c)){return a+(a.indexOf("?")===-1?"?":"&")+c}return a},trim:function(a){return a.replace(z,"")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},uncapitalize:function(a){return a.charAt(0).toLowerCase()+a.substr(1)},ellipsis:function(d,e,c){if(d&&d.length>e){if(c){var a=d.substr(0,e-2),h=Math.max(a.lastIndexOf(" "),a.lastIndexOf("."),a.lastIndexOf("!"),a.lastIndexOf("?"));if(h!==-1&&h>=(e-15)){return a.substr(0,h)+"..."}}return d.substr(0,e-3)+"..."}return d},escapeRegex:function(a){return a.replace(G,"\\$1")},escape:function(a){return a.replace(t,"\\$1")},toggle:function(c,a,d){return c===a?d:a},leftPad:function(d,c,a){var e=String(d);a=a||" ";while(e.length<c){e=a+e}return e},format:function(a){var c=y[a]||(y[a]=I(a));return c.apply(this,arguments)},repeat:function(a,c,e){if(c<1){c=0}for(var h=[],d=c;d--;){h.push(a)}return h.join(e||"")},splitWords:function(a){if(a&&typeof a=="string"){return a.replace(J,"").split(x)}return a||[]}}}());Ext.String.resetCharacterEntities();Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;Ext.Number=new function(){var d=this,h=(0.9).toFixed()!=="1",e=Math;Ext.apply(this,{constrain:function(a,c,j){var l=parseFloat(a);return(l<c)?c:((l>j)?j:l)},snap:function(c,m,l,a){var n;if(c===undefined||c<l){return l||0}if(m){n=c%m;if(n!==0){c-=n;if(n*2>=m){c+=m}else{if(n*2<-m){c-=m}}}}return d.constrain(c,l,a)},snapInRange:function(c,n,l,a){var m;l=(l||0);if(c===undefined||c<l){return l}if(n&&(m=((c-l)%n))){c-=m;m*=2;if(m>=n){c+=n}}if(a!==undefined){if(c>(a=d.snapInRange(a,n,l))){c=a}}return c},toFixed:h?function(a,j){j=j||0;var c=e.pow(10,j);return(e.round(a*c)/c).toFixed(j)}:function(a,c){return a.toFixed(c)},from:function(a,c){if(isFinite(a)){a=parseFloat(a)}return !isNaN(a)?a:c},randomInt:function(a,c){return e.floor(e.random()*(c-a+1)+a)},correctFloat:function(a){return parseFloat(a.toPrecision(14))}});Ext.num=function(){return d.from.apply(this,arguments)}}();(function(){var S=Array.prototype,J=S.slice,H=(function(){var d=[],c,a=20;if(!d.splice){return false}while(a--){d.push("A")}d.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");c=d.length;d.splice(13,0,"XXX");if(c+1!=d.length){return false}return true}()),P="forEach" in S,D="map" in S,I="indexOf" in S,e="every" in S,U="some" in S,T="filter" in S,K=(function(){var a=[1,2,3,4,5].sort(function(){return 0});return a[0]===1&&a[1]===2&&a[2]===3&&a[3]===4&&a[4]===5}()),O=true,W,B,E,C;try{if(typeof document!=="undefined"){J.call(document.getElementsByTagName("body"))}}catch(F){O=false}function M(a,c){return(c<0)?Math.max(0,a.length+c):Math.min(a.length,c)}function A(p,q,h,m){var l=m?m.length:0,c=p.length,o=M(p,q),s,n,d,j,a,t;if(o===c){if(l){p.push.apply(p,m)}}else{s=Math.min(h,c-o);n=o+s;d=n+l-s;j=c-n;a=c-s;if(d<n){for(t=0;t<j;++t){p[d+t]=p[n+t]}}else{if(d>n){for(t=j;t--;){p[d+t]=p[n+t]}}}if(l&&o===a){p.length=a;p.push.apply(p,m)}else{p.length=a+l;for(t=0;t<l;++t){p[o+t]=m[t]}}}return p}function Q(d,c,h,a){if(a&&a.length){if(c===0&&!h){d.unshift.apply(d,a)}else{if(c<d.length){d.splice.apply(d,[c,h].concat(a))}else{d.push.apply(d,a)}}}else{d.splice(c,h)}return d}function V(d,c,a){return A(d,c,a)}function G(d,c,a){d.splice(c,a);return d}function N(d,c,j){var h=M(d,c),a=d.slice(c,M(d,h+j));if(arguments.length<4){A(d,h,j)}else{A(d,h,j,J.call(arguments,3))}return a}function R(a){return a.splice.apply(a,J.call(arguments,1))}B=H?G:V;E=H?Q:A;C=H?R:N;W=Ext.Array={each:function(c,j,l,h){c=W.from(c);var a,d=c.length;if(h!==true){for(a=0;a<d;a++){if(j.call(l||c[a],c[a],a,c)===false){return a}}}else{for(a=d-1;a>-1;a--){if(j.call(l||c[a],c[a],a,c)===false){return a}}}return true},forEach:P?function(d,a,c){d.forEach(a,c)}:function(d,j,a){var c=0,h=d.length;for(;c<h;c++){j.call(a,d[c],c,d)}},indexOf:I?function(d,c,a){return S.indexOf.call(d,c,a)}:function(d,j,h){var c,a=d.length;for(c=(h<0)?Math.max(0,a+h):h||0;c<a;c++){if(d[c]===j){return c}}return -1},contains:I?function(a,c){return S.indexOf.call(a,c)!==-1}:function(d,h){var c,a;for(c=0,a=d.length;c<a;c++){if(d[c]===h){return true}}return false},toArray:function(j,d,c){if(!j||!j.length){return[]}if(typeof j==="string"){j=j.split("")}if(O){return J.call(j,d||0,c||j.length)}var h=[],a;d=d||0;c=c?((c<0)?j.length+c:c):j.length;for(a=d;a<c;a++){h.push(j[a])}return h},pluck:function(c,h){var a=[],l,d,j;for(l=0,d=c.length;l<d;l++){j=c[l];a.push(j[h])}return a},map:D?function(d,a,c){return d.map(a,c)}:function(c,h,j){var l=[],a=0,d=c.length;for(;a<d;a++){l[a]=h.call(j,c[a],a,c)}return l},every:e?function(d,a,c){return d.every(a,c)}:function(d,j,a){var c=0,h=d.length;for(;c<h;++c){if(!j.call(a,d[c],c,d)){return false}}return true},some:U?function(d,a,c){return d.some(a,c)}:function(d,j,a){var c=0,h=d.length;for(;c<h;++c){if(j.call(a,d[c],c,d)){return true}}return false},equals:function(d,h){var a=d.length,c=h.length,j;if(d===h){return true}if(a!==c){return false}for(j=0;j<a;++j){if(d[j]!==h[j]){return false}}return true},clean:function(d){var a=[],c=0,h=d.length,j;for(;c<h;c++){j=d[c];if(!Ext.isEmpty(j)){a.push(j)}}return a},unique:function(d){var h=[],c=0,j=d.length,a;for(;c<j;c++){a=d[c];if(W.indexOf(h,a)===-1){h.push(a)}}return h},filter:T?function(d,a,c){return d.filter(a,c)}:function(c,j,l){var a=[],h=0,d=c.length;for(;h<d;h++){if(j.call(l,c[h],h,c)){a.push(c[h])}}return a},findBy:function(d,h,j){var a=0,c=d.length;for(;a<c;a++){if(h.call(j||d,d[a],a)){return d[a]}}return null},from:function(d,a){if(d===undefined||d===null){return[]}if(Ext.isArray(d)){return(a)?J.call(d):d}var c=typeof d;if(d&&d.length!==undefined&&c!=="string"&&(c!=="function"||!d.apply)){return W.toArray(d)}return[d]},remove:function(d,a){var c=W.indexOf(d,a);if(c!==-1){B(d,c,1)}return d},include:function(a,c){if(!W.contains(a,c)){a.push(c)}},clone:function(a){return J.call(a)},merge:function(){var c=J.call(arguments),d=[],a,h;for(a=0,h=c.length;a<h;a++){d=d.concat(c[a])}return W.unique(d)},intersect:function(){var l=[],d=J.call(arguments),m,o,t,p,j,c,h,q,n,a,s,u,v;if(!d.length){return l}m=d.length;for(s=j=0;s<m;s++){c=d[s];if(!p||c.length<p.length){p=c;j=s}}p=W.unique(p);B(d,j,1);h=p.length;m=d.length;for(s=0;s<h;s++){q=p[s];a=0;for(u=0;u<m;u++){o=d[u];t=o.length;for(v=0;v<t;v++){n=o[v];if(q===n){a++;break}}}if(a===m){l.push(q)}}return l},difference:function(a,j){var c=J.call(a),h=c.length,l,m,d;for(l=0,d=j.length;l<d;l++){for(m=0;m<h;m++){if(c[m]===j[l]){B(c,m,1);m--;h--}}}return c},slice:([1,2].slice(1,undefined).length?function(d,a,c){return J.call(d,a,c)}:function(d,a,c){if(typeof a==="undefined"){return J.call(d)}if(typeof c==="undefined"){return J.call(d,a)}return J.call(d,a,c)}),sort:K?function(a,c){if(c){return a.sort(c)}else{return a.sort()}}:function(c,d){var l=c.length,m=0,h,j,n,a;for(;m<l;m++){n=m;for(j=m+1;j<l;j++){if(d){h=d(c[j],c[n]);if(h<0){n=j}}else{if(c[j]<c[n]){n=j}}}if(n!==m){a=c[m];c[m]=c[n];c[n]=a}}return c},flatten:function(d){var a=[];function c(m){var j,h,l;for(j=0,h=m.length;j<h;j++){l=m[j];if(Ext.isArray(l)){c(l)}else{a.push(l)}}return a}return c(d)},min:function(c,h){var a=c[0],d,j,l;for(d=0,j=c.length;d<j;d++){l=c[d];if(h){if(h(a,l)===1){a=l}}else{if(l<a){a=l}}}return a},max:function(c,h){var d=c[0],a,j,l;for(a=0,j=c.length;a<j;a++){l=c[a];if(h){if(h(d,l)===-1){d=l}}else{if(l>d){d=l}}}return d},mean:function(a){return a.length>0?W.sum(a)/a.length:undefined},sum:function(d){var a=0,c,h,j;for(c=0,h=d.length;c<h;c++){j=d[c];a+=j}return a},toMap:function(d,c,j){var h={},a=d.length;if(!c){while(a--){h[d[a]]=a+1}}else{if(typeof c=="string"){while(a--){h[d[a][c]]=a+1}}else{while(a--){h[c.call(j,d[a])]=a+1}}}return h},toValueMap:function(d,c,j){var h={},a=d.length;if(!c){while(a--){h[d[a]]=d[a]}}else{if(typeof c=="string"){while(a--){h[d[a][c]]=d[a]}}else{while(a--){h[c.call(j,d[a])]=d[a]}}}return h},erase:B,insert:function(d,a,c){return E(d,a,0,c)},replace:E,splice:C,push:function(d){var c=arguments.length,h=1,a;if(d===undefined){d=[]}else{if(!Ext.isArray(d)){d=[d]}}for(;h<c;h++){a=arguments[h];Array.prototype.push[Ext.isIterable(a)?"apply":"call"](d,a)}return d}};Ext.each=W.each;W.union=W.merge;Ext.min=W.min;Ext.max=W.max;Ext.sum=W.sum;Ext.mean=W.mean;Ext.flatten=W.flatten;Ext.clean=W.clean;Ext.unique=W.unique;Ext.pluck=W.pluck;Ext.toArray=function(){return W.toArray.apply(W,arguments)}}());Ext.Function={flexSetter:function(c){return function(j,l){var h,a;if(j===null){return this}if(typeof j!=="string"){for(h in j){if(j.hasOwnProperty(h)){c.call(this,h,j[h])}}if(Ext.enumerables){for(a=Ext.enumerables.length;a--;){h=Ext.enumerables[a];if(j.hasOwnProperty(h)){c.call(this,h,j[h])}}}}else{c.call(this,j,l)}return this}},bind:function(n,o,h,j){if(arguments.length===2){return function(){return n.apply(o,arguments)}}var l=n,m=Array.prototype.slice;return function(){var a=h||arguments;if(j===true){a=m.call(arguments,0);a=a.concat(h)}else{if(typeof j=="number"){a=m.call(arguments,0);Ext.Array.insert(a,j,h)}}return l.apply(o||Ext.global,a)}},pass:function(h,e,d){if(!Ext.isArray(e)){if(Ext.isIterable(e)){e=Ext.Array.clone(e)}else{e=e!==undefined?[e]:[]}}return function(){var a=[].concat(e);a.push.apply(a,arguments);return h.apply(d||this,a)}},alias:function(c,d){return function(){return c[d].apply(c,arguments)}},clone:function(c){return function(){return c.apply(this,arguments)}},createInterceptor:function(m,n,h,j){var l=m;if(!Ext.isFunction(n)){return m}else{j=Ext.isDefined(j)?j:null;return function(){var a=this,c=arguments;n.target=a;n.method=m;return(n.apply(h||a||Ext.global,c)!==false)?m.apply(a||Ext.global,c):j}}},createDelayed:function(l,n,m,h,j){if(m||h){l=Ext.Function.bind(l,m,h,j)}return function(){var a=this,c=Array.prototype.slice.call(arguments);setTimeout(function(){l.apply(a,c)},n)}},defer:function(l,n,m,h,j){l=Ext.Function.bind(l,m,h,j);if(n>0){return setTimeout(Ext.supports.TimeoutActualLateness?function(){l()}:l,n)}l();return 0},createSequence:function(d,h,e){if(!h){return d}else{return function(){var a=d.apply(this,arguments);h.apply(e||this,arguments);return a}}},createBuffered:function(l,h,m,n){var j;return function(){var a=n||Array.prototype.slice.call(arguments,0),c=m||this;if(j){clearTimeout(j)}j=setTimeout(function(){l.apply(c,a)},h)}},createThrottled:function(q,l,s){var p,m,t,n,o=function(){q.apply(s||this,t);p=Ext.Date.now()};return function(){m=Ext.Date.now()-p;t=arguments;clearTimeout(n);if(!p||(m>=l)){o()}else{n=setTimeout(o,l-m)}}},interceptBefore:function(h,j,m,n){var l=h[j]||Ext.emptyFn;return(h[j]=function(){var a=m.apply(n||this,arguments);l.apply(this,arguments);return a})},interceptAfter:function(h,j,m,n){var l=h[j]||Ext.emptyFn;return(h[j]=function(){l.apply(this,arguments);return m.apply(n||this,arguments)})}};Ext.defer=Ext.Function.alias(Ext.Function,"defer");Ext.pass=Ext.Function.alias(Ext.Function,"pass");Ext.bind=Ext.Function.alias(Ext.Function,"bind");(function(){var n=function(){},h=/^\?/,o=/(\[):?([^\]]*)\]/g,j=/^([^\[]+)/,l=/\+/g,m=Ext.Object={chain:Object.create||function(a){n.prototype=a;var c=new n();n.prototype=null;return c},clear:function(d){var c=m.getKeys(d),a=c.length;while(a--){delete d[c[a]]}return d},toQueryObjects:function(d,q,e){var p=m.toQueryObjects,s=[],c,a;if(Ext.isArray(q)){for(c=0,a=q.length;c<a;c++){if(e){s=s.concat(p(d+"["+c+"]",q[c],true))}else{s.push({name:d,value:q[c]})}}}else{if(Ext.isObject(q)){for(c in q){if(q.hasOwnProperty(c)){if(e){s=s.concat(p(d+"["+c+"]",q[c],true))}else{s.push({name:d,value:q[c]})}}}}else{s.push({name:d,value:q})}}return s},toQueryString:function(t,v){var s=[],u=[],d,e,c,w,a;for(d in t){if(t.hasOwnProperty(d)){s=s.concat(m.toQueryObjects(d,t[d],v))}}for(e=0,c=s.length;e<c;e++){w=s[e];a=w.value;if(Ext.isEmpty(a)){a=""}else{if(Ext.isDate(a)){a=Ext.Date.toString(a)}}u.push(encodeURIComponent(w.name)+"="+encodeURIComponent(String(a)))}return u.join("&")},fromQueryString:function(O,B){var G=O.replace(h,"").split("&"),c={},e,J,H,F,C,M,E,D,P,K,d,I,a,N;for(C=0,M=G.length;C<M;C++){E=G[C];if(E.length>0){J=E.split("=");H=J[0];H=H.replace(l,"%20");H=decodeURIComponent(H);F=J[1];if(F!==undefined){F=F.replace(l,"%20");F=decodeURIComponent(F)}else{F=""}if(!B){if(c.hasOwnProperty(H)){if(!Ext.isArray(c[H])){c[H]=[c[H]]}c[H].push(F)}else{c[H]=F}}else{K=H.match(o);d=H.match(j);H=d[0];I=[];if(K===null){c[H]=F;continue}for(D=0,P=K.length;D<P;D++){a=K[D];a=(a.length===2)?"":a.substring(1,a.length-1);I.push(a)}I.unshift(H);e=c;for(D=0,P=I.length;D<P;D++){a=I[D];if(D===P-1){if(Ext.isArray(e)&&a===""){e.push(F)}else{e[a]=F}}else{if(e[a]===undefined||typeof e[a]==="string"){N=I[D+1];e[a]=(Ext.isNumeric(N)||N==="")?[]:{}}e=e[a]}}}}}return c},each:function(e,c,d){for(var a in e){if(e.hasOwnProperty(a)){if(c.call(d||e,a,e[a],e)===false){return}}}},merge:function(d){var s=1,e=arguments.length,w=m.merge,u=Ext.clone,t,a,c,v;for(;s<e;s++){t=arguments[s];for(a in t){c=t[a];if(c&&c.constructor===Object){v=d[a];if(v&&v.constructor===Object){w(v,c)}else{d[a]=u(c)}}else{d[a]=c}}}return d},mergeIf:function(p){var a=1,s=arguments.length,d=Ext.clone,e,c,q;for(;a<s;a++){e=arguments[a];for(c in e){if(!(c in p)){q=e[c];if(q&&q.constructor===Object){p[c]=d(q)}else{p[c]=q}}}}return p},getKey:function(d,a){for(var c in d){if(d.hasOwnProperty(c)&&d[c]===a){return c}}return null},getValues:function(c){var d=[],a;for(a in c){if(c.hasOwnProperty(a)){d.push(c[a])}}return d},getKeys:(typeof Object.keys=="function")?function(a){if(!a){return[]}return Object.keys(a)}:function(d){var c=[],a;for(a in d){if(d.hasOwnProperty(a)){c.push(a)}}return c},getSize:function(d){var c=0,a;for(a in d){if(d.hasOwnProperty(a)){c++}}return c},isEmpty:function(c){for(var a in c){if(c.hasOwnProperty(a)){return false}}return true},equals:(function(){var a=function(c,d){var e;for(e in c){if(c.hasOwnProperty(e)){if(c[e]!==d[e]){return false}}}return true};return function(c,d){if(c===d){return true}if(c&&d){return a(c,d)&&a(d,c)}else{if(!c&&!d){return c===d}else{return false}}}})(),classify:function(c){var d=c,s=[],e={},p=function(){var v=0,u=s.length,t;for(;v<u;v++){t=s[v];this[t]=new e[t]()}},a,q;for(a in c){if(c.hasOwnProperty(a)){q=c[a];if(q&&q.constructor===Object){s.push(a);e[a]=m.classify(q)}}}p.prototype=d;return p}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf;Ext.urlEncode=function(){var c=Ext.Array.from(arguments),a="";if((typeof c[1]==="string")){a=c[1]+"&";c[1]=false}return a+m.toQueryString.apply(m,c)};Ext.urlDecode=function(){return m.fromQueryString.apply(m,arguments)}}());Ext.Date=new function(){var q=this,l=/(\\.)/g,u=/([gGhHisucUOPZ]|MS)/,p=/([djzmnYycU]|MS)/,m=/\\/gi,s=/\{(\d+)\}/g,o=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),t=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\n");function n(a){var c=Array.prototype.slice.call(arguments,1);return a.replace(s,function(e,d){return c[d]})}Ext.apply(q,{now:Date.now||function(){return +new Date()},toString:function(c){var a=Ext.String.leftPad;return c.getFullYear()+"-"+a(c.getMonth()+1,2,"0")+"-"+a(c.getDate(),2,"0")+"T"+a(c.getHours(),2,"0")+":"+a(c.getMinutes(),2,"0")+":"+a(c.getSeconds(),2,"0")},getElapsed:function(a,c){return Math.abs(a-(c||q.now()))},useStrict:false,formatCodeToRegex:function(a,c){var d=q.parseCodes[a];if(d){d=typeof d=="function"?d():d;q.parseCodes[a]=d}return d?Ext.applyIf({c:d.c?n(d.c,c||"{0}"):d.c},d):{g:0,c:null,s:Ext.String.escapeRegex(a)}},parseFunctions:{MS:function(a,c){var d=(a||"").match(o);return d?new Date(((d[1]||"")+d[2])*1):null},time:function(a,c){var d=parseInt(a,10);if(d||d===0){return new Date(d)}return null},timestamp:function(a,c){var d=parseInt(a,10);if(d||d===0){return new Date(d*1000)}return null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return q.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(a){return Ext.Date.monthNames[a].substring(0,3)},getShortDayName:function(a){return Ext.Date.dayNames[a].substring(0,3)},getMonthNumber:function(a){return Ext.Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(a){return u.test(a.replace(l,""))},formatContainsDateInfo:function(a){return p.test(a.replace(l,""))},unescapeFormat:function(a){return a.replace(m,"")},formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",F:"Ext.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(this)",L:"(Ext.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(this)",P:"Ext.Date.getGMTOffset(this, true)",T:"Ext.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){var c,e,h,a,d;for(c="Y-m-dTH:i:sP",e=[],h=0,a=c.length;h<a;++h){d=c.charAt(h);e.push(d=="T"?"'T'":q.getFormatCode(d))}return e.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(c,a,d,h,v,j,w){h=h||0;v=v||0;j=j||0;w=w||0;var e=q.add(new Date(c<100?100:c,a-1,d,h,v,j,w),q.YEAR,c<100?c-100:0);return c==e.getFullYear()&&a==e.getMonth()+1&&d==e.getDate()&&h==e.getHours()&&v==e.getMinutes()&&j==e.getSeconds()&&w==e.getMilliseconds()},parse:function(a,d,c){var e=q.parseFunctions;if(e[d]==null){q.createParser(d)}return e[d].call(q,a,Ext.isDefined(c)?c:q.useStrict)},parseDate:function(a,d,c){return q.parse(a,d,c)},getFormatCode:function(a){var c=q.formatCodes[a];if(c){c=typeof c=="function"?c():c;q.formatCodes[a]=c}return c||("'"+Ext.String.escape(a)+"'")},createFormat:function(d){var e=[],c=false,h="",a;for(a=0;a<d.length;++a){h=d.charAt(a);if(!c&&h=="\\"){c=true}else{if(c){c=false;e.push("'"+Ext.String.escape(h)+"'")}else{e.push(q.getFormatCode(h))}}}q.formatFunctions[d]=Ext.functionFactory("return "+e.join("+"))},createParser:function(y){var j=q.parseRegexes.length,x=1,h=[],z=[],a=false,w="",d=0,c=y.length,A=[],e;for(;d<c;++d){w=y.charAt(d);if(!a&&w=="\\"){a=true}else{if(a){a=false;z.push(Ext.String.escape(w))}else{e=q.formatCodeToRegex(w,x);x+=e.g;z.push(e.s);if(e.g&&e.c){if(e.calcAtEnd){A.push(e.c)}else{h.push(e.c)}}}}}h=h.concat(A);q.parseRegexes[j]=new RegExp("^"+z.join("")+"$","i");q.parseFunctions[y]=Ext.functionFactory("input","strict",n(t,j,h.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){for(var c=[],a=0;a<7;c.push(q.getShortDayName(a)),++a){}return{g:0,c:null,s:"(?:"+c.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+q.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\n",s:"("+q.monthNames.join("|")+")"}},M:function(){for(var c=[],a=0;a<12;c.push(q.getShortMonthName(a)),++a){}return Ext.applyIf({s:"("+c.join("|")+")"},q.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:true},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:true},g:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|[0-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var d=[],a=[q.formatCodeToRegex("Y",1),q.formatCodeToRegex("m",2),q.formatCodeToRegex("d",3),q.formatCodeToRegex("H",4),q.formatCodeToRegex("i",5),q.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",q.formatCodeToRegex("P",8).c,"}else{",q.formatCodeToRegex("O",8).c,"}","}"].join("\n")}],c,e;for(c=0,e=a.length;c<e;++c){d.push(a[c].c)}return{g:1,c:d.join(""),s:[a[0].s,"(?:","-",a[1].s,"(?:","-",a[2].s,"(?:","(?:T| )?",a[3].s,":",a[4].s,"(?::",a[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(c,a){return q.format(c,a)},isEqual:function(a,c){if(a&&c){return(a.getTime()===c.getTime())}return !(a||c)},format:function(a,d){var c=q.formatFunctions;if(!Ext.isDate(a)){return""}if(c[d]==null){q.createFormat(d)}return c[d].call(a)+""},getTimezone:function(a){return a.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,5})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(c,a){var d=c.getTimezoneOffset();return(d>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(d)/60),2,"0")+(a?":":"")+Ext.String.leftPad(Math.abs(d%60),2,"0")},getDayOfYear:function(e){var h=0,c=Ext.Date.clone(e),a=e.getMonth(),d;for(d=0,c.setDate(1),c.setMonth(0);d<a;c.setMonth(++d)){h+=q.getDaysInMonth(c)}return h+e.getDate()-1},getWeekOfYear:(function(){var c=86400000,a=7*c;return function(h){var e=Date.UTC(h.getFullYear(),h.getMonth(),h.getDate()+3)/c,j=Math.floor(e/7),d=new Date(j*a).getUTCFullYear();return j-Math.floor(Date.UTC(d,0,7)/a)+1}}()),isLeapYear:function(c){var a=c.getFullYear();return !!((a&3)==0&&(a%100||(a%400==0&&a)))},getFirstDayOfMonth:function(a){var c=(a.getDay()-(a.getDate()-1))%7;return(c<0)?(c+7):c},getLastDayOfMonth:function(a){return q.getLastDateOfMonth(a).getDay()},getFirstDateOfMonth:function(a){return new Date(a.getFullYear(),a.getMonth(),1)},getLastDateOfMonth:function(a){return new Date(a.getFullYear(),a.getMonth(),q.getDaysInMonth(a))},getDaysInMonth:(function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(c){var d=c.getMonth();return d==1&&q.isLeapYear(c)?29:a[d]}}()),getSuffix:function(a){switch(a.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(a){return new Date(a.getTime())},isDST:function(a){return new Date(a.getFullYear(),0,1).getTimezoneOffset()!=a.getTimezoneOffset()},clearTime:function(c,d){if(d){return Ext.Date.clearTime(Ext.Date.clone(c))}var h=c.getDate(),a,e;c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);if(c.getDate()!=h){for(a=1,e=q.add(c,Ext.Date.HOUR,a);e.getDate()!=h;a++,e=q.add(c,Ext.Date.HOUR,a)){}c.setDate(h);c.setHours(e.getHours())}return c},add:function(v,w,e){var d=Ext.Date.clone(v),c=Ext.Date,a,h,j=0;if(!w||e===0){return d}h=e-parseInt(e,10);e=parseInt(e,10);if(e){switch(w.toLowerCase()){case Ext.Date.MILLI:d.setTime(d.getTime()+e);break;case Ext.Date.SECOND:d.setTime(d.getTime()+e*1000);break;case Ext.Date.MINUTE:d.setTime(d.getTime()+e*60*1000);break;case Ext.Date.HOUR:d.setTime(d.getTime()+e*60*60*1000);break;case Ext.Date.DAY:d.setDate(d.getDate()+e);break;case Ext.Date.MONTH:a=v.getDate();if(a>28){a=Math.min(a,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(v),Ext.Date.MONTH,e)).getDate())}d.setDate(a);d.setMonth(v.getMonth()+e);break;case Ext.Date.YEAR:a=v.getDate();if(a>28){a=Math.min(a,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(v),Ext.Date.YEAR,e)).getDate())}d.setDate(a);d.setFullYear(v.getFullYear()+e);break}}if(h){switch(w.toLowerCase()){case Ext.Date.MILLI:j=1;break;case Ext.Date.SECOND:j=1000;break;case Ext.Date.MINUTE:j=1000*60;break;case Ext.Date.HOUR:j=1000*60*60;break;case Ext.Date.DAY:j=1000*60*60*24;break;case Ext.Date.MONTH:a=q.getDaysInMonth(d);j=1000*60*60*24*a;break;case Ext.Date.YEAR:a=(q.isLeapYear(d)?366:365);j=1000*60*60*24*a;break}if(j){d.setTime(d.getTime()+j*h)}}return d},subtract:function(a,c,d){return q.add(a,c,-d)},between:function(a,d,c){var e=a.getTime();return d.getTime()<=e&&e<=c.getTime()},compat:function(){var h=window.Date,j,y=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],c=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],a=y.length,e=c.length,d,x,w;for(w=0;w<a;w++){d=y[w];h[d]=q[d]}for(j=0;j<e;j++){x=c[j];h.prototype[x]=function(){var v=Array.prototype.slice.call(arguments);v.unshift(this);return q[x].apply(q,v)}}}})}();(function(h){var j=[],e=function(){},l=function(a,m,c,d){var n=function(){var o=this.callParent(arguments);a.apply(this,arguments);return o};n.$name=c;n.$owner=d;if(m){n.$previous=m.$previous;m.$previous=n}return n};Ext.apply(e,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},extend:function(d){var s=d.prototype,t,p,o,c,q,a;p=this.prototype=Ext.Object.chain(s);p.self=this;this.superclass=p.superclass=s;if(!d.$isClass){t=Ext.Base.prototype;for(o in t){if(o in p){p[o]=t[o]}}}a=s.$inheritableStatics;if(a){for(o=0,c=a.length;o<c;o++){q=a[o];if(!this.hasOwnProperty(q)){this[q]=d[q]}}}if(d.$onExtended){this.$onExtended=d.$onExtended.slice()}p.config=new p.configClass();p.initConfigList=p.initConfigList.slice();p.initConfigMap=Ext.clone(p.initConfigMap);p.configMap=Ext.Object.chain(p.configMap)},$onExtended:[],triggerExtended:function(){var c=this.$onExtended,d=c.length,m,a;if(d>0){for(m=0;m<d;m++){a=c[m];a.fn.apply(a.scope||this,arguments)}}},onExtended:function(a,c){this.$onExtended.push({fn:a,scope:c});return this},addConfig:function(w,s){var c=this.prototype,d=Ext.Class.configNameCache,v=c.configMap,u=c.initConfigList,x=c.initConfigMap,t=c.config,z,y,a;for(y in w){if(w.hasOwnProperty(y)){if(!v[y]){v[y]=true}a=w[y];z=d[y].initialized;if(!x[y]&&a!==null&&!c[z]){x[y]=true;u.push(y)}}}if(s){Ext.merge(t,w)}else{Ext.mergeIf(t,w)}c.configClass=Ext.Object.classify(t)},addStatics:function(d){var a,c;for(c in d){if(d.hasOwnProperty(c)){a=d[c];if(typeof a=="function"&&!a.$isClass&&a!==Ext.emptyFn&&a!==Ext.identityFn){a.$owner=this;a.$name=c}this[c]=a}}return this},addInheritableStatics:function(n){var c,o,d=this.prototype,m,a;c=d.$inheritableStatics;o=d.$hasInheritableStatics;if(!c){c=d.$inheritableStatics=[];o=d.$hasInheritableStatics={}}for(m in n){if(n.hasOwnProperty(m)){a=n[m];this[m]=a;if(!o[m]){o[m]=true;c.push(m)}}}return this},addMembers:function(q){var o=this.prototype,s=Ext.enumerables,a=[],d,c,p,t;for(p in q){a.push(p)}if(s){a.push.apply(a,s)}for(d=0,c=a.length;d<c;d++){p=a[d];if(q.hasOwnProperty(p)){t=q[p];if(typeof t=="function"&&!t.$isClass&&t!==Ext.emptyFn&&t!==Ext.identityFn){t.$owner=this;t.$name=p}o[p]=t}}return this},addMember:function(c,a){if(typeof a=="function"&&!a.$isClass&&a!==Ext.emptyFn&&a!==Ext.identityFn){a.$owner=this;a.$name=c}this.prototype[c]=a;return this},implement:function(){this.addMembers.apply(this,arguments)},borrow:function(q,t){var a=this.prototype,c=q.prototype,s,p,u,d,v;t=Ext.Array.from(t);for(s=0,p=t.length;s<p;s++){u=t[s];v=c[u];if(typeof v=="function"){d=Ext.Function.clone(v);d.$owner=this;d.$name=u;a[u]=d}else{a[u]=v}}return this},override:function(y){var d=this,a=Ext.enumerables,t=d.prototype,w=Ext.Function.clone,z,u,x,c,s,v;if(arguments.length===2){z=y;y={};y[z]=arguments[1];a=null}do{s=[];c=null;for(z in y){if(z=="statics"){c=y[z]}else{if(z=="inheritableStatics"){d.addInheritableStatics(y[z])}else{if(z=="config"){d.addConfig(y[z],true)}else{s.push(z)}}}}if(a){s.push.apply(s,a)}for(u=s.length;u--;){z=s[u];if(y.hasOwnProperty(z)){x=y[z];if(typeof x=="function"&&!x.$className&&x!==Ext.emptyFn&&x!==Ext.identityFn){if(typeof x.$owner!="undefined"){x=w(x)}x.$owner=d;x.$name=z;v=t.hasOwnProperty(z)&&t[z];if(v){x.$previous=v}}t[z]=x}}t=d;y=c}while(y);return this},callParent:function(c){var a;return(a=this.callParent.caller)&&(a.$previous||((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name])).apply(this,c||j)},callSuper:function(c){var a;return(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass.self[a.$name]).apply(this,c||j)},mixin:function(A,z){var w=this,C=z.prototype,u=w.prototype,a,v,y,x,c,d,t,B;if(typeof C.onClassMixedIn!="undefined"){C.onClassMixedIn.call(z,w)}if(!u.hasOwnProperty("mixins")){if("mixins" in u){u.mixins=Ext.Object.chain(u.mixins)}else{u.mixins={}}}for(a in C){d=C[a];if(a==="mixins"){Ext.merge(u.mixins,d)}else{if(a==="xhooks"){for(t in d){B=d[t];B.$previous=Ext.emptyFn;if(u.hasOwnProperty(t)){l(B,u[t],t,w)}else{u[t]=l(B,null,t,w)}}}else{if(!(a==="mixinId"||a==="config")&&(u[a]===undefined)){u[a]=d}}}}v=C.$inheritableStatics;if(v){for(y=0,x=v.length;y<x;y++){c=v[y];if(!w.hasOwnProperty(c)){w[c]=z[c]}}}if("config" in C){w.addConfig(C.config,false)}u.mixins[A]=C;return w},getName:function(){return Ext.getClassName(this)},createAlias:h(function(a,c){this.override(a,function(){return this[c].apply(this,arguments)})}),addXtype:function(a){var m=this.prototype,c=m.xtypesMap,d=m.xtypes,n=m.xtypesChain;if(!m.hasOwnProperty("xtypesMap")){c=m.xtypesMap=Ext.merge({},m.xtypesMap||{});d=m.xtypes=m.xtypes?[].concat(m.xtypes):[];n=m.xtypesChain=m.xtypesChain?[].concat(m.xtypesChain):[];m.xtype=a}if(!c[a]){c[a]=true;d.push(a);n.push(a);Ext.ClassManager.setAlias(this,"widget."+a)}return this}});e.implement({isInstance:true,$className:"Ext.Base",configClass:Ext.emptyFn,initConfigList:[],configMap:{},initConfigMap:{},statics:function(){var a=this.statics.caller,c=this.self;if(!a){return c}return a.$owner},callParent:function(c){var a,d=(a=this.callParent.caller)&&(a.$previous||((a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]));return d.apply(this,c||j)},callSuper:function(c){var a,d=(a=this.callSuper.caller)&&((a=a.$owner?a:a.caller)&&a.$owner.superclass[a.$name]);return d.apply(this,c||j)},self:e,constructor:function(){return this},initConfig:function(x){var s=x,t=Ext.Class.configNameCache,v=new this.configClass(),a=this.initConfigList,w=this.configMap,c,u,d,y,z;this.initConfig=Ext.emptyFn;this.initialConfig=s||{};this.config=x=(s)?Ext.merge(v,x):v;if(s){a=a.slice();for(y in s){if(w[y]){if(s[y]!==null){a.push(y);this[t[y].initialized]=false}}}}for(u=0,d=a.length;u<d;u++){y=a[u];c=t[y];z=c.initialized;if(!this[z]){this[z]=true;this[c.set].call(this,x[y])}}return this},hasConfig:function(a){return Boolean(this.configMap[a])},setConfig:function(o,t){if(!o){return this}var p=Ext.Class.configNameCache,s=this.config,a=this.configMap,c=this.initialConfig,q,d;t=Boolean(t);for(q in o){if(t&&c.hasOwnProperty(q)){continue}d=o[q];s[q]=d;if(a[q]){this[p[q].set](d)}}return this},getConfig:function(a){var c=Ext.Class.configNameCache;return this[c[a].get]()},getInitialConfig:function(a){var c=this.config;if(!a){return c}else{return c[a]}},onConfigUpdate:function(s,d,c){var a=this.self,v,t,x,u,q,w;s=Ext.Array.from(s);c=c||this;for(v=0,t=s.length;v<t;v++){x=s[v];u="update"+Ext.String.capitalize(x);q=this[u]||Ext.emptyFn;w=function(){q.apply(this,arguments);c[d].apply(c,arguments)};w.$name=u;w.$owner=a;this[u]=w}},destroy:function(){this.destroy=Ext.emptyFn}});e.prototype.callOverridden=e.prototype.callParent;Ext.Base=e}(Ext.Function.flexSetter));(function(){var o,h=Ext.Base,l=[],m,n;for(m in h){if(h.hasOwnProperty(m)){l.push(m)}}n=l.length;function j(a){function c(){return this.constructor.apply(this,arguments)||null}return c}Ext.Class=o=function(c,a,d){if(typeof c!="function"){d=a;a=c;c=null}if(!a){a={}}c=o.create(c,a);o.process(c,a,d);return c};Ext.apply(o,{onBeforeCreated:function(c,a,d){c.addMembers(a);d.onCreated.call(c,c)},create:function(e,a){var d,c;if(!e){e=j()}for(c=0;c<n;c++){d=l[c];e[d]=h[d]}return e},process:function(B,d,z){var A=d.preprocessors||o.defaultPreprocessors,G=this.preprocessors,D={onBeforeCreated:this.onBeforeCreated},E=[],C,e,x,F,y,a,c;delete d.preprocessors;for(x=0,F=A.length;x<F;x++){C=A[x];if(typeof C=="string"){C=G[C];e=C.properties;if(e===true){E.push(C.fn)}else{if(e){for(y=0,a=e.length;y<a;y++){c=e[y];if(d.hasOwnProperty(c)){E.push(C.fn);break}}}}}else{E.push(C)}}D.onCreated=z?z:Ext.emptyFn;D.preprocessors=E;this.doProcess(B,d,D)},doProcess:function(e,s,p){var a=this,q=p.preprocessors,d=q.shift(),c=a.doProcess;for(;d;d=q.shift()){if(d.call(a,e,s,p,c)===false){return}}p.onBeforeCreated.apply(a,arguments)},preprocessors:{},registerPreprocessor:function(e,a,d,p,c){if(!p){p="last"}if(!d){d=[e]}this.preprocessors[e]={name:e,properties:d||false,fn:a};this.setDefaultPreprocessorPosition(e,p,c);return this},getPreprocessor:function(a){return this.preprocessors[a]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(a){this.defaultPreprocessors=Ext.Array.from(a);return this},setDefaultPreprocessorPosition:function(d,a,c){var p=this.defaultPreprocessors,e;if(typeof a=="string"){if(a==="first"){p.unshift(d);return this}else{if(a==="last"){p.push(d);return this}}a=(a==="after")?1:-1}e=Ext.Array.indexOf(p,c);if(e!==-1){Ext.Array.splice(p,Math.max(0,e+a),0,d)}return this},configNameCache:{},getConfigNameMap:function(c){var d=this.configNameCache,a=d[c],e;if(!a){e=c.charAt(0).toUpperCase()+c.substr(1);a=d[c]={internal:c,initialized:"_is"+e+"Initialized",apply:"apply"+e,update:"update"+e,set:"set"+e,get:"get"+e,doSet:"doSet"+e,changeEvent:c.toLowerCase()+"change"}}return a}});o.registerPreprocessor("extend",function(v,t,a){var s=Ext.Base,e=s.prototype,d=t.extend,w,c,u;delete t.extend;if(d&&d!==Object){w=d}else{w=s}c=w.prototype;if(!w.$isClass){for(u in e){if(!c[u]){c[u]=e[u]}}}v.extend(w);v.triggerExtended.apply(v,arguments);if(t.onClassExtended){v.onExtended(t.onClassExtended,v);delete t.onClassExtended}},true);o.registerPreprocessor("statics",function(c,a){c.addStatics(a.statics);delete a.statics});o.registerPreprocessor("inheritableStatics",function(c,a){c.addInheritableStatics(a.inheritableStatics);delete a.inheritableStatics});o.registerPreprocessor("config",function(e,a){var c=a.config,d=e.prototype;delete a.config;Ext.Object.each(c,function(D,I){var K=o.getConfigNameMap(D),A=K.internal,F=K.initialized,J=K.apply,C=K.update,M=K.set,E=K.get,G=(M in d)||a.hasOwnProperty(M),B=(J in d)||a.hasOwnProperty(J),O=(C in d)||a.hasOwnProperty(C),H,N;if(I===null||(!G&&!B&&!O)){d[A]=I;d[F]=true}else{d[F]=false}if(!G){a[M]=function(s){var t=this[A],p=this[J],q=this[C];if(!this[F]){this[F]=true}if(p){s=p.call(this,s,t)}if(typeof s!="undefined"){this[A]=s;if(q&&s!==t){q.call(this,s,t)}}return this}}if(!(E in d)||a.hasOwnProperty(E)){N=a[E]||false;if(N){H=function(){return N.apply(this,arguments)}}else{H=function(){return this[A]}}a[E]=function(){var p;if(!this[F]){this[F]=true;this[M](this.config[D])}p=this[E];if("$previous" in p){p.$previous=H}else{this[E]=H}return H.apply(this,arguments)}}});e.addConfig(c,true)});o.registerPreprocessor("mixins",function(c,s,q){var e=s.mixins,a,d,u,t;delete s.mixins;Ext.Function.interceptBefore(q,"onCreated",function(){if(e instanceof Array){for(u=0,t=e.length;u<t;u++){d=e[u];a=d.prototype.mixinId||d.$className;c.mixin(a,d)}}else{for(var p in e){if(e.hasOwnProperty(p)){c.mixin(p,e[p])}}}})});Ext.extend=function(c,a,d){if(arguments.length===2&&Ext.isObject(a)){d=a;a=c;c=null}var e;if(!a){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}d.extend=a;d.preprocessors=["extend","statics","inheritableStatics","mixins","config"];if(c){e=new o(c,d);e.prototype.constructor=c}else{e=new o(d)}e.prototype.override=function(q){for(var s in q){if(q.hasOwnProperty(s)){this[s]=q[s]}}};return e}}());(function(q,o,m,p,n){function l(){function a(){return this.constructor.apply(this,arguments)||null}return a}var j=Ext.ClassManager={classes:{},existCache:{},namespaceRewrites:[{from:"Ext.",to:Ext}],maps:{alternateToName:{},aliasToName:{},nameToAliases:{},nameToAlternates:{}},enableNamespaceParseCache:true,namespaceParseCache:{},instantiators:[],isCreated:function(t){var a=this.existCache,c,s,d,e,h;if(this.classes[t]||a[t]){return true}e=n;h=this.parseNamespace(t);for(c=0,s=h.length;c<s;c++){d=h[c];if(typeof d!="string"){e=d}else{if(!e||!e[d]){return false}e=e[d]}}a[t]=true;this.triggerCreated(t);return true},createdListeners:[],nameCreatedListeners:{},triggerCreated:function(A){var y=this.createdListeners,v=this.nameCreatedListeners,h=this.maps.nameToAlternates[A],z=[A],d,a,e,c,w,x;for(d=0,a=y.length;d<a;d++){w=y[d];w.fn.call(w.scope,A)}if(h){z.push.apply(z,h)}for(d=0,a=z.length;d<a;d++){x=z[d];y=v[x];if(y){for(e=0,c=y.length;e<c;e++){w=y[e];w.fn.call(w.scope,x)}delete v[x]}}},onCreated:function(s,a,c){var d=this.createdListeners,e=this.nameCreatedListeners,h={fn:s,scope:a};if(c){if(this.isCreated(c)){s.call(a,c);return}if(!e[c]){e[c]=[]}e[c].push(h)}else{d.push(h)}},parseNamespace:function(v){var x=this.namespaceParseCache,u,e,c,w,y,z,a,h,d;if(this.enableNamespaceParseCache){if(x.hasOwnProperty(v)){return x[v]}}u=[];e=this.namespaceRewrites;c=n;w=v;for(h=0,d=e.length;h<d;h++){y=e[h];z=y.from;a=y.to;if(w===z||w.substring(0,z.length)===z){w=w.substring(z.length);if(typeof a!="string"){c=a}else{u=u.concat(a.split("."))}break}}u.push(c);u=u.concat(w.split("."));if(this.enableNamespaceParseCache){x[v]=u}return u},setNamespace:function(a,s){var d=n,h=this.parseNamespace(a),t=h.length-1,e=h[t],u,c;for(u=0;u<t;u++){c=h[u];if(typeof c!="string"){d=c}else{if(!d[c]){d[c]={}}d=d[c]}}d[e]=s;return d[e]},createNamespaces:function(){var d=n,h,a,t,c,s,e;for(t=0,s=arguments.length;t<s;t++){h=this.parseNamespace(arguments[t]);for(c=0,e=h.length;c<e;c++){a=h[c];if(typeof a!="string"){d=a}else{if(!d[a]){d[a]={}}d=d[a]}}}return d},set:function(e,t){var a=this,h=a.maps,s=h.nameToAlternates,c=a.getName(t),d;a.classes[e]=a.setNamespace(e,t);if(c&&c!==e){h.alternateToName[e]=c;d=s[c]||(s[c]=[]);d.push(e)}return this},get:function(c){var t=this.classes,e,h,d,a,s;if(t[c]){return t[c]}e=n;h=this.parseNamespace(c);for(a=0,s=h.length;a<s;a++){d=h[a];if(typeof d!="string"){e=d}else{if(!e||!e[d]){return null}e=e[d]}}return e},setAlias:function(e,d){var a=this.maps.aliasToName,h=this.maps.nameToAliases,c;if(typeof e=="string"){c=e}else{c=this.getName(e)}if(d&&a[d]!==c){a[d]=c}if(!h[c]){h[c]=[]}if(d){Ext.Array.include(h[c],d)}return this},addNameAliasMappings:function(e){var s=this.maps.aliasToName,h=this.maps.nameToAliases,a,t,c,d;for(a in e){t=h[a]||(h[a]=[]);for(d=0;d<e[a].length;d++){c=e[a][d];if(!s[c]){s[c]=a;t.push(c)}}}return this},addNameAlternateMappings:function(a){var e=this.maps.alternateToName,h=this.maps.nameToAlternates,c,t,s,d;for(c in a){t=h[c]||(h[c]=[]);for(d=0;d<a[c].length;d++){s=a[c][d];if(!e[s]){e[s]=c;t.push(s)}}}return this},getByAlias:function(a){return this.get(this.getNameByAlias(a))},getNameByAlias:function(a){return this.maps.aliasToName[a]||""},getNameByAlternate:function(a){return this.maps.alternateToName[a]||""},getAliasesByName:function(a){return this.maps.nameToAliases[a]||[]},getName:function(a){return a&&a.$className||""},getClass:function(a){return a&&a.self||null},create:function(d,a,e){var c=l();if(typeof a=="function"){a=a(c)}a.$className=d;return new q(c,a,function(){var A=a.postprocessors||j.defaultPostprocessors,D=j.postprocessors,C=[],E,y,F,z,h,x,B;delete a.postprocessors;for(y=0,F=A.length;y<F;y++){E=A[y];if(typeof E=="string"){E=D[E];x=E.properties;if(x===true){C.push(E.fn)}else{if(x){for(z=0,h=x.length;z<h;z++){B=x[z];if(a.hasOwnProperty(B)){C.push(E.fn);break}}}}}else{C.push(E)}}a.postprocessors=C;a.createdFn=e;j.processCreate(d,this,a)})},processCreate:function(a,d,h){var s=this,e=h.postprocessors.shift(),c=h.createdFn;if(!e){if(a){s.set(a,d)}if(c){c.call(d,d)}if(a){s.triggerCreated(a)}return}if(e.call(s,a,d,h,s.processCreate)!==false){s.processCreate(a,d,h)}},createOverride:function(h,s,u){var e=this,d=s.override,a=s.requires,t=s.uses,c=s.compatibility,v=function(){var x,w;if(a){w=a;a=null;Ext.Loader.require(w,v)}else{x=e.get(d);delete s.override;delete s.compatibility;delete s.requires;delete s.uses;Ext.override(x,s);e.triggerCreated(h);if(t){Ext.Loader.addUsedClasses(t)}if(u){u.call(x)}}};e.existCache[h]=true;if(!c||Ext.checkVersion(c)){e.onCreated(v,e,d)}return e},instantiateByAlias:function(){var c=arguments[0],d=m.call(arguments),a=this.getNameByAlias(c);if(!a){a=this.maps.aliasToName[c];Ext.syncRequire(a)}d[0]=a;return this.instantiate.apply(this,d)},instantiate:function(){var c=arguments[0],s=typeof c,d=m.call(arguments,1),a=c,h,e;if(s!="function"){if(s!="string"&&d.length===0){d=[c];c=c.xclass}e=this.get(c)}else{e=c}if(!e){h=this.getNameByAlias(c);if(h){c=h;e=this.get(c)}}if(!e){h=this.getNameByAlternate(c);if(h){c=h;e=this.get(c)}}if(!e){Ext.syncRequire(c);e=this.get(c)}return this.getInstantiator(d.length)(e,d)},dynInstantiate:function(a,c){c=p(c,true);c.unshift(a);return this.instantiate.apply(this,c)},getInstantiator:function(a){var c=this.instantiators,h,d,e;h=c[a];if(!h){d=a;e=[];for(d=0;d<a;d++){e.push("a["+d+"]")}h=c[a]=new Function("c","a","return new c("+e.join(",")+")")}return h},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(d,h,c,e,a){if(!e){e="last"}if(!c){c=[d]}this.postprocessors[d]={name:d,properties:c||false,fn:h};this.setDefaultPostprocessorPosition(d,e,a);return this},setDefaultPostprocessors:function(a){this.defaultPostprocessors=p(a);return this},setDefaultPostprocessorPosition:function(d,h,a){var c=this.defaultPostprocessors,e;if(typeof h=="string"){if(h==="first"){c.unshift(d);return this}else{if(h==="last"){c.push(d);return this}}h=(h==="after")?1:-1}e=Ext.Array.indexOf(c,a);if(e!==-1){Ext.Array.splice(c,Math.max(0,e+h),0,d)}return this},getNamesByExpression:function(c){var e=this.maps.nameToAliases,a=[],w,h,u,v,x,t,d;if(c.indexOf("*")!==-1){c=c.replace(/\*/g,"(.*?)");x=new RegExp("^"+c+"$");for(w in e){if(e.hasOwnProperty(w)){u=e[w];if(w.search(x)!==-1){a.push(w)}else{for(t=0,d=u.length;t<d;t++){h=u[t];if(h.search(x)!==-1){a.push(w);break}}}}}}else{v=this.getNameByAlias(c);if(v){a.push(v)}else{v=this.getNameByAlternate(c);if(v){a.push(v)}else{a.push(c)}}}return a}};j.registerPostprocessor("alias",function(c,d,h){var e=h.alias,a,s;for(a=0,s=e.length;a<s;a++){o=e[a];this.setAlias(d,o)}},["xtype","alias"]);j.registerPostprocessor("singleton",function(d,e,a,c){if(a.singleton){c.call(this,d,new e(),a)}else{return true}return false});j.registerPostprocessor("alternateClassName",function(d,e,s){var a=s.alternateClassName,c,t,h;if(!(a instanceof Array)){a=[a]}for(c=0,t=a.length;c<t;c++){h=a[c];this.set(h,e)}});Ext.apply(Ext,{create:o(j,"instantiate"),widget:function(c,d){var h=c,a,t,e,s;if(typeof h!="string"){d=c;h=d.xtype}else{d=d||{}}if(d.isComponent){return d}a="widget."+h;t=j.getNameByAlias(a);if(!t){s=true}e=j.get(t);if(s||!e){return j.instantiateByAlias(a,d)}return new e(d)},createByAlias:o(j,"instantiateByAlias"),define:function(c,a,d){if(a.override){return j.createOverride.apply(j,arguments)}return j.create.apply(j,arguments)},undefine:function(c){var y=j.classes,F=j.maps,E=F.aliasToName,D=F.nameToAliases,B=F.alternateToName,e=F.nameToAlternates,A=D[c],a=e[c],x,C,z,h;delete j.namespaceParseCache[c];delete D[c];delete e[c];delete y[c];if(A){for(h=A.length;h--;){delete E[A[h]]}}if(a){for(h=a.length;h--;){delete B[a[h]]}}x=j.parseNamespace(c);C=x.length-1;z=x[0];for(h=1;h<C;h++){z=z[x[h]];if(!z){return}}try{delete z[x[C]]}catch(d){z[x[C]]=undefined}},getClassName:o(j,"getName"),getDisplayName:function(a){if(a){if(a.displayName){return a.displayName}if(a.$name&&a.$class){return Ext.getClassName(a.$class)+"#"+a.$name}if(a.$className){return a.$className}}return"Anonymous"},getClass:o(j,"getClass"),namespace:o(j,"createNamespaces")});Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;q.registerPreprocessor("className",function(c,a){if("$className" in a){c.$className=a.$className}},true,"first");q.registerPreprocessor("alias",function(B,e){var D=B.prototype,x=p(e.xtype),z=p(e.alias),A="widget.",C=A.length,d=Array.prototype.slice.call(D.xtypesChain||[]),w=Ext.merge({},D.xtypesMap||{}),h,a,c,y;for(h=0,a=z.length;h<a;h++){c=z[h];if(c.substring(0,C)===A){y=c.substring(C);Ext.Array.include(x,y)}}B.xtype=e.xtype=x[0];e.xtypes=x;for(h=0,a=x.length;h<a;h++){y=x[h];if(!w[y]){w[y]=true;d.push(y)}}e.xtypesChain=d;e.xtypesMap=w;Ext.Function.interceptAfter(e,"onClassCreated",function(){var t=D.mixins,u,s;for(u in t){if(t.hasOwnProperty(u)){s=t[u];x=s.xtypes;if(x){for(h=0,a=x.length;h<a;h++){y=x[h];if(!w[y]){w[y]=true;d.push(y)}}}}}});for(h=0,a=x.length;h<a;h++){y=x[h];Ext.Array.include(z,A+y)}e.alias=z},["xtype","alias"])}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global));if(Ext._alternatesMetadata){Ext.ClassManager.addNameAlternateMappings(Ext._alternatesMetadata);Ext._alternatesMetadata=null}if(Ext._aliasMetadata){Ext.ClassManager.addNameAliasMappings(Ext._aliasMetadata);Ext._aliasMetadata=null}Ext.Loader=new function(){var P=this,X=Ext.ClassManager,E=Ext.Class,U=Ext.Function.flexSetter,J=Ext.Function.alias,Y=Ext.Function.pass,V=Ext.Function.defer,S=Ext.Array.erase,K=["extend","mixins","requires"],C={},M=[],W=/\/\.\//g,T=/\./g,Q=0;Ext.apply(P,{isInHistory:C,history:M,config:{enabled:false,scriptChainDelay:false,disableCaching:true,disableCachingParam:"_dc",garbageCollect:false,paths:{Ext:"."},preserveScripts:true,scriptCharset:undefined},setConfig:function(a,c){if(Ext.isObject(a)&&arguments.length===1){Ext.merge(P.config,a);if("paths" in a){Ext.app.collectNamespaces(a.paths)}}else{P.config[a]=(Ext.isObject(c))?Ext.merge(P.config[a],c):c;if(a==="paths"){Ext.app.collectNamespaces(c)}}return P},getConfig:function(a){if(a){return P.config[a]}return P.config},setPath:U(function(a,c){P.config.paths[a]=c;Ext.app.namespaces[a]=true;Q++;return P}),addClassPathMappings:function(c){var a;if(Q==0){P.config.paths=c}else{for(a in c){P.config.paths[a]=c[a]}}Q++;return P},getPath:function(a){var d="",c=P.config.paths,e=P.getPrefix(a);if(e.length>0){if(e===a){return c[e]}d=c[e];a=a.substring(e.length+1)}if(d.length>0){d+="/"}return d.replace(W,"/")+a.replace(T,"/")+".js"},getPrefix:function(e){var c=P.config.paths,d,a="";if(c.hasOwnProperty(e)){return e}for(d in c){if(c.hasOwnProperty(d)&&d+"."===e.substring(0,d.length+1)){if(d.length>a.length){a=d}}}return a},isAClassNameWithAKnownPrefix:function(a){var c=P.getPrefix(a);return c!==""&&c!==a},require:function(d,e,a,c){if(e){e.call(a)}},syncRequire:function(){},exclude:function(a){return{require:function(c,d,e){return P.require(c,d,e,a)},syncRequire:function(c,d,e){return P.syncRequire(c,d,e,a)}}},onReady:function(d,e,c,a){var h;if(c!==false&&Ext.onDocumentReady){h=d;d=function(){Ext.onDocumentReady(h,e,a)}}d.call(e)}});var H=[],G={},D={},N={},F={},I={},B=[],A=[],R={},O=function(a,c){return c.priority-a.priority};Ext.apply(P,{documentHead:typeof document!="undefined"&&(document.head||document.getElementsByTagName("head")[0]),isLoading:false,queue:H,isClassFileLoaded:G,isFileLoaded:D,readyListeners:B,optionalRequires:A,requiresMap:R,numPendingFiles:0,numLoadedFiles:0,hasFileLoadError:false,classNameToFilePathMap:F,scriptsLoading:0,syncModeEnabled:false,scriptElements:I,refreshQueue:function(){var c=H.length,h,d,a,e;if(!c&&!P.scriptsLoading){return P.triggerReady()}for(h=0;h<c;h++){d=H[h];if(d){e=d.requires;for(a=0;a<e.length;){if(X.isCreated(e[a])){S(e,a,1)}else{a++}}if(d.requires.length===0){S(H,h,1);d.callback.call(d.scope);P.refreshQueue();break}}}return P},injectScriptElement:function(e,l,o,h,c){var j=document.createElement("script"),n=false,d=P.config,m=function(){if(!n){n=true;j.onload=j.onreadystatechange=j.onerror=null;if(typeof d.scriptChainDelay=="number"){V(l,d.scriptChainDelay,h)}else{l.call(h)}P.cleanupScriptElement(j,d.preserveScripts===false,d.garbageCollect)}},a=function(p){V(o,1,h);P.cleanupScriptElement(j,d.preserveScripts===false,d.garbageCollect)};j.type="text/javascript";j.onerror=a;c=c||d.scriptCharset;if(c){j.charset=c}if("addEventListener" in j){j.onload=m}else{if("readyState" in j){j.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){m()}}}else{j.onload=m}}j.src=e;(P.documentHead||document.getElementsByTagName("head")[0]).appendChild(j);return j},removeScriptElement:function(a){if(I[a]){P.cleanupScriptElement(I[a],true,!!P.getConfig("garbageCollect"));delete I[a]}return P},cleanupScriptElement:function(e,h,d){var c;e.onload=e.onreadystatechange=e.onerror=null;if(h){Ext.removeNode(e);if(d){for(c in e){try{if(c!="src"){e[c]=null}delete e[c]}catch(a){}}}}return P},loadScript:function(h){var a=P.getConfig(),c=typeof h=="string",d=c?h:h.url,n=!c&&h.onError,m=!c&&h.onLoad,j=!c&&h.scope,l=function(){P.numPendingFiles--;P.scriptsLoading--;if(n){n.call(j,"Failed loading '"+d+"', please verify that the file exists")}if(P.numPendingFiles+P.scriptsLoading===0){P.refreshQueue()}},o=function(){P.numPendingFiles--;P.scriptsLoading--;if(m){m.call(j)}if(P.numPendingFiles+P.scriptsLoading===0){P.refreshQueue()}},e;P.isLoading=true;P.numPendingFiles++;P.scriptsLoading++;e=a.disableCaching?(d+(d.indexOf("?")===-1?"?":"&")+a.disableCachingParam+"="+Ext.Date.now()):d;I[d]=P.injectScriptElement(e,o,l)},loadScriptFile:function(d,n,p,j,e){var a=P.getConfig(),h=d+(a.disableCaching?("?"+a.disableCachingParam+"="+Ext.Date.now()):""),c=false,l,s,m,q="";j=j||P;P.isLoading=true;if(!e){m=function(){};I[d]=P.injectScriptElement(h,n,m,j)}else{if(typeof XMLHttpRequest!="undefined"){l=new XMLHttpRequest()}else{l=new ActiveXObject("Microsoft.XMLHTTP")}try{l.open("GET",h,false);l.send(null)}catch(o){c=true}s=(l.status===1223)?204:(l.status===0&&((self.location||{}).protocol=="file:"||(self.location||{}).protocol=="ionp:"))?200:l.status;c=c||(s===0);if(c){}else{if((s>=200&&s<300)||(s===304)){if(!Ext.isIE){q="\n//@ sourceURL="+d}Ext.globalEval(l.responseText+q);n.call(j)}else{}}l=null}},syncRequire:function(){var a=P.syncModeEnabled;if(!a){P.syncModeEnabled=true}P.require.apply(P,arguments);if(!a){P.syncModeEnabled=false}P.refreshQueue()},require:function(d,q,x,v){var o={},y={},s=[],a=[],e=[],z=[],t,c,m,n,Z,u,h,j,l,p,w;if(v){v=(typeof v==="string")?[v]:v;for(j=0,p=v.length;j<p;j++){Z=v[j];if(typeof Z=="string"&&Z.length>0){s=X.getNamesByExpression(Z);for(l=0,w=s.length;l<w;l++){o[s[l]]=true}}}}d=(typeof d==="string")?[d]:(d?d:[]);if(q){if(q.length>0){t=function(){var aa=[],ab,ac;for(ab=0,ac=z.length;ab<ac;ab++){aa.push(X.get(z[ab]))}return q.apply(this,aa)}}else{t=q}}else{t=Ext.emptyFn}x=x||Ext.global;for(j=0,p=d.length;j<p;j++){n=d[j];if(typeof n=="string"&&n.length>0){a=X.getNamesByExpression(n);w=a.length;for(l=0;l<w;l++){h=a[l];if(o[h]!==true){z.push(h);if(!X.isCreated(h)&&!y[h]){y[h]=true;e.push(h)}}}}}if(e.length>0){if(!P.config.enabled){throw new Error("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((e.length>1)?"es":"")+": "+e.join(", "))}}else{t.call(x);return P}c=P.syncModeEnabled;if(!c){H.push({requires:e.slice(),callback:t,scope:x})}p=e.length;for(j=0;j<p;j++){u=e[j];m=P.getPath(u);if(c&&G.hasOwnProperty(u)){if(!G[u]){P.numPendingFiles--;P.removeScriptElement(m);delete G[u]}}if(!G.hasOwnProperty(u)){if(P.isFileLoaded[m]||N[m]){G[u]=true}else{N[m]=true;G[u]=false;P.numPendingFiles++;P.loadScriptFile(m,Y(P.onFileLoaded,[u,m],P),Y(P.onFileLoadError,[u,m],P),P,c)}F[u]=m}}if(c){t.call(x);if(p===1){return X.get(u)}}return P},onFileLoaded:function(c,d){var a=G[c];P.numLoadedFiles++;G[c]=true;D[d]=true;delete N[d];if(!a){P.numPendingFiles--}if(P.numPendingFiles===0){P.refreshQueue()}},onFileLoadError:function(d,e,a,c){P.numPendingFiles--;P.hasFileLoadError=true},addUsedClasses:function(d){var a,e,c;if(d){d=(typeof d=="string")?[d]:d;for(e=0,c=d.length;e<c;e++){a=d[e];if(typeof a=="string"&&!Ext.Array.contains(A,a)){A.push(a)}}}return P},triggerReady:function(){var a,c=A;if(P.isLoading){P.isLoading=false;if(c.length!==0){c=c.slice();A.length=0;P.require(c,P.triggerReady,P);return P}}Ext.Array.sort(B,O);while(B.length&&!P.isLoading){a=B.shift();a.fn.call(a.scope)}return P},onReady:function(d,e,c,a){var h;if(c!==false&&Ext.onDocumentReady){h=d;d=function(){Ext.onDocumentReady(h,e,a)}}if(!P.isLoading){d.call(e)}else{B.push({fn:d,scope:e,priority:(a&&a.priority)||0})}},historyPush:function(a){if(a&&G.hasOwnProperty(a)&&!C[a]){C[a]=true;M.push(a)}return P}});Ext.disableCacheBuster=function(d,c){var a=new Date();a.setTime(a.getTime()+(d?10*365:-1)*24*60*60*1000);a=a.toGMTString();document.cookie="ext-cache=1; expires="+a+"; path="+(c||"/")};Ext.require=J(P,"require");Ext.syncRequire=J(P,"syncRequire");Ext.exclude=J(P,"exclude");Ext.onReady=function(c,d,a){P.onReady(c,d,true,a)};E.registerPreprocessor("loader",function(h,w,j,l){var o=this,q=[],e,p=X.getName(h),a,c,s,t,m,u,d,n,v;for(a=0,s=K.length;a<s;a++){u=K[a];if(w.hasOwnProperty(u)){d=w[u];if(typeof d=="string"){q.push(d)}else{if(d instanceof Array){for(c=0,t=d.length;c<t;c++){m=d[c];if(typeof m=="string"){q.push(m)}}}else{if(typeof d!="function"){for(c in d){if(d.hasOwnProperty(c)){m=d[c];if(typeof m=="string"){q.push(m)}}}}}}}}if(q.length===0){return}P.require(q,function(){for(a=0,s=K.length;a<s;a++){u=K[a];if(w.hasOwnProperty(u)){d=w[u];if(typeof d=="string"){w[u]=X.get(d)}else{if(d instanceof Array){for(c=0,t=d.length;c<t;c++){m=d[c];if(typeof m=="string"){w[u][c]=X.get(m)}}}else{if(typeof d!="function"){for(var x in d){if(d.hasOwnProperty(x)){m=d[x];if(typeof m=="string"){w[u][x]=X.get(m)}}}}}}}}l.call(o,h,w,j)});return false},true,"after","className");X.registerPostprocessor("uses",function(d,e,c){var a=c.uses;if(a){P.addUsedClasses(a)}});X.onCreated(P.historyPush)}();if(Ext._classPathMetadata){Ext.Loader.addClassPathMappings(Ext._classPathMetadata);Ext._classPathMetadata=null}(function(){var j=document.getElementsByTagName("script"),h=j[j.length-1],m=h.src,n=m.substring(0,m.lastIndexOf("/")+1),l=Ext.Loader;l.setConfig({enabled:true,disableCaching:true,paths:{Ext:n+"src"}})})();Ext._endTime=new Date().getTime();if(Ext._beforereadyhandler){Ext._beforereadyhandler()}Ext.Error=Ext.extend(Error,{statics:{ignore:false,raise:function(e){e=e||{};if(Ext.isString(e)){e={msg:e}}var h=this.raise.caller,d;if(h){if(h.$name){e.sourceMethod=h.$name}if(h.$owner){e.sourceClass=h.$owner.$className}}if(Ext.Error.handle(e)!==true){d=Ext.Error.prototype.toString.call(e);Ext.log({msg:d,level:"error",dump:e,stack:true});throw new Ext.Error(e)}},handle:function(){return Ext.Error.ignore}},name:"Ext.Error",constructor:function(d){if(Ext.isString(d)){d={msg:d}}var c=this;Ext.apply(c,d);c.message=c.message||c.msg},toString:function(){var l=this,e=l.sourceClass?l.sourceClass:"",h=l.sourceMethod?"."+l.sourceMethod+"(): ":"",j=l.msg||"(No description provided)";return e+h+j}});Ext.deprecated=function(c){return Ext.emptyFn};Ext.JSON=(new (function(){var me=this,encodingFunction,decodingFunction,useNative=null,useHasOwn=!!{}.hasOwnProperty,isNative=function(){if(useNative===null){useNative=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"}return useNative},pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o,newline){if(o===null||o===undefined){return"null"}else{if(Ext.isDate(o)){return Ext.JSON.encodeDate(o)}else{if(Ext.isString(o)){return Ext.JSON.encodeString(o)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(o.toJSON){return o.toJSON()}else{if(Ext.isArray(o)){return encodeArray(o,newline)}else{if(Ext.isObject(o)){return encodeObject(o,newline)}else{if(typeof o==="function"){return"null"}}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\v":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeArray=function(o,newline){var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(Ext.JSON.encodeValue(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o,newline){var a=["{",""],i,val;for(i in o){val=o[i];if(!useHasOwn||o.hasOwnProperty(i)){if(typeof val==="function"||val===undefined){continue}a.push(Ext.JSON.encodeValue(i),":",Ext.JSON.encodeValue(val),",")}}a[a.length-1]="}";return a.join("")};me.encodeString=encodeString;me.encodeValue=doEncode;me.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};me.encode=function(o){if(!encodingFunction){encodingFunction=isNative()?JSON.stringify:me.encodeValue}return encodingFunction(o)};me.decode=function(json,safe){if(!decodingFunction){decodingFunction=isNative()?JSON.parse:doDecode}try{return decodingFunction(json)}catch(e){if(safe===true){return null}Ext.Error.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}}})());Ext.encode=Ext.JSON.encode;Ext.decode=Ext.JSON.decode;Ext.apply(Ext,{userAgent:navigator.userAgent.toLowerCase(),cache:{},idSeed:1000,windowId:"ext-window",documentId:"ext-document",isReady:false,enableGarbageCollector:true,enableListenerCollection:true,rootHierarchyState:{},addCacheEntry:function(l,o,m){m=m||o.dom;var j=Ext.cache,h=l||(o&&o.id)||m.id,n=j[h]||(j[h]={data:{},events:{},dom:m,skipGarbageCollection:!!(m.getElementById||m.navigator)});if(o){o.$cache=n;n.el=o}return n},updateCacheId:function(j,e){var h=Ext.cache,l=h[j];if(l){delete h[j];h[e]=l;l.el.id=l.id=e}},updateCacheEntry:function(e,h){var d=e.dom;if(h!==d){Ext.EventManager.removeAll(d)}e.dom=h;if(e.el){e.el.dom=h}return e},id:function(h,l){var e=this,j="";h=Ext.getDom(h,true)||{};if(h===document){h.id=e.documentId}else{if(h===window){h.id=e.windowId}}if(!h.id){if(e.isSandboxed){j=Ext.sandboxName.toLowerCase()+"-"}h.id=j+(l||"ext-gen")+(++Ext.idSeed)}return h.id},escapeId:(function(){var n=/^[a-zA-Z_][a-zA-Z0-9_\-]*$/i,m=/([\W]{1})/g,h=/^(\d)/g,j=function(a,c){return"\\"+c},l=function(a,c){return"\\00"+c.charCodeAt(0).toString(16)+" "};return function(a){return n.test(a)?a:a.replace(m,j).replace(h,l)}}()),isAutoId:(function(){var c=/^ext\-gen\d+/;return function(a){return c.test(a)}}()),getBody:(function(){var c;return function(){return c||(c=Ext.get(document.body))}}()),getHead:(function(){var c;return function(){return c||(c=Ext.get(document.getElementsByTagName("head")[0]))}}()),getDoc:(function(){var c;return function(){return c||(c=Ext.get(document))}}()),getOrientation:function(){return window.innerHeight>window.innerWidth?"portrait":"landscape"},destroy:function(){var h=arguments.length,d,e;for(d=0;d<h;d++){e=arguments[d];if(e){if(Ext.isArray(e)){this.destroy.apply(this,e)}else{if(e.isStore){e.destroyStore()}else{if(Ext.isFunction(e.destroy)){e.destroy()}else{if(e.dom){e.remove()}}}}}}},callback:function(l,m,o,h){var n,j;if(Ext.isFunction(l)){n=l}else{if(m&&Ext.isString(l)){n=m[l]}}if(n){o=o||[];m=m||window;if(h){Ext.defer(n,h,m,o)}else{j=n.apply(m,o)}}return j},resolveMethod:function(c,d){if(Ext.isFunction(c)){return c}return d[c]},htmlEncode:function(c){return Ext.String.htmlEncode(c)},htmlDecode:function(c){return Ext.String.htmlDecode(c)},urlAppend:function(d,c){return Ext.String.urlAppend(d,c)},splitAndUnescape:(function(){var c={};return function(n,o){if(!n){return[]}else{if(!o){return[n]}}var l=c[o]||(c[o]=new RegExp("\\\\"+o,"g")),a=[],j,m;j=n.split(o);while((m=j.shift())!==undefined){while(m.charAt(m.length-1)==="\\"&&j.length>0){m=m+o+j.shift()}m=m.replace(l,o);a.push(m)}return a}})()});Ext.ns=Ext.namespace;window.undefined=window.undefined;(function(){var av=function(a){return a.test(Ext.userAgent)},ap=document.compatMode=="CSS1Compat",ad=function(a,c){var d;return(a&&(d=c.exec(Ext.userAgent)))?parseFloat(d[1]):0},au=document.documentMode,aw=au===undefined||au===5,aK=av(/opera/),an=aK&&av(/version\/10\.5/),Y=av(/\bchrome\b/),aj=av(/webkit/),aI=!Y&&av(/safari/),aa=aI&&av(/applewebkit\/4/),ac=aI&&av(/version\/3/),af=aI&&av(/version\/4/),aB=aI&&av(/version\/5\.0/),ag=aI&&av(/version\/5/),aC=!aK&&(av(/msie/)||av(/trident/)),Z=aC&&((av(/msie 7/)&&aw)||au===7),ab=aC&&((av(/msie 8/)&&aw)||au===8),ae=aC&&((av(/msie 9/)&&aw)||au===9),aD=aC&&((av(/msie 10/)&&aw)||au===10),aG=aC&&((av(/trident\/7\.0/)&&aw)||au===11),W=aC&&av(/msie 6/),aJ=!aj&&!aC&&av(/gecko/),e=aJ&&av(/rv:1\.9/),U=aJ&&av(/rv:2\.0/),V=aJ&&av(/rv:5\./),ar=aJ&&av(/rv:10\./),ak=e&&av(/rv:1\.9\.0/),am=e&&av(/rv:1\.9\.1/),ao=e&&av(/rv:1\.9\.2/),aE=av(/windows|win32/),ah=av(/macintosh|mac os x/),al=av(/linux/),az=null,ay=ad(true,/\bchrome\/(\d+\.\d+)/),aF=ad(true,/\bfirefox\/(\d+\.\d+)/),ax=ad(aC,/msie (\d+\.\d+)/),aq=ad(aK,/version\/(\d+\.\d+)/),aH=ad(aI,/version\/(\d+\.\d+)/),ai=ad(aj,/webkit\/(\d+\.\d+)/),at=/^https/i.test(window.location.protocol),aA;try{document.execCommand("BackgroundImageCache",false,true)}catch(X){}aA=function(){};aA.info=aA.warn=aA.error=Ext.emptyFn;Ext.setVersion("ext","4.2.4.1720");Ext.setVersion("extjs","4.2.4.1720");Ext.apply(Ext,{SSL_SECURE_URL:at&&aC?"javascript:''":"about:blank",plainTableCls:Ext.buildSettings.baseCSSPrefix+"table-plain",plainListCls:Ext.buildSettings.baseCSSPrefix+"list-plain",enableNestedListenerRemoval:false,USE_NATIVE_JSON:false,getDom:function(c,d){if(!c||!document){return null}if(c.dom){return c.dom}else{if(typeof c=="string"){var a=Ext.getElementById(c);if(a&&aC&&d){if(c==a.getAttribute("id")){return a}else{return null}}return a}else{return c}}},removeNode:W||Z||ab?(function(){var a;return function(c){if(c&&c.tagName.toUpperCase()!="BODY"){(Ext.enableNestedListenerRemoval)?Ext.EventManager.purgeElement(c):Ext.EventManager.removeAll(c);var h=Ext.cache,d=c.id;if(h[d]){delete h[d].dom;delete h[d]}if(ab&&c.parentNode){c.parentNode.removeChild(c)}a=a||document.createElement("div");a.appendChild(c);a.innerHTML=""}}}()):function(a){if(a&&a.parentNode&&a.tagName.toUpperCase()!="BODY"){(Ext.enableNestedListenerRemoval)?Ext.EventManager.purgeElement(a):Ext.EventManager.removeAll(a);var d=Ext.cache,c=a.id;if(d[c]){delete d[c].dom;delete d[c]}a.parentNode.removeChild(a)}},isStrict:ap,isIEQuirks:aC&&(!ap&&(W||Z||ab||ae)),isOpera:aK,isOpera10_5:an,isWebKit:aj,isChrome:Y,isSafari:aI,isSafari3:ac,isSafari4:af,isSafari5:ag,isSafari5_0:aB,isSafari2:aa,isIE:aC,isIE6:W,isIE7:Z,isIE7m:W||Z,isIE7p:aC&&!W,isIE8:ab,isIE8m:W||Z||ab,isIE8p:aC&&!(W||Z),isIE9:ae,isIE9m:W||Z||ab||ae,isIE9p:aC&&!(W||Z||ab),isIE10:aD,isIE10m:W||Z||ab||ae||aD,isIE10p:aC&&!(W||Z||ab||ae),isIE11:aG,isIE11m:W||Z||ab||ae||aD||aG,isIE11p:aC&&!(W||Z||ab||ae||aD),isGecko:aJ,isGecko3:e,isGecko4:U,isGecko5:V,isGecko10:ar,isFF3_0:ak,isFF3_5:am,isFF3_6:ao,isFF4:4<=aF&&aF<5,isFF5:5<=aF&&aF<6,isFF10:10<=aF&&aF<11,isLinux:al,isWindows:aE,isMac:ah,chromeVersion:ay,firefoxVersion:aF,ieVersion:ax,operaVersion:aq,safariVersion:aH,webKitVersion:ai,isSecure:at,BLANK_IMAGE_URL:(W||Z)?"//www.sencha.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",value:function(a,d,c){return Ext.isEmpty(a,c)?d:a},escapeRe:function(a){return a.replace(/([-.*+?\^${}()|\[\]\/\\])/g,"\\$1")},addBehaviors:function(j){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(j)})}else{var d={},a,h,c;for(h in j){if((a=h.split("@"))[1]){c=a[0];if(!d[c]){d[c]=Ext.select(c)}d[c].on(a[1],j[h])}}d=null}},getScrollbarSize:function(c){if(!Ext.isReady){return{}}if(c||!az){var d=document.body,a=document.createElement("div");a.style.width=a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";d.appendChild(a);az={width:a.offsetWidth-a.clientWidth,height:a.offsetHeight-a.clientHeight};d.removeChild(a)}return az},getScrollBarWidth:function(a){var c=Ext.getScrollbarSize(a);return c.width+2},copyTo:function(d,a,l,m){if(typeof l=="string"){l=l.split(/[,;\s]/)}var j,c=l?l.length:0,h;for(j=0;j<c;j++){h=l[j];if(m||a.hasOwnProperty(h)){d[h]=a[h]}}return d},destroyMembers:function(a){for(var c=1,d=arguments,h=d.length;c<h;c++){Ext.destroy(a[d[c]]);delete a[d[c]]}},log:aA,partition:function(h,l){var j=[[],[]],d,a,c=h.length;for(d=0;d<c;d++){a=h[d];j[(l&&l(a,d,h))||(!l&&a)?0:1].push(a)}return j},invoke:function(j,m){var h=[],l=Array.prototype.slice.call(arguments,2),d,a,c=j.length;for(d=0;d<c;d++){a=j[d];if(a&&typeof a[m]=="function"){h.push(a[m].apply(a,l))}else{h.push(undefined)}}return h},zip:function(){var l=Ext.partition(arguments,function(o){return typeof o!="function"}),n=l[0],j=l[1][0],h=Ext.max(Ext.pluck(n,"length")),a=[],m,c,d;for(m=0;m<h;m++){a[m]=[];if(j){a[m]=j.apply(j,Ext.pluck(n,m))}else{for(c=0,d=n.length;c<d;c++){a[m].push(n[c][m])}}}return a},toSentence:function(d,h){var j=d.length,a,c;if(j<=1){return d[0]}else{a=d.slice(0,j-1);c=d[j-1];return Ext.util.Format.format("{0} {1} {2}",a.join(", "),h||"and",c)}},setGlyphFontFamily:function(a){Ext._glyphFontFamily=a},useShims:W})}());Ext.application=function(j){var m,l,n,h=function(){Ext.onReady(function(){Ext.app.Application.instance=new m()})};if(typeof j==="string"){Ext.require(j,function(){m=Ext.ClassManager.get(j);h()})}else{Ext.Loader.setPath(j.name,j.appFolder||"app");if(l=j.paths){for(n in l){if(l.hasOwnProperty(n)){Ext.Loader.setPath(n,l[n])}}}j["paths processed"]=true;Ext.define(j.name+".$application",Ext.apply({extend:"Ext.app.Application"},j),function(){m=this;h()})}};(function(){Ext.ns("Ext.util");var q=Ext.util.Format={},u=/<\/?[^>]+>/gi,o=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,s=/\r?\n/g,v=/#+$/,p=/[\d,\.#]+/,m=/[^\d\.#]/g,w,n,t={};Ext.apply(q,{thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",currencyAtEnd:false,undef:function(a){return a!==undefined?a:""},defaultValue:function(c,a){return c!==undefined&&c!==""?c:a},substr:"ab".substr(-1)!="b"?function(e,c,a){var d=String(e);return(c<0)?d.substr(Math.max(d.length+c,0),a):d.substr(c,a)}:function(d,c,a){return String(d).substr(c,a)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},usMoney:function(a){return q.currency(a,"$",2)},currency:function(j,e,l,a){var c="",d=",0",h=0;j=j-0;if(j<0){j=-j;c="-"}l=Ext.isDefined(l)?l:q.currencyPrecision;d+=(l>0?".":"");for(;h<l;h++){d+="0"}j=q.number(j,d);if((a||q.currencyAtEnd)===true){return Ext.String.format("{0}{1}{2}",c,j,e||q.currencySign)}else{return Ext.String.format("{0}{1}{2}",c,e||q.currencySign,j)}},date:function(a,c){if(!a){return""}if(!Ext.isDate(a)){a=new Date(Date.parse(a))}return Ext.Date.dateFormat(a,c||Ext.Date.defaultFormat)},dateRenderer:function(a){return function(c){return q.date(c,a)}},stripTags:function(a){return !a?a:String(a).replace(u,"")},stripScripts:function(a){return !a?a:String(a).replace(o,"")},fileSize:(function(){var a=1024,d=1048576,c=1073741824;return function(e){var h;if(e<a){if(e===1){h="1 byte"}else{h=e+" bytes"}}else{if(e<d){h=(Math.round(((e*10)/a))/10)+" KB"}else{if(e<c){h=(Math.round(((e*10)/d))/10)+" MB"}else{h=(Math.round(((e*10)/c))/10)+" GB"}}}return h}})(),math:(function(){var a={};return function(c,d){if(!a[d]){a[d]=Ext.functionFactory("v","return v "+d+";")}return a[d](c)}}()),round:function(c,d){var a=Number(c);if(typeof d=="number"){d=Math.pow(10,d);a=Math.round(c*d)/d}return a},number:function(F,c){if(!c){return F}var e=t[c];if(!e){var I=c,d=q.thousandSeparator,E=q.decimalSeparator,a=0,j="",l,H,G,D,h,C,J;if(c.substr(c.length-2)=="/i"){if(!w||n!==E){w=new RegExp("[^\\d\\"+E+"]","g");n=E}c=c.substr(0,c.length-2);l=c.indexOf(d)!==-1;H=c.replace(w,"").split(E)}else{l=c.indexOf(",")!=-1;H=c.replace(m,"").split(".")}G=c.replace(p,"");if(H.length>2){}else{if(H.length===2){a=H[1].length;h=H[1].match(v);if(h){J=h[0].length;j='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+J+'}$")'}}}C=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(l?",thousandSeparator,thousands=[],j,n,i":"")+(G?',formatString="'+c+'",formatPattern=/[\\d,\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+a+");",j,";"];if(l){if(a){C[C.length]='parts=fnum.split(".");';C[C.length]="fnum=parts[0];"}C[C.length]="if(absVal>=1000) {";C[C.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}";if(a){C[C.length]="fnum += utilFormat.decimalSeparator+parts[1];"}}else{if(a){C[C.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'}}C[C.length]='if(neg&&fnum!=="'+(a?"0."+Ext.String.repeat("0",a):"0")+'")fnum="-"+fnum;';if(h){C[C.length]='fnum=fnum.replace(trailingZeroes,"");'}C[C.length]="return ";if(G){C[C.length]="formatString.replace(formatPattern, fnum);"}else{C[C.length]="fnum;"}C[C.length]="};";e=t[I]=Ext.functionFactory("Ext",C.join(""))(Ext)}return e(F)},numberRenderer:function(a){return function(c){return q.number(c,a)}},attributes:function(d){if(typeof d==="object"){var a=[],c;for(c in d){if(d.hasOwnProperty(c)){a.push(c,'="',c==="style"?Ext.DomHelper.generateStyles(d[c],null,true):Ext.htmlEncode(d[c]),'"')}}d=a.join("")}return d||""},plural:function(a,d,c){return a+" "+(a==1?d:(c?c:d+"s"))},nl2br:function(a){return Ext.isEmpty(a)?"":a.replace(s,"<br/>")},capitalize:Ext.String.capitalize,ellipsis:Ext.String.ellipsis,format:Ext.String.format,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,trim:Ext.String.trim,parseBox:function(d){d=d||0;if(typeof d==="number"){return{top:d,right:d,bottom:d,left:d}}var c=d.split(" "),a=c.length;if(a==1){c[1]=c[2]=c[3]=c[0]}else{if(a==2){c[2]=c[0];c[3]=c[1]}else{if(a==3){c[3]=c[1]}}}return{top:parseInt(c[0],10)||0,right:parseInt(c[1],10)||0,bottom:parseInt(c[2],10)||0,left:parseInt(c[3],10)||0}},escapeRegex:function(a){return a.replace(/([\-.*+?\^${}()|\[\]\/\\])/g,"\\$1")}})}());(Ext.cmd.derive("Ext.util.TaskRunner",Ext.Base,{interval:10,timerId:null,constructor:function(d){var c=this;if(typeof d=="number"){c.interval=d}else{if(d){Ext.apply(c,d)}}c.tasks=[];c.timerFn=Ext.Function.bind(c.onTick,c)},newTask:function(c){var d=new Ext.util.TaskRunner.Task(c);d.manager=this;return d},start:function(e){var h=this,d=Ext.Date.now();if(!e.pending){h.tasks.push(e);e.pending=true}e.stopped=false;e.taskStartTime=d;e.taskRunTime=e.fireOnStart!==false?0:e.taskStartTime;e.taskRunCount=0;if(!h.firing){if(e.fireOnStart!==false){h.startTimer(0,d)}else{h.startTimer(e.interval,d)}}return e},stop:function(c){if(!c.stopped){c.stopped=true;if(c.onStop){c.onStop.call(c.scope||c,c)}}return c},stopAll:function(){Ext.each(this.tasks,this.stop,this)},firing:false,nextExpires:1e+99,onTick:function(){var s=this,y=s.tasks,C=Ext.Date.now(),q=1e+99,u=y.length,A,p,w,B,z,x;s.timerId=null;s.firing=true;for(w=0;w<u||w<(u=y.length);++w){B=y[w];if(!(x=B.stopped)){A=B.taskRunTime+B.interval;if(A<=C){z=1;try{z=B.run.apply(B.scope||B,B.args||[++B.taskRunCount])}catch(v){try{if(B.onError){z=B.onError.call(B.scope||B,B,v)}}catch(t){}}B.taskRunTime=C;if(z===false||B.taskRunCount===B.repeat){s.stop(B);x=true}else{x=B.stopped;A=C+B.interval}}if(!x&&B.duration&&B.duration<=(C-B.taskStartTime)){s.stop(B);x=true}}if(x){B.pending=false;if(!p){p=y.slice(0,w)}}else{if(p){p.push(B)}if(q>A){q=A}}}if(p){s.tasks=p}s.firing=false;if(s.tasks.length){s.startTimer(q-C,Ext.Date.now())}if(s.fireIdleEvent!==false){Ext.globalEvents.fireEvent("idle")}},startTimer:function(l,n){var m=this,h=n+l,j=m.timerId;if(j&&m.nextExpires-h>m.interval){clearTimeout(j);j=null}if(!j){if(l<m.interval){l=m.interval}m.timerId=setTimeout(m.timerFn,l);m.nextExpires=h}}},1,0,0,0,0,0,[Ext.util,"TaskRunner"],function(){var c=this,d=c.prototype;d.destroy=d.stopAll;Ext.util.TaskManager=Ext.TaskManager=new c();c.Task=new Ext.Class({isTask:true,stopped:true,fireOnStart:false,constructor:function(a){Ext.apply(this,a)},restart:function(a){if(a!==undefined){this.interval=a}this.manager.start(this)},start:function(a){if(this.stopped){this.restart(a)}},stop:function(){this.manager.stop(this)}});d=c.Task.prototype;d.destroy=d.stop}));(Ext.cmd.derive("Ext.util.TaskManager",Ext.util.TaskRunner,{alternateClassName:["Ext.TaskManager"],singleton:true},0,0,0,0,0,0,[Ext.util,"TaskManager",Ext,"TaskManager"],0));(Ext.cmd.derive("Ext.perf.Accumulator",Ext.Base,(function(){var u=null,p=Ext.global.chrome,t,v=function(){v=function(){return new Date().getTime()};var a,d;if(Ext.isChrome&&p&&p.Interval){a=new p.Interval();a.start();v=function(){return a.microseconds()/1000}}else{if(window.ActiveXObject){try{d=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=d;v=function(){return d.milliseconds}}catch(c){}}else{if(Date.now){v=Date.now}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=v;return v()};function o(c,a){c.sum+=a;c.min=Math.min(c.min,a);c.max=Math.max(c.max,a)}function s(c){var e=c?c:(v()-this.time),d=this,a=d.accum;++a.count;if(!--a.depth){o(a.total,e)}o(a.pure,e-d.childTime);u=d.parent;if(u){++u.accum.childCount;u.childTime+=e}}function w(){return{min:Number.MAX_VALUE,max:0,sum:0}}function n(c,a){return function(){var d=c.enter(),e=a.apply(this,arguments);d.leave();return e}}function m(a){return Math.round(a*100)/100}function q(e,h,a,c){var d={avg:0,min:c.min,max:c.max,sum:0};if(e){a=a||0;d.sum=c.sum-h*a;d.avg=d.sum/e}return d}return{constructor:function(a){var c=this;c.count=c.childCount=c.depth=c.maxDepth=0;c.pure=w();c.total=w();c.name=a},statics:{getTimestamp:v},format:function(a){if(!t){t=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(d){return Math.round(d*100)/100}})}var c=this.getData(a);c.name=this.name;c.pure.type="Pure";c.total.type="Total";c.times=[c.pure,c.total];return t.apply(c)},getData:function(a){var c=this;return{count:c.count,childCount:c.childCount,depth:c.maxDepth,pure:q(c.count,c.childCount,a,c.pure),total:q(c.count,c.childCount,a,c.total)}},enter:function(){var a=this,c={accum:a,leave:s,childTime:0,parent:u};++a.depth;if(a.maxDepth<a.depth){a.maxDepth=a.depth}u=c;c.time=v();return c},monitor:function(d,e,a){var c=this.enter();if(a){d.apply(e,a)}else{d.call(e)}c.leave()},report:function(){Ext.log(this.format())},tap:function(B,z){var A=this,c=typeof z=="string"?[z]:z,C,l,E,a,d,h,j,e,D;D=function(){if(typeof B=="string"){C=Ext.global;a=B.split(".");e=0;if(a[0]=="Ext"){e=1;C=Ext}for(E=e,d=a.length;E<d;++E){C=C[a[E]]}}else{C=B}if(!C){return}for(E=0,d=c.length;E<d;++E){h=c[E];l=h.charAt(0)=="!";if(l){h=h.substring(1)}else{l=!(h in C.prototype)}j=l?C:C.prototype;j[h]=n(A,j[h])}};Ext.ClassManager.onCreated(D,A,B);return A}}}()),1,0,0,0,0,0,[Ext.perf,"Accumulator"],function(){Ext.perf.getTimestamp=this.getTimestamp}));(Ext.cmd.derive("Ext.perf.Monitor",Ext.Base,{singleton:true,alternateClassName:"Ext.Perf",constructor:function(){this.accumulators=[];this.accumulatorsByName={}},calibrate:function(){var j=new Ext.perf.Accumulator("$"),n=j.total,q=Ext.perf.Accumulator.getTimestamp,o=0,m,l,p;p=q();do{m=j.enter();m.leave();++o}while(n.sum<100);l=q();return(l-p)/o},get:function(d){var h=this,e=h.accumulatorsByName[d];if(!e){h.accumulatorsByName[d]=e=new Ext.perf.Accumulator(d);h.accumulators.push(e)}return e},enter:function(c){return this.get(c).enter()},monitor:function(e,h,d){this.get(e).monitor(h,d)},report:function(){var h=this,d=h.accumulators,e=h.calibrate();d.sort(function(a,c){return(a.name<c.name)?-1:((c.name<a.name)?1:0)});h.updateGC();Ext.log("Calibration: "+Math.round(e*100)/100+" msec/sample");Ext.each(d,function(a){Ext.log(a.format(e))})},getData:function(h){var d={},e=this.accumulators;Ext.each(e,function(a){if(h||a.count){d[a.name]=a.getData()}});return d},reset:function(){Ext.each(this.accumulators,function(d){var c=d;c.count=c.childCount=c.depth=c.maxDepth=0;c.pure={min:Number.MAX_VALUE,max:0,sum:0};c.total={min:Number.MAX_VALUE,max:0,sum:0}})},updateGC:function(){var e=this.accumulatorsByName.GC,d=Ext.senchaToolbox,h;if(e){e.count=d.garbageCollectionCounter||0;if(e.count){h=e.pure;e.total.sum=h.sum=d.garbageCollectionMilliseconds;h.min=h.max=h.sum/e.count;h=e.total;h.min=h.max=h.sum/e.count}}},watchGC:function(){Ext.perf.getTimestamp();var c=Ext.senchaToolbox;if(c){this.get("GC");c.watchGarbageCollector(false)}},setup:function(o){if(!o){o={render:{"Ext.AbstractComponent":"render"},layout:{"Ext.layout.Context":"run"}}}this.currentConfig=o;var n,l,h,m,j;for(n in o){if(o.hasOwnProperty(n)){l=o[n];h=Ext.Perf.get(n);for(m in l){if(l.hasOwnProperty(m)){j=l[m];h.tap(m,j)}}}}this.watchGC()}},1,0,0,0,0,0,[Ext.perf,"Monitor",Ext,"Perf"],0));Ext.is={init:function(h){var n=this.platforms,l=n.length,m,j;h=h||window.navigator;for(m=0;m<l;m++){j=n[m];this[j.identity]=j.regex.test(h[j.property])}this.Desktop=this.Mac||this.Windows||(this.Linux&&!this.Android);this.Tablet=this.iPad;this.Phone=!this.Desktop&&!this.Tablet;this.iOS=this.iPhone||this.iPad||this.iPod;this.Standalone=!!window.navigator.standalone},platforms:[{property:"platform",regex:/iPhone/i,identity:"iPhone"},{property:"platform",regex:/iPod/i,identity:"iPod"},{property:"userAgent",regex:/iPad/i,identity:"iPad"},{property:"userAgent",regex:/Blackberry/i,identity:"Blackberry"},{property:"userAgent",regex:/Android/i,identity:"Android"},{property:"platform",regex:/Mac/i,identity:"Mac"},{property:"platform",regex:/Win/i,identity:"Windows"},{property:"platform",regex:/Linux/i,identity:"Linux"}]};Ext.is.init();(function(){var j=function(c,d){var e=c.ownerDocument.defaultView,a=(e?e.getComputedStyle(c,null):c.currentStyle)||c.style;return a[d]},l={"IE6-quirks":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,0,0],"IE6-strict":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,0,1,0,0,0,0,0],"IE7-quirks":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,0,0],"IE7-strict":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,1,0,0,1,0,1,0,0,0,0,0],"IE8-quirks":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,0,0],"IE8-strict":[0,1,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,1,1,1,1,1,0,0,1,0,1,0,0,1,0,0],"IE9-quirks":[0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,0,0],"IE9-strict":[0,1,0,0,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,0,1,0,0,0,0,1,0,0],"IE10-quirks":[1,1,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,1,0,0],"IE10-strict":[1,1,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,0,0,1,0,0]},n=document,m=n.createElement("div");function h(){var a=Ext.isIE6?"IE6":Ext.isIE7?"IE7":Ext.isIE8?"IE8":Ext.isIE9?"IE9":Ext.isIE10?"IE10":"";return a?a+(Ext.isStrict?"-strict":"-quirks"):""}Ext.supports={init:function(){var d=this,s=d.toRun||d.tests,u=s.length,w=[],c=h(),e,t,a,v=Ext.isReady;if(v){m.innerHTML=['<div style="height:30px;width:50px;">','<div style="height:20px;width:20px;"></div>',"</div>",'<div style="width: 200px; height: 200px; position: relative; padding: 5px;">','<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>',"</div>",'<div style="position: absolute; left: 10%; top: 10%;"></div>','<div style="float:left; background-color:transparent;"></div>'].join("");n.body.appendChild(m)}t=l[c];while(u--){e=s[u];a=t&&t[u];if(a!==undefined){d[e.identity]=a}else{if(v||e.early){d[e.identity]=e.fn.call(d,n,m)}else{w.push(e)}}}if(v){n.body.removeChild(m)}d.toRun=w},PointerEvents:"pointerEvents" in document.documentElement.style,LocalStorage:(function(){try{return"localStorage" in window&&window.localStorage!==null}catch(a){return false}})(),CSS3BoxShadow:"boxShadow" in document.documentElement.style||"WebkitBoxShadow" in document.documentElement.style||"MozBoxShadow" in document.documentElement.style,ClassList:!!document.documentElement.classList,OrientationChange:((typeof window.orientation!="undefined")&&("onorientationchange" in window)),DeviceMotion:("ondevicemotion" in window),Touch:("ontouchstart" in window)&&(!Ext.is.Desktop),TimeoutActualLateness:(function(){setTimeout(function(){Ext.supports.TimeoutActualLateness=arguments.length!==0},0)}()),tests:[{identity:"Transitions",fn:function(a,s){var c=["webkit","Moz","o","ms","khtml"],t="TransitionEnd",q=[c[0]+t,"transitionend",c[2]+t,c[3]+t,c[4]+t],d=c.length,e=0,p=false;for(;e<d;e++){if(j(s,c[e]+"TransitionProperty")){Ext.supports.CSS3Prefix=c[e];Ext.supports.CSS3TransitionEnd=q[e];p=true;break}}return p}},{identity:"RightMargin",fn:function(c,a){var d=c.defaultView;return !(d&&d.getComputedStyle(a.firstChild.firstChild,null).marginRight!="0px")}},{identity:"DisplayChangeInputSelectionBug",early:true,fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{identity:"DisplayChangeTextAreaSelectionBug",early:true,fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{identity:"TransparentColor",fn:function(c,a,d){d=c.defaultView;return !(d&&d.getComputedStyle(a.lastChild,null).backgroundColor!="transparent")}},{identity:"ComputedStyle",fn:function(c,a,d){d=c.defaultView;return d&&d.getComputedStyle}},{identity:"Svg",fn:function(a){return !!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}},{identity:"Canvas",fn:function(a){return !!a.createElement("canvas").getContext},early:true},{identity:"Vml",fn:function(c){var a=c.createElement("div");a.innerHTML="<!--[if vml]><br/><br/><![endif]-->";return(a.childNodes.length==2)},early:true},{identity:"Float",fn:function(a){return"cssFloat" in a.documentElement.style},early:true},{identity:"AudioTag",fn:function(a){return !!a.createElement("audio").canPlayType},early:true},{identity:"History",fn:function(){var a=window.history;return !!(a&&a.pushState)},early:true},{identity:"Hashchange",fn:function(){var a=document.documentMode;return"onhashchange" in window&&(a===undefined||a>7)},early:true},{identity:"CSS3DTransform",fn:function(){return(typeof WebKitCSSMatrix!="undefined"&&new WebKitCSSMatrix().hasOwnProperty("m41"))},early:true},{identity:"CSS3LinearGradient",fn:function(e,v){var c="background-image:",d="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",q="linear-gradient(left top, black, white)",s="-moz-"+q,u="-ms-"+q,t="-o-"+q,a=[c+d,c+q,c+s,c+u,c+t];v.style.cssText=a.join(";");return((""+v.style.backgroundImage).indexOf("gradient")!==-1)&&!Ext.isIE9},early:true},{identity:"CSS3BorderRadius",fn:function(a){var c=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],d;for(d=0;d<c.length;d++){if(c[d] in a.documentElement.style){return true}}return false},early:true},{identity:"GeoLocation",fn:function(){return(typeof navigator!="undefined"&&"geolocation" in navigator)||(typeof google!="undefined"&&typeof google.gears!="undefined")},early:true},{identity:"MouseEnterLeave",fn:function(a){return("onmouseenter" in a.documentElement&&"onmouseleave" in a.documentElement)},early:true},{identity:"MouseWheel",fn:function(a){return("onmousewheel" in a.documentElement)},early:true},{identity:"Opacity",fn:function(c,a){if(Ext.isIE6||Ext.isIE7||Ext.isIE8){return false}a.style.cssText="opacity:0.73";return a.style.opacity=="0.73"},early:true},{identity:"Placeholder",fn:function(a){return"placeholder" in a.createElement("input")},early:true},{identity:"Direct2DBug",fn:function(a){return Ext.isString(a.documentElement.style.msTransformOrigin)&&Ext.isIE10m},early:true},{identity:"BoundingClientRect",fn:function(a){return !Ext.isIEQuirks&&"getBoundingClientRect" in a.documentElement},early:true},{identity:"RotatedBoundingClientRect",fn:function(a){var o=a.body,e=false,c=a.createElement("div"),d=c.style;if(c.getBoundingClientRect){d.WebkitTransform=d.MozTransform=d.OTransform=d.transform="rotate(90deg)";d.width="100px";d.height="30px";o.appendChild(c);e=c.getBoundingClientRect().height!==100;o.removeChild(c)}return e}},{identity:"IncludePaddingInWidthCalculation",fn:function(c,a){return a.childNodes[1].firstChild.offsetWidth==210}},{identity:"IncludePaddingInHeightCalculation",fn:function(c,a){return a.childNodes[1].firstChild.offsetHeight==210}},{identity:"ArraySort",fn:function(){var a=[1,2,3,4,5].sort(function(){return 0});return a[0]===1&&a[1]===2&&a[2]===3&&a[3]===4&&a[4]===5},early:true},{identity:"Range",fn:function(a){return !!a.createRange},early:true},{identity:"CreateContextualFragment",fn:function(a){var c=a.createRange?a.createRange():false;return c&&!!c.createContextualFragment},early:true},{identity:"WindowOnError",fn:function(){return Ext.isIE||Ext.isGecko||Ext.webKitVersion>=534.16},early:true},{identity:"TextAreaMaxLength",fn:function(a){var c=a.createElement("textarea");return("maxlength" in c)},early:true},{identity:"GetPositionPercentage",fn:function(c,a){return j(a.childNodes[2],"left")=="10%"}},{identity:"PercentageHeightOverflowBug",fn:function(a){var e=false,c,d;if(Ext.getScrollbarSize().height){d=a.createElement("div");c=d.style;c.height="50px";c.width="50px";c.overflow="auto";c.position="absolute";d.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join("");a.body.appendChild(d);if(d.firstChild.offsetHeight===50){e=true}a.body.removeChild(d)}return e}},{identity:"xOriginBug",fn:function(c,a){a.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var d=document.getElementById("b1").getBoundingClientRect(),e=document.getElementById("b2").getBoundingClientRect(),o=document.getElementById("b3").getBoundingClientRect();return(e.left!==d.left&&o.right!==d.right)}},{identity:"ScrollWidthInlinePaddingBug",fn:function(a){var e=false,c,d;d=a.createElement("div");c=d.style;c.height="50px";c.width="50px";c.padding="10px";c.overflow="hidden";c.position="absolute";d.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>';a.body.appendChild(d);if(d.scrollWidth===70){e=true}a.body.removeChild(d);return e}},{identity:"rtlVertScrollbarOnRight",fn:function(c,a){a.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var d=a.firstChild,e=d.firstChild;return(e.offsetLeft+e.offsetWidth!==d.offsetLeft+d.offsetWidth)}},{identity:"rtlVertScrollbarOverflowBug",fn:function(c,a){a.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var d=a.firstChild;return d.clientHeight===d.offsetHeight}}]}}());Ext.supports.init();Ext.util.DelayedTask=function(o,p,j,m){var n=this,l,q=function(){clearInterval(n.id);n.id=null;o.apply(p,j||[]);Ext.globalEvents.fireEvent("idle")};m=typeof m==="boolean"?m:true;n.id=null;n.delay=function(d,a,c,e){if(m){n.cancel()}if(typeof d==="number"){l=d}o=a||o;p=c||p;j=e||j;if(!n.id){n.id=setInterval(q,l)}};n.cancel=function(){if(n.id){clearInterval(n.id);n.id=null}}};(Ext.cmd.derive("Ext.util.Event",Ext.Base,function(){var j=Array.prototype.slice,h=Ext.Array.insert,e=Ext.Array.toArray,l=Ext.util.DelayedTask;return{isEvent:true,suspended:0,noOptions:{},constructor:function(a,c){this.name=c;this.observable=a;this.listeners=[]},addListener:function(d,a,D){var v=this,u,z,c,C,E,w,A,x,y,B;a=a||v.observable;if(!v.isListening(d,a)){z=v.createListener(d,a,D);if(v.firing){v.listeners=v.listeners.slice(0)}u=v.listeners;x=A=u.length;c=D&&D.priority;E=v._highestNegativePriorityIndex;w=(E!==undefined);if(c){C=(c<0);if(!C||w){for(y=(C?E:0);y<A;y++){B=u[y].o?u[y].o.priority||0:0;if(B<c){x=y;break}}}else{v._highestNegativePriorityIndex=x}}else{if(w){x=E}}if(!C&&x<=E){v._highestNegativePriorityIndex++}if(x===A){v.listeners[A]=z}else{h(v.listeners,x,[z])}}},createListener:function(m,n,a){n=n||this.observable;var d=this,c={fn:m,scope:n,ev:d},o=m;if(a){c.o=a;if(a.single){o=d.createSingle(o,c,a,n)}if(a.target){o=d.createTargeted(o,c,a,n)}if(a.delay){o=d.createDelayed(o,c,a,n)}if(a.buffer){o=d.createBuffered(o,c,a,n)}}c.fireFn=o;return c},findListener:function(c,d){var m=this.listeners,o=m.length,a,n;while(o--){a=m[o];if(a){n=a.scope;if(a.fn==c&&(n==(d||this.observable))){return o}}}return -1},isListening:function(a,c){return this.findListener(a,c)!==-1},removeListener:function(d,o){var c=this,p,s,a,q;p=c.findListener(d,o);if(p!=-1){s=c.listeners[p];a=c._highestNegativePriorityIndex;if(c.firing){c.listeners=c.listeners.slice(0)}if(s.task){s.task.cancel();delete s.task}q=s.tasks&&s.tasks.length;if(q){while(q--){s.tasks[q].cancel()}delete s.tasks}c.listeners.splice(p,1);if(a){if(p<a){c._highestNegativePriorityIndex--}else{if(p===a&&p===c.listeners.length){delete c._highestNegativePriorityIndex}}}return true}return false},clearListeners:function(){var a=this.listeners,c=a.length;while(c--){this.removeListener(a[c].fn,a[c].scope)}},suspend:function(){++this.suspended},resume:function(){if(this.suspended){--this.suspended}},isSuspended:function(){return this.suspended>0},fire:function(){var c=this,n=c.listeners,d=n.length,o,p,a,q;if(!c.suspended&&d>0){c.firing=true;p=arguments.length?j.call(arguments,0):[];q=p.length;for(o=0;o<d;o++){a=n[o];if(a.o){p[q]=a.o}if(a&&a.fireFn.apply(a.scope||c.observable,p)===false){return(c.firing=false)}}}c.firing=false;return true},createTargeted:function(d,c,a,m){return function(){if(a.target===arguments[0]){d.apply(m,arguments)}}},createBuffered:function(d,c,a,m){c.task=new l();return function(){c.task.delay(a.buffer,d,m,e(arguments))}},createDelayed:function(d,c,a,m){return function(){var n=new l();if(!c.tasks){c.tasks=[]}c.tasks.push(n);n.delay(a.delay||10,d,m,e(arguments))}},createSingle:function(d,c,a,m){return function(){var n=c.ev;if(n.removeListener(c.fn,m)&&n.observable){n.observable.hasListeners[n.name]--}return d.apply(m,arguments)}}}},1,0,0,0,0,0,[Ext.util,"Event"],0));Ext.EventManager=new function(){var t=this,m=document,p=window,l=Ext.supports,u=/\\/g,q=Ext.baseCSSPrefix,n=!Ext.isIE9&&"addEventListener" in m,s,o=function(){var e=m.body||m.getElementsByTagName("body")[0],a=[],c=[],v=l.CSS3LinearGradient,h=l.CSS3BorderRadius,j;if(!Ext.scopeCss){a.push(q+"body")}if(!e){return false}j=e.parentNode;function d(w){a.push(q+w)}if(Ext.isIE&&Ext.isIE9m){d("ie");if(Ext.isIE6){d("ie6")}else{d("ie7p");if(Ext.isIE7){d("ie7")}else{d("ie8p");if(Ext.isIE8){d("ie8")}else{d("ie9p");if(Ext.isIE9){d("ie9")}}}}if(Ext.isIE7m){d("ie7m")}if(Ext.isIE8m){d("ie8m")}if(Ext.isIE9m){d("ie9m")}if(Ext.isIE7||Ext.isIE8){d("ie78")}}if(Ext.isIE10){d("ie10")}if(Ext.isGecko){d("gecko");if(Ext.isGecko3){d("gecko3")}if(Ext.isGecko4){d("gecko4")}if(Ext.isGecko5){d("gecko5")}}if(Ext.isOpera){d("opera")}if(Ext.isWebKit){d("webkit")}if(Ext.isSafari){d("safari");if(Ext.isSafari2){d("safari2")}if(Ext.isSafari3){d("safari3")}if(Ext.isSafari4){d("safari4")}if(Ext.isSafari5){d("safari5")}if(Ext.isSafari5_0){d("safari5_0")}}if(Ext.isChrome){d("chrome")}if(Ext.isMac){d("mac")}if(Ext.isLinux){d("linux")}if(!h){d("nbr")}if(!v){d("nlg")}if(j){if(Ext.isStrict&&(Ext.isIE6||Ext.isIE7)){Ext.isBorderBox=false}else{Ext.isBorderBox=true}if(!Ext.isBorderBox){c.push(q+"content-box")}if(Ext.isStrict){c.push(q+"strict")}else{c.push(q+"quirks")}Ext.fly(j,"_internal").addCls(c)}Ext.fly(e,"_internal").addCls(a);return true};Ext.apply(t,{hasBoundOnReady:false,hasFiredReady:false,deferReadyEvent:1,onReadyChain:[],readyEvent:(function(){s=new Ext.util.Event();s.fire=function(){Ext._beforeReadyTime=Ext._beforeReadyTime||new Date().getTime();s.self.prototype.fire.apply(s,arguments);Ext._afterReadytime=new Date().getTime()};return s}()),idleEvent:new Ext.util.Event(),isReadyPaused:function(){return(/[?&]ext-pauseReadyFire\b/i.test(location.search)&&!Ext._continueFireReady)},bindReadyEvent:function(){if(t.hasBoundOnReady){return}if(m.readyState=="complete"){t.onReadyEvent({type:m.readyState||"body"})}else{m.addEventListener("DOMContentLoaded",t.onReadyEvent,false);p.addEventListener("load",t.onReadyEvent,false);t.hasBoundOnReady=true}},onReadyEvent:function(a){if(a&&a.type){t.onReadyChain.push(a.type)}if(t.hasBoundOnReady){m.removeEventListener("DOMContentLoaded",t.onReadyEvent,false);p.removeEventListener("load",t.onReadyEvent,false)}if(!Ext.isReady){t.fireDocReady()}},fireDocReady:function(){if(!Ext.isReady){Ext._readyTime=new Date().getTime();Ext.isReady=true;l.init();t.onWindowUnload();s.onReadyChain=t.onReadyChain;if(Ext.isNumber(t.deferReadyEvent)){Ext.Function.defer(t.fireReadyEvent,t.deferReadyEvent);t.hasDocReadyTimer=true}else{t.fireReadyEvent()}}},fireReadyEvent:function(){t.hasDocReadyTimer=false;t.isFiring=true;while(s.listeners.length&&!t.isReadyPaused()){s.fire()}t.isFiring=false;t.hasFiredReady=true;Ext.globalEvents.fireEvent("idle")},onDocumentReady:function(d,a,c){c=c||{};c.single=true;s.addListener(d,a,c);if(!(t.isFiring||t.hasDocReadyTimer)){if(Ext.isReady){t.fireReadyEvent()}else{t.bindReadyEvent()}}},stoppedMouseDownEvent:new Ext.util.Event(),propRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|freezeEvent)$/,getId:function(c){var a;c=Ext.getDom(c);if(c===m){a=Ext.documentId}else{if(c==p){a=Ext.windowId}else{a=Ext.id(c)}}if(!Ext.cache[a]){Ext.addCacheEntry(a,null,c)}return a},prepareListenerConfig:function(j,a,e){var d=t.propRe,v,h,c;for(v in a){if(a.hasOwnProperty(v)){if(!d.test(v)){h=a[v];if(typeof h=="function"){c=[j,v,h,a.scope,a]}else{c=[j,v,h.fn,h.scope,h]}if(e){t.removeListener.apply(t,c)}else{t.addListener.apply(t,c)}}}}},mouseEnterLeaveRe:/mouseenter|mouseleave/,normalizeEvent:function(c,a){if(t.mouseEnterLeaveRe.test(c)&&!l.MouseEnterLeave){if(a){a=Ext.Function.createInterceptor(a,t.contains)}c=c=="mouseenter"?"mouseover":"mouseout"}else{if(c=="mousewheel"&&!l.MouseWheel&&!Ext.isOpera){c="DOMMouseScroll"}}return{eventName:c,fn:a}},contains:function(a){a=a.browserEvent||a;var c=a.currentTarget,d=t.getRelatedTarget(a);if(c&&c.firstChild){while(d){if(d===c){return false}d=d.parentNode;if(d&&(d.nodeType!=1)){d=null}}}return true},addListener:function(d,a,C,A,z){if(typeof a!=="string"){t.prepareListenerConfig(d,a);return}var e=d.dom||Ext.getDom(d),E,D,h,y,j,c,B;if(typeof C==="string"){C=Ext.resolveMethod(C,A||d)}z=z||{};D=t.normalizeEvent(a,C);h=t.createListenerWrap(e,a,D.fn,A,z);y=t.getEventListenerCache(d.dom?d:e,a);a=D.eventName;E=n||(Ext.isIE9&&!e.attachEvent);if(!E){j=t.normalizeId(e);if(j){c=Ext.cache[j][a];if(c&&c.firing){y=t.cloneEventListenerCache(e,a)}}}B=!!z.capture;y.push({fn:C,wrap:h,scope:A,capture:B});if(!E){if(y.length===1){j=t.normalizeId(e,true);C=Ext.Function.bind(t.handleSingleEvent,t,[j,a],true);Ext.cache[j][a]={firing:false,fn:C};e.attachEvent("on"+a,C)}}else{e.addEventListener(a,h,B)}if(e==m&&a=="mousedown"){t.stoppedMouseDownEvent.addListener(h)}},normalizeId:function(a,c){var d;if(a===m){d=Ext.documentId}else{if(a==p){d=Ext.windowId}else{d=a.id}}if(!d&&c){d=t.getId(a)}return d},handleSingleEvent:function(e,d,v){var j=t.getEventListenerCache(d,v),a=Ext.cache[d][v],c,h;if(a.firing){return}a.firing=true;for(h=0,c=j.length;h<c;++h){j[h].wrap(e)}a.firing=false},removeListener:function(G,E,D,B){if(typeof E!=="string"){t.prepareListenerConfig(G,E,true);return}var I=Ext.getDom(G),h,e=G.dom?G:Ext.get(I),A=t.getEventListenerCache(e,E),C=t.normalizeEvent(E).eventName,H=A.length,a,F,c,d,j;if(!I){return}c=n||(Ext.isIE9&&!I.detachEvent);if(typeof D==="string"){D=Ext.resolveMethod(D,B||G)}while(H--){d=A[H];if(d&&(!D||d.fn==D)&&(!B||d.scope===B)){j=d.wrap;if(j.task){clearTimeout(j.task);delete j.task}a=j.tasks&&j.tasks.length;if(a){while(a--){clearTimeout(j.tasks[a])}delete j.tasks}if(!c){h=t.normalizeId(I,true);F=Ext.cache[h][C];if(F&&F.firing){A=t.cloneEventListenerCache(I,C)}if(A.length===1){D=F.fn;delete Ext.cache[h][C];I.detachEvent("on"+C,D)}}else{I.removeEventListener(C,j,d.capture)}if(j&&I==m&&E=="mousedown"){t.stoppedMouseDownEvent.removeListener(j)}Ext.Array.erase(A,H,1)}}},removeAll:function(e){var d=(typeof e==="string")?e:e.id,a,h,c;if(d&&(a=Ext.cache[d])){h=a.events;for(c in h){if(h.hasOwnProperty(c)){t.removeListener(e,c)}}a.events={}}},purgeElement:function(h,a){var d=Ext.getDom(h),j=0,c,e;if(a){t.removeListener(h,a)}else{t.removeAll(h)}if(d&&d.childNodes){e=d.childNodes;for(c=e.length;j<c;j++){t.purgeElement(e[j],a)}}},createListenerWrap:function(d,a,h,j,c){c=c||{};var e,v=function(w,y){var x;if(!e){x=["if(!"+Ext.name+") {return;}"];if(c.buffer||c.delay||c.freezeEvent){if(c.freezeEvent){x.push("e = X.EventObject.setEvent(e);")}x.push("e = new X.EventObjectImpl(e, "+(c.freezeEvent?"true":"false")+");")}else{x.push("e = X.EventObject.setEvent(e);")}if(c.delegate){x.push('var result, t = e.getTarget("'+(c.delegate+"").replace(u,"\\\\")+'", this);');x.push("if(!t) {return;}")}else{x.push("var t = e.target, result;")}if(c.target){x.push("if(e.target !== options.target) {return;}")}if(c.stopEvent){x.push("e.stopEvent();")}else{if(c.preventDefault){x.push("e.preventDefault();")}if(c.stopPropagation){x.push("e.stopPropagation();")}}if(c.normalized===false){x.push("e = e.browserEvent;")}if(c.buffer){x.push("(wrap.task && clearTimeout(wrap.task));");x.push("wrap.task = setTimeout(function() {")}if(c.delay){x.push("wrap.tasks = wrap.tasks || [];");x.push("wrap.tasks.push(setTimeout(function() {")}x.push("result = fn.call(scope || dom, e, t, options);");if(c.single){x.push("evtMgr.removeListener(dom, ename, fn, scope);")}if(a!=="mousemove"&&a!=="unload"){x.push("if (evtMgr.idleEvent.listeners.length) {");x.push('Ext.globalEvents.fireEvent("idle");');x.push("}")}if(c.delay){x.push("}, "+c.delay+"));")}if(c.buffer){x.push("}, "+c.buffer+");")}x.push("return result;");e=Ext.cacheableFunctionFactory("e","options","fn","scope","ename","dom","wrap","args","X","evtMgr",x.join("\n"))}return e.call(d,w,c,h,j,a,d,v,y,Ext,t)};return v},getEventCache:function(e){var a,c,d;if(!e){return[]}if(e.$cache){a=e.$cache}else{if(typeof e==="string"){d=e}else{d=t.getId(e)}a=Ext.cache[d]}c=a.events||(a.events={});return c},getEventListenerCache:function(d,c){var a=t.getEventCache(d);return a[c]||(a[c]=[])},cloneEventListenerCache:function(d,c){var e=t.getEventCache(d),a;if(e[c]){a=e[c].slice(0)}else{a=[]}e[c]=a;return a},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,stopEvent:function(a){t.stopPropagation(a);t.preventDefault(a)},stopPropagation:function(a){a=a.browserEvent||a;if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}},preventDefault:function(c){c=c.browserEvent||c;if(c.preventDefault){c.preventDefault()}else{c.returnValue=false;try{if(c.ctrlKey||c.keyCode>111&&c.keyCode<124){c.keyCode=-1}}catch(a){}}},getRelatedTarget:function(c){c=c.browserEvent||c;var a=c.relatedTarget;if(!a){if(t.mouseLeaveRe.test(c.type)){a=c.toElement}else{if(t.mouseEnterRe.test(c.type)){a=c.fromElement}}}return t.resolveTextNode(a)},getPageX:function(a){return t.getPageXY(a)[0]},getPageY:function(a){return t.getPageXY(a)[1]},getPageXY:function(h){h=h.browserEvent||h;var a=h.pageX,d=h.pageY,e=m.documentElement,c=m.body;if(!a&&a!==0){a=h.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0);d=h.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)}return[a,d]},getTarget:function(a){a=a.browserEvent||a;return t.resolveTextNode(a.target||a.srcElement)},resolveTextNode:Ext.isGecko?function(a){if(a){var c=HTMLElement.prototype.toString.call(a);if(c!=="[xpconnect wrapped native prototype]"&&c!=="[object XULElement]"){return a.nodeType==3?a.parentNode:a}}}:function(a){return a&&a.nodeType==3?a.parentNode:a},curWidth:0,curHeight:0,onWindowResize:function(d,e,a){var c=t.resizeEvent;if(!c){t.resizeEvent=c=new Ext.util.Event();t.on(p,"resize",t.fireResize,null,{buffer:100})}c.addListener(d,e,a)},fireResize:function(){var c=Ext.Element.getViewWidth(),a=Ext.Element.getViewHeight();if(t.curHeight!=a||t.curWidth!=c){t.curHeight=a;t.curWidth=c;t.resizeEvent.fire(c,a)}},removeResizeListener:function(d,a){var c=t.resizeEvent;if(c){c.removeListener(d,a)}},onWindowUnload:function(d,e,a){var c=t.unloadEvent;if(!c){t.unloadEvent=c=new Ext.util.Event();t.addListener(p,"unload",t.fireUnload)}if(d){c.addListener(d,e,a)}},fireUnload:function(){try{m=p=undefined;var d,a,h,j,c;t.unloadEvent.fire();if(Ext.isGecko3){d=Ext.ComponentQuery.query("gridview");a=0;h=d.length;for(;a<h;a++){d[a].scrollToTop()}}c=Ext.cache;for(j in c){if(c.hasOwnProperty(j)){t.removeAll(j)}}}catch(e){}},removeUnloadListener:function(d,a){var c=t.unloadEvent;if(c){c.removeListener(d,a)}},useKeyDown:Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||(Ext.isOpera&&Ext.operaVersion<12)),getKeyEvent:function(){return t.useKeyDown?"keydown":"keypress"}});if(!n&&document.attachEvent){Ext.apply(t,{pollScroll:function(){var c=true;try{document.documentElement.doScroll("left")}catch(a){c=false}if(c&&document.body){t.onReadyEvent({type:"doScroll"})}else{t.scrollTimeout=setTimeout(t.pollScroll,20)}return c},scrollTimeout:null,readyStatesRe:/complete/i,checkReadyState:function(){var a=document.readyState;if(t.readyStatesRe.test(a)){t.onReadyEvent({type:a})}},bindReadyEvent:function(){var c=true;if(t.hasBoundOnReady){return}try{c=window.frameElement===undefined}catch(a){c=false}if(!c||!m.documentElement.doScroll){t.pollScroll=Ext.emptyFn}if(t.pollScroll()===true){return}if(m.readyState=="complete"){t.onReadyEvent({type:"already "+(m.readyState||"body")})}else{m.attachEvent("onreadystatechange",t.checkReadyState);window.attachEvent("onload",t.onReadyEvent);t.hasBoundOnReady=true}},onReadyEvent:function(a){if(a&&a.type){t.onReadyChain.push(a.type)}if(t.hasBoundOnReady){document.detachEvent("onreadystatechange",t.checkReadyState);window.detachEvent("onload",t.onReadyEvent)}if(Ext.isNumber(t.scrollTimeout)){clearTimeout(t.scrollTimeout);delete t.scrollTimeout}if(!Ext.isReady){t.fireDocReady()}},onReadyChain:[]})}Ext.onReady=function(d,a,c){Ext.Loader.onReady(d,a,true,c)};Ext.onDocumentReady=t.onDocumentReady;t.on=t.addListener;t.un=t.removeListener;Ext.onReady(o)}();(Ext.cmd.derive("Ext.util.Observable",Ext.Base,function(l){var o=Ext.emptyFn,p=[],n=Array.prototype,m=n.slice,q=Ext.util.Event,j=function(a){if(a instanceof j){return a}this.observable=a;if(arguments[1].isObservable){this.managedListeners=true}this.args=m.call(arguments,1)};j.prototype.destroy=function(){this.observable[this.managedListeners?"mun":"un"].apply(this.observable,this.args)};return{statics:{releaseCapture:function(a){a.fireEventArgs=this.prototype.fireEventArgs},capture:function(a,d,e){var c=function(s,h){return d.apply(e,[s].concat(h))};this.captureArgs(a,c,e)},captureArgs:function(a,c,d){a.fireEventArgs=Ext.Function.createInterceptor(a.fireEventArgs,c,d)},observe:function(c,a){if(c){if(!c.isObservable){Ext.applyIf(c,new this());this.captureArgs(c.prototype,c.fireEventArgs,c)}if(Ext.isObject(a)){c.on(a)}}return c},prepareClass:function(c,d){if(!c.HasListeners){var a=function(){},e=c.superclass.HasListeners||(d&&d.HasListeners)||l.HasListeners;c.prototype.HasListeners=c.HasListeners=a;a.prototype=c.hasListeners=new e()}}},isObservable:true,eventsSuspended:0,constructor:function(c){var a=this;Ext.apply(a,c);if(!a.hasListeners){a.hasListeners=new a.HasListeners()}a.events=a.events||{};if(a.listeners){a.on(a.listeners);a.listeners=null}if(a.bubbleEvents){a.enableBubble(a.bubbleEvents)}},onClassExtended:function(a){if(!a.HasListeners){l.prepareClass(a)}},eventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|destroyable|vertical|horizontal|freezeEvent|priority)$/,addManagedListener:function(c,t,e,a,x,u){var h=this,d=h.managedListeners=h.managedListeners||[],v,w;if(typeof t!=="string"){w=arguments.length>4?x:t;x=t;for(t in x){if(x.hasOwnProperty(t)){v=x[t];if(!h.eventOptionsRe.test(t)){h.addManagedListener(c,t,v.fn||v,v.scope||x.scope||a,v.fn?v:w,true)}}}if(x&&x.destroyable){return new j(h,c,x)}}else{if(typeof e==="string"){a=a||h;e=Ext.resolveMethod(e,a)}if(e!==o){d.push({item:c,ename:t,fn:e,scope:a,options:x});c.on(t,e,a,x);if(!u&&x&&x.destroyable){return new j(h,c,t,e,a)}}}},removeManagedListener:function(c,u,e,a){var h=this,x,v,d,w,t;if(typeof u!=="string"){x=u;for(u in x){if(x.hasOwnProperty(u)){v=x[u];if(!h.eventOptionsRe.test(u)){h.removeManagedListener(c,u,v.fn||v,v.scope||x.scope||a)}}}}else{d=h.managedListeners?h.managedListeners.slice():[];if(typeof e==="string"){a=a||h;e=Ext.resolveMethod(e,a)}for(t=0,w=d.length;t<w;t++){h.removeManagedListenerItem(false,d[t],c,u,e,a)}}},fireEvent:function(a){return this.fireEventArgs(a,m.call(arguments,1))},fireEventArgs:function(e,c){e=e.toLowerCase();var h=this,a=h.events,s=a&&a[e],d=true;if(s&&h.hasListeners[e]){d=h.continueFireEvent(e,c||p,s.bubble)}return d},continueFireEvent:function(c,t,d){var h=this,e,s,a=true;do{if(h.eventsSuspended){if((e=h.eventQueue)){e.push([c,t,d])}return a}else{s=h.events[c];if(s&&s!==true){if((a=s.fire.apply(s,t))===false){break}}}}while(d&&(h=h.getBubbleParent()));return a},getBubbleParent:function(){var a=this,c=a.getBubbleTarget&&a.getBubbleTarget();if(c&&c.isObservable){return c}return null},addListener:function(a,t,u,c){var h=this,d,s,e=0;if(typeof a!=="string"){c=a;for(a in c){if(c.hasOwnProperty(a)){d=c[a];if(!h.eventOptionsRe.test(a)){h.addListener(a,d.fn||d,d.scope||c.scope,d.fn?d:c)}}}if(c&&c.destroyable){return new j(h,c)}}else{a=a.toLowerCase();s=h.events[a];if(s&&s.isEvent){e=s.listeners.length}else{h.events[a]=s=new q(h,a)}if(typeof t==="string"){u=u||h;t=Ext.resolveMethod(t,u)}if(t!==o){s.addListener(t,u,c);if(s.listeners.length!==e){h.hasListeners._incr_(a)}if(c&&c.destroyable){return new j(h,a,t,u,c)}}}},removeListener:function(c,t,a){var h=this,d,s,e;if(typeof c!=="string"){e=c;for(c in e){if(e.hasOwnProperty(c)){d=e[c];if(!h.eventOptionsRe.test(c)){h.removeListener(c,d.fn||d,d.scope||e.scope)}}}}else{c=c.toLowerCase();s=h.events[c];if(s&&s.isEvent){if(typeof t==="string"){a=a||h;t=Ext.resolveMethod(t,a)}if(s.removeListener(t,a)){h.hasListeners._decr_(c)}}}},clearListeners:function(){var c=this.events,e=this.hasListeners,a,d;for(d in c){if(c.hasOwnProperty(d)){a=c[d];if(a.isEvent){delete e[d];a.clearListeners()}}}this.clearManagedListeners()},clearManagedListeners:function(){var c=this.managedListeners||[],a=0,d=c.length;for(;a<d;a++){this.removeManagedListenerItem(true,c[a])}this.managedListeners=[]},removeManagedListenerItem:function(d,e,h,c,s,a){if(d||(e.item===h&&e.ename===c&&(!s||e.fn===s)&&(!a||e.scope===a))){e.item.un(e.ename,e.fn,e.scope);if(!d){Ext.Array.remove(this.managedListeners,e)}}},addEvents:function(h){var s=this,a=s.events||(s.events={}),e,d,c;if(typeof h=="string"){for(d=arguments,c=d.length;c--;){e=d[c];if(!a[e]){a[e]=true}}}else{Ext.applyIf(s.events,h)}},hasListener:function(a){return !!this.hasListeners[a.toLowerCase()]},isSuspended:function(a){var c=this.eventsSuspended>0;if(!c&&a){a=this.events[a];if(a&&a.isEvent){return a.isSuspended()}}return c},suspendEvents:function(a){this.eventsSuspended+=1;if(a&&!this.eventQueue){this.eventQueue=[]}},suspendEvent:function(d){var e=arguments.length,s=this.events,a,h,c;for(a=0;a<e;a++){c=arguments[a];h=s[c];if(!h||typeof h=="boolean"){s[c]=h=new q(this,c)}h.suspend()}},resumeEvent:function(){var d=arguments.length,c,a;for(c=0;c<d;c++){a=this.events[arguments[c]];if(a&&a.resume){a.resume()}}},resumeEvents:function(){var e=this,a=e.eventQueue,c,d;if(e.eventsSuspended&&!--e.eventsSuspended){delete e.eventQueue;if(a){c=a.length;for(d=0;d<c;d++){e.continueFireEvent.apply(e,a[d])}}}},relayEvents:function(d,a,s){var t=this,e=a.length,c=0,u,h={};for(;c<e;c++){u=a[c];h[u]=t.createRelayer(s?s+u:u)}t.mon(d,h,null,null,undefined);return new j(t,d,h)},createRelayer:function(d,c){var a=this;return function(){return a.fireEventArgs.call(a,d,c?m.apply(arguments,c):arguments)}},enableBubble:function(h){if(h){var t=this,s=(typeof h=="string")?arguments:h,u=s.length,c=t.events,d,a,e;for(e=0;e<u;++e){d=s[e].toLowerCase();a=c[d];if(!a||typeof a=="boolean"){c[d]=a=new q(t,d)}t.hasListeners._incr_(d);a.bubble=true}}}}},1,0,0,0,0,0,[Ext.util,"Observable"],function(){var h=this,m=h.prototype,o=function(){},l=function(c){if(!c.HasListeners){var a=c.prototype;h.prepareClass(c,this);c.onExtended(function(d){h.prepareClass(d)});if(a.onClassMixedIn){Ext.override(c,{onClassMixedIn:function(d){l.call(this,d);this.callParent(arguments)}})}else{a.onClassMixedIn=function(d){l.call(this,d)}}}},j;o.prototype={_decr_:function(a){if(!--this[a]){delete this[a]}},_incr_:function(a){if(this.hasOwnProperty(a)){++this[a]}else{this[a]=1}}};m.HasListeners=h.HasListeners=o;h.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"});h.observeClass=h.observe;Ext.globalEvents=j=new h({events:{idle:Ext.EventManager.idleEvent,ready:Ext.EventManager.readyEvent}});Ext.on=function(){return j.addListener.apply(j,arguments)};Ext.un=function(){return j.removeListener.apply(j,arguments)};function n(q){var s=(this.methodEvents=this.methodEvents||{})[q],d,e,c,a=this,p;if(!s){this.methodEvents[q]=s={};s.originalFn=this[q];s.methodName=q;s.before=[];s.after=[];p=function(t,u,v){if((e=t.apply(u||a,v))!==undefined){if(typeof e=="object"){if(e.returnValue!==undefined){d=e.returnValue}else{d=e}c=!!e.cancel}else{if(e===false){c=true}else{d=e}}}};this[q]=function(){var u=Array.prototype.slice.call(arguments,0),v,t,w;d=e=undefined;c=false;for(t=0,w=s.before.length;t<w;t++){v=s.before[t];p(v.fn,v.scope,u);if(c){return d}}if((e=s.originalFn.apply(a,u))!==undefined){d=e}for(t=0,w=s.after.length;t<w;t++){v=s.after[t];p(v.fn,v.scope,u);if(c){return d}}return d}}return s}Ext.apply(m,{onClassMixedIn:l,beforeMethod:function(a,c,d){n.call(this,a).before.push({fn:c,scope:d})},afterMethod:function(a,c,d){n.call(this,a).after.push({fn:c,scope:d})},removeMethodListener:function(q,c,d){var a=this.getMethodEvent(q),e,p;for(e=0,p=a.before.length;e<p;e++){if(a.before[e].fn==c&&a.before[e].scope==d){Ext.Array.erase(a.before,e,1);return}}for(e=0,p=a.after.length;e<p;e++){if(a.after[e].fn==c&&a.after[e].scope==d){Ext.Array.erase(a.after,e,1);return}}},toggleEventLogging:function(a){Ext.util.Observable[a?"capture":"releaseCapture"](this,function(c){if(Ext.isDefined(Ext.global.console)){Ext.global.console.log(c,arguments)}})}})}));(Ext.cmd.derive("Ext.EventObjectImpl",Ext.Base,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:(function(){var c;if(Ext.isGecko){c=3}else{if(Ext.isMac){if(Ext.isSafari&&Ext.webKitVersion>=532){c=120}else{c=12}c*=3}else{c=120}}return c}()),clickRe:/(dbl)?click/,safariKeys:{3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},btnMap:Ext.isIE9m?{1:0,4:1,2:2}:{0:0,1:1,2:2},isEvent:true,constructor:function(d,c){if(d){this.setEvent(d.browserEvent||d,c)}},setEvent:function(l,j){var e=this,h;if(l===e||(l&&l.browserEvent)){return l}e.browserEvent=l;if(l){h=l.button?e.btnMap[l.button]:(l.which?l.which-1:-1);if(e.clickRe.test(l.type)&&h==-1){h=0}e.type=l.type;e.button=h;e.shiftKey=l.shiftKey;e.ctrlKey=l.ctrlKey||l.metaKey||false;e.altKey=l.altKey;e.keyCode=l.keyCode;e.charCode=l.charCode;e.target=Ext.EventManager.getTarget(l);e.relatedTarget=Ext.EventManager.getRelatedTarget(l);e.currentTarget=l.currentTarget;e.xy=(j?e.getXY():null)}else{e.button=-1;e.shiftKey=false;e.ctrlKey=false;e.altKey=false;e.keyCode=0;e.charCode=0;e.target=null;e.xy=[0,0]}return e},clone:function(){return new this.self(this.browserEvent,this)},stopEvent:function(){this.stopPropagation();this.preventDefault()},preventDefault:function(){if(this.browserEvent){Ext.EventManager.preventDefault(this.browserEvent)}},stopPropagation:function(){var c=this.browserEvent;if(c){if(c.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(this)}Ext.EventManager.stopPropagation(c)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(c){return Ext.isWebKit?(this.safariKeys[c]||c):c},getPageX:function(){return this.getX()},getPageY:function(){return this.getY()},getX:function(){return this.getXY()[0]},getY:function(){return this.getXY()[1]},getXY:function(){if(!this.xy){this.xy=Ext.EventManager.getPageXY(this.browserEvent)}return this.xy},getTarget:function(d,h,e){if(d){return Ext.fly(this.target).findParent(d,h,e)}return e?Ext.get(this.target):this.target},getRelatedTarget:function(d,h,e){if(d&&this.relatedTarget){return Ext.fly(this.relatedTarget).findParent(d,h,e)}return e?Ext.get(this.relatedTarget):this.relatedTarget},correctWheelDelta:function(h){var d=this.WHEEL_SCALE,e=Math.round(h/d);if(!e&&h){e=(h<0)?-1:1}return e},getWheelDeltas:function(){var j=this,l=j.browserEvent,e=0,h=0;if(Ext.isDefined(l.wheelDeltaX)){e=l.wheelDeltaX;h=l.wheelDeltaY}else{if(l.wheelDelta){h=l.wheelDelta}else{if(l.detail){h=-l.detail;if(h>100){h=3}else{if(h<-100){h=-3}}if(Ext.isDefined(l.axis)&&l.axis===l.HORIZONTAL_AXIS){e=h;h=0}}}}return{x:j.correctWheelDelta(e),y:j.correctWheelDelta(h)}},getWheelDelta:function(){var c=this.getWheelDeltas();return c.y},within:function(m,l,h){if(m){var n=l?this.getRelatedTarget():this.getTarget(),j;if(n){j=Ext.fly(m,"_internal").contains(n);if(!j&&h){j=n==Ext.getDom(m)}return j}}return false},isNavKeyPress:function(){var c=this,d=this.normalizeKey(c.keyCode);return(d>=33&&d<=40)||d==c.RETURN||d==c.TAB||d==c.ESC},isSpecialKey:function(){var c=this.normalizeKey(this.keyCode);return(this.type=="keypress"&&this.ctrlKey)||this.isNavKeyPress()||(c==this.BACKSPACE)||(c>=16&&c<=20)||(c>=44&&c<=46)},getPoint:function(){var c=this.getXY();return new Ext.util.Point(c[0],c[1])},hasModifier:function(){var c=this;return !!(c.ctrlKey||c.altKey||c.shiftKey||c.metaKey)},injectEvent:(function(){var m,l={},n;if(!Ext.isIE9m&&document.createEvent){m={createHtmlEvent:function(a,d,e,o){var c=a.createEvent("HTMLEvents");c.initEvent(d,e,o);return c},createMouseEvent:function(D,F,w,x,d,y,A,z,C,G,a,e,c){var B=D.createEvent("MouseEvents"),E=D.defaultView||window;if(B.initMouseEvent){B.initMouseEvent(F,w,x,E,d,y,A,y,A,z,C,G,a,e,c)}else{B=D.createEvent("UIEvents");B.initEvent(F,w,x);B.view=E;B.detail=d;B.screenX=y;B.screenY=A;B.clientX=y;B.clientY=A;B.ctrlKey=z;B.altKey=C;B.metaKey=a;B.shiftKey=G;B.button=e;B.relatedTarget=c}return B},createUIEvent:function(q,c,e,o,d){var a=q.createEvent("UIEvents"),p=q.defaultView||window;a.initUIEvent(c,e,o,p,d);return a},fireEvent:function(a,d,c){a.dispatchEvent(c)},fixTarget:function(a){if(a==window&&!a.dispatchEvent){return document}return a}}}else{if(document.createEventObject){n={0:1,1:4,2:2};m={createHtmlEvent:function(a,d,e,o){var c=a.createEventObject();c.bubbles=e;c.cancelable=o;return c},createMouseEvent:function(C,D,v,w,d,x,z,y,B,E,a,e,c){var A=C.createEventObject();A.bubbles=v;A.cancelable=w;A.detail=d;A.screenX=x;A.screenY=z;A.clientX=x;A.clientY=z;A.ctrlKey=y;A.altKey=B;A.shiftKey=E;A.metaKey=a;A.button=n[e]||e;A.relatedTarget=c;return A},createUIEvent:function(a,d,o,p,e){var c=a.createEventObject();c.bubbles=o;c.cancelable=p;return c},fireEvent:function(a,d,c){a.fireEvent("on"+d,c)},fixTarget:function(a){if(a==document){return document.documentElement}return a}}}}Ext.Object.each({load:[false,false],unload:[false,false],select:[true,false],change:[true,false],submit:[true,true],reset:[true,false],resize:[true,false],scroll:[true,false]},function(c,a){var d=a[0],e=a[1];l[c]=function(q,p){var o=m.createHtmlEvent(c,d,e);m.fireEvent(q,c,o)}});function h(a,c){var d=(a!="mousemove");return function(q,p){var e=p.getXY(),o=m.createMouseEvent(q.ownerDocument,a,true,d,c,e[0],e[1],p.ctrlKey,p.altKey,p.shiftKey,p.metaKey,p.button,p.relatedTarget);m.fireEvent(q,a,o)}}Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(a){l[a]=h(a,1)});Ext.Object.each({focusin:[true,false],focusout:[true,false],activate:[true,true],focus:[false,false],blur:[false,false]},function(c,a){var d=a[0],e=a[1];l[c]=function(q,p){var o=m.createUIEvent(q.ownerDocument,c,d,e,1);m.fireEvent(q,c,o)}});if(!m){l={};m={fixTarget:Ext.identityFn}}function j(a,c){}return function(a){var c=this,d=l[c.type]||j,e=a?(a.dom||a):c.getTarget();e=m.fixTarget(e);d(e,c)}}())},1,0,0,0,0,0,[Ext,"EventObjectImpl"],function(){Ext.EventObject=new Ext.EventObjectImpl()}));(Ext.cmd.derive("Ext.dom.AbstractQuery",Ext.Base,{select:function(m,j){var n=[],q,o,p,s,l;j=j||document;if(typeof j=="string"){j=document.getElementById(j)}m=Ext.splitAndUnescape(m,",");for(o=0,s=m.length;o<s;o++){if(typeof m[o]=="string"){if(typeof m[o][0]=="@"){q=j.getAttributeNode(m[o].substring(1));n.push(q)}else{q=j.querySelectorAll(m[o]);for(p=0,l=q.length;p<l;p++){n.push(q[p])}}}}return n},selectNode:function(c,d){return this.select(c,d)[0]},is:function(d,c){if(typeof d=="string"){d=document.getElementById(d)}return this.select(c).indexOf(d)!==-1}},0,0,0,0,0,0,[Ext.dom,"AbstractQuery"],0));(Ext.cmd.derive("Ext.dom.AbstractHelper",Ext.Base,{emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,styleSepRe:/\s*(?::|;)\s*/,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},decamelizeName:(function(){var h=/([a-z])([A-Z])/g,d={};function e(j,a,c){return a+"-"+c.toLowerCase()}return function(a){return d[a]||(d[a]=a.replace(h,e))}}()),generateMarkup:function(m,t){var n=this,o=typeof m,p,u,l,q,s;if(o=="string"||o=="number"){t.push(m)}else{if(Ext.isArray(m)){for(q=0;q<m.length;q++){if(m[q]){n.generateMarkup(m[q],t)}}}else{l=m.tag||"div";t.push("<",l);for(p in m){if(m.hasOwnProperty(p)){u=m[p];if(!n.confRe.test(p)){if(typeof u=="object"){t.push(" ",p,'="');n.generateStyles(u,t,true).push('"')}else{t.push(" ",n.attributeTransform[p]||p,'="',u,'"')}}}}if(n.emptyTags.test(l)){t.push("/>")}else{t.push(">");if((u=m.tpl)){u.applyOut(m.tplData,t)}if((u=m.html)){t.push(u)}if((u=m.cn||m.children)){n.generateMarkup(u,t)}s=n.closeTags;t.push(s[l]||(s[l]="</"+l+">"))}}}return t},generateStyles:function(l,o,m){var a=o||[],n,j;for(n in l){if(l.hasOwnProperty(n)){j=l[n];n=this.decamelizeName(n);if(m&&Ext.String.hasHtmlCharacters(j)){j=Ext.String.htmlEncode(j)}a.push(n,":",j,";")}}return o||a.join("")},markup:function(d){if(typeof d=="string"){return d}var c=this.generateMarkup(d,[]);return c.join("")},applyStyles:function(l,j){if(j){var e=0,h;l=Ext.fly(l,"_applyStyles");if(typeof j=="function"){j=j.call()}if(typeof j=="string"){j=Ext.util.Format.trim(j).split(this.styleSepRe);for(h=j.length;e<h;){l.setStyle(j[e++],j[e++])}}else{if(Ext.isObject(j)){l.setStyle(j)}}}},insertHtml:function(t,p,s){var o={},m,l,n,q;t=t.toLowerCase();o.beforebegin=["BeforeBegin","previousSibling"];o.afterend=["AfterEnd","nextSibling"];l=p.ownerDocument.createRange();m="setStart"+(this.endRe.test(t)?"After":"Before");if(o[t]){l[m](p);n=l.createContextualFragment(s);p.parentNode.insertBefore(n,t=="beforebegin"?p:p.nextSibling);return p[(t=="beforebegin"?"previous":"next")+"Sibling"]}else{q=(t=="afterbegin"?"first":"last")+"Child";if(p.firstChild){l[m](p[q]);n=l.createContextualFragment(s);if(t=="afterbegin"){p.insertBefore(n,p.firstChild)}else{p.appendChild(n)}}else{p.innerHTML=s}return p[q]}throw'Illegal insertion point -> "'+t+'"'},insertBefore:function(e,h,d){return this.doInsert(e,h,d,"beforebegin")},insertAfter:function(e,h,d){return this.doInsert(e,h,d,"afterend","nextSibling")},insertFirst:function(e,h,d){return this.doInsert(e,h,d,"afterbegin","firstChild")},append:function(e,h,d){return this.doInsert(e,h,d,"beforeend","",true)},overwrite:function(e,h,d){e=Ext.getDom(e);e.innerHTML=this.markup(h);return d?Ext.get(e.firstChild):e.firstChild},doInsert:function(p,n,o,m,q,l){var j=this.insertHtml(m,Ext.getDom(p),this.markup(n));return o?Ext.get(j,true):j}},0,0,0,0,0,0,[Ext.dom,"AbstractHelper"],0));Ext.define("Ext.dom.AbstractElement_static",{override:"Ext.dom.AbstractElement",inheritableStatics:{unitRe:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,camelRe:/(-[a-z])/gi,msRe:/^-ms-/,cssRe:/([a-z0-9\-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*)?;?/gi,opacityRe:/alpha\(opacity=(.*)\)/i,propertyCache:{},defaultUnit:"px",borders:{l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},paddings:{l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},margins:{l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},addUnits:function(c,d){if(typeof c=="number"){return c+(d||this.defaultUnit||"px")}if(c===""||c=="auto"||c===undefined||c===null){return c||""}if(!this.unitRe.test(c)){return c||""}return c},isAncestor:function(c,h){var e=false;c=Ext.getDom(c);h=Ext.getDom(h);if(c&&h){if(c.contains){return c.contains(h)}else{if(c.compareDocumentPosition){return !!(c.compareDocumentPosition(h)&16)}else{while((h=h.parentNode)){e=h==c||e}}}}return e},parseBox:function(l){l=l||0;var h=typeof l,j,e;if(h==="number"){return{top:l,right:l,bottom:l,left:l}}else{if(h!=="string"){return l}}j=l.split(" ");e=j.length;if(e==1){j[1]=j[2]=j[3]=j[0]}else{if(e==2){j[2]=j[0];j[3]=j[1]}else{if(e==3){j[3]=j[1]}}}return{top:parseFloat(j[0])||0,right:parseFloat(j[1])||0,bottom:parseFloat(j[2])||0,left:parseFloat(j[3])||0}},unitizeBox:function(a,h){var j=this.addUnits,l=this.parseBox(a);return j(l.top,h)+" "+j(l.right,h)+" "+j(l.bottom,h)+" "+j(l.left,h)},camelReplaceFn:function(a,d){return d.charAt(1).toUpperCase()},normalize:function(c){if(c=="float"){c=Ext.supports.Float?"cssFloat":"styleFloat"}return this.propertyCache[c]||(this.propertyCache[c]=c.replace(this.msRe,"ms-").replace(this.camelRe,this.camelReplaceFn))},getDocumentHeight:function(){return Math.max(!Ext.isStrict?document.body.scrollHeight:document.documentElement.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(!Ext.isStrict?document.body.scrollWidth:document.documentElement.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return window.innerHeight},getViewportWidth:function(){return window.innerWidth},getViewSize:function(){return{width:window.innerWidth,height:window.innerHeight}},getOrientation:function(){if(Ext.supports.OrientationChange){return(window.orientation==0)?"portrait":"landscape"}return(window.innerHeight>window.innerWidth)?"portrait":"landscape"},fromPoint:function(d,c){return Ext.get(document.elementFromPoint(d,c))},parseStyles:function(l){var h={},e=this.cssRe,j;if(l){e.lastIndex=0;while((j=e.exec(l))){h[j[1]]=j[2]||""}}return h}}},function(){var l=document,e=null,h=l.compatMode=="CSS1Compat";if(!("activeElement" in l)&&l.addEventListener){l.addEventListener("focus",function(a){if(a&&a.target){e=(a.target==l)?null:a.target}},true)}function j(c,a,d){return function(){c.selectionStart=a;c.selectionEnd=d}}this.addInheritableStatics({getActiveElement:function(){var a;try{a=l.activeElement}catch(c){}a=a||e;if(!a){a=e=document.body}return a},getRightMarginFixCleaner:function(c){var p=Ext.supports,o=p.DisplayChangeInputSelectionBug,d=p.DisplayChangeTextAreaSelectionBug,a,s,t,q;if(o||d){a=l.activeElement||e;s=a&&a.tagName;if((d&&s=="TEXTAREA")||(o&&s=="INPUT"&&a.type=="text")){if(Ext.dom.Element.isAncestor(c,a)){t=a.selectionStart;q=a.selectionEnd;if(Ext.isNumber(t)&&Ext.isNumber(q)){return j(a,t,q)}}}}return Ext.emptyFn},getViewWidth:function(a){return a?Ext.dom.Element.getDocumentWidth():Ext.dom.Element.getViewportWidth()},getViewHeight:function(a){return a?Ext.dom.Element.getDocumentHeight():Ext.dom.Element.getViewportHeight()},getDocumentHeight:function(){return Math.max(!h?l.body.scrollHeight:l.documentElement.scrollHeight,Ext.dom.Element.getViewportHeight())},getDocumentWidth:function(){return Math.max(!h?l.body.scrollWidth:l.documentElement.scrollWidth,Ext.dom.Element.getViewportWidth())},getViewportHeight:function(){return Ext.isIE9m?(Ext.isStrict?l.documentElement.clientHeight:l.body.clientHeight):self.innerHeight},getViewportWidth:function(){return(!Ext.isStrict&&!Ext.isOpera)?l.body.clientWidth:Ext.isIE9m?l.documentElement.clientWidth:self.innerWidth},serializeForm:function(A){var z=A.elements||(document.forms[A]||Ext.getDom(A)).elements,F=false,G=encodeURIComponent,o="",x=z.length,d,C,H,D,E,c,y,a,B;for(c=0;c<x;c++){d=z[c];C=d.name;H=d.type;D=d.options;if(!d.disabled&&C){if(/select-(one|multiple)/i.test(H)){a=D.length;for(y=0;y<a;y++){B=D[y];if(B.selected){E=B.hasAttribute?B.hasAttribute("value"):B.getAttributeNode("value").specified;o+=Ext.String.format("{0}={1}&",G(C),G(E?B.value:B.text))}}}else{if(!(/file|undefined|reset|button/i.test(H))){if(!(/radio|checkbox/i.test(H)&&!d.checked)&&!(H=="submit"&&F)){o+=G(C)+"="+G(d.value)+"&";F=/submit/i.test(H)}}}}}return o.substr(0,o.length-1)}})});Ext.define("Ext.dom.AbstractElement_insertion",{override:"Ext.dom.AbstractElement",appendChild:function(p,q){var o=this,m,e,n,l;if(p.nodeType||p.dom||typeof p=="string"){p=Ext.getDom(p);o.dom.appendChild(p);return !q?Ext.get(p):p}else{if(p.length){m=Ext.fly(document.createDocumentFragment(),"_internal");e=p.length;Ext.DomHelper.useDom=true;for(n=0;n<e;n++){m.appendChild(p[n],q)}Ext.DomHelper.useDom=l;o.dom.appendChild(m.dom);return q?m.dom:m}else{return o.createChild(p,null,q)}}},appendTo:function(c){Ext.getDom(c).appendChild(this.dom);return this},insertBefore:function(c){c=Ext.getDom(c);c.parentNode.insertBefore(this.dom,c);return this},insertAfter:function(c){c=Ext.getDom(c);c.parentNode.insertBefore(this.dom,c.nextSibling);return this},insertFirst:function(c,d){c=c||{};if(c.nodeType||c.dom||typeof c=="string"){c=Ext.getDom(c);this.dom.insertBefore(c,this.dom.firstChild);return !d?Ext.get(c):c}else{return this.createChild(c,this.dom.firstChild,d)}},insertSibling:function(x,u,q){var s=this,p=Ext.core.DomHelper,o=p.useDom,e=(u||"before").toLowerCase()=="after",v,y,w,t;if(Ext.isArray(x)){y=Ext.fly(document.createDocumentFragment(),"_internal");w=x.length;p.useDom=true;for(t=0;t<w;t++){v=y.appendChild(x[t],q)}p.useDom=o;s.dom.parentNode.insertBefore(y.dom,e?s.dom.nextSibling:s.dom);return v}x=x||{};if(x.nodeType||x.dom){v=s.dom.parentNode.insertBefore(Ext.getDom(x),e?s.dom.nextSibling:s.dom);if(!q){v=Ext.get(v)}}else{if(e&&!s.dom.nextSibling){v=p.append(s.dom.parentNode,x,!q)}else{v=p[e?"insertAfter":"insertBefore"](s.dom,x,!q)}}return v},replace:function(c){c=Ext.get(c);this.insertBefore(c);c.remove();return this},replaceWith:function(d){var c=this;if(d.nodeType||d.dom||typeof d=="string"){d=Ext.get(d);c.dom.parentNode.insertBefore(d.dom,c.dom)}else{d=Ext.core.DomHelper.insertBefore(c.dom,d)}delete Ext.cache[c.id];Ext.removeNode(c.dom);c.id=Ext.id(c.dom=d);Ext.dom.AbstractElement.addToCache(c.isFlyweight?new Ext.dom.AbstractElement(c.dom):c);return c},createChild:function(d,e,h){d=d||{tag:"div"};if(e){return Ext.core.DomHelper.insertBefore(e,d,h!==true)}else{return Ext.core.DomHelper.append(this.dom,d,h!==true)}},wrap:function(h,n,j){var l=Ext.core.DomHelper.insertBefore(this.dom,h||{tag:"div"},true),m=l;if(j){m=Ext.DomQuery.selectNode(j,l.dom)}m.appendChild(this.dom);return n?l.dom:l},insertHtml:function(e,l,h){var j=Ext.core.DomHelper.insertHtml(e,this.dom,l);return h?Ext.get(j):j}});Ext.define("Ext.dom.AbstractElement_style",{override:"Ext.dom.AbstractElement"},function(){var F=this,x=/\w/g,t=/\s+/,G=/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,A=Ext.supports.ClassList,E="padding",B="margin",I="border",J="-left",H="-right",v="-top",z="-bottom",u="-width",y={l:I+J+u,r:I+H+u,t:I+v+u,b:I+z+u},D={l:E+J,r:E+H,t:E+v,b:E+z},w={l:B+J,r:B+H,t:B+v,b:B+z},C=new F.Fly();Ext.override(F,{styleHooks:{},addStyles:function(c,l){var e=0,m=(c||"").match(x),a,j=m.length,d,h=[];if(j==1){e=Math.abs(parseFloat(this.getStyle(l[m[0]]))||0)}else{if(j){for(a=0;a<j;a++){d=m[a];h.push(l[d])}h=this.getStyle(h);for(a=0;a<j;a++){d=m[a];e+=Math.abs(parseFloat(h[l[d]])||0)}}}return e},addCls:(function(){var a=function(j){var h=this,n=h.dom,p=h.trimRe,e=j,o,d,m,l,q;if(typeof(j)=="string"){j=j.replace(p,"").split(t)}if(n&&j&&!!(l=j.length)){if(!n.className){n.className=j.join(" ")}else{o=n.classList;if(o){for(m=0;m<l;++m){q=j[m];if(q){if(!o.contains(q)){if(d){d.push(q)}else{d=n.className.replace(p,"");d=d?[d,q]:[q]}}}}if(d){n.className=d.join(" ")}}else{c(e)}}}return h},c=function(e){var d=this,j=d.dom,h;if(j&&e&&e.length){h=Ext.Element.mergeClsList(j.className,e);if(h.changed){j.className=h.join(" ")}}return d};return A?a:c})(),removeCls:function(d){var c=this,j=c.dom,a,h,e;if(typeof(d)=="string"){d=d.replace(c.trimRe,"").split(t)}if(j&&j.className&&d&&!!(h=d.length)){a=j.classList;if(h===1&&a){if(d[0]){a.remove(d[0])}}else{e=Ext.Element.removeCls(j.className,d);if(e.changed){j.className=e.join(" ")}}}return c},radioCls:function(a){var h=this.dom.parentNode.childNodes,d,c,e;a=Ext.isArray(a)?a:[a];for(c=0,e=h.length;c<e;c++){d=h[c];if(d&&d.nodeType==1){C.attach(d).removeCls(a)}}return this.addCls(a)},toggleCls:(function(){var c=function(h){var e=this,j=e.dom,d;if(j){h=h.replace(e.trimRe,"");if(h){d=j.classList;if(d){d.toggle(h)}else{a(h)}}}return e},a=function(d){return this.hasCls(d)?this.removeCls(d):this.addCls(d)};return A?c:a})(),hasCls:(function(){var c=function(e){var j=this.dom,h=false,d;if(j&&e){d=j.classList;if(d){h=d.contains(e)}else{h=a(e)}}return h},a=function(e){var d=this.dom;return d?e&&(" "+d.className+" ").indexOf(" "+e+" ")!==-1:false};return A?c:a})(),replaceCls:function(a,c){return this.removeCls(a).addCls(c)},isStyle:function(c,a){return this.getStyle(c)==a},getStyle:function(M,e){var d=this,n=d.dom,m=typeof M!="string",q=d.styleHooks,s=M,c=s,h=1,j,p,N,a,o,K,l;if(m){N={};s=c[0];l=0;if(!(h=c.length)){return N}}if(!n||n.documentElement){return N||""}j=n.style;if(e){K=j}else{K=n.ownerDocument.defaultView.getComputedStyle(n,null);if(!K){e=true;K=j}}do{a=q[s];if(!a){q[s]=a={name:F.normalize(s)}}if(a.get){o=a.get(n,d,e,K)}else{p=a.name;o=K[p]}if(!m){return o}N[s]=o;s=c[++l]}while(l<h);return N},getStyles:function(){var c=Ext.Array.slice(arguments),d=c.length,a;if(d&&typeof c[d-1]=="boolean"){a=c.pop()}return this.getStyle(c,a)},isTransparent:function(a){var c=this.getStyle(a);return c?G.test(c):false},setStyle:function(c,m){var d=this,l=d.dom,j=d.styleHooks,e=l.style,h=c,a;if(typeof h=="string"){a=j[h];if(!a){j[h]=a={name:F.normalize(h)}}m=(m==null)?"":m;if(a.set){a.set(l,m,d)}else{e[a.name]=m}if(a.afterSet){a.afterSet(l,m,d)}}else{for(h in c){if(c.hasOwnProperty(h)){a=j[h];if(!a){j[h]=a={name:F.normalize(h)}}m=c[h];m=(m==null)?"":m;if(a.set){a.set(l,m,d)}else{e[a.name]=m}if(a.afterSet){a.afterSet(l,m,d)}}}}return d},getHeight:function(c){var a=this.dom,d=c?(a.clientHeight-this.getPadding("tb")):a.offsetHeight;return d>0?d:0},getWidth:function(d){var a=this.dom,c=d?(a.clientWidth-this.getPadding("lr")):a.offsetWidth;return c>0?c:0},setWidth:function(c){var a=this;a.dom.style.width=F.addUnits(c);return a},setHeight:function(c){var a=this;a.dom.style.height=F.addUnits(c);return a},getBorderWidth:function(a){return this.addStyles(a,y)},getPadding:function(a){return this.addStyles(a,D)},margins:w,applyStyles:function(c){if(c){var d,e,a=this.dom;if(typeof c=="function"){c=c.call()}if(typeof c=="string"){c=Ext.util.Format.trim(c).split(/\s*(?::|;)\s*/);for(d=0,e=c.length;d<e;){a.style[F.normalize(c[d++])]=c[d++]}}else{if(typeof c=="object"){this.setStyle(c)}}}},setSize:function(c,e){var a=this,d=a.dom.style;if(Ext.isObject(c)){e=c.height;c=c.width}d.width=F.addUnits(c);d.height=F.addUnits(e);return a},getViewSize:function(){var c=document,a=this.dom;if(a==c||a==c.body){return{width:F.getViewportWidth(),height:F.getViewportHeight()}}else{return{width:a.clientWidth,height:a.clientHeight}}},getSize:function(a){var c=this.dom;return{width:Math.max(0,a?(c.clientWidth-this.getPadding("lr")):c.offsetWidth),height:Math.max(0,a?(c.clientHeight-this.getPadding("tb")):c.offsetHeight)}},repaint:function(){var a=this.dom;this.addCls(Ext.baseCSSPrefix+"repaint");setTimeout(function(){C.attach(a).removeCls(Ext.baseCSSPrefix+"repaint")},1);return this},getMargin:function(e){var d=this,a={t:"top",l:"left",r:"right",b:"bottom"},h,j,c;if(!e){c=[];for(h in d.margins){if(d.margins.hasOwnProperty(h)){c.push(d.margins[h])}}j=d.getStyle(c);if(j&&typeof j=="object"){for(h in d.margins){if(d.margins.hasOwnProperty(h)){j[a[h]]=parseFloat(j[d.margins[h]])||0}}}return j}else{return d.addStyles(e,d.margins)}},mask:function(o,j,c){var h=this,n=h.dom,m=(h.$cache||h.getCache()).data,p=m.mask,a,d,e="",l=Ext.baseCSSPrefix;h.addCls(l+"masked");if(h.getStyle("position")=="static"){h.addCls(l+"masked-relative")}if(p){p.remove()}if(j&&typeof j=="string"){e=" "+j}else{e=" "+l+"mask-gray"}a=h.createChild({role:"presentation",cls:l+"mask"+((c!==false)?"":(" "+l+"mask-gray")),html:o?('<div class="'+(j||(l+"mask-message"))+'" role="presentation">'+o+"</div>"):""});d=h.getSize();m.mask=a;if(n===document.body){d.height=window.innerHeight;if(h.orientationHandler){Ext.EventManager.unOrientationChange(h.orientationHandler,h)}h.orientationHandler=function(){d=h.getSize();d.height=window.innerHeight;a.setSize(d)};Ext.EventManager.onOrientationChange(h.orientationHandler,h)}a.setSize(d);if(Ext.is.iPad){Ext.repaint()}},unmask:function(){var d=this,a=(d.$cache||d.getCache()).data,e=a.mask,c=Ext.baseCSSPrefix;if(e){e.remove();delete a.mask}d.removeCls([c+"masked",c+"masked-relative"]);if(d.dom===document.body){Ext.EventManager.unOrientationChange(d.orientationHandler,d);delete d.orientationHandler}}});Ext.onReady(function(){var a=Ext.supports,n,d,h,m,c;function e(o,s,p,K){var q=K[this.name]||"";return G.test(q)?"transparent":q}function j(o,s,p,K){var N=K.marginRight,M,q;if(N!="0px"){M=o.style;q=M.display;M.display="inline-block";N=(p?K:o.ownerDocument.defaultView.getComputedStyle(o,null)).marginRight;M.display=q}return N}function l(o,s,p,K){var O=K.marginRight,M,N,q;if(O!="0px"){M=o.style;N=F.getRightMarginFixCleaner(o);q=M.display;M.display="inline-block";O=(p?K:o.ownerDocument.defaultView.getComputedStyle(o,"")).marginRight;M.display=q;N()}return O}n=F.prototype.styleHooks;if(a.init){a.init()}if(!a.RightMargin){n.marginRight=n["margin-right"]={name:"marginRight",get:(a.DisplayChangeInputSelectionBug||a.DisplayChangeTextAreaSelectionBug)?l:j}}if(!a.TransparentColor){d=["background-color","border-color","color","outline-color"];for(h=d.length;h--;){m=d[h];c=F.normalize(m);n[m]=n[c]={name:c,get:e}}}})});Ext.define("Ext.dom.AbstractElement_traversal",{override:"Ext.dom.AbstractElement",findParent:function(m,j,l){var o=this.dom,q=document.documentElement,n=0,p;j=j||50;if(isNaN(j)){p=Ext.getDom(j);j=Number.MAX_VALUE}while(o&&o.nodeType==1&&n<j&&o!=q&&o!=p){if(Ext.DomQuery.is(o,m)){return l?Ext.get(o):o}n++;o=o.parentNode}return null},findParentNode:function(j,e,h){var l=Ext.fly(this.dom.parentNode,"_internal");return l?l.findParent(j,e,h):null},up:function(h,e,d){return this.findParentNode(h,e,!d)},select:function(d,c){return Ext.dom.Element.select(d,this.dom,c)},query:function(c){return Ext.DomQuery.select(c,this.dom)},down:function(e,d){var h=Ext.DomQuery.selectNode(e,this.dom);return d?h:Ext.get(h)},child:function(j,h){var m,n=this,l;l=Ext.id(n.dom);l=Ext.escapeId(l);m=Ext.DomQuery.selectNode("#"+l+" > "+j,n.dom);return h?m:Ext.get(m)},parent:function(d,c){return this.matchNode("parentNode","parentNode",d,c)},next:function(d,c){return this.matchNode("nextSibling","nextSibling",d,c)},prev:function(d,c){return this.matchNode("previousSibling","previousSibling",d,c)},first:function(d,c){return this.matchNode("nextSibling","firstChild",d,c)},last:function(d,c){return this.matchNode("previousSibling","lastChild",d,c)},matchNode:function(h,l,j,n){if(!this.dom){return null}var m=this.dom[l];while(m){if(m.nodeType==1&&(!j||Ext.DomQuery.is(m,j))){return !n?Ext.get(m):m}m=m[h]}return null},isAncestor:function(c){return this.self.isAncestor.call(this.self,this.dom,c)}});(Ext.cmd.derive("Ext.dom.AbstractElement",Ext.Base,{trimRe:/^\s+|\s+$/g,whitespaceRe:/\s/,inheritableStatics:{trimRe:/^\s+|\s+$/g,whitespaceRe:/\s/,get:function(s){var m=this,l=window.document,q=Ext.dom.Element,n,t,o,p,u;if(!s){return null}if(s.isFly){s=s.dom}if(typeof s=="string"){if(s==Ext.windowId){return q.get(window)}else{if(s==Ext.documentId){return q.get(l)}}n=Ext.cache[s];if(n&&n.skipGarbageCollection){o=n.el;return o}if(!(p=l.getElementById(s))){return null}if(n&&n.el){o=Ext.updateCacheEntry(n,p).el}else{o=new q(p,!!n)}return o}else{if(s.tagName){if(!(u=s.id)){u=Ext.id(s)}n=Ext.cache[u];if(n&&n.el){o=Ext.updateCacheEntry(n,s).el}else{o=new q(s,!!n)}return o}else{if(s instanceof m){if(s!=m.docEl&&s!=m.winEl){u=s.id;n=Ext.cache[u];if(n){Ext.updateCacheEntry(n,l.getElementById(u)||s.dom)}}return s}else{if(s.isComposite){return s}else{if(Ext.isArray(s)){return m.select(s)}else{if(s===l){if(!m.docEl){t=m.docEl=Ext.Object.chain(q.prototype);t.dom=l;t.el=t;t.id=Ext.id(l);m.addToCache(t)}return m.docEl}else{if(s===window){if(!m.winEl){m.winEl=Ext.Object.chain(q.prototype);m.winEl.dom=window;m.winEl.id=Ext.id(window);m.addToCache(m.winEl)}return m.winEl}}}}}}}return null},addToCache:function(d,c){if(d){Ext.addCacheEntry(c,d)}return d},addMethods:function(){this.override.apply(this,arguments)},mergeClsList:function(){var o,q={},t,x,v,s,w,j=[],u=false,y=this.trimRe,p=this.whitespaceRe;for(t=0,x=arguments.length;t<x;t++){o=arguments[t];if(Ext.isString(o)){o=o.replace(y,"").split(p)}if(o){for(v=0,s=o.length;v<s;v++){w=o[v];if(!q[w]){if(t){u=true}q[w]=true}}}}for(w in q){j.push(w)}j.changed=u;return j},removeCls:function(u,t){var n={},o,s,q,l=[],p=false,m=this.whitespaceRe;if(u){if(Ext.isString(u)){u=u.replace(this.trimRe,"").split(m)}for(o=0,s=u.length;o<s;o++){n[u[o]]=true}}if(t){if(Ext.isString(t)){t=t.split(m)}for(o=0,s=t.length;o<s;o++){q=t[o];if(n[q]){p=true;delete n[q]}}}for(q in n){l.push(q)}l.changed=p;return l},VISIBILITY:1,DISPLAY:2,OFFSETS:3,ASCLASS:4},constructor:function(j,h){var n=this,m=typeof j=="string"?document.getElementById(j):j,l;n.el=n;if(!m){return null}l=m.id;if(!h&&l&&Ext.cache[l]){return Ext.cache[l].el}n.dom=m;n.id=l||Ext.id(m);n.self.addToCache(n)},set:function(l,h){var n=this.dom,j,m;for(j in l){if(l.hasOwnProperty(j)){m=l[j];if(j=="style"){this.applyStyles(m)}else{if(j=="cls"){n.className=m}else{if(h!==false){if(m===undefined){n.removeAttribute(j)}else{n.setAttribute(j,m)}}else{n[j]=m}}}}}return this},defaultUnit:"px",is:function(c){return Ext.DomQuery.is(this.dom,c)},getValue:function(d){var c=this.dom.value;return d?parseInt(c,10):c},remove:function(){var d=this,c=d.dom;if(d.isAnimate){d.stopAnimation()}if(c){Ext.removeNode(c);delete d.dom}},contains:(function(){var c=function(h){var a;try{h=h.dom||h}catch(e){return true}a=HTMLElement.prototype.toString.call(h);return a==="[xpconnect wrapped native prototype]"||a==="[object XULElement]"};return function(a){if(!a||(Ext.isGecko3&&c(a))){return false}var h=this,e=a.dom||a;return(e===h.dom)||Ext.dom.AbstractElement.isAncestor(h.dom,e)}}()),getAttribute:function(e,d){var h=this.dom;return h.getAttributeNS(d,e)||h.getAttribute(d+":"+e)||h.getAttribute(e)||h[e]},update:function(c){if(this.dom){this.dom.innerHTML=c}return this},setHTML:function(c){if(this.dom){this.dom.innerHTML=c}return this},getHTML:function(){return this.dom?this.dom.innerHTML:""},hide:function(){this.setVisible(false);return this},show:function(){this.setVisible(true);return this},setVisible:function(l,j){var h=this,m=h.self,n=h.getVisibilityMode(),o=Ext.baseCSSPrefix;switch(n){case m.VISIBILITY:h.removeCls([o+"hidden-display",o+"hidden-offsets"]);h[l?"removeCls":"addCls"](o+"hidden-visibility");break;case m.DISPLAY:h.removeCls([o+"hidden-visibility",o+"hidden-offsets"]);h[l?"removeCls":"addCls"](o+"hidden-display");break;case m.OFFSETS:h.removeCls([o+"hidden-visibility",o+"hidden-display"]);h[l?"removeCls":"addCls"](o+"hidden-offsets");break}return h},getVisibilityMode:function(){var c=(this.$cache||this.getCache()).data,d=c.visibilityMode;if(d===undefined){c.visibilityMode=d=this.self.DISPLAY}return d},setVisibilityMode:function(c){(this.$cache||this.getCache()).data.visibilityMode=c;return this},getCache:function(){var d=this,c=d.dom.id||Ext.id(d.dom);d.$cache=Ext.cache[c]||Ext.addCacheEntry(c,null,d.dom);return d.$cache}},1,0,0,0,0,0,[Ext.dom,"AbstractElement"],function(){var c=this;Ext.getDetachedBody=function(){var a=c.detachedBodyEl;if(!a){a=document.createElement("div");c.detachedBodyEl=a=new c.Fly(a);a.isDetachedBody=true}return a};Ext.getElementById=function(e){var h=document.getElementById(e),a;if(!h&&(a=c.detachedBodyEl)){h=a.dom.querySelector("#"+Ext.escapeId(e))}return h};Ext.get=function(a){return Ext.dom.Element.get(a)};this.addStatics({Fly:new Ext.Class({extend:c,isFly:true,constructor:function(a){this.dom=a;this.el=this},attach:function(a){this.dom=a;this.$cache=a&&a.id?Ext.cache[a.id]:null;return this}}),_flyweights:{},fly:function(h,l){var j=null,a=c._flyweights;l=l||"_global";h=Ext.getDom(h);if(h){j=a[l]||(a[l]=new c.Fly());j.dom=h;j.$cache=h.id?Ext.cache[h.id]:null}return j}});Ext.fly=function(){return c.fly.apply(c,arguments)};(function(a){a.destroy=a.remove;if(document.querySelector){a.getById=function(h,l){var j=document.getElementById(h)||this.dom.querySelector("#"+Ext.escapeId(h));return l?j:(j?Ext.get(j):null)}}else{a.getById=function(h,l){var j=document.getElementById(h);return l?j:(j?Ext.get(j):null)}}}(this.prototype))}));(Ext.cmd.derive("Ext.dom.Helper",Ext.dom.AbstractHelper,(function(){var F="afterbegin",z="afterend",G="beforebegin",t="beforeend",w="<table>",A="</table>",E=w+"<tbody>",u="</tbody>"+A,x=E+"<tr>",C="</tr>"+u,s=document.createElement("div"),v=["BeforeBegin","previousSibling"],y=["AfterEnd","nextSibling"],D={beforebegin:v,afterend:y},B={beforebegin:v,afterend:y,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{tableRe:/^(?:table|thead|tbody|tr|td)$/i,tableElRe:/td|tr|tbody|thead/i,useDom:false,createDom:function(a,h){var o,c=document,l,e,n,d,j,m;if(Ext.isArray(a)){o=c.createDocumentFragment();for(j=0,m=a.length;j<m;j++){this.createDom(a[j],o)}}else{if(typeof a=="string"){o=c.createTextNode(a)}else{o=c.createElement(a.tag||"div");l=!!o.setAttribute;for(e in a){if(!this.confRe.test(e)){n=a[e];if(e=="cls"){o.className=n}else{if(l){o.setAttribute(e,n)}else{o[e]=n}}}}Ext.DomHelper.applyStyles(o,a.style);if((d=a.children||a.cn)){this.createDom(d,o)}else{if(a.html){o.innerHTML=a.html}}}}if(h){h.appendChild(o)}return o},ieTable:function(c,l,a,d){s.innerHTML=[l,a,d].join("");var j=-1,e=s,h;while(++j<c){e=e.firstChild}h=e.nextSibling;if(h){h=e;e=document.createDocumentFragment();while(h){nx=h.nextSibling;e.appendChild(h);h=nx}}return e},insertIntoTable:function(c,n,o,m){var a,h,j=n==G,d=n==F,l=n==t,e=n==z;if(c=="td"&&(d||l)||!this.tableElRe.test(c)&&(j||e)){return null}h=j?o:e?o.nextSibling:d?o.firstChild:null;if(j||e){o=o.parentNode}if(c=="td"||(c=="tr"&&(l||d))){a=this.ieTable(4,x,m,C)}else{if(((c=="tbody"||c=="thead")&&(l||d))||(c=="tr"&&(j||e))){a=this.ieTable(3,E,m,u)}else{a=this.ieTable(2,w,m,A)}}o.insertBefore(a,h);return a},createContextualFragment:function(d){var e=document.createDocumentFragment(),c,a;s.innerHTML=d;a=s.childNodes;c=a.length;while(c--){e.appendChild(a[0])}return e},applyStyles:function(c,a){if(a){if(typeof a=="function"){a=a.call()}if(typeof a=="string"){a=Ext.dom.Element.parseStyles(a)}if(typeof a=="object"){Ext.fly(c,"_applyStyles").setStyle(a)}}},createHtml:function(a){return this.markup(a)},doInsert:function(e,c,d,a,h,l){e=e.dom||Ext.getDom(e);var j;if(this.useDom){j=this.createDom(c,null);if(l){e.appendChild(j)}else{(h=="firstChild"?e:e.parentNode).insertBefore(j,e[h]||e)}}else{j=this.insertHtml(a,e,this.markup(c))}return d?Ext.get(j,true):j},overwrite:function(c,d,a){var e;c=Ext.getDom(c);d=this.markup(d);if(Ext.isIE&&this.tableRe.test(c.tagName)){while(c.firstChild){c.removeChild(c.firstChild)}if(d){e=this.insertHtml("afterbegin",c,d);return a?Ext.get(e):e}return null}c.innerHTML=d;return a?Ext.get(c.firstChild):c.firstChild},insertHtml:function(h,c,e){var m,j,d,l,a;h=h.toLowerCase();if(c.insertAdjacentHTML){if(Ext.isIE&&this.tableRe.test(c.tagName)&&(a=this.insertIntoTable(c.tagName.toLowerCase(),h,c,e))){return a}if((m=B[h])){if(Ext.global.MSApp&&Ext.global.MSApp.execUnsafeLocalFunction){MSApp.execUnsafeLocalFunction(function(){c.insertAdjacentHTML(m[0],e)})}else{c.insertAdjacentHTML(m[0],e)}return c[m[1]]}}else{if(c.nodeType===3){h=h==="afterbegin"?"beforebegin":h;h=h==="beforeend"?"afterend":h}j=Ext.supports.CreateContextualFragment?c.ownerDocument.createRange():undefined;l="setStart"+(this.endRe.test(h)?"After":"Before");if(D[h]){if(j){j[l](c);a=j.createContextualFragment(e)}else{a=this.createContextualFragment(e)}c.parentNode.insertBefore(a,h==G?c:c.nextSibling);return c[(h==G?"previous":"next")+"Sibling"]}else{d=(h==F?"first":"last")+"Child";if(c.firstChild){if(j){j[l](c[d]);a=j.createContextualFragment(e)}else{a=this.createContextualFragment(e)}if(h==F){c.insertBefore(a,c.firstChild)}else{c.appendChild(a)}}else{c.innerHTML=e}return c[d]}}},createTemplate:function(a){var c=this.markup(a);return new Ext.Template(c)}}})(),0,0,0,0,0,0,[Ext.dom,"Helper"],function(){Ext.ns("Ext.core");Ext.DomHelper=Ext.core.DomHelper=new this()}));(Ext.cmd.derive("Ext.Template",Ext.Base,{inheritableStatics:{from:function(c,d){c=Ext.getDom(c);return new this(c.value||c.innerHTML,d||"")}},useEval:Ext.isGecko,constructor:function(p){var n=this,j=arguments,l=[],q=0,o=j.length,m;n.initialConfig={};if(o===1&&Ext.isArray(p)){j=p;o=j.length}if(o>1){for(;q<o;q++){m=j[q];if(typeof m=="object"){Ext.apply(n.initialConfig,m);Ext.apply(n,m)}else{l.push(m)}}}else{l.push(p)}n.html=l.join("");if(n.compiled){n.compile()}},isTemplate:true,disableFormats:false,re:/\{(?:(?:(\d*)|([\w\-]+))(?:\:([A-Za-z_\.]*)(?:\((.*?)?\))?)?)\}/g,apply:function(c){if(this.compiled){return this.compiled(c).join("")}return this.evaluate(c)},evaluate:function(j){var l=this,o=l.disableFormats!==true,m=Ext.util.Format,h=l;function n(c,d,e,a,p){if(e==null||e==""){e=d}if(a&&o){if(p){p=[j[e]].concat(Ext.functionFactory("return ["+p+"];")())}else{p=[j[e]]}if(a.substr(0,5)==="this."){return h[a.substr(5)].apply(h,p)}else{if(m[a]){return m[a].apply(m,p)}else{return c}}}else{return j[e]!==undefined?j[e]:""}}return l.html.replace(l.re,n)},applyOut:function(e,d){var h=this;if(h.compiled){d.push.apply(d,h.compiled(e))}else{d.push(h.apply(e))}return d},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(e,h){var d=this;d.html=e;d.compiled=null;return h?d.compile():d},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var c=this,d;d=c.html.replace(c.compileARe,"\\\\").replace(c.compileBRe,"\\n").replace(c.compileCRe,"\\'").replace(c.re,Ext.Function.bind(c.regexReplaceFn,c));d=(this.disableFormats!==true?"var fm=Ext.util.Format;":"")+(c.useEval?"$=":"return")+" function(v){return ['"+d+"'];};";c.compiled=c.useEval?c.evalCompiled(d):(new Function("Ext",d))(Ext);return c},evalCompiled:function($){eval($);return $},regexReplaceFn:function fn(m,n,h,l,j){if(n==null||n==""){n='"'+h+'"'}else{if(this.stringFormat){n=parseInt(n)+1}}if(l&&this.disableFormats!==true){j=j?","+j:"";if(l.substr(0,5)==="this."){l=l+"("}else{if(Ext.util.Format[l]){l="fm."+l+"("}else{return m}}return"',"+l+"v["+n+"]"+j+"),'"}else{return"',v["+n+"] == undefined ? '' : v["+n+"],'"}},insertFirst:function(d,e,h){return this.doInsert("afterBegin",d,e,h)},insertBefore:function(d,e,h){return this.doInsert("beforeBegin",d,e,h)},insertAfter:function(d,e,h){return this.doInsert("afterEnd",d,e,h)},append:function(d,e,h){return this.doInsert("beforeEnd",d,e,h)},doInsert:function(h,m,j,l){var n=Ext.DomHelper.insertHtml(h,Ext.getDom(m),this.apply(j));return l?Ext.get(n):n},overwrite:function(l,h,j){var e=Ext.DomHelper.overwrite(Ext.getDom(l),this.apply(h));return j?Ext.get(e):e}},1,0,0,0,0,0,[Ext,"Template"],0));(Ext.cmd.derive("Ext.XTemplateParser",Ext.Base,{constructor:function(c){Ext.apply(this,c)},doTpl:Ext.emptyFn,parse:function(C){var m=this,z=C.length,A={elseif:"elif"},y=m.topRe,M=m.actionsRe,J,K,F,B,H,E,G,s,t,N,I,O,D;m.level=0;m.stack=K=[];for(J=0;J<z;J=N){y.lastIndex=J;B=y.exec(C);if(!B){m.doText(C.substring(J,z));break}t=B.index;N=y.lastIndex;if(J<t){F=C.substring(J,t);if(!(D&&Ext.String.trim(F)==="")){m.doText(F)}}D=false;if(B[1]){N=C.indexOf("%}",t+2);m.doEval(C.substring(t+2,N));N+=2}else{if(B[2]){N=C.indexOf("]}",t+2);m.doExpr(C.substring(t+2,N));N+=2}else{if(B[3]){m.doTag(B[3])}else{if(B[4]){I=null;while((s=M.exec(B[4]))!==null){F=s[2]||s[3];if(F){F=Ext.String.htmlDecode(F);H=s[1];H=A[H]||H;I=I||{};E=I[H];if(typeof E=="string"){I[H]=[E,F]}else{if(E){I[H].push(F)}else{I[H]=F}}}}if(!I){if(m.elseRe.test(B[4])){m.doElse()}else{if(m.defaultRe.test(B[4])){m.doDefault()}else{m.doTpl();K.push({type:"tpl"})}}}else{if(I["if"]){m.doIf(I["if"],I);K.push({type:"if"})}else{if(I["switch"]){m.doSwitch(I["switch"],I);K.push({type:"switch"});D=true}else{if(I["case"]){m.doCase(I["case"],I)}else{if(I.elif){m.doElseIf(I.elif,I)}else{if(I["for"]){++m.level;if(O=m.propRe.exec(B[4])){I.propName=O[1]||O[2]}m.doFor(I["for"],I);K.push({type:"for",actions:I})}else{if(I.foreach){++m.level;if(O=m.propRe.exec(B[4])){I.propName=O[1]||O[2]}m.doForEach(I.foreach,I);K.push({type:"foreach",actions:I})}else{if(I.exec){m.doExec(I.exec,I);K.push({type:"exec",actions:I})}}}}}}}}}else{if(B[0].length===5){K.push({type:"tpl"})}else{G=K.pop();m.doEnd(G.type,G.actions);if(G.type=="for"||G.type=="foreach"){--m.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]+)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/},1,0,0,0,0,0,[Ext,"XTemplateParser"],0));(Ext.cmd.derive("Ext.XTemplateCompiler",Ext.XTemplateParser,{useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(e){var h=this,d=h.generate(e);return h.useEval?h.evalTpl(d):(new Function("Ext",d))(Ext)},generate:function(h){var j=this,e="var fm=Ext.util.Format,ts=Object.prototype.toString;",l;j.maxLevel=0;j.body=["var c0=values, a0="+j.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\n"];if(j.definitions){if(typeof j.definitions==="string"){j.definitions=[j.definitions,e]}else{j.definitions.push(e)}}else{j.definitions=[e]}j.switches=[];j.parse(h);j.definitions.push((j.useEval?"$=":"return")+" function ("+j.fnArgs+") {",j.body.join(""),"}");l=j.definitions.join("\n");j.definitions.length=j.body.length=j.switches.length=0;delete j.definitions;delete j.body;delete j.switches;return l},doText:function(h){var d=this,e=d.body;h=h.replace(d.aposRe,"\\'").replace(d.newLineRe,"\\n");if(d.useIndex){e.push("out[out.length]='",h,"'\n")}else{e.push("out.push('",h,"')\n")}},doExpr:function(c){var d=this.body;d.push("if ((v="+c+") != null) out");if(this.useIndex){d.push("[out.length]=v+''\n")}else{d.push(".push(v+'')\n")}},doTag:function(d){var c=this.parseTag(d);if(c){this.doExpr(c)}else{this.doText("{"+d+"}")}},doElse:function(){this.body.push("} else {\n")},doEval:function(c){this.body.push(c,"\n")},doIf:function(d,h){var e=this;if(d==="."){e.body.push("if (values) {\n")}else{if(e.propNameRe.test(d)){e.body.push("if (",e.parseTag(d),") {\n")}else{e.body.push("if (",e.addFn(d),e.callFn,") {\n")}}if(h.exec){e.doExec(h.exec)}},doElseIf:function(d,h){var e=this;if(d==="."){e.body.push("else if (values) {\n")}else{if(e.propNameRe.test(d)){e.body.push("} else if (",e.parseTag(d),") {\n")}else{e.body.push("} else if (",e.addFn(d),e.callFn,") {\n")}}if(h.exec){e.doExec(h.exec)}},doSwitch:function(h){var d=this,e;if(h==="."||h==="#"){e=h==="."?"values":"xindex";d.body.push("switch (",e,") {\n")}else{if(d.propNameRe.test(h)){d.body.push("switch (",d.parseTag(h),") {\n")}else{d.body.push("switch (",d.addFn(h),d.callFn,") {\n")}}d.switches.push(0)},doCase:function(m){var n=this,o=Ext.isArray(m)?m:[m],l=n.switches.length-1,j,h;if(n.switches[l]){n.body.push("break;\n")}else{n.switches[l]++}for(h=0,l=o.length;h<l;++h){j=n.intRe.exec(o[h]);o[h]=j?j[1]:("'"+o[h].replace(n.aposRe,"\\'")+"'")}n.body.push("case ",o.join(": case "),":\n")},doDefault:function(){var d=this,c=d.switches.length-1;if(d.switches[c]){d.body.push("break;\n")}else{d.switches[c]++}d.body.push("default:\n")},doEnd:function(e,j){var l=this,h=l.level-1;if(e=="for"||e=="foreach"){if(j.exec){l.doExec(j.exec)}l.body.push("}\n");l.body.push("parent=p",h,";values=r",h+1,";xcount=n"+h+";xindex=i",h,"+1;xkey=k",h,";\n")}else{if(e=="if"||e=="switch"){l.body.push("}\n")}}},doFor:function(o,m){var p=this,q,j=p.level,l=j-1,n;if(o==="."){q="values"}else{if(p.propNameRe.test(o)){q=p.parseTag(o)}else{q=p.addFn(o)+p.callFn}}if(p.maxLevel<j){p.maxLevel=j;p.body.push("var ")}if(o=="."){n="c"+j}else{n="a"+l+"?c"+l+"[i"+l+"]:c"+l}p.body.push("i",j,"=0,n",j,"=0,c",j,"=",q,",a",j,"=",p.createArrayTest(j),",r",j,"=values,p",j,",k",j,";\n","p",j,"=parent=",n,"\n","if (c",j,"){if(a",j,"){n",j,"=c",j,".length;}else if (c",j,".isMixedCollection){c",j,"=c",j,".items;n",j,"=c",j,".length;}else if(c",j,".isStore){c",j,"=c",j,".data.items;n",j,"=c",j,".length;}else{c",j,"=[c",j,"];n",j,"=1;}}\n","for (xcount=n",j,";i",j,"<n"+j+";++i",j,"){\n","values=c",j,"[i",j,"]");if(m.propName){p.body.push(".",m.propName)}p.body.push("\n","xindex=i",j,"+1\n");if(m.between){p.body.push('if(xindex>1){ out.push("',m.between,'"); } \n')}},doForEach:function(o,m){var p=this,q,j=p.level,l=j-1,n;if(o==="."){q="values"}else{if(p.propNameRe.test(o)){q=p.parseTag(o)}else{q=p.addFn(o)+p.callFn}}if(p.maxLevel<j){p.maxLevel=j;p.body.push("var ")}if(o=="."){n="c"+j}else{n="a"+l+"?c"+l+"[i"+l+"]:c"+l}p.body.push("i",j,"=-1,n",j,"=0,c",j,"=",q,",a",j,"=",p.createArrayTest(j),",r",j,"=values,p",j,",k",j,";\n","p",j,"=parent=",n,"\n","for(k",j," in c",j,"){\n","xindex=++i",j,"+1;\n","xkey=k",j,";\n","values=c",j,"[k",j,"];");if(m.propName){p.body.push(".",m.propName)}if(m.between){p.body.push('if(xindex>1){ out.push("',m.between,'"); } \n')}},createArrayTest:("isArray" in Array)?function(c){return"Array.isArray(c"+c+")"}:function(c){return"ts.call(c"+c+')==="[object Array]"'},doExec:function(l,j){var e=this,h="f"+e.definitions.length;e.definitions.push("function "+h+"("+e.fnArgs+") {"," try { with(values) {","  "+l," }} catch(e) {","}","}");e.body.push(h+e.callFn+"\n")},addFn:function(e){var h=this,d="f"+h.definitions.length;if(e==="."){h.definitions.push("function "+d+"("+h.fnArgs+") {"," return values","}")}else{if(e===".."){h.definitions.push("function "+d+"("+h.fnArgs+") {"," return parent","}")}else{h.definitions.push("function "+d+"("+h.fnArgs+") {"," try { with(values) {","  return("+e+")"," }} catch(e) {","}","}")}}return d},parseTag:function(l){var o=this,m=o.tagRe.exec(l),q,n,s,p,t;if(!m){return null}q=m[1];n=m[2];s=m[3];p=m[4];if(q=="."){if(!o.validTypes){o.definitions.push("var validTypes={string:1,number:1,boolean:1};");o.validTypes=true}t='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(q=="#"){t="xindex"}else{if(q=="$"){t="xkey"}else{if(q.substr(0,7)=="parent."){t=q}else{if(isNaN(q)&&q.indexOf("-")==-1&&q.indexOf(".")!=-1){t="values."+q}else{t="values['"+q+"']"}}}}}if(p){t="("+t+p+")"}if(n&&o.useFormat){s=s?","+s:"";if(n.substr(0,5)!="this."){n="fm."+n+"("}else{n+="("}}else{return t}return n+t+s+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/^([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?$/},0,0,0,0,0,0,[Ext,"XTemplateCompiler"],function(){var c=this.prototype;c.fnArgs="out,values,parent,xindex,xcount,xkey";c.callFn=".call(this,"+c.fnArgs+")"}));(Ext.cmd.derive("Ext.XTemplate",Ext.Template,{emptyObj:{},apply:function(d,c){return this.applyOut(d,[],c).join("")},applyOut:function(j,e,n){var m=this,o;if(!m.fn){o=new Ext.XTemplateCompiler({useFormat:m.disableFormats!==true,definitions:m.definitions});m.fn=o.compile(m.html)}try{m.fn(e,j,n||m.emptyObj,1,1)}catch(l){}return e},compile:function(){return this},statics:{getTpl:function(e,j){var l=e[j],h;if(l&&!l.isTemplate){l=Ext.ClassManager.dynInstantiate("Ext.XTemplate",l);if(e.hasOwnProperty(j)){h=e}else{for(h=e.self.prototype;h&&!h.hasOwnProperty(j);h=h.superclass){}}h[j]=l;l.owner=h}return l||null}}},0,0,0,0,0,0,[Ext,"XTemplate"],0));Ext.ns("Ext.core");Ext.dom.Query=Ext.core.DomQuery=Ext.DomQuery=(function(){var DQ,doc=document,cache,simpleCache,valueCache,useClassList=!!doc.documentElement.classList,useElementPointer=!!doc.documentElement.firstElementChild,useChildrenCollection=(function(){var d=doc.createElement("div");d.innerHTML="<!-- -->text<!-- -->";return d.children&&(d.children.length===0)})(),nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*\|\\]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,startIdRe=/^\s*#/,isIE=window.ActiveXObject?true:false,key=30803,longHex=/\\([0-9a-fA-F]{6})/g,shortHex=/\\([0-9a-fA-F]{1,6})\s{0,1}/g,nonHex=/\\([^0-9a-fA-F]{1})/g,escapes=/\\/g,num,hasEscapes,supportsColonNsSeparator=(function(){var xmlDoc,xmlString='<r><a:b xmlns:a="n"></a:b></r>';if(window.DOMParser){xmlDoc=(new DOMParser()).parseFromString(xmlString,"application/xml")}else{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.loadXML(xmlString)}return !!xmlDoc.getElementsByTagName("a:b").length})(),longHexToChar=function($0,$1){return String.fromCharCode(parseInt($1,16))},shortToLongHex=function($0,$1){while($1.length<6){$1="0"+$1}return"\\"+$1},charToLongHex=function($0,$1){num=$1.charCodeAt(0).toString(16);if(num.length===1){num="0"+num}return"\\0000"+num},unescapeCssSelector=function(selector){return(hasEscapes)?selector.replace(longHex,longHexToChar):selector},setupEscapes=function(path){hasEscapes=(path.indexOf("\\")>-1);if(hasEscapes){path=path.replace(shortHex,shortToLongHex).replace(nonHex,charToLongHex).replace(escapes,"\\\\")}return path};eval("var batch = 30803, child, next, prev, byClassName;");child=useChildrenCollection?function child(parent,index){return parent.children[index]}:function child(parent,index){var i=0,n=parent.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n}}n=n.nextSibling}return null};next=useElementPointer?function(n){return n.nextElementSibling}:function(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n};prev=useElementPointer?function(n){return n.previousElementSibling}:function(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n};function children(parent){var n=parent.firstChild,nodeIndex=-1,nextNode;while(n){nextNode=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){parent.removeChild(n)}else{n.nodeIndex=++nodeIndex}n=nextNode}return this}byClassName=useClassList?function(nodeSet,cls){cls=unescapeCssSelector(cls);if(!cls){return nodeSet}var result=[],ri=-1,i,ci,classList;for(i=0;ci=nodeSet[i];i++){classList=ci.classList;if(classList){if(classList.contains(cls)){result[++ri]=ci}}else{if((" "+ci.className+" ").indexOf(cls)!==-1){result[++ri]=ci}}}return result}:function(nodeSet,cls){cls=unescapeCssSelector(cls);if(!cls){return nodeSet}var result=[],ri=-1,i,ci;for(i=0;ci=nodeSet[i];i++){if((" "+ci.className+" ").indexOf(cls)!==-1){result[++ri]=ci}}return result};function attrValue(n,attr){if(!n.tagName&&typeof n.length!="undefined"){n=n[0]}if(!n){return null}if(attr=="for"){return n.htmlFor}if(attr=="class"||attr=="className"){return n.className}return n.getAttribute(attr)||n[attr]}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs,i,ni,j,ci,cn,utag,n,cj;if(!ns){return result}tagName=tagName.replace("|",":")||"*";if(typeof ns.getElementsByTagName!="undefined"){ns=[ns]}if(!mode){tagName=unescapeCssSelector(tagName);if(!supportsColonNsSeparator&&DQ.isXml(ns[0])&&tagName.indexOf(":")!==-1){for(i=0;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName.split(":").pop());for(j=0;ci=cs[j];j++){if(ci.tagName===tagName){result[++ri]=ci}}}}else{for(i=0;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(j=0;ci=cs[j];j++){result[++ri]=ci}}}}else{if(mode=="/"||mode==">"){utag=tagName.toUpperCase();for(i=0;ni=ns[i];i++){cn=ni.childNodes;for(j=0;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName=="*"){result[++ri]=cj}}}}else{if(mode=="+"){utag=tagName.toUpperCase();for(i=0;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName=="*")){result[++ri]=n}}}else{if(mode=="~"){utag=tagName.toUpperCase();for(i=0;n=ns[i];i++){while((n=n.nextSibling)){if(n.nodeName==utag||n.nodeName==tagName||tagName=="*"){result[++ri]=n}}}}}}}return result}function concat(a,b){a.push.apply(a,b);return a}function byTag(cs,tagName){if(cs.tagName||cs===doc){cs=[cs]}if(!tagName){return cs}var result=[],ri=-1,i,ci;tagName=tagName.toLowerCase();for(i=0;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){result[++ri]=ci}}return result}function byId(cs,id){id=unescapeCssSelector(id);if(cs.tagName||cs===doc){cs=[cs]}if(!id){return cs}var result=[],ri=-1,i,ci;for(i=0;ci=cs[i];i++){if(ci&&ci.id==id){result[++ri]=ci;return result}}return result}function byAttribute(cs,attr,value,op,custom){var result=[],ri=-1,useGetStyle=custom=="{",fn=DQ.operators[op],a,xml,hasXml,i,ci;value=unescapeCssSelector(value);for(i=0;ci=cs[i];i++){if(ci.nodeType===1){if(!hasXml){xml=DQ.isXml(ci);hasXml=true}if(!xml){if(useGetStyle){a=DQ.getStyle(ci,attr)}else{if(attr=="class"||attr=="className"){a=ci.className}else{if(attr=="for"){a=ci.htmlFor}else{if(attr=="href"){a=ci.getAttribute("href",2)}else{a=ci.getAttribute(attr)}}}}}else{a=ci.getAttribute(attr)}if((fn&&fn(a,value))||(!fn&&a)){result[++ri]=ci}}}return result}function byPseudo(cs,name,value){value=unescapeCssSelector(value);return DQ.pseudos[name](cs,value)}function nodupIEXml(cs){var d=++key,r,i,len,c;cs[0].setAttribute("_nodup",d);r=[cs[0]];for(i=1,len=cs.length;i<len;i++){c=cs[i];if(!c.getAttribute("_nodup")!=d){c.setAttribute("_nodup",d);r[r.length]=c}}for(i=0,len=cs.length;i<len;i++){cs[i].removeAttribute("_nodup")}return r}function nodup(cs){if(!cs){return[]}var len=cs.length,c,i,r=cs,cj,ri=-1,d,j;if(!len||typeof cs.nodeType!="undefined"||len==1){return cs}if(isIE&&typeof cs[0].selectSingleNode!="undefined"){return nodupIEXml(cs)}d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d}else{r=[];for(j=0;j<i;j++){r[++ri]=cs[j]}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj}}return r}}return r}function quickDiffIEXml(c1,c2){var d=++key,r=[],i,len;for(i=0,len=c1.length;i<len;i++){c1[i].setAttribute("_qdiff",d)}for(i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute("_qdiff")!=d){r[r.length]=c2[i]}}for(i=0,len=c1.length;i<len;i++){c1[i].removeAttribute("_qdiff")}return r}function quickDiff(c1,c2){var len1=c1.length,d=++key,r=[],i,len;if(!len1){return c2}if(isIE&&typeof c1[0].selectSingleNode!="undefined"){return quickDiffIEXml(c1,c2)}for(i=0;i<len1;i++){c1[i]._qdiff=d}for(i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i]}}return r}function quickId(ns,mode,root,id){if(ns==root){id=unescapeCssSelector(id);var d=root.ownerDocument||root;return d.getElementById(id)}ns=getNodes(ns,mode,"*");return byId(ns,id)}return DQ={clearCache:function(){cache&&cache.clear();valueCache&&valueCache.clear();simpleCache&&simpleCache.clear()},getStyle:function(el,name){return Ext.fly(el,"_DomQuery").getStyle(name)},compile:function(path,type){type=type||"select";var fn=["var f = function(root) {\n var mode; ++batch; var n = root || document;\n"],lastPath,matchers=DQ.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe),tokenMatch,matched,j,t,m;path=setupEscapes(path);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';path=path.replace(lmode[1],"")}while(path.substr(0,1)=="/"){path=path.substr(1)}while(path&&lastPath!=path){lastPath=path;tokenMatch=path.match(tagTokenRe);if(type=="select"){if(tokenMatch){if(tokenMatch[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");'}else{fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],"")}else{if(path.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");'}}}else{if(tokenMatch){if(tokenMatch[1]=="#"){fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");'}else{fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],"")}}while(!(modeMatch=path.match(modeRe))){matched=false;for(j=0;j<matchersLn;j++){t=matchers[j];m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]});path=path.replace(m[0],"");matched=true;break}}if(!matched){Ext.Error.raise({sourceClass:"Ext.DomQuery",sourceMethod:"compile",msg:'Error parsing selector. Parsing failed at "'+path+'"'})}}if(modeMatch[1]){fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";';path=path.replace(modeMatch[1],"")}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f},jsSelect:function(path,root,type){if(!cache){DQ._cache=cache=new Ext.util.LruCache({maxSize:200})}root=root||doc;if(typeof root=="string"){root=doc.getElementById(root)}var paths=Ext.splitAndUnescape(path,","),results=[],query,i,len,subPath,result;for(i=0,len=paths.length;i<len;i++){subPath=paths[i].replace(trimRe,"");query=cache.get(subPath);if(!query){query=DQ.compile(subPath,type);if(!query){Ext.Error.raise({sourceClass:"Ext.DomQuery",sourceMethod:"jsSelect",msg:subPath+" is not a valid selector"})}cache.add(subPath,query)}else{setupEscapes(subPath)}result=query(root);if(result&&result!==doc){results=results.concat(result)}}if(paths.length>1){return nodup(results)}return results},isXml:function(el){var docEl=(el?el.ownerDocument||el:0).documentElement;return docEl?docEl.nodeName!=="HTML":false},select:doc.querySelectorAll?function(path,root,type,single){root=root||doc;if(!DQ.isXml(root)){try{if(root.parentNode&&(root.nodeType!==9)&&path.indexOf(",")===-1&&!startIdRe.test(path)){path="#"+Ext.escapeId(Ext.id(root))+" "+path;root=root.parentNode}return single?[root.querySelector(path)]:Ext.Array.toArray(root.querySelectorAll(path))}catch(e){}}return DQ.jsSelect.call(this,path,root,type)}:function(path,root,type){return DQ.jsSelect.call(this,path,root,type)},selectNode:function(path,root){return Ext.DomQuery.select(path,root,null,true)[0]},selectValue:function(path,root,defaultValue){if(!valueCache){DQ._valueCache=valueCache=new Ext.util.LruCache({maxSize:200})}path=path.replace(trimRe,"");var query=valueCache.get(path),n,v;if(!query){query=DQ.compile(path,"select");valueCache.add(path,query)}else{setupEscapes(path)}n=query(root);n=n[0]?n[0]:n;if(typeof n.normalize=="function"){n.normalize()}v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v==="")?defaultValue:v)},selectNumber:function(path,root,defaultValue){var v=DQ.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){if(typeof el=="string"){el=doc.getElementById(el)}var isArray=Ext.isArray(el),result=DQ.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0)},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,"");if(!simpleCache){DQ._simpleCache=simpleCache=new Ext.util.LruCache({maxSize:200})}var query=simpleCache.get(ss),result;if(!query){query=DQ.compile(ss,"simple");simpleCache.add(ss,query)}else{setupEscapes(ss)}result=query(els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\.([\w\-\\]+)/,select:useClassList?'n = byClassName(n, "{1}");':'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w\-\\]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-\.]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,v){return a==v},"!=":function(a,v){return a!=v},"^=":function(a,v){return a&&a.substr(0,v.length)==v},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v},"*=":function(a,v){return a&&a.indexOf(v)!==-1},"%=":function(a,v){return(a%v)===0},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-")},"~=":function(a,v){return a&&(" "+a+" ").indexOf(" "+v+" ")!=-1}},pseudos:{"first-child":function(c){var r=[],ri=-1,n,i,ci;for(i=0;(ci=n=c[i]);i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"last-child":function(c){var r=[],ri=-1,n,i,ci;for(i=0;(ci=n=c[i]);i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"nth-child":function(c,a){var r=[],ri=-1,m=nthRe.exec(a=="even"&&"2n"||a=="odd"&&"2n+1"||!nthRe2.test(a)&&"n+"+a||a),f=(m[1]||1)-0,l=m[2]-0,i,n,j,cn,pn;for(i=0;n=c[i];i++){pn=n.parentNode;if(batch!=pn._batch){j=0;for(cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j}}pn._batch=batch}if(f==1){if(l===0||n.nodeIndex==l){r[++ri]=n}}else{if((n.nodeIndex+l)%f===0){r[++ri]=n}}}return r},"only-child":function(c){var r=[],ri=-1,i,ci;for(i=0;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci}}return r},empty:function(c){var r=[],ri=-1,i,ci,cns,j,cn,empty;for(i=0;ci=c[i];i++){cns=ci.childNodes;j=0;empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break}}if(empty){r[++ri]=ci}}return r},contains:function(c,v){var r=[],ri=-1,i,ci;for(i=0;ci=c[i];i++){if((ci.textContent||ci.innerText||ci.text||"").indexOf(v)!=-1){r[++ri]=ci}}return r},nodeValue:function(c,v){var r=[],ri=-1,i,ci;for(i=0;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci}}return r},checked:function(c){var r=[],ri=-1,i,ci;for(i=0;ci=c[i];i++){if(ci.checked===true){r[++ri]=ci}}return r},not:function(c,ss){return DQ.filter(c,ss,true)},any:function(c,selectors){var ss=selectors.split("|"),r=[],ri=-1,s,i,ci,j;for(i=0;ci=c[i];i++){for(j=0;s=ss[j];j++){if(DQ.is(ci,s)){r[++ri]=ci;break}}}return r},odd:function(c){return this["nth-child"](c,"odd")},even:function(c){return this["nth-child"](c,"even")},nth:function(c,a){return c[a-1]||[]},first:function(c){return c[0]||[]},last:function(c){return c[c.length-1]||[]},has:function(c,ss){var s=DQ.select,r=[],ri=-1,i,ci;for(i=0;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci}}return r},next:function(c,ss){var is=DQ.is,r=[],ri=-1,i,ci,n;for(i=0;ci=c[i];i++){n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},prev:function(c,ss){var is=DQ.is,r=[],ri=-1,i,ci,n;for(i=0;ci=c[i];i++){n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},focusable:function(candidates){var len=candidates.length,results=[],i=0,c;for(;i<len;i++){c=candidates[i];if(Ext.fly(c,"_DomQuery").isFocusable()){results.push(c)}}return results},visible:function(candidates,deep){var len=candidates.length,results=[],i=0,c;for(;i<len;i++){c=candidates[i];if(Ext.fly(c,"_DomQuery").isVisible(deep)){results.push(c)}}return results}}}}());Ext.query=Ext.DomQuery.select;Ext.define("Ext.dom.Element_anim",{override:"Ext.dom.Element",animate:function(o){var m=this,h=m.dom.id||Ext.id(m.dom),n,l,j;if(!Ext.fx.Manager.hasFxBlock(h)){if(o.listeners){n=o.listeners;delete o.listeners}if(o.internalListeners){o.listeners=o.internalListeners;delete o.internalListeners}j=o.autoEnd;delete o.autoEnd;l=new Ext.fx.Anim(m.anim(o));if(n){l.on(n)}Ext.fx.Manager.queueFx(l);if(j){l.jumpToEnd()}}return m},anim:function(j){if(!Ext.isObject(j)){return(j)?{}:false}var h=this,n=j.duration||Ext.fx.Anim.prototype.duration,l=j.easing||"ease",m;if(j.stopAnimation){h.stopAnimation()}Ext.applyIf(j,Ext.fx.Manager.getFxDefaults(h.id));Ext.fx.Manager.setFxDefaults(h.id,{delay:0});m={target:h.dom,remove:j.remove,alternate:j.alternate||false,duration:n,easing:l,callback:j.callback,listeners:j.listeners,iterations:j.iterations||1,scope:j.scope,block:j.block,concurrent:j.concurrent,delay:j.delay||0,paused:true,keyframes:j.keyframes,from:j.from||{},to:Ext.apply({},j)};Ext.apply(m.to,j.to);delete m.to.to;delete m.to.from;delete m.to.remove;delete m.to.alternate;delete m.to.keyframes;delete m.to.iterations;delete m.to.listeners;delete m.to.target;delete m.to.paused;delete m.to.callback;delete m.to.scope;delete m.to.duration;delete m.to.easing;delete m.to.concurrent;delete m.to.block;delete m.to.stopAnimation;delete m.to.delay;return m},slideIn:function(t,u,s){var p=this,v=p.dom,m=v.style,n,w,q,o;t=t||"t";u=u||{};n=function(){var e=this,h=u.listeners,j=Ext.fly(v,"_anim"),d,a,c,l;if(!s){j.fixDisplay()}d=j.getBox();if((t=="t"||t=="b")&&d.height===0){d.height=v.scrollHeight}else{if((t=="l"||t=="r")&&d.width===0){d.width=v.scrollWidth}}a=j.getStyles("width","height","left","right","top","bottom","position","z-index",true);j.setSize(d.width,d.height);if(u.preserveScroll){q=j.cacheScrollValues()}l=j.wrap({role:"presentation",id:Ext.id()+"-anim-wrap-for-"+j.dom.id,style:{visibility:s?"visible":"hidden"}});o=l.dom.parentNode;l.setPositioning(j.getPositioning());if(l.isStyle("position","static")){l.position("relative")}j.clearPositioning("auto");l.clip();if(q){q()}j.setStyle({visibility:"",position:"absolute"});if(s){l.setSize(d.width,d.height)}switch(t){case"t":c={from:{width:d.width+"px",height:"0px"},to:{width:d.width+"px",height:d.height+"px"}};m.bottom="0px";break;case"l":c={from:{width:"0px",height:d.height+"px"},to:{width:d.width+"px",height:d.height+"px"}};p.anchorAnimX(t);break;case"r":c={from:{x:d.x+d.width,width:"0px",height:d.height+"px"},to:{x:d.x,width:d.width+"px",height:d.height+"px"}};p.anchorAnimX(t);break;case"b":c={from:{y:d.y+d.height,width:d.width+"px",height:"0px"},to:{y:d.y,width:d.width+"px",height:d.height+"px"}};break;case"tl":c={from:{x:d.x,y:d.y,width:"0px",height:"0px"},to:{width:d.width+"px",height:d.height+"px"}};m.bottom="0px";p.anchorAnimX("l");break;case"bl":c={from:{y:d.y+d.height,width:"0px",height:"0px"},to:{y:d.y,width:d.width+"px",height:d.height+"px"}};p.anchorAnimX("l");break;case"br":c={from:{x:d.x+d.width,y:d.y+d.height,width:"0px",height:"0px"},to:{x:d.x,y:d.y,width:d.width+"px",height:d.height+"px"}};p.anchorAnimX("r");break;case"tr":c={from:{x:d.x+d.width,width:"0px",height:"0px"},to:{x:d.x,width:d.width+"px",height:d.height+"px"}};m.bottom="0px";p.anchorAnimX("r");break}l.show();w=Ext.apply({},u);delete w.listeners;w=new Ext.fx.Anim(Ext.applyIf(w,{target:l,duration:500,easing:"ease-out",from:s?c.to:c.from,to:s?c.from:c.to}));w.on("afteranimate",function(){var x=Ext.fly(v,"_anim");x.setStyle(a);if(s){if(u.useDisplay){x.setDisplayed(false)}else{x.hide()}}if(l.dom){if(l.dom.parentNode){l.dom.parentNode.insertBefore(x.dom,l.dom)}else{o.appendChild(x.dom)}l.remove()}if(q){q()}e.end()});if(h){w.on(h)}};p.animate({duration:u.duration?Math.max(u.duration,500)*2:1000,listeners:{beforeanimate:n}});return p},slideOut:function(d,c){return this.slideIn(d,c,true)},puff:function(m){var n=this,l=n.dom,h,o=n.getBox(),j=n.getStyles("width","height","left","right","top","bottom","position","z-index","font-size","opacity",true);m=Ext.applyIf(m||{},{easing:"ease-out",duration:500,useDisplay:false});h=function(){var a=Ext.fly(l,"_anim");a.clearOpacity();a.show();this.to={width:o.width*2,height:o.height*2,x:o.x-(o.width/2),y:o.y-(o.height/2),opacity:0,fontSize:"200%"};this.on("afteranimate",function(){var c=Ext.fly(l,"_anim");if(c){if(m.useDisplay){c.setDisplayed(false)}else{c.hide()}c.setStyle(j);Ext.callback(m.callback,m.scope)}})};n.animate({duration:m.duration,easing:m.easing,listeners:{beforeanimate:{fn:h}}});return n},switchOff:function(l){var e=this,j=e.dom,h;l=Ext.applyIf(l||{},{easing:"ease-in",duration:500,remove:false,useDisplay:false});h=function(){var c=Ext.fly(j,"_anim"),d=this,m=c.getSize(),a=c.getXY(),n,o;c.clearOpacity();c.clip();o=c.getPositioning();n=new Ext.fx.Animator({target:j,duration:l.duration,easing:l.easing,keyframes:{33:{opacity:0.3},66:{height:1,y:a[1]+m.height/2},100:{width:1,x:a[0]+m.width/2}}});n.on("afteranimate",function(){var p=Ext.fly(j,"_anim");if(l.useDisplay){p.setDisplayed(false)}else{p.hide()}p.clearOpacity();p.setPositioning(o);p.setSize(m);d.end()})};e.animate({duration:(Math.max(l.duration,500)*2),listeners:{beforeanimate:{fn:h}},callback:l.callback,scope:l.scope});return e},frame:function(j,n,m){var o=this,l=o.dom,h;j=j||"#C3DAF9";n=n||1;m=m||{};h=function(){var c=Ext.fly(l,"_anim"),d=this,a,e,p;c.show();a=c.getBox();e=Ext.getBody().createChild({role:"presentation",id:c.dom.id+"-anim-proxy",style:{position:"absolute","pointer-events":"none","z-index":35000,border:"0px solid "+j}});p=new Ext.fx.Anim({target:e,duration:m.duration||1000,iterations:n,from:{top:a.y,left:a.x,borderWidth:0,opacity:1,height:a.height,width:a.width},to:{top:a.y-20,left:a.x-20,borderWidth:10,opacity:0,height:a.height+40,width:a.width+40}});p.on("afteranimate",function(){e.remove();d.end()})};o.animate({duration:(Math.max(m.duration,500)*2)||2000,listeners:{beforeanimate:{fn:h}},callback:m.callback,scope:m.scope});return o},ghost:function(j,m){var n=this,l=n.dom,h;j=j||"b";h=function(){var d=Ext.fly(l,"_anim"),e=d.getWidth(),o=d.getHeight(),c=d.getXY(),p=d.getPositioning(),a={opacity:0};switch(j){case"t":a.y=c[1]-o;break;case"l":a.x=c[0]-e;break;case"r":a.x=c[0]+e;break;case"b":a.y=c[1]+o;break;case"tl":a.x=c[0]-e;a.y=c[1]-o;break;case"bl":a.x=c[0]-e;a.y=c[1]+o;break;case"br":a.x=c[0]+e;a.y=c[1]+o;break;case"tr":a.x=c[0]+e;a.y=c[1]-o;break}this.to=a;this.on("afteranimate",function(){var q=Ext.fly(l,"_anim");if(q){q.hide();q.clearOpacity();q.setPositioning(p)}})};n.animate(Ext.applyIf(m||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:h}}));return n},highlight:function(v,x){var q=this,u=q.dom,o={},s,n,t,w,y,p;if(u.tagName.match(q.tableTagRe)){return q.select("div").highlight(v,x)}x=x||{};w=x.listeners||{};t=x.attr||"backgroundColor";o[t]=v||"ffff9c";if(!x.to){n={};n[t]=x.endColor||q.getColor(t,"ffffff","")}else{n=x.to}x.listeners=Ext.apply(Ext.apply({},w),{beforeanimate:function(){s=u.style[t];var a=Ext.fly(u,"_anim");a.clearOpacity();a.show();y=w.beforeanimate;if(y){p=y.fn||y;return p.apply(y.scope||w.scope||window,arguments)}},afteranimate:function(){if(u){u.style[t]=s}y=w.afteranimate;if(y){p=y.fn||y;p.apply(y.scope||w.scope||window,arguments)}}});q.animate(Ext.apply({},x,{duration:1000,easing:"ease-in",from:o,to:n}));return q},pause:function(d){var c=this;Ext.fx.Manager.setFxDefaults(c.id,{delay:d});return c},fadeIn:function(h){var e=this,d=e.dom;e.animate(Ext.apply({},h,{opacity:1,internalListeners:{beforeanimate:function(a){var c=Ext.fly(d,"_anim");if(c.isStyle("display","none")){c.setDisplayed("")}else{c.show()}}}}));return this},fadeOut:function(h){var e=this,d=e.dom;h=Ext.apply({opacity:0,internalListeners:{afteranimate:function(a){if(d&&a.to.opacity===0){var c=Ext.fly(d,"_anim");if(h.useDisplay){c.setDisplayed(false)}else{c.hide()}}}}},h);e.animate(h);return e},scale:function(e,d,h){this.animate(Ext.apply({},h,{width:e,height:d}));return this},shift:function(c){this.animate(c);return this},anchorAnimX:function(d){var c=(d==="l")?"right":"left";this.dom.style[c]="0px"}});Ext.define("Ext.dom.Element_dd",{override:"Ext.dom.Element",initDD:function(l,e,j){var h=new Ext.dd.DD(Ext.id(this.dom),l,e);return Ext.apply(h,j)},initDDProxy:function(l,e,j){var h=new Ext.dd.DDProxy(Ext.id(this.dom),l,e);return Ext.apply(h,j)},initDDTarget:function(l,e,j){var h=new Ext.dd.DDTarget(Ext.id(this.dom),l,e);return Ext.apply(h,j)}});Ext.define("Ext.dom.Element_fx",{override:"Ext.dom.Element"},function(){var F=Ext.dom.Element,z="visibility",B="display",u="none",C="hidden",v="visible",t="offsets",y="asclass",G="nosize",E="originalDisplay",D="visibilityMode",A="isVisible",w=Ext.baseCSSPrefix+"hide-offsets",x=function(d){var c=(d.$cache||d.getCache()).data,a=c[E];if(a===undefined){c[E]=a=""}return a},s=function(c){var a=(c.$cache||c.getCache()).data,d=a[D];if(d===undefined){a[D]=d=F.VISIBILITY}return d};F.override({originalDisplay:"",visibilityMode:1,setVisible:function(a,h){var d=this,c=d.dom,e=s(d);if(typeof h=="string"){switch(h){case B:e=F.DISPLAY;break;case z:e=F.VISIBILITY;break;case t:e=F.OFFSETS;break;case G:case y:e=F.ASCLASS;break}d.setVisibilityMode(e);h=false}if(!h||!d.anim){if(e==F.DISPLAY){return d.setDisplayed(a)}else{if(e==F.OFFSETS){d[a?"removeCls":"addCls"](w)}else{if(e==F.VISIBILITY){d.fixDisplay();c.style.visibility=a?"":C}else{if(e==F.ASCLASS){d[a?"removeCls":"addCls"](d.visibilityCls||F.visibilityCls)}}}}}else{if(a){d.setOpacity(0.01);d.setVisible(true)}if(!Ext.isObject(h)){h={duration:350,easing:"ease-in"}}d.animate(Ext.applyIf({callback:function(){if(!a){Ext.fly(c,"_internal").setVisible(false).setOpacity(1)}},to:{opacity:(a)?1:0}},h))}(d.$cache||d.getCache()).data[A]=a;return d},hasMetrics:function(){var a=s(this);return this.isVisible()||(a==F.OFFSETS)||(a==F.VISIBILITY)},toggle:function(c){var a=this;a.setVisible(!a.isVisible(),a.anim(c));return a},setDisplayed:function(a){if(typeof a=="boolean"){a=a?x(this):u}this.setStyle(B,a);return this},fixDisplay:function(){var a=this;if(a.isStyle(B,u)){a.setStyle(z,C);a.setStyle(B,x(a));if(a.isStyle(B,u)){a.setStyle(B,"block")}}},hide:function(a){if(typeof a=="string"){this.setVisible(false,a);return this}this.setVisible(false,this.anim(a));return this},show:function(a){if(typeof a=="string"){this.setVisible(true,a);return this}this.setVisible(true,this.anim(a));return this}})});Ext.define("Ext.dom.Element_position",{override:"Ext.dom.Element"},function(){var C,J=this,P="left",S="right",K="top",U="bottom",O="position",T="static",B="relative",F="z-index",G="BODY",Y="padding",H="border",I="-left",Q="-right",aa="-top",R="-bottom",V="-width",W={l:H+I+V,r:H+Q+V,t:H+aa+V,b:H+R+V},X={l:Y+I,r:Y+Q,t:Y+aa,b:Y+R},E=[X.l,X.r,X.t,X.b],Z=[W.l,W.r,W.t,W.b],D=Math.round,N=document,M=function(a){if(!C){C=new Ext.Element.Fly()}C.attach(a);return C};J.override({pxRe:/^\d+(?:\.\d*)?px$/i,inheritableStatics:{getX:function(a){return J.getXY(a)[0]},getXY:function(a){var l=N.body,c=N.documentElement,d=0,n=0,j=[0,0],m,e;a=Ext.getDom(a);if(a!=N&&a!=l){if(Ext.isIE){try{m=a.getBoundingClientRect();n=c.clientTop||l.clientTop;d=c.clientLeft||l.clientLeft}catch(h){m={left:0,top:0}}}else{m=a.getBoundingClientRect()}e=M(N).getScroll();j=[D(m.left+e.left-d),D(m.top+e.top-n)]}return j},getY:function(a){return J.getXY(a)[1]},setX:function(a,c){J.setXY(a,[c,false])},setXY:function(e,d){(e=Ext.fly(e,"_setXY")).position();var c=e.translatePoints(d),h=e.dom.style,a;h.right="auto";for(a in c){if(!isNaN(c[a])){h[a]=c[a]+"px"}}},setY:function(c,a){J.setXY(c,[false,a])}},center:function(a){return this.alignTo(a||N,"c-c")},clearPositioning:function(a){a=a||"";return this.setStyle({left:a,right:a,top:a,bottom:a,"z-index":"",position:T})},getAnchorToXY:function(a,e,c,d){return a.getAnchorXY(e,c,d)},getBottom:function(a){return(a?this.getLocalY():this.getY())+this.getHeight()},getBorderPadding:function(){var c=this.getStyle(E),a=this.getStyle(Z);return{beforeX:(parseFloat(a[W.l])||0)+(parseFloat(c[X.l])||0),afterX:(parseFloat(a[W.r])||0)+(parseFloat(c[X.r])||0),beforeY:(parseFloat(a[W.t])||0)+(parseFloat(c[X.t])||0),afterY:(parseFloat(a[W.b])||0)+(parseFloat(c[X.b])||0)}},getBorders:function(){var a=this.getStyle(Z);return{beforeX:(parseFloat(a[W.l])||0),afterX:(parseFloat(a[W.r])||0),beforeY:(parseFloat(a[W.t])||0),afterY:(parseFloat(a[W.b])||0)}},getCenterXY:function(){return this.getAlignToXY(N,"c-c")},getLeft:function(a){return a?this.getLocalX():this.getX()},getLocalX:function(){var a=this,c=a.dom.offsetParent,d=a.getStyle("left");if(!d||d==="auto"){d=0}else{if(a.pxRe.test(d)){d=parseFloat(d)}else{d=a.getX();if(c){d-=J.getX(c)}}}return d},getLocalXY:function(){var c=this,d=c.dom.offsetParent,e=c.getStyle(["left","top"]),h=e.left,a=e.top;if(!h||h==="auto"){h=0}else{if(c.pxRe.test(h)){h=parseFloat(h)}else{h=c.getX();if(d){h-=J.getX(d)}}}if(!a||a==="auto"){a=0}else{if(c.pxRe.test(a)){a=parseFloat(a)}else{a=c.getY();if(d){a-=J.getY(d)}}}return[h,a]},getLocalY:function(){var c=this,d=c.dom.offsetParent,a=c.getStyle("top");if(!a||a==="auto"){a=0}else{if(c.pxRe.test(a)){a=parseFloat(a)}else{a=c.getY();if(d){a-=J.getY(d)}}}return a},getPageBox:function(a){var n=this,p=n.dom,l=p.nodeName==G,j=l?Ext.Element.getViewWidth():p.offsetWidth,o=l?Ext.Element.getViewHeight():p.offsetHeight,e=n.getXY(),h=e[1],d=e[0]+j,m=e[1]+o,c=e[0];if(a){return new Ext.util.Region(h,d,m,c)}else{return{left:c,top:h,width:j,height:o,right:d,bottom:m}}},getPositioning:function(c){var d=this.getStyle(["left","top","position","z-index"]),a=this.dom;if(c){if(d.left==="auto"){d.left=a.offsetLeft+"px"}if(d.top==="auto"){d.top=a.offsetTop+"px"}}return d},getRight:function(a){return(a?this.getLocalX():this.getX())+this.getWidth()},getTop:function(a){return a?this.getLocalY():this.getY()},getX:function(){return J.getX(this.dom)},getXY:function(){return J.getXY(this.dom)},getY:function(){return J.getY(this.dom)},moveTo:function(d,a,c){return this.setXY([d,a],c)},position:function(a,c,h,d){var e=this;if(!a&&e.isStyle(O,T)){e.setStyle(O,B)}else{if(a){e.setStyle(O,a)}}if(c){e.setStyle(F,c)}if(h||d){e.setXY([h||false,d||false])}},setBottom:function(a){this.dom.style[U]=this.addUnits(a);return this},setBounds:function(e,a,c,h,d){return this.setBox({x:e,y:a,width:c,height:h},d)},setLeft:function(a){this.dom.style[P]=this.addUnits(a);return this},setLeftTop:function(a,c){var d=this,e=d.dom.style;e.left=d.addUnits(a);e.top=d.addUnits(c);return d},setLocalX:function(c){var a=this.dom.style;a.right="auto";a.left=(c===null)?"auto":c+"px"},setLocalXY:function(d,a){var c=this.dom.style;c.right="auto";if(d&&d.length){a=d[1];d=d[0]}if(d===null){c.left="auto"}else{if(d!==undefined){c.left=d+"px"}}if(a===null){c.top="auto"}else{if(a!==undefined){c.top=a+"px"}}},setLocalY:function(a){this.dom.style.top=(a===null)?"auto":a+"px"},setLocation:function(d,a,c){return this.setXY([d,a],c)},setPositioning:function(a){return this.setStyle(a)},setRight:function(a){this.dom.style[S]=this.addUnits(a);return this},setTop:function(a){this.dom.style[K]=this.addUnits(a);return this},setX:function(c,a){return this.setXY([c,this.getY()],a)},setXY:function(a,d){var c=this;if(!d||!c.anim){J.setXY(c.dom,a)}else{if(!Ext.isObject(d)){d={}}c.animate(Ext.applyIf({to:{x:a[0],y:a[1]}},d))}return this},setY:function(a,c){return this.setXY([this.getX(),a],c)}});J.getTrueXY=J.getXY});Ext.define("Ext.dom.Element_scroll",{override:"Ext.dom.Element",isScrollable:function(){var c=this.dom;return c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth},getScroll:function(){var q=this,m=q.dom,n=document,l=n.body,j=n.documentElement,o,p;if(m===n||m===l){o=j.scrollLeft||(l?l.scrollLeft:0);p=j.scrollTop||(l?l.scrollTop:0)}else{o=m.scrollLeft;p=m.scrollTop}return{left:o,top:p}},getScrollLeft:function(){var c=this.dom,d=document;if(c===d||c===d.body){return this.getScroll().left}else{return c.scrollLeft}},getScrollTop:function(){var c=this.dom,d=document;if(c===d||c===d.body){return this.getScroll().top}else{return c.scrollTop}},setScrollLeft:function(c){this.dom.scrollLeft=c;return this},setScrollTop:function(c){this.dom.scrollTop=c;return this},scrollBy:function(h,j,n){var m=this,l=m.dom;if(h.length){n=j;j=h[1];h=h[0]}else{if(typeof h!="number"){n=j;j=h.y;h=h.x}}if(h){m.scrollTo("left",m.constrainScrollLeft(l.scrollLeft+h),n)}if(j){m.scrollTo("top",m.constrainScrollTop(l.scrollTop+j),n)}return m},scrollTo:function(t,q,m){var p=/top/i.test(t),s=this,n=p?"scrollTop":"scrollLeft",o=s.dom,l;if(!m||!s.anim){o[n]=q;o[n]=q}else{l={to:{}};l.to[n]=q;if(Ext.isObject(m)){Ext.applyIf(l,m)}s.animate(l)}return s},scrollIntoView:function(H,E,G,C){var x=this,z=x.dom,B=x.getOffsetsTo(H=Ext.getDom(H)||Ext.getBody().dom),D=B[0]+H.scrollLeft,w=B[1]+H.scrollTop,I=w+z.offsetHeight,v=D+z.offsetWidth,J=H.clientHeight,t=parseInt(H.scrollTop,10),F=parseInt(H.scrollLeft,10),A=t+J,u=F+H.clientWidth,y;if(C){if(G){G=Ext.apply({listeners:{afteranimate:function(){x.scrollChildFly.attach(z).highlight()}}},G)}else{x.scrollChildFly.attach(z).highlight()}}if(z.offsetHeight>J||w<t){y=w}else{if(I>A){y=I-J}}if(y!=null){x.scrollChildFly.attach(H).scrollTo("top",y,G)}if(E!==false){y=null;if(z.offsetWidth>H.clientWidth||D<F){y=D}else{if(v>u){y=v-H.clientWidth}}if(y!=null){x.scrollChildFly.attach(H).scrollTo("left",y,G)}}return x},scrollChildIntoView:function(c,d){this.scrollChildFly.attach(Ext.getDom(c)).scrollIntoView(this,d)},scroll:function(l,u,s){if(!this.isScrollable()){return false}l=l.charAt(0);var m=this,p=m.dom,n=l==="r"||l==="l"?"left":"top",t=false,q,o;if(l==="l"||l==="t"||l==="u"){u=-u}if(n==="left"){q=p.scrollLeft;o=m.constrainScrollLeft(q+u)}else{q=p.scrollTop;o=m.constrainScrollTop(q+u)}if(o!==q){this.scrollTo(n,o,s);t=true}return t},constrainScrollLeft:function(d){var c=this.dom;return Math.max(Math.min(d,c.scrollWidth-c.clientWidth),0)},constrainScrollTop:function(d){var c=this.dom;return Math.max(Math.min(d,c.scrollHeight-c.clientHeight),0)}},function(){this.prototype.scrollChildFly=new this.Fly();this.prototype.scrolltoFly=new this.Fly()});Ext.define("Ext.dom.Element_style",{override:"Ext.dom.Element"},function(){var D=this,H=document.defaultView,F=/table-row|table-.*-group/,T="_internal",B="hidden",E="height",N="width",P="isClipped",K="overflow",I="overflow-x",J="overflow-y",A="originalClip",S=/#document|body/i,z,O,G,Q,C,M,y;if(!H||!H.getComputedStyle){D.prototype.getStyle=function(u,v){var a=this,l=a.dom,d=typeof u!="string",x=a.styleHooks,j=u,w=j,n=1,s=v,c,q,m,t,o,h,p;if(d){m={};j=w[0];p=0;if(!(n=w.length)){return m}}if(!l||l.documentElement){return m||""}q=l.style;if(v){h=q}else{h=l.currentStyle;if(!h){s=true;h=q}}do{t=x[j];if(!t){x[j]=t={name:D.normalize(j)}}if(t.get){o=t.get(l,a,s,h)}else{c=t.name;if(t.canThrow){try{o=h[c]}catch(e){o=""}}else{o=h?h[c]:""}}if(!d){return o}m[j]=o;j=w[++p]}while(p<n);return m}}D.override({getHeight:function(a,j){var e=this,h=e.isStyle("display","none"),c,d;if(h){return 0}c=e.dom.offsetHeight;if(Ext.supports.Direct2DBug){d=e.adjustDirect2DDimension(E);if(j){c+=d}else{if(d>0&&d<0.5){c++}}}if(a){c-=e.getBorderWidth("tb")+e.getPadding("tb")}return(c<0)?0:c},getWidth:function(c,j){var a=this,e=a.dom,m=a.isStyle("display","none"),h,l,d;if(m){return 0}if(Ext.supports.BoundingClientRect){h=e.getBoundingClientRect();l=(a.vertical&&!Ext.isIE9&&!Ext.supports.RotatedBoundingClientRect)?(h.bottom-h.top):(h.right-h.left);l=j?l:Math.ceil(l)}else{l=e.offsetWidth}if(Ext.supports.Direct2DBug&&!a.vertical){d=a.adjustDirect2DDimension(N);if(j){l+=d}else{if(d>0&&d<0.5){l++}}}if(c){l-=a.getBorderWidth("lr")+a.getPadding("lr")}return(l<0)?0:l},setWidth:function(d,a){var c=this;d=c.adjustWidth(d);if(!a||!c.anim){c.dom.style.width=c.addUnits(d)}else{if(!Ext.isObject(a)){a={}}c.animate(Ext.applyIf({to:{width:d}},a))}return c},setHeight:function(a,d){var c=this;a=c.adjustHeight(a);if(!d||!c.anim){c.dom.style.height=c.addUnits(a)}else{if(!Ext.isObject(d)){d={}}c.animate(Ext.applyIf({to:{height:a}},d))}return c},applyStyles:function(a){Ext.DomHelper.applyStyles(this.dom,a);return this},setSize:function(d,c,e){var a=this;if(Ext.isObject(d)){e=c;c=d.height;d=d.width}d=a.adjustWidth(d);c=a.adjustHeight(c);if(!e||!a.anim){a.dom.style.width=a.addUnits(d);a.dom.style.height=a.addUnits(c)}else{if(e===true){e={}}a.animate(Ext.applyIf({to:{width:d,height:c}},e))}return a},getViewSize:function(){var d=this,a=d.dom,e=S.test(a.nodeName),c;if(e){c={width:D.getViewWidth(),height:D.getViewHeight()}}else{c={width:a.clientWidth,height:a.clientHeight}}return c},getSize:function(a){return{width:this.getWidth(a),height:this.getHeight(a)}},adjustWidth:function(a){var d=this,c=(typeof a=="number");if(c&&d.autoBoxAdjust&&!d.isBorderBox()){a-=(d.getBorderWidth("lr")+d.getPadding("lr"))}return(c&&a<0)?0:a},adjustHeight:function(a){var d=this,c=(typeof a=="number");if(c&&d.autoBoxAdjust&&!d.isBorderBox()){a-=(d.getBorderWidth("tb")+d.getPadding("tb"))}return(c&&a<0)?0:a},getColor:function(m,j,d){var l=this.getStyle(m),a=d||d===""?d:"#",e,c,h=0;if(!l||(/transparent|inherit/.test(l))){return j}if(/^r/.test(l)){l=l.slice(4,l.length-1).split(",");c=l.length;for(;h<c;h++){e=parseInt(l[h],10);a+=(e<16?"0":"")+e.toString(16)}}else{l=l.replace("#","");a+=l.length==3?l.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):l}return(a.length>5?a.toLowerCase():j)},setOpacity:function(d,a){var c=this;if(!c.dom){return c}if(!a||!c.anim){c.setStyle("opacity",d)}else{if(typeof a!="object"){a={duration:350,easing:"ease-in"}}c.animate(Ext.applyIf({to:{opacity:d}},a))}return c},clearOpacity:function(){return this.setOpacity("")},adjustDirect2DDimension:function(j){var n=this,l=n.dom,c=n.getStyle("display"),d=l.style.display,m=l.style.position,a=j===N?0:1,h=l.currentStyle,e;if(c==="inline"){l.style.display="inline-block"}l.style.position=c.match(F)?"absolute":"static";e=(parseFloat(h[j])||parseFloat(h.msTransformOrigin.split(" ")[a])*2)%1;l.style.position=m;if(c==="inline"){l.style.display=d}return e},clip:function(){var d=this,c=(d.$cache||d.getCache()).data,a;if(!c[P]){c[P]=true;a=d.getStyle([K,I,J]);c[A]={o:a[K],x:a[I],y:a[J]};d.setStyle(K,B);d.setStyle(I,B);d.setStyle(J,B)}return d},unclip:function(){var d=this,c=(d.$cache||d.getCache()).data,a;if(c[P]){c[P]=false;a=c[A];if(a.o){d.setStyle(K,a.o)}if(a.x){d.setStyle(I,a.x)}if(a.y){d.setStyle(J,a.y)}}return d},boxWrap:function(a){a=a||Ext.baseCSSPrefix+"box";var c=Ext.get(this.insertHtml("beforeBegin","<div class='"+a+"' role='presentation'>"+Ext.String.format(D.boxMarkup,a)+"</div>"));Ext.DomQuery.selectNode("."+a+"-mc",c.dom).appendChild(this.dom);return c},getComputedHeight:function(){var c=this,a=Math.max(c.dom.offsetHeight,c.dom.clientHeight);if(!a){a=parseFloat(c.getStyle(E))||0;if(!c.isBorderBox()){a+=c.getFrameWidth("tb")}}return a},getComputedWidth:function(){var c=this,a=Math.max(c.dom.offsetWidth,c.dom.clientWidth);if(!a){a=parseFloat(c.getStyle(N))||0;if(!c.isBorderBox()){a+=c.getFrameWidth("lr")}}return a},getFrameWidth:function(c,a){return(a&&this.isBorderBox())?0:(this.getPadding(c)+this.getBorderWidth(c))},addClsOnOver:function(e,d,j){var a=this,h=a.dom,c=Ext.isFunction(d);a.hover(function(){if(c&&d.call(j||a,a)===false){return}Ext.fly(h,T).addCls(e)},function(){Ext.fly(h,T).removeCls(e)});return a},addClsOnFocus:function(e,d,j){var a=this,h=a.dom,c=Ext.isFunction(d);a.on("focus",function(){if(c&&d.call(j||a,a)===false){return false}Ext.fly(h,T).addCls(e)});a.on("blur",function(){Ext.fly(h,T).removeCls(e)});return a},addClsOnClick:function(e,d,j){var a=this,h=a.dom,c=Ext.isFunction(d);a.on("mousedown",function(){if(c&&d.call(j||a,a)===false){return false}Ext.fly(h,T).addCls(e);var l=Ext.getDoc(),m=function(){Ext.fly(h,T).removeCls(e);l.removeListener("mouseup",m)};l.on("mouseup",m)});return a},getStyleSize:function(){var j=this,e=this.dom,h=S.test(e.nodeName),a,c,d;if(h){return{width:D.getViewWidth(),height:D.getViewHeight()}}a=j.getStyle([E,N],true);if(a.width&&a.width!="auto"){c=parseFloat(a.width);if(j.isBorderBox()){c-=j.getFrameWidth("lr")}}if(a.height&&a.height!="auto"){d=parseFloat(a.height);if(j.isBorderBox()){d-=j.getFrameWidth("tb")}}return{width:c||j.getWidth(true),height:d||j.getHeight(true)}},statics:{selectableCls:Ext.baseCSSPrefix+"selectable",unselectableCls:Ext.baseCSSPrefix+"unselectable"},selectable:function(){var a=this;a.dom.unselectable="";a.removeCls(D.unselectableCls);a.addCls(D.selectableCls);return a},unselectable:function(){var a=this;if(Ext.isOpera){a.dom.unselectable="on"}a.removeCls(D.selectableCls);a.addCls(D.unselectableCls);return a},setVertical:function(h,e){var a=this,d=D.prototype,c;a.vertical=true;if(e){a.addCls(a.verticalCls=e)}a.setWidth=d.setHeight;a.setHeight=d.setWidth;if(!Ext.isIE9m){a.getWidth=d.getHeight;a.getHeight=d.getWidth}a.styleHooks=(h===270)?D.prototype.verticalStyleHooks270:D.prototype.verticalStyleHooks90},setHorizontal:function(){var c=this,a=c.verticalCls;delete c.vertical;if(a){delete c.verticalCls;c.removeCls(a)}delete c.setWidth;delete c.setHeight;if(!Ext.isIE9m){delete c.getWidth;delete c.getHeight}delete c.styleHooks}});D.prototype.styleHooks=z=Ext.dom.AbstractElement.prototype.styleHooks;D.prototype.verticalStyleHooks90=O=Ext.Object.chain(D.prototype.styleHooks);D.prototype.verticalStyleHooks270=G=Ext.Object.chain(D.prototype.styleHooks);O.width={name:"height"};O.height={name:"width"};O["margin-top"]={name:"marginLeft"};O["margin-right"]={name:"marginTop"};O["margin-bottom"]={name:"marginRight"};O["margin-left"]={name:"marginBottom"};O["padding-top"]={name:"paddingLeft"};O["padding-right"]={name:"paddingTop"};O["padding-bottom"]={name:"paddingRight"};O["padding-left"]={name:"paddingBottom"};O["border-top"]={name:"borderLeft"};O["border-right"]={name:"borderTop"};O["border-bottom"]={name:"borderRight"};O["border-left"]={name:"borderBottom"};G.width={name:"height"};G.height={name:"width"};G["margin-top"]={name:"marginRight"};G["margin-right"]={name:"marginBottom"};G["margin-bottom"]={name:"marginLeft"};G["margin-left"]={name:"marginTop"};G["padding-top"]={name:"paddingRight"};G["padding-right"]={name:"paddingBottom"};G["padding-bottom"]={name:"paddingLeft"};G["padding-left"]={name:"paddingTop"};G["border-top"]={name:"borderRight"};G["border-right"]={name:"borderBottom"};G["border-bottom"]={name:"borderLeft"};G["border-left"]={name:"borderTop"};if(Ext.isIE7m){z.fontSize=z["font-size"]={name:"fontSize",canThrow:true};z.fontStyle=z["font-style"]={name:"fontStyle",canThrow:true};z.fontFamily=z["font-family"]={name:"fontFamily",canThrow:true}}if(Ext.isIEQuirks||Ext.isIE&&Ext.ieVersion<=8){function R(a,e,d,c){if(c[this.styleName]=="none"){return"0px"}return c[this.name]}Q=["Top","Right","Bottom","Left"];C=Q.length;while(C--){M=Q[C];y="border"+M+"Width";z["border-"+M.toLowerCase()+"-width"]=z[y]={name:y,styleName:"border"+M+"Style",get:R}}}Ext.getDoc().on("selectstart",function(l,d){var h=document.documentElement,a=D.selectableCls,e=D.unselectableCls,c=d&&d.tagName;c=c&&c.toLowerCase();if(c==="input"||c==="textarea"){return}while(d&&d.nodeType===1&&d!==h){var j=Ext.fly(d);if(j.hasCls(a)){return}if(j.hasCls(e)){l.stopEvent();return}d=d.parentNode}})});Ext.onReady(function(){var h=/alpha\(opacity=(.*)\)/i,d=/^\s+|\s+$/g,e=Ext.dom.Element.prototype.styleHooks;e.opacity={name:"opacity",afterSet:function(a,c,j){if(j.isLayer){j.onOpacitySet(c)}}};if(!Ext.supports.Opacity&&Ext.isIE){Ext.apply(e.opacity,{get:function(a){var c=a.style.filter,j,l;if(c.match){j=c.match(h);if(j){l=parseFloat(j[1]);if(!isNaN(l)){return l?l/100:0}}}return 1},set:function(a,j){var l=a.style,c=l.filter.replace(h,"").replace(d,"");l.zoom=1;if(typeof(j)=="number"&&j>=0&&j<1){j*=100;l.filter=c+(c.length?" ":"")+"alpha(opacity="+j+")"}else{l.filter=c}}})}});(Ext.cmd.derive("Ext.util.Positionable",Ext.Base,{_positionTopLeft:["position","top","left"],_alignRe:/^([a-z]+)-([a-z]+)(\?)?$/,afterSetPosition:Ext.emptyFn,adjustForConstraints:function(h,d){var e=this.getConstrainVector(d,h);if(e){h[0]+=e[0];h[1]+=e[1]}return h},alignTo:function(o,j,l,h){var m=this,n=m.el;return m.setXY(m.getAlignToXY(o,j,l),n.anim&&!!h?n.anim(h):false)},anchorTo:function(p,s,v,w,n,m){var q=this,o=!Ext.isEmpty(n),u=function(){q.alignTo(p,s,v,w);Ext.callback(m,q)},t=q.getAnchor();q.removeAnchor();Ext.apply(t,{fn:u,scroll:o});Ext.EventManager.onWindowResize(u,null);if(o){Ext.EventManager.on(window,"scroll",u,null,{buffer:!isNaN(n)?n:50})}u();return q},calculateAnchorXY:function(v,t,u,x){var s=this,y=s.el,q=document,w=y.dom==q.body||y.dom==q,p=Math.round,o,z,A;v=(v||"tl").toLowerCase();x=x||{};z=x.width||(w?Ext.Element.getViewWidth():s.getWidth());A=x.height||(w?Ext.Element.getViewHeight():s.getHeight());switch(v){case"tl":o=[0,0];break;case"bl":o=[0,A];break;case"tr":o=[z,0];break;case"c":o=[p(z*0.5),p(A*0.5)];break;case"t":o=[p(z*0.5),0];break;case"l":o=[0,p(A*0.5)];break;case"r":o=[z,p(A*0.5)];break;case"b":o=[p(z*0.5),A];break;case"tc":o=[p(z*0.5),0];break;case"bc":o=[p(z*0.5),A];break;case"br":o=[z,A]}return[o[0]+t,o[1]+u]},convertPositionSpec:Ext.identityFn,getAlignToXY:function(O,x,S){var H=this,T,y,W,Q,E,R,D,C,G,F,B,I,J,V,U,P,M,K,N;O=Ext.get(O.el||O);if(!O||!O.dom){}S=S||[0,0];x=(!x||x=="?"?"tl-bl?":(!(/-/).test(x)&&x!==""?"tl-"+x:x||"tl-bl")).toLowerCase();x=H.convertPositionSpec(x);W=x.match(H._alignRe);I=W[1];J=W[2];B=!!W[3];Q=H.getAnchorXY(I,true);E=H.getAnchorToXY(O,J,false);K=E[0]-Q[0]+S[0];N=E[1]-Q[1]+S[1];if(B){T=H.constrainTo||H.container||H.el.parent();T=Ext.get(T.el||T);y=T.getConstrainRegion();y.right=y.left+T.el.dom.clientWidth;R=H.getWidth();D=H.getHeight();C=O.getRegion();V=I.charAt(0);U=I.charAt(I.length-1);P=J.charAt(0);M=J.charAt(J.length-1);G=(K<C.right&&K+R>=C.left)&&((V=="t"&&P=="b")||(V=="b"&&P=="t"));F=(N<C.bottom&&N+D>=C.top)&&((U=="r"&&M=="l")||(U=="l"&&M=="r"));if(K+R>y.right){if(F){K=C.left-R;F=false}else{K=y.right-R}}if(K<y.left){K=F?C.right:y.left}if(N+D>y.bottom){if(G){N=C.top-D;G=false}else{N=y.bottom-D}}if(N<y.top){N=G?C.bottom:y.top}}return[K,N]},getAnchor:function(){var d=this.el,h=(d.$cache||d.getCache()).data,e;if(!d.dom){return}e=h._anchor;if(!e){e=h._anchor={}}return e},getAnchorXY:function(v,q,x){var s=this,p=s.getXY(),y=s.el,n=document,w=y.dom==n.body||y.dom==n,o=y.getScroll(),t=w?o.left:q?0:p[0],u=w?o.top:q?0:p[1];return s.calculateAnchorXY(v,t,u,x)},getBox:function(v,s){if(Ext.isIEQuirks){this.el.dom.offsetHeight;this.el.dom.offsetWidth}var u=this,h=s?u.getLocalXY():u.getXY(),q=h[0],t=h[1],p=u.getWidth(),x=u.getHeight(),w,y,o;if(v){w=u.getBorderPadding();y=w.beforeX;o=w.beforeY;q+=y;t+=o;p-=(y+w.afterX);x-=(o+w.afterY)}return{x:q,left:q,0:q,y:t,top:t,1:t,width:p,height:x,right:q+p,bottom:t+x}},calculateConstrainedPosition:function(w,B,s,z){var t=this,A,v=t.floatParent,y=v?v.getTargetEl():null,C,x,u,p=false,q;if(s&&v){C=y.getXY();x=y.getBorderPadding();C[0]+=x.beforeX;C[1]+=x.beforeY;if(B){u=[B[0]+C[0],B[1]+C[1]]}}else{u=B}w=w||t.constrainTo||y||t.container||t.el.parent();if(s&&u){u=t.reverseTranslateXY(u)}A=(t.constrainHeader?t.header:t).getConstrainVector(w,u,z);if(A){p=B||t.getPosition(s);p[0]+=A[0];p[1]+=A[1]}return p},getConstrainVector:function(n,s,p){var u=this.getRegion(),q=[0,0],t=(this.shadow&&this.constrainShadow&&!this.shadowDisabled)?this.shadow.getShadowSize():undefined,l=false,m,o=this.constraintInsets;if(!(n instanceof Ext.util.Region)){n=Ext.get(n.el||n);m=n.getViewSize();n=n.getConstrainRegion();n.right=n.left+m.width;n.bottom=n.top+m.height}if(o){o=Ext.isObject(o)?o:Ext.Element.parseBox(o);n.adjust(o.top,o.right,o.bottom,o.length)}if(s){u.translateBy(s[0]-u.x,s[1]-u.y)}if(p){u.right=u.left+p[0];u.bottom=u.top+p[1]}if(t){n.adjust(t[0],-t[1],-t[2],t[3])}if(u.right>n.right){l=true;q[0]=(n.right-u.right)}if(u.left+q[0]<n.left){l=true;q[0]=(n.left-u.left)}if(u.bottom>n.bottom){l=true;q[1]=(n.bottom-u.bottom)}if(u.top+q[1]<n.top){l=true;q[1]=(n.top-u.top)}return l?q:false},getOffsetsTo:function(e){var h=this.getXY(),d=Ext.fly(e.el||e,"_internal").getXY();return[h[0]-d[0],h[1]-d[1]]},getRegion:function(){var c=this.getBox();return new Ext.util.Region(c.top,c.right,c.bottom,c.left)},getViewRegion:function(){var q=this,u=q.el,w=u.dom.nodeName==="BODY",s,n,p,o,t,v,m;if(w){n=u.getScroll();t=n.left;o=n.top;v=Ext.dom.AbstractElement.getViewportWidth();m=Ext.dom.AbstractElement.getViewportHeight()}else{s=q.getBorderPadding();p=q.getXY();t=p[0]+s.beforeX;o=p[1]+s.beforeY;v=q.getWidth(true);m=q.getHeight(true)}return new Ext.util.Region(o,t+v,o+m,t)},getConstrainRegion:function(){var s=this,w=s.el,y=w.dom.nodeName==="BODY",u=w.dom,t=w.getBorders(),q=w.getXY(),v=q[0]+t.beforeX,p=q[1]+t.beforeY,o,x,n;if(y){o=w.getScroll();v=o.left;p=o.top;x=Ext.dom.AbstractElement.getViewportWidth();n=Ext.dom.AbstractElement.getViewportHeight()}else{x=u.clientWidth;n=u.clientHeight}return new Ext.util.Region(p,v+x,p+n,v)},move:function(s,z,y){var v=this,o=v.getXY(),q=o[0],t=o[1],x=[q-z,t],p=[q+z,t],u=[q,t-z],A=[q,t+z],w={l:x,left:x,r:p,right:p,t:u,top:u,up:u,b:A,bottom:A,down:A};s=s.toLowerCase();v.setXY([w[s][0],w[s][1]],y)},removeAnchor:function(){var c=this.getAnchor();if(c&&c.fn){Ext.EventManager.removeResizeListener(c.fn);if(c.scroll){Ext.EventManager.un(window,"scroll",c.fn)}delete c.fn}return this},setBox:function(t,w){var q=this,v=q.el,o=t.x,p=t.y,n=t.width,s=t.height,u=(q.constrain||q.constrainHeader),h=u&&q.calculateConstrainedPosition(null,[o,p],false,[n,s]);if(h){o=h[0];p=h[1]}if(!w||!v.anim){q.setXY([o,p]);q.setSize(n,s);q.afterSetPosition(o,p)}else{q.animate(Ext.applyIf({to:{x:o,y:p,width:v.adjustWidth(n),height:v.adjustHeight(s)},listeners:{afteranimate:Ext.Function.bind(q.afterSetPosition,q,[o,p])}},w))}return q},setRegion:function(c,d){return this.setBox({x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top},d)},translatePoints:function(e,h){var d=this.translateXY(e,h);return{left:d.x,top:d.y}},translateXY:function(n,p){var q=this,t=q.el,m=t.getStyle(q._positionTopLeft),u=m.position=="relative",s=parseFloat(m.left),o=parseFloat(m.top),l=q.getXY();if(Ext.isArray(n)){p=n[1];n=n[0]}if(isNaN(s)){s=u?0:t.dom.offsetLeft}if(isNaN(o)){o=u?0:t.dom.offsetTop}s=(typeof n=="number")?n-l[0]+s:undefined;o=(typeof p=="number")?p-l[1]+o:undefined;return{x:s,y:o}},reverseTranslateXY:function(m){var o=m,u=this.el,n=[],t=u.dom,v=t.offsetParent,w,s,p,q;if(v){w=u.isStyle("position","relative"),s=Ext.fly(v).getXY(),p=m[0]+s[0]+v.clientLeft;q=m[1]+s[1]+v.clientTop;if(w){p+=u.getPadding("l");q+=u.getPadding("t")}o=[p,q]}return o}},0,0,0,0,0,0,[Ext.util,"Positionable"],0));(Ext.cmd.derive("Ext.dom.Element",Ext.dom.AbstractElement,function(C){var B="hidden",x=document,u="visibility",A="display",t="none",y=Ext.baseCSSPrefix+"masked",s=Ext.baseCSSPrefix+"masked-relative",v=Ext.baseCSSPrefix+"mask-msg",q=/^body/i,w,z=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1},p=function(a){var c=[],h=-1,d,e;for(d=0;e=a[d];d++){if(e.scrollTop>0||e.scrollLeft>0){c[++h]=e}}return c};return{alternateClassName:["Ext.Element","Ext.core.Element"],isElement:true,tableTagRe:/^(?:tr|td|table|tbody)$/i,addUnits:function(){return C.addUnits.apply(C,arguments)},focus:function(a,c){var e=this;c=c||e.dom;try{if(Number(a)){Ext.defer(e.focus,a,e,[null,c])}else{Ext.globalEvents.fireEvent("beforefocus",c);c.focus()}}catch(d){}return e},blur:function(){var d=this,a=d.dom;if(a!==document.body){try{a.blur()}catch(c){}return d}else{return d.focus(undefined,a)}},isBorderBox:function(){var a=Ext.isBorderBox;if(Ext.isIE7m&&!a){a=((this.dom.tagName||"").toLowerCase() in z)}return a},hover:function(e,h,c,d){var a=this;a.on("mouseenter",e,c||a.dom,d);a.on("mouseleave",h,c||a.dom,d);return a},getAttributeNS:function(a,c){return this.getAttribute(c,a)},getAttribute:(Ext.isIE&&!(Ext.isIE9p&&x.documentMode>=9))?function(e,c){var a=this.dom,d;if(c){d=typeof a[c+":"+e];if(d!="undefined"&&d!="unknown"){return a[c+":"+e]||null}return null}if(e==="for"){e="htmlFor"}return a[e]||null}:function(d,c){var a=this.dom;if(c){return a.getAttributeNS(c,d)||a.getAttribute(c+":"+d)}return a.getAttribute(d)||a[d]||null},cacheScrollValues:function(){var c=this,d,e,h,a=[],j=function(){for(h=0;h<d.length;h++){e=d[h];e.scrollLeft=a[h][0];e.scrollTop=a[h][1]}};if(!Ext.DomQuery.pseudos.isScrolled){Ext.DomQuery.pseudos.isScrolled=p}d=c.query(":isScrolled");for(h=0;h<d.length;h++){e=d[h];a[h]=[e.scrollLeft,e.scrollTop]}return j},autoBoxAdjust:true,isVisible:function(e){var c=this,a=c.dom,d=a.ownerDocument.documentElement;if(!w){w=new C.Fly()}while(a!==d){if(!a||a.nodeType===11||(w.attach(a)).isStyle(u,B)||w.isStyle(A,t)){return false}if(!e){break}a=a.parentNode}return true},isDisplayed:function(){return !this.isStyle(A,t)},enableDisplayMode:function(a){var c=this;c.setVisibilityMode(C.DISPLAY);if(!Ext.isEmpty(a)){(c.$cache||c.getCache()).data.originalDisplay=a}return c},mask:function(e,l,o){var d=this,H=d.dom,G=H.style.setExpression,E=(d.$cache||d.getCache()).data,I=E.maskShimEl,m=E.maskEl,c=E.maskMsg,F,n,j,a;if(!(q.test(H.tagName)&&d.getStyle("position")=="static")){d.addCls(s)}if(m){m.remove()}if(c){c.remove()}if(I){I.remove()}if(Ext.isIE6){I=Ext.DomHelper.append(H,{tag:"iframe",role:"presentation",cls:Ext.baseCSSPrefix+"shim "+Ext.baseCSSPrefix+"mask-shim"},true);E.maskShimEl=I;I.setDisplayed(true)}Ext.DomHelper.append(H,[{role:"presentation",cls:Ext.baseCSSPrefix+"mask",style:"top:0;left:0;"},{role:"presentation",cls:l?v+" "+l:v,cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-inner",cn:{tag:"div",role:"presentation",cls:Ext.baseCSSPrefix+"mask-msg-text",html:e||""}}}]);c=Ext.get(H.lastChild);m=Ext.get(c.dom.previousSibling);E.maskMsg=c;E.maskEl=m;d.addCls(y);m.setDisplayed(true);if(typeof e=="string"){c.setDisplayed(true);c.center(d)}else{c.setDisplayed(false)}if(Ext.isStrict&&!Ext.isIE6&&(H===x.body)){m.addCls(Ext.baseCSSPrefix+"mask-fixed")}if(H!==x.body||Ext.isIE6||Ext.isIEQuirks){if(!Ext.supports.IncludePaddingInWidthCalculation&&G){try{m.dom.style.setExpression("width",'this.parentNode.clientWidth + "px"');F='this.parentNode.clientWidth + "px"';if(I){I.dom.style.setExpression("width",F)}m.dom.style.setExpression("width",F)}catch(h){}}if(!Ext.supports.IncludePaddingInHeightCalculation&&G){try{n="this.parentNode."+(H==x.body?"scrollHeight":"offsetHeight")+' + "px"';if(I){I.dom.style.setExpression("height",n)}m.dom.style.setExpression("height",n)}catch(h){}}else{if(Ext.isIE9m&&!(Ext.isIE7&&Ext.isStrict)&&d.getStyle("height")=="auto"){if(Ext.isIE6&&Ext.isStrict){j=H.parentNode;a=Math.max(j.clientHeight,j.scrollHeight)}if(I){I.setSize(undefined,o||a||d.getHeight())}m.setSize(undefined,o||a||d.getHeight())}}}return m},unmask:function(){var c=this,a=(c.$cache||c.getCache()).data,d=a.maskEl,h=a.maskShimEl,j=a.maskMsg,e;if(d){e=d.dom.style;if(e.clearExpression){e.clearExpression("width");e.clearExpression("height")}if(d){d.remove();delete a.maskEl}if(j){j.remove();delete a.maskMsg}c.removeCls([y,s]);if(h){e=h.dom.style;if(e.clearExpression){e.clearExpression("width");e.clearExpression("height")}h.remove();delete a.maskShimEl}}},isMasked:function(){var d=this,a=(d.$cache||d.getCache()).data,e=a.maskEl,h=a.maskMsg,c=false;if(e&&e.isVisible()){if(h){h.center(d)}c=true}return c},createShim:function(){var c=x.createElement("iframe"),a;c.frameBorder="0";c.className=Ext.baseCSSPrefix+"shim";c.src=Ext.SSL_SECURE_URL;c.setAttribute("role","presentation");a=Ext.get(this.dom.parentNode.insertBefore(c,this.dom));a.autoBoxAdjust=false;return a},addKeyListener:function(d,a,c){var e;if(typeof d!="object"||Ext.isArray(d)){e={target:this,key:d,fn:a,scope:c}}else{e={target:this,key:d.key,shift:d.shift,ctrl:d.ctrl,alt:d.alt,fn:a,scope:c}}return new Ext.util.KeyMap(e)},addKeyMap:function(a){return new Ext.util.KeyMap(Ext.apply({target:this},a))},on:function(e,a,c,d){Ext.EventManager.on(this,e,a,c||this,d);return this},un:function(d,a,c){Ext.EventManager.un(this,d,a,c||this);return this},removeAllListeners:function(){Ext.EventManager.removeAll(this);return this},purgeAllListeners:function(){Ext.EventManager.purgeElement(this);return this},select:function(a){return C.select(a,false,this.dom)}}},0,0,0,0,0,[[Ext.util.Positionable.prototype.mixinId||Ext.util.Positionable.$className,Ext.util.Positionable]],[Ext.dom,"Element",Ext,"Element",Ext.core,"Element"],function(){var DOC=document,EC=Ext.cache,Element=this,AbstractElement=Ext.dom.AbstractElement,focusRe=/^a|button|embed|iframe|input|object|select|textarea$/i,nonSpaceRe=/\S/,scriptTagRe=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,replaceScriptTagRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,srcRe=/\ssrc=([\'\"])(.*?)\1/i,typeRe=/\stype=([\'\"])(.*?)\1/i,useDocForId=!Ext.isIE8m,internalFly;Element.boxMarkup=['<div class="{0}-tl" role="presentation">','<div class="{0}-tr" role="presentation">','<div class="{0}-tc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-ml" role="presentation">','<div class="{0}-mr" role="presentation">','<div class="{0}-mc" role="presentation"></div>',"</div>","</div>",'<div class="{0}-bl" role="presentation">','<div class="{0}-br" role="presentation">','<div class="{0}-bc" role="presentation"></div>',"</div>","</div>"].join("");function garbageCollect(){if(!Ext.enableGarbageCollector){clearInterval(Element.collectorThreadId)}else{var eid,d,o,t;for(eid in EC){if(!EC.hasOwnProperty(eid)){continue}o=EC[eid];if(o.skipGarbageCollection){continue}d=o.dom;if(d&&(!d.parentNode||(!d.offsetParent&&!Ext.getElementById(eid)))){if(Ext.enableListenerCollection){Ext.EventManager.removeAll(d)}delete EC[eid]}}if(Ext.isIE){t={};for(eid in EC){if(!EC.hasOwnProperty(eid)){continue}t[eid]=EC[eid]}EC=Ext.cache=t}}}Element.collectorThreadId=setInterval(garbageCollect,30000);Element.addMethods({monitorMouseLeave:function(delay,handler,scope){var me=this,timer,listeners={mouseleave:function(e){timer=setTimeout(Ext.Function.bind(handler,scope||me,[e]),delay)},mouseenter:function(){clearTimeout(timer)},freezeEvent:true};me.on(listeners);return listeners},swallowEvent:function(eventName,preventDefault){var me=this,e,eLen,fn=function(e){e.stopPropagation();if(preventDefault){e.preventDefault()}};if(Ext.isArray(eventName)){eLen=eventName.length;for(e=0;e<eLen;e++){me.on(eventName[e],fn)}return me}me.on(eventName,fn);return me},relayEvent:function(eventName,observable){this.on(eventName,function(e){observable.fireEvent(eventName,e)})},clean:function(forceReclean){var me=this,dom=me.dom,data=(me.$cache||me.getCache()).data,n=dom.firstChild,ni=-1,nx;if(data.isCleaned&&forceReclean!==true){return me}while(n){nx=n.nextSibling;if(n.nodeType==3){if(!(nonSpaceRe.test(n.nodeValue))){dom.removeChild(n)}else{if(nx&&nx.nodeType==3){n.appendData(Ext.String.trim(nx.data));dom.removeChild(nx);nx=n.nextSibling;n.nodeIndex=++ni}}}else{internalFly.attach(n).clean();n.nodeIndex=++ni}n=nx}data.isCleaned=true;return me},load:function(options){this.getLoader().load(options);return this},getLoader:function(){var me=this,data=(me.$cache||me.getCache()).data,loader=data.loader;if(!loader){data.loader=loader=new Ext.ElementLoader({target:me})}return loader},syncContent:function(source){source=Ext.getDom(source);var sourceNodes=source.childNodes,sourceLen=sourceNodes.length,dest=this.dom,destNodes=dest.childNodes,destLen=destNodes.length,i,destNode,sourceNode,nodeType,newAttrs,attLen,attName;if(Ext.isIE9m&&dest.mergeAttributes){dest.mergeAttributes(source,true);dest.src=source.src}else{newAttrs=source.attributes;attLen=newAttrs.length;for(i=0;i<attLen;i++){attName=newAttrs[i].name;if(attName!=="id"){dest.setAttribute(attName,newAttrs[i].value)}}}if(sourceLen!==destLen){dest.innerHTML=source.innerHTML;return}for(i=0;i<sourceLen;i++){sourceNode=sourceNodes[i];destNode=destNodes[i];nodeType=sourceNode.nodeType;if(nodeType!==destNode.nodeType||(nodeType===1&&sourceNode.tagName!==destNode.tagName)){dest.innerHTML=source.innerHTML;return}if(nodeType===3){destNode.data=sourceNode.data}else{if(sourceNode.id&&destNode.id!==sourceNode.id){destNode.id=sourceNode.id}destNode.style.cssText=sourceNode.style.cssText;destNode.className=sourceNode.className;internalFly.attach(destNode).syncContent(sourceNode)}}},update:function(html,loadScripts,callback){var me=this,id,dom,interval;if(!me.dom){return me}html=html||"";dom=me.dom;if(loadScripts!==true){dom.innerHTML=html;Ext.callback(callback,me);return me}id=Ext.id();html+='<span id="'+id+'" role="presentation"></span>';interval=setInterval(function(){var hd,match,attrs,srcMatch,typeMatch,el,s;if(!(el=DOC.getElementById(id))){return false}clearInterval(interval);Ext.removeNode(el);hd=Ext.getHead().dom;while((match=scriptTagRe.exec(html))){attrs=match[1];srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){s=DOC.createElement("script");s.src=srcMatch[2];typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(window.execScript){window.execScript(match[2])}else{window.eval(match[2])}}}}Ext.callback(callback,me)},20);dom.innerHTML=html.replace(replaceScriptTagRe,"");return me},removeAllListeners:function(){this.removeAnchor();Ext.EventManager.removeAll(this.dom);return this},createProxy:function(config,renderTo,matchBox){config=(typeof config=="object")?config:{tag:"div",role:"presentation",cls:config};var me=this,proxy=renderTo?Ext.DomHelper.append(renderTo,config,true):Ext.DomHelper.insertBefore(me.dom,config,true);proxy.setVisibilityMode(Element.DISPLAY);proxy.hide();if(matchBox&&me.setBox&&me.getBox){proxy.setBox(me.getBox())}return proxy},needsTabIndex:function(){if(this.dom){if((this.dom.nodeName==="a")&&(!this.dom.href)){return true}return !focusRe.test(this.dom.nodeName)}},isFocusable:function(asFocusEl){var dom=this.dom,tabIndexAttr=dom.getAttributeNode("tabIndex"),tabIndex,nodeName=dom.nodeName,canFocus=false;if(tabIndexAttr&&tabIndexAttr.specified){tabIndex=tabIndexAttr.value}if(dom&&!dom.disabled){if(tabIndex==-1){canFocus=Ext.enableFocusManager&&asFocusEl}else{if(focusRe.test(nodeName)){if((nodeName!=="a")||dom.href){canFocus=true}}else{canFocus=tabIndex!=null&&tabIndex>=0}}canFocus=canFocus&&this.isVisible(true)}return canFocus}});if(Ext.isIE9m){Element.prototype.getById=function(id,asDom){var dom=this.dom,cacheItem,el,ret;if(dom){el=(useDocForId&&DOC.getElementById(id))||dom.all[id];if(el){if(asDom){ret=el}else{cacheItem=EC[id];if(cacheItem&&cacheItem.el){ret=Ext.updateCacheEntry(cacheItem,el).el}else{ret=new Element(el)}}return ret}}return asDom?Ext.getDom(id):Element.get(id)}}Element.createAlias({addListener:"on",removeListener:"un",clearListeners:"removeAllListeners",focusable:"isFocusable"});Element.Fly=AbstractElement.Fly=new Ext.Class({extend:Element,isFly:true,constructor:function(dom){this.dom=dom;this.el=this},attach:AbstractElement.Fly.prototype.attach});internalFly=new Element.Fly();if(Ext.isIE9m){Ext.getElementById=function(id){var el=DOC.getElementById(id),detachedBodyEl;if(!el&&(detachedBodyEl=AbstractElement.detachedBodyEl)){el=detachedBodyEl.dom.all[id]}return el}}else{if(!DOC.querySelector){Ext.getDetachedBody=Ext.getBody;Ext.getElementById=function(id){return DOC.getElementById(id)}}}}));(Ext.cmd.derive("Ext.dom.CompositeElementLite",Ext.Base,{alternateClassName:"Ext.CompositeElementLite",statics:{importElementMethods:function(){var d,h=Ext.dom.Element.prototype,e=this.prototype;for(d in h){if(typeof h[d]=="function"){(function(a){e[a]=e[a]||function(){return this.invoke(a,arguments)}}).call(e,d)}}}},constructor:function(c,d){this.elements=[];this.add(c,d);this.el=new Ext.dom.AbstractElement.Fly()},isComposite:true,getElement:function(c){return this.el.attach(c)},transformElement:function(c){return Ext.getDom(c)},getCount:function(){return this.elements.length},add:function(n,j){var l=this.elements,h,m;if(!n){return this}if(typeof n=="string"){n=Ext.dom.Element.selectorFunction(n,j)}else{if(n.isComposite){n=n.elements}else{if(!Ext.isIterable(n)){n=[n]}}}for(h=0,m=n.length;h<m;++h){l.push(this.transformElement(n[h]))}return this},invoke:function(n,j){var l=this.elements,m=l.length,o,h;n=Ext.dom.Element.prototype[n];for(h=0;h<m;h++){o=l[h];if(o){n.apply(this.getElement(o),j)}}return this},item:function(d){var h=this.elements[d],e=null;if(h){e=this.getElement(h)}return e},slice:function(c,d){return Ext.Array.slice(this.elements,c,d)},addListener:function(e,n,o,p){var q=this.elements,l=q.length,s,m;for(s=0;s<l;s++){m=q[s];if(m){Ext.EventManager.on(m,e,n,o||m,p)}}return this},each:function(o,p){var n=this,q=n.elements,l=q.length,e,m;for(e=0;e<l;e++){m=q[e];if(m){m=this.getElement(m);if(o.call(p||m,m,n,e)===false){break}}}return n},fill:function(d){var c=this;c.elements=[];c.add(d);return c},insert:function(c,d){Ext.Array.insert(this.elements,c,d)},filter:function(t){var n=this,s=n.elements,o=s.length,q=[],p=0,m=typeof t=="function",l,u;for(;p<o;p++){u=s[p];l=false;if(u){u=n.getElement(u);if(m){l=t.call(u,u,n,p)!==false}else{l=u.is(t)}if(l){q.push(n.transformElement(u))}}}n.elements=q;return n},indexOf:function(c){return Ext.Array.indexOf(this.elements,this.transformElement(c))},replaceElement:function(l,m,h){var d=!isNaN(l)?l:this.indexOf(l),j;if(d>-1){m=Ext.getDom(m);if(h){j=this.elements[d];j.parentNode.insertBefore(m,j);Ext.removeNode(j)}Ext.Array.splice(this.elements,d,1,m)}return this},clear:function(j){var l=this,e=l.elements,h=e.length-1;if(j){for(;h>=0;h--){Ext.removeNode(e[h])}}this.elements=[]},addElements:function(l,e){if(!l){return this}if(typeof l=="string"){l=Ext.dom.Element.selectorFunction(l,e)}var m=this.elements,h=l.length,j;for(j=0;j<h;j++){m.push(Ext.get(l[j]))}return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(c){return this.indexOf(c)!=-1},removeElement:function(q,n){q=[].concat(q);var s=this,p=s.elements,t=q.length,o,l,m;for(m=0;m<t;m++){o=q[m];if((l=(p[o]||p[o=s.indexOf(o)]))){if(n){if(l.dom){l.remove()}else{Ext.removeNode(l)}}Ext.Array.erase(p,o,1)}}return s}},1,0,0,0,0,0,[Ext.dom,"CompositeElementLite",Ext,"CompositeElementLite"],function(){this.importElementMethods();this.prototype.on=this.prototype.addListener;if(Ext.DomQuery){Ext.dom.Element.selectorFunction=Ext.DomQuery.select}Ext.dom.Element.select=function(e,d){var h;if(typeof e=="string"){h=Ext.dom.Element.selectorFunction(e,d)}else{if(e.length!==undefined){h=e}else{}}return new Ext.CompositeElementLite(h)};Ext.select=function(){return Ext.dom.Element.select.apply(Ext.dom.Element,arguments)}}));(Ext.cmd.derive("Ext.dom.CompositeElement",Ext.dom.CompositeElementLite,{alternateClassName:"Ext.CompositeElement",getElement:function(c){return c},transformElement:function(c){return Ext.get(c)}},0,0,0,0,0,0,[Ext.dom,"CompositeElement",Ext,"CompositeElement"],function(){Ext.dom.Element.select=function(h,j,e){var l;if(typeof h=="string"){l=Ext.dom.Element.selectorFunction(h,e)}else{if(h.length!==undefined){l=h}else{}}return(j===true)?new Ext.CompositeElement(l):new Ext.CompositeElementLite(l)}}));Ext.select=Ext.Element.select;(Ext.cmd.derive("Ext.util.HashMap",Ext.Base,{generation:0,constructor:function(e){e=e||{};var h=this,d=e.keyFn;h.initialConfig=e;h.addEvents("add","clear","remove","replace");h.mixins.observable.constructor.call(h,e);h.clear(true);if(d){h.getKey=d}},getCount:function(){return this.length},getData:function(d,c){if(c===undefined){c=d;d=this.getKey(c)}return[d,c]},getKey:function(c){return c.id},add:function(e,h){var d=this;if(arguments.length===1){h=e;e=d.getKey(h)}if(d.containsKey(e)){return d.replace(e,h)}d.map[e]=h;++d.length;d.generation++;if(d.hasListeners.add){d.fireEvent("add",d,e,h)}return h},replace:function(h,m){var n=this,l=n.map,j;if(arguments.length===1){m=h;h=n.getKey(m)}if(!n.containsKey(h)){n.add(h,m)}j=l[h];l[h]=m;n.generation++;if(n.hasListeners.replace){n.fireEvent("replace",n,h,m,j)}return m},remove:function(c){var d=this.findKey(c);if(d!==undefined){return this.removeAtKey(d)}return false},removeAtKey:function(e){var d=this,h;if(d.containsKey(e)){h=d.map[e];delete d.map[e];--d.length;d.generation++;if(d.hasListeners.remove){d.fireEvent("remove",d,e,h)}return true}return false},get:function(d){var c=this.map;return c.hasOwnProperty(d)?c[d]:undefined},clear:function(d){var c=this;if(d||c.generation){c.map={};c.length=0;c.generation=d?0:c.generation+1}if(d!==true&&c.hasListeners.clear){c.fireEvent("clear",c)}return c},containsKey:function(d){var c=this.map;return c.hasOwnProperty(d)&&c[d]!==undefined},contains:function(c){return this.containsKey(this.findKey(c))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(j){var h=[],e,l=this.map;for(e in l){if(l.hasOwnProperty(e)){h.push(j?e:l[e])}}return h},each:function(m,n){var j=Ext.apply({},this.map),h,l=this.length;n=n||this;for(h in j){if(j.hasOwnProperty(h)){if(m.call(n,h,j[h],l)===false){break}}}return this},clone:function(){var h=new this.self(this.initialConfig),d=this.map,e;h.suspendEvents();for(e in d){if(d.hasOwnProperty(e)){h.add(e,d[e])}}h.resumeEvents();return h},findKey:function(d){var e,h=this.map;for(e in h){if(h.hasOwnProperty(e)&&h[e]===d){return e}}return undefined}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"HashMap"],0));(Ext.cmd.derive("Ext.AbstractManager",Ext.Base,{typeName:"type",constructor:function(c){Ext.apply(this,c||{});this.all=new Ext.util.HashMap();this.types={}},get:function(c){return this.all.get(c)},register:function(c){this.all.add(c)},unregister:function(c){var d=this.all;d.removeAtKey(d.getKey(c))},registerType:function(c,d){this.types[c]=d;d[this.typeName]=c},isRegistered:function(c){return this.types[c]!==undefined},create:function(h,j){var e=h[this.typeName]||h.type||j,l=this.types[e];return new l(h)},onAvailable:function(l,o,h){var j=this.all,n,m;if(j.containsKey(l)){n=j.get(l);o.call(h||n,n)}else{m=function(a,d,c){if(d==l){o.call(h||c,c);j.un("add",m)}};j.on("add",m)}},each:function(c,d){this.all.each(c,d||this)},getCount:function(){return this.all.getCount()}},1,0,0,0,0,0,[Ext,"AbstractManager"],0));(Ext.cmd.derive("Ext.ComponentManager",Ext.AbstractManager,{alternateClassName:"Ext.ComponentMgr",singleton:true,typeName:"xtype",create:function(d,c){if(typeof d=="string"){return Ext.widget(d)}if(d.isComponent){return d}return Ext.widget(d.xtype||c,d)},registerType:function(c,d){this.types[c]=d;d[this.typeName]=c;d.prototype[this.typeName]=c}},0,0,0,0,0,0,[Ext,"ComponentManager",Ext,"ComponentMgr"],function(){Ext.getCmp=function(c){return Ext.ComponentManager.get(c)}}));(Ext.cmd.derive("Ext.util.LruCache",Ext.util.HashMap,{constructor:function(c){Ext.apply(this,c);this.callParent([c])},add:function(j,l){var m=this,n,h;m.removeAtKey(j);h=m.last;n={prev:h,next:null,key:j,value:l};if(h){h.next=n}else{m.first=n}m.last=n;m.callParent([j,n]);m.prune();return l},insertBefore:function(h,l,o){var m=this,j,n;if(o=this.map[this.findKey(o)]){j=m.findKey(l);if(j){m.unlinkEntry(n=m.map[j])}else{n={prev:o.prev,next:o,key:h,value:l}}if(o.prev){n.prev.next=n}else{m.first=n}n.next=o;o.prev=n;m.prune();return l}else{return m.add(h,l)}},get:function(d){var c=this.map[d];if(c){if(c.next){this.moveToEnd(c)}return c.value}},removeAtKey:function(c){this.unlinkEntry(this.map[c]);return this.callParent(arguments)},clear:function(c){this.first=this.last=null;return this.callParent(arguments)},unlinkEntry:function(c){if(c){if(c.next){c.next.prev=c.prev}else{this.last=c.prev}if(c.prev){c.prev.next=c.next}else{this.first=c.next}c.prev=c.next=null}},moveToEnd:function(c){this.unlinkEntry(c);if(c.prev=this.last){this.last.next=c}else{this.first=c}this.last=c},getArray:function(h){var e=[],d=this.first;while(d){e.push(h?d.key:d.value);d=d.next}return e},each:function(o,h,j){var l=this,m=j?l.last:l.first,n=l.length;h=h||l;while(m){if(o.call(h,m.key,m.value,n)===false){break}m=j?m.prev:m.next}return l},findKey:function(d){var e,h=this.map;for(e in h){if(h.hasOwnProperty(e)&&h[e].value===d){return e}}return undefined},clone:function(){var e=new this.self(this.initialConfig),h=this.map,d;e.suspendEvents();for(d in h){if(h.hasOwnProperty(d)){e.add(d,h[d].value)}}e.resumeEvents();return e},prune:function(){var d=this,c=d.maxSize?(d.length-d.maxSize):0;if(c>0){for(;d.first&&c;c--){d.removeAtKey(d.first.key)}}}},1,0,0,0,0,0,[Ext.util,"LruCache"],0));(Ext.cmd.derive("Ext.ComponentQuery",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext,"ComponentQuery"],function(){var G=this,D=Ext.dom.Query.operators,B=/(\d*)n\+?(\d*)/,H=/\D/,z=/^(\s)+/,A=/\\(.)/g,y=new Ext.util.LruCache({maxSize:100}),x=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),w=function(a,c){return c.method.apply(this,[a].concat(c.args))},M=function(d,c){var h=[],a=0,j=d.length,l,e=c!==">";for(;a<j;a++){l=d[a];if(l.getRefItems){h=h.concat(l.getRefItems(e))}}return h},F=function(d){var e=[],c=0,h=d.length,a;for(;c<h;c++){a=d[c];while(!!(a=a.getRefOwner())){e.push(a)}}return e},I=function(e,c,j){if(c==="*"){return e.slice()}else{var h=[],d=0,l=e.length,a;for(;d<l;d++){a=e[d];if(a.isXType(c,j)){h.push(a)}}return h}},K=function(c,a,l,m){var p=[],d=0,n=c.length,q,j,s,o,e,h;if(a.charAt(0)==="@"){q=true;a=a.substr(1)}if(a.charAt(0)==="?"){q=true;j=true;a=a.substr(1)}for(;d<n;d++){s=c[d];if(!q||s.hasOwnProperty(a)){o=s[a];if(j){p.push(s)}else{if(l==="~="){if(o){if(!Ext.isArray(o)){o=o.split(" ")}for(e=0,h=o.length;e<h;e++){if(D[l](Ext.coerce(o[e],m),m)){p.push(s);break}}}}else{if(l==="/="){if(s[a]!==undefined&&m.test(s[a])){p.push(s)}}else{if(!m?!!s[a]:D[l](Ext.coerce(o,m),m)){p.push(s)}}}}}}return p},E=function(d,h){var e=[],c=0,j=d.length,a;for(;c<j;c++){a=d[c];if(a.getItemId()===h){e.push(a)}}return e},u=function(d,c,a){return G.pseudos[c](d,a)},C=/^(\s?([>\^])\s?|\s|$)/,v=/^(#)?((?:\\\.|[\w\-])+|\*)(?:\((true|false)\))?/,J=[{re:/^\.((?:\\\.|[\w\-])+)(?:\((true|false)\))?/,method:I,argTransform:function(a){if(a[1]!==undefined){a[1]=a[1].replace(A,"$1")}return a.slice(1)}},{re:/^(?:\[((?:[@?$])?[\w\-]*)\s*(?:([\^$*~%!\/]?=)\s*(['"])?((?:\\\]|.)*?)\3)?(?!\\)\])/,method:K,argTransform:function(l){var h=l[0],j=l[1],d=l[2],e=l[3],c=l[4],a;if(c!==undefined){c=c.replace(A,"$1")}if(d==="/="){a=y.get(c);if(a){c=a}else{c=y.add(c,new RegExp(c))}}return[j,d,c]}},{re:/^#((?:\\\.|[\w\-])+)/,method:E},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:u,argTransform:function(a){if(a[2]!==undefined){a[2]=a[2].replace(A,"$1")}return a.slice(1)}},{re:/^(?:\{([^\}]+)\})/,method:x}];G.Query=Ext.extend(Object,{constructor:function(a){a=a||{};Ext.apply(this,a)},execute:function(c){var a=this.operations,d=[],h,j,e;for(j=0,e=a.length;j<e;j++){h=a[j];d=d.concat(this._execute(c,h))}return d},_execute:function(d,a){var j=0,h=a.length,c,e;if(!d){e=Ext.ComponentManager.all.getArray()}else{if(Ext.isIterable(d)){e=d}else{if(d.isMixedCollection){e=d.items}}}for(;j<h;j++){c=a[j];if(c.mode==="^"){e=F(e||[d])}else{if(c.mode){e=M(e||[d],c.mode)}else{e=w(e||M([d]),c)}}if(j===h-1){return e}}return[]},is:function(a){var c=this.operations,d=false,e=c.length,h,j;if(e===0){return true}for(j=0;j<e;j++){h=c[j];d=this._is(a,h);if(d){return d}}return false},_is:function(a,o){var d=o.length,n=[a],m,j,l,e,h,c,p;for(j=d-1;j>=0;--j){m=o[j];e=m.mode;if(e){if(e==="^"){n=M(n," ")}else{if(e===">"){c=[];for(l=0,d=n.length;l<d;++l){p=n[l].getRefOwner();if(p){c.push(p)}}n=c}else{n=F(n)}}if(n.length===0){return false}}else{n=w(n,m);if(n.length===0){return false}}}return true},getMatches:function(a,d){var e=d.length,c;for(c=0;c<e;++c){a=w(a,d[c]);if(a.length===0){break}}return a},isMultiMatch:function(){return this.operations.length>1}});Ext.apply(this,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(c,h){var m=Ext.ComponentQuery,l=0,j=c.length,a=[],d=-1,e;for(;l<j;++l){e=c[l];if(!m.is(e,h)){a[++d]=e}}return a},first:function(a){var c=[];if(a.length>0){c.push(a[0])}return c},last:function(a){var d=a.length,c=[];if(d>0){c.push(a[d-1])}return c},focusable:function(d){var e=d.length,a=[],c=0,h;for(;c<e;c++){h=d[c];if(h.isFocusable()){a.push(h)}}return a},"nth-child":function(d,c){var a=[],m=B.exec(c=="even"&&"2n"||c=="odd"&&"2n+1"||!H.test(c)&&"n+"+c||c),e=(m[1]||1)-0,j=m[2]-0,h,n,l;for(h=0;n=d[h];h++){l=h+1;if(e==1){if(j==0||l==j){a.push(n)}}else{if((l+j)%e==0){a.push(n)}}}return a}},query:function(n,c){if(!n){return Ext.ComponentManager.all.getArray()}var l=[],a=[],e={},h=this.cache.get(n),j,d,m;if(!h){h=this.cache.add(n,this.parse(n))}l=h.execute(c);if(h.isMultiMatch()){j=l.length;for(m=0;m<j;m++){d=l[m];if(!e[d.id]){a.push(d);e[d.id]=true}}l=a}return l},visitPreOrder:function(e,c,h,a,d){this._visit(true,e,c,h,a,d)},visitPostOrder:function(e,c,h,a,d){this._visit(false,e,c,h,a,d)},_visit:function(q,n,s,a,p,h){var c=this,d=c.cache.get(n),j=[s],o,e=0,l,m;if(!d){d=c.cache.add(n,c.parse(n))}m=d.is(s);if(s.getRefItems){o=s.getRefItems();e=o.length}if(h){Ext.Array.push(j,h)}if(q){if(m){if(a.apply(p||s,j)===false){return false}}}for(l=0;l<e;l++){if(c._visit.call(c,q,n,o[l],a,p,h)===false){return false}}if(!q){if(m){if(a.apply(p||s,j)===false){return false}}}},is:function(c,d){if(!d){return true}var a=this.cache.get(d);if(!a){a=this.cache.add(d,this.parse(d))}return a.is(c)},parse:function(d){var c=[],j,h,a,e;j=Ext.splitAndUnescape(d,",");for(a=0,e=j.length;a<e;a++){h=Ext.String.trim(j[a]);c.push(this._parse(h))}return new G.Query({operations:c})},_parse:function(e){var p=[],j=Ext.String.trim,n=J.length,t,d,h,s,o,m,l,c,a,q,N;while(e&&t!==e){t=e;d=e.match(v);if(d){s=d[1];h=j(d[2]).replace(A,"$1");if(s==="#"){p.push({method:E,args:[h]})}else{p.push({method:I,args:[h,Boolean(d[3])]})}e=e.replace(d[0],"").replace(z,"$1")}while(!(o=e.match(C))){for(c=0;e&&c<n;c++){a=J[c];m=e.match(a.re);q=a.method;l=a.argTransform;if(m){if(l){N=l(m)}else{N=m.slice(1)}p.push({method:Ext.isString(a.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[q].concat(m.slice(1)))):a.method,args:N});e=e.replace(m[0],"").replace(z,"$1");break}if(c===(n-1)){Ext.Error.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(o[1]){p.push({mode:o[2]||o[1]});e=e.replace(o[0],"").replace(z,"")}}return p}})}));(Ext.cmd.derive("Ext.util.ProtoElement",Ext.Base,(function(){var c=Ext.String.splitWords,d=Ext.Array.toMap;return{isProtoEl:true,clsProp:"cls",styleProp:"style",removedProp:"removed",styleIsText:false,constructor:function(e){var a=this;Ext.apply(a,e);a.classList=c(a.cls);a.classMap=d(a.classList);delete a.cls;if(Ext.isFunction(a.style)){a.styleFn=a.style;delete a.style}else{if(typeof a.style=="string"){a.style=Ext.Element.parseStyles(a.style)}else{if(a.style){a.style=Ext.apply({},a.style)}}}},flush:function(){this.flushClassList=[];this.removedClasses={};delete this.style;delete this.unselectableAttr},addCls:function(a){var p=this,o=(typeof a==="string")?c(a):a,v=o.length,s=p.classList,w=p.classMap,u=p.flushClassList,t=0,q;for(;t<v;++t){q=o[t];if(!w[q]){w[q]=true;s.push(q);if(u){u.push(q);delete p.removedClasses[q]}}}return p},hasCls:function(a){return a in this.classMap},removeCls:function(a){var p=this,s=p.classList,w=(p.classList=[]),u=d(c(a)),x=s.length,y=p.classMap,t=p.removedClasses,v,q;for(v=0;v<x;++v){q=s[v];if(u[q]){if(t){if(y[q]){t[q]=true;Ext.Array.remove(p.flushClassList,q)}}delete y[q]}else{w.push(q)}}return p},setStyle:function(a,h){var j=this,l=j.style||(j.style={});if(typeof a=="string"){if(arguments.length===1){j.setStyle(Ext.Element.parseStyles(a))}else{l[a]=h}}else{Ext.apply(l,a)}return j},unselectable:function(){this.addCls(Ext.dom.Element.unselectableCls);if(Ext.isOpera){this.unselectableAttr=true}},writeTo:function(a){var l=this,j=l.flushClassList||l.classList,m=l.removedClasses,n;if(l.styleFn){n=Ext.apply({},l.styleFn());Ext.apply(n,l.style)}else{n=l.style}a[l.clsProp]=j.join(" ");if(n){a[l.styleProp]=l.styleIsText?Ext.DomHelper.generateStyles(n,null,true):n}if(m){m=Ext.Object.getKeys(m);if(m.length){a[l.removedProp]=m.join(" ")}}if(l.unselectableAttr){a.unselectable="on"}return a}}}()),1,0,0,0,0,0,[Ext.util,"ProtoElement"],0));(Ext.cmd.derive("Ext.PluginManager",Ext.AbstractManager,{alternateClassName:"Ext.PluginMgr",singleton:true,typeName:"ptype",create:function(e,j,l){var h;if(e.init){h=e}else{if(l){e=Ext.apply({},e);e.cmp=l}else{l=e.cmp}if(e.xclass){h=Ext.create(e)}else{h=Ext.ClassManager.getByAlias(("plugin."+(e.ptype||j)));if(typeof h==="function"){h=new h(e)}}}if(h&&l&&h.setCmp&&!h.setCmpCalled){h.setCmp(l);h.setCmpCalled=true}return h},findByType:function(o,l){var m=[],h=this.types,j,n;for(j in h){if(!h.hasOwnProperty(j)){continue}n=h[j];if(n.type==o&&(!l||(l===true&&n.isDefault))){m.push(n)}}return m}},0,0,0,0,0,0,[Ext,"PluginManager",Ext,"PluginMgr"],function(){Ext.preg=function(){return Ext.PluginManager.registerType.apply(Ext.PluginManager,arguments)}}));(Ext.cmd.derive("Ext.util.Filter",Ext.Base,{id:null,anyMatch:false,exactMatch:false,caseSensitive:false,disabled:false,operator:null,statics:{createFilterFn:function(c){return c&&c.length?function(j){var l=true,h=c.length,a,m;for(a=0;l&&a<h;a++){m=c[a];if(!m.disabled){l=l&&m.filterFn.call(m.scope||m,j)}}return l}:function(){return true}}},operatorFns:{"<":function(c){return Ext.coerce(this.getRoot(c)[this.property],this.value)<this.value},"<=":function(c){return Ext.coerce(this.getRoot(c)[this.property],this.value)<=this.value},"=":function(c){return Ext.coerce(this.getRoot(c)[this.property],this.value)==this.value},">=":function(c){return Ext.coerce(this.getRoot(c)[this.property],this.value)>=this.value},">":function(c){return Ext.coerce(this.getRoot(c)[this.property],this.value)>this.value},"!=":function(c){return Ext.coerce(this.getRoot(c)[this.property],this.value)!=this.value}},constructor:function(d){var c=this;c.initialConfig=d;Ext.apply(c,d);c.filter=c.filter||c.filterFn;if(c.filter===undefined){c.setValue(d.value)}},setValue:function(c){var d=this;d.value=c;if(d.property===undefined||d.value===undefined){}else{d.filter=d.createFilterFn()}d.filterFn=d.filter},setFilterFn:function(c){this.filterFn=this.filter=c},createFilterFn:function(){var e=this,h=e.createValueMatcher(),d=e.property;if(e.operator){return e.operatorFns[e.operator]}else{return function(c){var a=e.getRoot(c)[d];return h===null?a===null:h.test(a)}}},getRoot:function(c){var d=this.root;return d===undefined?c:c[d]},createValueMatcher:function(){var n=this,m=n.value,l=n.anyMatch,o=n.exactMatch,j=n.caseSensitive,h=Ext.String.escapeRegex;if(m===null){return m}if(!m.exec){m=String(m);if(l===true){m=h(m)}else{m="^"+h(m);if(o===true){m+="$"}}m=new RegExp(m,j?"":"i")}return m},serialize:function(){var c=this,d=Ext.apply({},c.initialConfig);d.value=c.value;return d}},1,0,0,0,0,0,[Ext.util,"Filter"],function(){this.prototype.operatorFns["=="]=this.prototype.operatorFns["="]}));(Ext.cmd.derive("Ext.util.AbstractMixedCollection",Ext.Base,{isMixedCollection:true,generation:0,indexGeneration:0,constructor:function(d,e){var h=this;if(arguments.length===1&&Ext.isObject(d)){h.initialConfig=d;Ext.apply(h,d)}else{h.allowFunctions=d===true;if(e){h.getKey=e}h.initialConfig={allowFunctions:h.allowFunctions,getKey:h.getKey}}h.items=[];h.map={};h.keys=[];h.indexMap={};h.length=0;h.mixins.observable.constructor.call(h)},allowFunctions:false,add:function(l,j){var h=this.length,e;if(arguments.length===1){e=this.insert(h,l)}else{e=this.insert(h,l,j)}return e},getKey:function(c){return c.id},replace:function(n,l){var m=this,j,h;if(arguments.length==1){l=arguments[0];n=m.getKey(l)}j=m.map[n];if(typeof n=="undefined"||n===null||typeof j=="undefined"){return m.add(n,l)}m.generation++;h=m.indexOfKey(n);m.items[h]=l;m.map[n]=l;if(m.hasListeners.replace){m.fireEvent("replace",n,j,l)}return l},updateKey:function(n,m){var p=this,o=p.map,l=p.indexOfKey(n),q=p.indexMap,j;if(l>-1){j=o[n];delete o[n];delete q[n];o[m]=j;q[m]=l;p.keys[l]=m;p.indexGeneration=++p.generation}},addAll:function(h){var d=this,e;if(arguments.length>1||Ext.isArray(h)){d.insert(d.length,arguments.length>1?arguments:h)}else{for(e in h){if(h.hasOwnProperty(e)){if(d.allowFunctions||typeof h[e]!="function"){d.add(e,h[e])}}}}},each:function(m,n){var h=Ext.Array.push([],this.items),o=0,j=h.length,l;for(;o<j;o++){l=h[o];if(m.call(n||l,l,o,j)===false){break}}},eachKey:function(m,n){var l=this.keys,h=this.items,o=0,j=l.length;for(;o<j;o++){m.call(n||window,l[o],h[o],o,j)}},findBy:function(m,n){var l=this.keys,h=this.items,o=0,j=h.length;for(;o<j;o++){if(m.call(n||window,h[o],l[o])){return h[o]}}return null},find:function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead.")}return this.findBy.apply(this,arguments)},insert:function(e,l,j){var h;if(Ext.isIterable(l)){h=this.doInsert(e,l,j)}else{if(arguments.length>2){h=this.doInsert(e,[l],[j])}else{h=this.doInsert(e,[l])}h=h[0]}return h},doInsert:function(z,u,v){var x=this,F,E,B,y=u.length,G=y,C=x.hasListeners.add,D,A={},w,s,t;if(v!=null){x.useLinearSearch=true}else{v=u;u=new Array(y);for(B=0;B<y;B++){u[B]=this.getKey(v[B])}}x.suspendEvents();for(B=0;B<y;B++){F=u[B];E=x.indexOfKey(F);if(E!==-1){if(E<z){z--}x.removeAt(E)}if(F!=null){if(A[F]!=null){w=true;G--}A[F]=B}}x.resumeEvents();if(w){s=u;t=v;u=new Array(G);v=new Array(G);B=0;for(F in A){u[B]=s[A[F]];v[B]=t[A[F]];B++}y=G}D=z===x.length&&x.indexGeneration===x.generation;Ext.Array.insert(x.items,z,v);Ext.Array.insert(x.keys,z,u);x.length+=y;x.generation++;if(D){x.indexGeneration=x.generation}for(B=0;B<y;B++,z++){F=u[B];if(F!=null){x.map[F]=v[B];if(D){x.indexMap[F]=z}}if(C){x.fireEvent("add",z,v[B],F)}}return v},remove:function(j){var l=this,e,h;if(!l.useLinearSearch&&(e=l.getKey(j))){h=l.indexOfKey(e)}else{h=Ext.Array.indexOf(l.items,j)}return(h===-1)?false:l.removeAt(h)},removeAll:function(e){var h=this,d;if(e||h.hasListeners.remove){if(e){for(d=e.length-1;d>=0;--d){h.remove(e[d])}}else{while(h.length){h.removeAt(0)}}}else{h.length=h.items.length=h.keys.length=0;h.map={};h.indexMap={};h.generation++;h.indexGeneration=h.generation}},removeAt:function(h){var l=this,j,e;if(h<l.length&&h>=0){l.length--;j=l.items[h];Ext.Array.erase(l.items,h,1);e=l.keys[h];if(typeof e!="undefined"){delete l.map[e]}Ext.Array.erase(l.keys,h,1);if(l.hasListeners.remove){l.fireEvent("remove",j,e)}l.generation++;return j}return false},removeRange:function(n,u){var m=this,t,l,o,p,s,q;if(n<m.length&&n>=0){if(!u){u=1}p=Math.min(n+u,m.length);u=p-n;q=p===m.length;s=q&&m.indexGeneration===m.generation;for(o=n;o<p;o++){l=m.keys[o];if(l!=null){delete m.map[l];if(s){delete m.indexMap[l]}}}t=m.items[o-1];m.length-=u;m.generation++;if(s){m.indexGeneration=m.generation}if(q){m.items.length=m.keys.length=m.length}else{m.items.splice(n,u);m.keys.splice(n,u)}return t}return false},removeAtKey:function(e){var j=this,l=j.keys,h;if(e==null){for(h=l.length-1;h>=0;h--){if(l[h]==null){j.removeAt(h)}}}else{return j.removeAt(j.indexOfKey(e))}},getCount:function(){return this.length},indexOf:function(h){var d=this,e;if(h!=null){if(!d.useLinearSearch&&(e=d.getKey(h))){return this.indexOfKey(e)}return Ext.Array.indexOf(d.items,h)}return -1},indexOfKey:function(c){if(!this.map.hasOwnProperty(c)){return -1}if(this.indexGeneration!==this.generation){this.rebuildIndexMap()}return this.indexMap[c]},rebuildIndexMap:function(){var l=this,m=l.indexMap={},n=l.keys,j=n.length,h;for(h=0;h<j;h++){m[n[h]]=h}l.indexGeneration=l.generation},get:function(e){var j=this,h=j.map[e],l=h!==undefined?h:(typeof e=="number")?j.items[e]:undefined;return typeof l!="function"||j.allowFunctions?l:null},getAt:function(c){return this.items[c]},getByKey:function(c){return this.map[c]},contains:function(h){var d=this,e;if(h!=null){if(!d.useLinearSearch&&(e=d.getKey(h))){return this.map[e]!=null}return Ext.Array.indexOf(this.items,h)!==-1}return false},containsKey:function(c){return this.map.hasOwnProperty(c)},clear:function(){var c=this;if(c.generation){c.length=0;c.items=[];c.keys=[];c.map={};c.indexMap={};c.generation++;c.indexGeneration=c.generation}if(c.hasListeners.clear){c.fireEvent("clear")}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(o,l,n,m){var t=this.extractValues(o,l),p=t.length,q=0,s;n=n||0;m=(m||m===0)?m:p-1;for(s=n;s<=m;s++){q+=t[s]}return q},collect:function(n,s,p){var m=this.extractValues(n,s),w=m.length,v={},u=[],o,q,t;for(t=0;t<w;t++){o=m[t];q=String(o);if((p||!Ext.isEmpty(o))&&!v[q]){v[q]=true;u.push(o)}}return u},extractValues:function(h,e){var d=this.items;if(e){d=Ext.Array.pluck(d,e)}return Ext.Array.pluck(d,h)},hasRange:function(c,d){return(d<this.length)},getRange:function(n,l){var o=this,s=o.items,t=[],m=s.length,p,q;if(m<1){return t}if(n>l){q=true;p=n;n=l;l=p}if(n<0){n=0}if(l==null||l>=m){l=m-1}t=s.slice(n,l+1);if(q&&t.length){t.reverse()}return t},filter:function(m,n,l,j){var h=[];if(Ext.isString(m)){h.push(new Ext.util.Filter({property:m,value:n,anyMatch:l,caseSensitive:j}))}else{if(Ext.isArray(m)||m instanceof Ext.util.Filter){h=h.concat(m)}}return this.filterBy(Ext.util.Filter.createFilterFn(h))},filterBy:function(q,s){var n=this,m=new n.self(n.initialConfig),o=n.keys,l=n.items,p=l.length,t;m.getKey=n.getKey;for(t=0;t<p;t++){if(q.call(s||n,l[t],o[t])){m.add(o[t],l[t])}}m.useLinearSearch=n.useLinearSearch;return m},findIndex:function(n,h,l,m,j){if(Ext.isEmpty(h,false)){return -1}h=this.createValueMatcher(h,m,j);return this.findIndexBy(function(a){return a&&h.test(a[n])},null,l)},findIndexBy:function(q,s,n){var o=this,p=o.keys,l=o.items,t=n||0,m=l.length;for(;t<m;t++){if(q.call(s||o,l[t],p[t])){return t}}return -1},createValueMatcher:function(n,l,j,h){if(!n.exec){var m=Ext.String.escapeRegex;n=String(n);if(l===true){n=m(n)}else{n="^"+m(n);if(h===true){n+="$"}}n=new RegExp(n,j?"":"i")}return n},clone:function(){var d=this,c=new d.self(d.initialConfig);c.add(d.keys,d.items);c.useLinearSearch=d.useLinearSearch;return c}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"AbstractMixedCollection"],0));(Ext.cmd.derive("Ext.util.Sorter",Ext.Base,{direction:"ASC",constructor:function(d){var c=this;Ext.apply(c,d);if(c.direction){c.direction=c.direction.toUpperCase()}c.updateSortFunction()},createSortFunction:function(e){var l=this,j=l.direction||"ASC",h=j=="DESC"?-1:1;return function(a,c){return h*e.call(l,a,c)}},defaultSorterFn:function(n,o){var h=this,j=h.transform,l=h.getRoot(n)[h.property],m=h.getRoot(o)[h.property];if(j){l=j(l);m=j(m)}return l>m?1:(l<m?-1:0)},getRoot:function(c){return this.root===undefined?c:c[this.root]},setDirection:function(c){var d=this;d.direction=c?c.toUpperCase():c;d.updateSortFunction()},toggle:function(){var c=this;c.direction=Ext.String.toggle(c.direction,"ASC","DESC");c.updateSortFunction()},updateSortFunction:function(d){var c=this;d=d||c.sorterFn||c.defaultSorterFn;c.sort=c.createSortFunction(d)},serialize:function(){return{root:this.root,property:this.property,direction:this.direction}}},1,0,0,0,0,0,[Ext.util,"Sorter"],0));(Ext.cmd.derive("Ext.util.Sortable",Ext.Base,{isSortable:true,defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(c){return c&&c.length?function(l,m){var a=c[0].sort(l,m),h=c.length,j=1;for(;!a&&j<h;j++){a=c[j].sort.call(this,l,m)}return a}:function(){return 0}}},initSortable:function(){var d=this,c=d.sorters;d.sorters=new Ext.util.AbstractMixedCollection(false,function(a){return a.id||a.property});if(c){d.sorters.addAll(d.decodeSorters(c))}},sort:function(n,o,l,p){var j=this,m,q;if(Ext.isArray(n)){p=l;l=o}else{if(Ext.isObject(n)){n=[n];p=l;l=o}else{if(Ext.isString(n)){m=j.sorters.get(n);if(!m){m={property:n,direction:o}}else{if(o==null){m.toggle()}else{m.setDirection(o)}}n=[m]}}}if(n&&n.length){n=j.decodeSorters(n);switch(l){case"multi":j.sorters.insert(0,n[0]);q=j.sorters.getCount()-j.multiSortLimit;if(q>0){j.sorters.removeRange(j.multiSortLimit,q)}break;case"prepend":j.sorters.insert(0,n);break;case"append":j.sorters.addAll(n);break;case undefined:case null:case"replace":j.sorters.clear();j.sorters.addAll(n);break;default:}}if(p!==false){j.fireEvent("beforesort",j,n);j.onBeforeSort(n);if(j.getSorterCount()){j.doSort(j.generateComparator())}}return n},getSorterCount:function(){return this.sorters.items.length},generateComparator:function(){var c=this.sorters.getRange();return c.length?this.createComparator(c):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(n){if(!Ext.isArray(n)){if(n===undefined){n=[]}else{n=[n]}}var p=n.length,m=Ext.util.Sorter,l=this.model?this.model.prototype.fields:null,o,j,q;for(q=0;q<p;q++){j=n[q];if(!(j instanceof m)){if(Ext.isString(j)){j={property:j}}Ext.applyIf(j,{root:this.sortRoot,direction:"ASC"});if(j.fn){j.sorterFn=j.fn}if(typeof j=="function"){j={sorterFn:j}}if(l&&!j.transform){o=l.get(j.property);j.transform=o&&o.sortType!==Ext.identityFn?o.sortType:undefined}n[q]=new Ext.util.Sorter(j)}}return n},getSorters:function(){return this.sorters.items},getFirstSorter:function(){var l=this.sorters.items,h=l.length,e=0,j;for(;e<h;++e){j=l[e];if(!j.isGrouper){return j}}return null}},0,0,0,0,0,0,[Ext.util,"Sortable"],function(){this.prototype.createComparator=this.createComparator}));(Ext.cmd.derive("Ext.util.MixedCollection",Ext.util.AbstractMixedCollection,{constructor:function(){var c=this;c.callParent(arguments);c.addEvents("sort");c.mixins.sortable.initSortable.call(c)},doSort:function(c){this.sortBy(c)},_sort:function(o,x,p){var q=this,v,u,w=String(x).toUpperCase()=="DESC"?-1:1,s=[],c=q.keys,t=q.items,y;p=p||function(a,d){return a-d};for(v=0,u=t.length;v<u;v++){s[s.length]={key:c[v],value:t[v],index:v}}Ext.Array.sort(s,function(a,d){return p(a[o],d[o])*w||(a.index<d.index?-1:1)});for(v=0,u=s.length;v<u;v++){y=s[v];t[v]=y.value;c[v]=y.key;q.indexMap[y.key]=v}q.generation++;q.indexGeneration=q.generation;q.fireEvent("sort",q)},sortBy:function(l){var n=this,m=n.items,o,p=n.keys,s,q=m.length,t;for(t=0;t<q;t++){m[t].$extCollectionIndex=t}Ext.Array.sort(m,function(a,c){return l(a,c)||(a.$extCollectionIndex<c.$extCollectionIndex?-1:1)});for(t=0;t<q;t++){o=m[t];s=n.getKey(o);p[t]=s;n.indexMap[s]=t;delete m.$extCollectionIndex}n.generation++;n.indexGeneration=n.generation;n.fireEvent("sort",n,m,p)},findInsertionIndex:function(q,s){var p=this,l=p.items,n=0,m=l.length-1,t,o;if(!s){s=p.generateComparator()}while(n<=m){t=(n+m)>>1;o=s(q,l[t]);if(o>=0){n=t+1}else{if(o<0){m=t-1}}}return n},reorder:function(s){var o=this,l=o.items,t=0,p=l.length,m=[],q=[],n;o.suspendEvents();for(n in s){m[s[n]]=l[n]}for(t=0;t<p;t++){if(s[t]==undefined){q.push(l[t])}}for(t=0;t<p;t++){if(m[t]==undefined){m[t]=q.shift()}}o.clear();o.addAll(m);o.resumeEvents();o.fireEvent("sort",o)},sortByKey:function(d,c){this._sort("key",d,c||function(j,l){var a=String(j).toUpperCase(),h=String(l).toUpperCase();return a>h?1:(a<h?-1:0)})}},1,0,0,0,0,[["sortable",Ext.util.Sortable]],[Ext.util,"MixedCollection"],0));(Ext.cmd.derive("Ext.fx.target.Target",Ext.Base,{isAnimTarget:true,constructor:function(c){this.target=c;this.id=this.getId()},getId:function(){return this.target.id},remove:function(){Ext.destroy(this.target)}},1,0,0,0,0,0,[Ext.fx.target,"Target"],0));(Ext.cmd.derive("Ext.fx.target.Element",Ext.fx.target.Target,{type:"element",getElVal:function(d,e,h){if(h==undefined){if(e==="x"){h=d.getX()}else{if(e==="y"){h=d.getY()}else{if(e==="scrollTop"){h=d.getScroll().top}else{if(e==="scrollLeft"){h=d.getScroll().left}else{if(e==="height"){h=d.getHeight()}else{if(e==="width"){h=d.getWidth()}else{h=d.getStyle(e)}}}}}}}return h},getAttr:function(e,h){var d=this.target;return[[d,this.getElVal(d,e,h)]]},setAttr:function(m){var p=this.target,n=m.length,j,o,t,q,s,u;for(q=0;q<n;q++){j=m[q].attrs;for(o in j){if(j.hasOwnProperty(o)){u=j[o].length;for(s=0;s<u;s++){t=j[o][s];this.setElVal(t[0],o,t[1])}}}}},setElVal:function(d,e,h){if(e==="x"){d.setX(h)}else{if(e==="y"){d.setY(h)}else{if(e==="scrollTop"){d.scrollTo("top",h)}else{if(e==="scrollLeft"){d.scrollTo("left",h)}else{if(e==="width"){d.setWidth(h)}else{if(e==="height"){d.setHeight(h)}else{d.setStyle(e,h)}}}}}}}},0,0,0,0,0,0,[Ext.fx.target,"Element"],0));(Ext.cmd.derive("Ext.fx.target.ElementCSS",Ext.fx.target.Element,{setAttr:function(s,y){var j={attrs:[],duration:[],easing:[]},t=s.length,x,o,v,u,A,B,w,z,C;for(w=0;w<t;w++){o=s[w];A=o.duration;u=o.easing;o=o.attrs;for(v in o){if(Ext.Array.indexOf(j.attrs,v)==-1){j.attrs.push(v.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}));j.duration.push(A+"ms");j.easing.push(u)}}}x=j.attrs.join(",");A=j.duration.join(",");u=j.easing.join(", ");for(w=0;w<t;w++){o=s[w].attrs;for(v in o){C=o[v].length;for(z=0;z<C;z++){B=o[v][z];B[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",y?"":x);B[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",y?"":A);B[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",y?"":u);B[0].setStyle(v,B[1]);if(y){B=B[0].dom.offsetWidth}else{B[0].on(Ext.supports.CSS3TransitionEnd,function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null);this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},B[0],{single:true})}}}}}},0,0,0,0,0,0,[Ext.fx.target,"ElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElement",Ext.fx.target.Element,{isComposite:true,constructor:function(c){c.id=c.id||Ext.id(null,"ext-composite-");this.callParent([c])},getAttr:function(m,n){var l=[],o=this.target,p=o.elements,q=p.length,t,s;for(t=0;t<q;t++){s=p[t];if(s){s=o.getElement(s);l.push([s,this.getElVal(s,m,n)])}}return l},setAttr:function(t){var v=this.target,u=t.length,B=v.elements,j=B.length,s,z,o,w,A,x,y,C;for(x=0;x<u;x++){o=t[x].attrs;for(w in o){if(o.hasOwnProperty(w)){C=o[w].length;for(y=0;y<C;y++){s=o[w][y][1];for(z=0;z<j;++z){el=B[z];if(el){el=v.getElement(el);this.setElVal(el,w,s)}}}}}}},remove:function(){this.target.remove()}},1,0,0,0,0,0,[Ext.fx.target,"CompositeElement"],0));(Ext.cmd.derive("Ext.fx.target.CompositeElementCSS",Ext.fx.target.CompositeElement,{setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}},0,0,0,0,0,0,[Ext.fx.target,"CompositeElementCSS"],0));(Ext.cmd.derive("Ext.fx.target.Sprite",Ext.fx.target.Target,{type:"draw",getFromPrim:function(d,e){var h;switch(e){case"rotate":case"rotation":h=d.attr.rotation;return{x:h.x||0,y:h.y||0,degrees:h.degrees||0};case"scale":case"scaling":h=d.attr.scaling;return{x:h.x||1,y:h.y||1,cx:h.cx||0,cy:h.cy||0};case"translate":case"translation":h=d.attr.translation;return{x:h.x||0,y:h.y||0};default:return d.attr[e]}},getAttr:function(d,c){return[[this.target,c!=undefined?c:this.getFromPrim(this.target,d)]]},setAttr:function(w){var A=w.length,y=[],E,B,t,j,s,u,v,C,D,x,z,F;for(C=0;C<A;C++){E=w[C].attrs;for(B in E){t=E[B];F=t.length;for(D=0;D<F;D++){s=t[D][0];j=t[D][1];if(B==="translate"||B==="translation"){v={x:j.x,y:j.y}}else{if(B==="rotate"||B==="rotation"){x=j.x;if(isNaN(x)){x=null}z=j.y;if(isNaN(z)){z=null}v={degrees:j.degrees,x:x,y:z}}else{if(B==="scale"||B==="scaling"){x=j.x;if(isNaN(x)){x=null}z=j.y;if(isNaN(z)){z=null}v={x:x,y:z,cx:j.cx,cy:j.cy}}else{if(B==="width"||B==="height"||B==="x"||B==="y"){v=parseFloat(j)}else{v=j}}}}u=Ext.Array.indexOf(y,s);if(u==-1){y.push([s,{}]);u=y.length-1}y[u][1][B]=v}}}A=y.length;for(C=0;C<A;C++){y[C][0].setAttributes(y[C][1])}this.target.redraw()}},0,0,0,0,0,0,[Ext.fx.target,"Sprite"],0));(Ext.cmd.derive("Ext.fx.target.CompositeSprite",Ext.fx.target.Sprite,{getAttr:function(l,m){var j=[],n=[].concat(this.target.items),o=n.length,p,q;for(p=0;p<o;p++){q=n[p];j.push([q,m!=undefined?m:this.getFromPrim(q,l)])}return j}},0,0,0,0,0,0,[Ext.fx.target,"CompositeSprite"],0));(Ext.cmd.derive("Ext.fx.target.Component",Ext.fx.target.Target,{type:"component",getPropMethod:{top:function(){return this.getPosition(true)[1]},left:function(){return this.getPosition(true)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},setMethods:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(d,c){return[[this.target,c!==undefined?c:this.getPropMethod[d].call(this.target)]]},setAttr:function(J,A,E){var j=this,o=J.length,G,w,D,z,B,x,C,h,H,y,F={},I;for(z=0;z<o;z++){G=J[z].attrs;for(w in G){x=G[w].length;for(B=0;B<x;B++){D=G[w][B];I=F[j.setMethods[w]]||(F[j.setMethods[w]]={});I.target=D[0];I[w]=D[1]}}if(F.setPosition){D=F.setPosition;C=(D.left===undefined)?undefined:parseFloat(D.left);h=(D.top===undefined)?undefined:parseFloat(D.top);D.target.setPosition(C,h)}if(F.setPagePosition){D=F.setPagePosition;D.target.setPagePosition(D.x,D.y)}if(F.setSize){D=F.setSize;H=(D.width===undefined)?D.target.getWidth():parseFloat(D.width);y=(D.height===undefined)?D.target.getHeight():parseFloat(D.height);D.target.el.setSize(H,y);if(E||j.dynamic){Ext.globalEvents.on({idle:Ext.Function.bind(D.target.setSize,D.target,[H,y]),single:true})}}if(F.setOpacity){D=F.setOpacity;D.target.el.setStyle("opacity",D.opacity)}}}},0,0,0,0,0,0,[Ext.fx.target,"Component"],0));(Ext.cmd.derive("Ext.fx.Queue",Ext.Base,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(d){var c=this.targets.get(d);if(c){return c.fxDefaults}return{}},setFxDefaults:function(e,h){var d=this.targets.get(e);if(d){d.fxDefaults=Ext.apply(d.fxDefaults||{},h)}},stopAnimation:function(e){var j=this,h=j.getFxQueue(e),l=h.length;while(l){h[l-1].end();l--}},getActiveAnimation:function(c){var d=this.getFxQueue(c);return(d&&!!d.length)?d[0]:false},hasFxBlock:function(c){var d=this.getFxQueue(c);return d&&d[0]&&d[0].block},getFxQueue:function(e){if(!e){return false}var l=this,h=l.fxQueue[e],j=l.targets.get(e);if(!j){return false}if(!h){l.fxQueue[e]=[];if(j.type!="element"){j.target.on("destroy",function(){l.fxQueue[e]=[]})}}return l.fxQueue[e]},queueFx:function(m){var n=this,l=m.target,j,h;if(!l){return}j=n.getFxQueue(l.getId());h=j.length;if(h){if(m.concurrent){m.paused=false}else{j[h-1].on("afteranimate",function(){m.paused=false})}}else{m.paused=false}m.on("afteranimate",function(){Ext.Array.remove(j,m);if(j.length===0){n.targets.remove(m.target)}if(m.remove){if(l.type=="element"){var a=Ext.get(l.id);if(a){a.remove()}}}},n,{single:true});j.push(m)}},1,0,0,0,0,0,[Ext.fx,"Queue"],0));(Ext.cmd.derive("Ext.fx.Manager",Ext.Base,{singleton:true,constructor:function(){var c=this;c.items=new Ext.util.MixedCollection();c.targetArr={};c.mixins.queue.constructor.call(c);c.taskRunner=new Ext.util.TaskRunner()},interval:16,forceJS:true,createTarget:function(j){var e=this,l=!e.forceJS&&Ext.supports.Transitions,h;e.useCSS3=l;if(j){if(j.tagName||Ext.isString(j)||j.isFly){j=Ext.get(j);h=new Ext.fx.target["Element"+(l?"CSS":"")](j)}else{if(j.dom){h=new Ext.fx.target["Element"+(l?"CSS":"")](j)}else{if(j.isComposite){h=new Ext.fx.target["CompositeElement"+(l?"CSS":"")](j)}else{if(j.isSprite){h=new Ext.fx.target.Sprite(j)}else{if(j.isCompositeSprite){h=new Ext.fx.target.CompositeSprite(j)}else{if(j.isComponent){h=new Ext.fx.target.Component(j)}else{if(j.isAnimTarget){return j}else{return null}}}}}}}e.targets.add(h);return h}else{return null}},addAnim:function(j){var l=this,e=l.items,h=l.task;e.add(j.id,j);if(!h&&e.length){h=l.task={run:l.runner,interval:l.interval,scope:l};l.taskRunner.start(h)}},removeAnim:function(j){var l=this,e=l.items,h=l.task;e.removeAtKey(j.id);if(h&&!e.length){l.taskRunner.stop(h);delete l.task}},runner:function(){var m=this,h=m.items.getRange(),n=0,j=h.length,l;m.targetArr={};m.timestamp=new Date();for(;n<j;n++){l=h[n];if(l.isReady()){m.startAnim(l)}}for(n=0;n<j;n++){l=h[n];if(l.isRunning()){m.runAnim(l)}}m.applyPendingAttrs()},startAnim:function(c){c.start(this.timestamp)},runAnim:function(q,m){if(!q){return}var s=this,o=s.useCSS3&&q.target.type=="element",l=s.timestamp-q.startTime,t=(l>=q.duration),p,n;if(m){l=q.duration;t=true}p=this.collectTargetData(q,l,o,t);if(o){q.target.setAttr(p.anims[q.id].attributes,true);s.collectTargetData(q,q.duration,o,t);q.paused=true;p=q.target.target;if(q.target.isComposite){p=q.target.target.last()}n={};n[Ext.supports.CSS3TransitionEnd]=q.lastFrame;n.scope=q;n.single=true;p.on(n)}return p},jumpToEnd:function(d){var c=this.runAnim(d,true);this.applyAnimAttrs(c,c.anims[d.id])},collectTargetData:function(o,j,m,l){var h=o.target.getId(),n=this.targetArr[h];if(!n){n=this.targetArr[h]={id:h,el:o.target,anims:{}}}n.anims[o.id]={id:o.id,anim:o,elapsed:j,isLastFrame:l,attributes:[{duration:o.duration,easing:(m&&o.reverse)?o.easingFn.reverse().toCSS3():o.easing,attrs:o.runAnim(j)}]};return n},applyAnimAttrs:function(h,e){var d=e.anim;if(e.attributes&&d.isRunning()){h.el.setAttr(e.attributes,false,e.isLastFrame);if(e.isLastFrame){d.lastFrame()}}},applyPendingAttrs:function(){var m=this.targetArr,l,o,h,n,j;for(o in m){if(m.hasOwnProperty(o)){l=m[o];for(j in l.anims){if(l.anims.hasOwnProperty(j)){h=l.anims[j];n=h.anim;if(h.attributes&&n.isRunning()){l.el.setAttr(h.attributes,false,h.isLastFrame);if(h.isLastFrame){n.lastFrame()}}}}}}}},1,0,0,0,0,[["queue",Ext.fx.Queue]],[Ext.fx,"Manager"],0));(Ext.cmd.derive("Ext.fx.Animator",Ext.Base,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(d){var c=this;d=Ext.apply(c,d||{});c.config=d;c.id=Ext.id(null,"ext-animator-");c.addEvents("beforeanimate","keyframe","afteranimate");c.mixins.observable.constructor.call(c,d);c.timeline=[];c.createTimeline(c.keyframes);if(c.target){c.applyAnimator(c.target);Ext.fx.Manager.addAnim(c)}},sorter:function(a,e){return a.pct-e.pct},createTimeline:function(v){var s=this,o=[],q=s.to||{},x=s.duration,n,y,w,t,p,u;for(p in v){if(v.hasOwnProperty(p)&&s.animKeyFramesRE.test(p)){u={attrs:Ext.apply(v[p],q)};if(p=="from"){p=0}else{if(p=="to"){p=100}}u.pct=parseInt(p,10);o.push(u)}}Ext.Array.sort(o,s.sorter);t=o.length;for(w=0;w<t;w++){n=(o[w-1])?x*(o[w-1].pct/100):0;y=x*(o[w].pct/100);s.timeline.push({duration:y-n,attrs:o[w].attrs})}},applyAnimator:function(t){var p=this,o=[],m=p.timeline,q=m.length,v,s,w,n,u;if(p.fireEvent("beforeanimate",p)!==false){for(u=0;u<q;u++){v=m[u];n=v.attrs;s=n.easing||p.easing;w=n.damper||p.damper;delete n.easing;delete n.damper;v=new Ext.fx.Anim({target:t,easing:s,damper:w,duration:v.duration,paused:true,to:n});o.push(v)}p.animations=o;p.target=v.target;for(u=0;u<q-1;u++){v=o[u];v.nextAnim=o[u+1];v.on("afteranimate",function(){this.nextAnim.paused=false});v.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},p)}o[q-1].on("afteranimate",function(){this.lastFrame()},p)}},start:function(m){var l=this,n=l.delay,h=l.delayStart,j;if(n){if(!h){l.delayStart=m;return}else{j=m-h;if(j<n){return}else{m=new Date(h.getTime()+n)}}}if(l.fireEvent("beforeanimate",l)!==false){l.startTime=m;l.running=true;l.animations[l.keyframeStep].paused=false}},lastFrame:function(){var h=this,e=h.iterations,d=h.currentIteration;d++;if(d<e){h.startTime=new Date();h.currentIteration=d;h.keyframeStep=0;h.applyAnimator(h.target);h.animations[h.keyframeStep].paused=false}else{h.currentIteration=0;h.end()}},end:function(){var c=this;c.fireEvent("afteranimate",c,c.startTime,new Date()-c.startTime)},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Animator"],0));(Ext.cmd.derive("Ext.fx.CubicBezier",Ext.Base,{singleton:true,cubicBezierAtTime:function(t,D,F,u,v,z){var y=3*D,w=3*(u-D)-y,G=1-y-w,A=3*F,x=3*(v-F)-A,s=1-A-x;function B(a){return((G*a+w)*a+y)*a}function E(d,a){var c=C(d,a);return((s*c+x)*c+A)*c}function C(j,l){var m,a,d,h,c,e;for(d=j,e=0;e<8;e++){h=B(d)-j;if(Math.abs(h)<l){return d}c=(3*G*d+2*w)*d+y;if(Math.abs(c)<0.000001){break}d=d-h/c}m=0;a=1;d=j;if(d<m){return m}if(d>a){return a}while(m<a){h=B(d);if(Math.abs(h-j)<l){return d}if(j>h){m=d}else{a=d}d=(a-m)/2+m}return d}return E(t,1/(200*z))},cubicBezier:function(h,l,j,n){var m=function(a){return Ext.fx.CubicBezier.cubicBezierAtTime(a,h,l,j,n,1)};m.toCSS3=function(){return"cubic-bezier("+[h,l,j,n].join(",")+")"};m.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-j,1-n,1-h,1-l)};return m}},0,0,0,0,0,0,[Ext.fx,"CubicBezier"],0));Ext.require("Ext.fx.CubicBezier",function(){var o=Math,m=o.PI,p=o.pow,j=o.sin,n=o.sqrt,l=o.abs,q=1.70158;(Ext.cmd.derive("Ext.fx.Easing",Ext.Base,{singleton:true,linear:Ext.identityFn,ease:function(e){var v=0.07813-e/2,d=-0.25,c=n(0.0066+v*v),x=c-v,h=p(l(x),1/3)*(x<0?-1:1),a=-c-v,t=p(l(a),1/3)*(a<0?-1:1),w=h+t+0.25;return p(1-w,2)*3*w*0.1+(1-w)*3*w*w+w*w*w},easeIn:function(a){return p(a,1.7)},easeOut:function(a){return p(a,0.48)},easeInOut:function(h){var a=0.48-h/1.04,c=n(0.1734+a*a),e=c-a,t=p(l(e),1/3)*(e<0?-1:1),u=-c-a,v=p(l(u),1/3)*(u<0?-1:1),d=t+v+0.5;return(1-d)*3*d*d+d*d*d},backIn:function(a){return a*a*((q+1)*a-q)},backOut:function(a){a=a-1;return a*a*((q+1)*a+q)+1},elasticIn:function(a){if(a===0||a===1){return a}var c=0.3,d=c/4;return p(2,-10*a)*j((a-d)*(2*m)/c)+1},elasticOut:function(a){return 1-Ext.fx.Easing.elasticIn(1-a)},bounceIn:function(a){return 1-Ext.fx.Easing.bounceOut(1-a)},bounceOut:function(e){var c=7.5625,a=2.75,d;if(e<(1/a)){d=c*e*e}else{if(e<(2/a)){e-=(1.5/a);d=c*e*e+0.75}else{if(e<(2.5/a)){e-=(2.25/a);d=c*e*e+0.9375}else{e-=(2.625/a);d=c*e*e+0.984375}}}return d}},0,0,0,0,0,0,[Ext.fx,"Easing"],function(){var a=Ext.fx.Easing.self,c=a.prototype;a.implement({"back-in":c.backIn,"back-out":c.backOut,"ease-in":c.easeIn,"ease-out":c.easeOut,"elastic-in":c.elasticIn,"elastic-out":c.elasticOut,"bounce-in":c.bounceIn,"bounce-out":c.bounceOut,"ease-in-out":c.easeInOut})}))});(Ext.cmd.derive("Ext.draw.Color",Ext.Base,{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:0.2,constructor:function(m,n,j){var h=this,l=Ext.Number.constrain;h.r=l(m,0,255);h.g=l(n,0,255);h.b=l(j,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var c=this;return[c.r,c.g,c.b]},getHSL:function(){var t=this,y=t.r/255,u=t.g/255,s=t.b/255,q=Math.max(y,u,s),w=Math.min(y,u,s),l=q-w,v,h=0,x=0.5*(q+w);if(w!=q){h=(x<0.5)?l/(q+w):l/(2-q-w);if(y==q){v=60*(u-s)/l}else{if(u==q){v=120+60*(s-y)/l}else{v=240+60*(y-u)/l}}if(v<0){v+=360}if(v>=360){v-=360}}return[v,h,x]},getLighter:function(c){var d=this.getHSL();c=c||this.lightnessFactor;d[2]=Ext.Number.constrain(d[2]+c,0,1);return this.fromHSL(d[0],d[1],d[2])},getDarker:function(c){c=c||this.lightnessFactor;return this.getLighter(-c)},toString:function(){var l=this,o=Math.round,m=o(l.r).toString(16),n=o(l.g).toString(16),j=o(l.b).toString(16);m=(m.length==1)?"0"+m:m;n=(n.length==1)?"0"+n:n;j=(j.length==1)?"0"+j:j;return["#",m,n,j].join("")},toHex:function(h){if(Ext.isArray(h)){h=h[0]}if(!Ext.isString(h)){return""}if(h.substr(0,1)==="#"){return h}var m=this.colorToHexRe.exec(h),l,n,j,o;if(Ext.isArray(m)){l=parseInt(m[2],10);n=parseInt(m[3],10);j=parseInt(m[4],10);o=j|(n<<8)|(l<<16);return m[1]+"#"+("000000"+o.toString(16)).slice(-6)}else{return h}},fromString:function(n){var u,p,q,m,o=parseInt,s=n.substr(0,1),t;if(s!="#"){t=Ext.draw.Color.cssColors[n];if(t){n=t;s=n.substr(0,1)}}if((n.length==4||n.length==7)&&s==="#"){u=n.match(this.hexRe);if(u){p=o(u[1],16)>>0;q=o(u[2],16)>>0;m=o(u[3],16)>>0;if(n.length==4){p+=(p*16);q+=(q*16);m+=(m*16)}}}else{u=n.match(this.rgbRe);if(u){p=u[1];q=u[2];m=u[3]}}return(typeof p=="undefined")?undefined:new Ext.draw.Color(p,q,m)},getGrayscale:function(){return this.r*0.3+this.g*0.59+this.b*0.11},fromHSL:function(q,h,t){var w,v,u,s,m=[],l=Math.abs,p=Math.floor;if(h==0||q==null){m=[t,t,t]}else{q/=60;w=h*(1-l(2*t-1));v=w*(1-l(q-2*p(q/2)-1));u=t-w/2;switch(p(q)){case 0:m=[w,v,0];break;case 1:m=[v,w,0];break;case 2:m=[0,w,v];break;case 3:m=[0,v,w];break;case 4:m=[v,0,w];break;case 5:m=[w,0,v];break}m=[m[0]+u,m[1]+u,m[2]+u]}return new Ext.draw.Color(m[0]*255,m[1]*255,m[2]*255)}},3,0,0,0,0,0,[Ext.draw,"Color"],function(){var c=this.prototype;this.addStatics({fromHSL:function(){return c.fromHSL.apply(c,arguments)},fromString:function(){return c.fromString.apply(c,arguments)},toHex:function(){return c.toHex.apply(c,arguments)},cssColors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}})}));(Ext.cmd.derive("Ext.draw.Draw",Ext.Base,{singleton:true,pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,availableAnimAttrs:{along:"along",blur:null,"clip-rect":"csv",cx:null,cy:null,fill:"color","fill-opacity":null,"font-size":null,height:null,opacity:null,path:"path",r:null,rotation:"csv",rx:null,ry:null,scale:"csv",stroke:"color","stroke-opacity":null,"stroke-width":null,translation:"csv",width:null,x:null,y:null},is:function(c,d){d=String(d).toLowerCase();return(d=="object"&&c===Object(c))||(d=="undefined"&&typeof c==d)||(d=="null"&&c===null)||(d=="array"&&Array.isArray&&Array.isArray(c))||(Object.prototype.toString.call(c).toLowerCase().slice(8,-1))==d},ellipsePath:function(c){var d=c.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",d.x,d.y-d.ry,d.rx,d.ry,d.y+d.ry)},rectPath:function(c){var d=c.attr;if(d.radius){return Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",d.x+d.radius,d.y,d.width-d.radius*2,d.radius,-d.radius,d.height-d.radius*2,d.radius*2-d.width,d.radius*2-d.height)}else{return Ext.String.format("M{0},{1}L{2},{1},{2},{3},{0},{3}z",d.x,d.y,d.width+d.x,d.height+d.y)}},path2string:function(){return this.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},pathToString:function(c){return c.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(h){if(!h){return null}var j={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},l=[],e=this;if(e.is(h,"array")&&e.is(h[0],"array")){l=e.pathClone(h)}if(!l.length){String(h).replace(e.pathCommandRE,function(m,n,a){var c=[],d=n.toLowerCase();a.replace(e.pathValuesRE,function(o,p){p&&c.push(+p)});if(d=="m"&&c.length>2){l.push([n].concat(Ext.Array.splice(c,0,2)));d="l";n=(n=="m")?"l":"L"}while(c.length>=j[d]){l.push([n].concat(Ext.Array.splice(c,0,j[d])));if(!j[d]){break}}})}l.toString=e.path2string;return l},mapPath:function(j,o){if(!o){return j}var n,p,s,m,u,q,t;j=this.path2curve(j);for(s=0,m=j.length;s<m;s++){t=j[s];for(u=1,q=t.length;u<q-1;u+=2){n=o.x(t[u],t[u+1]);p=o.y(t[u],t[u+1]);t[u]=n;t[u+1]=p}}return j},pathClone:function(l){var o=[],j,m,h,n;if(!this.is(l,"array")||!this.is(l&&l[0],"array")){l=this.parsePathString(l)}for(h=0,n=l.length;h<n;h++){o[h]=[];for(j=0,m=l[h].length;j<m;j++){o[h][j]=l[h][j]}}o.toString=this.path2string;return o},pathToAbsolute:function(y){if(!this.is(y,"array")||!this.is(y&&y[0],"array")){y=this.parsePathString(y)}var t=[],q=0,s=0,j=0,p=0,v=0,u=y.length,z,x,w,A;if(u&&y[0][0]=="M"){q=+y[0][1];s=+y[0][2];j=q;p=s;v++;t[0]=["M",q,s]}for(;v<u;v++){z=t[v]=[];x=y[v];if(x[0]!=x[0].toUpperCase()){z[0]=x[0].toUpperCase();switch(z[0]){case"A":z[1]=x[1];z[2]=x[2];z[3]=x[3];z[4]=x[4];z[5]=x[5];z[6]=+(x[6]+q);z[7]=+(x[7]+s);break;case"V":z[1]=+x[1]+s;break;case"H":z[1]=+x[1]+q;break;case"M":j=+x[1]+q;p=+x[2]+s;default:w=1;A=x.length;for(;w<A;w++){z[w]=+x[w]+((w%2)?q:s)}}}else{w=0;A=x.length;for(;w<A;w++){t[v][w]=x[w]}}switch(z[0]){case"Z":q=j;s=p;break;case"H":q=z[1];break;case"V":s=z[1];break;case"M":x=t[v];A=x.length;j=x[A-2];p=x[A-1];default:x=t[v];A=x.length;q=x[A-2];s=x[A-1]}}t.toString=this.path2string;return t},pathToRelative:function(D){if(!this.is(D,"array")||!this.is(D&&D[0],"array")){D=this.parsePathString(D)}var x=[],v=0,w=0,I=0,J=0,E=0,G,j,A,B,C,y,H,z,F;if(D[0][0]=="M"){v=D[0][1];w=D[0][2];I=v;J=w;E++;x.push(["M",v,w])}for(A=E,H=D.length;A<H;A++){G=x[A]=[];j=D[A];if(j[0]!=j[0].toLowerCase()){G[0]=j[0].toLowerCase();switch(G[0]){case"a":G[1]=j[1];G[2]=j[2];G[3]=j[3];G[4]=j[4];G[5]=j[5];G[6]=+(j[6]-v).toFixed(3);G[7]=+(j[7]-w).toFixed(3);break;case"v":G[1]=+(j[1]-w).toFixed(3);break;case"m":I=j[1];J=j[2];default:for(B=1,z=j.length;B<z;B++){G[B]=+(j[B]-((B%2)?v:w)).toFixed(3)}}}else{G=x[A]=[];if(j[0]=="m"){I=j[1]+v;J=j[2]+w}for(C=0,F=j.length;C<F;C++){x[A][C]=j[C]}}y=x[A].length;switch(x[A][0]){case"z":v=I;w=J;break;case"h":v+=+x[A][y-1];break;case"v":w+=+x[A][y-1];break;default:v+=+x[A][y-2];w+=+x[A][y-1]}}x.toString=this.path2string;return x},path2curve:function(l){var q=this,n=q.pathToAbsolute(l),s=n.length,m={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},t,u,o,p;for(t=0;t<s;t++){n[t]=q.command2curve(n[t],m);if(n[t].length>7){n[t].shift();p=n[t];while(p.length){Ext.Array.splice(n,t++,0,["C"].concat(Ext.Array.splice(p,0,6)))}Ext.Array.erase(n,t,1);s=n.length;t--}u=n[t];o=u.length;m.x=u[o-2];m.y=u[o-1];m.bx=parseFloat(u[o-4])||m.x;m.by=parseFloat(u[o-3])||m.y}return n},interpolatePaths:function(p,w){var y=this,C=y.pathToAbsolute(p),v=y.pathToAbsolute(w),u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},F={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},E=function(d,c){if(d[c].length>7){d[c].shift();var a=d[c];while(a.length){Ext.Array.splice(d,c++,0,["C"].concat(Ext.Array.splice(a,0,6)))}Ext.Array.erase(d,c,1);t=Math.max(C.length,v.length||0)}},D=function(a,c,e,h,d){if(a&&c&&a[d][0]=="M"&&c[d][0]!="M"){Ext.Array.splice(c,d,0,["M",h.x,h.y]);e.bx=0;e.by=0;e.x=a[d][1];e.y=a[d][2];t=Math.max(C.length,v.length||0)}},z,t,A,s,B,x;for(z=0,t=Math.max(C.length,v.length||0);z<t;z++){C[z]=y.command2curve(C[z],u);E(C,z);(v[z]=y.command2curve(v[z],F));E(v,z);D(C,v,u,F,z);D(v,C,F,u,z);A=C[z];s=v[z];B=A.length;x=s.length;u.x=A[B-2];u.y=A[B-1];u.bx=parseFloat(A[B-4])||u.x;u.by=parseFloat(A[B-3])||u.y;F.bx=(parseFloat(s[x-4])||F.x);F.by=(parseFloat(s[x-3])||F.y);F.x=s[x-2];F.y=s[x-1]}return[C,v]},command2curve:function(h,d){var e=this;if(!h){return["C",d.x,d.y,d.x,d.y,d.x,d.y]}if(h[0]!="T"&&h[0]!="Q"){d.qx=d.qy=null}switch(h[0]){case"M":d.X=h[1];d.Y=h[2];break;case"A":h=["C"].concat(e.arc2curve.apply(e,[d.x,d.y].concat(h.slice(1))));break;case"S":h=["C",d.x+(d.x-(d.bx||d.x)),d.y+(d.y-(d.by||d.y))].concat(h.slice(1));break;case"T":d.qx=d.x+(d.x-(d.qx||d.x));d.qy=d.y+(d.y-(d.qy||d.y));h=["C"].concat(e.quadratic2curve(d.x,d.y,d.qx,d.qy,h[1],h[2]));break;case"Q":d.qx=h[1];d.qy=h[2];h=["C"].concat(e.quadratic2curve(d.x,d.y,h[1],h[2],h[3],h[4]));break;case"L":h=["C"].concat(d.x,d.y,h[1],h[2],h[1],h[2]);break;case"H":h=["C"].concat(d.x,d.y,h[1],d.y,h[1],d.y);break;case"V":h=["C"].concat(d.x,d.y,d.x,h[1],d.x,h[1]);break;case"Z":h=["C"].concat(d.x,d.y,d.X,d.Y,d.X,d.Y);break}return h},quadratic2curve:function(l,s,o,q,m,t){var p=1/3,n=2/3;return[p*l+n*o,p*s+n*q,p*m+n*o,p*t+n*q,m,t]},rotate:function(j,m,l){var p=Math.cos(l),q=Math.sin(l),n=j*p-m*q,o=j*q+m*p;return{x:n,y:o}},arc2curve:function(aN,ay,av,ax,aJ,aS,aW,aO,aB,aH){var aL=this,aY=Math.PI,aK=aL.radian,az=aY*120/180,a0=aK*(+aJ||0),ap=[],at=Math,ai=at.cos,a1=at.sin,ag=at.sqrt,aM=at.abs,aR=at.asin,au,an,ao,aI,aZ,ak,ah,aD,aF,aT,aU,aP,aV,aC,aX,aE,am,aj,al,aG,h,t,y,aq,x,ar,aA,aw,aQ;if(!aH){au=aL.rotate(aN,ay,-a0);aN=au.x;ay=au.y;au=aL.rotate(aO,aB,-a0);aO=au.x;aB=au.y;an=(aN-aO)/2;ao=(ay-aB)/2;aI=(an*an)/(av*av)+(ao*ao)/(ax*ax);if(aI>1){aI=ag(aI);av=aI*av;ax=aI*ax}aZ=av*av;ak=ax*ax;ah=(aS==aW?-1:1)*ag(aM((aZ*ak-aZ*ao*ao-ak*an*an)/(aZ*ao*ao+ak*an*an)));aD=ah*av*ao/ax+(aN+aO)/2;aF=ah*-ax*an/av+(ay+aB)/2;aT=aR(((ay-aF)/ax).toFixed(7));aU=aR(((aB-aF)/ax).toFixed(7));aT=aN<aD?aY-aT:aT;aU=aO<aD?aY-aU:aU;if(aT<0){aT=aY*2+aT}if(aU<0){aU=aY*2+aU}if(aW&&aT>aU){aT=aT-aY*2}if(!aW&&aU>aT){aU=aU-aY*2}}else{aT=aH[0];aU=aH[1];aD=aH[2];aF=aH[3]}aP=aU-aT;if(aM(aP)>az){aA=aU;aw=aO;aQ=aB;aU=aT+az*(aW&&aU>aT?1:-1);aO=aD+av*ai(aU);aB=aF+ax*a1(aU);ap=aL.arc2curve(aO,aB,av,ax,aJ,0,aW,aw,aQ,[aU,aA,aD,aF])}aP=aU-aT;aV=ai(aT);aC=a1(aT);aX=ai(aU);aE=a1(aU);am=at.tan(aP/4);aj=4/3*av*am;al=4/3*ax*am;aG=[aN,ay];h=[aN+aj*aC,ay-al*aV];t=[aO+aj*aE,aB-al*aX];y=[aO,aB];h[0]=2*aG[0]-h[0];h[1]=2*aG[1]-h[1];if(aH){return[h,t,y].concat(ap)}else{ap=[h,t,y].concat(ap).join().split(",");aq=[];ar=ap.length;for(x=0;x<ar;x++){aq[x]=x%2?aL.rotate(ap[x-1],ap[x],a0).y:aL.rotate(ap[x],ap[x+1],a0).x}return aq}},rotateAndTranslatePath:function(t){var y=t.rotation.degrees,x=t.rotation.x,z=t.rotation.y,j=t.translation.x,s=t.translation.y,p,v,A,q,w,u=[];if(!y&&!j&&!s){return this.pathToAbsolute(t.attr.path)}j=j||0;s=s||0;p=this.pathToAbsolute(t.attr.path);for(v=p.length;v--;){A=u[v]=p[v].slice();if(A[0]=="A"){q=this.rotatePoint(A[6],A[7],y,x,z);A[6]=q.x+j;A[7]=q.y+s}else{w=1;while(A[w+1]!=null){q=this.rotatePoint(A[w],A[w+1],y,x,z);A[w]=q.x+j;A[w+1]=q.y+s;w+=2}}}return u},rotatePoint:function(j,m,o,l,n){if(!o){return{x:j,y:m}}l=l||0;n=n||0;j=j-l;m=m-n;o=o*this.radian;var p=Math.cos(o),q=Math.sin(o);return{x:j*p-m*q+l,y:j*q+m*p+n}},pathDimensions:function(p){if(!p||!(p+"")){return{x:0,y:0,width:0,height:0}}p=this.path2curve(p);var s=0,t=0,y=[],B=[],w=0,u=p.length,A,C,q,x,z,v;for(;w<u;w++){A=p[w];if(A[0]=="M"){s=A[1];t=A[2];y.push(s);B.push(t)}else{v=this.curveDim(s,t,A[1],A[2],A[3],A[4],A[5],A[6]);y=y.concat(v.min.x,v.max.x);B=B.concat(v.min.y,v.max.y);s=A[5];t=A[6]}}C=Math.min.apply(0,y);q=Math.min.apply(0,B);x=Math.max.apply(0,y);z=Math.max.apply(0,B);return{x:Math.round(C),y:Math.round(q),path:p,width:Math.round(x-C),height:Math.round(z-q)}},intersectInside:function(d,h,e){return(e[0]-h[0])*(d[1]-h[1])>(e[1]-h[1])*(d[0]-h[0])},intersectIntersection:function(e,p,w,x){var y=[],z=w[0]-x[0],A=w[1]-x[1],s=e[0]-p[0],u=e[1]-p[1],q=w[0]*x[1]-w[1]*x[0],t=e[0]*p[1]-e[1]*p[0],v=1/(z*u-A*s);y[0]=(q*s-t*z)*v;y[1]=(q*u-t*A)*v;return y},intersect:function(s,A){var t=this,w=0,u=A.length,x=A[u-1],j=s,y,e,v,C,B,z;for(;w<u;++w){y=A[w];B=j;j=[];e=B[B.length-1];z=0;C=B.length;for(;z<C;z++){v=B[z];if(t.intersectInside(v,x,y)){if(!t.intersectInside(e,x,y)){j.push(t.intersectIntersection(e,v,x,y))}j.push(v)}else{if(t.intersectInside(e,x,y)){j.push(t.intersectIntersection(e,v,x,y))}}e=v}x=y}return j},bezier:function(p,q,t,a,s){if(s===0){return p}else{if(s===1){return a}}var d=1-s,o=d*d*d,c=s/d;return o*(p+c*(3*q+c*(3*t+a*c)))},bezierDim:function(H,a,s,x){var F=[],C,A,c,B,G,D,E,z,d,y;if(H+3*s==x+3*a){C=H-a;C/=2*(H-a-a+s);if(C<1&&C>0){F.push(C)}}else{A=H-3*a+3*s-x;c=2*(H-a-a+s);B=H-a;G=c*c-4*A*B;D=A+A;if(G===0){C=c/D;if(C<1&&C>0){F.push(C)}}else{if(G>0){E=Math.sqrt(G);C=(E+c)/D;if(C<1&&C>0){F.push(C)}C=(c-E)/D;if(C<1&&C>0){F.push(C)}}}}z=Math.min(H,x);d=Math.max(H,x);for(y=0;y<F.length;y++){z=Math.min(z,this.bezier(H,a,s,x,F[y]));d=Math.max(d,this.bezier(H,a,s,x,F[y]))}return[z,d]},curveDim:function(v,w,t,u,m,n,p,s){var o=this.bezierDim(v,t,m,p),q=this.bezierDim(w,u,n,s);return{min:{x:o[0],y:q[0]},max:{x:o[1],y:q[1]}}},getAnchors:function(S,T,N,O,B,C,G){G=G||4;var P=Math,H=P.PI,F=H/2,K=P.abs,W=P.sin,V=P.cos,R=P.atan,D,E,Q,M,I,J,z,A,U;D=(N-S)/G;E=(B-N)/G;if((O>=T&&O>=C)||(O<=T&&O<=C)){Q=M=F}else{Q=R((N-S)/K(O-T));if(T<O){Q=H-Q}M=R((B-N)/K(O-C));if(C<O){M=H-M}}U=F-((Q+M)%(H*2))/2;if(U>F){U-=H}Q+=U;M+=U;I=N-D*W(Q);J=O+D*V(Q);z=N+E*W(M);A=O+E*V(M);if((O>T&&J<T)||(O<T&&J>T)){I+=K(T-J)*(I-N)/(J-O);J=T}if((O>C&&A<C)||(O<C&&A>C)){z-=K(C-A)*(z-N)/(A-O);A=C}return{x1:I,y1:J,x2:z,y2:A}},smooth:function(Q,D){var E=this.path2curve(Q),O=[E[0]],K=E[0][1],M=E[0][2],C,A,z=1,J=E.length,N=1,H=K,I=M,j,x,y,G,B,F,P;for(;z<J;z++){j=E[z];x=j.length;y=E[z-1];G=y.length;B=E[z+1];F=B&&B.length;if(j[0]=="M"){H=j[1];I=j[2];C=z+1;while(E[C][0]!="C"){C++}O.push(["M",H,I]);N=O.length;K=H;M=I;continue}if(j[x-2]==H&&j[x-1]==I&&(!B||B[0]=="M")){P=O[N].length;A=this.getAnchors(y[G-2],y[G-1],H,I,O[N][P-2],O[N][P-1],D);O[N][1]=A.x2;O[N][2]=A.y2}else{if(!B||B[0]=="M"){A={x1:j[x-2],y1:j[x-1]}}else{A=this.getAnchors(y[G-2],y[G-1],j[x-2],j[x-1],B[F-2],B[F-1],D)}}O.push(["C",K,M,A.x1,A.y1,j[x-2],j[x-1]]);K=A.x2;M=A.y2}return O},findDotAtSegment:function(v,w,t,u,n,o,p,q,m){var s=1-m;return{x:Math.pow(s,3)*v+Math.pow(s,2)*3*m*t+s*3*m*m*n+Math.pow(m,3)*p,y:Math.pow(s,3)*w+Math.pow(s,2)*3*m*u+s*3*m*m*o+Math.pow(m,3)*q}},snapEnds:function(A,J,D,m){if(Ext.isDate(A)){return this.snapEndsByDate(A,J,D)}var H=(J-A)/D,K=Math.floor(Math.log(H)/Math.LN10)+1,B=Math.pow(10,K),I,y,x=Math.round((H%B)*Math.pow(10,2-K)),w=[[0,15],[10,1],[20,4],[25,2],[50,9],[100,15]],M=0,C,E,z,F,v=1000000000,G=w.length;y=Math.floor(A/B)*B;if(A==y&&y>0){y=Math.floor((A-(B/10))/B)*B}if(m){for(z=0;z<G;z++){C=w[z][0];E=(C-x)<0?1000000:(C-x)/w[z][1];if(E<v){F=C;v=E}}H=Math.floor(H*Math.pow(10,-K))*Math.pow(10,K)+F*Math.pow(10,K-2);if(A<0&&J>=0){I=0;while(I>A){I-=H;M++}A=+I.toFixed(10);I=0;while(I<J){I+=H;M++}J=+I.toFixed(10)}else{I=A=y;while(I<J){I+=H;M++}}J=+I.toFixed(10)}else{A=y;M=D}return{from:A,to:J,power:K,step:H,steps:M}},snapEndsByDate:function(s,q,z,p){var w=false,u=[[Ext.Date.MILLI,[1,2,5,10,20,50,100,200,250,500]],[Ext.Date.SECOND,[1,2,5,10,15,30]],[Ext.Date.MINUTE,[1,2,5,10,15,30]],[Ext.Date.HOUR,[1,2,3,4,6,12]],[Ext.Date.DAY,[1,2,7,14]],[Ext.Date.MONTH,[1,2,3,6]]],v=u.length,t=false,y,x,A,j;for(j=0;j<v;j++){y=u[j];if(!t){for(x=0;x<y[1].length;x++){if(q<Ext.Date.add(s,y[0],y[1][x]*z)){w=[y[0],y[1][x]];t=true;break}}}}if(!w){A=this.snapEnds(s.getFullYear(),q.getFullYear()+1,z,p);w=[Date.YEAR,Math.round(A.step)]}return this.snapEndsByDateAndStep(s,q,w,p)},snapEndsByDateAndStep:function(w,v,H,t){var u=[w.getFullYear(),w.getMonth(),w.getDate(),w.getHours(),w.getMinutes(),w.getSeconds(),w.getMilliseconds()],F,s,G,z,D,x,E,A,B=H[0],C=H[1],y=0;if(t){F=w}else{switch(B){case Ext.Date.MILLI:F=new Date(u[0],u[1],u[2],u[3],u[4],u[5],Math.floor(u[6]/C)*C);break;case Ext.Date.SECOND:F=new Date(u[0],u[1],u[2],u[3],u[4],Math.floor(u[5]/C)*C,0);break;case Ext.Date.MINUTE:F=new Date(u[0],u[1],u[2],u[3],Math.floor(u[4]/C)*C,0,0);break;case Ext.Date.HOUR:F=new Date(u[0],u[1],u[2],Math.floor(u[3]/C)*C,0,0,0);break;case Ext.Date.DAY:F=new Date(u[0],u[1],Math.floor((u[2]-1)/C)*C+1,0,0,0,0);break;case Ext.Date.MONTH:F=new Date(u[0],Math.floor(u[1]/C)*C,1,0,0,0,0);y=[];A=true;break;default:F=new Date(Math.floor(u[0]/C)*C,0,1,0,0,0,0);y=[];A=true;break}}E=((B===Ext.Date.MONTH)&&(C==1/2||C==1/3||C==1/4));s=new Date(F);while(s<v){if(E){G=new Date(s);z=G.getFullYear();D=G.getMonth();x=G.getDate();switch(C){case 1/2:if(x>=15){x=1;if(++D>11){z++}}else{x=15}break;case 1/3:if(x>=20){x=1;if(++D>11){z++}}else{if(x>=10){x=20}else{x=10}}break;case 1/4:if(x>=22){x=1;if(++D>11){z++}}else{if(x>=15){x=22}else{if(x>=8){x=15}else{x=8}}}break}s.setYear(z);s.setMonth(D);s.setDate(x);y.push(new Date(s))}else{if(A){s=Ext.Date.add(s,B,C);y.push(new Date(s))}else{s=Ext.Date.add(s,B,C);y++}}}if(t){s=v}if(A){return{from:+F,to:+s,steps:y}}else{return{from:+F,to:+s,step:(s-F)/y,steps:y}}},sorter:function(a,e){return a.offset-e.offset},rad:function(c){return c%360*Math.PI/180},normalizeRadians:function(c){var d=2*Math.PI;if(c>=0){return c%d}return((c%d)+d)%d},degrees:function(c){return c*180/Math.PI%360},normalizeDegrees:function(c){if(c>=0){return c%360}return((c%360)+360)%360},withinBox:function(e,h,d){d=d||{};return(e>=d.x&&e<=(d.x+d.width)&&h>=d.y&&h<=(d.y+d.height))},parseGradient:function(o){var u=this,t=o.type||"linear",w=o.angle||0,q=u.radian,n=o.stops,y=[],p,x,s,v;if(t=="linear"){x=[0,0,Math.cos(w*q),Math.sin(w*q)];s=1/(Math.max(Math.abs(x[2]),Math.abs(x[3]))||1);x[2]*=s;x[3]*=s;if(x[2]<0){x[0]=-x[2];x[2]=0}if(x[3]<0){x[1]=-x[3];x[3]=0}}for(p in n){if(n.hasOwnProperty(p)&&u.stopsRE.test(p)){v={offset:parseInt(p,10),color:Ext.draw.Color.toHex(n[p].color)||"#ffffff",opacity:n[p].opacity||1};y.push(v)}}Ext.Array.sort(y,u.sorter);if(t=="linear"){return{id:o.id,type:t,vector:x,stops:y}}else{return{id:o.id,type:t,centerX:o.centerX,centerY:o.centerY,focalX:o.focalX,focalY:o.focalY,radius:o.radius,vector:x,stops:y}}}},0,0,0,0,0,0,[Ext.draw,"Draw"],0));(Ext.cmd.derive("Ext.fx.PropertyHandler",Ext.Base,{statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(l,s,u,o,m){u=(typeof u=="number")?u:1;var n=this.unitRE,q=n.exec(l),t,p;if(q){l=q[1];p=q[2];if(!this.scrollRE.test(m)&&!p&&this.pixelDefaultsRE.test(m)){p="px"}}l=+l||0;q=n.exec(s);if(q){s=q[1];p=q[2]||p}s=+s||0;t=(o!=null)?o:l;return{from:l,delta:(s-t)*u,units:p}},get:function(j,z,A,p,t){var q=j.length,x=[],w,u,s,y,v;for(w=0;w<q;w++){if(p){u=p[w][1].from}if(Ext.isArray(j[w][1])&&Ext.isArray(z)){s=[];y=0;v=j[w][1].length;for(;y<v;y++){s.push(this.computeDelta(j[w][1][y],z[y],A,u,t))}x.push([j[w][0],s])}else{x.push([j[w][0],this.computeDelta(j[w][1],z,A,u,t)])}}return x},set:function(j,o){var n=j.length,s=[],q,u,m,p,t;for(q=0;q<n;q++){u=j[q][1];if(Ext.isArray(u)){m=[];t=0;p=u.length;for(;t<p;t++){m.push(u[t].from+u[t].delta*o+(u[t].units||0))}s.push([j[q][0],m])}else{s.push([j[q][0],u.from+u.delta*o+(u.units||0)])}}return s}},stringHandler:{computeDelta:function(l,h,m,n,j){return{from:l,delta:h}},get:function(j,z,A,p,t){var q=j.length,x=[],w,u,s,y,v;for(w=0;w<q;w++){x.push([j[w][0],this.computeDelta(j[w][1],z,A,u,t)])}return x},set:function(j,o){var n=j.length,s=[],q,u,m,p,t;for(q=0;q<n;q++){u=j[q][1];s.push([j[q][0],u.delta])}return s}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(p,u){u=(typeof u=="number")?u:1;var o=false,s=[this.hexRE,this.rgbRE,this.hex3RE],q=s.length,m,t,l,n;for(n=0;n<q;n++){l=s[n];t=(n%2===0)?16:10;m=l.exec(p);if(m&&m.length===4){if(n===2){m[1]+=m[1];m[2]+=m[2];m[3]+=m[3]}o={red:parseInt(m[1],t),green:parseInt(m[2],t),blue:parseInt(m[3],t)};break}}return o||p},computeDelta:function(m,l,o,q){m=this.parseColor(m);l=this.parseColor(l,o);var n=q?q:m,j=typeof n,p=typeof l;if(j=="string"||j=="undefined"||p=="string"||p=="undefined"){return l||n}return{from:m,delta:{red:Math.round((l.red-n.red)*o),green:Math.round((l.green-n.green)*o),blue:Math.round((l.blue-n.blue)*o)}}},get:function(n,m,p,s){var o=n.length,t=[],q,l;for(q=0;q<o;q++){if(s){l=s[q][1].from}t.push([n[q][0],this.computeDelta(n[q][1],m,p,l)])}return t},set:function(l,p){var o=l.length,s=[],q,t,u,n,m;for(q=0;q<o;q++){t=l[q][1];if(t){n=t.from;m=t.delta;t=(typeof t=="object"&&"red" in t)?"rgb("+t.red+", "+t.green+", "+t.blue+")":t;t=(typeof t=="object"&&t.length)?t[0]:t;if(typeof t=="undefined"){return[]}u=typeof t=="string"?t:"rgb("+[(n.red+Math.round(m.red*p))%256,(n.green+Math.round(m.green*p))%256,(n.blue+Math.round(m.blue*p))%256].join(",")+")";s.push([l[q][0],u])}}return s}},object:{interpolate:function(j,e){e=(typeof e=="number")?e:1;var h={},l;for(l in j){h[l]=parseFloat(j[l])*e}return h},computeDelta:function(m,l,q,j){m=this.interpolate(m);l=this.interpolate(l,q);var n=j?j:m,o={},p;for(p in l){o[p]=l[p]-n[p]}return{from:m,delta:o}},get:function(n,m,p,s){var o=n.length,t=[],q,l;for(q=0;q<o;q++){if(s){l=s[q][1].from}t.push([n[q][0],this.computeDelta(n[q][1],m,p,l)])}return t},set:function(m,q){var p=m.length,u=[],s={},t,o,n,v,w;for(t=0;t<p;t++){v=m[t][1];o=v.from;n=v.delta;for(w in o){s[w]=o[w]+n[w]*q}u.push([m[t][0],s])}return u}},path:{computeDelta:function(l,j,n,h){n=(typeof n=="number")?n:1;var m;l=+l||0;j=+j||0;m=(h!=null)?h:l;return{from:l,delta:(j-m)*n}},forcePath:function(c){if(!Ext.isArray(c)&&!Ext.isArray(c[0])){c=Ext.draw.Draw.parsePathString(c)}return c},get:function(F,z,G,u){var E=this.forcePath(z),x=[],I=F.length,D,A,w,B,v,y,C,H,j;for(w=0;w<I;w++){j=this.forcePath(F[w][1]);B=Ext.draw.Draw.interpolatePaths(j,E);j=B[0];E=B[1];D=j.length;H=[];for(y=0;y<D;y++){B=[j[y][0]];A=j[y].length;for(C=1;C<A;C++){v=u&&u[0][1][y][C].from;B.push(this.computeDelta(j[y][C],E[y][C],G,v))}H.push(B)}x.push([F[w][0],H])}return x},set:function(j,s){var q=j.length,x=[],v,w,y,u,t,z,B,A;for(v=0;v<q;v++){z=j[v][1];u=[];B=z.length;for(w=0;w<B;w++){t=[z[w][0]];A=z[w].length;for(y=1;y<A;y++){t.push(z[w][y].from+z[w][y].delta*s)}u.push(t.join(","))}x.push([j[v][0],u.join(",")])}return x}}}},0,0,0,0,0,0,[Ext.fx,"PropertyHandler"],function(){var e=["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],l=e.length,h=0,j;for(;h<l;h++){j=e[h];this[j]=this.color}e=["cursor"];l=e.length;h=0;for(;h<l;h++){j=e[h];this[j]=this.stringHandler}}));(Ext.cmd.derive("Ext.fx.Anim",Ext.Base,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,autoEnd:false,alternate:false,currentIteration:0,startTime:0,frameCount:0,constructor:function(e){var d=this,h;e=e||{};if(e.keyframes){return new Ext.fx.Animator(e)}Ext.apply(d,e);if(d.from===undefined){d.from={}}d.propHandlers={};d.config=e;d.target=Ext.fx.Manager.createTarget(d.target);d.easingFn=Ext.fx.Easing[d.easing];d.target.dynamic=d.dynamic;if(!d.easingFn){d.easingFn=String(d.easing).match(d.bezierRE);if(d.easingFn&&d.easingFn.length==5){h=d.easingFn;d.easingFn=Ext.fx.CubicBezier.cubicBezier(+h[1],+h[2],+h[3],+h[4])}}d.id=Ext.id(null,"ext-anim-");d.addEvents("beforeanimate","afteranimate","lastframe");d.mixins.observable.constructor.call(d);Ext.fx.Manager.addAnim(d);if(e.autoEnd){d.running=true;d.jumpToEnd()}},setAttr:function(d,c){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,d,c)},initAttrs:function(){var p=this,n=p.from,m=p.to,o=p.initialFrom||{},s={},u,t,l,q;for(q in m){if(m.hasOwnProperty(q)){u=p.target.getAttr(q,n[q]);t=m[q];if(!Ext.fx.PropertyHandler[q]){if(Ext.isObject(t)){l=p.propHandlers[q]=Ext.fx.PropertyHandler.object}else{l=p.propHandlers[q]=Ext.fx.PropertyHandler.defaultHandler}}else{l=p.propHandlers[q]=Ext.fx.PropertyHandler[q]}s[q]=l.get(u,t,p.damper,o[q],q)}}p.currentAttrs=s},start:function(m){var l=this,n=l.delay,h=l.delayStart,j;if(n){if(!h){l.delayStart=m;return}else{j=m-h;if(j<n){return}else{m=new Date(h.getTime()+n)}}}if(l.fireEvent("beforeanimate",l)!==false){l.startTime=m;if(!l.paused&&!l.currentAttrs){l.initAttrs()}l.running=true;l.frameCount=0}},jumpToEnd:function(){var c=this;if(!c.endWasCalled){if(!c.currentAttrs){c.initAttrs()}Ext.fx.Manager.jumpToEnd(c);c.end()}},runAnim:function(n){var q=this,o=q.currentAttrs,v=q.duration,w=q.easingFn,x=q.propHandlers,t={},s,p,u,y;if(n>=v){n=v;y=true}if(q.reverse){n=v-n}for(u in o){if(o.hasOwnProperty(u)){p=o[u];s=y?1:w(n/v);t[u]=x[u].set(p,s)}}q.frameCount++;return t},lastFrame:function(){var h=this,e=h.iterations,d=h.currentIteration;d++;if(d<e){if(h.alternate){h.reverse=!h.reverse}h.startTime=new Date();h.currentIteration=d;h.paused=false}else{h.currentIteration=0;h.end();h.fireEvent("lastframe",h,h.startTime)}},endWasCalled:0,end:function(){var c=this;if(c.endWasCalled++){return}c.startTime=0;c.paused=false;c.running=false;Ext.fx.Manager.removeAnim(c);c.fireEvent("afteranimate",c,c.startTime);Ext.callback(c.callback,c.scope,[c,c.startTime]);if(c.remove){c.target.remove()}},isReady:function(){return this.paused===false&&this.running===false&&this.iterations>0},isRunning:function(){return this.paused===false&&this.running===true&&this.isAnimator!==true}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.fx,"Anim"],0));Ext.enableFx=true;(Ext.cmd.derive("Ext.util.Animate",Ext.Base,{isAnimate:true,animate:function(d){var c=this;if(Ext.fx.Manager.hasFxBlock(c.id)){return c}Ext.fx.Manager.queueFx(new Ext.fx.Anim(c.anim(d)));return this},anim:function(d){if(!Ext.isObject(d)){return(d)?{}:false}var c=this;if(d.stopAnimation){c.stopAnimation()}Ext.applyIf(d,Ext.fx.Manager.getFxDefaults(c.id));return Ext.apply({target:c,paused:true},d)},getAnimationProps:function(){var c=this,d=c.layout;return d&&d.animate?d.animate:{}},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){Ext.fx.Manager.stopAnimation(this.id);return this},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true});return this},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false});return this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},0,0,0,0,0,0,[Ext.util,"Animate"],function(){Ext.applyIf(Ext.Element.prototype,this.prototype);Ext.CompositeElementLite.importElementMethods()}));(Ext.cmd.derive("Ext.util.ElementContainer",Ext.Base,{childEls:[],constructor:function(){var c=this,d;if(c.hasOwnProperty("childEls")){d=c.childEls;delete c.childEls;c.addChildEls.apply(c,d)}},destroy:function(){var m=this,n=m.getChildEls(),l,j,o,h;for(o=n.length;o--;){j=n[o];if(typeof j!="string"){j=j.name}l=m[j];if(l){m[j]=null;l.remove()}}},addChildEls:function(){var c=this,d=arguments;if(c.hasOwnProperty("childEls")){c.childEls.push.apply(c.childEls,d)}else{c.childEls=c.getChildEls().concat(Array.prototype.slice.call(d))}c.prune(c.childEls,false)},applyChildEls:function(t,u){var p=this,o=p.getChildEls(),m,l,q,s,n;m=(u||p.id)+"-";for(q=o.length;q--;){l=o[q];if(typeof l=="string"){n=t.getById(m+l)}else{if((s=l.select)){n=Ext.select(s,true,t.dom)}else{if((s=l.selectNode)){n=Ext.get(Ext.DomQuery.selectNode(s,t.dom))}else{n=t.getById(l.id||(m+l.itemId))}}l=l.name}p[l]=n}},getChildEls:function(){var c=this,d;if(c.hasOwnProperty("childEls")){return c.childEls}d=c.self;return d.$childEls||c.getClassChildEls(d)},getClassChildEls:function(s){var w=this,q=s.$childEls,u,B,D,x,t,y,E,C,A,z,v;if(!q){z=s.superclass;if(z){z=z.self;C=[z.$childEls||w.getClassChildEls(z)];v=z.prototype.mixins||{}}else{C=[];v={}}A=s.prototype;y=A.mixins;for(E in y){if(y.hasOwnProperty(E)&&!v.hasOwnProperty(E)){t=y[E].self;C.push(t.$childEls||w.getClassChildEls(t))}}C.push(A.hasOwnProperty("childEls")&&A.childEls);for(B=0,D=C.length;B<D;++B){u=C[B];if(u&&u.length){if(!q){q=u}else{if(!x){x=true;q=q.slice(0)}q.push.apply(q,u)}}}s.$childEls=q=(q?w.prune(q,!x):[])}return q},prune:function(n,l){var h=n.length,m={},j;while(h--){j=n[h];if(typeof j!="string"){j=j.name}if(!m[j]){m[j]=1}else{if(l){l=false;n=n.slice(0)}Ext.Array.erase(n,h,1)}}return n},removeChildEls:function(n){var o=this,l=o.getChildEls(),p=(o.childEls=[]),m,j,q;for(j=0,m=l.length;j<m;++j){q=l[j];if(!n(q)){p.push(q)}}}},1,0,0,0,0,0,[Ext.util,"ElementContainer"],0));(Ext.cmd.derive("Ext.util.Renderable",Ext.Base,{frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR","Table"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></tpl>','<div id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}",'<table id="{fgid}Table" class="',Ext.plainTableCls,'" cellpadding="0" role="presentation">','<tbody role="presentation">','<tpl if="top">','<tr role="presentation">','<tpl if="left"><td id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>",'<tr role="presentation">','<tpl if="left"><td id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl>{frameElCls}" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">','<tr role="presentation">','<tpl if="left"><td id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl>{frameElCls}" role="presentation"></td></tpl>','<td id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl>{frameElCls}" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl>{frameElCls}" role="presentation"></td></tpl>',"</tr>","</tpl>","</tbody></table>","{%this.renderDockedItems(out,values,1);%}"],afterRender:function(){var s=this,q={},n=s.protoEl,o=s.el,t,p,m,l;s.finishRenderChildren();if(s.contentEl){p=Ext.baseCSSPrefix;m=p+"hide-";l=Ext.get(s.contentEl);l.removeCls([p+"hidden",m+"display",m+"offsets",m+"nosize"]);s.getContentTarget().appendChild(l.dom)}n.writeTo(q);t=q.removed;if(t){o.removeCls(t)}t=q.cls;if(t.length){o.addCls(t)}t=q.style;if(q.style){o.setStyle(t)}s.protoEl=null;if(!s.ownerCt){s.updateLayout()}},afterFirstLayout:function(w,o){var u=this,p=u.x,s=u.y,v,x,q,n,t=u.defaultAlign,y=u.alignOffset;if(!u.ownerLayout){v=p!==undefined;x=s!==undefined}if(u.floating&&!u.preventDefaultAlign&&(!v||!x)){if(u.floatParent){q=u.floatParent.getTargetEl().getViewRegion();n=u.el.getAlignToXY(u.alignTarget||u.floatParent.getTargetEl(),t,y);q.x=n[0]-q.x;q.y=n[1]-q.y}else{n=u.el.getAlignToXY(u.alignTarget||u.container,t,y);q=u.el.translateXY(n[0],n[1])}p=v?p:q.x;s=x?s:q.y;v=x=true}if(v||x){u.setPosition(p,s)}u.onBoxReady(w,o)},applyRenderSelectors:function(){var m=this,h=m.renderSelectors,n=m.el,l=n.dom,j;m.applyChildEls(n);if(h){for(j in h){if(h.hasOwnProperty(j)&&h[j]){m[j]=Ext.get(Ext.DomQuery.selectNode(h[j],l))}}}},beforeRender:function(){var n=this,l=n.getTargetEl(),m=n.getOverflowEl(),h=n.getComponentLayout(),j=n.getOverflowStyle();n.frame=n.frame||n.alwaysFramed;if(!h.initialized){h.initLayout()}if(m){m.setStyle(j);n.overflowStyleSet=true}n.setUI(n.ui);if(n.disabled){n.disable(true)}},doApplyRenderTpl:function(l,h){var j=h.$comp,e;if(!j.rendered){e=j.initRenderTpl();e.applyOut(h.renderData,l)}},doAutoRender:function(){var c=this;if(!c.rendered){if(c.floating){c.render(c.renderTo||document.body)}else{c.render(Ext.isBoolean(c.autoRender)?Ext.getBody():c.autoRender)}}},doRenderContent:function(e,h){var d=h.$comp;if(d.html){Ext.DomHelper.generateMarkup(d.html,e);delete d.html}if(d.tpl){if(!d.tpl.isTemplate){d.tpl=new Ext.XTemplate(d.tpl)}if(d.data){d.tpl.applyOut(d.data,e);delete d.data}}},doRenderFramingDockedItems:function(h,l,j){var e=l.$comp;if(!e.rendered&&e.doRenderDockedItems){l.renderData.$skipDockedItems=true;e.doRenderDockedItems.call(this,h,l,j)}},finishRender:function(j){var m=this,h,l,n;if(!m.el||m.$pid){if(m.container){n=m.container.getById(m.id,true)}else{n=Ext.getDom(m.id)}if(!m.el){m.wrapPrimaryEl(n)}else{delete m.$pid;if(!m.el.dom){m.wrapPrimaryEl(m.el)}n.parentNode.insertBefore(m.el.dom,n);Ext.removeNode(n)}}else{if(!m.rendering){h=m.initRenderTpl();if(h){l=m.initRenderData();h.insertFirst(m.getTargetEl(),l)}}}if(!m.container){m.container=Ext.get(m.el.dom.parentNode)}if(m.ctCls){m.container.addCls(m.ctCls)}m.onRender(m.container,j);if(!m.overflowStyleSet){m.getOverflowEl().setStyle(m.getOverflowStyle())}m.el.setVisibilityMode(Ext.Element[m.hideMode.toUpperCase()]);if(m.overCls){m.el.hover(m.addOverCls,m.removeOverCls,m)}if(m.hasListeners.render){m.fireEvent("render",m)}m.afterRender();if(m.hasListeners.afterrender){m.fireEvent("afterrender",m)}m.initEvents();if(m.hidden){m.el.hide()}},finishRenderChildren:function(){var c=this.getComponentLayout();c.finishRender()},getElConfig:function(){var q=this,o=q.autoEl,t=q.getFrameInfo(),x={tag:"div",tpl:t?q.initFramingTpl(t.table):q.initRenderTpl()},y=q.protoEl,w,u,s,n,v,p;q.initStyles(y);y.writeTo(x);y.flush();if(Ext.isString(o)){x.tag=o}else{Ext.apply(x,o)}x.id=q.id;if(x.tpl){if(t){u=q.frameElNames;s=u.length;x.tplData=p=q.getFrameRenderData();p.renderData=q.initRenderData();v=p.fgid;for(w=0;w<s;w++){n=u[w];q.addChildEls({name:"frame"+n,id:v+n})}q.addChildEls({name:"frameBody",id:v+"MC"})}else{x.tplData=q.initRenderData()}}return x},initFramingTpl:function(c){var d=this.getFrameTpl(c);if(d&&!d.applyRenderTpl){this.setupFramingTpl(d)}return d},setupFramingTpl:function(c){c.applyRenderTpl=this.doApplyRenderTpl;c.renderDockedItems=this.doRenderFramingDockedItems},getInsertPosition:function(c){if(c!==undefined){if(Ext.isNumber(c)){c=this.container.dom.childNodes[c]}else{c=Ext.getDom(c)}}return c},getRenderTree:function(){var c=this;if(!c.hasListeners.beforerender||c.fireEvent("beforerender",c)!==false){c.beforeRender();c.rendering=true;if(c.el){return{tag:"div",role:"presentation",id:(c.$pid=Ext.id())}}return c.getElConfig()}return null},initContainer:function(d){var c=this;if(!d&&c.el){d=c.el.dom.parentNode;c.allowDomMove=false}c.container=d.dom?d:Ext.get(d);return c.container},initRenderData:function(){var c=this;return Ext.apply({$comp:c,id:c.id,ui:c.ui,uiCls:c.uiCls,baseCls:c.baseCls,componentCls:c.componentCls,frame:c.frame,role:c.ariaRole,childElCls:""},c.renderData)},initRenderTpl:function(){var c=this.getTpl("renderTpl");if(c&&!c.renderContent){this.setupRenderTpl(c)}return c},onRender:function(q,p){var o=this,m=o.x,n=o.y,s=null,u,l,t=o.el;o.applyRenderSelectors();o.rendering=null;o.rendered=true;if(m!=null){s={x:m}}if(n!=null){(s=s||{}).y=n}if(!o.getFrameInfo()&&Ext.isBorderBox){u=o.width;l=o.height;if(typeof u==="number"){s=s||{};s.width=u}if(typeof l==="number"){s=s||{};s.height=l}}o.lastBox=t.lastBox=s},render:function(q,j){var o=this,p=o.el&&(o.el=Ext.get(o.el)),m,l,n;Ext.suspendLayouts();q=o.initContainer(q);n=o.getInsertPosition(j);if(!p){l=o.getRenderTree();if(o.ownerLayout&&o.ownerLayout.transformItemRenderTree){l=o.ownerLayout.transformItemRenderTree(l)}if(l){if(n){p=Ext.DomHelper.insertBefore(n,l)}else{p=Ext.DomHelper.append(q,l)}o.wrapPrimaryEl(p)}}else{if(!o.hasListeners.beforerender||o.fireEvent("beforerender",o)!==false){o.beforeRender();o.initStyles(p);if(o.allowDomMove!==false){if(n){q.dom.insertBefore(p.dom,n)}else{q.dom.appendChild(p.dom)}}}else{m=true}}if(p&&!m){o.finishRender(j)}Ext.resumeLayouts(!o.hidden&&!q.isDetachedBody)},ensureAttachedToBody:function(h){var d=this,e;while(d.ownerCt){d=d.ownerCt}if(d.container.isDetachedBody){d.container=e=Ext.getBody();e.appendChild(d.el.dom);if(h){d.updateLayout()}if(typeof d.x=="number"||typeof d.y=="number"){d.setPosition(d.x,d.y)}}},setupRenderTpl:function(c){c.renderBody=c.renderContent=this.doRenderContent},wrapPrimaryEl:function(c){this.el=Ext.get(c,true)},initFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var n=this,p=n.getFrameInfo(),u,s,q=n.frameElNames,o=q.length,t,m,l;if(p){u=n.getFrameTpl(p.table);m=n.getFrameRenderData();s=m.fgid;u.insertFirst(n.el,m);n.frameBody=n.el.down("."+n.frameCls+"-mc");n.removeChildEls(function(a){return a.id&&n.frameIdRegex.test(a.id)});for(t=0;t<o;t++){l=q[t];n["frame"+l]=n.el.getById(s+l)}}},getFrameRenderData:function(){var h=this,d=h.frameSize,e=(h.frameGenId||0)+1;h.frameGenId=e;return{$comp:h,fgid:h.id+"-frame"+e,ui:h.ui,uiCls:h.uiCls,frameCls:h.frameCls,baseCls:h.baseCls,top:!!d.top,left:!!d.left,right:!!d.right,bottom:!!d.bottom,frameElCls:""}},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var o=this,m=o.frameSize&&o.frameSize.table,n=o.frameTL,p=o.frameBL,q=o.frameML,l=o.frameMC,j;o.initFrame();if(l){if(o.frame){j=o.frameMC.dom.className;l.insertAfter(o.frameMC);o.frameMC.remove();o.frameBody=o.frameMC=l;l.dom.className=j;if(m){o.el.query("> table")[1].remove()}else{if(n){n.remove()}if(p){p.remove()}if(q){q.remove()}}}}else{if(o.frame){o.applyRenderSelectors()}}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var C=this,K=C.frameInfoCache,U=C.getFramingInfoCls()+"-frameInfo",B=K[U],J=Math.max,M,P,G,N,A,T,Q,X,W,O,S,H,F,R,Y,V,D,I,E;if(B==null){M=Ext.fly(C.getStyleProxy(U),"frame-style-el");G=M.getStyle("font-family");if(G){G=G.split("-");V=parseInt(G[1],10);D=parseInt(G[2],10);I=parseInt(G[3],10);E=parseInt(G[4],10);X=parseInt(G[5],10);W=parseInt(G[6],10);O=parseInt(G[7],10);S=parseInt(G[8],10);H=parseInt(G[9],10);F=parseInt(G[10],10);R=parseInt(G[11],10);Y=parseInt(G[12],10);N=J(X,J(V,D));A=J(W,J(D,I));T=J(O,J(E,I));Q=J(S,J(V,E));B={table:G[0].charAt(0)==="t",vertical:G[0].charAt(1)==="v",top:N,right:A,bottom:T,left:Q,width:Q+A,height:N+T,maxWidth:J(N,A,T,Q),border:{top:X,right:W,bottom:O,left:S,width:S+W,height:X+O},padding:{top:H,right:F,bottom:R,left:Y,width:Y+F,height:H+R},radius:{tl:V,tr:D,br:I,bl:E}}}else{B=false}K[U]=B}C.frame=!!B;C.frameSize=B;return B},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui},getStyleProxy:function(c){var d=this.styleProxyEl||(Ext.AbstractComponent.prototype.styleProxyEl=Ext.getBody().createChild({role:"presentation",style:{position:"absolute",top:"-10000px"}},null,true));d.className=c;return d},getFrameTpl:function(c){return this.getTpl(c?"frameTableTpl":"frameTpl")},frameInfoCache:{}},0,0,0,0,0,0,[Ext.util,"Renderable"],0));(Ext.cmd.derive("Ext.state.Provider",Ext.Base,{prefix:"ext-",constructor:function(d){d=d||{};var c=this;Ext.apply(c,d);c.addEvents("statechange");c.state={};c.mixins.observable.constructor.call(c)},get:function(c,d){return typeof this.state[c]=="undefined"?d:this.state[c]},clear:function(d){var c=this;delete c.state[d];c.fireEvent("statechange",c,d,null)},set:function(e,h){var d=this;d.state[e]=h;d.fireEvent("statechange",d,e,h)},decodeValue:function(q){var u=this,m=/^(a|n|d|b|s|o|e)\:(.*)$/,v=m.exec(unescape(q)),p,t,w,n,s,o;if(!v||!v[1]){return}t=v[1];q=v[2];switch(t){case"e":return null;case"n":return parseFloat(q);case"d":return new Date(Date.parse(q));case"b":return(q=="1");case"a":p=[];if(q!=""){n=q.split("^");s=n.length;for(o=0;o<s;o++){q=n[o];p.push(u.decodeValue(q))}}return p;case"o":p={};if(q!=""){n=q.split("^");s=n.length;for(o=0;o<s;o++){q=n[o];w=q.split("=");p[w[0]]=u.decodeValue(w[1])}}return p;default:return q}},encodeValue:function(m){var l="",n=0,h,j,o;if(m==null){return"e:1"}else{if(typeof m=="number"){h="n:"+m}else{if(typeof m=="boolean"){h="b:"+(m?"1":"0")}else{if(Ext.isDate(m)){h="d:"+m.toUTCString()}else{if(Ext.isArray(m)){for(j=m.length;n<j;n++){l+=this.encodeValue(m[n]);if(n!=j-1){l+="^"}}h="a:"+l}else{if(typeof m=="object"){for(o in m){if(typeof m[o]!="function"&&m[o]!==undefined){l+=o+"="+this.encodeValue(m[o])+"^"}}h="o:"+l.substring(0,l.length-1)}else{h="s:"+m}}}}}}return escape(h)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Provider"],0));(Ext.cmd.derive("Ext.state.Manager",Ext.Base,{singleton:true,constructor:function(){this.provider=new Ext.state.Provider()},setProvider:function(c){this.provider=c},get:function(c,d){return this.provider.get(c,d)},set:function(d,c){this.provider.set(d,c)},clear:function(c){this.provider.clear(c)},getProvider:function(){return this.provider}},1,0,0,0,0,0,[Ext.state,"Manager"],0));(Ext.cmd.derive("Ext.state.Stateful",Ext.Base,{stateful:false,saveDelay:100,constructor:function(d){var c=this;d=d||{};if(d.stateful!==undefined){c.stateful=d.stateful}if(d.saveDelay!==undefined){c.saveDelay=d.saveDelay}c.stateId=c.stateId||d.stateId;if(!c.stateEvents){c.stateEvents=[]}if(d.stateEvents){c.stateEvents.concat(d.stateEvents)}this.addEvents("beforestaterestore","staterestore","beforestatesave","statesave");c.mixins.observable.constructor.call(c);if(c.stateful!==false){c.addStateEvents(c.stateEvents);c.initState()}},addStateEvents:function(n){var l=this,o,m,h,j;if(l.stateful&&l.getStateId()){j=(typeof n=="string")?arguments:n;h=l.stateEventsByName||(l.stateEventsByName={});for(o=j.length;o--;){m=j[o];if(!h[m]){h[m]=1;l.on(m,l.onStateChange,l)}}}},onStateChange:function(){var l=this,h=l.saveDelay,j,e;if(!l.stateful){return}if(h){if(!l.stateTask){j=Ext.state.Stateful;e=j.runner||(j.runner=new Ext.util.TaskRunner());l.stateTask=e.newTask({run:l.saveState,scope:l,interval:h,repeat:1})}l.stateTask.start()}else{l.saveState()}},saveState:function(){var e=this,j=e.stateful&&e.getStateId(),h=e.hasListeners,l;if(j){l=e.getState()||{};if(!h.beforestatesave||e.fireEvent("beforestatesave",e,l)!==false){Ext.state.Manager.set(j,l);if(h.statesave){e.fireEvent("statesave",e,l)}}}},getState:function(){return null},applyState:function(c){if(c){Ext.apply(this,c)}},getStateId:function(){var c=this;return c.stateId||(c.autoGenId?null:c.id)},initState:function(){var e=this,j=e.stateful&&e.getStateId(),h=e.hasListeners,l;if(j){l=Ext.state.Manager.get(j);if(l){l=Ext.apply({},l);if(!h.beforestaterestore||e.fireEvent("beforestaterestore",e,l)!==false){e.applyState(l);if(h.staterestore){e.fireEvent("staterestore",e,l)}}}}},savePropToState:function(l,m,n){var h=this,o=h[l],j=h.initialConfig;if(h.hasOwnProperty(l)){if(!j||j[l]!==o){if(m){m[n||l]=o}return true}}return false},savePropsToState:function(l,n){var h=this,j,m;if(typeof l=="string"){h.savePropToState(l,n)}else{for(j=0,m=l.length;j<m;++j){h.savePropToState(l[j],n)}}return n},destroy:function(){var c=this,d=c.stateTask;if(d){d.destroy();c.stateTask=null}c.clearListeners()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.state,"Stateful"],0));(Ext.cmd.derive("Ext.AbstractComponent",Ext.Base,{statics:{AUTO_ID:1000,pendingLayouts:null,layoutSuspendCount:0,cancelLayout:function(e,h){var d=this.runningLayoutContext||this.pendingLayouts;if(d){d.cancelComponent(e,false,h)}},findComponentByElement:function(l){var h=document.body,j=l,e;while(j&&j.nodeType===1&&j!==h){e=Ext.getCmp(j.id);if(e){return e}j=j.parentNode}return null},getComponentByElement:function(e){var h=Ext.Component.componentIdAttribute,d;e=Ext.fly(e);if(!e){return null}d=e.getAttribute(h);if(d){return Ext.getCmp(d)}else{return Ext.Component.findComponentByElement(e.dom)}},flushLayouts:function(){var c=this,d=c.pendingLayouts;if(d&&d.invalidQueue.length){c.pendingLayouts=null;c.runningLayoutContext=d;Ext.override(d,{runComplete:function(){c.runningLayoutContext=null;var a=this.callParent();if(Ext.globalEvents.hasListeners.afterlayout){Ext.globalEvents.fireEvent("afterlayout")}return a}});d.run()}},resumeLayouts:function(c){if(this.layoutSuspendCount&&!--this.layoutSuspendCount){if(c){this.flushLayouts()}if(Ext.globalEvents.hasListeners.resumelayouts){Ext.globalEvents.fireEvent("resumelayouts")}}},suspendLayouts:function(){++this.layoutSuspendCount},updateLayout:function(h,l){var n=this,j=n.runningLayoutContext,m;if(j){j.queueInvalidate(h)}else{m=n.pendingLayouts||(n.pendingLayouts=new Ext.layout.Context());m.queueInvalidate(h);if(!l&&!n.layoutSuspendCount&&!h.isLayoutSuspended()){n.flushLayouts()}}}},isComponent:true,getAutoId:function(){this.autoGenId=true;return ++Ext.AbstractComponent.AUTO_ID},deferLayouts:false,autoGenId:false,renderTpl:"{%this.renderContent(out,values)%}",maskElement:null,frameSize:null,tplWriteMode:"overwrite",baseCls:Ext.baseCSSPrefix+"component",disabledCls:Ext.baseCSSPrefix+"item-disabled",ui:"default",uiCls:[],hidden:false,disabled:false,disabledRe:/^(?:button|input|select|textarea|optgroup|option|fieldset)$/i,nonMaskableRe:(function(){var c=["input","select","textarea","optgroup","option","table"];if(Ext.isIE9m&&!(Ext.isIE9&&!Ext.isIEQuirks)){c.push("p")}return new RegExp("^(?:"+c.join("|")+")$","i")}()),draggable:false,floating:false,hideMode:"display",autoShow:false,autoRender:false,allowDomMove:true,rendered:false,componentLayoutCounter:0,shrinkWrap:2,weight:0,maskOnDisable:true,_isLayoutRoot:false,contentPaddingProperty:"padding",horizontalPosProp:"left",borderBoxCls:Ext.baseCSSPrefix+"border-box",rootCls:Ext.baseCSSPrefix+"body",constructor:function(n){var l=this,m,j,h;if(n){Ext.apply(l,n);h=l.xhooks;if(h){delete l.xhooks;Ext.override(l,h)}}else{n={}}l.initialConfig=n;l.mixins.elementCt.constructor.call(l);l.addEvents("beforeactivate","activate","beforedeactivate","deactivate","added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","boxready","beforedestroy","destroy","resize","move","focus","blur");l.getId();l.setupProtoEl();if(l.cls){l.initialCls=l.cls;l.protoEl.addCls(l.cls)}if(l.style){l.initialStyle=l.style;l.protoEl.setStyle(l.style)}l.renderData=l.renderData||{};l.renderSelectors=l.renderSelectors||{};if(!l.hasListeners){l.hasListeners=new l.HasListeners()}l.initComponent();Ext.ComponentManager.register(l);l.mixins.observable.constructor.call(l);l.mixins.state.constructor.call(l,n);this.addStateEvents("resize");if(l.plugins){for(m=0,j=l.plugins.length;m<j;m++){l.plugins[m]=l.initPlugin(l.plugins[m])}}l.loader=l.getLoader();if(l.renderTo){l.render(l.renderTo)}if(l.autoShow&&!l.isContained){l.show()}},initComponent:function(){var c=this;if(c.plugins&&!c.plugins.processed){c.plugins=c.constructPlugins()}c.setSize(c.width,c.height)},getState:function(){var d=this,h=null,e=d.getSizeModel();if(e.width.configured){h=d.addPropertyToState(h,"width")}if(e.height.configured){h=d.addPropertyToState(h,"height")}return h},addPropertyToState:function(l,m,n){var h=this,j=arguments.length;if(j==3||h.hasOwnProperty(m)){if(j<3){n=h[m]}if(n!==h.initialConfig[m]){(l||(l={}))[m]=n}}return l},show:Ext.emptyFn,animate:function(J){var h=this,G,C,D,M,I,K,v,y,B,H,x,A,F,z,w,E;J=J||{};I=J.to||{};if(Ext.fx.Manager.hasFxBlock(h.id)){return h}G=Ext.isDefined(I.width);if(G){M=Ext.Number.constrain(I.width,h.minWidth,h.maxWidth)}C=Ext.isDefined(I.height);if(C){D=Ext.Number.constrain(I.height,h.minHeight,h.maxHeight)}if(!J.dynamic&&(G||C)){y=(J.from?J.from.width:undefined)||h.getWidth();B=y;H=(J.from?J.from.height:undefined)||h.getHeight();x=H;A=false;if(C&&D>H){x=D;A=true}if(G&&M>y){B=M;A=true}if(C||G){E=h.el.getStyle("overflow");if(E!=="hidden"){h.el.setStyle("overflow","hidden")}}if(A){K=!Ext.isNumber(h.width);v=!Ext.isNumber(h.height);h.setSize(B,x);h.el.setSize(y,H);if(K){delete h.width}if(v){delete h.height}}if(G){I.width=M}if(C){I.height=D}}F=h.constrain;z=h.constrainHeader;if(F||z){h.constrain=h.constrainHeader=false;w=J.callback;J.callback=function(){h.constrain=F;h.constrainHeader=z;if(w){w.call(J.scope||h,arguments)}if(E!=="hidden"){h.el.setStyle("overflow",E)}}}return h.mixins.animate.animate.apply(h,arguments)},setHiddenState:function(d){var c=this.getHierarchyState();this.hidden=d;if(d){c.hidden=true}else{delete c.hidden}},onHide:function(){if(this.ownerLayout){this.updateLayout({isRoot:false})}},onShow:function(){this.updateLayout({isRoot:false})},constructPlugin:function(c){var d=this;if(typeof c=="string"){c=Ext.PluginManager.create({},c,d)}else{c=Ext.PluginManager.create(c,null,d)}d.pluginsInitialized=true;return c},constructPlugins:function(){var l=this,n=l.plugins,h,m,j;if(n){h=[];h.processed=true;if(!Ext.isArray(n)){n=[n]}for(m=0,j=n.length;m<j;m++){h[m]=l.constructPlugin(n[m])}}return h},initPlugin:function(c){c.init(this);return c},addPlugin:function(c){var d=this;c=d.constructPlugin(c);if(d.plugins){d.plugins.push(c)}else{d.plugins=[c]}if(d.pluginsInitialized){d.initPlugin(c)}return c},removePlugin:function(c){Ext.Array.remove(this.plugins,c);c.destroy()},findPlugin:function(j){var e,h=this.plugins,l=h&&h.length;for(e=0;e<l;e++){if(h[e].ptype===j){return h[e]}}},getPlugin:function(e){var l,h=this.plugins,j=h&&h.length;for(l=0;l<j;l++){if(h[l].pluginId===e){return h[l]}}},beforeLayout:Ext.emptyFn,registerFloatingItem:function(c){var d=this;if(!d.floatingDescendants){d.floatingDescendants=new Ext.ZIndexManager(d)}d.floatingDescendants.register(c)},unregisterFloatingItem:function(c){var d=this;if(d.floatingDescendants){d.floatingDescendants.unregister(c)}},layoutSuspendCount:0,suspendLayouts:function(){var c=this;if(!c.rendered){return}if(++c.layoutSuspendCount===1){c.suspendLayout=true}},resumeLayouts:function(c){var d=this;if(!d.rendered){return}if(d.layoutSuspendCount&&!--d.layoutSuspendCount){d.suspendLayout=false;if(c&&!d.isLayoutSuspended()){d.updateLayout(c)}}},setupProtoEl:function(){var c=this.initCls();this.protoEl=new Ext.util.ProtoElement({cls:c.join(" ")})},initCls:function(){var c=this,d=[c.baseCls,c.getComponentLayout().targetCls];if(Ext.isDefined(c.cmpCls)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.Component: cmpCls has been deprecated. Please use componentCls.")}c.componentCls=c.cmpCls;delete c.cmpCls}if(c.componentCls){d.push(c.componentCls)}else{c.componentCls=c.baseCls}return d},setUI:function(n){var h=this,l=h.uiCls,m=h.activeUI,j;if(n===m){return}if(m){j=h.removeClsWithUI(l,true);if(j.length){h.removeCls(j)}h.removeUIFromElement()}else{h.uiCls=[]}h.ui=n;h.activeUI=n;h.addUIToElement();j=h.addClsWithUI(l,true);if(j.length){h.addCls(j)}if(h.rendered){h.updateLayout()}},addClsWithUI:function(s,m){var n=this,o=[],p=0,q=n.uiCls=Ext.Array.clone(n.uiCls),t=n.activeUI,u,l;if(typeof s==="string"){s=(s.indexOf(" ")<0)?[s]:Ext.String.splitWords(s)}u=s.length;for(;p<u;p++){l=s[p];if(l&&!n.hasUICls(l)){q.push(l);if(t){o=o.concat(n.addUIClsToElement(l))}}}if(m!==true&&t){n.addCls(o)}return o},removeClsWithUI:function(v,o){var p=this,q=[],t=0,y=Ext.Array,s=y.remove,u=p.uiCls=y.clone(p.uiCls),w=p.activeUI,x,n;if(typeof v==="string"){v=(v.indexOf(" ")<0)?[v]:Ext.String.splitWords(v)}x=v.length;for(t=0;t<x;t++){n=v[t];if(n&&p.hasUICls(n)){s(u,n);if(w){q=q.concat(p.removeUIClsFromElement(n))}}}if(o!==true&&w){p.removeCls(q)}return q},hasUICls:function(e){var d=this,h=d.uiCls||[];return Ext.Array.contains(h,e)},frameElementsArray:["tl","tc","tr","ml","mc","mr","bl","bc","br"],addUIClsToElement:function(m){var n=this,t=n.baseCls+"-"+n.ui+"-"+m,l=[Ext.baseCSSPrefix+m,n.baseCls+"-"+m,t],o,p,q,u,s;if(n.rendered&&n.frame&&!Ext.supports.CSS3BorderRadius){o=n.frameElementsArray;p=o.length;for(q=0;q<p;q++){s=o[q];u=n["frame"+s.toUpperCase()];if(u){u.addCls(t+"-"+s)}}}return l},removeUIClsFromElement:function(m){var n=this,t=n.baseCls+"-"+n.ui+"-"+m,l=[Ext.baseCSSPrefix+m,n.baseCls+"-"+m,t],o,p,q,u,s;if(n.rendered&&n.frame&&!Ext.supports.CSS3BorderRadius){o=n.frameElementsArray;p=o.length;for(q=0;q<p;q++){s=o[q];u=n["frame"+s.toUpperCase()];if(u){u.removeCls(t+"-"+s)}}}return l},addUIToElement:function(){var n=this,j=n.baseCls+"-"+n.ui,l,o,q,p,m;n.addCls(j);if(n.rendered&&n.frame&&!Ext.supports.CSS3BorderRadius){l=n.frameElementsArray;o=l.length;for(q=0;q<o;q++){m=l[q];p=n["frame"+m.toUpperCase()];if(p){p.addCls(j+"-"+m)}}}},removeUIFromElement:function(){var n=this,j=n.baseCls+"-"+n.ui,l,o,q,p,m;n.removeCls(j);if(n.rendered&&n.frame&&!Ext.supports.CSS3BorderRadius){l=n.frameElementsArray;o=l.length;for(q=0;q<o;q++){m=l[q];p=n["frame"+m.toUpperCase()];if(p){p.removeCls(j+"-"+m)}}}},getTpl:function(c){return Ext.XTemplate.getTpl(this,c)},initStyles:function(o){var t=this,w=Ext.Element,v=t.margin,u=t.border,n=t.cls,y=t.style,q=t.x,s=t.y,x,p;t.initPadding(o);if(v!=null){o.setStyle("margin",this.unitizeBox((v===true)?5:v))}if(u!=null){t.setBorder(u,o)}if(n&&n!=t.initialCls){o.addCls(n);t.cls=t.initialCls=null}if(y&&y!=t.initialStyle){o.setStyle(y);t.style=t.initialStyle=null}if(q!=null){o.setStyle(t.horizontalPosProp,(typeof q=="number")?(q+"px"):q)}if(s!=null){o.setStyle("top",(typeof s=="number")?(s+"px"):s)}if(!t.ownerCt||t.floating){if(Ext.scopeCss){o.addCls(t.rootCls)}if(Ext.isBorderBox){o.addCls(t.borderBoxCls)}}if(!t.getFrameInfo()){x=t.width;p=t.height;if(x!=null){if(typeof x==="number"){if(Ext.isBorderBox){o.setStyle("width",x+"px")}}else{o.setStyle("width",x)}}if(p!=null){if(typeof p==="number"){if(Ext.isBorderBox){o.setStyle("height",p+"px")}}else{o.setStyle("height",p)}}}},initPadding:function(h){var e=this,d=e.padding;if(d!=null){if(e.layout&&e.layout.managePadding&&e.contentPaddingProperty==="padding"){h.setStyle("padding",0)}else{h.setStyle("padding",this.unitizeBox((d===true)?5:d))}}},parseBox:function(c){return Ext.dom.Element.parseBox(c)},unitizeBox:function(c){return Ext.dom.Element.unitizeBox(c)},setMargin:function(h,d){var e=this;if(e.rendered){if(!h&&h!==0){h=""}else{if(h===true){h=5}h=this.unitizeBox(h)}e.getTargetEl().setStyle("margin",h);if(!d){e.updateLayout()}}else{e.margin=h}},initEvents:function(){var o=this,m=o.afterRenderEvents,j,p,n,q,l;if(m){for(n in m){p=o[n];if(p&&p.on){j=m[n];for(q=0,l=j.length;q<l;++q){o.mon(p,j[q])}}}}o.addFocusListener()},addFocusListener:function(){var h=this,d=h.getFocusEl(),e;if(d){if(d.isComponent){return d.addFocusListener()}e=d.needsTabIndex();if(!h.focusListenerAdded&&(!e||Ext.enableFocusManager)){if(e){d.dom.tabIndex=-1}d.on({focus:h.onFocus,blur:h.onBlur,scope:h});h.focusListenerAdded=true}}},getFocusEl:Ext.emptyFn,isFocusable:function(){var c=this,d;if((c.focusable!==false)&&(d=c.getFocusEl())&&c.rendered&&!c.destroying&&!c.isDestroyed&&!c.disabled&&c.isVisible(true)){return d.isFocusable(true)}},beforeFocus:Ext.emptyFn,onFocus:function(j){var l=this,e=l.focusCls,h=l.getFocusEl();if(!l.disabled){l.beforeFocus(j);if(e&&h){h.addCls(l.addClsWithUI(e,true))}if(!l.hasFocus){l.hasFocus=true;l.fireEvent("focus",l,j)}}},beforeBlur:Ext.emptyFn,onBlur:function(j){var l=this,e=l.focusCls,h=l.getFocusEl();if(l.destroying){return}l.beforeBlur(j);if(e&&h){h.removeCls(l.removeClsWithUI(e,true))}if(l.validateOnBlur){l.validate()}l.hasFocus=false;l.fireEvent("blur",l,j);l.postBlur(j)},postBlur:Ext.emptyFn,owns:function(d){var e=false,h;if(d.isEvent){d=d.target}else{if(d.isElement){d=d.dom}}h=Ext.AbstractComponent.findComponentByElement(d);if(h){e=(h===this)||(!!h.up(this))}return e},is:function(c){return Ext.ComponentQuery.is(this,c)},up:function(p,o){var q=this.getRefOwner(),j=typeof o==="string",m=typeof o==="number",l=o&&o.isComponent,n=0;if(p){for(;q;q=q.getRefOwner()){n++;if(p.isComponent){if(q===p){return q}}else{if(Ext.ComponentQuery.is(q,p)){return q}}if(j&&q.is(o)){return}if(m&&n===o){return}if(l&&q===o){return}}}return q},nextSibling:function(c){var m=this.ownerCt,o,n,j,l;if(m){o=m.items;j=o.indexOf(this)+1;if(j){if(c){for(n=o.getCount();j<n;j++){if((l=o.getAt(j)).is(c)){return l}}}else{if(j<o.getCount()){return o.getAt(j)}}}}return null},previousSibling:function(c){var l=this.ownerCt,m,h,j;if(l){m=l.items;h=m.indexOf(this);if(h!=-1){if(c){for(--h;h>=0;h--){if((j=m.getAt(h)).is(c)){return j}}}else{if(h){return m.getAt(--h)}}}}return null},previousNode:function(l,s){var n=this,o=n.ownerCt,m,p,q,t;if(s&&n.is(l)){return n}if(o){for(p=o.items.items,q=Ext.Array.indexOf(p,n)-1;q>-1;q--){t=p[q];if(t.query){m=t.query(l);m=m[m.length-1];if(m){return m}}if(t.is(l)){return t}}return o.previousNode(l,true)}return null},nextNode:function(q,m){var t=this,s=t.ownerCt,l,p,n,o,u;if(m&&t.is(q)){return t}if(s){for(p=s.items.items,o=Ext.Array.indexOf(p,t)+1,n=p.length;o<n;o++){u=p[o];if(u.is(q)){return u}if(u.down){l=u.down(q);if(l){return l}}}return s.nextNode(q)}return null},getId:function(){return this.id||(this.id="ext-comp-"+(this.getAutoId()))},getItemId:function(){return this.itemId||this.id},getEl:function(){return this.el},getTargetEl:function(){return this.frameBody||this.el},getOverflowEl:function(){return this.getTargetEl()},getOverflowStyle:function(){var m=this,h=null,l=m.autoScroll,n,o,j;if(typeof l==="boolean"){h={overflow:j=(l?"auto":"")};m.scrollFlags={overflowX:j,overflowY:j,x:l,y:l,both:l}}else{n=m.overflowX;o=m.overflowY;if(n!==undefined||o!==undefined){if(n&&n===true){n="auto"}if(o&&o===true){o="auto"}h={overflowX:n=n||"",overflowY:o=o||""};m.scrollFlags={overflowX:n,overflowY:o,x:n=(n==="auto"||n==="scroll"),y:o=(o==="auto"||o==="scroll"),both:n&&o}}else{m.scrollFlags={overflowX:"",overflowY:"",x:false,y:false,both:false}}}if(h&&Ext.isIE7m){h.position="relative"}return h},isXType:function(c,d){if(d){return this.xtype===c}else{return this.xtypesMap[c]}},getXTypes:function(){var l=this.self,j,e,h;if(!l.xtypes){j=[];e=this;while(e){h=e.xtypes;if(h!==undefined){j.unshift.apply(j,h)}e=e.superclass}l.xtypeChain=j;l.xtypes=j.join("/")}return l.xtypes},update:function(l,t,m){var o=this,n=(o.tpl&&!Ext.isString(l)),q,s=o.getSizeModel(),p=s.width.shrinkWrap||s.height.shrinkWrap;if(n){o.data=l}else{o.html=Ext.isObject(l)?Ext.DomHelper.markup(l):l}if(o.rendered){if(o.isContainer){q=o.layout.getRenderTarget();p=p||o.items.items.length>0}else{q=o.getTargetEl()}if(n){o.tpl[o.tplWriteMode](q,l||{})}else{q.update(o.html,t,m)}if(p){o.updateLayout()}}},setVisible:function(c){return this[c?"show":"hide"]()},isVisible:function(e){var d=this,h;if(d.hidden||!d.rendered||d.isDestroyed){h=true}else{if(e){h=d.isHierarchicallyHidden()}}return !h},isHierarchicallyHidden:function(){var j=this,l=false,e,h;for(;(e=j.ownerCt||j.floatParent);j=e){h=e.getHierarchyState();if(h.hidden){l=true;break}if(j.getHierarchyState().collapseImmune){if(e.collapsed&&!j.collapseImmune){l=true;break}}else{l=!!h.collapsed;break}}return l},onBoxReady:function(d,e){var h=this;if(h.disableOnBoxReady){h.onDisable()}else{if(h.enableOnBoxReady){h.onEnable()}}if(h.resizable){h.initResizable(h.resizable)}if(h.draggable){h.initDraggable()}if(h.hasListeners.boxready){h.fireEvent("boxready",h,d,e)}},enable:function(d){var c=this;delete c.disableOnBoxReady;c.removeCls(c.disabledCls);if(c.rendered){c.onEnable()}else{c.enableOnBoxReady=true}c.disabled=false;delete c.resetDisable;if(d!==true){c.fireEvent("enable",c)}return c},disable:function(d){var c=this;delete c.enableOnBoxReady;c.addCls(c.disabledCls);if(c.rendered){c.onDisable()}else{c.disableOnBoxReady=true}c.disabled=true;if(d!==true){delete c.resetDisable;c.fireEvent("disable",c)}return c},onEnable:function(){var e=this,d,h;if(e.maskOnDisable){d=e.el.dom;h=d.nodeName;if(e.disabledRe.test(h)){d.disabled=false}if(!e.nonMaskableRe.test(h)){e.unmask()}}},onDisable:function(){var n=this,h=n.focusCls,j=n.getFocusEl(),m,l;if(h&&j){j.removeCls(n.removeClsWithUI(h,true))}if(n.maskOnDisable){m=n.el.dom;l=m.nodeName;if(n.disabledRe.test(l)){m.disabled=true}if(!n.nonMaskableRe.test(l)){n.mask()}}},mask:function(l,n,j){var h=this.lastBox,m=this.getMaskTarget()||this.el;if(h){j=h.height}m.mask(l,n,j)},unmask:function(){(this.getMaskTarget()||this.el).unmask()},getMaskTarget:function(){return this.maskElement?this[this.maskElement]:null},isDisabled:function(){return this.disabled},setDisabled:function(c){return this[c?"disable":"enable"]()},isHidden:function(){return this.hidden},addCls:function(e){var h=this,d=h.rendered?h.el:h.protoEl;d.addCls.apply(d,arguments);return h},addClass:function(){return this.addCls.apply(this,arguments)},hasCls:function(e){var h=this,d=h.rendered?h.el:h.protoEl;return d.hasCls.apply(d,arguments)},removeCls:function(e){var h=this,d=h.rendered?h.el:h.protoEl;d.removeCls.apply(d,arguments);return h},addOverCls:function(){var c=this;if(!c.disabled){c.el.addCls(c.overCls)}},removeOverCls:function(){this.el.removeCls(this.overCls)},addListener:function(j,n,o,l){var m=this,p,q;if(Ext.isString(j)&&(Ext.isObject(n)||l&&l.element)){if(l.element){p=n;n={};n[j]=p;j=l.element;if(o){n.scope=o}for(q in l){if(l.hasOwnProperty(q)){if(m.eventOptionsRe.test(q)){n[q]=l[q]}}}}if(m[j]&&m[j].on){m.mon(m[j],n)}else{m.afterRenderEvents=m.afterRenderEvents||{};if(!m.afterRenderEvents[j]){m.afterRenderEvents[j]=[]}m.afterRenderEvents[j].push(n)}return}return m.mixins.observable.addListener.apply(m,arguments)},removeManagedListenerItem:function(l,m,n,s,p,q){var o=this,t=m.options?m.options.element:null;if(t){t=o[t];if(t&&t.un){if(l||(m.item===n&&m.ename===s&&(!p||m.fn===p)&&(!q||m.scope===q))){t.un(m.ename,m.fn,m.scope);if(!l){Ext.Array.remove(o.managedListeners,m)}}}}else{return o.mixins.observable.removeManagedListenerItem.apply(o,arguments)}},getBubbleTarget:function(){return this.ownerCt},isFloating:function(){return this.floating},isDraggable:function(){return !!this.draggable},isDroppable:function(){return !!this.droppable},onAdded:function(e,h){var d=this;d.ownerCt=e;if(d.hierarchyState){d.hierarchyState.invalid=true;delete d.hierarchyState}if(d.hasListeners.added){d.fireEvent("added",d,e,h)}},onRemoved:function(c){var d=this;if(d.hasListeners.removed){d.fireEvent("removed",d,d.ownerCt)}delete d.ownerCt;delete d.ownerLayout},beforeDestroy:Ext.emptyFn,onResize:function(n,j,h,l){var m=this;if(m.floating&&m.constrain){m.doConstrain()}if(m.hasListeners.resize){m.fireEvent("resize",m,n,j,h,l)}},setSize:function(p,l){var o=this,n,q,j=o.width,m=o.height;if(p&&typeof p=="object"){l=p.height;p=p.width}if(typeof p=="number"){o.width=Ext.Number.constrain(p,o.minWidth,o.maxWidth)}else{if(p===null){delete o.width}else{if(typeof p==="string"){n=true;o.width=p}}}if(typeof l=="number"){o.height=Ext.Number.constrain(l,o.minHeight,o.maxHeight)}else{if(l===null){delete o.height}else{if(typeof l==="string"){q=true;o.height=l}}}if(o.rendered&&o.isVisible()){if(j!==o.width||m!==o.height){if(n||q){o.el.setSize(o.width,o.height)}}o.updateLayout({isRoot:false})}return o},isLayoutRoot:function(){var d=this,c=d.ownerLayout;if(!c||d._isLayoutRoot||d.floating){return true}return c.isItemLayoutRoot(d)},isLayoutSuspended:function(){var d=this,c;while(d){if(d.layoutSuspendCount||d.suspendLayout){return true}c=d.ownerLayout;if(!c){break}d=c.owner}return false},updateLayout:function(n){var m=this,l,h=m.lastBox,j=n&&n.isRoot;if(h){h.invalid=true}if(!m.rendered||m.layoutSuspendCount||m.suspendLayout){return}if(m.hidden){Ext.AbstractComponent.cancelLayout(m)}else{if(typeof j!="boolean"){j=m.isLayoutRoot()}}if(j||!m.ownerLayout||!m.ownerLayout.onContentChange(m)){if(!m.isLayoutSuspended()){l=(n&&n.hasOwnProperty("defer"))?n.defer:m.deferLayouts;Ext.AbstractComponent.updateLayout(m,l)}}},getSizeModel:function(z){var v=this,H=Ext.layout.SizeModel,E=v.componentLayout.ownerContext,G=v.width,t=v.height,s,F,C,D,B,u,x,w,y,A;if(E){A=E.widthModel;B=E.heightModel}if(!A||!B){C=((s=typeof G)=="number");D=((F=typeof t)=="number");y=v.floating||!(u=v.ownerLayout);if(y){x=Ext.layout.Layout.prototype.autoSizePolicy;w=v.floating?3:v.shrinkWrap;if(C){A=H.configured}if(D){B=H.configured}}else{x=u.getItemSizePolicy(v,z);w=u.isItemShrinkWrap(v)}if(E){E.ownerSizePolicy=x}w=(w===true)?3:(w||0);if(y&&w){if(G&&s=="string"){w&=2}if(t&&F=="string"){w&=1}}if(w!==3){if(!z){z=v.ownerCt&&v.ownerCt.getSizeModel()}if(z){w|=(z.width.shrinkWrap?1:0)|(z.height.shrinkWrap?2:0)}}if(!A){if(!x.setsWidth){if(C){A=H.configured}else{A=(w&1)?H.shrinkWrap:H.natural}}else{if(x.readsWidth){if(C){A=H.calculatedFromConfigured}else{A=(w&1)?H.calculatedFromShrinkWrap:H.calculatedFromNatural}}else{A=H.calculated}}}if(!B){if(!x.setsHeight){if(D){B=H.configured}else{B=(w&2)?H.shrinkWrap:H.natural}}else{if(x.readsHeight){if(D){B=H.calculatedFromConfigured}else{B=(w&2)?H.calculatedFromShrinkWrap:H.calculatedFromNatural}}else{B=H.calculated}}}}return A.pairsByHeightOrdinal[B.ordinal]},isDescendant:function(d){if(d.isContainer){for(var c=this.ownerCt;c;c=c.ownerCt){if(c===d){return true}}}return false},doComponentLayout:function(){this.updateLayout();return this},forceComponentLayout:function(){this.updateLayout()},setComponentLayout:function(c){var d=this.componentLayout;if(d&&d.isLayout&&d!=c){d.setOwner(null)}this.componentLayout=c;c.setOwner(this)},getComponentLayout:function(){var c=this;if(!c.componentLayout||!c.componentLayout.isLayout){c.setComponentLayout(Ext.layout.Layout.create(c.componentLayout,"autocomponent"))}return c.componentLayout},afterComponentLayout:function(n,j,h,l){var m=this;if(++m.componentLayoutCounter===1){m.afterFirstLayout(n,j)}if(n!==h||j!==l){m.onResize(n,j,h,l)}},beforeComponentLayout:function(c,d){return true},setPosition:function(j,l,h){var n=this,m=n.beforeSetPosition.apply(n,arguments);if(m&&n.rendered){j=m.x;l=m.y;if(h){if(j!==n.getLocalX()||l!==n.getLocalY()){n.stopAnimation();n.animate(Ext.apply({duration:1000,listeners:{afteranimate:Ext.Function.bind(n.afterSetPosition,n,[j,l])},to:{left:j,top:l}},h))}}else{n.setLocalXY(j,l);n.afterSetPosition(j,l)}}return n},beforeSetPosition:function(j,l,h){var m,n;if(j){if(Ext.isNumber(n=j[0])){h=l;l=j[1];j=n}else{if((n=j.x)!==undefined){h=l;l=j.y;j=n}}}if(this.constrain||this.constrainHeader){m=this.calculateConstrainedPosition(null,[j,l],true);if(m){j=m[0];l=m[1]}}m={x:this.x=j,y:this.y=l,anim:h,hasX:j!==undefined,hasY:l!==undefined};return(m.hasX||m.hasY)?m:null},afterSetPosition:function(e,h){var d=this;d.onPosition(e,h);if(d.hasListeners.move){d.fireEvent("move",d,e,h)}},onPosition:Ext.emptyFn,setWidth:function(c){return this.setSize(c)},setHeight:function(c){return this.setSize(undefined,c)},getSize:function(c){return this.el.getSize(c)},getWidth:function(){return this.el.getWidth()},getHeight:function(){return this.el.getHeight()},getLoader:function(){var h=this,d=h.autoLoad?(Ext.isObject(h.autoLoad)?h.autoLoad:{url:h.autoLoad}):null,e=h.loader||d;if(e){if(!e.isLoader){h.loader=new Ext.ComponentLoader(Ext.apply({target:h,autoLoad:d},e))}else{e.setTarget(h)}return h.loader}return null},setDocked:function(d,h){var e=this;e.dock=d;if(h&&e.ownerCt&&e.rendered){e.ownerCt.updateLayout()}return e},setBorder:function(e,j){var l=this,h=!!j;if(l.rendered||h){if(!h){j=l.el}if(!e){e=0}else{if(e===true){e="1px"}else{e=this.unitizeBox(e)}}j.setStyle("border-width",e);if(!h){l.updateLayout()}}l.border=e},onDestroy:function(){var c=this;Ext.destroy(c.componentLayout,c.loadMask,c.floatingDescendants)},destroy:function(){var j=this,e=j.renderSelectors,h,l;if(!j.isDestroyed){if(!j.hasListeners.beforedestroy||j.fireEvent("beforedestroy",j)!==false){j.destroying=true;j.beforeDestroy();if(j.floating){delete j.floatParent;if(j.zIndexManager){j.zIndexManager.unregister(j)}}else{if(j.ownerCt&&j.ownerCt.remove){j.ownerCt.remove(j,false)}}j.stopAnimation();j.onDestroy();Ext.destroy(j.plugins);if(j.hasListeners.destroy){j.fireEvent("destroy",j)}Ext.ComponentManager.unregister(j);j.mixins.state.destroy.call(j);j.clearListeners();if(j.rendered){if(!j.preserveElOnDestroy){j.el.remove()}j.mixins.elementCt.destroy.call(j);if(e){for(h in e){if(e.hasOwnProperty(h)){l=j[h];if(l){delete j[h];l.remove()}}}}delete j.el;delete j.frameBody;delete j.rendered}delete j.initialConfig;j.destroying=false;j.isDestroyed=true}}},isDescendantOf:function(c){return !!this.findParentBy(function(a){return a===c})},getHierarchyState:function(m){var q=this,n=(m&&q.hierarchyStateInner)||q.hierarchyState,t=q.ownerCt,l,s,p,o;if(!n||n.invalid){l=q.getRefOwner();if(t){o=q.ownerLayout===t.layout}q.hierarchyState=n=Ext.Object.chain(l?l.getHierarchyState(o):Ext.rootHierarchyState);q.initHierarchyState(n);if((s=q.componentLayout).initHierarchyState){s.initHierarchyState(n)}if(q.isContainer){q.hierarchyStateInner=p=Ext.Object.chain(n);s=q.layout;if(s&&s.initHierarchyState){s.initHierarchyState(p,n)}if(m){n=p}}}return n},initHierarchyState:function(c){var d=this;if(d.collapsed){c.collapsed=true}if(d.hidden){c.hidden=true}if(d.collapseImmune){c.collapseImmune=true}},getAnchorToXY:function(j,h,l,e){return j.getAnchorXY(h,l,e)},getBorderPadding:function(){return this.el.getBorderPadding()},getLocalX:function(){return this.el.getLocalX()},getLocalXY:function(){return this.el.getLocalXY()},getLocalY:function(){return this.el.getLocalY()},getX:function(){return this.el.getX()},getXY:function(){return this.el.getXY()},getY:function(){return this.el.getY()},setLocalX:function(c){this.el.setLocalX(c)},setLocalXY:function(d,c){this.el.setLocalXY(d,c)},setLocalY:function(c){this.el.setLocalY(c)},setX:function(d,c){this.el.setX(d,c)},setXY:function(c,d){this.el.setXY(c,d)},setY:function(c,d){this.el.setY(c,d)}},1,0,0,0,0,[["positionable",Ext.util.Positionable],["observable",Ext.util.Observable],["animate",Ext.util.Animate],["elementCt",Ext.util.ElementContainer],["renderable",Ext.util.Renderable],["state",Ext.state.Stateful]],[Ext,"AbstractComponent"],function(){var c=this;c.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"});Ext.resumeLayouts=function(a){c.resumeLayouts(a)};Ext.suspendLayouts=function(){c.suspendLayouts()};Ext.batchLayouts=function(d,a){c.suspendLayouts();d.call(a);c.resumeLayouts(true)}}));(Ext.cmd.derive("Ext.AbstractPlugin",Ext.Base,{disabled:false,isPlugin:true,constructor:function(c){if(c){this.pluginConfig=c;Ext.apply(this,c)}},clonePlugin:function(c){return new this.self(Ext.apply({},c,this.pluginConfig))},setCmp:function(c){this.cmp=c},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true},onClassExtended:function(e,j,h){var l=j.alias;if(l&&!j.ptype){if(Ext.isArray(l)){l=l[0]}e.prototype.ptype=l.split("plugin.")[1]}}},1,0,0,0,0,0,[Ext,"AbstractPlugin"],0));(Ext.cmd.derive("Ext.Action",Ext.Base,{constructor:function(c){this.initialConfig=c;this.itemId=c.itemId=(c.itemId||c.id||Ext.id());this.items=[]},isAction:true,setText:function(c){this.initialConfig.text=c;this.callEach("setText",[c])},getText:function(){return this.initialConfig.text},setIconCls:function(c){this.initialConfig.iconCls=c;this.callEach("setIconCls",[c])},getIconCls:function(){return this.initialConfig.iconCls},setDisabled:function(c){this.initialConfig.disabled=c;this.callEach("setDisabled",[c])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(c){this.initialConfig.hidden=c;this.callEach("setVisible",[!c])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(c,d){this.initialConfig.handler=c;this.initialConfig.scope=d;this.callEach("setHandler",[c,d])},each:function(c,d){Ext.each(this.items,c,d)},callEach:function(l,o){var h=this.items,n=0,j=h.length,m;Ext.suspendLayouts();for(;n<j;n++){m=h[n];m[l].apply(m,o)}Ext.resumeLayouts(true)},addComponent:function(c){this.items.push(c);c.on("destroy",this.removeComponent,this)},removeComponent:function(c){Ext.Array.remove(this.items,c)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||Ext.global,arguments)}},1,0,0,0,0,0,[Ext,"Action"],0));(Ext.cmd.derive("Ext.data.flash.BinaryXhr",Ext.Base,{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=true;Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill");Ext.globalEvents.fireEvent("flashready")},flashPluginActive:false,flashPluginInjected:false,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(j,l,e){var h;h=this.liveConnections[Number(j)];if(h){h.onFlashStateChange(l,e)}},registerConnection:function(c){var d=this.connectionIndex;this.conectionIndex=this.connectionIndex+1;this.liveConnections[d]=c;return d},injectFlashPlugin:function(){var d=this,e,h;d.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]});e=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/");h="/plugins/flash/FlashPlugin.swf";if(Ext.flashPluginPath){h=Ext.flashPluginPath}Ext.Loader.loadScript({url:e,onLoad:function(){var m="11.4.0";var c="playerProductInstall.swf";var n={};var a={};a.quality="high";a.bgcolor="#ffffff";a.allowscriptaccess="sameDomain";a.allowfullscreen="true";var l={};l.id="ext-flash-polyfill";l.name="polyfill";l.align="middle";swfobject.embedSWF(h,"ext-flash-polyfill","0","0",m,c,n,a,l)},onError:function(){},scope:d});Ext.globalEvents.addEvents("flashready");Ext.data.flash.BinaryXhr.flashPluginInjected=true}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(d){if(!Ext.data.flash.BinaryXhr.flashPluginInjected){Ext.data.flash.BinaryXhr.injectFlashPlugin()}var c=this;Ext.apply(c,d);c.requestHeaders={}},abort:function(){var c=this;if(c.readyState==4){return}c.aborted=true;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.globalEvents.removeListener("flashready",c.onFlashReady,c);return}Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(c.javascriptId);delete Ext.data.flash.BinaryXhr.liveConnections[c.javascriptId]},getAllResponseHeaders:function(){var c=[];Ext.Object.each(this.responseHeaders,function(a,d){c.push(a+": "+d)});return c.join("\r\n")},getResponseHeader:function(c){var d=this.responseHeaders;return(d&&d[c])||null},open:function(l,o,n,j,h){var m=this;m.method=l;m.url=o;m.async=n!==false;m.user=j;m.password=h},overrideMimeType:function(c){this.mimeType=c},send:function(d){var c=this;c.body=d;if(!Ext.data.flash.BinaryXhr.flashPluginActive){Ext.globalEvents.addListener("flashready",c.onFlashReady,c)}else{this.onFlashReady()}},onFlashReady:function(){var h=this,d,e;h.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(h);d={method:h.method,url:h.url,user:h.user,password:h.password,mimeType:h.mimeType,requestHeaders:h.requestHeaders,body:h.body,javascriptId:h.javascriptId};e=Ext.data.flash.BinaryXhr.flashPlugin.postBinary(d)},setReadyState:function(c){var d=this;if(d.readyState!=c){d.readyState=c;d.onreadystatechange()}},setRequestHeader:function(c,d){this.requestHeaders[c]=d},onreadystatechange:Ext.emptyFn,parseData:function(c){var d=this;this.status=c.status||0;d.responseHeaders={};if(d.mimeType){d.responseHeaders["content-type"]=d.mimeType}if(c.reason=="complete"){this.responseBytes=c.data;d.responseHeaders["content-length"]=c.data.length}else{if(c.reason=="error"||c.reason=="securityError"){this.statusText=c.text;d.responseHeaders["content-length"]=0}}},onFlashStateChange:function(h,d){var e=this;if(h==4){e.parseData(d);delete Ext.data.flash.BinaryXhr.liveConnections[e.javascriptId]}e.setReadyState(h)}},1,0,0,0,0,0,[Ext.data.flash,"BinaryXhr"],0));(Ext.cmd.derive("Ext.data.Connection",Ext.Base,{statics:{requestId:0},url:null,async:true,method:null,username:"",password:"",disableCaching:true,withCredentials:false,binary:false,cors:false,isXdr:false,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:30000,useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",constructor:function(c){c=c||{};Ext.apply(this,c);this.requests={};this.mixins.observable.constructor.call(this)},request:function(m){m=m||{};var q=this,n=m.scope||window,s=m.username||q.username,p=m.password||q.password||"",v,u,t,w,o;if(q.fireEvent("beforerequest",q,m)!==false){u=q.setOptions(m,n);if(q.isFormUpload(m)){q.upload(m.form,u.url,u.data,m);return null}if(m.autoAbort||q.autoAbort){q.abort()}v=m.async!==false?(m.async||q.async):false;o=q.openRequest(m,u,v,s,p);if(!q.isXdr){w=q.setupHeaders(o,m,u.data,u.params)}t={id:++Ext.data.Connection.requestId,xhr:o,headers:w,options:m,async:v,binary:m.binary||q.binary,timeout:setTimeout(function(){t.timedout=true;q.abort(t)},m.timeout||q.timeout)};q.requests[t.id]=t;q.latestId=t.id;if(v){if(!q.isXdr){o.onreadystatechange=Ext.Function.bind(q.onStateChange,q,[t])}}if(q.isXdr){q.processXdrRequest(t,o)}o.send(u.data);if(!v){return q.onComplete(t)}return t}else{Ext.callback(m.callback,m.scope,[m,undefined,undefined]);return null}},processXdrRequest:function(d,h){var e=this;delete d.headers;d.contentType=d.options.contentType||e.defaultXdrContentType;h.onload=Ext.Function.bind(e.onStateChange,e,[d,true]);h.onerror=h.ontimeout=Ext.Function.bind(e.onStateChange,e,[d,false])},processXdrResponse:function(d,c){d.getAllResponseHeaders=function(){return[]};d.getResponseHeader=function(){return""};d.contentType=c.contentType||this.defaultXdrContentType},upload:function(K,G,v,H){K=Ext.getDom(K);H=H||{};var A=Ext.id(),C=document.createElement("iframe"),J=[],I="multipart/form-data",w={target:K.target,method:K.method,encoding:K.encoding,enctype:K.enctype,action:K.action},M=function(c,a){F=document.createElement("input");Ext.fly(F).set({type:"hidden",value:a,name:c});K.appendChild(F);J.push(F)},F,D,y,h,z,E,B,x;Ext.fly(C).set({id:A,name:A,cls:Ext.baseCSSPrefix+"hide-display",src:Ext.SSL_SECURE_URL});document.body.appendChild(C);if(document.frames){document.frames[A].name=A}Ext.fly(K).set({target:A,method:"POST",enctype:I,encoding:I,action:G||w.action});if(v){D=Ext.Object.fromQueryString(v)||{};for(h in D){if(D.hasOwnProperty(h)){y=D[h];if(Ext.isArray(y)){z=y.length;for(E=0;E<z;E++){M(h,y[E])}}else{M(h,y)}}}}Ext.fly(C).on("load",Ext.Function.bind(this.onUploadComplete,this,[C,H]),null,{single:!Ext.isOpera});K.submit();Ext.fly(K).set(w);B=J.length;for(x=0;x<B;x++){Ext.removeNode(J[x])}},onUploadComplete:function(u,e){var p=this,t={responseText:"",responseXML:null},n,m,o,s;try{o=u.contentWindow.document||u.contentDocument||window.frames[u.id].document;if(o){if(Ext.isOpera&&o.location=="about:blank"){return}if(o.body){if((s=o.body.firstChild)&&/pre/i.test(s.tagName)){t.responseText=s.textContent||s.innerText}else{if((s=o.getElementsByTagName("textarea")[0])){t.responseText=s.value}else{t.responseText=o.body.textContent||o.body.innerText}}}t.responseXML=o.XMLDocument||o;n=e.success;m=true}}catch(q){t.responseText='{success:false,message:"'+Ext.String.trim(q.message||q.description)+'"}';n=e.failure;m=false}p.fireEvent("requestcomplete",p,t,e);Ext.callback(n,e.scope,[t,e]);Ext.callback(e.callback,e.scope,[e,m,t]);setTimeout(function(){Ext.removeNode(u)},100)},isFormUpload:function(d){var c=this.getForm(d);if(c){return(d.isUpload||(/multipart\/form-data/i).test(c.getAttribute("enctype")))}return false},getForm:function(c){return Ext.getDom(c.form)||null},setOptions:function(n,o){var q=this,u=n.params||{},s=q.extraParams,v=n.urlParams,w=n.url||q.url,p=n.jsonData,x,y,t;if(Ext.isFunction(u)){u=u.call(o,n)}if(Ext.isFunction(w)){w=w.call(o,n)}w=this.setupUrl(n,w);t=n.rawData||n.binaryData||n.xmlData||p||null;if(p&&!Ext.isPrimitive(p)){t=Ext.encode(t)}if(n.binaryData){if(q.nativeBinaryPostSupport()){t=(new Uint8Array(n.binaryData));if((Ext.isChrome&&Ext.chromeVersion<22)||Ext.isSafari||Ext.isGecko){t=t.buffer}}}if(Ext.isObject(u)){u=Ext.Object.toQueryString(u)}if(Ext.isObject(s)){s=Ext.Object.toQueryString(s)}u=u+((s)?((u)?"&":"")+s:"");v=Ext.isObject(v)?Ext.Object.toQueryString(v):v;u=this.setupParams(n,u);x=(n.method||q.method||((u||t)?"POST":"GET")).toUpperCase();this.setupMethod(n,x);y=n.disableCaching!==false?(n.disableCaching||q.disableCaching):false;if(x==="GET"&&y){w=Ext.urlAppend(w,(n.disableCachingParam||q.disableCachingParam)+"="+(new Date().getTime()))}if((x=="GET"||t)&&u){w=Ext.urlAppend(w,u);u=null}if(v){w=Ext.urlAppend(w,v)}return{url:w,method:x,data:t||u||null}},setupUrl:function(d,e){var h=this.getForm(d);if(h){e=e||h.action}return e},setupParams:function(h,j){var l=this.getForm(h),e;if(l&&!this.isFormUpload(h)){e=Ext.Element.serializeForm(l);j=j?(j+"&"+e):e}return j},setupMethod:function(d,c){if(this.isFormUpload(d)){return"POST"}return c},setupHeaders:function(q,e,z,A){var v=this,B=Ext.apply({},e.headers||{},v.defaultHeaders||{}),s=v.defaultPostHeader,u=e.jsonData,C=e.xmlData,w="Content-Type",t,y;if(!B.hasOwnProperty(w)&&(z||A)){if(z){if(e.rawData){s="text/plain"}else{if(C&&Ext.isDefined(C)){s="text/xml"}else{if(u&&Ext.isDefined(u)){s="application/json"}}}}B[w]=s}if(v.useDefaultXhrHeader&&!B["X-Requested-With"]){B["X-Requested-With"]=v.defaultXhrHeader}if(B[w]===undefined||B[w]===null){delete B[w]}try{for(t in B){if(B.hasOwnProperty(t)){y=B[t];q.setRequestHeader(t,y)}}}catch(x){v.fireEvent("exception",t,y)}return B},newRequest:function(e){var d=this,h;if(e.binaryData){if(d.nativeBinaryPostSupport()){h=this.getXhrInstance()}else{h=new Ext.data.flash.BinaryXhr()}}else{if((e.cors||d.cors)&&Ext.isIE&&Ext.ieVersion<=9){h=d.getXdrInstance();d.isXdr=true}else{h=d.getXhrInstance()}}return h},openRequest:function(q,l,p,m,j){var o=this,n=o.newRequest(q);if(m){n.open(l.method,l.url,p,m,j)}else{if(o.isXdr){n.open(l.method,l.url)}else{n.open(l.method,l.url,p)}}if(q.binary||o.binary){if(window.Uint8Array){n.responseType="arraybuffer"}else{if(n.overrideMimeType){n.overrideMimeType("text/plain; charset=x-user-defined")}}}if(q.withCredentials||o.withCredentials){n.withCredentials=true}return n},getXdrInstance:function(){var c;if(Ext.ieVersion>=8){c=new XDomainRequest()}else{Ext.Error.raise({msg:"Your browser does not support CORS"})}return c},getXhrInstance:(function(){var e=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],m=0,h=e.length,j;for(;m<h;++m){try{j=e[m];j();break}catch(l){}}return j}()),isLoading:function(d){if(!d){d=this.getLatest()}if(!(d&&d.xhr)){return false}var c=d.xhr.readyState;return((d.xhr instanceof Ext.data.flash.BinaryXhr)&&c!=4)||!(c===0||c==4)},abort:function(e){var h=this,j;if(!e){e=h.getLatest()}if(e&&h.isLoading(e)){j=e.xhr;try{j.onreadystatechange=null}catch(l){j.onreadystatechange=Ext.emptyFn}j.abort();h.clearTimeout(e);if(!e.timedout){e.aborted=true}h.onComplete(e);h.cleanup(e)}},abortAll:function(){var c=this.requests,d;for(d in c){if(c.hasOwnProperty(d)){this.abort(c[d])}}},getLatest:function(){var c=this.latestId,d;if(c){d=this.requests[c]}return d||null},onStateChange:function(h,e){var d=this;if((h.xhr&&h.xhr.readyState==4)||d.isXdr){d.clearTimeout(h);d.onComplete(h,e);d.cleanup(h);Ext.globalEvents.fireEvent("idle")}},clearTimeout:function(c){clearTimeout(c.timeout);delete c.timeout},cleanup:function(c){c.xhr=null;delete c.xhr},onComplete:function(t,n){var q=this,m=t.options,o,e,p,u;try{o=t.xhr;e=q.parseStatus(o.status);if(e.success){e.success=o.readyState===4}}catch(s){e={success:false,isException:false}}p=q.isXdr?n:e.success;if(p){u=q.createResponse(t);q.fireEvent("requestcomplete",q,u,m);Ext.callback(m.success,m.scope,[u,m])}else{if(e.isException||t.aborted||t.timedout){u=q.createException(t)}else{u=q.createResponse(t)}q.fireEvent("requestexception",q,u,m);Ext.callback(m.failure,m.scope,[u,m])}Ext.callback(m.callback,m.scope,[m,p,u]);delete q.requests[t.id];return u},parseStatus:function(e){e=e==1223?204:e;var h=(e>=200&&e<300)||e==304,d=false;if(!h){switch(e){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:d=true;break}}return{success:h,isException:d}},createResponse:function(w){var t=this,q=w.xhr,y=t.isXdr,z={},p=y?[]:q.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),u=p.length,o,v,s,x,A;while(u--){o=p[u];v=o.indexOf(":");if(v>=0){s=o.substr(0,v).toLowerCase();if(o.charAt(v+1)==" "){++v}z[s]=o.substr(v+1)}}w.xhr=null;delete w.xhr;x={request:w,requestId:w.id,status:q.status,statusText:q.statusText,getResponseHeader:function(a){return z[a.toLowerCase()]},getAllResponseHeaders:function(){return z}};if(y){t.processXdrResponse(x,q)}if(w.binary){x.responseBytes=t.getByteArray(q)}else{x.responseText=q.responseText;x.responseXML=q.responseXML}q=null;return x},createException:function(c){return{request:c,requestId:c.id,status:c.aborted?-1:0,statusText:c.aborted?"transaction aborted":"communication failure",aborted:c.aborted,timedout:c.timedout}},getByteArray:function(m){var s=m.response,n=m.responseBody,e,p,l,q;if(m instanceof Ext.data.flash.BinaryXhr){e=m.responseBytes}else{if(window.Uint8Array){e=s?new Uint8Array(s):[]}else{if(Ext.isIE9p){try{e=new VBArray(n).toArray()}catch(o){e=[]}}else{if(Ext.isIE){if(!this.self.vbScriptInjected){this.injectVBScript()}getIEByteArray(m.responseBody,e=[])}else{e=[];p=m.responseText;l=p.length;for(q=0;q<l;q++){e.push(p.charCodeAt(q)&255)}}}}}return e},injectVBScript:function(){var c=document.createElement("script");c.type="text/vbscript";c.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\n");Ext.getHead().dom.appendChild(c);this.self.vbScriptInjected=true},nativeBinaryPostSupport:function(){return Ext.isChrome||(Ext.isSafari&&Ext.isDefined(window.Uint8Array))||(Ext.isGecko&&Ext.isDefined(window.Uint8Array))}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.data,"Connection"],0));(Ext.cmd.derive("Ext.Ajax",Ext.data.Connection,{singleton:true,autoAbort:false},0,0,0,0,0,0,[Ext,"Ajax"],0));(Ext.cmd.derive("Ext.util.Floating",Ext.Base,{focusOnToFront:true,shadow:"sides",constrain:false,preventDefaultAlign:false,constructor:function(c){var d=this;d.fixed=d.fixed&&!(Ext.isIE6||Ext.isIEQuirks);d.el=new Ext.dom.Layer(Ext.apply({preventSync:true,hideMode:d.hideMode,shadow:(typeof d.shadow!="undefined")?d.shadow:"sides",shadowOffset:d.shadowOffset,constrain:false,fixed:d.fixed,shim:(d.shim===false)?false:undefined},d.floating),c);if(d.modal&&!(Ext.enableFocusManager)){d.mon(d.el,{keydown:d.onKeyDown,scope:d})}d.mon(d.el,{mousedown:d.onMouseDown,scope:d});d.floating=true;d.registerWithOwnerCt();d.initHierarchyEvents()},initFloatConstrain:function(){var d=this,c=d.floatParent;if((d.constrain||d.constrainHeader)&&!d.constrainTo){d.constrainTo=c?c.getTargetEl():d.container}},initHierarchyEvents:function(){var c=this,d=this.syncHidden;if(!c.hasHierarchyEventListeners){c.mon(c.hierarchyEventSource,{hide:d,collapse:d,show:d,expand:d,added:d,scope:c});c.hasHierarchyEventListeners=true}},registerWithOwnerCt:function(){var h=this,d=h.ownerCt,e=h.zIndexParent;if(e){e.unregisterFloatingItem(h)}e=h.zIndexParent=h.up("[floating]");h.floatParent=d||e;h.initFloatConstrain();delete h.ownerCt;if(e){e.registerFloatingItem(h)}else{Ext.WindowManager.register(h)}},onKeyDown:function(n){var o=this,j,l,m,e;if(n.getKey()==Ext.EventObject.TAB){j=n.shiftKey;l=o.el.query(":focusable");m=l[0];e=l[l.length-1];if(m&&e&&n.target===(j?m:e)){n.stopEvent();(j?e:m).focus(false,true)}}},onMouseDown:function(c){var d=this.focusTask;if(this.floating&&(!d||!d.id)){this.toFront(!!c.getTarget(":focusable"))}},syncShadow:function(){if(this.floating){this.el.sync(true)}},onBeforeFloatLayout:function(){this.el.preventSync=true},onAfterFloatLayout:function(){delete this.el.preventSync;this.syncShadow()},syncHidden:function(){var l=this,j=l.hidden||!l.rendered,h=l.hierarchicallyHidden=l.isHierarchicallyHidden(),e=l.pendingShow;if(j!==h){if(h){l.hide();l.pendingShow=true}else{if(e){delete l.pendingShow;if(e.length){l.show.apply(l,e)}else{l.show()}}}}},setZIndex:function(d){var c=this;c.el.setZIndex(d);d+=10;if(c.floatingDescendants){d=Math.floor(c.floatingDescendants.setBase(d)/100)*100+10000}return d},doConstrain:function(e){var d=this,h=d.calculateConstrainedPosition(e,null,true);if(h){d.setPosition(h)}},toFront:function(l){var e=this,h=e.zIndexParent,j=e.preventFocusOnActivate;if(h&&e.bringParentToFront!==false){h.toFront(true)}if(!Ext.isDefined(l)){l=!e.focusOnToFront}if(l){e.preventFocusOnActivate=true}if(e.zIndexManager.bringToFront(e,l)){if(!l){e.focus(false,true)}if(e.hasListeners.tofront){e.fireEvent("tofront",e,e.el.getZIndex())}}e.preventFocusOnActivate=j;return e},setActive:function(d,h){var e=this;if(d){if(e.el.shadow&&!e.maximized){e.el.enableShadow(true)}if(!e.preventFocusOnActivate){e.focus(false,true)}e.fireEvent("activate",e)}else{if(e.isWindow&&(h&&h.isWindow)&&e.hideShadowOnDeactivate){e.el.disableShadow()}e.fireEvent("deactivate",e)}},toBack:function(){this.zIndexManager.sendToBack(this);return this},center:function(){var d=this,c;if(d.isVisible()){c=d.getAlignToXY(d.container,"c-c");d.setPagePosition(c)}else{d.needsCenter=true}return d},onFloatShow:function(){if(this.needsCenter){this.center()}delete this.needsCenter;if(this.toFrontOnShow){this.toFront()}},fitContainer:function(o){var l=this,m=l.floatParent,h=m?m.getTargetEl():l.container,j=h.getViewSize(false),n=m||(h.dom!==document.body)?[0,0]:h.getXY();j.x=n[0];j.y=n[1];l.setBox(j,o)}},1,0,0,0,0,0,[Ext.util,"Floating"],0));(Ext.cmd.derive("Ext.Component",Ext.AbstractComponent,{statics:{DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g},resizeHandles:"all",floating:false,defaultAlign:"c-c",alignTarget:null,toFrontOnShow:true,hideMode:"display",offsetsCls:Ext.baseCSSPrefix+"hide-offsets",bubbleEvents:[],defaultComponentLayoutType:"autocomponent",constructor:function(d){var c=this;d=d||{};if(d.initialConfig){if(d.isAction){c.baseAction=d}d=d.initialConfig}else{if(d.tagName||d.dom||Ext.isString(d)){d={applyTo:d,id:d.id||d}}}c.callParent([d]);if(c.baseAction){c.baseAction.addComponent(c)}},initComponent:function(){var c=this;c.callParent();if(c.listeners){c.on(c.listeners);c.listeners=null}c.enableBubble(c.bubbleEvents)},afterRender:function(){var c=this;c.callParent();if(!(c.x&&c.y)&&(c.pageX||c.pageY)){c.setPagePosition(c.pageX,c.pageY)}},setAutoScroll:function(d){var c=this;c.autoScroll=!!d;if(c.rendered){c.getOverflowEl().setStyle(c.getOverflowStyle())}c.updateLayout();return c},setOverflowXY:function(h,j){var m=this,l=arguments.length,n=m.ownerCt;if(l){m.overflowX=h||"";if(l>1){m.overflowY=j||""}}if(m.rendered){m.getOverflowEl().setStyle(m.getOverflowStyle())}(n||m).updateLayout();return m},beforeRender:function(){var d=this,h=d.floating,e;if(h){d.addCls(Ext.baseCSSPrefix+"layer");e=h.cls;if(e){d.addCls(e)}}return d.callParent()},beforeLayout:function(){this.callParent(arguments);if(this.floating){this.onBeforeFloatLayout()}},afterComponentLayout:function(){this.callParent(arguments);if(this.floating){this.onAfterFloatLayout()}},makeFloating:function(c){this.mixins.floating.constructor.call(this,c)},wrapPrimaryEl:function(c){if(this.floating){this.makeFloating(c)}else{this.callParent(arguments)}},initResizable:function(d){var c=this;d=Ext.apply({target:c,dynamic:false,constrainTo:(c.constrain||(d&&d.constrain))?(c.constrainTo||(c.floatParent?c.floatParent.getTargetEl():c.container)):undefined,handles:c.resizeHandles},d);d.target=c;c.resizer=new Ext.resizer.Resizer(d)},getDragEl:function(){return this.el},initDraggable:function(){var h=this,e=(h.resizer&&h.resizer.el!==h.el)?h.resizerComponent=new Ext.Component({ariaRole:"presentation",el:h.resizer.el,rendered:true,container:h.container}):h,d=Ext.applyIf({el:e.getDragEl(),constrainTo:(h.constrain||h.draggable.constrain)?(h.constrainTo||(h.floatParent?h.floatParent.getTargetEl():h.container)):undefined},h.draggable);if(h.constrain||h.constrainDelegate){d.constrain=h.constrain;d.constrainDelegate=h.constrainDelegate}h.dd=new Ext.util.ComponentDragger(e,d)},scrollBy:function(e,h,l){var j;if((j=this.getTargetEl())&&j.dom){j.scrollBy.apply(j,arguments)}},setLoading:function(l,j){var e=this,h={target:e};if(e.rendered){if(l!==false){if(Ext.isString(l)){h.msg=l}else{Ext.apply(h,l)}if(!e.loadMask||!e.loadMask.isLoadMask){if(j&&h.useTargetEl==null){h.useTargetEl=true}e.loadMask=new Ext.LoadMask(h)}else{Ext.apply(e.loadMask,h)}if(e.loadMask.isVisible()){e.loadMask.afterShow()}else{e.loadMask.show()}}else{if(e.loadMask&&e.loadMask.isLoadMask){e.loadMask.hide()}}}return e.loadMask},beforeSetPosition:function(){var d=this,h=d.callParent(arguments),e;if(h){e=d.adjustPosition(h.x,h.y);h.x=e.x;h.y=e.y}return h||null},afterSetPosition:function(c,d){this.onPosition(c,d);this.fireEvent("move",this,c,d)},showAt:function(h,j,e){var l=this;if(!l.rendered&&(l.autoRender||l.floating)){l.x=h;l.y=j;return l.show()}if(l.floating){l.setPosition(h,j,e)}else{l.setPagePosition(h,j,e)}l.show()},showBy:function(e,j,l){var h=this;if(h.floating&&e){h.alignTarget=e;if(j){h.defaultAlign=j}if(l){h.alignOffset=l}h.show();if(!h.hidden){h.alignTo(e,j||h.defaultAlign,l||h.alignOffset)}}return h},setPagePosition:function(j,l,h){var o=this,n,m;if(Ext.isArray(j)){l=j[1];j=j[0]}o.pageX=j;o.pageY=l;if(o.floating){if(o.isContainedFloater()){m=o.floatParent.getTargetEl().getViewRegion();if(Ext.isNumber(j)&&Ext.isNumber(m.left)){j-=m.left}if(Ext.isNumber(l)&&Ext.isNumber(m.top)){l-=m.top}}else{n=o.el.translateXY(j,l);j=n.x;l=n.y}o.setPosition(j,l,h)}else{n=o.el.translateXY(j,l);o.setPosition(n.x,n.y,h)}return o},isContainedFloater:function(){return(this.floating&&this.floatParent)},updateBox:function(c){this.setSize(c.width,c.height);this.setPagePosition(c.x,c.y);return this},getOuterSize:function(){var c=this.el;return{width:c.getWidth()+c.getMargin("lr"),height:c.getHeight()+c.getMargin("tb")}},adjustPosition:function(h,j){var e=this,l;if(e.isContainedFloater()){l=e.floatParent.getTargetEl().getViewRegion();h+=l.left;j+=l.top}return{x:h,y:j}},getPosition:function(j){var h=this,m,n=h.isContainedFloater(),l;if((j===true)&&!n){return[h.getLocalX(),h.getLocalY()]}m=h.getXY();if((j===true)&&n){l=h.floatParent.getTargetEl().getViewRegion();m[0]-=l.left;m[1]-=l.top}return m},getId:function(){var d=this,c;if(!d.id){c=d.getXType();if(c){c=c.replace(Ext.Component.INVALID_ID_CHARS_Re,"-")}else{c=Ext.name.toLowerCase()+"-comp"}d.id=c+"-"+d.getAutoId()}return d.id},show:function(m,j,h){var n=this,l=n.rendered;if(n.hierarchicallyHidden||(n.floating&&!l&&n.isHierarchicallyHidden())){if(!l){n.initHierarchyEvents()}if(arguments.length>1){arguments[0]=null;n.pendingShow=arguments}else{n.pendingShow=true}}else{if(l&&n.isVisible()){if(n.floating){n.onFloatShow()}}else{if(n.fireEvent("beforeshow",n)!==false){n.hidden=false;delete this.getHierarchyState().hidden;Ext.suspendLayouts();if(!l&&(n.autoRender||n.floating)){n.doAutoRender();l=n.rendered}if(l){n.beforeShow();Ext.resumeLayouts();n.onShow.apply(n,arguments);n.afterShow.apply(n,arguments)}else{Ext.resumeLayouts(true)}}else{n.onShowVeto()}}}return n},onShowVeto:Ext.emptyFn,beforeShow:Ext.emptyFn,onShow:function(){var c=this;c.el.show();c.callParent(arguments);if(c.floating){if(c.maximized){c.fitContainer()}else{if(c.constrain){c.doConstrain()}}}},getAnimateTarget:function(c){c=c||this.animateTarget;if(c){c=c.isComponent?c.getEl():Ext.get(c)}return c||null},afterShow:function(o,l,q){var p=this,n=p.el,m,t,s;o=p.getAnimateTarget(o);if(!p.ghost){o=null}if(o){t={x:n.getX(),y:n.getY(),width:n.dom.offsetWidth,height:n.dom.offsetHeight};m={x:o.getX(),y:o.getY(),width:o.dom.offsetWidth,height:o.dom.offsetHeight};n.addCls(p.offsetsCls);s=p.ghost();s.el.stopAnimation();s.setX(-10000);p.ghostBox=t;s.el.animate({from:m,to:t,listeners:{afteranimate:function(){delete s.componentLayout.lastComponentSize;p.unghost();delete p.ghostBox;n.removeCls(p.offsetsCls);p.onShowComplete(l,q)}}})}else{p.onShowComplete(l,q)}p.fireHierarchyEvent("show")},onShowComplete:function(e,d){var h=this;if(h.floating){h.onFloatShow()}Ext.callback(e,d||h);h.fireEvent("show",h);delete h.hiddenByLayout},hide:function(l,h,n){var m=this,j;if(m.pendingShow){delete m.pendingShow}if(!(m.rendered&&!m.isVisible())){j=(m.fireEvent("beforehide",m)!==false);if(m.hierarchicallyHidden||j){m.getHierarchyState().hidden=m.hidden=true;if(m.rendered){m.onHide.apply(m,arguments)}}}return m},onHide:function(n,m,q){var p=this,t,s,l,o=Ext.Element.getActiveElement();if(o===p.el||p.el.contains(o)){Ext.fly(o).blur()}n=p.getAnimateTarget(n);if(!p.ghost){n=null}if(n){l={x:n.getX(),y:n.getY(),width:n.dom.offsetWidth,height:n.dom.offsetHeight};t=p.ghost();t.el.stopAnimation();s=p.getSize();t.el.animate({to:l,listeners:{afteranimate:function(){delete t.componentLayout.lastComponentSize;t.el.hide();t.setHiddenState(true);t.el.setSize(s);p.afterHide(m,q)}}})}p.el.hide();if(!n){p.afterHide(m,q)}},afterHide:function(e,d){var h=this;h.hiddenByLayout=null;Ext.AbstractComponent.prototype.onHide.call(h);Ext.callback(e,d||h);h.fireEvent("hide",h);h.fireHierarchyEvent("hide")},onDestroy:function(){var c=this;if(c.rendered){Ext.destroy(c.dd,c.resizer,c.proxy,c.proxyWrap,c.resizerComponent,c.loadMask)}delete c.focusTask;c.callParent()},deleteMembers:function(){var d=arguments,e=d.length,h=0;for(;h<e;++h){delete this[d[h]]}},focus:function(p,t,n,s){var q=this,m,o,l;if(t){q.getFocusTask().delay(Ext.isNumber(t)?t:10,q.focus,q,[p,false,n,s]);return q}if(q.focusTask){q.focusTask.cancel()}if(q.rendered&&!q.isDestroyed&&q.isVisible(true)&&(m=q.getFocusEl())){if(m.isComponent){return m.focus(p,t)}if((o=m.dom)){if(m.needsTabIndex()){o.tabIndex=-1}if(q.floating){l=q.container.dom.scrollTop}m.focus();if(p){if(Ext.isArray(p)){if(q.selectText){q.selectText.apply(q,p)}}else{if(o.select){o.select()}else{if(q.selectText){q.selectText()}}}}Ext.callback(n,s)}if(q.floating){if(q!==q.zIndexManager.getActive()){q.toFront(true)}if(l!==undefined){q.container.dom.scrollTop=l}}}return q},getFocusTask:function(){if(!this.focusTask){Ext.Component.prototype.focusTask=new Ext.util.DelayedTask()}return this.focusTask},cancelFocus:function(){var c=this.focusTask;if(c){c.cancel()}},blur:function(){var c=this,d;if(c.rendered&&(d=c.getFocusEl())){c.blurring=true;d.blur();delete c.blurring}return c},getEl:function(){return this.el},getResizeEl:function(){return this.el},getPositionEl:function(){return this.el},getActionEl:function(){return this.el},getVisibilityEl:function(){return this.el},getRefOwner:function(){return this.ownerCt||this.ownerCmp||this.floatParent},getBubbleTarget:function(){return this.getRefOwner()},getContentTarget:function(){return this.el},cloneConfig:function(l){l=l||{};var j=l.id||Ext.id(),h=Ext.applyIf(l,this.initialConfig),e;h.id=j;e=Ext.getClass(this);return new e(h)},getXType:function(){return this.self.xtype},findParentBy:function(d){var c;for(c=this.getBubbleTarget();c&&!d(c,this);c=c.getBubbleTarget()){}return c||null},findParentByType:function(c){return Ext.isFunction(c)?this.findParentBy(function(a){return a.constructor===c}):this.up(c)},bubble:function(l,e,h){var j=this;while(j){if(l.apply(e||j,h||[j])===false){break}j=j.getBubbleTarget()}return this},getProxy:function(){var d=this,c;if(!d.proxy){c=Ext.getBody();d.proxy=d.el.createProxy(Ext.baseCSSPrefix+"proxy-el",c,true)}return d.proxy},fireHierarchyEvent:function(c){this.hierarchyEventSource.fireEvent(c,this)},onAdded:function(){this.callParent(arguments);if(this.hierarchyEventSource.hasListeners.added){this.fireHierarchyEvent("added")}}},1,["component","box"],["component","box"],{component:true,box:true},["widget.box","widget.component"],[["floating",Ext.util.Floating]],[Ext,"Component"],function(){this.hierarchyEventSource=this.prototype.hierarchyEventSource=new Ext.util.Observable({events:{hide:true,show:true,collapse:true,expand:true,added:true}})}));Ext.define("Ext.layout.container.border.Region",{override:"Ext.Component",initBorderRegion:function(){var c=this;if(!c._borderRegionInited){c._borderRegionInited=true;c.addStateEvents(["changeregion","changeweight"]);Ext.override(c,{getState:function(){var a=c.callParent();a=c.addPropertyToState(a,"region");a=c.addPropertyToState(a,"weight");return a}})}},getOwningBorderContainer:function(){var c=this.getOwningBorderLayout();return c&&c.owner},getOwningBorderLayout:function(){var c=this.ownerLayout;return(c&&c.isBorderLayout)?c:null},setBorderRegion:function(t){var u=this,A,z=u.region;if(t!==z){A=u.getOwningBorderLayout();if(A){var x=A.regionFlags[t],s=u.placeholder,C=u.splitter,B=A.owner,p=A.regionMeta,y=u.collapsed||u.floated,q,v,w;if(u.fireEventArgs("beforechangeregion",[u,t])===false){return z}Ext.suspendLayouts();u.region=t;Ext.apply(u,x);if(u.updateCollapseTool){u.updateCollapseTool()}if(C){Ext.apply(C,x);C.updateOrientation();v=B.items;w=v.indexOf(u);if(w>=0){q=p[t].splitterDelta;if(v.getAt(w+q)!==C){v.remove(C);w=v.indexOf(u);if(q>0){++w}v.insert(w,C)}}}if(s){if(y){u.expand(false)}B.remove(s);u.placeholder=null;if(y){u.collapse(null,false)}}B.updateLayout();Ext.resumeLayouts(true);u.fireEventArgs("changeregion",[u,z])}else{u.region=t}}return z},setRegionWeight:function(m){var n=this,h=n.getOwningBorderContainer(),l=n.placeholder,j=n.weight;if(m!==j){if(n.fireEventArgs("beforechangeweight",[n,m])!==false){n.weight=m;if(l){l.weight=m}if(h){h.updateLayout()}n.fireEventArgs("changeweight",[n,j])}}return j}});(Ext.cmd.derive("Ext.ElementLoader",Ext.Base,{statics:{Renderer:{Html:function(e,d,h){e.getTarget().update(d.responseText,h.scripts===true);return true}}},url:null,params:null,baseParams:null,autoLoad:false,target:null,loadMask:false,ajaxOptions:null,scripts:false,isLoader:true,constructor:function(d){var h=this,e;d=d||{};Ext.apply(h,d);h.setTarget(h.target);h.addEvents("beforeload","exception","load");h.mixins.observable.constructor.call(h);if(h.autoLoad){e=h.autoLoad;if(e===true){e={}}h.load(e)}},setTarget:function(c){var d=this;c=Ext.get(c);if(d.target&&d.target!=c){d.abort()}d.target=c},getTarget:function(){return this.target||null},abort:function(){var c=this.active;if(c!==undefined){Ext.Ajax.abort(c.request);if(c.mask){this.removeMask()}delete this.active}},removeMask:function(){this.target.unmask()},addMask:function(c){this.target.mask(c===true?null:c)},load:function(q){q=Ext.apply({},q);var o=this,l=Ext.isDefined(q.loadMask)?q.loadMask:o.loadMask,n=Ext.apply({},q.params),j=Ext.apply({},q.ajaxOptions),m=q.callback||o.callback,p=q.scope||o.scope||o;Ext.applyIf(j,o.ajaxOptions);Ext.applyIf(q,j);Ext.applyIf(n,o.params);Ext.apply(n,o.baseParams);Ext.applyIf(q,{url:o.url});Ext.apply(q,{scope:o,params:n,callback:o.onComplete});if(o.fireEvent("beforeload",o,q)===false){return}if(l){o.addMask(l)}o.active={options:q,mask:l,scope:p,callback:m,success:q.success||o.success,failure:q.failure||o.failure,renderer:q.renderer||o.renderer,scripts:Ext.isDefined(q.scripts)?q.scripts:o.scripts};o.active.request=Ext.Ajax.request(q);o.setOptions(o.active,q)},setOptions:Ext.emptyFn,onComplete:function(h,l,j){var n=this,m=n.active,o;if(m){o=m.scope;if(l){l=n.getRenderer(m.renderer).call(n,n,j,m)!==false}if(l){Ext.callback(m.success,o,[n,j,h]);n.fireEvent("load",n,j,h)}else{Ext.callback(m.failure,o,[n,j,h]);n.fireEvent("exception",n,j,h)}Ext.callback(m.callback,o,[n,l,j,h]);if(m.mask){n.removeMask()}}delete n.active},getRenderer:function(c){if(Ext.isFunction(c)){return c}return this.statics().Renderer.Html},startAutoRefresh:function(e,d){var h=this;h.stopAutoRefresh();h.autoRefresh=setInterval(function(){h.load(d)},e)},stopAutoRefresh:function(){clearInterval(this.autoRefresh);delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var c=this;c.stopAutoRefresh();delete c.target;c.abort();c.clearListeners()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext,"ElementLoader"],0));(Ext.cmd.derive("Ext.ComponentLoader",Ext.ElementLoader,{statics:{Renderer:{Data:function(h,e,l){var j=true;try{h.getTarget().update(Ext.decode(e.responseText))}catch(m){j=false}return j},Component:function(l,q,n){var m=true,o=l.getTarget(),e=[];try{e=Ext.decode(q.responseText)}catch(p){m=false}if(m){o.suspendLayouts();if(n.removeAll){o.removeAll()}o.add(e);o.resumeLayouts(true)}return m}}},target:null,loadMask:false,renderer:"html",setTarget:function(c){var d=this;if(Ext.isString(c)){c=Ext.getCmp(c)}if(d.target&&d.target!=c){d.abort()}d.target=c},removeMask:function(){this.target.setLoading(false)},addMask:function(c){this.target.setLoading(c)},setOptions:function(c,d){c.removeAll=Ext.isDefined(d.removeAll)?d.removeAll:this.removeAll},getRenderer:function(c){if(Ext.isFunction(c)){return c}var d=this.statics().Renderer;switch(c){case"component":return d.Component;case"data":return d.Data;default:return Ext.ElementLoader.Renderer.Html}}},0,0,0,0,0,0,[Ext,"ComponentLoader"],0));(Ext.cmd.derive("Ext.layout.SizeModel",Ext.Base,{constructor:function(n){var l=this,m=l.self,j=m.sizeModelsArray,h;Ext.apply(l,n);l[h=l.name]=true;l.fixed=!(l.auto=l.natural||l.shrinkWrap);j[l.ordinal=j.length]=m[h]=m.sizeModels[h]=l},statics:{sizeModelsArray:[],sizeModels:{}},calculated:false,configured:false,constrainedMax:false,constrainedMin:false,natural:false,shrinkWrap:false,calculatedFromConfigured:false,calculatedFromNatural:false,calculatedFromShrinkWrap:false,names:null},1,0,0,0,0,0,[Ext.layout,"SizeModel"],function(){var o=this,l=o.sizeModelsArray,q,j,m,n,p;new o({name:"calculated"});new o({name:"configured",names:{width:"width",height:"height"}});new o({name:"natural"});new o({name:"shrinkWrap"});new o({name:"calculatedFromConfigured",configured:true,names:{width:"width",height:"height"}});new o({name:"calculatedFromNatural",natural:true});new o({name:"calculatedFromShrinkWrap",shrinkWrap:true});new o({name:"constrainedMax",configured:true,constrained:true,names:{width:"maxWidth",height:"maxHeight"}});new o({name:"constrainedMin",configured:true,constrained:true,names:{width:"minWidth",height:"minHeight"}});new o({name:"constrainedDock",configured:true,constrained:true,constrainedByMin:true,names:{width:"dockConstrainedWidth",height:"dockConstrainedHeight"}});for(q=0,m=l.length;q<m;++q){p=l[q];p.pairsByHeightOrdinal=n=[];for(j=0;j<m;++j){n.push({width:p,height:l[j]})}}}));(Ext.cmd.derive("Ext.layout.Layout",Ext.Base,{isLayout:true,initialized:false,running:false,autoSizePolicy:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},statics:{layoutsByType:{},create:function(q,s){var m=Ext.ClassManager,u=this.layoutsByType,t,p,v,w,o,n;if(!q||typeof q==="string"){o=q||s;v={}}else{if(q.isLayout){return q}else{v=q;o=q.type||s}}if(!(w=u[o])){t="layout."+o;p=m.getNameByAlias(t);if(!p){n=true}w=m.get(p);if(n||!w){return m.instantiateByAlias(t,v||{})}u[o]=w}return new w(v)}},constructor:function(d){var c=this;c.id=Ext.id(null,c.type+"-");Ext.apply(c,d);c.layoutCount=0},beginLayout:Ext.emptyFn,beginLayoutCycle:function(l){var e=this,h=e.context,j;if(e.lastWidthModel!=l.widthModel){if(e.lastWidthModel){j=true}e.lastWidthModel=l.widthModel}if(e.lastHeightModel!=l.heightModel){if(e.lastWidthModel){j=true}e.lastHeightModel=l.heightModel}if(j){(h=l.context).clearTriggers(e,false);h.clearTriggers(e,true);e.triggerCount=0}},finishedLayout:function(c){this.lastWidthModel=c.widthModel;this.lastHeightModel=c.heightModel;this.ownerContext=null},redoLayout:Ext.emptyFn,undoLayout:Ext.emptyFn,getAnimatePolicy:function(){return this.animatePolicy},getItemSizePolicy:function(c){return this.autoSizePolicy},isItemBoxParent:function(c){return false},isItemLayoutRoot:function(j){var l=j.getSizeModel(),e=l.width,h=l.height;if(!j.componentLayout.lastComponentSize&&(e.calculated||h.calculated)){return false}return !e.shrinkWrap&&!h.shrinkWrap},isItemShrinkWrap:function(c){return c.shrinkWrap},isRunning:function(){return !!this.ownerContext},getItemsRenderTree:function(p,j){var m=p.length,o,n,q,l;if(m){l=[];for(o=0;o<m;++o){n=p[o];if(!n.rendered){if(j&&(j[n.id]!==undefined)){q=j[n.id]}else{this.configureItem(n);q=n.getRenderTree();if(j){j[n.id]=q}}if(q){l.push(q)}}}}return l},finishRender:Ext.emptyFn,finishRenderItems:function(l,j){var m=j.length,h,n;for(h=0;h<m;h++){n=j[h];if(n.rendering){n.finishRender(h);this.afterRenderItem(n)}}},renderChildren:function(){var d=this,e=d.getLayoutItems(),h=d.getRenderTarget();d.renderItems(e,h)},renderItems:function(j,l){var m=this,n=j.length,h=0,o;if(n){Ext.suspendLayouts();for(;h<n;h++){o=j[h];if(o&&!o.rendered){m.renderItem(o,l,h)}else{if(!m.isValidParent(o,l,h)){m.moveItem(o,l,h)}else{m.configureItem(o)}}}Ext.resumeLayouts(true)}},isValidParent:function(n,m,j){var q=n.el?n.el.dom:Ext.getDom(n),o=(m&&m.dom)||m,l=q.parentNode,p;if(l){p=l.className;if(p&&p.indexOf(Ext.baseCSSPrefix+"resizable-wrap")!==-1){q=q.parentNode}}if(q&&o){if(typeof j=="number"){j=this.getPositionOffset(j);return q===o.childNodes[j]}return q.parentNode===o}return false},getPositionOffset:function(c){return c},configureItem:function(c){c.ownerLayout=this},renderItem:function(l,j,h){var e=this;if(!l.rendered){e.configureItem(l);l.render(j,h);e.afterRenderItem(l)}},moveItem:function(d,h,e){h=h.dom||h;if(typeof e=="number"){e=h.childNodes[e]}h.insertBefore(d.el.dom,e||null);d.container=Ext.get(h);this.configureItem(d)},onContentChange:function(){this.owner.updateLayout();return true},initLayout:function(){this.initialized=true},setOwner:function(c){this.owner=c},getLayoutItems:function(){return[]},onAdd:function(c){c.ownerLayout=this},afterRenderItem:Ext.emptyFn,onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,afterRemove:function(l){var m=this,n=l.el,h=m.owner,j;if(l.rendered){j=[].concat(m.itemCls||[]);if(h.itemCls){j=Ext.Array.push(j,h.itemCls)}if(j.length){n.removeCls(j)}}delete l.ownerLayout},destroy:function(){var d=this,c;if(d.targetCls){c=d.getTarget();if(c){c.removeCls(d.targetCls)}}d.onDestroy()},sortWeightedItems:function(h,j){for(var e=0,l=h.length;e<l;++e){h[e].$i=e}Ext.Array.sort(h,function(c,d){var a=d.weight-c.weight;if(!a){a=c.$i-d.$i;if(c[j]){a=-a}}return a});for(e=0;e<l;++e){delete h[e].$i}}},1,0,0,0,0,0,[Ext.layout,"Layout"],function(){var c=this;c.prototype.sizeModels=c.sizeModels=Ext.layout.SizeModel.sizeModels}));(Ext.cmd.derive("Ext.layout.container.Container",Ext.layout.Layout,{alternateClassName:"Ext.layout.ContainerLayout",type:"container",beginCollapse:Ext.emptyFn,beginExpand:Ext.emptyFn,animatePolicy:null,childEls:["overflowPadderEl"],renderTpl:["{%this.renderBody(out,values)%}"],usesContainerHeight:true,usesContainerWidth:true,usesHeight:true,usesWidth:true,constructor:function(){this.callParent(arguments);this.mixins.elementCt.constructor.call(this)},destroy:function(){this.callParent();this.mixins.elementCt.destroy.call(this)},beginLayout:function(c){this.callParent(arguments);c.targetContext=c.paddingContext=c.getEl("getTarget",this);this.cacheChildItems(c)},beginLayoutCycle:function(h,e){var d=this;d.callParent(arguments);if(e){if(d.usesContainerHeight){++h.consumersContainerHeight}if(d.usesContainerWidth){++h.consumersContainerWidth}}},cacheChildItems:function(m){var o=m.context,l=[],j=this.getVisibleItems(),n=j.length,h;m.childItems=l;m.visibleItems=j;for(h=0;h<n;++h){l.push(o.getCmp(j[h]))}},cacheElements:function(){var c=this.owner;this.applyChildEls(c.el,c.id)},configureItem:function(n){var o=this,m=o.itemCls,h=o.owner.itemCls,j,l;n.ownerLayout=o;if(m){if(typeof m==="string"){l=[m]}else{l=m;j=!!l}}if(h){if(j){l=Ext.Array.clone(l)}l=Ext.Array.push(l||[],h)}if(l){n.addCls(l)}},doRenderBody:function(d,c){this.renderItems(d,c);this.renderContent(d,c)},doRenderContainer:function(h,l){var n=l.$comp.layout,j=n.getRenderTpl(),m=n.getRenderData();j.applyOut(m,h)},doRenderItems:function(e,j){var l=j.$layout,h=l.getRenderTree();if(h){Ext.DomHelper.generateMarkup(h,e)}},finishRender:function(){var d=this,h,e;d.callParent();d.cacheElements();h=d.getRenderTarget();e=d.getLayoutItems();d.finishRenderItems(h,e)},notifyOwner:function(){this.owner.afterLayout(this)},getContainerSize:function(x,t){var w=x.targetContext,u=w.getFrameInfo(),p=x.paddingContext.getPaddingInfo(),q=0,o=0,v,s,y,n;if(!x.widthModel.shrinkWrap){++o;y=t?w.getDomProp("width"):w.getProp("width");v=(typeof y=="number");if(v){++q;y-=u.width+p.width;if(y<0){y=0}}}if(!x.heightModel.shrinkWrap){++o;n=t?w.getDomProp("height"):w.getProp("height");s=(typeof n=="number");if(s){++q;n-=u.height+p.height;if(n<0){n=0}}}return{width:y,height:n,needed:o,got:q,gotAll:q==o,gotWidth:v,gotHeight:s}},getPositionOffset:function(d){if(!this.createsInnerCt){var c=this.owner.itemNodeOffset;if(c){d+=c}}return d},getLayoutItems:function(){var d=this.owner,c=d&&d.items;return(c&&c.items)||[]},getRenderData:function(){var c=this.owner;return{$comp:c,$layout:this,ownerId:c.id}},getRenderedItems:function(){var o=this,m=o.getRenderTarget(),l=o.getLayoutItems(),p=l.length,n=[],j,q;for(j=0;j<p;j++){q=l[j];if(q.rendered&&o.isValidParent(q,m,j)){n.push(q)}}return n},getRenderTarget:function(){return this.owner.getTargetEl()},getElementTarget:function(){return this.getRenderTarget()},getRenderTpl:function(){var d=this,c=Ext.XTemplate.getTpl(this,"renderTpl");if(!c.renderContent){d.owner.setupRenderTpl(c)}return c},getRenderTree:function(){var h,l=this.owner.items,j,e={};do{j=l.generation;h=this.getItemsRenderTree(this.getLayoutItems(),e)}while(l.generation!==j);return h},renderChildren:function(){var h=this,n=h.owner.items,l=h.getRenderTarget(),m,j;do{m=n.generation;j=h.getLayoutItems();h.renderItems(j,l)}while(n.generation!==m)},getScrollbarsNeeded:function(s,m,t,n){var u=Ext.getScrollbarSize(),p=typeof s=="number",l=typeof m=="number",o=0,q=0;if(!u.width){return 0}if(l&&m<n){q=2;s-=u.width}if(p&&s<t){o=1;if(!q&&l){m-=u.height;if(m<n){q=2}}}return q+o},getTarget:function(){return this.owner.getTargetEl()},getVisibleItems:function(){var l=this.getRenderTarget(),h=this.getLayoutItems(),m=h.length,j=[],o,n;for(o=0;o<m;o++){n=h[o];if(n.rendered&&this.isValidParent(n,l,o)&&n.hidden!==true){j.push(n)}}return j},getMoveAfterIndex:function(h){var e=this.owner,d=e.items;return d.indexOf(h)+1},checkNestedHeader:function(d,c){c.ownerCt.isStackedTargetHeaderParent=!!(d.ownerCt.items.length===1&&c.ownerCt.items.length===1);if(c.items.length===1){return this.owner.items.indexOf(c)}},moveItemBefore:function(o,n){var l=this.owner,j=o.ownerCt,p=l.items,m,q;if(o===n){return o}if(j){if(n){q=n.ownerCt;if(n.isGroupHeader&&(n.ownerCt&&n.ownerCt.isStackedTargetHeaderParent===undefined)){m=this.checkNestedHeader(o,n)}}j.remove(o,false);if(n){delete q.isStackedTargetHeaderParent}}if(n&&m===undefined){m=p.indexOf(n)}else{if(!n){m=p.length}}return l.insert(m,o)},setupRenderTpl:function(c){var d=this;c.renderBody=d.doRenderBody;c.renderContainer=d.doRenderContainer;c.renderItems=d.doRenderItems},getContentTarget:function(){return this.owner.getDefaultContentTarget()}},1,0,0,0,["layout.container"],[["elementCt",Ext.util.ElementContainer]],[Ext.layout.container,"Container",Ext.layout,"ContainerLayout"],0));(Ext.cmd.derive("Ext.layout.container.Auto",Ext.layout.container.Container,{type:"autocontainer",childEls:["outerCt","innerCt","clearEl"],reserveScrollbar:false,managePadding:true,manageOverflow:false,lastOverflowAdjust:{width:0,height:0},renderTpl:["{% if (!(Ext.isIEQuirks || Ext.isIE7m)) { %}",'<span id="{ownerId}-outerCt" style="display:table;" role="presentation">','<div id="{ownerId}-innerCt" style="display:table-cell;height:100%;','vertical-align:top;{%this.renderPadding(out, values)%}" class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}","</div>","</span>","{% } else if (values.shrinkWrapWidth) { %}",'<table id="{ownerId}-outerCt" class="'+Ext.plainTableCls+'" role="presentation">','<tbody role="presentation">','<tr role="presentation">','<td id="{ownerId}-innerCt" style="vertical-align:top;padding:0;','{%this.renderPadding(out, values)%}" class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}",'<div id="{ownerId}-clearEl" class="',Ext.baseCSSPrefix,'clear"','role="presentation"></div>',"</td>","</tr>","</tbody>","</table>","{% } else { %}",'<div id="{ownerId}-outerCt" style="zoom:1;{%this.renderPadding(out, values)%}" role="presentation">','<div id="{ownerId}-innerCt" style="zoom:1;height:100%;" class="{innerCtCls}" role="presentation">',"{%this.renderBody(out,values)%}",'<div id="{ownerId}-clearEl" class="',Ext.baseCSSPrefix,'clear"','role="presentation"></div>',"</div>","</div>","{% values.$layout.isShrinkWrapTpl = false %}","{% } %}"],tableTpl:['<table id="{ownerId}-outerCt" class="'+Ext.plainTableCls+'" role="presentation">','<tbody role="presentation">','<tr role="presentation">','<td id="{ownerId}-innerCt" style="vertical-align:top;padding:0;','{%this.renderPadding(out, values)%}" class="{innerCtCls}" role="presentation">',"</td>","</tr>","</tbody>","</table>"],isShrinkWrapTpl:true,beginLayout:function(m){var n=this,j,h,o,l;n.callParent(arguments);n.initContextItems(m);if(!n.isShrinkWrapTpl){if(m.widthModel.shrinkWrap){l=true}if(Ext.isStrict&&Ext.isIE7){o=n.getOverflowXStyle(m);if((o==="auto"||o==="scroll")&&m.paddingContext.getPaddingInfo().right){l=true}}if(l){n.insertTableCt(m)}}if(!n.isShrinkWrapTpl&&Ext.isIE7&&Ext.isStrict&&!n.clearElHasPadding){j=m.paddingContext.getPaddingInfo().bottom;h=n.getOverflowYStyle(m);if(j&&(h==="auto"||h==="scroll")){n.clearEl.setStyle("height",j);n.clearElHasPadding=true}}},beforeLayoutCycle:function(l){var h=this.owner,j=h.hierarchyState,e=h.hierarchyStateInner;if(!j||j.invalid){j=h.getHierarchyState();e=h.hierarchyStateInner}if(l.widthModel.shrinkWrap&&this.isShrinkWrapTpl){e.inShrinkWrapTable=true}else{delete e.inShrinkWrapTable}},beginLayoutCycle:function(y){var u=this,C=u.outerCt,v=u.lastOuterCtWidth||"",w=u.lastOuterCtHeight||"",t=u.lastOuterCtTableLayout||"",D=y.state,s,z,x,q,B,E,A;u.callParent(arguments);x=q=B="";if(!y.widthModel.shrinkWrap&&u.isShrinkWrapTpl){if(Ext.isIE7m&&Ext.isStrict){z=u.getOverflowYStyle(y);if(z==="auto"||z==="scroll"){E=true}}if(!E){x="100%"}A=u.owner.hierarchyStateInner;s=u.getOverflowXStyle(y);B=(A.inShrinkWrapTable||s==="auto"||s==="scroll")?"":"fixed"}if(!y.heightModel.shrinkWrap&&!Ext.supports.PercentageHeightOverflowBug){q="100%"}if((x!==v)||u.hasOuterCtPxWidth){C.setStyle("width",x);u.lastOuterCtWidth=x;u.hasOuterCtPxWidth=false}if(B!==t){C.setStyle("table-layout",B);u.lastOuterCtTableLayout=B}if((q!==w)||u.hasOuterCtPxHeight){C.setStyle("height",q);u.lastOuterCtHeight=q;u.hasOuterCtPxHeight=false}if(u.hasInnerCtPxHeight){u.innerCt.setStyle("height","");u.hasInnerCtPxHeight=false}D.overflowAdjust=D.overflowAdjust||u.lastOverflowAdjust},calculate:function(n){var j=this,h=n.state,l=j.getContainerSize(n,true),m=h.calculatedItems||(h.calculatedItems=j.calculateItems?j.calculateItems(n,l):true);j.setCtSizeIfNeeded(n,l);if(m&&n.hasDomProp("containerChildrenSizeDone")){j.calculateContentSize(n);if(l.gotAll){if(j.manageOverflow&&!n.state.secondPass&&!j.reserveScrollbar){j.calculateOverflow(n,l)}return}}j.done=false},calculateContentSize:function(n){var o=this,l=((n.widthModel.shrinkWrap?1:0)|(n.heightModel.shrinkWrap?2:0)),q=(l&1)||undefined,m=(l&2)||undefined,p=0,j=n.props;if(q){if(isNaN(j.contentWidth)){++p}else{q=undefined}}if(m){if(isNaN(j.contentHeight)){++p}else{m=undefined}}if(p){if(q&&!n.setContentWidth(o.measureContentWidth(n))){o.done=false}if(m&&!n.setContentHeight(o.measureContentHeight(n))){o.done=false}}},calculateOverflow:function(s){var n=this,t,l,u,o,p,q,m;p=(n.getOverflowXStyle(s)==="auto");q=(n.getOverflowYStyle(s)==="auto");if(p||q){u=Ext.getScrollbarSize();m=s.overflowContext.el.dom;o=0;if(m.scrollWidth>m.clientWidth){o|=1}if(m.scrollHeight>m.clientHeight){o|=2}t=(q&&(o&2))?u.width:0;l=(p&&(o&1))?u.height:0;if(t!==n.lastOverflowAdjust.width||l!==n.lastOverflowAdjust.height){n.done=false;s.invalidate({state:{overflowAdjust:{width:t,height:l},overflowState:o,secondPass:true}})}}},completeLayout:function(c){this.lastOverflowAdjust=c.state.overflowAdjust},doRenderPadding:function(h,m){var n=m.$layout,j=m.$layout.owner,l=j[j.contentPaddingProperty];if(n.managePadding&&l){h.push("padding:",j.unitizeBox(l))}},finishedLayout:function(c){var d=this.innerCt;this.callParent(arguments);if(Ext.isIEQuirks||Ext.isIE8m){d.repaint()}if(Ext.isOpera){d.setStyle("position","relative");d.dom.scrollWidth;d.setStyle("position","")}},getContainerSize:function(e,l){var h=this.callParent(arguments),j=e.state.overflowAdjust;if(j){h.width-=j.width;h.height-=j.height}return h},getRenderData:function(){var d=this.owner,c=this.callParent();if((Ext.isIEQuirks||Ext.isIE7m)&&((d.shrinkWrap&1)||(d.floating&&!d.width))){c.shrinkWrapWidth=true}return c},getRenderTarget:function(){return this.innerCt},getElementTarget:function(){return this.innerCt},getOverflowXStyle:function(c){return c.overflowXStyle||(c.overflowXStyle=this.owner.scrollFlags.overflowX||c.overflowContext.getStyle("overflow-x"))},getOverflowYStyle:function(c){return c.overflowYStyle||(c.overflowYStyle=this.owner.scrollFlags.overflowY||c.overflowContext.getStyle("overflow-y"))},initContextItems:function(e){var h=this,j=e.target,l=h.owner.getOverflowEl();e.outerCtContext=e.getEl("outerCt",h);e.innerCtContext=e.getEl("innerCt",h);e.overflowContext=(l===e.el)?e:e.getEl(l);if(j[j.contentPaddingProperty]!==undefined){e.paddingContext=h.isShrinkWrapTpl?e.innerCtContext:e.outerCtContext}},initLayout:function(){var h=this,d=Ext.getScrollbarSize().width,e=h.owner;h.callParent();if(d&&h.manageOverflow&&!h.hasOwnProperty("lastOverflowAdjust")){if(e.autoScroll||h.reserveScrollbar){h.lastOverflowAdjust={width:d,height:0}}}},insertTableCt:function(t){var n=this,u=n.owner,s=0,p,o,l,q,m;p=Ext.XTemplate.getTpl(this,"tableTpl");p.renderPadding=n.doRenderPadding;n.outerCt.dom.removeChild(n.innerCt.dom);o=document.createDocumentFragment();l=n.innerCt.dom.childNodes;q=l.length;for(;s<q;s++){o.appendChild(l[0])}m=n.getTarget();m.dom.innerHTML=p.apply({$layout:n,ownerId:n.owner.id});m.down("td").dom.appendChild(o);n.applyChildEls(u.el,u.id);n.isShrinkWrapTpl=true;t.removeEl(n.outerCt);t.removeEl(n.innerCt);n.initContextItems(t)},measureContentHeight:function(d){var e=this.outerCt.getHeight(),h=d.target;if(this.managePadding&&(h[h.contentPaddingProperty]===undefined)){e+=d.targetContext.getPaddingInfo().height}return e},measureContentWidth:function(n){var l,o,h,j,m;if(this.chromeCellMeasureBug){l=this.innerCt.dom;o=l.style;h=o.display;if(h=="table-cell"){o.display="";l.offsetWidth;o.display=h}}if(Ext.isSafari){l=this.outerCt.dom;o=l.style;o.display="table-cell";l.offsetWidth;l.style.display="table"}j=this.outerCt.getWidth();m=n.target;if(this.managePadding&&(m[m.contentPaddingProperty]===undefined)){j+=n.targetContext.getPaddingInfo().width}return j},setCtSizeIfNeeded:function(I,z){var u=this,B=z.width,E=z.height,G=I.paddingContext.getPaddingInfo(),D=u.getTarget(),H=u.getOverflowXStyle(I),C=u.getOverflowYStyle(I),y=(H==="auto"||H==="scroll"),A=(C==="auto"||C==="scroll"),x=Ext.getScrollbarSize(),w=u.isShrinkWrapTpl,K=u.manageOverflow,M,v,F,J;if(B&&!I.widthModel.shrinkWrap&&((Ext.isIE7m&&Ext.isStrict&&w&&A)||(Ext.isIEQuirks&&!w&&!y))){if(!K){if(A&&(D.dom.scrollHeight>D.dom.clientHeight)){B-=x.width}}I.outerCtContext.setProp("width",B+G.width);u.hasOuterCtPxWidth=true}if(E&&!I.heightModel.shrinkWrap){if(Ext.supports.PercentageHeightOverflowBug){v=true}if(((Ext.isIE8&&Ext.isStrict)||Ext.isIE7m&&Ext.isStrict&&w)){F=true;J=!Ext.isIE8}if((v||F)&&y&&(D.dom.scrollWidth>D.dom.clientWidth)){E=Math.max(E-x.height,0)}if(v){I.outerCtContext.setProp("height",E+G.height);u.hasOuterCtPxHeight=true}if(F){if(J){E+=G.height}I.innerCtContext.setProp("height",E);u.hasInnerCtPxHeight=true}}if(Ext.isIE7&&Ext.isStrict&&!w&&(C==="auto")){M=(H==="auto")?"overflow-x":"overflow-y";D.setStyle(M,"hidden");D.setStyle(M,"auto")}},setupRenderTpl:function(c){this.callParent(arguments);c.renderPadding=this.doRenderPadding},getContentTarget:function(){return this.innerCt}},0,0,0,0,["layout.auto","layout.autocontainer"],0,[Ext.layout.container,"Auto"],function(){this.prototype.chromeCellMeasureBug=Ext.isChrome&&Ext.chromeVersion>=26}));(Ext.cmd.derive("Ext.ZIndexManager",Ext.Base,{alternateClassName:"Ext.WindowGroup",statics:{zBase:9000},constructor:function(d){var c=this;c.map={};c.zIndexStack=[];c.front=null;if(d){if(d.isContainer){d.on("resize",c._onContainerResize,c);c.zseed=Ext.Number.from(c.rendered?d.getEl().getStyle("zIndex"):undefined,c.getNextZSeed());c.targetEl=d.getTargetEl();c.container=d}else{Ext.EventManager.onWindowResize(c._onContainerResize,c);c.zseed=c.getNextZSeed();c.targetEl=Ext.get(d)}}else{Ext.EventManager.onWindowResize(c._onContainerResize,c);c.zseed=c.getNextZSeed();Ext.onDocumentReady(function(){c.targetEl=Ext.getBody()})}},getNextZSeed:function(){return(Ext.ZIndexManager.zBase+=10000)},setBase:function(c){this.zseed=c;var d=this.assignZIndices();this._activateLast();return d},assignZIndices:function(){var o=this.zIndexStack,a=o.length,m=0,j=this.zseed,n,l;for(;m<a;m++){n=o[m];if(n&&!n.hidden){j=n.setZIndex(j);if(n.modal){l=n}}}if(l){this._showModalMask(l)}return j},_setActiveChild:function(e,h){var l=this.front,j=e.preventFocusOnActivate;if(e!==l){if(l&&!l.destroying){l.setActive(false,e)}this.front=e;if(e&&e!=h){e.preventFocusOnActivate=e.preventFocusOnActivate||h&&(h.preventFocusOnActivate||!h.focusOnToFront);e.setActive(true);if(e.modal){this._showModalMask(e)}e.preventFocusOnActivate=j}}},onComponentHide:function(c){this._activateLast()},_activateLast:function(){var j=this,h=j.zIndexStack,l=h.length-1,e;for(;l>=0&&h[l].hidden;--l){}if((e=h[l])){j._setActiveChild(e,j.front);if(e.modal){return}}else{if(j.front&&!j.front.destroying){j.front.setActive(false)}j.front=null}for(;l>=0;--l){e=h[l];if(e.isVisible()&&e.modal){j._showModalMask(e);return}}j._hideModalMask()},_showModalMask:function(j){var p=this,m=j.el.getStyle("zIndex")-4,q=j.floatParent?j.floatParent.getTargetEl():j.container,l=p.mask,n=p.maskShim,o;if(!l){if(Ext.isIE6){n=p.maskShim=Ext.getBody().createChild({tag:"iframe",role:"presentation",cls:Ext.baseCSSPrefix+"shim "+Ext.baseCSSPrefix+"mask-shim"});n.setVisibilityMode(Ext.Element.DISPLAY)}l=p.mask=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"mask",style:"height:0;width:0"});l.setVisibilityMode(Ext.Element.DISPLAY);l.on("click",p._onMaskClick,p)}l.maskTarget=q;o=p.getMaskBox();if(n){n.setStyle("zIndex",m);n.show();n.setBox(o)}l.setStyle("zIndex",m);l.show();l.setBox(o)},_hideModalMask:function(){var c=this.mask,d=this.maskShim;if(c&&c.isVisible()){c.maskTarget=undefined;c.hide();if(d){d.hide()}}},_onMaskClick:function(){if(this.front){this.front.focus()}},getMaskBox:function(){var c=this.mask.maskTarget;if(c.dom===document.body){return{height:Math.max(document.body.scrollHeight,Ext.dom.Element.getDocumentHeight()),width:Math.max(document.body.scrollWidth,document.documentElement.clientWidth),x:0,y:0}}else{return c.getBox()}},_onContainerResize:function(){var l=this,e=l.mask,h=l.maskShim,j;if(e&&e.isVisible()){e.hide();if(h){h.hide()}j=l.getMaskBox();if(h){h.setSize(j);h.show()}e.setSize(j);e.show()}},register:function(d){var h=this,e=d.afterHide;if(d.zIndexManager){d.zIndexManager.unregister(d)}d.zIndexManager=h;h.map[d.id]=d;h.zIndexStack.push(d);d.afterHide=function(){e.apply(d,arguments);h.onComponentHide(d)}},unregister:function(e){var d=this,h=d.map;delete e.zIndexManager;if(h&&h[e.id]){delete h[e.id];delete e.afterHide;Ext.Array.remove(d.zIndexStack,e);d._activateLast()}},get:function(c){return c.isComponent?c:this.map[c]},bringToFront:function(h,m){var n=this,j=false,l=n.zIndexStack;h=n.get(h);if(h!==n.front){Ext.Array.remove(l,h);if(h.preventBringToFront){l.unshift(h)}else{l.push(h)}n.assignZIndices();if(!m){n._activateLast()}j=true;n.front=h;if(h.modal){n._showModalMask(h)}}return j},sendToBack:function(d){var c=this;d=c.get(d);Ext.Array.remove(c.zIndexStack,d);c.zIndexStack.unshift(d);c.assignZIndices();this._activateLast();return d},hideAll:function(){var d=this.map,e,h;for(h in d){if(d.hasOwnProperty(h)){e=d[h];if(e.isComponent&&e.isVisible()){e.hide()}}}},hide:function(){var j=0,e=this.zIndexStack,h=e.length,l;this.tempHidden=[];for(;j<h;j++){l=e[j];if(l.isVisible()){this.tempHidden.push(l);l.el.hide();l.hidden=true}}},show:function(){var l=0,j=this.tempHidden,h=j?j.length:0,e;for(;l<h;l++){e=j[l];e.el.show();e.hidden=false;e.setPosition(e.x,e.y)}delete this.tempHidden},getActive:function(){return this.front},getBy:function(n,o){var m=[],p=0,j=this.zIndexStack,l=j.length,q;for(;p<l;p++){q=j[p];if(n.call(o||q,q)!==false){m.push(q)}}return m},each:function(n,h){var m=this.map,l,j;for(l in m){if(m.hasOwnProperty(l)){j=m[l];if(j.isComponent&&n.call(h||j,j)===false){return}}}},eachBottomUp:function(l,m){var h=this.zIndexStack,n=0,j=h.length,o;for(;n<j;n++){o=h[n];if(o.isComponent&&l.call(m||o,o)===false){return}}},eachTopDown:function(l,m){var j=this.zIndexStack,n=j.length,h;for(;n-->0;){h=j[n];if(h.isComponent&&l.call(m||h,h)===false){return}}},destroy:function(){var e=this,l=e.map,h,j;for(j in l){if(l.hasOwnProperty(j)){h=l[j];if(h.isComponent){h.destroy()}}}Ext.destroy(e.mask);Ext.destroy(e.maskShim);delete e.zIndexStack;delete e.map;delete e.container;delete e.targetEl}},1,0,0,0,0,0,[Ext,"ZIndexManager",Ext,"WindowGroup"],function(){Ext.WindowManager=Ext.WindowMgr=new this()}));(Ext.cmd.derive("Ext.Queryable",Ext.Base,{isQueryable:true,query:function(c){c=c||"*";return Ext.ComponentQuery.query(c,this)},queryBy:function(n,o){var q=[],j=this.getRefItems(true),p=0,l=j.length,m;for(;p<l;++p){m=j[p];if(n.call(o||m,m)!==false){q.push(m)}}return q},queryById:function(c){return this.down("#"+c)},child:function(d){var c=this.getRefItems();if(d&&d.isComponent){d="#"+Ext.escapeId(d.getItemId())}if(d){c=Ext.ComponentQuery.query(d,c)}if(c.length){return c[0]}return null},down:function(c){if(c&&c.isComponent){c="#"+Ext.escapeId(c.getItemId())}c=c||"";return this.query(c)[0]||null},visitPreOrder:function(h,j,l,e){Ext.ComponentQuery._visit(true,h,this,j,l,e)},visitPostOrder:function(h,j,l,e){Ext.ComponentQuery._visit(false,h,this,j,l,e)},getRefItems:function(){return[]}},0,0,0,0,0,0,[Ext,"Queryable"],0));(Ext.cmd.derive("Ext.container.AbstractContainer",Ext.Component,{renderTpl:"{%this.renderContainer(out,values)%}",suspendLayout:false,autoDestroy:true,defaultType:"panel",detachOnRemove:true,isContainer:true,layoutCounter:0,baseCls:Ext.baseCSSPrefix+"container",defaultLayoutType:"auto",ariaRole:"presentation",initComponent:function(){var c=this;c.addEvents("afterlayout","beforeadd","beforeremove","add","remove");c.callParent();c.getLayout();c.initItems()},initItems:function(){var c=this,d=c.items;c.items=new Ext.util.AbstractMixedCollection(false,c.getComponentId);c.floatingItems=new Ext.util.MixedCollection(false,c.getComponentId);if(d){if(!Ext.isArray(d)){d=[d]}c.add(d)}},getFocusEl:function(){return this.getTargetEl()},finishRenderChildren:function(){this.callParent();var c=this.getLayout();if(c){c.finishRender()}},beforeRender:function(){var d=this,e=d.getLayout(),h;d.callParent();if(!e.initialized){e.initLayout()}h=e.targetCls;if(h){d.applyTargetCls(h)}},applyTargetCls:function(c){this.addCls(c)},afterComponentLayout:function(){var e=this.floatingItems.items,h=e.length,j,l;this.callParent(arguments);for(j=0;j<h;j++){l=e[j];if(!l.rendered&&l.autoShow){l.show()}}},onPosition:function(){this.callParent(arguments);this.repositionFloatingItems()},onResize:function(){this.callParent(arguments);this.repositionFloatingItems()},repositionFloatingItems:function(){var e=this.floatingItems.items,h=e.length,j,l;for(j=0;j<h;j++){l=e[j];if(l.el&&!l.hidden){l.setPosition(l.x,l.y)}}},setupRenderTpl:function(c){this.callParent(arguments);this.getLayout().setupRenderTpl(c)},getDefaultContentTarget:function(){return this.el},getContentTarget:function(){return this.getLayout().getContentTarget()},setLayout:function(c){var d=this.layout;if(d&&d.isLayout&&d!=c){d.setOwner(null)}this.layout=c;c.setOwner(this)},getLayout:function(){var c=this;if(!c.layout||!c.layout.isLayout){c.setLayout(Ext.layout.Layout.create(c.layout,c.self.prototype.layout||c.defaultLayoutType))}return c.layout},doLayout:function(){this.updateLayout();return this},afterLayout:function(c){var d=this;++d.layoutCounter;if(d.hasListeners.afterlayout){d.fireEvent("afterlayout",d,c)}},prepareItems:function(h,n){if(Ext.isArray(h)){h=h.slice()}else{h=[h]}var l=this,o=0,j=h.length,m;for(;o<j;o++){m=h[o];if(m==null){Ext.Array.erase(h,o,1);--o;--j}else{if(n){m=this.applyDefaults(m)}m.isContained=l;h[o]=l.lookupComponent(m);delete m.isContained;delete h[o].isContained}}return h},applyDefaults:function(d){var c=this.defaults;if(c){if(Ext.isFunction(c)){c=c.call(this,d)}if(Ext.isString(d)){d=Ext.ComponentManager.get(d)}Ext.applyIf(d,c)}return d},lookupComponent:function(c){return(typeof c=="string")?Ext.ComponentManager.get(c):Ext.ComponentManager.create(c,this.defaultType)},getComponentId:function(c){return c.getItemId&&c.getItemId()},add:function(){var s=this,u=Ext.Array.slice(arguments),w=(typeof u[0]=="number")?u.shift():-1,x=s.getLayout(),p,t,z,A,o,q,v,y=false;if(u.length==1&&Ext.isArray(u[0])){t=u[0];p=true}else{t=u}if(s.rendered){Ext.suspendLayouts()}v=t=s.prepareItems(t,true);A=t.length;if(!p&&A==1){v=t[0]}for(z=0;z<A;z++){o=t[z];q=(w<0)?s.items.length:(w+z);if(o.floating){s.floatingItems.add(o);o.onAdded(s,q);if(s.hasListeners.add){s.fireEvent("add",s,o,q)}}else{if((!s.hasListeners.beforeadd||s.fireEvent("beforeadd",s,o,q)!==false)&&s.onBeforeAdd(o)!==false){s.items.insert(q,o);o.onAdded(s,q);s.onAdd(o,q);x.onAdd(o,q);y=true;if(s.hasListeners.add){s.fireEvent("add",s,o,q)}}}}if(y){s.updateLayout()}if(s.rendered){Ext.resumeLayouts(true)}return v},onAdd:Ext.emptyFn,onRemove:Ext.emptyFn,insert:function(h,d){var e;if(d&&d.isComponent){e=this.items.indexOf(d);if(e!==-1){return this.move(e,h)}}return this.add(h,d)},move:function(e,j){var h=this.items,l;if(e.isComponent){e=h.indexOf(e)}l=h.getAt(e);if(e!==j){l=h.removeAt(e);if(l===false){return false}h.insert(j,l);this.onMove(l,e,j);this.updateLayout()}return l},onMove:Ext.emptyFn,onBeforeAdd:function(c){var d=c.ownerCt;if(d&&d!==this){d.remove(c,false)}},remove:function(h,c){var l=this,j=l.getComponent(h);if(j&&(!l.hasListeners.beforeremove||l.fireEvent("beforeremove",l,j)!==false)){l.doRemove(j,c);if(l.hasListeners.remove){l.fireEvent("remove",l,j)}if(!l.destroying&&!j.floating){l.updateLayout()}}return j},doRemove:function(q,j){j=j===true||(j!==false&&this.autoDestroy);var n=this,o=n.layout,l=o&&n.rendered,p=q.destroying||j,m=q.floating;if(m){n.floatingItems.remove(q)}else{n.items.remove(q)}if(l&&!m){if(o.running){Ext.AbstractComponent.cancelLayout(q,p)}o.onRemove(q,p)}q.onRemoved(p);n.onRemove(q,p);if(j){q.destroy()}else{if(l&&!m&&!n.isDestroyed){o.afterRemove(q)}if(n.detachOnRemove&&q.rendered){n.detachComponent(q)}}},detachComponent:function(c){Ext.getDetachedBody().appendChild(c.getEl())},removeAll:function(q){var m=this,o=m.items.items.slice().concat(m.floatingItems.items),j=[],p=0,l=o.length,n;m.suspendLayouts();for(;p<l;p++){n=o[p];m.remove(n,q);if(n.ownerCt!==m){j.push(n)}}m.resumeLayouts(!!l);return j},getRefItems:function(q){var m=this,p=m.items.items,j=p.length,o=0,n,l=[];for(;o<j;o++){n=p[o];l[l.length]=n;if(q&&n.getRefItems){l.push.apply(l,n.getRefItems(true))}}p=m.floatingItems.items;j=p.length;for(o=0;o<j;o++){n=p[o];l[l.length]=n;if(q&&n.getRefItems){l.push.apply(l,n.getRefItems(true))}}return l},cascade:function(n,c,w){var o=this,t=o.items?o.items.items:[],s=t.length,u=0,p,q=w?w.concat(o):[o],v=q.length-1;if(n.apply(c||o,q)!==false){for(;u<s;u++){p=t[u];if(p.cascade){p.cascade(n,c,w)}else{q[v]=p;n.apply(c||p,q)}}}return this},isAncestor:function(c){while(c){if(c.ownerCt===this){return true}c=c.ownerCt}},getComponent:function(d){if(Ext.isObject(d)){d=d.getItemId()}var c=this.items.get(d);if(!c&&typeof d!="number"){c=this.floatingItems.get(d)}return c},contains:function(h,d){var e=false;if(d){this.cascade(function(a){if(a.contains&&a.contains(h)){e=true;return false}});return e}else{return this.items.contains(h)||this.floatingItems.contains(h)}},moveBefore:function(d,c){return this.layout.moveItemBefore(d,c)},moveAfter:function(o,m){var p=this,l=p.items,q=p.layout,j=m?q.getMoveAfterIndex(m):0,n=l.getAt(j);if(n===undefined&&(o.isGroupHeader&&m.isGroupHeader)){j=q.checkNestedHeader(o,m);n=l.getAt(j)}return q.moveItemBefore(o,n)},nextChild:function(n,t){var p=this,s=p.items,o=s.indexOf(n),q=0,l=s.length,m;if(o!==-1){if(t){for(;q<l;q++){m=s.getAt(o+q);if(!m||Ext.ComponentQuery.is(m,t)){break}}}else{m=s.getAt(o+1)}if(!m&&p.ownerCt){m=p.ownerCt.nextChild(p,t)}}return m},prevChild:function(n,t){var p=this,s=p.items,o=s.indexOf(n),q=0,l=s.length,m;if(o!==-1){if(t){for(;q<l;q++){m=s.getAt(o-q);if(!m||Ext.ComponentQuery.is(m,t)){break}}}else{m=s.getAt(o-1)}if(!m&&p.ownerCt){m=p.ownerCt.nextChild(p,t)}}return m},enable:function(){this.callParent(arguments);var j=this.getChildItemsToDisable(),l=j.length,e,h;for(h=0;h<l;h++){e=j[h];if(e.resetDisable){e.enable()}}return this},disable:function(){this.callParent(arguments);var j=this.getChildItemsToDisable(),l=j.length,e,h;for(h=0;h<l;h++){e=j[h];if(e.resetDisable!==false&&!e.disabled){e.disable();e.resetDisable=true}}return this},getChildItemsToDisable:function(){return this.query("[isFormField],button")},beforeDestroy:function(){var c=this,h=c.items,l=c.floatingItems,j;if(h){while((j=h.first())){c.doRemove(j,true)}}if(l){while((j=l.first())){c.doRemove(j,true)}}Ext.destroy(c.layout);c.callParent()}},0,0,["component","box"],{component:true,box:true},0,[["queryable",Ext.Queryable]],[Ext.container,"AbstractContainer"],0));(Ext.cmd.derive("Ext.container.Container",Ext.container.AbstractContainer,{alternateClassName:"Ext.Container",getChildByElement:function(o,l){var m,q,j=0,p=this.getRefItems(),n=p.length;o=Ext.getDom(o);for(;j<n;j++){m=p[j];q=m.getEl();if(q&&((q.dom===o)||q.contains(o))){return(l&&m.getChildByElement)?m.getChildByElement(o,l):m}}return null}},0,["container"],["component","box","container"],{component:true,box:true,container:true},["widget.container"],0,[Ext.container,"Container",Ext,"Container"],0));(Ext.cmd.derive("Ext.layout.container.Editor",Ext.layout.container.Container,{autoSizeDefault:{width:"field",height:"field"},sizePolicies:{$:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},boundEl:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1}},boundEl:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},boundEl:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(m){var n=this,j=n.owner.autoSize,h=j&&j.width,l=n.sizePolicies;l=l[h]||l.$;h=j&&j.height;l=l[h]||l.$;return l},calculate:function(l){var m=this,h=m.owner,j=h.autoSize,n,o;if(j===true){j=m.autoSizeDefault}if(j){n=m.getDimension(h,j.width,"getWidth",h.width);o=m.getDimension(h,j.height,"getHeight",h.height)}l.childItems[0].setSize(n,o);l.setWidth(n);l.setHeight(o);l.setContentSize(n||h.field.getWidth(),o||h.field.getHeight())},getDimension:function(h,e,j,l){switch(e){case"boundEl":return h.boundEl[j]();case"field":return undefined;default:return l}}},0,0,0,0,["layout.editor"],0,[Ext.layout.container,"Editor"],0));(Ext.cmd.derive("Ext.Editor",Ext.container.Container,{layout:"editor",allowBlur:true,revertInvalid:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,focusOnToFront:false,preventDefaultAlign:true,hidden:true,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var d=this,c=d.field=Ext.ComponentManager.create(d.field,"textfield");c.inEditor=true;c.msgTarget=c.msgTarget||"qtip";d.mon(c,{scope:d,blur:d.onFieldBlur,specialkey:d.onSpecialKey});if(c.grow){d.mon(c,"autosize",d.onFieldAutosize,d,{delay:1})}d.floating={constrain:d.constrain};d.items=c;d.callParent(arguments);d.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onAdded:function(c){this.ownerCmp=c},onFieldAutosize:function(){this.updateLayout()},afterRender:function(h,j){var n=this,l=n.field,m=l.inputEl;n.callParent(arguments);if(m){m.dom.name="";if(n.swallowKeys){m.swallowEvent(["keypress","keydown"])}}},onSpecialKey:function(l,m){var n=this,h=m.getKey(),j=n.completeOnEnter&&h==m.ENTER,o=n.cancelOnEsc&&h==m.ESC;if(j||o){m.stopEvent();Ext.defer(function(){if(j){n.completeEdit()}else{n.cancelEdit()}},1)}n.fireEvent("specialkey",n,l,m)},startEdit:function(j,n){var h=this,m=h.field,l;h.completeEdit();h.boundEl=Ext.get(j);l=h.boundEl.dom;n=Ext.isDefined(n)?n:Ext.String.trim(l.textContent||l.innerText||l.innerHTML);if(!h.rendered&&!h.renderTo&&h.ownerCt){(h.renderTo=h.ownerCt.el).position()}if(h.fireEvent("beforestartedit",h,h.boundEl,n)!==false){h.startValue=n;h.show();h.onStartEdit();m.suspendEvents();m.reset();m.setValue(n);m.resumeEvents();h.realign(true);m.focus(m.selectOnFocus?true:[m.getRawValue().length]);if(m.autoSize){m.autoSize()}h.editing=true}},realign:function(d){var c=this;if(d===true){c.updateLayout()}c.alignTo(c.boundEl,c.alignment,c.offsets)},completeEdit:function(h){var e=this,j=e.field,l;if(!e.editing){return}if(j.assertValue){j.assertValue()}l=e.getValue();if(!j.isValid()){if(e.revertInvalid!==false){e.cancelEdit(h)}return}if(String(l)===String(e.startValue)&&e.ignoreNoChange){e.onEndEdit(h);return}if(e.fireEvent("beforecomplete",e,l,e.startValue)!==false){l=e.getValue();if(e.updateEl&&e.boundEl){e.boundEl.update(l)}e.onEndEdit(h);e.fireEvent("complete",e,l,e.startValue)}},cancelEdit:function(j){var n=this,h=n.startValue,l=n.field,m;if(n.editing){if(l){m=n.editedValue=n.getValue();l.suspendEvents();n.setValue(h);l.resumeEvents()}n.fireEvent("canceledit",n,m,h);n.onEndEdit();delete n.editedValue}},onFieldBlur:function(j,l){var e=this,h=e.editingPlugin,m=Ext.Element.getActiveElement();if(e.allowBlur===true&&e.editing&&e.selectSameEditor!==true){e.completeEdit()}if(Ext.fly(m).isFocusable()||m.getAttribute("tabIndex")){m.focus()}},onStartEdit:function(){var c=this;if(c.hideEl!==false){c.boundEl.hide()}c.fireEvent("startedit",c,c.boundEl,c.startValue)},onEndEdit:function(e){var d=this,h=d.field;if(!e){d.hide()}if(h.hasFocus&&h.triggerBlur){h.triggerBlur()}if(h.collapse){h.collapse()}if(d.hideEl!==false){d.boundEl.show()}d.editing=false},getValue:function(){return this.field.getValue()},setValue:function(c){this.field.setValue(c)},beforeDestroy:function(){var c=this;Ext.destroy(c.field);delete c.field;delete c.boundEl;c.callParent(arguments)}},0,["editor"],["component","box","container","editor"],{component:true,box:true,container:true,editor:true},["widget.editor"],0,[Ext,"Editor"],0));(Ext.cmd.derive("Ext.util.KeyMap",Ext.Base,{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(d){var c=this;if((arguments.length!==1)||(typeof d==="string")||d.dom||d.tagName||d===document||d.isComponent){c.legacyConstructor.apply(c,arguments);return}Ext.apply(c,d);c.bindings=[];if(!c.target.isComponent){c.target=Ext.get(c.target)}if(c.binding){c.addBinding(c.binding)}else{if(d.key){c.addBinding(d)}}c.enable()},legacyConstructor:function(e,j,h){var l=this;Ext.apply(l,{target:Ext.get(e),eventName:h||l.eventName,bindings:[]});if(j){l.addBinding(j)}l.enable()},addBinding:function(l){var n=this,m=l.key,h,j;if(n.processing){n.bindings=bindings.slice(0)}if(Ext.isArray(l)){for(h=0,j=l.length;h<j;h++){n.addBinding(l[h])}return}n.bindings.push(Ext.apply({keyCode:n.processKeys(m)},l))},removeBinding:function(n){var o=this,m=o.bindings,l=m.length,j,p,q;if(o.processing){o.bindings=m.slice(0)}q=o.processKeys(n.key);for(j=0;j<l;++j){p=m[j];if((p.fn||p.handler)===(n.fn||n.handler)&&p.scope===n.scope){if(n.alt===p.alt&&n.crtl===p.crtl&&n.shift===p.shift){if(Ext.Array.equals(p.keyCode,q)){Ext.Array.erase(o.bindings,j,1);return}}}}},processKeys:function(n){var m=false,p,o,j,l,q;if(Ext.isString(n)){o=[];j=n.toUpperCase();for(q=0,l=j.length;q<l;++q){o.push(j.charCodeAt(q))}n=o;m=true}if(!Ext.isArray(n)){n=[n]}if(!m){for(q=0,l=n.length;q<l;++q){p=n[q];if(Ext.isString(p)){n[q]=p.toUpperCase().charCodeAt(0)}}}return n},handleTargetEvent:(function(){var c=/input|textarea/i;return function(n){var o=this,l,q,a,m,p;if(o.enabled){l=o.bindings;q=0;a=l.length;n=o.processEvent.apply(o||o.processEventScope,arguments);if(o.ignoreInputFields){m=n.target;p=m.contentEditable;if(c.test(m.tagName)||(p===""||p==="true")){return}}if(!n.getKey){return n}o.processing=true;for(;q<a;++q){o.processBinding(l[q],n)}o.processing=false}}}()),processEvent:Ext.identityFn,processBinding:function(q,w){if(this.checkModifiers(q,w)){var p=w.getKey(),n=q.fn||q.handler,m=q.scope||this,o=q.keyCode,v=q.defaultEventAction,u,s,t=new Ext.EventObjectImpl(w);for(u=0,s=o.length;u<s;++u){if(p===o[u]){if(n.call(m,p,w)!==true&&v){t[v]()}break}}}},checkModifiers:function(m,o){var p=["shift","ctrl","alt"],q=0,l=p.length,n,j;for(;q<l;++q){j=p[q];n=m[j];if(!(n===undefined||(n===o[j+"Key"]))){return false}}return true},on:function(j,p,q){var m,l,o,n;if(Ext.isObject(j)&&!Ext.isArray(j)){m=j.key;l=j.shift;o=j.ctrl;n=j.alt}else{m=j}this.addBinding({key:m,shift:l,ctrl:o,alt:n,fn:p,scope:q})},un:function(j,p,q){var m,l,o,n;if(Ext.isObject(j)&&!Ext.isArray(j)){m=j.key;l=j.shift;o=j.ctrl;n=j.alt}else{m=j}this.removeBinding({key:m,shift:l,ctrl:o,alt:n,fn:p,scope:q})},isEnabled:function(){return this.enabled},enable:function(){var c=this;if(!c.enabled){c.target.on(c.eventName,c.handleTargetEvent,c);c.enabled=true}},disable:function(){var c=this;if(c.enabled){c.target.removeListener(c.eventName,c.handleTargetEvent,c);c.enabled=false}},setDisabled:function(c){if(c){this.disable()}else{this.enable()}},destroy:function(h){var e=this,d=e.target;e.bindings=[];e.disable();if(h===true){if(d.isComponent){d.destroy()}else{d.remove()}}delete e.target}},1,0,0,0,0,0,[Ext.util,"KeyMap",Ext,"KeyMap"],0));(Ext.cmd.derive("Ext.util.KeyNav",Ext.Base,{alternateClassName:"Ext.KeyNav",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(d){var c=this;if(arguments.length===2){c.legacyConstructor.apply(c,arguments);return}c.setConfig(d)},legacyConstructor:function(c,d){this.setConfig(Ext.apply({target:c},d))},setConfig:function(l){var q=this,t={target:l.target,ignoreInputFields:l.ignoreInputFields,eventName:q.getKeyEvent("forceKeyDown" in l?l.forceKeyDown:q.forceKeyDown,l.eventName)},p,m,n,s,o;if(q.map){q.map.destroy()}if(l.processEvent){t.processEvent=l.processEvent;t.processEventScope=l.processEventScope||q}if(l.keyMap){p=q.map=l.keyMap}else{p=q.map=new Ext.util.KeyMap(t);q.destroyKeyMap=true}m=Ext.util.KeyNav.keyOptions;n=l.scope||q;for(s in l){o=l[s];if(o&&(s.length===1||(s=m[s])||(!isNaN(s=parseInt(s,10))))){if(typeof o==="function"){o={handler:o,defaultEventAction:(l.defaultEventAction!==undefined)?l.defaultEventAction:q.defaultEventAction}}p.addBinding({key:s,ctrl:o.ctrl,shift:o.shift,alt:o.alt,handler:Ext.Function.bind(q.handleEvent,o.scope||n,o.handler||o.fn,true),defaultEventAction:(o.defaultEventAction!==undefined)?o.defaultEventAction:q.defaultEventAction})}}p.disable();if(!l.disabled){p.enable()}},handleEvent:function(h,d,e){return e.call(this,d)},disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,eventName:"keypress",destroy:function(c){var d=this;if(d.destroyKeyMap&&d.map){d.map.destroy(c)}d.map=null},enable:function(){if(this.map){this.map.enable();this.disabled=false}},disable:function(){if(this.map){this.map.disable()}this.disabled=true},setDisabled:function(c){this.map.setDisabled(c);this.disabled=c},getKeyEvent:function(c,d){if(c||(Ext.EventManager.useKeyDown&&!d)){return"keydown"}else{return d||this.eventName}}},1,0,0,0,0,0,[Ext.util,"KeyNav",Ext,"KeyNav"],0));(Ext.cmd.derive("Ext.FocusManager",Ext.Base,{singleton:true,alternateClassName:["Ext.FocusMgr"],enabled:false,focusElementCls:Ext.baseCSSPrefix+"focus-element",focusFrameCls:Ext.baseCSSPrefix+"focus-frame",whitelist:["textfield"],constructor:function(e){var d=this,h=Ext.ComponentQuery;d.mixins.observable.constructor.call(d,e);d.addEvents("beforecomponentfocus","componentfocus","disable","enable");d.focusTask=new Ext.util.DelayedTask(d.handleComponentFocus,d);Ext.override(Ext.AbstractComponent,{onFocus:function(){this.callParent(arguments);if(d.enabled&&this.hasFocus){Array.prototype.unshift.call(arguments,this);d.onComponentFocus.apply(d,arguments)}},onBlur:function(){this.callParent(arguments);if(d.enabled&&!this.hasFocus){Array.prototype.unshift.call(arguments,this);d.onComponentBlur.apply(d,arguments)}},onDestroy:function(){this.callParent(arguments);if(d.enabled){Array.prototype.unshift.call(arguments,this);d.onComponentDestroy.apply(d,arguments)}}});Ext.override(Ext.Component,{afterHide:function(){this.callParent(arguments);if(d.enabled){Array.prototype.unshift.call(arguments,this);d.onComponentHide.apply(d,arguments)}}});d.keyNav=new Ext.util.KeyNav(Ext.getDoc(),{disabled:true,scope:d,backspace:d.focusLast,enter:d.navigateIn,esc:d.navigateOut,tab:d.navigateSiblings,space:d.navigateIn,del:d.focusLast,left:d.navigateSiblings,right:d.navigateSiblings,down:d.navigateSiblings,up:d.navigateSiblings});d.focusData={};d.subscribers=new Ext.util.HashMap();d.focusChain={};Ext.apply(h.pseudos,{nextFocus:function(m,n,c){c=c||1;n=parseInt(n,10);var o=m.length,l=n,a;for(;;){if((l+=c)>=o){l=0}else{if(l<0){l=o-1}}if(l===n){return[]}if((a=m[l]).isFocusable()){return[a]}}return[]},prevFocus:function(a,c){return this.nextFocus(a,c,-1)},root:function(m){var n=m.length,c=[],l=0,a;for(;l<n;l++){a=m[l];if(!a.ownerCt){c.push(a)}}return c}})},addXTypeToWhitelist:function(c){var d=this;if(Ext.isArray(c)){Ext.Array.forEach(c,d.addXTypeToWhitelist,d);return}if(!Ext.Array.contains(d.whitelist,c)){d.whitelist.push(c)}},clearComponent:function(c){clearTimeout(this.cmpFocusDelay);if(!c.isDestroyed){c.blur()}},disable:function(){var c=this;if(!c.enabled){return}delete c.options;c.enabled=false;c.removeDOM();c.keyNav.disable();c.fireEvent("disable",c)},enable:function(d){var c=this;if(d===true){d={focusFrame:true}}c.options=d=d||{};if(c.enabled){return}c.enabled=Ext.enableFocusManager=true;c.initDOM(d);c.keyNav.enable();c.focusEl.focus();delete c.focusedCmp;c.fireEvent("enable",c)},focusLast:function(c){var d=this;if(d.isWhitelisted(d.focusedCmp)){return true}if(d.previousFocusedCmp){d.previousFocusedCmp.focus()}},getRootComponents:function(){var d=Ext.ComponentQuery,e=d.query(":focusable:root:not([floating])"),h=d.query(":focusable:root[floating]");h.sort(function(a,c){return a.el.getZIndex()>c.el.getZIndex()});return h.concat(e)},initDOM:function(o){var l=this,h=l.focusFrameCls,m=Ext.ComponentQuery.query("{getFocusEl()}:not([focusListenerAdded])"),n=0,j=m.length;if(!Ext.isReady){return Ext.onReady(l.initDOM,l)}for(;n<j;n++){m[n].addFocusListener()}if(!l.focusEl){l.focusEl=Ext.getBody();l.focusEl.dom.tabIndex=-1}if(!l.focusFrame&&o.focusFrame){l.focusFrame=Ext.getBody().createChild({cls:h,children:[{cls:h+"-top"},{cls:h+"-bottom"},{cls:h+"-left"},{cls:h+"-right"}],style:"top: -100px; left: -100px;"});l.focusFrame.setVisibilityMode(Ext.Element.DISPLAY);l.focusFrame.hide().setLocalXY(0,0)}},isWhitelisted:function(c){return c&&Ext.Array.some(this.whitelist,function(a){return c.isXType(a)})},navigateIn:function(j){var m=this,h=m.focusedCmp,e,l;if(m.isWhitelisted(h)){return true}if(!h){e=m.getRootComponents()[0];if(e){if(e.getFocusEl()===m.focusEl){m.focusEl.blur()}e.focus()}}else{l=h.hasFocus?Ext.ComponentQuery.query(">:focusable",h)[0]:h;if(l){l.focus()}else{if(Ext.isFunction(h.onClick)){j.button=0;h.onClick(j);if(h.isVisible(true)){h.focus()}else{m.navigateOut()}}}}},navigateOut:function(h){var d=this,e;if(!d.focusedCmp||!(e=d.focusedCmp.up(":focusable"))){d.focusEl.focus()}else{e.focus()}return true},navigateSiblings:function(y,D,s){var x=this,E=D||x,e=y.getKey(),A=Ext.EventObject,w=y.shiftKey||e==A.LEFT||e==A.UP,C=e==A.LEFT||e==A.RIGHT||e==A.UP||e==A.DOWN,z=w?"prev":"next",t,B,u,v;u=(E.focusedCmp&&E.focusedCmp.comp)||E.focusedCmp;if(!u&&!s){return true}if(C&&x.isWhitelisted(u)){return true}if(!u||u.is(":root")){v=x.getRootComponents()}else{s=s||u.up();if(s){v=s.getRefItems()}}if(v){t=u?Ext.Array.indexOf(v,u):-1;B=Ext.ComponentQuery.query(":"+z+"Focus("+t+")",v)[0];if(B&&u!==B){B.focus();return B}}},onComponentBlur:function(d,h){var e=this;if(e.focusedCmp===d){e.previousFocusedCmp=d;delete e.focusedCmp}if(e.focusFrame){e.focusFrame.hide()}},onComponentFocus:function(l,j){var m=this,h=m.focusChain,e;if(!l.isFocusable()){m.clearComponent(l);if(h[l.id]){return}e=l.up();if(e){h[l.id]=true;e.focus()}return}m.focusChain={};m.focusTask.delay(10,null,null,[l,l.getFocusEl()])},handleComponentFocus:function(u,y){var w=this,q,E,z,s,D,v,B,A,C,t,x;if(w.fireEvent("beforecomponentfocus",w,u,w.previousFocusedCmp)===false){w.clearComponent(u);return}w.focusedCmp=u;if(w.shouldShowFocusFrame(u)){q="."+w.focusFrameCls+"-";E=w.focusFrame;z=(y.dom?y:y.el).getBox();s=z.top;D=z.left;v=z.width;B=z.height;A=E.child(q+"top");C=E.child(q+"bottom");t=E.child(q+"left");x=E.child(q+"right");A.setWidth(v).setLocalXY(D,s);C.setWidth(v).setLocalXY(D,s+B-2);t.setHeight(B-2).setLocalXY(D,s+2);x.setHeight(B-2).setLocalXY(D+v-2,s+2);E.show()}w.fireEvent("componentfocus",w,u,w.previousFocusedCmp)},onComponentHide:function(l){var m=this,h=false,j=m.focusedCmp,n;if(j){h=l.hasFocus||(l.isContainer&&l.isAncestor(m.focusedCmp))}m.clearComponent(l);if(h&&(n=l.up(":focusable"))){n.focus()}else{m.focusEl.focus()}},onComponentDestroy:function(){},removeDOM:function(){var c=this;if(c.enabled||c.subscribers.length){return}Ext.destroy(c.focusFrame);delete c.focusEl;delete c.focusFrame},removeXTypeFromWhitelist:function(c){var d=this;if(Ext.isArray(c)){Ext.Array.forEach(c,d.removeXTypeFromWhitelist,d);return}Ext.Array.remove(d.whitelist,c)},setupSubscriberKeys:function(l,n){var o=this,p=l.getFocusEl(),q=n.scope,j={backspace:o.focusLast,enter:o.navigateIn,esc:o.navigateOut,scope:o},m=function(a){if(o.focusedCmp===l){return o.navigateSiblings(a,o,l)}else{return o.navigateSiblings(a)}};Ext.iterate(n,function(a,c){j[a]=function(d){var e=m(d);if(Ext.isFunction(c)&&c.call(q||l,d,e)===true){return true}return e}},o);return new Ext.util.KeyNav(p,j)},shouldShowFocusFrame:function(h){var d=this,e=d.options||{};if(!d.focusFrame||!h){return false}if(e.focusFrame){return true}if(d.focusData[h.id].focusFrame){return true}return false}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext,"FocusManager",Ext,"FocusMgr"],0));(Ext.cmd.derive("Ext.Img",Ext.Component,{autoEl:"img",baseCls:Ext.baseCSSPrefix+"img",src:"",alt:"",title:"",imgCls:"",ariaRole:"img",maskOnDisable:false,initComponent:function(){if(this.glyph){this.autoEl="div"}this.callParent()},getElConfig:function(){var o=this,m=o.autoEl,j=o.callParent(),n=Ext._glyphFontFamily,p=o.glyph,l,q;if(m==="img"||(Ext.isObject(m)&&m.tag==="img")){l=j}else{if(o.glyph){if(typeof p==="string"){q=p.split("@");p=q[0];n=q[1]}j.html="&#"+p+";";if(n){j.style="font-family:"+n}}else{j.cn=[l={tag:"img",role:o.ariaRole,id:o.id+"-img"}]}}if(l){if(o.imgCls){l.cls=(l.cls?l.cls+" ":"")+o.imgCls}l.src=o.src||Ext.BLANK_IMAGE_URL}if(o.alt){(l||j).alt=o.alt}if(o.title){(l||j).title=o.title}return j},onRender:function(){var d=this,h=d.autoEl,e;d.callParent(arguments);e=d.el;if(h==="img"||(Ext.isObject(h)&&h.tag==="img")){d.imgEl=e}else{d.imgEl=e.getById(d.id+"-img")}},onDestroy:function(){Ext.destroy(this.imgEl);this.imgEl=null;this.callParent()},setSrc:function(h){var e=this,d=e.imgEl;e.src=h;if(d){d.dom.src=h||Ext.BLANK_IMAGE_URL}},setGlyph:function(n){var h=this,m=Ext._glyphFontFamily,j,l;if(n!=h.glyph){if(typeof n==="string"){j=n.split("@");n=j[0];m=j[1]}l=h.el.dom;l.innerHTML="&#"+n+";";if(m){l.style="font-family:"+m}}}},0,["image","imagecomponent"],["component","box","image","imagecomponent"],{component:true,box:true,image:true,imagecomponent:true},["widget.image","widget.imagecomponent"],0,[Ext,"Img"],0));(Ext.cmd.derive("Ext.util.Bindable",Ext.Base,{bindStore:function(h,n,j){j=j||"store";var m=this,l=m[j];if(!n&&l){m.onUnbindStore(l,n,j);if(h!==l&&l.autoDestroy){l.destroyStore()}else{m.unbindStoreListeners(l)}}if(h){h=Ext.data.StoreManager.lookup(h);m.bindStoreListeners(h);m.onBindStore(h,n,j)}m[j]=h||null;return m},getStore:function(){return this.store},unbindStoreListeners:function(d){var c=this.storeListeners;if(c){d.un(c)}},bindStoreListeners:function(e){var h=this,d=Ext.apply({},h.getStoreListeners(e));if(!d.scope){d.scope=h}h.storeListeners=d;e.on(d)},getStoreListeners:Ext.emptyFn,onUnbindStore:Ext.emptyFn,onBindStore:Ext.emptyFn},0,0,0,0,0,0,[Ext.util,"Bindable"],0));(Ext.cmd.derive("Ext.LoadMask",Ext.Component,{isLoadMask:true,msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",maskCls:Ext.baseCSSPrefix+"mask",cls:Ext.baseCSSPrefix+"mask-msg",useMsg:true,useTargetEl:false,ariaRole:"presentation",childEls:["msgEl","msgTextEl"],renderTpl:['<div id="{id}-msgEl" role="{role}"','<tpl if="ariaAttr"> {ariaAttr}</tpl>',' class="{[values.$comp.msgCls]} ',Ext.baseCSSPrefix,'mask-msg-inner {childElCls}">','<div id="{id}-msgTextEl" class="',Ext.baseCSSPrefix,"mask-msg-text",'{childElCls}">{msg}</div>',"</div>"],constructor:function(d){var h=this,e;if(arguments.length===2){e=h.target=d;d=arguments[1]}else{e=d.target}h.callParent([d]);if(e.isComponent){h.ownerCt=e;h.hidden=true;h.renderTo=h.getMaskTarget();h.external=h.renderTo===Ext.getBody();h.bindComponent(e)}else{e=Ext.get(e);h.isElement=true;h.renderTo=h.target}h.render(h.renderTo);if(h.store){h.bindStore(h.store,true)}},getRenderTree:function(){return[{cls:this.maskCls,style:"display:none"},this.callParent()]},onRender:function(){this.callParent(arguments);this.maskEl=this.el.prev()},initRenderData:function(){var c=this.callParent(arguments);c.msg=this.msg||"";return c},bindComponent:function(e){var h=this,d={scope:this,resize:h.sizeMask};if(h.external){d.added=h.onComponentAdded;d.removed=h.onComponentRemoved;if(e.floating){d.move=h.sizeMask;h.activeOwner=e}else{if(e.ownerCt){h.onComponentAdded(e.ownerCt)}}}h.mon(e,d);if(h.external){h.mon(h.hierarchyEventSource,{show:h.onContainerShow,hide:h.onContainerHide,expand:h.onContainerExpand,collapse:h.onContainerCollapse,scope:h})}},onComponentAdded:function(d){var c=this;delete c.activeOwner;c.floatParent=d;if(!d.floating){d=d.up("[floating]")}if(d){c.activeOwner=d;c.mon(d,"move",c.sizeMask,c);c.mon(d,"tofront",c.onOwnerToFront,c)}else{c.preventBringToFront=true}d=c.floatParent.ownerCt;if(c.rendered&&c.isVisible()&&d){c.floatOwner=d;c.mon(d,"afterlayout",c.sizeMask,c,{single:true})}},onComponentRemoved:function(h){var l=this,j=l.activeOwner,e=l.floatOwner;if(j){l.mun(j,"move",l.sizeMask,l);l.mun(j,"tofront",l.onOwnerToFront,l)}if(e){l.mun(e,"afterlayout",l.sizeMask,l)}delete l.activeOwner;delete l.floatOwner},afterRender:function(){this.callParent(arguments);this.el.$cache.skipGarbageCollection=true;this.maskEl.$cache.skipGarbageCollection=true},onOwnerToFront:function(d,c){this.maskEl.setStyle("zIndex",c+1);this.el.setStyle("zIndex",c+2)},onContainerShow:function(c){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerHide:function(c){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onContainerExpand:function(c){if(!this.isHierarchicallyHidden()){this.onComponentShow()}},onContainerCollapse:function(c){if(this.isHierarchicallyHidden()){this.onComponentHide()}},onComponentHide:function(){var c=this;if(c.rendered&&c.isVisible()){c.hide();c.showNext=true}},onComponentShow:function(){if(this.showNext){this.show()}delete this.showNext},sizeMask:function(){var d=this,h=d.target,e=d.external?d.getOwner().el:d.getMaskTarget();if(d.rendered&&d.isVisible()){if(d.external){if(!d.isElement&&h.floating){d.onOwnerToFront(h,h.el.getZIndex())}d.maskEl.setSize(e.getSize()).alignTo(e,"tl-tl")}d.el.center(d.maskEl)}},bindStore:function(e,d){var h=this;h.mixins.bindable.bindStore.apply(h,arguments);e=h.store;if(e&&e.isLoading()){h.onBeforeLoad()}},getStoreListeners:function(e){var j=this.onLoad,l=this.onBeforeLoad,h={cachemiss:l,cachefilled:j};if(!e.proxy.isSynchronous){h.beforeLoad=l;h.load=j}return h},onDisable:function(){this.callParent(arguments);if(this.loading){this.onLoad()}},getOwner:function(){return this.ownerCt||this.floatParent},getMaskTarget:function(){var c=this.getOwner();if(this.isElement){return this.target}return this.useTargetEl?c.getTargetEl():(c.getMaskTarget()||Ext.getBody())},onBeforeLoad:function(){var h=this,e=h.getOwner(),d;if(!h.disabled){h.loading=true;if(e.componentLayoutCounter){h.maybeShow()}else{d=e.afterComponentLayout;e.afterComponentLayout=function(){e.afterComponentLayout=d;d.apply(e,arguments);h.maybeShow()}}}},maybeShow:function(){var c=this,d=c.getOwner();if(!d.isVisible(true)){c.showNext=true}else{if(c.loading&&d.rendered){c.show()}}},hide:function(){if(this.isElement){this.ownerCt.unmask();this.fireEvent("hide",this);return}delete this.showNext;this.maskEl.setDisplayed(false);return this.callParent(arguments)},show:function(){if(this.isElement){this.ownerCt.mask(this.useMsg?this.msg:"",this.msgCls);this.fireEvent("show",this);return}this.maskEl.setDisplayed(true);return this.callParent(arguments)},afterShow:function(){var c=this;c.loading=true;c.callParent(arguments);if(c.hasOwnProperty("maskCls")){c.maskEl.dom.className=c.maskCls}if(c.useMsg){c.msgTextEl.update(c.msg)}else{c.el.hide()}c.sizeMask()},onLoad:function(){this.loading=false;this.hide()},beforeDestroy:function(){this.ownerCt=null;this.callParent()},onDestroy:function(){var c=this;if(c.isElement){c.ownerCt.unmask()}Ext.destroy(c.maskEl);c.callParent()}},1,["loadmask"],["component","box","loadmask"],{component:true,box:true,loadmask:true},["widget.loadmask"],[["bindable",Ext.util.Bindable]],[Ext,"LoadMask"],0));(Ext.cmd.derive("Ext.data.association.Association",Ext.Base,{alternateClassName:"Ext.data.Association",primaryKey:"id",associationKeyFunction:null,defaultReaderType:"json",isAssociation:true,initialConfig:null,statics:{AUTO_ID:1000,create:function(c){if(Ext.isString(c)){c={type:c}}switch(c.type){case"belongsTo":return new Ext.data.association.BelongsTo(c);case"hasMany":return new Ext.data.association.HasMany(c);case"hasOne":return new Ext.data.association.HasOne(c);default:}return c}},constructor:function(q){Ext.apply(this,q);var n=this,o=Ext.ModelManager.types,l=q.ownerModel,u=q.associatedModel,p=o[l],m=o[u],t=q.associationKey,s;if(t){s=String(t).search(/[\[\.]/);if(s>=0){n.associationKeyFunction=Ext.functionFactory("obj","return obj"+(s>0?".":"")+t)}}n.initialConfig=q;n.ownerModel=p;n.associatedModel=m;Ext.applyIf(n,{ownerName:l,associatedName:u});n.associationId="association"+(++n.statics().AUTO_ID)},getReader:function(){var h=this,e=h.reader,d=h.associatedModel;if(e){if(Ext.isString(e)){e={type:e}}if(e.isReader){e.setModel(d)}else{Ext.applyIf(e,{model:d,type:h.defaultReaderType})}h.reader=Ext.createByAlias("reader."+e.type,e)}return h.reader||null}},1,0,0,0,0,0,[Ext.data.association,"Association",Ext.data,"Association"],0));(Ext.cmd.derive("Ext.ModelManager",Ext.AbstractManager,{alternateClassName:"Ext.ModelMgr",singleton:true,typeName:"mtype",associationStack:[],registerType:function(l,e){var j=e.prototype,h;if(j&&j.isModel){h=e}else{if(!e.extend){e.extend="Ext.data.Model"}h=Ext.define(l,e)}this.types[l]=h;return h},unregisterType:function(c){delete this.types[c]},onModelDefined:function(q){var l=this.associationStack,n=l.length,o=[],j,p,m;for(p=0;p<n;p++){j=l[p];if(j.associatedModel==q.modelName){o.push(j)}}for(p=0,n=o.length;p<n;p++){m=o[p];this.types[m.ownerModel].prototype.associations.add(Ext.data.association.Association.create(m));Ext.Array.remove(l,m)}},registerDeferredAssociation:function(c){this.associationStack.push(c)},getModel:function(c){var d=c;if(typeof d=="string"){d=this.types[d]}return d},create:function(e,h,j){var l=typeof h=="function"?h:this.types[h||e.name];return new l(e,j)}},0,0,0,0,0,0,[Ext,"ModelManager",Ext,"ModelMgr"],function(){Ext.regModel=function(){return this.ModelManager.registerType.apply(this.ModelManager,arguments)}}));(Ext.cmd.derive("Ext.layout.component.Component",Ext.layout.Layout,{type:"component",isComponentLayout:true,nullBox:{},usesContentHeight:true,usesContentWidth:true,usesHeight:true,usesWidth:true,beginLayoutCycle:function(E,s){var x=this,F=x.owner,C=E.ownerCtContext,B=E.heightModel,A=E.widthModel,z=F.el.dom===document.body,D=F.lastBox||x.nullBox,u=F.el.lastBox||x.nullBox,G=!z,v,t,w,y;x.callParent(arguments);if(s){if(x.usesContentWidth){++E.consumersContentWidth}if(x.usesContentHeight){++E.consumersContentHeight}if(x.usesWidth){++E.consumersWidth}if(x.usesHeight){++E.consumersHeight}if(C&&!C.hasRawContent){v=F.ownerLayout;if(v.usesWidth){++E.consumersWidth}if(v.usesHeight){++E.consumersHeight}}}if(A.configured){w=A.names.width;if(!z){G=x.setWidthInDom||(s?F[w]!==u.width:A.constrained)}E.setWidth(F[w],G)}else{if(E.isTopLevel){if(A.calculated){t=D.width;E.setWidth(t,t!=u.width)}t=D.x;E.setProp("x",t,t!=u.x)}}if(B.configured){y=B.names.height;if(!z){G=s?F[y]!==u.height:B.constrained}E.setHeight(F[y],G)}else{if(E.isTopLevel){if(B.calculated){t=D.height;E.setHeight(t,t!=u.height)}t=D.y;E.setProp("y",t,t!=u.y)}}},finishedLayout:function(t){var n=this,l=t.children,u=n.owner,p,s,m,q,o;if(l){p=l.length;for(s=0;s<p;s++){m=l[s];m.el.lastBox=m.props}}t.previousSize=n.lastComponentSize;n.lastComponentSize=u.el.lastBox=o=t.props;q=u.lastBox||(u.lastBox={});q.x=o.x;q.y=o.y;q.width=o.width;q.height=o.height;q.invalid=false;n.callParent(arguments)},notifyOwner:function(m){var n=this,j=n.lastComponentSize,l=m.previousSize,h=[j.width,j.height];if(l){h.push(l.width,l.height)}n.owner.afterComponentLayout.apply(n.owner,h)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},cacheTargetInfo:function(e){var h=this,j=h.targetInfo,l;if(!j){l=e.getEl("getTarget",h);h.targetInfo=j={padding:l.getPaddingInfo(),border:l.getBorderInfo()}}return j},measureAutoDimensions:function(E,I){var x=this,Q=x.owner,A=Q.layout,N=E.heightModel,J=E.widthModel,O=E.boxParent,D=E.isBoxParent,P=E.props,H,w={gotWidth:false,gotHeight:false,isContainer:(H=!E.hasRawContent)},y=I||3,B,M,G=0,K=0,F,C,z;if(J.shrinkWrap&&E.consumersContentWidth){++G;B=!(y&1);if(H){if(B){w.contentWidth=0;w.gotWidth=true;++K}else{if((w.contentWidth=E.getProp("contentWidth"))!==undefined){w.gotWidth=true;++K}}}else{C=P.contentWidth;if(typeof C=="number"){w.contentWidth=C;w.gotWidth=true;++K}else{if(B){F=true}else{if(!E.hasDomProp("containerChildrenSizeDone")){F=false}else{if(D||!O||O.widthModel.shrinkWrap){F=true}else{F=O.hasDomProp("width")}}}if(F){if(B){z=0}else{if(A&&A.measureContentWidth){z=A.measureContentWidth(E)}else{z=x.measureContentWidth(E)}}if(!isNaN(w.contentWidth=z)){E.setContentWidth(z,true);w.gotWidth=true;++K}}}}}else{if(J.natural&&E.consumersWidth){++G;C=P.width;if(typeof C=="number"){w.width=C;w.gotWidth=true;++K}else{if(D||!O){F=true}else{F=O.hasDomProp("width")}if(F){if(!isNaN(w.width=x.measureOwnerWidth(E))){E.setWidth(w.width,false);w.gotWidth=true;++K}}}}}if(N.shrinkWrap&&E.consumersContentHeight){++G;M=!(y&2);if(H){if(M){w.contentHeight=0;w.gotHeight=true;++K}else{if((w.contentHeight=E.getProp("contentHeight"))!==undefined){w.gotHeight=true;++K}}}else{C=P.contentHeight;if(typeof C=="number"){w.contentHeight=C;w.gotHeight=true;++K}else{if(M){F=true}else{if(!E.hasDomProp("containerChildrenSizeDone")){F=false}else{if(Q.noWrap){F=true}else{if(!J.shrinkWrap){F=(E.bodyContext||E).hasDomProp("width")}else{if(D||!O||O.widthModel.shrinkWrap){F=true}else{F=O.hasDomProp("width")}}}}}if(F){if(M){z=0}else{if(A&&A.measureContentHeight){z=A.measureContentHeight(E)}else{z=x.measureContentHeight(E)}}if(!isNaN(w.contentHeight=z)){E.setContentHeight(z,true);w.gotHeight=true;++K}}}}}else{if(N.natural&&E.consumersHeight){++G;C=P.height;if(typeof C=="number"){w.height=C;w.gotHeight=true;++K}else{if(D||!O){F=true}else{F=O.hasDomProp("width")}if(F){if(!isNaN(w.height=x.measureOwnerHeight(E))){E.setHeight(w.height,false);w.gotHeight=true;++K}}}}}if(O){E.onBoxMeasured()}w.gotAll=K==G;return w},measureContentWidth:function(c){return c.el.getWidth()-c.getFrameInfo().width},measureContentHeight:function(c){return c.el.getHeight()-c.getFrameInfo().height},measureOwnerHeight:function(c){return c.el.getHeight()},measureOwnerWidth:function(c){return c.el.getWidth()}},0,0,0,0,0,0,[Ext.layout.component,"Component"],0));(Ext.cmd.derive("Ext.layout.component.Auto",Ext.layout.component.Component,{type:"autocomponent",setHeightInDom:false,setWidthInDom:false,waitForOuterHeightInDom:false,waitForOuterWidthInDom:false,beginLayoutCycle:function(n,j){var o=this,l=o.lastWidthModel,m=o.lastHeightModel,h=o.owner.el;o.callParent(arguments);if(l&&l.fixed&&n.widthModel.shrinkWrap){h.setWidth(null)}if(m&&m.fixed&&n.heightModel.shrinkWrap){h.setHeight(null)}},calculate:function(m){var n=this,o=n.measureAutoDimensions(m),j=m.heightModel,q=m.widthModel,p,l;if(o.gotWidth){if(q.shrinkWrap){n.publishOwnerWidth(m,o.contentWidth)}else{if(n.publishInnerWidth){n.publishInnerWidth(m,o.width)}}}else{if(!q.auto&&n.publishInnerWidth){p=n.waitForOuterWidthInDom?m.getDomProp("width"):m.getProp("width");if(p===undefined){n.done=false}else{n.publishInnerWidth(m,p)}}}if(o.gotHeight){if(j.shrinkWrap){n.publishOwnerHeight(m,o.contentHeight)}else{if(n.publishInnerHeight){n.publishInnerHeight(m,o.height)}}}else{if(!j.auto&&n.publishInnerHeight){l=n.waitForOuterHeightInDom?m.getDomProp("height"):m.getProp("height");if(l===undefined){n.done=false}else{n.publishInnerHeight(m,l)}}}if(!o.gotAll){n.done=false}},calculateOwnerHeightFromContentHeight:function(c,d){return d+c.getFrameInfo().height},calculateOwnerWidthFromContentWidth:function(c,d){return d+c.getFrameInfo().width},publishOwnerHeight:function(n,p){var q=this,l=q.owner,m=q.calculateOwnerHeightFromContentHeight(n,p),o,s,t;if(isNaN(m)){q.done=false}else{o=Ext.Number.constrain(m,l.minHeight,l.maxHeight);if(o==m){s=q.setHeightInDom}else{t=q.sizeModels[(o<m)?"constrainedMax":"constrainedMin"];m=o;if(n.heightModel.calculatedFromShrinkWrap){n.heightModel=t}else{n.invalidate({heightModel:t})}}n.setHeight(m,s)}},publishOwnerWidth:function(o,l){var p=this,m=p.owner,q=p.calculateOwnerWidthFromContentWidth(o,l),n,s,t;if(isNaN(q)){p.done=false}else{n=Ext.Number.constrain(q,m.minWidth,m.maxWidth);if(n==q){s=p.setWidthInDom}else{t=p.sizeModels[(n<q)?"constrainedMax":"constrainedMin"];q=n;if(o.widthModel.calculatedFromShrinkWrap){o.widthModel=t}else{o.invalidate({widthModel:t})}}o.setWidth(q,s)}}},0,0,0,0,["layout.autocomponent"],0,[Ext.layout.component,"Auto"],0));(Ext.cmd.derive("Ext.layout.component.ProgressBar",Ext.layout.component.Auto,{type:"progressbar",beginLayout:function(j){var e=this,h,l;e.callParent(arguments);if(!j.textEls){l=e.owner.textEl;if(l.isComposite){j.textEls=[];l=l.elements;for(h=l.length;h--;){j.textEls[h]=j.getEl(Ext.get(l[h]))}}else{j.textEls=[j.getEl("textEl")]}}},calculate:function(l){var n=this,j,m,h;n.callParent(arguments);if(Ext.isNumber(h=l.getProp("width"))){h-=l.getBorderInfo().width;m=l.textEls;for(j=m.length;j--;){m[j].setWidth(h)}}else{n.done=false}}},0,0,0,0,["layout.progressbar"],0,[Ext.layout.component,"ProgressBar"],0));(Ext.cmd.derive("Ext.ProgressBar",Ext.Component,{baseCls:Ext.baseCSSPrefix+"progress",animate:false,text:"",waitTimer:null,childEls:["bar"],renderTpl:['<tpl if="internalText">','<div class="{baseCls}-text {baseCls}-text-back">{text}</div>',"</tpl>",'<div id="{id}-bar" class="{baseCls}-bar {baseCls}-bar-{ui}" role="presentation" style="width:{percentage}%">','<tpl if="internalText">','<div class="{baseCls}-text">',"<div>{text}</div>","</div>","</tpl>","</div>"],componentLayout:"progressbar",ariaRole:"progressbar",initComponent:function(){this.callParent();this.addEvents("update")},initRenderData:function(){var c=this;return Ext.apply(c.callParent(),{internalText:!c.hasOwnProperty("textEl"),text:c.text||"&#160;",percentage:c.value?c.value*100:0})},onRender:function(){var c=this;c.callParent(arguments);if(c.textEl){c.textEl=Ext.get(c.textEl);c.updateText(c.text)}else{c.textEl=c.el.select("."+c.baseCls+"-text")}},updateProgress:function(m,l,j){var n=this,h=n.value;n.value=m||0;if(l){n.updateText(l)}if(n.rendered&&!n.isDestroyed){if(j===true||(j!==false&&n.animate)){n.bar.stopAnimation();n.bar.animate(Ext.apply({from:{width:(h*100)+"%"},to:{width:(n.value*100)+"%"}},n.animate))}else{n.bar.setStyle("width",(n.value*100)+"%")}}n.fireEvent("update",n,n.value,l);return n},updateText:function(c){var d=this;d.text=c;if(d.rendered){d.textEl.update(d.text)}return d},applyText:function(c){this.updateText(c)},getText:function(){return this.text},wait:function(h){var d=this,e;if(!d.waitTimer){e=d;h=h||{};d.updateText(h.text);d.waitTimer=Ext.TaskManager.start({run:function(c){var a=h.increment||10;c-=1;d.updateProgress(((((c+a)%a)+1)*(100/a))*0.01,null,h.animate)},interval:h.interval||1000,duration:h.duration,onStop:function(){if(h.fn){h.fn.apply(h.scope||d)}d.reset()},scope:e})}return d},isWaiting:function(){return this.waitTimer!==null},reset:function(d){var c=this;c.updateProgress(0);c.clearTimer();if(d===true){c.hide()}return c},clearTimer:function(){var c=this;if(c.waitTimer){c.waitTimer.onStop=null;Ext.TaskManager.stop(c.waitTimer);c.waitTimer=null}},onDestroy:function(){var c=this,d=c.bar;c.clearTimer();if(c.rendered){if(c.textEl.isComposite){c.textEl.clear()}Ext.destroyMembers(c,"textEl","progressBar");if(d&&c.animate){d.stopAnimation()}}c.callParent()}},0,["progressbar"],["component","box","progressbar"],{component:true,box:true,progressbar:true},["widget.progressbar"],0,[Ext,"ProgressBar"],0));(Ext.cmd.derive("Ext.ShadowPool",Ext.Base,{singleton:true,markup:(function(){return Ext.String.format('<div class="{0}{1}-shadow" role="presentation"></div>',Ext.baseCSSPrefix,Ext.isIE&&!Ext.supports.CSS3BoxShadow?"ie":"css")}()),shadows:[],pull:function(){var c=this.shadows.shift();if(!c){c=Ext.get(Ext.DomHelper.insertHtml("afterBegin",document.body,this.markup));c.autoBoxAdjust=false}return c},push:function(c){this.shadows.push(c)},reset:function(){var h=[].concat(this.shadows),d,e=h.length;for(d=0;d<e;d++){h[d].remove()}this.shadows=[]}},0,0,0,0,0,0,[Ext,"ShadowPool"],0));(Ext.cmd.derive("Ext.Shadow",Ext.Base,{localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(h){var n=this,m,l,j;Ext.apply(n,h);if(!Ext.isString(n.mode)){n.mode=n.defaultMode}l=n.offset;j=Math.floor(l/2);n.opacity=50;switch(n.mode.toLowerCase()){case"drop":if(Ext.supports.CSS3BoxShadow){m={t:l,l:l,h:-l,w:-l}}else{m={t:-j,l:-j,h:-j,w:-j}}break;case"sides":if(Ext.supports.CSS3BoxShadow){m={t:l,l:0,h:-l,w:0}}else{m={t:-(1+j),l:1+j-2*l,h:-1,w:j-1}}break;case"frame":if(Ext.supports.CSS3BoxShadow){m={t:0,l:0,h:0,w:0}}else{m={t:1+j-2*l,l:1+j-2*l,h:l-j-1,w:l-j-1}}break;case"bottom":if(Ext.supports.CSS3BoxShadow){m={t:l,l:0,h:-l,w:0}}else{m={t:l,l:0,h:0,w:0}}break}n.adjusts=m},getShadowSize:function(){var e=this,j=e.el?e.offset:0,h=[j,j,j,j],l=e.mode.toLowerCase();if(e.el&&l!=="frame"){h[0]=0;if(l=="drop"){h[3]=0}}return h},offset:4,defaultMode:"drop",boxShadowProperty:(function(){var c="boxShadow",d=document.documentElement.style;if(!("boxShadow" in d)){if("WebkitBoxShadow" in d){c="WebkitBoxShadow"}else{if("MozBoxShadow" in d){c="MozBoxShadow"}}}return c}()),show:function(j){var e=this,h,l;j=Ext.get(j);h=(parseInt(j.getStyle("z-index"),10)-1)||0;l=j[e.localXYNames.get]();if(!e.el){e.el=Ext.ShadowPool.pull();if(e.fixed){e.el.dom.style.position="fixed"}else{e.el.dom.style.position=""}if(e.el.dom.nextSibling!=j.dom){e.el.insertBefore(j)}}e.el.setStyle("z-index",e.zIndex||h);if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){e.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+e.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+(e.offset)+")"}e.realign(l[0],l[1],j.dom.offsetWidth,j.dom.offsetHeight);e.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(w,l,p,t){if(!this.el){return}var x=this.adjusts,y=this.el,q=y.dom.style,v,u,s,o;y[this.localXYNames.set](w+x.l,l+x.t);v=Math.max(p+x.w,0);u=Math.max(t+x.h,0);s=v+"px";o=u+"px";if(q.width!=s||q.height!=o){q.width=s;q.height=o;if(Ext.supports.CSS3BoxShadow){q[this.boxShadowProperty]="0 0 "+(this.offset+2)+"px #888"}}},hide:function(){var c=this;if(c.el){c.el.dom.style.display="none";Ext.ShadowPool.push(c.el);delete c.el}},setZIndex:function(c){this.zIndex=c;if(this.el){this.el.setStyle("z-index",c)}},setOpacity:function(c){if(this.el){if(Ext.isIE&&!Ext.supports.CSS3BoxShadow){c=Math.floor(c*100/2)/100}this.opacity=c;this.el.setOpacity(c)}}},1,0,0,0,0,0,[Ext,"Shadow"],0));(Ext.cmd.derive("Ext.app.EventDomain",Ext.Base,{statics:{instances:{}},isEventDomain:true,constructor:function(){var c=this;Ext.app.EventDomain.instances[c.type]=c;c.bus={};c.monitoredClasses=[]},dispatch:function(x,s,u){var t=this,w=t.bus,q=w[s.toLowerCase()],z,A,B,p,C,y,v;if(!q){return true}for(z in q){if(q.hasOwnProperty(z)&&t.match(x,z)){A=q[z];for(B in A){if(A.hasOwnProperty(B)){p=A[B];for(y=0,v=p.length;y<v;y++){C=p[y];if(C.fire.apply(C,u)===false){return false}}}}}}return true},listen:function(x,D){var z=this,B=z.bus,u=z.idProperty,v=z.monitoredClasses,E=v.length,F,J,C,G,t,H,w,I,A,y;for(G in x){if(x.hasOwnProperty(G)&&(A=x[G])){if(u){G=G==="*"?G:G.substring(1)}for(y in A){if(A.hasOwnProperty(y)){t=null;H=A[y];w=D;y=y.toLowerCase();I=new Ext.util.Event(D,y);if(Ext.isObject(H)){t=H;H=t.fn;w=t.scope||D;delete t.fn;delete t.scope}if(typeof H==="string"){H=w[H]}I.addListener(H,w,t);for(F=E;F-->0;){v[F].hasListeners._incr_(y)}J=B[y]||(B[y]={});J=J[G]||(J[G]={});C=J[D.id]||(J[D.id]=[]);C.push(I)}}}}},match:function(h,e){var d=this.idProperty;if(d){return e==="*"||h[d]===e}return false},monitor:function(j){var e=this,h=j.isInstance?j:j.prototype,l=h.fireEventArgs;e.monitoredClasses.push(j);h.fireEventArgs=function(a,c){var d=l.apply(this,arguments);if(d!==false){d=e.dispatch(this,a,c)}return d}},unlisten:function(m){var h=this.bus,l,n,j,o;for(n in h){n=n.toLowerCase();if(h.hasOwnProperty(n)&&(o=h[n])){for(j in o){l=o[j];delete l[m]}}}}},1,0,0,0,0,0,[Ext.app,"EventDomain"],0));(Ext.cmd.derive("Ext.app.domain.Component",Ext.app.EventDomain,{singleton:true,type:"component",constructor:function(){var c=this;c.callParent();c.monitor(Ext.Component)},match:function(c,d){return c.is(d)}},1,0,0,0,0,0,[Ext.app.domain,"Component"],0));(Ext.cmd.derive("Ext.app.EventBus",Ext.Base,{singleton:true,constructor:function(){var c=this,d=Ext.app.EventDomain.instances;c.callParent();c.domains=d;c.bus=d.component.bus},control:function(c,d){return this.domains.component.listen(c,d)},listen:function(j,e){var h=this.domains,l;for(l in j){if(j.hasOwnProperty(l)){h[l].listen(j[l],e)}}},unlisten:function(h){var e=Ext.app.EventDomain.instances,d;for(d in e){e[d].unlisten(h)}}},1,0,0,0,0,0,[Ext.app,"EventBus"],0));(Ext.cmd.derive("Ext.data.ResultSet",Ext.Base,{loaded:true,count:0,total:0,success:false,constructor:function(c){Ext.apply(this,c);this.totalRecords=this.total;if(c.count===undefined){this.count=this.records.length}}},1,0,0,0,0,0,[Ext.data,"ResultSet"],0));(Ext.cmd.derive("Ext.data.reader.Reader",Ext.Base,{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],totalProperty:"total",successProperty:"success",root:"",implicitIncludes:true,readRecordsOnFailure:true,isReader:true,applyDefaults:true,lastFieldGeneration:null,constructor:function(d){var c=this;c.mixins.observable.constructor.call(c,d);c.model=Ext.ModelManager.getModel(c.model);if(c.model&&c.model.prototype.fields){c.buildExtractors()}this.addEvents("exception")},setModel:function(j,m){var h=this,l=h.model,n=true;j=h.model=Ext.ModelManager.getModel(j);if(j&&l===j){n=h.lastFieldGeneration!==j.prototype.fields.generation}if(j){h.buildExtractors(n)}if(m&&h.proxy){h.proxy.setModel(j,true)}},read:function(d){var c;if(d){c=d.responseText?this.getResponseData(d):this.readRecords(d)}return c||this.nullResultSet},readRecords:function(s){var q=this,m,t,u,o,p,n,l;if(q.lastFieldGeneration!==q.model.prototype.fields.generation){q.buildExtractors(true)}q.rawData=s;s=q.getData(s);m=true;t=0;u=[];if(q.successProperty){n=q.getSuccess(s);if(n===false||n==="false"){m=false}}if(q.messageProperty){l=q.getMessage(s)}if(q.readRecordsOnFailure||m){o=Ext.isArray(s)?s:q.getRoot(s);if(o){p=o.length}if(q.totalProperty){n=parseInt(q.getTotal(s),10);if(!isNaN(n)){p=n}}if(o){u=q.extractData(o);t=u.length}}return new Ext.data.ResultSet({total:p||t,count:t,records:u,success:m,message:l})},extractData:function(m){var n=this,o=n.model,v=m.length,t=new Array(v),w,s,u,p,q;if(!m.length&&Ext.isObject(m)){m=[m];v=1}for(q=0;q<v;q++){u=m[q];if(u.isModel){t[q]=u}else{t[q]=p=new o(undefined,n.getId(u),u,s={});p.phantom=false;n.convertRecordData(s,u,p,n.applyDefaults);if(n.implicitIncludes&&p.associations.length){n.readAssociated(p,u)}}}return t},readAssociated:function(n,p){var q=n.associations.items,o=0,u=q.length,s,t,l,m;for(;o<u;o++){s=q[o];t=this.getAssociatedDataRoot(p,s.associationKeyFunction||s.associationKey||s.name);if(t){m=s.getReader();if(!m){l=s.associatedModel.getProxy();if(l){m=l.getReader()}else{m=new this.constructor({model:s.associatedName})}}s.read(n,m,t)}}},getAssociatedDataRoot:function(c,d){if(Ext.isFunction(d)){return d(c)}return c[d]},getFields:function(){return this.model.prototype.fields.items},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(c){},onMetaChange:function(l){var m=this,h=l.fields||m.getFields(),n,j;m.metaData=l;m.root=l.root||m.root;m.idProperty=l.idProperty||m.idProperty;m.totalProperty=l.totalProperty||m.totalProperty;m.successProperty=l.successProperty||m.successProperty;m.messageProperty=l.messageProperty||m.messageProperty;j=l.clientIdProperty;if(m.model){m.model.setFields(h,m.idProperty,j);m.setModel(m.model,true)}else{n=Ext.define("Ext.data.reader.Json-Model"+Ext.id(),{extend:"Ext.data.Model",fields:h,clientIdProperty:j});if(m.idProperty){n.idProperty=m.idProperty}m.setModel(n,true)}m.fireEventArgs("metachange",[l])},getIdProperty:function(){var c=this.model.prototype.idField,d=this.idProperty;if(!d&&c&&(d=c.mapping)==null){d=c.name}return d},buildExtractors:function(o){var q=this,m=q.getIdProperty(),p=q.totalProperty,j=q.successProperty,n=q.messageProperty,l;if(o===true){q.convertRecordData=null}if(q.convertRecordData){return}if(p){q.getTotal=q.createAccessor(p)}if(j){q.getSuccess=q.createAccessor(j)}if(n){q.getMessage=q.createAccessor(n)}if(m){q.idAccessor=q.createAccessor(m);q.getId=function(c){var a=this.idAccessor(c);return(a===undefined||a==="")?null:a}}else{q.getId=function(){return null}}q.convertRecordData=q.buildRecordDataExtractor();q.lastFieldGeneration=q.model.prototype.fields.generation},recordDataExtractorTemplate:["var value\n","    ,internalId\n",'<tpl for="fields">','    ,__field{#} = fields.map["{name}"]\n',"</tpl>",";\n","return function(dest, source, record, applyDefaults) {\n","{%","var exprFn = values.exprFn,\n","    reader = values.reader;\n","%}",'<tpl for="fields">','{% var fieldAccessExpression = exprFn.call(reader, values, "__field" + xindex, "source");\n',"   if (fieldAccessExpression) { %}",'    value = {[ exprFn.call(reader, values, "__field" + xindex, "source") ]};\n','<tpl if="hasCustomConvert">','    dest["{name}"] = value === undefined ? __field{#}.convert(__field{#}.defaultValue, record) : __field{#}.convert(value, record);\n','<tpl elseif="defaultValue !== undefined">',"    if (value === undefined) {\n","        if (applyDefaults) {\n",'<tpl if="convert">','            dest["{name}"] = __field{#}.convert(__field{#}.defaultValue, record);\n',"<tpl else>",'            dest["{name}"] = __field{#}.defaultValue\n',"</tpl>","        };\n","    } else {\n",'<tpl if="convert">','        dest["{name}"] = __field{#}.convert(value, record);\n',"<tpl else>",'        dest["{name}"] = value;\n',"</tpl>","    };\n","<tpl else>","    if (value !== undefined) {\n",'<tpl if="convert">','        dest["{name}"] = __field{#}.convert(value, record);\n',"<tpl else>",'        dest["{name}"] = value;\n',"</tpl>","    }\n","</tpl>","{% } else { %}",'<tpl if="defaultValue !== undefined">','<tpl if="convert">','    dest["{name}"] = __field{#}.convert(__field{#}.defaultValue, record);\n',"<tpl else>",'    dest["{name}"] = __field{#}.defaultValue\n',"</tpl>","</tpl>","{% } %}","</tpl>",'<tpl if="clientIdProp">','    if (record && (internalId = {[ exprFn.call(reader, {mapping: values.clientIdProp}, null, "source") ]})) {\n','        record.{["internalId"]} = internalId;\n',"    }\n","</tpl>","};"],buildRecordDataExtractor:function(){var l=this,j=l.model.prototype,h=l.recordDataExtractorTemplate,m={clientIdProp:j.clientIdProperty,fields:j.fields.items,exprFn:l.createFieldAccessExpression,reader:l},n;n=Ext.functionFactory("fields",h.apply(m));return n.call(l,j.fields)},destroyReader:function(){var c=this;c.proxy=c.model=c.convertRecordData=c.getId=null;c.getTotal=c.getSuccess=c.getMessage=null;c.recordDataExtractorTemplate=null}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.data.reader,"Reader",Ext.data,"Reader",Ext.data,"DataReader"],function(){var c=this.prototype;Ext.apply(c,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:true,message:""}),recordDataExtractorTemplate:new Ext.XTemplate(c.recordDataExtractorTemplate)})}));(Ext.cmd.derive("Ext.data.reader.Json",Ext.data.reader.Reader,{alternateClassName:"Ext.data.JsonReader",root:"",metaProperty:"metaData",useSimpleAccessors:false,readRecords:function(d){var e=this,h;if(e.getMeta){h=e.getMeta(d);if(h){e.onMetaChange(h)}}else{if(d.metaData){e.onMetaChange(d.metaData)}}e.jsonData=d;return e.callParent([d])},getResponseData:function(h){var j,e;try{j=Ext.decode(h.responseText);return this.readRecords(j)}catch(l){e=new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:l.message});this.fireEvent("exception",this,h,e);Ext.Logger.warn("Unable to parse the JSON returned by the server");return e}},buildExtractors:function(){var c=this,d=c.metaProperty;c.callParent(arguments);if(c.root){c.getRoot=c.createAccessor(c.root)}else{c.getRoot=Ext.identityFn}if(d){c.getMeta=c.createAccessor(d)}},extractData:function(j){var l=this.record,m=[],n,h;if(l){n=j.length;if(!n&&Ext.isObject(j)){n=1;j=[j]}for(h=0;h<n;h++){m[h]=j[h][l]}}else{m=j}return this.callParent([m])},createAccessor:(function(){var c=/[\[\.]/;return function(d){if(Ext.isEmpty(d)){return Ext.emptyFn}if(Ext.isFunction(d)){return d}if(this.useSimpleAccessors!==true){var a=String(d).search(c);if(a>=0){return Ext.functionFactory("obj","return obj"+(a>0?".":"")+d)}}return function(e){return e[d]}}}()),createFieldAccessExpression:(function(){var c=/[\[\.]/;return function(q,A,z){var C=q.mapping,t=C||C===0,B=t?C:q.name,a,y;if(C===false){return}if(typeof B==="function"){a=A+".mapping("+z+", this)"}else{if(this.useSimpleAccessors===true||((y=String(B).search(c))<0)){if(!t||isNaN(B)){B='"'+B+'"'}a=z+"["+B+"]"}else{if(y===0){a=z+B}else{var w=B.split("."),u=w.length,v=1,s=z+"."+w[0],x=[s];for(;v<u;v++){s+="."+w[v];x.push(s)}a=x.join(" && ")}}}return a}}())},0,0,0,0,["reader.json"],0,[Ext.data.reader,"Json",Ext.data,"JsonReader"],0));(Ext.cmd.derive("Ext.data.writer.Writer",Ext.Base,{alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],writeAllFields:true,nameProperty:"name",writeRecordId:true,isWriter:true,constructor:function(c){Ext.apply(this,c)},write:function(m){var o=m.operation,h=o.records||[],j=h.length,n=0,l=[];for(;n<j;n++){l.push(this.getRecordData(h[n],o))}return this.writeRecords(m,l)},getRecordData:function(B,D){var u=B.phantom===true,E=this.writeAllFields||u,z=B.fields,s=z.items,C={},v=B.clientIdProperty,w,x,t,A,y,q;if(E){q=s.length;for(y=0;y<q;y++){x=s[y];if(x.persist){this.writeValue(C,x,B)}}}else{if(D&&D.action==="destroy"){this.writeValue(C,B.idField,B)}else{w=B.getChanges();for(t in w){if(w.hasOwnProperty(t)){x=z.get(t);if(x.persist){this.writeValue(C,x,B)}}}}}if(u){if(v&&D&&D.records.length>1){C[v]=B.internalId}}else{if(this.writeRecordId){A=z.get(B.idProperty)[this.nameProperty]||B.idProperty;C[A]=B.getId()}}return C},writeValue:function(m,l,h){var o=l[this.nameProperty],j=this.dateFormat||l.dateWriteFormat||l.dateFormat,n=h.get(l.name);if(o==null){o=l.name}if(l.serialize){m[o]=l.serialize(n,h)}else{if(l.type===Ext.data.Types.DATE&&j&&Ext.isDate(n)){m[o]=Ext.Date.format(n,j)}else{m[o]=n}}}},1,0,0,0,["writer.base"],0,[Ext.data.writer,"Writer",Ext.data,"DataWriter",Ext.data,"Writer"],0));(Ext.cmd.derive("Ext.data.writer.Json",Ext.data.writer.Writer,{alternateClassName:"Ext.data.JsonWriter",root:undefined,encode:false,allowSingle:true,expandData:false,getExpandedData:function(q){var t=q.length,p=0,m,u,o,s,n,j=function(c,a){var d={};d[c]=a;return d};for(;p<t;p++){m=q[p];for(u in m){if(m.hasOwnProperty(u)){o=u.split(".");s=o.length-1;if(s>0){n=m[u];for(;s>0;s--){n=j(o[s],n)}m[o[0]]=m[o[0]]||{};Ext.Object.merge(m[o[0]],n);delete m[u]}}}}return q},writeRecords:function(d,h){var e=this.root;if(this.expandData){h=this.getExpandedData(h)}if(this.allowSingle&&h.length===1){h=h[0]}if(this.encode){if(e){d.params[e]=Ext.encode(h)}else{}}else{d.jsonData=d.jsonData||{};if(e){d.jsonData[e]=h}else{d.jsonData=h}}return d}},0,0,0,0,["writer.json"],0,[Ext.data.writer,"Json",Ext.data,"JsonWriter"],0));(Ext.cmd.derive("Ext.data.proxy.Proxy",Ext.Base,{alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],batchOrder:"create,update,destroy",batchActions:true,defaultReaderType:"json",defaultWriterType:"json",isProxy:true,isSynchronous:false,constructor:function(d){var c=this;d=d||{};c.proxyConfig=d;c.mixins.observable.constructor.call(c,d);if(c.model!==undefined&&!(c.model instanceof Ext.data.Model)){c.setModel(c.model)}else{if(c.reader){c.setReader(c.reader)}if(c.writer){c.setWriter(c.writer)}}},setModel:function(e,d){var h=this;h.model=Ext.ModelManager.getModel(e);h.setReader(this.reader);h.setWriter(this.writer);if(d&&h.store){h.store.setModel(h.model)}},getModel:function(){return this.model},setReader:function(h){var l=this,e=true,j=l.reader;if(h===undefined||typeof h=="string"){h={type:h};e=false}if(h.isReader){h.setModel(l.model)}else{if(e){h=Ext.apply({},h)}Ext.applyIf(h,{proxy:l,model:l.model,type:l.defaultReaderType});h=Ext.createByAlias("reader."+h.type,h)}if(h!==j&&h.onMetaChange){h.on("metachange",l.onMetaChange,l)}l.reader=h;return l.reader},getReader:function(){return this.reader},onMetaChange:function(c){this.fireEvent("metachange",this,c)},setWriter:function(h){var d=this,e=true;if(h===undefined||typeof h=="string"){h={type:h};e=false}if(!h.isWriter){if(e){h=Ext.apply({},h)}Ext.applyIf(h,{model:d.model,type:d.defaultWriterType});h=Ext.createByAlias("writer."+h.type,h)}d.writer=h;return d.writer},getWriter:function(){return this.writer},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,batch:function(a,t){var u=this,v=u.batchActions,x,B,y,A,z,s,C,q,w;if(a.operations===undefined){a={operations:a,listeners:t}}if(a.batch){if(Ext.isDefined(a.batch.runOperation)){x=Ext.applyIf(a.batch,{proxy:u,listeners:{}})}}else{a.batch={proxy:u,listeners:a.listeners||{}}}if(!x){x=new Ext.data.Batch(a.batch)}x.on("complete",Ext.bind(u.onBatchComplete,u,[a],0));y=u.batchOrder.split(",");A=y.length;for(s=0;s<A;s++){z=y[s];B=a.operations[z];if(B){if(v){x.add(new Ext.data.Operation({action:z,records:B}))}else{q=B.length;for(C=0;C<q;C++){w=B[C];x.add(new Ext.data.Operation({action:z,records:[w]}))}}}}x.start();return x},onBatchComplete:function(e,d){var h=e.scope||this;if(d.hasException){if(Ext.isFunction(e.failure)){Ext.callback(e.failure,h,[d,e])}}else{if(Ext.isFunction(e.success)){Ext.callback(e.success,h,[d,e])}}if(Ext.isFunction(e.callback)){Ext.callback(e.callback,h,[d,e])}},clone:function(){return new this.self(this.proxyConfig)}},1,0,0,0,["proxy.proxy"],[["observable",Ext.util.Observable]],[Ext.data.proxy,"Proxy",Ext.data,"DataProxy",Ext.data,"Proxy"],0));(Ext.cmd.derive("Ext.data.proxy.Client",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ClientProxy",isSynchronous:true,clear:function(){}},0,0,0,0,0,0,[Ext.data.proxy,"Client",Ext.data,"ClientProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Memory",Ext.data.proxy.Client,{alternateClassName:"Ext.data.MemoryProxy",constructor:function(c){this.callParent([c]);this.setReader(this.reader)},updateOperation:function(h,l,n){var o=0,m=h.getRecords(),j=m.length;for(o;o<j;o++){m[o].commit()}h.setCompleted();h.setSuccessful();Ext.callback(l,n||this,[h])},create:function(){this.updateOperation.apply(this,arguments)},update:function(){this.updateOperation.apply(this,arguments)},destroy:function(){this.updateOperation.apply(this,arguments)},read:function(s,m,l){var o=this,n=s.resultSet=o.getReader().read(o.data),t=n.records,p=s.sorters,q=s.groupers,u=s.filters;s.setCompleted();if(n.success){if(u&&u.length){t=n.records=Ext.Array.filter(t,Ext.util.Filter.createFilterFn(u));n.total=t.length}if(q&&q.length){p=p?p.concat(q):p}if(p&&p.length){n.records=Ext.Array.sort(t,Ext.util.Sortable.createComparator(p))}if(o.enablePaging&&s.start!==undefined&&s.limit!==undefined){if(s.start>=n.total){n.success=false;n.count=0;n.records=[]}else{n.records=Ext.Array.slice(n.records,s.start,s.start+s.limit);n.count=n.records.length}}}if(n.success){s.setSuccessful()}else{o.fireEvent("exception",o,null,s)}Ext.callback(m,l||o,[s])},clear:Ext.emptyFn},1,0,0,0,["proxy.memory"],0,[Ext.data.proxy,"Memory",Ext.data,"MemoryProxy"],0));(Ext.cmd.derive("Ext.data.Operation",Ext.Base,{synchronous:true,action:undefined,filters:undefined,sorters:undefined,groupers:undefined,start:undefined,limit:undefined,batch:undefined,callback:undefined,scope:undefined,started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,actionCommitRecordsRe:/^(?:create|update)$/i,actionSkipSyncRe:/^destroy$/i,constructor:function(c){Ext.apply(this,c||{})},commitRecords:function(o){var t=this,p=t.actionCommitRecordsRe.test(t.action),q,u,A,w,z,x,v,s,y;if(!t.actionSkipSyncRe.test(t.action)){A=t.records;if(A&&A.length){if(p){y=[]}if(A.length>1){if(t.action=="update"||A[0].clientIdProperty){q=new Ext.util.MixedCollection();q.addAll(o);for(u=A.length;u--;){z=A[u];w=q.findBy(t.matchClientRec,z);s=z.copyFrom(w);if(p){y.push(s)}}}else{for(x=0,v=A.length;x<v;++x){z=A[x];w=o[x];if(z&&w){s=t.updateRecord(z,w);if(p){y.push(s)}}}}}else{s=t.updateRecord(A[0],o[0]);if(p){y[0]=s}}if(p){for(u=A.length;u--;){A[u].commit(false,y[u])}}}}},updateRecord:function(d,c){if(c&&(d.phantom||d.getId()===c.getId())){return d.copyFrom(c)}return[]},matchClientRec:function(h){var e=this,d=e.getId();if(d&&h.getId()===d){return true}return h.internalId===e.internalId},setStarted:function(){this.started=true;this.running=true},setCompleted:function(){this.complete=true;this.running=false},setSuccessful:function(){this.success=true},setException:function(c){this.exception=true;this.success=false;this.running=false;this.error=c},hasException:function(){return this.exception===true},getError:function(){return this.error},getRecords:function(){var c=this.getResultSet();return this.records||(c?c.records:null)},getResultSet:function(){return this.resultSet},isStarted:function(){return this.started===true},isRunning:function(){return this.running===true},isComplete:function(){return this.complete===true},wasSuccessful:function(){return this.isComplete()&&this.success===true},setBatch:function(c){this.batch=c},allowWrite:function(){return this.action!="read"}},1,0,0,0,0,0,[Ext.data,"Operation"],0));(Ext.cmd.derive("Ext.data.AbstractStore",Ext.Base,{statics:{create:function(c){if(!c.isStore){if(!c.type){c.type="store"}c=Ext.createByAlias("store."+c.type,c)}return c}},onClassExtended:function(h,m,j){var n=m.model,l;if(typeof n=="string"){l=j.onBeforeCreated;j.onBeforeCreated=function(){var a=this,c=arguments;Ext.require(n,function(){l.apply(a,c)})}}},remoteSort:false,remoteFilter:false,autoLoad:undefined,autoSync:false,batchUpdateMode:"operation",filterOnLoad:true,sortOnLoad:true,implicitModel:false,defaultProxyType:"memory",isDestroyed:false,isStore:true,sortRoot:"data",constructor:function(e){var h=this,d;Ext.apply(h,e);h.removed=[];h.mixins.observable.constructor.apply(h,arguments);h.model=Ext.ModelManager.getModel(h.model);Ext.applyIf(h,{modelDefaults:null});if(!h.model&&h.fields){h.model=Ext.define(null,{extend:"Ext.data.Model",fields:h.fields,proxy:h.proxy||h.defaultProxyType});delete h.fields;h.implicitModel=true}h.setProxy(h.proxy||h.model.getProxy());if(h.id&&!h.storeId){h.storeId=h.id;delete h.id}if(h.storeId){Ext.data.StoreManager.register(h)}h.mixins.sortable.initSortable.call(h);d=h.decodeFilters(h.filters);h.filters=new Ext.util.MixedCollection();h.filters.addAll(d)},setProxy:function(d){var h=this,e=h.model;if(d instanceof Ext.data.proxy.Proxy){d.setModel(e)}else{if(Ext.isString(d)){d={type:d,model:e}}else{if(!d.model){d=Ext.apply({model:e},d)}}d=Ext.createByAlias("proxy."+d.type,d)}if(!h.disableMetaChangeEvent){d.on("metachange",h.onMetaChange,h)}h.proxy=d;return h.proxy},getProxy:function(){return this.proxy},onMetaChange:function(d,c){this.fireEvent("metachange",this,c)},create:function(l,n){var m=this,j=Ext.ModelManager.create(Ext.applyIf(l,m.modelDefaults),m.model.modelName),h;n=n||{};Ext.applyIf(n,{action:"create",records:[j]});h=new Ext.data.Operation(n);m.proxy.create(h,m.onProxyWrite,m);return j},read:function(){return this.load.apply(this,arguments)},update:function(d){var h=this,e;d=d||{};Ext.applyIf(d,{action:"update",records:h.getUpdatedRecords()});e=new Ext.data.Operation(d);return h.proxy.update(e,h.onProxyWrite,h)},onProxyWrite:function(e){var l=this,j=e.wasSuccessful(),h=e.getRecords();switch(e.action){case"create":l.onCreateRecords(h,e,j);break;case"update":l.onUpdateRecords(h,e,j);break;case"destroy":l.onDestroyRecords(h,e,j);break}if(j){l.fireEvent("write",l,e);l.fireEvent("datachanged",l);l.fireEvent("refresh",l)}Ext.callback(e.callback,e.scope||l,[h,e,j])},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(d,e,h){if(h){this.removed=[]}},destroy:function(d){var h=this,e;d=d||{};Ext.applyIf(d,{action:"destroy",records:h.getRemovedRecords()});e=new Ext.data.Operation(d);return h.proxy.destroy(e,h.onProxyWrite,h)},onBatchOperationComplete:function(c,d){return this.onProxyWrite(d)},onBatchComplete:function(o,j){var l=this,h=o.operations,m=h.length,n;l.suspendEvents();for(n=0;n<m;n++){l.onProxyWrite(h[n])}l.resumeEvents();l.fireEvent("datachanged",l);l.fireEvent("refresh",l)},onBatchException:function(c,d){},filterNew:function(c){return c.phantom===true&&c.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(c){return c.dirty===true&&c.phantom!==true&&c.isValid()},getRemovedRecords:function(){return this.removed},filter:function(d,c){},decodeFilters:function(l){if(!Ext.isArray(l)){if(l===undefined){l=[]}else{l=[l]}}var m=l.length,j=Ext.util.Filter,h,n;for(n=0;n<m;n++){h=l[n];if(!(h instanceof j)){Ext.apply(h,{root:"data"});if(h.fn){h.filterFn=h.fn}if(typeof h=="function"){h={filterFn:h}}l[n]=new j(h)}}return l},clearFilter:function(c){},isFiltered:function(){},filterBy:function(c,d){},sync:function(q){var o=this,j={},n=o.getNewRecords(),p=o.getUpdatedRecords(),l=o.getRemovedRecords(),m=false;if(n.length>0){j.create=n;m=true}if(p.length>0){j.update=p;m=true}if(l.length>0){j.destroy=l;m=true}if(m&&o.fireEvent("beforesync",j)!==false){q=q||{};o.proxy.batch(Ext.apply(q,{operations:j,listeners:o.getBatchListeners()}))}return o},getBatchListeners:function(){var c=this,d={scope:c,exception:c.onBatchException};if(c.batchUpdateMode=="operation"){d.operationcomplete=c.onBatchOperationComplete}else{d.complete=c.onBatchComplete}return d},save:function(){return this.sync.apply(this,arguments)},load:function(d){var h=this,e={action:"read"};if(h.remoteFilter){e.filters=h.filters.items}if(h.remoteSort){e.sorters=h.getSorters()}Ext.apply(e,d);h.lastOptions=e;e=new Ext.data.Operation(e);if(h.fireEvent("beforeload",h,e)!==false){h.loading=true;h.proxy.read(e,h.onProxyLoad,h)}return h},reload:function(d){var c=Ext.apply({},d,this.lastOptions);return this.load(c)},afterEdit:function(j,l){var m=this,h,n;if(m.autoSync&&!m.autoSyncSuspended){for(h=l.length;h--;){if(j.fields.get(l[h]).persist){n=true;break}}if(n){m.sync()}}m.onUpdate(j,Ext.data.Model.EDIT,l);m.fireEvent("update",m,j,Ext.data.Model.EDIT,l)},afterReject:function(c){this.onUpdate(c,Ext.data.Model.REJECT,null);this.fireEvent("update",this,c,Ext.data.Model.REJECT,null)},afterCommit:function(d,c){if(!c){c=null}this.onUpdate(d,Ext.data.Model.COMMIT,c);this.fireEvent("update",this,d,Ext.data.Model.COMMIT,c)},onUpdate:Ext.emptyFn,onIdChanged:function(l,j,e,h){this.fireEvent("idchanged",this,l,j,e,h)},destroyStore:function(){var c=this;if(!c.isDestroyed){c.clearListeners();if(c.storeId){Ext.data.StoreManager.unregister(c)}c.destroyClear();if(c.reader){c.reader.destroyReader()}c.data=c.tree=c.sorters=c.filters=c.groupers=c.proxy=c.reader=c.writer=c.model=null;c.isDestroyed=true}},destroyClear:function(){this.clearData()},getState:function(){var o=this,q,l,j=!!o.groupers,n=[],m=[],p=[];if(j){o.groupers.each(function(a){n[n.length]=a.serialize();q=true})}if(o.sorters){o.sorters.each(function(a){if(j&&!o.groupers.contains(a)){m[m.length]=a.serialize();q=true}})}if(o.filters&&o.statefulFilters){o.filters.each(function(a){p[p.length]=a.serialize();q=true})}if(q){l={};if(n.length){l.groupers=n}if(m.length){l.sorters=m}if(p.length){l.filters=p}return l}},applyState:function(l){var m=this,o=!!m.sorters,h=!!m.groupers,j=!!m.filters,n;if(h&&l.groupers){m.groupers.clear();m.groupers.addAll(m.decodeGroupers(l.groupers))}if(o&&l.sorters){m.sorters.clear();m.sorters.addAll(m.decodeSorters(l.sorters))}if(j&&l.filters){m.filters.clear();m.filters.addAll(m.decodeFilters(l.filters))}if(o&&h){m.sorters.insert(0,m.groupers.getRange())}if(m.autoLoad&&(m.remoteSort||m.remoteGroup||m.remoteFilter)){if(m.autoLoadTask){m.autoLoadTask.cancel();delete m.autoLoadTask}if(m.autoLoad===true){m.reload()}else{m.reload(m.autoLoad)}}if(j&&m.filters.length&&!m.remoteFilter){m.filter();n=m.sortOnFilter}if(o&&m.sorters.length&&!m.remoteSort&&!n){m.sort()}},doSort:function(d){var c=this;if(c.remoteSort){c.load()}else{c.data.sortBy(d);c.fireEvent("datachanged",c);c.fireEvent("refresh",c)}c.fireEvent("sort",c,c.sorters.getRange())},clearData:Ext.emptyFn,getCount:Ext.emptyFn,getById:Ext.emptyFn,removeAll:Ext.emptyFn,isLoading:function(){return !!this.loading},suspendAutoSync:function(){this.autoSyncSuspended=true},resumeAutoSync:function(){this.autoSyncSuspended=false}},1,0,0,0,0,[["observable",Ext.util.Observable],["sortable",Ext.util.Sortable]],[Ext.data,"AbstractStore"],0));(Ext.cmd.derive("Ext.data.StoreManager",Ext.util.MixedCollection,{alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,register:function(){for(var d=0,c;(c=arguments[d]);d++){this.add(c)}},unregister:function(){for(var d=0,c;(c=arguments[d]);d++){this.remove(this.lookup(c))}},lookup:function(o){if(Ext.isArray(o)){var h=["field1"],m=!Ext.isArray(o[0]),l=o,n,j;if(m){l=[];for(n=0,j=o.length;n<j;++n){l.push([o[n]])}}else{for(n=2,j=o[0].length;n<=j;++n){h.push("field"+n)}}return new Ext.data.ArrayStore({data:l,fields:h,autoDestroy:true,autoCreated:true,expanded:m})}if(Ext.isString(o)){return this.get(o)}else{return Ext.data.AbstractStore.create(o)}},getKey:function(c){return c.storeId}},0,0,0,0,0,0,[Ext.data,"StoreManager",Ext,"StoreMgr",Ext.data,"StoreMgr",Ext,"StoreManager"],function(){Ext.regStore=function(h,d){var e;if(Ext.isObject(h)){d=h}else{d.storeId=h}if(d instanceof Ext.data.Store){e=d}else{e=new Ext.data.Store(d)}return Ext.data.StoreManager.register(e)};Ext.getStore=function(c){return Ext.data.StoreManager.lookup(c)}}));(Ext.cmd.derive("Ext.app.domain.Global",Ext.app.EventDomain,{singleton:true,type:"global",constructor:function(){var c=this;c.callParent();c.monitor(Ext.globalEvents)},listen:function(c,d){this.callParent([{global:c},d])},match:function(){return true}},1,0,0,0,0,0,[Ext.app.domain,"Global"],0));(Ext.cmd.derive("Ext.app.domain.Store",Ext.app.EventDomain,{singleton:true,type:"store",idProperty:"storeId",constructor:function(){var c=this;c.callParent();c.monitor(Ext.data.AbstractStore)}},1,0,0,0,0,0,[Ext.app.domain,"Store"],0));(Ext.cmd.derive("Ext.app.Controller",Ext.Base,{statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"}},controllerRegex:/^(.*)\.controller\./,createGetter:function(d,c){return function(){return this[d](c)}},getGetterName:function(o,j){var n="get",m=o.split("."),l=m.length,h;for(h=0;h<l;h++){n+=Ext.String.capitalize(m[h])}n+=j;return n},processDependencies:function(j,F,C,B,x){if(!x||!x.length){return}var w=this,o=w.strings[B],D,t,u,E,A,z,v,y;if(!Ext.isArray(x)){x=[x]}for(A=0,z=x.length;A<z;A++){E=x[A];D=w.getFullName(E,B,C);t=D.absoluteName;u=D.shortName;F.push(t);v=w.getGetterName(u,o.upper);j[v]=y=w.createGetter(o.getter,E);if(B!=="controller"){y["Ext.app.getter"]=true}}},getFullName:function(o,m,n){var j=o,h,l;if((h=o.indexOf("@"))>0){j=o.substring(0,h);l=o.substring(h+1)+"."+j}else{if(o.indexOf(".")>0&&(Ext.ClassManager.isCreated(o)||Ext.Loader.isAClassNameWithAKnownPrefix(o))){l=o}else{if(n){l=n+"."+m+"."+o;j=o}else{l=o}}}return{absoluteName:l,shortName:j}}},application:null,onClassExtended:function(e,l,h){var j=h.onBeforeCreated;h.onBeforeCreated=function(c,t){var u=Ext.app.Controller,p=u.controllerRegex,a=[],d,v,a,q,s;q=c.prototype;d=Ext.getClassName(c);v=t.$namespace||Ext.app.getNamespace(d)||((s=p.exec(d))&&s[1]);if(v){q.$namespace=v}u.processDependencies(q,a,v,"model",t.models);u.processDependencies(q,a,v,"view",t.views);u.processDependencies(q,a,v,"store",t.stores);u.processDependencies(q,a,v,"controller",t.controllers);Ext.require(a,Ext.Function.pass(j,arguments,this))}},constructor:function(d){var c=this;c.mixins.observable.constructor.call(c,d);if(c.refs){c.ref(c.refs)}c.eventbus=Ext.app.EventBus;c.initAutoGetters()},initAutoGetters:function(){var d=this.self.prototype,h,e;for(h in d){e=d[h];if(e&&e["Ext.app.getter"]){e.call(this)}}},doInit:function(c){var d=this;if(!d._initialized){d.init(c);d._initialized=true}},finishInit:function(l){var n=this,m=n.controllers,h,o,j;if(n._initialized&&m&&m.length){for(o=0,j=m.length;o<j;o++){h=n.getController(m[o]);h.finishInit(l)}}},init:Ext.emptyFn,onLaunch:Ext.emptyFn,ref:function(l){var n=this,j=0,o=l.length,m,p,q;l=Ext.Array.from(l);n.references=n.references||[];for(;j<o;j++){m=l[j];p=m.ref;q="get"+Ext.String.capitalize(p);if(!n[q]){n[q]=Ext.Function.pass(n.getRef,[p,m],n)}n.references.push(p.toLowerCase())}},addRef:function(c){this.ref(c)},getRef:function(n,l,j){var o=this,m=o.refCache||(o.refCache={}),h=m[n];l=l||{};j=j||{};Ext.apply(l,j);if(l.forceCreate){return Ext.ComponentManager.create(l,"component")}if(!h){if(l.selector){m[n]=h=Ext.ComponentQuery.query(l.selector)[0]}if(!h&&l.autoCreate){m[n]=h=Ext.ComponentManager.create(l,"component")}if(h){h.on("beforedestroy",function(){m[n]=null})}}return h},hasRef:function(c){var d=this.references;return d&&Ext.Array.indexOf(d,c.toLowerCase())!==-1},control:function(h,o,j){var n=this,m=j,l;if(Ext.isString(h)){l={};l[h]=o}else{l=h;m=o}n.eventbus.control(l,m||n)},listen:function(c,d){this.eventbus.listen(c,d||this)},getController:function(h){var e=this,d=e.application;if(h===e.id){return e}return d&&d.getController(h)},getStore:function(h){var e,d;e=(h.indexOf("@")==-1)?h:h.split("@")[0];d=Ext.StoreManager.get(e);if(!d){h=Ext.app.Controller.getFullName(h,"store",this.$namespace);if(h){d=Ext.create(h.absoluteName,{storeId:e})}}return d},getModel:function(c){var d=Ext.app.Controller.getFullName(c,"model",this.$namespace);return d&&Ext.ModelManager.getModel(d.absoluteName)},getView:function(d){var c=Ext.app.Controller.getFullName(d,"view",this.$namespace);return c&&Ext.ClassManager.get(c.absoluteName)},getApplication:function(){return this.application}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.app,"Controller"],0));(Ext.cmd.derive("Ext.container.DockingContainer",Ext.Base,{isDockingContainer:true,defaultDockWeights:{top:{render:1,visual:1},left:{render:3,visual:5},right:{render:5,visual:7},bottom:{render:7,visual:3}},dockOrder:{top:-1,left:-1,right:1,bottom:1},horizontalDocks:0,addDocked:function(j,l){var m=this,h=0,n,o;j=m.prepareItems(j);o=j.length;for(;h<o;h++){n=j[h];n.dock=n.dock||"top";if(n.dock==="left"||n.dock==="right"){m.horizontalDocks++}if(l!==undefined){h+=l;m.dockedItems.insert(h,n)}else{m.dockedItems.add(n)}n.onAdded(m,h);if(m.hasListeners.dockedadd){m.fireEvent("dockedadd",m,n,h)}if(m.onDockedAdd!==Ext.emptyFn){m.onDockedAdd(n)}}if(m.rendered&&!m.suspendLayout){m.updateLayout()}return j},destroyDockedItems:function(){var d=this.dockedItems,c;if(d){while((c=d.first())){this.removeDocked(c,true)}}},doRenderDockedItems:function(q,n,m){var o=n.$comp,p=o.componentLayout,j,l;if(p.getDockedItems&&!n.$skipDockedItems){j=p.getDockedItems("render",!m);l=j&&p.getItemsRenderTree(j);if(l){Ext.DomHelper.generateMarkup(l,q)}}},getDockedComponent:function(c){if(Ext.isObject(c)){c=c.getItemId()}return this.dockedItems.get(c)},getDockedItems:function(e,h){var d=this.getComponentLayout().getDockedItems("render",h);if(e&&d.length){d=Ext.ComponentQuery.query(e,d)}return d},getDockingRefItems:function(h,l){var j=h&&"*,* *",m=this.getDockedItems(j,true),n;m.push.apply(m,l);n=this.getDockedItems(j,false);m.push.apply(m,n);return m},initDockingItems:function(){var c=this,d=c.dockedItems;c.dockedItems=new Ext.util.AbstractMixedCollection(false,c.getComponentId);if(d){c.addDocked(d)}},insertDocked:function(c,d){this.addDocked(d,c)},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,removeDocked:function(l,h){var m=this,n,j;h=h===true||(h!==false&&m.autoDestroy);if(!m.dockedItems.contains(l)){return l}if(l.dock==="left"||l.dock==="right"){m.horizontalDocks--}n=m.componentLayout;j=n&&m.rendered;if(j){n.onRemove(l)}m.dockedItems.remove(l);l.onRemoved(l.destroying||h);m.onDockedRemove(l);if(h){l.destroy()}else{if(j){n.afterRemove(l)}}if(m.hasListeners.dockedremove){m.fireEvent("dockedremove",m,l)}if(!m.destroying&&!m.suspendLayout){m.updateLayout()}return l},setupDockingRenderTpl:function(c){c.renderDockedItems=this.doRenderDockedItems}},0,0,0,0,0,0,[Ext.container,"DockingContainer"],0));Ext.define("Ext.toolbar.Fill",{extend:Ext.Component,alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",ariaRole:"presentation",isFill:true,flex:1});(Ext.cmd.derive("Ext.layout.container.boxOverflow.None",Ext.Base,{alternateClassName:"Ext.layout.boxOverflow.None",constructor:function(c,d){this.layout=c;Ext.apply(this,d)},destroy:function(){this.layout=null},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,beginLayout:Ext.emptyFn,beginLayoutCycle:Ext.emptyFn,calculate:function(e){var h=this,l=e.state.boxPlan,j;if(l&&l.tooNarrow){j=h.handleOverflow(e);if(j){if(j.reservedSpace){h.layout.publishInnerCtSize(e,j.reservedSpace)}}}else{h.clearOverflow()}},completeLayout:Ext.emptyFn,finishedLayout:function(m){var n=this,j=n.layout.owner,h,l;if(j.hasListeners.overflowchange){h=j.query(">[hidden]");l=h.length;if(l!==n.lastHiddenCount){j.fireEvent("overflowchange",n.lastHiddenCount,l,h);n.lastHiddenCount=l}}},onRemove:Ext.emptyFn,getItem:function(c){return this.layout.owner.getComponent(c)},getOwnerType:function(d){var c;if(d.isToolbar){c="toolbar"}else{if(d.isTabBar){c="tabbar"}else{if(d.isMenu){c="menu"}else{c=d.getXType()}}}return c},getPrefixConfig:Ext.emptyFn,getSuffixConfig:Ext.emptyFn,getOverflowCls:function(){return""}},1,0,0,0,0,0,[Ext.layout.container.boxOverflow,"None",Ext.layout.boxOverflow,"None"],0));Ext.define("Ext.toolbar.Item",{extend:Ext.Component,alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.define("Ext.toolbar.Separator",{extend:Ext.toolbar.Item,alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:Ext.baseCSSPrefix+"toolbar-separator",focusable:false,ariaRole:"separator"});(Ext.cmd.derive("Ext.button.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.ButtonToggleManager",groups:{},pressedButton:null,buttonSelector:"."+Ext.baseCSSPrefix+"btn",init:function(){var c=this;if(!c.initialized){Ext.getDoc().on({keydown:c.onDocumentKeyDown,mouseup:c.onDocumentMouseUp,scope:c});c.initialized=true}},onDocumentKeyDown:function(h){var e=h.getKey(),d;if(e===h.SPACE||e===h.ENTER){d=h.getTarget(this.buttonSelector);if(d){Ext.getCmp(d.id).onClick(h)}}},onButtonMousedown:function(e,h){var d=this.pressedButton;if(d){d.onMouseUp(h)}this.pressedButton=e},onDocumentMouseUp:function(c){var d=this.pressedButton;if(d){d.onMouseUp(c);this.pressedButton=null}},toggleGroup:function(h,l){if(l){var m=this.groups[h.toggleGroup],n=m.length,j;for(j=0;j<n;j++){if(m[j]!==h){m[j].toggle(false)}}}},register:function(e){var l=this,h=this.groups,j=h[e.toggleGroup];l.init();if(!e.toggleGroup){return}if(!j){j=h[e.toggleGroup]=[]}j.push(e);e.on("toggle",l.toggleGroup,l)},unregister:function(e){if(!e.toggleGroup){return}var d=this,h=d.groups[e.toggleGroup];if(h){Ext.Array.remove(h,e);e.un("toggle",d.toggleGroup,d)}},getPressed:function(j){var l=this.groups[j],e=0,h;if(l){for(h=l.length;e<h;e++){if(l[e].pressed===true){return l[e]}}}return null}},0,0,0,0,0,0,[Ext.button,"Manager",Ext,"ButtonToggleManager"],0));(Ext.cmd.derive("Ext.menu.Manager",Ext.Base,{singleton:true,alternateClassName:"Ext.menu.MenuMgr",menuSelector:"."+Ext.baseCSSPrefix+"menu",menus:{},groups:{},attached:false,lastShow:new Date(),init:function(){var c=this;c.active=new Ext.util.MixedCollection();Ext.getDoc().addKeyListener(27,function(){if(c.active.length>0){c.hideAll()}},c)},hideAll:function(){var l=this.active,e,h,j;if(l&&l.length>0){e=Ext.Array.slice(l.items);j=e.length;for(h=0;h<j;h++){e[h].hide()}return true}return false},onHide:function(e){var d=this,h=d.active;h.remove(e);if(h.length<1){Ext.getDoc().un("mousedown",d.onMouseDown,d);d.attached=false}},onShow:function(h){var l=this,j=l.active,e=l.attached;l.lastShow=new Date();j.add(h);if(!e){Ext.getDoc().on("mousedown",l.onMouseDown,l,{buffer:Ext.isIE9m?10:undefined});l.attached=true}h.toFront()},onBeforeHide:function(c){if(c.activeChild){c.activeChild.hide()}if(c.autoHideTimer){clearTimeout(c.autoHideTimer);delete c.autoHideTimer}},onBeforeShow:function(e){var h=this.active,d=e.parentMenu;h.remove(e);if(!d&&!e.allowOtherMenus){this.hideAll()}else{if(d&&d.activeChild&&e!=d.activeChild){d.activeChild.hide()}}},onMouseDown:function(l){var n=this,m=n.active,e=m.length,j=n.lastShow,o;if(Ext.Date.getElapsed(j)>50&&e){if(Ext.isIE9m&&!Ext.getDoc().contains(l.target)){return}else{for(o=0;o<e;o++){if(m.items[o].owns(l.target)){return}}}n.hideAll()}},register:function(c){var d=this;if(!d.active){d.init()}if(c.floating){d.menus[c.id]=c;c.on({beforehide:d.onBeforeHide,hide:d.onHide,beforeshow:d.onBeforeShow,show:d.onShow,scope:d})}},get:function(c){var d=this.menus;if(typeof c=="string"){if(!d){return null}return d[c]}else{if(c.isMenu){return c}else{if(Ext.isArray(c)){return new Ext.menu.Menu({items:c})}else{return Ext.ComponentManager.create(c,"menu")}}}},unregister:function(j){var h=this,e=h.menus,l=h.active;delete e[j.id];l.remove(j);j.un({beforehide:h.onBeforeHide,hide:h.onHide,beforeshow:h.onBeforeShow,show:h.onShow,scope:h})},registerCheckable:function(h){var e=this.groups,d=h.group;if(d){if(!e[d]){e[d]=[]}e[d].push(h)}},unregisterCheckable:function(h){var e=this.groups,d=h.group;if(d){Ext.Array.remove(e[d],h)}},onCheckChange:function(s,p){var m=this.groups,t=s.group,l=0,n,q,o;if(t&&p){n=m[t];q=n.length;for(;l<q;l++){o=n[l];if(o!=s){o.setChecked(false)}}}}},0,0,0,0,0,0,[Ext.menu,"Manager",Ext.menu,"MenuMgr"],0));(Ext.cmd.derive("Ext.util.ClickRepeater",Ext.util.Observable,{constructor:function(d,e){var h=this;h.el=Ext.get(d);h.el.unselectable();Ext.apply(h,e);h.callParent();h.addEvents("mousedown","click","mouseup");if(!h.disabled){h.disabled=true;h.enable()}if(h.handler){h.on("click",h.handler,h.scope||h)}},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE&&!(Ext.isIE10p||(Ext.isStrict&&Ext.isIE9))){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(c){if(c||!this.disabled){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(c){this[c?"disable":"enable"]()},eventOptions:function(c){if(this.preventDefault){c.preventDefault()}if(this.stopDefault){c.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.clearListeners()},handleDblClick:function(c){clearTimeout(this.timer);this.fireEvent("mousedown",this,c);this.fireEvent("click",this,c)},handleMouseDown:function(c){clearTimeout(this.timer);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,c);this.fireEvent("click",this,c);if(this.accelerate){this.delay=400}c=new Ext.EventObjectImpl(c);this.timer=Ext.defer(this.click,this.delay||this.interval,this,[c])},click:function(c){this.fireEvent("click",this,c);this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12000):this.interval,this,[c])},easeOutExpo:function(l,c,d,j){return(l==j)?c+d:d*(-Math.pow(2,-10*l/j)+1)+c},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressedCls){this.el.addCls(this.pressedCls)}this.click()},handleMouseUp:function(c){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);if(this.pressedCls){this.el.removeCls(this.pressedCls)}this.fireEvent("mouseup",this,c)}},1,0,0,0,0,0,[Ext.util,"ClickRepeater"],0));(Ext.cmd.derive("Ext.layout.component.Button",Ext.layout.component.Auto,{type:"button",htmlRE:/<.*>/,beginLayout:function(l){var e=this,h=e.owner,j=h.text;e.callParent(arguments);l.btnWrapContext=l.getEl("btnWrap");l.btnElContext=l.getEl("btnEl");l.btnInnerElContext=l.getEl("btnInnerEl");l.btnIconElContext=l.getEl("btnIconEl");if(j&&e.htmlRE.test(j)){l.isHtmlText=true;h.btnInnerEl.setStyle("line-height","normal");h.btnInnerEl.setStyle("padding-top","")}},beginLayoutCycle:function(o){var j=this.owner,m=this.lastWidthModel,n=this.lastHeightModel,l=j.btnInnerEl,h=j.getFrameInfo().table;this.callParent(arguments);if(m&&!m.shrinkWrap&&o.widthModel.shrinkWrap){j.btnWrap.setStyle("height","");j.btnEl.setStyle("height","");l.setStyle("line-height","");if(h){l.setStyle("width","")}}if(h&&n&&!n.shrinkWrap&&o.heightModel.shrinkWrap){l.setStyle("height","")}},calculate:function(v){var s=this,w=s.owner,q=v.btnElContext,t=v.btnInnerElContext,n=v.btnWrapContext,u=Math.max,x,p,o,y;s.callParent(arguments);if(v.heightModel.shrinkWrap){o=w.btnEl.getHeight();if(v.isHtmlText){s.centerInnerEl(v,o);s.ieCenterIcon(v,o)}}else{x=v.getProp("height");if(x){p=x-v.getFrameInfo().height-v.getPaddingInfo().height;o=p;if((w.menu||w.split)&&w.arrowAlign==="bottom"){o-=n.getPaddingInfo().bottom}y=o;if((w.icon||w.iconCls||w.glyph)&&(w.iconAlign==="top"||w.iconAlign==="bottom")){y-=t.getPaddingInfo().height}n.setProp("height",u(0,p));q.setProp("height",u(0,o));if(v.isHtmlText){s.centerInnerEl(v,o)}else{t.setProp("line-height",u(0,y)+"px")}s.ieCenterIcon(v,o)}else{if(x!==0){s.done=false}}}},centerInnerEl:function(l,m){var n=this,h=l.btnInnerElContext,j=n.owner.btnInnerEl.getHeight();if(l.heightModel.shrinkWrap&&(m<j)){l.btnElContext.setHeight(j)}else{if(m>j){h.setProp("padding-top",Math.round((m-j)/2)+h.getPaddingInfo().top)}}},ieCenterIcon:function(h,d){var e=this.owner.iconAlign;if((Ext.isIEQuirks||Ext.isIE6)&&(e==="left"||e==="right")){h.btnIconElContext.setHeight(d)}},publishInnerWidth:function(c,d){if(this.owner.getFrameInfo().table){c.btnInnerElContext.setWidth(d-c.getFrameInfo().width-c.getPaddingInfo().width-c.btnWrapContext.getPaddingInfo().width)}}},0,0,0,0,["layout.button"],0,[Ext.layout.component,"Button"],0));(Ext.cmd.derive("Ext.util.TextMetrics",Ext.Base,{statics:{shared:null,measure:function(j,m,l){var h=this,n=h.shared;if(!n){n=h.shared=new h(j,l)}n.bind(j);n.setFixedWidth(l||"auto");return n.getSize(m)},destroy:function(){var c=this;Ext.destroy(c.shared);c.shared=null}},constructor:function(h,j){var l=this,e=Ext.getBody().createChild({role:"presentation",cls:Ext.baseCSSPrefix+"textmetrics"});l.measure=e;if(h){l.bind(h)}e.position("absolute");e.setLocalXY(-1000,-1000);e.hide();if(j){e.setWidth(j)}},getSize:function(h){var d=this.measure,e;d.update(h);e=d.getSize();d.update("");return e},bind:function(d){var c=this;c.el=Ext.get(d);c.measure.setStyle(c.el.getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-break"))},setFixedWidth:function(c){this.measure.setWidth(c)},getWidth:function(c){this.measure.dom.style.width="auto";return this.getSize(c).width},getHeight:function(c){return this.getSize(c).height},destroy:function(){var c=this;c.measure.remove();delete c.el;delete c.measure}},1,0,0,0,0,0,[Ext.util,"TextMetrics"],function(){Ext.Element.addMethods({getTextWidth:function(h,d,e){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.value(h,this.dom.innerHTML,true)).width,d||0,e||1000000)}})}));(Ext.cmd.derive("Ext.button.Button",Ext.Component,{alternateClassName:"Ext.Button",isButton:true,componentLayout:"button",hidden:false,disabled:false,pressed:false,tabIndex:0,enableToggle:false,menuAlign:"tl-bl?",showEmptyMenu:false,textAlign:"center",clickEvent:"click",preventDefault:true,handleMouseEvents:true,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",pressedCls:"pressed",overCls:"over",focusCls:"focus",menuActiveCls:"menu-active",hrefTarget:"_blank",destroyMenu:true,ariaRole:"button",childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl"],renderTpl:['<span id="{id}-btnWrap" role="presentation" class="{baseCls}-wrap','<tpl if="splitCls"> {splitCls}</tpl>','{childElCls}" unselectable="on">','<span id="{id}-btnEl" class="{baseCls}-button" role="presentation">','<span id="{id}-btnInnerEl" class="{baseCls}-inner {innerCls}','{childElCls}" unselectable="on">',"{text}","</span>",'<span role="presentation" id="{id}-btnIconEl" class="{baseCls}-icon-el {iconCls}','{childElCls} {glyphCls}" unselectable="on" style="','<tpl if="iconUrl">background-image:url({iconUrl});</tpl>','<tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>">','<tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl>',"</span>","</span>","</span>",'<tpl if="closable">','<span id="{id}-closeEl" role="presentation"',' class="{baseCls}-close-btn"','<tpl if="closeText">',' title="{closeText}" aria-label="{closeText}"',"</tpl>",">","</span>","</tpl>"],scale:"small",allowedScales:["small","medium","large"],iconAlign:"left",arrowAlign:"right",arrowCls:"arrow",maskOnDisable:false,shrinkWrap:3,frame:true,autoEl:{tag:"a",hidefocus:"on",unselectable:"on"},hasFrameTable:function(){return this.href&&this.frameTable},frameTableListener:function(){if(!this.disabled){this.doNavigate()}},doNavigate:function(){if(this.hrefTarget==="_blank"){window.open(this.getHref(),this.hrefTarget)}else{location.href=this.getHref()}},_triggerRegion:{},initComponent:function(){var c=this;c.addCls(Ext.baseCSSPrefix+"unselectable");c.callParent(arguments);c.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout","textchange","iconchange","glyphchange");if(c.menu){c.split=true;c.setMenu(c.menu,false)}if(c.url){c.href=c.url}if(c.href&&!c.hasOwnProperty("preventDefault")){c.preventDefault=false}if(Ext.isString(c.toggleGroup)&&c.toggleGroup!==""){c.enableToggle=true}if(c.html&&!c.text){c.text=c.html;delete c.html}c.glyphCls=c.baseCls+"-glyph"},getActionEl:function(){return this.el},getFocusEl:function(){return this.el},setComponentCls:function(){var c=this,d=c.getComponentCls();if(!Ext.isEmpty(c.oldCls)){c.removeClsWithUI(c.oldCls);c.removeClsWithUI(c.pressedCls)}c.oldCls=d;c.addClsWithUI(d)},getComponentCls:function(){var c=this,d;if(c.iconCls||c.icon||c.glyph){d=[c.text?"icon-text-"+c.iconAlign:"icon"]}else{if(c.text){d=["noicon"]}else{d=[]}}if(c.pressed){d[d.length]=c.pressedCls}return d},getElConfig:function(){var l=this,e=l.callParent(),h=l.getHref(),j=l.hrefTarget;if(e.tag==="a"){if(!l.disabled){e.tabIndex=l.tabIndex}if(h){e.href=h;if(j){e.target=j}}}return e},beforeRender:function(){var c=this;c.callParent();c.oldCls=c.getComponentCls();c.addClsWithUI(c.oldCls);Ext.applyIf(c.renderData,c.getTemplateArgs())},setMenu:function(j,l){var e=this,h=e.menu;if(h&&l!==false&&e.destroyMenu){h.destroy()}if(h){h.ownerCmp=h.ownerButton=null}if(j){j=Ext.menu.Manager.get(j);j.ownerCmp=j.ownerButton=e;e.mon(j,{scope:e,show:e.onMenuShow,hide:e.onMenuHide});if(!h){e.split=true;if(e.rendered){e.btnWrap.addCls(e.getSplitCls());e.updateLayout()}}e.menu=j}else{if(e.rendered){e.btnWrap.removeCls(e.getSplitCls());e.updateLayout()}e.split=false;e.menu=null}},onRender:function(){var l=this,j,h,e;l.doc=Ext.getDoc();l.callParent(arguments);h=l.el;if(l.tooltip){l.setTooltip(l.tooltip,true)}if(l.handleMouseEvents){e={scope:l,mouseover:l.onMouseOver,mouseout:l.onMouseOut,mousedown:l.onMouseDown};if(l.split){e.mousemove=l.onMouseMove}}else{e={scope:l}}if(l.menu){l.keyMap=new Ext.util.KeyMap({target:l.el,key:Ext.EventObject.DOWN,handler:l.onDownKey,scope:l})}if(l.repeat){l.mon(new Ext.util.ClickRepeater(h,Ext.isObject(l.repeat)?l.repeat:{}),"click",l.onRepeatClick,l)}else{if(e[l.clickEvent]){j=true}else{e[l.clickEvent]=l.onClick}}l.mon(h,e);if(l.hasFrameTable()){l.mon(l.frameTable,"click",l.frameTableListener,l)}if(j){l.mon(h,l.clickEvent,l.onClick,l)}Ext.button.Manager.register(l)},getTemplateArgs:function(){var l=this,e=l.glyph,j=Ext._glyphFontFamily,h;if(typeof e==="string"){h=e.split("@");e=h[0];j=h[1]}return{innerCls:l.getInnerCls(),splitCls:l.getSplitCls(),iconUrl:l.icon,iconCls:l.iconCls,glyph:e,glyphCls:e?l.glyphCls:"",glyphFontFamily:j,text:l.text||"&#160;",closeText:l.closeText}},setHref:function(c){this.href=c;this.el.dom.href=this.getHref()},getHref:function(){var c=this,d=c.href;return d?Ext.urlAppend(d,Ext.Object.toQueryString(Ext.apply({},c.params,c.baseParams))):false},setParams:function(c){this.params=c;this.el.dom.href=this.getHref()},getSplitCls:function(){var c=this;return c.split?(c.baseCls+"-"+c.arrowCls)+" "+(c.baseCls+"-"+c.arrowCls+"-"+c.arrowAlign):""},getInnerCls:function(){return this.textAlign?this.baseCls+"-inner-"+this.textAlign:""},setIcon:function(e){e=e||"";var l=this,h=l.btnIconEl,j=l.icon||"";l.icon=e;if(e!=j){if(h){h.setStyle("background-image",e?"url("+e+")":"");l.setComponentCls();if(l.didIconStateChange(j,e)){l.updateLayout()}}l.fireEvent("iconchange",l,j,e)}return l},setIconCls:function(e){e=e||"";var j=this,h=j.btnIconEl,l=j.iconCls||"";j.iconCls=e;if(l!=e){if(h){h.removeCls(l);h.addCls(e);j.setComponentCls();if(j.didIconStateChange(l,e)){j.updateLayout()}}j.fireEvent("iconchange",j,l,e)}return j},setGlyph:function(l){l=l||0;var m=this,h=m.btnIconEl,o=m.glyph,j,n;m.glyph=l;if(h){if(typeof l==="string"){n=l.split("@");l=n[0];j=n[1]||Ext._glyphFontFamily}if(!l){h.dom.innerHTML=""}else{if(o!=l){h.dom.innerHTML="&#"+l+";"}}if(j){h.setStyle("font-family",j)}}m.fireEvent("glyphchange",m,m.glyph,o);return m},setTooltip:function(h,e){var d=this;if(d.rendered){if(!e||!h){d.clearTip()}if(h){if(Ext.quickTipsActive&&Ext.isObject(h)){Ext.tip.QuickTipManager.register(Ext.apply({target:d.el.id},h));d.tooltip=h}else{d.el.dom.setAttribute(d.getTipAttr(),h)}}}else{d.tooltip=h}return d},setTextAlign:function(h){var d=this,e=d.btnEl;if(e){e.removeCls(d.baseCls+"-inner-"+d.textAlign);e.addCls(d.baseCls+"-inner-"+h)}d.textAlign=h;return d},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},getRefItems:function(e){var h=this.menu,d;if(h){d=h.getRefItems(e);d.unshift(h)}return d||[]},clearTip:function(){var c=this,d=c.el;if(Ext.quickTipsActive&&Ext.isObject(c.tooltip)){Ext.tip.QuickTipManager.unregister(d)}else{d.dom.removeAttribute(c.getTipAttr())}},beforeDestroy:function(){var c=this;if(c.rendered){c.clearTip()}if(c.menu&&c.destroyMenu){c.menu.destroy()}Ext.destroy(c.btnInnerEl,c.repeater);c.callParent()},onDestroy:function(){var c=this;if(c.rendered){c.doc.un("mouseover",c.monitorMouseOver,c);delete c.doc;Ext.destroy(c.keyMap);delete c.keyMap}Ext.button.Manager.unregister(c);c.callParent()},setHandler:function(c,d){this.handler=c;this.scope=d;return this},setText:function(h){h=h||"";var d=this,e=d.text||"";if(h!=e){d.text=h;if(d.rendered){d.btnInnerEl.update(h||"&#160;");d.setComponentCls();if(Ext.isStrict&&Ext.isIE8){d.el.repaint()}d.updateLayout()}d.fireEvent("textchange",d,e,h)}return d},didIconStateChange:function(e,h){var d=Ext.isEmpty(h);return Ext.isEmpty(e)?!d:d},getText:function(){return this.text},toggle:function(h,e){var d=this;h=h===undefined?!d.pressed:!!h;if(h!==d.pressed){if(d.rendered){d[h?"addClsWithUI":"removeClsWithUI"](d.pressedCls)}d.pressed=h;if(!e){d.fireEvent("toggle",d,h);Ext.callback(d.toggleHandler,d.scope||d,[d,h])}}return d},maybeShowMenu:function(){var c=this;if(c.menu&&!c.hasVisibleMenu()&&!c.ignoreNextClick){c.showMenu(true)}},showMenu:function(d){var e=this,h=e.menu;if(e.rendered){if(e.tooltip&&Ext.quickTipsActive&&e.getTipAttr()!="title"){Ext.tip.QuickTipManager.getQuickTip().cancelShow(e.el)}if(h.isVisible()){h.hide()}if(!d||e.showEmptyMenu||h.items.getCount()>0){h.showBy(e.el,e.menuAlign)}}return e},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){var c=this.menu;return c&&c.rendered&&c.isVisible()},onRepeatClick:function(d,c){this.onClick(c)},onClick:function(c){var d=this;d.doPreventDefault(c);if(c.type!=="keydown"&&c.button!==0){return}if(!d.disabled){d.doToggle();d.maybeShowMenu();d.fireHandler(c)}},doPreventDefault:function(c){if(this.preventDefault||(this.disabled&&this.getHref())&&c){c.preventDefault()}},fireHandler:function(h){var d=this,e=d.handler;if(d.fireEvent("click",d,h)!==false){if(e){e.call(d.scope||d,d,h)}}},doToggle:function(){var c=this;if(c.enableToggle&&(c.allowDepress!==false||!c.pressed)){c.toggle()}},onMouseOver:function(c){var d=this;if(!d.disabled&&!c.within(d.el,true,true)){d.onMouseEnter(c)}},onMouseOut:function(c){var d=this;if(!c.within(d.el,true,true)){if(d.overMenuTrigger){d.onMenuTriggerOut(c)}d.onMouseLeave(c)}},onMouseMove:function(m){var o=this,e=o.el,n=o.overMenuTrigger,l,j;if(o.split){l=(o.arrowAlign==="right")?m.getX()-o.getX():m.getY()-e.getY();j=o.getTriggerRegion();if(l>j.begin&&l<j.end){if(!n){o.onMenuTriggerOver(m)}}else{if(n){o.onMenuTriggerOut(m)}}}},getTriggerRegion:function(){var l=this,j=l._triggerRegion,e=l.getTriggerSize(),h=l.arrowAlign==="right"?l.getWidth():l.getHeight();j.begin=h-e;j.end=h;return j},getTriggerSize:function(){var j=this,l=j.triggerSize,e,h;if(l==null){e=j.arrowAlign;h=e.charAt(0);l=j.triggerSize=j.el.getFrameWidth(h)+j.getBtnWrapFrameWidth(h);if(j.frameSize){l=j.triggerSize+=j.frameSize[e]}}return l},getBtnWrapFrameWidth:function(c){return this.btnWrap.getFrameWidth(c)},addOverCls:function(){if(!this.disabled){this.addClsWithUI(this.overCls)}},removeOverCls:function(){this.removeClsWithUI(this.overCls)},onMouseEnter:function(c){this.fireEvent("mouseover",this,c)},onMouseLeave:function(c){this.fireEvent("mouseout",this,c)},onMenuTriggerOver:function(h){var d=this,e=d.arrowTooltip;d.overMenuTrigger=true;if(d.split&&e){d.btnWrap.dom.setAttribute(d.getTipAttr(),e)}d.fireEvent("menutriggerover",d,d.menu,h)},onMenuTriggerOut:function(c){var d=this;delete d.overMenuTrigger;if(d.split&&d.arrowTooltip){d.btnWrap.dom.setAttribute(d.getTipAttr(),"")}d.fireEvent("menutriggerout",d,d.menu,c)},enable:function(d){var c=this;c.callParent(arguments);c.removeClsWithUI("disabled");if(c.rendered){c.el.dom.setAttribute("tabIndex",c.tabIndex)}return c},disable:function(d){var c=this;c.callParent(arguments);c.addClsWithUI("disabled");c.removeClsWithUI(c.overCls);if(c.rendered){c.el.dom.removeAttribute("tabIndex")}if(c.btnInnerEl&&Ext.isIE7m){c.btnInnerEl.repaint()}return c},setScale:function(h){var e=this,d=e.ui.replace("-"+e.scale,"");if(!Ext.Array.contains(e.allowedScales,h)){throw ("#setScale: scale must be an allowed scale ("+e.allowedScales.join(", ")+")")}e.scale=h;e.setUI(d)},setUI:function(c){var d=this;if(d.scale&&!c.match(d.scale)){c=c+"-"+d.scale}d.callParent([c])},onMouseDown:function(c){var d=this;if(Ext.isIE){d.getFocusEl().focus()}if(!d.disabled&&c.button===0){Ext.button.Manager.onButtonMousedown(d,c);d.addClsWithUI(d.pressedCls)}},onMouseUp:function(c){var d=this;if(!d.isDestroyed&&c.button===0){if(!d.pressed){d.removeClsWithUI(d.pressedCls)}}},onMenuShow:function(c){var d=this;d.ignoreNextClick=0;d.addClsWithUI(d.menuActiveCls);d.fireEvent("menushow",d,d.menu)},onMenuHide:function(c){var d=this;d.removeClsWithUI(d.menuActiveCls);d.ignoreNextClick=Ext.defer(d.restoreClick,250,d);d.fireEvent("menuhide",d,d.menu);d.focus()},restoreClick:function(){this.ignoreNextClick=0},onDownKey:function(e,h){var d=this;if(d.menu&&!d.disabled){d.showMenu();h.stopEvent();return false}}},0,["button"],["component","box","button"],{component:true,box:true,button:true},["widget.button"],[["queryable",Ext.Queryable]],[Ext.button,"Button",Ext,"Button"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Menu",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="'+Ext.baseCSSPrefix+'toolbar-no-items" role="menuitem">(None)</div>',constructor:function(c){var d=this;d.callParent(arguments);d.triggerButtonCls=d.triggerButtonCls||Ext.baseCSSPrefix+"box-menu-after";d.menuItems=[]},beginLayout:function(c){this.callParent(arguments);this.clearOverflow(c)},beginLayoutCycle:function(c,d){this.callParent(arguments);if(!d){this.clearOverflow(c);this.layout.cacheChildItems(c)}},onRemove:function(c){Ext.Array.remove(this.menuItems,c)},getSuffixConfig:function(){var j=this,l=j.layout,h=l.owner,e=h.id;j.menu=new Ext.menu.Menu({listeners:{scope:j,beforeshow:j.beforeMenuShow}});j.menuTrigger=new Ext.button.Button({id:e+"-menu-trigger",cls:Ext.layout.container.Box.prototype.innerCls+" "+j.triggerButtonCls+" "+Ext.baseCSSPrefix+"toolbar-item",plain:h.usePlainButtons,ownerCt:h,ownerLayout:l,iconCls:Ext.baseCSSPrefix+j.getOwnerType(h)+"-more-icon",ui:h instanceof Ext.toolbar.Toolbar?"default-toolbar":"default",menu:j.menu,showEmptyMenu:true,getSplitCls:function(){return""}});return j.menuTrigger.getRenderTree()},getOverflowCls:function(){return Ext.baseCSSPrefix+this.layout.direction+"-box-overflow-body"},handleOverflow:function(u){var o=this,s=o.layout,p=s.names,n=u.state.boxPlan,m=[null,null],t,q,l;o.showTrigger(u);if(s.direction!=="vertical"){t=o.menuTrigger;q=u.boxOptions.align;if(q.nostretch||q.stretchmax){l=n.maxSize}else{l=n.targetSize.height}m[p.heightIndex]=(l-t[p.getHeight]())/2;t.setPosition.apply(t,m)}return{reservedSpace:o.triggerTotalWidth}},captureChildElements:function(){var e=this,h=e.menuTrigger,d=e.layout.names;if(h.rendering){h.finishRender();e.triggerTotalWidth=h[d.getWidth]()+h.el.getMargin(d.parallelMargins)}},_asLayoutRoot:{isRoot:true},clearOverflow:function(o){var p=this,l=p.menuItems,q,t=0,s=l.length,m=p.layout.owner,n=p._asLayoutRoot;m.suspendLayouts();p.captureChildElements();p.hideTrigger();m.resumeLayouts();for(;t<s;t++){q=l[t];q.suspendLayouts();q.show();q.resumeLayouts(n)}l.length=0},showTrigger:function(F){var v=this,z=v.layout,H=z.owner,w=z.names,s=w.x,D=w.width,u=F.state.boxPlan,G=u.targetSize[D],B=F.childItems,y=B.length,C=v.menuTrigger,t,A,E,x;C.suspendLayouts();C.show();if(!F.boxOptions.align.nostretch){t=F.context.getCmp(C);z.setChildHeight(F,t,C.getHeight())}C.resumeLayouts(v._asLayoutRoot);G-=v.triggerTotalWidth;H.suspendLayouts();v.menuItems.length=0;for(E=0;E<y;E++){t=B[E];x=t.props;if(x[s]+x[D]>G){A=t.target;v.menuItems.push(A);A.hide()}}H.resumeLayouts()},hideTrigger:function(){var c=this.menuTrigger;if(c){c.hide()}},beforeMenuShow:function(n){var o=this,l=o.menuItems,s=0,m=l.length,p,q,t=function(a,c){return a.isXType("buttongroup")&&!(c instanceof Ext.toolbar.Separator)};n.suspendLayouts();o.clearMenu();n.removeAll();for(;s<m;s++){p=l[s];if(!s&&(p instanceof Ext.toolbar.Separator)){continue}if(q&&(t(p,q)||t(q,p))){n.add("-")}o.addComponentToMenu(n,p);q=p}if(n.items.length<1){n.add(o.noItemsMenuText)}n.resumeLayouts()},createMenuConfig:function(l,h){var e=Ext.apply({},l.initialConfig),j=l.toggleGroup;Ext.copyTo(e,l,["iconCls","icon","itemId","disabled","handler","scope","menu","tabIndex"]);Ext.applyIf(e,{text:l.overflowText||l.text,hideOnClick:h,destroyMenu:false,listeners:{}});if(l.isFormField){e.value=l.getValue();e.listeners.change=function(a,c,d){l.setValue(c)}}else{if(j||l.enableToggle){Ext.apply(e,{hideOnClick:false,group:j,checked:l.pressed,handler:function(c,a){l.onClick(a)}})}}if(l.isButton&&!l.changeListenersAdded){l.on({textchange:this.onButtonAttrChange,iconchange:this.onButtonAttrChange,toggle:this.onButtonToggle});l.changeListenersAdded=true}delete e.margin;delete e.ownerCt;delete e.xtype;delete e.id;delete e.itemId;return e},onButtonAttrChange:function(d){var c=d.overflowClone;c.suspendLayouts();c.setText(d.text);c.setIcon(d.icon);c.setIconCls(d.iconCls);c.resumeLayouts(true)},onButtonToggle:function(d,c){if(d.overflowClone.checked!==c){d.overflowClone.setChecked(c)}},addComponentToMenu:function(l,o){var m=this,n,h,j;if(o instanceof Ext.toolbar.Fill){return}else{if(o instanceof Ext.toolbar.Separator){l.add("-")}else{if(o.isComponent){if(o.isXType("splitbutton")){o.overflowClone=l.add(m.createMenuConfig(o,true))}else{if(o.isXType("button")){o.overflowClone=l.add(m.createMenuConfig(o,!o.menu))}else{if(o.isXType("buttongroup")){h=o.items.items;j=h.length;for(n=0;n<j;n++){m.addComponentToMenu(l,h[n])}}else{o.overflowClone=l.add(Ext.create(Ext.getClassName(o),m.createMenuConfig(o)))}}}}}}},clearMenu:function(){var l=this.menu,h,n,j,m;if(l&&l.items){h=l.items.items;j=h.length;for(n=0;n<j;n++){m=h[n];if(m.setMenu){m.setMenu(null)}}}},destroy:function(){var c=this.menuTrigger;if(c&&!this.layout.owner.items.contains(c)){delete c.ownerCt}Ext.destroy(this.menu,c);this.callParent()}},1,0,0,0,0,0,[Ext.layout.container.boxOverflow,"Menu",Ext.layout.boxOverflow,"Menu"],0));(Ext.cmd.derive("Ext.layout.container.boxOverflow.Scroller",Ext.layout.container.boxOverflow.None,{alternateClassName:"Ext.layout.boxOverflow.Scroller",animateScroll:false,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",constructor:function(h,e){var d=this;d.layout=h;Ext.apply(d,e||{});d.mixins.observable.constructor.call(d);d.addEvents("scroll");d.scrollPosition=0;d.scrollSize=0},getPrefixConfig:function(){var j=this,l=j.layout,h=l.owner,e;j.initCSSClasses();e=Ext.layout.container.Box.prototype.innerCls+" "+j.beforeCtCls;if(h.plain){e+=" "+j.scrollerCls+"-plain"}return{role:"presentation",cls:e,cn:{role:"presentation",id:h.id+l.names.beforeScrollerSuffix,cls:j.scrollerCls+" "+j.beforeScrollerCls,style:"display:none"}}},getSuffixConfig:function(){var j=this,l=j.layout,h=l.owner,e=Ext.layout.container.Box.prototype.innerCls+" "+j.afterCtCls;if(h.plain){e+=" "+j.scrollerCls+"-plain"}return{role:"presentation",cls:e,cn:{role:"presentation",id:h.id+l.names.afterScrollerSuffix,cls:j.scrollerCls+" "+j.afterScrollerCls,style:"display:none"}}},getOverflowCls:function(){return Ext.baseCSSPrefix+this.layout.direction+"-box-overflow-body"},initCSSClasses:function(){var p=this,n=Ext.baseCSSPrefix,q=p.layout,m=q.names,l=m.beforeX,o=m.afterX,j=p.getOwnerType(q.owner);p.beforeCtCls=p.beforeCtCls||n+"box-scroller-"+l;p.afterCtCls=p.afterCtCls||n+"box-scroller-"+o;p.beforeScrollerCls=p.beforeScrollerCls||n+j+"-scroll-"+l;p.afterScrollerCls=p.afterScrollerCls||n+j+"-scroll-"+o},beginLayout:function(c){var d=this.layout;c.innerCtScrollPos=this.getScrollPosition();this.callParent(arguments)},completeLayout:function(n){var h=this,l=n.state.boxPlan,m=h.layout.names,j;if(l&&l.tooNarrow){j=n.childItems[n.childItems.length-1];h.scrollSize=j.props[m.x]+j.props[m.width];h.updateScrollButtons()}this.callParent(arguments)},finishedLayout:function(l){var e=this,h=e.layout,j=Math.min(e.getMaxScrollPosition(),l.innerCtScrollPos);h.innerCt[h.names.setScrollLeft](j)},handleOverflow:function(h){var d=this,e=d.layout.names.getWidth;d.showScrollers();return{reservedSpace:d.beforeCt[e]()+d.afterCt[e]()}},captureChildElements:function(){var q=this,t=q.layout.owner.el,p,n,l,m,s,o;if(!q.beforeCt){o="-hover";m="-pressed";l=q.scrollerCls+o;s=q.scrollerCls+m;p=q.beforeScroller=t.getById(q.layout.owner.id+"-before-scroller");n=q.afterScroller=t.getById(q.layout.owner.id+"-after-scroller");q.beforeCt=p.up("");q.afterCt=n.up("");q.createWheelListener();p.addClsOnOver(l);p.addClsOnOver(q.beforeScrollerCls+o);p.addClsOnClick(s);p.addClsOnClick(q.beforeScrollerCls+m);n.addClsOnOver(l);n.addClsOnOver(q.afterScrollerCls+o);n.addClsOnClick(s);n.addClsOnClick(q.afterScrollerCls+m);p.setVisibilityMode(Ext.Element.DISPLAY);n.setVisibilityMode(Ext.Element.DISPLAY);q.beforeRepeater=new Ext.util.ClickRepeater(p,{interval:q.scrollRepeatInterval,handler:q.scrollLeft,scope:q});q.afterRepeater=new Ext.util.ClickRepeater(n,{interval:q.scrollRepeatInterval,handler:q.scrollRight,scope:q})}},createWheelListener:function(){var c=this;c.layout.innerCt.on({mousewheel:function(a){c.scrollBy(c.getWheelDelta(a)*c.wheelIncrement*-1,false)},stopEvent:true})},getWheelDelta:function(c){return c.getWheelDelta()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){var c=this;c.captureChildElements();c.beforeScroller.show();c.afterScroller.show();c.layout.owner.addClsWithUI(c.layout.direction==="vertical"?"vertical-scroller":"scroller")},hideScrollers:function(){var c=this;if(c.beforeScroller!==undefined){c.beforeScroller.hide();c.afterScroller.hide();c.layout.owner.removeClsWithUI(c.layout.direction==="vertical"?"vertical-scroller":"scroller")}},destroy:function(){var c=this;Ext.destroy(c.beforeRepeater,c.afterRepeater,c.beforeScroller,c.afterScroller,c.beforeCt,c.afterCt);c.beforeRepeater=c.afterRepeater=c.beforeScroller=c.afterScroller=null;c.beforeCt=c.afterCt=null;c.callParent()},scrollBy:function(c,d){this.scrollTo(this.getScrollPosition()+c,d)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){var p=this,m,q,l,j,o,n="-disabled";if(p.beforeScroller==null||p.afterScroller==null){return}m=p.atExtremeBefore()?"addCls":"removeCls";q=p.atExtremeAfter()?"addCls":"removeCls";o=p.scrollerCls+n;l=[o,p.beforeScrollerCls+n];j=[o,p.afterScrollerCls+n];p.beforeScroller[m](l);p.afterScroller[q](j);p.scrolling=false},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,false)},scrollRight:function(){this.scrollBy(this.scrollIncrement,false)},getScrollPosition:function(){var h=this,d=h.layout,e;if(isNaN(h.scrollPosition)){e=d.innerCt[d.names.getScrollLeft]()}else{e=h.scrollPosition}return e},getMaxScrollPosition:function(){var d=this,e=d.layout,h=d.scrollSize-e.innerCt[e.names.getWidth]();return(h<0)?0:h},atExtremeBefore:function(){return !this.getScrollPosition()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},scrollTo:function(l,j){var n=this,o=n.layout,m=o.names,p=n.getScrollPosition(),q=Ext.Number.constrain(l,0,n.getMaxScrollPosition());if(q!=p&&!n.scrolling){n.scrollPosition=NaN;if(j===undefined){j=n.animateScroll}o.innerCt[m.scrollTo](m.beforeScrollX,q,j?n.getScrollAnim():false);if(j){n.scrolling=true}else{n.updateScrollButtons()}n.fireEvent("scroll",n,q,j?n.getScrollAnim():false)}},scrollToItem:function(l,t){var m=this,p=m.layout,s=p.owner,n=p.names,u,q,o;l=m.getItem(l);if(l!==undefined){if(l==s.items.first()){o=0}else{if(l===s.items.last()){o=m.getMaxScrollPosition()}else{u=m.getItemVisibility(l);if(!u.fullyVisible){q=l.getBox(false,true);o=q[n.x];if(u.hiddenEnd){o-=(m.layout.innerCt[n.getWidth]()-q[n.width])}}}}if(o!==undefined){m.scrollTo(o,t)}}},getItemVisibility:function(l){var n=this,t=n.getItem(l).getBox(true,true),s=n.layout,o=s.names,p=t[o.x],q=p+t[o.width],u=n.getScrollPosition(),m=u+s.innerCt[o.getWidth]();return{hiddenStart:p<u,hiddenEnd:q>m,fullyVisible:p>u&&q<m}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.layout.container.boxOverflow,"Scroller",Ext.layout.boxOverflow,"Scroller"],0));(Ext.cmd.derive("Ext.util.Offset",Ext.Base,{statics:{fromObject:function(c){return new this(c.x,c.y)}},constructor:function(d,c){this.x=(d!=null&&!isNaN(d))?d:0;this.y=(c!=null&&!isNaN(c))?c:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(c){this.x=c.x;this.y=c.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(c){return(this.x==c.x&&this.y==c.y)},round:function(c){if(!isNaN(c)){var d=Math.pow(10,c);this.x=Math.round(this.x*d)/d;this.y=Math.round(this.y*d)/d}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}},3,0,0,0,0,0,[Ext.util,"Offset"],0));(Ext.cmd.derive("Ext.util.Region",Ext.Base,{statics:{getRegion:function(c){return Ext.fly(c).getRegion()},from:function(c){return new this(c.top,c.right,c.bottom,c.left)}},constructor:function(m,j,h,n){var l=this;l.y=l.top=l[1]=m;l.right=j;l.bottom=h;l.x=l.left=l[0]=n},contains:function(c){var d=this;return(c.x>=d.x&&c.right<=d.right&&c.y>=d.y&&c.bottom<=d.bottom)},intersect:function(l){var m=this,o=Math.max(m.y,l.y),n=Math.min(m.right,l.right),j=Math.min(m.bottom,l.bottom),p=Math.max(m.x,l.x);if(j>o&&n>p){return new this.self(o,n,j,p)}else{return false}},union:function(l){var m=this,o=Math.min(m.y,l.y),n=Math.max(m.right,l.right),j=Math.max(m.bottom,l.bottom),p=Math.min(m.x,l.x);return new this.self(o,n,j,p)},constrainTo:function(d){var e=this,h=Ext.Number.constrain;e.top=e.y=h(e.top,d.y,d.bottom);e.bottom=h(e.bottom,d.y,d.bottom);e.left=e.x=h(e.left,d.x,d.right);e.right=h(e.right,d.x,d.right);return e},adjust:function(m,j,h,n){var l=this;l.top=l.y+=m;l.left=l.x+=n;l.right+=j;l.bottom+=h;return l},getOutOfBoundOffset:function(e,d){if(!Ext.isObject(e)){if(e=="x"){return this.getOutOfBoundOffsetX(d)}else{return this.getOutOfBoundOffsetY(d)}}else{d=e;var h=new Ext.util.Offset();h.x=this.getOutOfBoundOffsetX(d.x);h.y=this.getOutOfBoundOffsetY(d.y);return h}},getOutOfBoundOffsetX:function(c){if(c<=this.x){return this.x-c}else{if(c>=this.right){return this.right-c}}return 0},getOutOfBoundOffsetY:function(c){if(c<=this.y){return this.y-c}else{if(c>=this.bottom){return this.bottom-c}}return 0},isOutOfBound:function(d,c){if(!Ext.isObject(d)){if(d=="x"){return this.isOutOfBoundX(c)}else{return this.isOutOfBoundY(c)}}else{c=d;return(this.isOutOfBoundX(c.x)||this.isOutOfBoundY(c.y))}},isOutOfBoundX:function(c){return(c<this.x||c>this.right)},isOutOfBoundY:function(c){return(c<this.y||c>this.bottom)},restrict:function(e,j,h){if(Ext.isObject(e)){var l;h=j;j=e;if(j.copy){l=j.copy()}else{l={x:j.x,y:j.y}}l.x=this.restrictX(j.x,h);l.y=this.restrictY(j.y,h);return l}else{if(e=="x"){return this.restrictX(j,h)}else{return this.restrictY(j,h)}}},restrictX:function(c,d){if(!d){d=1}if(c<=this.x){c-=(c-this.x)*d}else{if(c>=this.right){c-=(c-this.right)*d}}return c},restrictY:function(c,d){if(!d){d=1}if(c<=this.y){c-=(c-this.y)*d}else{if(c>=this.bottom){c-=(c-this.bottom)*d}}return c},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(c){var d=this;d.top=d.y=d[1]=c.y;d.right=c.right;d.bottom=c.bottom;d.left=d.x=d[0]=c.x;return this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(e,h){if(arguments.length==1){h=e.y;e=e.x}var d=this;d.top=d.y+=h;d.right+=e;d.bottom+=h;d.left=d.x+=e;return d},round:function(){var c=this;c.top=c.y=Math.round(c.y);c.right=Math.round(c.right);c.bottom=Math.round(c.bottom);c.left=c.x=Math.round(c.x);return c},equals:function(c){return(this.top==c.top&&this.right==c.right&&this.bottom==c.bottom&&this.left==c.left)}},3,0,0,0,0,0,[Ext.util,"Region"],0));(Ext.cmd.derive("Ext.dd.DragDropManager",Ext.Base,{singleton:true,alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,dragCls:Ext.baseCSSPrefix+"dd-drag-current",_execOnAll:function(q,j){var o=this.ids,p,l,m,n;for(p in o){if(o.hasOwnProperty(p)){n=o[p];for(l in n){if(n.hasOwnProperty(l)){m=n[l];if(!this.isTypeOfDD(m)){continue}m[q].apply(m,j)}}}}},_onLoad:function(){this.init();var c=Ext.EventManager;c.on(document,"mouseup",this.handleMouseUp,this,true);c.on(document,"mousemove",this.handleMouseMove,this,true);c.on(window,"unload",this._onUnload,this,true);c.on(window,"resize",this._onResize,this,true)},_onResize:function(c){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(c,d){if(!this.initialized){this.init()}if(!this.ids[d]){this.ids[d]={}}this.ids[d][c.id]=c},removeDDFromGroup:function(h,e){if(!this.ids[e]){this.ids[e]={}}var d=this.ids[e];if(d&&d[h.id]){delete d[h.id]}},_remove:function(m,j){var n=this,p=n.ids,l=m.groups,o;if(n.clearingAll){return}if(n.dragCurrent===m){n.dragCurrent=null}for(o in l){if(l.hasOwnProperty(o)){if(j){delete p[o]}else{if(p[o]){delete p[o][m.id]}}}}delete n.handleIds[m.id]},regHandle:function(c,d){if(!this.handleIds[c]){this.handleIds[c]={}}this.handleIds[c][d]=d},isDragDrop:function(c){return(this.getDDById(c))?true:false},getRelated:function(l,h){var m=[],n,o,j;for(n in l.groups){for(o in this.ids[n]){j=this.ids[n][o];if(!this.isTypeOfDD(j)){continue}if(!h||j.isTarget){m[m.length]=j}}}return m},isLegalTarget:function(l,m){var h=this.getRelated(l,true),n,j;for(n=0,j=h.length;n<j;++n){if(h[n].id==m.id){return true}}return false},isTypeOfDD:function(c){return(c&&c.__ygDragDrop)},isHandle:function(c,d){return(this.handleIds[c]&&this.handleIds[c][d])},getDDById:function(h){var d,e;for(d in this.ids){e=this.ids[d][h];if(e instanceof Ext.dd.DDTarget){return e}}return null},handleMouseDown:function(j,l){var e=this,h;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddDisable()}if(e.dragCurrent){e.handleMouseUp(j)}e.mousedownEvent=j.clone();e.currentTarget=j.getTarget();e.dragCurrent=l;h=l.getEl();if(Ext.isIE9m&&h.setCapture){h.setCapture()}e.startX=j.getPageX();e.startY=j.getPageY();e.deltaX=e.startX-h.offsetLeft;e.deltaY=e.startY-h.offsetTop;e.dragThreshMet=false;e.clickTimeout=setTimeout(function(){e.startDrag(e.startX,e.startY)},e.clickTimeThresh)},startDrag:function(h,l){var n=this,m=n.dragCurrent,j;clearTimeout(n.clickTimeout);if(m){m.b4StartDrag(h,l);m.startDrag(h,l);j=m.getDragEl();if(j){Ext.fly(j).addCls(n.dragCls)}}n.dragThreshMet=true},handleMouseUp:function(c){var d=this;if(Ext.quickTipsActive){Ext.tip.QuickTipManager.ddEnable()}if(!d.dragCurrent){return}if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}clearTimeout(d.clickTimeout);if(d.dragThreshMet){d.fireEvents(c,true)}d.stopDrag(c);d.stopEvent(c)},stopEvent:function(c){if(this.stopPropagation){c.stopPropagation()}if(this.preventDefault){c.preventDefault()}},stopDrag:function(j){var e=this,l=e.dragCurrent,h;if(l){if(e.dragThreshMet){h=l.getDragEl();if(h){Ext.fly(h).removeCls(e.dragCls)}l.b4EndDrag(j);l.endDrag(j)}e.dragCurrent.onMouseUp(j)}e.dragCurrent=null;e.dragOvers={}},handleMouseMove:function(j){var m=this,l=m.dragCurrent,e,h;if(!l){return true}if(!m.dragThreshMet){e=Math.abs(m.startX-j.getPageX());h=Math.abs(m.startY-j.getPageY());if(e>m.clickPixelThresh||h>m.clickPixelThresh){m.startDrag(m.startX,m.startY)}}if(m.dragThreshMet){l.b4Drag(j);l.onDrag(j);if(!l.moveOnly){m.fireEvents(j,false)}}m.stopEvent(j);return true},fireEvents:function(y,G){var e=this,M=e.dragCurrent,O,E,A=y.getPoint(),N,H,F=[],K=[],I=[],Q=[],x=[],z=[],J,P,C,B,D;if(!M||M.isLocked()){return}if(!e.notifyOccluded&&(!Ext.supports.PointerEvents||Ext.isIE10m||Ext.isOpera)&&!(M.deltaX<0||M.deltaY<0)){O=M.getDragEl();E=O.style.top;O.style.visibility="hidden";J=y.getXY();y.target=document.elementFromPoint(J[0],J[1]);O.style.visibility="visible";O.style.top=E}for(C in e.dragOvers){N=e.dragOvers[C];delete e.dragOvers[C];if(!e.isTypeOfDD(N)||N.isDestroyed){continue}if(e.notifyOccluded){if(!this.isOverTarget(A,N,e.mode)){I.push(N)}}else{if(!y.within(N.getEl())){I.push(N)}}K[C]=true}for(D in M.groups){if("string"!=typeof D){continue}for(C in e.ids[D]){N=e.ids[D][C];if(e.isTypeOfDD(N)&&(H=N.getEl())&&(N.isTarget)&&(!N.isLocked())&&(Ext.fly(H).isVisible(true))&&((N!=M)||(M.ignoreSelf===false))){if(e.notifyOccluded){if((N.zIndex=e.getZIndex(H))!==-1){P=true}F.push(N)}else{if(y.within(N.getEl())){F.push(N);break}}}}}if(P){Ext.Array.sort(F,e.byZIndex)}for(C=0,B=F.length;C<B;C++){N=F[C];if(e.isOverTarget(A,N,e.mode)){if(G){x.push(N)}else{if(!K[N.id]){z.push(N)}else{Q.push(N)}e.dragOvers[N.id]=N}if(!e.notifyOccluded){break}}}if(e.mode){if(I.length){M.b4DragOut(y,I);M.onDragOut(y,I)}if(z.length){M.onDragEnter(y,z)}if(Q.length){M.b4DragOver(y,Q);M.onDragOver(y,Q)}if(x.length){M.b4DragDrop(y,x);M.onDragDrop(y,x)}}else{for(C=0,B=I.length;C<B;++C){M.b4DragOut(y,I[C].id);M.onDragOut(y,I[C].id)}for(C=0,B=z.length;C<B;++C){M.onDragEnter(y,z[C].id)}for(C=0,B=Q.length;C<B;++C){M.b4DragOver(y,Q[C].id);M.onDragOver(y,Q[C].id)}for(C=0,B=x.length;C<B;++C){M.b4DragDrop(y,x[C].id);M.onDragDrop(y,x[C].id)}}if(G&&!x.length){M.onInvalidDrop(y)}},getZIndex:function(e){var h=document.body,l,j=-1;e=Ext.getDom(e);while(e!==h){if(!isNaN(l=Number(Ext.fly(e).getStyle("zIndex")))){j=l}e=e.parentNode}return j},byZIndex:function(c,d){return c.zIndex<d.zIndex},getBestMatch:function(n){var l=null,h=n.length,m,j;if(h==1){l=n[0]}else{for(m=0;m<h;++m){j=n[m];if(j.cursorIsOver){l=j;break}else{if(!l||l.overlap.getArea()<j.overlap.getArea()){l=j}}}}return l},refreshCache:function(h){var j,n,m,l;for(j in h){if("string"!=typeof j){continue}for(n in this.ids[j]){m=this.ids[j][n];if(this.isTypeOfDD(m)){l=this.getLocation(m);if(l){this.locationCache[m.id]=l}else{delete this.locationCache[m.id]}}}}},verifyEl:function(d){if(d){var e;if(Ext.isIE){try{e=d.offsetParent}catch(h){}}else{e=d.offsetParent}if(e){return true}}return false},getLocation:function(w){if(!this.isTypeOfDD(w)){return null}if(w.getRegion){return w.getRegion()}var y=w.getEl(),t,z,A,l,s,e,B,u,x;try{t=Ext.Element.getXY(y)}catch(v){}if(!t){return null}z=t[0];A=z+y.offsetWidth;l=t[1];s=l+y.offsetHeight;e=l-w.padding[0];B=A+w.padding[1];u=s+w.padding[2];x=z-w.padding[3];return new Ext.util.Region(e,B,u,x)},isOverTarget:function(l,u,s){var p=this.locationCache[u.id],m,o,t,q,n;if(!p||!this.useCache){p=this.getLocation(u);this.locationCache[u.id]=p}if(!p){return false}u.cursorIsOver=p.contains(l);m=this.dragCurrent;if(!m||!m.getTargetCoord||(!s&&!m.constrainX&&!m.constrainY)){return u.cursorIsOver}u.overlap=null;o=m.getTargetCoord(l.x,l.y);t=m.getDragEl();q=new Ext.util.Region(o.y,o.x+t.offsetWidth,o.y+t.offsetHeight,o.x);n=q.intersect(p);if(n){u.overlap=n;return(s)?true:u.cursorIsOver}else{return false}},_onUnload:function(c,d){Ext.dd.DragDropManager.unregAll()},unregAll:function(){var h=this,e=h.elementCache,d;if(h.dragCurrent){h.stopDrag();h.dragCurrent=null}h.clearingAll=true;h._execOnAll("unreg",[]);delete h.clearingAll;for(d in e){delete e[d]}h.elementCache={};h.ids={};h.handleIds={}},elementCache:{},getElWrapper:function(c){var d=this.elementCache[c];if(!d||!d.el){d=this.elementCache[c]=new this.ElementWrapper(Ext.getDom(c))}return d},getElement:function(c){return Ext.getDom(c)},getCss:function(c){var d=Ext.getDom(c);return(d)?d.style:null},ElementWrapper:function(c){this.el=c||null;this.id=this.el&&c.id;this.css=this.el&&c.style},getPosX:function(c){return Ext.Element.getX(c)},getPosY:function(c){return Ext.Element.getY(c)},swapNode:function(l,h){if(l.swapNode){l.swapNode(h)}else{var j=h.parentNode,e=h.nextSibling;if(e==l){j.insertBefore(l,h)}else{if(h==l.nextSibling){j.insertBefore(h,l)}else{l.parentNode.replaceChild(h,l);j.insertBefore(l,e)}}}},getScroll:function(){var m=window.document,l=m.documentElement,j=m.body,n=0,h=0;if(Ext.isGecko4){n=window.scrollYOffset;h=window.scrollXOffset}else{if(l&&(l.scrollTop||l.scrollLeft)){n=l.scrollTop;h=l.scrollLeft}else{if(j){n=j.scrollTop;h=j.scrollLeft}}}return{top:n,left:h}},getStyle:function(c,d){return Ext.fly(c).getStyle(d)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(e,h){var d=Ext.Element.getXY(h);Ext.Element.setXY(e,d)},numericSort:function(a,e){return(a-e)},_timeoutCount:0,_addListeners:function(){if(document){this._onLoad()}else{if(this._timeoutCount<=2000){setTimeout(this._addListeners,10);if(document&&document.body){this._timeoutCount+=1}}}},handleWasClicked:function(e,h){if(this.isHandle(h,e.id)){return true}else{var d=e.parentNode;while(d){if(this.isHandle(h,d.id)){return true}else{d=d.parentNode}}}return false}},0,0,0,0,0,0,[Ext.dd,"DragDropManager",Ext.dd,"DragDropMgr",Ext.dd,"DDM"],function(){this._addListeners()}));(Ext.cmd.derive("Ext.layout.container.Box",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BoxLayout",defaultMargins:{top:0,right:0,bottom:0,left:0},padding:0,pack:"start",flex:undefined,stretchMaxPartner:undefined,alignRoundingMethod:"round",type:"box",scrollOffset:0,itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",targetElCls:Ext.baseCSSPrefix+"box-target",innerCls:Ext.baseCSSPrefix+"box-inner",availableSpaceOffset:0,reserveOffset:true,manageMargins:true,createsInnerCt:true,childEls:["innerCt","targetEl"],renderTpl:["{%var oc,l=values.$comp.layout,oh=l.overflowHandler;","if (oh.getPrefixConfig!==Ext.emptyFn) {","if(oc=oh.getPrefixConfig())dh.generateMarkup(oc, out)","}%}",'<div id="{ownerId}-innerCt" class="{[l.innerCls]} {[oh.getOverflowCls()]}" role="presentation">','<div id="{ownerId}-targetEl" class="{targetElCls}" role="presentation">',"{%this.renderBody(out, values)%}","</div>","</div>","{%if (oh.getSuffixConfig!==Ext.emptyFn) {","if(oc=oh.getSuffixConfig())dh.generateMarkup(oc, out)","}%}",{disableFormats:true,definitions:"var dh=Ext.DomHelper;"}],constructor:function(e){var h=this,d;h.callParent(arguments);h.flexSortFn=Ext.Function.bind(h.flexSort,h);h.initOverflowHandler();d=typeof h.padding;if(d=="string"||d=="number"){h.padding=Ext.util.Format.parseBox(h.padding);h.padding.height=h.padding.top+h.padding.bottom;h.padding.width=h.padding.left+h.padding.right}},_percentageRe:/^\s*(\d+(?:\.\d*)?)\s*[%]\s*$/,getItemSizePolicy:function(t,s){var x=this,z=x.sizePolicy,A=x.align,B=t.flex,v=A,y=x.names,F=t[y.width],u=t[y.height],D=x._percentageRe,E=D.test(F),C=(A=="stretch"),G=(A=="stretchmax"),w=x.constrainAlign;if(!s&&(C||B||E||(w&&!G))){s=x.owner.getSizeModel()}if(C){if(!D.test(u)&&s[y.height].shrinkWrap){v="stretchmax"}}else{if(!G){if(D.test(u)){v="stretch"}else{if(w&&!s[y.height].shrinkWrap){v="stretchmax"}else{v=""}}}}if(B||E){if(!s[y.width].shrinkWrap){z=z.flex}}return z[v]},flexSort:function(v,w){var y=this.names.maxWidth,E=this.names.minWidth,x=Infinity,z=v.target,I=w.target,B=z.flex,C=I.flex,H=0,G,u,A,F,a,D;A=z[y]||x;F=I[y]||x;G=z[E]||0;u=I[E]||0;a=isFinite(G)||isFinite(u);D=isFinite(A)||isFinite(F);if(a||D){if(D){H=A-F}if(H===0&&a){H=u-G}if(H===0){if(D){H=C-B}else{H=B-C}}}return H},isItemBoxParent:function(c){return true},isItemShrinkWrap:function(c){return true},roundFlex:function(c){return Math.ceil(c)},beginCollapse:function(c){var d=this;if(d.direction==="vertical"&&c.collapsedVertical()){c.collapseMemento.capture(["flex"]);delete c.flex}else{if(d.direction==="horizontal"&&c.collapsedHorizontal()){c.collapseMemento.capture(["flex"]);delete c.flex}}},beginExpand:function(c){c.collapseMemento.restore(["flex"])},beginLayout:function(n){var o=this,j=o.owner,l=j.stretchMaxPartner,h=o.innerCt.dom.style,m=o.names;n.boxNames=m;o.overflowHandler.beginLayout(n);if(typeof l==="string"){l=Ext.getCmp(l)||j.query(l)[0]}n.stretchMaxPartner=l&&n.context.getCmp(l);o.callParent(arguments);n.innerCtContext=n.getEl("innerCt",o);o.scrollParallel=j.scrollFlags[m.x];o.scrollPerpendicular=j.scrollFlags[m.y];if(o.scrollParallel){o.scrollPos=j.getTargetEl().dom[m.scrollLeft]}h.width="";h.height=""},beginLayoutCycle:function(o,l){var p=this,m=p.align,n=o.boxNames,j=p.pack,q=n.heightModel;p.overflowHandler.beginLayoutCycle(o,l);p.callParent(arguments);o.parallelSizeModel=o[n.widthModel];o.perpendicularSizeModel=o[q];o.boxOptions={align:m={stretch:m=="stretch",stretchmax:m=="stretchmax",center:m==n.center,bottom:m==n.afterY},pack:j={center:j=="center",end:j=="end"}};if(m.stretch&&o.perpendicularSizeModel.shrinkWrap){m.stretchmax=true;m.stretch=false}m.nostretch=!(m.stretch||m.stretchmax);if(o.parallelSizeModel.shrinkWrap){j.center=j.end=false}p.cacheFlexes(o);p.targetEl.setWidth(20000)},cacheFlexes:function(F){var v=this,E=F.boxNames,O=E.widthModel,K=E.heightModel,M=F.boxOptions.align.nostretch,B=0,N=F.childItems,z=N.length,x=[],D=0,G=E.minWidth,I=v._percentageRe,y=0,w=0,J,C,A,H;while(z--){C=N[z];J=C.target;if(C[O].calculated){C.flex=A=J.flex;if(A){B+=A;x.push(C);D+=J[G]||0}else{H=I.exec(J[E.width]);C.percentageParallel=parseFloat(H[1])/100;++y}}if(M&&C[K].calculated){H=I.exec(J[E.height]);C.percentagePerpendicular=parseFloat(H[1])/100;++w}}F.flexedItems=x;F.flexedMinSize=D;F.totalFlex=B;F.percentageWidths=y;F.percentageHeights=w;Ext.Array.sort(x,v.flexSortFn)},calculate:function(o){var q=this,j=q.getContainerSize(o),m=o.boxNames,p=o.state,n=p.boxPlan||(p.boxPlan={}),l=o.targetContext;n.targetSize=j;if(!p.parallelDone){p.parallelDone=q.calculateParallel(o,m,n)}if(!p.perpendicularDone){p.perpendicularDone=q.calculatePerpendicular(o,m,n)}if(p.parallelDone&&p.perpendicularDone){if(q.owner.dock&&(Ext.isIE7m||Ext.isIEQuirks)&&!q.owner.width&&!q.horizontal){n.isIEVerticalDock=true;n.calculatedWidth=n.maxSize+o.getPaddingInfo().width+o.getFrameInfo().width;if(l!==o){n.calculatedWidth+=l.getPaddingInfo().width}}q.publishInnerCtSize(o,q.reserveOffset?q.availableSpaceOffset:0);if(q.done&&o.boxOptions.align.stretchmax&&!p.stretchMaxDone){q.calculateStretchMax(o,m,n);p.stretchMaxDone=true}q.overflowHandler.calculate(o)}else{q.done=false}},calculateParallel:function(ad,aa,al){var N=this,Z=aa.width,am=ad.childItems,R=aa.beforeX,ai=aa.afterX,V=aa.setWidth,X=am.length,I=ad.flexedItems,T=I.length,K=ad.boxOptions.pack,ab=N.padding,aj=al.targetSize,af=aj[Z],U=0,ah=ab[R],P=ah+ab[ai]+N.scrollOffset+(N.reserveOffset?N.availableSpaceOffset:0),J=Ext.getScrollbarSize()[aa.width],M,ac,ag,H,Y,O,Q,W,S,ak,ae;if(!ad.parallelSizeModel.shrinkWrap&&!aj[aa.gotWidth]){return false}if(J&&N.scrollPerpendicular&&ad.parallelSizeModel.shrinkWrap&&!ad.boxOptions.align.stretch&&!ad.perpendicularSizeModel.shrinkWrap){if(!ad.state.perpendicularDone){return false}S=true}for(M=0;M<X;++M){Y=am[M];ac=Y.marginInfo||Y.getMarginInfo();U+=ac[Z];if(!Y[aa.widthModel].calculated){ak=Y.getProp(Z);P+=ak;if(isNaN(P)){return false}}}P+=U;if(ad.percentageWidths){ae=af-U;if(isNaN(ae)){return false}for(M=0;M<X;++M){Y=am[M];if(Y.percentageParallel){ak=Math.ceil(ae*Y.percentageParallel);ak=Y.setWidth(ak);P+=ak}}}if(ad.parallelSizeModel.shrinkWrap){al.availableSpace=0;al.tooNarrow=false}else{al.availableSpace=af-P;al.tooNarrow=al.availableSpace<ad.flexedMinSize;if(al.tooNarrow&&Ext.getScrollbarSize()[aa.height]&&N.scrollParallel&&ad.state.perpendicularDone){ad.state.perpendicularDone=false;for(M=0;M<X;++M){am[M].invalidate()}}}W=P;ag=al.availableSpace;H=ad.totalFlex;for(M=0;M<T;M++){Y=I[M];O=Y.flex;Q=N.roundFlex((O/H)*ag);Q=Y[V](Q);W+=Q;ag=Math.max(0,ag-Q);H-=O}if(K.center){ah+=ag/2;if(ah<0){ah=0}}else{if(K.end){ah+=ag}}for(M=0;M<X;++M){Y=am[M];ac=Y.marginInfo;ah+=ac[R];Y.setProp(aa.x,ah);ah+=ac[ai]+Y.props[Z]}W+=ad.targetContext.getPaddingInfo()[Z];ad.state.contentWidth=W;if(S&&(ad.peek(aa.contentHeight)>al.targetSize[aa.height])){W+=J;ad[aa.hasOverflowY]=true;ad.target.componentLayout[aa.setWidthInDom]=true;ad[aa.invalidateScrollY]=Ext.isStrict&&Ext.isIE8}ad[aa.setContentWidth](W);return true},calculatePerpendicular:function(ah,R,ac){var ai=this,ax=ah.perpendicularSizeModel.shrinkWrap,az=ac.targetSize,at=ah.childItems,ad=at.length,ap=Math.max,aq=R.height,ao=R.setHeight,au=R.beforeY,aj=R.y,U=ai.padding,ar=U[au],an=az[aq]-ar-U[R.afterY],X=ah.boxOptions.align,am=X.stretch,al=X.stretchmax,O=X.center,P=X.bottom,V=ai.constrainAlign,W=0,aa=0,Y=ai.onBeforeConstrainInvalidateChild,ab=ai.onAfterConstrainInvalidateChild,aA=Ext.getScrollbarSize().height,ae,T,Z,ag,af,ay,ak,aw,Q,S,av;if(am||((O||P)&&!ax)){if(isNaN(an)){return false}}if(!am&&!ah.parallelSizeModel.shrinkWrap&&!ah.state.parallelDone&&ai.scrollParallel){return false}if(ai.scrollParallel&&ac.tooNarrow){if(ax){S=true}else{an-=aA;ac.targetSize[aq]-=aA}}if(am){ay=an}else{for(T=0;T<ad;T++){ak=at[T];ag=(ak.marginInfo||ak.getMarginInfo())[aq];if(!(av=ak.percentagePerpendicular)){Z=ak.getProp(aq)}else{++aa;if(ax){continue}else{Z=av*an-ag;Z=ak[R.setHeight](Z)}}if(!ax&&V&&ak[R.heightModel].shrinkWrap&&Z>an){ak.invalidate({before:Y,after:ab,layout:ai,childHeight:an,names:R});ah.state.parallelDone=false}if(isNaN(W=ap(W,Z+ag,ak.target[R.minHeight]||0))){return false}}if(S){W+=aA;ah[R.hasOverflowX]=true;ah.target.componentLayout[R.setHeightInDom]=true;ah[R.invalidateScrollX]=Ext.isStrict&&Ext.isIE8}aw=ah.stretchMaxPartner;if(aw){ah.setProp("maxChildHeight",W);Q=aw.childItems;if(Q&&Q.length){W=ap(W,aw.getProp("maxChildHeight"));if(isNaN(W)){return false}}}ah[R.setContentHeight](W+ai.padding[aq]+ah.targetContext.getPaddingInfo()[aq]);if(S){W-=aA}ac.maxSize=W;if(al){ay=W}else{if(O||P||aa){if(V){ay=ax?W:an}else{ay=ax?W:ap(an,W)}ay-=ah.innerCtContext.getBorderInfo()[aq]}}}for(T=0;T<ad;T++){ak=at[T];ag=ak.marginInfo||ak.getMarginInfo();ae=ar+ag[au];if(am){ak[ao](ay-ag[aq])}else{av=ak.percentagePerpendicular;if(ax&&av){ag=ak.marginInfo||ak.getMarginInfo();Z=av*ay-ag[aq];Z=ak.setHeight(Z)}if(O){af=ay-ak.props[aq];if(af>0){ae=ar+Math[ai.alignRoundingMethod](af/2)}}else{if(P){ae=ap(0,ay-ae-ak.props[aq])}}}ak.setProp(aj,ae)}return true},setChildHeight:function(n,h,j){var l=n.boxNames,m=h.getMarginInfo();h[l.setHeight](j-m[l.height])},onBeforeConstrainInvalidateChild:function(d,e){var h=e.names.heightModel;if(!d[h].constrainedMin){d[h]=Ext.layout.SizeModel.calculated}},onAfterConstrainInvalidateChild:function(d,e){var h=e.names;d.setProp(h.beforeY,0);if(d[h.heightModel].calculated){d[h.setHeight](e.childHeight)}},calculateStretchMax:function(E,y,w){var x=this,A=y.height,v=y.width,B=E.childItems,G=B.length,t=w.maxSize,u=x.onBeforeStretchMaxInvalidateChild,C=x.onAfterStretchMaxInvalidateChild,s,z,D,F;for(D=0;D<G;++D){s=B[D];z=s.props;F=t-s.getMarginInfo()[A];if(F!=z[A]||s[y.heightModel].constrained){s.invalidate({before:u,after:C,layout:x,childWidth:z[v],childHeight:F,childX:z.x,childY:z.y,names:y})}}},onBeforeStretchMaxInvalidateChild:function(d,e){var h=e.names.heightModel;if(!d[h].constrainedMax){d[h]=Ext.layout.SizeModel.calculated}},onAfterStretchMaxInvalidateChild:function(m,n){var l=n.names,j=n.childHeight,h=n.childWidth;m.setProp("x",n.childX);m.setProp("y",n.childY);if(m[l.heightModel].calculated){m[l.setHeight](j)}if(m[l.widthModel].calculated){m[l.setWidth](h)}},completeLayout:function(v){var n=this,o=v.boxNames,p=v.invalidateScrollX,q=v.invalidateScrollY,t,w,s,u,m;n.overflowHandler.completeLayout(v);if(p||q){w=n.getTarget();t=w.dom;m=t.style;if(p){s=w.getStyle("overflowX");if(s=="auto"){s=m.overflowX;m.overflowX="scroll"}else{p=false}}if(q){u=w.getStyle("overflowY");if(u=="auto"){u=m.overflowY;m.overflowY="scroll"}else{q=false}}if(p||q){t.scrollWidth;if(p){m.overflowX=s}if(q){m.overflowY=u}}}if(n.scrollParallel){n.owner.getTargetEl().dom[o.scrollLeft]=n.scrollPos}},finishedLayout:function(c){this.overflowHandler.finishedLayout(c);this.callParent(arguments);this.targetEl.setWidth(c.innerCtContext.props.width)},publishInnerCtSize:function(G,D){var z=this,A=G.boxNames,B=A.height,x=A.width,C=G.boxOptions.align,t=z.owner.dock,w=z.padding,y=G.state.boxPlan,E=y.targetSize,u=E[B],s=G.innerCtContext,F=(G.parallelSizeModel.shrinkWrap||(y.tooNarrow&&z.scrollParallel)?G.state.contentWidth-G.targetContext.getPaddingInfo()[x]:E[x])-(D||0),v;if(C.stretch){v=u}else{v=y.maxSize+w[A.beforeY]+w[A.afterY]+s.getBorderInfo()[B];if(!G.perpendicularSizeModel.shrinkWrap&&(C.center||C.bottom)){v=Math.max(u,v)}}s[A.setWidth](F);s[A.setHeight](v);if(isNaN(F+v)){z.done=false}if(y.calculatedWidth&&(t=="left"||t=="right")){G.setWidth(y.calculatedWidth,true,true)}},onRemove:function(j,n){var m=this,l=m.names,h;m.callParent(arguments);if(m.overflowHandler){m.overflowHandler.onRemove(j)}if(j.layoutMarginCap==m.id){delete j.layoutMarginCap}if(!m.owner.destroying&&!n&&j.rendered){h=j.getEl();h.setStyle(l.beforeY,"");h.setStyle(l.beforeX,"");h.setStyle("margin","")}},initOverflowHandler:function(){var j=this,l=j.overflowHandler,e,h;if(typeof l=="string"){l={type:l}}e="None";if(l&&l.type!==undefined){e=l.type}h=Ext.layout.container.boxOverflow[e];if(h[j.type]){h=h[j.type]}j.overflowHandler=Ext.create("Ext.layout.container.boxOverflow."+e,j,l)},getRenderTarget:function(){return this.targetEl},getElementTarget:function(){return this.innerCt},destroy:function(){var c=this;Ext.destroy(c.innerCt,c.overflowHandler);c.flexSortFn=c.innerCt=c.overflowHandler=null;c.callParent(arguments)},getRenderData:function(){var c=this.callParent();c.targetElCls=this.targetElCls;return c}},1,0,0,0,["layout.box"],0,[Ext.layout.container,"Box",Ext.layout,"BoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.HBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.HBoxLayout",align:"top",constrainAlign:false,type:"hbox",direction:"horizontal",horizontal:true,names:{beforeX:"left",beforeScrollX:"left",beforeScrollerSuffix:"-before-scroller",afterScrollerSuffix:"-after-scroller",leftCap:"Left",afterX:"right",width:"width",contentWidth:"contentWidth",minWidth:"minWidth",maxWidth:"maxWidth",widthCap:"Width",widthModel:"widthModel",widthIndex:0,x:"x",scrollLeft:"scrollLeft",overflowX:"overflowX",hasOverflowX:"hasOverflowX",invalidateScrollX:"invalidateScrollX",parallelMargins:"lr",center:"middle",beforeY:"top",afterY:"bottom",height:"height",contentHeight:"contentHeight",minHeight:"minHeight",maxHeight:"maxHeight",heightCap:"Height",heightModel:"heightModel",heightIndex:1,y:"y",overflowY:"overflowY",hasOverflowY:"hasOverflowY",invalidateScrollY:"invalidateScrollY",perpendicularMargins:"tb",getWidth:"getWidth",getHeight:"getHeight",setWidth:"setWidth",setHeight:"setHeight",gotWidth:"gotWidth",gotHeight:"gotHeight",setContentWidth:"setContentWidth",setContentHeight:"setContentHeight",setWidthInDom:"setWidthInDom",setHeightInDom:"setHeightInDom",getScrollLeft:"getScrollLeft",setScrollLeft:"setScrollLeft",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:1}}},0,0,0,0,["layout.hbox"],0,[Ext.layout.container,"HBox",Ext.layout,"HBoxLayout"],0));(Ext.cmd.derive("Ext.layout.container.VBox",Ext.layout.container.Box,{alternateClassName:"Ext.layout.VBoxLayout",align:"left",constrainAlign:false,type:"vbox",direction:"vertical",horizontal:false,names:{beforeX:"top",beforeScrollX:"top",beforeScrollerSuffix:"-before-scroller",afterScrollerSuffix:"-after-scroller",leftCap:"Top",afterX:"bottom",width:"height",contentWidth:"contentHeight",minWidth:"minHeight",maxWidth:"maxHeight",widthCap:"Height",widthModel:"heightModel",widthIndex:1,x:"y",scrollLeft:"scrollTop",overflowX:"overflowY",hasOverflowX:"hasOverflowY",invalidateScrollX:"invalidateScrollY",parallelMargins:"tb",center:"center",beforeY:"left",afterY:"right",height:"width",contentHeight:"contentWidth",minHeight:"minWidth",maxHeight:"maxWidth",heightCap:"Width",heightModel:"widthModel",heightIndex:0,y:"x",overflowY:"overflowX",hasOverflowY:"hasOverflowX",invalidateScrollY:"invalidateScrollX",perpendicularMargins:"lr",getWidth:"getHeight",getHeight:"getWidth",setWidth:"setHeight",setHeight:"setWidth",gotWidth:"gotHeight",gotHeight:"gotWidth",setContentWidth:"setContentHeight",setContentHeight:"setContentWidth",setWidthInDom:"setHeightInDom",setHeightInDom:"setWidthInDom",getScrollLeft:"getScrollTop",setScrollLeft:"setScrollTop",scrollTo:"scrollTo"},sizePolicy:{flex:{"":{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},stretch:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1},stretchmax:{readsWidth:1,readsHeight:0,setsWidth:1,setsHeight:1}},"":{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},stretch:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},stretchmax:{readsWidth:1,readsHeight:1,setsWidth:1,setsHeight:0}}},0,0,0,0,["layout.vbox"],0,[Ext.layout.container,"VBox",Ext.layout,"VBoxLayout"],0));Ext.define("Ext.toolbar.Toolbar",{extend:Ext.container.Container,alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",isToolbar:true,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",defaultType:"button",vertical:false,enableOverflow:false,menuTriggerCls:Ext.baseCSSPrefix+"toolbar-more-icon",trackMenus:true,itemCls:Ext.baseCSSPrefix+"toolbar-item",statics:{shortcuts:{"-":"tbseparator"," ":"tbspacer"},shortcutsHV:{0:{"->":{xtype:"tbfill",height:0}},1:{"->":{xtype:"tbfill",width:0}}}},initComponent:function(){var c=this;if(!c.layout&&c.enableOverflow){c.layout={overflowHandler:"Menu"}}if(c.dock==="right"||c.dock==="left"){c.vertical=true}c.layout=Ext.applyIf(Ext.isString(c.layout)?{type:c.layout}:c.layout||{},{type:c.vertical?"vbox":"hbox",align:c.vertical?"stretchmax":"middle"});if(c.vertical){c.addClsWithUI("vertical")}if(c.ui==="footer"){c.ignoreBorderManagement=true}c.callParent();c.addEvents("overflowchange")},getRefItems:function(j){var l=this,h=l.callParent(arguments),m=l.layout,n;if(j&&l.enableOverflow){n=m.overflowHandler;if(n&&n.menu){h=h.concat(n.menu.getRefItems(j))}}return h},lookupComponent:function(j){var l=arguments;if(typeof j=="string"){var c=Ext.toolbar.Toolbar,h=c.shortcutsHV[this.vertical?1:0][j]||c.shortcuts[j];if(typeof h=="string"){j={xtype:h}}else{if(h){j=Ext.apply({},h)}else{j={xtype:"tbtext",text:j}}}this.applyDefaults(j);l=[j]}return this.callParent(l)},applyDefaults:function(c){if(!Ext.isString(c)){c=this.callParent(arguments)}return c},trackMenu:function(l,h){if(this.trackMenus&&l.menu){var j=h?"mun":"mon",e=this;e[j](l,"mouseover",e.onButtonOver,e);e[j](l,"menushow",e.onButtonMenuShow,e);e[j](l,"menuhide",e.onButtonMenuHide,e)}},onBeforeAdd:function(d){var h=this,e=d.isButton;if(e&&h.defaultButtonUI&&d.ui==="default"&&!d.hasOwnProperty("ui")){d.ui=h.defaultButtonUI}else{if((e||d.isFormField)&&h.ui!=="footer"){d.ui=d.ui+"-toolbar";d.addCls(d.baseCls+"-toolbar")}}if(d instanceof Ext.toolbar.Separator){d.setUI((h.vertical)?"vertical":"horizontal")}h.callParent(arguments)},onAdd:function(c){this.callParent(arguments);this.trackMenu(c)},onRemove:function(c){this.callParent(arguments);this.trackMenu(c,true)},getChildItemsToDisable:function(){return this.items.getRange()},onButtonOver:function(c){if(this.activeMenuBtn&&this.activeMenuBtn!=c){this.activeMenuBtn.hideMenu();c.showMenu();this.activeMenuBtn=c}},onButtonMenuShow:function(c){this.activeMenuBtn=c},onButtonMenuHide:function(c){delete this.activeMenuBtn}});(Ext.cmd.derive("Ext.panel.AbstractPanel",Ext.container.Container,{baseCls:Ext.baseCSSPrefix+"panel",isPanel:true,contentPaddingProperty:"bodyPadding",shrinkWrapDock:false,componentLayout:"dock",childEls:["body"],renderTpl:["{% this.renderDockedItems(out,values,0); %}",(Ext.isIE7m||Ext.isIEQuirks)?'<div style="position:relative;font-size:0;line-height:0;" role="presentation">&nbsp;</div>':"",'<div id="{id}-body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>{childElCls}"','<tpl if="bodyRole"> role="{bodyRole}"<tpl else> role="presentation"</tpl>','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>","{% this.renderDockedItems(out,values,1); %}"],bodyPosProps:{x:"x",y:"y"},border:true,emptyArray:[],initComponent:function(){this.initBorderProps();this.callParent()},initBorderProps:function(){var c=this;if(c.frame&&c.border&&c.bodyBorder===undefined){c.bodyBorder=false}if(c.frame&&c.border&&(c.bodyBorder===false||c.bodyBorder===0)){c.manageBodyBorders=true}},beforeDestroy:function(){this.destroyDockedItems();this.callParent()},initItems:function(){this.callParent();this.initDockingItems()},initRenderData:function(){var d=this,c=d.callParent();d.initBodyStyles();d.protoBody.writeTo(c);delete d.protoBody;return c},getComponent:function(d){var c=this.callParent(arguments);if(c===undefined&&!Ext.isNumber(d)){c=this.getDockedComponent(d)}return c},getProtoBody:function(){var c=this,d=c.protoBody;if(!d){c.protoBody=d=new Ext.util.ProtoElement({cls:c.bodyCls,style:c.bodyStyle,clsProp:"bodyCls",styleProp:"bodyStyle",styleIsText:true})}return d},initBodyStyles:function(){var c=this,d=c.getProtoBody();if(c.bodyPadding!==undefined){if(c.layout.managePadding){d.setStyle("padding",0)}else{d.setStyle("padding",this.unitizeBox((c.bodyPadding===true)?5:c.bodyPadding))}}c.initBodyBorder()},initBodyBorder:function(){var c=this;if(c.frame&&c.bodyBorder){if(!Ext.isNumber(c.bodyBorder)){c.bodyBorder=1}c.getProtoBody().setStyle("border-width",this.unitizeBox(c.bodyBorder))}},getCollapsedDockedItems:function(){var c=this;return c.header===false||c.collapseMode=="placeholder"?c.emptyArray:[c.getReExpander()]},setBodyStyle:function(e,j){var l=this,h=l.rendered?l.body:l.getProtoBody();if(Ext.isFunction(e)){e=e()}if(arguments.length==1){if(Ext.isString(e)){e=Ext.Element.parseStyles(e)}h.setStyle(e)}else{h.setStyle(e,j)}return l},addBodyCls:function(d){var h=this,e=h.rendered?h.body:h.getProtoBody();e.addCls(d);return h},removeBodyCls:function(d){var h=this,e=h.rendered?h.body:h.getProtoBody();e.removeCls(d);return h},addUIClsToElement:function(d){var h=this,e=h.callParent(arguments);h.addBodyCls([Ext.baseCSSPrefix+d,h.baseCls+"-body-"+d,h.baseCls+"-body-"+h.ui+"-"+d]);return e},removeUIClsFromElement:function(d){var h=this,e=h.callParent(arguments);h.removeBodyCls([Ext.baseCSSPrefix+d,h.baseCls+"-body-"+d,h.baseCls+"-body-"+h.ui+"-"+d]);return e},addUIToElement:function(){var c=this;c.callParent(arguments);c.addBodyCls(c.baseCls+"-body-"+c.ui)},removeUIFromElement:function(){var c=this;c.callParent(arguments);c.removeBodyCls(c.baseCls+"-body-"+c.ui)},getTargetEl:function(){return this.body},applyTargetCls:function(c){this.getProtoBody().addCls(c)},getRefItems:function(d){var c=this.callParent(arguments);return this.getDockingRefItems(d,c)},setupRenderTpl:function(c){this.callParent(arguments);this.setupDockingRenderTpl(c)}},0,0,["component","box","container"],{component:true,box:true,container:true},0,[["docking",Ext.container.DockingContainer]],[Ext.panel,"AbstractPanel"],0));(Ext.cmd.derive("Ext.panel.Header",Ext.container.Container,{isHeader:true,defaultType:"tool",indicateDrag:false,weight:-1,componentLayout:"body",childEls:["body"],renderTpl:['<div id="{id}-body" class="{headerCls}-body {baseCls}-body {bodyCls} {bodyTargetCls}','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl> role="presentation">',"{%this.renderContainer(out,values)%}","</div>"],headingTpl:['<span id="{id}-textEl" class="{headerCls}-text {cls}-text {cls}-text-{ui}" unselectable="on"','<tpl if="headerRole">',' role="{headerRole}"',"</tpl>",">{title}</span>"],shrinkWrap:3,titlePosition:0,headerCls:Ext.baseCSSPrefix+"header",initComponent:function(){var l=this,m=l.hasOwnProperty("titlePosition"),o=l.items,j=m?l.titlePosition:(o?o.length:0),h=[l.orientation,l.getDockName()],n=l.ownerCt;l.addEvents("click","dblclick");l.indicateDragCls=l.headerCls+"-draggable";l.title=l.title||"&#160;";l.tools=l.tools||[];o=l.items=(o?Ext.Array.slice(o):[]);l.orientation=l.orientation||"horizontal";l.dock=(l.dock)?l.dock:(l.orientation=="horizontal")?"top":"left";if(n?(n.border===false&&!n.frame):l.border===false){h.push(l.orientation+"-noborder")}l.addClsWithUI(h);l.addCls([l.headerCls,l.headerCls+"-"+l.orientation]);if(l.indicateDrag){l.addCls(l.indicateDragCls)}if(l.iconCls||l.icon||l.glyph){l.initIconCmp();if(!m&&!o.length){++j}o.push(l.iconCmp)}l.titleCmp=new Ext.Component({ariaRole:"presentation",focusable:false,noWrap:true,flex:1,rtl:l.rtl,id:l.id+"_hd",style:l.titleAlign?("text-align:"+l.titleAlign):"",cls:l.headerCls+"-text-container "+l.baseCls+"-text-container "+l.baseCls+"-text-container-"+l.ui,renderTpl:l.getTpl("headingTpl"),renderData:{title:l.title,cls:l.baseCls,headerCls:l.headerCls,headerRole:l.headerRole,ui:l.ui},childEls:["textEl"],autoEl:{unselectable:"on"},listeners:{render:l.onTitleRender,scope:l}});l.layout=(l.orientation=="vertical")?{type:"vbox",align:"center",alignRoundingMethod:"ceil"}:{type:"hbox",align:"middle",alignRoundingMethod:"floor"};Ext.Array.push(o,l.tools);l.tools.length=0;l.callParent();if(o.length<j){j=o.length}l.titlePosition=j;l.insert(j,l.titleCmp);l.on({dblclick:l.onDblClick,click:l.onClick,element:"el",scope:l})},setTitlePosition:function(d){var c=this;c.titlePosition=d=Math.min(d,c.items.length-1);c.insert(d,c.titleCmp)},initIconCmp:function(){var h=this,d=[h.headerCls+"-icon",h.baseCls+"-icon",h.iconCls],e;if(h.glyph){d.push(h.baseCls+"-glyph")}e={focusable:false,src:Ext.BLANK_IMAGE_URL,cls:d,baseCls:h.baseCls+"-icon",id:h.id+"-iconEl",iconCls:h.iconCls,glyph:h.glyph};if(!Ext.isEmpty(h.icon)){delete e.iconCls;e.src=h.icon}h.iconCmp=new Ext.Img(e)},beforeRender:function(){this.protoEl.unselectable();this.callParent()},afterLayout:function(){var h=this,l,j,n,m;if(h.orientation==="vertical"){h.adjustTitlePosition();j=h.frameTR;if(j){l=h.frameBR;n=h.frameTL;m=(h.getWidth()-j.getPadding("r")-((n)?n.getPadding("l"):h.el.getBorderWidth("l")))+"px";l.setStyle("background-position-x",m);j.setStyle("background-position-x",m)}if(Ext.isIE7&&Ext.isStrict&&h.frame){h.el.repaint()}}},beforeLayout:function(){this.callParent();this.syncBeforeAfterTitleClasses()},adjustTitlePosition:function(){var c=this.titleCmp,d;if(!Ext.isIE9m&&c){d=c.el;d.setStyle("left",d.getWidth()+"px")}},onTitleRender:function(){if(this.orientation==="vertical"){this.titleCmp.el.setVertical(90)}},addUIClsToElement:function(h){var m=this,j=m.callParent(arguments),n=[m.baseCls+"-body-"+h,m.baseCls+"-body-"+m.ui+"-"+h],l,o;if(m.bodyCls){l=m.bodyCls.split(" ");for(o=0;o<n.length;o++){if(!Ext.Array.contains(l,n[o])){l.push(n[o])}}m.bodyCls=l.join(" ")}else{m.bodyCls=n.join(" ")}return j},removeUIClsFromElement:function(h){var m=this,j=m.callParent(arguments),n=[m.baseCls+"-body-"+h,m.baseCls+"-body-"+m.ui+"-"+h],l,o;if(m.bodyCls){l=m.bodyCls.split(" ");for(o=0;o<n.length;o++){Ext.Array.remove(l,n[o])}m.bodyCls=l.join(" ")}return j},addUIToElement:function(){var d=this,h,e;d.callParent(arguments);e=d.baseCls+"-body-"+d.ui;if(d.rendered){if(d.bodyCls){d.body.addCls(d.bodyCls)}else{d.body.addCls(e)}}else{if(d.bodyCls){h=d.bodyCls.split(" ");if(!Ext.Array.contains(h,e)){h.push(e)}d.bodyCls=h.join(" ")}else{d.bodyCls=e}}if(d.titleCmp&&d.titleCmp.rendered){d.titleCmp.addCls(d.baseCls+"-text-container-"+d.ui)}},removeUIFromElement:function(){var d=this,h,e;d.callParent(arguments);e=d.baseCls+"-body-"+d.ui;if(d.rendered){if(d.bodyCls){d.body.removeCls(d.bodyCls)}else{d.body.removeCls(e)}}else{if(d.bodyCls){h=d.bodyCls.split(" ");Ext.Array.remove(h,e);d.bodyCls=h.join(" ")}else{d.bodyCls=e}}if(d.titleCmp&&d.titleCmp.rendered){d.titleCmp.removeCls(d.baseCls+"-text-container-"+d.ui)}},onClick:function(c){this.fireClickEvent("click",c)},onDblClick:function(c){this.fireClickEvent("dblclick",c)},fireClickEvent:function(e,h){var d="."+Ext.panel.Tool.prototype.baseCls;if(!h.getTarget(d)){this.fireEvent(e,this,h)}},getFocusEl:function(){return this.el},getTargetEl:function(){return this.body||this.frameBody||this.el},applyTargetCls:function(c){this.bodyTargetCls=c},setTitle:function(h){var d=this,e=d.titleCmp;d.title=h;if(e.rendered){e.textEl.update(d.title||"&#160;");e.updateLayout()}else{d.titleCmp.on({render:function(){d.setTitle(h)},single:true})}},getMinWidth:function(){var m=this,n=m.titleCmp.textEl.dom,j,l=m.tools,h,o;n.style.display="inline";j=n.offsetWidth;n.style.display="";if(l&&(h=l.length)){for(o=0;o<h;o++){if(l[o].el){j+=l[o].el.dom.offsetWidth}}}if(m.iconCmp){j+=m.iconCmp.el.dom.offsetWidth}return j+10},setIconCls:function(h){var e=this,j=!h||!h.length,l=e.iconCmp;e.iconCls=h;if(!e.iconCmp&&!j){e.initIconCmp();e.insert(0,e.iconCmp)}else{if(l){if(j){e.iconCmp.destroy();delete e.iconCmp}else{l.removeCls(l.iconCls);l.addCls(h);l.iconCls=h}}}},setIcon:function(h){var e=this,j=!h||!h.length,l=e.iconCmp;e.icon=h;if(!e.iconCmp&&!j){e.initIconCmp();e.insert(0,e.iconCmp)}else{if(l){if(j){e.iconCmp.destroy();delete e.iconCmp}else{l.setSrc(e.icon)}}}},setGlyph:function(d){var e=this,h=e.iconCmp;if(!e.iconCmp){e.initIconCmp();e.insert(0,e.iconCmp)}else{if(h){if(d){e.iconCmp.setGlyph(d)}else{e.iconCmp.destroy();delete e.iconCmp}}}},getTools:function(){return this.tools.slice()},addTool:function(c){this.add(Ext.ComponentManager.create(c,"tool"))},syncBeforeAfterTitleClasses:function(y){var s=this,t=s.items,v=t.items,z=s.titlePosition,A=v.length,u=t.generation,q=s.syncBeforeAfterGen,o,w,x,p;if(!y&&(q===u)){return}s.syncBeforeAfterGen=u;for(x=0;x<A;++x){p=v[x];o=p.afterTitleCls||(p.afterTitleCls=p.baseCls+"-after-title");w=p.beforeTitleCls||(p.beforeTitleCls=p.baseCls+"-before-title");if(!s.title||x<z){if(q){p.removeCls(o)}p.addCls(w)}else{if(x>z){if(q){p.removeCls(w)}p.addCls(o)}}}},onAdd:function(d,e){var h=this.tools;this.callParent(arguments);if(d.isTool){h.push(d);h[d.type]=d}},initRenderData:function(){return Ext.applyIf(this.callParent(),{bodyCls:this.bodyCls,bodyTargetCls:this.bodyTargetCls,headerCls:this.headerCls})},getDockName:function(){return this.dock},getFramingInfoCls:function(){var h=this,d=h.callParent(),e=h.ownerCt;if(!h.expanding&&e&&(e.collapsed||h.isCollapsedExpander)){d+="-"+e.collapsedCls}return d+"-"+h.dock}},0,["header"],["component","box","container","header"],{component:true,box:true,container:true,header:true},["widget.header"],0,[Ext.panel,"Header"],0));(Ext.cmd.derive("Ext.dd.DragDrop",Ext.Base,{constructor:function(h,e,d){if(h){this.init(h,e,d)}},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(d,c){},startDrag:function(d,c){},b4Drag:function(c){},onDrag:function(c){},onDragEnter:function(d,c){},b4DragOver:function(c){},onDragOver:function(d,c){},b4DragOut:function(c){},onDragOut:function(d,c){},b4DragDrop:function(c){},onDragDrop:function(d,c){},onInvalidDrop:function(c){},b4EndDrag:function(c){},endDrag:function(c){},b4MouseDown:function(c){},onMouseDown:function(c){},onMouseUp:function(c){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(u,w,c){if(Ext.isNumber(w)){w={left:w,right:w,top:w,bottom:w}}w=w||this.defaultPadding;var s=Ext.get(this.getEl()).getBox(),z=Ext.get(u),p=z.getScroll(),t,y=z.dom,q,v,x;if(y==document.body){t={x:p.left,y:p.top,width:Ext.Element.getViewWidth(),height:Ext.Element.getViewHeight()}}else{q=z.getXY();t={x:q[0],y:q[1],width:y.clientWidth,height:y.clientHeight}}v=s.y-t.y;x=s.x-t.x;this.resetConstraints();this.setXConstraint(x-(w.left||0),t.width-x-s.width-(w.right||0),this.xTickSize);this.setYConstraint(v-(w.top||0),t.height-v-s.height-(w.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(h,e,d){this.initTarget(h,e,d);Ext.EventManager.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(h,e,d){this.config=d||{};this.DDMInstance=Ext.dd.DragDropManager;this.groups={};if(typeof h!=="string"){h=Ext.id(h)}this.id=h;this.addToGroup((e)?e:"default");this.handleElId=h;this.setDragElId(h);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(l,h,j,e){if(!h&&0!==h){this.padding=[l,l,l,l]}else{if(!j&&0!==j){this.padding=[l,h,l,h]}else{this.padding=[l,h,j,e]}}},setInitPosition:function(n,o){var m=this.getEl(),h,j,l;if(!this.DDMInstance.verifyEl(m)){return}h=n||0;j=o||0;l=Ext.Element.getXY(m);this.initPageX=l[0]-h;this.initPageY=l[1]-j;this.lastPageX=l[0];this.lastPageY=l[1];this.setStartPosition(l)},setStartPosition:function(c){var d=c||Ext.Element.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=d[0];this.startPageY=d[1]},addToGroup:function(c){this.groups[c]=true;this.DDMInstance.regDragDrop(this,c)},removeFromGroup:function(c){if(this.groups[c]){delete this.groups[c]}this.DDMInstance.removeDDFromGroup(this,c)},setDragElId:function(c){this.dragElId=c},setHandleElId:function(c){if(typeof c!=="string"){c=Ext.id(c)}this.handleElId=c;this.DDMInstance.regHandle(this.id,c)},setOuterHandleElId:function(c){if(typeof c!=="string"){c=Ext.id(c)}Ext.EventManager.on(c,"mousedown",this.handleMouseDown,this);this.setHandleElId(c);this.hasOuterHandles=true},unreg:function(){var c=this;Ext.EventManager.un(c.id,"mousedown",c.handleMouseDown,c);c._domRef=null;c.DDMInstance._remove(c,c.autoGroup)},destroy:function(){this.unreg();this.isDestroyed=true},isLocked:function(){return(this.DDMInstance.isLocked()||this.locked)},handleMouseDown:function(h,d){var e=this;if((e.primaryButtonOnly&&h.button!=0)||e.isLocked()){return}e.DDMInstance.refreshCache(e.groups);if(e.hasOuterHandles||e.DDMInstance.isOverTarget(h.getPoint(),e)){if(e.clickValidator(h)){e.setStartPosition();e.b4MouseDown(h);e.onMouseDown(h);e.DDMInstance.handleMouseDown(h,e);e.DDMInstance.stopEvent(h)}}},clickValidator:function(c){var d=c.getTarget();return(this.isValidHandleChild(d)&&(this.id==this.handleElId||this.DDMInstance.handleWasClicked(d,this.id)))},addInvalidHandleType:function(d){var c=d.toUpperCase();this.invalidHandleTypes[c]=c},addInvalidHandleId:function(c){if(typeof c!=="string"){c=Ext.id(c)}this.invalidHandleIds[c]=c},addInvalidHandleClass:function(c){this.invalidHandleClasses.push(c)},removeInvalidHandleType:function(d){var c=d.toUpperCase();delete this.invalidHandleTypes[c]},removeInvalidHandleId:function(c){if(typeof c!=="string"){c=Ext.id(c)}delete this.invalidHandleIds[c]},removeInvalidHandleClass:function(d){for(var h=0,e=this.invalidHandleClasses.length;h<e;++h){if(this.invalidHandleClasses[h]==d){delete this.invalidHandleClasses[h]}}},isValidHandleChild:function(n){var o=true,l,e,j;try{l=n.nodeName.toUpperCase()}catch(m){l=n.nodeName}o=o&&!this.invalidHandleTypes[l];o=o&&!this.invalidHandleIds[n.id];for(e=0,j=this.invalidHandleClasses.length;o&&e<j;++e){o=!Ext.fly(n).hasCls(this.invalidHandleClasses[e])}return o},setXTicks:function(j,h){this.xTicks=[];this.xTickSize=h;var l={},e;for(e=this.initPageX;e>=this.minX;e=e-h){if(!l[e]){this.xTicks[this.xTicks.length]=e;l[e]=true}}for(e=this.initPageX;e<=this.maxX;e=e+h){if(!l[e]){this.xTicks[this.xTicks.length]=e;l[e]=true}}Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(j,h){this.yTicks=[];this.yTickSize=h;var l={},e;for(e=this.initPageY;e>=this.minY;e=e-h){if(!l[e]){this.yTicks[this.yTicks.length]=e;l[e]=true}}for(e=this.initPageY;e<=this.maxY;e=e+h){if(!l[e]){this.yTicks[this.yTicks.length]=e;l[e]=true}}Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(h,d,e){this.leftConstraint=h;this.rightConstraint=d;this.minX=this.initPageX-h;this.maxX=this.initPageX+d;if(e){this.setXTicks(this.initPageX,e)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(e,h,d){this.topConstraint=e;this.bottomConstraint=h;this.minY=this.initPageY-e;this.maxY=this.initPageY+h;if(d){this.setYTicks(this.initPageY,d)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var c=(this.maintainOffset)?this.lastPageX-this.initPageX:0,d=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(c,d)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(m,p){if(!p){return m}else{if(p[0]>=m){return p[0]}else{var j,l,q,n,o;for(j=0,l=p.length;j<l;++j){q=j+1;if(p[q]&&p[q]>=m){n=m-p[j];o=p[q]-m;return(o>n)?p[j]:p[q]}}return p[p.length-1]}}},toString:function(){return("DragDrop "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DragDrop"],0));(Ext.cmd.derive("Ext.dd.DD",Ext.dd.DragDrop,{constructor:function(h,e,d){if(h){this.init(h,e,d)}},scroll:true,autoOffset:function(l,e){var h=l-this.startPageX,j=e-this.startPageY;this.setDelta(h,j)},setDelta:function(c,d){this.deltaX=c;this.deltaY=d},setDragElPos:function(h,d){var e=this.getDragEl();this.alignElWithMouse(e,h,d)},alignElWithMouse:function(x,u,w){var t=this.getTargetCoord(u,w),v=x.dom?x:Ext.fly(x,"_dd"),n=v.getSize(),q=Ext.Element,p,y,o,s;if(!this.deltaSetXY){p=this.cachedViewportSize={width:q.getDocumentWidth(),height:q.getDocumentHeight()};y=[Math.max(0,Math.min(t.x,p.width-n.width)),Math.max(0,Math.min(t.y,p.height-n.height))];v.setXY(y);o=this.getLocalX(v);s=v.getLocalY();this.deltaSetXY=[o-t.x,s-t.y]}else{p=this.cachedViewportSize;this.setLocalXY(v,Math.max(0,Math.min(t.x+this.deltaSetXY[0],p.width-n.width)),Math.max(0,Math.min(t.y+this.deltaSetXY[1],p.height-n.height)))}this.cachePosition(t.x,t.y);this.autoScroll(t.x,t.y,x.offsetHeight,x.offsetWidth);return t},cachePosition:function(d,e){if(d){this.lastPageX=d;this.lastPageY=e}else{var h=Ext.Element.getXY(this.getEl());this.lastPageX=h[0];this.lastPageY=h[1]}},autoScroll:function(v,w,A,u){if(this.scroll){var t=Ext.Element.getViewHeight(),D=Ext.Element.getViewWidth(),h=this.DDMInstance.getScrollTop(),B=this.DDMInstance.getScrollLeft(),x=A+w,s=u+v,y=(t+h-w-this.deltaY),z=(D+B-v-this.deltaX),C=40,E=(document.all)?80:30;if(x>t&&y<C){window.scrollTo(B,h+E)}if(w<h&&h>0&&w-h<C){window.scrollTo(B,h-E)}if(s>D&&z<C){window.scrollTo(B+E,h)}if(v<B&&B>0&&v-B<C){window.scrollTo(B-E,h)}}},getTargetCoord:function(l,e){var h=l-this.deltaX,j=e-this.deltaY;if(this.constrainX){if(h<this.minX){h=this.minX}if(h>this.maxX){h=this.maxX}}if(this.constrainY){if(j<this.minY){j=this.minY}if(j>this.maxY){j=this.maxY}}h=this.getTick(h,this.xTicks);j=this.getTick(j,this.yTicks);return{x:h,y:j}},applyConfig:function(){this.callParent();this.scroll=(this.config.scroll!==false)},b4MouseDown:function(c){this.autoOffset(c.getPageX(),c.getPageY())},b4Drag:function(c){this.setDragElPos(c.getPageX(),c.getPageY())},toString:function(){return("DD "+this.id)},getLocalX:function(c){return c.getLocalX()},setLocalXY:function(d,e,h){d.setLocalXY(e,h)}},3,0,0,0,0,0,[Ext.dd,"DD"],0));(Ext.cmd.derive("Ext.dd.DDProxy",Ext.dd.DD,{statics:{dragElId:"ygddfdiv"},constructor:function(h,e,d){if(h){this.init(h,e,d);this.initFrame()}},resizeFrame:true,centerFrame:false,createFrame:function(){var e=this,h=document.body,j,l;if(!h||!h.firstChild){setTimeout(function(){e.createFrame()},50);return}j=this.getDragEl();if(!j){j=document.createElement("div");j.id=this.dragElId;j.setAttribute("role","presentation");l=j.style;l.position="absolute";l.visibility="hidden";l.cursor="move";l.border="2px solid #aaa";l.zIndex=999;h.insertBefore(j,h.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent();this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(l,m){var n=this.getEl(),j=this.getDragEl(),h=j.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(h.width,10)/2),Math.round(parseInt(h.height,10)/2))}this.setDragElPos(l,m);Ext.fly(j).show()},_resizeProxy:function(){if(this.resizeFrame){var c=this.getEl();Ext.fly(this.getDragEl()).setSize(c.offsetWidth,c.offsetHeight)}},b4MouseDown:function(d){var e=d.getPageX(),h=d.getPageY();this.autoOffset(e,h);this.setDragElPos(e,h)},b4StartDrag:function(d,c){this.showFrame(d,c)},b4EndDrag:function(c){Ext.fly(this.getDragEl()).hide()},endDrag:function(h){var d=this.getEl(),e=this.getDragEl();e.style.visibility="";this.beforeMove();d.style.visibility="hidden";Ext.dd.DDM.moveToEl(d,e);e.style.visibility="hidden";d.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDProxy"],0));(Ext.cmd.derive("Ext.dd.StatusProxy",Ext.Component,{animRepair:false,childEls:["ghost"],renderTpl:['<div class="'+Ext.baseCSSPrefix+'dd-drop-icon" role="presentation"></div><div id="{id}-ghost" class="'+Ext.baseCSSPrefix+'dd-drag-ghost" role="presentation"></div>'],repairCls:Ext.baseCSSPrefix+"dd-drag-repair",ariaRole:"presentation",constructor:function(d){var c=this;d=d||{};Ext.apply(c,{hideMode:"visibility",hidden:true,floating:true,id:c.id||Ext.id(),cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:d.shadow||false,renderTo:Ext.getDetachedBody()});c.callParent(arguments);this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(c){c=c||this.dropNotAllowed;if(this.dropStatus!=c){this.el.replaceCls(this.dropStatus,c);this.dropStatus=c}},reset:function(d){var h=this,e=Ext.baseCSSPrefix+"dd-drag-proxy ";h.el.replaceCls(e+h.dropAllowed,e+h.dropNotAllowed);h.dropStatus=h.dropNotAllowed;if(d){h.ghost.update("")}},update:function(d){if(typeof d=="string"){this.ghost.update(d)}else{this.ghost.update("");d.style.margin="0";this.ghost.dom.appendChild(d)}var c=this.ghost.dom.firstChild;if(c){Ext.fly(c).setStyle("float","none")}},getGhost:function(){return this.ghost},hide:function(c){this.callParent();if(c){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},sync:function(){this.el.sync()},repair:function(l,j,h){var e=this;e.callback=j;e.scope=h;if(l&&e.animRepair!==false){e.el.addCls(e.repairCls);e.el.hideUnders(true);e.anim=e.el.animate({duration:e.repairDuration||500,easing:"ease-out",to:{x:l[0],y:l[1]},stopAnimation:true,callback:e.afterRepair,scope:e})}else{e.afterRepair()}},afterRepair:function(){var c=this;c.hide(true);c.el.removeCls(c.repairCls);if(typeof c.callback=="function"){c.callback.call(c.scope||c)}delete c.callback;delete c.scope}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.dd,"StatusProxy"],0));(Ext.cmd.derive("Ext.dd.DragSource",Ext.dd.DDProxy,{dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",animRepair:true,repairHighlightColor:"c3daf9",constructor:function(c,d){this.el=Ext.get(c);if(!this.dragData){this.dragData={}}Ext.apply(this,d);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true}]);this.dragging=false},getDragData:function(c){return this.dragData},onDragEnter:function(l,j){var e=Ext.dd.DragDropManager.getDDById(j),h;this.cachedTarget=e;if(this.beforeDragEnter(e,l,j)!==false){if(e.isNotifyTarget){h=e.notifyEnter(this,l,this.dragData);this.proxy.setStatus(h)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(e,l,j)}}},beforeDragEnter:function(d,e,h){return true},onDragOver:function(l,j){var e=this.cachedTarget||Ext.dd.DragDropManager.getDDById(j),h;if(this.beforeDragOver(e,l,j)!==false){if(e.isNotifyTarget){h=e.notifyOver(this,l,this.dragData);this.proxy.setStatus(h)}if(this.afterDragOver){this.afterDragOver(e,l,j)}}},beforeDragOver:function(d,e,h){return true},onDragOut:function(d,h){var e=this.cachedTarget||Ext.dd.DragDropManager.getDDById(h);if(this.beforeDragOut(e,d,h)!==false){if(e.isNotifyTarget){e.notifyOut(this,d,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(e,d,h)}}this.cachedTarget=null},beforeDragOut:function(d,e,h){return true},onDragDrop:function(d,h){var e=this.cachedTarget||Ext.dd.DragDropManager.getDDById(h);if(this.beforeDragDrop(e,d,h)!==false){if(e.isNotifyTarget){if(e.notifyDrop(this,d,this.dragData)!==false){this.onValidDrop(e,d,h)}else{this.onInvalidDrop(e,d,h)}}else{this.onValidDrop(e,d,h)}if(this.afterDragDrop){this.afterDragDrop(e,d,h)}}delete this.cachedTarget},beforeDragDrop:function(d,e,h){return true},onValidDrop:function(d,e,h){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(d,e,h)}},getRepairXY:function(c,d){return this.el.getXY()},onInvalidDrop:function(l,e,j){var h=this;if(!e){e=l;l=null;j=e.getTarget().id}if(h.beforeInvalidDrop(l,e,j)!==false){if(h.cachedTarget){if(h.cachedTarget.isNotifyTarget){h.cachedTarget.notifyOut(h,e,h.dragData)}h.cacheTarget=null}h.proxy.repair(h.getRepairXY(e,h.dragData),h.afterRepair,h);if(h.afterInvalidDrop){h.afterInvalidDrop(e,j)}}},afterRepair:function(){var c=this;if(Ext.enableFx){c.el.highlight(c.repairHighlightColor)}c.dragging=false},beforeInvalidDrop:function(d,e,h){return true},handleMouseDown:function(c){if(this.dragging){return}var d=this.getDragData(c);if(d&&this.onBeforeDrag(d,c)!==false){this.dragData=d;this.proxy.stop();this.callParent(arguments)}},onBeforeDrag:function(d,c){return true},onStartDrag:Ext.emptyFn,alignElWithMouse:function(){this.proxy.ensureAttachedToBody(true);return this.callParent(arguments)},startDrag:function(d,c){this.proxy.reset();this.proxy.hidden=false;this.dragging=true;this.proxy.update("");this.onInitDrag(d,c);this.proxy.show()},onInitDrag:function(e,h){var d=this.el.dom.cloneNode(true);d.id=Ext.id();this.proxy.update(d);this.onStartDrag(e,h);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(c){},endDrag:function(c){this.onEndDrag(this.dragData,c)},onEndDrag:function(d,c){},autoOffset:function(d,c){this.setDelta(-12,-20)},destroy:function(){this.callParent();Ext.destroy(this.proxy)}},1,0,0,0,0,0,[Ext.dd,"DragSource"],0));(Ext.cmd.derive("Ext.panel.Proxy",Ext.Base,{alternateClassName:"Ext.dd.PanelProxy",moveOnDrag:true,constructor:function(e,d){var h=this;h.panel=e;h.id=h.panel.id+"-ddproxy";Ext.apply(h,d)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){var c=this;if(c.ghost){if(c.proxy){c.proxy.remove();delete c.proxy}c.panel.unghost(null,c.moveOnDrag);delete c.ghost}},show:function(){var c=this,d;if(!c.ghost){d=c.panel.getSize();c.panel.el.setVisibilityMode(Ext.Element.DISPLAY);c.ghost=c.panel.ghost();if(c.insertProxy){c.proxy=c.panel.el.insertSibling({role:"presentation",cls:Ext.baseCSSPrefix+"panel-dd-spacer"});c.proxy.setSize(d)}}},repair:function(d,h,e){this.hide();Ext.callback(h,e||this)},moveProxy:function(d,c){if(this.proxy){d.insertBefore(this.proxy.dom,c)}}},1,0,0,0,0,0,[Ext.panel,"Proxy",Ext.dd,"PanelProxy"],0));(Ext.cmd.derive("Ext.panel.DD",Ext.dd.DragSource,{constructor:function(d,e){var h=this;h.panel=d;h.dragData={panel:d};h.panelProxy=new Ext.panel.Proxy(d,e);h.proxy=h.panelProxy.proxy;h.callParent([d.el,e]);h.setupEl(d)},setupEl:function(h){var l=this,j=h.header,e=h.body;if(j){l.setHandleElId(j.id);e=j.el}if(e){e.setStyle("cursor","move");l.scroll=false}else{h.on("boxready",l.setupEl,l,{single:true})}},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(d,c){this.panelProxy.show()},b4MouseDown:function(d){var e=d.getPageX(),h=d.getPageY();this.autoOffset(e,h)},onInitDrag:function(d,c){this.onStartDrag(d,c);return true},createFrame:Ext.emptyFn,getDragEl:function(c){var d=this.panelProxy.ghost;if(d){return d.el.dom}},endDrag:function(c){this.panelProxy.hide();this.panel.saveState()},autoOffset:function(d,c){d-=this.startPageX;c-=this.startPageY;this.setDelta(d,c)},onInvalidDrop:function(l,e,j){var h=this;if(h.beforeInvalidDrop(l,e,j)!==false){if(h.cachedTarget){if(h.cachedTarget.isNotifyTarget){h.cachedTarget.notifyOut(h,e,h.dragData)}h.cacheTarget=null}if(h.afterInvalidDrop){h.afterInvalidDrop(e,j)}}}},1,0,0,0,0,0,[Ext.panel,"DD"],0));(Ext.cmd.derive("Ext.layout.component.Dock",Ext.layout.component.Component,{alternateClassName:"Ext.layout.component.AbstractDock",type:"dock",horzAxisProps:{name:"horz",oppositeName:"vert",dockBegin:"left",dockEnd:"right",horizontal:true,marginBegin:"margin-left",maxSize:"maxWidth",minSize:"minWidth",pos:"x",setSize:"setWidth",shrinkWrapDock:"shrinkWrapDockWidth",size:"width",sizeModel:"widthModel"},vertAxisProps:{name:"vert",oppositeName:"horz",dockBegin:"top",dockEnd:"bottom",horizontal:false,marginBegin:"margin-top",maxSize:"maxHeight",minSize:"minHeight",pos:"y",setSize:"setHeight",shrinkWrapDock:"shrinkWrapDockHeight",size:"height",sizeModel:"heightModel"},initializedBorders:-1,horizontalCollapsePolicy:{width:true,x:true},verticalCollapsePolicy:{height:true,y:true},finishRender:function(){var d=this,h,e;d.callParent();h=d.getRenderTarget();e=d.getDockedItems();d.finishRenderItems(h,e)},isItemBoxParent:function(c){return true},isItemShrinkWrap:function(c){return true},noBorderClasses:[Ext.baseCSSPrefix+"docked-noborder-top",Ext.baseCSSPrefix+"docked-noborder-right",Ext.baseCSSPrefix+"docked-noborder-bottom",Ext.baseCSSPrefix+"docked-noborder-left"],noBorderClassesSides:{top:Ext.baseCSSPrefix+"docked-noborder-top",right:Ext.baseCSSPrefix+"docked-noborder-right",bottom:Ext.baseCSSPrefix+"docked-noborder-bottom",left:Ext.baseCSSPrefix+"docked-noborder-left"},borderWidthProps:{top:"border-top-width",right:"border-right-width",bottom:"border-bottom-width",left:"border-left-width"},handleItemBorders:function(){var w=this,G=w.owner,x,s,A=w.lastDockedItems,B=w.borders,F=G.dockedItems.generation,E=w.noBorderClassesSides,v=w.borderWidthProps,C,y,t,u,z,D=w.collapsed;if(w.initializedBorders==F||(G.border&&!G.manageBodyBorders)||(G.collapsed&&G.collapseMode=="mini")){return}w.initializedBorders=F;w.collapsed=false;w.lastDockedItems=s=w.getLayoutItems();w.collapsed=D;x={top:[],right:[],bottom:[],left:[]};for(C=0,y=s.length;C<y;C++){t=s[C];u=t.dock;if(t.ignoreBorderManagement){continue}if(!x[u].satisfied){x[u].push(t);x[u].satisfied=true}if(!x.top.satisfied&&u!=="bottom"){x.top.push(t)}if(!x.right.satisfied&&u!=="left"){x.right.push(t)}if(!x.bottom.satisfied&&u!=="top"){x.bottom.push(t)}if(!x.left.satisfied&&u!=="right"){x.left.push(t)}}if(A){for(C=0,y=A.length;C<y;C++){t=A[C];if(!t.isDestroyed&&!t.ignoreBorderManagement&&!G.manageBodyBorders){t.removeCls(w.noBorderClasses)}}}if(B){for(z in B){if(G.manageBodyBorders&&B[z].satisfied){G.setBodyStyle(v[z],"")}}}for(z in x){y=x[z].length;if(!G.manageBodyBorders){for(C=0;C<y;C++){x[z][C].addCls(E[z])}if((!x[z].satisfied&&!G.bodyBorder)||G.bodyBorder===false){G.addBodyCls(E[z])}}else{if(x[z].satisfied){G.setBodyStyle(v[z],"1px")}}}w.borders=x},beforeLayoutCycle:function(n){var q=this,j=q.owner,m=q.sizeModels.shrinkWrap,o=j.shrinkWrapDock,p,l;if(j.collapsed){if(j.collapsedVertical()){l=true;n.measureDimensions=1}else{p=true;n.measureDimensions=2}}n.collapsedVert=l;n.collapsedHorz=p;if(l){n.heightModel=m}else{if(p){n.widthModel=m}}o=o===true?3:(o||0);n.shrinkWrapDockHeight=(o&1)&&n.heightModel.shrinkWrap;n.shrinkWrapDockWidth=(o&2)&&n.widthModel.shrinkWrap},beginLayout:function(z){var u=this,A=u.owner,p=u.getLayoutItems(),B=z.context,x=p.length,t,v,q,C,y,w,s;u.callParent(arguments);w=A.getCollapsed();if(w!==u.lastCollapsedState&&Ext.isDefined(u.lastCollapsedState)){if(u.owner.collapsed){z.isCollapsingOrExpanding=1;A.addClsWithUI(A.collapsedCls)}else{z.isCollapsingOrExpanding=2;A.removeClsWithUI(A.collapsedCls);z.lastCollapsedState=u.lastCollapsedState}}u.lastCollapsedState=w;z.dockedItems=t=[];for(v=0;v<x;v++){q=p[v];if(q.rendered){s=q.dock;C=B.getCmp(q);C.dockedAt={x:0,y:0};C.offsets=y=Ext.Element.parseBox(q.offsets||0);C.horizontal=s=="top"||s=="bottom";y.width=y.left+y.right;y.height=y.top+y.bottom;t.push(C)}}z.bodyContext=z.getEl("body")},beginLayoutCycle:function(v){var s=this,m=v.dockedItems,t=m.length,w=s.owner,q=w.frameBody,n=s.lastHeightModel,u,o,p;s.callParent(arguments);if(s.owner.manageHeight){if(s.lastBodyDisplay){w.body.dom.style.display=s.lastBodyDisplay=""}}else{if(s.lastBodyDisplay!=="inline-block"){w.body.dom.style.display=s.lastBodyDisplay="inline-block"}if(n&&n.shrinkWrap&&!v.heightModel.shrinkWrap){w.body.dom.style.marginBottom=""}}if(v.widthModel.auto){if(v.widthModel.shrinkWrap){w.el.setWidth(null)}w.body.setWidth(null);if(q){q.setWidth(null)}}if(v.heightModel.auto){w.body.setHeight(null);if(q){q.setHeight(null)}}if(v.collapsedVert){v.setContentHeight(0)}else{if(v.collapsedHorz){v.setContentWidth(0)}}for(u=0;u<t;u++){o=m[u].target;p=o.dock;if(p=="right"){o.setLocalX(0)}else{if(p!="left"){continue}}}},calculate:function(x){var p=this,y=p.measureAutoDimensions(x,x.measureDimensions),z=x.state,q=z.horzDone,w=z.vertDone,v=x.bodyContext,s,A,t,u,o;x.borderInfo||x.getBorderInfo();x.paddingInfo||x.getPaddingInfo();x.frameInfo||x.getFrameInfo();v.borderInfo||v.getBorderInfo();v.paddingInfo||v.getPaddingInfo();if(!x.frameBorder){if(!(s=x.framing)){x.frameBorder=x.borderInfo;x.framePadding=x.paddingInfo}else{x.frameBorder=s.border;x.framePadding=s.padding}}A=!q&&p.createAxis(x,y.contentWidth,x.widthModel,p.horzAxisProps,x.collapsedHorz);t=!w&&p.createAxis(x,y.contentHeight,x.heightModel,p.vertAxisProps,x.collapsedVert);for(u=0,o=x.dockedItems.length;o--;++u){if(A){p.dockChild(x,A,o,u)}if(t){p.dockChild(x,t,o,u)}}if(A&&p.finishAxis(x,A)){z.horzDone=q=A}if(t&&p.finishAxis(x,t)){z.vertDone=w=t}if(q&&w&&p.finishConstraints(x,q,w)){p.finishPositions(x,q,w)}else{p.done=false}},createAxis:function(B,H,M,E,N){var w=this,x=0,P=w.owner,K=P[E.maxSize],O=P[E.minSize]||0,D=E.dockBegin,I=E.dockEnd,z=E.pos,F=E.size,G=K!=null,C=M.shrinkWrap,Q,y,A,J;if(C){if(N){J=0}else{Q=B.bodyContext;J=H+Q.borderInfo[F]}}else{y=B.frameBorder;A=B.framePadding;x=y[D]+A[D];J=B.getProp(F)-(y[I]+A[I])}return{shrinkWrap:M.shrinkWrap,sizeModel:M,initialBegin:x,begin:x,end:J,collapsed:N,horizontal:E.horizontal,ignoreFrameBegin:null,ignoreFrameEnd:null,initialSize:J-x,maxChildSize:0,hasMinMaxConstraints:(O||G)&&M.shrinkWrap,minSize:O,maxSize:G?K:1000000000,bodyPosProp:w.owner.manageHeight?z:E.marginBegin,dockBegin:D,dockEnd:I,posProp:z,sizeProp:F,setSize:E.setSize,shrinkWrapDock:B[E.shrinkWrapDock],sizeModelName:E.sizeModel,dockedPixelsEnd:0}},dockChild:function(x,w,n,u){var t=this,y=x.dockedItems[w.shrinkWrap?n:u],q=y.target,p=q.dock,v=w.sizeProp,s,o;if(q.ignoreParentFrame&&x.isCollapsingOrExpanding){y.clearMarginCache()}y.marginInfo||y.getMarginInfo();if(p==w.dockBegin){if(w.shrinkWrap){s=t.dockOutwardBegin(x,y,q,w)}else{s=t.dockInwardBegin(x,y,q,w)}}else{if(p==w.dockEnd){if(w.shrinkWrap){s=t.dockOutwardEnd(x,y,q,w)}else{s=t.dockInwardEnd(x,y,q,w)}}else{if(w.shrinkWrapDock){o=y.getProp(v)+y.marginInfo[v];w.maxChildSize=Math.max(w.maxChildSize,o);s=0}else{s=t.dockStretch(x,y,q,w)}}}y.dockedAt[w.posProp]=s},dockInwardBegin:function(v,w,n,t){var q=t.begin,s=t.sizeProp,u=n.ignoreParentFrame,p,m,o;if(u){t.ignoreFrameBegin=w;o=n.dock;p=v.frameBorder[o];q-=p+v.framePadding[o]}if(!n.overlay){m=w.getProp(s)+w.marginInfo[s];t.begin+=m;if(u){t.begin-=p}}return q},dockInwardEnd:function(q,s,t,l){var n=l.sizeProp,m=s.getProp(n)+s.marginInfo[n],o=l.end-m,p;if(!t.overlay){l.end=o}if(t.ignoreParentFrame){l.ignoreFrameEnd=s;p=q.frameBorder[t.dock];o+=p+q.framePadding[t.dock];l.end+=p}return o},dockOutwardBegin:function(o,p,q,j){var m=j.begin,n=j.sizeProp,l;if(j.collapsed){j.ignoreFrameBegin=j.ignoreFrameEnd=p}else{if(q.ignoreParentFrame){j.ignoreFrameBegin=p}}if(!q.overlay){l=p.getProp(n)+p.marginInfo[n];m-=l;j.begin=m}return m},dockOutwardEnd:function(o,p,q,j){var m=j.end,n=j.sizeProp,l;l=p.getProp(n)+p.marginInfo[n];if(j.collapsed){j.ignoreFrameBegin=j.ignoreFrameEnd=p}else{if(q.ignoreParentFrame){j.ignoreFrameEnd=p}}if(!q.overlay){j.end=m+l;j.dockedPixelsEnd+=l}return m},dockStretch:function(E,F,v,D){var u=v.dock,y=D.sizeProp,G=u=="top"||u=="bottom",z=E.frameBorder,C=F.offsets,w=E.framePadding,A=G?"right":"bottom",s=G?"left":"top",x=D.begin+C[s],B,t;if(v.stretch!==false){t=D.end-x-C[A];if(v.ignoreParentFrame){x-=w[s]+z[s];t+=w[y]+z[y]}B=F.marginInfo;t-=B[y];F[D.setSize](t)}return x},finishAxis:function(K,S){if(isNaN(S.maxChildSize)){return false}var T=S.begin,H=S.end-T,Q=S.collapsed,A=S.setSize,N=S.dockBegin,C=S.dockEnd,I=K.framePadding,F=K.frameBorder,R=F[N],E=K.framing,J=E&&E[N],V=Q?0:I[N],O=S.sizeProp,D=S.ignoreFrameBegin,G=S.ignoreFrameEnd,W=K.bodyContext,M=Math.max(R+V-J,0),U,z,B,P;if(S.shrinkWrap){z=S.initialSize;if(E){B=-T+R+V;U=B-J-M}else{U=-T;B=U+V}if(!Q){H+=I[O]}if(D){B-=R;U-=R;D.dockedAt[S.posProp]-=V}else{H+=R}if(Q){}else{if(G){G.dockedAt[S.posProp]+=I[C]}else{H+=F[C]}}S.size=H;if(!S.horizontal&&!this.owner.manageHeight){P=false}}else{if(E){B=0;U=T-J-M}else{B=-R;U=T-V-R}z=H}S.delta=B;W[A](z,P);W.setProp(S.bodyPosProp,U);return !isNaN(H)},beforeInvalidateShrinkWrapDock:function(h,d){var e=d.axis.sizeModelName;if(!h[e].constrainedMin){h[e]=Ext.layout.SizeModel.calculated}},afterInvalidateShrinkWrapDock:function(m,j){var h=j.axis,n=j.layout,l;if(m[h.sizeModelName].calculated){l=n.dockStretch(j.ownerContext,m,m.target,h);m.setProp(h.posProp,h.delta+l)}},finishConstraints:function(C,J,x){var u=this,v=u.sizeModels,y=J.shrinkWrap,w=x.shrinkWrap,M=u.owner,E,A,z,G,F,B,K,I,H,D;if(y){B=J.size;K=J.collapsed?0:J.minSize;I=J.maxSize;H=J.maxChildSize;D=Math.max(B,H);if(D>I){F=v.constrainedMax;z=I}else{if(D<K){F=v.constrainedMin;z=K}else{if(B<H){F=v.constrainedDock;M.dockConstrainedWidth=z=H}else{z=B}}}}if(w){B=x.size;K=x.collapsed?0:x.minSize;I=x.maxSize;H=x.maxChildSize;D=Math.max(B,H+B-x.initialSize);if(D>I){G=v.constrainedMax;A=I}else{if(D<K){G=v.constrainedMin;A=K}else{if(B<H){G=v.constrainedDock;M.dockConstrainedHeight=A=H}else{if(!C.collapsedVert&&!M.manageHeight){E=false;C.bodyContext.setProp("margin-bottom",x.dockedPixelsEnd)}A=B}}}}if(F||G){if(F&&G&&F.constrainedMax&&G.constrainedByMin){C.invalidate({widthModel:F});return false}if(!C.widthModel.calculatedFromShrinkWrap&&!C.heightModel.calculatedFromShrinkWrap){C.invalidate({widthModel:F,heightModel:G});return false}}else{u.invalidateAxes(C,J,x)}if(y){C.setWidth(z);if(F){C.widthModel=F}}if(w){C.setHeight(A,E);if(G){C.heightModel=G}}return true},invalidateAxes:function(D,I,z){var v=this.beforeInvalidateShrinkWrapDock,H=this.afterInvalidateShrinkWrapDock,E=I.end-I.begin,J=z.initialSize,G=I.shrinkWrapDock&&I.maxChildSize<=E,y=z.shrinkWrapDock&&z.maxChildSize<=J,u,x,A,F,t,w,C,B;if(G||y){if(y){z.begin=z.initialBegin;z.end=z.begin+z.initialSize}u=D.dockedItems;for(A=0,x=u.length;A<x;++A){F=u[A];w=F.horizontal;C=null;if(G&&w){B=I.sizeProp;t=E;C=I}else{if(y&&!w){B=z.sizeProp;t=J;C=z}}if(C){t-=F.getMarginInfo()[B];if(t!==F.props[B]){F.invalidate({before:v,after:H,axis:C,ownerContext:D,layout:this})}}}}},finishPositions:function(q,u,n){var l=q.dockedItems,s=l.length,o=u.delta,p=n.delta,m,t;for(m=0;m<s;++m){t=l[m];t.setProp("x",o+t.dockedAt.x);t.setProp("y",p+t.dockedAt.y)}},finishedLayout:function(d){var e=this,h=d.target;e.callParent(arguments);if(!d.animatePolicy){if(d.isCollapsingOrExpanding===1){h.afterCollapse(false)}else{if(d.isCollapsingOrExpanding===2){h.afterExpand(false)}}}},getAnimatePolicy:function(l){var e=this,h,j;if(l.isCollapsingOrExpanding==1){h=e.lastCollapsedState}else{if(l.isCollapsingOrExpanding==2){h=l.lastCollapsedState}}if(h=="left"||h=="right"){j=e.horizontalCollapsePolicy}else{if(h=="top"||h=="bottom"){j=e.verticalCollapsePolicy}}return j},getDockedItems:function(y,o){var t=this,w=(y==="visual"),s=w?Ext.ComponentQuery.query("[rendered]",t.owner.dockedItems.items):t.owner.dockedItems.items,u=s&&s.length&&y!==false,z,p,q,v,x,A;if(o==null){q=u&&!w?s.slice():s}else{q=[];for(v=0,A=s.length;v<A;++v){p=s[v].dock;x=(p=="top"||p=="left");if(o?x:!x){q.push(s[v])}}u=u&&q.length}if(u){z=(y=y||"render")=="render";Ext.Array.sort(q,function(d,e){var c,a;if(z&&((c=t.owner.dockOrder[d.dock])!==(a=t.owner.dockOrder[e.dock]))){if(!(c+a)){return c-a}}c=t.getItemWeight(d,y);a=t.getItemWeight(e,y);if((c!==undefined)&&(a!==undefined)){return c-a}return 0})}return q||[]},getItemWeight:function(d,e){var h=d.weight||this.owner.defaultDockWeights[d.dock];return h[e]||h},getLayoutItems:function(){var m=this,h,l,n,o,j;if(m.owner.collapsed){j=m.owner.getCollapsedDockedItems()}else{h=m.getDockedItems("visual");l=h.length;j=[];for(o=0;o<l;o++){n=h[o];if(!n.hidden){j.push(n)}}}return j},measureContentWidth:function(d){var c=d.bodyContext;return c.el.getWidth()-c.getBorderInfo().width},measureContentHeight:function(d){var c=d.bodyContext;return c.el.getHeight()-c.getBorderInfo().height},redoLayout:function(h){var d=this,e=d.owner;if(h.isCollapsingOrExpanding==1){if(e.reExpander){e.reExpander.el.show()}e.addClsWithUI(e.collapsedCls);h.redo(true)}else{if(h.isCollapsingOrExpanding==2){e.removeClsWithUI(e.collapsedCls);h.bodyContext.redo()}}},renderChildren:function(){var d=this,e=d.getDockedItems(),h=d.getRenderTarget();d.handleItemBorders();d.renderItems(e,h)},renderItems:function(v,w){var u=this,A=v.length,C=0,B=0,j=0,t=u.getRenderTarget().dom.childNodes,s=t.length,x,z,y,q;for(x=0,z=0;x<s;x++){y=t[x];if(Ext.fly(y).hasCls(Ext.baseCSSPrefix+"resizable-handle")){break}for(z=0;z<A;z++){q=v[z];if(q.rendered&&q.el.dom===y){break}}if(z===A){j++}}for(;C<A;C++,B++){q=v[C];if(C===B&&(q.dock==="right"||q.dock==="bottom")){B+=j}if(q&&!q.rendered){u.renderItem(q,w,B)}else{if(!u.isValidParent(q,w,B)){u.moveItem(q,w,B)}}}},undoLayout:function(h){var d=this,e=d.owner;if(h.isCollapsingOrExpanding==1){if(e.reExpander){e.reExpander.el.hide()}e.removeClsWithUI(e.collapsedCls);h.undo(true)}else{if(h.isCollapsingOrExpanding==2){e.addClsWithUI(e.collapsedCls);h.bodyContext.undo()}}},sizePolicy:{nostretch:{setsWidth:0,setsHeight:0},horz:{shrinkWrap:{setsWidth:1,setsHeight:0,readsWidth:1},stretch:{setsWidth:1,setsHeight:0}},vert:{shrinkWrap:{setsWidth:0,setsHeight:1,readsHeight:1},stretch:{setsWidth:0,setsHeight:1}},stretchV:{setsWidth:0,setsHeight:1},autoStretchH:{readsWidth:1,setsWidth:1,setsHeight:0},autoStretchV:{readsHeight:1,setsWidth:0,setsHeight:1}},getItemSizePolicy:function(p,n){var q=this,m=q.sizePolicy,o=q.owner.shrinkWrapDock,j,l;if(p.stretch===false){return m.nostretch}j=p.dock;l=(j=="left"||j=="right");o=o===true?3:(o||0);if(l){m=m.vert;o=o&1}else{m=m.horz;o=o&2}if(o){if(!n){n=q.owner.getSizeModel()}if(n[l?"height":"width"].shrinkWrap){return m.shrinkWrap}}return m.stretch},configureItem:function(d,c){this.callParent(arguments);d.addCls(Ext.baseCSSPrefix+"docked");d.addClsWithUI(this.getDockCls(d.dock))},getDockCls:function(c){return"docked-"+c},afterRemove:function(d){this.callParent(arguments);if(this.itemCls){d.el.removeCls(this.itemCls+"-"+d.dock)}var c=d.el.dom;if(!d.destroying&&c){c.parentNode.removeChild(c)}this.childrenChanged=true},borderCollapseMap:{},getBorderCollapseTable:function(){var n=this,l=n.borderCollapseMap,j=n.owner,h=j.baseCls,m=j.ui,o;l=l[h]||(l[h]={});o=l[m];if(!o){h+="-"+m+"-outer-border-";l[m]=o=[0,h+"l",h+"b",h+"bl",h+"r",h+"rl",h+"rb",h+"rbl",h+"t",h+"tl",h+"tb",h+"tbl",h+"tr",h+"trl",h+"trb",h+"trbl"]}return o}},0,0,0,0,["layout.dock"],0,[Ext.layout.component,"Dock",Ext.layout.component,"AbstractDock"],0));(Ext.cmd.derive("Ext.util.Memento",Ext.Base,(function(){function m(c,d,a,e){c[e?e+a:a]=d[a]}function n(c,d,a){delete c[a]}function l(c,d,a,e){var p=e?e+a:a,o=c[p];if(o||c.hasOwnProperty(p)){j(d,a,o)}}function j(c,a,d){if(Ext.isDefined(d)){c[a]=d}else{delete c[a]}}function h(o,q,a,e,d){if(q){if(Ext.isArray(e)){var c,p=e.length;for(c=0;c<p;c++){o(q,a,e[c],d)}}else{o(q,a,e,d)}}}return{data:null,target:null,constructor:function(a,c){if(a){this.target=a;if(c){this.capture(c)}}},capture:function(e,a,c){var d=this;h(m,d.data||(d.data={}),a||d.target,e,c)},remove:function(a){h(n,this.data,null,a)},restore:function(d,e,a,c){h(l,this.data,a||this.target,d,c);if(e!==false){this.remove(d)}},restoreAll:function(p,c){var e=this,o=c||this.target,d=e.data,a;for(a in d){if(d.hasOwnProperty(a)){j(o,a,d[a])}}if(p!==false){delete e.data}}}}()),1,0,0,0,0,0,[Ext.util,"Memento"],0));(Ext.cmd.derive("Ext.panel.Panel",Ext.panel.AbstractPanel,{alternateClassName:"Ext.Panel",collapsedCls:"collapsed",animCollapse:Ext.enableFx,minButtonWidth:75,collapsed:false,collapseFirst:true,hideCollapseTool:false,titleCollapse:undefined,floatable:true,collapsible:undefined,closable:false,closeAction:"destroy",placeholderCollapseHideMode:Ext.Element.VISIBILITY,preventHeader:false,header:undefined,headerPosition:"top",frame:false,frameHeader:true,manageHeight:true,constrain:false,constrainHeader:false,maskElement:"el",initComponent:function(){var c=this;c.addEvents("beforeclose","close","beforeexpand","beforecollapse","expand","collapse","titlechange","iconchange","iconclschange","glyphchange","float","unfloat");if(c.collapsible){c.addStateEvents(["expand","collapse"])}if(c.unstyled){c.setUI("plain")}if(c.frame){c.setUI(c.ui+"-framed")}c.bridgeToolbars();c.callParent();c.collapseDirection=c.collapseDirection||c.headerPosition||Ext.Component.DIRECTION_TOP;c.hiddenOnCollapse=new Ext.dom.CompositeElement()},beforeDestroy:function(){var c=this;Ext.destroy(c.placeholder,c.ghostPanel,c.dd);c.callParent()},getFocusEl:function(){return this.el},getHeader:function(){return this.header},setTitle:function(l){var o=this,h=o.title,m=o.header,j=o.reExpander,n=o.placeholder;o.title=l;if(m){if(m.isHeader){m.setTitle(l)}else{m.title=l}}else{if(o.rendered){o.updateHeader()}}if(j){j.setTitle(l)}if(n&&n.setTitle){n.setTitle(l)}o.fireEvent("titlechange",o,l,h)},setIconCls:function(j){var n=this,h=n.iconCls,l=n.header,m=n.placeholder;n.iconCls=j;if(l){if(l.isHeader){l.setIconCls(j)}else{l.iconCls=j}}else{n.updateHeader()}if(m&&m.setIconCls){m.setIconCls(j)}n.fireEvent("iconclschange",n,j,h)},setIcon:function(j){var h=this,n=h.icon,l=h.header,m=h.placeholder;h.icon=j;if(l){if(l.isHeader){l.setIcon(j)}else{l.icon=j}}else{h.updateHeader()}if(m&&m.setIcon){m.setIcon(j)}h.fireEvent("iconchange",h,j,n)},setGlyph:function(n){var h=this,j=h.glyph,l=h.header,m=h.placeholder;h.glyph=n;if(l){if(l.isHeader){l.setGlyph(n)}else{l.glyph=n}}else{h.updateHeader()}if(m&&m.setGlyph){m.setIcon(n)}h.fireEvent("glyphchange",h,n,j)},bridgeToolbars:function(){var j=this,l=[],m=j.minButtonWidth,o,h;function n(d,a,c){if(Ext.isArray(d)){d={xtype:"toolbar",items:d}}else{if(!d.xtype){d.xtype="toolbar"}}d.dock=a;if(a=="left"||a=="right"){d.vertical=true}if(c){d.layout=Ext.applyIf(d.layout||{},{pack:{left:"start",center:"center"}[j.buttonAlign]||"end"})}return d}if(j.tbar){l.push(n(j.tbar,"top"));j.tbar=null}if(j.bbar){l.push(n(j.bbar,"bottom"));j.bbar=null}if(j.buttons){j.fbar=j.buttons;j.buttons=null}if(j.fbar){o=n(j.fbar,"bottom",true);o.ui="footer";if(m){h=o.defaults;o.defaults=function(c){var a=h||{},d=!c.xtype||c.isButton,e;if(!d){e=Ext.ClassManager.getByAlias("widget."+c.xtype);if(e){d=e.prototype.isButton}}if(d&&!("minWidth" in a)){a=Ext.apply({minWidth:m},a)}return a}}l.push(o);j.fbar=null}if(j.lbar){l.push(n(j.lbar,"left"));j.lbar=null}if(j.rbar){l.push(n(j.rbar,"right"));j.rbar=null}if(j.dockedItems){if(!Ext.isArray(j.dockedItems)){j.dockedItems=[j.dockedItems]}j.dockedItems=j.dockedItems.concat(l)}else{j.dockedItems=l}},isPlaceHolderCollapse:function(){return this.collapseMode=="placeholder"},onBoxReady:function(){this.callParent(arguments);if(this.collapsed){this.setHiddenDocked()}},beforeRender:function(){var c=this,d;c.callParent();c.initTools();if(!(c.preventHeader||(c.header===false))){c.updateHeader()}if(c.collapsed){if(c.isPlaceHolderCollapse()){if(!c.hidden){c.setHiddenState(true);c.preventCollapseFire=true;c.placeholderCollapse();delete c.preventCollapseFire;d=c.collapsed;c.collapsed=false}}else{c.beginCollapse();c.addClsWithUI(c.collapsedCls)}}if(d){c.collapsed=d}},initTools:function(){var l=this,j=l.tools,e,h;l.tools=[];for(e=j&&j.length;e;){--e;l.tools[e]=h=j[e];h.toolOwner=l}if(l.collapsible&&!(l.hideCollapseTool||l.header===false||l.preventHeader)){l.collapseDirection=l.collapseDirection||l.headerPosition||"top";l.collapseTool=l.expandTool=Ext.widget({xtype:"tool",handler:l.toggleCollapse,scope:l});l.updateCollapseTool();if(l.collapseFirst){l.tools.unshift(l.collapseTool)}}l.addTools();if(l.closable){l.addClsWithUI("closable");l.addTool({xtype:"tool",type:"close",scope:l,handler:l.close})}if(l.collapseTool&&!l.collapseFirst){l.addTool(l.collapseTool)}},addTools:Ext.emptyFn,updateCollapseTool:function(){var c=this,d=c.collapseTool;if(d){if(c.collapsed&&!c.isPlaceHolderCollapse()){d.setType("expand-"+c.getOppositeDirection(c.collapseDirection))}else{d.setType("collapse-"+c.collapseDirection)}}},close:function(){if(this.fireEvent("beforeclose",this)!==false){this.doClose()}},doClose:function(){this.fireEvent("close",this);this[this.closeAction]()},updateHeader:function(p){var q=this,m=q.header,n=q.title,o=q.tools,j=q.icon||q.iconCls,l=q.headerPosition==="left"||q.headerPosition==="right";if(Ext.isObject(m)||(m!==false&&(p||(n||j)||(o&&o.length)||(q.collapsible&&!q.titleCollapse)))){if(m&&m.isHeader){m.show()}else{m=q.header=Ext.widget(Ext.apply({xtype:"header",title:n,titleAlign:q.titleAlign,orientation:l?"vertical":"horizontal",dock:q.headerPosition||"top",textCls:q.headerTextCls,iconCls:q.iconCls,icon:q.icon,glyph:q.glyph,baseCls:q.baseCls+"-header",tools:o,ui:q.ui,id:q.id+"_header",overCls:q.headerOverCls,indicateDrag:q.draggable,frame:(q.frame||q.alwaysFramed)&&q.frameHeader,ignoreParentFrame:q.frame||q.overlapHeader,ignoreBorderManagement:q.frame||q.ignoreHeaderBorderManagement,headerRole:q.headerRole,ownerCt:q,listeners:q.collapsible&&q.titleCollapse?{click:q.toggleCollapse,scope:q}:null},q.header));q.addDocked(m,0)}}else{if(m){m.hide()}}},setUI:function(c){var d=this;d.callParent(arguments);if(d.header&&d.header.rendered){d.header.setUI(c)}},getDefaultContentTarget:function(){return this.body},getTargetEl:function(){var c=this;return c.body||c.protoBody||c.frameBody||c.el},isVisible:function(d){var c=this;if(c.collapsed&&c.placeholder){return c.placeholder.isVisible(d)}return c.callParent(arguments)},onHide:function(){var c=this,d=c.dd;if(c.floatedFromCollapse){c.slideOutFloatedPanel(true)}if(c.draggable&&d){d.endDrag()}if(c.collapsed&&c.placeholder){c.placeholder.hide()}else{c.callParent(arguments)}},onShow:function(){var c=this;if(c.collapsed&&c.isPlaceHolderCollapse()){c.setHiddenState(true);c.placeholderCollapse()}else{c.callParent(arguments)}},onRemoved:function(c){var d=this;if(d.placeholder&&!c){d.ownerCt.remove(d.placeholder,false)}d.callParent(arguments)},addTool:function(m){if(!Ext.isArray(m)){m=[m]}var n=this,l=n.header,o,j=m.length,h;for(o=0;o<j;o++){h=m[o];h.toolOwner=n;if(l&&l.isHeader){l.addTool(h)}else{n.tools.push(h)}}n.updateHeader()},getOppositeDirection:function(d){var c=Ext.Component;switch(d){case c.DIRECTION_TOP:return c.DIRECTION_BOTTOM;case c.DIRECTION_RIGHT:return c.DIRECTION_LEFT;case c.DIRECTION_BOTTOM:return c.DIRECTION_TOP;case c.DIRECTION_LEFT:return c.DIRECTION_RIGHT}},getWidthAuthority:function(){if(this.collapsed&&this.collapsedHorizontal()){return 1}return this.callParent()},getHeightAuthority:function(){if(this.collapsed&&this.collapsedVertical()){return 1}return this.callParent()},collapsedHorizontal:function(){var c=this.getCollapsed();return c==="left"||c==="right"},collapsedVertical:function(){var c=this.getCollapsed();return c==="top"||c==="bottom"},restoreDimension:function(){var c=this.collapseDirection;return(c==="top"||c==="bottom")?"height":"width"},getCollapsed:function(){var c=this;if(c.collapsed===true){return c.collapseDirection}return c.collapsed},getState:function(){var e=this,d=e.callParent(),h;d=e.addPropertyToState(d,"collapsed");if(e.collapsed){h=e.collapseMemento;h=h&&h.data;if(e.collapsedVertical()){if(d){delete d.height}if(h){d=e.addPropertyToState(d,"height",h.height)}}else{if(d){delete d.width}if(h){d=e.addPropertyToState(d,"width",h.width)}}}return d},findReExpander:function(n){var o=this,m=Ext.Component,p=o.dockedItems.items,l=p.length,c,q;if(o.collapseMode==="mini"){return}switch(n){case m.DIRECTION_TOP:case m.DIRECTION_BOTTOM:for(q=0;q<l;q++){c=p[q];if(!c.hidden){if(c.isHeader&&(!c.dock||c.dock==="top"||c.dock==="bottom")){return c}}}break;case m.DIRECTION_LEFT:case m.DIRECTION_RIGHT:for(q=0;q<l;q++){c=p[q];if(!c.hidden){if(c.isHeader&&(c.dock==="left"||c.dock==="right")){return c}}}break;default:throw ("Panel#findReExpander must be passed a valid collapseDirection")}},getReExpander:function(l){var e=this,j=l||e.collapseDirection,h=e.reExpander||e.findReExpander(j);e.expandDirection=e.getOppositeDirection(j);if(!h){e.reExpander=h=e.createReExpander(j,{dock:j,cls:Ext.baseCSSPrefix+"docked "+e.baseCls+"-"+e.ui+"-collapsed",isCollapsedExpander:true});e.dockedItems.insert(0,h)}return h},createReExpander:function(p,q){var s=this,n=p==="left",t=p==="right",o=n||t,l=s.ownerCt,m=Ext.apply({hideMode:"offsets",title:s.title||"&#160;",titleAlign:s.titleAlign,orientation:o?"vertical":"horizontal",textCls:s.headerTextCls,icon:s.icon,iconCls:s.iconCls,glyph:s.glyph,baseCls:s.self.prototype.baseCls+"-header",ui:s.ui,frame:s.frame&&s.frameHeader,ignoreParentFrame:s.frame||s.overlapHeader,ignoreBorderManagement:s.frame||s.ignoreHeaderBorderManagement,indicateDrag:s.draggable,collapseImmune:true,headerRole:s.headerRole,ownerCt:(l&&s.collapseMode==="placeholder")?l:s,ownerLayout:s.componentLayout,margin:s.margin},q);if(s.collapseMode==="mini"){if(o){m.width=1}else{m.height=1}}if(!s.hideCollapseTool){if(n||(t&&s.isPlaceHolderCollapse())){m.titlePosition=1}m.tools=[{xtype:"tool",type:"expand-"+s.getOppositeDirection(p),uiCls:["top"],handler:s.toggleCollapse,scope:s}]}m=new Ext.panel.Header(m);m.addClsWithUI(s.getHeaderCollapsedClasses(m));return m},getHeaderCollapsedClasses:function(j){var e=this,l=e.collapsedCls,h;h=[l,l+"-"+j.getDockName()];if(e.border&&(!e.frame||(e.frame&&Ext.supports.CSS3BorderRadius))){h.push(l+"-border-"+j.getDockName())}return h},beginCollapse:function(){var o=this,q=o.lastBox,m=o.rendered,j=o.collapseMemento||(o.collapseMemento=new Ext.util.Memento(o)),p=o.getSizeModel(),n=o.header,l;j.capture(["height","minHeight","width","minWidth"]);if(q){j.capture(o.restoreDimension(),q,"last.")}if(o.collapsedVertical()){if(p.width.shrinkWrap){o.width=m?o.getWidth():o.width||o.minWidth||100}delete o.height;o.minHeight=0}else{if(o.collapsedHorizontal()){if(p.height.shrinkWrap){o.height=m?o.getHeight():o.height||o.minHeight||100}delete o.width;o.minWidth=0}}if(o.ownerCt){o.ownerCt.getLayout().beginCollapse(o)}if(!o.isPlaceHolderCollapse()&&n!==false){if(n===(l=o.getReExpander())){n.collapseImmune=true;n.getHierarchyState().collapseImmune=true;n.addClsWithUI(o.getHeaderCollapsedClasses(n));if(n.rendered){n.updateFrame()}}else{if(l.el){l.el.show();l.hidden=false}}}if(o.resizer){o.resizer.disable()}},beginExpand:function(){var m=this,n=m.lastBox,o=m.collapseMemento,j=m.restoreDimension(),l=m.header,h;if(o){o.restore(["minHeight","minWidth",j]);if(n){o.restore(j,true,n,"last.")}}if(m.ownerCt){m.ownerCt.getLayout().beginExpand(m)}if(!m.isPlaceHolderCollapse()&&l!==false){if(l===(h=m.getReExpander())){delete l.collapseImmune;delete l.getHierarchyState().collapseImmune;l.removeClsWithUI(m.getHeaderCollapsedClasses(l));if(l.rendered){l.expanding=true;l.updateFrame();delete l.expanding}}else{h.hidden=true;h.el.hide()}}if(m.resizer){m.resizer.enable()}},collapse:function(m,j){var n=this,l=m||n.collapseDirection,h=n.ownerCt,o=n.ownerLayout;if(n.isCollapsingOrExpanding){return n}if(arguments.length<2){j=n.animCollapse}if(n.collapsed||n.fireEvent("beforecollapse",n,m,j)===false){return n}if(o&&o.onBeforeComponentCollapse){if(o.onBeforeComponentCollapse(n)===false){return n}}if(h&&n.isPlaceHolderCollapse()){return n.placeholderCollapse(m,j)}n.collapsed=l;n.beginCollapse();n.getHierarchyState().collapsed=true;n.fireHierarchyEvent("collapse");return n.doCollapseExpand(1,j)},doCollapseExpand:function(j,h){var m=this,n=m.animCollapse,l=m.ownerLayout;m.animCollapse=h;m.isCollapsingOrExpanding=j;if(h){m.addCls(Ext.baseCSSPrefix+"animating-size")}if(l&&!h){l.onContentChange(m)}else{m.updateLayout({isRoot:true})}m.animCollapse=n;return m},afterCollapse:function(d){var e=this,h=e.ownerLayout;e.isCollapsingOrExpanding=0;e.updateCollapseTool();if(d){e.removeCls(Ext.baseCSSPrefix+"animating-size")}if(h&&d){h.onContentChange(e)}e.setHiddenDocked();e.fireEvent("collapse",e)},setHiddenDocked:function(){var m=this,p=m.hiddenOnCollapse,q=m.getDockedItems(),l=q.length,o=0,n,j;if(m.header!==false){j=m.getReExpander()}p.add(m.body);for(;o<l;o++){n=q[o];if(n&&n!==j&&n.el){p.add(n.el)}}p.setStyle("visibility","hidden")},restoreHiddenDocked:function(){var c=this.hiddenOnCollapse;c.setStyle("visibility","");c.clear()},getPlaceholder:function(o){var p=this,m=o||p.collapseDirection,q=null,n=p.placeholder,j=p.floatable,l=p.titleCollapse;if(!n){if(j||(p.collapsible&&l)){q={click:{fn:(!l&&j)?p.floatCollapsedPanel:p.toggleCollapse,element:"el",scope:p}}}p.placeholder=n=Ext.widget(p.createReExpander(m,{id:p.id+"-placeholder",listeners:q}))}if(!n.placeholderFor){if(!n.isComponent){p.placeholder=n=p.lookupComponent(n)}Ext.applyIf(n,{margins:p.margins,placeholderFor:p});n.addCls([Ext.baseCSSPrefix+"region-collapsed-placeholder",Ext.baseCSSPrefix+"region-collapsed-"+m+"-placeholder",p.collapsedCls])}return n},placeholderCollapse:function(p,m){var s=this,t=s.ownerCt,n=p||s.collapseDirection,l=Ext.baseCSSPrefix+"border-region-slide-in",o=s.getPlaceholder(n),q;s.isCollapsingOrExpanding=1;s.setHiddenState(true);s.collapsed=n;if(o.rendered){if(o.el.dom.parentNode!==s.el.dom.parentNode){s.el.dom.parentNode.insertBefore(o.el.dom,s.el.dom)}o.hidden=false;o.setHiddenState(false);o.el.show();t.updateLayout()}else{t.insert(t.items.indexOf(s),o)}if(s.rendered){s.el.setVisibilityMode(s.placeholderCollapseHideMode);if(m){s.el.addCls(l);o.el.hide();q=s.convertCollapseDir(n);s.el.slideOut(q,{preserveScroll:true,duration:Ext.Number.from(m,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){s.el.removeCls(l);o.el.show().setStyle("display","none").slideIn(q,{easing:"linear",duration:100,listeners:{afteranimate:function(){o.focus();o.setHiddenState(false);s.isCollapsingOrExpanding=0;s.fireEvent("collapse",s)}}})}}})}else{s.el.hide();o.setHiddenState(false);s.isCollapsingOrExpanding=0;s.fireEvent("collapse",s)}}else{s.isCollapsingOrExpanding=0;if(!s.preventCollapseFire){s.fireEvent("collapse",s)}}return s},floatCollapsedPanel:function(){var t=this,n=t.placeholder,o=n.getSize(),s,l=Ext.baseCSSPrefix+"border-region-slide-in",p=t.collapsed,q=t.ownerCt||t,m;if(t.isSliding){return}if(t.el.hasCls(l)){t.slideOutFloatedPanel();return}t.isSliding=true;n.el.hide();n.hidden=true;t.el.show();t.setHiddenState(false);t.collapsed=false;q.updateLayout();s=t.getBox(false,true);n.el.show();n.hidden=false;t.el.hide();t.setHiddenState(true);t.collapsed=p;q.updateLayout();t.slideOutTask=t.slideOutTask||new Ext.util.DelayedTask(t.slideOutFloatedPanel,t);n.el.on("mouseleave",t.onMouseLeaveFloated,t);t.el.on("mouseleave",t.onMouseLeaveFloated,t);n.el.on("mouseenter",t.onMouseEnterFloated,t);t.el.on("mouseenter",t.onMouseEnterFloated,t);t.el.addCls(l);t.floated=true;if(t.collapseTool){t.collapseTool.el.hide()}switch(t.collapsed){case"top":t.setLocalXY(s.x,s.y+o.height-1);break;case"right":t.setLocalXY(s.x-o.width+1,s.y);break;case"bottom":t.setLocalXY(s.x,s.y-o.height+1);break;case"left":t.setLocalXY(s.x+o.width-1,s.y);break}m=t.convertCollapseDir(t.collapsed);t.floatedFromCollapse=t.collapsed;t.collapsed=false;t.setHiddenState(false);t.el.slideIn(m,{preserveScroll:true,duration:Ext.Number.from(t.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){t.isSliding=false;t.fireEvent("float",t)}}})},onMouseLeaveFloated:function(c){this.slideOutTask.delay(500)},onMouseEnterFloated:function(c){this.slideOutTask.cancel()},isLayoutRoot:function(){if(this.floatedFromCollapse){return true}return this.callParent()},slideOutFloatedPanel:function(h){var e=this,j=e.el,l;if(e.isSliding||e.isDestroyed){return}e.isSliding=true;e.floated=false;e.slideOutFloatedPanelBegin();if(typeof e.collapsed=="string"){l=e.convertCollapseDir(e.collapsed)}j.slideOut(l,{preserveScroll:true,duration:Ext.Number.from(e.animCollapse,Ext.fx.Anim.prototype.duration),autoEnd:h===true,listeners:{afteranimate:function(){e.slideOutFloatedPanelEnd();e.el.removeCls(Ext.baseCSSPrefix+"border-region-slide-in")}}})},slideOutFloatedPanelBegin:function(){var d=this,h=d.placeholder.el,e=d.el;d.collapsed=d.floatedFromCollapse;d.setHiddenState(true);d.floatedFromCollapse=null;h.un("mouseleave",d.onMouseLeaveFloated,d);e.un("mouseleave",d.onMouseLeaveFloated,d);h.un("mouseenter",d.onMouseEnterFloated,d);e.un("mouseenter",d.onMouseEnterFloated,d)},slideOutFloatedPanelEnd:function(d){var c=this;if(c.collapseTool){c.collapseTool.el.show()}c.slideOutTask.cancel();c.isSliding=false;if(!d){c.fireEvent("unfloat",c)}},expand:function(e){var h=this,d=h.ownerLayout;if(h.isCollapsingOrExpanding){return h}if(!arguments.length){e=h.animCollapse}if(!h.collapsed&&!h.floatedFromCollapse){return h}if(h.fireEvent("beforeexpand",h,e)===false){return h}if(d&&d.onBeforeComponentExpand){if(d.onBeforeComponentExpand(h)===false){return h}}delete h.getHierarchyState().collapsed;if(h.isPlaceHolderCollapse()){return h.placeholderExpand(e)}h.restoreHiddenDocked();h.beginExpand();h.collapsed=false;return h.doCollapseExpand(2,e)},placeholderExpand:function(q){var o=this,m=o.collapsed,p=Ext.baseCSSPrefix+"border-region-slide-in",n,j,l=o.ownerLayout?o.ownerLayout.centerRegion:null;if(Ext.AbstractComponent.layoutSuspendCount){q=false}if(o.floatedFromCollapse){j=o.getPosition(true);o.slideOutFloatedPanelBegin();o.slideOutFloatedPanelEnd();o.floated=false}if(q){Ext.suspendLayouts();o.placeholder.hide();o.el.show();o.collapsed=false;o.setHiddenState(false);if(l&&!j){l.hidden=true}Ext.resumeLayouts(true);l.hidden=false;o.el.addCls(p);o.isCollapsingOrExpanding=2;if(j){n=o.getXY();o.setLocalXY(j[0],j[1]);o.setXY([n[0],n[1]],{duration:Ext.Number.from(q,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){o.el.removeCls(p);o.isCollapsingOrExpanding=0;o.fireEvent("expand",o)}}})}else{o.el.hide();o.placeholder.el.show();o.placeholder.hidden=false;o.setHiddenState(false);o.el.slideIn(o.convertCollapseDir(m),{preserveScroll:true,duration:Ext.Number.from(q,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){o.el.removeCls(p);o.placeholder.hide();o.updateLayout();o.isCollapsingOrExpanding=0;o.fireEvent("expand",o)}}})}}else{o.floated=o.collapsed=false;o.el.removeCls(p);Ext.suspendLayouts();o.placeholder.hide();o.show();Ext.resumeLayouts(true);o.fireEvent("expand",o)}return o},afterExpand:function(d){var e=this,h=e.ownerLayout;e.isCollapsingOrExpanding=0;e.updateCollapseTool();if(d){e.removeCls(Ext.baseCSSPrefix+"animating-size")}if(h&&d){h.onContentChange(e)}e.fireEvent("expand",e);e.fireHierarchyEvent("expand")},setBorder:function(h,l){if(l){return}var e=this,j=e.header;if(!h){h=0}else{if(h===true){h="1px"}else{h=e.unitizeBox(h)}}if(j){if(j.isHeader){j.setBorder(h)}else{j.border=h}}if(e.rendered&&e.bodyBorder!==false){e.body.setStyle("border-width",h)}e.updateLayout();e.border=h},toggleCollapse:function(){return(this.collapsed||this.floatedFromCollapse)?this.expand():this.collapse()},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.util.KeyMap(Ext.apply({target:this.el},this.keys)))},initDraggable:function(){var c=this;if(c.simpleDrag){c.initSimpleDraggable()}else{c.dd=new Ext.panel.DD(c,Ext.isBoolean(c.draggable)?null:c.draggable)}},initSimpleDraggable:function(){var h=this,d,e;if(!h.header){h.updateHeader(true)}if(h.header){d=Ext.applyIf({el:h.el,delegate:"#"+Ext.escapeId(h.header.id)},h.draggable);if(h.constrain||h.constrainHeader){d.constrain=h.constrain;d.constrainDelegate=h.constrainHeader;d.constrainTo=h.constrainTo||h.container}e=h.dd=new Ext.util.ComponentDragger(h,d);h.relayEvents(e,["dragstart","drag","dragend"]);if(h.maximized){e.disable()}}},ghostTools:function(){var m=[],l=this.header,n=l?l.query("tool[hidden=false]"):[],o,j,h;if(n.length){o=0;j=n.length;for(;o<j;o++){h=n[o];m.push({type:h.type})}}else{m=[{type:"placeholder"}]}return m},ghost:function(m){var q=this,l=q.ghostPanel,s=q.getBox(),n=q.header,p,o,t;if(!l){q.ghostPanel=l=Ext.widget(q.createGhost(m))}else{l.el.show()}l.setHiddenState(false);l.floatParent=q.floatParent;l.toFront();if(n&&!q.preventHeader){p=l.header;p.suspendLayouts();o=p.query("tool");for(t=o.length;t--;){p.remove(o[t])}l.addTool(q.ghostTools());l.setTitle(q.title);p.setTitlePosition(n.titlePosition);if(q.iconCls){l.setIconCls(q.iconCls)}else{if(q.icon){l.setIcon(q.icon)}else{if(q.glyph){l.setGlyph(q.glyph)}}}p.addCls(Ext.baseCSSPrefix+"header-ghost");p.resumeLayouts()}l.setPagePosition(s.x,s.y);l.setSize(s.width,s.height);q.el.hide();return l},createGhost:function(h){var e=this,j=e.header,l=e.frame&&!e.alwaysFramed;return{xtype:"panel",hidden:false,header:j?{titleAlign:j.titleAlign}:null,ui:l?e.ui.replace(/-framed$/,""):e.ui,id:e.id+"-ghost",renderTo:Ext.getBody(),resizable:false,draggable:false,closable:false,floating:{shadow:false},frame:l,alwaysFramed:e.alwaysFramed,overlapHeader:e.overlapHeader,headerPosition:e.headerPosition,baseCls:e.baseCls,getRefOwner:function(){return e.getRefOwner()},cls:e.baseCls+"-ghost "+(h||"")}},unghost:function(e,h){var j=this,l=j.ghostPanel;if(!l){return}if(e!==false){j.el.show();if(h!==false){j.setPagePosition(l.getXY());if(j.hideMode=="offsets"){delete j.el.hideModeStyles}}}l.el.hide();l.setHiddenState(true)},beginDrag:function(){if(this.floatingDescendants){this.floatingDescendants.hide()}},endDrag:function(){if(this.floatingDescendants){this.floatingDescendants.show()}},initResizable:function(){this.callParent(arguments);if(this.collapsed){this.resizer.disable()}},convertCollapseDir:function(c){return c.substr(0,1)},getAnimationProps:function(){var d=this,h=d.animCollapse,e;e=d.callParent();if(typeof h==="number"){e.duration=h}return e}},0,["panel"],["component","box","container","panel"],{component:true,box:true,container:true,panel:true},["widget.panel"],0,[Ext.panel,"Panel",Ext,"Panel"],function(){this.prototype.animCollapse=Ext.enableFx}));(Ext.cmd.derive("Ext.tip.Tip",Ext.panel.Panel,{alternateClassName:"Ext.Tip",minWidth:40,maxWidth:500,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:true,autoRender:true,hidden:true,baseCls:Ext.baseCSSPrefix+"tip",floating:{shadow:true,shim:true},focusOnToFront:false,closeAction:"hide",alwaysFramed:true,frameHeader:false,initComponent:function(){var c=this;c.floating=Ext.apply({},{shadow:c.shadow,constrain:c.constrainPosition},c.self.prototype.floating);c.callParent(arguments);c.constrain=c.constrain||c.constrainPosition},showAt:function(c){var d=this;this.callParent(arguments);if(d.isVisible()){d.setPagePosition(c[0],c[1]);if(d.constrainPosition||d.constrain){d.doConstrain()}d.toFront(true)}},initDraggable:function(){var c=this;c.draggable={el:c.getDragEl(),delegate:c.header.el,constrain:c,constrainTo:c.el.dom.parentNode};Ext.Component.prototype.initDraggable.call(c)},ghost:undefined,unghost:undefined},0,["tip"],["component","box","container","panel","tip"],{component:true,box:true,container:true,panel:true,tip:true},["widget.tip"],0,[Ext.tip,"Tip",Ext,"Tip"],0));(Ext.cmd.derive("Ext.tip.ToolTip",Ext.tip.Tip,{alternateClassName:"Ext.ToolTip",autoHide:true,showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,quickShowInterval:250,ariaRole:"tooltip",initComponent:function(){var c=this;c.callParent(arguments);c.lastActive=new Date();c.setTarget(c.target);c.origAnchor=c.anchor},onRender:function(d,e){var h=this;h.callParent(arguments);h.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+h.getAnchorPosition();h.anchorEl=h.el.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"tip-anchor "+h.anchorCls})},setTarget:function(j){var e=this,h=Ext.get(j),l;if(e.target){l=Ext.get(e.target);e.mun(l,"mouseover",e.onTargetOver,e);e.mun(l,"mouseout",e.onTargetOut,e);e.mun(l,"mousemove",e.onMouseMove,e)}e.target=h;if(h){e.mon(h,{freezeEvent:true,mouseover:e.onTargetOver,mouseout:e.onTargetOut,mousemove:e.onMouseMove,scope:e})}if(e.anchor){e.anchorTarget=e.target}},onMouseMove:function(j){var e=this,h=e.delegate?j.getTarget(e.delegate):e.triggerElement=true,l;if(h){e.targetXY=j.getXY();if(h===e.triggerElement){if(!e.hidden&&e.trackMouse){l=e.getTargetXY();if(e.constrainPosition){l=e.el.adjustForConstraints(l,e.el.parent())}e.setPagePosition(l)}}else{e.hide();e.lastActive=new Date(0);e.onTargetOver(j)}}else{if((!e.closable&&e.isVisible())&&e.autoHide!==false){e.hide()}}},getTargetXY:function(){var u=this,z,A,p,C,v,s,y,q,t,B,w,x;if(u.delegate){u.anchorTarget=u.triggerElement}if(u.anchor){u.targetCounter++;A=u.getOffsets();p=(u.anchorToTarget&&!u.trackMouse)?u.getAlignToXY(u.anchorTarget,u.getAnchorAlign()):u.targetXY;C=Ext.Element.getViewWidth()-5;v=Ext.Element.getViewHeight()-5;s=document.documentElement;y=document.body;q=(s.scrollLeft||y.scrollLeft||0)+5;t=(s.scrollTop||y.scrollTop||0)+5;B=[p[0]+A[0],p[1]+A[1]];w=u.getSize();x=u.constrainPosition;u.anchorEl.removeCls(u.anchorCls);if(u.targetCounter<2&&x){if(B[0]<q){if(u.anchorToTarget){u.defaultAlign="l-r";if(u.mouseOffset){u.mouseOffset[0]*=-1}}u.anchor="left";return u.getTargetXY()}if(B[0]+w.width>C){if(u.anchorToTarget){u.defaultAlign="r-l";if(u.mouseOffset){u.mouseOffset[0]*=-1}}u.anchor="right";return u.getTargetXY()}if(B[1]<t){if(u.anchorToTarget){u.defaultAlign="t-b";if(u.mouseOffset){u.mouseOffset[1]*=-1}}u.anchor="top";return u.getTargetXY()}if(B[1]+w.height>v){if(u.anchorToTarget){u.defaultAlign="b-t";if(u.mouseOffset){u.mouseOffset[1]*=-1}}u.anchor="bottom";return u.getTargetXY()}}u.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+u.getAnchorPosition();u.anchorEl.addCls(u.anchorCls);u.targetCounter=0;return B}else{z=u.getMouseOffset();return(u.targetXY)?[u.targetXY[0]+z[0],u.targetXY[1]+z[1]]:z}},getMouseOffset:function(){var d=this,c=d.anchor?[0,0]:[15,18];if(d.mouseOffset){c[0]+=d.mouseOffset[0];c[1]+=d.mouseOffset[1]}return c},getAnchorPosition:function(){var c=this,d;if(c.anchor){c.tipAnchor=c.anchor.charAt(0)}else{d=c.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);c.tipAnchor=d[1].charAt(0)}switch(c.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var l=this,j,e,h=l.getAnchorPosition().charAt(0);if(l.anchorToTarget&&!l.trackMouse){switch(h){case"t":e=[0,9];break;case"b":e=[0,-13];break;case"r":e=[-13,0];break;default:e=[9,0];break}}else{switch(h){case"t":e=[-15-l.anchorOffset,30];break;case"b":e=[-19-l.anchorOffset,-13-l.el.dom.offsetHeight];break;case"r":e=[-15-l.el.dom.offsetWidth,-13-l.anchorOffset];break;default:e=[25,-13-l.anchorOffset];break}}j=l.getMouseOffset();e[0]+=j[0];e[1]+=j[1];return e},onTargetOver:function(j){var l=this,e=l.delegate,h;if(l.disabled||j.within(l.target.dom,true)){return}h=e?j.getTarget(e):true;if(h){l.triggerElement=h;l.triggerEvent=j;l.clearTimer("hide");l.targetXY=j.getXY();l.delayShow()}},delayShow:function(h){var e=this,d=e.el&&(h===false||!e.trackMouse)&&e.getTargetXY();if(e.hidden&&!e.showTimer){if(Ext.Date.getElapsed(e.lastActive)<e.quickShowInterval){e.show()}else{e.showTimer=Ext.defer(e.showFromDelay,e.showDelay,e,[d])}}else{if(!e.hidden&&e.autoHide!==false){e.show(d)}}},showFromDelay:function(c){this.fromDelayShow=true;this.show(c);delete this.fromDelayShow},onShowVeto:function(){this.callParent();delete this.triggerElement;this.clearTimer("show")},onTargetOut:function(j){var e=this,h=e.triggerElement,l=h===true?e.target:h;if(e.disabled||!h||j.within(l,true)){return}if(e.showTimer){e.clearTimer("show");e.triggerElement=null}if(e.autoHide!==false){e.delayHide()}},delayHide:function(){var c=this;if(!c.hidden&&!c.hideTimer){c.hideTimer=Ext.defer(c.hide,c.hideDelay,c)}},hide:function(){var c=this;c.clearTimer("dismiss");c.lastActive=new Date();if(c.anchorEl){c.anchorEl.hide()}c.callParent(arguments);delete c.triggerElement},show:function(c){var d=this;this.callParent();if(this.hidden===false){d.setPagePosition(-10000,-10000);if(d.anchor){d.anchor=d.origAnchor}if(!d.calledFromShowAt){d.showAt(c||d.getTargetXY())}if(d.anchor){d.syncAnchor();d.anchorEl.show()}else{d.anchorEl.hide()}}},showAt:function(c){var d=this;d.lastActive=new Date();d.clearTimers();d.calledFromShowAt=true;if(!d.isVisible()){this.callParent(arguments)}if(d.isVisible()){d.setPagePosition(c[0],c[1]);if(d.constrainPosition||d.constrain){d.doConstrain()}d.toFront(true);d.el.sync(true);if(d.dismissDelay&&d.autoHide!==false){d.dismissTimer=Ext.defer(d.hide,d.dismissDelay,d)}if(d.anchor){d.syncAnchor();if(!d.anchorEl.isVisible()){d.anchorEl.show()}}else{d.anchorEl.hide()}}delete d.calledFromShowAt},syncAnchor:function(){var l=this,h,e,j;switch(l.tipAnchor.charAt(0)){case"t":h="b";e="tl";j=[20+l.anchorOffset,1];break;case"r":h="l";e="tr";j=[-1,12+l.anchorOffset];break;case"b":h="t";e="bl";j=[20+l.anchorOffset,-1];break;default:h="r";e="tl";j=[1,12+l.anchorOffset];break}l.anchorEl.alignTo(l.el,h+"-"+e,j);l.anchorEl.setStyle("z-index",parseInt(l.el.getZIndex(),10)||0+1).setVisibilityMode(Ext.Element.DISPLAY)},setPagePosition:function(e,h){var d=this;d.callParent(arguments);if(d.anchor){d.syncAnchor()}},_timerNames:{},clearTimer:function(j){var h=this,m=h._timerNames,n=m[j]||(m[j]=j+"Timer"),l=h[n];if(l){clearTimeout(l);h[n]=null}},clearTimers:function(){var c=this;c.clearTimer("show");c.clearTimer("dismiss");c.clearTimer("hide")},onShow:function(){var c=this;c.callParent();c.mon(Ext.getDoc(),"mousedown",c.onDocMouseDown,c)},onHide:function(){var c=this;c.callParent();c.mun(Ext.getDoc(),"mousedown",c.onDocMouseDown,c)},onDocMouseDown:function(c){var d=this;if(!d.closable&&!c.within(d.el.dom)){d.disable();Ext.defer(d.doEnable,100,d)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.callParent();this.clearTimers();this.hide()},beforeDestroy:function(){var c=this;c.clearTimers();Ext.destroy(c.anchorEl);delete c.anchorEl;delete c.target;delete c.anchorTarget;delete c.triggerElement;c.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);this.callParent()}},0,["tooltip"],["component","box","container","panel","tip","tooltip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true},["widget.tooltip"],0,[Ext.tip,"ToolTip",Ext,"ToolTip"],0));(Ext.cmd.derive("Ext.tip.QuickTip",Ext.tip.ToolTip,{alternateClassName:"Ext.QuickTip",interceptTitles:false,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor",showDelay:"qshowDelay"},shrinkWrapDock:true,initComponent:function(){var c=this;c.target=c.target||Ext.getDoc();c.targets=c.targets||{};c.callParent()},text:null,register:function(q){var m=Ext.isArray(q)?q:arguments,p=0,l=m.length,n,j,o;for(;p<l;p++){q=m[p];n=q.target;if(n){if(Ext.isArray(n)){for(j=0,o=n.length;j<o;j++){this.targets[Ext.id(n[j])]=q}}else{this.targets[Ext.id(n)]=q}}}},unregister:function(c){delete this.targets[Ext.id(c)]},cancelShow:function(e){var d=this,h=d.activeTarget;e=Ext.get(e).dom;if(d.isVisible()){if(h&&h.el==e){d.hide()}}else{if(h&&h.el==e){d.clearTimer("show")}}},getTipCfg:function(j){var l=j.getTarget(),m=l.title,e=this.tagConfig,h=e.attr||(e.attr=e.namespace+e.attribute);if(this.interceptTitles&&m&&Ext.isString(m)){l.setAttribute(h,m);l.removeAttribute("title");return{text:m}}else{l=j.getTarget("["+e.namespace+e.attribute+"]");if(l){return{target:l,text:l.getAttribute(e.namespace+e.attribute)}}}},onTargetOver:function(y){var w=this,x=y.getTarget(w.delegate),E,B,D,z,v,C,t,A,e,u,s;if(w.disabled){return}w.targetXY=y.getXY();if(!x||x.nodeType!==1||x==document.documentElement||x==document.body){return}if(w.activeTarget&&((x==w.activeTarget.el)||Ext.fly(w.activeTarget.el).contains(x))){if(w.targetTextEmpty()){w.onShowVeto();delete w.activeTarget}else{w.clearTimer("hide");w.show()}return}if(x){A=w.targets;for(s in A){if(A.hasOwnProperty(s)){u=A[s];e=Ext.fly(u.target);if(e&&(e.dom===x||e.contains(x))){D=e.dom;break}}}if(D){w.activeTarget=w.targets[D.id];w.activeTarget.el=x;w.anchor=w.activeTarget.anchor;if(w.anchor){w.anchorTarget=x}E=parseInt(w.activeTarget.showDelay,10);if(E){B=w.showDelay;w.showDelay=E}w.delayShow();if(E){w.showDelay=B}return}}D=Ext.fly(x,"_quicktip-target");z=w.tagConfig;v=z.namespace;C=w.getTipCfg(y);if(C){if(C.target){x=C.target;D=Ext.fly(x,"_quicktip-target")}t=D.getAttribute(v+z.hide);w.activeTarget={el:x,text:C.text,width:+D.getAttribute(v+z.width)||null,autoHide:t!="user"&&t!=="false",title:D.getAttribute(v+z.title),cls:D.getAttribute(v+z.cls),align:D.getAttribute(v+z.align),showDelay:parseInt(D.getAttribute(v+z.showDelay),10)};w.anchor=D.getAttribute(v+z.anchor);if(w.anchor){w.anchorTarget=x}E=parseInt(w.activeTarget.showDelay,10);if(E){B=w.showDelay;w.showDelay=E}w.delayShow();if(E){w.showDelay=B}}},onTargetOut:function(j){var m=this,l=m.activeTarget,h,e;if(l&&j.within(m.activeTarget.el)&&!m.getTipCfg(j)){return}m.clearTimer("show");delete m.activeTarget;if(m.autoHide!==false){h=l&&parseInt(l.hideDelay,10);if(h){e=m.hideDelay;m.hideDelay=h}m.delayHide();if(h){m.hideDelay=e}}},targetTextEmpty:function(){var n=this,m=n.activeTarget,j=n.tagConfig,h,l;if(m){h=m.el;if(h){l=h.getAttribute(j.namespace+j.attribute);if(!l&&!n.targets[Ext.id(m.target)]){return true}}}return false},show:function(){var c=this,d=c.fromDelayShow;if(d&&c.targetTextEmpty()){c.onShowVeto();delete c.activeTarget;return}c.callParent(arguments)},showAt:function(m){var o=this,n=o.activeTarget,l=o.header,h,j;if(n){if(!o.rendered){o.render(Ext.getBody());o.activeTarget=n}o.suspendLayouts();if(n.title){o.setTitle(n.title);l.show()}else{if(l){l.hide()}}o.update(n.text);o.autoHide=n.autoHide;h=n.dismissDelay;o.dismissDelay=Ext.isNumber(h)?h:o.dismissDelay;if(n.mouseOffset){m[0]+=n.mouseOffset[0];m[1]+=n.mouseOffset[1]}j=o.lastCls;if(j){o.removeCls(j);delete o.lastCls}j=n.cls;if(j){o.addCls(j);o.lastCls=j}o.setWidth(n.width);if(o.anchor){o.constrainPosition=false}else{if(n.align){m=o.getAlignToXY(n.el,n.align);o.constrainPosition=false}else{o.constrainPosition=true}}o.resumeLayouts(true)}o.callParent([m])},hide:function(){delete this.activeTarget;this.callParent()}},0,["quicktip"],["component","box","container","panel","tip","tooltip","quicktip"],{component:true,box:true,container:true,panel:true,tip:true,tooltip:true,quicktip:true},["widget.quicktip"],0,[Ext.tip,"QuickTip",Ext,"QuickTip"],0));(Ext.cmd.derive("Ext.tip.QuickTipManager",Ext.Base,{singleton:true,alternateClassName:"Ext.QuickTips",disabled:false,init:function(m,h){var n=this;if(!n.tip){if(!Ext.isReady){Ext.onReady(function(){Ext.tip.QuickTipManager.init(m,h)});return false}var j=Ext.apply({disabled:n.disabled,id:"ext-quicktips-tip"},h),o=j.className,l=j.xtype;if(o){delete j.className}else{if(l){o="widget."+l;delete j.xtype}}if(m!==false){j.renderTo=document.body}n.tip=Ext.create(o||"Ext.tip.QuickTip",j);Ext.quickTipsActive=true}},destroy:function(){Ext.destroy(this.tip);this.tip=undefined},ddDisable:function(){var d=this,c=d.tip;if(c&&!d.disabled){c.disable()}},ddEnable:function(){var d=this,c=d.tip;if(c&&!d.disabled){c.enable()}},enable:function(){var d=this,c=d.tip;if(c){c.enable()}d.disabled=false},disable:function(){var d=this,c=d.tip;if(c){c.disable()}d.disabled=true},isEnabled:function(){var c=this.tip;return c!==undefined&&!c.disabled},getQuickTip:function(){return this.tip},register:function(){var c=this.tip;c.register.apply(c,arguments)},unregister:function(){var c=this.tip;c.unregister.apply(c,arguments)},tips:function(){var c=this.tip;c.register.apply(c,arguments)}},0,0,0,0,0,0,[Ext.tip,"QuickTipManager",Ext,"QuickTips"],0));(Ext.cmd.derive("Ext.app.Application",Ext.app.Controller,{scope:undefined,enableQuickTips:true,appFolder:"app",appProperty:"app",namespaces:[],autoCreateViewport:false,paths:null,onClassExtended:function(p,w,q){var x=Ext.app.Controller,v=p.prototype,n=[],u,o,y,t,s;y=w.name||p.superclass.name;s=w.appFolder||p.superclass.appFolder;if(y){w.$namespace=y;Ext.app.addNamespaces(y)}if(w.namespaces){Ext.app.addNamespaces(w.namespaces)}if(!w["paths processed"]){if(y&&s){Ext.Loader.setPath(y,s)}o=w.paths;if(o){for(t in o){if(o.hasOwnProperty(t)){Ext.Loader.setPath(t,o[t])}}}}else{delete w["paths processed"]}if(w.autoCreateViewport){x.processDependencies(v,n,y,"view",["Viewport"])}if(n.length){u=q.onBeforeCreated;q.onBeforeCreated=function(d,a){var c=Ext.Array.clone(arguments);Ext.require(n,function(){return u.apply(this,c)})}}},constructor:function(d){var c=this;c.callParent(arguments);c.doInit(c);c.initNamespace();c.initControllers();c.onBeforeLaunch();c.finishInitControllers()},initNamespace:function(){var h=this,e=h.appProperty,d;d=Ext.namespace(h.name);if(d){d.getApplication=function(){return h};if(e){if(!d[e]){d[e]=h}}}},initControllers:function(){var l=this,j=Ext.Array.from(l.controllers);l.controllers=new Ext.util.MixedCollection();for(var h=0,e=j.length;h<e;h++){l.getController(j[h])}},finishInitControllers:function(){var l=this,j,e,h;j=l.controllers.getRange();for(e=0,h=j.length;e<h;e++){j[e].finishInit(l)}},launch:Ext.emptyFn,onBeforeLaunch:function(){var c=this,l,j,m,h;if(c.enableQuickTips){c.initQuickTips()}if(c.autoCreateViewport){c.initViewport()}c.launch.call(c.scope||c);c.launched=true;c.fireEvent("launch",c);l=c.controllers.items;m=l.length;for(j=0;j<m;j++){h=l[j];h.onLaunch(c)}},getModuleClassName:function(d,c){return Ext.app.Controller.getFullName(d,c,this.name).absoluteName},initQuickTips:function(){Ext.tip.QuickTipManager.init()},initViewport:function(){var c=this.getView("Viewport");if(c){c.create()}},getController:function(h){var m=this,l=m.controllers,n,j;j=l.get(h);if(!j){n=m.getModuleClassName(h,"controller");j=Ext.create(n,{application:m,id:h});l.add(j);if(m._initialized){j.doInit(m)}}return j},getApplication:function(){return this}},1,0,0,0,0,0,[Ext.app,"Application"],0));(Ext.cmd.derive("Ext.app.domain.Controller",Ext.app.EventDomain,{singleton:true,type:"controller",idProperty:"id",constructor:function(){var c=this;c.callParent();c.monitor(Ext.app.Controller)}},1,0,0,0,0,0,[Ext.app.domain,"Controller"],0));(Ext.cmd.derive("Ext.direct.Provider",Ext.Base,{isProvider:true,constructor:function(d){var c=this;Ext.apply(c,d);Ext.applyIf(c,{id:Ext.id(null,"provider-")});c.addEvents("connect","disconnect","data","exception");c.mixins.observable.constructor.call(c,d)},isConnected:function(){return false},connect:Ext.emptyFn,disconnect:Ext.emptyFn},1,0,0,0,["direct.provider"],[["observable",Ext.util.Observable]],[Ext.direct,"Provider"],0));(Ext.cmd.derive("Ext.app.domain.Direct",Ext.app.EventDomain,{singleton:true,type:"direct",idProperty:"id",constructor:function(){var c=this;c.callParent();c.monitor(Ext.direct.Provider)}},1,0,0,0,0,0,[Ext.app.domain,"Direct"],0));(Ext.cmd.derive("Ext.button.Split",Ext.button.Button,{alternateClassName:"Ext.SplitButton",arrowCls:"split",split:true,initComponent:function(){this.callParent();this.addEvents("arrowclick")},setArrowHandler:function(c,d){this.arrowHandler=c;this.scope=d},onClick:function(c){var d=this;d.doPreventDefault(c);if(!d.disabled){if(d.overMenuTrigger){c.preventDefault();d.maybeShowMenu();d.fireEvent("arrowclick",d,c);if(d.arrowHandler){d.arrowHandler.call(d.scope||d,d,c)}}else{d.doToggle();d.fireHandler(c)}}}},0,["splitbutton"],["component","box","button","splitbutton"],{component:true,box:true,button:true,splitbutton:true},["widget.splitbutton"],0,[Ext.button,"Split",Ext,"SplitButton"],0));(Ext.cmd.derive("Ext.button.Cycle",Ext.button.Split,{alternateClassName:"Ext.CycleButton",getButtonText:function(d){var e=this,h="";if(d&&e.showText===true){if(e.prependText){h+=e.prependText}h+=d.text;return h}return e.text},setActiveItem:function(h,e){var d=this;if(!Ext.isObject(h)){h=d.menu.getComponent(h)}if(h){if(!d.rendered){d.text=d.getButtonText(h);d.iconCls=h.iconCls;d.glyph=h.glyph}else{d.setText(d.getButtonText(h));d.setIconCls(h.iconCls);d.setGlyph(h.glyph)}d.activeItem=h;if(!h.checked){h.setChecked(true,false)}if(d.forceIcon){d.setIconCls(d.forceIcon)}if(d.forceGlyph){d.setGlyph(d.forceGlyph)}if(!e){d.fireEvent("change",d,h)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){var l=this,m=0,h,o,j,n;l.addEvents("change");if(l.changeHandler){l.on("change",l.changeHandler,l.scope||l);delete l.changeHandler}h=(l.menu.items||[]).concat(l.items||[]);l.menu=Ext.applyIf({cls:Ext.baseCSSPrefix+"cycle-menu",items:[]},l.menu);j=h.length;for(o=0;o<j;o++){n=h[o];n=Ext.applyIf({group:l.id,itemIndex:o,checkHandler:l.checkHandler,scope:l,checked:n.checked||false},n);l.menu.items.push(n);if(n.checked){m=o}}l.itemCount=l.menu.items.length;l.callParent(arguments);l.on("click",l.toggleSelected,l);l.setActiveItem(m,l);if(l.width&&l.showText){l.addCls(Ext.baseCSSPrefix+"cycle-fixed-width")}},checkHandler:function(d,c){if(c){this.setActiveItem(d)}},toggleSelected:function(){var h=this,e=h.menu,d;d=h.activeItem.next(":not([disabled])")||e.items.getAt(0);d.setChecked(true)}},0,["cycle"],["component","box","button","splitbutton","cycle"],{component:true,box:true,button:true,splitbutton:true,cycle:true},["widget.cycle"],0,[Ext.button,"Cycle",Ext,"CycleButton"],0));(Ext.cmd.derive("Ext.chart.Callout",Ext.Base,{constructor:function(c){if(c.callouts){c.callouts.styles=Ext.applyIf(c.callouts.styles||{},{color:"#000",font:"11px Helvetica, sans-serif"});this.callouts=Ext.apply(this.callouts||{},c.callouts);this.calloutsArray=[]}},renderCallouts:function(){if(!this.callouts){return}var j=this,C=j.items,M=j.chart.animate,p=j.callouts,F=p.styles,H=j.calloutsArray,K=j.chart.getChartStore(),x=K.getCount(),I=C.length/x,D=[],y,J,z,B,w,G,E,A;for(y=0,J=0;y<x;y++){for(z=0;z<I;z++){w=C[J];G=H[J];E=K.getAt(y);A=(!p.filter||p.filter(E));if(!A&&!G){J++;continue}if(!G){H[J]=G=j.onCreateCallout(E,w,y,A,z,J)}for(B in G){if(G[B]&&G[B].setAttributes){G[B].setAttributes(F,true)}}if(!A){for(B in G){if(G[B]){if(G[B].setAttributes){G[B].setAttributes({hidden:true},true)}else{if(G[B].setVisible){G[B].setVisible(false)}}}}}if(p&&p.renderer){p.renderer(G,E)}j.onPlaceCallout(G,E,w,y,A,M,z,J,D);D.push(G);J++}}this.hideCallouts(J)},onCreateCallout:function(x,q,y,v){var u=this,t=u.calloutsGroup,z=u.callouts,p=(z?z.styles:undefined),A=(p?p.width:0),s=(p?p.height:0),w=u.chart,B=w.surface,C={lines:false};C.lines=B.add(Ext.apply({},{type:"path",path:"M0,0",stroke:u.getLegendColor()||"#555"},p));if(z.items){C.panel=new Ext.Panel({style:"position: absolute;",width:A,height:s,items:z.items,renderTo:w.el})}return C},hideCallouts:function(h){var m=this.calloutsArray,j=m.length,l,n;while(j-->h){l=m[j];for(n in l){if(l[n]){l[n].hide(true)}}}}},1,0,0,0,0,0,[Ext.chart,"Callout"],0));(Ext.cmd.derive("Ext.draw.CompositeSprite",Ext.util.MixedCollection,{autoDestroy:false,isCompositeSprite:true,constructor:function(d){var c=this;d=d||{};Ext.apply(c,d);c.addEvents("mousedown","mouseup","mouseover","mouseout","click");c.id=Ext.id(null,"ext-sprite-group-");c.callParent()},onClick:function(c){this.fireEvent("click",c)},onMouseUp:function(c){this.fireEvent("mouseup",c)},onMouseDown:function(c){this.fireEvent("mousedown",c)},onMouseOver:function(c){this.fireEvent("mouseover",c)},onMouseOut:function(c){this.fireEvent("mouseout",c)},attachEvents:function(c){var d=this;c.on({scope:d,mousedown:d.onMouseDown,mouseup:d.onMouseUp,mouseover:d.onMouseOver,mouseout:d.onMouseOut,click:d.onClick})},add:function(d,h){var e=this.callParent(arguments);this.attachEvents(e);return e},insert:function(e,d,h){return this.callParent(arguments)},remove:function(c){var d=this;c.un({scope:d,mousedown:d.onMouseDown,mouseup:d.onMouseUp,mouseover:d.onMouseOver,mouseout:d.onMouseOut,click:d.onClick});return d.callParent(arguments)},getBBox:function(){var w=0,o,t,s=this.items,v=this.length,u=Infinity,y=u,p=-u,z=u,q=-u,x,A;for(;w<v;w++){o=s[w];if(o.el&&!o.bboxExcluded){t=o.getBBox();y=Math.min(y,t.x);z=Math.min(z,t.y);p=Math.max(p,t.height+t.y);q=Math.max(q,t.width+t.x)}}return{x:y,y:z,height:p-z,width:q-y}},setAttributes:function(n,l){var m=0,h=this.items,j=this.length;for(;m<j;m++){h[m].setAttributes(n,l)}return this},hide:function(j){var l=0,e=this.items,h=this.length;for(;l<h;l++){e[l].hide(j)}return this},show:function(j){var l=0,e=this.items,h=this.length;for(;l<h;l++){e[l].show(j)}return this},redraw:function(){var l=this,m=0,n=l.items,h=l.getSurface(),j=l.length;if(h){for(;m<j;m++){h.renderItem(n[m])}}return l},setStyle:function(l){var o=0,h=this.items,j=this.length,m,n;for(;o<j;o++){m=h[o];n=m.el;if(n){n.setStyle(l)}}},addCls:function(l){var m=0,n=this.items,h=this.getSurface(),j=this.length;if(h){for(;m<j;m++){h.addCls(n[m],l)}}},removeCls:function(l){var m=0,n=this.items,h=this.getSurface(),j=this.length;if(h){for(;m<j;m++){h.removeCls(n[m],l)}}},getSurface:function(){var c=this.first();if(c){return c.surface}return null},destroy:function(){var j=this,h=j.getSurface(),l=j.autoDestroy,e;if(h){while(j.getCount()>0){e=j.first();j.remove(e);h.remove(e,l)}}j.clearListeners()}},1,0,0,0,0,[["animate",Ext.util.Animate]],[Ext.draw,"CompositeSprite"],0));(Ext.cmd.derive("Ext.draw.Surface",Ext.Base,{separatorRe:/[, ]+/,enginePriority:["Svg","Vml"],statics:{create:function(e,j){j=j||this.prototype.enginePriority;var l=0,h=j.length;for(;l<h;l++){if(Ext.supports[j[l]]){return Ext.create("Ext.draw.engine."+j[l],e)}}return false},save:function(j,h){h=h||{};var l={"image/png":"Image","image/jpeg":"Image","image/svg+xml":"Svg"},m=l[h.type]||"Svg",n=Ext.draw.engine[m+"Exporter"];return n.generate(j,h)}},availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:false,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"none","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},container:undefined,height:352,width:512,x:0,y:0,orderSpritesByZIndex:true,constructor:function(d){var c=this;d=d||{};Ext.apply(c,d);c.domRef=Ext.getDoc().dom;c.customAttributes={};c.addEvents("mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click","dblclick");c.mixins.observable.constructor.call(c);c.getId();c.initGradients();c.initItems();if(c.renderTo){c.render(c.renderTo);delete c.renderTo}c.initBackground(d.background)},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,setViewBox:function(e,j,l,h){if(isFinite(e)&&isFinite(j)&&isFinite(l)&&isFinite(h)){this.viewBox={x:e,y:j,width:l,height:h};this.applyViewBox()}},addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,initGradients:function(){if(this.hasOwnProperty("gradients")){var h=this.gradients,e=this.addGradient,j,l;if(h){for(j=0,l=h.length;j<l;j++){if(e.call(this,h[j],j,l)===false){break}}}}},initItems:function(){var c=this.items;this.items=new Ext.draw.CompositeSprite();this.items.autoDestroy=true;this.groups=new Ext.draw.CompositeSprite();if(c){this.add(c)}},initBackground:function(h){var n=this,o=n.width,j=n.height,m,l;if(Ext.isString(h)){h={fill:h}}if(h){if(h.gradient){l=h.gradient;m=l.id;n.addGradient(l);n.background=n.add({type:"rect",isBackground:true,x:0,y:0,width:o,height:j,fill:"url(#"+m+")",zIndex:-1})}else{if(h.fill){n.background=n.add({type:"rect",isBackground:true,x:0,y:0,width:o,height:j,fill:h.fill,zIndex:-1})}else{if(h.image){n.background=n.add({type:"image",isBackground:true,x:0,y:0,width:o,height:j,src:h.image,zIndex:-1})}}}n.background.bboxExcluded=true}},setSize:function(d,c){this.applyViewBox()},scrubAttrs:function(m){var n,h={},j={},l=m.attr;for(n in l){if(this.translateAttrs.hasOwnProperty(n)){h[this.translateAttrs[n]]=l[n];j[this.translateAttrs[n]]=true}else{if(this.availableAttrs.hasOwnProperty(n)&&!j[n]){h[n]=l[n]}}}return h},onClick:function(c){this.processEvent("click",c)},onDblClick:function(c){this.processEvent("dblclick",c)},onMouseUp:function(c){this.processEvent("mouseup",c)},onMouseDown:function(c){this.processEvent("mousedown",c)},onMouseOver:function(c){this.processEvent("mouseover",c)},onMouseOut:function(c){this.processEvent("mouseout",c)},onMouseMove:function(c){this.fireEvent("mousemove",c)},onMouseEnter:Ext.emptyFn,onMouseLeave:Ext.emptyFn,addGradient:Ext.emptyFn,add:function(){var l=Array.prototype.slice.call(arguments),q,n=l.length>1,m,s,t,o,p;if(n||Ext.isArray(l[0])){m=n?l:l[0];s=[];for(t=0,o=m.length;t<o;t++){p=m[t];p=this.add(p);s.push(p)}return s}q=this.prepareItems(l[0],true)[0];this.insertByZIndex(q);this.onAdd(q);return q},insertByZIndex:function(n){var q=this,t=q.items.items,u=t.length,m=Math.ceil,p=n.attr.zIndex,o=u,v=o-1,s=0,w;if(q.orderSpritesByZIndex&&u&&p<t[v].attr.zIndex){while(s<=v){o=m((s+v)/2);w=t[o].attr.zIndex;if(w>p){v=o-1}else{if(w<p){s=o+1}else{break}}}while(o<u&&t[o].attr.zIndex<=p){o++}}q.items.insert(o,n);return o},onAdd:function(n){var l=n.group,h=n.draggable,j,m,o;if(l){j=[].concat(l);m=j.length;for(o=0;o<m;o++){l=j[o];this.getGroup(l).add(n)}delete n.group}if(h){n.initDraggable()}},remove:function(h,l){if(h){this.items.remove(h);var j=[].concat(this.groups.items),m=j.length,n;for(n=0;n<m;n++){j[n].remove(h)}h.onRemove();if(l===true){h.destroy()}}},removeAll:function(j){var h=this.items.items,l=h.length,e;for(e=l-1;e>-1;e--){this.remove(h[e],j)}},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,applyViewBox:function(){var v=this,n=v.viewBox,y=v.width||1,s=v.height||1,t,u,p,x,q,w,o;if(n&&(y||s)){t=n.x;u=n.y;p=n.width;x=n.height;q=s/x;w=y/p;o=Math.min(w,q);if(p*o<y){t-=(y-p*o)/2/o}if(x*o<s){u-=(s-x*o)/2/o}v.viewBoxShift={dx:-t,dy:-u,scale:o};if(v.background){v.background.setAttributes(Ext.apply({},{x:t,y:u,width:y/o,height:s/o},{hidden:false}),true)}}else{if(v.background&&y&&s){v.background.setAttributes(Ext.apply({x:0,y:0,width:y,height:s},{hidden:false}),true)}}},getBBox:function(e,d){var h=this["getPath"+e.type](e);if(d){e.bbox.plain=e.bbox.plain||Ext.draw.Draw.pathDimensions(h);return e.bbox.plain}if(e.dirtyTransform){this.applyTransformations(e,true)}e.bbox.transform=e.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(h,e.matrix));return e.bbox.transform},transformToViewBox:function(h,j){if(this.viewBoxShift){var l=this,e=l.viewBoxShift;return[h/e.scale-e.dx,j/e.scale-e.dy]}else{return[h,j]}},applyTransformations:function(e,j){if(e.type=="text"){e.bbox.transform=0;this.transform(e,false)}e.dirtyTransform=false;var l=this,h=e.attr;if(h.translation.x!=null||h.translation.y!=null){l.translate(e)}if(h.scaling.x!=null||h.scaling.y!=null){l.scale(e)}if(h.rotation.degrees!=null){l.rotate(e)}e.bbox.transform=0;this.transform(e,j);e.transformations=[]},rotate:function(j){var l,h=j.attr.rotation.degrees,m=j.attr.rotation.x,n=j.attr.rotation.y;if(!Ext.isNumber(m)||!Ext.isNumber(n)){l=this.getBBox(j,true);m=!Ext.isNumber(m)?l.x+l.width/2:m;n=!Ext.isNumber(n)?l.y+l.height/2:n}j.transformations.push({type:"rotate",degrees:h,x:m,y:n})},translate:function(d){var e=d.attr.translation.x||0,h=d.attr.translation.y||0;d.transformations.push({type:"translate",x:e,y:h})},scale:function(h){var m,j=h.attr.scaling.x||1,l=h.attr.scaling.y||1,n=h.attr.scaling.centerX,o=h.attr.scaling.centerY;if(!Ext.isNumber(n)||!Ext.isNumber(o)){m=this.getBBox(h,true);n=!Ext.isNumber(n)?m.x+m.width/2:n;o=!Ext.isNumber(o)?m.y+m.height/2:o}h.transformations.push({type:"scale",x:j,y:l,centerX:n,centerY:o})},rectPath:function(j,l,h,n,m){if(m){return[["M",j+m,l],["l",h-m*2,0],["a",m,m,0,0,1,m,m],["l",0,n-m*2],["a",m,m,0,0,1,-m,m],["l",m*2-h,0],["a",m,m,0,0,1,-m,-m],["l",0,m*2-n],["a",m,m,0,0,1,m,-m],["z"]]}return[["M",j,l],["l",h,0],["l",0,n],["l",-h,0],["z"]]},ellipsePath:function(h,j,l,e){if(e==null){e=l}return[["M",h,j],["m",0,-e],["a",l,e,0,1,1,0,2*e],["a",l,e,0,1,1,0,-2*e],["z"]]},getPathpath:function(c){return c.attr.path},getPathcircle:function(d){var a=d.attr;return this.ellipsePath(a.x,a.y,a.radius,a.radius)},getPathellipse:function(d){var a=d.attr;return this.ellipsePath(a.x,a.y,a.radiusX||(a.width/2)||0,a.radiusY||(a.height/2)||0)},getPathrect:function(d){var a=d.attr;return this.rectPath(a.x||0,a.y||0,a.width||0,a.height||0,a.r||0)},getPathimage:function(d){var a=d.attr;return this.rectPath(a.x||0,a.y||0,a.width,a.height)},getPathtext:function(d){var c=this.getBBoxText(d);return this.rectPath(c.x,c.y,c.width,c.height)},createGroup:function(c){var d=this.groups.get(c);if(!d){d=new Ext.draw.CompositeSprite({surface:this});d.id=c||Ext.id(null,"ext-surface-group-");this.groups.add(d)}return d},getGroup:function(c){var d;if(typeof c=="string"){d=this.groups.get(c);if(!d){d=this.createGroup(c)}}else{d=c}return d},prepareItems:function(j,n){j=[].concat(j);var l,h,m;for(h=0,m=j.length;h<m;h++){l=j[h];if(!(l instanceof Ext.draw.Sprite)){l.surface=this;j[h]=this.createItem(l)}else{l.surface=this}}return j},setText:Ext.emptyFn,createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){var c=this;delete c.domRef;if(c.background){c.background.destroy()}c.removeAll(true);Ext.destroy(c.groups.items)}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.draw,"Surface"],0));(Ext.cmd.derive("Ext.layout.component.Draw",Ext.layout.component.Auto,{setHeightInDom:true,setWidthInDom:true,type:"draw",measureContentWidth:function(e){var l=e.target,h=e.getPaddingInfo(),j=this.getBBox(e);if(!l.viewBox){if(l.autoSize){return j.width+h.width}else{return j.x+j.width+h.width}}else{if(e.heightModel.shrinkWrap){return h.width}else{return j.width/j.height*(e.getProp("contentHeight")-h.height)+h.width}}},measureContentHeight:function(e){var l=e.target,h=e.getPaddingInfo(),j=this.getBBox(e);if(!e.target.viewBox){if(l.autoSize){return j.height+h.height}else{return j.y+j.height+h.height}}else{if(e.widthModel.shrinkWrap){return h.height}else{return j.height/j.width*(e.getProp("contentWidth")-h.width)+h.height}}},getBBox:function(d){var c=d.surfaceBBox;if(!c){c=d.target.surface.items.getBBox();if(c.width===-Infinity&&c.height===-Infinity){c.width=c.height=c.x=c.y=0}d.surfaceBBox=c}return c},publishInnerWidth:function(c,d){c.setContentWidth(d-c.getFrameInfo().width,true)},publishInnerHeight:function(c,d){c.setContentHeight(d-c.getFrameInfo().height,true)},finishedLayout:function(h){var d=h.props,e=h.getPaddingInfo();this.owner.setSurfaceSize(d.contentWidth-e.width,d.contentHeight-e.height);this.callParent(arguments)}},0,0,0,0,["layout.draw"],0,[Ext.layout.component,"Draw"],0));(Ext.cmd.derive("Ext.draw.Component",Ext.Component,{enginePriority:["Svg","Vml"],baseCls:Ext.baseCSSPrefix+"surface",componentLayout:"draw",viewBox:true,shrinkWrap:3,autoSize:false,suspendSizing:0,initComponent:function(){this.callParent(arguments);this.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave","click","dblclick")},onRender:function(){this.callParent(arguments);if(this.createSurface()!==false){this.configureSurfaceSize()}},configureSurfaceSize:function(){var e=this,j=e.viewBox,h=e.autoSize,l;if((j||h)&&!e.suspendSizing){l=e.surface.items.getBBox();if(j){e.surface.setViewBox(l.x,l.y,l.width,l.height)}else{e.autoSizeSurface(l)}}},autoSizeSurface:function(c){c=c||this.surface.items.getBBox();this.setSurfaceSize(c.width,c.height)},setSurfaceSize:function(d,e){this.surface.setSize(d,e);if(this.autoSize){var h=this.surface.items.getBBox();this.surface.setViewBox(h.x,h.y-(+Ext.isOpera),d,e)}},createSurface:function(){var j=this,e=Ext.applyIf({renderTo:j.el,height:j.height,width:j.width,items:j.items},j.initialConfig),h;delete e.listeners;if(!e.gradients){e.gradients=j.gradients}j.initSurfaceCfg(e);h=Ext.draw.Surface.create(e,j.enginePriority);if(!h){return false}j.surface=h;h.owner=j;function l(a){return function(c){j.fireEvent(a,c)}}h.on({scope:j,mouseup:l("mouseup"),mousedown:l("mousedown"),mousemove:l("mousemove"),mouseenter:l("mouseenter"),mouseleave:l("mouseleave"),click:l("click"),dblclick:l("dblclick")})},initSurfaceCfg:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.surface);this.callParent(arguments)}},0,["draw"],["component","box","draw"],{component:true,box:true,draw:true},["widget.draw"],0,[Ext.draw,"Component"],0));Ext.chart=Ext.chart||{};(Ext.cmd.derive("Ext.chart.theme.Theme",Ext.Base,(function(){(function(){Ext.chart.theme=function(C,D){C=C||{};var w=0,t=Ext.Date.now(),y,E,x,d,F,A,u,l,v=[],B,z;if(C.baseColor){B=Ext.draw.Color.fromString(C.baseColor);z=B.getHSL()[2];if(z<0.15){B=B.getLighter(0.3)}else{if(z<0.3){B=B.getLighter(0.15)}else{if(z>0.85){B=B.getDarker(0.3)}else{if(z>0.7){B=B.getDarker(0.15)}}}}C.colors=[B.getDarker(0.3).toString(),B.getDarker(0.15).toString(),B.toString(),B.getLighter(0.15).toString(),B.getLighter(0.3).toString()];delete C.baseColor}if(C.colors){E=C.colors.slice();F=D.markerThemes;d=D.seriesThemes;y=E.length;D.colors=E;for(;w<y;w++){x=E[w];u=F[w]||{};A=d[w]||{};u.fill=A.fill=u.stroke=A.stroke=x;F[w]=u;d[w]=A}D.markerThemes=F.slice(0,y);D.seriesThemes=d.slice(0,y)}for(l in D){if(l in C){if(Ext.isObject(C[l])&&Ext.isObject(D[l])){Ext.apply(D[l],C[l])}else{D[l]=C[l]}}}if(C.useGradients){E=D.colors||(function(){var a=[];for(w=0,d=D.seriesThemes,y=d.length;w<y;w++){a.push(d[w].fill||d[w].stroke)}return a}());for(w=0,y=E.length;w<y;w++){B=Ext.draw.Color.fromString(E[w]);if(B){x=B.getDarker(0.1).toString();B=B.toString();l="theme-"+B.substr(1)+"-"+x.substr(1)+"-"+t;v.push({id:l,angle:45,stops:{0:{color:B.toString()},100:{color:x.toString()}}});E[w]="url(#"+l+")"}}D.gradients=v;D.colors=E}Ext.apply(this,D)}}());return{theme:"Base",themeAttrs:false,initTheme:function(l){var m=this,h=Ext.chart.theme,n,j;if(l){l=l.split(":");for(n in h){if(n==l[0]){j=l[1]=="gradients";m.themeAttrs=new h[n]({useGradients:j});if(j){m.gradients=m.themeAttrs.gradients}if(m.themeAttrs.background){m.background=m.themeAttrs.background}return}}}}}})(),0,0,0,0,0,0,[Ext.chart.theme,"Theme"],0));(Ext.cmd.derive("Ext.chart.MaskLayer",Ext.Component,{constructor:function(c){c=Ext.apply(c||{},{style:"position:absolute;background-color:#ff9;cursor:crosshair;opacity:0.5;border:1px solid #00f;"});this.callParent([c])},initComponent:function(){var c=this;c.callParent(arguments);c.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave")},initDraggable:function(){this.callParent(arguments);this.dd.onStart=function(h){var d=this,e=d.comp;this.startPosition=e.getPosition(true);if(e.ghost&&!e.liveDrag){d.proxy=e.ghost();d.dragTarget=d.proxy.header.el}if(d.constrain||d.constrainDelegate){d.constrainTo=d.calculateConstrainRegion()}}}},1,0,["component","box"],{component:true,box:true},0,0,[Ext.chart,"MaskLayer"],0));(Ext.cmd.derive("Ext.chart.Mask",Ext.Base,{constructor:function(d){var c=this;c.addEvents("select");if(d){Ext.apply(c,d)}if(c.enableMask){c.on("afterrender",function(){var a=new Ext.chart.MaskLayer({renderTo:c.el,hidden:true});a.el.on({mousemove:function(e){c.onMouseMove(e)},mouseup:function(e){c.onMouseUp(e)}});a.initDraggable();c.maskType=c.mask;c.mask=a;c.maskSprite=c.surface.add({type:"path",path:["M",0,0],zIndex:1001,opacity:0.6,hidden:true,stroke:"#00f",cursor:"crosshair"})},c,{single:true})}},onMouseUp:function(l){var h=this,j=h.bbox||h.chartBBox,e;h.maskMouseDown=false;h.mouseDown=false;if(h.mouseMoved){h.handleMouseEvent(l);h.mouseMoved=false;e=h.maskSelection;h.fireEvent("select",h,{x:e.x-j.x,y:e.y-j.y,width:e.width,height:e.height})}},onMouseDown:function(c){this.handleMouseEvent(c)},onMouseMove:function(c){this.handleMouseEvent(c)},handleMouseEvent:function(E){var C=this,I=C.maskType,v=C.bbox||C.chartBBox,y=v.x,A=v.y,z=Math,F=z.floor,J=z.abs,G=z.min,B=z.max,w=F(A+v.height),H=F(y+v.width),u=E.getPageX()-C.el.getX(),x=E.getPageY()-C.el.getY(),D=C.maskMouseDown,e;u=B(u,y);x=B(x,A);u=G(u,H);x=G(x,w);if(E.type==="mousedown"){C.mouseDown=true;C.mouseMoved=false;C.maskMouseDown={x:u,y:x}}else{C.mouseMoved=C.mouseDown;if(D&&C.mouseDown){if(I=="horizontal"){x=A;D.y=w}else{if(I=="vertical"){u=y;D.x=H}}H=D.x-u;w=D.y-x;e=["M",u,x,"l",H,0,0,w,-H,0,"z"];C.maskSelection={x:(H>0?u:u+H)+C.el.getX(),y:(w>0?x:x+w)+C.el.getY(),width:J(H),height:J(w)};C.mask.updateBox(C.maskSelection);C.mask.show();C.maskSprite.setAttributes({hidden:true},true)}else{if(I=="horizontal"){e=["M",u,A,"L",u,w]}else{if(I=="vertical"){e=["M",y,x,"L",H,x]}else{e=["M",u,A,"L",u,w,"M",y,x,"L",H,x]}}C.maskSprite.setAttributes({path:e,"stroke-width":I===true?1:1,hidden:false},true)}}},onMouseLeave:function(c){var d=this;d.mouseMoved=false;d.mouseDown=false;d.maskMouseDown=false;d.mask.hide();d.maskSprite.hide(true)}},1,0,0,0,0,0,[Ext.chart,"Mask"],0));(Ext.cmd.derive("Ext.chart.Navigation",Ext.Base,{setZoom:function(A){var w=this,B=w.axes.items,y,D,M,O=w.chartBBox,v=O.width,K=O.height,I={x:A.x-w.el.getX(),y:A.y-w.el.getY(),width:A.width,height:A.height},G,C,z,N,H,E,F,J,x;for(y=0,D=B.length;y<D;y++){M=B[y];x=(M.position=="bottom"||M.position=="top");if(M.type=="Category"){if(!H){H=w.getChartStore();E=H.data.items.length}G=I;J=M.length;F=Math.round(J/E);if(x){z=(G.x?Math.floor(G.x/F)+1:0);N=(G.x+G.width)/F}else{z=(G.y?Math.floor(G.y/F)+1:0);N=(G.y+G.height)/F}}else{G={x:I.x/v,y:I.y/K,width:I.width/v,height:I.height/K};C=M.calcEnds();if(x){z=(C.to-C.from)*G.x+C.from;N=(C.to-C.from)*G.width+z}else{N=(C.to-C.from)*(1-G.y)+C.from;z=N-(C.to-C.from)*G.height}}M.minimum=z;M.maximum=N;if(x){if(M.doConstrain&&w.maskType!="vertical"){M.doConstrain()}}else{if(M.doConstrain&&w.maskType!="horizontal"){M.doConstrain()}}}w.redraw(false)},restoreZoom:function(){var l=this,h=l.axes.items,j,m,n;l.setSubStore(null);for(j=0,m=h.length;j<m;j++){n=h[j];delete n.minimum;delete n.maximum}l.redraw(false)}},0,0,0,0,0,0,[Ext.chart,"Navigation"],0));(Ext.cmd.derive("Ext.chart.Shape",Ext.Base,{singleton:true,circle:function(d,c){return d.add(Ext.apply({type:"circle",x:c.x,y:c.y,stroke:null,radius:c.radius},c))},line:function(d,c){return d.add(Ext.apply({type:"rect",x:c.x-c.radius,y:c.y-c.radius,height:2*c.radius,width:2*c.radius/5},c))},square:function(d,c){return d.add(Ext.applyIf({type:"rect",x:c.x-c.radius,y:c.y-c.radius,height:2*c.radius,width:2*c.radius,radius:null},c))},triangle:function(d,c){c.radius*=1.75;return d.add(Ext.apply({type:"path",stroke:null,path:"M".concat(c.x,",",c.y,"m0-",c.radius*0.58,"l",c.radius*0.5,",",c.radius*0.87,"-",c.radius,",0z")},c))},diamond:function(e,h){var d=h.radius;d*=1.5;return e.add(Ext.apply({type:"path",stroke:null,path:["M",h.x,h.y-d,"l",d,d,-d,d,-d,-d,d,-d,"z"]},h))},cross:function(e,h){var d=h.radius;d=d/1.7;return e.add(Ext.apply({type:"path",stroke:null,path:"M".concat(h.x-d,",",h.y,"l",[-d,-d,d,-d,d,d,d,-d,d,d,-d,d,d,d,-d,d,-d,-d,-d,d,-d,-d,"z"])},h))},plus:function(e,h){var d=h.radius/1.3;return e.add(Ext.apply({type:"path",stroke:null,path:"M".concat(h.x-d/2,",",h.y-d/2,"l",[0,-d,d,0,0,d,d,0,0,d,-d,0,0,d,-d,0,0,-d,-d,0,0,-d,"z"])},h))},arrow:function(e,h){var d=h.radius;return e.add(Ext.apply({type:"path",path:"M".concat(h.x-d*0.7,",",h.y-d*0.4,"l",[d*0.6,0,0,-d*0.4,d,d*0.8,-d,d*0.8,0,-d*0.4,-d*0.6,0],"z")},h))},drop:function(h,j,l,m,o,n){o=o||30;n=n||0;h.add({type:"path",path:["M",j,l,"l",o,0,"A",o*0.4,o*0.4,0,1,0,j+o*0.7,l-o*0.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-n,x:j,y:l}});n=(n+90)*Math.PI/180;h.add({type:"text",x:j+o*Math.sin(n)-10,y:l+o*Math.cos(n)+5,text:m,"font-size":o*12/40,stroke:"none",fill:"#fff"})}},0,0,0,0,0,0,[Ext.chart,"Shape"],0));(Ext.cmd.derive("Ext.chart.LegendItem",Ext.draw.CompositeSprite,{hiddenSeries:false,label:undefined,x:0,y:0,zIndex:500,boldRe:/bold\s\d{1,}.*/i,constructor:function(c){this.callParent(arguments);this.createLegend(c)},createLegend:function(e){var j=this,l=j.series,h=e.yFieldIndex;j.label=j.createLabel(e);j.createSeriesMarkers(e);j.setAttributes({hidden:false},true);j.yFieldIndex=h;j.on("mouseover",j.onMouseOver,j);j.on("mouseout",j.onMouseOut,j);j.on("mousedown",j.onMouseDown,j);if(!l.visibleInLegend(h)){j.hiddenSeries=true;j.label.setAttributes({opacity:0.5},true)}j.updatePosition({x:0,y:0})},getLabelText:function(){var j=this,l=j.series,h=j.yFieldIndex;function e(c){var a=l[c];return(Ext.isArray(a)?a[h]:a)}return e("title")||e("yField")},createLabel:function(e){var h=this,d=h.legend;return h.add("label",h.surface.add({type:"text",x:20,y:0,zIndex:(h.zIndex||0)+2,fill:d.labelColor,font:d.labelFont,text:h.getLabelText(),style:{cursor:"pointer"}}))},createSeriesMarkers:function(s){var m=this,o=s.yFieldIndex,p=m.series,q=p.type,u=m.surface,n=m.zIndex;if(q==="line"||q==="scatter"){if(q==="line"){var l=Ext.apply(p.seriesStyle,p.style);m.drawLine(0.5,0.5,16.5,0.5,n,l,o)}if(p.showMarkers||q==="scatter"){var t=Ext.apply(p.markerStyle,p.markerConfig||{},{fill:p.getLegendColor(o)});m.drawMarker(8.5,0.5,n,t)}}else{m.drawFilledBox(12,12,n,o)}},drawLine:function(o,q,n,p,t,m,u){var s=this,w=s.surface,v=s.series;return s.add("line",w.add({type:"path",path:"M"+o+","+q+"L"+n+","+p,zIndex:(t||0)+2,"stroke-width":v.lineWidth,"stroke-linejoin":"round","stroke-dasharray":v.dash,stroke:m.stroke||v.getLegendColor(u)||"#000",style:{cursor:"pointer"}}))},drawMarker:function(j,m,n,o){var p=this,l=p.surface,q=p.series;return p.add("marker",Ext.chart.Shape[o.type](l,{fill:o.fill,x:j,y:m,zIndex:(n||0)+2,radius:o.radius||o.size,style:{cursor:"pointer"}}))},drawFilledBox:function(o,j,m,q){var n=this,l=n.surface,p=n.series;return n.add("box",l.add({type:"rect",zIndex:(m||0)+2,x:0,y:0,width:o,height:j,fill:p.getLegendColor(q),style:{cursor:"pointer"}}))},onMouseOver:function(){var c=this,d=c.legend;c.label.setAttributes({"font-weight":"bold"},true);c.series._index=c.yFieldIndex;c.series.highlightItem()},onMouseOut:function(){var d=this,e=d.legend,h=d.boldRe;d.label.setAttributes({"font-weight":e.labelFont&&h.test(e.labelFont)?"bold":"normal"},true);d.series._index=d.yFieldIndex;d.series.unHighlightItem()},onMouseDown:function(){var c=this,d=c.yFieldIndex;if(!c.hiddenSeries){c.series.hideAll(d);c.label.setAttributes({opacity:0.5},true)}else{c.series.showAll(d);c.label.setAttributes({opacity:1},true)}c.hiddenSeries=!c.hiddenSeries;c.legend.chart.redraw()},updatePosition:function(A){var u=this,v=u.items,w=v.length,C=u.x,D=u.y,o,z,s,t,B,E,x,y;if(!A){A=u.legend}x=A.x;y=A.y;for(z=0;z<w;z++){B=true;o=v[z];switch(o.type){case"text":s=20+x+C;t=y+D;B=false;break;case"rect":s=x+C;t=y+D-6;break;default:s=x+C;t=y+D}E={x:s,y:t};o.setAttributes(B?{translate:E}:E,true)}}},1,0,0,0,0,0,[Ext.chart,"LegendItem"],0));(Ext.cmd.derive("Ext.chart.Legend",Ext.Base,{visible:true,update:true,position:"bottom",x:0,y:0,labelColor:"#000",labelFont:"12px Helvetica, sans-serif",boxStroke:"#000",boxStrokeWidth:1,boxFill:"#FFF",itemSpacing:10,padding:5,width:0,height:0,boxZIndex:100,constructor:function(d){var c=this;if(d){Ext.apply(c,d)}c.items=[];c.isVertical=("left|right|float".indexOf(c.position)!==-1);c.origX=c.x;c.origY=c.y},create:function(){var l=this,j=l.chart.series.items,n,m,h;l.createBox();if(l.rebuild!==false){l.createItems()}if(!l.created&&l.isDisplayed()){l.created=true;for(n=0,m=j.length;n<m;n++){h=j[n];h.on("titlechange",l.redraw,l)}}},init:Ext.emptyFn,redraw:function(){var c=this;c.create();c.updatePosition()},isDisplayed:function(){return this.visible&&this.chart.series.findIndex("showInLegend",true)!==-1},createItems:function(){var p=this,t=p.chart.series.items,q=p.items,s,u,n,w,o,v,j;p.removeItems();for(u=0,n=t.length;u<n;u++){v=t[u];if(v.showInLegend){s=[].concat(v.yField);for(w=0,o=s.length;w<o;w++){j=p.createLegendItem(v,w);q.push(j)}}}p.alignItems()},removeItems:function(){var j=this,e=j.items,h=e?e.length:0,l;if(h){for(l=0;l<h;l++){e[l].destroy()}}e.length=[]},alignItems:function(){var p=this,o=p.padding,u=p.isVertical,l=Math.floor,t,n,m,s,q;t=p.updateItemDimensions();n=t.maxWidth;m=t.maxHeight;s=t.totalWidth;q=t.totalHeight;p.width=l((u?n:s)+o*2)+10;p.height=l((u?q:m)+o*2)},updateItemDimensions:function(){var w=this,E=w.items,G=w.padding,v=w.itemSpacing,z=0,D=0,I=0,x=0,K=w.isVertical,J=Math.floor,l=Math.max,H=0,A,B,y,M,C,F;for(A=0,B=E.length;A<B;A++){y=E[A];M=y.getBBox();C=M.width;F=M.height;H=(A===0?0:v);y.x=G+J(K?0:I+H);y.y=G+J(K?x+H:0)+F/2;I+=H+C;x+=H+F;z=l(z,C);D=l(D,F)}return{totalWidth:I,totalHeight:x,maxWidth:z,maxHeight:D}},createLegendItem:function(d,e){var h=this;return new Ext.chart.LegendItem({legend:h,series:d,surface:h.chart.surface,yFieldIndex:e})},getBBox:function(){var c=this;return{x:Math.round(c.x)-c.boxStrokeWidth/2,y:Math.round(c.y)-c.boxStrokeWidth/2,width:c.width+c.boxStrokeWidth,height:c.height+c.boxStrokeWidth}},createBox:function(){var d=this,e,h;if(d.boxSprite){d.boxSprite.destroy()}h=d.getBBox();if(isNaN(h.width)||isNaN(h.height)){d.boxSprite=false;return}e=d.boxSprite=d.chart.surface.add(Ext.apply({type:"rect",stroke:d.boxStroke,"stroke-width":d.boxStrokeWidth,fill:d.boxFill,zIndex:d.boxZIndex},h));e.redraw()},calcPosition:function(){var x=this,v,w,t=x.width,u=x.height,y=x.chart,s=y.chartBBox,D=y.insetPadding,B=s.width-(D*2),C=s.height-(D*2),z=s.x+D,A=s.y+D,E=y.surface,q=Math.floor;switch(x.position){case"left":v=D;w=q(A+C/2-u/2);break;case"right":v=q(E.width-t)-D;w=q(A+C/2-u/2);break;case"top":v=q(z+B/2-t/2);w=D;break;case"bottom":v=q(z+B/2-t/2);w=q(E.height-u)-D;break;default:v=q(x.origX)+D;w=q(x.origY)+D}return{x:v,y:w}},updatePosition:function(){var n=this,h=n.items,l,o,j,m;if(n.isDisplayed()){l=n.calcPosition();n.x=l.x;n.y=l.y;for(o=0,j=h.length;o<j;o++){h[o].updatePosition()}m=n.getBBox();if(isNaN(m.width)||isNaN(m.height)){if(n.boxSprite){n.boxSprite.hide(true)}}else{if(!n.boxSprite){n.createBox()}n.boxSprite.setAttributes(m,true);n.boxSprite.show(true)}}},toggle:function(h){var l=this,m=0,n=l.items,j=n.length;if(l.boxSprite){if(h){l.boxSprite.show(true)}else{l.boxSprite.hide(true)}}for(;m<j;++m){if(h){n[m].show(true)}else{n[m].hide(true)}}l.visible=h}},1,0,0,0,0,0,[Ext.chart,"Legend"],0));(Ext.cmd.derive("Ext.chart.theme.Base",Ext.Base,{constructor:function(d){var c=Ext.identityFn;Ext.chart.theme.call(this,d,{background:false,axis:{stroke:"#444","stroke-width":1},axisLabelTop:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:c},axisLabelRight:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:c},axisLabelBottom:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:c},axisLabelLeft:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:c},axisTitleTop:{font:"bold 18px Arial",fill:"#444"},axisTitleRight:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},axisTitleBottom:{font:"bold 18px Arial",fill:"#444"},axisTitleLeft:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},series:{"stroke-width":0},seriesLabel:{font:"12px Arial",fill:"#333"},marker:{stroke:"#555",radius:3,size:3},colors:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],seriesThemes:[{fill:"#94ae0a"},{fill:"#115fa6"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#a66111"}],markerThemes:[{fill:"#115fa6",type:"circle"},{fill:"#94ae0a",type:"cross"},{fill:"#115fa6",type:"plus"},{fill:"#94ae0a",type:"circle"},{fill:"#a61120",type:"cross"}]})}},1,0,0,0,0,0,[Ext.chart.theme,"Base"],function(){var s=["#b1da5a","#4ce0e7","#e84b67","#da5abd","#4d7fe6","#fec935"],m=["Green","Sky","Red","Purple","Blue","Yellow"],n=0,o=0,j=s.length,l=Ext.chart.theme,q=[["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]],p=q.length;for(;n<j;n++){l[m[n]]=(function(a){return Ext.extend(l.Base,{constructor:function(c){l.Base.prototype.constructor.call(this,Ext.apply({baseColor:a},c))}})}(s[n]))}for(n=0;n<p;n++){l["Category"+(n+1)]=(function(a){return Ext.extend(l.Base,{constructor:function(c){l.Base.prototype.constructor.call(this,Ext.apply({colors:a},c))}})}(q[n]))}}));(Ext.cmd.derive("Ext.chart.Chart",Ext.draw.Component,{viewBox:false,animate:false,legend:false,insetPadding:10,background:false,refreshBuffer:1,constructor:function(d){var h=this,e;d=Ext.apply({},d);h.initTheme(d.theme||h.theme);if(h.gradients){Ext.apply(d,{gradients:h.gradients})}if(h.background){Ext.apply(d,{background:h.background})}if(d.animate){e={easing:"ease",duration:500};if(Ext.isObject(d.animate)){d.animate=Ext.applyIf(d.animate,e)}else{d.animate=e}}h.mixins.observable.constructor.call(h,d);if(d.mask){d=Ext.apply({enableMask:true},d)}if(d.enableMask){h.mixins.mask.constructor.call(h,d)}h.mixins.navigation.constructor.call(h);h.callParent([d])},getChartStore:function(){return this.substore||this.store},initComponent:function(){var d=this,h,e;d.callParent();d.addEvents("itemmousedown","itemmouseup","itemmouseover","itemmouseout","itemclick","itemdblclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh");Ext.applyIf(d,{zoom:{width:1,height:1,x:0,y:0}});d.maxGutters={left:0,right:0,bottom:0,top:0};d.store=Ext.data.StoreManager.lookup(d.store);h=d.axes;d.axes=new Ext.util.MixedCollection(false,function(a){return a.position});if(h){d.axes.addAll(h)}e=d.series;d.series=new Ext.util.MixedCollection(false,function(a){return a.seriesId||(a.seriesId=Ext.id(null,"ext-chart-series-"))});if(e){d.series.addAll(e)}if(d.legend!==false){d.legend=new Ext.chart.Legend(Ext.applyIf({chart:d},d.legend))}d.on({mousemove:d.onMouseMove,mouseleave:d.onMouseLeave,mousedown:d.onMouseDown,mouseup:d.onMouseUp,click:d.onClick,dblclick:d.onDblClick,scope:d})},afterComponentLayout:function(n,j,h,l){var m=this;if(Ext.isNumber(n)&&Ext.isNumber(j)){if(n!==h||j!==l){m.curWidth=n;m.curHeight=j;m.redraw(true);m.needsRedraw=false}else{if(m.needsRedraw){m.redraw();m.needsRedraw=false}}}this.callParent(arguments)},redraw:function(y){var s=this,t=s.series.items,v=t.length,z=s.axes.items,x=z.length,A=0,u,o,p=s.chartBBox={x:0,y:0,height:s.curHeight,width:s.curWidth},q=s.legend,w;s.surface.setSize(p.width,p.height);for(u=0;u<v;u++){o=t[u];if(!o.initialized){w=s.initializeSeries(o,u,A)}else{w=o}w.onRedraw();if(Ext.isArray(o.yField)){A+=o.yField.length}else{++A}}for(u=0;u<x;u++){o=z[u];if(!o.initialized){s.initializeAxis(o)}}for(u=0;u<x;u++){z[u].processView();z[u].onRedraw()}for(u=0;u<x;u++){z[u].drawAxis(true)}if(q!==false&&q.visible){if(q.update||!q.created){q.create()}}s.alignAxes();if(q!==false&&q.visible){q.updatePosition()}s.getMaxGutters();s.resizing=!!y;for(u=0;u<x;u++){z[u].drawAxis()}for(u=0;u<v;u++){s.drawCharts(t[u])}s.resizing=false},afterRender:function(){var c=this,d=c.legend;c.callParent(arguments);if(c.categoryNames){c.setCategoryNames(c.categoryNames)}if(d){d.init()}c.bindStore(c.store,true);c.refresh();if(c.surface.engine==="Vml"){c.on("added",c.onAddedVml,c);c.mon(c.hierarchyEventSource,"added",c.onContainerAddedVml,c)}},onAddedVml:function(){this.needsRedraw=true},onContainerAddedVml:function(c){if(this.isDescendantOf(c)){this.needsRedraw=true}},getEventXY:function(m){var e=this.surface.getRegion(),j=m.getXY(),h=j[0]-e.left,l=j[1]-e.top;return[h,l]},onClick:function(c){this.handleClick("itemclick",c)},onDblClick:function(c){this.handleClick("itemdblclick",c)},handleClick:function(u,o){var m=this,p=m.getEventXY(o),q=m.series.items,t,n,s,e;for(t=0,n=q.length;t<n;t++){s=q[t];if(Ext.draw.Draw.withinBox(p[0],p[1],s.bbox)){if(s.getItemForPoint){e=s.getItemForPoint(p[0],p[1]);if(e){s.fireEvent(u,e)}}}}},onMouseDown:function(m){var n=this,l=n.getEventXY(m),e=n.series.items,q,o,s,p;if(n.enableMask){n.mixins.mask.onMouseDown.call(n,m)}for(q=0,o=e.length;q<o;q++){s=e[q];if(Ext.draw.Draw.withinBox(l[0],l[1],s.bbox)){if(s.getItemForPoint){p=s.getItemForPoint(l[0],l[1]);if(p){s.fireEvent("itemmousedown",p)}}}}},onMouseUp:function(m){var n=this,l=n.getEventXY(m),e=n.series.items,q,o,s,p;if(n.enableMask){n.mixins.mask.onMouseUp.call(n,m)}for(q=0,o=e.length;q<o;q++){s=e[q];if(Ext.draw.Draw.withinBox(l[0],l[1],s.bbox)){if(s.getItemForPoint){p=s.getItemForPoint(l[0],l[1]);if(p){s.fireEvent("itemmouseup",p)}}}}},onMouseMove:function(t){var q=this,v=q.getEventXY(t),w=q.series.items,y,s,x,e,p,u,o;if(q.enableMask){q.mixins.mask.onMouseMove.call(q,t)}for(y=0,s=w.length;y<s;y++){x=w[y];if(Ext.draw.Draw.withinBox(v[0],v[1],x.bbox)){if(x.getItemForPoint){e=x.getItemForPoint(v[0],v[1]);p=x._lastItemForPoint;u=x._lastStoreItem;o=x._lastStoreField;if(e!==p||e&&(e.storeItem!=u||e.storeField!=o)){if(p){x.fireEvent("itemmouseout",p);delete x._lastItemForPoint;delete x._lastStoreField;delete x._lastStoreItem}if(e){x.fireEvent("itemmouseover",e);x._lastItemForPoint=e;x._lastStoreItem=e.storeItem;x._lastStoreField=e.storeField}}}}else{p=x._lastItemForPoint;if(p){x.fireEvent("itemmouseout",p);delete x._lastItemForPoint;delete x._lastStoreField;delete x._lastStoreItem}}}},onMouseLeave:function(l){var m=this,j=m.series.items,o,n,e;if(m.enableMask){m.mixins.mask.onMouseLeave.call(m,l)}for(o=0,n=j.length;o<n;o++){e=j[o];delete e._lastItemForPoint}},delayRefresh:function(){var c=this;if(!c.refreshTask){c.refreshTask=new Ext.util.DelayedTask(c.refresh,c)}c.refreshTask.delay(c.refreshBuffer)},refresh:function(){var c=this;if(c.rendered&&c.curWidth!==undefined&&c.curHeight!==undefined){if(!c.isVisible(true)){if(!c.refreshPending){c.setShowListeners("mon");c.refreshPending=true}return}if(c.fireEvent("beforerefresh",c)!==false){c.redraw();c.fireEvent("refresh",c)}}},onShow:function(){var c=this;c.callParent(arguments);if(c.refreshPending){c.delayRefresh();c.setShowListeners("mun")}delete c.refreshPending},setShowListeners:function(c){var d=this;d[c](d.hierarchyEventSource,{scope:d,single:true,show:d.forceRefresh,expand:d.forceRefresh})},doRefresh:function(){this.setSubStore(null);this.refresh()},forceRefresh:function(d){var c=this;if(c.isDescendantOf(d)&&c.refreshPending){c.setShowListeners("mun");c.delayRefresh()}delete c.refreshPending},bindStore:function(e,d){var h=this;h.mixins.bindable.bindStore.apply(h,arguments);if(h.store&&!d){h.refresh()}},getStoreListeners:function(){var c=this.doRefresh,d=this.delayRefresh;return{refresh:c,add:d,bulkremove:d,update:d,clear:c}},setSubStore:function(c){this.substore=c},initializeAxis:function(v){var q=this,h=q.chartBBox,n=h.width,t=h.height,o=h.x,p=h.y,u=q.themeAttrs,s=q.axes,w={chart:q};if(u){w.axisStyle=Ext.apply({},u.axis);w.axisLabelLeftStyle=Ext.apply({},u.axisLabelLeft);w.axisLabelRightStyle=Ext.apply({},u.axisLabelRight);w.axisLabelTopStyle=Ext.apply({},u.axisLabelTop);w.axisLabelBottomStyle=Ext.apply({},u.axisLabelBottom);w.axisTitleLeftStyle=Ext.apply({},u.axisTitleLeft);w.axisTitleRightStyle=Ext.apply({},u.axisTitleRight);w.axisTitleTopStyle=Ext.apply({},u.axisTitleTop);w.axisTitleBottomStyle=Ext.apply({},u.axisTitleBottom);q.configureAxisStyles(w)}switch(v.position){case"top":Ext.apply(w,{length:n,width:t,x:o,y:p});break;case"bottom":Ext.apply(w,{length:n,width:t,x:o,y:t});break;case"left":Ext.apply(w,{length:t,width:n,x:o,y:t});break;case"right":Ext.apply(w,{length:t,width:n,x:n,y:t});break}if(!v.chart){Ext.apply(w,v);v=Ext.createByAlias("axis."+v.type.toLowerCase(),w);s.replace(v)}else{Ext.apply(v,w)}v.initialized=true;return v},configureAxisStyles:Ext.emptyFn,getInsets:function(){var c=this,d=c.insetPadding;return{top:d,right:d,bottom:d,left:d}},calculateInsets:function(){var s=this,p=s.legend,t=s.axes,v=["top","right","bottom","left"],x,u,w,A,q,y,l;function z(c){var a=t.findIndex("position",c);return(a<0)?null:t.getAt(a)}x=s.getInsets();for(u=0,w=v.length;u<w;u++){A=v[u];q=(A==="left"||A==="right");y=z(A);if(p!==false){if(p.position===A){l=p.getBBox();x[A]+=(q?l.width:l.height)+s.insetPadding}}if(y&&y.bbox){l=y.bbox;x[A]+=(q?l.width:l.height)}}return x},alignAxes:function(){var p=this,t=p.axes.items,q,l,m,s,n,o;q=p.getChartBBox();for(l=0,m=t.length;l<m;l++){s=t[l];n=s.position;o=n==="left"||n==="right";s.x=(n==="right"?q.x+q.width:q.x);s.y=(n==="top"?q.y:q.y+q.height);s.width=(o?q.width:q.height);s.length=(o?q.height:q.width)}},getChartBBox:function(){var c=this,d=c.calculateInsets();c.chartBBox={x:d.left,y:d.top,width:c.curWidth-d.left-d.right,height:c.curHeight-d.top-d.bottom};return c.chartBBox},initializeSeries:function(x,v,E){var w=this,z=w.themeAttrs,B,y,t,l,s,u=[],A=(x instanceof Ext.chart.series.Series).i=0,C,D;if(!x.initialized){D={chart:w,seriesId:x.seriesId};if(z){t=z.seriesThemes;s=z.markerThemes;B=Ext.apply({},z.series);y=Ext.apply({},z.marker);D.seriesStyle=Ext.apply(B,t[E%t.length]);D.seriesLabelStyle=Ext.apply({},z.seriesLabel);D.markerStyle=Ext.apply(y,s[E%s.length]);if(z.colors){D.colorArrayStyle=z.colors}else{u=[];for(C=t.length;i<C;i++){l=t[i];if(l.fill||l.stroke){u.push(l.fill||l.stroke)}}if(u.length){D.colorArrayStyle=u}}D.seriesIdx=v;D.themeIdx=E}if(A){Ext.applyIf(x,D)}else{Ext.applyIf(D,x);x=w.series.replace(Ext.createByAlias("series."+x.type.toLowerCase(),D))}}x.initialize();x.initialized=true;return x},getMaxGutters:function(){var o=this,s=o.series.items,v,p,u,n,q=0,w=0,m=0,t=0;for(v=0,p=s.length;v<p;v++){n=s[v].getGutters();if(n){if(n.verticalAxis){m=Math.max(m,n.lower);t=Math.max(t,n.upper)}else{q=Math.max(q,n.lower);w=Math.max(w,n.upper)}}}o.maxGutters={left:q,right:w,bottom:m,top:t}},drawAxis:function(c){c.drawAxis()},drawCharts:function(c){c.triggerafterrender=false;c.drawSeries();if(!this.animate){c.fireEvent("afterrender",c)}},save:function(c){return Ext.draw.Surface.save(this.surface,c)},destroy:function(){var c=this,d=c.refreshTask;if(d){d.cancel();c.refreshTask=null}c.bindStore(null);c.callParent(arguments)}},1,["chart"],["component","box","draw","chart"],{component:true,box:true,draw:true,chart:true},["widget.chart"],[["themeManager",Ext.chart.theme.Theme],["mask",Ext.chart.Mask],["navigation",Ext.chart.Navigation],["bindable",Ext.util.Bindable],["observable",Ext.util.Observable]],[Ext.chart,"Chart"],0));(Ext.cmd.derive("Ext.chart.Highlight",Ext.Base,{highlight:false,highlightCfg:{fill:"#fdd","stroke-width":5,stroke:"#f55"},constructor:function(c){if(c.highlight&&(typeof c.highlight!=="boolean")){this.highlightCfg=Ext.merge({},this.highlightCfg,c.highlight)}},highlightItem:function(m){if(!m){return}var q=this,n=m.sprite,w=Ext.merge({},q.highlightCfg,q.highlight),t=q.chart.surface,u=q.chart.animate,v,o,p,s;if(!q.highlight||!n||n._highlighted){return}if(n._anim){n._anim.paused=true}n._highlighted=true;if(!n._defaults){n._defaults=Ext.apply({},n.attr);o={};p={};for(v in w){if(!(v in n._defaults)){n._defaults[v]=t.availableAttrs[v]}o[v]=n._defaults[v];p[v]=w[v];if(Ext.isObject(w[v])){o[v]={};p[v]={};Ext.apply(n._defaults[v],n.attr[v]);Ext.apply(o[v],n._defaults[v]);for(s in n._defaults[v]){if(!(s in w[v])){p[v][s]=o[v][s]}else{p[v][s]=w[v][s]}}for(s in w[v]){if(!(s in p[v])){p[v][s]=w[v][s]}}}}n._from=o;n._to=p;n._endStyle=p}if(u){n._anim=new Ext.fx.Anim({target:n,from:n._from,to:n._to,duration:150})}else{n.setAttributes(n._to,true)}},unHighlightItem:function(){if(!this.highlight||!this.items){return}var m=this,n=m.items,o=n.length,u=Ext.merge({},m.highlightCfg,m.highlight),s=m.chart.animate,p=0,q,t,l;for(;p<o;p++){if(!n[p]){continue}l=n[p].sprite;if(l&&l._highlighted){if(l._anim){l._anim.paused=true}q={};for(t in u){if(Ext.isObject(l._defaults[t])){q[t]=Ext.apply({},l._defaults[t])}else{q[t]=l._defaults[t]}}if(s){l._endStyle=q;l._anim=new Ext.fx.Anim({target:l,to:q,duration:150})}else{l.setAttributes(q,true)}delete l._highlighted}}},cleanHighlights:function(){if(!this.highlight){return}var j=this.group,l=this.markerGroup,e=0,h;for(h=j.getCount();e<h;e++){delete j.getAt(e)._defaults}if(l){for(h=l.getCount();e<h;e++){delete l.getAt(e)._defaults}}}},1,0,0,0,0,0,[Ext.chart,"Highlight"],0));(Ext.cmd.derive("Ext.chart.Label",Ext.Base,{colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,constructor:function(d){var c=this;c.label=Ext.applyIf(c.label||{},{display:"none",stackedDisplay:"none",color:"#000",field:"name",minMargin:50,font:"11px Helvetica, sans-serif",orientation:"horizontal",renderer:Ext.identityFn});if(c.label.display!=="none"){c.labelsGroup=c.chart.surface.getGroup(c.seriesId+"-labels")}},renderLabels:function(){var az=this,X=az.chart,ao=X.gradients,aw=az.items,ac=X.animate,ak=az.label,at=ak.display,aI=ak.stackedDisplay,ap=ak.renderer,ar=ak.color,aH=[].concat(ak.field),ax=az.labelsGroup,aD=(ax||0)&&ax.length,aK=az.chart.getChartStore(),ay=aK.getCount(),aE=(aw||0)&&aw.length,ah=aE/ay,al=(ao||0)&&ao.length,aC=Ext.draw.Color,Y=[],aA,Z,af,aJ,am,aa,ad,aG,aF,au,aq,ae,W,av,j,ai,aj,aL,an,V,ag,aB,ab;if(at=="none"||!ax){return}if(aE==0){while(aD--){Y.push(aD)}}else{for(Z=0,af=0,aJ=0;Z<ay;Z++){am=0;for(aa=0;aa<ah;aa++){aq=aw[af];ae=ax.getAt(aJ);W=aK.getAt(Z);while(this.__excludes&&this.__excludes[am]){am++}if(!aq&&ae){ae.hide(true);aJ++}if(aq&&aH[aa]){if(!ae){ae=az.onCreateLabel(W,aq,Z,at);if(!ae){break}}ae.setAttributes({fill:String(ar)},true);az.onPlaceLabel(ae,W,aq,Z,at,ac,am);aJ++;if(ak.contrast&&aq.sprite){av=aq.sprite;if(ac&&av._endStyle){aL=av._endStyle.fill}else{if(ac&&av._to){aL=av._to.fill}else{aL=av.attr.fill}}aL=aL||av.attr.fill;j=aC.fromString(aL);if(aL&&!j){aL=aL.match(az.colorStringRe)[1];for(ad=0;ad<al;ad++){aA=ao[ad];if(aA.id==aL){au=0;aG=0;for(aF in aA.stops){au++;aG+=aC.fromString(aA.stops[aF].color).getGrayscale()}ai=(aG/au)/255;break}}}else{ai=j.getGrayscale()/255}if(ae.isOutside){ai=1}aj=aC.fromString(ae.attr.fill||ae.attr.color).getHSL();aj[2]=ai>0.5?0.2:0.8;ae.setAttributes({fill:String(aC.fromHSL.apply({},aj))},true)}if(az.stacked&&aI&&(aq.totalPositiveValues||aq.totalNegativeValues)){V=(aq.totalPositiveValues||0);ag=(aq.totalNegativeValues||0);an=V+ag;if(aI=="total"){aB=ap(an)}else{if(aI=="balances"){if(V==0&&ag==0){aB=ap(0)}else{aB=ap(V);ab=ap(ag)}}}if(aB){ae=ax.getAt(aJ);if(!ae){ae=az.onCreateLabel(W,aq,Z,"over")}aj=aC.fromString(ae.attr.color||ae.attr.fill).getHSL();ae.setAttributes({text:aB,style:ak.font,fill:String(aC.fromHSL.apply({},aj))},true);az.onPlaceLabel(ae,W,aq,Z,"over",ac,am);aJ++}if(ab){ae=ax.getAt(aJ);if(!ae){ae=az.onCreateLabel(W,aq,Z,"under")}aj=aC.fromString(ae.attr.color||ae.attr.fill).getHSL();ae.setAttributes({text:ab,style:ak.font,fill:String(aC.fromHSL.apply({},aj))},true);az.onPlaceLabel(ae,W,aq,Z,"under",ac,am);aJ++}}}af++;am++}}aD=ax.length;while(aD>aJ){Y.push(aJ);aJ++}}az.hideLabels(Y)},hideLabels:function(d){var e=this.labelsGroup,h=!!d&&d.length;if(!e){return}if(h===false){h=e.getCount();while(h--){e.getAt(h).hide(true)}}else{while(h--){e.getAt(d[h]).hide(true)}}}},1,0,0,0,0,0,[Ext.chart,"Label"],0));(Ext.cmd.derive("Ext.chart.TipSurface",Ext.draw.Component,{spriteArray:false,renderFirst:true,constructor:function(c){this.callParent([c]);if(c.sprites){this.spriteArray=[].concat(c.sprites);delete c.sprites}},onRender:function(){var n=this,h=0,j=0,m,l;this.callParent(arguments);l=n.spriteArray;if(n.renderFirst&&l){n.renderFirst=false;for(j=l.length;h<j;h++){m=n.surface.add(l[h]);m.setAttributes({hidden:false},true)}}}},1,0,["component","box","draw"],{component:true,box:true,draw:true},0,0,[Ext.chart,"TipSurface"],0));(Ext.cmd.derive("Ext.chart.Tip",Ext.Base,{constructor:function(h){var n=this,j,m,l;if(h.tips){n.tipTimeout=null;n.tipConfig=Ext.apply({},h.tips,{renderer:Ext.emptyFn,constrainPosition:true,autoHide:true,shrinkWrapDock:true});n.tooltip=new Ext.tip.ToolTip(n.tipConfig);n.chart.surface.on("mousemove",n.tooltip.onMouseMove,n.tooltip);n.chart.surface.on("mouseleave",function(){n.hideTip()});if(n.tipConfig.surface){j=n.tipConfig.surface;m=j.sprites;l=new Ext.chart.TipSurface({id:"tipSurfaceComponent",sprites:m});if(j.width&&j.height){l.setSize(j.width,j.height)}n.tooltip.add(l);n.spriteTip=l}}},showTip:function(p){var w=this,o,A,y,x,q,z,s,u,t,v;if(!w.tooltip){return}clearTimeout(w.tipTimeout);o=w.tooltip;A=w.spriteTip;y=w.tipConfig;x=o.trackMouse;if(!x){o.trackMouse=true;q=p.sprite;z=q.surface;s=Ext.get(z.getId());if(s){u=s.getXY();t=u[0]+(q.attr.x||0)+(q.attr.translation&&q.attr.translation.x||0);v=u[1]+(q.attr.y||0)+(q.attr.translation&&q.attr.translation.y||0);o.targetXY=[t,v]}}if(A){y.renderer.call(o,p.storeItem,p,A.surface)}else{y.renderer.call(o,p.storeItem,p)}o.delayShow(x);o.trackMouse=x},hideTip:function(d){var c=this.tooltip;if(!c){return}clearTimeout(this.tipTimeout);this.tipTimeout=setTimeout(function(){c.delayHide()},0)}},1,0,0,0,0,0,[Ext.chart,"Tip"],0));(Ext.cmd.derive("Ext.chart.axis.Abstract",Ext.Base,{constructor:function(e){e=e||{};var d=this,h=e.position||"left";h=h.charAt(0).toUpperCase()+h.substring(1);e.label=Ext.apply(e["axisLabel"+h+"Style"]||{},e.label||{});e.axisTitleStyle=Ext.apply(e["axisTitle"+h+"Style"]||{},e.labelTitle||{});Ext.apply(d,e);d.fields=Ext.Array.from(d.fields);this.callParent();d.labels=[];d.getId();d.labelGroup=d.chart.surface.getGroup(d.axisId+"-labels")},alignment:null,grid:false,steps:10,x:0,y:0,minValue:0,maxValue:0,getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},processView:Ext.emptyFn,onRedraw:Ext.emptyFn,drawAxis:Ext.emptyFn,addDisplayAndLabels:Ext.emptyFn},1,0,0,0,0,0,[Ext.chart.axis,"Abstract"],0));(Ext.cmd.derive("Ext.chart.axis.Axis",Ext.chart.axis.Abstract,{alternateClassName:"Ext.chart.Axis",hidden:false,forceMinMax:false,dashSize:3,position:"bottom",skipFirst:false,length:0,width:0,adjustEnd:true,majorTickSteps:false,nullGutters:{lower:0,upper:0,verticalAxis:undefined},applyData:Ext.emptyFn,getRange:function(){var Q=this,U=Q.chart,Y=U.getChartStore(),K=Y.data.items,V=U.series.items,O=Q.position,F,af=Ext.chart.series,J=[],M=Infinity,G=-Infinity,ad=Q.position==="left"||Q.position==="right"||Q.position==="radial",j,W,ac,H,I,X=K.length,aa,S={},N={},T=true,R,Z,ab,ae,P;R=Q.fields;for(H=0,W=R.length;H<W;H++){N[R[H]]=true}for(j=0,W=V.length;j<W;j++){if(V[j].seriesIsHidden){continue}if(!V[j].getAxesForXAndYFields){continue}F=V[j].getAxesForXAndYFields();if(F.xAxis&&F.xAxis!==O&&F.yAxis&&F.yAxis!==O){continue}if(af.Bar&&V[j] instanceof af.Bar&&!V[j].column){R=ad?Ext.Array.from(V[j].xField):Ext.Array.from(V[j].yField)}else{R=ad?Ext.Array.from(V[j].yField):Ext.Array.from(V[j].xField)}if(Q.fields.length){for(H=0,ac=R.length;H<ac;H++){if(N[R[H]]){break}}if(H==ac){continue}}if(aa=V[j].stacked){if(af.Bar&&V[j] instanceof af.Bar){if(V[j].column!=ad){aa=false;T=false}}else{if(!ad){aa=false;T=false}}}if(aa){Z={};for(H=0;H<R.length;H++){if(T&&V[j].__excludes&&V[j].__excludes[H]){continue}if(!N[R[H]]){Ext.Logger.warn("Field `"+R[H]+"` is not included in the "+O+" axis config.")}N[R[H]]=Z[R[H]]=true}J.push({fields:Z,positiveValue:0,negativeValue:0})}else{if(!R||R.length==0){R=Q.fields}for(H=0;H<R.length;H++){if(T&&V[j].__excludes&&V[j].__excludes[H]){continue}N[R[H]]=S[R[H]]=true}}}for(j=0;j<X;j++){ab=K[j];for(I=0;I<J.length;I++){J[I].positiveValue=0;J[I].negativeValue=0}for(ae in N){P=ab.get(ae);if(Q.type=="Time"&&typeof P=="string"){P=Date.parse(P)}if(isNaN(P)){continue}if(P===undefined){P=0}else{P=Number(P)}if(S[ae]){if(M>P){M=P}if(G<P){G=P}}for(I=0;I<J.length;I++){if(J[I].fields[ae]){if(P>=0){J[I].positiveValue+=P;if(G<J[I].positiveValue){G=J[I].positiveValue}if(M>0){M=0}}else{J[I].negativeValue+=P;if(M>J[I].negativeValue){M=J[I].negativeValue}if(G<0){G=0}}}}}}if(!isFinite(G)){G=Q.prevMax||0}if(!isFinite(M)){M=Q.prevMin||0}if(typeof M==="number"){M=Ext.Number.correctFloat(M)}if(typeof G==="number"){G=Ext.Number.correctFloat(G)}if(M!=G&&(G!=Math.floor(G)||M!=Math.floor(M))){M=Math.floor(M);G=Math.floor(G)+1}if(!isNaN(Q.minimum)){M=Q.minimum}if(!isNaN(Q.maximum)){G=Q.maximum}if(M>=G){M=Math.floor(M);G=M+1}return{min:M,max:G}},calcEnds:function(){var o=this,s=o.getRange(),p=s.min,m=s.max,t,n,q,l;t=(Ext.isNumber(o.majorTickSteps)?o.majorTickSteps+1:o.steps);n=!(Ext.isNumber(o.maximum)&&Ext.isNumber(o.minimum)&&Ext.isNumber(o.majorTickSteps)&&o.majorTickSteps>0);q=Ext.draw.Draw.snapEnds(p,m,t,n);if(Ext.isNumber(o.maximum)){q.to=o.maximum;l=true}if(Ext.isNumber(o.minimum)){q.from=o.minimum;l=true}if(o.adjustMaximumByMajorUnit){q.to=Math.ceil(q.to/q.step)*q.step;l=true}if(o.adjustMinimumByMajorUnit){q.from=Math.floor(q.from/q.step)*q.step;l=true}if(l){q.steps=Math.ceil((q.to-q.from)/q.step)}o.prevMin=(p==m?0:p);o.prevMax=m;return q},drawAxis:function(ac){var aC=this,aa,ai=aC.x,aj=aC.y,x=aC.dashSize,az=aC.length,ah=aC.position,aN=(ah=="left"||ah=="right"),aE=[],aF=(aC.isNumericAxis),av=aC.applyData(),aq=av.step,am=av.steps,ak=Ext.isArray(am),aG=av.from,y=av.to,aH=(y-aG)||1,Y,ar,at,ae,ao=aC.minorTickSteps||0,ap=aC.minorTickSteps||0,aA=Math.max(ao+1,0),aB=Math.max(ap+1,0),ag=(ah=="left"||ah=="top"?-1:1),aK=x*ag,aL=aC.chart.series.items,ad=aL[0],ay=Ext.clone(ad?ad.nullGutters:aC.nullGutters),X,aJ,aM,ab,Z,ax,al=0,an=0,aO,af,au,aw,aI,aD;aC.from=aG;aC.to=y;if(aC.hidden||(aG>y)){return}if((ak&&(am.length==0))||(!ak&&isNaN(aq))){return}if(ak){am=Ext.Array.filter(am,function(d,a,c){return(+d>+aC.from&&+d<+aC.to)},this);am=Ext.Array.union([aC.from],am,[aC.to])}else{am=new Array();for(aw=+aC.from;aw<+aC.to;aw+=aq){am.push(aw)}am.push(+aC.to)}an=am.length;for(aa=0,au=aL.length;aa<au;aa++){if(aL[aa].seriesIsHidden){continue}if(!aL[aa].getAxesForXAndYFields){continue}af=aL[aa].getAxesForXAndYFields();if(!af.xAxis||!af.yAxis||(af.xAxis===ah)||(af.yAxis===ah)){X=Ext.clone(aL[aa].getGutters());aJ=(X.verticalAxis!==undefined);aM=(aJ&&(X.verticalAxis==aN));if(aJ){if(!aM){ab=aL[aa].getPadding();if(aN){X={lower:ab.bottom,upper:ab.top,verticalAxis:true}}else{X={lower:ab.left,upper:ab.right,verticalAxis:false}}}if(ay.lower<X.lower){ay.lower=X.lower}if(ay.upper<X.upper){ay.upper=X.upper}ay.verticalAxis=aN}}}if(aF){aC.labels=[]}if(ay){if(aN){ar=Math.floor(ai);ae=["M",ar+0.5,aj,"l",0,-az];Y=az-(ay.lower+ay.upper);for(aO=0;aO<an;aO++){at=aj-ay.lower-(am[aO]-am[0])*Y/aH;ae.push("M",ar,Math.floor(at)+0.5,"l",aK*2,0);aE.push([ar,Math.floor(at)]);if(aF){aC.labels.push(am[aO])}}}else{at=Math.floor(aj);ae=["M",ai,at+0.5,"l",az,0];Y=az-(ay.lower+ay.upper);for(aO=0;aO<an;aO++){ar=ai+ay.lower+(am[aO]-am[0])*Y/aH;ae.push("M",Math.floor(ar)+0.5,at,"l",0,aK*2+1);aE.push([Math.floor(ar),at]);if(aF){aC.labels.push(am[aO])}}}}Z=(aN?ap:ao);if(Ext.isArray(Z)){if(Z.length==2){ax=+Ext.Date.add(new Date(),Z[0],Z[1])-Date.now()}else{ax=Z[0]}}else{if(Ext.isNumber(Z)&&Z>0){ax=aq/(Z+1)}}if(ay&&ax){for(aO=0;aO<an-1;aO++){aI=+am[aO];aD=+am[aO+1];if(aN){for(value=aI+ax;value<aD;value+=ax){at=aj-ay.lower-(value-am[0])*Y/aH;ae.push("M",ar,Math.floor(at)+0.5,"l",aK,0)}}else{for(value=aI+ax;value<aD;value+=ax){ar=ai+ay.upper+(value-am[0])*Y/aH;ae.push("M",Math.floor(ar)+0.5,at,"l",0,aK+1)}}}}if(!aC.axis){aC.axis=aC.chart.surface.add(Ext.apply({type:"path",path:ae},aC.axisStyle))}aC.axis.setAttributes({path:ae},true);aC.inflections=aE;if(!ac&&aC.grid){aC.drawGrid()}aC.axisBBox=aC.axis.getBBox();aC.drawLabel()},drawGrid:function(){var w=this,B=w.chart.surface,N=w.grid,K=N.odd,J=N.even,H=w.inflections,G=H.length-((K||J)?0:1),v=w.position,M=w.chart.maxGutters,C=w.width-2,A,z,y=1,D=[],I,O,F,E=[],x=[];if(((M.bottom!==0||M.top!==0)&&(v=="left"||v=="right"))||((M.left!==0||M.right!==0)&&(v=="top"||v=="bottom"))){y=0;G++}for(;y<G;y++){A=H[y];z=H[y-1];if(K||J){D=(y%2)?E:x;I=((y%2)?K:J)||{};O=(I.lineWidth||I["stroke-width"]||0)/2;F=2*O;if(v=="left"){D.push("M",z[0]+1+O,z[1]+0.5-O,"L",z[0]+1+C-O,z[1]+0.5-O,"L",A[0]+1+C-O,A[1]+0.5+O,"L",A[0]+1+O,A[1]+0.5+O,"Z")}else{if(v=="right"){D.push("M",z[0]-O,z[1]+0.5-O,"L",z[0]-C+O,z[1]+0.5-O,"L",A[0]-C+O,A[1]+0.5+O,"L",A[0]-O,A[1]+0.5+O,"Z")}else{if(v=="top"){D.push("M",z[0]+0.5+O,z[1]+1+O,"L",z[0]+0.5+O,z[1]+1+C-O,"L",A[0]+0.5-O,A[1]+1+C-O,"L",A[0]+0.5-O,A[1]+1+O,"Z")}else{D.push("M",z[0]+0.5+O,z[1]-O,"L",z[0]+0.5+O,z[1]-C+O,"L",A[0]+0.5-O,A[1]-C+O,"L",A[0]+0.5-O,A[1]-O,"Z")}}}}else{if(v=="left"){D=D.concat(["M",A[0]+0.5,A[1]+0.5,"l",C,0])}else{if(v=="right"){D=D.concat(["M",A[0]-0.5,A[1]+0.5,"l",-C,0])}else{if(v=="top"){D=D.concat(["M",A[0]+0.5,A[1]+0.5,"l",0,C])}else{D=D.concat(["M",A[0]+0.5,A[1]-0.5,"l",0,-C])}}}}}if(K||J){if(E.length){if(!w.gridOdd&&E.length){w.gridOdd=B.add({type:"path",path:E})}w.gridOdd.setAttributes(Ext.apply({path:E,hidden:false},K||{}),true)}if(x.length){if(!w.gridEven){w.gridEven=B.add({type:"path",path:x})}w.gridEven.setAttributes(Ext.apply({path:x,hidden:false},J||{}),true)}}else{if(D.length){if(!w.gridLines){w.gridLines=w.chart.surface.add({type:"path",path:D,"stroke-width":w.lineWidth||1,stroke:w.gridColor||"#ccc"})}w.gridLines.setAttributes({hidden:false,path:D},true)}else{if(w.gridLines){w.gridLines.hide(true)}}}},getOrCreateLabel:function(o,l){var n=this,h=n.labelGroup,m=h.getAt(o),j=n.chart.surface;if(m){if(l!=m.attr.text){m.setAttributes(Ext.apply({text:l},n.label),true);m._bbox=m.getBBox()}}else{m=j.add(Ext.apply({group:h,type:"text",x:0,y:0,text:l},n.label));j.renderItem(m);m._bbox=m.getBBox()}if(n.label.rotation){m.setAttributes({rotation:{degrees:0}},true);m._ubbox=m.getBBox();m.setAttributes(n.label,true)}else{m._ubbox=m._bbox}return m},rect2pointArray:function(p){var z=this.chart.surface,v=z.getBBox(p,true),o=[v.x,v.y],x=o.slice(),q=[v.x+v.width,v.y],A=q.slice(),s=[v.x+v.width,v.y+v.height],w=s.slice(),t=[v.x,v.y+v.height],y=t.slice(),u=p.matrix;o[0]=u.x.apply(u,x);o[1]=u.y.apply(u,x);q[0]=u.x.apply(u,A);q[1]=u.y.apply(u,A);s[0]=u.x.apply(u,w);s[1]=u.y.apply(u,w);t[0]=u.x.apply(u,y);t[1]=u.y.apply(u,y);return[o,q,s,t]},intersect:function(l,h){var j=this.rect2pointArray(l),e=this.rect2pointArray(h);return !!Ext.draw.Draw.intersect(j,e).length},drawHorizontalLabels:function(){var J=this,ae=J.label,S=Math.floor,x=Math.max,U=J.chart.axes,ac=J.chart.insetPadding,ad=J.chart.maxGutters,H=J.position,Z=J.inflections,V=Z.length,N=J.labels,K=0,ab,ag,I,T,ah,P=J.adjustEnd,ai=U.findIndex("position","left")!=-1,W=U.findIndex("position","right")!=-1,aa=J.reverse,R,O,M,X,Q,Y,y,af;X=V-1;I=Z[0];af=J.getOrCreateLabel(0,J.label.renderer(N[0]));ab=Math.floor(Math.abs(Math.sin(ae.rotate&&(ae.rotate.degrees*Math.PI/180)||0)));for(y=0;y<V;y++){I=Z[y];M=y;if(aa){M=V-y-1}O=J.label.renderer(N[M]);R=J.getOrCreateLabel(y,O);ag=R._bbox;K=x(K,ag.height+J.dashSize+J.label.padding);Q=S(I[0]-(ab?ag.height:ag.width)/2);if(P&&ad.left==0&&ad.right==0){if(y==0&&!ai){Q=I[0]}else{if(y==X&&!W){Q=Math.min(Q,I[0]-ag.width+ac)}}}if(H=="top"){Y=I[1]-(J.dashSize*2)-J.label.padding-(ag.height/2)}else{Y=I[1]+(J.dashSize*2)+J.label.padding+(ag.height/2)}R.setAttributes({hidden:false,x:Q,y:Y},true);if(y!=0&&(J.intersect(R,T)||J.intersect(R,af))){if(y===X&&ah!==0){T.hide(true)}else{R.hide(true);continue}}T=R;ah=y}return K},drawVerticalLabels:function(){var K=this,X=K.inflections,I=K.position,U=X.length,P=K.chart,Y=P.insetPadding,M=K.labels,E=0,H=Math.max,F=Math.floor,aa=Math.ceil,G=K.chart.axes,Z=K.chart.maxGutters,ab,N,T,ac,Q=G.findIndex("position","top")!=-1,y=G.findIndex("position","bottom")!=-1,O=K.adjustEnd,x,R,V=U-1,S,W,J;for(J=0;J<U;J++){N=X[J];R=K.label.renderer(M[J]);x=K.getOrCreateLabel(J,R);ab=x._bbox;E=H(E,ab.width+K.dashSize+K.label.padding);W=N[1];if(O&&(Z.bottom+Z.top)<ab.height/2){if(J==V&&!Q){W=Math.max(W,K.y-K.length+aa(ab.height/2)-Y)}else{if(J==0&&!y){W=K.y+Z.bottom-F(ab.height/2)}}}if(I=="left"){S=N[0]-ab.width-K.dashSize-K.label.padding-2}else{S=N[0]+K.dashSize+K.label.padding+2}x.setAttributes(Ext.apply({hidden:false,x:S,y:W},K.label),true);if(J!=0&&K.intersect(x,T)){if(J===V&&ac!==0){T.hide(true)}else{x.hide(true);continue}}T=x;ac=J}return E},drawLabel:function(){var o=this,m=o.position,l=o.labelGroup,n=o.inflections,p=0,q=0,s,t;if(m=="left"||m=="right"){p=o.drawVerticalLabels()}else{q=o.drawHorizontalLabels()}s=l.getCount();t=n.length;for(;t<s;t++){l.getAt(t).hide(true)}o.bbox={};Ext.apply(o.bbox,o.axisBBox);o.bbox.height=q;o.bbox.width=p;if(Ext.isString(o.title)){o.drawTitle(p,q)}},setTitle:function(c){this.title=c;this.drawLabel()},drawTitle:function(t,s){var x=this,y=x.position,A=x.titleAlign,D=x.chart.surface,C=x.displaySprite,u=x.title,z=(y=="left"||y=="right"),v=x.x,w=x.y,E,q,B;if(C){C.setAttributes({text:u},true)}else{E={type:"text",x:0,y:0,text:u};C=x.displaySprite=D.add(Ext.apply(E,x.axisTitleStyle,x.labelTitle));D.renderItem(C)}q=C.getBBox();B=x.dashSize+x.label.padding;if(z){if(A==="end"){w-=x.length-q.height}else{if(!A||A==="center"){w-=((x.length/2)-(q.height/2))}}if(y=="left"){v-=(t+B+(q.width/2))}else{v+=(t+B+q.width-(q.width/2))}x.bbox.width+=q.width+10}else{if(A==="end"||(x.reverse&&A==="start")){v+=x.length-q.width}else{if(!A||A==="center"){v+=(x.length/2)-(q.width*0.5)}}if(y=="top"){w-=(s+B+(q.height*0.3))}else{w+=(s+B+(q.height*0.8))}x.bbox.height+=q.height+10}C.setAttributes({translate:{x:v,y:w}},true)}},0,0,0,0,0,0,[Ext.chart.axis,"Axis",Ext.chart,"Axis"],0));(Ext.cmd.derive("Ext.chart.axis.Category",Ext.chart.axis.Axis,{alternateClassName:"Ext.chart.CategoryAxis",isCategoryAxis:true,doConstrain:function(){var o=this,p=o.chart,t=p.getChartStore(),l=t.data.items,q=p.series.items,m=q.length,n=[],s;for(s=0;s<m;s++){if(q[s].type==="bar"&&q[s].stacked){return}}for(s=o.minimum;s<o.maximum;s++){n.push(l[s])}p.setSubStore(new Ext.data.Store({model:t.model,data:n}))},setLabels:function(){var d=this.chart.getChartStore(),u=d.data.items,o,q,t,p=this.fields,n=p.length,s,w,v;s=this.labels=[];for(o=0,q=u.length;o<q;o++){t=u[o];for(v=0;v<n;v++){w=t.get(p[v]);s.push(w)}}},applyData:function(){this.callParent();this.setLabels();var c=this.chart.getChartStore().getCount();return{from:0,to:c-1,power:1,step:1,steps:c-1}}},0,0,0,0,["axis.category"],0,[Ext.chart.axis,"Category",Ext.chart,"CategoryAxis"],0));(Ext.cmd.derive("Ext.chart.axis.Gauge",Ext.chart.axis.Abstract,{position:"gauge",drawAxis:function(s){var z=this.chart,G=z.surface,t=z.chartBBox,D=t.x+(t.width/2),F=t.y+t.height,E=this.margin||10,w=Math.min(t.width,2*t.height)/2+E,A=[],v,x=this.steps,C,B=Math.PI,u=Math.cos,y=Math.sin;if(this.sprites&&!z.resizing){this.drawLabel();return}if(this.margin>=0){if(!this.sprites){for(C=0;C<=x;C++){v=G.add({type:"path",path:["M",D+(w-E)*u(C/x*B-B),F+(w-E)*y(C/x*B-B),"L",D+w*u(C/x*B-B),F+w*y(C/x*B-B),"Z"],stroke:"#ccc"});v.setAttributes({hidden:false},true);A.push(v)}}else{A=this.sprites;for(C=0;C<=x;C++){A[C].setAttributes({path:["M",D+(w-E)*u(C/x*B-B),F+(w-E)*y(C/x*B-B),"L",D+w*u(C/x*B-B),F+w*y(C/x*B-B),"Z"],stroke:"#ccc"},true)}}}this.sprites=A;this.drawLabel();if(this.title){this.drawTitle()}},drawTitle:function(){var m=this,n=m.chart,j=n.surface,l=n.chartBBox,o=m.titleSprite,h;if(!o){m.titleSprite=o=j.add(Ext.apply({type:"text",zIndex:2},m.axisTitleStyle,m.labelTitle))}o.setAttributes(Ext.apply({text:m.title},m.label||{}),true);h=o.getBBox();o.setAttributes({x:l.x+(l.width/2)-(h.width/2),y:l.y+l.height-(h.height/2)-4},true)},setTitle:function(c){this.title=c;this.drawTitle()},drawLabel:function(){var z=this,K=z.chart,G=K.surface,V=K.chartBBox,O=V.x+(V.width/2),Q=V.y+V.height,J=z.margin||10,T=Math.min(V.width,2*V.height)/2+2*J,B=Math.round,I=[],R,D=z.maximum||0,M=z.minimum||0,E=z.steps,C=Math.PI,U=Math.cos,W=Math.sin,S=this.label,H=S.renderer||Ext.identityFn,P=z.reverse,F,A,N;if(!this.labelArray){for(F=0;F<=E;F++){A=(F===0||F===E)?7:0;N=P?E-F:F;R=G.add({type:"text",text:H(B(M+N/E*(D-M))),x:O+T*U(F/E*C-C),y:Q+T*W(F/E*C-C)-A,"text-anchor":"middle","stroke-width":0.2,zIndex:10,stroke:"#333"});R.setAttributes({hidden:false},true);I.push(R)}}else{I=this.labelArray;for(F=0;F<=E;F++){A=(F===0||F===E)?7:0;N=P?E-F:F;I[F].setAttributes({text:H(B(M+N/E*(D-M))),x:O+T*U(F/E*C-C),y:Q+T*W(F/E*C-C)-A},true)}}this.labelArray=I}},0,0,0,0,["axis.gauge"],0,[Ext.chart.axis,"Gauge"],0));(Ext.cmd.derive("Ext.chart.axis.Numeric",Ext.chart.axis.Axis,{alternateClassName:"Ext.chart.NumericAxis",type:"Numeric",isNumericAxis:true,constructor:function(l){var j=this,h=!!(l.label&&l.label.renderer),e;j.callParent([l]);e=j.label;if(l.constrain==null){j.constrain=(l.minimum!=null&&l.maximum!=null)}if(!h){e.renderer=function(a){return j.roundToDecimal(a,j.decimals)}}},roundToDecimal:function(e,h){var d=Math.pow(10,h||0);return Math.round(e*d)/d},minimum:NaN,maximum:NaN,constrain:true,decimals:2,scale:"linear",doConstrain:function(){var x=this,I=x.chart,N=I.getChartStore(),H=N.data.items,y,d,O,K=I.series.items,G=x.fields,M=G.length,J=x.calcEnds(),E=J.from,B=J.to,A,D,z=false,F,l=[],C;for(y=0,d=H.length;y<d;y++){C=true;O=H[y];for(A=0;A<M;A++){F=O.get(G[A]);if(x.type=="Time"&&typeof F=="string"){F=Date.parse(F)}if(+F<+E){C=false;break}if(+F>+B){C=false;break}}if(C){l.push(O)}}I.setSubStore(new Ext.data.Store({model:N.model,data:l}))},position:"left",adjustMaximumByMajorUnit:false,adjustMinimumByMajorUnit:false,processView:function(){var l=this,m=l.chart,n=m.series.items,h,j;for(h=0,j=n.length;h<j;h++){if(n[h].stacked){delete l.minimum;delete l.maximum;l.constrain=false;break}}if(l.constrain){l.doConstrain()}},applyData:function(){this.callParent();return this.calcEnds()}},1,0,0,0,["axis.numeric"],0,[Ext.chart.axis,"Numeric",Ext.chart,"NumericAxis"],0));(Ext.cmd.derive("Ext.chart.axis.Radial",Ext.chart.axis.Numeric,{position:"radial",drawAxis:function(x){var j=this,D=j.chart,A=D.surface,K=D.getChartBBox(),H=D.getChartStore(),z=H.getCount(),E=K.x+(K.width/2),F=K.y+(K.height/2),I=Math.min(K.width,K.height)/2,G=[],C,l=j.steps,w,y,B=Math.PI*2,J=Math.cos,M=Math.sin;if(z===0){return}if(j.sprites&&j.hasLines&&!D.resizing){j.drawLabel();return}if(!j.sprites||!j.hasLines){if(!j.sprites){for(w=1;w<=l;w++){C=A.add({type:"circle",x:E,y:F,radius:Math.max(I*w/l,0),stroke:"#ccc"});C.setAttributes({hidden:false},true);G.push(C)}}for(w=0;w<z;w++){C=A.add({type:"path",path:["M",E,F,"L",E+I*J(w/z*B),F+I*M(w/z*B),"Z"],stroke:"#ccc"});C.setAttributes({hidden:false},true);G.push(C);j.hasLines=true}}else{G=j.sprites;for(w=0;w<l;w++){G[w].setAttributes({x:E,y:F,radius:Math.max(I*(w+1)/l,0),stroke:"#ccc"},true)}for(y=0;y<z;y++){G[w+y].setAttributes({path:["M",E,F,"L",E+I*J(y/z*B),F+I*M(y/z*B),"Z"],stroke:"#ccc"},true);j.hasLines=true}}j.sprites=G;j.drawLabel()},onRedraw:function(){this.drawAxis()},drawLabel:function(){var N=this,R=N.chart,ar=R.series.items,ad,ac=R.surface,at=R.chartBBox,al=R.getChartStore(),j=al.data.items,ah,am,ai=at.x+(at.width/2),aj=at.y+(at.height/2),an=Math.min(at.width,at.height)/2,V=Math.max,O=Math.round,P=[],ak,ag=[],aq,af=[],ao,T=!N.maximum,Q=N.maximum||0,U=N.minimum||0,S=N.steps,X=0,Z,Y,ab,M=Math.PI*2,ap=Math.cos,au=Math.sin,aa=N.label.display,ae=aa!=="none",W=10;if(!ae||R.getStore().getCount()===0){return}for(X=0,ah=ar.length;X<ah;X++){ad=ar[X];ag.push(ad.yField);ao=ad.xField}for(Z=0,ah=j.length;Z<ah;Z++){am=j[Z];if(T){for(X=0,aq=ag.length;X<aq;X++){Q=V(+am.get(ag[X]),Q)}}af.push(am.get(ao))}if(!N.labelArray){if(aa!="categories"){for(X=1;X<=S;X++){ak=ac.add({type:"text",text:O(X/S*Q),x:ai,y:aj-an*X/S,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"});ak.setAttributes({hidden:false},true);P.push(ak)}}if(aa!="scale"){N.labelArray=P;N.setupTextItems(ac,af,an,W,ai,aj)}}else{P=N.labelArray;if(aa!="categories"){for(X=0;X<S;X++){P[X].setAttributes({text:O((X+1)/S*(Q-U)+U),x:ai,y:aj-an*(X+1)/S,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"},true)}}if(aa!="scale"){if(N.hasTextItems){for(Z=0,S=af.length;Z<S;Z++){Y=ap(Z/S*M)*(an+W);ab=au(Z/S*M)*(an+W);if(P[X+Z]){P[X+Z].setAttributes({type:"text",text:af[Z],x:ai+Y,y:aj+ab,"text-anchor":Y*Y<=0.001?"middle":(Y<0?"end":"start")},true)}}}else{N.setupTextItems(ac,af,an,W,ai,aj)}}}N.labelArray=P},getRange:function(){var c=this.callParent();if(isNaN(this.minimum)){c.min=0}return c},setupTextItems:function(F,A,v,E,C,D){var x=A.length,z=Math.PI*2,u=Math.cos,y=Math.sin,G=this.labelArray,s,t,w,B;if(x===0||this.hasTextItems){return}for(B=0;B<x;++B){s=u(B/x*z)*(v+E);t=y(B/x*z)*(v+E);w=F.add({type:"text",text:A[B],x:C+s,y:D+t,"text-anchor":s*s<=0.001?"middle":(s<0?"end":"start")});w.setAttributes({hidden:false},true);G.push(w)}this.hasTextItems=true},processView:function(){var m=this,q=m.chart.series.items,o,n,p,j,l=[];for(o=0,n=q.length;o<n;o++){p=q[o];l.push(p.yField)}m.fields=l;delete m.maximum;j=m.calcEnds();m.maximum=j.to;m.steps=j.steps}},0,0,0,0,["axis.radial"],0,[Ext.chart.axis,"Radial"],0));(Ext.cmd.derive("Ext.chart.axis.Time",Ext.chart.axis.Numeric,{alternateClassName:"Ext.chart.TimeAxis",type:"Time",dateFormat:false,fromDate:false,toDate:false,step:[Ext.Date.DAY,1],constrain:false,constructor:function(h){var n=this,j,m,l;n.callParent([h]);j=n.label||{};l=this.dateFormat;if(l){if(j.renderer){m=j.renderer;j.renderer=function(a){a=m(a);return Ext.Date.format(new Date(m(a)),l)}}else{j.renderer=function(a){return Ext.Date.format(new Date(a>>0),l)}}}},processView:function(){var c=this;if(c.fromDate){c.minimum=+c.fromDate}if(c.toDate){c.maximum=+c.toDate}if(c.constrain){c.doConstrain()}},calcEnds:function(){var h=this,e,d=h.step;if(d){e=h.getRange();e=Ext.draw.Draw.snapEndsByDateAndStep(new Date(e.min),new Date(e.max),Ext.isNumber(d)?[Date.MILLI,d]:d);if(h.minimum){e.from=h.minimum}if(h.maximum){e.to=h.maximum}return e}else{return h.callParent(arguments)}}},1,0,0,0,["axis.time"],0,[Ext.chart.axis,"Time",Ext.chart,"TimeAxis"],0));(Ext.cmd.derive("Ext.chart.series.Series",Ext.Base,{type:null,title:null,showInLegend:true,renderer:function(l,j,n,m,h){return n},shadowAttributes:null,animating:false,nullGutters:{lower:0,upper:0,verticalAxis:undefined},nullPadding:{left:0,right:0,width:0,bottom:0,top:0,height:0},constructor:function(d){var c=this;if(d){Ext.apply(c,d)}c.shadowGroups=[];c.mixins.labels.constructor.call(c,d);c.mixins.highlights.constructor.call(c,d);c.mixins.tips.constructor.call(c,d);c.mixins.callouts.constructor.call(c,d);c.addEvents({scope:c,itemclick:true,itemdblclick:true,itemmouseover:true,itemmouseout:true,itemmousedown:true,itemmouseup:true,mouseleave:true,afterdraw:true,titlechange:true});c.mixins.observable.constructor.call(c,d);c.on({scope:c,itemmouseover:c.onItemMouseOver,itemmouseout:c.onItemMouseOut,mouseleave:c.onMouseLeave});if(c.style){Ext.apply(c.seriesStyle,c.style)}},initialize:Ext.emptyFn,onRedraw:Ext.emptyFn,eachRecord:function(h,d){var e=this.chart;e.getChartStore().each(h,d)},getRecordCount:function(){var c=this.chart,d=c.getChartStore();return d?d.getCount():0},isExcluded:function(d){var c=this.__excludes;return !!(c&&c[d])},setBBox:function(l){var p=this,q=p.chart,j=q.chartBBox,m=l?{left:0,right:0,bottom:0,top:0}:q.maxGutters,o,n;o={x:j.x,y:j.y,width:j.width,height:j.height};p.clipBox=o;n={x:(o.x+m.left)-(q.zoom.x*q.zoom.width),y:(o.y+m.bottom)-(q.zoom.y*q.zoom.height),width:(o.width-(m.left+m.right))*q.zoom.width,height:(o.height-(m.bottom+m.top))*q.zoom.height};p.bbox=n},onAnimate:function(d,e){var h=this;d.stopAnimation();if(h.animating){return d.animate(Ext.applyIf(e,h.chart.animate))}else{h.animating=true;return d.animate(Ext.apply(Ext.applyIf(e,h.chart.animate),{callback:function(){h.animating=false;h.fireEvent("afterrender",h)}}))}},getGutters:function(){return this.nullGutters},getPadding:function(){return this.nullPadding},onItemMouseOver:function(c){var d=this;if(c.series===d){if(d.highlight){d.highlightItem(c)}if(d.tooltip){d.showTip(c)}}},onItemMouseOut:function(c){var d=this;if(c.series===d){d.unHighlightItem();if(d.tooltip){d.hideTip(c)}}},onMouseLeave:function(){var c=this;c.unHighlightItem();if(c.tooltip){c.hideTip()}},getItemForPoint:function(m,n){if(!this.items||!this.items.length||this.seriesIsHidden){return null}var p=this,l=p.items,o=p.bbox,q,t,s;if(!Ext.draw.Draw.withinBox(m,n,o)){return null}for(t=0,s=l.length;t<s;t++){if(l[t]&&this.isItemInPoint(m,n,l[t],t)){return l[t]}}return null},isItemInPoint:function(h,j,l,e){return false},hideAll:function(){var n=this,o=n.items,j,p,q,s,u,l,t;n.seriesIsHidden=true;n._prevShowMarkers=n.showMarkers;n.showMarkers=false;n.hideLabels(0);for(q=0,p=o.length;q<p;q++){j=o[q];l=j.sprite;if(l){l.setAttributes({hidden:true},true)}if(l&&l.shadows){t=l.shadows;for(s=0,u=t.length;s<u;++s){t[s].setAttributes({hidden:true},true)}}}},showAll:function(){var d=this,c=d.chart.animate;d.chart.animate=false;d.seriesIsHidden=false;d.showMarkers=d._prevShowMarkers;d.drawSeries();d.chart.animate=c},hide:function(){if(this.items){var m=this,j=m.items,p,q,l,n,o;if(j&&j.length){for(p=0,n=j.length;p<n;++p){if(j[p].sprite){j[p].sprite.hide(true);o=j[p].shadows||j[p].sprite.shadows;if(o){for(q=0,l=o.length;q<l;++q){o[q].hide(true)}}}}m.hideLabels()}}},getLegendColor:function(h){var e=this,j,l;if(e.seriesStyle){j=e.seriesStyle.fill;l=e.seriesStyle.stroke;if(j&&j!="none"){return j}if(l){return l}}return(e.colorArrayStyle)?e.colorArrayStyle[e.themeIdx%e.colorArrayStyle.length]:"#000"},visibleInLegend:function(d){var c=this.__excludes;if(c){return !c[d]}return !this.seriesIsHidden},setTitle:function(h,j){var l=this,e=l.title;if(Ext.isString(h)){j=h;h=0}if(Ext.isArray(e)){e[h]=j}else{l.title=j}l.fireEvent("titlechange",j,h)}},1,0,0,0,0,[["observable",Ext.util.Observable],["labels",Ext.chart.Label],["highlights",Ext.chart.Highlight],["tips",Ext.chart.Tip],["callouts",Ext.chart.Callout]],[Ext.chart.series,"Series"],0));(Ext.cmd.derive("Ext.chart.series.Cartesian",Ext.chart.series.Series,{alternateClassName:["Ext.chart.CartesianSeries","Ext.chart.CartesianChart"],xField:null,yField:null,axis:"left",getLegendLabels:function(){var o=this,s=[],q,t,p,n=o.combinations,m,w,u,v;q=[].concat(o.yField);for(t=0,p=q.length;t<p;t++){m=o.title;s.push((Ext.isArray(m)?m[t]:m)||q[t])}if(n){n=Ext.Array.from(n);for(t=0,p=n.length;t<p;t++){w=n[t];u=s[w[0]];v=s[w[1]];s[w[1]]=u+" & "+v;s.splice(w[0],1)}}return s},eachYValue:function(l,q,s){var n=this,o=n.getYValueAccessors(),t,p,m;for(t=0,p=o.length;t<p;t++){m=o[t];q.call(s,m(l),t)}},getYValueCount:function(){return this.getYValueAccessors().length},combine:function(l,m){var n=this,o=n.getYValueAccessors(),h=o[l],j=o[m];o[m]=function(a){return h(a)+j(a)};o.splice(l,1);n.callParent([l,m])},clearCombinations:function(){delete this.yValueAccessors;this.callParent()},getYValueAccessors:function(){var n=this,j=n.yValueAccessors,l,h,o;function m(a){return function(c){return c.get(a)}}if(!j){j=n.yValueAccessors=[];l=[].concat(n.yField);for(h=0,o=l.length;h<o;h++){j.push(m(l[h]))}}return j},getMinMaxXValues:function(){var q=this,s=q.chart,o=s.getChartStore(),x=o.data.items,u=q.getRecordCount(),w,t,v,y,p,A=q.xField,z;if(u>0){y=Infinity;p=-y;for(w=0,t=x.length;w<t;w++){v=x[w];z=v.get(A);if(z>p){p=z}if(z<y){y=z}}if(y==Infinity){y=0}if(p==-Infinity){p=u-1}}else{y=p=0}return[y,p]},getMinMaxYValues:function(){var x=this,y=x.chart,t=y.getChartStore(),E=t.data.items,B=x.getRecordCount(),D,z,C,A=x.stacked,F,w,u,v;function G(a,c){if(!x.isExcluded(c)){if(a<0){v+=a}else{u+=a}}}function s(a,c){if(!x.isExcluded(c)){if(a>w){w=a}if(a<F){F=a}}}if(B>0){F=Infinity;w=-F;for(D=0,z=E.length;D<z;D++){C=E[D];if(A){u=0;v=0;x.eachYValue(C,G);if(u>w){w=u}if(v<F){F=v}}else{x.eachYValue(C,s)}}if(F==Infinity){F=0}if(w==-Infinity){w=B-1}}else{F=w=0}return[F,w]},getAxesForXAndYFields:function(){var t=this,u=t.chart.axes,w=t.reverse,B=[].concat(t.axis),C={},A=[].concat(t.yField),s={},q=[].concat(t.xField),x,D,E,y,v,z;z=t.type==="bar"&&t.column===false;if(z){x=A;A=q;q=x}if(Ext.Array.indexOf(B,"top")>-1){D="top"}else{if(Ext.Array.indexOf(B,"bottom")>-1){D="bottom"}else{if(u.get("top")&&u.get("bottom")){for(y=0,v=q.length;y<v;y++){s[q[y]]=true}x=[].concat(u.get("bottom").fields);for(y=0,v=x.length;y<v;y++){if(s[x[y]]){D="bottom";break}}x=[].concat(u.get("top").fields);for(y=0,v=x.length;y<v;y++){if(s[x[y]]){D="top";break}}}else{if(u.get("top")){D="top"}else{if(u.get("bottom")){D="bottom"}}}}}if(Ext.Array.indexOf(B,"left")>-1){E=z?"right":"left"}else{if(Ext.Array.indexOf(B,"right")>-1){E=z?"left":"right"}else{if(u.get("left")&&u.get("right")){for(y=0,v=A.length;y<v;y++){C[A[y]]=true}x=[].concat(u.get("right").fields);for(y=0,v=x.length;y<v;y++){if(C[x[y]]){break}}x=[].concat(u.get("left").fields);for(y=0,v=x.length;y<v;y++){if(C[x[y]]){E="left";break}}}else{if(u.get("left")){E="left"}else{if(u.get("right")){E="right"}}}}}return z?{xAxis:E,yAxis:D}:{xAxis:D,yAxis:E}}},0,0,0,0,0,0,[Ext.chart.series,"Cartesian",Ext.chart,"CartesianSeries",Ext.chart,"CartesianChart"],0));(Ext.cmd.derive("Ext.chart.series.Area",Ext.chart.series.Cartesian,{type:"area",stacked:true,style:{},constructor:function(n){this.callParent(arguments);var l=this,j=l.chart.surface,m,h;n.highlightCfg=Ext.Object.merge({},{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},n.highlightCfg);Ext.apply(l,n,{__excludes:[]});if(l.highlight){l.highlightSprite=j.add({type:"path",path:["M",0,0],zIndex:1000,opacity:0.3,lineWidth:5,hidden:true,stroke:"#444"})}l.group=j.getGroup(l.seriesId)},shrink:function(z,p,j){var t=z.length,q=Math.floor(t/j),u,v,x=0,s=this.areas.length,A=[],w=[],y=[];for(v=0;v<s;++v){A[v]=0}for(u=0;u<t;++u){x+=+z[u];for(v=0;v<s;++v){A[v]+=+p[u][v]}if(u%q==0){w.push(x/q);for(v=0;v<s;++v){A[v]/=q}y.push(A);x=0;for(v=0,A=[];v<s;++v){A[v]=0}}}return{x:w,y:y}},getBounds:function(){var at=this,P=at.chart,aA=P.getChartStore(),Q=aA.data.items,T,W,af,ah=[].concat(at.yField),ac=ah.length,ad=[],Z=[],av=Infinity,aa=av,ab=av,ap=-av,aq=-av,ak=Math,ag=ak.min,aw=ak.max,an=at.getAxesForXAndYFields(),S=an.xAxis,ai=an.yAxis,V,al,Y,ar,au,X,am,l,R,az,aj,U,ay,ax,ao,ae;at.setBBox();ar=at.bbox;if(ao=P.axes.get(S)){if(ao.type==="Time"){al=true}V=ao.applyData();aa=V.from;ap=V.to}if(ao=P.axes.get(ai)){V=ao.applyData();ab=V.from;aq=V.to}if(at.xField&&!Ext.isNumber(aa)){ao=at.getMinMaxXValues();al=true;aa=ao[0];ap=ao[1]}if(at.yField&&!Ext.isNumber(ab)){ao=at.getMinMaxYValues();ab=ao[0];aq=ao[1]}if(!Ext.isNumber(ab)){ab=0}if(!Ext.isNumber(aq)){aq=0}W=Q.length;if(W>0&&al){Y=Q[0].get(at.xField);if(typeof Y!="number"){Y=+Y;if(isNaN(Y)){al=false}}}for(T=0;T<W;T++){af=Q[T];am=af.get(at.xField);l=[];if(typeof am!="number"){if(al){am=+am}else{am=T}}ad.push(am);az=0;for(R=0;R<ac;R++){if(at.__excludes[R]){continue}ax=af.get(ah[R]);if(typeof ax=="number"){l.push(ax)}}Z.push(l)}au=ar.width/((ap-aa)||1);X=ar.height/((aq-ab)||1);aj=ad.length;if((aj>ar.width)&&at.areas){U=at.shrink(ad,Z,ar.width);ad=U.x;Z=U.y}return{bbox:ar,minX:aa,minY:ab,xValues:ad,yValues:Z,xScale:au,yScale:X,areasLen:ac}},getPaths:function(){var K=this,O=K.chart,Y=O.getChartStore(),W=true,V=K.getBounds(),aa=V.bbox,N=K.items=[],M=[],Z,X=0,I=[],U=K.reverse,E,S,R,T,G,y,Q,H,F,x,J,D,P;S=V.xValues.length;for(E=0;E<S;E++){G=V.xValues[E];P=U?S-E-1:E;y=V.yValues[P];R=aa.x+(G-V.minX)*V.xScale;if(D===undefined){D=R}Q=0;X=0;for(H=0;H<V.areasLen;H++){if(K.__excludes[H]){continue}if(!M[H]){M[H]=[]}x=y[X];Q+=x;T=aa.y+aa.height-(Q-V.minY)*V.yScale;if(!I[H]){I[H]=["M",R,T];M[H].push(["L",R,T])}else{I[H].push("L",R,T);M[H].push(["L",R,T])}if(!N[H]){N[H]={pointsUp:[],pointsDown:[],series:K}}N[H].pointsUp.push([R,T]);X++}}for(H=0;H<V.areasLen;H++){if(K.__excludes[H]){continue}J=I[H];if(H==0||W){W=false;J.push("L",R,aa.y+aa.height,"L",D,aa.y+aa.height,"Z")}else{Z=M[F];Z.reverse();J.push("L",R,Z[0][2]);for(E=0;E<S;E++){J.push(Z[E][0],Z[E][1],Z[E][2]);N[H].pointsDown[S-E-1]=[Z[E][1],Z[E][2]]}J.push("L",D,J[2],"Z")}F=H}return{paths:I,areasLen:V.areasLen}},drawSeries:function(){var A=this,B=A.chart,y=B.getChartStore(),E=B.surface,F=B.animate,w=A.group,G=Ext.apply(A.seriesStyle,A.style),v=A.colorArrayStyle,s=v&&v.length||0,H=A.themeIdx,D,C,t,u,x,z;A.unHighlightItem();A.cleanHighlights();if(!y||!y.getCount()||A.seriesIsHidden){A.hide();A.items=[];return}t=A.getPaths();if(!A.areas){A.areas=[]}for(D=0;D<t.areasLen;D++){if(A.__excludes[D]){continue}z=H+D;if(!A.areas[D]){A.items[D].sprite=A.areas[D]=E.add(Ext.apply({},{type:"path",group:w,path:t.paths[D],stroke:G.stroke||v[z%s],fill:v[z%s]},G||{}))}C=A.areas[D];u=t.paths[D];if(F){x=A.renderer(C,false,{path:u,fill:v[D%s],stroke:G.stroke||v[D%s]},D,y);A.animation=A.onAnimate(C,{to:x})}else{x=A.renderer(C,false,{path:u,hidden:false,fill:v[z%s],stroke:G.stroke||v[z%s]},D,y);A.areas[D].setAttributes(x,true)}}A.renderLabels();A.renderCallouts()},onAnimate:function(c,d){c.show();return this.callParent(arguments)},onCreateLabel:function(q,l,s,p){return null;var o=this,n=o.labelsGroup,u=o.label,m=o.bbox,t=Ext.apply({},u,o.seriesLabelStyle||{});return o.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:n,x:Number(l.point[0]),y:m.y+m.height/2},t||{}))},onPlaceLabel:function(J,G,x,A,C,M,K){var v=this,F=v.chart,y=F.resizing,w=v.label,z=w.renderer,N=w.field,O=v.bbox,H=Number(x.point[A][0]),I=Number(x.point[A][1]),B,D,E;J.setAttributes({text:z(G.get(N[K]),J,G,x,A,C,M,K),hidden:true},true);B=J.getBBox();D=B.width/2;E=B.height/2;if(H<O.x+D){H=O.x+D}else{if(H+D>O.x+O.width){H=O.x+O.width-D}}I=I-E;if(I<O.y+E){I+=2*E}else{if(I+E>O.y+O.height){I-=2*E}}if(v.chart.animate&&!v.chart.resizing){J.show(true);v.onAnimate(J,{to:{x:H,y:I}})}else{J.setAttributes({x:H,y:I},true);if(y&&v.animation){v.animation.on("afteranimate",function(){J.show(true)})}else{J.show(true)}}},onPlaceCallout:function(ai,ac,P,T,W,ap,ak){var p=this,Z=p.chart,aa=Z.surface,S=Z.resizing,x=p.callouts,Y=p.items,U=(T==0)?false:Y[T-1].point,O=(T==Y.length-1)?false:Y[T+1].point,aq=P.point,af,an,a,y,ag,ae,ar=(ai&&ai.label?ai.label.getBBox():{width:0,height:0}),Q=30,ab=10,ad=3,am,ao,al,R,V,X=p.clipRect,ah,aj;if(!ar.width||!ar.height){return}if(!U){U=aq}if(!O){O=aq}y=(O[1]-U[1])/(O[0]-U[0]);ag=(aq[1]-U[1])/(aq[0]-U[0]);ae=(O[1]-aq[1])/(O[0]-aq[0]);an=Math.sqrt(1+y*y);af=[1/an,y/an];a=[-af[1],af[0]];if(ag>0&&ae<0&&a[1]<0||ag<0&&ae>0&&a[1]>0){a[0]*=-1;a[1]*=-1}else{if(Math.abs(ag)<Math.abs(ae)&&a[0]<0||Math.abs(ag)>Math.abs(ae)&&a[0]>0){a[0]*=-1;a[1]*=-1}}ah=aq[0]+a[0]*Q;aj=aq[1]+a[1]*Q;am=ah+(a[0]>0?0:-(ar.width+2*ad));ao=aj-ar.height/2-ad;al=ar.width+2*ad;R=ar.height+2*ad;if(am<X[0]||(am+al)>(X[0]+X[2])){a[0]*=-1}if(ao<X[1]||(ao+R)>(X[1]+X[3])){a[1]*=-1}ah=aq[0]+a[0]*Q;aj=aq[1]+a[1]*Q;am=ah+(a[0]>0?0:-(ar.width+2*ad));ao=aj-ar.height/2-ad;al=ar.width+2*ad;R=ar.height+2*ad;ai.lines.setAttributes({path:["M",aq[0],aq[1],"L",ah,aj,"Z"]},true);ai.box.setAttributes({x:am,y:ao,width:al,height:R},true);ai.label.setAttributes({x:ah+(a[0]>0?ad:-(ar.width+ad)),y:aj},true);for(V in ai){ai[V].show(true)}},isItemInPoint:function(x,y,u,D){var z=this,E=u.pointsUp,B=u.pointsDown,p=Math.abs,s=false,v=false,C=z.reverse,A=Infinity,F,t,w;for(F=0,t=E.length;F<t;F++){w=[E[F][0],E[F][1]];s=false;v=F==t-1;if(A>p(x-w[0])){A=p(x-w[0]);s=true;if(v){++F}}if(!s||(s&&v)){w=E[F-1];if(y>=w[1]&&(!B.length||y<=(B[F-1][1]))){idx=C?t-F:F-1;u.storeIndex=idx;u.storeField=z.yField[D];u.storeItem=z.chart.getChartStore().getAt(idx);u._points=B.length?[w,B[F-1]]:[w];return true}else{break}}}return false},highlightSeries:function(){var e,h,d;if(this._index!==undefined){e=this.areas[this._index];if(e.__highlightAnim){e.__highlightAnim.paused=true}e.__highlighted=true;e.__prevOpacity=e.__prevOpacity||e.attr.opacity||1;e.__prevFill=e.__prevFill||e.attr.fill;e.__prevLineWidth=e.__prevLineWidth||e.attr.lineWidth;d=Ext.draw.Color.fromString(e.__prevFill);h={lineWidth:(e.__prevLineWidth||0)+2};if(d){h.fill=d.getLighter(0.2).toString()}else{h.opacity=Math.max(e.__prevOpacity-0.3,0)}if(this.chart.animate){e.__highlightAnim=new Ext.fx.Anim(Ext.apply({target:e,to:h},this.chart.animate))}else{e.setAttributes(h,true)}}},unHighlightSeries:function(){var c;if(this._index!==undefined){c=this.areas[this._index];if(c.__highlightAnim){c.__highlightAnim.paused=true}if(c.__highlighted){c.__highlighted=false;c.__highlightAnim=new Ext.fx.Anim({target:c,to:{fill:c.__prevFill,opacity:c.__prevOpacity,lineWidth:c.__prevLineWidth}})}}},highlightItem:function(l){var e=this,h,j;if(!l){this.highlightSeries();return}h=l._points;if(h.length===2){j=["M",h[0][0],h[0][1],"L",h[1][0],h[1][1]]}else{j=["M",h[0][0],h[0][1],"L",h[0][0],e.bbox.y+e.bbox.height]}e.highlightSprite.setAttributes({path:j,hidden:false},true)},unHighlightItem:function(c){if(!c){this.unHighlightSeries()}if(this.highlightSprite){this.highlightSprite.hide(true)}},hideAll:function(d){var c=this;d=(isNaN(c._index)?d:c._index)||0;c.__excludes[d]=true;c.areas[d].hide(true);c.redraw()},showAll:function(d){var c=this;d=(isNaN(c._index)?d:c._index)||0;c.__excludes[d]=false;c.areas[d].show(true);c.redraw()},redraw:function(){var d=this,c;c=d.chart.legend.rebuild;d.chart.legend.rebuild=false;d.chart.redraw();d.chart.legend.rebuild=c},hide:function(){if(this.areas){var m=this,j=m.areas,p,q,l,n,o;if(j&&j.length){for(p=0,n=j.length;p<n;++p){if(j[p]){j[p].hide(true)}}m.hideLabels()}}},getLegendColor:function(d){var c=this;d+=c.themeIdx;return c.colorArrayStyle[d%c.colorArrayStyle.length]}},1,0,0,0,["series.area"],0,[Ext.chart.series,"Area"],0));(Ext.cmd.derive("Ext.chart.series.Bar",Ext.chart.series.Cartesian,{alternateClassName:["Ext.chart.BarSeries","Ext.chart.BarChart","Ext.chart.StackedBarChart"],type:"bar",column:false,style:{},gutter:38.2,groupGutter:38.2,xPadding:0,yPadding:10,defaultRotate:{x:0,y:0,degrees:0},constructor:function(o){this.callParent(arguments);var m=this,j=m.chart.surface,l=m.chart.shadow,n,h;o.highlightCfg=Ext.Object.merge({lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},o.highlightCfg);Ext.apply(m,o,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:1.2}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:0.9}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:0.6}}]});m.group=j.getGroup(m.seriesId+"-bars");if(l){for(n=0,h=m.shadowAttributes.length;n<h;n++){m.shadowGroups.push(j.getGroup(m.seriesId+"-shadows"+n))}}},getPadding:function(){var l=this,e=l.xPadding,h=l.yPadding,j={};if(Ext.isNumber(e)){j.left=e;j.right=e}else{if(Ext.isObject(e)){j.left=e.left;j.right=e.right}else{j.left=0;j.right=0}}j.width=j.left+j.right;if(Ext.isNumber(h)){j.bottom=h;j.top=h}else{if(Ext.isObject(h)){j.bottom=h.bottom;j.top=h.top}else{j.bottom=0;j.top=0}}j.height=j.bottom+j.top;return j},getBarGirth:function(){var p=this,l=p.chart.getChartStore(),j=p.column,q=l.getCount(),m=p.gutter/100,n,o;o=(j?"width":"height");if(p.style&&p.style[o]){p.configuredColumnGirth=true;return +p.style[o]}n=p.getPadding();return(p.chart.chartBBox[o]-n[o])/(q*(m+1)-m)},getGutters:function(){var o=this,h=o.column,m=o.getPadding(),n=o.getBarGirth()/2,l=Math.ceil((h?m.left:m.bottom)+n),j=Math.ceil((h?m.right:m.top)+n);return{lower:l,upper:j,verticalAxis:!h}},getBounds:function(){var aC=this,j=aC.chart,aO=j.getChartStore(),X=aO.data.items,Y,aq,ak,at=[].concat(aC.yField),aG=[],aB=at.length,aF=aB,aN=aC.groupGutter/100,af=aC.column,aa=aC.getPadding(),ac=aC.stacked,av=aC.getBarGirth(),ap=af?"width":"height",au=Math,am=au.min,aI=au.max,aE=au.abs,ah=aC.getAxesForXAndYFields(),an=ah.yAxis,ag,ax,ad,aJ,ay,Z,al,aL,aA,ai,az,aw,aj,ao,aQ,ar,ae,ab,aM,aK,aD,aP,aH;aC.setBBox(true);aA=aC.bbox;if(aC.__excludes){for(ab=0,ar=aC.__excludes.length;ab<ar;ab++){if(aC.__excludes[ab]){aF--}}}aw=j.axes.get(an);if(aw){Z=aw.applyData();ai=Z.from;az=Z.to}if(aC.yField&&!Ext.isNumber(ai)){aj=aC.getMinMaxYValues();ai=aj[0];az=aj[1]}if(!Ext.isNumber(ai)){ai=0}if(!Ext.isNumber(az)){az=0}ao=(af?aA.height-aa.height:aA.width-aa.width)/(az-ai);al=av;aL=(av/((ac?1:aF)*(aN+1)-aN));if(ap in aC.style){aL=am(aL,aC.style[ap]);al=aL*((ac?1:aF)*(aN+1)-aN)}aQ=(af)?aA.y+aA.height-aa.bottom:aA.x+aa.left;if(ac){ar=[[],[]];for(Y=0,aq=X.length;Y<aq;Y++){ak=X[Y];ar[0][Y]=ar[0][Y]||0;ar[1][Y]=ar[1][Y]||0;for(ab=0;ab<aB;ab++){if(aC.__excludes&&aC.__excludes[ab]){continue}ae=ak.get(at[ab]);ar[+(ae>0)][Y]+=aE(ae)}}ar[+(az>0)].push(aE(az));ar[+(ai>0)].push(aE(ai));aK=aI.apply(au,ar[0]);aM=aI.apply(au,ar[1]);ao=(af?aA.height-aa.height:aA.width-aa.width)/(aM+aK);aQ=aQ+aK*ao*(af?-1:1)}else{if(ai/az<0){aQ=aQ-ai*ao*(af?-1:1)}}if(aC.boundColumn){aw=j.axes.get(ah.xAxis);if(aw){Z=aw.applyData();ag=Z.from;ax=Z.to}if(aC.xField&&!Ext.isNumber(ag)){aj=aC.getMinMaxYValues();ag=aj[0];ax=aj[1]}if(!Ext.isNumber(ag)){ag=0}if(!Ext.isNumber(ax)){ax=0}ay=aC.getGutters();ad=(aA.width-(ay.lower+ay.upper))/((ax-ag)||1);aJ=aA.x+ay.lower;aG=[];for(Y=0,aq=X.length;Y<aq;Y++){ak=X[Y];ae=ak.get(aC.xField);aG[Y]=aJ+(ae-ag)*ad-(aL/2)}}else{if(aC.configuredColumnGirth){aw=j.axes.get(ah.xAxis);if(aw){aD=aw.inflections;if(aw.isCategoryAxis||aD.length>=X.length){aG=[];for(Y=0,aq=X.length;Y<aq;Y++){aP=aD[Y];aH=af?aP[0]:aP[1];aG[Y]=aH-(al/2)}}}}}return{bars:at,barsLoc:aG,bbox:aA,shrunkBarWidth:al,barsLen:aB,groupBarsLen:aF,barWidth:av,groupBarWidth:aL,scale:ao,zero:aQ,padding:aa,signed:ai/az<0,minY:ai,maxY:az}},getPaths:function(){var aW=this,aI=aW.chart,bc=aI.getChartStore(),aJ=bc.data.items,aO,aA,at,ay=aW.bounds=aW.getBounds(),aS=aW.items=[],an=Ext.isArray(aW.yField)?aW.yField:[aW.yField],a4=aW.gutter/100,bb=aW.groupGutter/100,j=aI.animate,aq=aW.column,aU=aW.group,a3=aI.shadow,al=aW.shadowGroups,am=aW.shadowAttributes,a0=al.length,aT=ay.bbox,aK=ay.barWidth,au=ay.shrunkBarWidth,aQ=aW.getPadding(),ak=aW.stacked,aV=ay.barsLen,ap=aW.colorArrayStyle,a6=ap&&ap.length||0,a7=aW.themeIdx,ao=aW.reverse,aG=Math,a2=aG.max,aw=aG.min,aX=aG.abs,aR,aE,a9,av,aC,bd,a5,aY,aZ,a1,a8,aB,aD,ba,az,aP,ar,ax,aM,aj,aH,aF,be,aN,aL;for(aO=0,aA=aJ.length;aO<aA;aO++){at=aJ[aO];bd=ay.zero;a5=ay.zero;av=0;aC=0;aB=aD=0;aY=false;aN=0;for(aR=0,a8=0;aR<aV;aR++){if(aW.__excludes&&aW.__excludes[aR]){continue}aE=at.get(ay.bars[aR]);if(aE>=0){aB+=aE}else{aD+=aE}a9=Math.round((aE-a2(ay.minY,0))*ay.scale);aM=a7+(aV>1?aR:0);aZ={fill:ap[aM%a6]};if(aq){aM=ao?(aA-aO-1):aO;aL=ao?(aV-a8-1):a8;if(aW.boundColumn){aH=ay.barsLoc[aM]}else{if(aW.configuredColumnGirth&&ay.barsLoc.length){aH=ay.barsLoc[aM]+aL*ay.groupBarWidth*(1+bb)*!ak}else{aH=aT.x+aQ.left+(aK-au)*0.5+aM*aK*(1+a4)+aL*ay.groupBarWidth*(1+bb)*!ak}}Ext.apply(aZ,{height:a9,width:a2(ay.groupBarWidth,0),x:aH,y:bd-a9})}else{ar=(aA-1)-aO;be=a9+(bd==ay.zero);aH=bd+(bd!=ay.zero);if(ao){aH=ay.zero+aT.width-be-(aN===0?1:0);if(ak){aH-=aN;aN+=be}}if(aW.configuredColumnGirth&&ay.barsLoc.length){aF=ay.barsLoc[aO]+a8*ay.groupBarWidth*(1+bb)*!ak}else{aF=aT.y+aQ.top+(aK-au)*0.5+ar*aK*(1+a4)+a8*ay.groupBarWidth*(1+bb)*!ak+1}Ext.apply(aZ,{height:a2(ay.groupBarWidth,0),width:be,x:aH,y:aF})}if(a9<0){if(aq){aZ.y=a5;aZ.height=aX(a9)}else{aZ.x=a5+a9;aZ.width=aX(a9)}}if(ak){if(a9<0){a5+=a9*(aq?-1:1)}else{bd+=a9*(aq?-1:1)}av+=aX(a9);if(a9<0){aC+=aX(a9)}}aZ.x=Math.floor(aZ.x)+1;ax=Math.floor(aZ.y);if(Ext.isIE8m&&aZ.y>ax){ax--}aZ.y=ax;aZ.width=Math.floor(aZ.width);aZ.height=Math.floor(aZ.height);aS.push({series:aW,yField:an[aR],storeItem:at,value:[at.get(aW.xField),aE],attr:aZ,point:aq?[aZ.x+aZ.width/2,aE>=0?aZ.y:aZ.y+aZ.height]:[aE>=0?aZ.x+aZ.width:aZ.x,aZ.y+aZ.height/2]});if(j&&aI.resizing){a1=aq?{x:aZ.x,y:ay.zero,width:aZ.width,height:0}:{x:ay.zero,y:aZ.y,width:0,height:aZ.height};if(a3&&(ak&&!aY||!ak)){aY=true;for(ba=0;ba<a0;ba++){az=al[ba].getAt(ak?aO:(aO*aV+aR));if(az){az.setAttributes(a1,true)}}}aP=aU.getAt(aO*aV+aR);if(aP){aP.setAttributes(a1,true)}}a8++}if(ak&&aS.length){aS[aO*a8].totalDim=av;aS[aO*a8].totalNegDim=aC;aS[aO*a8].totalPositiveValues=aB;aS[aO*a8].totalNegativeValues=aD}}if(ak&&a8==0){for(aO=0,aA=aJ.length;aO<aA;aO++){for(ba=0;ba<a0;ba++){az=al[ba].getAt(aO);if(az){az.hide(true)}}}}},renderShadows:function(F,E,j,S){var N=this,M=N.chart,H=M.surface,V=M.animate,C=N.stacked,aa=N.shadowGroups,D=N.shadowAttributes,O=aa.length,U=M.getChartStore(),X=N.column,I=N.items,Z=[],R=N.reverse,Q=S.zero,W,J,T,K,P,G,Y;if((C&&(F%S.groupBarsLen===0))||!C){G=F/S.groupBarsLen;for(W=0;W<O;W++){J=Ext.apply({},D[W]);T=aa[W].getAt(C?G:F);Ext.copyTo(J,E,"x,y,width,height");if(!T){T=H.add(Ext.apply({type:"rect",isShadow:true,group:aa[W]},Ext.apply({},j,J)))}if(C){K=I[F].totalDim;P=I[F].totalNegDim;if(X){J.y=Q+P-K-1;J.height=K}else{if(R){J.x=Q+S.bbox.width-K}else{J.x=Q-P}J.width=K}}Y=N.renderer(T,U.getAt(G),J,F,U);Y.hidden=!!E.hidden;if(V){N.onAnimate(T,{zero:S.zero+(R?S.bbox.width:0),to:Y})}else{T.setAttributes(Y,true)}Z.push(T)}}return Z},drawSeries:function(){var M=this,R=M.chart,ab=R.getChartStore(),I=R.surface,ad=R.animate,S=M.stacked,ah=M.column,P=R.axes,H=M.getAxesForXAndYFields(),J=H.xAxis,aa=H.yAxis,aj=R.shadow,ak=M.shadowGroups,U=ak.length,Y=M.group,af=M.seriesStyle,Q,W,V,X,O,N,ai,ag,ae,Z,ac,T,K,j;if(!ab||!ab.getCount()||M.seriesIsHidden){M.hide();M.items=[];return}ac=Ext.apply({},this.style,af);delete ac.fill;delete ac.x;delete ac.y;delete ac.width;delete ac.height;M.unHighlightItem();M.cleanHighlights();M.boundColumn=(J&&Ext.Array.contains(M.axis,J)&&P.get(J)&&P.get(J).isNumericAxis);M.getPaths();Z=M.bounds;Q=M.items;O=ah?{y:Z.zero,height:0}:{x:Z.zero,width:0};W=Q.length;for(V=0;V<W;V++){N=Y.getAt(V);T=Q[V].attr;if(aj){Q[V].shadows=M.renderShadows(V,T,O,Z)}if(!N){K=Ext.apply({},O,T);K=Ext.apply(K,ac||{});N=I.add(Ext.apply({},{type:"rect",group:Y},K))}if(ad){ai=M.renderer(N,ab.getAt(V),T,V,ab);N._to=ai;j=M.onAnimate(N,{zero:Z.zero+(M.reverse?Z.bbox.width:0),to:Ext.apply(ai,ac)});if(aj&&S&&(V%Z.barsLen===0)){X=V/Z.barsLen;for(ag=0;ag<U;ag++){j.on("afteranimate",function(){this.show(true)},ak[ag].getAt(X))}}}else{ai=M.renderer(N,ab.getAt(V),Ext.apply(T,{hidden:false}),V,ab);N.setAttributes(Ext.apply(ai,ac),true)}Q[V].sprite=N}W=Y.getCount();for(X=V;X<W;X++){Y.getAt(X).hide(true)}if(M.stacked){V=ab.getCount()}if(aj){for(ag=0;ag<U;ag++){ae=ak[ag];W=ae.getCount();for(X=V;X<W;X++){ae.getAt(X).hide(true)}}}M.renderLabels()},onCreateLabel:function(s,m,t,q){var p=this,w=p.chart.surface,n=p.labelsGroup,v=p.label,u=Ext.apply({},v,p.seriesLabelStyle||{}),o;return w.add(Ext.apply({type:"text",group:n},u||{}))},onPlaceLabel:function(Z,y,ao,W,ar,X,al){var aw=this,av=aw.bounds,aD=av.groupBarWidth,ab=aw.column,U=aw.chart,am=U.chartBBox,ag=U.resizing,at=ao.value[0],x=ao.value[1],ax=ao.attr,ai=aw.label,Y=aw.stacked,aA=ai.stackedDisplay,V=(ai.orientation=="vertical"),az=[].concat(ai.field),an=ai.renderer,ap,aB,aG,aE,aF=av.zero,aq="insideStart",T="insideEnd",ay="outside",ad="over",au="under",ac=4,ae=2,aC=av.signed,aa=aw.reverse,af,ah,aj;if(ar==aq||ar==T||ar==ay){if(Y&&(ar==ay)){Z.hide(true);return}Z.setAttributes({style:undefined});ap=(Ext.isNumber(al)?an(y.get(az[al]),Z,y,ao,W,ar,X,al):"");Z.setAttributes({text:ap});aB=aw.getLabelSize(ap,Z.attr.style);aG=aB.width;aE=aB.height;if(ab){if(!aG||!aE||(Y&&(ax.height<aE))){Z.hide(true);return}af=ax.x+(V?aD/2:(aD-aG)/2);if(ar==ay){var ak=(x>=0?(ax.y-am.y):(am.y+am.height-ax.y-ax.height));if(ak<aE+ae){ar=T}}if(!Y&&(ar!=ay)){if(aE+ae>ax.height){ar=ay}}if(!ah){ah=ax.y;if(x>=0){switch(ar){case aq:ah+=ax.height+(V?-ae:-aE/2);break;case T:ah+=(V?aE+ac:aE/2);break;case ay:ah+=(V?-ae:-aE/2);break}}else{switch(ar){case aq:ah+=(V?aE+ae:aE/2);break;case T:ah+=(V?ax.height-ae:ax.height-aE/2);break;case ay:ah+=(V?ax.height+aE+ae:ax.height+aE/2);break}}}}else{if(!aG||!aE||(Y&&!ax.width)){Z.hide(true);return}ah=ax.y+(V?(aD+aE)/2:aD/2);if(ar==ay){var ak=(x>=0?(am.x+am.width-ax.x-ax.width):(ax.x-am.x));if(ak<aG+ac){ar=T}}if((ar!=ay)&&!V){if(aG+ac*2>=ax.width){if(Y){if(aE>ax.width){Z.hide(true);return}af=ax.x+ax.width/2;V=true}else{ar=ay}}}if(!af){af=ax.x;if(x>=0){switch(ar){case aq:if(aa){af+=ax.width+(V?-aG/2:-aG-ac)}else{af+=(V?aG/2:ac)}break;case T:if(aa){af-=V?-aG/2:-aG-ac}else{af+=ax.width+(V?-aG/2:-aG-ac)}break;case ay:if(aa){af-=aG+(V?aG/2:ac)}else{af+=ax.width+(V?aG/2:ac)}break}}else{switch(ar){case aq:if(aa){af-=V?-aG/2:-aG-ac}else{af+=ax.width+(V?-aG/2:-aG-ac)}break;case T:if(aa){af+=ax.width+(V?-aG/2:-aG-ac)}else{af+=(V?aG/2:ac)}break;case ay:if(aa){af-=aG+(V?aG/2:ac)}else{af+=(V?-aG/2:-aG-ac)}break}}}}}else{if(ar==ad||ar==au){if(Y&&aA){ap=Z.attr.text;Z.setAttributes({style:Ext.applyIf((Z.attr&&Z.attr.style)||{},{"font-weight":"bold","font-size":"14px"})});aB=aw.getLabelSize(ap,Z.attr.style);aG=aB.width;aE=aB.height;switch(ar){case ad:if(ab){af=ax.x+(V?aD/2:(aD-aG)/2);ah=aF-(ao.totalDim-ao.totalNegDim)-aE/2-ae}else{af=aF+(ao.totalDim-ao.totalNegDim)+ac;ah=ax.y+(V?(aD+aE)/2:aD/2)}break;case au:if(ab){af=ax.x+(V?aD/2:(aD-aG)/2);ah=aF+ao.totalNegDim+aE/2}else{af=aF-ao.totalNegDim-aG-ac;ah=ax.y+(V?(aD+aE)/2:aD/2)}break}}}}if(af==undefined||ah==undefined){Z.hide(true);return}Z.isOutside=(ar==ay);Z.setAttributes({text:ap});aj={x:af,y:ah};aj.rotate=V?{x:af,y:ah,degrees:270}:aw.defaultRotate;if(X&&ag){if(ab){af=ax.x+ax.width/2;ah=aF}else{af=aF;ah=ax.y+ax.height/2}Z.setAttributes({x:af,y:ah},true);if(V){Z.setAttributes({rotate:{x:af,y:ah,degrees:270}},true)}}if(X){aw.onAnimate(Z,{zero:ao.point[0],to:aj})}else{Z.setAttributes(Ext.apply(aj,{hidden:false}),true)}},getLabelSize:function(p,q){var h=this.testerLabel,w=this.label,t=Ext.apply({},w,q,this.seriesLabelStyle||{}),v=w.orientation==="vertical",n,o,s,u;if(!h){h=this.testerLabel=this.chart.surface.add(Ext.apply({type:"text",opacity:0},t))}h.setAttributes({style:q,text:p},true);n=h.getBBox();o=n.width;s=n.height;return{width:v?s:o,height:v?o:s}},onAnimate:function(o,u){var t=this,p=u.to,w=t.stacked,v=t.reverse,y=0,x,n,s,q;o.show();if(!t.column){if(v){n=o.getBBox();x=o.type=="text";if(!t.inHighlight){if(!w){if(x){s=n.x>=5?s:u.zero}else{if(n.width){y=n.width}s=n.width?n.x:p.x+p.width}}else{s=u.zero}}u.from={x:s,width:y}}if(w){q=u.from;if(!q){q=u.from={}}q.y=p.y;if(!v){q.x=u.zero;if(o.isShadow){q.width=0}}}}return this.callParent(arguments)},isItemInPoint:function(h,j,e){var l=e.sprite.getBBox();return l.x<=h&&l.y<=j&&(l.x+l.width)>=h&&(l.y+l.height)>=j},hideAll:function(j){var l=this.chart.axes,n=l.items,m=n.length,h=0;j=(isNaN(this._index)?j:this._index)||0;if(!this.__excludes){this.__excludes=[]}this.__excludes[j]=true;this.drawSeries();for(h;h<m;h++){n[h].drawAxis()}},showAll:function(j){var l=this.chart.axes,n=l.items,m=n.length,h=0;j=(isNaN(this._index)?j:this._index)||0;if(!this.__excludes){this.__excludes=[]}this.__excludes[j]=false;this.drawSeries();for(h;h<m;h++){n[h].drawAxis()}},getLegendColor:function(e){var j=this,h=j.colorArrayStyle,l=h&&h.length;if(j.style&&j.style.fill){return j.style.fill}else{return(h?h[(j.themeIdx+e)%l]:"#000")}},highlightItem:function(c){this.callParent(arguments);this.inHighlight=true;this.renderLabels();delete this.inHighlight},unHighlightItem:function(){this.callParent(arguments);this.inHighlight=true;this.renderLabels();delete this.inHighlight},cleanHighlights:function(){this.callParent(arguments);this.inHighlight=true;this.renderLabels();delete this.inHighlight}},1,0,0,0,["series.bar"],0,[Ext.chart.series,"Bar",Ext.chart,"BarSeries",Ext.chart,"BarChart",Ext.chart,"StackedBarChart"],0));(Ext.cmd.derive("Ext.chart.series.Column",Ext.chart.series.Bar,{alternateClassName:["Ext.chart.ColumnSeries","Ext.chart.ColumnChart","Ext.chart.StackedColumnChart"],type:"column",column:true,boundColumn:false,xPadding:10,yPadding:0},0,0,0,0,["series.column"],0,[Ext.chart.series,"Column",Ext.chart,"ColumnSeries",Ext.chart,"ColumnChart",Ext.chart,"StackedColumnChart"],0));(Ext.cmd.derive("Ext.chart.series.Gauge",Ext.chart.series.Series,{type:"gauge",rad:Math.PI/180,highlightDuration:150,angleField:false,needle:false,donut:false,showInLegend:false,style:{},constructor:function(t){this.callParent(arguments);var n=this,o=n.chart,u=o.surface,m=o.store,l=o.shadow,q,s,p;Ext.apply(n,t,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});n.group=u.getGroup(n.seriesId);if(l){for(q=0,s=n.shadowAttributes.length;q<s;q++){n.shadowGroups.push(u.getGroup(n.seriesId+"-shadows"+q))}}u.customAttributes.segment=function(a){var c=a.series||n;delete a.series;return n.getSegment.call(c,a)}},initialize:function(){var m=this,j=m.chart.getChartStore(),l=j.data.items,h=m.label,n=l.length;m.yField=[];if(h&&h.field&&n>0){m.yField.push(l[0].get(h.field))}},getSegment:function(ac){var K=this,M=K.rad,aa=Math.cos,ad=Math.sin,R=Math.abs,U=K.centerX,W=K.centerY,x=0,y=0,F=0,I=0,X=0,Y=0,Z=0,ab=0,Q=0.01,S=ac.endRho-ac.startRho,J=ac.startAngle,O=ac.endAngle,V=(J+O)/2*M,T=ac.margin||0,G=R(O-J)>180,H=Math.min(J,O)*M,N=Math.max(J,O)*M,P=false;U+=T*aa(V);W+=T*ad(V);x=U+ac.startRho*aa(H);X=W+ac.startRho*ad(H);y=U+ac.endRho*aa(H);Y=W+ac.endRho*ad(H);F=U+ac.startRho*aa(N);Z=W+ac.startRho*ad(N);I=U+ac.endRho*aa(N);ab=W+ac.endRho*ad(N);if(R(x-F)<=Q&&R(X-Z)<=Q){P=true}if(P){return{path:[["M",x,X],["L",y,Y],["A",ac.endRho,ac.endRho,0,+G,1,I,ab],["Z"]]}}else{return{path:[["M",x,X],["L",y,Y],["A",ac.endRho,ac.endRho,0,+G,1,I,ab],["L",F,Z],["A",ac.startRho,ac.startRho,0,+G,0,x,X],["Z"]]}}},calcMiddle:function(s){var x=this,w=x.rad,t=s.slice,u=x.centerX,v=x.centerY,y=t.startAngle,C=t.endAngle,z=Math.max(("rho" in t)?t.rho:x.radius,x.label.minMargin),A=+x.donut,F=Math.min(y,C)*w,G=Math.max(y,C)*w,D=-(F+(G-F)/2),B=u+(s.endRho+s.startRho)/2*Math.cos(D),E=v-(s.endRho+s.startRho)/2*Math.sin(D);s.middle={x:B,y:E}},drawSeries:function(){var ax=this,p=ax.chart,aP=p.getChartStore(),at=ax.group,ab=ax.chart.animate,ap=ax.chart.axes.get(0),ao=ap&&ap.minimum||ax.minimum||0,ak=ap&&ap.maximum||ax.maximum||0,aF=ax.angleField||ax.field||ax.xField,ai=p.surface,al=p.chartBBox,aJ=ax.rad,aN=+ax.donut,j={},ar=[],aG=ax.seriesStyle,aQ=ax.seriesLabelStyle,aK=ax.colorArrayStyle,au=aK&&aK.length||0,aI=Math.cos,aB=Math.sin,aO=-180,ae=ax.reverse,aA,aL,aM,ay,aC,aq,ag,an,am,aj,Z,aa,aH,Y,aw,aE,ad,ac,aD,av,az,af,ah;Ext.apply(aG,ax.style||{});ax.setBBox();av=ax.bbox;if(ax.colorSet){aK=ax.colorSet;au=aK.length}if(!aP||!aP.getCount()||ax.seriesIsHidden){ax.hide();ax.items=[];return}aL=ax.centerX=al.x+(al.width/2);aM=ax.centerY=al.y+al.height;ax.radius=Math.min(aL-al.x,aM-al.y);ax.slices=aC=[];ax.items=ar=[];if(!ax.value){aj=aP.getAt(0);ax.value=aj.get(aF)}ag=ae?ak-ax.value:ax.value;if(ax.needle){af={series:ax,value:ag,startAngle:aO,endAngle:0,rho:ax.radius};az=aO*(1-(ag-ao)/(ak-ao));aC.push(af)}else{az=aO*(1-(ag-ao)/(ak-ao));af={series:ax,value:ag,startAngle:aO,endAngle:az,rho:ax.radius};ah={series:ax,value:ak-ag,startAngle:az,endAngle:0,rho:ax.radius};if(ae){aC.push(ah,af)}else{aC.push(af,ah)}}for(Z=0,am=aC.length;Z<am;Z++){ay=aC[Z];aq=at.getAt(Z);aA=Ext.apply({segment:{series:ax,startAngle:ay.startAngle,endAngle:ay.endAngle,margin:0,rho:ay.rho,startRho:ay.rho*+aN/100,endRho:ay.rho}},Ext.apply(aG,aK&&{fill:aK[Z%au]}||{}));an=Ext.apply({},aA.segment,{slice:ay,series:ax,storeItem:aj,index:Z});ar[Z]=an;if(!aq){aD=Ext.apply({type:"path",group:at},Ext.apply(aG,aK&&{fill:aK[Z%au]}||{}));aq=ai.add(Ext.apply(aD,aA))}ay.sprite=ay.sprite||[];an.sprite=aq;ay.sprite.push(aq);if(ab){aA=ax.renderer(aq,aj,aA,Z,aP);aq._to=aA;ax.onAnimate(aq,{to:aA})}else{aA=ax.renderer(aq,aj,Ext.apply(aA,{hidden:false}),Z,aP);aq.setAttributes(aA,true)}}if(ax.needle){az=az*Math.PI/180;if(!ax.needleSprite){ax.needleSprite=ax.chart.surface.add({type:"path",path:["M",aL+(ax.radius*+aN/100)*aI(az),aM+-Math.abs((ax.radius*+aN/100)*aB(az)),"L",aL+ax.radius*aI(az),aM+-Math.abs(ax.radius*aB(az))],"stroke-width":4,stroke:"#222"})}else{if(ab){ax.onAnimate(ax.needleSprite,{to:{path:["M",aL+(ax.radius*+aN/100)*aI(az),aM+-Math.abs((ax.radius*+aN/100)*aB(az)),"L",aL+ax.radius*aI(az),aM+-Math.abs(ax.radius*aB(az))]}})}else{ax.needleSprite.setAttributes({type:"path",path:["M",aL+(ax.radius*+aN/100)*aI(az),aM+-Math.abs((ax.radius*+aN/100)*aB(az)),"L",aL+ax.radius*aI(az),aM+-Math.abs(ax.radius*aB(az))]})}}ax.needleSprite.setAttributes({hidden:false},true)}delete ax.value},setValue:function(c){this.value=c;this.drawSeries()},onCreateLabel:function(l,e,h,j){},onPlaceLabel:function(q,n,o,p,m,l,j){},onPlaceCallout:function(){},onAnimate:function(c,d){c.show();return this.callParent(arguments)},isItemInPoint:function(v,x,t,A){var y=this,B=y.centerX,C=y.centerY,q=Math.abs,s=q(v-B),u=q(x-C),z=t.startAngle,E=t.endAngle,w=Math.sqrt(s*s+u*u),D=Math.atan2(x-C,v-B)/y.rad;return(A===0)&&(D>=z&&D<E&&w>=t.startRho&&w<=t.endRho)},getLegendColor:function(c){var d=this.colorSet||this.colorArrayStyle;return d[c%d.length]}},1,0,0,0,["series.gauge"],0,[Ext.chart.series,"Gauge"],0));(Ext.cmd.derive("Ext.chart.series.Line",Ext.chart.series.Cartesian,{alternateClassName:["Ext.chart.LineSeries","Ext.chart.LineChart"],type:"line",selectionTolerance:20,showMarkers:true,markerConfig:{},style:{},smooth:false,defaultSmoothness:3,fill:false,constructor:function(o){this.callParent(arguments);var m=this,j=m.chart.surface,l=m.chart.shadow,n,h;o.highlightCfg=Ext.Object.merge({"stroke-width":3},o.highlightCfg);Ext.apply(m,o,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}}]});m.group=j.getGroup(m.seriesId);if(m.showMarkers){m.markerGroup=j.getGroup(m.seriesId+"-markers")}if(l){for(n=0,h=m.shadowAttributes.length;n<h;n++){m.shadowGroups.push(j.getGroup(m.seriesId+"-shadows"+n))}}},shrink:function(v,n,m){var p=v.length,o=Math.floor(p/m),q=1,t=0,w=0,s=[+v[0]],u=[+n[0]];for(;q<p;++q){t+=+v[q]||0;w+=+n[q]||0;if(q%o==0){s.push(t/o);u.push(w/o);t=0;w=0}}return{x:s,y:u}},drawSeries:function(){var bB=this,bZ=bB.chart,a5=bZ.axes,bn=bZ.getChartStore(),bx=bn.data.items,bt,bR=bn.getCount(),bA=bB.chart.surface,bp={},a6=bB.group,be=bB.showMarkers,bT=bB.markerGroup,bm=bZ.shadow,bo=bB.shadowGroups,bO=bB.shadowAttributes,ba=bB.smooth,aM=bo.length,b1=["M"],a4=["M"],aY=["M"],a0=["M"],bf=bZ.markerIndex,bC=[].concat(bB.axis),bD,bY=[],bK=[],bg=false,a1=bB.reverse,a7=[],bU=Ext.apply({},bB.markerStyle),bL=bB.seriesStyle,j=bB.colorArrayStyle,a9=j&&j.length||0,bd=Ext.isNumber,bX=bB.seriesIdx,aU=bB.getAxesForXAndYFields(),aR=aU.xAxis,bV=aU.yAxis,bJ=a5&&a5.get(aR),a8=a5&&a5.get(bV),bM=aR?bJ&&bJ.type:"",aX=bV?a8&&a8.type:"",bH,aT,bI,bG,bs,aZ,bF,bh,bi,aV,aW,x,aL,bP,bb,bc,b0,aQ,bj,bl,bS,aP,aN,br,a2,bN,bE,bv,b2,by,bk,aO,bW,bq,bu,a3,aS,y,bz,bw,bQ;if(bB.fireEvent("beforedraw",bB)===false){return}if(!bR||bB.seriesIsHidden){bB.hide();bB.items=[];if(bB.line){bB.line.hide(true);if(bB.line.shadows){bH=bB.line.shadows;for(bc=0,aM=bH.length;bc<aM;bc++){aT=bH[bc];aT.hide(true)}}if(bB.fillPath){bB.fillPath.hide(true)}}bB.line=null;bB.fillPath=null;return}bq=Ext.apply(bU||{},bB.markerConfig,{fill:bB.seriesStyle.fill||j[bB.themeIdx%j.length]});a3=bq.type;delete bq.type;bu=bL;if(!bu["stroke-width"]){bu["stroke-width"]=0.5}y="opacity" in bu?bu.opacity:1;bQ="opacity" in bu?bu.opacity:0.3;bz="lineOpacity" in bu?bu.lineOpacity:y;bw="fillOpacity" in bu?bu.fillOpacity:bQ;if(bf&&bT&&bT.getCount()){for(bb=0;bb<bf;bb++){bl=bT.getAt(bb);bT.remove(bl);bT.add(bl);bS=bT.getAt(bT.getCount()-2);bl.setAttributes({x:0,y:0,translate:{x:bS.attr.translation.x,y:bS.attr.translation.y}},true)}}bB.unHighlightItem();bB.cleanHighlights();bB.setBBox();bp=bB.bbox;bB.clipRect=[bp.x,bp.y,bp.width,bp.height];if(bJ){bj=bJ.applyData();bv=bj.from;b2=bj.to}if(a8){bj=a8.applyData();by=bj.from;bk=bj.to}if(bB.xField&&!Ext.isNumber(bv)){aQ=bB.getMinMaxXValues();bv=aQ[0];b2=aQ[1]}if(bB.yField&&!Ext.isNumber(by)){aQ=bB.getMinMaxYValues();by=aQ[0];bk=aQ[1]}if(isNaN(bv)){bv=0;bN=bp.width/((bR-1)||1)}else{bN=bp.width/((b2-bv)||(bR-1)||1)}if(isNaN(by)){by=0;bE=bp.height/((bR-1)||1)}else{bE=bp.height/((bk-by)||(bR-1)||1)}for(bb=0,b0=bx.length;bb<b0;bb++){bt=bx[bb];aN=bt.get(bB.xField);if(bM==="Time"&&typeof aN==="string"){aN=Date.parse(aN)}if(typeof aN==="string"||typeof aN==="object"&&!Ext.isDate(aN)||bM==="Category"){aN=bb}br=bt.get(bB.yField);if(aX==="Time"&&typeof br==="string"){br=Date.parse(br)}if(typeof br==="undefined"||(typeof br==="string"&&!br)){continue}if(typeof br==="string"||typeof br==="object"&&!Ext.isDate(br)||aX==="Category"){br=bb}a7.push(bb);bY.push(aN);bK.push(br)}b0=bY.length;if(b0>bp.width){a2=bB.shrink(bY,bK,bp.width);bY=a2.x;bK=a2.y}bB.items=[];aS=0;b0=bY.length;for(bb=0;bb<b0;bb++){aN=bY[bb];br=bK[bb];if(br===false){if(a4.length==1){a4=[]}bg=true;bB.items.push(false);continue}else{if(a1){bh=bp.x+bp.width-((aN-bv)*bN)}else{bh=(bp.x+(aN-bv)*bN)}bh=Ext.Number.toFixed(bh,2);bi=Ext.Number.toFixed((bp.y+bp.height)-(br-by)*bE,2);if(bg){bg=false;a4.push("M")}a4=a4.concat([bh,bi])}if((typeof aL=="undefined")&&(typeof bi!="undefined")){aL=bi;x=bh}if(!bB.line||bZ.resizing){b1=b1.concat([bh,bp.y+bp.height/2])}if(bZ.animate&&bZ.resizing&&bB.line){bB.line.setAttributes({path:b1,opacity:bz},true);if(bB.fillPath){bB.fillPath.setAttributes({path:b1,opacity:bw},true)}if(bB.line.shadows){bH=bB.line.shadows;for(bc=0,aM=bH.length;bc<aM;bc++){aT=bH[bc];aT.setAttributes({path:b1},true)}}}if(be){bl=bT.getAt(aS++);if(!bl){bl=Ext.chart.Shape[a3](bA,Ext.apply({group:[a6,bT],x:0,y:0,translate:{x:+(aV||bh),y:aW||(bp.y+bp.height/2)},value:'"'+aN+", "+br+'"',zIndex:4000},bq));bl._to={translate:{x:+bh,y:+bi}}}else{bl.setAttributes({value:'"'+aN+", "+br+'"',x:0,y:0,hidden:false},true);bl._to={translate:{x:+bh,y:+bi}}}}bB.items.push({series:bB,value:[aN,br],point:[bh,bi],sprite:bl,storeItem:bn.getAt(a7[bb])});aV=bh;aW=bi}if(a4.length<=1){return}if(bB.smooth){a0=Ext.draw.Draw.smooth(a4,bd(ba)?ba:bB.defaultSmoothness)}aY=ba?a0:a4;if(bZ.markerIndex&&bB.previousPath){bG=bB.previousPath;if(!ba){Ext.Array.erase(bG,1,2)}}else{bG=a4}if(!bB.line){bB.line=bA.add(Ext.apply({type:"path",group:a6,path:b1,stroke:bu.stroke||bu.fill},bu||{}));bB;bB.line.setAttributes({opacity:bz},true);if(bm){bB.line.setAttributes(Ext.apply({},bB.shadowOptions),true)}bB.line.setAttributes({fill:"none",zIndex:3000});if(!bu.stroke&&a9){bB.line.setAttributes({stroke:j[bB.themeIdx%a9]},true)}if(bm){bH=bB.line.shadows=[];for(bI=0;bI<aM;bI++){bD=bO[bI];bD=Ext.apply({},bD,{path:b1});aT=bA.add(Ext.apply({},{type:"path",group:bo[bI]},bD));bH.push(aT)}}}if(bB.fill){aZ=aY.concat([["L",bh,bp.y+bp.height],["L",x,bp.y+bp.height],["L",x,aL]]);if(!bB.fillPath){bB.fillPath=bA.add({group:a6,type:"path",fill:bu.fill||j[bB.themeIdx%a9],path:b1})}}bP=be&&bT.getCount();if(bZ.animate){bs=bB.fill;aO=bB.line;bF=bB.renderer(aO,false,{path:aY},bb,bn);Ext.apply(bF,bu||{},{stroke:bu.stroke||bu.fill});delete bF.fill;aO.show(true);if(bZ.markerIndex&&bB.previousPath){bB.animation=bW=bB.onAnimate(aO,{to:bF,from:{path:bG}})}else{bB.animation=bW=bB.onAnimate(aO,{to:bF})}if(bm){bH=aO.shadows;for(bc=0;bc<aM;bc++){bH[bc].show(true);if(bZ.markerIndex&&bB.previousPath){bB.onAnimate(bH[bc],{to:{path:aY},from:{path:bG}})}else{bB.onAnimate(bH[bc],{to:{path:aY}})}}}if(bs){bB.fillPath.show(true);bB.onAnimate(bB.fillPath,{to:Ext.apply({},{path:aZ,fill:bu.fill||j[bB.themeIdx%a9],"stroke-width":0,opacity:bw},bu||{})})}if(be){aS=0;for(bb=0;bb<b0;bb++){if(bB.items[bb]){aP=bT.getAt(aS++);if(aP){bF=bB.renderer(aP,bn.getAt(bb),aP._to,bb,bn);bB.onAnimate(aP,{to:Ext.applyIf(bF,bq||{})});aP.show(true)}}}for(;aS<bP;aS++){aP=bT.getAt(aS);aP.hide(true)}}}else{bF=bB.renderer(bB.line,false,{path:aY,hidden:false},bb,bn);Ext.apply(bF,bu||{},{stroke:bu.stroke||bu.fill});delete bF.fill;bB.line.setAttributes(bF,true);bB.line.setAttributes({opacity:bz},true);if(bm){bH=bB.line.shadows;for(bc=0;bc<aM;bc++){bH[bc].setAttributes({path:aY,hidden:false},true)}}if(bB.fill){bB.fillPath.setAttributes({path:aZ,hidden:false,opacity:bw},true)}if(be){aS=0;for(bb=0;bb<b0;bb++){if(bB.items[bb]){aP=bT.getAt(aS++);if(aP){bF=bB.renderer(aP,bn.getAt(bb),aP._to,bb,bn);aP.setAttributes(Ext.apply(bq||{},bF||{}),true);if(!aP.attr.hidden){aP.show(true)}}}}for(;aS<bP;aS++){aP=bT.getAt(aS);aP.hide(true)}}}if(bZ.markerIndex){if(bB.smooth){Ext.Array.erase(a4,1,2)}else{Ext.Array.splice(a4,1,0,a4[1],a4[2])}bB.previousPath=a4}bB.renderLabels();bB.renderCallouts();bB.fireEvent("draw",bB)},onCreateLabel:function(q,l,s,p){var o=this,n=o.labelsGroup,u=o.label,m=o.bbox,t=Ext.apply({},u,o.seriesLabelStyle||{});return o.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:n,x:Number(l.point[0]),y:m.y+m.height/2},t||{}))},onPlaceLabel:function(Q,N,B,E,G,T,S){var x=this,M=x.chart,C=M.resizing,y=x.label,D=y.renderer,V=y.field,W=x.bbox,O=Number(B.point[0]),P=Number(B.point[1]),U=B.sprite.attr.radius,F,I,J,K,H,R;Q.setAttributes({text:D(N.get(V),Q,N,B,E,G,T,S),hidden:true},true);I=B.sprite.getBBox();I.width=I.width||(U*2);I.height=I.height||(U*2);F=Q.getBBox();J=F.width/2;K=F.height/2;if(G=="rotate"){H=I.width/2+J+K/2;if(O+H+J>W.x+W.width){O-=H}else{O+=H}Q.setAttributes({rotation:{x:O,y:P,degrees:-45}},true)}else{if(G=="under"||G=="over"){Q.setAttributes({rotation:{degrees:0}},true);if(O<W.x+J){O=W.x+J}else{if(O+J>W.x+W.width){O=W.x+W.width-J}}R=I.height/2+K;P=P+(G=="over"?-R:R);if(P<W.y+K){P+=2*R}else{if(P+K>W.y+W.height){P-=2*R}}}}if(x.chart.animate&&!x.chart.resizing){Q.show(true);x.onAnimate(Q,{to:{x:O,y:P}})}else{Q.setAttributes({x:O,y:P},true);if(C&&M.animate){x.on({single:true,afterrender:function(){Q.show(true)}})}else{Q.show(true)}}},highlightItem:function(){var c=this,d=c.line;c.callParent(arguments);if(d&&!c.highlighted){if(!("__strokeWidth" in d)){d.__strokeWidth=parseFloat(d.attr["stroke-width"])||0}if(d.__anim){d.__anim.paused=true}d.__anim=new Ext.fx.Anim({target:d,to:{"stroke-width":d.__strokeWidth+3}});c.highlighted=true}},unHighlightItem:function(){var h=this,e=h.line,d;h.callParent(arguments);if(e&&h.highlighted){d=e.__strokeWidth||parseFloat(e.attr["stroke-width"])||0;e.__anim=new Ext.fx.Anim({target:e,to:{"stroke-width":d}});h.highlighted=false}},onPlaceCallout:function(ai,ac,P,T,W,ap,ak){if(!W){return}var p=this,Z=p.chart,aa=Z.surface,S=Z.resizing,x=p.callouts,Y=p.items,U=T==0?false:Y[T-1].point,O=(T==Y.length-1)?false:Y[T+1].point,aq=[+P.point[0],+P.point[1]],af,an,a,y,ag,ae,Q=x.offsetFromViz||30,ab=x.offsetToSide||10,ad=x.offsetBox||3,am,ao,al,R,V,X=p.clipRect,ar={width:x.styles.width||10,height:x.styles.height||10},ah,aj;if(!U){U=aq}if(!O){O=aq}y=(O[1]-U[1])/(O[0]-U[0]);ag=(aq[1]-U[1])/(aq[0]-U[0]);ae=(O[1]-aq[1])/(O[0]-aq[0]);an=Math.sqrt(1+y*y);af=[1/an,y/an];a=[-af[1],af[0]];if(ag>0&&ae<0&&a[1]<0||ag<0&&ae>0&&a[1]>0){a[0]*=-1;a[1]*=-1}else{if(Math.abs(ag)<Math.abs(ae)&&a[0]<0||Math.abs(ag)>Math.abs(ae)&&a[0]>0){a[0]*=-1;a[1]*=-1}}ah=aq[0]+a[0]*Q;aj=aq[1]+a[1]*Q;am=ah+(a[0]>0?0:-(ar.width+2*ad));ao=aj-ar.height/2-ad;al=ar.width+2*ad;R=ar.height+2*ad;if(am<X[0]||(am+al)>(X[0]+X[2])){a[0]*=-1}if(ao<X[1]||(ao+R)>(X[1]+X[3])){a[1]*=-1}ah=aq[0]+a[0]*Q;aj=aq[1]+a[1]*Q;am=ah+(a[0]>0?0:-(ar.width+2*ad));ao=aj-ar.height/2-ad;al=ar.width+2*ad;R=ar.height+2*ad;if(Z.animate){p.onAnimate(ai.lines,{to:{path:["M",aq[0],aq[1],"L",ah,aj,"Z"]}});if(ai.panel){ai.panel.setPosition(am,ao,true)}}else{ai.lines.setAttributes({path:["M",aq[0],aq[1],"L",ah,aj,"Z"]},true);if(ai.panel){ai.panel.setPosition(am,ao)}}for(V in ai){ai[V].show(true)}},isItemInPoint:function(V,X,O,N){var K=this,R=K.items,I=K.selectionTolerance,U=null,x,aa,P,E,W,y,ab,G,ac,T,M,Y,Z,Q,F,J,H=Math.sqrt,S=Math.abs;aa=R[N];x=N&&R[N-1];if(N>=W){x=R[W-1]}P=x&&x.point;E=aa&&aa.point;y=x?P[0]:E[0]-I;ab=x?P[1]:E[1];G=aa?E[0]:P[0]+I;ac=aa?E[1]:P[1];Y=H((V-y)*(V-y)+(X-ab)*(X-ab));Z=H((V-G)*(V-G)+(X-ac)*(X-ac));Q=Math.min(Y,Z);if(Q<=I){return Q==Y?x:aa}return false},toggleAll:function(j){var m=this,h,n,l,o;if(!j){Ext.chart.series.Cartesian.prototype.hideAll.call(m)}else{Ext.chart.series.Cartesian.prototype.showAll.call(m)}if(m.line){m.line.setAttributes({hidden:!j},true);if(m.line.shadows){for(h=0,o=m.line.shadows,n=o.length;h<n;h++){l=o[h];l.setAttributes({hidden:!j},true)}}}if(m.fillPath){m.fillPath.setAttributes({hidden:!j},true)}},hideAll:function(){this.toggleAll(false)},showAll:function(){this.toggleAll(true)}},1,0,0,0,["series.line"],0,[Ext.chart.series,"Line",Ext.chart,"LineSeries",Ext.chart,"LineChart"],0));(Ext.cmd.derive("Ext.chart.series.Pie",Ext.chart.series.Series,{alternateClassName:["Ext.chart.PieSeries","Ext.chart.PieChart"],type:"pie",accuracy:100000,rad:Math.PI*2/100000,highlightDuration:150,angleField:false,lengthField:false,donut:false,showInLegend:false,style:{},clockwise:false,rotation:undefined,constructor:function(v){this.callParent(arguments);var o=this,p=o.chart,w=p.surface,n=p.store,l=p.shadow,u=v.highlight,s,t,q;if(u){v.highlightCfg=Ext.merge({segment:{margin:20}},u,v.highlightCfg)}Ext.apply(o,v,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});o.group=w.getGroup(o.seriesId);if(l){for(s=0,t=o.shadowAttributes.length;s<t;s++){o.shadowGroups.push(w.getGroup(o.seriesId+"-shadows"+s))}}w.customAttributes.segment=function(c){var a=o.getSegment(c);if(!a.path||a.path.length===0){a.path=["M",0,0]}return a};o.__excludes=o.__excludes||[]},onRedraw:function(){this.initialize()},initialize:function(){var n=this,j=n.chart.getChartStore(),m=j.data.items,h,o,l;n.callParent();n.yField=[];if(n.label.field){for(h=0,o=m.length;h<o;h++){l=m[h];n.yField.push(l.get(n.label.field))}}},getSegment:function(ao){var y=this,N=y.rad,ak=Math.cos,ar=Math.sin,ac=y.centerX,af=y.centerY,U=0,W=0,Y=0,ab=0,ah=0,ai=0,aj=0,am=0,M=0,ap=0,Q=0,aq=0,P=0.01,ae=ao.startAngle,S=ao.endAngle,ad=(ae+S)/2*N,X=ao.margin||0,x=Math.min(ae,S)*N,O=Math.max(ae,S)*N,T=ak(x),al=ar(x),V=ak(O),an=ar(O),ag=ak(ad),R=ar(ad),aa=0,Z=0.7071067811865476;if(O-x<P){return{path:""}}if(X!==0){ac+=X*ag;af+=X*R}W=ac+ao.endRho*T;ai=af+ao.endRho*al;ab=ac+ao.endRho*V;am=af+ao.endRho*an;Q=ac+ao.endRho*ag;aq=af+ao.endRho*R;if(ao.startRho!==0){U=ac+ao.startRho*T;ah=af+ao.startRho*al;Y=ac+ao.startRho*V;aj=af+ao.startRho*an;M=ac+ao.startRho*ag;ap=af+ao.startRho*R;return{path:[["M",W,ai],["A",ao.endRho,ao.endRho,0,0,1,Q,aq],["L",Q,aq],["A",ao.endRho,ao.endRho,0,aa,1,ab,am],["L",ab,am],["L",Y,aj],["A",ao.startRho,ao.startRho,0,aa,0,M,ap],["L",M,ap],["A",ao.startRho,ao.startRho,0,0,0,U,ah],["L",U,ah],["Z"]]}}else{return{path:[["M",ac,af],["L",W,ai],["A",ao.endRho,ao.endRho,0,0,1,Q,aq],["L",Q,aq],["A",ao.endRho,ao.endRho,0,aa,1,ab,am],["L",ab,am],["L",ac,af],["Z"]]}}},calcMiddle:function(p){var v=this,u=v.rad,q=p.slice,s=v.centerX,t=v.centerY,w=q.startAngle,z=q.endAngle,x=+v.donut,A=-(w+z)*u/2,C=(p.endRho+p.startRho)/2,y=s+C*Math.cos(A),B=t-C*Math.sin(A);p.middle={x:y,y:B}},drawSeries:function(){var aM=this,a0=aM.chart.getChartStore(),ad=a0.data.items,ar,aH=aM.group,ah=aM.chart.animate,aT=aM.angleField||aM.field||aM.xField,aD=[].concat(aM.lengthField),ai=0,p=aM.chart,aq=p.surface,au=p.chartBBox,aV=p.shadow,aj=aM.shadowGroups,ak=aM.shadowAttributes,aC=aj.length,ap=aD.length,aB=0,aZ=+aM.donut,aE=[],aG=[],aK=0,an=0,aL=0,aw=aM.rotation,aU=aM.seriesStyle,aW=aM.colorArrayStyle,aI=aW&&aW.length||0,aP,j,az,at,ax,aX,aY,aO,aS=0,aN,aQ,aF,ao,ay,aA,av,af,ag,ae,am,al,aR,aJ;Ext.apply(aU,aM.style||{});aM.setBBox();aJ=aM.bbox;if(aM.colorSet){aW=aM.colorSet;aI=aW.length}if(!a0||!a0.getCount()||aM.seriesIsHidden){aM.hide();aM.items=[];return}aM.unHighlightItem();aM.cleanHighlights();aX=aM.centerX=au.x+(au.width/2);aY=aM.centerY=au.y+(au.height/2);aM.radius=Math.min(aX-au.x,aY-au.y);aM.slices=aQ=[];aM.items=aG=[];for(af=0,av=ad.length;af<av;af++){ar=ad[af];if(this.__excludes&&this.__excludes[af]){continue}aK+=+ar.get(aT);if(aD[0]){for(ag=0,ai=0;ag<ap;ag++){ai+=+ar.get(aD[ag])}aE[af]=ai;an=Math.max(an,ai)}}aK=aK||1;for(af=0,av=ad.length;af<av;af++){ar=ad[af];if(this.__excludes&&this.__excludes[af]){ao=0}else{ao=ar.get(aT);if(aS===0){aS=1}}if(aS==1){aS=2;if(Ext.isEmpty(aw)){aM.firstAngle=aL=(aM.clockwise?-1:1)*(aM.accuracy*ao/aK/2)}else{if(!Ext.isEmpty(aw.degrees)){aw=Ext.draw.Draw.rad(aw.degrees)}else{if(!Ext.isEmpty(aw.radians)){aw=aw.radians}}aM.firstAngle=aL=aM.accuracy*aw/(2*Math.PI)}for(ag=0;ag<af;ag++){aQ[ag].startAngle=aQ[ag].endAngle=aM.firstAngle}}ae=aL+(aM.clockwise?1:-1)*(aM.accuracy*ao/aK);aN={series:aM,value:ao,startAngle:(aM.clockwise?ae:aL),endAngle:(aM.clockwise?aL:ae),storeItem:ar};if(aD[0]&&!(this.__excludes&&this.__excludes[af])){aA=+aE[af];aN.rho=Math.floor(aM.radius/an*aA)}else{aN.rho=aM.radius}aQ[af]=aN;(function(){aL=ae})()}if(aV){for(af=0,av=aQ.length;af<av;af++){aN=aQ[af];aN.shadowAttrs=[];ar=a0.getAt(af);for(ag=0,aB=0,az=[];ag<ap;ag++){aF=aH.getAt(af*ap+ag);if(aD[ag]&&!(this.__excludes&&this.__excludes[af])){aO=ar.get(aD[ag])/aE[af]*aN.rho}else{aO=aN.rho}aP={segment:{startAngle:aN.startAngle,endAngle:aN.endAngle,margin:0,rho:aN.rho,startRho:aB+(aO*aZ/100),endRho:aB+aO},hidden:!aN.value&&(aN.startAngle%aM.accuracy)==(aN.endAngle%aM.accuracy)};for(ax=0,az=[];ax<aC;ax++){j=ak[ax];at=aj[ax].getAt(af);if(!at){at=p.surface.add(Ext.apply({},{type:"path",group:aj[ax],strokeLinejoin:"round"},aP,j))}j=aM.renderer(at,ar,Ext.apply({},aP,j),af,a0);if(ah){aM.onAnimate(at,{to:j})}else{at.setAttributes(j,true)}az.push(at)}aN.shadowAttrs[ag]=az}}}for(af=0,av=aQ.length;af<av;af++){aN=aQ[af];ar=a0.getAt(af);for(ag=0,aB=0;ag<ap;ag++){aF=aH.getAt(af*ap+ag);if(aD[ag]&&!(this.__excludes&&this.__excludes[af])){aO=ar.get(aD[ag])/aE[af]*aN.rho}else{aO=aN.rho}aP=Ext.apply({segment:{startAngle:aN.startAngle,endAngle:aN.endAngle,margin:0,rho:aN.rho,startRho:aB+(aO*aZ/100),endRho:aB+aO},hidden:(!aN.value&&(aN.startAngle%aM.accuracy)==(aN.endAngle%aM.accuracy))},Ext.apply(aU,aW&&{fill:aW[(ap>1?ag:af)%aI]}||{}));ay=Ext.apply({},aP.segment,{slice:aN,series:aM,storeItem:aN.storeItem,index:af});aM.calcMiddle(ay);if(aV){ay.shadows=aN.shadowAttrs[ag]}aG[af]=ay;if(!aF){aR=Ext.apply({type:"path",group:aH,middle:ay.middle},Ext.apply(aU,aW&&{fill:aW[(ap>1?ag:af)%aI]}||{}));aF=aq.add(Ext.apply(aR,aP))}aN.sprite=aN.sprite||[];ay.sprite=aF;aN.sprite.push(aF);aN.point=[ay.middle.x,ay.middle.y];if(ah){aP=aM.renderer(aF,ar,aP,af,a0);aF._to=aP;aF._animating=true;aM.onAnimate(aF,{to:aP,listeners:{afteranimate:{fn:function(){this._animating=false},scope:aF}}})}else{aP=aM.renderer(aF,ar,Ext.apply(aP,{hidden:false}),af,a0);aF.setAttributes(aP,true)}aB+=aO}}av=aH.getCount();for(af=0;af<av;af++){if(!aQ[(af/ap)>>0]&&aH.getAt(af)){aH.getAt(af).hide(true)}}if(aV){aC=aj.length;for(ax=0;ax<av;ax++){if(!aQ[(ax/ap)>>0]){for(ag=0;ag<aC;ag++){if(aj[ag].getAt(ax)){aj[ag].getAt(ax).hide(true)}}}}}aM.renderLabels();aM.renderCallouts()},setSpriteAttributes:function(l,e,h){var j=this;if(h){l.stopAnimation();l.animate({to:e,duration:j.highlightDuration})}else{l.setAttributes(e,true)}},createLabelLine:function(e,h){var d=this;calloutLine=d.label.calloutLine,line=d.chart.surface.add({type:"path",stroke:(e===undefined?"#555":((calloutLine&&calloutLine.color)||d.getLegendColor(e))),lineWidth:(calloutLine&&calloutLine.width)||2,path:"M0,0Z",hidden:h});return line},drawLabelLine:function(q,m,n,j){var p=this,l=q.lineSprite,o="M"+m.x+" "+m.y+"L"+n.x+" "+n.y+"Z";p.setSpriteAttributes(l,{path:o},j)},onCreateLabel:function(t,o,u,s){var q=this,p=q.labelsGroup,y=q.label,v=q.centerX,w=q.centerY,n=o.middle,x=Ext.apply(q.seriesLabelStyle||{},y||{});return q.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:p,x:n.x,y:n.y},x))},onPlaceLabel:function(ai,aC,aw,ad,ax,ae,au){var aD=this,aV=aD.rad,aE=aD.chart,an=aE.resizing,ap=aD.label,av=ap.renderer,aP=ap.field,aW=aD.centerX,aX=aD.centerY,aQ=aw.startAngle,y=aw.endAngle,ar=aw.middle,az={x:ar.x,y:ar.y},al=ar.x-aW,am=ar.y-aX,aI={},aq=1,aB=Math.atan2(am,al||1),aK=Ext.draw.Draw.degrees(aB),aT,af,a0,aY,x=(ax==="outside"),ag=ai.attr.calloutLine,ay=(ag&&ag.width)||2,aR=(ai.attr.padding||20)+(x?ay/2+4:0),aF=0,aH=0,ah,aj,at;az.hidden=false;if(this.__excludes&&this.__excludes[ad]){az.hidden=true}if(ap.hideLessThan){ah=Math.min(aQ,y)*aV;aj=Math.max(aQ,y)*aV;at=(aj-ah)*aw.rho;if(at<ap.hideLessThan){az.hidden=ai.showOnHighlight=true}}ai.setAttributes({opacity:(az.hidden?0:1),text:av(aC.get(aP),ai,aC,aw,ad,ax,ae,au)},true);if(ai.lineSprite){var aN={opacity:(az.hidden?0:1)};if(az.hidden){aN.translate={x:0,y:0}}aD.setSpriteAttributes(ai.lineSprite,aN,false)}switch(ax){case"outside":ai.isOutside=true;aq=aw.endRho;aF=(Math.abs(aK)<=90?aR:-aR);aH=(aK>=0?aR:-aR);ai.setAttributes({rotation:{degrees:0}},true);af=ai.getBBox();a0=af.width/2*Math.cos(aB);aY=af.height/2*Math.sin(aB);a0+=aF;aY+=aH;aq+=Math.sqrt(a0*a0+aY*aY);az.x=aq*Math.cos(aB)+aW;az.y=aq*Math.sin(aB)+aX;break;case"rotate":aK=Ext.draw.Draw.normalizeDegrees(aK);aK=(aK>90&&aK<270)?aK+180:aK;aT=ai.attr.rotation.degrees;if(aT!=null&&Math.abs(aT-aK)>180*0.5){if(aK>aT){aK-=360}else{aK+=360}aK=aK%360}else{aK=Ext.draw.Draw.normalizeDegrees(aK)}az.rotate={degrees:aK,x:az.x,y:az.y};break;default:break}az.translate={x:0,y:0};if(ae&&!an&&(ax!="rotate"||aT!=null)){aD.onAnimate(ai,{to:az})}else{ai.setAttributes(az,true)}ai._from=aI;if(ai.isOutside&&ag){var aO=ai.lineSprite,aZ=ae,aG={x:(aw.endRho-ay/2)*Math.cos(aB)+aW,y:(aw.endRho-ay/2)*Math.sin(aB)+aX},ao={x:az.x,y:az.y},aA={};function aL(a){return a?a<0?-1:1:0}if(ag&&ag.length){aA={x:(aw.endRho+ag.length)*Math.cos(aB)+aW,y:(aw.endRho+ag.length)*Math.sin(aB)+aX}}else{var aJ=Ext.draw.Draw.normalizeRadians(-aB),aU=Math.cos(aJ),aM=Math.sin(aJ),aS=(af.width+ay+4)/2,ak=(af.height+ay+4)/2;if(Math.abs(aU)*ak>Math.abs(aM)*aS){aA.x=ao.x-aS*aL(aU);aA.y=ao.y+aS*aM/aU*aL(aU)}else{aA.x=ao.x-ak*aU/aM*aL(aM);aA.y=ao.y+ak*aL(aM)}}if(!aO){aO=ai.lineSprite=aD.createLabelLine(ad,az.hidden);aZ=false}aD.drawLabelLine(ai,aG,aA,aZ)}else{delete ai.lineSprite}},onPlaceCallout:function(N,J,p,y,C,T,S){var I=this,H=I.chart,P=I.centerX,Q=I.centerY,G=p.middle,V={x:G.x,y:G.y},M=G.x-P,O=G.y-Q,U=1,K,R=Math.atan2(O,M||1),W=(N&&N.label?N.label.getBBox():{width:0,height:0}),x=20,D=10,E=10,F;if(!W.width||!W.height){return}U=p.endRho+x;K=(p.endRho+p.startRho)/2+(p.endRho-p.startRho)/3;V.x=U*Math.cos(R)+P;V.y=U*Math.sin(R)+Q;M=K*Math.cos(R);O=K*Math.sin(R);if(H.animate){I.onAnimate(N.lines,{to:{path:["M",M+P,O+Q,"L",V.x,V.y,"Z","M",V.x,V.y,"l",M>0?D:-D,0,"z"]}});I.onAnimate(N.box,{to:{x:V.x+(M>0?D:-(D+W.width+2*E)),y:V.y+(O>0?(-W.height-E/2):(-W.height-E/2)),width:W.width+2*E,height:W.height+2*E}});I.onAnimate(N.label,{to:{x:V.x+(M>0?(D+E):-(D+W.width+E)),y:V.y+(O>0?-W.height/4:-W.height/4)}})}else{N.lines.setAttributes({path:["M",M+P,O+Q,"L",V.x,V.y,"Z","M",V.x,V.y,"l",M>0?D:-D,0,"z"]},true);N.box.setAttributes({x:V.x+(M>0?D:-(D+W.width+2*E)),y:V.y+(O>0?(-W.height-E/2):(-W.height-E/2)),width:W.width+2*E,height:W.height+2*E},true);N.label.setAttributes({x:V.x+(M>0?(D+E):-(D+W.width+E)),y:V.y+(O>0?-W.height/4:-W.height/4)},true)}for(F in N){N[F].show(true)}},onAnimate:function(c,d){c.show();return this.callParent(arguments)},isItemInPoint:function(v,x,t,A){var y=this,B=y.centerX,C=y.centerY,q=Math.abs,s=q(v-B),u=q(x-C),z=t.startAngle,E=t.endAngle,w=Math.sqrt(s*s+u*u),D=Math.atan2(x-C,v-B)/y.rad;if(y.clockwise){if(D<y.firstAngle){D+=y.accuracy}}else{if(D>y.firstAngle){D-=y.accuracy}}return(D<=z&&D>E&&w>=t.startRho&&w<=t.endRho)},hideAll:function(p){var s,u,o,t,q,m,n;p=(isNaN(this._index)?p:this._index)||0;this.__excludes=this.__excludes||[];this.__excludes[p]=true;n=this.slices[p].sprite;for(q=0,m=n.length;q<m;q++){n[q].setAttributes({hidden:true},true);var l=n[q].lineSprite;if(l){l.setAttributes({hidden:true},true)}}if(this.slices[p].shadowAttrs){for(s=0,t=this.slices[p].shadowAttrs,u=t.length;s<u;s++){o=t[s];for(q=0,m=o.length;q<m;q++){o[q].setAttributes({hidden:true},true)}}}this.drawSeries()},showAll:function(c){c=(isNaN(this._index)?c:this._index)||0;this.__excludes[c]=false;this.drawSeries()},highlightItem:function(C){var A=this,B=A.rad,x,Q,F,D,T,P,K,S,H,R,O,E,N,y,G,J,M,I;C=C||this.items[this._index];this.unHighlightItem();if(!C||A.animating||(C.sprite&&C.sprite._animating)){return}A.callParent([C]);if(!A.highlight){return}if("segment" in A.highlightCfg){x=A.highlightCfg.segment;Q=A.chart.animate;if(A.labelsGroup){O=A.labelsGroup;E=A.label.display;N=O.getAt(C.index);y=(C.startAngle+C.endAngle)/2*B;G=x.margin||0;J=G*Math.cos(y);M=G*Math.sin(y);if(Math.abs(J)<1e-10){J=0}if(Math.abs(M)<1e-10){M=0}F={translate:{x:J,y:M}};if(N.showOnHighlight){F.opacity=1;F.hidden=false}A.setSpriteAttributes(N,F,Q);I=N.lineSprite;if(I){A.setSpriteAttributes(I,F,Q)}}if(A.chart.shadow&&C.shadows){D=0;T=C.shadows;K=T.length;for(;D<K;D++){P=T[D];S={};H=C.sprite._from.segment;for(R in H){if(!(R in x)){S[R]=H[R]}}F={segment:Ext.applyIf(S,A.highlightCfg.segment)};A.setSpriteAttributes(P,F,Q)}}}},unHighlightItem:function(){var p=this,I,O,P,K,B,C,D,E,j,H,Q,S,z,G,R,N,A,M,F;if(!p.highlight){return}if(("segment" in p.highlightCfg)&&p.items){I=p.items;O=p.chart.animate;P=!!p.chart.shadow;K=p.labelsGroup;B=I.length;C=0;D=0;E=p.label.display;for(;C<B;C++){A=I[C];if(!A){continue}G=A.sprite;if(G&&G._highlighted){if(K){M=K.getAt(A.index);F=Ext.apply({translate:{x:0,y:0}},E=="rotate"?{rotate:{x:M.attr.x,y:M.attr.y,degrees:M.attr.rotation.degrees}}:{});if(M.showOnHighlight){F.opacity=0;F.hidden=true}p.setSpriteAttributes(M,F,O);var J=M.lineSprite;if(J){p.setSpriteAttributes(J,F,O)}}if(P){R=A.shadows;j=R.length;for(;D<j;D++){Q={};S=A.sprite._to.segment;z=A.sprite._from.segment;Ext.apply(Q,z);for(H in S){if(!(H in z)){Q[H]=S[H]}}N=R[D];p.setSpriteAttributes(N,{segment:Q},O)}}}}}p.callParent(arguments)},getLegendColor:function(d){var c=this;return(c.colorSet&&c.colorSet[d%c.colorSet.length])||c.colorArrayStyle[d%c.colorArrayStyle.length]}},1,0,0,0,["series.pie"],0,[Ext.chart.series,"Pie",Ext.chart,"PieSeries",Ext.chart,"PieChart"],0));(Ext.cmd.derive("Ext.chart.series.Radar",Ext.chart.series.Series,{type:"radar",rad:Math.PI/180,showInLegend:false,style:{},constructor:function(d){this.callParent(arguments);var h=this,e=h.chart.surface;h.group=e.getGroup(h.seriesId);if(h.showMarkers){h.markerGroup=e.getGroup(h.seriesId+"-markers")}},drawSeries:function(){var ah=this,ax=ah.chart.getChartStore(),x=ax.data.items,s,Z,ag=ah.group,l=ah.chart,W=l.series.items,V,ai,ap,an=ah.field||ah.yField,X=l.surface,ac=l.chartBBox,at=ah.colorArrayStyle,av,aw,af,U,al=0,ar=0,ay=[],ad=Math.max,aq=Math.cos,ak=Math.sin,am=Math.PI*2,S=ax.getCount(),au,T,Y,aa,ab,y,aj,ao=ah.seriesStyle,ae=l.axes&&l.axes.get(0),d=!(ae&&ae.maximum);ah.setBBox();al=d?0:(ae.maximum||0);ar=ae.minimum||0;Ext.apply(ao,ah.style||{});if(!ax||!ax.getCount()||ah.seriesIsHidden){ah.hide();ah.items=[];if(ah.radar){ah.radar.hide(true)}ah.radar=null;return}if(!ao.stroke){ao.stroke=at[ah.themeIdx%at.length]}ah.unHighlightItem();ah.cleanHighlights();av=ah.centerX=ac.x+(ac.width/2);aw=ah.centerY=ac.y+(ac.height/2);ah.radius=U=Math.min(ac.width,ac.height)/2;ah.items=af=[];if(d){for(V=0,ai=W.length;V<ai;V++){ap=W[V];ay.push(ap.yField)}for(s=0;s<S;s++){Z=x[s];for(y=0,aj=ay.length;y<aj;y++){al=ad(+Z.get(ay[y]),al)}}}al=al||1;if(ar>=al){ar=al-1}au=[];T=[];for(y=0;y<S;y++){Z=x[y];ab=U*(Z.get(an)-ar)/(al-ar);if(ab<0){ab=0}Y=ab*aq(y/S*am);aa=ab*ak(y/S*am);if(y==0){T.push("M",Y+av,aa+aw);au.push("M",0.01*Y+av,0.01*aa+aw)}else{T.push("L",Y+av,aa+aw);au.push("L",0.01*Y+av,0.01*aa+aw)}af.push({sprite:false,point:[av+Y,aw+aa],storeItem:Z,series:ah})}T.push("Z");if(!ah.radar){ah.radar=X.add(Ext.apply({type:"path",group:ag,path:au},ao||{}))}if(l.resizing){ah.radar.setAttributes({path:au},true)}if(l.animate){ah.onAnimate(ah.radar,{to:Ext.apply({path:T},ao||{})})}else{ah.radar.setAttributes(Ext.apply({path:T},ao||{}),true)}if(ah.showMarkers){ah.drawMarkers()}ah.renderLabels();ah.renderCallouts()},drawMarkers:function(){var w=this,y=w.chart,G=y.surface,u=y.getChartStore(),F=Ext.apply({},w.markerStyle||{}),z=Ext.apply(F,w.markerConfig,{fill:w.colorArrayStyle[w.themeIdx%w.colorArrayStyle.length]}),x=w.items,v=z.type,H=w.markerGroup,C=w.centerX,D=w.centerY,l,A,E,B,t;delete z.type;for(A=0,E=x.length;A<E;A++){l=x[A];B=H.getAt(A);if(!B){B=Ext.chart.Shape[v](G,Ext.apply({group:H,x:0,y:0,translate:{x:C,y:D}},z))}else{B.show()}l.sprite=B;if(y.resizing){B.setAttributes({x:0,y:0,translate:{x:C,y:D}},true)}B._to={translate:{x:l.point[0],y:l.point[1]}};t=w.renderer(B,u.getAt(A),B._to,A,u);t=Ext.applyIf(t||{},z||{});if(y.animate){w.onAnimate(B,{to:t})}else{B.setAttributes(t,true)}}},isItemInPoint:function(o,l,m){var h,n=10,j=Math.abs;h=m.point;return(j(h[0]-o)<=n&&j(h[1]-l)<=n)},onCreateLabel:function(q,m,s,p){var o=this,n=o.labelsGroup,w=o.label,t=o.centerX,u=o.centerY,v=Ext.apply({},w,o.seriesLabelStyle||{});return o.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:n,x:t,y:u},v||{}))},onPlaceLabel:function(Q,J,B,E,G,T,S){var H=this,I=H.chart,C=I.resizing,x=H.label,D=x.renderer,U=x.field,O=H.centerX,P=H.centerY,V={x:Number(B.point[0]),y:Number(B.point[1])},M=V.x-O,N=V.y-P,R=Math.atan2(N,M||1),K=R*180/Math.PI,F,y;function W(a){if(a<0){a+=360}return a%360}Q.setAttributes({text:D(J.get(U),Q,J,B,E,G,T,S),hidden:true},true);F=Q.getBBox();K=W(K);if((K>45&&K<135)||(K>225&&K<315)){y=(K>45&&K<135?1:-1);V.y+=y*F.height/2}else{y=(K>=135&&K<=225?-1:1);V.x+=y*F.width/2}if(C){Q.setAttributes({x:O,y:P},true)}if(T){Q.show(true);H.onAnimate(Q,{to:V})}else{Q.setAttributes(V,true);Q.show(true)}},toggleAll:function(j){var m=this,h,n,l,o;if(!j){Ext.chart.series.Radar.superclass.hideAll.call(m)}else{Ext.chart.series.Radar.superclass.showAll.call(m)}if(m.radar){m.radar.setAttributes({hidden:!j},true);if(m.radar.shadows){for(h=0,o=m.radar.shadows,n=o.length;h<n;h++){l=o[h];l.setAttributes({hidden:!j},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(h){var j=this,l=j.markerGroup&&j.markerGroup.getCount()||0,e=h||0;for(;e<l;e++){j.markerGroup.getAt(e).hide(true)}},getAxesForXAndYFields:function(){var l=this,e=l.chart,j=e.axes,h=[].concat(j&&j.get(0));return{yAxis:h}}},1,0,0,0,["series.radar"],0,[Ext.chart.series,"Radar"],0));(Ext.cmd.derive("Ext.chart.series.Scatter",Ext.chart.series.Cartesian,{type:"scatter",constructor:function(o){this.callParent(arguments);var m=this,l=m.chart.shadow,j=m.chart.surface,n,h;Ext.apply(m,o,{style:{},markerConfig:{},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)"},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)"},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)"}]});m.group=j.getGroup(m.seriesId);if(l){for(n=0,h=m.shadowAttributes.length;n<h;n++){m.shadowGroups.push(j.getGroup(m.seriesId+"-shadows"+n))}}},getBounds:function(){var v=this,E=v.chart,I=E.getChartStore(),z=E.axes,C=v.getAxesForXAndYFields(),D=C.xAxis,H=C.yAxis,M,u,J,G,w,y,x,A,B,K,F;v.setBBox();M=v.bbox;if(K=z.get(D)){F=K.applyData();w=F.from;x=F.to}if(K=z.get(H)){F=K.applyData();y=F.from;A=F.to}if(v.xField&&!Ext.isNumber(w)){K=v.getMinMaxXValues();w=K[0];x=K[1]}if(v.yField&&!Ext.isNumber(y)){K=v.getMinMaxYValues();y=K[0];A=K[1]}if(isNaN(w)){w=0;x=I.getCount()-1;u=M.width/(I.getCount()-1)}else{u=M.width/(x-w)}if(isNaN(y)){y=0;A=I.getCount()-1;J=M.height/(I.getCount()-1)}else{J=M.height/(A-y)}return{bbox:M,minX:w,minY:y,xScale:u,yScale:J}},getPaths:function(){var P=this,Q=P.chart,ab=Q.shadow,Y=Q.getChartStore(),K=Y.data.items,G,S,Z,V=P.group,X=P.bounds=P.getBounds(),ac=P.bbox,I=X.xScale,aa=X.yScale,y=X.minX,E=X.minY,N=ac.x,x=ac.y,W=ac.height,O=P.items=[],J=[],U=P.reverse,R,T,H,F,M;for(G=0,S=K.length;G<S;G++){Z=K[G];H=Z.get(P.xField);F=Z.get(P.yField);if(typeof F=="undefined"||(typeof F=="string"&&!F)||H==null||F==null){continue}if(typeof H=="string"||typeof H=="object"&&!Ext.isDate(H)){H=G}if(typeof F=="string"||typeof F=="object"&&!Ext.isDate(F)){F=G}if(U){R=N+ac.width-((H-y)*I)}else{R=N+(H-y)*I}T=x+W-(F-E)*aa;J.push({x:R,y:T});P.items.push({series:P,value:[H,F],point:[R,T],storeItem:Z});if(Q.animate&&Q.resizing){M=V.getAt(G);if(M){P.resetPoint(M);if(ab){P.resetShadow(M)}}}}return J},resetPoint:function(d){var c=this.bbox;d.setAttributes({translate:{x:(c.x+c.width)/2,y:(c.y+c.height)/2}},true)},resetShadow:function(t){var p=this,q=t.shadows,n=p.shadowAttributes,s=p.shadowGroups.length,o=p.bbox,l,m;for(l=0;l<s;l++){m=Ext.apply({},n[l]);if(m.translate){m.translate.x+=(o.x+o.width)/2;m.translate.y+=(o.y+o.height)/2}else{m.translate={x:(o.x+o.width)/2,y:(o.y+o.height)/2}}q[l].setAttributes(m,true)}},createPoint:function(j,o){var n=this,h=n.chart,m=n.group,l=n.bbox;return Ext.chart.Shape[o](h.surface,Ext.apply({},{x:0,y:0,group:m,translate:{x:(l.x+l.width)/2,y:(l.y+l.height)/2}},j))},createShadow:function(q,x,u){var v=this,w=v.chart,t=v.shadowGroups,z=v.shadowAttributes,C=t.length,p=v.bbox,A,s,B,y;q.shadows=B=[];for(A=0;A<C;A++){y=Ext.apply({},z[A]);if(y.translate){y.translate.x+=(p.x+p.width)/2;y.translate.y+=(p.y+p.height)/2}else{Ext.apply(y,{translate:{x:(p.x+p.width)/2,y:(p.y+p.height)/2}})}Ext.apply(y,x);s=Ext.chart.Shape[u](w.surface,Ext.apply({},{x:0,y:0,group:t[A]},y));B.push(s)}},drawSeries:function(){var v=this,E=v.chart,H=E.getChartStore(),G=v.group,M=E.shadow,O=v.shadowGroups,z=v.shadowAttributes,y=O.length,D,C,B,F,A,w,J,I,N,K,x;if(!H||!H.getCount()||v.seriesIsHidden){v.hide();v.items=[];return}w=Ext.apply({},v.markerStyle,v.markerConfig);I=w.type||"circle";delete w.type;if(!H||!H.getCount()){v.hide();v.items=[];return}v.unHighlightItem();v.cleanHighlights();C=v.getPaths();F=C.length;for(A=0;A<F;A++){B=C[A];D=G.getAt(A);Ext.apply(B,w);if(!D){D=v.createPoint(B,I);if(M){v.createShadow(D,w,I)}}N=D.shadows;if(E.animate){K=v.renderer(D,H.getAt(A),{translate:B},A,H);D._to=K;v.onAnimate(D,{to:K});for(J=0;J<y;J++){x=Ext.apply({},z[J]);K=v.renderer(N[J],H.getAt(A),Ext.apply({},{hidden:false,translate:{x:B.x+(x.translate?x.translate.x:0),y:B.y+(x.translate?x.translate.y:0)}},x),A,H);v.onAnimate(N[J],{to:K})}}else{K=v.renderer(D,H.getAt(A),{translate:B},A,H);D._to=K;D.setAttributes(K,true);for(J=0;J<y;J++){x=Ext.apply({},z[J]);K=v.renderer(N[J],H.getAt(A),Ext.apply({},{hidden:false,translate:{x:B.x+(x.translate?x.translate.x:0),y:B.y+(x.translate?x.translate.y:0)}},x),A,H);N[J].setAttributes(K,true)}}v.items[A].sprite=D}F=G.getCount();for(A=C.length;A<F;A++){D=G.getAt(A);D.hide(true);N=D.shadows;if(N){for(J=0;J<y;J++){N[J].hide(true)}}}v.renderLabels();v.renderCallouts()},onCreateLabel:function(q,l,s,p){var o=this,n=o.labelsGroup,u=o.label,t=Ext.apply({},u,o.seriesLabelStyle),m=o.bbox;return o.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:n,x:Number(l.point[0]),y:m.y+m.height/2},t))},onPlaceLabel:function(S,P,y,E,G,V,U){var K=this,O=K.chart,C=O.resizing,x=K.label,D=x.renderer,X=x.field,Y=K.bbox,Q=Number(y.point[0]),R=Number(y.point[1]),W=y.sprite.attr.radius,F,J,M,N,I,T,H;S.setAttributes({text:D(P.get(X),S,P,y,E,G,V,U),hidden:true},true);J=y.sprite.getBBox();J.width=J.width||(W*2);J.height=J.height||(W*2);F=S.getBBox();M=F.width/2;N=F.height/2;if(G=="rotate"){I=J.width/2+M+N/2;if(Q+I+M>Y.x+Y.width){Q-=I}else{Q+=I}S.setAttributes({rotation:{x:Q,y:R,degrees:-45}},true)}else{if(G=="under"||G=="over"){S.setAttributes({rotation:{degrees:0}},true);if(Q<Y.x+M){Q=Y.x+M}else{if(Q+M>Y.x+Y.width){Q=Y.x+Y.width-M}}T=J.height/2+N;R=R+(G=="over"?-T:T);if(R<Y.y+N){R+=2*T}else{if(R+N>Y.y+Y.height){R-=2*T}}}}if(!O.animate){S.setAttributes({x:Q,y:R},true);S.show(true)}else{if(C){H=y.sprite.getActiveAnimation();if(H){H.on("afteranimate",function(){S.setAttributes({x:Q,y:R},true);S.show(true)})}else{S.show(true)}}else{K.onAnimate(S,{to:{x:Q,y:R}})}}},onPlaceCallout:function(W,U,Q,p,x,ac,Y){var J=this,T=J.chart,H=T.surface,R=T.resizing,M=J.callouts,S=J.items,ad=Q.point,G,ae=W.label.getBBox(),O=30,I=10,K=3,aa,ab,Z,N,P,y=J.bbox,V,X;G=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)];V=ad[0]+G[0]*O;X=ad[1]+G[1]*O;aa=V+(G[0]>0?0:-(ae.width+2*K));ab=X-ae.height/2-K;Z=ae.width+2*K;N=ae.height+2*K;if(aa<y[0]||(aa+Z)>(y[0]+y[2])){G[0]*=-1}if(ab<y[1]||(ab+N)>(y[1]+y[3])){G[1]*=-1}V=ad[0]+G[0]*O;X=ad[1]+G[1]*O;aa=V+(G[0]>0?0:-(ae.width+2*K));ab=X-ae.height/2-K;Z=ae.width+2*K;N=ae.height+2*K;if(T.animate){J.onAnimate(W.lines,{to:{path:["M",ad[0],ad[1],"L",V,X,"Z"]}},true);J.onAnimate(W.box,{to:{x:aa,y:ab,width:Z,height:N}},true);J.onAnimate(W.label,{to:{x:V+(G[0]>0?K:-(ae.width+K)),y:X}},true)}else{W.lines.setAttributes({path:["M",ad[0],ad[1],"L",V,X,"Z"]},true);W.box.setAttributes({x:aa,y:ab,width:Z,height:N},true);W.label.setAttributes({x:V+(G[0]>0?K:-(ae.width+K)),y:X},true)}for(P in W){W[P].show(true)}},onAnimate:function(c,d){c.show();return this.callParent(arguments)},isItemInPoint:function(q,m,o){var j,p=10,l=Math.abs;function n(d){var a=l(d[0]-q),c=l(d[1]-m);return Math.sqrt(a*a+c*c)}j=o.point;return(j[0]-p<=q&&j[0]+p>=q&&j[1]-p<=m&&j[1]+p>=m)}},1,0,0,0,["series.scatter"],0,[Ext.chart.series,"Scatter"],0));(Ext.cmd.derive("Ext.layout.container.Table",Ext.layout.container.Container,{alternateClassName:"Ext.layout.TableLayout",type:"table",createsInnerCt:true,targetCls:Ext.baseCSSPrefix+"table-layout-ct",tableCls:Ext.baseCSSPrefix+"table-layout",cellCls:Ext.baseCSSPrefix+"table-layout-cell",tableAttrs:null,getItemSizePolicy:function(c){return this.autoSizePolicy},initHierarchyState:function(c){c.inShrinkWrapTable=true},getLayoutItems:function(){var l=this,h=[],o=l.callParent(),m,j=o.length,n;for(n=0;n<j;n++){m=o[n];if(!m.hidden){h.push(m)}}return h},getHiddenItems:function(){var h=[],n=this.owner.items.items,j=n.length,m=0,l;for(;m<j;++m){l=n[m];if(l.rendered&&l.hidden){h.push(l)}}return h},renderChildren:function(){var v=this,C=v.getLayoutItems(),M=v.owner.getTargetEl().child("table",true).tBodies[0],E=M.rows,A=0,y=C.length,x=v.getHiddenItems(),G,H,J,K,w,D,z,I,u,B,F;G=v.calculateCells(C);for(;A<y;A++){H=G[A];J=H.rowIdx;K=H.cellIdx;w=C[A];D=E[J];if(!D){D=M.insertRow(J);if(v.trAttrs){D.set(v.trAttrs)}}I=z=Ext.get(D.cells[K]||D.insertCell(K));if(v.needsDivWrap()){I=z.first()||z.createChild({tag:"div",role:"presentation"});I.setWidth(null)}if(!w.rendered){v.renderItem(w,I,0)}else{if(!v.isValidParent(w,I,J,K,M)){v.moveItem(w,I,0)}}if(v.tdAttrs){z.set(v.tdAttrs)}if(w.tdAttrs){z.set(w.tdAttrs)}z.set({colSpan:w.colspan||1,rowSpan:w.rowspan||1,cls:v.cellCls+" "+(w.cellCls||"")});F=undefined;B=z.id;u=w.cellId;if(u&&u!=B){F=u}else{if(!u&&!Ext.isAutoId(B)){F=Ext.id()}}if(F){z.dom.id=F}if(F&&B){Ext.updateCacheId(B,F)}if(!G[A+1]||G[A+1].rowIdx!==J){K++;while(D.cells[K]){D.deleteCell(K)}}}J++;while(M.rows[J]){M.deleteRow(J)}for(A=0,y=x.length;A<y;++A){v.ensureInDocument(x[A].getEl())}},ensureInDocument:function(d){var c=d.dom.parentNode;while(c){if(c.tagName.toUpperCase()=="BODY"){return}c=c.parentNode}Ext.getDetachedBody().appendChild(d)},calculate:function(n){if(!n.hasDomProp("containerChildrenSizeDone")){this.done=false}else{var q=n.targetContext,j=n.widthModel.shrinkWrap,l=n.heightModel.shrinkWrap,m=l||j,p=m&&q.el.child("table",true),o=m&&q.getPaddingInfo();if(j){n.setContentWidth(p.offsetWidth+o.width,true)}if(l){n.setContentHeight(p.offsetHeight+o.height,true)}}},finalizeLayout:function(){if(this.needsDivWrap()){var e=this.getLayoutItems(),l,h=e.length,j;for(l=0;l<h;l++){j=e[l];Ext.fly(j.el.dom.parentNode).setWidth(j.getWidth())}}if(Ext.isIE6||Ext.isIEQuirks){this.owner.getTargetEl().child("table").repaint()}},calculateCells:function(q){var o=[],x=0,v=0,y=0,s=this.columns||Infinity,j=[],u=0,w,t=q.length,p;for(;u<t;u++){p=q[u];while(v>=s||j[v]>0){if(v>=s){v=0;y=0;x++;for(w=0;w<s;w++){if(j[w]>0){j[w]--}}}else{v++}}o.push({rowIdx:x,cellIdx:y});for(w=p.colspan||1;w;--w){j[v]=p.rowspan||1;++v}++y}return o},getRenderTree:function(){var y=this,A=y.getLayoutItems(),u,t=[],s=Ext.apply({tag:"table",role:"presentation",cls:y.tableCls,cellspacing:0,cellpadding:0,cn:{tag:"tbody",role:"presentation",cn:t}},y.tableAttrs),E=y.tdAttrs,D=y.needsDivWrap(),C,B=A.length,v,w,z,F,G,x;u=y.calculateCells(A);for(C=0;C<B;C++){v=A[C];w=u[C];F=w.rowIdx;G=w.cellIdx;z=t[F];if(!z){z=t[F]={tag:"tr",role:"presentation",cn:[]};if(y.trAttrs){Ext.apply(z,y.trAttrs)}}x=z.cn[G]={tag:"td",role:"presentation"};if(E){Ext.apply(x,E)}Ext.apply(x,{colSpan:v.colspan||1,rowSpan:v.rowspan||1,id:v.cellId||"",cls:y.cellCls+" "+(v.cellCls||"")});if(D){x=x.cn={tag:"div",role:"presentation"}}y.configureItem(v);x.cn=v.getRenderTree()}return s},isValidParent:function(n,m,o,p){var j,l,q;if(arguments.length===3){q=n.el.up("table");return q&&q.dom.parentNode===m.dom}j=this.owner.getTargetEl().child("table",true).tBodies[0];l=j.rows[o].cells[p];return n.el.dom.parentNode===l},needsDivWrap:function(){return Ext.isOpera10_5}},0,0,0,0,["layout.table"],0,[Ext.layout.container,"Table",Ext.layout,"TableLayout"],0));(Ext.cmd.derive("Ext.container.ButtonGroup",Ext.panel.Panel,{alternateClassName:"Ext.ButtonGroup",baseCls:Ext.baseCSSPrefix+"btn-group",layout:{type:"table"},defaultType:"button",frame:true,frameHeader:false,titleAlign:"center",noTitleCls:"notitle",ariaRole:"group",initComponent:function(){var d=this,c=d.columns;if(c){d.layout=Ext.apply({},{columns:c},d.layout)}if(!d.title){d.addClsWithUI(d.noTitleCls)}d.callParent(arguments)},onBeforeAdd:function(c){if(c.isButton){if(this.defaultButtonUI&&c.ui==="default"&&!c.hasOwnProperty("ui")){c.ui=this.defaultButtonUI}else{c.ui=c.ui+"-toolbar"}}this.callParent(arguments)},applyDefaults:function(c){if(!Ext.isString(c)){c=this.callParent(arguments)}return c}},0,["buttongroup"],["component","box","container","panel","buttongroup"],{component:true,box:true,container:true,panel:true,buttongroup:true},["widget.buttongroup"],0,[Ext.container,"ButtonGroup",Ext,"ButtonGroup"],0));(Ext.cmd.derive("Ext.container.Monitor",Ext.Base,{target:null,selector:"",scope:null,addHandler:null,removeHandler:null,invalidateHandler:null,disabled:0,constructor:function(c){Ext.apply(this,c)},bind:function(c){var d=this;d.target=c;c.on("beforedestroy",d.disable,d);d.onContainerAdd(c)},unbind:function(){var d=this,c=d.target;if(c){c.un("beforedestroy",d.disable,d)}d.items=null},disable:function(){++this.disabled},enable:function(){if(this.disabled>0){--this.disabled}},handleAdd:function(c,d){if(!this.disabled){if(d.is(this.selector)){this.onItemAdd(d.ownerCt,d)}if(d.isQueryable){this.onContainerAdd(d)}}},onItemAdd:function(n,h){var l=this,j=l.items,m=l.addHandler;if(!l.disabled){if(m){m.call(l.scope||h,h)}if(j){j.add(h)}}},onItemRemove:function(n,h){var l=this,j=l.items,m=l.removeHandler;if(!l.disabled){if(m){m.call(l.scope||h,h)}if(j){j.remove(h)}}},onContainerAdd:function(o,t){var l=this,m,n,s=l.handleAdd,u=l.handleRemove,q,p;if(o.isContainer){o.on("add",s,l);o.on("dockedadd",s,l);o.on("remove",u,l);o.on("dockedremove",u,l)}if(t!==true){m=o.query(l.selector);for(q=0,n=m.length;q<n;++q){p=m[q];l.onItemAdd(p.ownerCt,p)}}m=o.query(">container");for(q=0,n=m.length;q<n;++q){l.onContainerAdd(m[q],true)}},handleRemove:function(d,e){var h=this;if(!h.disabled){if(e.is(h.selector)){h.onItemRemove(d,e)}if(e.isQueryable){h.onContainerRemove(d,e)}}},onContainerRemove:function(o,q){var m=this,j,p,l,n;if(!q.isDestroyed&&!q.destroying&&q.isContainer){m.removeCtListeners(q);j=q.query(m.selector);for(p=0,l=j.length;p<l;++p){n=j[p];m.onItemRemove(n.ownerCt,n)}j=q.query("container");for(p=0,l=j.length;p<l;++p){m.removeCtListeners(j[p])}}else{m.invalidateItems(true)}},removeCtListeners:function(d){var c=this;d.un("add",c.handleAdd,c);d.un("dockedadd",c.handleAdd,c);d.un("remove",c.handleRemove,c);d.un("dockedremove",c.handleRemove,c)},getItems:function(){var c=this,d=c.items;if(!d){d=c.items=new Ext.util.MixedCollection();d.addAll(c.target.query(c.selector))}return d},invalidateItems:function(h){var d=this,e=d.invalidateHandler;if(h&&e){e.call(d.scope||d,d)}d.items=null}},1,0,0,0,0,0,[Ext.container,"Monitor"],0));(Ext.cmd.derive("Ext.container.Viewport",Ext.container.Container,{alternateClassName:"Ext.Viewport",isViewport:true,ariaRole:"application",preserveElOnDestroy:true,viewportCls:Ext.baseCSSPrefix+"viewport",initComponent:function(){var c=this,d=c.el=Ext.getBody();Ext.getScrollbarSize();c.width=c.height=undefined;c.callParent(arguments);Ext.fly(document.documentElement).addCls(c.viewportCls);d.setHeight=d.setWidth=Ext.emptyFn;d.dom.scroll="no";c.allowDomMove=false;c.renderTo=c.el},getOverflowEl:function(){return(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks)?this.el:Ext.get(document.documentElement)},applyTargetCls:function(c){this.el.addCls(c)},onRender:function(){var c=this;c.callParent(arguments);c.width=Ext.Element.getViewportWidth();c.height=Ext.Element.getViewportHeight()},afterFirstLayout:function(){var c=this;c.callParent(arguments);setTimeout(function(){Ext.EventManager.onWindowResize(c.fireResize,c)},1)},fireResize:function(c,d){if(c!=this.width||d!=this.height){this.setSize(c,d)}},initHierarchyState:function(c){this.callParent([this.hierarchyState=Ext.rootHierarchyState])},beforeDestroy:function(){var c=this;c.removeUIFromElement();c.el.removeCls(c.baseCls);Ext.fly(document.body.parentNode).removeCls(c.viewportCls);c.callParent()}},0,["viewport"],["component","box","container","viewport"],{component:true,box:true,container:true,viewport:true},["widget.viewport"],0,[Ext.container,"Viewport",Ext,"Viewport"],0));(Ext.cmd.derive("Ext.data.IdGenerator",Ext.Base,{isGenerator:true,constructor:function(d){var c=this;Ext.apply(c,d);if(c.id){Ext.data.IdGenerator.all[c.id]=c}},getRecId:function(c){return c.modelName+"-"+c.internalId},statics:{all:{},get:function(h){var l,j,e;if(typeof h=="string"){j=e=h;h=null}else{if(h.isGenerator){return h}else{j=h.id||h.type;e=h.type}}l=this.all[j];if(!l){l=Ext.create("idgen."+e,h)}return l}}},1,0,0,0,0,0,[Ext.data,"IdGenerator"],0));(Ext.cmd.derive("Ext.data.SortTypes",Ext.Base,{singleton:true,none:Ext.identityFn,stripTagsRE:/<\/?[^>]+>/gi,asText:function(c){return String(c).replace(this.stripTagsRE,"")},asUCText:function(c){return String(c).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(c){return String(c).toUpperCase()},asDate:function(c){if(!c){return 0}if(Ext.isDate(c)){return c.getTime()}return Date.parse(String(c))},asFloat:function(d){var c=parseFloat(String(d).replace(/,/g,""));return isNaN(c)?0:c},asInt:function(d){var c=parseInt(String(d).replace(/,/g,""),10);return isNaN(c)?0:c}},0,0,0,0,0,0,[Ext.data,"SortTypes"],0));(Ext.cmd.derive("Ext.data.Types",Ext.Base,{singleton:true},0,0,0,0,0,0,[Ext.data,"Types"],function(c){var d=Ext.data.SortTypes;Ext.apply(c,{stripRe:/[\$,%]/g,AUTO:{sortType:d.none,type:"auto"},STRING:{convert:function(a){var e=this.useNull?null:"";return(a===undefined||a===null)?e:String(a)},sortType:d.asUCString,type:"string"},INT:{convert:function(a){if(typeof a=="number"){return parseInt(a)}return a!==undefined&&a!==null&&a!==""?parseInt(String(a).replace(c.stripRe,""),10):(this.useNull?null:0)},sortType:d.none,type:"int"},FLOAT:{convert:function(a){if(typeof a==="number"){return a}return a!==undefined&&a!==null&&a!==""?parseFloat(String(a).replace(c.stripRe,""),10):(this.useNull?null:0)},sortType:d.none,type:"float"},BOOL:{convert:function(a){if(typeof a==="boolean"){return a}if(this.useNull&&(a===undefined||a===null||a==="")){return null}return a==="true"||a==1},sortType:d.none,type:"bool"},DATE:{convert:function(h){var a=this.dateReadFormat||this.dateFormat,j;if(!h){return null}if(h instanceof Date){return h}if(a){return Ext.Date.parse(h,a)}j=Date.parse(h);return j?new Date(j):null},sortType:d.asDate,type:"date"}});c.BOOLEAN=c.BOOL;c.INTEGER=c.INT;c.NUMBER=c.FLOAT}));(Ext.cmd.derive("Ext.data.Field",Ext.Base,{isField:true,constructor:function(e){var j=this,l=Ext.data.Types,h;if(Ext.isString(e)){e={name:e}}Ext.apply(j,e);h=j.sortType;if(j.type){if(Ext.isString(j.type)){j.type=l[j.type.toUpperCase()]||l.AUTO}}else{j.type=l.AUTO}if(Ext.isString(h)){j.sortType=Ext.data.SortTypes[h]}else{if(Ext.isEmpty(h)){j.sortType=j.type.sortType}}if(!e.hasOwnProperty("convert")){j.convert=j.type.convert}else{if(!j.convert&&j.type.convert&&!e.hasOwnProperty("defaultValue")){j.defaultValue=j.type.convert(j.defaultValue)}}if(e.convert){j.hasCustomConvert=true}},dateFormat:null,dateReadFormat:null,dateWriteFormat:null,useNull:false,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:true,persist:true},1,0,0,0,["data.field"],0,[Ext.data,"Field"],0));(Ext.cmd.derive("Ext.data.Errors",Ext.util.MixedCollection,{isValid:function(){return this.length===0},getByField:function(j){var l=[],h,e;for(e=0;e<this.length;e++){h=this.items[e];if(h.field==j){l.push(h)}}return l}},0,0,0,0,0,0,[Ext.data,"Errors"],0));(Ext.cmd.derive("Ext.data.validations",Ext.Base,{singleton:true,presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",emailMessage:"is not a valid email address",emailRe:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,presence:function(d,c){if(arguments.length===1){c=d}return !!c||c===0||c===false},length:function(h,l){if(l===undefined||l===null){return false}var m=l.length,n=h.min,j=h.max;if((n&&m<n)||(j&&m>j)){return false}else{return true}},email:function(c,d){return Ext.data.validations.emailRe.test(d)},format:function(d,c){return !!(d.matcher&&d.matcher.test(c))},inclusion:function(d,c){return d.list&&Ext.Array.indexOf(d.list,c)!=-1},exclusion:function(d,c){return d.list&&Ext.Array.indexOf(d.list,c)==-1}},0,0,0,0,0,0,[Ext.data,"validations"],0));(Ext.cmd.derive("Ext.data.Model",Ext.Base,{alternateClassName:"Ext.data.Record",compareConvertFields:function(h,j){var l=h.convert&&h.type&&h.convert!==h.type.convert,e=j.convert&&j.type&&j.convert!==j.type.convert;if(l&&!e){return 1}if(!l&&e){return -1}return 0},itemNameFn:function(c){return c.name},onClassExtended:function(e,l,h){var j=h.onBeforeCreated;h.onBeforeCreated=function(ae,M){var N=this,I=Ext.getClassName(ae),O=ae.prototype,a=ae.prototype.superclass,ac=M.validations||[],J=M.fields||[],ad,X=M.associations||[],af=function(p,n){var o=0,q,m;if(p){p=Ext.Array.from(p);for(q=p.length;o<q;++o){m=p[o];if(!Ext.isObject(m)){m={model:m}}m.type=n;X.push(m)}}},H=M.idgen,S=new Ext.util.MixedCollection(false,O.itemNameFn),W=new Ext.util.MixedCollection(false,O.itemNameFn),P=a.validations,Q=a.fields,Z=a.associations,U,c,T,R=[],V="idProperty" in M?M.idProperty:O.idProperty,Y=V?(V.isField?V:new Ext.data.Field(V)):null,ab=false,d=function(o,p,q){var n,m;if(S.events.add.firing){m=o;n=p}else{n=q;m=p.originalIndex}n.originalIndex=m;if(Y&&((n.mapping&&(n.mapping===Y.mapping))||(n.name===Y.name))){O.idField=n;ab=true;n.defaultValue=undefined}},K=M.proxy,aa=function(){S.sortBy(O.compareConvertFields)};ae.modelName=I;O.modelName=I;if(P){ac=P.concat(ac)}M.validations=ac;if(Q){J=Q.items.concat(J)}S.on({add:d,replace:d});for(c=0,T=J.length;c<T;++c){ad=J[c];S.add(ad.isField?ad:new Ext.data.Field(ad))}if(Y&&!ab){O.idField=Y;Y.defaultValue=undefined;S.add(Y)}aa();S.on({add:aa,replace:aa});M.fields=S;if(H){M.idgen=Ext.data.IdGenerator.get(H)}af(M.belongsTo,"belongsTo");delete M.belongsTo;af(M.hasMany,"hasMany");delete M.hasMany;af(M.hasOne,"hasOne");delete M.hasOne;if(Z){X=Z.items.concat(X)}Ext.Array.forEach(Ext.ModelManager.associationStack,function(m){var o=function(q,p){p=p;if(q.ownerModel===p.modelName){return true}else{if(p.superclass){return o(q,p.superclass)}}return false},n;if(o(m,a)){n=Ext.clone(m);n.ownerModel=this.modelName;X.push(n)}},this);for(c=0,T=X.length;c<T;++c){R.push("association."+X[c].type.toLowerCase())}if(K){if(!K.isProxy){R.push("proxy."+(K.type||K))}}else{if(!ae.prototype.proxy){ae.prototype.proxy=ae.prototype.defaultProxyType;R.push("proxy."+ae.prototype.defaultProxyType)}}Ext.require(R,function(){if(I){Ext.ModelManager.registerType(I,ae);for(c=0,T=X.length;c<T;++c){U=X[c];if(U.isAssociation){U=Ext.applyIf({ownerModel:I,associatedModel:U.model},U.initialConfig)}else{Ext.apply(U,{ownerModel:I,associatedModel:U.model})}if(Ext.ModelManager.getModel(U.model)===undefined){Ext.ModelManager.registerDeferredAssociation(U)}else{W.add(Ext.data.association.Association.create(U))}}}M.associations=W;j.call(N,ae,M,h);if(K&&K.isProxy){ae.setProxy(K)}if(I){Ext.ModelManager.onModelDefined(ae)}})}},inheritableStatics:{setProxy:function(c){if(!c.isProxy){if(typeof c=="string"){c={type:c}}c=Ext.createByAlias("proxy."+c.type,c)}c.setModel(this);this.proxy=this.prototype.proxy=c;return c},getProxy:function(){var c=this.proxy;if(!c){c=this.prototype.proxy;if(c.isProxy){c=c.clone()}return this.setProxy(c)}return c},setFields:function(v,o,p){var s=this,A,z,q=false,w=s.prototype,y=w.fields,t=w.superclass.fields,u,x;if(o){w.idProperty=o;z=o.isField?o:new Ext.data.Field(o)}if(p){w.clientIdProperty=p}if(y){y.clear()}else{y=s.prototype.fields=new Ext.util.MixedCollection(false,function(a){return a.name})}if(t){v=t.items.concat(v)}for(x=0,u=v.length;x<u;x++){A=new Ext.data.Field(v[x]);if(z&&((A.mapping&&(A.mapping===z.mapping))||(A.name===z.name))){q=true;A.defaultValue=undefined}y.add(A)}if(z&&!q){z.defaultValue=undefined;y.add(z)}s.fields=y;return y},getFields:function(){return this.prototype.fields.items},load:function(l,h){h=Ext.apply({},h);h=Ext.applyIf(h,{action:"read",id:l});var j=new Ext.data.Operation(h),n=h.scope||this,m;m=function(d){var e=null,a=d.wasSuccessful(),c;if(a){e=d.getRecords()[0]||null;if(e){if(!e.hasId()){e.setId(l)}c=true}}if(c){Ext.callback(h.success,n,[e,d])}else{Ext.callback(h.failure,n,[e,d])}Ext.callback(h.callback,n,[e,d,a])};this.getProxy().read(j,m,this)}},statics:{PREFIX:"ext-record",AUTO_ID:1,EDIT:"edit",REJECT:"reject",COMMIT:"commit",id:function(d){var c=[this.PREFIX,"-",this.AUTO_ID++].join("");d.phantom=true;d.internalId=c;return c}},idgen:{isGenerator:true,type:"default",generate:function(){return null},getRecId:function(c){return c.modelName+"-"+c.internalId}},editing:false,dirty:false,persistenceProperty:"data",evented:false,isModel:true,phantom:false,idProperty:"id",clientIdProperty:null,defaultProxyType:"ajax",emptyData:[],constructor:function(z,E,u,H){var x=this,A=(E||E===0),t,y,D,w,I,v,C,F,J=x.idProperty,G=x.idField,B;x.raw=u||z;x.modified={};F=x[x.persistenceProperty]=H||{};x.data=x[x.persistenceProperty];x.mixins.observable.constructor.call(x);if(!H){if(z){if(!A&&J){E=z[J];t=(E||E===0)}}else{z=x.emptyData}y=x.fields.items;D=y.length;B=0;if(Ext.isArray(z)){for(;B<D;B++){w=y[B];I=w.name;v=z[w.originalIndex];if(v===undefined){v=w.defaultValue}if(w.convert){v=w.convert(v,x)}if(v!==undefined){F[I]=v}}}else{for(;B<D;B++){w=y[B];I=w.name;v=z[I];if(v===undefined){v=w.defaultValue}if(w.convert){v=w.convert(v,x)}if(v!==undefined){F[I]=v}}}}x.stores=[];if(A){t=true;F[J]=G&&G.convert?G.convert(E,x):E}else{if(!t){C=x.idgen.generate();if(C!=null){x.preventInternalUpdate=true;x.setId(C);delete x.preventInternalUpdate}}}x.internalId=t?E:Ext.data.Model.id(x);if(typeof x.init=="function"){x.init()}x.id=x.idgen.getRecId(x)},get:function(c){return this[this.persistenceProperty][c]},_singleProp:{},set:function(J,H){var A=this,C=A[A.persistenceProperty],B=A.fields,t=A.modified,v=(typeof J=="string"),u,z,D,w,E,I,G,F,y,x;if(v){x=A._singleProp;x[J]=H}else{x=J}for(I in x){if(x.hasOwnProperty(I)){y=x[I];if(B&&(z=B.get(I))&&z.convert){y=z.convert(y,A)}u=C[I];if(A.isEqual(u,y)){continue}C[I]=y;(E||(E=[])).push(I);if(z&&z.persist){if(t.hasOwnProperty(I)){if(A.isEqual(t[I],y)){delete t[I];A.dirty=false;for(w in t){if(t.hasOwnProperty(w)){A.dirty=true;break}}}}else{A.dirty=true;t[I]=u}}if(I==A.idProperty){D=true;G=u;F=y}}}if(v){delete x[J]}if(D){A.changeId(G,F)}if(!A.editing&&E){A.afterEdit(E)}return E||null},copyFrom:function(t){var u=this,w=u.fields.items,p=w.length,z=[],s,y=0,v,x,o=u.idProperty,A,q;if(t){v=u[u.persistenceProperty];x=t[t.persistenceProperty];for(;y<p;y++){s=w[y];A=s.name;if(A!=o){q=x[A];if(q!==undefined&&!u.isEqual(v[A],q)){v[A]=q;z.push(A)}}}if(u.phantom&&!t.phantom){u.beginEdit();u.setId(t.getId());u.endEdit(true);u.commit(true)}}return z},isEqual:function(a,e){if(a instanceof Date&&e instanceof Date){return a.getTime()===e.getTime()}return a===e},beginEdit:function(){var e=this,h,l,j;if(!e.editing){e.editing=true;e.dirtySave=e.dirty;j=e[e.persistenceProperty];l=e.dataSave={};for(h in j){if(j.hasOwnProperty(h)){l[h]=j[h]}}j=e.modified;l=e.modifiedSave={};for(h in j){if(j.hasOwnProperty(h)){l[h]=j[h]}}}},cancelEdit:function(){var c=this;if(c.editing){c.editing=false;c.modified=c.modifiedSave;c[c.persistenceProperty]=c.dataSave;c.dirty=c.dirtySave;c.modifiedSave=c.dataSave=c.dirtySave=null}},endEdit:function(j,m){var n=this,h,l;j=j===true;if(n.editing){n.editing=false;h=n.dataSave;n.modifiedSave=n.dataSave=n.dirtySave=null;if(!j){if(!m){m=n.getModifiedFieldNames(h)}l=n.dirty||m.length>0;if(l){n.afterEdit(m)}}}},getModifiedFieldNames:function(m){var n=this,l=n[n.persistenceProperty],j=[],h;m=m||n.dataSave;for(h in l){if(l.hasOwnProperty(h)){if(!n.isEqual(l[h],m[h])){j.push(h)}}}return j},getChanges:function(){var e=this.modified,d={},h;for(h in e){if(e.hasOwnProperty(h)){d[h]=this.get(h)}}return d},isModified:function(c){return this.modified.hasOwnProperty(c)},setDirty:function(){var o=this,j=o.fields.items,l=j.length,m,h,n;o.dirty=true;for(n=0;n<l;n++){m=j[n];if(m.persist){h=m.name;o.modified[h]=o.get(h)}}},reject:function(h){var l=this,e=l.modified,j;for(j in e){if(e.hasOwnProperty(j)){if(typeof e[j]!="function"){l[l.persistenceProperty][j]=e[j]}}}l.dirty=false;l.editing=false;l.modified={};if(h!==true){l.afterReject()}},commit:function(e,h){var d=this;d.phantom=d.dirty=d.editing=false;d.modified={};if(e!==true){d.afterCommit(h)}},copy:function(d){var c=this;return new c.self(c.raw,d,null,Ext.apply({},c[c.persistenceProperty]))},setProxy:function(c){if(!c.isProxy){if(typeof c==="string"){c={type:c}}c=Ext.createByAlias("proxy."+c.type,c)}c.setModel(this.self);this.proxy=c;return c},getProxy:function(){return this.hasOwnProperty("proxy")?this.proxy:this.self.getProxy()},validate:function(){var l=new Ext.data.Errors(),s=this.validations,p=Ext.data.validations,t,q,m,u,n,o;if(s){t=s.length;for(o=0;o<t;o++){q=s[o];m=q.field||q.name;n=q.type;u=p[n](q,this.get(m));if(!u){l.add({field:m,message:q.message||p[n+"Message"]})}}}return l},isValid:function(){return this.validate().isValid()},save:function(m){m=Ext.apply({},m);var s=this,v=s.phantom?"create":"update",n=m.scope||s,p=s.stores,u=0,t,q,w,o;Ext.apply(m,{records:[s],action:v});w=new Ext.data.Operation(m);o=function(a){var c=a.wasSuccessful();if(c){for(t=p.length;u<t;u++){q=p[u];q.fireEvent("write",q,a);q.fireEvent("datachanged",q)}Ext.callback(m.success,n,[s,a])}else{Ext.callback(m.failure,n,[s,a])}Ext.callback(m.callback,n,[s,a,c])};s.getProxy()[v](w,o,s);return s},destroy:function(n){n=Ext.apply({records:[this],action:"destroy"},n);var t=this,y=t.phantom!==true,o=n.scope||t,q,w=0,u,s,v,x,p;x=new Ext.data.Operation(n);p=function(a){v=[t,a];q=Ext.Array.clone(t.stores);if(a.wasSuccessful()){for(u=q.length;w<u;w++){s=q[w];if(!s.isTreeStore){s.remove(t,true)}else{s.onNodeRemove(t.parentNode,t,false)}if(y){s.fireEvent("write",s,a)}}t.clearListeners();Ext.callback(n.success,o,v)}else{Ext.callback(n.failure,o,v)}Ext.callback(n.callback,o,v)};if(y){t.getProxy().destroy(x,p,t)}else{x.complete=x.success=true;x.resultSet=t.getProxy().reader.nullResultSet;p(x)}return t},getId:function(){return this.get(this.idField.name)},getObservableId:function(){return this.id},setId:function(c){this.set(this.idProperty,c)},changeId:function(l,h){var m=this,n,o,j;if(!m.preventInternalUpdate){n=m.hasId(l);o=m.hasId(h);j=m.internalId;m.phantom=!o;if(o!==n||(o&&n)){m.internalId=o?h:Ext.data.Model.id(m)}m.fireEvent("idchanged",m,l,h,j);m.callStore("onIdChanged",l,h,j)}},hasId:function(c){if(arguments.length===0){c=this.getId()}return !!(c||c===0)},join:function(d){var c=this;if(!c.stores.length){c.stores[0]=d}else{Ext.Array.include(this.stores,d)}this.store=this.stores[0]},unjoin:function(c){Ext.Array.remove(this.stores,c);this.store=this.stores[0]||null},afterEdit:function(c){this.callStore("afterEdit",c)},afterReject:function(){this.callStore("afterReject")},afterCommit:function(c){this.callStore("afterCommit",c)},callStore:function(l){var n=Ext.Array.clone(arguments),h=this.stores,m=0,j=h.length,o;n[0]=this;for(;m<j;++m){o=h[m];if(o&&Ext.isFunction(o[l])){o[l].apply(o,n)}}},getData:function(q){var p=this,l=p.fields.items,m=l.length,n={},j,o;for(o=0;o<m;o++){j=l[o].name;n[j]=p.get(j)}if(q===true){Ext.apply(n,p.getAssociatedData())}return n},getAssociatedData:function(){return this.prepareAssociatedData({},1)},prepareAssociatedData:function(C,j){var o=this,F=o.associations.items,S=F.length,B={},I=[],D=[],N=[],K,V,W,M,R,O,P,E,Q,U,G,H,T,J;for(G=0;G<S;G++){U=F[G];E=U.associationId;P=C[E];if(P&&P!==j){continue}C[E]=j;T=U.type;J=U.name;if(T=="hasMany"){K=o[U.storeName];B[J]=[];if(K&&K.getCount()>0){V=K.data.items;Q=V.length;for(H=0;H<Q;H++){W=V[H];B[J][H]=W.getData();I.push(W);D.push(J);N.push(H)}}}else{if(T=="belongsTo"||T=="hasOne"){W=o[U.instanceName];if(W!==undefined){B[J]=W.getData();I.push(W);D.push(J);N.push(-1)}}}}for(G=0,Q=I.length;G<Q;++G){W=I[G];M=B[D[G]];R=N[G];O=W.prepareAssociatedData(C,j+1);if(R===-1){Ext.apply(M,O)}else{Ext.apply(M[R],O)}}return B}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.data,"Model",Ext.data,"Record"],0));(Ext.cmd.derive("Ext.data.proxy.Server",Ext.data.proxy.Proxy,{alternateClassName:"Ext.data.ServerProxy",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:false,simpleGroupMode:false,noCache:true,cacheString:"_dc",timeout:30000,constructor:function(d){var c=this;d=d||{};c.callParent([d]);c.extraParams=d.extraParams||{};c.api=Ext.apply({},d.api||c.api);c.nocache=c.noCache},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(d,c){this.extraParams[d]=c},buildRequest:function(h){var l=this,j=h.params=Ext.apply({},h.params,l.extraParams),e;Ext.applyIf(j,l.getParams(h));if(h.id!==undefined&&j[l.idParam]===undefined){j[l.idParam]=h.id}e=new Ext.data.Request({params:j,action:h.action,records:h.records,operation:h,url:h.url,proxy:l});e.url=l.buildUrl(e);h.request=e;return e},processResponse:function(n,u,s,t,o,m){var p=this,q,l;if(n===true){q=p.getReader();q.applyDefaults=u.action==="read";l=q.read(p.extractResponseData(t));if(l.success!==false){Ext.apply(u,{response:t,resultSet:l});u.commitRecords(l.records);u.setCompleted();u.setSuccessful()}else{u.setException(l.message);p.fireEvent("exception",this,t,u)}}else{p.setException(u,t);p.fireEvent("exception",this,t,u)}if(typeof o=="function"){o.call(m||p,u)}p.afterRequest(s,n)},setException:function(c,d){c.setException({status:d.status,statusText:d.statusText})},extractResponseData:Ext.identityFn,applyEncoding:function(c){return Ext.encode(c)},encodeSorters:function(j){var e=[],l=j.length,h=0;for(;h<l;h++){e[h]={property:j[h].property,direction:j[h].direction}}return this.applyEncoding(e)},encodeFilters:function(j){var e=[],l=j.length,h=0;for(;h<l;h++){e[h]={property:j[h].property,value:j[h].value}}return this.applyEncoding(e)},getParams:function(F){var y=this,z={},C=Ext.isDefined,B=F.groupers,U=F.sorters,H=F.filters,N=F.page,O=F.start,A=F.limit,J=y.simpleSortMode,R=y.simpleGroupMode,D=y.pageParam,P=y.startParam,T=y.limitParam,S=y.groupParam,I=y.groupDirectionParam,Q=y.sortParam,E=y.filterParam,G=y.directionParam,K,M;if(D&&C(N)){z[D]=N}if(P&&C(O)){z[P]=O}if(T&&C(A)){z[T]=A}K=S&&B&&B.length>0;if(K){if(R){z[S]=B[0].property;z[I]=B[0].direction||"ASC"}else{z[S]=y.encodeSorters(B)}}if(Q&&U&&U.length>0){if(J){M=0;if(U.length>1&&K){M=1}z[Q]=U[M].property;z[G]=U[M].direction}else{z[Q]=y.encodeSorters(U)}}if(E&&H&&H.length>0){z[E]=y.encodeFilters(H)}return z},buildUrl:function(h){var d=this,e=d.getUrl(h);if(d.noCache){e=Ext.urlAppend(e,Ext.String.format("{0}={1}",d.cacheString,Ext.Date.now()))}return e},getUrl:function(c){return c.url||this.api[c.action]||this.url},doRequest:function(e,h,d){},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.reader,this.writer)}},1,0,0,0,["proxy.server"],0,[Ext.data.proxy,"Server",Ext.data,"ServerProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Ajax",Ext.data.proxy.Server,{alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},binary:false,paramsAsJson:false,doRequest:function(l,m,j){var p=this,o=p.getWriter(),q=p.buildRequest(l),n=p.getMethod(q);if(l.allowWrite()){q=o.write(q)}Ext.apply(q,{binary:p.binary,headers:p.headers,timeout:p.timeout,scope:p,callback:p.createRequestCallback(q,l,m,j),method:n,disableCaching:false});if(n.toUpperCase()!=="GET"&&p.paramsAsJson){q=Ext.apply({jsonData:q.params},q);delete q.params}Ext.Ajax.request(q);return q},getMethod:function(h){var l=this.actionMethods,e=h.action,j;if(l){j=l[e]}return j||this.defaultActionMethods[e]},createRequestCallback:function(m,j,l,h){var n=this;return function(c,a,d){n.processResponse(a,j,m,d,l,h)}}},0,0,0,0,["proxy.ajax"],0,[Ext.data.proxy,"Ajax",Ext.data,"HttpProxy",Ext.data,"AjaxProxy"],0));(Ext.cmd.derive("Ext.data.PageMap",Ext.util.LruCache,{clear:function(d){var c=this;c.pageMapGeneration=(c.pageMapGeneration||0)+1;c.callParent(arguments)},forEach:function(o,j){var p=this,t=Ext.Object.getKeys(p.map),w=t.length,u,v,n,s,q;for(u=0;u<w;u++){t[u]=+t[u]}Ext.Array.sort(t,function(c,a){return c-a});j=j||p;for(u=0;u<w;u++){n=t[u];s=p.getPage(n);q=s.length;for(v=0;v<q;v++){if(o.call(j,s[v],(n-1)*p.pageSize+v)===false){return}}}},findBy:function(l,e){var j=this,h=null;e=e||j;j.forEach(function(a,c){if(l.call(e,a,c)){h=a;return false}});return h},findIndexBy:function(l,e){var j=this,h=-1;e=e||j;j.forEach(function(a,c){if(l.call(e,a)){h=c;return false}});return h},getPageFromRecordIndex:function(){return Ext.data.Store.prototype.getPageFromRecordIndex.apply(this,arguments)},addAll:function(c){this.addPage(1,c)},addPage:function(j,h){var n=this,l=j+Math.floor((h.length-1)/n.pageSize),o,m;for(o=0;j<=l;j++,o+=n.pageSize){m=Ext.Array.slice(h,o,o+n.pageSize);n.add(j,m);n.fireEvent("pageAdded",j,m)}},getCount:function(){var c=this.callParent();if(c){c=(c-1)*this.pageSize+this.last.value.length}return c},indexOf:function(c){return c?c.index:-1},insert:function(){},remove:function(){},removeAt:function(){},getPage:function(c){return this.get(c)},hasRange:function(j,e){var h=this.getPageFromRecordIndex(j),l=this.getPageFromRecordIndex(e);for(;h<=l;h++){if(!this.hasPage(h)){return false}}return true},hasPage:function(c){return !!this.get(c)},getAt:function(c){return this.getRange(c,c)[0]},getRange:function(E,D){if(!this.hasRange(E,D)){Ext.Error.raise("PageMap asked for range which it does not have")}var x=this,u=x.getPageFromRecordIndex(E),A=x.getPageFromRecordIndex(D),C=(u-1)*x.pageSize,s=(A*x.pageSize)-1,w=u,q=[],t,y,v,B=0,z;for(;w<=A;w++){if(w==u){t=E-C;v=true}else{t=0;v=false}if(w==A){y=x.pageSize-(s-D);v=true}if(v){Ext.Array.push(q,Ext.Array.slice(x.getPage(w),t,y))}else{Ext.Array.push(q,x.getPage(w))}}for(z=q.length;B<z;B++){q[B].index=E++}return q}},0,0,0,0,0,0,[Ext.data,"PageMap"],0));(Ext.cmd.derive("Ext.data.Group",Ext.util.Observable,{key:undefined,dirty:true,constructor:function(){this.callParent(arguments);this.records=[]},contains:function(c){return Ext.Array.indexOf(this.records,c)!==-1},add:function(c){Ext.Array.push(this.records,c);this.dirty=true},remove:function(d){if(!Ext.isArray(d)){d=[d]}var e=d.length,h;for(h=0;h<e;++h){Ext.Array.remove(this.records,d[h])}this.dirty=true},isDirty:function(){return this.dirty},hasAggregate:function(){return !!this.aggregate},setDirty:function(){this.dirty=true},commit:function(){this.dirty=false},isCollapsed:function(){return this.collapsed},getAggregateRecord:function(e){var d=this,h;if(e===true||d.dirty||!d.aggregate){h=d.store.model;d.aggregate=new h();d.aggregate.isSummary=true}return d.aggregate}},1,0,0,0,0,0,[Ext.data,"Group"],0));(Ext.cmd.derive("Ext.data.Store",Ext.data.AbstractStore,{remoteSort:false,remoteFilter:false,remoteGroup:false,groupField:undefined,groupDir:"ASC",trailingBufferZone:25,leadingBufferZone:200,pageSize:undefined,currentPage:1,clearOnPageLoad:true,loading:false,sortOnFilter:true,buffered:false,purgePageCount:5,cacheRemovedRecords:true,clearRemovedOnLoad:true,defaultPageSize:25,defaultViewSize:100,addRecordsOptions:{addRecords:true},statics:{recordIdFn:function(c){return c.internalId},recordIndexFn:function(c){return c.index},grouperIdFn:function(c){return c.id||c.property},groupIdFn:function(c){return c.key}},constructor:function(h){h=Ext.apply({},h);var n=this,l=h.groupers||n.groupers,j=h.groupField||n.groupField,o,m;m=h.data||n.data;if(m){n.inlineData=m;delete h.data}if(!l&&j){l=[{property:j,direction:h.groupDir||n.groupDir}];if(h.getGroupString||(n.getGroupString!==Ext.data.Store.prototype.getGroupString)){l[0].getGroupString=function(a){return n.getGroupString(a)}}}delete h.groupers;n.groupers=new Ext.util.MixedCollection(false,Ext.data.Store.grouperIdFn);n.groupers.addAll(n.decodeGroupers(l));n.groups=new Ext.util.MixedCollection(false,Ext.data.Store.groupIdFn);n.callParent([h]);if(n.buffered){n.data=new Ext.data.PageMap({store:n,keyFn:Ext.data.Store.recordIdFn,pageSize:n.pageSize,maxSize:n.purgePageCount,listeners:{clear:n.onPageMapClear,scope:n}});n.pageRequests={};n.remoteSort=n.remoteGroup=n.remoteFilter=true;n.sortOnLoad=false;n.filterOnLoad=false}else{n.data=new Ext.util.MixedCollection({getKey:Ext.data.Store.recordIdFn,maintainIndices:true})}if(n.remoteGroup){n.remoteSort=true}o=n.proxy;m=n.inlineData;if(!n.buffered&&!n.pageSize){n.pageSize=n.defaultPageSize}if(m){if(o instanceof Ext.data.proxy.Memory){o.data=m;n.read()}else{n.add.apply(n,[m])}delete n.inlineData}else{if(n.autoLoad){n.autoLoadTask=new Ext.util.DelayedTask(n.load,n,[typeof n.autoLoad==="object"?n.autoLoad:undefined]);n.autoLoadTask.delay(1)}}},decodeGroupers:function(m){if(!Ext.isArray(m)){if(m===undefined){m=[]}else{m=[m]}}var n=m.length,l=Ext.util.Grouper,h,o,j=[];for(o=0;o<n;o++){h=m[o];if(!(h instanceof l)){if(Ext.isString(h)){h={property:h}}h=Ext.apply({root:"data",direction:"ASC"},h);if(h.fn){h.sorterFn=h.fn}if(typeof h=="function"){h={sorterFn:h}}j.push(new l(h))}else{j.push(h)}}return j},group:function(m,l,o){var n=this,h,j;if(m){n.sorters.removeAll(n.groupers.items);if(Ext.isArray(m)){j=m}else{if(Ext.isObject(m)){j=[m]}else{if(Ext.isString(m)){h=n.groupers.get(m);if(!h){h={property:m,direction:l||n.groupDir};j=[h]}else{if(l===undefined){h.toggle()}else{h.setDirection(l)}}}}}if(j&&j.length){n.groupers.clear();n.groupers.addAll(n.decodeGroupers(j))}n.sorters.insert(0,n.groupers.items)}if(n.remoteGroup){if(n.buffered){n.data.clear();n.loadPage(1,{groupChange:true})}else{n.load({scope:n,callback:o?null:n.fireGroupChange})}}else{n.doSort(n.generateComparator());n.constructGroups();if(!o){n.fireGroupChange()}}},getGroupField:function(){var c=this.groupers.first(),d;if(c){d=c.property}return d},constructGroups:function(){var q=this,p=this.data.items,t=p.length,l=q.groups,m,s,o,n;l.clear();if(q.isGrouped()){for(s=0;s<t;++s){n=p[s];m=q.getGroupString(n);o=l.get(m);if(!o){o=new Ext.data.Group({key:m,store:q});l.add(o)}o.add(n)}}},clearGrouping:function(){var l=this,j=l.groupers.items,e=j.length,h;for(h=0;h<e;h++){l.sorters.remove(j[h])}l.groupers.clear();if(l.remoteGroup){if(l.buffered){l.data.clear();l.loadPage(1,{groupChange:true})}else{l.load({scope:l,callback:l.fireGroupChange})}}else{l.groups.clear();if(l.sorters.length){l.sort()}else{l.fireEvent("datachanged",l);l.fireEvent("refresh",l)}l.fireGroupChange()}},isGrouped:function(){return this.groupers.getCount()>0},fireGroupChange:function(){this.fireEvent("groupchange",this,this.groupers)},getGroups:function(t){var q=this.data.items,u=q.length,s=[],l={},o,n,m,p;for(p=0;p<u;p++){o=q[p];n=this.getGroupString(o);m=l[n];if(m===undefined){m={name:n,children:[]};s.push(m);l[n]=m}m.children.push(o)}return t?l[t]:s},getGroupsForGrouper:function(o,t){var q=o.length,p=[],u,s,m,l,n;for(n=0;n<q;n++){m=o[n];s=t.getGroupString(m);if(s!==u){l={name:s,grouper:t,records:[]};p.push(l)}l.records.push(m);u=s}return p},getGroupsForGrouperIndex:function(t,n){var p=this,o=p.groupers,l=o.getAt(n),m=p.getGroupsForGrouper(t,l),q=m.length,s;if(n+1<o.length){for(s=0;s<q;s++){m[s].children=p.getGroupsForGrouperIndex(m[s].records,n+1)}}for(s=0;s<q;s++){m[s].depth=n}return m},getGroupData:function(d){var c=this;if(d!==false){c.sort()}return c.getGroupsForGrouperIndex(c.data.items,0)},getGroupString:function(d){var c=this.groupers.first();if(c){return c.getGroupString(d)}return""},insert:function(o,u){var m=this,l=false,q,n,p,t=m.modelDefaults,s;if(!Ext.isIterable(u)){s=u=[u]}else{s=[]}n=u.length;if(n){for(q=0;q<n;q++){p=u[q];if(!p.isModel){p=m.createModel(p)}s[q]=p;if(t){p.set(t)}p.join(m);l=l||p.phantom===true}m.data.insert(o,s);if(m.snapshot){m.snapshot.addAll(s)}if(m.requireSort){m.suspendEvents();m.sort();m.resumeEvents()}if(m.isGrouped()){m.updateGroupsOnAdd(s)}m.fireEvent("add",m,s,o);m.fireEvent("datachanged",m);if(m.autoSync&&l&&!m.autoSyncSuspended){m.sync()}}return s},updateGroupsOnAdd:function(t){var q=this,l=q.groups,m=t.length,s,n,p,o;for(s=0;s<m;++s){o=t[s];n=q.getGroupString(o);p=l.getByKey(n);if(!p){p=l.add(new Ext.data.Group({key:n,store:q}))}p.add(o)}},updateGroupsOnRemove:function(t){var q=this,l=q.groups,m=t.length,s,n,p,o;for(s=0;s<m;++s){o=t[s];n=q.getGroupString(o);p=l.getByKey(n);if(p){p.remove(o);if(p.records.length===0){l.remove(p)}}}},updateGroupsOnUpdate:function(s,u){var o=this,w=o.getGroupField(),m=o.getGroupString(s),v=o.groups,q,t,p,n;if(u&&Ext.Array.contains(u,w)){if(o.buffered){Ext.Error.raise({msg:"Cannot move records between groups in a buffered store record"})}p=v.items;for(t=0,q=p.length;t<q;++t){n=p[t];if(n.contains(s)){n.remove(s);break}}n=v.getByKey(m);if(!n){n=v.add(new Ext.data.Group({key:m,store:o}))}n.add(s);o.data.remove(s);o.data.insert(o.data.findInsertionIndex(s,o.generateComparator()),s)}else{v.getByKey(m).setDirty()}},add:function(j){var m=this,h,n,l;if(Ext.isArray(j)){h=j}else{h=arguments}n=h.length;l=!m.remoteSort&&m.getSorterCount();if(l&&n===1){return[m.addSorted(m.createModel(h[0]))]}if(l){m.requireSort=true}h=m.insert(m.data.length,h);delete m.requireSort;return h},addSorted:function(e){var h=this,d=h.data.findInsertionIndex(e,h.generateComparator());h.insert(d,e);return e},createModel:function(c){if(!c.isModel){c=Ext.ModelManager.create(c,this.model)}return c},onUpdate:function(e,d,h){if(this.isGrouped()){this.updateGroupsOnUpdate(e,h)}},each:function(n,o){var m=this.data.items,d=m.length,j,l;for(l=0;l<d;l++){j=m[l];if(n.call(o||j,j,l,d)===false){break}}},remove:function(E,H,D){H=H===true;var z=this,K=false,P=z.snapshot,x=z.data,F=0,Q,C=[],A=[],O=[],y=[],I=z.groups.length,B,G,N,R,J,M,S=!D&&z.hasListeners.remove;if(E.isModel){E=[E];Q=1}else{if(Ext.isIterable(E)){Q=E.length}else{if(typeof E==="object"){J=true;F=E.start;Q=E.end+1;M=Q-F}}}if(!J){for(F=0;F<Q;++F){R=E[F];if(typeof R=="number"){N=R;R=x.getAt(N)}else{N=z.indexOf(R)}if(R&&N>-1){C.push({record:R,index:N})}if(P){P.remove(R)}}C=Ext.Array.sort(C,function(e,c){var a=e.index,d=c.index;return a===c.index2?0:(a<d?-1:1)});F=0;Q=C.length}if(!Q){return}for(;F<Q;F++){if(J){R=x.getAt(F);N=F}else{B=C[F];R=B.record;N=B.index}A.push(R);O.push(N);G=R.phantom!==true;if(!H&&G){R.removedFrom=N;if(z.cacheRemovedRecords){z.removed.push(R)}}else{if(I){y.push(R)}}R.unjoin(z);N-=F;K=K||G;if(!J){x.removeAt(N);if(S){z.fireEvent("remove",z,R,N,!!H)}}}if(I){z.updateGroupsOnRemove(z.removed.concat(y))}if(J){x.removeRange(E.start,M)}if(!D){z.fireEvent("bulkremove",z,A,O,!!H,J);z.fireEvent("datachanged",z)}if(!H&&z.autoSync&&K&&!z.autoSyncSuspended){z.sync()}},removeAt:function(h,l){var e=this,j=e.getCount();h=Math.max(h,0);if(h<=j){if(arguments.length===1){e.remove([h])}else{if(l){e.remove({start:h,end:Math.min(h+l,j)-1})}}}},removeAll:function(e){var l=this,h=l.snapshot,j=l.data;if(h){h.removeAll(j.getRange())}if(l.buffered){if(j){if(e){l.suspendEvent("clear")}j.clear();if(e){l.resumeEvent("clear")}}}else{l.remove({start:0,end:l.getCount()-1},false,e);if(e!==true){l.fireEvent("clear",l)}}},load:function(d){var c=this;if(typeof d=="function"){d={callback:d}}else{d=Ext.apply({},d)}if(c.remoteGroup&&!d.groupers&&c.groupers.items.length){d.groupers=c.groupers.items}d.page=d.page||c.currentPage;d.start=(d.start!==undefined)?d.start:(d.page-1)*c.pageSize;d.limit=d.limit||c.pageSize;d.addRecords=d.addRecords||false;if(c.buffered){d.limit=c.viewSize||c.defaultViewSize;d.loadCallback=d.callback;delete d.callback;return c.loadToPrefetch(d)}return c.callParent([d])},reload:function(m){var q=this,p,v,s,n,t,w,o,u;if(!m){m={}}if(q.buffered){delete q.totalCount;q.data.clear(true);w=function(){if(q.rangeCached(p,v)){q.loading=false;q.data.un("pageAdded",w);u=q.data.getRange(p,v);q.fireEvent("load",q,u,true)}};o=Math.ceil((q.leadingBufferZone+q.trailingBufferZone)/2);if(!q.lastRequestStart){p=m.start||0;v=p+(m.count||q.pageSize)-1}else{p=q.lastRequestStart;v=q.lastRequestEnd}s=q.getPageFromRecordIndex(Math.max(p-o,0));n=q.getPageFromRecordIndex(v+o);if(q.fireEvent("beforeload",q,m)!==false){q.loading=true;q.data.on("pageAdded",w);for(t=s;t<=n;t++){q.prefetchPage(t,m)}}}else{return q.callParent(arguments)}},onProxyLoad:function(h){var m=this,n=h.getResultSet(),j=h.getRecords(),l=h.wasSuccessful();if(m.isDestroyed){return}if(n){m.totalCount=n.total}m.loading=false;if(l){m.loadRecords(j,h)}if(m.hasListeners.load){m.fireEvent("load",m,j,l)}if(m.hasListeners.read){m.fireEvent("read",m,j,l)}Ext.callback(h.callback,h.scope||m,[j,h,l])},getNewRecords:function(){return(this.snapshot||this.data).filterBy(this.filterNew).items},getUpdatedRecords:function(){return(this.snapshot||this.data).filterBy(this.filterUpdated).items},filter:function(o,n){if(Ext.isString(o)){o={property:o,value:n}}var p=this,l=p.decodeFilters(o),j,m=p.sorters.length&&p.sortOnFilter&&!p.remoteSort,q=l.length;for(j=0;j<q;j++){p.filters.replace(l[j])}o=p.filters.items;if(o.length){if(p.remoteFilter){delete p.totalCount;if(p.buffered){p.data.clear();p.loadPage(1)}else{p.currentPage=1;p.load()}}else{p.snapshot=p.snapshot||p.data.clone();p.data=p.snapshot.filter(o);p.constructGroups();if(m){p.sort()}else{p.fireEvent("datachanged",p);p.fireEvent("refresh",p)}}p.fireEvent("filterchange",p,o)}},clearFilter:function(d){var c=this;c.filters.clear();if(c.remoteFilter){if(d){return}delete c.totalCount;if(c.buffered){c.data.clear();c.loadPage(1)}else{c.currentPage=1;c.load()}}else{if(c.isFiltered()){c.data=c.snapshot;delete c.snapshot;c.constructGroups();if(d!==true){c.fireEvent("datachanged",c);c.fireEvent("refresh",c)}}}c.fireEvent("filterchange",c,c.filters.items)},removeFilter:function(d,e){var h=this;if(!h.remoteFilter&&h.isFiltered()){if(d instanceof Ext.util.Filter){h.filters.remove(d)}else{h.filters.removeAtKey(d)}if(e!==false){if(h.filters.length){h.filter()}else{h.clearFilter()}}else{h.fireEvent("filterchange",h,h.filters.items)}}},addFilter:function(l,j){var m=this,h,o,n;h=m.decodeFilters(l);n=h.length;for(o=0;o<n;o++){m.filters.replace(h[o])}if(j!==false&&m.filters.length){m.filter()}else{m.fireEvent("filterchange",m,m.filters.items)}},isFiltered:function(){var c=this.snapshot;return !!(c&&c!==this.data)},filterBy:function(d,e){var h=this;h.snapshot=h.snapshot||h.data.clone();h.data=h.queryBy(d,e||h);h.fireEvent("datachanged",h);h.fireEvent("refresh",h)},queryBy:function(d,e){var h=this;return(h.snapshot||h.data).filterBy(d,e||h)},query:function(o,p,n,m,q){var s=this,l=s.createFilterFn(o,p,n,m,q),t=s.queryBy(l);if(!t){t=new Ext.util.MixedCollection()}return t},loadData:function(l,j){var m=l.length,n=[],h;for(h=0;h<m;h++){n.push(this.createModel(l[h]))}this.loadRecords(n,j?this.addRecordsOptions:undefined)},loadRawData:function(l,h){var m=this,j=m.proxy.reader.read(l),n=j.records;if(j.success){m.totalCount=j.total;m.loadRecords(n,h?m.addRecordsOptions:undefined)}},loadRecords:function(l,t){var o=this,s=0,p=l.length,n,q,m=o.snapshot;if(t){n=t.start;q=t.addRecords}if(!q){delete o.snapshot;o.clearData(true)}else{if(m){m.addAll(l)}}o.data.addAll(l);if(n!==undefined){for(;s<p;s++){l[s].index=n+s;l[s].join(o)}}else{for(;s<p;s++){l[s].join(o)}}o.suspendEvents();if(o.filterOnLoad&&!o.remoteFilter){o.filter()}if(o.sortOnLoad&&!o.remoteSort){o.sort()}o.resumeEvents();if(o.isGrouped()){o.constructGroups()}o.fireEvent("datachanged",o);o.fireEvent("refresh",o)},loadPage:function(h,e){var d=this;d.currentPage=h;e=Ext.apply({page:h,start:(h-1)*d.pageSize,limit:d.pageSize,addRecords:!d.clearOnPageLoad},e);if(d.buffered){e.limit=d.viewSize||d.defaultViewSize;e.loadCallback=e.callback;delete e.callback;return d.loadToPrefetch(e)}d.read(e)},nextPage:function(c){this.loadPage(this.currentPage+1,c)},previousPage:function(c){this.loadPage(this.currentPage-1,c)},clearData:function(l,m){var n=this,j,h;m=m||n.data;if(!n.buffered&&m){j=m.items;h=j.length;while(h--){j[h].unjoin(n)}}if(m){m.clear()}if(l!==true||n.clearRemovedOnLoad){n.removed.length=0}},destroyClear:function(){this.clearData(null,this.snapshot)},loadToPrefetch:function(s){var x=this,B,F,v,E=s,w=s.start,G=s.start+s.limit-1,A=Math.min(G,s.start+(x.viewSize||s.limit)-1),z=x.getPageFromRecordIndex(Math.max(w-x.trailingBufferZone,0)),t=x.getPageFromRecordIndex(G+x.leadingBufferZone),y=function(){F=F||[];if(s.loadCallback){s.loadCallback.call(s.scope||x,F,C,true)}if(s.callback){s.callback.call(s.scope||x,F,w||0,G||0,s)}},u=function(){x.fireEvent("datachanged",x);x.fireEvent("refresh",x);x.fireEvent("load",x,F,true)},D=function(){if(x.rangeCached(w,A)){x.loading=false;F=x.data.getRange(w,A);x.data.un("pageAdded",D);if(x.hasListeners.guaranteedrange){x.guaranteeRange(w,A,s.callback,s.scope)}y();u();if(s.groupChange){x.fireGroupChange()}}},C;if(x.purgePageCount){x.data.maxSize=x.purgePageCount=Math.max(x.purgePageCount,t-z+1)}if(x.fireEvent("beforeload",x,s)!==false){delete x.totalCount;x.loading=true;if(s.callback){E=Ext.apply({},s);delete E.callback}x.on("prefetch",function(d,e,a,c){C=c;if(a){if((v=x.getTotalCount())){x.data.on("pageAdded",D);A=Math.min(A,v-1);t=x.getPageFromRecordIndex(Math.min(A+x.leadingBufferZone,v-1));for(B=z+1;B<=t;++B){x.prefetchPage(B,E)}}else{y();u()}}else{y();x.fireEvent("load",x,e,false)}},null,{single:true});x.prefetchPage(z,E)}},prefetch:function(n){var l=this,j=l.pageSize,m,h;if(j){if(l.lastPageSize&&j!=l.lastPageSize){Ext.Error.raise("pageSize cannot be dynamically altered")}if(!l.data.pageSize){l.data.pageSize=j}}else{l.pageSize=l.data.pageSize=j=n.limit}l.lastPageSize=j;if(!n.page){n.page=l.getPageFromRecordIndex(n.start);n.start=(n.page-1)*j;n.limit=Math.ceil(n.limit/j)*j}if(!l.pageRequests[n.page]){n=Ext.apply({action:"read",filters:l.filters.items,sorters:l.sorters.items,groupers:l.groupers.items,pageMapGeneration:l.data.pageMapGeneration},n);h=new Ext.data.Operation(n);if(l.fireEvent("beforeprefetch",l,h)!==false){m=l.proxy;l.pageRequests[n.page]=m.read(h,l.onProxyPrefetch,l);if(m.isSynchronous){delete l.pageRequests[n.page]}}}return l},onPageMapClear:function(){var m=this,n=m.wasLoading,j=m.pageRequests,h,l;if(m.data.events.pageadded){m.data.events.pageadded.clearListeners()}m.loading=true;m.totalCount=0;for(l in j){if(j.hasOwnProperty(l)){h=j[l];delete j[l];delete h.callback}}m.fireEvent("clear",m);m.loading=n},prefetchPage:function(m,h){var n=this,j=n.pageSize||n.defaultPageSize,l=(m-1)*n.pageSize,o=n.totalCount;if(o!==undefined&&n.getCount()===o){return}n.prefetch(Ext.applyIf({page:m,start:l,limit:j},h))},onProxyPrefetch:function(h){var n=this,o=h.getResultSet(),j=h.getRecords(),l=h.wasSuccessful(),m=h.page;if(h.pageMapGeneration===n.data.pageMapGeneration){if(o){n.totalCount=o.total;n.fireEvent("totalcountchange",n.totalCount)}if(m!==undefined){delete n.pageRequests[m]}n.loading=false;n.fireEvent("prefetch",n,j,l,h);if(l){n.cachePage(j,h.page)}Ext.callback(h.callback,h.scope||n,[j,h,l])}},cachePage:function(h,l){var m=this,j=h.length,n;if(!Ext.isDefined(m.totalCount)){m.totalCount=h.length;m.fireEvent("totalcountchange",m.totalCount)}for(n=0;n<j;n++){h[n].join(m)}m.data.addPage(l,h)},rangeCached:function(c,d){return this.data&&this.data.hasRange(c,d)},pageCached:function(c){return this.data&&this.data.hasPage(c)},pagePending:function(c){return !!this.pageRequests[c]},rangeSatisfied:function(c,d){return this.rangeCached(c,d)},getPageFromRecordIndex:function(c){return Math.floor(c/this.pageSize)+1},onGuaranteedRange:function(n){var m=this,h=m.getTotalCount(),l=n.prefetchStart,j=(n.prefetchEnd>h-1)?h-1:n.prefetchEnd,o;j=Math.max(0,j);o=m.data.getRange(l,j);if(n.fireEvent!==false){m.fireEvent("guaranteedrange",o,l,j,n)}if(n.callback){n.callback.call(n.scope||m,o,l,j,n)}},guaranteeRange:function(l,j,m,n,h){h=Ext.apply({callback:m,scope:n},h);this.getRange(l,j,h)},prefetchRange:function(l,h){var n=this,o,j,m;if(!n.rangeCached(l,h)){o=n.getPageFromRecordIndex(l);j=n.getPageFromRecordIndex(h);n.data.maxSize=n.purgePageCount?(j-o+1)+n.purgePageCount:0;for(m=o;m<=j;m++){if(!n.pageCached(m)){n.prefetchPage(m)}}}},primeCache:function(j,h,l){var e=this;if(l===-1){j=Math.max(j-e.leadingBufferZone,0);h=Math.min(h+e.trailingBufferZone,e.totalCount-1)}else{if(l===1){j=Math.max(Math.min(j-e.trailingBufferZone,e.totalCount-e.pageSize),0);h=Math.min(h+e.leadingBufferZone,e.totalCount-1)}else{j=Math.min(Math.max(Math.floor(j-((e.leadingBufferZone+e.trailingBufferZone)/2)),0),e.totalCount-e.pageSize);h=Math.min(Math.max(Math.ceil(h+((e.leadingBufferZone+e.trailingBufferZone)/2)),0),e.totalCount-1)}}e.prefetchRange(j,h)},sort:function(c){var d=this;if(c&&d.buffered&&d.remoteSort){d.data.clear()}return d.callParent(arguments)},generateComparator:function(){var p=this,n=p.sorters.items,q=n.length,o=q?p.groupers.getRange():p.groupers.items,j,m,l;if(o.length){for(j=0;j<q;j++){m=n[j];if(m.property&&(l=p.groupers.get(m.property))){l.setDirection(m.direction)}else{Ext.Array.push(o,m)}}n=o}return n.length?this.createComparator(n):this.emptyComparator},getSorterCount:function(){return this.groupers.items.length+this.sorters.items.length},doSort:function(h){var l=this,j,m,o,n=function(){l.fireEvent("sort",l,l.sorters.getRange())};if(l.remoteSort){if(l.buffered){l.data.clear();l.loadPage(1,{callback:n})}else{l.load({callback:n})}}else{l.data.sortBy(h);if(!l.buffered){j=l.getRange();m=j.length;for(o=0;o<m;o++){j[o].index=o}}l.fireEvent("datachanged",l);l.fireEvent("refresh",l);n()}},find:function(o,p,m,n,l,q){var j=this.createFilterFn(o,p,n,l,q);return j?this.data.findIndexBy(j,null,m):-1},findRecord:function(){var c=this,d=c.find.apply(c,arguments);return d!==-1?c.getAt(d):null},createFilterFn:function(m,n,l,j,h){if(Ext.isEmpty(n)){return false}n=Ext.util.AbstractMixedCollection.prototype.createValueMatcher(n,l,j,h);return function(a){return n.test(a.data[m])}},findExact:function(d,e,h){return this.data.findIndexBy(function(a){return a.isEqual(a.get(d),e)},this,h)},findBy:function(d,e,h){return this.data.findIndexBy(d,e,h)},collect:function(h,j,n){var m=this,l=(n===true&&m.snapshot)?m.snapshot:m.data;return l.collect(h,"data",j)},getCount:function(){return this.data.getCount()},getTotalCount:function(){return this.totalCount||0},getAt:function(c){return this.data.getAt(c)},getRange:function(u,q,m){var p=this,o,v,t=p.totalCount-1,s=p.lastRequestStart,n=[],w;m=Ext.apply({prefetchStart:u,prefetchEnd:q},m);if(p.buffered){q=(q>=p.totalCount)?t:q;o=u===0?0:u-1;v=q===t?q:q+1;p.lastRequestStart=u;p.lastRequestEnd=q;if(p.rangeCached(o,v)){p.onGuaranteedRange(m);n=p.data.getRange(u,q)}else{p.fireEvent("cachemiss",p,u,q);w=function(c,a){if(p.rangeCached(o,v)){p.fireEvent("cachefilled",p,u,q);p.data.un("pageAdded",w);p.onGuaranteedRange(m)}};p.data.on("pageAdded",w);p.prefetchRange(u,q)}p.primeCache(u,q,u<s?-1:1)}else{n=p.data.getRange(u,q);if(m.callback){m.callback.call(m.scope||p,n,u,q,m)}}return n},getById:function(c){var d=(this.snapshot||this.data).findBy(function(a){return a.getId()===c});return d},getByInternalId:function(c){var d;if(this.buffered){d=(this.snapshot||this.data).findBy(function(a){return a.internalId==c})}else{d=this.data.get(c)}return d},indexOf:function(c){return this.data.indexOf(c)},indexOfTotal:function(d){var c=d.index;if(c||c===0){return c}return this.indexOf(d)},indexOfId:function(c){return this.indexOf(this.getById(c))},first:function(d){var c=this;if(d&&c.isGrouped()){return c.aggregate(function(a){return a.length?a[0]:undefined},c,true)}else{return c.data.first()}},last:function(d){var c=this;if(d&&c.isGrouped()){return c.aggregate(function(a){var e=a.length;return e?a[e-1]:undefined},c,true)}else{return c.data.last()}},sum:function(h,e){var d=this;if(e&&d.isGrouped()){return d.aggregate(d.getSum,d,true,[h])}else{return d.getSum(d.data.items,h)}},getSum:function(h,l){var m=0,n=0,j=h.length;for(;n<j;++n){m+=h[n].get(l)}return m},count:function(d){var c=this;if(d&&c.isGrouped()){return c.aggregate(function(a){return a.length},c,true)}else{return c.getCount()}},min:function(h,e){var d=this;if(e&&d.isGrouped()){return d.aggregate(d.getMin,d,true,[h])}else{return d.getMin(d.data.items,h)}},getMin:function(h,l){var n=1,j=h.length,m,o;if(j>0){o=h[0].get(l)}for(;n<j;++n){m=h[n].get(l);if(m<o){o=m}}return o},max:function(h,e){var d=this;if(e&&d.isGrouped()){return d.aggregate(d.getMax,d,true,[h])}else{return d.getMax(d.data.items,h)}},getMax:function(o,l){var n=1,h=o.length,m,j;if(h>0){j=o[0].get(l)}for(;n<h;++n){m=o[n].get(l);if(m>j){j=m}}return j},average:function(h,e){var d=this;if(e&&d.isGrouped()){return d.aggregate(d.getAverage,d,true,[h])}else{return d.getAverage(d.data.items,h)}},getAverage:function(h,l){var n=0,j=h.length,m=0;if(h.length>0){for(;n<j;++n){m+=h[n].get(l)}return m/j}return 0},aggregate:function(n,l,p,o){o=o||[];if(p&&this.isGrouped()){var u=this.getGroups(),q=u.length,t={},m,s;for(s=0;s<q;++s){m=u[s];t[m.name]=this.getAggregate(n,l||this,m.children,o)}return t}else{return this.getAggregate(n,l,this.data.items,o)}},getAggregate:function(j,l,h,e){e=e||[];return j.apply(l||this,[h].concat(e))},onIdChanged:function(l,m,n,h){var j=this.snapshot;if(j){j.updateKey(h,n)}this.data.updateKey(h,n);this.callParent(arguments)},commitChanges:function(){var l=this,j=l.getModifiedRecords(),h=j.length,e=0;for(;e<h;e++){j[e].commit()}l.removed.length=0},filterNewOnly:function(c){return c.phantom===true},getRejectRecords:function(){return Ext.Array.push(this.data.filterBy(this.filterNewOnly).items,this.getUpdatedRecords())},rejectChanges:function(){var n=this,m=n.getRejectRecords(),j=m.length,h=0,l;for(;h<j;h++){l=m[h];l.reject();if(l.phantom){n.remove(l)}}m=n.removed;j=m.length;for(h=j-1;h>=0;h--){l=m[h];n.insert(l.removedFrom||0,l);l.reject()}n.removed.length=0}},1,0,0,0,["store.store"],0,[Ext.data,"Store"],function(){Ext.regStore("ext-empty-store",{fields:[],proxy:"memory"})}));(Ext.cmd.derive("Ext.data.reader.Array",Ext.data.reader.Json,{alternateClassName:"Ext.data.ArrayReader",totalProperty:undefined,successProperty:undefined,createFieldAccessExpression:function(l,n,h){var m=(l.mapping==null)?l.originalIndex:l.mapping,j;if(typeof m==="function"){j=n+".mapping("+h+", this)"}else{if(isNaN(m)){m='"'+m+'"'}j=h+"["+m+"]"}return j}},0,0,0,0,["reader.array"],0,[Ext.data.reader,"Array",Ext.data,"ArrayReader"],0));(Ext.cmd.derive("Ext.data.ArrayStore",Ext.data.Store,{constructor:function(c){c=Ext.apply({proxy:{type:"memory",reader:"array"}},c);this.callParent([c])},loadData:function(l,j){if(this.expandData===true){var m=[],h=0,n=l.length;for(;h<n;h++){m[m.length]=[l[h]]}l=m}this.callParent([l,j])}},1,0,0,0,["store.array"],0,[Ext.data,"ArrayStore"],function(){Ext.data.SimpleStore=Ext.data.ArrayStore}));(Ext.cmd.derive("Ext.data.Batch",Ext.Base,{autoStart:false,pauseOnException:false,current:-1,total:0,isRunning:false,isComplete:false,hasException:false,constructor:function(d){var c=this;c.mixins.observable.constructor.call(c,d);c.operations=[];c.exceptions=[]},add:function(c){this.total++;c.setBatch(this);this.operations.push(c);return this},start:function(d){var c=this;if(c.isRunning){return c}c.exceptions.length=0;c.hasException=false;c.isRunning=true;return c.runOperation(Ext.isDefined(d)?d:c.current+1)},retry:function(){return this.start(this.current)},runNextOperation:function(){return this.runOperation(this.current+1)},pause:function(){this.isRunning=false;return this},runOperation:function(m){var l=this,n=l.operations,h=n[m],j;if(h===undefined){l.isRunning=false;l.isComplete=true;l.fireEvent("complete",l,n[n.length-1])}else{l.current=m;j=function(c){var a=c.hasException();if(a){l.hasException=true;l.exceptions.push(c);l.fireEvent("exception",l,c)}if(a&&l.pauseOnException){l.pause()}else{c.setCompleted();l.fireEvent("operationcomplete",l,c);l.runNextOperation()}};h.setStarted();l.proxy[h.action](h,j,l)}return l}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.data,"Batch"],0));(Ext.cmd.derive("Ext.data.BufferStore",Ext.data.Store,{sortOnLoad:false,filterOnLoad:false,constructor:function(){Ext.Error.raise("The BufferStore class has been deprecated. Instead, specify the buffered config option on Ext.data.Store")}},1,0,0,0,["store.buffer"],0,[Ext.data,"BufferStore"],0));(Ext.cmd.derive("Ext.direct.Manager",Ext.Base,{singleton:true,exceptions:{TRANSPORT:"xhr",PARSE:"parse",DATA:"data",LOGIN:"login",SERVER:"exception"},constructor:function(){var c=this;c.addEvents("event","exception");c.transactions=new Ext.util.MixedCollection();c.providers=new Ext.util.MixedCollection();c.mixins.observable.constructor.call(c)},addProvider:function(l){var n=this,h=arguments,m=n.relayers||(n.relayers={}),o,j;if(h.length>1){for(o=0,j=h.length;o<j;++o){n.addProvider(h[o])}return}if(!l.isProvider){l=Ext.create("direct."+l.type+"provider",l)}n.providers.add(l);l.on("data",n.onProviderData,n);if(l.relayedEvents){m[l.id]=n.relayEvents(l,l.relayedEvents)}if(!l.isConnected()){l.connect()}return l},getProvider:function(c){return c.isProvider?c:this.providers.get(c)},removeProvider:function(m){var h=this,j=h.providers,n=h.relayers,l;m=m.isProvider?m:j.get(m);if(m){m.un("data",h.onProviderData,h);l=m.id;if(n[l]){n[l].destroy();delete n[l]}j.remove(m);return m}return null},addTransaction:function(c){this.transactions.add(c);return c},removeTransaction:function(c){var d=this;c=d.getTransaction(c);d.transactions.remove(c);return c},getTransaction:function(c){return typeof c==="object"?c:this.transactions.get(c)},onProviderData:function(l,m){var n=this,h,j;if(Ext.isArray(m)){for(h=0,j=m.length;h<j;++h){n.onProviderData(l,m[h])}return}if(m.name&&m.name!="event"&&m.name!="exception"){n.fireEvent(m.name,m)}else{if(m.status===false){n.fireEvent("exception",m)}}n.fireEvent("event",m,l)},parseMethod:function(n){if(Ext.isString(n)){var l=n.split("."),h=0,j=l.length,m=Ext.global;while(m&&h<j){m=m[l[h]];++h}n=Ext.isFunction(m)?m:null}return n||null}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.direct,"Manager"],function(){Ext.Direct=Ext.direct.Manager}));(Ext.cmd.derive("Ext.data.proxy.Direct",Ext.data.proxy.Server,{alternateClassName:"Ext.data.DirectProxy",paramOrder:undefined,paramsAsHash:true,directFn:undefined,paramOrderRe:/[\s,|]/,constructor:function(d){var h=this,e;h.callParent(arguments);e=h.paramOrder;if(Ext.isString(e)){h.paramOrder=e.split(h.paramOrderRe)}},resolveMethods:function(){var m=this,n=m.directFn,h=m.api,j=Ext.direct.Manager,l;if(n){l=m.directFn=j.parseMethod(n);if(!Ext.isFunction(l)){Ext.Error.raise("Cannot resolve directFn "+n)}}if(h){for(n in h){if(h.hasOwnProperty(n)){l=h[n];h[n]=j.parseMethod(l);if(!Ext.isFunction(h[n])){Ext.Error.raise("Cannot resolve Direct api "+n+" method "+l)}}}}m.methodsResolved=true},doRequest:function(v,o,n){var q=this,t=q.api,x=q.getWriter(),u=q.buildRequest(v),w=u.params,s=[],p,y;if(!q.methodsResolved){q.resolveMethods()}if(t){p=t[u.action]}p=p||q.directFn;if(x&&v.allowWrite()){u=x.write(u)}if(v.action=="read"){y=p.directCfg.method;s=y.getArgs(w,q.paramOrder,q.paramsAsHash)}else{s.push(u.jsonData)}Ext.apply(u,{args:s,directFn:p});s.push(q.createRequestCallback(u,v,o,n),q);p.apply(window,s);return u},applyEncoding:Ext.identityFn,createRequestCallback:function(m,j,l,h){var n=this;return function(a,c){n.processResponse(c.status,j,m,c,l,h)}},extractResponseData:function(c){return Ext.isDefined(c.result)?c.result:c.data},setException:function(c,d){c.setException(d.message)},buildUrl:function(){return""}},1,0,0,0,["proxy.direct"],0,[Ext.data.proxy,"Direct",Ext.data,"DirectProxy"],0));(Ext.cmd.derive("Ext.data.DirectStore",Ext.data.Store,{constructor:function(d){d=Ext.apply({},d);if(!d.proxy){var c={type:"direct",reader:{type:"json"}};Ext.copyTo(c,d,"paramOrder,paramsAsHash,directFn,api,simpleSortMode");Ext.copyTo(c.reader,d,"totalProperty,root,idProperty");d.proxy=c}this.callParent([d])}},1,0,0,0,["store.direct"],0,[Ext.data,"DirectStore"],0));(Ext.cmd.derive("Ext.data.JsonP",Ext.Base,{singleton:true,requestCount:0,requests:{},timeout:30000,disableCaching:true,disableCachingParam:"_dc",callbackKey:"callback",request:function(p){p=Ext.apply({},p);var u=this,z=Ext.isDefined(p.disableCaching)?p.disableCaching:u.disableCaching,w=p.disableCachingParam||u.disableCachingParam,A=++u.requestCount,s=p.callbackName||"callback"+A,v=p.callbackKey||u.callbackKey,q=Ext.isDefined(p.timeout)?p.timeout:u.timeout,y=Ext.apply({},p.params),B=p.url,C=Ext.name,x,t;if(z&&!y[w]){y[w]=Ext.Date.now()}p.params=y;y[v]=C+".data.JsonP."+s;t=u.createScript(B,y,p);u.requests[A]=x={url:B,params:y,script:t,id:A,scope:p.scope,success:p.success,failure:p.failure,callback:p.callback,callbackKey:v,callbackName:s};if(q>0){x.timeout=setTimeout(Ext.bind(u.handleTimeout,u,[x]),q)}u.setupErrorHandling(x);u[s]=Ext.bind(u.handleResponse,u,[x],true);u.loadScript(x);return x},abort:function(l){var e=this,j=e.requests,h;if(l){if(!l.id){l=j[l]}e.handleAbort(l)}else{for(h in j){if(j.hasOwnProperty(h)){e.abort(j[h])}}}},setupErrorHandling:function(c){c.script.onerror=Ext.bind(this.handleError,this,[c])},handleAbort:function(c){c.errorType="abort";this.handleResponse(null,c)},handleError:function(c){c.errorType="error";this.handleResponse(null,c)},cleanupErrorHandling:function(c){c.script.onerror=null},handleTimeout:function(c){c.errorType="timeout";this.handleResponse(null,c)},handleResponse:function(e,d){var h=true;if(d.timeout){clearTimeout(d.timeout)}delete this[d.callbackName];delete this.requests[d.id];this.cleanupErrorHandling(d);Ext.fly(d.script).remove();if(d.errorType){h=false;Ext.callback(d.failure,d.scope,[d.errorType])}else{Ext.callback(d.success,d.scope,[e])}Ext.callback(d.callback,d.scope,[h,e,d.errorType]);Ext.globalEvents.fireEvent("idle")},createScript:function(l,j,e){var h=document.createElement("script");h.setAttribute("src",Ext.urlAppend(l,Ext.Object.toQueryString(j)));h.setAttribute("async",true);h.setAttribute("type","text/javascript");return h},loadScript:function(c){Ext.getHead().appendChild(c.script)}},0,0,0,0,0,0,[Ext.data,"JsonP"],0));(Ext.cmd.derive("Ext.data.proxy.JsonP",Ext.data.proxy.Server,{alternateClassName:"Ext.data.ScriptTagProxy",defaultWriterType:"base",callbackKey:"callback",recordParam:"records",autoAppendParams:true,constructor:function(){this.addEvents("exception");this.callParent(arguments)},doRequest:function(j,l,h){var n=this,o=n.buildRequest(j),m=o.params;Ext.apply(o,{callbackKey:n.callbackKey,timeout:n.timeout,scope:n,disableCaching:false,callback:n.createRequestCallback(o,j,l,h)});if(n.autoAppendParams){o.params={}}o.jsonp=Ext.data.JsonP.request(o);o.params=m;j.setStarted();n.lastRequest=o;return o},createRequestCallback:function(m,j,l,h){var n=this;return function(a,d,c){delete n.lastRequest;n.processResponse(a,j,m,d,l,h)}},setException:function(c,d){c.setException(c.request.jsonp.errorType)},buildUrl:function(n){var l=this,u=l.callParent(arguments),q=n.records,p=l.getWriter(),o,s,t,m;if(p&&n.operation.allowWrite()){n=p.write(n)}o=n.params;s=o.filters,delete o.filters;if(s&&s.length){for(m=0;m<s.length;m++){t=s[m];if(t.value){o[t.property]=t.value}}}if((!p||!p.encode)&&Ext.isArray(q)&&q.length>0){o[l.recordParam]=l.encodeRecords(q)}if(l.autoAppendParams){u=Ext.urlAppend(u,Ext.Object.toQueryString(o))}return u},abort:function(){var c=this.lastRequest;if(c){Ext.data.JsonP.abort(c.jsonp)}},encodeRecords:function(e){var j=[],l=0,h=e.length;for(;l<h;l++){j.push(Ext.encode(e[l].getData()))}return j}},1,0,0,0,["proxy.jsonp","proxy.scripttag"],0,[Ext.data.proxy,"JsonP",Ext.data,"ScriptTagProxy"],0));(Ext.cmd.derive("Ext.data.JsonPStore",Ext.data.Store,{constructor:function(c){c=Ext.apply({proxy:{type:"jsonp",reader:"json"}},c);this.callParent([c])}},1,0,0,0,["store.jsonp"],0,[Ext.data,"JsonPStore"],0));(Ext.cmd.derive("Ext.data.JsonStore",Ext.data.Store,{constructor:function(c){c=Ext.apply({proxy:{type:"ajax",reader:"json",writer:"json"}},c);this.callParent([c])}},1,0,0,0,["store.json"],0,[Ext.data,"JsonStore"],0));(Ext.cmd.derive("Ext.data.NodeInterface",Ext.Base,{statics:{decorate:function(e){var h,l,j;if(typeof e=="string"){e=Ext.ModelManager.getModel(e)}else{if(e.isModel){e=Ext.ModelManager.getModel(e.modelName)}}if(e.prototype.isNode){return}h=e.prototype.idProperty;l=e.prototype.fields.get(h);j=e.prototype.fields.get(h).type.type;e.override(this.getPrototypeBody());this.applyFields(e,[{name:"parentId",type:j,defaultValue:null,useNull:l.useNull},{name:"index",type:"int",defaultValue:-1,persist:false,convert:null},{name:"depth",type:"int",defaultValue:0,persist:false,convert:null},{name:"expanded",type:"bool",defaultValue:false,persist:false,convert:null},{name:"expandable",type:"bool",defaultValue:true,persist:false,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:false,convert:null},{name:"leaf",type:"bool",defaultValue:false},{name:"cls",type:"string",defaultValue:"",persist:false,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:false,convert:null},{name:"icon",type:"string",defaultValue:"",persist:false,convert:null},{name:"root",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isLast",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"isFirst",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"allowDrop",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"allowDrag",type:"boolean",defaultValue:true,persist:false,convert:null},{name:"loaded",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"loading",type:"boolean",defaultValue:false,persist:false,convert:null},{name:"href",type:"string",defaultValue:"",persist:false,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:false,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:false,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:false,convert:null},{name:"children",type:"auto",defaultValue:null,persist:false,convert:null},{name:"visible",type:"boolean",defaultValue:true,persist:false,convert:null}])},applyFields:function(t,l){var o=t.prototype,m=o.fields,p=m.keys,q=l.length,n,s;for(s=0;s<q;s++){n=l[s];if(!Ext.Array.contains(p,n.name)){m.add(new Ext.data.Field(n))}}},getPrototypeBody:function(){var c={idchanged:true,append:true,remove:true,bulkremove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true,expand:true,collapse:true,beforeexpand:true,beforecollapse:true,sort:true,rootchange:true};return{isNode:true,constructor:function(){var a=this;a.callParent(arguments);a.firstChild=a.lastChild=a.parentNode=a.previousSibling=a.nextSibling=null;a.childNodes=[];return a},createNode:function(d){var a=this;if(!d.isModel){d=new this.self(d)}if(!d.childNodes){d.firstChild=d.lastChild=d.parentNode=d.previousSibling=d.nextSibling=null;d.childNodes=[]}return d},isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},updateInfo:function(K,z){var x=this,y=x.data.depth,N={},O=x.childNodes,A=O.length,B,J=x.phantom,P=x[x.persistenceProperty],C=x.fields,M=x.modified,E,F,Q,H,a,I=z.parentId,G,D;if(!z){Ext.Error.raise("NodeInterface expects update info to be passed")}for(E in z){Q=C.get(E);F=z[E];D=Q&&Q.persist;H=P[E];G=D&&(E==="index")&&(H!==-1)&&(I&&I!==M.parentId);if(!G&&x.isEqual(H,F)){continue}P[E]=F;if(D){if(!G&&M.hasOwnProperty(E)){if(x.isEqual(M[E],F)){delete M[E];x.dirty=false;for(a in M){if(M.hasOwnProperty(a)){x.dirty=true;break}}}}else{x.dirty=true;M[E]=H}}}if(K){x.commit();x.phantom=J}if(x.data.depth!==y){N={depth:x.data.depth+1};for(B=0;B<A;B++){O[B].updateInfo(K,N)}}},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var a=this;if(a.get("expandable")){return !(a.isLeaf()||(a.isLoaded()&&!a.phantom&&!a.hasChildNodes()))}return false},triggerUIUpdate:function(){this.afterEdit([])},appendChild:function(v,n,u){var p=this,t,q,s,o,w,a={isLast:true,parentId:p.getId(),depth:(p.data.depth||0)+1};if(Ext.isArray(v)){p.callStore("suspendAutoSync");for(t=0,q=v.length-1;t<q;t++){p.appendChild(v[t],n,u)}p.callStore("resumeAutoSync");p.appendChild(v[q],n,u)}else{v=p.createNode(v);if(n!==true&&p.fireEventArgs("beforeappend",[p,v])===false){return false}s=p.childNodes.length;o=v.parentNode;if(o){if(n!==true&&v.fireEventArgs("beforemove",[v,o,p,s])===false){return false}o.removeChild(v,false,false,true)}if(Ext.suspendLayouts){Ext.suspendLayouts()}s=p.childNodes.length;if(s===0){p.setFirstChild(v)}p.childNodes[s]=v;v.parentNode=p;v.nextSibling=null;p.setLastChild(v);w=p.childNodes[s-1];if(w){v.previousSibling=w;w.nextSibling=v;w.updateInfo(u,{isLast:false});w.triggerUIUpdate()}else{v.previousSibling=null}a.isFirst=s===0;a.index=s;v.updateInfo(u,a);if(p.isLeaf()){p.set("leaf",false)}if(!p.isLoaded()){p.set("loaded",true)}else{if(p.childNodes.length===1){p.triggerUIUpdate()}}if(s&&p.childNodes[s-1].isExpanded()){p.childNodes[s-1].cascadeBy(p.triggerUIUpdate)}if(Ext.resumeLayouts){Ext.resumeLayouts(true)}if(n!==true){p.fireEventArgs("append",[p,v,s]);if(o){v.fireEventArgs("move",[v,o,p,s])}}p.callStore("onNodeAdded",v,s);return v}},getOwnerTree:function(){var d=this,a;while(d.parentNode){d=d.parentNode}a=d.store;if(a){if(a.treeStore){a=a.treeStore}if(a.tree){return a.ownerTree}}return undefined},getTreeStore:function(){var a=this.stores[0];return a.treeStore||a},removeChild:function(t,n,a,m){var o=this,p=o.indexOf(t),q,s,u;if(p===-1||(a!==true&&o.fireEventArgs("beforeremove",[o,t,!!m])===false)){return false}if(Ext.suspendLayouts){Ext.suspendLayouts()}Ext.Array.erase(o.childNodes,p,1);if(o.firstChild===t){o.setFirstChild(t.nextSibling)}if(o.lastChild===t){o.setLastChild(t.previousSibling)}u=t.previousSibling;if(u){t.previousSibling.nextSibling=t.nextSibling}if(t.nextSibling){t.nextSibling.previousSibling=t.previousSibling;if(p===0){t.nextSibling.updateInfo(false,{isFirst:true})}for(q=p,s=o.childNodes.length;q<s;q++){o.childNodes[q].updateInfo(false,{index:q})}}else{if(u){u.updateInfo(false,{isLast:true});if(u.isExpanded()){u.cascadeBy(o.triggerUIUpdate)}else{u.triggerUIUpdate()}}}if(!o.childNodes.length){o.triggerUIUpdate()}if(Ext.resumeLayouts){Ext.resumeLayouts(true)}if(a!==true){t.removeContext={parentNode:t.parentNode,previousSibling:t.previousSibling,nextSibling:t.nextSibling};t.previousSibling=t.nextSibling=t.parentNode=null;o.fireEventArgs("remove",[o,t,!!m]);o.callStore("onNodeRemove",t,!!m);t.removeContext=null}if(n){t.destroy(true)}else{t.clear()}return t},copy:function(m,n){var j=this,o=j.callParent(arguments),a=j.childNodes?j.childNodes.length:0,l;if(n){for(l=0;l<a;l++){o.appendChild(j.childNodes[l].copy(undefined,true))}}return o},clear:function(a){var d=this;d.parentNode=d.previousSibling=d.nextSibling=null;if(a){d.firstChild=d.lastChild=null}},join:function(l){this.callParent(arguments);var h=this.childNodes,j,a;if(l.isTreeStore&&h){for(j=0,a=h.length;j<a;++j){h[j].join(l)}}},destroy:function(o){var m=this,n=m.destroyOptions,a=m.childNodes,l=a.length,j;if(o===true){for(j=0;j<l;j++){a[j].destroy(true)}m.childNodes=null;delete m.destroyOptions;m.callParent([n]);m.clear(true)}else{m.destroyOptions=o;m.remove(true)}},insertBefore:function(v,q,a){var p=this,s=p.indexOf(q),o=v.parentNode,n=s,u,w,t;if(!q){return p.appendChild(v)}if(v===q){return false}v=p.createNode(v);if(a!==true&&p.fireEventArgs("beforeinsert",[p,v,q])===false){return false}if(o===p&&p.indexOf(v)<s){n--}if(o){if(a!==true&&v.fireEventArgs("beforemove",[v,o,p,s,q])===false){return false}o.removeChild(v,false,false,true)}if(n===0){p.setFirstChild(v)}Ext.Array.splice(p.childNodes,n,0,v);v.parentNode=p;v.nextSibling=q;q.previousSibling=v;w=p.childNodes[n-1];if(w){v.previousSibling=w;w.nextSibling=v}else{v.previousSibling=null}v.updateInfo(false,{parentId:p.getId(),index:n,isFirst:n===0,isLast:false,depth:(p.data.depth||0)+1});for(t=n+1,u=p.childNodes.length;t<u;t++){p.childNodes[t].updateInfo(false,{index:t})}if(!p.isLoaded()){p.set("loaded",true)}else{if(p.childNodes.length===1){p.triggerUIUpdate()}}if(a!==true){p.fireEventArgs("insert",[p,v,q]);if(o){v.fireEventArgs("move",[v,o,p,n,q])}}p.callStore("onNodeAdded",v,q);return v},insertChild:function(a,e){var h=this.childNodes[a];if(h){return this.insertBefore(e,h)}else{return this.appendChild(e)}},remove:function(l,j){var h=this,a=h.parentNode;if(a){a.removeChild(h,l,j)}else{if(l){h.destroy(true)}}return h},removeAll:function(q,p,l){var n=this,m=n.childNodes,s=0,a=m.length,o;if(!a){return}n.fireEventArgs("bulkremove",[n,m,false]);for(;s<a;++s){o=m[s];o.removeContext={parentNode:o.parentNode,previousSibling:o.previousSibling,nextSibling:o.nextSibling};o.previousSibling=o.nextSibling=o.parentNode=null;n.fireEventArgs("remove",[n,o,false]);n.callStore("onNodeRemove",o,false);o.removeContext=null;if(q){o.destroy(true)}else{o.removeAll(false,p,true)}}n.firstChild=n.lastChild=null;if(l){n.childNodes=null}else{n.childNodes.length=0;n.triggerUIUpdate()}return n},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(a,h,j){var l=h?h.nextSibling:null;this.removeChild(h,false,j);this.insertBefore(a,l,j);return h},indexOf:function(a){return Ext.Array.indexOf(this.childNodes,a)},indexOfId:function(h){var j=this.childNodes,a=j.length,l=0;for(;l<a;++l){if(j[l].getId()===h){return l}}return -1},getPath:function(h,j){h=h||this.idProperty;j=j||"/";var l=[this.get(h)],a=this.parentNode;while(a){l.unshift(a.get(h));a=a.parentNode}return j+l.join(j)},getDepth:function(){return this.get("depth")},bubble:function(j,l,a){var h=this;while(h){if(j.apply(l||h,a||[h])===false){break}h=h.parentNode}},cascade:function(){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.data.Node: cascade has been deprecated. Please use cascadeBy instead.")}return this.cascadeBy.apply(this,arguments)},cascadeBy:function(n,q,a,l){var o=this;if(arguments.length===1&&!Ext.isFunction(n)){l=n.after;q=n.scope;a=n.args;n=n.before}if(!n||n.apply(q||o,a||[o])!==false){var m=o.childNodes,p=m.length,s;for(s=0;s<p;s++){m[s].cascadeBy.call(m[s],n,q,a,l)}if(l){l.apply(q||o,a||[o])}}},eachChild:function(m,n,a){var j=this.childNodes,l=j.length,o;for(o=0;o<l;o++){if(m.apply(n||this,a||[j[o]])===false){break}}},findChild:function(h,e,a){return this.findChildBy(function(){return this.get(h)==e},null,a)},findChildBy:function(m,n,s){var o=this.childNodes,a=o.length,p=0,l,q;for(;p<a;p++){l=o[p];if(m.call(n||l,l)===true){return l}else{if(s){q=l.findChildBy(m,n,s);if(q!==null){return q}}}}return null},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var d=this.parentNode;while(d){if(d===a){return true}d=d.parentNode}return false},sort:function(a,s,m){var o=this,n=o.childNodes,p=n.length,q,t,u={isFirst:true};if(p>0){if(!a){a=o.getTreeStore().generateComparator()}Ext.Array.sort(n,a);o.setFirstChild(n[0]);o.setLastChild(n[p-1]);for(q=0;q<p;q++){t=n[q];t.previousSibling=n[q-1];t.nextSibling=n[q+1];u.isLast=(q===p-1);u.index=q;t.updateInfo(false,u);u.isFirst=false;if(s&&!t.isLeaf()){t.sort(a,true,true)}}if(m!==true){o.fireEventArgs("sort",[o,n]);o.callStore("onNodeSort",n)}}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isLoading:function(){return this.get("loading")},isRoot:function(){return !this.parentNode},isVisible:function(){var a=this.parentNode;while(a){if(!a.isExpanded()){return false}a=a.parentNode}return true},expand:function(a,h,l){var j=this;if(!j.isLeaf()){if(j.isLoading()){j.on("expand",function(){j.expand(a,h,l)},j,{single:true})}else{if(!j.isExpanded()){j.fireEventArgs("beforeexpand",[j]);j.callStore("onBeforeNodeExpand",j.onChildNodesAvailable,j,[a,h,l])}else{if(a){j.expandChildren(true,h,l)}else{Ext.callback(h,l||j,[j.childNodes])}}}}else{Ext.callback(h,l||j)}},onChildNodesAvailable:function(a,m,h,l){var j=this;if(Ext.suspendLayouts){Ext.suspendLayouts()}j.set("expanded",true);j.fireEventArgs("expand",[j,j.childNodes,false]);if(m){j.expandChildren(true,h,l)}else{Ext.callback(h,l||j,[j.childNodes])}if(Ext.resumeLayouts){Ext.resumeLayouts(true)}},expandChildren:function(v,o,a,u){var q=this,p,t,x,y,s,w;if(Ext.isBoolean(o)){p=o;o=a;a=u;u=p}if(u===undefined){u=q.getTreeStore().singleExpand}x=q.childNodes;y=[];s=u?Math.min(x.length,1):x.length;for(t=0;t<s;++t){w=x[t];if(!w.isLeaf()){y[y.length]=w}}s=y.length;for(t=0;t<s;++t){y[t].expand(v)}if(o){Ext.callback(o,a||q,[q.childNodes])}},collapse:function(q,l,o){var n=this,s=n.isExpanded(),a=n.childNodes.length,p,m;if(!n.isLeaf()&&((!s&&q)||n.fireEventArgs("beforecollapse",[n])!==false)){if(Ext.suspendLayouts){Ext.suspendLayouts()}if(n.isExpanded()){if(q){m=function(){for(p=0;p<a;p++){n.childNodes[p].setCollapsed(true)}};if(l){l=Ext.Function.createSequence(m,l)}else{l=m}}n.set("expanded",false);n.fireEventArgs("collapse",[n,n.childNodes,false,l?Ext.Function.bind(l,o,[n.childNodes]):null,null]);l=null}else{if(q){for(p=0;p<a;p++){n.childNodes[p].setCollapsed(true)}}}if(Ext.resumeLayouts){Ext.resumeLayouts(true)}}Ext.callback(l,o||n,[n.childNodes])},setCollapsed:function(l){var h=this,a=h.childNodes.length,j;if(!h.isLeaf()&&h.fireEventArgs("beforecollapse",[h,Ext.emptyFn])!==false){h.data.expanded=false;h.fireEventArgs("collapse",[h,h.childNodes,false,null,null]);if(l){for(j=0;j<a;j++){h.childNodes[j].setCollapsed(true)}}}},collapseChildren:function(s,m,a){var n=this,p,u=n.childNodes,o=u.length,q=[],t;for(p=0;p<o;++p){t=u[p];if(!t.isLeaf()&&t.isLoaded()&&t.isExpanded()){q.push(t)}}o=q.length;if(o){for(p=0;p<o;++p){t=q[p];if(p===o-1){t.collapse(s,m,a)}else{t.collapse(s)}}}else{Ext.callback(m,a)}},fireEventArgs:function(p,o){var l=Ext.data.Model.prototype.fireEventArgs,s,m,a,n,q;if(c[p]){for(m=this;s!==false&&m;m=(q=m).parentNode){if(m.hasListeners[p]){s=l.call(m,p,o)}}a=q.rootOf;if(s!==false&&a){n=a.treeStore;if(n&&n.hasListeners[p]){s=n.fireEventArgs.call(n,p,o)}if(s!==false&&a.hasListeners[p]){s=a.fireEventArgs.call(a,p,o)}}return s}else{return l.apply(this,arguments)}},serialize:function(){var m=Ext.data.writer.Json.prototype.getRecordData(this),h=this.childNodes,a=h.length,j,l;if(a>0){j=[];for(l=0;l<a;l++){j.push(h[l].serialize())}m.children=j}return m}}}}},0,0,0,0,0,0,[Ext.data,"NodeInterface"],0));(Ext.cmd.derive("Ext.data.NodeStore",Ext.data.Store,{isNodeStore:true,cacheRemovedRecords:false,node:null,recursive:false,rootVisible:false,isExpandingOrCollapsing:0,constructor:function(e){var h=this,d;e=e||{};Ext.apply(h,e);e.proxy={type:"proxy"};h.callParent([e]);d=h.node;if(d){h.node=null;h.setNode(d)}},getTotalCount:function(){return this.getCount()},setNode:function(c){var d=this;if(d.node&&d.node!=c){d.mun(d.node,{expand:d.onNodeExpand,collapse:d.onNodeCollapse,append:d.onNodeAppend,insert:d.onNodeInsert,bulkremove:d.onBulkRemove,remove:d.onNodeRemove,sort:d.onNodeSort,filterchange:d.onNodeFilter,scope:d});d.node=null}if(c){Ext.data.NodeInterface.decorate(c.self);d.removeAll();if(d.rootVisible){d.add(c)}else{if(!c.isExpanded()&&d.treeStore.autoLoad!==false){c.expand()}}d.mon(c,{expand:d.onNodeExpand,collapse:d.onNodeCollapse,append:d.onNodeAppend,insert:d.onNodeInsert,bulkremove:d.onBulkRemove,remove:d.onNodeRemove,sort:d.onNodeSort,filterchange:d.onNodeFilter,scope:d});d.node=c;if(c.isExpanded()&&c.isLoaded()){d.onNodeExpand(c,c.childNodes,true)}}},onNodeFilter:function(h,j){var l=this,e=[];this.data.clear();l.handleNodeExpand(h,j,e);this.data.addAll(e);this.fireEvent("refresh",this)},onNodeSort:function(d,h){var e=this;if((e.indexOf(d)!==-1||(d===e.node&&!e.rootVisible)&&d.isExpanded())){Ext.suspendLayouts();e.onNodeCollapse(d,h,true);e.onNodeExpand(d,h,true);Ext.resumeLayouts(true)}},onNodeExpand:function(m,o,h){var l=this,j=l.indexOf(m)+1,n=[];if(!h){l.fireEvent("beforeexpand",m,o,j)}l.handleNodeExpand(m,o,n);l.insert(j,n);if(!h){l.fireEvent("expand",m,o)}},handleNodeExpand:function(o,j,p){var m=this,n=j?j.length:0,q,l;if(!m.recursive&&o!==m.node){return}if(o!==this.node&&!m.isVisible(o)){return}if(n){for(q=0;q<n;q++){l=j[q];if(l.get("visible")){p.push(l);if(l.isExpanded()){if(l.isLoaded()){m.handleNodeExpand(l,l.childNodes,p)}else{l.set("expanded",false);l.expand()}}}}}},onBulkRemove:function(d,h,e){this.onNodeCollapse(d,h,true)},onNodeCollapse:function(u,w,p,q,o){var v=this,s=v.indexOf(u)+1,x,y,t,n;if(!v.recursive&&u!==v.node){return}if(u.store.filterFn){w=Ext.Array.filter(w,v.filterVisible)}if(!p){v.fireEvent("beforecollapse",u,w,s,q,o)}if(w.length&&v.data.contains(w[0])){x=u;while(x.parentNode){for(t=x.nextSibling;t&&!t.get("visible");t=t.nextSibling){}if(t){n=true;y=v.indexOf(t);break}else{x=x.parentNode}}if(!n){y=v.getCount()}v.removeAt(s,y-s)}if(!p){v.fireEvent("collapse",u,w,s)}},onNodeAppend:function(n,l,h){var m=this,j,o;if(m.isVisible(l)){if(h===0){j=n}else{for(o=l.previousSibling;o&&!o.get("visible");o=o.previousSibling){}while(o.isExpanded()&&o.lastChild){o=o.lastChild}j=o}m.insert(m.indexOf(j)+1,l);if(!l.isLeaf()&&l.isExpanded()){if(l.isLoaded()){m.onNodeExpand(l,l.childNodes,true)}else{if(!m.treeStore.fillCount){l.set("expanded",false);l.join(m.treeStore);l.expand()}}}}},onNodeInsert:function(n,l,j){var m=this,h=this.indexOf(j);if(h!==-1&&m.isVisible(l)){m.insert(h,l);if(!l.isLeaf()&&l.isExpanded()){if(l.isLoaded()){m.onNodeExpand(l,l.childNodes,true)}else{l.set("expanded",false);l.join(m.treeStore);l.expand()}}}},onNodeRemove:function(e,j,h){var l=this;if(l.indexOf(j)!=-1){if(!j.isLeaf()&&j.isExpanded()){j.parentNode=j.removeContext.parentNode;j.nextSibling=j.removeContext.nextSibling;l.onNodeCollapse(j,j.childNodes,true);j.parentNode=j.nextSibling=null}l.remove(j)}},filterVisible:function(c){return c.get("visible")},isVisible:function(c){if(c.get("visible")){var d=c.parentNode;while(d){if(d===this.node&&d.data.expanded){return true}if(!d.data.expanded){return false}d=d.parentNode}}return false}},1,0,0,0,["store.node"],0,[Ext.data,"NodeStore"],0));(Ext.cmd.derive("Ext.data.Request",Ext.Base,{action:undefined,params:undefined,method:"GET",url:undefined,constructor:function(c){Ext.apply(this,c)}},1,0,0,0,0,0,[Ext.data,"Request"],0));(Ext.cmd.derive("Ext.data.SequentialIdGenerator",Ext.data.IdGenerator,{constructor:function(){var c=this;c.callParent(arguments);c.parts=[c.prefix,""]},prefix:"",seed:1,generate:function(){var d=this,c=d.parts;c[1]=d.seed++;return c.join("")}},1,0,0,0,["idgen.sequential"],0,[Ext.data,"SequentialIdGenerator"],0));(Ext.cmd.derive("Ext.data.Tree",Ext.Base,{root:null,constructor:function(d){var c=this;c.mixins.observable.constructor.call(c);if(d){c.setRootNode(d)}c.on({scope:c,idchanged:c.onNodeIdChanged,insert:c.onNodeInsert,append:c.onNodeAppend,remove:c.onNodeRemove})},getRootNode:function(){return this.root},setRootNode:function(h){var d=this,e=d.getRootNode();d.root=h;if(h.rootOf){h.rootOf.removeRootNode()}else{if(h.parentNode){h.parentNode.removeChild(h)}}if(e){e.rootOf=null}h.rootOf=d;if(h.fireEventArgs("beforeappend",[null,h])!==false){h.set("root",true);h.updateInfo(true,{isFirst:true,isLast:true,depth:0,index:0,parentId:null});d.nodeHash={};h.fireEvent("append",null,h);h.fireEvent("rootchange",h)}return h},removeRootNode:function(){var c=this,d=c.root;d.set("root",false);d.fireEvent("remove",null,d,false);d.fireEvent("rootchange",null);d.rootOf=c.root=null;return d},flatten:function(){return Ext.Object.getValues(this.nodeHash)},onNodeInsert:function(d,c){this.registerNode(c,true)},onNodeAppend:function(d,c){this.registerNode(c,true)},onNodeRemove:function(d,c){this.unregisterNode(c,true)},onNodeIdChanged:function(m,l,h,j){var n=this.nodeHash;delete n[l||j];n[h]=m},getNodeById:function(c){return this.nodeHash[c]},registerNode:function(l,j){var m=this,o,n,h;m.nodeHash[l.getId()||l.internalId]=l;if(j===true){o=l.childNodes;n=o.length;for(h=0;h<n;h++){m.registerNode(o[h],true)}}},unregisterNode:function(l,j){var m=this,o,n,h;delete m.nodeHash[l.getId()||l.internalId];if(j===true){o=l.childNodes;n=o.length;for(h=0;h<n;h++){m.unregisterNode(o[h],true)}}},sort:function(c,d){this.getRootNode().sort(c,d)},filter:function(c,d){this.getRootNode().filter(c,d)}},1,0,0,0,["data.tree"],[["observable",Ext.util.Observable]],[Ext.data,"Tree"],0));(Ext.cmd.derive("Ext.data.TreeModel",Ext.data.Model,{getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode}},0,0,0,0,0,[["queryable",Ext.Queryable]],[Ext.data,"TreeModel"],function(){Ext.data.NodeInterface.decorate(this)}));(Ext.cmd.derive("Ext.data.TreeStore",Ext.data.AbstractStore,{isTreeStore:true,clearOnLoad:true,clearRemovedOnLoad:true,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",defaultRootProperty:"children",fillCount:0,folderSort:false,lazyFill:false,constructor:function(m){var l=this,h,j,n;m=Ext.apply({},m);j=m.fields||l.fields;n=m.model||l.model;if(!n){if(!j){j=[{name:"text",type:"string"}]}if(l.defaultRootProperty!==l.self.prototype.defaultRootProperty){j.push({name:l.defaultRootProperty,type:"auto",defaultValue:null,persist:false})}m.model=Ext.define(null,{extend:"Ext.data.TreeModel",fields:j,proxy:l.proxy||l.defaultProxyType});delete l.fields;l.implicitModel=true}l.callParent([m]);l.tree=new Ext.data.Tree();l.tree.treeStore=l;l.onBeforeSort();h=l.root;if(h){delete l.root;l.setRootNode(h)}if(Ext.isDefined(l.nodeParameter)){if(Ext.isDefined(Ext.global.console)){Ext.global.console.warn("Ext.data.TreeStore: nodeParameter has been deprecated. Please use nodeParam instead.")}l.nodeParam=l.nodeParameter;delete l.nodeParameter}},setProxy:function(h){var e,d;if(h instanceof Ext.data.proxy.Proxy){d=Ext.isEmpty(h.getReader().root)}else{if(Ext.isString(h)){d=true}else{e=h.reader;d=!(e&&!Ext.isEmpty(e.root))}}h=this.callParent(arguments);h.idParam=this.nodeParam;if(d){e=h.getReader();e.root=this.defaultRootProperty;e.buildExtractors(true)}return h},filter:function(p,n){if(Ext.isString(p)){p={property:p,value:n}}var q=this,l=q.decodeFilters(p),t,s=l.length,m=q.getRootNode(),o;for(t=0;t<s;t++){q.filters.replace(l[t])}p=q.filters.items;if(p.length){o=[];q.filterFn=Ext.util.Filter.createFilterFn(p);m.cascadeBy({after:function(a){a.set("visible",q.filterFn(a))}});for(t=0,s=m.childNodes.length;t<s;t++){if(m.childNodes[t].get("visible")){o.push(m.childNodes[t])}}q.fireEvent("datachanged",q);q.fireEvent("refresh",q)}else{o=m.childNodes}m.fireEvent("filterchange",m,o);q.fireEvent("filterchange",q,p)},clearFilter:function(){var c=this,d=c.getRootNode();c.filters.clear();c.filterFn=null;d.cascadeBy(function(a){a.set("visible",true)});d.fireEvent("filterchange",d,d.childNodes);c.fireEvent("filterchange",c,[])},onBeforeSort:function(){if(this.folderSort){this.sort({property:"leaf",direction:"ASC"},"prepend",false)}},onBeforeNodeExpand:function(p,n,s,l){var q=this,m=q.proxy.getReader(),t,o;if(p.isLoaded()){o=[p.childNodes];if(l){o.push.apply(o,l)}Ext.callback(n,s||p,o)}else{if(p.isLoading()){q.on("load",function(){o=[p.childNodes];if(l){o.push.apply(o,l)}Ext.callback(n,s||p,o)},q,{single:true,priority:1001})}else{t=m.getRoot(p.raw||p[p.persistenceProperty]);if(t||p.phantom){if(t){q.fillNode(p,m.extractData(t))}o=[p.childNodes];if(l){o.push.apply(o,l)}Ext.callback(n,s||p,o)}else{q.read({node:p,internalCallback:function(){delete q.lastOptions.internalCallback;o=[p.childNodes];if(l){o.push.apply(o,l)}Ext.callback(n,s||p,o)}})}}}},getNewRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterNew)},getUpdatedRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterUpdated)},onNodeRemove:function(e,j,h){var l=this;j.unjoin(l);if(!j.phantom&&!h&&!l.loading){Ext.Array.include(l.removed,j)}if(l.autoSync&&!l.autoSyncSuspended&&!h){l.sync()}},onNodeAdded:function(q,o){var p=this,j=p.proxy.getReader(),n=o.raw||o[o.persistenceProperty],m,l;if(p.filterFn){l=p.filterFn(o);o.set("visible",l);if(l){q.set("visible",p.filterFn(q))}}Ext.Array.remove(p.removed,o);o.join(p);if(!o.isLeaf()&&!o.isLoaded()&&!p.lazyFill){m=j.getRoot(n);if(m){p.fillNode(o,j.extractData(m))}}if(p.autoSync&&!p.autoSyncSuspended&&(o.phantom||o.dirty)){p.sync()}},onNodeSort:function(){if(this.autoSync&&!this.autoSyncSuspended){this.sync()}},setRootNode:function(j,l){var m=this,n=m.model,o=n.prototype.idProperty,h=m.getRootNode();if(!n.prototype.isNode){Ext.data.NodeInterface.decorate(n)}if(!j||!j.isNode){j=Ext.apply({id:m.defaultRootId,text:m.defaultRootText,allowDrag:false},j);if(j[o]===undefined){j[o]=m.defaultRootId}j=Ext.ModelManager.create(j,n)}m.getProxy().getReader().buildExtractors(true);m.onNodeAdded(null,j);m.tree.setRootNode(j);if(h){h.unjoin(m)}if(l!==true&&!j.isLoaded()&&(m.autoLoad===true||j.isExpanded())){j.data.expanded=false;j.expand()}return j},getRootNode:function(){return this.tree.getRootNode()},getNodeById:function(c){return this.tree.getNodeById(c)},getById:function(c){return this.getNodeById(c)},load:function(h){h=h||{};h.params=h.params||{};var m=this,n=h.node||m.tree.getRootNode(),l=h.callback,o=h.scope,j;if(!n){n=m.setRootNode({expanded:true},true)}if(n.data.expanded){n.data.loaded=false;if(m.clearOnLoad){n.data.expanded=false}h.callback=function(){if(!m.clearOnLoad){n.collapse()}n.expand();Ext.callback(l,o,arguments)}}h.id=n.getId();h=Ext.apply({action:"read",filters:m.filters.items,sorters:m.getSorters(),node:h.node||n},h);m.lastOptions=h;j=new Ext.data.Operation(h);if(m.fireEvent("beforeload",m,j)!==false){m.loading=true;if(m.clearOnLoad){if(m.clearRemovedOnLoad){m.clearRemoved(n)}n.removeAll(false)}m.proxy.read(j,m.onProxyLoad,m)}if(m.loading&&n){n.set("loading",true)}return m},clearRemoved:function(z){var s=this,w=s.removed,A=z.getId(),x=w.length,y=x,o={},u=[],p={},t,v,q;if(z===s.getRootNode()){s.removed=[];return}for(;y--;){t=w[y];p[t.getId()]=t}for(y=x;y--;){t=w[y];v=t;while(v&&v.getId()!==A){q=v.get("parentId");v=v.parentNode||s.getNodeById(q)||p[q]}if(v){o[t.getId()]=t}}for(y=0;y<x;y++){t=w[y];if(!o[t.getId()]){u.push(t)}}s.removed=u},fillNode:function(y,x){var u=this,z=x?x.length:0,v=u.sorters,w,s,t=false,A=u.sortOnLoad&&!u.remoteSort&&v&&v.items&&v.items.length,o,p,q;if(z){if(u.filterFn){x[0].set("visible",u.filterFn(x[0]))}for(w=1;!t&&w<z;w++){o=x[w];p=x[w-1];if(u.filterFn){o.set("visible",u.filterFn(o))}t=o[o.persistenceProperty].index!==p[p.persistenceProperty].index}if(A){if(t){u.sorters.insert(0,u.indexSorter)}s=new Ext.util.MixedCollection();s.addAll(x);s.sort(u.sorters.items);x=s.items;u.sorters.remove(u.indexSorter)}else{if(t){Ext.Array.sort(x,u.sortByIndex)}}}y.set("loaded",true);q=u.fillCount===0;if(q){u.fireEvent("beforefill",u,y,x)}++u.fillCount;if(x.length){y.appendChild(x,undefined,true)}if(q){u.fireEvent("fillcomplete",u,y,x)}--u.fillCount;return x},sortByIndex:function(c,d){return c[c.persistenceProperty].index-d[d.persistenceProperty].index},onIdChanged:function(l,j,e,h){this.tree.onNodeIdChanged(l,j,e,h);this.callParent(arguments)},onProxyLoad:function(j){var n=this,m=j.wasSuccessful(),l=j.getRecords(),o=j.node,p=j.scope||n,q=[l,j,m];n.loading=false;o.set("loading",false);if(m){if(!n.clearOnLoad){l=n.cleanRecords(o,l)}l=n.fillNode(o,l)}Ext.callback(j.internalCallback,p,q);n.fireEvent("read",n,j.node,l,m);n.fireEvent("load",n,j.node,l,m);Ext.callback(j.callback,p,q)},cleanRecords:function(p,l){var q={},n=p.childNodes,s=0,m=n.length,t=[],o;for(;s<m;++s){q[n[s].getId()]=true}for(s=0,m=l.length;s<m;++s){o=l[s];if(!q[o.getId()]){t.push(o)}}return t},removeAll:function(){var c=this.getRootNode();if(c){c.destroy(true)}this.fireEvent("clear",this)},doSort:function(d){var c=this;if(c.remoteSort){c.load()}else{c.tree.sort(d,true);c.fireEvent("datachanged",c);c.fireEvent("refresh",c)}c.fireEvent("sort",c,c.sorters.getRange())}},1,0,0,0,["store.tree"],0,[Ext.data,"TreeStore"],function(){var c=this.prototype;c.indexSorter=new Ext.util.Sorter({sorterFn:c.sortByIndex})}));(Ext.cmd.derive("Ext.data.UuidGenerator",Ext.data.IdGenerator,(function(){var m=Math.pow(2,14),n=Math.pow(2,16),o=Math.pow(2,28),q=Math.pow(2,32);function l(a,c){var d=a.toString(16);if(d.length>c){d=d.substring(d.length-c)}else{if(d.length<c){d=Ext.String.leftPad(d,c,"0")}}return d}function p(a,c){var d=Math.random()*(c-a+1);return Math.floor(d)+a}function j(a){if(typeof(a)=="number"){var c=Math.floor(a/q);return{lo:Math.floor(a-c*q),hi:c}}return a}return{id:"uuid",version:4,constructor:function(){var a=this;a.callParent(arguments);a.parts=[];a.init()},generate:function(){var c=this,a=c.parts,d=c.timestamp;a[0]=l(d.lo,8);a[1]=l(d.hi&65535,4);a[2]=l(((d.hi>>>16)&4095)|(c.version<<12),4);a[3]=l(128|((c.clockSeq>>>8)&63),2)+l(c.clockSeq&255,2);a[4]=l(c.salt.hi,4)+l(c.salt.lo,8);if(c.version==4){c.init()}else{++d.lo;if(d.lo>=q){d.lo=0;++d.hi}}return a.join("-").toLowerCase()},getRecId:function(a){return a.getId()},init:function(){var c=this,d,a;if(c.version==4){c.clockSeq=p(0,m-1);d=c.salt||(c.salt={});a=c.timestamp||(c.timestamp={});d.lo=p(0,q-1);d.hi=p(0,n-1);a.lo=p(0,q-1);a.hi=p(0,o-1)}else{c.salt=j(c.salt);c.timestamp=j(c.timestamp);c.salt.hi|=256}},reconfigure:function(a){Ext.apply(this,a);this.init()}}}()),1,0,0,0,["idgen.uuid"],0,[Ext.data,"UuidGenerator"],0));(Ext.cmd.derive("Ext.data.reader.Xml",Ext.data.reader.Reader,{alternateClassName:"Ext.data.XmlReader",createAccessor:function(c){var d=this;if(Ext.isEmpty(c)){return Ext.emptyFn}if(Ext.isFunction(c)){return c}return function(a){return d.getNodeValue(Ext.DomQuery.selectNode(c,a))}},getNodeValue:function(c){if(c){if(typeof c.normalize==="function"){c.normalize()}c=c.firstChild;if(c){return c.nodeValue}}return undefined},getResponseData:function(h){var l=h.responseXML,e,j;if(!l){j="XML data not found in the response";e=new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:j});this.fireEvent("exception",this,h,e);Ext.Logger.warn(j);return e}return this.readRecords(l)},getData:function(c){return c.documentElement||c},getRoot:function(d){var h=d.nodeName,e=this.root;if(!e||(h&&h==e)){return d}else{if(Ext.DomQuery.isXml(d)){return Ext.DomQuery.selectNode(e,d)}}},extractData:function(d){var c=this.record;if(c!=d.nodeName){d=Ext.DomQuery.select(c,d)}else{d=[d]}return this.callParent([d])},getAssociatedDataRoot:function(c,d){return Ext.DomQuery.select(d,c)[0]},readRecords:function(c){if(Ext.isArray(c)){c=c[0]}this.xmlData=c;return this.callParent([c])},createFieldAccessExpression:function(l,n,o){var m=this.namespace,h,j;h=l.mapping||((m?m+"|":"")+l.name);if(typeof h==="function"){j=n+".mapping("+o+", this)"}else{j='this.getNodeValue(Ext.DomQuery.selectNode("'+h+'", '+o+"))"}return j}},0,0,0,0,["reader.xml"],0,[Ext.data.reader,"Xml",Ext.data,"XmlReader"],0));(Ext.cmd.derive("Ext.data.writer.Xml",Ext.data.writer.Writer,{alternateClassName:"Ext.data.XmlWriter",documentRoot:"xmlData",defaultDocumentRoot:"xmlData",header:"",record:"record",writeRecords:function(y,x){var s=this,v=[],w=0,t=x.length,q=s.documentRoot,u=s.record,n=x.length!==1,o,p;v.push(s.header||"");if(!q&&n){q=s.defaultDocumentRoot}if(q){v.push("<",q,">")}for(;w<t;++w){o=x[w];v.push("<",u,">");for(p in o){if(o.hasOwnProperty(p)){v.push("<",p,">",o[p],"</",p,">")}}v.push("</",u,">")}if(q){v.push("</",q,">")}y.xmlData=v.join("");return y}},0,0,0,0,["writer.xml"],0,[Ext.data.writer,"Xml",Ext.data,"XmlWriter"],0));(Ext.cmd.derive("Ext.data.XmlStore",Ext.data.Store,{constructor:function(c){c=Ext.apply({proxy:{type:"ajax",reader:"xml",writer:"xml"}},c);this.callParent([c])}},1,0,0,0,["store.xml"],0,[Ext.data,"XmlStore"],0));(Ext.cmd.derive("Ext.data.association.BelongsTo",Ext.data.association.Association,{alternateClassName:"Ext.data.BelongsToAssociation",constructor:function(o){this.callParent(arguments);var m=this,j=m.ownerModel.prototype,l=m.associatedName,n=m.getterName||"get"+l,h=m.setterName||"set"+l;Ext.applyIf(m,{name:l,foreignKey:l.toLowerCase()+"_id",instanceName:l+"BelongsToInstance",associationKey:l.toLowerCase()});j[n]=m.createGetter();j[h]=m.createSetter()},createSetter:function(){var h=this,d=h.foreignKey,e=h.instanceName;return function(c,m,l){var a=c&&c.isModel,n=a?c.getId():c;if(a){this[e]=c}else{if(this[e] instanceof Ext.data.Model&&!this.isEqual(this.get(d),n)){delete this[e]}}this.set(d,n);if(Ext.isFunction(m)){m={callback:m,scope:l||this}}if(Ext.isObject(m)){return this.save(m)}}},createGetter:function(){var n=this,m=n.associatedName,l=n.associatedModel,o=n.foreignKey,h=n.primaryKey,j=n.instanceName;return function(c,a){c=c||{};var d=this,s=d.get(o),q,p,e;if(c.reload===true||d[j]===undefined){if(Ext.isEmpty(s)){return null}p=Ext.ModelManager.create({},m);p.set(h,s);if(typeof c=="function"){c={callback:c,scope:a||d}}q=c.success;c.success=function(t){d[j]=t;if(q){q.apply(this,arguments)}};l.load(s,c);d[j]=p;return p}else{p=d[j];e=[p];a=a||c.scope||d;if(c){Ext.callback(c,a,e);Ext.callback(c.success,a,e);Ext.callback(c.callback,a,e)}return p}}},read:function(d,e,h){d[this.instanceName]=e.read([h]).records[0]}},1,0,0,0,["association.belongsto"],0,[Ext.data.association,"BelongsTo",Ext.data,"BelongsToAssociation"],0));(Ext.cmd.derive("Ext.util.Inflector",Ext.Base,{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^person$/),"people"],[(/^man$/),"men"],[(/^(child)$/),"$1ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/people$/i),"person"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(c,d){this.singulars.unshift([c,d])},plural:function(c,d){this.plurals.unshift([c,d])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(c){return Ext.Array.indexOf(this.uncountable,c)!=-1},pluralize:function(l){if(this.isTransnumeral(l)){return l}var m=this.plurals,n=m.length,j,o,h;for(h=0;h<n;h++){j=m[h];o=j[0];if(o==l||(o.test&&o.test(l))){return l.replace(o,j[1])}}return l},singularize:function(l){if(this.isTransnumeral(l)){return l}var m=this.singulars,n=m.length,j,o,h;for(h=0;h<n;h++){j=m[h];o=j[0];if(o==l||(o.test&&o.test(l))){return l.replace(o,j[1])}}return l},classify:function(c){return Ext.String.capitalize(this.singularize(c))},ordinalize:function(j){var e=parseInt(j,10),l=e%10,h=e%100;if(11<=h&&h<=13){return j+"th"}else{switch(l){case 1:return j+"st";case 2:return j+"nd";case 3:return j+"rd";default:return j+"th"}}}},0,0,0,0,0,0,[Ext.util,"Inflector"],function(){var c={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},d;for(d in c){this.plural(d,c[d]);this.singular(c[d],d)}}));(Ext.cmd.derive("Ext.data.association.HasMany",Ext.data.association.Association,{alternateClassName:"Ext.data.HasManyAssociation",remoteFilter:true,constructor:function(l){var j=this,h,e;j.callParent(arguments);j.name=j.name||Ext.util.Inflector.pluralize(j.associatedName.toLowerCase());h=j.ownerModel.prototype;e=j.name;Ext.applyIf(j,{storeName:e+"Store",foreignKey:j.ownerName.toLowerCase()+"_id"});h[e]=j.createStore()},createStore:function(){var q=this,l=q.associatedModel,o=q.storeName,p=q.foreignKey,m=q.primaryKey,n=q.filterProperty,t=q.autoLoad,s=q.remoteFilter,u=q.storeConfig||{};return function(){var e=this,a,h,c={},d;if(e[o]===undefined){d=e.get(m);if(n){h={property:n,value:e.get(n),exactMatch:true}}else{if(e.hasId(d)){h={property:p,value:d,exactMatch:true}}}c[p]=e.get(m);a=Ext.apply({},u,{model:l,filters:h?[h]:undefined,remoteFilter:s===true,modelDefaults:c,disableMetaChangeEvent:true});e[o]=Ext.data.AbstractStore.create(a);if(t){e[o].load()}}return e[o]}},read:function(s,l,n){var p=s[this.name](),t,q,m,o;p.add(l.read(n).records);t=this.associatedModel.prototype.associations.findBy(function(a){return a.type==="belongsTo"&&a.associatedName===s.$className});if(t){q=p.data.items;m=q.length;for(o=0;o<m;o++){q[o][t.instanceName]=s}}}},1,0,0,0,["association.hasmany"],0,[Ext.data.association,"HasMany",Ext.data,"HasManyAssociation"],0));(Ext.cmd.derive("Ext.data.association.HasOne",Ext.data.association.Association,{alternateClassName:"Ext.data.HasOneAssociation",constructor:function(o){this.callParent(arguments);var m=this,j=m.ownerModel.prototype,l=m.associatedName,n=m.getterName||"get"+l,h=m.setterName||"set"+l;Ext.applyIf(m,{name:l,foreignKey:l.toLowerCase()+"_id",instanceName:l+"HasOneInstance",associationKey:l.toLowerCase()});j[n]=m.createGetter();j[h]=m.createSetter()},createSetter:function(){var h=this,d=h.foreignKey,e=h.instanceName;return function(c,m,l){var a=c&&c.isModel,n=a?c.getId():c;if(a){this[e]=c}else{if(this[e] instanceof Ext.data.Model&&!this.isEqual(this.get(d),n)){delete this[e]}}this.set(d,n);if(Ext.isFunction(m)){m={callback:m,scope:l||this}}if(Ext.isObject(m)){return this.save(m)}}},createGetter:function(){var p=this,n=p.ownerModel,o=p.associatedName,m=p.associatedModel,q=p.foreignKey,j=p.primaryKey,l=p.instanceName;return function(a,t){a=a||{};var c=this,s=c.get(q),h,e,d;if(a.reload===true||c[l]===undefined){if(Ext.isEmpty(s)){return null}e=Ext.ModelManager.create({},o);e.set(j,s);if(typeof a=="function"){a={callback:a,scope:t||c}}h=a.success;a.success=function(u){c[l]=u;if(h){h.apply(this,arguments)}};m.load(s,a);c[l]=e;return e}else{e=c[l];d=[e];t=t||a.scope||c;if(a){Ext.callback(a,t,d);Ext.callback(a.success,t,d);Ext.callback(a.callback,t,d)}return e}}},read:function(n,j,l){var h=this.associatedModel.prototype.associations.findBy(function(a){return a.type==="belongsTo"&&a.associatedName===n.$className}),m=j.read([l]).records[0];n[this.instanceName]=m;if(h){m[h.instanceName]=n}}},1,0,0,0,["association.hasone"],0,[Ext.data.association,"HasOne",Ext.data,"HasOneAssociation"],0));(Ext.cmd.derive("Ext.data.proxy.WebStorage",Ext.data.proxy.Client,{alternateClassName:"Ext.data.WebStorageProxy",id:undefined,constructor:function(c){this.callParent(arguments);this.cache={};this.id=this.id||(this.store?this.store.storeId:undefined);this.initialize()},create:function(s,n,m){var o=this,t=s.records,u=t.length,w=o.getIds(),v,p,q;s.setStarted();if(o.isHierarchical===undefined){o.isHierarchical=!!t[0].isNode;if(o.isHierarchical){o.getStorageObject().setItem(o.getTreeKey(),true)}}for(q=0;q<u;q++){p=t[q];if(p.phantom){p.phantom=false;v=o.getNextId()}else{v=p.getId()}o.setRecord(p,v);p.commit();w.push(v)}o.setIds(w);s.setCompleted();s.setSuccessful();if(typeof n=="function"){n.call(m||o,s)}},read:function(x,s,p){var t=this,y=[],v=0,q=true,z=t.model,C,A,u,w,B;x.setStarted();if(t.isHierarchical){y=t.getTreeData()}else{C=t.getIds();A=C.length;B=x.id;if(B){w=t.getRecord(B);if(w!==null){u=new z(w,B,w)}if(u){y.push(u)}else{q=false}}else{for(;v<A;v++){B=C[v];w=t.getRecord(B);y.push(new z(w,B,w))}}}if(q){x.setSuccessful()}x.setCompleted();x.resultSet=Ext.create("Ext.data.ResultSet",{records:y,total:y.length,loaded:true});if(typeof s=="function"){s.call(p||t,x)}},update:function(p,m,l){var q=p.records,s=q.length,u=this.getIds(),n,t,o;p.setStarted();for(o=0;o<s;o++){n=q[o];this.setRecord(n);n.commit();t=n.getId();if(t!==undefined&&Ext.Array.indexOf(u,t)==-1){u.push(t)}}this.setIds(u);p.setCompleted();p.setSuccessful();if(typeof m=="function"){m.call(l||this,p)}},destroy:function(v,p,o){var t=this,w=v.records,y=t.getIds(),s=y.length,n=[],q={},u=w.length,x;v.setStarted();for(;u--;){Ext.apply(q,t.removeRecord(w[u]))}for(u=0;u<s;u++){x=y[u];if(!q[x]){n.push(x)}}t.setIds(n);v.setCompleted();v.setSuccessful();if(typeof p=="function"){p.call(o||t,v)}},getRecord:function(j){var e=this,h=e.cache,l=!h[j]?Ext.decode(e.getStorageObject().getItem(e.getRecordKey(j))):h[j];if(!l){return null}h[j]=l;l[e.model.prototype.idProperty]=j;return l},setRecord:function(u,A){if(A){u.setId(A)}else{A=u.getId()}var s=this,C=u.data,w={},v=s.model,t=v.prototype.fields.items,z=t.length,x=0,q,B,y,p;for(;x<z;x++){q=t[x];B=q.name;if(q.persist){w[B]=C[B]}}delete w[s.model.prototype.idProperty];if(u.isNode&&u.get("depth")===1){delete w.parentId}y=s.getStorageObject();p=s.getRecordKey(A);s.cache[A]=w;y.removeItem(p);y.setItem(p,Ext.encode(w))},removeRecord:function(j){var n=this,l=j.getId(),h={},o,m;h[l]=j;n.getStorageObject().removeItem(n.getRecordKey(l));delete n.cache[l];if(j.childNodes){m=j.childNodes;for(o=m.length;o--;){Ext.apply(h,n.removeRecord(m[o]))}}return h},getRecordKey:function(c){if(c.isModel){c=c.getId()}return Ext.String.format("{0}-{1}",this.id,c)},getRecordCounterKey:function(){return Ext.String.format("{0}-counter",this.id)},getTreeKey:function(){return Ext.String.format("{0}-tree",this.id)},getIds:function(){var l=this,n=(l.getStorageObject().getItem(l.id)||"").split(","),h=l.model,m=n.length,j=h.prototype.fields.get(h.prototype.idProperty).type.type==="string",o;if(m==1&&n[0]===""){n=[]}else{for(o=0;o<m;o++){n[o]=j?n[o]:+n[o]}}return n},setIds:function(e){var d=this.getStorageObject(),h=e.join(",");d.removeItem(this.id);if(!Ext.isEmpty(h)){d.setItem(this.id,h)}},getNextId:function(){var n=this,m=n.getStorageObject(),o=n.getRecordCounterKey(),h=n.model,j=h.prototype.fields.get(h.prototype.idProperty).type.type==="string",l;l=n.idGenerator.generate();m.setItem(o,l);if(!j){l=+l}return l},getTreeData:function(){var v=this,G=v.getIds(),C=G.length,z=[],F={},u=[],y=0,A=v.model,s=A.prototype.idProperty,B,w,t,x,D,E;for(;y<C;y++){E=G[y];w=v.getRecord(E);z.push(w);F[E]=w;if(!w.parentId){u.push(w)}}B=u.length;Ext.Array.sort(z,v.sortByParentId);for(y=B;y<C;y++){w=z[y];x=w.parentId;if(!t||t[s]!==x){t=F[x];t.children=D=[]}D.push(w)}for(y=C;y--;){w=z[y];if(!w.children&&!w.leaf){w.loaded=true}}for(y=B;y--;){w=u[y];u[y]=new A(w,w[s],w)}return u},sortByParentId:function(c,d){return(c.parentId||0)-(d.parentId||0)},initialize:function(){var d=this,e=d.getStorageObject(),h=+e.getItem(d.getRecordCounterKey());e.setItem(d.id,e.getItem(d.id)||"");if(e.getItem(d.getTreeKey())){d.isHierarchical=true}d.idGenerator=new Ext.data.SequentialIdGenerator({seed:h?h+1:1})},clear:function(){var m=this,l=m.getStorageObject(),n=m.getIds(),j=n.length,h;for(h=0;h<j;h++){l.removeItem(m.getRecordKey(n[h]))}l.removeItem(m.getRecordCounterKey());l.removeItem(m.getTreeKey());l.removeItem(m.id);m.cache={}},getStorageObject:function(){}},1,0,0,0,0,0,[Ext.data.proxy,"WebStorage",Ext.data,"WebStorageProxy"],0));(Ext.cmd.derive("Ext.data.proxy.LocalStorage",Ext.data.proxy.WebStorage,{alternateClassName:"Ext.data.LocalStorageProxy",getStorageObject:function(){return window.localStorage}},0,0,0,0,["proxy.localstorage"],0,[Ext.data.proxy,"LocalStorage",Ext.data,"LocalStorageProxy"],0));(Ext.cmd.derive("Ext.data.proxy.Rest",Ext.data.proxy.Ajax,{alternateClassName:"Ext.data.RestProxy",actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},defaultActionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},appendId:true,batchActions:false,buildUrl:function(p){var q=this,t=p.operation,l=t.records||[],m=l[0],o=q.format,s=q.getUrl(p),n=m?m.getId():t.id;if(q.appendId&&q.isValidId(n)){if(!s.match(/\/$/)){s+="/"}s+=n}if(o){if(!s.match(/\.$/)){s+="."}s+=o}p.url=s;return q.callParent(arguments)},isValidId:function(c){return c||c===0}},0,0,0,0,["proxy.rest"],0,[Ext.data.proxy,"Rest",Ext.data,"RestProxy"],0));(Ext.cmd.derive("Ext.data.proxy.SessionStorage",Ext.data.proxy.WebStorage,{alternateClassName:"Ext.data.SessionStorageProxy",getStorageObject:function(){return window.sessionStorage}},0,0,0,0,["proxy.sessionstorage"],0,[Ext.data.proxy,"SessionStorage",Ext.data,"SessionStorageProxy"],0));(Ext.cmd.derive("Ext.dd.DDTarget",Ext.dd.DragDrop,{constructor:function(h,e,d){if(h){this.initTarget(h,e,d)}},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}},3,0,0,0,0,0,[Ext.dd,"DDTarget"],0));(Ext.cmd.derive("Ext.dd.DragTracker",Ext.Base,{active:false,trackOver:false,tolerance:5,autoStart:false,constructor:function(d){var c=this;Ext.apply(c,d);c.addEvents("mouseover","mouseout","mousedown","mouseup","mousemove","beforedragstart","dragstart","dragend","drag");c.dragRegion=new Ext.util.Region(0,0,0,0);if(c.el){c.initEl(c.el)}c.mixins.observable.constructor.call(c);if(c.disabled){c.disable()}},initEl:function(d){var c=this;c.el=Ext.get(d);c.handle=Ext.get(c.delegate);c.delegate=c.handle?undefined:c.delegate;if(!c.handle){c.handle=c.el}c.handleListeners={scope:c,delegate:c.delegate,mousedown:c.onMouseDown};if(c.trackOver||c.overCls){Ext.apply(c.handleListeners,{mouseover:c.onMouseOver,mouseout:c.onMouseOut})}c.mon(c.handle,c.handleListeners)},disable:function(){this.disabled=true},enable:function(){this.disabled=false},destroy:function(){var c=this;if(c.active){c.endDrag({})}c.clearListeners();c.mun(c.handle,c.handleListeners);c.el=c.handle=null},onMouseOver:function(m,n){var p=this,o,q,s,l,e;if(!p.disabled){if(m.within(n,true,true)||p.delegate){o=p.handleCls;p.mouseIsOut=false;if(o){for(s=0,l=p.handleEls.length;s<l;s++){q=p.handleEls[s];e=q.delegateCls;if(!e){e=q.delegateCls=[o,"-",q.region,"-over"].join("")}q.addCls([e,p.overCls])}}p.fireEvent("mouseover",p,m,p.delegate?m.getTarget(p.delegate,n):p.handle)}}},onMouseOut:function(j){var l=this,m,e,h;if(l.mouseIsDown){l.mouseIsOut=true}else{if(l.handleCls){for(e=0,h=l.handleEls.length;e<h;e++){m=l.handleEls[e];m.removeCls([m.delegateCls,l.overCls])}}l.fireEvent("mouseout",l,j)}},onMouseDown:function(j,l){var e=this,h;if(e.disabled||j.dragTracked){return}e.dragTarget=e.delegate?l:e.handle.dom;e.startXY=e.lastXY=j.getXY();e.startRegion=Ext.fly(e.dragTarget).getRegion();if(e.fireEvent("mousedown",e,j)===false||e.fireEvent("beforedragstart",e,j)===false||e.onBeforeStart(j)===false){return}e.mouseIsDown=true;j.dragTracked=true;h=e.el.dom;if(Ext.isIE&&h.setCapture){h.setCapture()}if(e.preventDefault!==false){j.preventDefault()}Ext.getDoc().on({scope:e,mouseup:e.onMouseUp,mousemove:e.onMouseMove,selectstart:e.stopSelect});e.dragEnded=false;if(!e.tolerance){e.triggerStart()}else{if(e.autoStart){e.timer=Ext.defer(e.triggerStart,e.autoStart===true?1000:e.autoStart,e,[j])}}},onMouseMove:function(j,l){var e=this,m=j.getXY(),h=e.startXY;if(e.dragEnded){return}e.lastXY=m;if(!e.active){if(Math.max(Math.abs(h[0]-m[0]),Math.abs(h[1]-m[1]))>e.tolerance){e.triggerStart(j)}else{return}}if(e.fireEvent("mousemove",e,j)===false){e.onMouseUp(j)}else{e.onDrag(j);e.fireEvent("drag",e,j)}},onMouseUp:function(c){var d=this;d.mouseIsDown=false;if(d.mouseIsOut){d.mouseIsOut=false;d.onMouseOut(c)}c.preventDefault();if(Ext.isIE&&document.releaseCapture){document.releaseCapture()}d.fireEvent("mouseup",d,c);d.endDrag(c)},endDrag:function(h){var d=this,e=d.active;Ext.getDoc().un({mousemove:d.onMouseMove,mouseup:d.onMouseUp,selectstart:d.stopSelect,scope:d});d.clearStart();d.active=false;if(e){d.dragEnded=true;d.onEnd(h);d.fireEvent("dragend",d,h)}d._constrainRegion=Ext.EventObject.dragTracked=null},triggerStart:function(c){var d=this;d.clearStart();d.active=true;d.onStart(c);d.fireEvent("dragstart",d,c)},clearStart:function(){var c=this.timer;if(c){clearTimeout(c);this.timer=null}},stopSelect:function(c){c.stopEvent();return false},onBeforeStart:function(c){},onStart:function(c){},onDrag:function(c){},onEnd:function(c){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){var c=this;if(c.constrainTo){if(c.constrainTo instanceof Ext.util.Region){return c.constrainTo}if(!c._constrainRegion){c._constrainRegion=Ext.fly(c.constrainTo).getViewRegion()}}else{if(!c._constrainRegion){c._constrainRegion=c.getDragCt().getViewRegion()}}return c._constrainRegion},getXY:function(c){return c?this.constrainModes[c](this,this.lastXY):this.lastXY},getOffset:function(h){var d=this.getXY(h),e=this.startXY;return[d[0]-e[0],d[1]-e[1]]},constrainModes:{point:function(e,j){var l=e.dragRegion,h=e.getConstrainRegion();if(!h){return j}l.x=l.left=l[0]=l.right=j[0];l.y=l.top=l[1]=l.bottom=j[1];l.constrainTo(h);return[l.left,l.top]},dragTarget:function(o,l){var h=o.startXY,m=o.startRegion.copy(),j=o.getConstrainRegion(),n;if(!j){return l}m.translateBy(l[0]-h[0],l[1]-h[1]);if(m.right>j.right){l[0]+=n=(j.right-m.right);m.left+=n}if(m.left<j.left){l[0]+=(j.left-m.left)}if(m.bottom>j.bottom){l[1]+=n=(j.bottom-m.bottom);m.top+=n}if(m.top<j.top){l[1]+=(j.top-m.top)}return l}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.dd,"DragTracker"],0));(Ext.cmd.derive("Ext.dd.DragZone",Ext.dd.DragSource,{constructor:function(l,e){var j=this,h=j.containerScroll;j.callParent([l,e]);if(h){l=j.scrollEl||l;l=Ext.get(l);if(Ext.isObject(h)){l.ddScrollConfig=h}Ext.dd.ScrollManager.register(l)}},getDragData:function(c){return Ext.dd.Registry.getHandleFromEvent(c)},onInitDrag:function(d,c){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(d,c);return true},getRepairXY:function(c){return Ext.fly(this.dragData.ddel).getXY()},destroy:function(){this.callParent();if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.scrollEl||this.el)}}},1,0,0,0,0,0,[Ext.dd,"DragZone"],0));(Ext.cmd.derive("Ext.dd.ScrollManager",Ext.Base,{singleton:true,constructor:function(){var c=Ext.dd.DragDropManager;c.fireEvents=Ext.Function.createSequence(c.fireEvents,this.onFire,this);c.stopDrag=Ext.Function.createSequence(c.stopDrag,this.onStop,this);this.doScroll=Ext.Function.bind(this.doScroll,this);this.ddmInstance=c;this.els={};this.dragEl=null;this.proc={}},onStop:function(d){var c=Ext.dd.ScrollManager;c.dragEl=null;c.clearProc()},triggerRefresh:function(){if(this.ddmInstance.dragCurrent){this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)}},doScroll:function(){if(this.ddmInstance.dragCurrent){var j=this.proc,n=j.el,m=j.el.ddScrollConfig,l=m&&m.increment?m.increment:this.increment,h=m&&"animate" in m?m.animate:this.animate;if(!h){if(n.scroll(j.dir,l)){this.triggerRefresh()}}else{n.scroll(j.dir,l,true,this.animDuration,this.triggerRefresh)}}},clearProc:function(){var c=this.proc;if(c.id){clearInterval(c.id)}c.id=0;c.el=null;c.dir=""},startProc:function(e,h){this.clearProc();this.proc.el=e;this.proc.dir=h;var j=e.ddScrollConfig?e.ddScrollConfig.ddGroup:undefined,l=(e.ddScrollConfig&&e.ddScrollConfig.frequency)?e.ddScrollConfig.frequency:this.frequency;if(j===undefined||this.ddmInstance.dragCurrent.ddGroup==j){this.proc.id=setInterval(this.doScroll,l)}},onFire:function(p,e){if(e||!this.ddmInstance.dragCurrent){return}if(!this.dragEl||this.dragEl!=this.ddmInstance.dragCurrent){this.dragEl=this.ddmInstance.dragCurrent;this.refreshCache()}var c=p.getPoint(),o=this.proc,q=this.els,t,s,u,n;for(t in q){s=q[t];u=s._region;n=s.ddScrollConfig?s.ddScrollConfig:this;if(u&&u.contains(c)&&s.isScrollable()){if(u.bottom-c.y<=n.vthresh){if(o.el!=s){this.startProc(s,"down")}return}else{if(u.right-c.x<=n.hthresh){if(o.el!=s){this.startProc(s,"right")}return}else{if(c.y-u.top<=n.vthresh){if(o.el!=s){this.startProc(s,"up")}return}else{if(c.x-u.left<=n.hthresh){if(o.el!=s){this.startProc(s,"left")}return}}}}}}this.clearProc()},register:function(h){if(Ext.isArray(h)){for(var d=0,e=h.length;d<e;d++){this.register(h[d])}}else{h=Ext.get(h);this.els[h.id]=h}},unregister:function(h){if(Ext.isArray(h)){for(var d=0,e=h.length;d<e;d++){this.unregister(h[d])}}else{h=Ext.get(h);delete this.els[h.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){var d=this.els,c;for(c in d){if(typeof d[c]=="object"){d[c]._region=d[c].getRegion()}}}},1,0,0,0,0,0,[Ext.dd,"ScrollManager"],0));(Ext.cmd.derive("Ext.dd.DropTarget",Ext.dd.DDTarget,{constructor:function(c,d){this.el=Ext.get(c);Ext.apply(this,d);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:true}])},containerScroll:false,dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(e,h,d){if(this.overClass){this.el.addCls(this.overClass)}return this.dropAllowed},notifyOver:function(e,h,d){return this.dropAllowed},notifyOut:function(e,h,d){if(this.overClass){this.el.removeCls(this.overClass)}},notifyDrop:function(e,h,d){return false},destroy:function(){this.callParent();if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}},1,0,0,0,0,0,[Ext.dd,"DropTarget"],0));(Ext.cmd.derive("Ext.dd.Registry",Ext.Base,{singleton:true,constructor:function(){this.elements={};this.handles={};this.autoIdSeed=0},getId:function(d,e){if(typeof d=="string"){return d}var h=d.id;if(!h&&e!==false){h="extdd-"+(++this.autoIdSeed);d.id=h}return h},register:function(m,l){l=l||{};if(typeof m=="string"){m=document.getElementById(m)}l.ddel=m;this.elements[this.getId(m)]=l;if(l.isHandle!==false){this.handles[l.ddel.id]=l}if(l.handles){var n=l.handles,h,j;for(h=0,j=n.length;h<j;h++){this.handles[this.getId(n[h])]=l}}},unregister:function(n){var l=this.getId(n,false),m=this.elements[l],o,h,j;if(m){delete this.elements[l];if(m.handles){o=m.handles;for(h=0,j=o.length;h<j;h++){delete this.handles[this.getId(o[h],false)]}}}},getHandle:function(c){if(typeof c!="string"){c=c.id}return this.handles[c]},getHandleFromEvent:function(c){var d=c.getTarget();return d?this.handles[d.id]:null},getTarget:function(c){if(typeof c!="string"){c=c.id}return this.elements[c]},getTargetFromEvent:function(c){var d=c.getTarget();return d?this.elements[d.id]||this.handles[d.id]:null}},1,0,0,0,0,0,[Ext.dd,"Registry"],0));(Ext.cmd.derive("Ext.dd.DropZone",Ext.dd.DropTarget,{getTargetFromEvent:function(c){return Ext.dd.Registry.getTargetFromEvent(c)},onNodeEnter:function(j,h,l,e){},onNodeOver:function(j,h,l,e){return this.dropAllowed},onNodeOut:function(j,h,l,e){},onNodeDrop:function(j,h,l,e){return false},onContainerOver:function(e,h,d){return this.dropNotAllowed},onContainerDrop:function(e,h,d){return false},notifyEnter:function(e,h,d){return this.dropNotAllowed},notifyOver:function(h,l,e){var j=this.getTargetFromEvent(l);if(!j){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,h,l,e);this.lastOverNode=null}return this.onContainerOver(h,l,e)}if(this.lastOverNode!=j){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,h,l,e)}this.onNodeEnter(j,h,l,e);this.lastOverNode=j}return this.onNodeOver(j,h,l,e)},notifyOut:function(e,h,d){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,e,h,d);this.lastOverNode=null}},notifyDrop:function(e,m,n){var o=this,l=o.getTargetFromEvent(m),j=l?o.onNodeDrop(l,e,m,n):o.onContainerDrop(e,m,n);if(o.lastOverNode){o.onNodeOut(o.lastOverNode,e,m,n);o.lastOverNode=null}return j},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}},0,0,0,0,0,0,[Ext.dd,"DropZone"],0));(Ext.cmd.derive("Ext.direct.Event",Ext.Base,{status:true,constructor:function(c){Ext.apply(this,c)},getName:function(){return this.name},getData:function(){return this.data}},1,0,0,0,["direct.event"],0,[Ext.direct,"Event"],0));(Ext.cmd.derive("Ext.direct.RemotingEvent",Ext.direct.Event,{getTransaction:function(){var c=this;return c.transaction||Ext.direct.Manager.getTransaction(c.tid)}},0,0,0,0,["direct.rpc"],0,[Ext.direct,"RemotingEvent"],0));(Ext.cmd.derive("Ext.direct.ExceptionEvent",Ext.direct.RemotingEvent,{status:false},0,0,0,0,["direct.exception"],0,[Ext.direct,"ExceptionEvent"],0));(Ext.cmd.derive("Ext.direct.JsonProvider",Ext.direct.Provider,{parseResponse:function(c){if(!Ext.isEmpty(c.responseText)){if(Ext.isObject(c.responseText)){return c.responseText}return Ext.decode(c.responseText)}return null},createEvents:function(e){var o=this,n=null,q=[],p,s,l;try{n=o.parseResponse(e)}catch(m){p=new Ext.direct.ExceptionEvent({data:m,xhr:e,code:Ext.direct.Manager.exceptions.PARSE,message:"Error parsing json response: \n\n "+m});return[p]}if(Ext.isArray(n)){for(s=0,l=n.length;s<l;++s){q.push(o.createEvent(n[s]))}}else{if(Ext.isObject(n)){q.push(o.createEvent(n))}}return q},createEvent:function(c){if(typeof c!=="object"||!("type" in c)){return new Ext.direct.ExceptionEvent({data:c,code:Ext.direct.Manager.exceptions.DATA,message:"Invalid data: event type is not specified"})}return Ext.create("direct."+c.type,c)}},0,0,0,0,["direct.jsonprovider"],0,[Ext.direct,"JsonProvider"],0));(Ext.cmd.derive("Ext.direct.PollingProvider",Ext.direct.JsonProvider,{interval:3000,constructor:function(d){var c=this;c.callParent(arguments);c.addEvents("beforepoll","poll")},isConnected:function(){return !!this.pollTask},connect:function(){var c=this,d=c.url;if(d&&!c.pollTask){c.pollTask=Ext.TaskManager.start({run:c.runPoll,interval:c.interval,scope:c});c.fireEvent("connect",c)}},disconnect:function(){var c=this;if(c.pollTask){Ext.TaskManager.stop(c.pollTask);delete c.pollTask;c.fireEvent("disconnect",c)}},runPoll:function(){var c=this,d=c.url;if(c.fireEvent("beforepoll",c)!==false){if(Ext.isFunction(d)){d(c.baseParams)}else{Ext.Ajax.request({url:d,callback:c.onData,scope:c,params:c.baseParams})}c.fireEvent("poll",c)}},onData:function(o,m,j){var n=this,p,l,q;if(m){q=n.createEvents(j);for(p=0,l=q.length;p<l;++p){n.fireEvent("data",n,q[p])}}else{q=new Ext.direct.ExceptionEvent({data:null,code:Ext.direct.Manager.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:j});n.fireEvent("data",n,q)}}},1,0,0,0,["direct.pollingprovider"],0,[Ext.direct,"PollingProvider"],0));(Ext.cmd.derive("Ext.direct.RemotingMethod",Ext.Base,{constructor:function(q){var p=this,m=Ext.isDefined(q.params)?q.params:q.len,j,l,o,n;p.name=q.name;p.formHandler=q.formHandler;if(Ext.isNumeric(m)){p.len=m;p.ordered=true}else{p.strict=q.strict!==undefined?q.strict:true;p.params={};l=m.length;for(o=0;o<l;o++){n=m[o];j=Ext.isObject(n)?n.name:n;p.params[j]=true}}},getArgs:function(n,j,m){var o=this,q=[],p,l;if(o.ordered){if(o.len>0){if(j){for(p=0,l=j.length;p<l;p++){q.push(n[j[p]])}}else{if(m){q.push(n)}}}}else{q.push(n)}return q},getCallData:function(s){var q=this,u=null,t=q.len,v=q.params,p=q.strict,o,n,w,m;if(q.ordered){o=s[t];n=s[t+1];m=s[t+2];if(t!==0){u=s.slice(0,t)}}else{u=Ext.apply({},s[0]);o=s[1];n=s[2];m=s[3];if(p){for(w in u){if(u.hasOwnProperty(w)&&!v[w]){delete u[w]}}}}return{data:u,callback:o,scope:n,options:m}}},1,0,0,0,0,0,[Ext.direct,"RemotingMethod"],0));(Ext.cmd.derive("Ext.direct.Transaction",Ext.Base,{alternateClassName:"Ext.Direct.Transaction",statics:{TRANSACTION_ID:0},constructor:function(d){var c=this;Ext.apply(c,d);c.id=c.tid=++c.self.TRANSACTION_ID;c.retryCount=0},send:function(){var c=this;c.provider.queueTransaction(c)},retry:function(){var c=this;c.retryCount++;c.send()},getProvider:function(){return this.provider}},1,0,0,0,["direct.transaction"],0,[Ext.direct,"Transaction",Ext.Direct,"Transaction"],0));(Ext.cmd.derive("Ext.direct.RemotingProvider",Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,constructor:function(d){var c=this;c.callParent(arguments);c.addEvents("beforecall","call","beforecallback");c.namespace=(Ext.isString(c.namespace))?Ext.ns(c.namespace):c.namespace||Ext.global;c.transactions=new Ext.util.MixedCollection();c.callBuffer=[]},getNamespace:function(h,m){var l,n,o,j;h=h||Ext.global;l=m.toString().split(".");for(o=0,j=l.length;o<j;o++){n=l[o];h=h[n];if(typeof h==="undefined"){return h}}return h},createNamespaces:function(h,m){var l,n;h=h||Ext.global;l=m.toString().split(".");for(var o=0,j=l.length;o<j;o++){n=l[o];h[n]=h[n]||{};h=h[n]}return h},initAPI:function(){var m=this,p=m.actions,s=m.namespace,q,l,t,o,n,u;for(q in p){if(p.hasOwnProperty(q)){if(m.disableNestedActions){l=s[q];if(!l){l=s[q]={}}}else{l=m.getNamespace(s,q);if(!l){l=m.createNamespaces(s,q)}}t=p[q];for(o=0,n=t.length;o<n;++o){u=new Ext.direct.RemotingMethod(t[o]);l[u.name]=m.createHandler(q,u)}}}},createHandler:function(n,l){var h=this,m=Array.prototype.slice,j;if(!l.formHandler){j=function(){h.configureRequest(n,l,m.call(arguments,0))}}else{j=function(){h.configureFormRequest(n,l,m.call(arguments,0))}}j.directCfg={action:n,method:l};return j},isConnected:function(){return !!this.connected},connect:function(){var c=this;if(c.url){c.initAPI();c.connected=true;c.fireEvent("connect",c)}},disconnect:function(){var c=this;if(c.connected){c.connected=false;c.fireEvent("disconnect",c)}},runCallback:function(n,q){var o=!!q.status,p=o?"success":"failure",m,j,l;if(n&&n.callback){m=n.callback;j=n.callbackOptions;l=typeof q.result!=="undefined"?q.result:q.data;if(Ext.isFunction(m)){m(l,q,o,j)}else{Ext.callback(m[p],m.scope,[l,q,o,j]);Ext.callback(m.callback,m.scope,[l,q,o,j])}}},onData:function(m,o,u){var q=this,t,s,n,w,v,p;if(o){n=q.createEvents(u);for(t=0,s=n.length;t<s;++t){w=n[t];v=q.getTransaction(w);q.fireEvent("data",q,w);if(v&&q.fireEvent("beforecallback",q,w,v)!==false){q.runCallback(v,w,true);Ext.direct.Manager.removeTransaction(v)}}}else{p=[].concat(m.transaction);for(t=0,s=p.length;t<s;++t){v=q.getTransaction(p[t]);if(v&&v.retryCount<q.maxRetries){v.retry()}else{w=new Ext.direct.ExceptionEvent({data:null,transaction:v,code:Ext.direct.Manager.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:u});q.fireEvent("data",q,w);if(v&&q.fireEvent("beforecallback",q,v)!==false){q.runCallback(v,w,false);Ext.direct.Manager.removeTransaction(v)}}}}},getTransaction:function(c){return c&&c.tid?Ext.direct.Manager.getTransaction(c.tid):null},configureRequest:function(t,x,q){var p=this,v,s,o,n,y,w,u;v=x.getCallData(q);s=v.data;o=v.callback;n=v.scope;y=v.options||{};u=Ext.apply({},{provider:p,args:q,action:t,method:x.name,data:s,callbackOptions:y,callback:n&&Ext.isFunction(o)?Ext.Function.bind(o,n):o});if(y.timeout){Ext.applyIf(u,{timeout:y.timeout})}w=new Ext.direct.Transaction(u);if(p.fireEvent("beforecall",p,w,x)!==false){Ext.direct.Manager.addTransaction(w);p.queueTransaction(w);p.fireEvent("call",p,w,x)}},getCallData:function(c){return{action:c.action,method:c.method,data:c.data,type:"rpc",tid:c.id}},sendRequest:function(o){var p=this,q,l,n,s=p.enableUrlEncode,t,m;q={url:p.url,callback:p.onData,scope:p,transaction:o,timeout:p.timeout};if(o.timeout){q.timeout=o.timeout}if(Ext.isArray(o)){l=[];for(t=0,m=o.length;t<m;++t){l.push(p.getCallData(o[t]))}}else{l=p.getCallData(o)}if(s){n={};n[Ext.isString(s)?s:"data"]=Ext.encode(l);q.params=n}else{q.jsonData=l}Ext.Ajax.request(q)},queueTransaction:function(h){var d=this,e=d.enableBuffer;if(h.form){d.sendFormRequest(h);return}if(e===false||typeof h.timeout!=="undefined"){d.sendRequest(h);return}d.callBuffer.push(h);if(e){if(!d.callTask){d.callTask=new Ext.util.DelayedTask(d.combineAndSend,d)}d.callTask.delay(Ext.isNumber(e)?e:10)}else{d.combineAndSend()}},combineAndSend:function(){var h=this,d=h.callBuffer,e=d.length;if(e>0){h.sendRequest(e==1?d[0]:d);h.callBuffer=[]}},configureFormRequest:function(s,w,p){var o=this,v=p[0],n=p[1],m=p[2],u,q,t;u=new Ext.direct.Transaction({provider:o,action:s,method:w.name,args:[v,n,m],callback:m&&Ext.isFunction(n)?Ext.Function.bind(n,m):n,isForm:true});if(o.fireEvent("beforecall",o,u,w)!==false){Ext.direct.Manager.addTransaction(u);q=String(v.getAttribute("enctype")).toLowerCase()=="multipart/form-data";t={extTID:u.id,extAction:s,extMethod:w.name,extType:"rpc",extUpload:String(q)};Ext.apply(u,{form:Ext.getDom(v),isUpload:q,params:n&&Ext.isObject(n.params)?Ext.apply(t,n.params):t});o.fireEvent("call",o,u,w);o.sendFormRequest(u)}},sendFormRequest:function(c){var d=this;Ext.Ajax.request({url:d.url,params:c.params,callback:d.onData,scope:d,form:c.form,isUpload:c.isUpload,transaction:c})}},1,0,0,0,["direct.remotingprovider"],0,[Ext.direct,"RemotingProvider"],0));(Ext.cmd.derive("Ext.dom.Layer",Ext.Element,{alternateClassName:"Ext.Layer",statics:{shims:[]},isLayer:true,localXYNames:{get:"getLocalXY",set:"setLocalXY"},constructor:function(t,l){t=t||{};var s=this,q=Ext.DomHelper,o=t.parentEl,p=o?Ext.getDom(o):document.body,n=t.hideMode,m=Ext.baseCSSPrefix+(t.fixed&&!(Ext.isIE6||Ext.isIEQuirks)?"fixed-layer":"layer");s.el=s;if(l){s.dom=Ext.getDom(l)}if(!s.dom){s.dom=q.append(p,t.dh||{tag:"div",cls:m})}else{s.addCls(m);if(!s.dom.parentNode){p.appendChild(s.dom)}}if(t.preventSync){s.preventSync=true}if(t.id){s.id=s.dom.id=t.id}else{s.id=Ext.id(s.dom)}Ext.Element.addToCache(s);if(t.cls){s.addCls(t.cls)}s.constrain=t.constrain!==false;if(n){s.setVisibilityMode(Ext.Element[n.toUpperCase()]);if(s.visibilityMode==Ext.Element.ASCLASS){s.visibilityCls=t.visibilityCls}}else{if(t.useDisplay){s.setVisibilityMode(Ext.Element.DISPLAY)}else{s.setVisibilityMode(Ext.Element.VISIBILITY)}}if(t.shadow){s.shadowOffset=t.shadowOffset||4;s.shadow=new Ext.Shadow({offset:s.shadowOffset,mode:t.shadow,fixed:t.fixed});s.disableShadow()}else{s.shadowOffset=0}s.useShim=t.shim!==false&&Ext.useShims;if(t.hidden===true){s.hide()}else{if(t.hidden===false){s.show()}}},getZIndex:function(){return parseInt((this.getShim()||this).getStyle("z-index"),10)},getShim:function(){var d=this,h,e;if(!d.useShim){return null}if(!d.shim){h=d.self.shims.shift();if(!h){h=d.createShim();h.enableDisplayMode("block");h.hide()}e=d.dom.parentNode;if(h.dom.parentNode!=e){e.insertBefore(h.dom,d.dom)}d.shim=h}return d.shim},hideShim:function(){var c=this;if(c.shim){c.shim.setDisplayed(false);c.self.shims.push(c.shim);delete c.shim}},disableShadow:function(){var c=this;if(c.shadow&&!c.shadowDisabled){c.shadowDisabled=true;c.shadow.hide();c.lastShadowOffset=c.shadowOffset;c.shadowOffset=0}},enableShadow:function(d){var c=this;if(c.shadow&&c.shadowDisabled){c.shadowDisabled=false;c.shadowOffset=c.lastShadowOffset;delete c.lastShadowOffset;if(d){c.sync(true)}}},sync:function(B){var w=this,q=w.shadow,x,z,C,A,h,u,v,s,y,t;if(w.preventSync){return}if(!w.updating&&w.isVisible()&&(q||w.useShim)){A=w.getShim();h=w[w.localXYNames.get]();u=h[0];v=h[1];s=w.dom.offsetWidth;y=w.dom.offsetHeight;if(q&&!w.shadowDisabled){if(B&&!q.isVisible()){q.show(w)}else{q.realign(u,v,s,y)}if(A){t=A.getStyle("z-index");if(t>w.zindex){w.shim.setStyle("z-index",w.zindex-2)}A.show();if(q.isVisible()){x=q.el.getXY();z=A.dom.style;C=q.el.getSize();if(Ext.supports.CSS3BoxShadow){C.height+=6;C.width+=4;x[0]-=2;x[1]-=4}z.left=(x[0])+"px";z.top=(x[1])+"px";z.width=(C.width)+"px";z.height=(C.height)+"px"}else{A.setSize(s,y);A[w.localXYNames.set](u,v)}}}else{if(A){t=A.getStyle("z-index");if(t>w.zindex){w.shim.setStyle("z-index",w.zindex-2)}A.show();A.setSize(s,y);A[w.localXYNames.set](u,v)}}}return w},remove:function(){this.hideUnders();this.callParent()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var q=Ext.Element.getViewWidth(),v=Ext.Element.getViewHeight(),h=Ext.getDoc().getScroll(),n=this.getXY(),p=n[0],s=n[1],w=this.shadowOffset,o=this.dom.offsetWidth+w,u=this.dom.offsetHeight+w,t=false;if((p+o)>q+h.left){p=q-o-w;t=true}if((s+u)>v+h.top){s=v-u-w;t=true}if(p<h.left){p=h.left;t=true}if(s<h.top){s=h.top;t=true}if(t){Ext.Layer.superclass.setXY.call(this,[p,s]);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},setVisible:function(o,j,p,m,n){var q=this,l;l=function(){if(o){q.sync(true)}if(m){m()}};if(!o){q.hideUnders(true)}q.callParent([o,j,p,m,n]);if(!j){l()}return q},beforeFx:function(){this.beforeAction();return this.callParent(arguments)},afterFx:function(){this.callParent(arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(c){this.callParent(arguments);return this.sync()},setTop:function(c){this.callParent(arguments);return this.sync()},setLeftTop:function(c,d){this.callParent(arguments);return this.sync()},setLocalX:function(){this.callParent(arguments);return this.sync()},setLocalXY:function(){this.callParent(arguments);return this.sync()},setLocalY:function(){this.callParent(arguments);return this.sync()},setXY:function(n,j,o,l,m){var h=this;l=h.createCB(l);h.fixDisplay();h.beforeAction();h.callParent([n,j,o,l,m]);if(!j){l()}return h},createCB:function(h){var e=this,d=e.shadow&&e.shadow.isVisible();return function(){e.constrainXY();e.sync(d);if(h){h()}}},setX:function(j,h,n,l,m){this.setXY([j,this.getY()],h,n,l,m);return this},setY:function(l,j,h,m,n){this.setXY([this.getX(),l],j,h,m,n);return this},setSize:function(l,q,h,o,m,n){var p=this;m=p.createCB(m);p.beforeAction();p.callParent([l,q,h,o,m,n]);if(!h){m()}return p},setWidth:function(j,h,n,l,m){var o=this;l=o.createCB(l);o.beforeAction();o.callParent([j,h,n,l,m]);if(!h){l()}return o},setHeight:function(h,j,n,l,m){var o=this;l=o.createCB(l);o.beforeAction();o.callParent([h,j,n,l,m]);if(!j){l()}return o},setBounds:function(n,o,u,l,t,s,m,q){var p=this;m=p.createCB(m);p.beforeAction();if(!t){Ext.Layer.superclass.setXY.call(p,[n,o]);Ext.Layer.superclass.setSize.call(p,u,l);m()}else{p.callParent([n,o,u,l,t,s,m,q])}return p},setZIndex:function(d){var c=this;c.zindex=d;if(c.getShim()){c.shim.setStyle("z-index",d++)}if(c.shadow){c.shadow.setZIndex(d++)}return c.setStyle("z-index",d)},onOpacitySet:function(d){var c=this.shadow;if(c){c.setOpacity(d)}}},1,0,0,0,0,0,[Ext.dom,"Layer",Ext,"Layer"],0));(Ext.cmd.derive("Ext.draw.Matrix",Ext.Base,{constructor:function(n,o,a,c,d,e){if(n!=null){this.matrix=[[n,a,d],[o,c,e],[0,0,1]]}else{this.matrix=[[1,0,0],[0,1,0],[0,0,1]]}},add:function(B,c,u,w,y,z){var e=this,A=[[],[],[]],C=[[B,u,y],[c,w,z],[0,0,1]],a,d,v,x;for(a=0;a<3;a++){for(d=0;d<3;d++){x=0;for(v=0;v<3;v++){x+=e.matrix[a][v]*C[v][d]}A[a][d]=x}}e.matrix=A},prepend:function(B,c,u,w,y,z){var e=this,A=[[],[],[]],C=[[B,u,y],[c,w,z],[0,0,1]],a,d,v,x;for(a=0;a<3;a++){for(d=0;d<3;d++){x=0;for(v=0;v<3;v++){x+=C[a][v]*e.matrix[v][d]}A[a][d]=x}}e.matrix=A},invert:function(){var d=this.matrix,e=d[0][0],p=d[1][0],s=d[0][1],t=d[1][1],a=d[0][2],c=d[1][2],q=e*t-p*s;return new Ext.draw.Matrix(t/q,-p/q,-s/q,e/q,(s*c-t*a)/q,(p*a-e*c)/q)},clone:function(){var e=this.matrix,o=e[0][0],p=e[1][0],q=e[0][1],a=e[1][1],c=e[0][2],d=e[1][2];return new Ext.draw.Matrix(o,p,q,a,c,d)},translate:function(d,c){this.prepend(1,0,0,1,d,c)},scale:function(h,l,j,m){var n=this;if(l==null){l=h}n.add(h,0,0,l,j*(1-h),m*(1-l))},rotate:function(o,a,j){o=Ext.draw.Draw.rad(o);var m=this,l=+Math.cos(o).toFixed(9),n=+Math.sin(o).toFixed(9);m.add(l,n,-n,l,a-l*a+n*j,-(n*a)+j-l*j)},x:function(e,h){var d=this.matrix;return e*d[0][0]+h*d[0][1]+d[0][2]},y:function(e,h){var d=this.matrix;return e*d[1][0]+h*d[1][1]+d[1][2]},get:function(c,d){return +this.matrix[c][d].toFixed(4)},toString:function(){var c=this;return[c.get(0,0),c.get(0,1),c.get(1,0),c.get(1,1),0,0].join()},toSvg:function(){var c=this;return"matrix("+[c.get(0,0),c.get(1,0),c.get(0,1),c.get(1,1),c.get(0,2),c.get(1,2)].join()+")"},toFilter:function(d,e){var h=this;d=d||0;e=e||0;return"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', filterType='bilinear', M11="+h.get(0,0)+", M12="+h.get(0,1)+", M21="+h.get(1,0)+", M22="+h.get(1,1)+", Dx="+(h.get(0,2)+d)+", Dy="+(h.get(1,2)+e)+")"},offset:function(){var c=this.matrix;return[(c[0][2]||0).toFixed(4),(c[1][2]||0).toFixed(4)]},split:function(){function m(a){return a[0]*a[0]+a[1]*a[1]}function h(c){var a=Math.sqrt(m(c));c[0]/=a;c[1]/=a}var j=this.matrix,n={translateX:j[0][2],translateY:j[1][2]},l;l=[[j[0][0],j[0][1]],[j[1][1],j[1][1]]];n.scaleX=Math.sqrt(m(l[0]));h(l[0]);n.shear=l[0][0]*l[1][0]+l[0][1]*l[1][1];l[1]=[l[1][0]-l[0][0]*n.shear,l[1][1]-l[0][1]*n.shear];n.scaleY=Math.sqrt(m(l[1]));h(l[1]);n.shear/=n.scaleY;n.rotate=Math.asin(-l[0][1]);n.isSimple=!+n.shear.toFixed(9)&&(n.scaleX.toFixed(9)==n.scaleY.toFixed(9)||!n.rotate);return n}},3,0,0,0,0,0,[Ext.draw,"Matrix"],0));(Ext.cmd.derive("Ext.draw.SpriteDD",Ext.dd.DragSource,{constructor:function(e,h){var j=this,l=e.el;j.sprite=e;j.el=l;j.dragData={el:l,sprite:e};j.callParent([l,h]);j.sprite.setStyle("cursor","move")},showFrame:Ext.emptyFn,createFrame:Ext.emptyFn,getDragEl:function(c){return this.el},getRegion:function(){var x=this,A=x.el,v,B,C,l,t,E,D,w,z,F,e;e=x.sprite;F=e.getBBox();try{v=Ext.Element.getXY(A)}catch(y){}if(!v){return null}B=v[0];C=B+F.width;l=v[1];t=l+F.height;return new Ext.util.Region(l,C,t,B)},startDrag:function(e,j){var l=this,h=l.sprite.attr;l.prev=l.sprite.surface.transformToViewBox(e,j)},onDrag:function(m){var n=m.getXY(),o=this,p=o.sprite,l=p.attr,q,e;n=o.sprite.surface.transformToViewBox(n[0],n[1]);q=n[0]-o.prev[0];e=n[1]-o.prev[1];p.setAttributes({translate:{x:l.translation.x+q,y:l.translation.y+e}},true);o.prev=n},setDragElPos:function(){return false}},1,0,0,0,0,0,[Ext.draw,"SpriteDD"],0));(Ext.cmd.derive("Ext.draw.Sprite",Ext.Base,{dirty:false,dirtyHidden:false,dirtyTransform:false,dirtyPath:true,dirtyFont:true,zIndexDirty:true,isSprite:true,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],constructor:function(d){var c=this;d=Ext.merge({},d||{});c.id=Ext.id(null,"ext-sprite-");c.transformations=[];Ext.copyTo(this,d,"surface,group,type,draggable");c.bbox={};c.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}};delete d.surface;delete d.group;delete d.type;delete d.draggable;c.setAttributes(d);c.addEvents("beforedestroy","destroy","render","mousedown","mouseup","mouseover","mouseout","mousemove","click");c.mixins.observable.constructor.apply(this,arguments)},initDraggable:function(){var c=this;if(!c.el){c.surface.createSpriteElement(c)}c.dd=new Ext.draw.SpriteDD(c,Ext.isBoolean(c.draggable)?null:c.draggable);c.on("beforedestroy",c.dd.destroy,c.dd)},setAttributes:function(E,B){var w=this,G=w.fontProperties,z=G.length,H=w.pathProperties,I=H.length,y=!!w.surface,O=y&&w.surface.customAttributes||{},M=w.attr,N=false,D,A,F,K,x,C,v,J;E=Ext.apply({},E);for(D in O){if(E.hasOwnProperty(D)&&typeof O[D]=="function"){Ext.apply(E,O[D].apply(w,[].concat(E[D])))}}if(!!E.hidden!==!!M.hidden){w.dirtyHidden=true}for(A=0;A<I;A++){D=H[A];if(D in E&&E[D]!==M[D]){w.dirtyPath=true;N=true;break}}if("zIndex" in E){w.zIndexDirty=true}if("text" in E){w.dirtyFont=true;N=true;E.text=w.transformText(E.text)}for(A=0;A<z;A++){D=G[A];if(D in E&&E[D]!==M[D]){w.dirtyFont=true;N=true;break}}F=E.translation||E.translate;delete E.translate;delete E.translation;K=M.translation;if(F){if(("x" in F&&F.x!==K.x)||("y" in F&&F.y!==K.y)){w.dirtyTransform=true;K.x=F.x;K.y=F.y}}x=E.rotation||E.rotate;C=M.rotation;delete E.rotate;delete E.rotation;if(x){if(("x" in x&&x.x!==C.x)||("y" in x&&x.y!==C.y)||("degrees" in x&&x.degrees!==C.degrees)){w.dirtyTransform=true;C.x=x.x;C.y=x.y;C.degrees=x.degrees}}v=E.scaling||E.scale;J=M.scaling;delete E.scale;delete E.scaling;if(v){if(("x" in v&&v.x!==J.x)||("y" in v&&v.y!==J.y)||("cx" in v&&v.cx!==J.cx)||("cy" in v&&v.cy!==J.cy)){w.dirtyTransform=true;J.x=v.x;J.y=v.y;J.cx=v.cx;J.cy=v.cy}}if(!w.dirtyTransform&&N){if(M.scaling.x===null||M.scaling.y===null||M.rotation.y===null||M.rotation.y===null){w.dirtyTransform=true}}Ext.apply(M,E);w.dirty=true;if(B===true&&y){w.redraw()}return this},transformText:Ext.identityFn,getBBox:function(){return this.surface.getBBox(this)},setText:function(c){this.attr.text=c;this.surface.applyAttrs(this);return this},hide:function(c){this.setAttributes({hidden:true},c);return this},show:function(c){this.setAttributes({hidden:false},c);return this},remove:function(){if(this.surface){this.surface.remove(this);return true}return false},onRemove:function(){this.surface.onRemove(this)},destroy:function(){var c=this;if(c.fireEvent("beforedestroy",c)!==false){c.remove();c.surface.onDestroy(c);c.clearListeners();c.fireEvent("destroy")}},redraw:function(){var l=this,j=!l.el||l.dirty,e=l.surface,h;e.renderItem(l);if(j){h=e.owner;if(!l.isBackground&&h&&(h.viewBox||h.autoSize)){h.configureSurfaceSize()}}return this},setStyle:function(){this.el.setStyle.apply(this.el,arguments);return this},addCls:function(c){this.surface.addCls(this,c);return this},removeCls:function(c){this.surface.removeCls(this,c);return this}},1,0,0,0,0,[["observable",Ext.util.Observable],["animate",Ext.util.Animate]],[Ext.draw,"Sprite"],0));(Ext.cmd.derive("Ext.draw.Text",Ext.draw.Component,{text:"",focusable:false,viewBox:false,autoSize:true,baseCls:Ext.baseCSSPrefix+"surface "+Ext.baseCSSPrefix+"draw-text",initComponent:function(){var c=this;c.textConfig=Ext.apply({type:"text",text:c.text,rotate:{degrees:c.degrees||0}},c.textStyle);Ext.apply(c.textConfig,c.getStyles(c.styleSelectors||c.styleSelector));c.initialConfig.items=[c.textConfig];c.callParent(arguments)},getStyles:function(p){p=Ext.Array.from(p);var q=0,j=p.length,n,o,m,l={};for(;q<j;q++){n=Ext.util.CSS.getRule(p[q]);if(n){o=n.style;if(o){Ext.apply(l,{"font-family":o.fontFamily,"font-weight":o.fontWeight,"line-height":o.lineHeight,"font-size":o.fontSize,fill:o.color})}}}return l},setAngle:function(j){var l=this,h,e;if(l.rendered){h=l.surface;e=h.items.items[0];l.degrees=j;e.setAttributes({rotate:{degrees:j}},true);if(l.autoSize||l.viewBox){l.updateLayout()}}else{l.degrees=j}},setText:function(j){var l=this,h,e;if(l.rendered){h=l.surface;e=h.items.items[0];l.text=j||"";h.remove(e);l.textConfig.type="text";l.textConfig.text=l.text;e=h.add(l.textConfig);e.setAttributes({rotate:{degrees:l.degrees}},true);if(l.autoSize||l.viewBox){l.updateLayout()}}else{l.on({render:function(){l.setText(j)},single:true})}}},0,["text"],["component","box","draw","text"],{component:true,box:true,draw:true,text:true},["widget.text"],0,[Ext.draw,"Text"],0));(Ext.cmd.derive("Ext.draw.engine.ImageExporter",Ext.Base,{singleton:true,defaultUrl:"http://svg.sencha.io",supportedTypes:["image/png","image/jpeg"],widthParam:"width",heightParam:"height",typeParam:"type",svgParam:"svg",formCls:Ext.baseCSSPrefix+"hide-display",generate:function(j,h){h=h||{};var l=this,n=h.type,m;if(Ext.Array.indexOf(l.supportedTypes,n)===-1){return false}m=Ext.getBody().createChild({tag:"form",method:"POST",action:h.url||l.defaultUrl,cls:l.formCls,children:[{tag:"input",type:"hidden",name:h.widthParam||l.widthParam,value:h.width||j.width},{tag:"input",type:"hidden",name:h.heightParam||l.heightParam,value:h.height||j.height},{tag:"input",type:"hidden",name:h.typeParam||l.typeParam,value:n},{tag:"input",type:"hidden",name:h.svgParam||l.svgParam}]});m.last(null,true).value=Ext.draw.engine.SvgExporter.generate(j);m.dom.submit();m.remove();return true}},0,0,0,0,0,0,[Ext.draw.engine,"ImageExporter"],0));(Ext.cmd.derive("Ext.draw.engine.Svg",Ext.draw.Surface,{engine:"Svg",trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,xlink:"http://www.w3.org/1999/xlink",translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",path:"d",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},parsers:{},fontRe:/^font-?/,minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start","font-family":null,"font-size":null,"font-weight":null,"font-style":null,fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},createSvgElement:function(j,h){var l=this.domRef.createElementNS("http://www.w3.org/2000/svg",j),e;if(h){for(e in h){l.setAttribute(e,String(h[e]))}}return l},createSpriteElement:function(d){var c=this.createSvgElement(d.type);c.id=d.id;if(c.style){c.style.webkitTapHighlightColor="rgba(0,0,0,0)"}d.el=Ext.get(c);this.applyZIndex(d);d.matrix=new Ext.draw.Matrix();d.bbox={plain:0,transform:0};this.applyAttrs(d);this.applyTransformations(d);d.fireEvent("render",d);return c},getBBoxText:function(n){var m={},p,e,u,s,o,t;if(n&&n.el){t=n.el.dom;try{m=t.getBBox();return m}catch(q){}m={x:m.x,y:Infinity,width:0,height:0};o=t.getNumberOfChars();for(s=0;s<o;s++){p=t.getExtentOfChar(s);m.y=Math.min(p.y,m.y);e=p.y+p.height-m.y;m.height=Math.max(m.height,e);u=p.x+p.width-m.x;m.width=Math.max(m.width,u)}return m}},hide:function(){Ext.get(this.el).hide()},show:function(){Ext.get(this.el).show()},hidePrim:function(c){this.addCls(c,Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(c){this.removeCls(c,Ext.baseCSSPrefix+"hide-visibility")},getDefs:function(){return this._defs||(this._defs=this.createSvgElement("defs"))},transform:function(l,u){var n=this,m=new Ext.draw.Matrix(),p=l.transformations,q=p.length,s=0,t,o;for(;s<q;s++){t=p[s];o=t.type;if(o=="translate"){m.translate(t.x,t.y)}else{if(o=="rotate"){m.rotate(t.degrees,t.x,t.y)}else{if(o=="scale"){m.scale(t.x,t.y,t.centerX,t.centerY)}}}}l.matrix=m;if(!u){l.el.set({transform:m.toSvg()})}},setSize:function(l,h){var j=this,e=j.el;l=+l||j.width;h=+h||j.height;j.width=l;j.height=h;e.setSize(l,h);e.set({width:l,height:h});j.callParent([l,h])},getRegion:function(){var l=this.el.getXY(),n=this.bgRect.getXY(),h=Math.max,j=h(l[0],n[0]),m=h(l[1],n[1]);return{left:j,top:m,right:j+this.width,bottom:m+this.height}},onRemove:function(c){if(c.el){c.el.destroy();delete c.el}this.callParent(arguments)},setViewBox:function(e,j,l,h){if(isFinite(e)&&isFinite(j)&&isFinite(l)&&isFinite(h)){this.callParent(arguments);this.el.dom.setAttribute("viewBox",[e,j,l,h].join(" "))}},render:function(q){var o=this,j,p,l,n,m;if(!o.el){j={xmlns:"http://www.w3.org/2000/svg",version:1.1,width:o.width||0,height:o.height||0};if(o.forceLtr){j.direction="ltr"}p=o.createSvgElement("svg",j);l=o.getDefs();n=o.createSvgElement("rect",{width:"100%",height:"100%",fill:"#000",stroke:"none",opacity:0});if(Ext.isSafari3){m=o.createSvgElement("rect",{x:-10,y:-10,width:"110%",height:"110%",fill:"none",stroke:"#000"})}p.appendChild(l);if(Ext.isSafari3){p.appendChild(m)}p.appendChild(n);q.appendChild(p);o.el=Ext.get(p);o.bgRect=Ext.get(n);if(Ext.isSafari3){o.webkitRect=Ext.get(m);o.webkitRect.hide()}o.el.on({scope:o,mouseup:o.onMouseUp,mousedown:o.onMouseDown,mouseover:o.onMouseOver,mouseout:o.onMouseOut,mousemove:o.onMouseMove,mouseenter:o.onMouseEnter,mouseleave:o.onMouseLeave,click:o.onClick,dblclick:o.onDblClick})}o.renderAll()},onMouseEnter:function(c){if(this.el.parent().getRegion().contains(c.getPoint())){this.fireEvent("mouseenter",c)}},onMouseLeave:function(c){if(!this.el.parent().getRegion().contains(c.getPoint())){this.fireEvent("mouseleave",c)}},processEvent:function(e,j){var l=j.getTarget(),h=this.surface,m;this.fireEvent(e,j);if(l.nodeName=="tspan"&&l.parentNode){l=l.parentNode}m=this.items.get(l.id);if(m){m.fireEvent(e,m,j)}},tuneText:function(s,q){var A=s.el.dom,z=[],o,u,p,x,w,y,v,t;if(q.hasOwnProperty("text")){p=s.tspans&&Ext.Array.map(s.tspans,function(a){return a.textContent}).join("");if(!s.tspans||q.text!=p){z=this.setText(s,q.text);s.tspans=z}else{z=s.tspans||[]}}if(z.length){o=this.getBBoxText(s).height;t=s.el.dom.getAttribute("x");for(x=0,w=z.length;x<w;x++){v=(Ext.isFF3_0||Ext.isFF3_5)?2:4;z[x].setAttribute("x",t);z[x].setAttribute("dy",x?o*1.2:o/v)}s.dirty=true}},setText:function(p,v){var s=this,y=p.el.dom,x=[],n,q,o,u,t,w;while(y.firstChild){y.removeChild(y.firstChild)}w=String(v).split("\n");for(u=0,t=w.length;u<t;u++){o=w[u];if(o){q=s.createSvgElement("tspan");q.appendChild(document.createTextNode(Ext.htmlDecode(o)));y.appendChild(q);x[u]=q}}return x},renderAll:function(){this.items.each(this.renderItem,this)},renderItem:function(c){if(!this.el){return}if(!c.el){this.createSpriteElement(c)}if(c.zIndexDirty){this.applyZIndex(c)}if(c.dirty){this.applyAttrs(c);if(c.dirtyTransform){this.applyTransformations(c)}}},redraw:function(c){c.dirty=c.zIndexDirty=true;this.renderItem(c)},applyAttrs:function(G){var z=this,P=G.el,K=G.group,F=G.attr,M=z.parsers,O=z.gradientsMap||{},A=Ext.isSafari&&!Ext.isStrict,N=z.fontRe,B,D,J,E,H,x,C,w,Q,I,y;if(K){B=[].concat(K);J=B.length;for(D=0;D<J;D++){K=B[D];z.getGroup(K).add(G)}delete G.group}E=z.scrubAttrs(G)||{};G.bbox.plain=0;G.bbox.transform=0;if(G.type=="circle"||G.type=="ellipse"){E.cx=E.cx||E.x;E.cy=E.cy||E.y}else{if(G.type=="rect"){E.rx=E.ry=E.r}else{if(G.type=="path"&&E.d){E.d=Ext.draw.Draw.pathToString(Ext.draw.Draw.pathToAbsolute(E.d))}}}G.dirtyPath=false;if(E["clip-rect"]){z.setClip(G,E);delete E["clip-rect"]}if(G.type=="text"&&E.font&&G.dirtyFont){P.set({style:"font: "+E.font})}if(G.type=="image"){P.dom.setAttributeNS(z.xlink,"href",E.src)}Ext.applyIf(E,z.minDefaults[G.type]);if(G.dirtyHidden){(F.hidden)?z.hidePrim(G):z.showPrim(G);G.dirtyHidden=false}for(x in E){y=E[x];if(E.hasOwnProperty(x)&&y!=null){if(A&&("color|stroke|fill".indexOf(x)>-1)&&(y in O)){y=O[y]}if(x=="hidden"&&G.type=="text"){continue}if(x in M){P.dom.setAttribute(x,M[x](y,G,z))}else{P.dom.setAttribute(x,y);if(N.test(x)){I=I||{};I[x]=y;P.setStyle(x,y)}}}}if(G.type=="text"){z.tuneText(G,E)}G.dirtyFont=false;C=F.style;if(C){P.setStyle(C)}G.dirty=false;if(Ext.isSafari3){z.webkitRect.show();setTimeout(function(){z.webkitRect.hide()})}},setClip:function(h,l){var m=this,n=l["clip-rect"],j,o;if(n){if(h.clip){h.clip.parentNode.parentNode.removeChild(h.clip.parentNode)}j=m.createSvgElement("clipPath");o=m.createSvgElement("rect");j.id=Ext.id(null,"ext-clip-");o.setAttribute("x",n.x);o.setAttribute("y",n.y);o.setAttribute("width",n.width);o.setAttribute("height",n.height);j.appendChild(o);m.getDefs().appendChild(j);h.el.dom.setAttribute("clip-path","url(#"+j.id+")");h.clip=o}},applyZIndex:function(n){var l=this,h=l.items,j=h.indexOf(n),m=n.el,o;if(l.el.dom.childNodes[j+2]!==m.dom){if(j>0){do{o=h.getAt(--j).el}while(!o&&j>0)}m.insertAfter(o||l.bgRect)}n.zIndexDirty=false},createItem:function(d){var c=new Ext.draw.Sprite(d);c.surface=this;return c},addGradient:function(p){p=Ext.draw.Draw.parseGradient(p);var s=this,t=p.stops.length,w=p.vector,m=Ext.isSafari&&!Ext.isStrict,o,q,n,u,v;v=s.gradientsMap||{};if(!m){if(p.type=="linear"){o=s.createSvgElement("linearGradient");o.setAttribute("x1",w[0]);o.setAttribute("y1",w[1]);o.setAttribute("x2",w[2]);o.setAttribute("y2",w[3])}else{o=s.createSvgElement("radialGradient");o.setAttribute("cx",p.centerX);o.setAttribute("cy",p.centerY);o.setAttribute("r",p.radius);if(Ext.isNumber(p.focalX)&&Ext.isNumber(p.focalY)){o.setAttribute("fx",p.focalX);o.setAttribute("fy",p.focalY)}}o.id=p.id;s.getDefs().appendChild(o);for(u=0;u<t;u++){q=p.stops[u];n=s.createSvgElement("stop");n.setAttribute("offset",q.offset+"%");n.setAttribute("stop-color",q.color);n.setAttribute("stop-opacity",q.opacity);o.appendChild(n)}}else{v["url(#"+p.id+")"]=p.stops[0].color}s.gradientsMap=v},hasCls:function(d,c){return c&&(" "+(d.el.dom.getAttribute("class")||"")+" ").indexOf(" "+c+" ")!=-1},addCls:function(q,o){var p=q.el,s,m,t,l=[],n=p.getAttribute("class")||"";if(!Ext.isArray(o)){if(typeof o=="string"&&!this.hasCls(q,o)){p.set({"class":n+" "+o})}}else{for(s=0,m=o.length;s<m;s++){t=o[s];if(typeof t=="string"&&(" "+n+" ").indexOf(" "+t+" ")==-1){l.push(t)}}if(l.length){p.set({"class":" "+l.join(" ")})}}},removeCls:function(n,q){var p=this,v=n.el,t=v.getAttribute("class")||"",u,o,s,m,w;if(!Ext.isArray(q)){q=[q]}if(t){w=t.replace(p.trimRe," ").split(p.spacesRe);for(u=0,s=q.length;u<s;u++){m=q[u];if(typeof m=="string"){m=m.replace(p.trimRe,"");o=Ext.Array.indexOf(w,m);if(o!=-1){Ext.Array.erase(w,o,1)}}}v.set({"class":w.join(" ")})}},destroy:function(){var c=this;c.callParent();if(c.el){c.el.remove()}if(c._defs){Ext.get(c._defs).destroy()}if(c.bgRect){Ext.get(c.bgRect).destroy()}if(c.webkitRect){Ext.get(c.webkitRect).destroy()}delete c.el}},0,0,0,0,0,0,[Ext.draw.engine,"Svg"],0));(Ext.cmd.derive("Ext.draw.engine.SvgExporter",Ext.Base,function(){var B=/,/g,A=/(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)\s('*.*'*)/,u=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,w=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,([\d\.]+)\)/g,x,v,y,q,p=function(a){x=a;v=x.length;y=x.width;q=x.height},t={path:function(e){var l=e.attr,a=l.path,h="",d,c,j;if(Ext.isArray(a[0])){j=a.length;for(c=0;c<j;c++){h+=a[c].join(" ")}}else{if(Ext.isArray(a)){h=a.join(" ")}else{h=a.replace(B," ")}}d=z({d:h,fill:l.fill||"none",stroke:l.stroke,"fill-opacity":l.opacity,"stroke-width":l["stroke-width"],"stroke-opacity":l["stroke-opacity"],"z-index":l.zIndex,transform:e.matrix.toSvg()});return"<path "+d+"/>"},text:function(j){var n=j.attr,a=A.exec(n.font),e=(a&&a[1])||"12",c=(a&&a[3])||"Arial",h=n.text,l=(Ext.isFF3_0||Ext.isFF3_5)?2:4,d="",m;j.getBBox();d+='<tspan x="'+(n.x||"")+'" dy="';d+=(e/l)+'">';d+=Ext.htmlEncode(h)+"</tspan>";m=z({x:n.x,y:n.y,"font-size":e,"font-family":c,"font-weight":n["font-weight"],"text-anchor":n["text-anchor"],fill:n.fill||"#000","fill-opacity":n.opacity,transform:j.matrix.toSvg()});return"<text "+m+">"+d+"</text>"},rect:function(c){var d=c.attr,a=z({x:d.x,y:d.y,rx:d.rx,ry:d.ry,width:d.width,height:d.height,fill:d.fill||"none","fill-opacity":d.opacity,stroke:d.stroke,"stroke-opacity":d["stroke-opacity"],"stroke-width":d["stroke-width"],transform:c.matrix&&c.matrix.toSvg()});return"<rect "+a+"/>"},circle:function(c){var d=c.attr,a=z({cx:d.x,cy:d.y,r:d.radius,fill:d.translation.fill||d.fill||"none","fill-opacity":d.opacity,stroke:d.stroke,"stroke-opacity":d["stroke-opacity"],"stroke-width":d["stroke-width"],transform:c.matrix.toSvg()});return"<circle "+a+" />"},image:function(c){var d=c.attr,a=z({x:d.x-(d.width/2>>0),y:d.y-(d.height/2>>0),width:d.width,height:d.height,"xlink:href":d.src,transform:c.matrix.toSvg()});return"<image "+a+" />"}},C=function(){var a='<?xml version="1.0" standalone="yes"?>';a+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';return a},s=function(){var l='<svg width="'+y+'px" height="'+q+'px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',W="",j,o,n,U,m,c,X,h,O,d,T,Y,a,M,N,S,e,Q,P,R;n=x.items.items;o=n.length;m=function(K){var D=K.childNodes,G=D.length,H=0,J,I,ab="",aa,E,Z,F;for(;H<G;H++){aa=D[H];E=aa.attributes;Z=aa.tagName;ab+="<"+Z;for(I=0,J=E.length;I<J;I++){F=E.item(I);ab+=" "+F.name+'="'+F.value+'"'}ab+=">";if(aa.childNodes.length>0){ab+=m(aa)}ab+="</"+Z+">"}return ab};if(x.getDefs){W=m(x.getDefs())}else{h=x.gradientsColl;if(h){O=h.keys;d=h.items;T=0;Y=O.length}for(;T<Y;T++){a=O[T];M=d[T];U=x.gradientsColl.getByKey(a);W+='<linearGradient id="'+a+'" x1="0" y1="0" x2="1" y2="1">';var V=U.colors.replace(u,"rgb($1|$2|$3)");V=V.replace(w,"rgba($1|$2|$3|$4)");c=V.split(",");for(N=0,e=c.length;N<e;N++){X=c[N].split(" ");V=Ext.draw.Color.fromString(X[1].replace(/\|/g,","));W+='<stop offset="'+X[0]+'" stop-color="'+V.toString()+'" stop-opacity="1"></stop>'}W+="</linearGradient>"}}l+="<defs>"+W+"</defs>";l+=t.rect({attr:{width:"100%",height:"100%",fill:"#fff",stroke:"none",opacity:"0"}});Q=new Array(o);for(N=0;N<o;N++){Q[N]=N}Q.sort(function(D,E){P=n[D].attr.zIndex||0;R=n[E].attr.zIndex||0;if(P==R){return D-E}return P-R});for(N=0;N<o;N++){j=n[Q[N]];if(!j.attr.hidden){l+=t[j.type](j)}}l+="</svg>";return l},z=function(a){var c="",d;for(d in a){if(a.hasOwnProperty(d)&&a[d]!=null){c+=d+'="'+a[d]+'" '}}return c};return{singleton:true,generate:function(c,a){a=a||{};p(c);return C()+s()}}},0,0,0,0,0,0,[Ext.draw.engine,"SvgExporter"],0));(Ext.cmd.derive("Ext.draw.engine.Vml",Ext.draw.Surface,{engine:"Vml",map:{M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bitesRe:/([clmz]),?([^clmz]*)/gi,valRe:/-?[^,\s\-]+/g,fillUrlRe:/^url\(\s*['"]?([^\)]+?)['"]?\s*\)$/i,pathlike:/^(path|rect)$/,NonVmlPathRe:/[ahqstv]/ig,partialPathRe:/[clmz]/g,fontFamilyRe:/^['"]+|['"]+$/g,baseVmlCls:Ext.baseCSSPrefix+"vml-base",vmlGroupCls:Ext.baseCSSPrefix+"vml-group",spriteCls:Ext.baseCSSPrefix+"vml-sprite",measureSpanCls:Ext.baseCSSPrefix+"vml-measure-span",zoom:21600,coordsize:1000,coordorigin:"0 0",zIndexShift:0,orderSpritesByZIndex:false,path2vml:function(H){var v=this,G=v.NonVmlPathRe,E=v.map,B=v.valRe,I=v.zoom,C=v.bitesRe,A=Ext.Function.bind(Ext.draw.Draw.pathToAbsolute,Ext.draw.Draw),w,p,D,F,y,j,z,x;if(String(H).match(G)){A=Ext.Function.bind(Ext.draw.Draw.path2curve,Ext.draw.Draw)}else{if(!String(H).match(v.partialPathRe)){w=String(H).replace(C,function(d,a,l){var c=[],e=a.toLowerCase()=="m",h=E[a];l.replace(B,function(m){if(e&&c.length===2){h+=c+E[a=="m"?"l":"L"];c=[]}c.push(Math.round(m*I))});return h+c});return w}}p=A(H);w=[];for(y=0,j=p.length;y<j;y++){D=p[y];F=p[y][0].toLowerCase();if(F=="z"){F="x"}for(z=1,x=D.length;z<x;z++){F+=Math.round(D[z]*v.zoom)+(z!=x-1?",":"")}w.push(F)}return w.join(" ")},translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start",font:'10px "Arial"',fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},onMouseEnter:function(c){this.fireEvent("mouseenter",c)},onMouseLeave:function(c){this.fireEvent("mouseleave",c)},processEvent:function(e,j){var l=j.getTarget(),h=this.surface,m;this.fireEvent(e,j);m=this.items.get(l.id);if(m){m.fireEvent(e,m,j)}},createSpriteElement:function(s){var u=this,v=s.attr,t=s.type,p=u.zoom,x=s.vml||(s.vml={}),o=Math.round,w=(t==="image")?u.createNode("image"):u.createNode("shape"),n,q,y;w.coordsize=p+" "+p;w.coordorigin=v.coordorigin||"0 0";Ext.get(w).addCls(u.spriteCls);if(t=="text"){x.path=n=u.createNode("path");n.textpathok=true;x.textpath=y=u.createNode("textpath");y.on=true;w.appendChild(y);w.appendChild(n)}w.id=s.id;s.el=Ext.get(w);s.el.setStyle("zIndex",-u.zIndexShift);u.el.appendChild(w);if(t!=="image"){q=u.createNode("skew");q.on=true;w.appendChild(q);s.skew=q}s.matrix=new Ext.draw.Matrix();s.bbox={plain:null,transform:null};this.applyAttrs(s);this.applyTransformations(s);s.fireEvent("render",s);return s.el},getBBoxText:function(c){var d=c.vml;return{x:d.X+(d.bbx||0)-d.W/2,y:d.Y-d.H/2,width:d.W,height:d.H}},applyAttrs:function(D){var x=this,M=D.vml,G=D.group,O=D.attr,N=D.el,B=N.dom,A,v,y,C,F,z,E,w,J,K,H,I;if(G){y=[].concat(G);F=y.length;for(C=0;C<F;C++){G=y[C];x.getGroup(G).add(D)}delete D.group}z=x.scrubAttrs(D)||{};if(D.zIndexDirty){x.setZIndex(D)}Ext.applyIf(z,x.minDefaults[D.type]);if(D.type=="image"){Ext.apply(D.attr,{x:z.x,y:z.y,width:z.width,height:z.height});N.setStyle({width:z.width+"px",height:z.height+"px"});B.src=z.src}if(B.href){B.href=z.href}if(B.title){B.title=z.title}if(B.target){B.target=z.target}if(B.cursor){B.cursor=z.cursor}if(D.dirtyHidden){(z.hidden)?x.hidePrim(D):x.showPrim(D);D.dirtyHidden=false}if(D.dirtyPath){if(D.type=="circle"||D.type=="ellipse"){J=z.x;K=z.y;H=z.rx||z.r||0;I=z.ry||z.r||0;B.path=Ext.String.format("ar{0},{1},{2},{3},{4},{1},{4},{1}",Math.round((J-H)*x.zoom),Math.round((K-I)*x.zoom),Math.round((J+H)*x.zoom),Math.round((K+I)*x.zoom),Math.round(J*x.zoom));D.dirtyPath=false}else{D.attr.path=z.path=x.setPaths(D,z)||z.path;B.path=x.path2vml(z.path);D.dirtyPath=false}}if("clip-rect" in z){x.setClip(D,z)}if(D.type=="text"){x.setTextAttributes(D,z)}if(z.opacity||z["stroke-opacity"]||z.fill){x.setFill(D,z)}if(z.stroke||z["stroke-opacity"]||z.fill){x.setStroke(D,z)}A=O.style;if(A){N.setStyle(A)}D.dirty=false},setZIndex:function(q){var o=this,n=q.attr.zIndex,l=o.zIndexShift,t,m,p,s;if(n<l){t=o.items.items;m=t.length;for(s=0;s<m;s++){if((n=t[s].attr.zIndex)&&n<l){l=n}}o.zIndexShift=l;for(s=0;s<m;s++){p=t[s];if(p.el){p.el.setStyle("zIndex",p.attr.zIndex-l)}p.zIndexDirty=false}}else{if(q.el){q.el.setStyle("zIndex",n-l);q.zIndexDirty=false}}},setPaths:function(l,j){var h=l.attr,e=l.attr["stroke-width"]||1;l.bbox.plain=null;l.bbox.transform=null;if(l.type=="circle"){h.rx=h.ry=j.r;return Ext.draw.Draw.ellipsePath(l)}else{if(l.type=="ellipse"){h.rx=j.rx;h.ry=j.ry;return Ext.draw.Draw.ellipsePath(l)}else{if(l.type=="rect"){h.rx=h.ry=j.r;return Ext.draw.Draw.rectPath(l)}else{if(l.type=="path"&&h.path){return Ext.draw.Draw.pathToAbsolute(h.path)}}}}return false},setFill:function(o,u){var s=this,w=o.el.dom,p=w.fill,x=false,t,q,y,n,v;if(!p){p=w.fill=s.createNode("fill");x=true}if(Ext.isArray(u.fill)){u.fill=u.fill[0]}if(u.fill=="none"){p.on=false}else{if(typeof u.opacity=="number"){p.opacity=u.opacity}if(typeof u["fill-opacity"]=="number"){p.opacity=u["fill-opacity"]}p.on=true;if(typeof u.fill=="string"){y=u.fill.match(s.fillUrlRe);if(y){y=y[1];if(y.charAt(0)=="#"){q=s.gradientsColl.getByKey(y.substring(1))}if(q){n=u.rotation;v=-(q.angle+270+(n?n.degrees:0))%360;if(v===0){v=180}p.angle=v;p.type="gradient";p.method="sigma";if(p.colors){p.colors.value=q.colors}else{p.colors=q.colors}}else{p.src=y;p.type="tile"}}else{p.color=Ext.draw.Color.toHex(u.fill);p.src="";p.type="solid"}}}if(x){w.appendChild(p)}},setStroke:function(l,o){var q=this,s=l.el.dom,n=l.strokeEl,p=false,t,m;if(!n){n=l.strokeEl=q.createNode("stroke");p=true}if(Ext.isArray(o.stroke)){o.stroke=o.stroke[0]}if(!o.stroke||o.stroke=="none"||o.stroke==0||o["stroke-width"]==0){n.on=false}else{n.on=true;if(o.stroke&&!o.stroke.match(q.fillUrlRe)){n.color=Ext.draw.Color.toHex(o.stroke)}n.dashstyle=o["stroke-dasharray"]?"dash":"solid";n.joinstyle=o["stroke-linejoin"];n.endcap=o["stroke-linecap"]||"round";n.miterlimit=o["stroke-miterlimit"]||8;t=parseFloat(o["stroke-width"]||1)*0.75;m=o["stroke-opacity"]||1;if(Ext.isNumber(t)&&t<1){n.weight=1;n.opacity=m*t}else{n.weight=t;n.opacity=m}}if(p){s.appendChild(n)}},setClip:function(h,l){var m=this,o=h.el,j=h.clipEl,n=String(l["clip-rect"]).split(m.separatorRe);if(!j){j=h.clipEl=m.el.insertFirst(Ext.getDoc().dom.createElement("div"));j.addCls(Ext.baseCSSPrefix+"vml-sprite")}if(n.length==4){n[2]=+n[2]+(+n[0]);n[3]=+n[3]+(+n[1]);j.setStyle("clip",Ext.String.format("rect({1}px {2}px {3}px {0}px)",n[0],n[1],n[2],n[3]));j.setSize(m.el.width,m.el.height)}else{j.setStyle("clip","")}},setTextAttributes:function(q,w){var s=this,y=q.vml,u=y.textpath.style,t=s.span.style,p=s.zoom,o=Math.round,n={fontSize:"font-size",fontWeight:"font-weight",fontStyle:"font-style"},x,v;if(q.dirtyFont){if(w.font){u.font=t.font=w.font}if(w["font-family"]){u.fontFamily='"'+w["font-family"].split(",")[0].replace(s.fontFamilyRe,"")+'"';t.fontFamily=w["font-family"]}for(x in n){v=w[n[x]];if(v){u[x]=t[x]=v}}s.setText(q,w.text);if(y.textpath.string){s.span.innerHTML=String(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br/>")}y.W=s.span.offsetWidth;y.H=s.span.offsetHeight+2;if(w["text-anchor"]=="middle"){u["v-text-align"]="center"}else{if(w["text-anchor"]=="end"){u["v-text-align"]="right";y.bbx=-Math.round(y.W/2)}else{u["v-text-align"]="left";y.bbx=Math.round(y.W/2)}}}y.X=w.x;y.Y=w.y;y.path.v=Ext.String.format("m{0},{1}l{2},{1}",Math.round(y.X*p),Math.round(y.Y*p),Math.round(y.X*p)+1);q.bbox.plain=null;q.bbox.transform=null;q.dirtyFont=false},setText:function(d,c){d.vml.textpath.string=Ext.htmlDecode(c)},hide:function(){this.el.hide()},show:function(){this.el.show()},hidePrim:function(c){c.el.addCls(Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(c){c.el.removeCls(Ext.baseCSSPrefix+"hide-visibility")},setSize:function(d,e){var h=this;d=d||h.width;e=e||h.height;h.width=d;h.height=e;if(h.el){if(d!=undefined){h.el.setWidth(d)}if(e!=undefined){h.el.setHeight(e)}}h.callParent(arguments)},applyViewBox:function(){var n=this,m=n.viewBox,o=n.width,j=n.height,q,l,p;n.callParent();if(m&&(o||j)){q=n.items.items;l=q.length;for(p=0;p<l;p++){n.applyTransformations(q[p])}}},onAdd:function(c){this.callParent(arguments);if(this.el){this.renderItem(c)}},onRemove:function(c){if(c.el){c.el.remove();delete c.el}this.callParent(arguments)},render:function(h){var m=this,j=Ext.getDoc().dom,e;if(!m.createNode){try{if(!j.namespaces.rvml){j.namespaces.add("rvml","urn:schemas-microsoft-com:vml")}m.createNode=function(a){return j.createElement("<rvml:"+a+' class="rvml">')}}catch(l){m.createNode=function(a){return j.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}if(!m.el){e=j.createElement("div");m.el=Ext.get(e);m.el.addCls(m.baseVmlCls);m.span=j.createElement("span");Ext.get(m.span).addCls(m.measureSpanCls);e.appendChild(m.span);m.el.setSize(m.width||0,m.height||0);h.appendChild(e);m.el.on({scope:m,mouseup:m.onMouseUp,mousedown:m.onMouseDown,mouseover:m.onMouseOver,mouseout:m.onMouseOut,mousemove:m.onMouseMove,mouseenter:m.onMouseEnter,mouseleave:m.onMouseLeave,click:m.onClick,dblclick:m.onDblClick})}m.renderAll()},renderAll:function(){this.items.each(this.renderItem,this)},redraw:function(c){c.dirty=true;this.renderItem(c)},renderItem:function(c){if(!this.el){return}if(!c.el){this.createSpriteElement(c)}if(c.dirty){this.applyAttrs(c);if(c.dirtyTransform){this.applyTransformations(c)}}},rotationCompensation:function(j,l,h){var e=new Ext.draw.Matrix();e.rotate(-j,0.5,0.5);return{x:e.x(l,h),y:e.y(l,h)}},transform:function(K,J){var N=this,an=N.getBBox(K,true),ah=an.x+an.width*0.5,ai=an.y+an.height*0.5,Y=new Ext.draw.Matrix(),Z=K.transformations,P=Z.length,X=0,ac=0,al=1,am=1,ad="",aj=K.el,T=aj.dom,y=T.style,ao=N.zoom,ag=K.skew,V=N.viewBoxShift,O,R,U,af,W,ab,aa,M,Q,S,ak,ae;for(;X<P;X++){U=Z[X];af=U.type;if(af=="translate"){Y.translate(U.x,U.y)}else{if(af=="rotate"){Y.rotate(U.degrees,U.x,U.y);ac+=U.degrees}else{if(af=="scale"){Y.scale(U.x,U.y,U.centerX,U.centerY);al*=U.x;am*=U.y}}}}K.matrix=Y.clone();if(J){return}if(V){Y.prepend(V.scale,0,0,V.scale,V.dx*V.scale,V.dy*V.scale)}if(K.type!="image"&&ag){ag.origin="0,0";ag.matrix=Y.toString();ae=Y.offset();if(ae[0]>32767){ae[0]=32767}else{if(ae[0]<-32768){ae[0]=-32768}}if(ae[1]>32767){ae[1]=32767}else{if(ae[1]<-32768){ae[1]=-32768}}ag.offset=ae}else{y.filter=Y.toFilter();y.left=Math.min(Y.x(an.x,an.y),Y.x(an.x+an.width,an.y),Y.x(an.x,an.y+an.height),Y.x(an.x+an.width,an.y+an.height))+"px";y.top=Math.min(Y.y(an.x,an.y),Y.y(an.x+an.width,an.y),Y.y(an.x,an.y+an.height),Y.y(an.x+an.width,an.y+an.height))+"px"}},createItem:function(c){return Ext.create("Ext.draw.Sprite",c)},getRegion:function(){return this.el.getRegion()},addCls:function(d,c){if(d&&d.el){d.el.addCls(c)}},removeCls:function(d,c){if(d&&d.el){d.el.removeCls(c)}},addGradient:function(q){var t=this.gradientsColl||(this.gradientsColl=Ext.create("Ext.util.MixedCollection")),w=[],o=Ext.create("Ext.util.MixedCollection"),m,s,v,p,n,u;o.addAll(q.stops);o.sortByKey("ASC",function(c,a){c=parseInt(c,10);a=parseInt(a,10);return c>a?1:(c<a?-1:0)});m=o.keys;s=o.items;v=m.length;for(u=0;u<v;u++){p=m[u];n=s[u];w.push(p+"% "+n.color)}t.add(q.id,{colors:w.join(","),angle:q.angle})},destroy:function(){var c=this;c.callParent(arguments);if(c.el){c.el.remove()}delete c.el}},0,0,0,0,0,0,[Ext.draw.engine,"Vml"],0));(Ext.cmd.derive("Ext.env.Browser",Ext.Base,{statics:{browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",other:"Other"},engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},browserPrefixes:{ie:"MSIE ",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"Opera/"}},isSecure:false,isStrict:false,is:Ext.emptyFn,name:null,version:null,engineName:null,engineVersion:null,constructor:function(){var n=this.userAgent=Ext.global.navigator.userAgent,v=this.statics(),x=n.match(new RegExp("((?:"+Ext.Object.getValues(v.browserPrefixes).join(")|(?:")+"))([\\d\\._]+)")),y=n.match(new RegExp("((?:"+Ext.Object.getValues(v.enginePrefixes).join(")|(?:")+"))([\\d\\._]+)")),u=v.browserNames.other,o="",p=v.engineNames.other,q="",s,t;this.is=function(a){return this.is[a]===true};if(x){u=v.browserNames[Ext.Object.getKey(v.browserPrefixes,x[1])];o=x[2]}if(y){p=v.engineNames[Ext.Object.getKey(v.enginePrefixes,y[1])];q=y[2]}if(p==="Trident"&&u!=="IE"){u="IE";var w=n.match(/.*rv:(\d+.\d+)/);if(w&&w.length){w=w[1];o=new Ext.Version(w)}}Ext.apply(this,{engineName:p,engineVersion:new Ext.Version(q),name:u,version:new Ext.Version(o)});this.is[this.name]=true;this.is[this.name+(this.version.getMajor()||"")]=true;this.is[this.name+this.version.getShortVersion()]=true;for(s in v.browserNames){if(v.browserNames.hasOwnProperty(s)){t=v.browserNames[s];this.is[t]=(this.name===t)}}this.is[this.name]=true;this.is[this.engineName+(this.engineVersion.getMajor()||"")]=true;this.is[this.engineName+this.engineVersion.getShortVersion()]=true;for(s in v.engineNames){if(v.engineNames.hasOwnProperty(s)){t=v.engineNames[s];this.is[t]=(this.engineNames===t)}}this.isSecure=/^https/i.test(Ext.global.location.protocol);this.isStrict=Ext.global.document.compatMode==="CSS1Compat";return this}},1,0,0,0,0,0,[Ext.env,"Browser"],function(){Ext.browser=new Ext.env.Browser()}));(Ext.cmd.derive("Ext.env.FeatureDetector",Ext.Base,{statics:{defaultTests:{Canvas:function(){var c=this.getTestElement("canvas");return !!(c&&c.getContext&&c.getContext("2d"))},SVG:function(){var c=Ext.global.document;return !!(c.createElementNS&&!!c.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)},VML:function(){var c=this.getTestElement(),d=false;c.innerHTML="<!--[if vml]><br/><br/><![endif]-->";d=(c.childNodes.length===2);c.innerHTML="";return d},Touch:function(){return("ontouchstart" in Ext.global)&&!(Ext.platform&&Ext.platform.name.match(/Windows|MacOSX|Linux/))},Orientation:function(){return("orientation" in Ext.global)},Geolocation:function(){return !!Ext.global.navigator.geolocation},SqlDatabase:function(){return !!Ext.global.openDatabase},Websockets:function(){return"WebSocket" in Ext.global},History:function(){return !!(Ext.global.history&&Ext.global.history.pushState)},CSSTransforms:function(){return this.isStyleSupported("transform")},CSS3DTransforms:function(){return this.has("csstransforms")&&this.isStyleSupported("perspective")},CSSAnimations:function(){return this.isStyleSupported("animationName")},CSSTransitions:function(){return this.isStyleSupported("transitionProperty")},Audio:function(){return !!this.getTestElement("audio").canPlayType},Video:function(){return !!this.getTestElement("video").canPlayType}},stylePrefixes:["Webkit","Moz","O","ms"]},constructor:function(){this.tests={};this.testElements={};this.registerTests(this.self.defaultTests,true);return this},has:function(c){if(!this.hasTest(c)){return false}else{if(this.has.hasOwnProperty(c)){return this.has[c]}else{return this.getTestResult(c)}}},getTestResult:function(c){return !!this.getTest(c).call(this)},getTestElement:function(c){if(!c){c="div"}if(!this.testElements[c]){this.testElements[c]=Ext.global.document.createElement(c)}return this.testElements[c]},registerTest:function(e,d,h){this.tests[e]=d;if(h){this.has[e]=this.getTestResult(e)}return this},registerTests:function(d,h){var e;for(e in d){if(d.hasOwnProperty(e)){this.registerTest(e,d[e],h)}}return this},hasTest:function(c){return this.tests.hasOwnProperty(c)},getTest:function(c){return this.tests[c]},getTests:function(){return this.tests},isStyleSupported:function(n,h){var l=this.getTestElement(h).style,j=Ext.String.capitalize(n),m=this.self.stylePrefixes.length;if(l[n]!==undefined){return true}while(m--){if(l[this.self.stylePrefixes[m]+j]!==undefined){return true}}return false},isEventSupported:function(n,j){var l=this.getTestElement(j),h="on"+n,m=false;m=(h in l);if(!m){if(l.setAttribute&&l.removeAttribute){l.setAttribute(h,"");m=typeof l[h]==="function";if(typeof l[h]!=="undefined"){l[h]=undefined}l.removeAttribute(h)}}return m}},1,0,0,0,0,0,[Ext.env,"FeatureDetector"],function(){Ext.features=new Ext.env.FeatureDetector()}));(Ext.cmd.derive("Ext.env.OS",Ext.Base,{statics:{osNames:{ios:"iOS",android:"Android",webos:"WebOS",blackberry:"BlackBerry",mac:"MacOSX",win:"Windows",linux:"Linux",other:"Other"},osPrefixes:{ios:"iPhone OS ",android:"Android ",blackberry:"BlackBerry ",webos:"webOS/"}},is:Ext.emptyFn,name:null,version:null,constructor:function(){var l=Ext.global.navigator.userAgent,t=Ext.global.navigator.platform,p=this.statics(),n=l.match(new RegExp("((?:"+Ext.Object.getValues(p.osPrefixes).join(")|(?:")+"))([^\\s;]+)")),u="other",q="",o,m,s;if(n){u=p.osNames[Ext.Object.getKey(p.osPrefixes,n[1])];q=n[2];if(u==="BlackBerry"){o=l.match(/Version\/([\d\._]+)/);if(o){q=o[1]}}}else{u=p.osNames[(l.toLowerCase().match(/mac|win|linux/i)||["other"])[0]]}Ext.apply(this,{name:u,version:new Ext.Version(q)});this.is=function(a){return this.is[a]===true};if(u==="iOS"){this.is[t]=true}this.is[this.name]=true;this.is[this.name+(this.version.getMajor()||"")]=true;this.is[this.name+this.version.getShortVersion()]=true;for(m in p.osNames){if(p.osNames.hasOwnProperty(m)){s=p.osNames[m];this.is[s]=(this.name===s)}}return this}},1,0,0,0,0,0,[Ext.env,"OS"],function(){Ext.os=new Ext.env.OS()}));(Ext.cmd.derive("Ext.flash.Component",Ext.Component,{alternateClassName:"Ext.FlashComponent",flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",swfWidth:"100%",swfHeight:"100%",expressInstall:false,renderTpl:['<div id="{swfId}" role="presentation"></div>'],initComponent:function(){this.callParent();this.addEvents("success","failure")},beforeRender:function(){this.callParent();Ext.applyIf(this.renderData,{swfId:this.getSwfId()})},afterRender:function(){var d=this,e=Ext.apply({},d.flashParams),h=Ext.apply({},d.flashVars);d.callParent();e=Ext.apply({allowScriptAccess:"always",bgcolor:d.backgroundColor,wmode:d.wmode},e);h=Ext.apply({allowedDomain:document.location.hostname},h);new swfobject.embedSWF(d.url,d.getSwfId(),d.swfWidth,d.swfHeight,d.flashVersion,d.expressInstall?d.statics.EXPRESS_INSTALL_URL:undefined,h,e,d.flashAttributes,Ext.bind(d.swfCallback,d))},swfCallback:function(c){var d=this;if(c.success){d.swf=Ext.get(c.ref);d.onSuccess();d.fireEvent("success",d)}else{d.onFailure();d.fireEvent("failure",d)}},getSwfId:function(){return this.swfId||(this.swfId="extswf"+this.getAutoId())},onSuccess:function(){this.swf.setStyle("visibility","inherit")},onFailure:Ext.emptyFn,beforeDestroy:function(){var c=this,d=c.swf;if(d){swfobject.removeSWF(c.getSwfId());Ext.destroy(d);delete c.swf}c.callParent()},statics:{EXPRESS_INSTALL_URL:"http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf"}},0,["flash"],["component","box","flash"],{component:true,box:true,flash:true},["widget.flash"],0,[Ext.flash,"Component",Ext,"FlashComponent"],0));(Ext.cmd.derive("Ext.form.action.Action",Ext.Base,{alternateClassName:"Ext.form.Action",submitEmptyText:true,constructor:function(d){if(d){Ext.apply(this,d)}var c=d.params;if(Ext.isString(c)){this.params=Ext.Object.fromQueryString(c)}},run:Ext.emptyFn,onFailure:function(e){var h=this.form,d=h&&!h.destroying&&!h.isDestroyed;this.response=e;this.failureType=Ext.form.action.Action.CONNECT_FAILURE;if(d){h.afterAction(this,false)}},processResponse:function(c){this.response=c;if(!c.responseText&&!c.responseXML){return true}return(this.result=this.handleResponse(c))},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var h=this,e,d=h.form;return{success:h.onSuccess,failure:h.onFailure,scope:h,timeout:(this.timeout*1000)||(d.timeout*1000),upload:d.fileUpload?h.onSuccess:e}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}},1,0,0,0,0,0,[Ext.form.action,"Action",Ext.form,"Action"],0));(Ext.cmd.derive("Ext.form.action.Load",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(e){var h=this.processResponse(e),j=this.form,l=j&&!j.destroying&&!j.isDestroyed;if(h===true||!h.success||!h.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE;if(l){j.afterAction(this,false)}return}if(l){j.clearInvalid();j.setValues(h.data);j.afterAction(this,true)}},handleResponse:function(l){var h=this.form.reader,e,j;if(h){e=h.read(l);j=e.records&&e.records[0]?e.records[0].data:null;return{success:e.success,data:j}}return Ext.decode(l.responseText)}},0,0,0,0,["formaction.load"],0,[Ext.form.action,"Load",Ext.form.Action,"Load"],0));(Ext.cmd.derive("Ext.form.action.Submit",Ext.form.action.Action,{alternateClassName:"Ext.form.Action.Submit",type:"submit",run:function(){var c=this,d=c.form;if(c.clientValidation===false||d.isValid()){c.doSubmit()}else{c.failureType=Ext.form.action.Action.CLIENT_INVALID;d.afterAction(c,false)}},doSubmit:function(){var n=this,h=Ext.apply(n.createCallback(),{url:n.getUrl(),method:n.getMethod(),headers:n.headers}),o=n.form,m=n.jsonSubmit||o.jsonSubmit,j=m?"jsonData":"params",l;if(o.hasUpload()){l=n.buildForm();h.form=l.formEl;h.isUpload=true}else{h[j]=n.getParams(m)}Ext.Ajax.request(h);if(l){n.cleanup(l)}},cleanup:function(m){var o=m.formEl,p=m.uploadEls,j=m.uploadFields,l=j.length,q,n;for(q=0;q<l;++q){n=j[q];if(!n.clearOnSubmit){n.restoreInput(p[q])}}if(o){Ext.removeNode(o)}},getParams:function(j){var l=false,e=this.callParent(),h=this.form.getValues(l,l,this.submitEmptyText!==l,j,true);return Ext.apply({},h,e)},buildForm:function(){var A=this,x=[],z,J,C=A.form,F=A.getParams(),G=[],I=[],D=C.getFields().items,E,B=D.length,y,t,v,u,w,H;for(E=0;E<B;++E){y=D[E];if(y.isFileUpload()){G.push(y)}}for(t in F){if(F.hasOwnProperty(t)){v=F[t];if(Ext.isArray(v)){w=v.length;for(u=0;u<w;u++){x.push(A.getFieldConfig(t,v[u]))}}else{x.push(A.getFieldConfig(t,v))}}}z={tag:"form",role:"presentation",action:A.getUrl(),method:A.getMethod(),target:A.target?(Ext.isString(A.target)?A.target:Ext.fly(A.target).dom.name):"_self",style:"display:none",cn:x};if(G.length){z.encoding=z.enctype="multipart/form-data"}J=Ext.DomHelper.append(Ext.getBody(),z);B=G.length;for(E=0;E<B;++E){H=G[E].extractFileInput();J.appendChild(H);I.push(H)}return{formEl:J,uploadFields:G,uploadEls:I}},getFieldConfig:function(d,c){return{tag:"input",type:"hidden",name:d,value:Ext.String.htmlEncode(c)}},onSuccess:function(h){var m=this.form,n=m&&!m.destroying&&!m.isDestroyed,l=true,j=this.processResponse(h);if(j!==true&&!j.success){if(j.errors&&n){m.markInvalid(j.errors)}this.failureType=Ext.form.action.Action.SERVER_INVALID;l=false}if(n){m.afterAction(this,l)}},handleResponse:function(t){var w=this.form,u=w.errorReader,s,n,q,p,v,e;if(u){s=u.read(t);v=s.records;n=[];if(v){for(q=0,p=v.length;q<p;q++){n[q]=v[q].data}}if(n.length<1){n=null}e={success:s.success,errors:n}}else{try{e=Ext.decode(t.responseText)}catch(o){e={success:false,errors:[]}}}return e}},0,0,0,0,["formaction.submit"],0,[Ext.form.action,"Submit",Ext.form.Action,"Submit"],0));(Ext.cmd.derive("Ext.util.ComponentDragger",Ext.dd.DragTracker,{autoStart:500,constructor:function(d,c){this.comp=d;this.initialConstrainTo=c.constrainTo;this.callParent([c])},onStart:function(h){var d=this,e=d.comp;d.startPosition=e.getXY();if(e.ghost&&!e.liveDrag){d.proxy=e.ghost();d.dragTarget=d.proxy.header.el}if(d.constrain||d.constrainDelegate){d.constrainTo=d.calculateConstrainRegion()}if(e.beginDrag){e.beginDrag()}},calculateConstrainRegion:function(){var m=this,o=m.comp,n=m.initialConstrainTo,p=o.constraintInsets,l,t,q,s=m.proxy?m.proxy.el:o.el,u=(!m.constrainDelegate&&s.shadow&&o.constrainShadow&&!s.shadowDisabled)?s.shadow.getShadowSize():0;if(!(n instanceof Ext.util.Region)){l=Ext.fly(n);n=l.getConstrainRegion()}else{n=n.copy()}if(p){p=Ext.isObject(p)?p:Ext.Element.parseBox(p);n.adjust(p.top,p.right,p.bottom,p.length)}if(u){n.adjust(u[0],-u[1],-u[2],u[3])}if(!m.constrainDelegate){t=Ext.fly(m.dragTarget).getRegion();q=s.getRegion();n.adjust(t.top-q.top,t.right-q.right,t.bottom-q.bottom,t.left-q.left)}return n},onDrag:function(l){var e=this,h=(e.proxy&&!e.comp.liveDrag)?e.proxy:e.comp,j=e.getOffset(e.constrain||e.constrainDelegate?"dragTarget":null);h.setPagePosition(e.startPosition[0]+j[0],e.startPosition[1]+j[1])},onEnd:function(c){var d=this.comp;if(d.isDestroyed||d.destroying){return}if(this.proxy&&!d.liveDrag){d.unghost()}if(d.endDrag){d.endDrag()}}},1,0,0,0,0,0,[Ext.util,"ComponentDragger"],0));(Ext.cmd.derive("Ext.window.Window",Ext.panel.Panel,{alternateClassName:"Ext.Window",baseCls:Ext.baseCSSPrefix+"window",resizable:true,draggable:true,constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:50,minWidth:50,expandOnShow:true,collapsible:false,closable:true,hidden:true,autoRender:true,hideMode:"offsets",floating:true,itemCls:Ext.baseCSSPrefix+"window-item",initialAlphaNum:/^[a-z0-9]/,overlapHeader:true,ignoreHeaderBorderManagement:true,alwaysFramed:true,isRootCfg:{isRoot:true},isWindow:true,ariaRole:"dialog",initComponent:function(){var c=this;c.frame=false;c.callParent();c.addEvents("resize","maximize","minimize","restore");if(c.plain){c.addClsWithUI("plain")}c.addStateEvents(["maximize","restore","resize","dragend"])},getElConfig:function(){var c=this,d;d=c.callParent();d.tabIndex=-1;return d},getState:function(){var h=this,m=h.callParent()||{},j=!!h.maximized,n=h.ghostBox,l;m.maximized=j;if(j){l=h.restorePos}else{if(n){l=[n.x,n.y]}else{l=h.getPosition()}}Ext.apply(m,{size:j?h.restoreSize:h.getSize(),pos:l});return m},applyState:function(c){var d=this;if(c){d.maximized=c.maximized;if(d.maximized){d.hasSavedRestore=true;d.restoreSize=c.size;d.restorePos=c.pos}else{Ext.apply(d,{width:c.size.width,height:c.size.height,x:c.pos[0],y:c.pos[1]})}}},onRender:function(d,e){var h=this;h.callParent(arguments);h.focusEl=h.el;if(h.maximizable){h.header.on({scope:h,dblclick:h.toggleMaximize})}},afterRender:function(){var e=this,h=e.header,d;e.callParent();if(e.maximized){e.maximized=false;e.maximize();if(h){h.removeCls(h.indicateDragCls)}}if(e.closable){d=e.getKeyMap();d.on(27,e.onEsc,e)}else{d=e.keyMap}if(d&&e.hidden){d.disable()}},initDraggable:function(){this.initSimpleDraggable()},initResizable:function(){this.callParent(arguments);if(this.maximized){this.resizer.disable()}},onEsc:function(e,h){var d=Ext.FocusManager;if(!Ext.enableFocusManager||d.focusedCmp===this){h.stopEvent();this.close()}},beforeDestroy:function(){var c=this;if(c.rendered){delete c.animateTarget;c.hide();Ext.destroy(c.keyMap)}c.callParent()},addTools:function(){var e=this,h=e.tools,d=[];e.callParent();if(e.minimizable){h.push({type:"minimize",handler:Ext.Function.bind(e.minimize,e,d)})}if(e.maximizable){h.push({type:"maximize",handler:Ext.Function.bind(e.toggleMaximize,e,d)})}},getFocusEl:function(){return this.getDefaultFocus()},getDefaultFocus:function(){var l=this,e,j=l.defaultButton||l.defaultFocus,h;if(j!==undefined){if(Ext.isNumber(j)){e=l.query("button")[j]}else{if(Ext.isString(j)){h=j;if(h.match(l.initialAlphaNum)){e=l.down("#"+h)}if(!e){e=l.down(h)}}else{if(j.focus){e=j}}}}return e||l.el},onFocus:function(){var c=this,d;if(Ext.enableFocusManager||((d=c.getDefaultFocus())===c)){c.callParent(arguments)}else{d.focus()}},onShow:function(){var c=this;c.callParent(arguments);if(c.expandOnShow){c.expand(false)}c.syncMonitorWindowResize();if(c.keyMap){c.keyMap.enable()}},doClose:function(){var c=this;if(c.hidden){c.fireEvent("close",c);if(c.closeAction=="destroy"){c.destroy()}}else{c.hide(c.animateTarget,c.doClose,c)}},afterHide:function(){var c=this;c.syncMonitorWindowResize();if(c.keyMap){c.keyMap.disable()}c.callParent(arguments)},onWindowResize:function(){var c=this,d;if(c.maximized){c.fitContainer()}else{d=c.getSizeModel();if(d.width.natural||d.height.natural){c.updateLayout()}c.doConstrain()}},minimize:function(){this.fireEvent("minimize",this);return this},resumeHeaderLayout:function(c){this.header.resumeLayouts(c?this.isRootCfg:null)},afterCollapse:function(){var e=this,h=e.header,d=e.tools;if(h&&e.maximizable){h.suspendLayouts();d.maximize.hide();this.resumeHeaderLayout(true)}if(e.resizer){e.resizer.disable()}e.callParent(arguments)},afterExpand:function(){var h=this,j=h.header,e=h.tools,l;if(j){j.suspendLayouts();if(h.maximizable){e.maximize.show();l=true}this.resumeHeaderLayout(l)}if(h.resizer){h.resizer.enable()}h.callParent(arguments)},maximize:function(l){var q=this,n=q.header,p=q.tools,s=q.width,m=q.height,t,o;if(!q.maximized){q.expand(false);if(!q.hasSavedRestore){t=q.restoreSize={width:s?s:null,height:m?m:null};q.restorePos=q.getPosition()}if(n){n.suspendLayouts();if(p.maximize){p.maximize.setType("restore")}if(q.collapseTool){q.collapseTool.hide();o=true}q.resumeHeaderLayout(o)}q.el.disableShadow();if(q.dd){q.dd.disable();if(n){n.removeCls(n.indicateDragCls)}}if(q.resizer){q.resizer.disable()}q.el.addCls(Ext.baseCSSPrefix+"window-maximized");q.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct");q.syncMonitorWindowResize();q.fitContainer(l=(l||!!q.animateTarget)?{callback:function(){q.maximized=true;q.fireEvent("maximize",q)}}:null);if(!l){q.maximized=true;q.fireEvent("maximize",q)}}return q},restore:function(h){var o=this,n=o.tools,l=o.header,j=o.restoreSize,m;if(o.maximized){o.hasSavedRestore=null;o.removeCls(Ext.baseCSSPrefix+"window-maximized");if(l){l.suspendLayouts();if(n.maximize){n.maximize.setType("maximize")}if(o.collapseTool){o.collapseTool.show();m=true}o.resumeHeaderLayout(m)}j.x=o.restorePos[0];j.y=o.restorePos[1];o.setBox(j,h=(h||!!o.animateTarget)?{callback:function(){o.el.enableShadow(true);o.maximized=false;o.fireEvent("restore",o)}}:null);o.restorePos=o.restoreSize=null;if(o.dd){o.dd.enable();if(l){l.addCls(l.indicateDragCls)}}if(o.resizer){o.resizer.enable()}o.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct");o.syncMonitorWindowResize();if(!h){o.el.enableShadow(true);o.maximized=false;o.fireEvent("restore",o)}}return o},syncMonitorWindowResize:function(){var e=this,l=e._monitoringResize,j=e.monitorResize||e.constrain||e.constrainHeader||e.maximized,h=e.hidden||e.destroying||e.isDestroyed;if(j&&!h){if(!l){Ext.EventManager.onWindowResize(e.onWindowResize,e,{buffer:1});e._monitoringResize=true}}else{if(l){Ext.EventManager.removeResizeListener(e.onWindowResize,e);e._monitoringResize=false}}},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},createGhost:function(){var c=this.callParent(arguments);c.xtype="window";return c}},0,["window"],["component","box","container","panel","window"],{component:true,box:true,container:true,panel:true,window:true},["widget.window"],0,[Ext.window,"Window",Ext,"Window"],0));(Ext.cmd.derive("Ext.form.Labelable",Ext.Base,{isLabelable:true,autoEl:{tag:"table",cellpadding:0,role:"presentation"},childEls:["labelCell","labelEl","bodyEl","sideErrorCell","errorEl","inputRow"],labelableRenderTpl:['<tr role="presentation" id="{id}-inputRow" <tpl if="inFormLayout">id="{id}"</tpl> class="{inputRowCls}">','<tpl if="labelOnLeft">','<td role="presentation" id="{id}-labelCell" style="{labelCellStyle}" {labelCellAttrs}>',"{beforeLabelTpl}",'<label id="{id}-labelEl" {labelAttrTpl}','<tpl if="inputId && !(boxLabel && !fieldLabel)"> for="{inputId}"</tpl>',' class="{labelCls}"','<tpl if="labelStyle"> style="{labelStyle}"</tpl>',' unselectable="on"',">","{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">','<span role="separator">{labelSeparator}</span>',"</tpl>","</tpl>","{afterLabelTextTpl}","</label>","{afterLabelTpl}","</td>","</tpl>",'<td role="presentation" class="{baseBodyCls} {fieldBodyCls} {extraFieldBodyCls}" id="{id}-bodyEl" colspan="{bodyColspan}" role="presentation">',"{beforeBodyEl}","<tpl if=\"labelAlign=='top'\">","{beforeLabelTpl}",'<div role="presentation" id="{id}-labelCell" style="{labelCellStyle}">','<label id="{id}-labelEl" {labelAttrTpl}<tpl if="inputId"> for="{inputId}"</tpl> class="{labelCls}"','<tpl if="labelStyle"> style="{labelStyle}"</tpl>',' unselectable="on"',">","{beforeLabelTextTpl}",'<tpl if="fieldLabel">{fieldLabel}','<tpl if="labelSeparator">','<span role="separator">{labelSeparator}</span>',"</tpl>","</tpl>","{afterLabelTextTpl}","</label>","</div>","{afterLabelTpl}","</tpl>","{beforeSubTpl}","{[values.$comp.getSubTplMarkup(values)]}","{afterSubTpl}","<tpl if=\"msgTarget==='side'\">","{afterBodyEl}","</td>","<td role=\"presentation\" id=\"{id}-sideErrorCell\" vAlign=\"{[values.labelAlign==='top' && !values.hideLabel ? 'bottom' : 'middle']}\" style=\"{[values.autoFitErrors ? 'display:none' : '']}\" width=\"{errorIconWidth}\">",'<div role="alert" aria-live="polite" id="{id}-errorEl" class="{errorMsgCls}" style="display:none"></div>',"</td>","<tpl elseif=\"msgTarget=='under'\">",'<div role="alert" aria-live="polite" id="{id}-errorEl" class="{errorMsgCls}" colspan="2" style="display:none"></div>',"{afterBodyEl}","</td>","</tpl>","</tr>",{disableFormats:true}],activeErrorsTpl:undefined,htmlActiveErrorsTpl:['<tpl if="errors && errors.length">','<ul class="{listCls}">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel"><div>{fieldLabel}</div></tpl>',"</tpl>",'<tpl for="errors"><li>{.}</li></tpl>',"</ul>","</tpl>"],plaintextActiveErrorsTpl:['<tpl if="errors && errors.length">','<tpl if="Ext.enableAria">','<tpl if="fieldLabel">{fieldLabel}\n</tpl>',"</tpl>",'<tpl for="errors"><tpl if="xindex &gt; 1">\n</tpl>{.}</tpl>',"</tpl>"],isFieldLabelable:true,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",inputRowCls:Ext.baseCSSPrefix+"form-item-input-row",fieldBodyCls:"",clearCls:Ext.baseCSSPrefix+"clear",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:false,hideEmptyLabel:true,preventMark:false,autoFitErrors:true,msgTarget:"qtip",noWrap:true,labelableInsertions:["beforeBodyEl","afterBodyEl","beforeLabelTpl","afterLabelTpl","beforeSubTpl","afterSubTpl","beforeLabelTextTpl","afterLabelTextTpl","labelAttrTpl"],labelableRenderProps:["allowBlank","id","labelAlign","fieldBodyCls","extraFieldBodyCls","baseBodyCls","clearCls","labelSeparator","msgTarget","inputRowCls"],initLabelable:function(){var d=this,c=d.padding;if(c){d.padding=undefined;d.extraMargins=Ext.Element.parseBox(c)}if(!d.activeErrorsTpl){if(d.msgTarget=="title"){d.activeErrorsTpl=d.plaintextActiveErrorsTpl}else{d.activeErrorsTpl=d.htmlActiveErrorsTpl}}d.addCls(Ext.plainTableCls);d.addCls(d.formItemCls);d.lastActiveError="";d.addEvents("errorchange");d.enableBubble("errorchange")},trimLabelSeparator:function(){var l=this,j=l.labelSeparator,h=l.fieldLabel||"",e=h.substr(h.length-1);return e===j?h.slice(0,-1):h},getFieldLabel:function(){return this.trimLabelSeparator()},setFieldLabel:function(e){e=e||"";var l=this,j=l.labelSeparator,h=l.labelEl;l.fieldLabel=e;if(l.rendered){if(Ext.isEmpty(e)&&l.hideEmptyLabel){h.parent().setDisplayed("none")}else{if(j){e=l.trimLabelSeparator()+j}h.update(e);h.parent().setDisplayed("")}l.updateLayout()}},getInsertionRenderData:function(m,l){var h=l.length,j,n;while(h--){j=l[h];n=this[j];if(n){if(typeof n!="string"){if(!n.isTemplate){n=Ext.XTemplate.getTpl(this,j)}n=n.apply(m)}}m[j]=n||""}return m},getLabelableRenderData:function(){var e=this,l,j,h=e.labelAlign==="top";if(!Ext.form.Labelable.errorIconWidth){j=Ext.getBody().createChild({style:"position:absolute",cls:Ext.baseCSSPrefix+"form-invalid-icon"});Ext.form.Labelable.errorIconWidth=j.getWidth()+j.getMargin("l");j.remove()}l=Ext.copyTo({inFormLayout:e.ownerLayout&&e.ownerLayout.type==="form",inputId:e.getInputId(),labelOnLeft:!h,hideLabel:!e.hasVisibleLabel(),fieldLabel:e.getFieldLabel(),labelCellStyle:e.getLabelCellStyle(),labelCellAttrs:e.getLabelCellAttrs(),labelCls:e.getLabelCls(),labelStyle:e.getLabelStyle(),bodyColspan:e.getBodyColspan(),externalError:!e.autoFitErrors,errorMsgCls:e.getErrorMsgCls(),errorIconWidth:Ext.form.Labelable.errorIconWidth,boxLabel:e.boxLabel},e,e.labelableRenderProps,true);e.getInsertionRenderData(l,e.labelableInsertions);return l},xhooks:{beforeRender:function(){var c=this;c.setFieldDefaults(c.getHierarchyState().fieldDefaults);if(c.ownerLayout){c.addCls(Ext.baseCSSPrefix+c.ownerLayout.type+"-form-item")}},onRender:function(){var l=this,j,h,e={};if(l.extraMargins){j=l.el.getMargin();for(h in j){if(j.hasOwnProperty(h)){e["margin-"+h]=(j[h]+l.extraMargins[h])+"px"}}l.el.setStyle(e)}}},hasVisibleLabel:function(){if(this.hideLabel){return false}return !(this.hideEmptyLabel&&!this.getFieldLabel())},getLabelWidth:function(){var c=this;if(!c.hasVisibleLabel()){return 0}return c.labelWidth+c.labelPad},getBodyColspan:function(){var c=this,d;if(c.msgTarget==="side"&&(!c.autoFitErrors||c.hasActiveError())){d=1}else{d=2}if(c.labelAlign!=="top"&&!c.hasVisibleLabel()){d++}return d},getLabelCls:function(){var c=this.labelCls+" "+Ext.dom.Element.unselectableCls,d=this.labelClsExtra;return d?c+" "+d:c},getLabelCellStyle:function(){var c=this,d=c.hideLabel||(!c.getFieldLabel()&&c.hideEmptyLabel);return d?"display:none;":""},getErrorMsgCls:function(){var c=this,d=(c.hideLabel||(!c.fieldLabel&&c.hideEmptyLabel));return c.errorMsgCls+(!d&&c.labelAlign==="top"?" "+Ext.baseCSSPrefix+"lbl-top-err-icon":"")},getLabelCellAttrs:function(){var h=this,d=h.labelAlign,e="";if(d!=="top"){e='valign="top" halign="'+d+'" width="'+(h.labelWidth+h.labelPad)+'"'}return e+' class="'+Ext.baseCSSPrefix+'field-label-cell"'},getLabelStyle:function(){var j=this,l=j.labelPad,e=j.labelWidth,h="";if(j.labelAlign!=="top"){if(e){h="width:"+e+"px;"}if(l){h+=j.getLabelStyleMarginProp()+l+"px;"}}else{if(l){h="margin-bottom:"+l+"px;"}}return h+(j.labelStyle||"")},getLabelStyleMarginProp:function(){return"margin-right:"},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return !!this.getActiveError()},setActiveError:function(c){this.setActiveErrors(c)},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(h){var d=this,e;h=Ext.Array.from(h);e=d.getTpl("activeErrorsTpl");d.activeErrors=h;d.activeError=e.apply({fieldLabel:d.fieldLabel,errors:h,listCls:Ext.plainListCls});d.renderActiveError()},unsetActiveError:function(){delete this.activeError;delete this.activeErrors;this.renderActiveError()},renderActiveError:function(){var h=this,d=h.getActiveError(),e=!!d;if(d!==h.lastActiveError){h.fireEvent("errorchange",h,d);h.lastActiveError=d}if(h.rendered&&!h.isDestroyed&&!h.preventMark){h.el[e?"addCls":"removeCls"](h.invalidCls);if(h.errorEl){h.errorEl.dom.innerHTML=d}}},setFieldDefaults:function(c){var d;for(d in c){if(!this.hasOwnProperty(d)){this[d]=c[d]}}}},0,0,0,0,0,0,[Ext.form,"Labelable"],0));(Ext.cmd.derive("Ext.form.field.Field",Ext.Base,{isFormField:true,disabled:false,submitValue:true,validateOnChange:true,suspendCheckChange:0,initField:function(){this.addEvents("change","validitychange","dirtychange");this.initValue()},initValue:function(){var c=this;c.value=c.transformOriginalValue(c.value);c.originalValue=c.lastValue=c.value;c.suspendCheckChange++;c.setValue(c.value);c.suspendCheckChange--},transformOriginalValue:Ext.identityFn,getFieldIdentifier:function(){return this.isEditorComponent?this.dataIndex:this.name},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(c){var d=this;d.value=c;d.checkChange();return d},isEqual:function(c,d){return String(c)===String(d)},isEqualAsString:function(c,d){return String(Ext.value(c,""))===String(Ext.value(d,""))},getSubmitData:function(){var d=this,c=null;if(!d.disabled&&d.submitValue){c={};c[d.getName()]=""+d.getValue()}return c},getModelData:function(h,e){var l=this,j=null;if(!l.disabled&&(l.submitValue||!e)){j={};j[l.getFieldIdentifier()]=l.getValue()}return j},reset:function(){var c=this;c.beforeReset();c.setValue(c.originalValue);c.clearInvalid();delete c.wasValid},beforeReset:Ext.emptyFn,resetOriginalValue:function(){this.originalValue=this.getValue();this.checkDirty()},checkChange:function(){var h=this,d,e;if(!h.suspendCheckChange){d=h.getValue();e=h.lastValue;if(!h.isDestroyed&&h.didValueChange(d,e)){h.lastValue=d;h.fireEvent("change",h,d,e);h.onChange(d,e)}}},didValueChange:function(c,d){return !this.isEqual(c,d)},onChange:function(c,d){if(this.validateOnChange){this.validate()}this.checkDirty()},isDirty:function(){var c=this;return !c.disabled&&!c.isEqual(c.getValue(),c.originalValue)},checkDirty:function(){var d=this,c=d.isDirty();if(c!==d.wasDirty){d.fireEvent("dirtychange",d,c);d.onDirtyChange(c);d.wasDirty=c}},onDirtyChange:Ext.emptyFn,getErrors:function(c){return[]},isValid:function(){var c=this;return c.disabled||Ext.isEmpty(c.getErrors())},validate:function(){var d=this,c=d.isValid();if(c!==d.wasValid){d.wasValid=c;d.fireEvent("validitychange",d,c)}return c},batchChanges:function(d){try{this.suspendCheckChange++;d()}catch(c){throw c}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return false},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,0,0,0,0,0,[Ext.form.field,"Field"],0));(Ext.cmd.derive("Ext.layout.component.field.Field",Ext.layout.component.Auto,{type:"field",naturalSizingProp:"size",beginLayout:function(h){var d=this,e=d.owner;d.callParent(arguments);h.labelStrategy=d.getLabelStrategy();h.errorStrategy=d.getErrorStrategy();h.labelContext=h.getEl("labelEl");h.bodyCellContext=h.getEl("bodyEl");h.inputContext=h.getEl("inputEl");h.errorContext=h.getEl("errorEl");if(Ext.isIE7m&&Ext.isStrict&&h.inputContext){d.ieInputWidthAdjustment=h.inputContext.getPaddingInfo().width+h.inputContext.getBorderInfo().width}h.labelStrategy.prepare(h,e);h.errorStrategy.prepare(h,e)},beginLayoutCycle:function(l){var m=this,j=m.owner,o=l.widthModel,h=j[m.naturalSizingProp],n;m.callParent(arguments);if(o.shrinkWrap){m.beginLayoutShrinkWrap(l)}else{if(o.natural){if(typeof h=="number"&&!j.inputWidth){m.beginLayoutFixed(l,(n=h*6.5+20),"px")}else{m.beginLayoutShrinkWrap(l)}l.setWidth(n,false)}else{m.beginLayoutFixed(l,"100","%")}}},beginLayoutFixed:function(o,h,m){var j=o.target,n=j.inputEl,l=j.inputWidth;j.el.setStyle("table-layout","fixed");j.bodyEl.setStyle("width",h+m);if(n){if(l){n.setStyle("width",l+"px")}else{n.setStyle("width",j.stretchInputElFixed?"100%":"")}}o.isFixed=true},beginLayoutShrinkWrap:function(e){var h=e.target,l=h.inputEl,j=h.inputWidth;if(l&&l.dom){l.dom.removeAttribute("size");if(j){l.setStyle("width",j+"px")}else{l.setStyle("width","")}}h.el.setStyle("table-layout","auto");h.bodyEl.setStyle("width","")},finishedLayout:function(c){var d=this.owner;this.callParent(arguments);c.labelStrategy.finishedLayout(c,d);c.errorStrategy.finishedLayout(c,d)},calculateOwnerHeightFromContentHeight:function(c,d){return d},measureContentHeight:function(c){return c.el.getHeight()},measureContentWidth:function(c){return c.el.getWidth()},measureLabelErrorHeight:function(c){return c.labelStrategy.getHeight(c)+c.errorStrategy.getHeight(c)},onFocus:function(){this.getErrorStrategy().onFocus(this.owner)},getLabelStrategy:function(){var d=this,h=d.labelStrategies,e=d.owner.labelAlign;return h[e]||h.base},getErrorStrategy:function(){var l=this,h=l.owner,j=l.errorStrategies,e=h.msgTarget;return !h.preventMark&&Ext.isString(e)?(j[e]||j.elementId):j.none},labelStrategies:(function(){var c={prepare:function(h,a){var l=a.labelCls+"-"+a.labelAlign,j=a.labelEl;if(j){j.addCls(l)}},getHeight:function(){return 0},finishedLayout:Ext.emptyFn};return{base:c,top:Ext.applyIf({getHeight:function(h){var l=h.labelContext,j=l.props,a=j.height;if(a===undefined){j.height=a=l.el.getHeight()+l.getMarginInfo().height}return a}},c),left:c,right:c}}()),errorStrategies:(function(){function n(d){var c=Ext.layout.component.field.Field.tip,a;if(c&&c.isVisible()){a=c.activeTarget;if(a&&a.el===d.getActionEl().dom){c.toFront(true)}}}var o=Ext.applyIf,h=Ext.emptyFn,j=Ext.baseCSSPrefix+"form-invalid-icon",l,m={prepare:function(a,d){var c=d.errorEl;if(c){c.setDisplayed(false)}},getHeight:function(){return 0},onFocus:h,finishedLayout:h};return{none:m,side:o({prepare:function(c,e){var q=e.errorEl,d=e.sideErrorCell,p=e.hasActiveError(),a;if(!l){l=(a=Ext.getBody().createChild({style:"position:absolute",cls:j})).getWidth();a.remove()}q.addCls(j);q.set({"data-errorqtip":e.getActiveError()||""});if(e.autoFitErrors){q.setDisplayed(p)}else{q.setVisible(p)}if(d&&e.autoFitErrors){d.setDisplayed(p)}e.bodyEl.dom.colSpan=e.getBodyColspan();Ext.layout.component.field.Field.initTip()},onFocus:n},m),under:o({prepare:function(c,e){var a=e.errorEl,d=Ext.baseCSSPrefix+"form-invalid-under";a.addCls(d);a.setDisplayed(e.hasActiveError())},getHeight:function(a){var e=0,d,c;if(a.target.hasActiveError()){d=a.errorContext;c=d.props;e=c.height;if(e===undefined){c.height=e=d.el.getHeight()}}return e}},m),qtip:o({prepare:function(a,c){Ext.layout.component.field.Field.initTip();c.getActionEl().dom.setAttribute("data-errorqtip",c.getActiveError()||"")},onFocus:n},m),title:o({prepare:function(a,c){c.getActionEl().dom.setAttribute("title",c.getActiveError()||"")}},m),elementId:o({prepare:function(c,d){var a=Ext.fly(d.msgTarget);if(a){a.dom.innerHTML=d.getActiveError()||"";a.setDisplayed(d.hasActiveError())}}},m)}}()),statics:{initTip:function(){var c=this.tip;if(!c){c=this.tip=Ext.create("Ext.tip.QuickTip",{ui:"form-invalid"});c.tagConfig=Ext.apply({},{attribute:"errorqtip"},c.tagConfig)}},destroyTip:function(){var c=this.tip;if(c){c.destroy();delete this.tip}}}},0,0,0,0,["layout.field"],0,[Ext.layout.component.field,"Field"],0));(Ext.cmd.derive("Ext.form.field.Base",Ext.Component,{alternateClassName:["Ext.form.Field","Ext.form.BaseField"],fieldSubTpl:['<input id="{id}" type="{type}" role="{role}" {inputAttrTpl}',' size="1"','<tpl if="name"> name="{name}"</tpl>','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','{%if (values.maxLength !== undefined){%} maxlength="{maxLength}"{%}%}','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {editableCls} {inputCls}" autocomplete="off"/>',{disableFormats:true}],subTplInsertions:["inputAttrTpl"],inputType:"text",invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<9)?["change","propertychange","keyup"]:["change","input","textInput","keyup","dragdrop"],ignoreChangeRe:/data\-errorqtip|style\.|className/,checkChangeBuffer:50,componentLayout:"field",readOnly:false,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:true,hasFocus:false,baseCls:Ext.baseCSSPrefix+"field",maskOnDisable:false,stretchInputElFixed:true,initComponent:function(){var c=this;c.callParent();c.subTplData=c.subTplData||{};c.addEvents("specialkey","writeablechange");c.initLabelable();c.initField();if(!c.name){c.name=c.getInputId()}if(c.readOnly){c.addCls(c.readOnlyCls)}c.addCls(Ext.baseCSSPrefix+"form-type-"+c.inputType)},getInputId:function(){return this.inputId||(this.inputId=this.id+"-inputEl")},getSubTplData:function(){var l=this,e=l.inputType,h=l.getInputId(),j;j=Ext.apply({id:h,cmpId:l.id,name:l.name||h,disabled:l.disabled,readOnly:l.readOnly,value:l.getRawValue(),type:e,fieldCls:l.fieldCls,fieldStyle:l.getFieldStyle(),tabIdx:l.tabIndex,inputCls:l.inputCls,typeCls:Ext.baseCSSPrefix+"form-"+(e==="password"?"text":e),role:l.ariaRole},l.subTplData);l.getInsertionRenderData(j,l.subTplInsertions);return j},applyRenderSelectors:function(){var c=this;c.callParent();c.addChildEls("inputEl");c.inputEl=c.el.getById(c.getInputId())},getSubTplMarkup:function(){return this.getTpl("fieldSubTpl").apply(this.getSubTplData())},initRenderTpl:function(){var c=this;if(!c.hasOwnProperty("renderTpl")){c.renderTpl=c.getTpl("labelableRenderTpl")}return c.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(e){var d=this,h=d.inputEl;if(h){h.applyStyles(e)}d.fieldStyle=e},getFieldStyle:function(){var c=this.fieldStyle;return Ext.isObject(c)?Ext.DomHelper.generateStyles(c,null,true):c||""},onRender:function(){this.callParent(arguments);this.renderActiveError()},getFocusEl:function(){return this.inputEl},isFileUpload:function(){return this.inputType==="file"},getSubmitData:function(){var e=this,d=null,h;if(!e.disabled&&e.submitValue){h=e.getSubmitValue();if(h!==null){d={};d[e.getName()]=h}}return d},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var c=this,d=(c.inputEl?c.inputEl.getValue():Ext.value(c.rawValue,""));c.rawValue=d;return d},setRawValue:function(c){var d=this;c=Ext.value(d.transformRawValue(c),"");d.rawValue=c;if(d.inputEl){d.bindPropertyChange(false);d.inputEl.dom.value=c;d.bindPropertyChange(true)}return c},transformRawValue:Ext.identityFn,valueToRaw:function(c){return""+Ext.value(c,"")},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,getValue:function(){var d=this,c=d.rawToValue(d.processRawValue(d.getRawValue()));d.value=c;return c},setValue:function(c){var d=this;d.setRawValue(d.valueToRaw(c));return d.mixins.field.setValue.call(d,c)},onBoxReady:function(){var c=this;c.callParent(arguments);if(c.setReadOnlyOnBoxReady){c.setReadOnly(c.readOnly)}},onDisable:function(){var d=this,c=d.inputEl;d.callParent();if(c){c.dom.disabled=true;if(d.hasActiveError()){d.clearInvalid();d.needsValidateOnEnable=true}}},onEnable:function(){var d=this,c=d.inputEl;d.callParent();if(c){c.dom.disabled=false;if(d.needsValidateOnEnable){delete d.needsValidateOnEnable;d.forceValidation=true;d.isValid();delete d.forceValidation}}},setReadOnly:function(h){var e=this,d=e.inputEl;h=!!h;e[h?"addCls":"removeCls"](e.readOnlyCls);e.readOnly=h;if(d){d.dom.readOnly=h}else{if(e.rendering){e.setReadOnlyOnBoxReady=true}}e.fireEvent("writeablechange",e,h)},fireKey:function(c){if(c.isSpecialKey()){this.fireEvent("specialkey",this,new Ext.EventObjectImpl(c))}},initEvents:function(){var o=this,n=o.inputEl,s,p,m=o.checkChangeEvents,e=o.ignoreChangeRe,t=m.length,q,u;if(n){o.mon(n,Ext.EventManager.getKeyEvent(),o.fireKey,o);s=new Ext.util.DelayedTask(o.checkChange,o);o.onChangeEvent=p=function(a){if(!(a.type=="propertychange"&&e.test(a.browserEvent.propertyName))){s.delay(o.checkChangeBuffer)}};for(q=0;q<t;q++){u=m[q];if(u==="propertychange"){o.usesPropertychange=true}o.mon(n,u,p)}}o.callParent()},doComponentLayout:function(){this.bindPropertyChange(false);this.callParent(arguments);this.bindPropertyChange(true)},bindPropertyChange:function(h){var d=this,e=d.usesPropertychange;if(e){d[h?"mon":"mun"](d.inputEl,"propertychange",d.onChangeEvent)}},onDirtyChange:function(c){this[c?"addCls":"removeCls"](this.dirtyCls)},isValid:function(){var d=this,e=d.disabled,h=d.forceValidation||!e;return h?d.validateValue(d.processRawValue(d.getRawValue())):e},validateValue:function(e){var h=this,j=h.getErrors(e),l=Ext.isEmpty(j);if(!h.preventMark){if(l){h.clearInvalid()}else{h.markInvalid(j)}}return l},markInvalid:function(j){var e=this,h=e.getActiveError(),l;e.setActiveErrors(Ext.Array.from(j));l=e.getActiveError();if(h!==l){e.setError(l)}},clearInvalid:function(){var c=this,d=c.hasActiveError();delete c.needsValidateOnEnable;c.unsetActiveError();if(d){c.setError("")}},setError:function(l){var e=this,h=e.msgTarget,j;if(e.rendered){if(h=="title"||h=="qtip"){if(e.rendered){j=h=="qtip"?"data-errorqtip":"title"}e.getActionEl().dom.setAttribute(j,l||"")}else{e.updateLayout()}}},renderActiveError:function(){var c=this,d=c.hasActiveError();if(c.inputEl){c.inputEl[d?"addCls":"removeCls"](c.invalidCls+"-field")}c.mixins.labelable.renderActiveError.call(c)},getActionEl:function(){return this.inputEl||this.el}},0,["field"],["component","box","field"],{component:true,box:true,field:true},["widget.field"],[["labelable",Ext.form.Labelable],["field",Ext.form.field.Field]],[Ext.form.field,"Base",Ext.form,"Field",Ext.form,"BaseField"],0));(Ext.cmd.derive("Ext.form.field.VTypes",Ext.Base,(function(){var l=/^[a-zA-Z_]+$/,j=/^[a-zA-Z0-9_]+$/,e=/^(")?(?:[^\."\s])(?:(?:[\.])?(?:[\w\-!#$%&'*+/=?^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,h=/(((^https?)|(^ftp)):\/\/((([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*)|(localhost|LOCALHOST))\/?)/i;return{singleton:true,alternateClassName:"Ext.form.VTypes",email:function(a){return e.test(a)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[\w.\-@'"!#$%&'*+/=?^_`{|}~]/i,url:function(a){return h.test(a)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(a){return l.test(a)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(a){return j.test(a)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),0,0,0,0,0,0,[Ext.form.field,"VTypes",Ext.form,"VTypes"],0));(Ext.cmd.derive("Ext.layout.component.field.Text",Ext.layout.component.field.Field,{type:"textfield",setWidthInDom:true,canGrowWidth:true,beginLayoutCycle:function(c){this.callParent(arguments);if(c.heightModel.shrinkWrap){c.inputContext.el.setStyle("height","")}if(this.owner.grow){this.setWidthInDom=false}},measureContentWidth:function(u){var p=this,v=p.owner,w=p.callParent(arguments),q=u.inputContext,m,n,t,o,s;if(v.grow&&p.canGrowWidth&&!u.state.growHandled){m=v.inputEl;n=Ext.util.Format.htmlEncode(m.dom.value||(v.hasFocus?"":v.emptyText)||"");n+=v.growAppend;t=m.getTextWidth(n)+q.getFrameInfo().width;o=v.growMax;s=Math.min(o,w);o=Math.max(v.growMin,o,s);t=Ext.Number.constrain(t,v.growMin,o);q.setWidth(t);u.state.growHandled=true;q.domBlock(p,"width");w=NaN}return w},publishInnerHeight:function(c,d){c.inputContext.setHeight(d-this.measureLabelErrorHeight(c))},beginLayoutFixed:function(m,j,l){var h=this,n=h.ieInputWidthAdjustment;if(n){h.adjustIEInputPadding(m);if(l==="px"){j-=n}}h.callParent(arguments)},adjustIEInputPadding:function(c){this.owner.bodyEl.setStyle("padding-right",this.ieInputWidthAdjustment+"px")}},0,0,0,0,["layout.textfield"],0,[Ext.layout.component.field,"Text"],0));(Ext.cmd.derive("Ext.form.field.Text",Ext.form.field.Base,{alternateClassName:["Ext.form.TextField","Ext.form.Text"],size:20,growMin:30,growMax:800,growAppend:"W",allowBlank:true,validateBlank:false,allowOnlyWhitespace:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",requiredCls:Ext.baseCSSPrefix+"form-required-field",componentLayout:"textfield",valueContainsPlaceholder:false,ariaRole:"textbox",initComponent:function(){var c=this;if(c.allowOnlyWhitespace===false){c.allowBlank=false}c.callParent();c.addEvents("autosize","keydown","keyup","keypress");c.addStateEvents("change");c.setGrowSizePolicy()},setGrowSizePolicy:function(){if(this.grow){this.shrinkWrap|=1}},initEvents:function(){var c=this,d=c.inputEl;c.callParent();if(c.selectOnFocus||c.emptyText){c.mon(d,"mousedown",c.onMouseDown,c)}if(c.maskRe||(c.vtype&&c.disableKeyFilter!==true&&(c.maskRe=Ext.form.field.VTypes[c.vtype+"Mask"]))){c.mon(d,"keypress",c.filterKeys,c)}if(c.enableKeyEvents){c.mon(d,{scope:c,keyup:c.onKeyUp,keydown:c.onKeyDown,keypress:c.onKeyPress})}},isEqual:function(c,d){return this.isEqualAsString(c,d)},onChange:function(c,d){this.callParent(arguments);this.autoSize()},getSubTplData:function(){var h=this,n=h.getRawValue(),l=h.emptyText&&n.length<1,j=h.maxLength,m;if(h.enforceMaxLength){if(j===Number.MAX_VALUE){j=undefined}}else{j=undefined}if(l){if(Ext.supports.Placeholder){m=h.emptyText}else{n=h.emptyText;h.valueContainsPlaceholder=true}}return Ext.apply(h.callParent(),{maxLength:j,readOnly:h.readOnly,placeholder:m,value:n,fieldCls:h.fieldCls+((l&&(m||n))?" "+h.emptyCls:"")+(h.allowBlank?"":" "+h.requiredCls)})},afterRender:function(){this.autoSize();this.callParent()},onMouseDown:function(c){var d=this;if(!d.hasFocus){d.mon(d.inputEl,"mouseup",Ext.emptyFn,d,{single:true,preventDefault:true})}},processRawValue:function(e){var h=this,j=h.stripCharsRe,l;if(j){l=e.replace(j,"");if(l!==e){h.setRawValue(l);e=l}}return e},onDisable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable="on"}},onEnable:function(){this.callParent();if(Ext.isIE){this.inputEl.dom.unselectable=""}},onKeyDown:function(c){this.fireEvent("keydown",this,c)},onKeyUp:function(c){this.fireEvent("keyup",this,c)},onKeyPress:function(c){this.fireEvent("keypress",this,c)},reset:function(){this.callParent();this.applyEmptyText()},applyEmptyText:function(){var d=this,e=d.emptyText,h;if(d.rendered&&e){h=d.getRawValue().length<1&&!d.hasFocus;if(Ext.supports.Placeholder){d.inputEl.dom.placeholder=e}else{if(h){d.setRawValue(e);d.valueContainsPlaceholder=true}}if(h){d.inputEl.addCls(d.emptyCls)}d.autoSize()}},afterFirstLayout:function(){this.callParent();if(Ext.isIE&&this.disabled){var c=this.inputEl;if(c){c.dom.unselectable="on"}}},beforeFocus:function(){var e=this,l=e.inputEl,h=e.emptyText,j;e.callParent(arguments);if((h&&!Ext.supports.Placeholder)&&(l.dom.value===e.emptyText&&e.valueContainsPlaceholder)){e.setRawValue("");j=true;l.removeCls(e.emptyCls);e.valueContainsPlaceholder=false}else{if(Ext.supports.Placeholder){l.removeCls(e.emptyCls)}}if(e.selectOnFocus||j){if(Ext.isWebKit){if(!e.inputFocusTask){e.inputFocusTask=new Ext.util.DelayedTask(e.focusInput,e)}e.inputFocusTask.delay(1)}else{e.focusInput()}}},focusInput:function(){var c=this.inputEl;if(c){c=c.dom;if(c){c.select()}}},onFocus:function(){var c=this;c.getFocusTask().cancel();c.callParent(arguments);if(c.emptyText){c.autoSize()}},postBlur:function(){var c=this.inputFocusTask;this.callParent(arguments);this.applyEmptyText();if(c){c.cancel()}},filterKeys:function(h){if(h.ctrlKey&&!h.altKey){return}var d=h.getKey(),e=String.fromCharCode(h.getCharCode());if((Ext.isGecko||Ext.isOpera)&&(h.isNavKeyPress()||d===h.BACKSPACE||(d===h.DELETE&&h.button===-1))){return}if((!Ext.isGecko&&!Ext.isOpera)&&h.isSpecialKey()&&!e){return}if(!this.maskRe.test(e)){h.stopEvent()}},getState:function(){return this.addPropertyToState(this.callParent(),"value")},applyState:function(c){this.callParent(arguments);if(c.hasOwnProperty("value")){this.setValue(c.value)}},getRawValue:function(){var c=this,d=c.callParent();if(d===c.emptyText&&c.valueContainsPlaceholder){d=""}return d},setValue:function(d){var e=this,h=e.inputEl;if(h&&e.emptyText&&!Ext.isEmpty(d)){h.removeCls(e.emptyCls);e.valueContainsPlaceholder=false}e.callParent(arguments);e.applyEmptyText();return e},getErrors:function(n){var t=this,p=t.callParent(arguments),y=t.validator,v=t.vtype,s=Ext.form.field.VTypes,q=t.regex,o=Ext.String.format,x,u,w;n=n||t.processRawValue(t.getRawValue());if(Ext.isFunction(y)){x=y.call(t,n);if(x!==true){p.push(x)}}u=t.allowOnlyWhitespace?n:Ext.String.trim(n);if(u.length<1||(n===t.emptyText&&t.valueContainsPlaceholder)){if(!t.allowBlank){p.push(t.blankText)}if(!t.validateBlank){return p}w=true}if(!w&&n.length<t.minLength){p.push(o(t.minLengthText,t.minLength))}if(n.length>t.maxLength){p.push(o(t.maxLengthText,t.maxLength))}if(v){if(!s[v](n,t)){p.push(t.vtypeText||s[v+"Text"])}}if(q&&!q.test(n)){p.push(t.regexText||t.invalidText)}return p},selectText:function(l,j){var m=this,o=m.getRawValue(),n=m.inputEl.dom,h;if(o.length>0){l=(l===undefined)?0:l;j=(j===undefined)?o.length:j;if(n.setSelectionRange){n.setSelectionRange(l,j)}else{if(n.createTextRange){h=n.createTextRange();h.moveStart("character",l);h.moveEnd("character",j-o.length);h.select()}}}},autoSize:function(){var c=this;if(c.grow&&c.rendered){c.autoSizing=true;c.updateLayout()}},afterComponentLayout:function(){var c=this,d;c.callParent(arguments);if(c.autoSizing){d=c.inputEl.getWidth();if(d!==c.lastInputWidth){c.fireEvent("autosize",c,d);c.lastInputWidth=d;delete c.autoSizing}}},onDestroy:function(){var c=this;c.callParent();if(c.inputFocusTask){c.inputFocusTask.cancel();c.inputFocusTask=null}}},0,["textfield"],["component","box","field","textfield"],{component:true,box:true,field:true,textfield:true},["widget.textfield"],0,[Ext.form.field,"Text",Ext.form,"TextField",Ext.form,"Text"],0));(Ext.cmd.derive("Ext.layout.component.field.TextArea",Ext.layout.component.field.Text,{type:"textareafield",canGrowWidth:false,naturalSizingProp:"cols",beginLayout:function(c){this.callParent(arguments);c.target.inputEl.setStyle("height","")},measureContentHeight:function(v){var s=this,w=s.owner,m=s.callParent(arguments),u,o,p,q,t,n;if(w.grow&&!v.state.growHandled){u=v.inputContext;o=w.inputEl;t=o.getWidth(true);p=Ext.util.Format.htmlEncode(o.dom.value)||"&#160;";p+=w.growAppend;p=p.replace(/\n/g,"<br/>");n=Ext.util.TextMetrics.measure(o,p,t).height+u.getBorderInfo().height+u.getPaddingInfo().height;n=Ext.Number.constrain(n,w.growMin,w.growMax);u.setHeight(n);v.state.growHandled=true;u.domBlock(s,"height");m=NaN}return m}},0,0,0,0,["layout.textareafield"],0,[Ext.layout.component.field,"TextArea"],0));(Ext.cmd.derive("Ext.form.field.TextArea",Ext.form.field.Text,{alternateClassName:"Ext.form.TextArea",fieldSubTpl:['<textarea id="{id}" role="{role}" {inputAttrTpl}','<tpl if="name"> name="{name}"</tpl>','<tpl if="rows"> rows="{rows}" </tpl>','<tpl if="cols"> cols="{cols}" </tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="size"> size="{size}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>',' class="{fieldCls} {typeCls} {inputCls}" ','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' autocomplete="off">\n','<tpl if="value">{[Ext.util.Format.htmlEncode(values.value)]}</tpl>',"</textarea>",{disableFormats:true}],growMin:60,growMax:1000,growAppend:"\n-",cols:20,rows:4,enterIsSpecial:false,preventScrollbars:false,componentLayout:"textareafield",setGrowSizePolicy:Ext.emptyFn,returnRe:/\r/g,inputCls:Ext.baseCSSPrefix+"form-textarea",getSubTplData:function(){var h=this,d=h.getFieldStyle(),e=h.callParent();if(h.grow){if(h.preventScrollbars){e.fieldStyle=(d||"")+";overflow:hidden;height:"+h.growMin+"px"}}Ext.applyIf(e,{cols:h.cols,rows:h.rows});return e},afterRender:function(){var c=this;c.callParent(arguments);c.needsMaxCheck=c.enforceMaxLength&&c.maxLength!==Number.MAX_VALUE&&!Ext.supports.TextAreaMaxLength;if(c.needsMaxCheck){c.inputEl.on("paste",c.onPaste,c)}},transformRawValue:function(c){return this.stripReturns(c)},transformOriginalValue:function(c){return this.stripReturns(c)},getValue:function(){return this.stripReturns(this.callParent())},valueToRaw:function(c){c=this.stripReturns(c);return this.callParent([c])},stripReturns:function(c){if(c&&typeof c==="string"){c=c.replace(this.returnRe,"")}return c},onPaste:function(c){var d=this;if(!d.pasteTask){d.pasteTask=new Ext.util.DelayedTask(d.pasteCheck,d)}d.pasteTask.delay(1)},pasteCheck:function(){var d=this,h=d.getValue(),e=d.maxLength;if(h.length>e){h=h.substr(0,e);d.setValue(h)}},fireKey:function(j){var e=this,h=j.getKey(),l;if(j.isSpecialKey()&&(e.enterIsSpecial||(h!==j.ENTER||j.hasModifier()))){e.fireEvent("specialkey",e,j)}if(e.needsMaxCheck&&h!==j.BACKSPACE&&h!==j.DELETE&&!j.isNavKeyPress()&&!e.isCutCopyPasteSelectAll(j,h)){l=e.getValue();if(l.length>=e.maxLength){j.stopEvent()}}},isCutCopyPasteSelectAll:function(c,d){if(c.ctrlKey){return d===c.A||d===c.C||d===c.V||d===c.X}return false},autoSize:function(){var e=this,j=e.inputEl,h,l;if(e.grow&&e.rendered&&e.getSizeModel().height.auto){l=Ext.util.Format.htmlEncode(j.dom.value)||"&#160;";l+=e.growAppend;l=l.replace(/\n/g,"<br/>");h=Ext.util.TextMetrics.measure(j,l,j.getWidth(true)).height+j.getPadding("tb");h=e.currentHeight=Math.min(Math.max(h,e.growMin),e.growMax);e.bodyEl.setHeight(h);e.updateLayout();e.fireEvent("autosize",e,h);e.lastInputHeight=h}},beforeDestroy:function(){var c=this.pasteTask;if(c){c.cancel();this.pasteTask=null}this.callParent()}},0,["textarea","textareafield"],["component","box","field","textfield","textareafield","textarea"],{component:true,box:true,field:true,textfield:true,textareafield:true,textarea:true},["widget.textarea","widget.textareafield"],0,[Ext.form.field,"TextArea",Ext.form,"TextArea"],0));(Ext.cmd.derive("Ext.form.field.Display",Ext.form.field.Base,{alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],ariaRole:"textbox",fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl}','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls}">{value}</div>',{compiled:true,disableFormats:true}],readOnly:true,fieldCls:Ext.baseCSSPrefix+"form-display-field",fieldBodyCls:Ext.baseCSSPrefix+"form-display-field-body",htmlEncode:false,noWrap:false,validateOnChange:false,initEvents:Ext.emptyFn,submitValue:false,valueToRaw:function(c){if(!c&&c!==0){return""}else{return c}},isDirty:function(){return false},isValid:function(){return true},validate:function(){return true},getRawValue:function(){return this.rawValue},setRawValue:function(c){var d=this;c=Ext.value(c,"");d.rawValue=c;if(d.rendered){d.inputEl.dom.innerHTML=d.getDisplayValue();d.updateLayout()}return c},getDisplayValue:function(){var e=this,d=this.getRawValue(),h;if(e.renderer){h=e.renderer.call(e.scope||e,d,e)}else{h=e.htmlEncode?Ext.util.Format.htmlEncode(d):d}return h},getSubTplData:function(){var c=this.callParent(arguments);c.value=this.getDisplayValue();return c}},0,["displayfield"],["component","box","field","displayfield"],{component:true,box:true,field:true,displayfield:true},["widget.displayfield"],0,[Ext.form.field,"Display",Ext.form,"DisplayField",Ext.form,"Display"],0));(Ext.cmd.derive("Ext.layout.container.Anchor",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,manageOverflow:true,beginLayoutCycle:function(s){var m=this,u=0,o,l,p,q,t,n;m.callParent(arguments);p=s.childItems;t=p.length;for(q=0;q<t;++q){l=p[q];o=l.target.anchorSpec;if(o){if(l.widthModel.calculated&&o.right){u|=1}if(l.heightModel.calculated&&o.bottom){u|=2}if(u==3){break}}}s.anchorDimensions=u},calculateItems:function(C,I){var u=this,z=C.childItems,D=z.length,w=I.gotHeight,B=I.gotWidth,E=I.height,G=I.width,H=(B?1:0)|(w?2:0),v=C.anchorDimensions,y,J,x,t,A,F;if(!v){return true}for(A=0;A<D;A++){J=z[A];x=J.getMarginInfo();y=J.target.anchorSpec;if(B&&J.widthModel.calculated){F=y.right(G)-x.width;F=u.adjustWidthAnchor(F,J);J.setWidth(F)}if(w&&J.heightModel.calculated){t=y.bottom(E)-x.height;t=u.adjustHeightAnchor(t,J);J.setHeight(t)}}return(H&v)===v},anchorFactory:{offset:function(c){return function(a){return a+c}},ratio:function(c){return function(a){return Math.floor(a*c)}},standard:function(c){return function(a){return a-c}}},parseAnchor:function(m,h,a){if(m&&m!="none"){var l=this.anchorFactory,j;if(this.parseAnchorRE.test(m)){return l.standard(a-h)}if(m.indexOf("%")!=-1){return l.ratio(parseFloat(m.replace("%",""))*0.01)}j=parseInt(m,10);if(!isNaN(j)){return l.offset(j)}}return null},adjustWidthAnchor:function(c,d){return c},adjustHeightAnchor:function(c,d){return c},configureItem:function(n){var o=this,l=o.owner,p=n.anchor,j,q,m;o.callParent(arguments);if(!n.anchor&&n.items&&!Ext.isNumber(n.width)&&!(Ext.isIE6&&Ext.isStrict)){n.anchor=p=o.defaultAnchor}if(l.anchorSize){if(typeof l.anchorSize=="number"){q=l.anchorSize}else{q=l.anchorSize.width;m=l.anchorSize.height}}else{q=l.initialConfig.width;m=l.initialConfig.height}if(p){j=p.split(" ");n.anchorSpec={right:o.parseAnchor(j[0],n.initialConfig.width,q),bottom:o.parseAnchor(j[1],n.initialConfig.height,m)}}},sizePolicy:{$:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},b:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},r:{$:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},b:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}}},getItemSizePolicy:function(n){var l=n.anchorSpec,j="$",m=this.sizePolicy,h;if(l){h=this.owner.getSizeModel();if(l.right&&!h.width.shrinkWrap){m=m.r}if(l.bottom&&!h.height.shrinkWrap){j="b"}}return m[j]}},0,0,0,0,["layout.anchor"],0,[Ext.layout.container,"Anchor",Ext.layout,"AnchorLayout"],0));(Ext.cmd.derive("Ext.window.MessageBox",Ext.window.Window,{OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:Ext.baseCSSPrefix+"message-box-info",WARNING:Ext.baseCSSPrefix+"message-box-warning",QUESTION:Ext.baseCSSPrefix+"message-box-question",ERROR:Ext.baseCSSPrefix+"message-box-error",hideMode:"offsets",closeAction:"hide",resizable:false,title:"&#160;",defaultMinWidth:250,defaultMaxWidth:600,defaultMinHeight:110,defaultMaxHeight:500,minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,constrain:true,cls:[Ext.baseCSSPrefix+"message-box",Ext.baseCSSPrefix+"hide-offsets"],layout:{type:"vbox",align:"stretch"},shrinkWrapDock:true,defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},iconHeight:35,iconWidth:50,ariaRole:"alertdialog",makeButton:function(d){var c=this.buttonIds[d];return new Ext.button.Button({handler:this.btnCallback,itemId:c,scope:this,text:this.buttonText[c],minWidth:75})},btnCallback:function(h){var e=this,l,j;if(e.cfg.prompt||e.cfg.multiline){if(e.cfg.multiline){j=e.textArea}else{j=e.textField}l=j.getValue();j.reset()}e.hide();e.userCallback(h.itemId,l,e.cfg)},hide:function(){var c=this,d=c.cfg?c.cfg.cls:"";c.progressBar.reset();if(d){c.removeCls(d)}c.callParent(arguments)},constructor:function(d){var c=this;c.callParent(arguments);c.minWidth=c.defaultMinWidth=(c.minWidth||c.defaultMinWidth);c.maxWidth=c.defaultMaxWidth=(c.maxWidth||c.defaultMaxWidth);c.minHeight=c.defaultMinHeight=(c.minHeight||c.defaultMinHeight);c.maxHeight=c.defaultMaxHeight=(c.maxHeight||c.defaultMaxHeight)},initComponent:function(j){var l=this,h=l.id,m,n;l.title=l.title||"&#160;";l.iconCls=l.iconCls||"";l.topContainer=new Ext.container.Container({layout:"hbox",padding:10,style:{overflow:"hidden"},items:[l.iconComponent=new Ext.Component({width:l.iconWidth,height:l.iconHeight}),l.promptContainer=new Ext.container.Container({flex:1,layout:"anchor",items:[l.msg=new Ext.form.field.Display({id:h+"-displayfield",cls:l.baseCls+"-text"}),l.textField=new Ext.form.field.Text({id:h+"-textfield",anchor:"100%",enableKeyEvents:true,listeners:{keydown:l.onPromptKey,scope:l}}),l.textArea=new Ext.form.field.TextArea({id:h+"-textarea",anchor:"100%",height:75})]})]});l.progressBar=new Ext.ProgressBar({id:h+"-progressbar",margin:"0 10 10 10"});l.items=[l.topContainer,l.progressBar];l.msgButtons=[];for(m=0;m<4;m++){n=l.makeButton(m);l.msgButtons[n.itemId]=n;l.msgButtons.push(n)}l.bottomTb=new Ext.toolbar.Toolbar({id:h+"-toolbar",ui:"footer",dock:"bottom",layout:{pack:"center"},items:[l.msgButtons[0],l.msgButtons[1],l.msgButtons[2],l.msgButtons[3]]});l.dockedItems=[l.bottomTb];l.on("close",l.onClose,l);l.callParent()},onClose:function(){var c=this.header.child("[type=close]");c.itemId="cancel";this.btnCallback(c);delete c.itemId},onPromptKey:function(e,h){var d=this;if(h.keyCode===h.RETURN||h.keyCode===10){if(d.msgButtons.ok.isVisible()){d.msgButtons.ok.handler.call(d,d.msgButtons.ok)}else{if(d.msgButtons.yes.isVisible()){d.msgButtons.yes.handler.call(d,d.msgButtons.yes)}}}},reconfigure:function(K){var x=this,A=0,I=true,v=x.buttonText,J=x.resizer,C=x.header,y=C&&!C.isHeader,u,w,E,G,B,z,H,M,F,D;x.updateButtonText();K=K||{};x.cfg=K;if(K.width){E=K.width}if(K.height){G=K.height}x.minWidth=K.minWidth||x.defaultMinWidth;x.maxWidth=K.maxWidth||x.defaultMaxWidth;x.minHeight=K.minHeight||x.defaultMinHeight;x.maxHeight=K.maxHeight||x.defaultMaxHeight;if(J){u=J.resizeTracker;J.minWidth=u.minWidth=x.minWidth;J.maxWidth=u.maxWidth=x.maxWidth;J.minHeight=u.minHeight=x.minHeight;J.maxHeight=u.maxHeight=x.maxHeight}delete x.defaultFocus;if(K.defaultFocus){x.defaultFocus=K.defaultFocus}x.animateTarget=K.animateTarget||undefined;x.modal=K.modal!==false;x.setTitle(K.title||(y&&C.title)||x.title);x.setIconCls(K.iconCls||(y&&C.iconCls)||x.iconCls);if(Ext.isObject(K.buttons)){x.buttonText=K.buttons;A=0}else{x.buttonText=K.buttonText||x.buttonText;A=Ext.isNumber(K.buttons)?K.buttons:0}A=A|x.updateButtonText();x.buttonText=v;Ext.suspendLayouts();delete x.width;delete x.height;if(E||G){if(E){x.setWidth(E)}if(G){x.setHeight(G)}}x.hidden=false;if(!x.rendered){x.render(Ext.getBody())}x.closable=K.closable!==false&&!K.wait;C=x.header;if(C){C.child("[type=close]").setVisible(x.closable);if(!K.title&&!x.closable&&!K.iconCls){C.hide()}else{C.show()}}x.liveDrag=!K.proxyDrag;x.userCallback=Ext.Function.bind(K.callback||K.fn||Ext.emptyFn,K.scope||Ext.global);x.setIcon(K.icon,K.iconWidth,K.iconHeight);M=x.msg;if(K.msg){M.setValue(K.msg);M.show()}else{M.hide()}z=x.textArea;H=x.textField;if(K.prompt||K.multiline){x.multiline=K.multiline;if(K.multiline){z.setValue(K.value);z.setHeight(K.defaultTextHeight||x.defaultTextHeight);z.show();H.hide();x.defaultFocus=z}else{H.setValue(K.value);z.hide();H.show();x.defaultFocus=H}}else{z.hide();H.hide()}F=x.progressBar;if(K.progress||K.wait){F.show();x.updateProgress(0,K.progressText);if(K.wait===true){F.wait(K.waitConfig)}}else{F.hide()}D=x.msgButtons;for(B=0;B<4;B++){if(A&Math.pow(2,B)){if(!x.defaultFocus){x.defaultFocus=D[B]}D[B].show();I=false}else{D[B].hide()}}if(I){x.bottomTb.hide()}else{x.bottomTb.show()}Ext.resumeLayouts(true)},updateButtonText:function(){var m=this,n=m.buttonText,h=0,l,j;for(l in n){if(n.hasOwnProperty(l)){j=m.msgButtons[l];if(j){if(m.cfg&&m.cfg.buttonText){h=h|Math.pow(2,Ext.Array.indexOf(m.buttonIds,l))}if(j.text!=n[l]){j.setText(n[l])}}}}return h},show:function(e){var h=this,d;e=e||{};if(Ext.AbstractComponent.layoutSuspendCount){Ext.on({resumelayouts:function(){h.show(e)},single:true});return h}h.reconfigure(e);if(e.cls){h.addCls(e.cls)}d=h.query("textfield:not([hidden]),textarea:not([hidden]),button:not([hidden])");h.preventFocusOnActivate=!d.length;h.hidden=true;h.callParent();return h},onShow:function(){this.callParent(arguments);this.center()},updateText:function(c){this.msg.setValue(c)},setIcon:function(n,o,j){var m=this,l=m.iconComponent,h=m.messageIconCls;if(h){l.removeCls(h)}if(n){l.show();l.setSize(o||m.iconWidth,j||m.iconHeight);l.addCls(Ext.baseCSSPrefix+"dlg-icon");l.addCls(m.messageIconCls=n)}else{l.removeCls(Ext.baseCSSPrefix+"dlg-icon");l.hide()}return m},updateProgress:function(d,e,h){this.progressBar.updateProgress(d,e);if(h){this.updateText(h)}return this},onEsc:function(){if(this.closable!==false){this.callParent(arguments)}},confirm:function(h,j,l,e){if(Ext.isString(h)){h={title:h,icon:this.QUESTION,msg:j,buttons:this.YESNO,callback:l,scope:e}}return this.show(h)},prompt:function(h,l,n,o,j,m){if(Ext.isString(h)){h={prompt:true,title:h,minWidth:this.minPromptWidth,msg:l,buttons:this.OKCANCEL,callback:n,scope:o,multiline:j,value:m}}return this.show(h)},wait:function(e,h,d){if(Ext.isString(e)){e={title:h,msg:e,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:d}}return this.show(e)},alert:function(h,j,l,e){if(Ext.isString(h)){h={title:h,msg:j,buttons:this.OK,fn:l,scope:e,minWidth:this.minWidth}}return this.show(h)},progress:function(e,h,d){if(Ext.isString(e)){e={title:e,msg:h,progress:true,progressText:d}}return this.show(e)}},1,["messagebox"],["component","box","container","panel","window","messagebox"],{component:true,box:true,container:true,panel:true,window:true,messagebox:true},["widget.messagebox"],0,[Ext.window,"MessageBox"],function(){Ext.MessageBox=Ext.Msg=new this()}));(Ext.cmd.derive("Ext.form.Basic",Ext.util.Observable,{alternateClassName:"Ext.form.BasicForm",taskDelay:10,constructor:function(e,l){var j=this,h;j.owner=e;j.checkValidityTask=new Ext.util.DelayedTask(j.checkValidity,j);j.checkDirtyTask=new Ext.util.DelayedTask(j.checkDirty,j);j.monitor=new Ext.container.Monitor({selector:"[isFormField]:not([excludeForm])",scope:j,addHandler:j.onFieldAdd,removeHandler:j.onFieldRemove,invalidateHandler:j.onMonitorInvalidate});j.monitor.bind(e);Ext.apply(j,l);if(Ext.isString(j.paramOrder)){j.paramOrder=j.paramOrder.split(/[\s,|]/)}h=j.reader;if(h&&!h.isReader){if(typeof h==="string"){h={type:h}}j.reader=Ext.createByAlias("reader."+h.type,h)}h=j.errorReader;if(h&&!h.isReader){if(typeof h==="string"){h={type:h}}j.errorReader=Ext.createByAlias("reader."+h.type,h)}j.addEvents("beforeaction","actionfailed","actioncomplete","validitychange","dirtychange");j.callParent()},initialize:function(){this.initialized=true;this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:false,waitTitle:"Please Wait...",trackResetOnLoad:false,wasDirty:false,destroy:function(){var c=this,d=c.monitor;if(d){d.unbind();c.monitor=null}c.clearListeners();c.checkValidityTask.cancel();c.checkDirtyTask.cancel();c.isDestroyed=true},onFieldAdd:function(c){var d=this;d.mon(c,"validitychange",d.checkValidityDelay,d);d.mon(c,"dirtychange",d.checkDirtyDelay,d);d.onMonitorInvalidate()},onFieldRemove:function(c){var d=this;d.mun(c,"validitychange",d.checkValidityDelay,d);d.mun(c,"dirtychange",d.checkDirtyDelay,d);d.onMonitorInvalidate()},onMonitorInvalidate:function(){if(this.initialized){this.checkValidityDelay()}},getFields:function(){return this.monitor.getItems()},getBoundItems:function(){var c=this._boundItems;if(!c||c.getCount()===0){c=this._boundItems=new Ext.util.MixedCollection();c.addAll(this.owner.query("[formBind]"))}return c},hasInvalidField:function(){return !!this.getFields().findBy(function(h){var e=h.preventMark,d;h.preventMark=true;d=h.isValid();h.preventMark=e;return !d})},isValid:function(){var d=this,c;Ext.suspendLayouts();c=d.getFields().filterBy(function(a){return !a.validate()});Ext.resumeLayouts(true);return c.length<1},checkValidity:function(){var c=this,d;if(c.isDestroyed){return}d=!c.hasInvalidField();if(d!==c.wasValid){c.onValidityChange(d);c.fireEvent("validitychange",c,d);c.wasValid=d}},checkValidityDelay:function(){var c=this.taskDelay;if(c){this.checkValidityTask.delay(c)}else{this.checkValidity()}},onValidityChange:function(l){var n=this.getBoundItems(),h,o,j,m;if(n){h=n.items;j=h.length;for(o=0;o<j;o++){m=h[o];if(m.disabled===l){m.setDisabled(!l)}}}},isDirty:function(){return !!this.getFields().findBy(function(c){return c.isDirty()})},checkDirtyDelay:function(){var c=this.taskDelay;if(c){this.checkDirtyTask.delay(c)}else{this.checkDirty()}},checkDirty:function(){var c=this,d;if(c.isDestroyed){return}d=this.isDirty();if(d!==this.wasDirty){this.fireEvent("dirtychange",this,d);this.wasDirty=d}},hasUpload:function(){return !!this.getFields().findBy(function(c){return c.isFileUpload()})},doAction:function(c,d){if(Ext.isString(c)){c=Ext.ClassManager.instantiateByAlias("formaction."+c,Ext.apply({},d,{form:this}))}if(this.fireEvent("beforeaction",this,c)!==false){this.beforeAction(c);Ext.defer(c.run,100,c)}return this},submit:function(e){e=e||{};var d=this,h;if(e.standardSubmit||d.standardSubmit){h="standardsubmit"}else{h=d.api?"directsubmit":"submit"}return d.doAction(h,e)},load:function(c){return this.doAction(this.api?"directload":"load",c)},updateRecord:function(q){q=q||this._record;if(!q){return this}var j=q.fields.items,p=this.getFieldValues(),m={},n=0,l=j.length,o;for(;n<l;++n){o=j[n].name;if(p.hasOwnProperty(o)){m[o]=p[o]}}q.beginEdit();q.set(m);q.endEdit();return this},loadRecord:function(c){this._record=c;return this.setValues(c.getData())},getRecord:function(){return this._record},beforeAction:function(s){var o=this,t=s.waitMsg,l=Ext.baseCSSPrefix+"mask-loading",q=o.getFields().items,p,m=q.length,n,u;for(p=0;p<m;p++){n=q[p];if(n.isFormField&&n.syncValue){n.syncValue()}}if(t){u=o.waitMsgTarget;if(u===true){o.owner.el.mask(t,l)}else{if(u){u=o.waitMsgTarget=Ext.get(u);u.mask(t,l)}else{o.floatingAncestor=o.owner.up("[floating]");if(o.floatingAncestor){o.savePreventFocusOnActivate=o.floatingAncestor.preventFocusOnActivate;o.floatingAncestor.preventFocusOnActivate=true}Ext.MessageBox.wait(t,s.waitTitle||o.waitTitle)}}}},afterAction:function(n,l){var j=this;if(n.waitMsg){var h=Ext.MessageBox,m=j.waitMsgTarget;if(m===true){j.owner.el.unmask()}else{if(m){m.unmask()}else{h.hide()}}}if(j.floatingAncestor){j.floatingAncestor.preventFocusOnActivate=j.savePreventFocusOnActivate}if(l){if(n.reset){j.reset()}Ext.callback(n.success,n.scope||n,[j,n]);j.fireEvent("actioncomplete",j,n)}else{Ext.callback(n.failure,n.scope||n,[j,n]);j.fireEvent("actionfailed",j,n)}},findField:function(c){return this.getFields().findBy(function(a){return a.id===c||a.name===c||a.dataIndex===c})},markInvalid:function(m){var q=this,o,l,e,p,s;function n(d,a){var c=q.findField(d);if(c){c.markInvalid(a)}}if(Ext.isArray(m)){l=m.length;for(o=0;o<l;o++){e=m[o];n(e.id||e.field,e.msg||e.message)}}else{if(m instanceof Ext.data.Errors){l=m.items.length;for(o=0;o<l;o++){e=m.items[o];n(e.field,e.message)}}else{for(s in m){if(m.hasOwnProperty(s)){p=m[s];n(s,p,m)}}}}return this},setValues:function(j){var p=this,l,q,m,n;function o(d,a){var c=p.findField(d);if(c){c.setValue(a);if(p.trackResetOnLoad){c.resetOriginalValue()}}}Ext.suspendLayouts();if(Ext.isArray(j)){q=j.length;for(l=0;l<q;l++){m=j[l];o(m.id,m.value)}}else{Ext.iterate(j,o)}Ext.resumeLayouts(true);return this},getValues:function(y,x,t,v,E){var u={},A=this.getFields().items,s=A.length,B=Ext.isArray,w,C,D,F,G,z;for(z=0;z<s;z++){w=A[z];if(!x||w.isDirty()){C=w[v?"getModelData":"getSubmitData"](t,E);if(Ext.isObject(C)){for(G in C){if(C.hasOwnProperty(G)){D=C[G];if(t&&D===""){D=w.emptyText||""}if(!w.isRadio){if(u.hasOwnProperty(G)){F=u[G];if(!B(F)){F=u[G]=[F]}if(B(D)){u[G]=F.concat(D)}else{F.push(D)}}else{u[G]=D}}else{u[G]=u[G]||D}}}}}}if(y){u=Ext.Object.toQueryString(u)}return u},getFieldValues:function(c){return this.getValues(false,c,false,true)},clearInvalid:function(){Ext.suspendLayouts();var e=this,h=e.getFields().items,l,j=h.length;for(l=0;l<j;l++){h[l].clearInvalid()}Ext.resumeLayouts(true);return e},reset:function(h){Ext.suspendLayouts();var n=this,j=n.getFields().items,m,l=j.length;for(m=0;m<l;m++){j[m].reset()}Ext.resumeLayouts(true);if(h===true){delete n._record}return n},applyToFields:function(l){var h=this.getFields().items,e,j=h.length;for(e=0;e<j;e++){Ext.apply(h[e],l)}return this},applyIfToFields:function(l){var h=this.getFields().items,e,j=h.length;for(e=0;e<j;e++){Ext.applyIf(h[e],l)}return this}},1,0,0,0,0,0,[Ext.form,"Basic",Ext.form,"BasicForm"],0));(Ext.cmd.derive("Ext.form.FieldAncestor",Ext.Base,{xhooks:{initHierarchyState:function(c){if(this.fieldDefaults){if(c.fieldDefaults){c.fieldDefaults=Ext.apply(Ext.Object.chain(c.fieldDefaults),this.fieldDefaults)}else{c.fieldDefaults=this.fieldDefaults}}}},initFieldAncestor:function(){var c=this;c.addEvents("fieldvaliditychange","fielderrorchange");c.monitor=new Ext.container.Monitor({scope:c,selector:"[isFormField]:not([excludeForm])",addHandler:c.onChildFieldAdd,removeHandler:c.onChildFieldRemove});c.initFieldDefaults()},initMonitor:function(){this.monitor.bind(this)},onChildFieldAdd:function(c){var d=this;d.mon(c,"errorchange",d.handleFieldErrorChange,d);d.mon(c,"validitychange",d.handleFieldValidityChange,d)},onChildFieldRemove:function(c){var d=this;d.mun(c,"errorchange",d.handleFieldErrorChange,d);d.mun(c,"validitychange",d.handleFieldValidityChange,d)},initFieldDefaults:function(){if(!this.fieldDefaults){this.fieldDefaults={}}},handleFieldValidityChange:function(h,d){var e=this;if(h!==e){e.fireEvent("fieldvaliditychange",e,h,d);e.onFieldValidityChange(h,d)}},handleFieldErrorChange:function(d,e){var h=this;if(d!==h){h.fireEvent("fielderrorchange",h,d,e);h.onFieldErrorChange(d,e)}},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn,beforeDestroy:function(){this.monitor.unbind();this.callParent()}},0,0,0,0,0,0,[Ext.form,"FieldAncestor"],0));(Ext.cmd.derive("Ext.layout.component.field.FieldContainer",Ext.layout.component.field.Field,{type:"fieldcontainer",waitForOuterHeightInDom:true,waitForOuterWidthInDom:true,beginLayout:function(c){var d=this.owner;this.callParent(arguments);c.hasRawContent=true;d.bodyEl.setStyle("height","");d.containerEl.setStyle("height","");c.containerElContext=c.getEl("containerEl")},measureContentHeight:function(c){return c.hasDomProp("containerLayoutDone")?this.callParent(arguments):NaN},measureContentWidth:function(c){return c.hasDomProp("containerLayoutDone")?this.callParent(arguments):NaN},publishInnerWidth:function(l,e){var j=l.bodyCellContext,h=j.el.getWidth()-j.getPaddingInfo().width;j.setWidth(h,false);l.containerElContext.setWidth(h,false)},publishInnerHeight:function(e,h){var l=e.bodyCellContext,j=e.containerElContext;h-=this.measureLabelErrorHeight(e)+l.getPaddingInfo().height;l.setHeight(h);j.setHeight(h)}},0,0,0,0,["layout.fieldcontainer"],0,[Ext.layout.component.field,"FieldContainer"],0));(Ext.cmd.derive("Ext.form.FieldContainer",Ext.container.Container,{componentLayout:"fieldcontainer",componentCls:Ext.baseCSSPrefix+"form-fieldcontainer",childEls:["containerEl"],combineLabels:false,labelConnector:", ",combineErrors:false,maskOnDisable:false,invalidCls:"",fieldSubTpl:['<div id="{id}-containerEl" class="{containerElCls}" role="presentation">',"{%this.renderContainer(out,values)%}","</div>"],initComponent:function(){var c=this;c.initLabelable();c.initFieldAncestor();c.callParent();c.initMonitor()},getOverflowEl:function(){return this.containerEl},onAdd:function(c){var d=this;if(c.isLabelable&&Ext.isGecko&&d.layout.type==="absolute"&&!d.hideLabel&&d.labelAlign!=="top"){c.x+=(d.labelWidth+d.labelPad)}d.callParent(arguments);if(c.isLabelable&&d.combineLabels){c.oldHideLabel=c.hideLabel;c.hideLabel=true}d.updateLabel()},onRemove:function(h,e){var d=this;d.callParent(arguments);if(!e){if(h.isLabelable&&d.combineLabels){h.hideLabel=h.oldHideLabel}d.updateLabel()}},initRenderTpl:function(){var c=this;if(!c.hasOwnProperty("renderTpl")){c.renderTpl=c.getTpl("labelableRenderTpl")}return c.callParent()},initRenderData:function(){var d=this,c=d.callParent();c.containerElCls=d.containerElCls;return Ext.applyIf(c,d.getLabelableRenderData())},getFieldLabel:function(){var c=this.fieldLabel||"";if(!c&&this.combineLabels){c=Ext.Array.map(this.query("[isFieldLabelable]"),function(a){return a.getFieldLabel()}).join(this.labelConnector)}return c},getSubTplData:function(){var c=this.initRenderData();Ext.apply(c,this.subTplData);return c},getSubTplMarkup:function(){var h=this,e=h.getTpl("fieldSubTpl"),d;if(!e.renderContent){h.setupRenderTpl(e)}d=e.apply(h.getSubTplData());return d},updateLabel:function(){var c=this,d=c.labelEl;if(d){c.setFieldLabel(c.getFieldLabel())}},onFieldErrorChange:function(m,h){if(this.combineErrors){var n=this,l=n.getActiveError(),o=Ext.Array.filter(n.query("[isFormField]"),function(a){return a.hasActiveError()}),j=n.getCombinedErrors(o);if(j){n.setActiveErrors(j)}else{n.unsetActiveError()}if(l!==n.getActiveError()){n.doComponentLayout()}}},getCombinedErrors:function(t){var n=[],v,a=t.length,p,u,o,w,s,q;for(v=0;v<a;v++){p=t[v];u=p.getActiveErrors();w=u.length;for(o=0;o<w;o++){s=u[o];q=p.getFieldLabel();n.push((q?q+": ":"")+s)}}return n},getTargetEl:function(){return this.containerEl},applyTargetCls:function(c){var d=this.containerElCls;this.containerElCls=d?d+" "+c:c}},0,["fieldcontainer"],["component","box","container","fieldcontainer"],{component:true,box:true,container:true,fieldcontainer:true},["widget.fieldcontainer"],[["labelable",Ext.form.Labelable],["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldContainer"],0));(Ext.cmd.derive("Ext.layout.container.CheckboxGroup",Ext.layout.container.Container,{autoFlex:true,type:"checkboxgroup",createsInnerCt:true,childEls:["innerCt"],renderTpl:['<table id="{ownerId}-innerCt" class="'+Ext.plainTableCls+'" cellpadding="0"','role="presentation" style="{tableStyle}">','<tbody role="presentation"><tr role="presentation">','<tpl for="columns">','<td class="{parent.colCls}" valign="top" style="{style}" role="presentation">',"{% this.renderColumn(out,parent,xindex-1) %}","</td>","</tpl>","</tr></tbody></table>"],lastOwnerItemsGeneration:null,beginLayout:function(x){var p=this,u,v,s,y,q,t=0,n=0,o=p.autoFlex,w=p.innerCt.dom.style;p.callParent(arguments);u=p.columnNodes;x.innerCtContext=x.getEl("innerCt",p);if(!x.widthModel.shrinkWrap){v=u.length;if(p.columnsArray){for(s=0;s<v;s++){y=p.owner.columns[s];if(y<1){t+=y;n++}}for(s=0;s<v;s++){y=p.owner.columns[s];if(y<1){q=((y/t)*100)+"%"}else{q=y+"px"}u[s].style.width=q}}else{for(s=0;s<v;s++){q=o?(1/v*100)+"%":"";u[s].style.width=q;n++}}if(!n){w.tableLayout="fixed";w.width=""}else{if(n<v){w.tableLayout="fixed";w.width="100%"}else{w.tableLayout="auto";if(o){w.width="100%"}else{w.width=""}}}}else{w.tableLayout="auto";w.width=""}},cacheElements:function(){var c=this;c.callParent();c.rowEl=c.innerCt.down("tr");c.columnNodes=c.rowEl.dom.childNodes},calculate:function(o){var q=this,t,l,m,n,s,p;if(!o.getDomProp("containerChildrenSizeDone")){q.done=false}else{t=o.innerCtContext;l=o.widthModel.shrinkWrap;m=o.heightModel.shrinkWrap;n=m||l;s=t.el.dom;p=n&&t.getPaddingInfo();if(l){o.setContentWidth(s.offsetWidth+p.width,true)}if(m){o.setContentHeight(s.offsetHeight+p.height,true)}}},doRenderColumn:function(z,s,x){var v=s.$layout,A=v.owner,y=s.columnCount,w=A.items.items,B=w.length,q,C,u,t,p;if(A.vertical){u=Math.ceil(B/y);C=x*u;B=Math.min(B,C+u);t=1}else{C=x;t=y}for(;C<B;C+=t){q=w[C];v.configureItem(q);p=q.getRenderTree();Ext.DomHelper.generateMarkup(p,z)}},getColumnCount:function(){var d=this,e=d.owner,h=e.columns;if(d.columnsArray){return h.length}if(Ext.isNumber(h)){return h}return e.items.length},getItemSizePolicy:function(c){return this.autoSizePolicy},getRenderData:function(){var p=this,t=p.callParent(),x=p.owner,s,v=p.getColumnCount(),y,w,q,o=p.autoFlex,u=0,n=0;if(p.columnsArray){for(s=0;s<v;s++){y=p.owner.columns[s];if(y<1){u+=y;n++}}}t.colCls=x.groupCls;t.columnCount=v;t.columns=[];for(s=0;s<v;s++){w=(t.columns[s]={});if(p.columnsArray){y=p.owner.columns[s];if(y<1){q=((y/u)*100)+"%"}else{q=y+"px"}w.style="width:"+q}else{w.style="width:"+(1/v*100)+"%";n++}}t.tableStyle=!n?"table-layout:fixed;":(n<v)?"table-layout:fixed;width:100%":(o)?"table-layout:auto;width:100%":"table-layout:auto;";return t},initLayout:function(){var c=this,d=c.owner;c.columnsArray=Ext.isArray(d.columns);c.autoColumns=!d.columns||d.columns==="auto";c.vertical=d.vertical;c.callParent()},isValidParent:function(){return true},setupRenderTpl:function(c){this.callParent(arguments);c.renderColumn=this.doRenderColumn},renderChildren:function(){var d=this,c=d.owner.items.generation;if(d.lastOwnerItemsGeneration!==c){d.lastOwnerItemsGeneration=c;d.renderItems(d.getLayoutItems())}},renderItems:function(p){var o=this,u=p.length,t,l,m,q,n,s;if(u){Ext.suspendLayouts();if(o.autoColumns){o.addMissingColumns(u)}q=o.columnNodes.length;m=Math.ceil(u/q);for(t=0;t<u;t++){l=p[t];n=o.getRenderRowIndex(t,m,q);s=o.getRenderColumnIndex(t,m,q);if(!l.rendered){o.renderItem(l,n,s)}else{if(!o.isItemAtPosition(l,n,s)){o.moveItem(l,n,s)}}}if(o.autoColumns){o.removeExceedingColumns(u)}Ext.resumeLayouts(true)}},isItemAtPosition:function(d,h,e){return d.el.dom===this.getNodeAt(h,e)},getRenderColumnIndex:function(d,e,h){if(this.vertical){return Math.floor(d/e)}else{return d%h}},getRenderRowIndex:function(e,h,j){var l=this;if(l.vertical){return e%h}else{return Math.floor(e/j)}},getNodeAt:function(c,d){return this.columnNodes[d].childNodes[c]},addMissingColumns:function(l){var n=this,q=n.columnNodes.length,o,m,j,p;if(q<l){o=l-q;m=n.rowEl;j=n.owner.groupCls;for(p=0;p<o;p++){m.createChild({cls:j,tag:"td",vAlign:"top",role:"presentation"})}}},removeExceedingColumns:function(j){var m=this,h=m.columnNodes.length,n,l,o;if(h>j){n=h-j;l=m.rowEl;for(o=0;o<n;o++){l.last().remove()}}},renderItem:function(l,j,h){var e=this;e.configureItem(l);l.render(Ext.get(e.columnNodes[h]),j);e.afterRenderItem(l)},moveItem:function(n,l,h){var o=this,j=o.columnNodes[h],m=j.childNodes[l];j.insertBefore(n.el.dom,m||null)}},0,0,0,0,["layout.checkboxgroup"],0,[Ext.layout.container,"CheckboxGroup"],0));(Ext.cmd.derive("Ext.form.CheckboxManager",Ext.util.MixedCollection,{singleton:true,getByName:function(d,c){return this.filterBy(function(a){return a.name==d&&a.getFormId()==c})}},0,0,0,0,0,0,[Ext.form,"CheckboxManager"],0));(Ext.cmd.derive("Ext.form.field.Checkbox",Ext.form.field.Base,{alternateClassName:"Ext.form.Checkbox",componentLayout:"field",stretchInputElFixed:false,childEls:["boxLabelEl"],fieldSubTpl:['<div class="{wrapInnerCls} {noBoxLabelCls}" role="presentation">','<tpl if="labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>",'<input type="button" id="{id}" role="{role}" {inputAttrTpl}','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',' class="{fieldCls} {typeCls} {inputCls} {childElCls} {afterLabelCls}" autocomplete="off" hidefocus="true" />','<tpl if="boxLabel && !labelAlignedBefore">',"{beforeBoxLabelTpl}",'<label id="{cmpId}-boxLabelEl" {boxLabelAttrTpl} class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">',"{beforeBoxLabelTextTpl}","{boxLabel}","{afterBoxLabelTextTpl}","</label>","{afterBoxLabelTpl}","</tpl>","</div>",{disableFormats:true,compiled:true}],subTplInsertions:["beforeBoxLabelTpl","afterBoxLabelTpl","beforeBoxLabelTextTpl","afterBoxLabelTextTpl","boxLabelAttrTpl","inputAttrTpl"],isCheckbox:true,focusCls:"form-checkbox-focus",extraFieldBodyCls:Ext.baseCSSPrefix+"form-cb-wrap",checked:false,checkedCls:Ext.baseCSSPrefix+"form-cb-checked",boxLabelCls:Ext.baseCSSPrefix+"form-cb-label",boxLabelAlign:"after",afterLabelCls:Ext.baseCSSPrefix+"form-cb-after",wrapInnerCls:Ext.baseCSSPrefix+"form-cb-wrap-inner",noBoxLabelCls:Ext.baseCSSPrefix+"form-cb-wrap-inner-no-box-label",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",ariaRole:"checkbox",onRe:/^on$/i,inputCls:Ext.baseCSSPrefix+"form-cb",initComponent:function(){var d=this,c=d.value;if(c!==undefined){d.checked=d.isChecked(c,d.inputValue)}d.callParent(arguments);d.getManager().add(d)},initValue:function(){var c=this,d=!!c.checked;c.originalValue=c.lastValue=d;c.setValue(d)},getElConfig:function(){var c=this;if(c.isChecked(c.rawValue,c.inputValue)){c.addCls(c.checkedCls)}return c.callParent()},getSubTplData:function(){var e=this,h=e.boxLabel,j=e.boxLabelAlign,l=h&&j==="before";return Ext.apply(e.callParent(),{disabled:e.readOnly||e.disabled,wrapInnerCls:e.wrapInnerCls,boxLabel:h,boxLabelCls:e.boxLabelCls,boxLabelAlign:j,labelAlignedBefore:l,afterLabelCls:l?e.afterLabelCls:"",noBoxLabelCls:!h?e.noBoxLabelCls:"",role:e.ariaRole})},initEvents:function(){var c=this;c.callParent();c.mon(c.inputEl,"click",c.onBoxClick,c)},setBoxLabel:function(d){var c=this;c.boxLabel=d;if(c.rendered){c.boxLabelEl.update(d)}},onBoxClick:function(c){var d=this;if(!d.disabled&&!d.readOnly){this.setValue(!this.checked)}},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var d=this.uncheckedValue,c=Ext.isDefined(d)?d:null;return this.checked?this.inputValue:c},isChecked:function(c,d){return(c===true||c==="true"||c==="1"||c===1||(((Ext.isString(c)||Ext.isNumber(c))&&d)?c==d:this.onRe.test(c)))},setRawValue:function(l){var e=this,j=e.inputEl,h=e.isChecked(l,e.inputValue);if(j){e[h?"addCls":"removeCls"](e.checkedCls)}e.checked=e.rawValue=h;if(!e.duringSetValue){e.lastValue=h}return h},setValue:function(l){var m=this,o,h,j,n;if(Ext.isArray(l)){o=m.getManager().getByName(m.name,m.getFormId()).items;j=o.length;for(h=0;h<j;++h){n=o[h];n.setValue(Ext.Array.contains(l,n.inputValue))}}else{m.duringSetValue=true;m.callParent(arguments);delete m.duringSetValue}return m},valueToRaw:Ext.identityFn,onChange:function(e,h){var j=this,l=j.handler;if(l){l.call(j.scope||j,j,e)}j.callParent(arguments)},resetOriginalValue:function(h){var l=this,n,m,j,o;if(!h){n=l.getManager().getByName(l.name,l.getFormId()).items;j=n.length;for(o=0;o<j;++o){m=n[o];if(m!==l){n[o].resetOriginalValue(true)}}}l.callParent()},beforeDestroy:function(){this.callParent();this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var d=this,c=d.inputEl;d.callParent();if(c){c.dom.disabled=d.readOnly}},setReadOnly:function(h){var e=this,d=e.inputEl;if(d){d.dom.disabled=!!h||e.disabled}e.callParent(arguments)},getFormId:function(){var c=this,d;if(!c.formId){d=c.up("form");if(d){c.formId=d.id}}return c.formId}},0,["checkbox","checkboxfield"],["component","box","field","checkboxfield","checkbox"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true},["widget.checkbox","widget.checkboxfield"],0,[Ext.form.field,"Checkbox",Ext.form,"Checkbox"],0));(Ext.cmd.derive("Ext.form.CheckboxGroup",Ext.form.FieldContainer,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:Ext.baseCSSPrefix+"form-check-group",extraFieldBodyCls:Ext.baseCSSPrefix+"form-checkboxgroup-body",layout:"checkboxgroup",componentCls:Ext.baseCSSPrefix+"form-checkboxgroup",ariaRole:"group",initComponent:function(){var c=this;c.callParent();c.initField()},initValue:function(){var c=this,d=c.value;c.originalValue=c.lastValue=d||c.getValue();if(d){c.setValue(d)}},onAdd:function(l){var m=this,h,j,n;if(l.isCheckbox){m.mon(l,"change",m.checkChange,m)}else{if(l.isContainer){h=l.items.items;for(n=0,j=h.length;n<j;n++){m.onAdd(h[n])}}}m.callParent(arguments)},onRemove:function(l){var m=this,h,j,n;if(l.isCheckbox){m.mun(l,"change",m.checkChange,m)}else{if(l.isContainer){h=l.items.items;for(n=0,j=h.length;n<j;n++){m.onRemove(h[n])}}}m.callParent(arguments)},isEqual:function(d,e){var h=Ext.Object.toQueryString;return h(d)===h(e)},getErrors:function(){var c=[];if(!this.allowBlank&&Ext.isEmpty(this.getChecked())){c.push(this.blankText)}return c},getBoxes:function(c){return this.query("[isCheckbox]"+(c||""))},eachBox:function(c,d){Ext.Array.forEach(this.getBoxes(),c,d||this)},getChecked:function(){return this.getBoxes("[checked]")},isDirty:function(){var j=this.getBoxes(),e,h=j.length;for(e=0;e<h;e++){if(j[e].isDirty()){return true}}},setReadOnly:function(j){var m=this.getBoxes(),h,l=m.length;for(h=0;h<l;h++){m[h].setReadOnly(j)}this.readOnly=j},reset:function(){var h=this,d=h.hasActiveError(),e=h.preventMark;h.preventMark=true;h.batchChanges(function(){var c=h.getBoxes(),j,a=c.length;for(j=0;j<a;j++){c[j].reset()}});h.preventMark=e;h.unsetActiveError();if(d){h.updateLayout()}},resetOriginalValue:function(){var l=this,m=l.getBoxes(),h,j=m.length;for(h=0;h<j;h++){m[h].resetOriginalValue()}l.originalValue=l.getValue();l.checkDirty()},setValue:function(o){var p=this,s=p.getBoxes(),l,m=s.length,q,t,n;p.batchChanges(function(){for(l=0;l<m;l++){q=s[l];t=q.getName();n=false;if(o&&o.hasOwnProperty(t)){if(Ext.isArray(o[t])){n=Ext.Array.contains(o[t],q.inputValue)}else{n=o[t]}}q.setValue(n)}});return p},getValue:function(){var s={},p=this.getBoxes(),t,m=p.length,o,q,l,n;for(t=0;t<m;t++){o=p[t];q=o.getName();l=o.inputValue;if(o.getValue()){if(s.hasOwnProperty(q)){n=s[q];if(!Ext.isArray(n)){n=s[q]=[n]}n.push(l)}else{s[q]=l}}}return s},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var h=this,j,l,e;if(h.disabled){l=true}else{j=h.getErrors();l=Ext.isEmpty(j);e=h.wasValid;if(l){h.unsetActiveError()}else{h.setActiveError(j)}}if(l!==e){h.wasValid=l;h.fireEvent("validitychange",h,l);h.updateLayout()}return l}},0,["checkboxgroup"],["component","box","container","fieldcontainer","checkboxgroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true},["widget.checkboxgroup"],[["field",Ext.form.field.Field]],[Ext.form,"CheckboxGroup"],function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid","setError"])}));(Ext.cmd.derive("Ext.form.FieldSet",Ext.container.Container,{collapsed:false,toggleOnTitleClick:true,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:null,autoEl:"fieldset",childEls:["body"],renderTpl:["{%this.renderLegend(out,values);%}",'<div id="{id}-body" class="{baseCls}-body {bodyTargetCls}" role="presentation"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values);%}","</div>"],stateEvents:["collapse","expand"],maskOnDisable:false,beforeDestroy:function(){var c=this,d=c.legend;if(d){delete d.ownerCt;d.destroy();c.legend=null}c.callParent()},initComponent:function(){var c=this,d=c.baseCls;c.initFieldAncestor();c.callParent();c.layout.managePadding=c.layout.manageOverflow=false;c.addEvents("beforeexpand","beforecollapse","expand","collapse");if(c.collapsed){c.addCls(d+"-collapsed");c.collapse()}if(c.title||c.checkboxToggle||c.collapsible){c.addTitleClasses();c.legend=Ext.widget(c.createLegendCt())}c.initMonitor()},initPadding:function(l){var n=this,j=n.getProtoBody(),m=n.padding,h;if(m!==undefined){if(Ext.isIEQuirks||Ext.isIE8m){m=n.parseBox(m);h=Ext.Element.parseBox(0);h.top=m.top;m.top=0;j.setStyle("padding",n.unitizeBox(h))}l.setStyle("padding",n.unitizeBox(m))}},getProtoBody:function(){var c=this,d=c.protoBody;if(!d){c.protoBody=d=new Ext.util.ProtoElement({styleProp:"bodyStyle",styleIsText:true})}return d},initRenderData:function(){var d=this,c=d.callParent();c.bodyTargetCls=d.bodyTargetCls;d.protoBody.writeTo(c);delete d.protoBody;return c},getState:function(){var c=this.callParent();c=this.addPropertyToState(c,"collapsed");return c},afterCollapse:Ext.emptyFn,afterExpand:Ext.emptyFn,collapsedHorizontal:function(){return true},collapsedVertical:function(){return true},createLegendCt:function(){var h=this,e=[],d={xtype:"container",baseCls:h.baseCls+"-header",id:h.id+"-legend",autoEl:"legend",ariaRole:null,ariaLabelledBy:"."+h.baseCls+"-header-text",items:e,ownerCt:h,shrinkWrap:true,ownerLayout:h.componentLayout};if(h.checkboxToggle){e.push(h.createCheckboxCmp())}else{if(h.collapsible){e.push(h.createToggleCmp())}}e.push(h.createTitleCmp());return d},createTitleCmp:function(){var c=this,d={xtype:"component",html:c.title,cls:c.baseCls+"-header-text",id:c.id+"-legendTitle"};if(c.collapsible&&c.toggleOnTitleClick){d.listeners={click:{element:"el",scope:c,fn:c.toggle}};d.cls+=" "+c.baseCls+"-header-text-collapsible"}return(c.titleCmp=Ext.widget(d))},createCheckboxCmp:function(){var d=this,c="-checkbox";d.checkboxCmp=Ext.widget({xtype:"checkbox",hideEmptyLabel:true,name:d.checkboxName||d.id+c,cls:d.baseCls+"-header"+c,id:d.id+"-legendChk",checked:!d.collapsed,msgTarget:"none",listeners:{change:d.onCheckChange,scope:d}});return d.checkboxCmp},createToggleCmp:function(){var c=this;c.toggleCmp=Ext.widget({xtype:"tool",height:15,width:15,type:"toggle",handler:c.toggle,id:c.id+"-legendToggle",scope:c});return c.toggleCmp},doRenderLegend:function(h,l){var m=l.$comp,n=m.legend,j;if(n){n.ownerLayout.configureItem(n);j=n.getRenderTree();Ext.DomHelper.generateMarkup(j,h)}},finishRender:function(){var c=this.legend;this.callParent();if(c){c.finishRender()}},getCollapsed:function(){return this.collapsed?"top":false},getCollapsedDockedItems:function(){var c=this.legend;return c?[c]:[]},setTitle:function(j){var l=this,e=l.legend,h=l.baseCls;l.title=j;if(l.rendered){if(!e){l.legend=e=Ext.widget(l.createLegendCt());l.addTitleClasses();e.ownerLayout.configureItem(e);e.render(l.el,0)}l.titleCmp.update(j)}else{if(e){l.titleCmp.update(j)}else{l.addTitleClasses();l.legend=Ext.widget(l.createLegendCt())}}return l},addTitleClasses:function(){var d=this,h=d.title,e=d.baseCls;if(h){d.addCls(e+"-with-title")}if(h||d.checkboxToggle||d.collapsible){d.addCls(e+"-with-legend")}},applyTargetCls:function(c){this.bodyTargetCls=c},getTargetEl:function(){return this.body||this.frameBody||this.el},getDefaultContentTarget:function(){return this.body},expand:function(){return this.setExpanded(true)},collapse:function(){return this.setExpanded(false)},setExpanded:function(e){var l=this,j=l.checkboxCmp,h=e?"expand":"collapse";if(!l.rendered||l.fireEvent("before"+h,l)!==false){e=!!e;if(j){j.setValue(e)}if(e){l.removeCls(l.baseCls+"-collapsed")}else{l.addCls(l.baseCls+"-collapsed")}l.collapsed=!e;if(e){delete l.getHierarchyState().collapsed}else{l.getHierarchyState().collapsed=true}if(l.rendered){l.updateLayout({isRoot:false});l.fireEvent(h,l)}}return l},getRefItems:function(e){var h=this.callParent(arguments),d=this.legend;if(d){h.unshift(d);if(e){h.unshift.apply(h,d.getRefItems(true))}}return h},toggle:function(){this.setExpanded(!!this.collapsed)},onCheckChange:function(c,d){this.setExpanded(d)},setupRenderTpl:function(c){this.callParent(arguments);c.renderLegend=this.doRenderLegend}},0,["fieldset"],["component","box","container","fieldset"],{component:true,box:true,container:true,fieldset:true},["widget.fieldset"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"FieldSet"],0));(Ext.cmd.derive("Ext.form.Label",Ext.Component,{autoEl:"label",maskOnDisable:false,getElConfig:function(){var c=this;c.html=c.text?Ext.util.Format.htmlEncode(c.text):(c.html||"");return Ext.apply(c.callParent(),{htmlFor:c.forId||""})},setText:function(h,d){var e=this;d=d!==false;if(d){e.text=h;delete e.html}else{e.html=h;delete e.text}if(e.rendered){e.el.dom.innerHTML=d!==false?Ext.util.Format.htmlEncode(h):h;e.updateLayout()}return e}},0,["label"],["component","box","label"],{component:true,box:true,label:true},["widget.label"],0,[Ext.form,"Label"],0));(Ext.cmd.derive("Ext.form.Panel",Ext.panel.Panel,{alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],layout:"anchor",ariaRole:"form",basicFormConfigs:["api","baseParams","errorReader","jsonSubmit","method","paramOrder","paramsAsHash","reader","standardSubmit","timeout","trackResetOnLoad","url","waitMsgTarget","waitTitle"],initComponent:function(){var c=this;if(c.frame){c.border=false}c.initFieldAncestor();c.callParent();c.relayEvents(c.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]);if(c.pollForChanges){c.startPolling(c.pollInterval||500)}},initItems:function(){this.callParent();this.initMonitor();this.form=this.createForm()},afterFirstLayout:function(){this.callParent(arguments);this.form.initialize()},createForm:function(){var h={},m=this.basicFormConfigs,j=m.length,n=0,l;for(;n<j;++n){l=m[n];h[l]=this[l]}return new Ext.form.Basic(this,h)},getForm:function(){return this.form},loadRecord:function(c){return this.getForm().loadRecord(c)},getRecord:function(){return this.getForm().getRecord()},updateRecord:function(c){return this.getForm().updateRecord(c)},getValues:function(j,e,l,h){return this.getForm().getValues(j,e,l,h)},isDirty:function(){return this.form.isDirty()},isValid:function(){return this.form.isValid()},hasInvalidField:function(){return this.form.hasInvalidField()},beforeDestroy:function(){this.stopPolling();this.form.destroy();this.callParent()},load:function(c){this.form.load(c)},submit:function(c){this.form.submit(c)},startPolling:function(c){this.stopPolling();var d=new Ext.util.TaskRunner(c);d.start({interval:0,run:this.checkChange,scope:this});this.pollTask=d},stopPolling:function(){var c=this.pollTask;if(c){c.stopAll();delete this.pollTask}},checkChange:function(){var e=this.form.getFields().items,d,h=e.length;for(d=0;d<h;d++){e[d].checkChange()}}},0,["form"],["component","box","container","panel","form"],{component:true,box:true,container:true,panel:true,form:true},["widget.form"],[["fieldAncestor",Ext.form.FieldAncestor]],[Ext.form,"Panel",Ext,"FormPanel",Ext.form,"FormPanel"],0));(Ext.cmd.derive("Ext.form.RadioManager",Ext.util.MixedCollection,{singleton:true,getByName:function(d,c){return this.filterBy(function(a){return a.name==d&&a.getFormId()==c})},getWithValue:function(e,d,h){return this.filterBy(function(a){return a.name==e&&a.inputValue==d&&a.getFormId()==h})},getChecked:function(d,c){return this.findBy(function(a){return a.name==d&&a.checked&&a.getFormId()==c})}},0,0,0,0,0,0,[Ext.form,"RadioManager"],0));(Ext.cmd.derive("Ext.form.field.Radio",Ext.form.field.Checkbox,{alternateClassName:"Ext.form.Radio",isRadio:true,focusCls:"form-radio-focus",inputType:"radio",ariaRole:"radio",formId:null,getGroupValue:function(){var c=this.getManager().getChecked(this.name,this.getFormId());return c?c.inputValue:null},onBoxClick:function(c){var d=this;if(!d.disabled&&!d.readOnly){this.setValue(true)}},onRemoved:function(){this.callParent(arguments);this.formId=null},setValue:function(e){var d=this,h;if(Ext.isBoolean(e)){d.callParent(arguments)}else{h=d.getManager().getWithValue(d.name,e,d.getFormId()).getAt(0);if(h){h.setValue(true)}}return d},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){var c=this.callParent(arguments);if(c){c[this.getName()]=this.getSubmitValue()}return c},onChange:function(q,l){var n=this,o,p,j,m;n.callParent(arguments);if(q){m=n.getManager().getByName(n.name,n.getFormId()).items;p=m.length;for(o=0;o<p;o++){j=m[o];if(j!==n){j.setValue(false)}}}},getManager:function(){return Ext.form.RadioManager}},0,["radiofield","radio"],["component","box","field","checkboxfield","checkbox","radiofield","radio"],{component:true,box:true,field:true,checkboxfield:true,checkbox:true,radiofield:true,radio:true},["widget.radio","widget.radiofield"],0,[Ext.form.field,"Radio",Ext.form,"Radio"],0));(Ext.cmd.derive("Ext.form.RadioGroup",Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:Ext.baseCSSPrefix+"form-radio-group",ariaRole:"radiogroup",getBoxes:function(c){return this.query("[isRadio]"+(c||""))},checkChange:function(){var c=this.getValue(),d=Ext.Object.getKeys(c)[0];if(Ext.isArray(c[d])){return}this.callParent(arguments)},setValue:function(s){var n,p,q,o,t,m,l;if(Ext.isObject(s)){for(l in s){if(s.hasOwnProperty(l)){n=s[l];p=this.items.first();q=p?p.getFormId():null;o=Ext.form.RadioManager.getWithValue(l,n,q).items;m=o.length;for(t=0;t<m;++t){o[t].setValue(true)}}}}return this}},0,["radiogroup"],["component","box","container","fieldcontainer","checkboxgroup","radiogroup"],{component:true,box:true,container:true,fieldcontainer:true,checkboxgroup:true,radiogroup:true},["widget.radiogroup"],0,[Ext.form,"RadioGroup"],0));(Ext.cmd.derive("Ext.form.action.DirectLoad",Ext.form.action.Load,{alternateClassName:"Ext.form.Action.DirectLoad",type:"directload",run:function(){var m=this,n=m.form,o=n.api,h=o.load,l,j;if(typeof h!=="function"){o.load=h=Ext.direct.Manager.parseMethod(h)}l=h.directCfg.method;j=l.getArgs(m.getParams(),n.paramOrder,n.paramsAsHash);j.push(m.onComplete,m);h.apply(window,j)},processResponse:function(c){return(this.result=c)},onComplete:function(c,d){if(c){this.onSuccess(c)}else{this.onFailure(null)}}},0,0,0,0,["formaction.directload"],0,[Ext.form.action,"DirectLoad",Ext.form.Action,"DirectLoad"],0));(Ext.cmd.derive("Ext.form.action.DirectSubmit",Ext.form.action.Submit,{alternateClassName:"Ext.form.Action.DirectSubmit",type:"directsubmit",doSubmit:function(){var o=this,p=o.form,q=p.api,j=q.submit,m,n,l;l;if(typeof j!=="function"){q.submit=j=Ext.direct.Manager.parseMethod(j)}if(o.timeout||p.timeout){l={timeout:o.timeout*1000||p.timeout*1000}}n=o.buildForm();j.call(window,n.formEl,o.onComplete,o,l);o.cleanup(n)},processResponse:function(c){return(this.result=c)},onComplete:function(c,d){if(c){this.onSuccess(c)}else{this.onFailure(null)}}},0,0,0,0,["formaction.directsubmit"],0,[Ext.form.action,"DirectSubmit",Ext.form.Action,"DirectSubmit"],0));(Ext.cmd.derive("Ext.form.action.StandardSubmit",Ext.form.action.Submit,{doSubmit:function(){var c=this.buildForm();c.formEl.submit();this.cleanup(c)}},0,0,0,0,["formaction.standardsubmit"],0,[Ext.form.action,"StandardSubmit"],0));(Ext.cmd.derive("Ext.layout.component.field.Trigger",Ext.layout.component.field.Field,{type:"triggerfield",setWidthInDom:true,borderWidths:{},beginLayout:function(j){var l=this,h=l.owner,e;j.triggerWrap=j.getEl("triggerWrap");l.callParent(arguments);e=h.getTriggerStateFlags();if(e!=h.lastTriggerStateFlags){h.lastTriggerStateFlags=e;l.updateEditState()}},beginLayoutCycle:function(c){this.callParent(arguments);if(c.widthModel.shrinkWrap&&!this.owner.inputWidth){c.inputContext.el.setStyle("width","")}},beginLayoutFixed:function(p,t,o){var s=this,m=p.target,q=s.ieInputWidthAdjustment||0,n="100%",l=m.triggerWrap;s.callParent(arguments);m.inputCell.setStyle("width","100%");if(q){s.adjustIEInputPadding(p);if(o==="px"){if(m.inputWidth){n=m.inputWidth-s.getExtraWidth(p)}else{n=t-q-s.getExtraWidth(p)}n+="px"}}m.inputEl.setStyle("width",n);n=m.inputWidth;if(n){l.setStyle("width",n+(q)+"px")}else{l.setStyle("width",t+o)}l.setStyle("table-layout","fixed")},adjustIEInputPadding:function(c){this.owner.inputCell.setStyle("padding-right",this.ieInputWidthAdjustment+"px")},getExtraWidth:function(m){var h=this,j=h.owner,l=h.borderWidths,n=j.ui+j.triggerEl.getCount();if(!(n in l)){l[n]=m.triggerWrap.getBorderInfo().width}return l[n]+j.getTriggerWidth()},beginLayoutShrinkWrap:function(n){var j=n.target,l="",m=j.inputWidth,h=j.triggerWrap;this.callParent(arguments);if(m){h.setStyle("width",m+"px");m=(m-this.getExtraWidth(n))+"px";j.inputEl.setStyle("width",m);j.inputCell.setStyle("width",m)}else{j.inputCell.setStyle("width",l);j.inputEl.setStyle("width",l);h.setStyle("width",l);h.setStyle("table-layout","auto")}},getTextWidth:function(){var e=this,h=e.owner,j=h.inputEl,l;l=(j.dom.value||(h.hasFocus?"":h.emptyText)||"")+h.growAppend;return j.getTextWidth(l)},publishOwnerWidth:function(h,d){var e=this.owner;this.callParent(arguments);if(!e.grow&&!e.inputWidth){d-=this.getExtraWidth(h);if(e.labelAlign!="top"){d-=e.getLabelWidth()}h.inputContext.setWidth(d)}},publishInnerHeight:function(c,d){c.inputContext.setHeight(d-this.measureLabelErrorHeight(c))},measureContentWidth:function(o){var p=this,l=p.owner,q=p.callParent(arguments),n=o.inputContext,s,m,t;if(l.grow&&!o.state.growHandled){s=p.getTextWidth()+o.inputContext.getFrameInfo().width;m=l.growMax;t=Math.min(m,q);m=Math.max(l.growMin,m,t);s=Ext.Number.constrain(s,l.growMin,m);n.setWidth(s);o.state.growHandled=true;n.domBlock(p,"width");q=NaN}else{if(!l.inputWidth){q-=p.getExtraWidth(o)}}return q},updateEditState:function(){var o=this,j=o.owner,m=j.inputEl,n=Ext.baseCSSPrefix+"trigger-noedit",h,l;if(o.owner.readOnly){m.addCls(n);l=true;h=false}else{if(o.owner.editable){m.removeCls(n);l=false}else{m.addCls(n);l=true}h=!o.owner.hideTrigger}j.triggerCell.setDisplayed(h);m.dom.readOnly=l}},0,0,0,0,["layout.triggerfield"],0,[Ext.layout.component.field,"Trigger"],0));(Ext.cmd.derive("Ext.form.field.Trigger",Ext.form.field.Text,{alternateClassName:["Ext.form.TriggerField","Ext.form.TwinTriggerField","Ext.form.Trigger"],childEls:[{name:"triggerCell",select:"."+Ext.baseCSSPrefix+"trigger-cell"},{name:"triggerEl",select:"."+Ext.baseCSSPrefix+"form-trigger"},"triggerWrap","inputCell"],triggerBaseCls:Ext.baseCSSPrefix+"form-trigger",triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",triggerNoEditCls:Ext.baseCSSPrefix+"trigger-noedit",hideTrigger:false,editable:true,readOnly:false,repeatTriggerClick:false,autoSize:Ext.emptyFn,monitorTab:true,mimicing:false,triggerIndexRe:/trigger-index-(\d+)/,extraTriggerCls:"",componentLayout:"triggerfield",initComponent:function(){this.wrapFocusCls=this.triggerWrapCls+"-focus";this.callParent(arguments)},initEvents:function(){this.mon(Ext.globalEvents,"beforefocus",this.onOtherFocus,this);this.callParent()},getSubTplMarkup:function(e){var l=this,h=e.childElCls,j=l.callParent(arguments);return['<table id="',l.id,'-triggerWrap" class="',Ext.baseCSSPrefix,"form-trigger-wrap",h,'" cellpadding="0" cellspacing="0" role="presentation">','<tbody role="presentation">','<tr role="presentation">','<td id="',l.id,'-inputCell" class="',Ext.baseCSSPrefix,"form-trigger-input-cell",h,'" role="presentation">',j,"</td>",l.getTriggerMarkup(),"</tr>","</tbody>","</table>"].join("")},getSubTplData:function(){var e=this,l=e.callParent(),j=e.readOnly===true,h=e.editable!==false;return Ext.apply(l,{editableCls:(j||!h)?" "+e.triggerNoEditCls:"",readOnly:!h||j})},getLabelableRenderData:function(){var d=this,h=d.triggerWrapCls,e=d.callParent(arguments);return Ext.applyIf(e,{triggerWrapCls:h,triggerMarkup:d.getTriggerMarkup()})},getTriggerMarkup:function(){var p=this,s=0,m=(p.readOnly||p.hideTrigger),u,o=p.triggerBaseCls,n=[],q=Ext.dom.Element.unselectableCls,t="width:"+p.triggerWidth+"px;"+(m?"display:none;":""),l=p.extraTriggerCls+" "+Ext.baseCSSPrefix+"trigger-cell "+q;if(!p.trigger1Cls){p.trigger1Cls=p.triggerCls}for(s=0;(u=p["trigger"+(s+1)+"Cls"])||s<1;s++){n.push({tag:"td",role:"presentation",valign:"top",cls:l,style:t,cn:{cls:[Ext.baseCSSPrefix+"trigger-index-"+s,o,u].join(" "),role:"presentation"}})}n[0].cn.cls+=" "+o+"-first";return Ext.DomHelper.markup(n)},disableCheck:function(){return !this.disabled},beforeRender:function(){var e=this,d=e.triggerBaseCls,h;if(!e.triggerWidth){h=Ext.getBody().createChild({role:"presentation",style:"position: absolute;",cls:Ext.baseCSSPrefix+"form-trigger"});Ext.form.field.Trigger.prototype.triggerWidth=h.getWidth();h.remove()}e.callParent();if(d!==Ext.baseCSSPrefix+"form-trigger"){e.addChildEls({name:"triggerEl",select:"."+d})}e.lastTriggerStateFlags=e.getTriggerStateFlags()},onRender:function(){var c=this;c.callParent(arguments);c.doc=Ext.getDoc();c.initTrigger()},getTriggerWidth:function(){var c=this,d=0;if(c.triggerWrap&&!c.hideTrigger&&!c.readOnly){d=c.triggerEl.getCount()*c.triggerWidth}return d},setHideTrigger:function(c){if(c!=this.hideTrigger){this.hideTrigger=c;this.updateLayout()}},setEditable:function(c){if(c!=this.editable){this.editable=c;this.updateLayout()}},setReadOnly:function(h){var d=this,e=d.readOnly;d.callParent(arguments);if(h!=e){d.updateLayout()}},initTrigger:function(){var q=this,p=q.triggerWrap,m=q.triggerEl,w=q.disableCheck,u,s,v,t,o,n;if(q.repeatTriggerClick){q.triggerRepeater=new Ext.util.ClickRepeater(p,{preventDefault:true,handler:q.onTriggerWrapClick,listeners:{mouseup:q.onTriggerWrapMouseup,scope:q},scope:q})}else{q.mon(p,{click:q.onTriggerWrapClick,mouseup:q.onTriggerWrapMouseup,scope:q})}m.setVisibilityMode(Ext.Element.DISPLAY);m.addClsOnOver(q.triggerBaseCls+"-over",w,q);u=m.elements;s=u.length;for(t=0;t<s;t++){v=u[t];o=t+1;n=q["trigger"+(o)+"Cls"];if(n){v.addClsOnOver(n+"-over",w,q);v.addClsOnClick(n+"-click",w,q)}}m.addClsOnClick(q.triggerBaseCls+"-click",w,q)},onDestroy:function(){var c=this;Ext.destroyMembers(c,"triggerRepeater","triggerWrap","triggerEl");delete c.doc;c.callParent()},onFocus:function(){var c=this;c.otherFocused=false;c.callParent(arguments);if(!c.mimicing){c.bodyEl.addCls(c.wrapFocusCls);c.mimicing=true;c.mon(c.doc,"mousedown",c.mimicBlur,c,{delay:10});if(c.monitorTab){c.on("specialkey",c.checkTab,c)}}},checkTab:function(d,c){if(!this.ignoreMonitorTab&&c.getKey()===c.TAB){this.triggerBlur()}},getTriggerStateFlags:function(){var d=this,c=0;if(d.readOnly){c+=1}if(d.editable){c+=2}if(d.hideTrigger){c+=4}return c},onOtherFocus:function(c){this.otherFocused=(this.hasFocus&&!this.bodyEl.contains(c))},onBlur:function(){if(this.blurring||this.otherFocused){this.triggerBlur();this.otherFocused=false}},mimicBlur:function(c){if(!this.isDestroyed&&!this.bodyEl.contains(c.target)){this.triggerBlur(c)}},triggerBlur:function(c){var d=this;d.mimicing=false;d.mun(d.doc,"mousedown",d.mimicBlur,d);if(d.monitorTab&&d.inputEl){d.un("specialkey",d.checkTab,d)}Ext.form.field.Trigger.superclass.onBlur.call(d,c);if(d.bodyEl){d.bodyEl.removeCls(d.wrapFocusCls)}},onTriggerWrapClick:function(){var m=this,l,h,j,n;n=arguments[m.triggerRepeater?1:0];if(n&&!m.readOnly&&!m.disabled){l=n.getTarget("."+m.triggerBaseCls,null);h=l&&l.className.match(m.triggerIndexRe);if(h){j=m["onTrigger"+(parseInt(h[1],10)+1)+"Click"]||m.onTriggerClick;if(j){j.call(m,n)}}}},onTriggerWrapMouseup:Ext.emptyFn,onTriggerClick:Ext.emptyFn},0,["trigger","triggerfield"],["component","box","field","textfield","triggerfield","trigger"],{component:true,box:true,field:true,textfield:true,triggerfield:true,trigger:true},["widget.trigger","widget.triggerfield"],0,[Ext.form.field,"Trigger",Ext.form,"TriggerField",Ext.form,"TwinTriggerField",Ext.form,"Trigger"],0));(Ext.cmd.derive("Ext.form.field.Picker",Ext.form.field.Trigger,{alternateClassName:"Ext.form.Picker",matchFieldWidth:true,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",editable:true,initComponent:function(){this.callParent();this.addEvents("expand","collapse","select")},initEvents:function(){var c=this;c.callParent();c.keyNav=new Ext.util.KeyNav(c.inputEl,{down:c.onDownArrow,esc:{handler:c.onEsc,scope:c,defaultEventAction:false},scope:c,forceKeyDown:true});if(!c.editable){c.mon(c.inputEl,"click",c.onTriggerClick,c)}if(Ext.isGecko){c.inputEl.dom.setAttribute("autocomplete","off")}},onEsc:function(c){if(Ext.isIE){c.preventDefault()}if(this.isExpanded){this.collapse();c.stopEvent()}},onDownArrow:function(c){if(!this.isExpanded){this.onTriggerClick()}},expand:function(){var l=this,h,e,j;if(l.rendered&&!l.isExpanded&&!l.isDestroyed){l.expanding=true;h=l.bodyEl;e=l.getPicker();j=l.collapseIf;e.show();l.isExpanded=true;l.alignPicker();h.addCls(l.openCls);l.mon(Ext.getDoc(),{mousewheel:j,mousedown:j,scope:l});Ext.EventManager.onWindowResize(l.alignPicker,l);l.fireEvent("expand",l);l.onExpand();delete l.expanding}},onExpand:Ext.emptyFn,alignPicker:function(){var c=this,d=c.getPicker();if(c.isExpanded){if(c.matchFieldWidth){d.setWidth(c.bodyEl.getWidth())}if(d.isFloating()){c.doAlign()}}},doAlign:function(){var j=this,l=j.picker,h="-above",e;j.picker.alignTo(j.triggerWrap,j.pickerAlign,j.pickerOffset);e=l.el.getY()<j.inputEl.getY();j.bodyEl[e?"addCls":"removeCls"](j.openCls+h);l[e?"addCls":"removeCls"](l.baseCls+h)},collapse:function(){var n=this;if(n.isExpanded&&!n.isDestroyed&&!n.destroying){var o=n.openCls,h=n.picker,m=Ext.getDoc(),l=n.collapseIf,j="-above";h.hide();n.isExpanded=false;n.bodyEl.removeCls([o,o+j]);h.el.removeCls(h.baseCls+j);m.un("mousewheel",l,n);m.un("mousedown",l,n);Ext.EventManager.removeResizeListener(n.alignPicker,n);n.fireEvent("collapse",n);n.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(c){var d=this;if(!d.isDestroyed&&!c.within(d.bodyEl,false,true)&&!d.owns(c.target)){d.collapse()}},getPicker:function(){var c=this,d=c.picker;if(!d){c.picker=d=c.createPicker();d.ownerCmp=c}return d},getRefItems:function(){var c=[];if(this.picker){c[0]=this.picker}return c},createPicker:Ext.emptyFn,onTriggerClick:function(){var c=this;if(!c.readOnly&&!c.disabled){if(c.isExpanded){c.collapse()}else{c.expand()}c.inputEl.focus()}},onOtherFocus:function(c){if(this.hasFocus&&!this.owns(c)){this.callParent([c])}},triggerBlur:function(){var c=this.picker;this.callParent(arguments);this.collapse()},mimicBlur:function(h){var d=this,e=d.picker;if(!e||!d.owns(h.target)){d.callParent(arguments)}else{d.inputEl.focus()}},onDestroy:function(){var c=this,d=c.picker;Ext.EventManager.removeResizeListener(c.alignPicker,c);Ext.destroy(c.keyNav,d);if(d){delete c.picker;delete d.pickerField}c.callParent()}},0,["pickerfield"],["component","box","field","textfield","triggerfield","trigger","pickerfield"],{component:true,box:true,field:true,textfield:true,triggerfield:true,trigger:true,pickerfield:true},["widget.pickerfield"],0,[Ext.form.field,"Picker",Ext.form,"Picker"],0));(Ext.cmd.derive("Ext.selection.Model",Ext.util.Observable,{alternateClassName:"Ext.AbstractSelectionModel",allowDeselect:undefined,toggleOnClick:true,selected:null,pruneRemoved:true,suspendChange:0,constructor:function(d){var c=this;d=d||{};Ext.apply(c,d);c.addEvents("selectionchange","focuschange");c.modes={SINGLE:true,SIMPLE:true,MULTI:true};c.setSelectionMode(d.mode||c.mode);c.selected=new Ext.util.MixedCollection(null,c.getSelectionId);c.callParent(arguments)},bindStore:function(e,d){var h=this;h.mixins.bindable.bindStore.apply(h,arguments);if(h.store&&!d){h.refresh()}},getStoreListeners:function(){var c=this;return{add:c.onStoreAdd,clear:c.onStoreClear,bulkremove:c.onStoreRemove,update:c.onStoreUpdate,load:c.onStoreLoad,idchanged:c.onModelIdChanged,refresh:c.onStoreRefresh}},suspendChanges:function(){++this.suspendChange},resumeChanges:function(){if(this.suspendChange){--this.suspendChange}},selectAll:function(h){var m=this,n=m.store.getRange(),o=0,j=n.length,l=m.getSelection().length;m.suspendChanges();for(;o<j;o++){m.doSelect(n[o],true,h)}m.resumeChanges();if(!h){m.maybeFireSelectionChange(m.getSelection().length!==l)}},deselectAll:function(l){var o=this,t=o.getSelection(),n={},m=o.store,u=t.length,p,s,q;for(p=0,s=t.length;p<s;p++){q=t[p];n[q.internalId]=m.indexOf(q)}t=Ext.Array.sort(t,function(e,c){var d=n[e.internalId],a=n[c.internalId];return d<a?-1:1});o.suspendChanges();o.doDeselect(t,l);o.resumeChanges();if(!l){o.maybeFireSelectionChange(o.getSelection().length!==u)}},getSelectionStart:function(){if(!this.selectionStart){this.setSelectionStart(this.lastFocused)}return this.selectionStart},setSelectionStart:function(c){this.selectionStart=c},selectWithEvent:function(v,t){var s=this,z=s.isSelected(v),y=t.shiftKey,C=t.ctrlKey,A=y&&s.getSelectionStart(),x=s.getSelection(),u=x.length,q=s.allowDeselect,B,w,e;switch(s.selectionMode){case"MULTI":if(y&&A){s.selectRange(A,v,C)}else{if(C&&z){s.doDeselect(v,false)}else{if(C){s.doSelect(v,true,false)}else{if(z&&!y&&!C&&u>1){B=[];for(w=0;w<u;++w){e=x[w];if(e!==v){B.push(e)}}s.doDeselect(B)}else{if(!z){s.doSelect(v,false)}}}}}break;case"SIMPLE":if(z){s.doDeselect(v)}else{s.doSelect(v,true)}break;case"SINGLE":if(q&&!C){q=s.toggleOnClick}if(q&&z){s.doDeselect(v)}else{s.doSelect(v,false)}break}if(!y){if(s.isSelected(v)){s.selectionStart=v}else{s.selectionStart=null}}},afterKeyNavigate:function(s,t){var q=this,u,w,v=q.isSelected(t),o=(q.selectionStart&&q.isSelected(q.lastFocused))?q.selectionStart:(q.selectionStart=q.lastFocused),n=s.getCharCode(),e=n===s.SPACE,p=n===s.UP||n===s.PAGE_UP?"up":(n===s.DOWN||n===s.DOWN?"down":null);switch(q.selectionMode){case"MULTI":if(e){if(s.shiftKey){q.selectRange(o,t,s.ctrlKey)}else{if(v){q.doDeselect(t,s.ctrlKey);q.setLastFocused(null);q.setLastFocused(t)}else{q.doSelect(t,s.ctrlKey)}}}else{if(s.shiftKey&&o){w=q.store.indexOf(o);u=q.store.indexOf(t);if(p==="up"&&w<=u){q.deselectRange(q.lastFocused,u+1)}else{if(p==="down"&&w>=u){q.deselectRange(q.lastFocused,u-1)}else{if(o!==t){q.selectRange(o,t,s.ctrlKey)}}}q.lastSelected=t;q.setLastFocused(t)}else{if(s.ctrlKey&&v){q.setLastFocused(t)}else{if(s.ctrlKey){q.setLastFocused(t)}else{q.doSelect(t,false)}}}}break;case"SIMPLE":if(v){if(q.allowDeselect){q.doDeselect(t)}}else{q.doSelect(t,true)}break;case"SINGLE":if(e){if(v){if(q.allowDeselect){q.doDeselect(t);q.setLastFocused(t)}}else{q.doSelect(t)}}else{if(s.ctrlKey){q.setLastFocused(t)}else{if(e&&q.allowDeselect&&v){q.doDeselect(t)}else{q.doSelect(t,false);q.setLastFocused(t)}}}break}if(!s.shiftKey){if(q.isSelected(t)){q.selectionStart=t}}},selectRange:function(s,z,q){var v=this,t=v.store,A=v.selected.items,p,x,w,y,C,u,B;if(v.isLocked()){return}p=v.normalizeRowRange(s,z);s=p[0];z=p[1];y=[];for(x=s;x<=z;x++){if(!v.isSelected(t.getAt(x))){y.push(t.getAt(x))}}if(!q){C=[];v.suspendChanges();for(x=0,w=A.length;x<w;++x){B=A[x];u=t.indexOf(B);if(u<s||u>z){C.push(B)}}for(x=0,w=C.length;x<w;++x){v.doDeselect(C[x])}v.resumeChanges()}if(y.length){v.doMultiSelect(y,true)}else{v.maybeFireSelectionChange(C.length>0)}},deselectRange:function(q,s){var n=this,t=n.store,m,o,p,l;if(n.isLocked()){return}m=n.normalizeRowRange(q,s);q=m[0];s=m[1];p=[];for(o=q;o<=s;o++){l=t.getAt(o);if(n.isSelected(l)){p.push(l)}}if(p.length){n.doDeselect(p)}},normalizeRowRange:function(l,e){var h=this.store,j;if(!Ext.isNumber(l)){l=h.indexOf(l)}l=Math.max(0,l);if(!Ext.isNumber(e)){e=h.indexOf(e)}e=Math.min(e,h.getCount()-1);if(l>e){j=e;e=l;l=j}return[l,e]},onModelIdChanged:function(j,m,l,n,h){this.selected.updateKey(h,n)},select:function(d,h,e){if(Ext.isDefined(d)&&!(Ext.isArray(d)&&!d.length)){this.doSelect(d,h,e)}},deselect:function(c,d){this.doDeselect(c,d)},doSelect:function(n,l,h){var m=this,j;if(m.locked||!m.store){return}if(typeof n==="number"){j=m.store.getAt(n);if(!j){return}n=[j]}if(m.selectionMode=="SINGLE"&&n){j=n.length?n[0]:n;m.doSingleSelect(j,h)}else{m.doMultiSelect(n,l,h)}},doMultiSelect:function(y,o,p){var s=this,x=s.selected,q=false,n,v,t,u,w;if(s.locked){return}y=!Ext.isArray(y)?[y]:y;t=y.length;if(!o&&x.getCount()>0){n=s.deselectDuringSelect(y,x.getRange(),p);if(n[0]){s.maybeFireSelectionChange(n[1]>0&&!p);return}}w=function(){x.add(u);q=true};for(v=0;v<t;v++){u=y[v];if(s.isSelected(u)){continue}s.lastSelected=u;s.onSelectChange(u,true,p,w)}if(!s.preventFocus){s.setLastFocused(u,p)}s.maybeFireSelectionChange(q&&!p)},deselectDuringSelect:function(q,u,m){var n=this,o=u.length,s=0,p=false,l,t;n.suspendChanges();for(t=0;t<o;++t){l=u[t];if(!Ext.Array.contains(q,l)){if(n.doDeselect(l,m)){++s}else{p=true}}}n.resumeChanges();return[p,s]},doDeselect:function(w,n){var o=this,v=o.selected,t=0,p,s,m=0,q=0,u;if(o.locked||!o.store){return false}if(typeof w==="number"){s=o.store.getAt(w);if(!s){return false}w=[s]}else{if(!Ext.isArray(w)){w=[w]}}u=function(){++q;v.remove(s)};p=w.length;o.suspendChanges();for(;t<p;t++){s=w[t];if(o.isSelected(s)){if(o.lastSelected===s){o.lastSelected=v.last();if(o.lastFocused===s){o.setLastFocused(null)}}++m;o.onSelectChange(s,false,n,u)}}o.resumeChanges();o.maybeFireSelectionChange(q>0&&!n);return q===m},doSingleSelect:function(j,h){var n=this,l=false,o=n.selected,m;if(n.locked){return}if(n.isSelected(j)){return}if(o.getCount()){n.suspendChanges();if(!n.doDeselect(n.lastSelected,h)){n.resumeChanges();return}n.resumeChanges()}m=function(){o.add(j);n.lastSelected=j;l=true};n.onSelectChange(j,true,h,m);if(l){if(!h&&!n.preventFocus){n.setLastFocused(j)}n.maybeFireSelectionChange(!h)}},setLastFocused:function(l,e){var j=this,h=j.lastFocused;if(l!==h){j.lastFocused=l;j.onLastFocusChanged(h,l,e)}},isFocused:function(c){return c===this.getLastFocused()},maybeFireSelectionChange:function(d){var c=this;if(d&&!c.suspendChange){c.fireEvent("selectionchange",c,c.getSelection())}},getLastSelected:function(){return this.lastSelected},getLastFocused:function(){return this.lastFocused},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(c){c=c?c.toUpperCase():"SINGLE";this.selectionMode=this.modes[c]?c:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(c){this.locked=!!c},isRangeSelected:function(n,o){var l=this,h=l.store,m,j;j=l.normalizeRowRange(n,o);n=j[0];o=j[1];for(m=n;m<=o;m++){if(!l.isSelected(h.getAt(m))){return false}}return true},isSelected:function(c){c=Ext.isNumber(c)?this.store.getAt(c):c;return this.selected.contains(c)},hasSelection:function(){return this.selected.getCount()>0},getSelectionId:function(c){return c.internalId},pruneIf:function(){var l=this,n=l.selected,o=[],j=n.length,h,m;if(l.pruneRemoved){for(h=0;h<j;h++){m=n.getAt(h);if(!l.getStoreRecord(m)){o.push(m)}}if(o.length){for(h=0,j=o.length;h<j;h++){n.remove(o[h])}l.maybeFireSelectionChange(true)}}},getStoreRecord:function(j){var p=this.store,q,n,l,m,o;if(j){if(j.hasId()){return p.getById(j.getId())}else{q=p.data.items;l=q.length;m=j.internalId;for(o=0;o<l;++o){n=q[o];if(m===n.internalId){return n}}}}return null},refresh:function(){var s=this,o=s.store,y,v=[],t=[],w=s.getSelection(),u=w.length,p,q,x=0,n=s.getLastFocused();if(!o){return}for(;x<u;x++){p=w[x];if(o.indexOf(p)!==-1){v.push(p)}else{if(!s.pruneRemoved){y=o.getById(p.getId());if(y){v.push(y)}else{t.push(p)}}}if(s.mode==="SINGLE"&&t.length){break}}if(s.selected.getCount()!=(v.length+t.length)){q=true}s.clearSelections();if(o.indexOf(n)!==-1){s.setLastFocused(n,true)}if(v.length){s.doSelect(v,false,true)}if(t.length){s.selected.addAll(t);if(!s.lastSelected){s.lastSelected=t[t.length-1]}}s.maybeFireSelectionChange(q)},clearSelections:function(){this.selected.clear();this.lastSelected=null;this.setLastFocused(null)},onStoreAdd:Ext.emptyFn,onStoreClear:function(){if(this.selected.getCount()>0){this.clearSelections();this.maybeFireSelectionChange(true)}},onStoreRemove:function(n,h,m,j){var l=this;if(l.selectionStart&&Ext.Array.contains(h,l.selectionStart)){l.selectionStart=null}if(j||l.locked||!l.pruneRemoved){return}l.deselectDeletedRecords(h)},deselectDeletedRecords:function(j){var n=this,p=n.selected,q,o=j.length,m=0,l;for(q=0;q<o;q++){l=j[q];if(p.remove(l)){if(n.lastSelected==l){n.lastSelected=null}if(n.getLastFocused()==l){n.setLastFocused(null)}++m}}if(m){n.maybeFireSelectionChange(true)}},getCount:function(){return this.selected.getCount()},onUpdate:Ext.emptyFn,destroy:function(){this.clearListeners()},onStoreUpdate:Ext.emptyFn,onStoreRefresh:function(){var n=this,p=n.selected,j,o,q,m,l;if(n.store.buffered){return}j=p.items;o=j.length;n.lastSelected=n.getStoreRecord(n.lastSelected);for(q=0;q<o;++q){m=j[q];l=n.getStoreRecord(m);if(l){if(m.hasId()){n.selected.replace(l)}}else{n.selected.remove(m)}}},onStoreLoad:Ext.emptyFn,onSelectChange:function(j,n,o,l){var m=this,h=n?"select":"deselect";if((o||m.fireEvent("before"+h,m,j))!==false&&l()!==false){if(!o){m.fireEvent(h,m,j)}}},onLastFocusChanged:function(c,d){this.fireEvent("focuschange",this,c,d)},onEditorKey:Ext.emptyFn,beforeViewRender:function(c){this.views=this.views||[];this.views.push(c);this.bindStore(c.getStore(),true)},bindComponent:Ext.emptyFn},1,0,0,0,0,[["bindable",Ext.util.Bindable]],[Ext.selection,"Model",Ext,"AbstractSelectionModel"],0));(Ext.cmd.derive("Ext.selection.DataViewModel",Ext.selection.Model,{deselectOnContainerClick:true,enableKeyNav:true,constructor:function(c){this.addEvents("beforedeselect","beforeselect","deselect","select");this.callParent(arguments)},bindComponent:function(e){var d=this,h={refresh:d.refresh,scope:d};d.view=e;d.bindStore(e.getStore());h[e.triggerEvent]=d.onItemClick;h[e.triggerCtEvent]=d.onContainerClick;e.on(h);if(d.enableKeyNav){d.initKeyNav(e)}},onUpdate:function(c){var d=this.view;if(d&&this.isSelected(c)){d.onItemSelect(c)}},onItemClick:function(e,h,l,m,j){this.selectWithEvent(h,j)},onContainerClick:function(){if(this.deselectOnContainerClick){this.deselectAll()}},initKeyNav:function(d){var c=this;if(!d.rendered){d.on({render:Ext.Function.bind(c.initKeyNav,c,[d]),single:true});return}d.el.set({tabIndex:-1});c.keyNav=new Ext.util.KeyNav({target:d.el,ignoreInputFields:true,down:Ext.pass(c.onNavKey,[1],c),right:Ext.pass(c.onNavKey,[1],c),left:Ext.pass(c.onNavKey,[-1],c),up:Ext.pass(c.onNavKey,[-1],c),scope:c})},onNavKey:function(l){l=l||1;var m=this,h=m.view,n=m.getSelection()[0],o=m.view.store.getCount(),j;if(n){j=h.indexOf(h.getNode(n))+l}else{j=0}if(j<0){j=o-1}else{if(j>=o){j=0}}m.select(j)},onSelectChange:function(j,o,p,m){var n=this,l=n.view,q=o?"select":"deselect";if((p||n.fireEvent("before"+q,n,j))!==false&&m()!==false){if(l){if(o){l.onItemSelect(j)}else{l.onItemDeselect(j)}}if(!p){n.fireEvent(q,n,j)}}},onLastFocusChanged:function(j,e,l){var h=this.view;if(h&&!l&&e){h.focusNode(e);this.fireEvent("focuschange",this,j,e)}},destroy:function(){Ext.destroy(this.keyNav);this.callParent()}},1,0,0,0,0,0,[Ext.selection,"DataViewModel"],0));(Ext.cmd.derive("Ext.view.AbstractView",Ext.Component,{inheritableStatics:{getRecord:function(c){return this.getBoundView(c).getRecord(c)},getBoundView:function(c){return Ext.getCmp(c.boundView)}},deferInitialRefresh:true,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:true,loadingUseMsg:true,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,preserveScrollOnRefresh:false,ariaRole:"listbox",itemAriaRole:"option",last:false,triggerEvent:"itemclick",triggerCtEvent:"containerclick",refreshNeeded:true,addCmpEvents:Ext.emptyFn,initComponent:function(){var l=this,h=Ext.isDefined,j=l.itemTpl,e={};if(j){if(Ext.isArray(j)){j=j.join("")}else{if(Ext.isObject(j)){e=Ext.apply(e,j.initialConfig);j=j.html}}if(!l.itemSelector){l.itemSelector="."+l.itemCls}j=Ext.String.format('<tpl for="."><div class="{0}" role="{2}">{1}</div></tpl>',l.itemCls,j,l.itemAriaRole);l.tpl=new Ext.XTemplate(j,e)}l.callParent();l.tpl=l.getTpl("tpl");if(l.overItemCls){l.trackOver=true}l.addEvents("beforerefresh","refresh","viewready","itemupdate","itemadd","itemremove");l.addCmpEvents();l.store=Ext.data.StoreManager.lookup(l.store||"ext-empty-store");if(!l.dataSource){l.dataSource=l.store}l.bindStore(l.dataSource,true,"dataSource");if(!l.all){l.all=new Ext.CompositeElementLite()}l.scrollState={top:0,left:0};l.on({scroll:l.onViewScroll,element:"el",scope:l})},onRender:function(){var j=this,e=j.loadMask,l=j.getMaskStore(),h={target:j,msg:j.loadingText,useMsg:j.loadingUseMsg,store:l};j.callParent(arguments);if(e&&!l.proxy.isSynchronous){if(j.loadingCls){h.msgCls=j.loadingCls}if(Ext.isObject(e)){h=Ext.apply(h,e)}j.loadMask=new Ext.LoadMask(h);j.loadMask.on({scope:j,beforeshow:j.onMaskBeforeShow,hide:j.onMaskHide})}},beforeLayout:function(){var c=this;c.callParent(arguments);if(c.refreshNeeded&&!c.pendingRefresh){if(c.refreshCounter){c.refresh()}else{c.doFirstRefresh(c.dataSource)}}},getMaskStore:function(){return this.store},onMaskBeforeShow:function(){var c=this,d=c.loadingHeight;if(d&&d>c.getHeight()){c.hasLoadingHeight=true;c.oldMinHeight=c.minHeight;c.minHeight=d;c.updateLayout()}},onMaskHide:function(){var c=this;if(!c.destroying&&c.hasLoadingHeight){c.minHeight=c.oldMinHeight;c.updateLayout();delete c.hasLoadingHeight}},beforeRender:function(){this.callParent(arguments);this.getSelectionModel().beforeViewRender(this)},afterRender:function(){this.callParent(arguments);this.getSelectionModel().bindComponent(this)},getSelectionModel:function(){var d=this,c="SINGLE";if(d.simpleSelect){c="SIMPLE"}else{if(d.multiSelect){c="MULTI"}}if(!d.selModel||!d.selModel.events){d.selModel=new Ext.selection.DataViewModel(Ext.apply({allowDeselect:d.allowDeselect,mode:c},d.selModel))}if(!d.selModel.hasRelaySetup){d.relayEvents(d.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect","focuschange"]);d.selModel.hasRelaySetup=true}if(d.disableSelection){d.selModel.locked=true}return d.selModel},refresh:function(){var t=this,n,l,q,s,o,m,p;if(!t.rendered||t.isDestroyed){return}if(!t.hasListeners.beforerefresh||t.fireEvent("beforerefresh",t)!==false){n=t.getTargetEl();m=t.getViewRange();o=n.dom;if(!t.preserveScrollOnRefresh){l=o.parentNode;q=o.style.display;o.style.display="none";s=o.nextSibling;l.removeChild(o)}if(t.refreshCounter){p=true;t.clearViewEl()}else{t.fixedNodes=n.dom.childNodes.length;t.refreshCounter=1}t.tpl.append(n,t.collectData(m,t.all.startIndex||0));if(!t.preserveScrollOnRefresh){l.insertBefore(o,s);o.style.display=q}if(m.length<1){if(!t.store.loading&&(!t.deferEmptyText||p)){Ext.core.DomHelper.insertHtml("beforeEnd",n.dom,t.emptyText)}t.all.clear()}else{t.collectNodes(n.dom);t.updateIndexes(0)}if(p){if(t.refreshSelmodelOnRefresh!==false){t.selModel.refresh()}else{t.selModel.pruneIf()}}t.refreshNeeded=false;this.refreshSize();t.fireEvent("refresh",t);if(!t.viewReady){t.viewReady=true;t.fireEvent("viewready",t)}}},collectNodes:function(c){var d=this.all;d.fill(Ext.query(this.getItemSelector(),Ext.getDom(c)),d.startIndex||0)},getViewRange:function(){return this.dataSource.getRange()},refreshSize:function(){var c=this.getSizeModel();if(c.height.shrinkWrap||c.width.shrinkWrap){this.updateLayout()}},clearViewEl:function(){var c=this,d=c.getTargetEl();if(c.fixedNodes){while(d.dom.childNodes[c.fixedNodes]){d.dom.removeChild(d.dom.childNodes[c.fixedNodes])}}else{d.update("")}c.refreshCounter++},onViewScroll:Ext.emptyFn,onIdChanged:Ext.emptyFn,saveScrollState:function(){if(this.rendered){var c=this.el.dom,d=this.scrollState;d.left=c.scrollLeft;d.top=c.scrollTop}},restoreScrollState:function(){if(this.rendered){var c=this.el.dom,d=this.scrollState;c.scrollLeft=d.left;c.scrollTop=d.top}},prepareData:function(m,n,o){var h,j,l;if(o){h=o.getAssociatedData();for(j in h){if(h.hasOwnProperty(j)){if(!l){m=Ext.Object.chain(m);l=true}m[j]=h[j]}}}return m},collectData:function(o,l){var m=[],n=0,j=o.length,h;for(;n<j;n++){h=o[n];m[n]=this.prepareData(h.data,l+n,h)}return m},bufferRender:function(h,e){var l=this,j=l.renderBuffer||(l.renderBuffer=document.createElement("div"));l.tpl.overwrite(j,l.collectData(h,e));return Ext.DomQuery.select(l.getItemSelector(),j)},getNodeContainer:function(){return this.getTargetEl()},onUpdate:function(l,j){var m=this,h,n;if(m.viewReady){h=m.dataSource.indexOf(j);if(h>-1){n=m.bufferRender([j],h)[0];if(m.getNode(j)){m.all.replaceElement(h,n,true);m.updateIndexes(h,h);m.selModel.onUpdate(j);if(m.hasListeners.itemupdate){m.fireEvent("itemupdate",j,h,n)}return n}}}},onReplace:function(q,p,x,w){var s=this,t,j=s.all,y,o,u,v;if(s.rendered){y=s.bufferRender(w,p,true);o=j.item(p);if(o){j.item(p).insertSibling(y,"before",true)}else{s.appendNodes(y)}j.insert(p,y);p+=w.length;t=p+x.length-1;j.removeRange(p,t,true);if(s.refreshSelmodelOnRefresh!==false){s.selModel.refresh()}s.updateIndexes(p);s.refreshSize();if(s.hasListeners.itemremove){for(u=x.length,v=t;u>=0;--u,--v){s.fireEvent("itemremove",x[u],v)}}if(s.hasListeners.itemadd){s.fireEvent("itemadd",w,p,y)}}},onAdd:function(n,h,m){var l=this,j;if(l.rendered){if(l.all.getCount()===0){l.refresh();j=l.all.slice()}else{j=l.doAdd(h,m);if(l.refreshSelmodelOnRefresh!==false){l.selModel.refresh()}l.updateIndexes(m);l.refreshSize()}if(l.hasListeners.itemadd){l.fireEvent("itemadd",h,m,j)}}},appendNodes:function(e){var l=document.createDocumentFragment(),h=e.length,j;for(j=0;j<h;++j){l.appendChild(e[j])}this.getNodeContainer().appendChild(l)},doAdd:function(t,s){var n=this,l=n.bufferRender(t,s,true),p=n.all,o=p.getCount(),q=p.startIndex||0,m=p.endIndex||o-1;if(o===0||s>m){n.appendNodes(l)}else{if(s<=q){p.item(q).insertSibling(l,"before",true)}else{p.item(s).insertSibling(l,"before",true)}}p.insert(s,l);return l},onRemove:function(o,l,n){var q=this,p=q.hasListeners.itemremove,s,m,t;if(q.all.getCount()){if(q.dataSource.getCount()===0){if(p){for(s=n.length-1;s>=0;--s){q.fireEvent("itemremove",l[s],n[s])}}q.refresh()}else{for(s=n.length-1;s>=0;--s){m=l[s];t=n[s];if(q.all.item(t)){q.doRemove(m,t);if(p){q.fireEvent("itemremove",m,t)}}}q.updateIndexes(n[0])}this.refreshSize()}},doRemove:function(d,c){this.all.removeElement(c,true)},refreshNode:function(c){this.onUpdate(this.dataSource,this.store.getAt(c))},updateIndexes:function(l,m){var h=this.all.elements,j=this.getViewRange(),n;l=l||0;m=m||((m===0)?0:(h.length-1));for(n=l;n<=m;n++){h[n].viewIndex=n;h[n].viewRecordId=j[n].internalId;if(!h[n].boundView){h[n].boundView=this.id}}},getStore:function(){return this.store},bindStore:function(h,e,j){var l=this;l.mixins.bindable.bindStore.apply(l,arguments);if(!e){l.getSelectionModel().bindStore(h)}if(l.store&&l.componentLayoutCounter){l.doFirstRefresh(h)}},doFirstRefresh:function(d){var c=this;if(d&&!d.loading){if(c.deferInitialRefresh){c.applyFirstRefresh()}else{c.refresh()}}},applyFirstRefresh:function(){var c=this;if(c.isDestroyed){return}c.pendingRefresh=0;if(c.up("[isCollapsingOrExpanding]")){c.pendingRefresh=Ext.Function.defer(c.applyFirstRefresh,100,c)}else{c.pendingRefresh=Ext.Function.defer(function(){c.pendingRefresh=0;if(!c.isDestroyed){c.refresh()}},1)}},onUnbindStore:function(c){this.setMaskBind(null)},onBindStore:function(j,h,m){var n=this,l=n.dataSource;n.setMaskBind(j);if(!h&&m==="store"&&(!l||!l.isFeatureStore)){this.bindStore(j,false,"dataSource")}},setMaskBind:function(c){var d=this.loadMask;if(d&&d.bindStore){d.bindStore(c)}},getStoreListeners:function(){var c=this;return{idchanged:c.onIdChanged,refresh:c.onDataRefresh,replace:c.onReplace,add:c.onAdd,bulkremove:c.onRemove,update:c.onUpdate,clear:c.refresh}},onDataRefresh:function(){this.refreshView()},refreshView:function(){var c=this,d=c.blockRefresh||!c.rendered||c.up("[collapsed],[isCollapsingOrExpanding],[hidden]");if(d){c.refreshNeeded=true;c.deferInitialRefresh=false}else{if(c.bufferedRenderer&&c.all.getCount()){c.bufferedRenderer.refreshView()}else{c.refresh()}}},findItemByChild:function(c){return Ext.fly(c).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(c){return c.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var e=[],h=this.selModel.getSelection(),j=h.length,l=0;for(;l<j;l++){e.push(this.getNode(h[l]))}return e},getRecords:function(n){var h=[],m=0,j=n.length,l=this.dataSource.data;for(;m<j;m++){h[h.length]=l.getByKey(n[m].viewRecordId)}return h},getRecord:function(c){return this.dataSource.data.getByKey(Ext.getDom(c).viewRecordId)},isSelected:function(c){var d=this.getRecord(c);return this.selModel.isSelected(d)},select:function(d,h,e){this.selModel.select(d,h,e)},deselect:function(c,d){this.selModel.deselect(c,d)},getNode:function(c){if((!c&&c!==0)||!this.rendered){return null}if(Ext.isString(c)){return document.getElementById(c)}if(Ext.isNumber(c)){return this.all.elements[c]}if(c.isModel){return this.getNodeByRecord(c)}return c},getNodeByRecord:function(h){var l=this.all.elements,j=l.length,e=0;for(;e<j;e++){if(l[e].viewRecordId===h.internalId){return l[e]}}return null},getNodes:function(h,e){var d=this.all;if(e===undefined){e=d.getCount()}else{e++}return d.slice(h||0,e)},indexOf:function(c){c=this.getNode(c);if(!c&&c!==0){return -1}if(Ext.isNumber(c.viewIndex)){return c.viewIndex}return this.all.indexOf(c)},onDestroy:function(){var c=this;c.all.clear();c.callParent();c.bindStore(null);c.selModel.destroy()},onItemSelect:function(d){var c=this.getNode(d);if(c){Ext.fly(c).addCls(this.selectedItemCls)}},onItemDeselect:function(d){var c=this.getNode(d);if(c){Ext.fly(c).removeCls(this.selectedItemCls)}},getItemSelector:function(){return this.itemSelector}},0,0,["component","box"],{component:true,box:true},0,[["bindable",Ext.util.Bindable]],[Ext.view,"AbstractView"],function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection().length},getSelectedRecords:function(){if(Ext.global.console){Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel")}return this.selModel.getSelection()},select:function(h,e,j){if(Ext.global.console){Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()")}var l=this.getSelectionModel();return l.select.apply(l,arguments)},clearSelections:function(){if(Ext.global.console){Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()")}var c=this.getSelectionModel();return c.deselectAll()}})})}));(Ext.cmd.derive("Ext.view.View",Ext.view.AbstractView,{alternateClassName:"Ext.DataView",deferHighlight:Ext.isIE7m?100:0,mouseOverOutBuffer:20,inputTagRe:/^textarea$|^input$/i,inheritableStatics:{EventMap:{mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",focus:"Focus"}},initComponent:function(){var c=this;c.callParent();if(c.mouseOverOutBuffer){c.handleMouseOver=Ext.Function.createBuffered(c.handleMouseOver,c.mouseOverOutBuffer,c);c.handleMouseOut=Ext.Function.createBuffered(c.handleMouseOut,c.mouseOverOutBuffer,c);c.lastMouseOverEvent=new Ext.EventObjectImpl();c.lastMouseOutEvent=new Ext.EventObjectImpl()}else{if(c.deferHighlight){c.setHighlightedItem=Ext.Function.createBuffered(c.setHighlightedItem,c.deferHighlight,c)}}},addCmpEvents:function(){this.addEvents("beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","beforeitemkeydown","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermousedown","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect","beforedeselect","select","deselect","focuschange","highlightitem","unhighlightitem")},getFocusEl:function(){return this.getTargetEl()},afterRender:function(){var c=this;c.callParent();c.mon(c.getTargetEl(),{scope:c,freezeEvent:true,click:c.handleEvent,mousedown:c.handleEvent,mouseup:c.handleEvent,dblclick:c.handleEvent,contextmenu:c.handleEvent,keydown:c.handleEvent,mouseover:c.onMouseOver,mouseout:c.onMouseOut})},onMouseOver:function(c){var d=this;if(d.mouseOverOutBuffer){c=d.lastMouseOverEvent.setEvent(c.browserEvent,true)}d.handleMouseOver(c)},onMouseOut:function(j){var m=this,h=m.getTargetSelector(),e=j.getTarget(h),l=j.getRelatedTarget(h);if((e===l)&&!(e===null&&l===null)){return}if(m.mouseOverOutBuffer){j=m.lastMouseOutEvent.setEvent(j.browserEvent,true)}m.handleMouseOut(j,e)},getTargetSelector:function(){return this.dataRowSelector||this.itemSelector},handleMouseOver:function(j){var l=this,h=l.getTargetSelector(),e=j.getTarget(h);if(!l.isDestroyed){if(e){if(l.mouseOverItem!==e&&l.el.contains(e)){l.mouseOverItem=j.item=e;j.newType="mouseenter";l.handleEvent(j)}}else{l.handleEvent(j)}}},handleMouseOut:function(j,l){var e=this,h;if(!e.isDestroyed){if(l&&(h=e.self.getBoundView(l))){j.item=l;j.newType="mouseleave";h.handleEvent(j);h.mouseOverItem=null}else{e.handleEvent(j)}}},handleEvent:function(h){var d=this,e=h.type==="keydown"&&h.getKey();if(d.processUIEvent(h)!==false){d.processSpecialEvent(h)}if(e===h.SPACE){if(!d.inputTagRe.test(h.getTarget().tagName)){h.stopEvent()}}},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,processUIEvent:function(o){if(!Ext.getBody().isAncestor(o.target)){return}var n=this,e=o.getTarget(n.getTargetSelector(),n.getTargetEl()),u=n.statics().EventMap,p,q,m=o.type,s=m,t;if(o.newType){s=o.newType;e=o.item;o.newType=o.item=null}if(!e&&m=="keydown"){t=n.getSelectionModel();q=t.lastFocused||t.getLastSelected();if(q){e=n.getNode(q,true)}}if(e){if(!q){q=n.getRecord(e)}p=n.indexInStore?n.indexInStore(q):n.indexOf(e);if(!q||n.processItemEvent(q,e,p,o)===false){return false}if((n["onBeforeItem"+u[s]](q,e,p,o)===false)||(n.fireEvent("beforeitem"+s,n,q,e,p,o)===false)||(n["onItem"+u[s]](q,e,p,o)===false)){return false}n.fireEvent("item"+s,n,q,e,p,o)}else{if((n.processContainerEvent(o)===false)||(n["onBeforeContainer"+u[m]](o)===false)||(n.fireEvent("beforecontainer"+m,n,o)===false)||(n["onContainer"+u[m]](o)===false)){return false}n.fireEvent("container"+m,n,o)}return true},onItemMouseEnter:function(h,l,e,j){if(this.trackOver){this.highlightItem(l)}},onItemMouseLeave:function(h,l,e,j){if(this.trackOver){this.clearHighlight()}},onItemMouseDown:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,setHighlightedItem:function(m){var n=this,o=n.highlightedItem,l=n.overItemCls,j=n.beforeOverItemCls,h;if(o!=m){if(o){Ext.fly(o).removeCls(l);h=o.previousSibling;if(j&&h){Ext.fly(h).removeCls(j)}n.fireEvent("unhighlightitem",n,o)}n.highlightedItem=m;if(m){Ext.fly(m).addCls(n.overItemCls);h=m.previousSibling;if(j&&h){Ext.fly(h).addCls(j)}n.fireEvent("highlightitem",n,m)}}},highlightItem:function(c){this.setHighlightedItem(c)},clearHighlight:function(){this.setHighlightedItem(undefined)},onUpdate:function(h,j){var l=this,m,o,n;if(l.viewReady){m=l.getNode(j);o=l.callParent(arguments);n=l.highlightedItem;if(n&&n===m){delete l.highlightedItem;if(o){l.highlightItem(o)}}}},refresh:function(){this.clearHighlight();this.callParent(arguments)},focusNode:function(n){var p=this,q=p.getNode(n,true),s=p.el,m=0,l=0,o=s.getRegion(),t;o.bottom=o.top+s.dom.clientHeight;o.right=o.left+s.dom.clientWidth;if(q){t=Ext.fly(q).getRegion();if(t.top<o.top){m=t.top-o.top}else{if(t.bottom>o.bottom){m=t.bottom-o.bottom}}if(t.left<o.left){l=t.left-o.left}else{if(t.right>o.right){l=t.right-o.right}}if(l||m){p.scrollBy(l,m,false)}Ext.fly(q).set({tabIndex:-1});q.focus()}},bindStore:function(h,n,j){var m=this,l=this.dataSource;j=j||"store";if(l&&l.isFeatureStore){m[j]=h||null;if(h&&h.isFeatureStore){this.bindStoreListeners(h);l.bindStore(l.store)}else{l.bindStore(h)}if(h){if(m.componentLayoutCounter){m.doFirstRefresh(h)}}}else{this.callParent(arguments)}}},0,["dataview"],["component","box","dataview"],{component:true,box:true,dataview:true},["widget.dataview"],0,[Ext.view,"View",Ext,"DataView"],0));(Ext.cmd.derive("Ext.layout.component.BoundList",Ext.layout.component.Auto,{type:"component",beginLayout:function(j){var l=this,h=l.owner,e=h.pagingToolbar;l.callParent(arguments);if(h.floating){j.savedXY=h.getXY();h.setXY([0,-9999])}if(e){j.toolbarContext=j.context.getCmp(e)}j.listContext=j.getEl("listEl")},beginLayoutCycle:function(c){var d=this.owner;this.callParent(arguments);if(c.heightModel.auto){d.el.setHeight("auto");d.listEl.setHeight("auto")}},getLayoutItems:function(){var c=this.owner.pagingToolbar;return c?[c]:[]},isValidParent:function(){return true},finishedLayout:function(d){var c=d.savedXY;this.callParent(arguments);if(c){this.owner.setXY(c)}},measureContentWidth:function(c){return this.owner.listEl.getWidth()},measureContentHeight:function(c){return this.owner.listEl.getHeight()},publishInnerHeight:function(l,h){var e=l.toolbarContext,j=0;if(e){j=e.getProp("height")}if(j===undefined){this.done=false}else{l.listContext.setHeight(h-l.getFrameInfo().height-j)}},calculateOwnerHeightFromContentHeight:function(h){var e=this.callParent(arguments),d=h.toolbarContext;if(d){e+=d.getProp("height")}return e}},0,0,0,0,["layout.boundlist"],0,[Ext.layout.component,"BoundList"],0));Ext.define("Ext.toolbar.TextItem",{extend:Ext.toolbar.Item,alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",renderTpl:"{text}",baseCls:Ext.baseCSSPrefix+"toolbar-text",ariaRole:null,beforeRender:function(){var c=this;c.callParent();Ext.apply(c.renderData,{text:c.text})},setText:function(c){var d=this;d.text=c;if(d.rendered){d.el.update(c);d.updateLayout()}}});(Ext.cmd.derive("Ext.form.field.Spinner",Ext.form.field.Trigger,{alternateClassName:"Ext.form.Spinner",trigger1Cls:Ext.baseCSSPrefix+"form-spinner-up",trigger2Cls:Ext.baseCSSPrefix+"form-spinner-down",spinUpEnabled:true,spinDownEnabled:true,keyNavEnabled:true,mouseWheelEnabled:true,repeatTriggerClick:true,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,ariaRole:"spinbutton",triggerTpl:'<td style="{triggerStyle}" class="{triggerCls}" role="presentation"><div class="'+Ext.baseCSSPrefix+"trigger-index-0 "+Ext.baseCSSPrefix+"form-trigger "+Ext.baseCSSPrefix+'form-spinner-up {spinnerUpCls} {childElCls}" role="presentation"></div><div class="'+Ext.baseCSSPrefix+"trigger-index-1 "+Ext.baseCSSPrefix+"form-trigger "+Ext.baseCSSPrefix+'form-spinner-down {spinnerDownCls} {childElCls}" role="presentation"></div></td></tr>',initComponent:function(){this.callParent();this.addEvents("spin","spinup","spindown")},onRender:function(){var c=this,d;c.callParent(arguments);d=c.triggerEl;c.spinUpEl=d.item(0);c.spinDownEl=d.item(1);c.triggerCell=c.spinUpEl.parent();if(c.keyNavEnabled){c.spinnerKeyNav=new Ext.util.KeyNav(c.inputEl,{scope:c,up:c.spinUp,down:c.spinDown})}if(c.mouseWheelEnabled){c.mon(c.bodyEl,"mousewheel",c.onMouseWheel,c)}},getSubTplMarkup:function(e){var l=this,h=e.childElCls,j=Ext.form.field.Base.prototype.getSubTplMarkup.apply(l,arguments);return'<table id="'+l.id+'-triggerWrap" class="'+Ext.baseCSSPrefix+"form-trigger-wrap"+h+'" cellpadding="0" cellspacing="0" role="presentation"><tbody role="presentation"><tr role="presentation"><td id="'+l.id+'-inputCell" class="'+Ext.baseCSSPrefix+"form-trigger-input-cell"+h+'" role="presentation">'+j+"</td>"+l.getTriggerMarkup()+"</tbody></table>"},getTriggerMarkup:function(){return this.getTpl("triggerTpl").apply(this.getTriggerData())},getTriggerData:function(){var d=this,c=(d.readOnly||d.hideTrigger);return{triggerCls:Ext.baseCSSPrefix+"trigger-cell",triggerStyle:c?"display:none":"",spinnerUpCls:!d.spinUpEnabled?d.trigger1Cls+"-disabled":"",spinnerDownCls:!d.spinDownEnabled?d.trigger2Cls+"-disabled":""}},getTriggerWidth:function(){var c=this,d=0;if(c.triggerWrap&&!c.hideTrigger&&!c.readOnly){d=c.triggerWidth}return d},onTrigger1Click:function(){this.spinUp()},onTrigger2Click:function(){this.spinDown()},onTriggerWrapMouseup:function(){this.inputEl.focus()},spinUp:function(){var c=this;if(c.spinUpEnabled&&!c.disabled){c.fireEvent("spin",c,"up");c.fireEvent("spinup",c);c.onSpinUp()}},spinDown:function(){var c=this;if(c.spinDownEnabled&&!c.disabled){c.fireEvent("spin",c,"down");c.fireEvent("spindown",c);c.onSpinDown()}},setSpinUpEnabled:function(e){var d=this,h=d.spinUpEnabled;d.spinUpEnabled=e;if(h!==e&&d.rendered){d.spinUpEl[e?"removeCls":"addCls"](d.trigger1Cls+"-disabled")}},setSpinDownEnabled:function(e){var d=this,h=d.spinDownEnabled;d.spinDownEnabled=e;if(h!==e&&d.rendered){d.spinDownEl[e?"removeCls":"addCls"](d.trigger2Cls+"-disabled")}},onMouseWheel:function(d){var e=this,h;if(e.hasFocus){h=d.getWheelDelta();if(h>0){e.spinUp()}else{if(h<0){e.spinDown()}}d.stopEvent()}},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav","spinUpEl","spinDownEl");this.callParent()}},0,["spinnerfield"],["component","box","field","textfield","triggerfield","trigger","spinnerfield"],{component:true,box:true,field:true,textfield:true,triggerfield:true,trigger:true,spinnerfield:true},["widget.spinnerfield"],0,[Ext.form.field,"Spinner",Ext.form,"Spinner"],0));(Ext.cmd.derive("Ext.form.field.Number",Ext.form.field.Spinner,{alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowExponential:true,allowDecimals:true,decimalSeparator:null,submitLocaleSeparator:true,decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:false,initComponent:function(){var c=this;if(c.decimalSeparator===null){c.decimalSeparator=Ext.util.Format.decimalSeparator}c.callParent();c.setMinValue(c.minValue);c.setMaxValue(c.maxValue)},getErrors:function(n){var h=this,l=h.callParent(arguments),m=Ext.String.format,j;n=Ext.isDefined(n)?n:this.processRawValue(this.getRawValue());if(n.length<1){return l}n=String(n).replace(h.decimalSeparator,".");if(isNaN(n)){l.push(m(h.nanText,n))}j=h.parseValue(n);if(h.minValue===0&&j<0){l.push(this.negativeText)}else{if(j<h.minValue){l.push(m(h.minText,h.minValue))}}if(j>h.maxValue){l.push(m(h.maxText,h.maxValue))}return l},rawToValue:function(c){var d=this.fixPrecision(this.parseValue(c));if(d===null){d=c||null}return d},valueToRaw:function(h){var d=this,e=d.decimalSeparator;h=d.parseValue(h);h=d.fixPrecision(h);h=Ext.isNumber(h)?h:parseFloat(String(h).replace(e,"."));h=isNaN(h)?"":String(h).replace(".",e);return h},getSubmitValue:function(){var d=this,c=d.callParent();if(!d.submitLocaleSeparator){c=c.replace(d.decimalSeparator,".")}return c},onChange:function(){this.toggleSpinners();this.callParent(arguments)},toggleSpinners:function(){var l=this,j=l.getValue(),e=j===null,h;if(l.spinUpEnabled||l.spinUpDisabledByToggle){h=e||j<l.maxValue;l.setSpinUpEnabled(h,true)}if(l.spinDownEnabled||l.spinDownDisabledByToggle){h=e||j>l.minValue;l.setSpinDownEnabled(h,true)}},setMinValue:function(d){var e=this,h;e.minValue=Ext.Number.from(d,Number.NEGATIVE_INFINITY);e.toggleSpinners();if(e.disableKeyFilter!==true){h=e.baseChars+"";if(e.allowExponential){h+=e.decimalSeparator+"e+-"}else{if(e.allowDecimals){h+=e.decimalSeparator}if(e.minValue<0){h+="-"}}h=Ext.String.escapeRegex(h);e.maskRe=new RegExp("["+h+"]");if(e.autoStripChars){e.stripCharsRe=new RegExp("[^"+h+"]","gi")}}},setMaxValue:function(c){this.maxValue=Ext.Number.from(c,Number.MAX_VALUE);this.toggleSpinners()},parseValue:function(c){c=parseFloat(String(c).replace(this.decimalSeparator,"."));return isNaN(c)?null:c},fixPrecision:function(j){var l=this,e=isNaN(j),h=l.decimalPrecision;if(e||!j){return e?"":j}else{if(!l.allowDecimals||h<=0){h=0}}return parseFloat(Ext.Number.toFixed(parseFloat(j),h))},beforeBlur:function(){var c=this,d=c.rawToValue(c.getRawValue());if(!Ext.isEmpty(d)){c.setValue(d)}},setSpinUpEnabled:function(c,d){this.callParent(arguments);if(!d){delete this.spinUpDisabledByToggle}else{this.spinUpDisabledByToggle=!c}},onSpinUp:function(){var c=this;if(!c.readOnly){c.setSpinValue(Ext.Number.constrain(c.getValue()+c.step,c.minValue,c.maxValue))}},setSpinDownEnabled:function(c,d){this.callParent(arguments);if(!d){delete this.spinDownDisabledByToggle}else{this.spinDownDisabledByToggle=!c}},onSpinDown:function(){var c=this;if(!c.readOnly){c.setSpinValue(Ext.Number.constrain(c.getValue()-c.step,c.minValue,c.maxValue))}},setSpinValue:function(h){var d=this,e;if(d.enforceMaxLength){if(d.fixPrecision(h).toString().length>d.maxLength){return}}d.setValue(h)}},0,["numberfield"],["component","box","field","textfield","triggerfield","trigger","spinnerfield","numberfield"],{component:true,box:true,field:true,textfield:true,triggerfield:true,trigger:true,spinnerfield:true,numberfield:true},["widget.numberfield"],0,[Ext.form.field,"Number",Ext.form,"NumberField",Ext.form,"Number"],0));(Ext.cmd.derive("Ext.toolbar.Paging",Ext.toolbar.Toolbar,{alternateClassName:"Ext.PagingToolbar",displayInfo:false,prependButtons:false,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var c=this,d={scope:c,blur:c.onPagingBlur};d[Ext.EventManager.getKeyEvent()]=c.onPagingKeyDown;return[{itemId:"first",tooltip:c.firstText,overflowText:c.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:true,handler:c.moveFirst,scope:c},{itemId:"prev",tooltip:c.prevText,overflowText:c.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:true,handler:c.movePrevious,scope:c},"-",c.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:false,minValue:1,hideTrigger:true,enableKeyEvents:true,keyNavEnabled:false,selectOnFocus:true,submitValue:false,isFormField:false,width:c.inputItemWidth,margins:"-1 2 3 2",listeners:d},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(c.afterPageText,1)},"-",{itemId:"next",tooltip:c.nextText,overflowText:c.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:true,handler:c.moveNext,scope:c},{itemId:"last",tooltip:c.lastText,overflowText:c.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:true,handler:c.moveLast,scope:c},"-",{itemId:"refresh",tooltip:c.refreshText,overflowText:c.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",disabled:c.store.isLoading(),handler:c.doRefresh,scope:c}]},initComponent:function(){var d=this,e=d.items||d.buttons||[],h;d.bindStore(d.store||"ext-empty-store",true);h=d.getPagingItems();if(d.prependButtons){d.items=e.concat(h)}else{d.items=h.concat(e)}delete d.buttons;if(d.displayInfo){d.items.push("->");d.items.push({xtype:"tbtext",itemId:"displayItem"})}d.callParent();d.addEvents("change","beforechange")},beforeRender:function(){var c=this;c.callParent(arguments);if(!c.store.isLoading()){c.calledFromRender=true;c.onLoad();delete c.calledFromRender}},updateInfo:function(){var m=this,o=m.child("#displayItem"),j=m.store,h=m.getPageData(),n,l;if(o){n=j.getCount();if(n===0){l=m.emptyMsg}else{l=Ext.String.format(m.displayMsg,h.fromRecord,h.toRecord,h.total)}o.setText(l)}},onLoad:function(){var o=this,s,l,t,m,p,n,q;p=o.store.getCount();n=p===0;if(!n){s=o.getPageData();l=s.currentPage;t=s.pageCount;if(l>t){o.store.loadPage(t);return}m=Ext.String.format(o.afterPageText,isNaN(t)?1:t)}else{l=0;t=0;m=Ext.String.format(o.afterPageText,0)}Ext.suspendLayouts();q=o.child("#afterTextItem");if(q){q.setText(m)}q=o.getInputItem();if(q){q.setDisabled(n).setValue(l)}o.setChildDisabled("#first",l===1||n);o.setChildDisabled("#prev",l===1||n);o.setChildDisabled("#next",l===t||n);o.setChildDisabled("#last",l===t||n);o.setChildDisabled("#refresh",false);o.updateInfo();Ext.resumeLayouts(true);if(!o.calledFromRender){o.fireEvent("change",o,s)}},setChildDisabled:function(e,d){var h=this.child(e);if(h){h.setDisabled(d)}},getPageData:function(){var c=this.store,d=c.getTotalCount();return{total:d,currentPage:c.currentPage,pageCount:Math.ceil(d/c.pageSize),fromRecord:((c.currentPage-1)*c.pageSize)+1,toRecord:Math.min(c.currentPage*c.pageSize,d)}},onLoadError:function(){this.setChildDisabled("#refresh",false)},getInputItem:function(){return this.child("#inputItem")},readPageFromInput:function(e){var l=this.getInputItem(),j=false,h;if(l){h=l.getValue();j=parseInt(h,10);if(!h||isNaN(j)){l.setValue(e.currentPage);return false}}return j},onPagingBlur:function(h){var d=this.getInputItem(),e;if(d){e=this.getPageData().currentPage;d.setValue(e)}},onPagingKeyDown:function(c,d){this.processKeyEvent(c,d)},processKeyEvent:function(m,n){var p=this,e=n.getKey(),q=p.getPageData(),l=n.shiftKey?10:1,o;if(e==n.RETURN){n.stopEvent();o=p.readPageFromInput(q);if(o!==false){o=Math.min(Math.max(1,o),q.pageCount);if(o!==q.currentPage&&p.fireEvent("beforechange",p,o)!==false){p.store.loadPage(o)}}}else{if(e==n.HOME||e==n.END){n.stopEvent();o=e==n.HOME?1:q.pageCount;m.setValue(o)}else{if(e==n.UP||e==n.PAGE_UP||e==n.DOWN||e==n.PAGE_DOWN){n.stopEvent();o=p.readPageFromInput(q);if(o){if(e==n.DOWN||e==n.PAGE_DOWN){l*=-1}o+=l;if(o>=1&&o<=q.pageCount){m.setValue(o)}}}}}},beforeLoad:function(){this.setChildDisabled("#refresh",true)},moveFirst:function(){if(this.fireEvent("beforechange",this,1)!==false){this.store.loadPage(1);return true}return false},movePrevious:function(){var h=this,e=h.store,d=e.currentPage-1;if(d>0){if(h.fireEvent("beforechange",h,d)!==false){e.previousPage();return true}}return false},moveNext:function(){var j=this,h=j.store,l=j.getPageData().pageCount,e=h.currentPage+1;if(e<=l){if(j.fireEvent("beforechange",j,e)!==false){h.nextPage();return true}}return false},moveLast:function(){var c=this,d=c.getPageData().pageCount;if(c.fireEvent("beforechange",c,d)!==false){c.store.loadPage(d);return true}return false},doRefresh:function(){var d=this,e=d.store,h=e.currentPage;if(d.fireEvent("beforechange",d,h)!==false){e.loadPage(h);return true}return false},getStoreListeners:function(){return{beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}},unbind:function(c){this.bindStore(null)},bind:function(c){this.bindStore(c)},onDestroy:function(){this.unbind();this.callParent()}},0,["pagingtoolbar"],["component","box","container","toolbar","pagingtoolbar"],{component:true,box:true,container:true,toolbar:true,pagingtoolbar:true},["widget.pagingtoolbar"],[["bindable",Ext.util.Bindable]],[Ext.toolbar,"Paging",Ext,"PagingToolbar"],0));(Ext.cmd.derive("Ext.view.BoundList",Ext.view.View,{alternateClassName:"Ext.BoundList",pageSize:0,baseCls:Ext.baseCSSPrefix+"boundlist",itemCls:Ext.baseCSSPrefix+"boundlist-item",listItemCls:"",shadow:false,trackOver:true,refreshed:0,preserveScrollOnRefresh:true,deferInitialRefresh:false,componentLayout:"boundlist",childEls:["listEl"],renderTpl:['<div id="{id}-listEl" role="presentation" class="{baseCls}-list-ct ',Ext.dom.Element.unselectableCls,'" style="overflow:auto"></div>',"{%","var me=values.$comp, pagingToolbar=me.pagingToolbar;","if (pagingToolbar) {","pagingToolbar.ownerLayout = me.componentLayout;","Ext.DomHelper.generateMarkup(pagingToolbar.getRenderTree(), out);","}","%}",{disableFormats:true}],initComponent:function(){var d=this,e=d.baseCls,h=d.itemCls;d.selectedItemCls=e+"-selected";if(d.trackOver){d.overItemCls=e+"-item-over"}d.itemSelector="."+h;if(d.floating){d.addCls(e+"-floating")}if(!d.tpl){d.tpl=new Ext.XTemplate('<ul class="'+Ext.plainListCls+'"><tpl for=".">','<li role="option" unselectable="on" class="'+h+'">'+d.getInnerTpl(d.displayField)+"</li>","</tpl></ul>")}else{if(!d.tpl.isTemplate){d.tpl=new Ext.XTemplate(d.tpl)}}if(d.pageSize){d.pagingToolbar=d.createPagingToolbar()}d.callParent()},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var c=this,d=[];if(c.pagingToolbar){d.push(c.pagingToolbar)}if(c.loadMask){d.push(c.loadMask)}return d},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{id:this.id+"-paging-toolbar",pageSize:this.pageSize,store:this.dataSource,border:false,ownerCt:this,ownerLayout:this.getComponentLayout()})},finishRenderChildren:function(){var c=this.pagingToolbar;this.callParent(arguments);if(c){c.finishRender()}},refresh:function(){var l=this,h=l.tpl,e=l.pagingToolbar,j=l.rendered;h.field=l.pickerField;h.store=l.store;l.callParent();h.field=h.store=null;if(j&&e&&e.rendered&&!l.preserveScrollOnRefresh){l.el.appendChild(e.el)}if(j&&Ext.isIE6&&Ext.isStrict){l.listEl.repaint()}},bindStore:function(e,d){var h=this.pagingToolbar;this.callParent(arguments);if(h){h.bindStore(e,d)}},getTargetEl:function(){return this.listEl||this.el},getNodeContainer:function(){return Ext.get(this.listEl.dom.firstChild)},getInnerTpl:function(c){return"{"+c+"}"},onDestroy:function(){Ext.destroyMembers(this,"pagingToolbar","listEl");this.callParent()}},0,["boundlist"],["component","box","dataview","boundlist"],{component:true,box:true,dataview:true,boundlist:true},["widget.boundlist"],[["queryable",Ext.Queryable]],[Ext.view,"BoundList",Ext,"BoundList"],0));(Ext.cmd.derive("Ext.view.BoundListKeyNav",Ext.util.KeyNav,{constructor:function(d,e){var h=this;h.boundList=e.boundList;h.callParent([d,Ext.apply({},e,h.defaultHandlers)])},defaultHandlers:{up:function(){var m=this,h=m.boundList,n=h.all,l=h.highlightedItem,o=l?h.indexOf(l):-1,j=o>0?o-1:n.getCount()-1;m.highlightAt(j)},down:function(){var m=this,h=m.boundList,n=h.all,l=h.highlightedItem,o=l?h.indexOf(l):-1,j=o<n.getCount()-1?o+1:0;m.highlightAt(j)},pageup:function(){},pagedown:function(){},home:function(){this.highlightAt(0)},end:function(){var c=this;c.highlightAt(c.boundList.all.getCount()-1)},enter:function(c){this.selectHighlighted(c)}},highlightAt:function(d){var e=this.boundList,h=e.all.item(d);if(h){h=h.dom;e.highlightItem(h);e.getTargetEl().scrollChildIntoView(h,false)}},selectHighlighted:function(j){var e=this.boundList,h=e.getSelectionModel(),l,m;l=e.highlightedItem;if(l){m=e.getRecord(l);if(j.getKey()===j.ENTER||!h.isSelected(m)){h.selectWithEvent(m,j)}}}},1,0,0,0,0,0,[Ext.view,"BoundListKeyNav"],0));(Ext.cmd.derive("Ext.layout.component.field.ComboBox",Ext.layout.component.field.Trigger,{type:"combobox",startingWidth:null,getTextWidth:function(){var s=this,x=s.owner,o=x.store,q=x.displayField,v=o.data.length,p="",u=0,w=0,t,n,y;for(;u<v;u++){n=o.getAt(u).data[q];t=n.length;if(t>w){w=t;p=n}}y=Math.max(s.callParent(arguments),x.inputEl.getTextWidth(p+x.growAppend));if(!s.startingWidth||x.removingRecords){s.startingWidth=y;if(y<x.growMin){x.defaultListConfig.minWidth=x.growMin}x.removingRecords=false}return(y<s.startingWidth)?s.startingWidth:y}},0,0,0,0,["layout.combobox"],0,[Ext.layout.component.field,"ComboBox"],0));(Ext.cmd.derive("Ext.form.field.ComboBox",Ext.form.field.Picker,{alternateClassName:"Ext.form.ComboBox",componentLayout:"combobox",triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",hiddenName:"",hiddenDataCls:Ext.baseCSSPrefix+"hide-display "+Ext.baseCSSPrefix+"form-data-hidden",ariaRole:"combobox",fieldSubTpl:['<div class="{hiddenDataCls}" role="presentation"></div>','<input id="{id}" type="{type}" role="{role}" {inputAttrTpl} class="{fieldCls} {typeCls} {editableCls}" autocomplete="off"','<tpl if="value"> value="{[Ext.util.Format.htmlEncode(values.value)]}"</tpl>','<tpl if="name"> name="{name}"</tpl>','<tpl if="placeholder"> placeholder="{placeholder}"</tpl>','<tpl if="size"> size="{size}"</tpl>','<tpl if="maxLength !== undefined"> maxlength="{maxLength}"</tpl>','<tpl if="readOnly"> readonly="readonly"</tpl>','<tpl if="disabled"> disabled="disabled"</tpl>','<tpl if="tabIdx"> tabIndex="{tabIdx}"</tpl>','<tpl if="fieldStyle"> style="{fieldStyle}"</tpl>',"/>",{compiled:true,disableFormats:true}],getSubTplData:function(){var c=this;Ext.applyIf(c.subTplData,{hiddenDataCls:c.hiddenDataCls});return c.callParent(arguments)},afterRender:function(){var c=this;c.callParent(arguments);c.setHiddenValue(c.value)},multiSelect:false,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:true,pageSize:0,anyMatch:false,caseSensitive:false,autoSelect:true,typeAhead:false,typeAheadDelay:250,selectOnTab:true,forceSelection:false,growToLongestValue:true,clearFilterOnBlur:true,defaultListConfig:{loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},transformInPlace:true,ignoreSelection:0,removingRecords:null,resizeComboToGrow:function(){var c=this;return c.grow&&c.growToLongestValue},initComponent:function(){var o=this,q=Ext.isDefined,j=o.store,p=o.transform,m=o.displayTpl,l,n;Ext.applyIf(o.renderSelectors,{hiddenDataEl:"."+o.hiddenDataCls.split(" ").join(".")});o.addEvents("beforequery","select","beforeselect","beforedeselect");if(p){l=Ext.getDom(p);if(l){if(!o.store){j=Ext.Array.map(Ext.Array.from(l.options),function(a){return[a.value,a.text]})}if(!o.name){o.name=l.name}if(!("value" in o)){o.value=l.value}}}o.bindStore(j||"ext-empty-store",true,true);j=o.store;if(j.autoCreated){o.queryMode="local";o.valueField=o.displayField="field1";if(!j.expanded){o.displayField="field2"}}if(!q(o.valueField)){o.valueField=o.displayField}n=o.queryMode==="local";if(!q(o.queryDelay)){o.queryDelay=n?10:500}if(!q(o.minChars)){o.minChars=n?0:4}if(!m){o.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : values["'+o.displayField+'"]]}<tpl if="xindex < xcount">'+o.delimiter+"</tpl></tpl>")}else{if(!m.isTemplate){o.displayTpl=new Ext.XTemplate(m)}}o.callParent();o.doQueryTask=new Ext.util.DelayedTask(o.doRawQuery,o);if(o.store.getCount()>0){o.setValue(o.value)}if(l){if(o.transformInPlace){o.render(l.parentNode,l);delete o.renderTo}Ext.removeNode(l)}},getStore:function(){return this.store},beforeBlur:function(){var c=this,d=c.queryFilter;c.doQueryTask.cancel();c.assertValue();if(d&&!d.disabled&&c.queryMode==="local"&&c.clearFilterOnBlur){d.disabled=true;c.store.filter()}},onFocus:function(){var c=this,d=c.queryFilter;c.callParent(arguments);if(!c.duringTriggerClick&&c.triggerAction!=="all"&&d&&d.disabled&&c.queryMode==="local"&&c.clearFilterOnBlur){delete c.lastQuery;c.doRawQuery()}},assertValue:function(l){var o=this,n=o.getRawValue(),j=o.getDisplayValue(),m,h;if(o.forceSelection){if(o.multiSelect){if(n!==j){o.setRawValue(j)}}else{m=o.findRecordByDisplay(n);if(m){h=o.value;if(!o.findRecordByValue(h)){o.select(m,true)}}else{o.setRawValue(j)}}}if(l!==true){o.collapse()}},onTypeAhead:function(){var o=this,p=o.displayField,j=o.store.findRecord(p,o.getRawValue()),q=o.getPicker(),n,l,m;if(j){n=j.get(p);l=n.length;m=o.getRawValue().length;q.highlightItem(q.getNode(j));if(m!==0&&m!==l){o.setRawValue(n);o.selectText(m,n.length)}}},resetToDefault:Ext.emptyFn,beforeReset:function(){var c=this.queryFilter;this.callParent();if(c&&!c.disabled){c.disabled=true;this.store.filter()}},onUnbindStore:function(h){var j=this,e=j.picker,l=j.queryFilter;if(l){j.store.removeFilter(l)}if(e){e.bindStore(null)}},onBindStore:function(e,h){var d=this.picker;if(!h){this.resetToDefault()}if(d){d.bindStore(e)}},bindStore:function(j,l,h){var m=this,n=m.queryFilter;m.mixins.bindable.bindStore.call(m,j,h);j=m.getStore();if(j&&n){n.disabled=!!l;j.addFilter(n)}},getStoreListeners:function(){var c=this;return{beforeload:c.onBeforeLoad,clear:c.onClear,datachanged:c.onDataChanged,load:c.onLoad,exception:c.onException,remove:c.onRemove,update:c.onStoreUpdate}},onBeforeLoad:function(){++this.ignoreSelection},onDataChanged:function(){var c=this;if(c.resizeComboToGrow()){c.updateLayout()}if(c.forceSelection&&!c.changingFilters&&!c.findRecordByValue(c.value)){c.setValue(null)}},onStoreUpdate:function(c,d){if(d.get(this.valueField)===this.value){this.setValue(d)}},onClear:function(){var c=this;if(c.resizeComboToGrow()){c.removingRecords=true;c.onDataChanged()}},onRemove:function(){var c=this;if(c.resizeComboToGrow()){c.removingRecords=true}},onException:function(){if(this.ignoreSelection>0){--this.ignoreSelection}this.collapse()},onLoad:function(e,h,j){var l=this;if(l.ignoreSelection>0){--l.ignoreSelection}if(j&&!e.lastOptions.rawQuery){if(l.value==null){if(l.store.getCount()){l.doAutoSelect()}else{l.setValue(l.value)}}else{l.setValue(l.value)}}if(l.forceSelection){l.assertValue(true)}},doRawQuery:function(){this.doQuery(this.getRawValue(),false,true)},doQuery:function(l,h,m){var n=this,j=n.beforeQuery({query:l||"",rawQuery:m,forceAll:h,combo:n,cancel:false});if(j===false||j.cancel){return false}if(n.queryCaching&&j.query===n.lastQuery){if(!m){n.expand()}if(n.queryMode==="local"){n.doAutoSelect()}}else{n.lastQuery=j.query;if(n.queryMode==="local"){n.doLocalQuery(j)}else{n.doRemoteQuery(j)}}return true},beforeQuery:function(d){var c=this;if(c.fireEvent("beforequery",d)===false){d.cancel=true}else{if(!d.cancel){if(d.query.length<c.minChars&&!d.forceAll){d.cancel=true}}}return d},doLocalQuery:function(e){var d=this,h=e.query;d.changingFilters=true;if(!d.queryFilter){d.queryFilter=new Ext.util.Filter({id:d.id+"-query-filter",anyMatch:d.anyMatch,caseSensitive:d.caseSensitive,root:"data",property:d.displayField});d.store.addFilter(d.queryFilter,false)}if(h||!e.forceAll){d.queryFilter.disabled=false;d.queryFilter.setValue(d.enableRegEx?new RegExp(h):h)}else{d.queryFilter.disabled=true}d.store.filter();d.changingFilters=false;if(d.store.getCount()||d.getPicker().emptyText){d.expand()}else{d.collapse()}d.afterQuery(e)},doRemoteQuery:function(d){var h=this,e=function(){h.afterQuery(d)};h.expand();if(h.pageSize){h.loadPage(1,{rawQuery:d.rawQuery,callback:e})}else{h.store.load({params:h.getParams(d.query),rawQuery:d.rawQuery,callback:e})}},afterQuery:function(d){var c=this;if(c.store.getCount()){if(c.typeAhead){c.doTypeAhead()}if(c.getRawValue()!==c.getDisplayValue()){c.ignoreSelection++;c.picker.getSelectionModel().deselectAll();c.ignoreSelection--}if(d.rawQuery){c.syncSelection();if(c.picker&&!c.picker.getSelectionModel().hasSelection()){c.doAutoSelect()}}else{c.doAutoSelect()}}},loadPage:function(c,d){this.store.loadPage(c,Ext.apply({params:this.getParams(this.lastQuery)},d))},onPageChange:function(c,d){this.loadPage(d);return false},getParams:function(h){var d={},e=this.queryParam;if(e){d[e]=h}return d},doAutoSelect:function(){var n=this,h=n.picker,m,j,l=0;if(h&&n.autoSelect&&n.store.getCount()>0){j=h.getSelectionModel();m=j.lastSelected;l=h.getNode(j.selected.length?m:0);if(l){h.highlightItem(l);h.listEl.scrollChildIntoView(l,false)}}},doTypeAhead:function(){var c=this;if(!c.typeAheadTask){c.typeAheadTask=new Ext.util.DelayedTask(c.onTypeAhead,c)}if(c.lastKey!=Ext.EventObject.BACKSPACE&&c.lastKey!=Ext.EventObject.DELETE){c.typeAheadTask.delay(c.typeAheadDelay)}},onTriggerClick:function(){var c=this;c.duringTriggerClick=true;if(!c.readOnly&&!c.disabled){if(c.isExpanded){c.collapse()}else{c.onFocus({});if(c.triggerAction==="all"){c.doQuery(c.allQuery,true)}else{if(c.triggerAction==="last"){c.doQuery(c.lastQuery,true)}else{c.doQuery(c.getRawValue(),false,true)}}}c.inputEl.focus()}delete c.duringTriggerClick},onPaste:function(){var c=this;if(!c.readOnly&&!c.disabled&&c.editable){c.doQueryTask.delay(c.queryDelay)}},onKeyUp:function(j,e){var l=this,h=j.getKey();if(!l.readOnly&&!l.disabled&&l.editable){l.lastKey=h;if(!j.isSpecialKey()||h==j.BACKSPACE||h==j.DELETE){l.doQueryTask.delay(l.queryDelay)}}if(l.enableKeyEvents){l.callParent(arguments)}},initEvents:function(){var c=this;c.callParent();if(!c.enableKeyEvents){c.mon(c.inputEl,"keyup",c.onKeyUp,c)}c.mon(c.inputEl,"paste",c.onPaste,c)},onDestroy:function(){var c=this;if(c.typeAheadTask){c.typeAheadTask.cancel();c.typeAheadTask=null}Ext.destroy(c.listKeyNav);c.bindStore(null);c.callParent()},onAdded:function(){var c=this;c.callParent(arguments);if(c.picker){c.picker.ownerCt=c.up("[floating]");c.picker.registerWithOwnerCt()}},createPicker:function(){var h=this,d,e=Ext.apply({xtype:"boundlist",pickerField:h,selModel:{mode:h.multiSelect?"SIMPLE":"SINGLE",deselectOnContainerClick:false},floating:true,hidden:true,store:h.store,displayField:h.displayField,focusOnToFront:false,pageSize:h.pageSize,tpl:h.tpl},h.listConfig,h.defaultListConfig);d=h.picker=Ext.widget(e);if(h.pageSize){d.pagingToolbar.on("beforechange",h.onPageChange,h)}h.mon(d,{itemclick:h.onItemClick,refresh:h.onListRefresh,scope:h});h.mon(d.getSelectionModel(),{beforeselect:h.onBeforeSelect,beforedeselect:h.onBeforeDeselect,selectionchange:h.onListSelectionChange,scope:h});return d},alignPicker:function(){var h=this,j=h.getPicker(),l=h.getPosition()[1]-Ext.getBody().getScroll().top,m=Ext.Element.getViewHeight()-l-h.getHeight(),n=Math.max(l,m);if(j.height){delete j.height;j.updateLayout()}if(j.getHeight()>n-5){j.setHeight(n-5)}h.callParent()},onListRefresh:function(){if(!this.expanding){this.alignPicker()}this.syncSelection()},onItemClick:function(n,j){var l=this,m=l.picker.getSelectionModel().getSelection(),h=l.valueField;if(!l.multiSelect&&m.length){if(j.get(h)===m[0].get(h)){l.displayTplData=[j.data];l.setRawValue(l.getDisplayValue());l.collapse()}}},onBeforeSelect:function(c,d){return this.fireEvent("beforeselect",this,d,d.index)},onBeforeDeselect:function(c,d){return this.fireEvent("beforedeselect",this,d,d.index)},onListSelectionChange:function(h,m){var j=this,l=j.multiSelect,n=m.length>0;if(!j.ignoreSelection&&j.isExpanded){if(!l){Ext.defer(j.collapse,1,j)}if(l||n){j.setValue(m,false)}if(n){j.fireEvent("select",j,m)}j.inputEl.focus()}},onExpand:function(){var j=this,h=j.listKeyNav,l=j.selectOnTab,e=j.getPicker();if(h){h.enable()}else{h=j.listKeyNav=new Ext.view.BoundListKeyNav(j.inputEl,{boundList:e,forceKeyDown:true,tab:function(a){if(l){this.selectHighlighted(a);j.triggerBlur()}return true},enter:function(a){var d=e.getSelectionModel(),c=d.getCount();this.selectHighlighted(a);if(!j.multiSelect&&c===d.getCount()){j.collapse()}}})}if(l){j.ignoreMonitorTab=true}Ext.defer(h.enable,1,h);j.inputEl.focus()},onCollapse:function(){var c=this,d=c.listKeyNav;if(d){d.disable();c.ignoreMonitorTab=false}},select:function(m,j){var n=this,h=n.picker,l;if(m&&m.isModel&&j===true&&h){l=!h.getSelectionModel().isSelected(m)}n.setValue(m,true);if(l){n.fireEvent("select",n,m)}},findRecord:function(j,l){var e=this.store,h=e.findExact(j,l);return h!==-1?e.getAt(h):false},findRecordByValue:function(c){return this.findRecord(this.valueField,c)},findRecordByDisplay:function(c){return this.findRecord(this.displayField,c)},setValue:function(p,w){var s=this,y=s.valueNotFoundText,o=s.inputEl,v,t,u,A,q=[],z=[],x=[];if(s.store.loading||!s.store.data.length){s.value=p;s.setHiddenValue(p);s.setRawValue("");return s}p=Ext.Array.from(p);for(v=0,t=p.length;v<t;v++){u=p[v];if(!u||!u.isModel){u=s.findRecordByValue(u)}if(u){q.push(u);z.push(u.data);x.push(u.get(s.valueField))}else{if(!s.forceSelection){x.push(p[v]);A={};A[s.displayField]=p[v];z.push(A)}else{if(Ext.isDefined(y)){z.push(y)}}}}s.setHiddenValue(x);s.value=s.multiSelect?x:x[0];if(!Ext.isDefined(s.value)){s.value=null}s.displayTplData=z;s.lastSelection=s.valueModels=q;if(o&&s.emptyText&&!Ext.isEmpty(p)){o.removeCls(s.emptyCls)}s.setRawValue(s.getDisplayValue());s.checkChange();if(w!==false){s.syncSelection()}s.applyEmptyText();return s},setHiddenValue:function(m){var p=this,u=p.hiddenName,q,t,l,n,o,s;if(!p.hiddenDataEl||!u){return}m=Ext.Array.from(m);t=p.hiddenDataEl.dom;l=t.childNodes;n=l[0];o=m.length;s=l.length;if(!n&&o>0){p.hiddenDataEl.update(Ext.DomHelper.markup({tag:"input",type:"hidden",name:u}));s=1;n=t.firstChild}while(s>o){t.removeChild(l[0]);--s}while(s<o){t.appendChild(n.cloneNode(true));++s}for(q=0;q<o;q++){l[q].value=m[q]}},getDisplayValue:function(){return this.displayTpl.apply(this.displayTplData)},getValue:function(){var e=this,h=e.picker,j=e.getRawValue(),l=e.value;if(e.getDisplayValue()!==j){l=j;e.value=e.displayTplData=e.valueModels=null;if(h){e.ignoreSelection++;h.getSelectionModel().deselectAll();e.ignoreSelection--}}return l},getSubmitValue:function(){var c=this.getValue();if(Ext.isEmpty(c)){c=""}return c},isEqual:function(l,m){var h=Ext.Array.from,n,j;l=h(l);m=h(m);j=l.length;if(j!==m.length){return false}for(n=0;n<j;n++){if(m[n]!==l[n]){return false}}return true},clearValue:function(){this.setValue([])},syncSelection:function(){var o=this,s=o.picker,p,t,l=o.valueModels||[],q=l.length,m,n;if(s){p=[];for(m=0;m<q;m++){n=l[m];if(n&&n.isModel&&o.store.indexOf(n)>=0){p.push(n)}}o.ignoreSelection++;t=s.getSelectionModel();t.deselectAll();if(p.length){t.select(p,undefined,true)}o.ignoreSelection--}},onEditorTab:function(c){var d=this.listKeyNav;if(this.selectOnTab&&d){d.selectHighlighted(c)}}},0,["combobox","combo"],["component","box","field","textfield","triggerfield","trigger","pickerfield","combobox","combo"],{component:true,box:true,field:true,textfield:true,triggerfield:true,trigger:true,pickerfield:true,combobox:true,combo:true},["widget.combo","widget.combobox"],[["bindable",Ext.util.Bindable]],[Ext.form.field,"ComboBox",Ext.form,"ComboBox"],0));(Ext.cmd.derive("Ext.picker.Month",Ext.Component,{alternateClassName:"Ext.MonthPicker",childEls:["bodyEl","prevEl","nextEl","monthEl","yearEl"],renderTpl:['<div id="{id}-bodyEl" class="{baseCls}-body">','<div id="{id}-monthEl" class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month">','<a style="{parent.monthStyle}" role="button" hidefocus="on" class="{parent.baseCls}-item-inner" href="#">{.}</a>',"</div>","</tpl>","</div>",'<div id="{id}-yearEl" class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-prevEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-prev" href="#" hidefocus="on" role="button"></a>',"</div>",'<div class="{baseCls}-yearnav-button-ct">','<a id="{id}-nextEl" class="{baseCls}-yearnav-button {baseCls}-yearnav-next" href="#" hidefocus="on" role="button"></a>',"</div>","</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year">','<a hidefocus="on" class="{parent.baseCls}-item-inner" role="button" href="#">{.}</a>',"</div>","</tpl>","</div>",'<div class="'+Ext.baseCSSPrefix+'clear"></div>','<tpl if="showButtons">','<div class="{baseCls}-buttons">{%',"var me=values.$comp, okBtn=me.okBtn, cancelBtn=me.cancelBtn;","okBtn.ownerLayout = cancelBtn.ownerLayout = me.componentLayout;","okBtn.ownerCt = cancelBtn.ownerCt = me;","Ext.DomHelper.generateMarkup(okBtn.getRenderTree(), out);","Ext.DomHelper.generateMarkup(cancelBtn.getRenderTree(), out);","%}</div>","</tpl>","</div>"],okText:"OK",cancelText:"Cancel",baseCls:Ext.baseCSSPrefix+"monthpicker",showButtons:true,measureWidth:35,measureMaxHeight:20,smallCls:Ext.baseCSSPrefix+"monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var c=this;c.selectedCls=c.baseCls+"-selected";c.addEvents("cancelclick","monthclick","monthdblclick","okclick","select","yearclick","yeardblclick");if(c.small){c.addCls(c.smallCls)}c.setValue(c.value);c.activeYear=c.getYear(new Date().getFullYear()-4,-4);if(c.showButtons){c.okBtn=new Ext.button.Button({text:c.okText,handler:c.onOkClick,scope:c});c.cancelBtn=new Ext.button.Button({text:c.cancelText,handler:c.onCancelClick,scope:c})}this.callParent()},beforeRender:function(){var n=this,q=0,j=[],l=Ext.Date.getShortMonthName,o=n.monthOffset,m=n.monthMargin,p="";if(n.padding&&!n.width){n.cacheWidth()}n.callParent();for(;q<o;++q){j.push(l(q),l(q+o))}if(Ext.isDefined(m)){p="margin: 0 "+m+"px;"}Ext.apply(n.renderData,{months:j,years:n.getYears(),showButtons:n.showButtons,monthStyle:p})},cacheWidth:function(){var e=this,d=e.parseBox(e.padding),h=Ext.getBody().createChild({cls:e.baseCls+" "+e.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;",html:"&nbsp;"});e.self.prototype.width=h.getWidth()+d.left+d.right;h.remove()},afterRender:function(){var c=this,d=c.bodyEl;c.callParent();c.mon(d,"click",c.onBodyClick,c);c.mon(d,"dblclick",c.onBodyClick,c);c.years=d.select("."+c.baseCls+"-year a");c.months=d.select("."+c.baseCls+"-month a");c.backRepeater=new Ext.util.ClickRepeater(c.prevEl,{handler:Ext.Function.bind(c.adjustYear,c,[-c.totalYears])});c.prevEl.addClsOnOver(c.baseCls+"-yearnav-prev-over");c.nextRepeater=new Ext.util.ClickRepeater(c.nextEl,{handler:Ext.Function.bind(c.adjustYear,c,[c.totalYears])});c.nextEl.addClsOnOver(c.baseCls+"-yearnav-next-over");c.updateBody();if(!Ext.isDefined(c.monthMargin)){Ext.picker.Month.prototype.monthMargin=c.calculateMonthMargin()}},calculateMonthMargin:function(){var m=this,h=m.monthEl,j=m.months,l=j.first(),n=l.getMargin("l");while(n&&m.getLargest()>m.measureMaxHeight){--n;j.setStyle("margin","0 "+n+"px")}return n},getLargest:function(d){var c=0;this.months.each(function(a){var e=a.getHeight();if(e>c){c=e}});return c},setValue:function(n){var o=this,m=o.activeYear,l=o.monthOffset,h,j;if(!n){o.value=[null,null]}else{if(Ext.isDate(n)){o.value=[n.getMonth(),n.getFullYear()]}else{o.value=[n[0],n[1]]}}if(o.rendered){h=o.value[1];if(h!==null){if((h<m||h>m+o.yearOffset)){o.activeYear=h-o.yearOffset+1}}o.updateBody()}return o},getValue:function(){return this.value},hasSelection:function(){var c=this.value;return c[0]!==null&&c[1]!==null},getYears:function(){var n=this,m=n.yearOffset,l=n.activeYear,j=l+m,o=l,h=[];for(;o<j;++o){h.push(o,o+m)}return h},updateBody:function(){var v=this,y=v.years,B=v.months,q=v.getYears(),p=v.selectedCls,t=v.getYear(null),x=v.value[0],s=v.monthOffset,w,z,u,C,A;if(v.rendered){y.removeCls(p);B.removeCls(p);z=y.elements;C=z.length;for(u=0;u<C;u++){A=Ext.fly(z[u]);w=q[u];A.dom.innerHTML=w;if(w==t){A.addCls(p)}}if(x!==null){if(x<s){x=x*2}else{x=(x-s)*2+1}B.item(x).addCls(p)}}},getYear:function(e,h){var d=this.value[1];h=h||0;return d===null?e:d+h},onBodyClick:function(j,e){var l=this,h=j.type=="dblclick";if(j.getTarget("."+l.baseCls+"-month")){j.stopEvent();l.onMonthClick(e,h)}else{if(j.getTarget("."+l.baseCls+"-year")){j.stopEvent();l.onYearClick(e,h)}}},adjustYear:function(c){if(typeof c!="number"){c=this.totalYears}this.activeYear+=c;this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(h,e){var d=this;d.value[0]=d.resolveOffset(d.months.indexOf(h),d.monthOffset);d.updateBody();d.fireEvent("month"+(e?"dbl":"")+"click",d,d.value);d.fireEvent("select",d,d.value)},onYearClick:function(h,e){var d=this;d.value[1]=d.activeYear+d.resolveOffset(d.years.indexOf(h),d.yearOffset);d.updateBody();d.fireEvent("year"+(e?"dbl":"")+"click",d,d.value);d.fireEvent("select",d,d.value)},resolveOffset:function(d,c){if(d%2===0){return(d/2)}else{return c+Math.floor(d/2)}},beforeDestroy:function(){var c=this;c.years=c.months=null;Ext.destroyMembers(c,"backRepeater","nextRepeater","okBtn","cancelBtn");c.callParent()},finishRenderChildren:function(){var c=this;this.callParent(arguments);if(this.showButtons){c.okBtn.finishRender();c.cancelBtn.finishRender()}},onDestroy:function(){Ext.destroyMembers(this,"okBtn","cancelBtn");this.callParent()}},0,["monthpicker"],["component","box","monthpicker"],{component:true,box:true,monthpicker:true},["widget.monthpicker"],0,[Ext.picker,"Month",Ext,"MonthPicker"],0));(Ext.cmd.derive("Ext.picker.Date",Ext.Component,{alternateClassName:"Ext.DatePicker",childEls:["innerEl","eventEl","prevEl","nextEl","middleBtnEl","footerEl"],border:true,renderTpl:['<div id="{id}-innerEl" role="grid">','<div role="presentation" class="{baseCls}-header">','<a id="{id}-prevEl" class="{baseCls}-prev {baseCls}-arrow" href="#" role="button" title="{prevText}" hidefocus="on" unselectable="on" draggable="false" ></a>','<div class="{baseCls}-month" id="{id}-middleBtnEl">{%this.renderMonthBtn(values, out)%}</div>','<a id="{id}-nextEl" class="{baseCls}-next {baseCls}-arrow" href="#" role="button" title="{nextText}" hidefocus="on" unselectable="on" draggable="false" ></a>',"</div>",'<table id="{id}-eventEl" class="{baseCls}-inner" cellspacing="0" role="grid">','<thead role="presentation"><tr role="row">','<tpl for="dayNames">','<th role="columnheader" class="{parent.baseCls}-column-header" title="{.}">','<div class="{parent.baseCls}-column-header-inner">{.:this.firstInitial}</div>',"</th>","</tpl>","</tr></thead>",'<tbody role="presentation"><tr role="row">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<a role="button" hidefocus="on" class="{parent.baseCls}-date" href="#"></a>',"</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" role="presentation" class="{baseCls}-footer">{%this.renderTodayBtn(values, out)%}</div>',"</tpl>","</div>",{firstInitial:function(c){return Ext.picker.Date.prototype.getDayInitial(c)},isEndOfWeek:function(c){c--;var d=c%7===0&&c!==0;return d?'</tr><tr role="row">':""},renderTodayBtn:function(d,c){Ext.DomHelper.generateMarkup(d.$comp.todayBtn.getRenderTree(),c)},renderMonthBtn:function(d,c){Ext.DomHelper.generateMarkup(d.$comp.monthBtn.getRenderTree(),c)}}],todayText:"Today",ariaTitle:"Date Picker: {0}",ariaTitleDateFormat:"F d, Y",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",monthYearFormat:"F Y",startDay:0,showToday:true,disableAnim:false,baseCls:Ext.baseCSSPrefix+"datepicker",longDayFormat:"F d, Y",focusOnShow:false,focusOnSelect:true,initHour:12,numDays:42,initComponent:function(){var c=this,d=Ext.Date.clearTime;c.selectedCls=c.baseCls+"-selected";c.disabledCellCls=c.baseCls+"-disabled";c.prevCls=c.baseCls+"-prevday";c.activeCls=c.baseCls+"-active";c.cellCls=c.baseCls+"-cell";c.nextCls=c.baseCls+"-prevday";c.todayCls=c.baseCls+"-today";if(!c.format){c.format=Ext.Date.defaultFormat}if(!c.dayNames){c.dayNames=Ext.Date.dayNames}c.dayNames=c.dayNames.slice(c.startDay).concat(c.dayNames.slice(0,c.startDay));c.callParent();c.value=c.value?d(c.value,true):d(new Date());c.addEvents("select");c.initDisabledDays()},getRefOwner:function(){return this.pickerField||this.callParent()},getRefItems:function(){var e=[],h=this.monthBtn,d=this.todayBtn;if(h){e.push(h)}if(d){e.push(d)}return e},beforeRender:function(){var d=this,h=new Array(d.numDays),e=Ext.Date.format(new Date(),d.format);if(d.padding&&!d.width){d.cacheWidth()}d.monthBtn=new Ext.button.Split({ownerCt:d,ownerLayout:d.getComponentLayout(),text:"",tooltip:d.monthYearText,listeners:{click:d.doShowMonthPicker,arrowclick:d.doShowMonthPicker,scope:d}});if(d.showToday){d.todayBtn=new Ext.button.Button({ownerCt:d,ownerLayout:d.getComponentLayout(),text:Ext.String.format(d.todayText,e),tooltip:Ext.String.format(d.todayTip,e),tooltipType:"title",handler:d.selectToday,scope:d})}d.callParent();Ext.applyIf(d,{renderData:{}});Ext.apply(d.renderData,{dayNames:d.dayNames,showToday:d.showToday,prevText:d.prevText,nextText:d.nextText,days:h});d.protoEl.unselectable()},cacheWidth:function(){var e=this,d=e.parseBox(e.padding),h=Ext.getBody().createChild({cls:e.baseCls+" "+e.borderBoxCls,style:"position:absolute;top:-1000px;left:-1000px;"});e.self.prototype.width=h.getWidth()+d.left+d.right;h.remove()},finishRenderChildren:function(){var c=this;c.callParent();c.monthBtn.finishRender();if(c.showToday){c.todayBtn.finishRender()}},onRender:function(d,e){var h=this;h.callParent(arguments);h.cells=h.eventEl.select("tbody td");h.textNodes=h.eventEl.query("tbody td a");h.mon(h.eventEl,{scope:h,mousewheel:h.handleMouseWheel,click:{fn:h.handleDateClick,delegate:"a."+h.baseCls+"-date"}})},initEvents:function(){var h=this,e=Ext.Date,d=e.DAY;h.callParent();h.prevRepeater=new Ext.util.ClickRepeater(h.prevEl,{handler:h.showPrevMonth,scope:h,preventDefault:true,stopDefault:true});h.nextRepeater=new Ext.util.ClickRepeater(h.nextEl,{handler:h.showNextMonth,scope:h,preventDefault:true,stopDefault:true});h.keyNav=new Ext.util.KeyNav(h.eventEl,Ext.apply({scope:h,left:function(a){if(a.ctrlKey){h.showPrevMonth()}else{h.update(e.add(h.activeDate,d,-1))}},right:function(a){if(a.ctrlKey){h.showNextMonth()}else{h.update(e.add(h.activeDate,d,1))}},up:function(a){if(a.ctrlKey){h.showNextYear()}else{h.update(e.add(h.activeDate,d,-7))}},down:function(a){if(a.ctrlKey){h.showPrevYear()}else{h.update(e.add(h.activeDate,d,7))}},pageUp:function(a){if(a.altKey){h.showPrevYear()}else{h.showPrevMonth()}},pageDown:function(a){if(a.altKey){h.showNextYear()}else{h.showNextMonth()}},tab:function(a){h.doCancelFieldFocus=true;h.handleTabClick(a);delete h.doCancelFieldFocus;return true},enter:function(a){a.stopPropagation();return true},home:function(a){h.update(e.getFirstDateOfMonth(h.activeDate))},end:function(a){h.update(e.getLastDateOfMonth(h.activeDate))}},h.keyNavConfig));if(h.showToday){h.todayKeyListener=h.eventEl.addKeyListener(Ext.EventObject.SPACE,h.selectToday,h)}h.update(h.value)},handleTabClick:function(j){var l=this,h=l.getSelectedDate(l.activeDate),e=l.handler;if(!l.disabled&&h.dateValue&&!Ext.fly(h.parentNode).hasCls(l.disabledCellCls)){if(l.pickerField){j.stopEvent()}l.doCancelFocus=true;l.setValue(new Date(h.dateValue));delete l.doCancelFocus;l.fireEvent("select",l,l.value);if(e){e.call(l.scope||l,l,l.value)}l.onSelect()}},getSelectedDate:function(u){var s=this,n=u.getTime(),m=s.cells,c=s.selectedCls,p=m.elements,t,q=p.length,o;m.removeCls(c);for(t=0;t<q;t++){o=Ext.fly(p[t]);if(o.dom.firstChild.dateValue==n){return o.dom.firstChild}}return null},initDisabledDays:function(){var n=this,d=n.disabledDates,o="(?:",l,m,q,p;if(!n.disabledDatesRE&&d){l=d.length-1;q=d.length;for(m=0;m<q;m++){p=d[m];o+=Ext.isDate(p)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(p,n.format))+"$":p;if(m!=l){o+="|"}}n.disabledDatesRE=new RegExp(o+")")}},setDisabledDates:function(d){var c=this;if(Ext.isArray(d)){c.disabledDates=d;c.disabledDatesRE=null}else{c.disabledDatesRE=d}c.initDisabledDays();c.update(c.value,true);return c},setDisabledDays:function(c){this.disabledDays=c;return this.update(this.value,true)},setMinDate:function(c){this.minDate=c;return this.update(this.value,true)},setMaxDate:function(c){this.maxDate=c;return this.update(this.value,true)},setValue:function(c){this.value=Ext.Date.clearTime(c,true);return this.update(this.value)},getValue:function(){return this.value},getDayInitial:function(c){return c.substr(0,1)},focus:function(){this.update(this.activeDate)},onEnable:function(){this.callParent();this.setDisabledStatus(false);this.update(this.activeDate)},onDisable:function(){this.callParent();this.setDisabledStatus(true)},setDisabledStatus:function(d){var c=this;c.keyNav.setDisabled(d);c.prevRepeater.setDisabled(d);c.nextRepeater.setDisabled(d);if(c.showToday){c.todayKeyListener.setDisabled(d);c.todayBtn.setDisabled(d)}},getActive:function(){return this.activeDate||this.value},runAnimation:function(l){var j=this,e=j.monthPicker,h={duration:200,callback:function(){e.setVisible(!l);e.ownerCmp=l?null:j}};if(l){e.el.slideOut("t",h)}else{e.el.slideIn("t",h)}},hideMonthPicker:function(e){var h=this,d=h.monthPicker;if(d&&d.isVisible()){if(h.shouldAnimate(e)){h.runAnimation(true)}else{d.hide();d.ownerCmp=null}}return h},doShowMonthPicker:function(){this.showMonthPicker()},doHideMonthPicker:function(){this.hideMonthPicker()},showMonthPicker:function(h){var j=this,l=j.el,e;if(j.rendered&&!j.disabled){e=j.createMonthPicker();if(!e.isVisible()){e.setValue(j.getActive());e.setSize(l.getSize());e.setPosition(-l.getBorderWidth("l"),-l.getBorderWidth("t"));if(j.shouldAnimate(h)){j.runAnimation(false)}else{e.show();e.ownerCmp=j}}}return j},shouldAnimate:function(c){return Ext.isDefined(c)?c:!this.disableAnim},createMonthPicker:function(){var c=this,d=c.monthPicker;if(!d){c.monthPicker=d=new Ext.picker.Month({renderTo:c.el,floating:true,padding:c.padding,shadow:false,small:c.showToday===false,listeners:{scope:c,cancelclick:c.onCancelClick,okclick:c.onOkClick,yeardblclick:c.onOkClick,monthdblclick:c.onOkClick}});if(!c.disableAnim){d.el.setStyle("display","none")}d.hide();c.on("beforehide",c.doHideMonthPicker,c)}return d},onOkClick:function(h,m){var n=this,l=m[0],o=m[1],j=new Date(o,l,n.getActive().getDate());if(j.getMonth()!==l){j=Ext.Date.getLastDateOfMonth(new Date(o,l,1))}n.setValue(j);n.hideMonthPicker()},onCancelClick:function(){this.selectedUpdate(this.activeDate);this.hideMonthPicker()},showPrevMonth:function(c){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(c){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){return this.setValue(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(d){d.stopEvent();if(!this.disabled){var c=d.getWheelDelta();if(c>0){this.showPrevMonth()}else{if(c<0){this.showNextMonth()}}}},handleDateClick:function(j,h){var l=this,e=l.handler;j.stopEvent();if(!l.disabled&&h.dateValue&&!Ext.fly(h.parentNode).hasCls(l.disabledCellCls)){l.doCancelFocus=l.focusOnSelect===false;l.setValue(new Date(h.dateValue));delete l.doCancelFocus;l.fireEvent("select",l,l.value);if(e){e.call(l.scope||l,l,l.value)}l.onSelect()}},onSelect:function(){if(this.hideOnSelect){this.hide()}},selectToday:function(){var h=this,e=h.todayBtn,d=h.handler;if(e&&!e.disabled){h.setValue(Ext.Date.clearTime(new Date()));h.fireEvent("select",h,h.value);if(d){d.call(h.scope||h,h,h.value)}h.onSelect()}return h},selectedUpdate:function(u){var s=this,n=u.getTime(),m=s.cells,c=s.selectedCls,p=m.elements,t,q=p.length,o;m.removeCls(c);for(t=0;t<q;t++){o=Ext.fly(p[t]);if(o.dom.firstChild.dateValue==n){s.fireEvent("highlightitem",s,o);o.addCls(c);if(s.isVisible()&&!s.doCancelFocus){Ext.fly(o.dom.firstChild).focus(50)}break}}},fullUpdate:function(ab){var S=this,aj=S.cells.elements,al=S.textNodes,O=S.disabledCellCls,ac=Ext.Date,N=0,V=0,ak=S.isVisible(),ae=+ac.clearTime(ab,true),I=+ac.clearTime(new Date()),R=S.minDate?ac.clearTime(S.minDate,true):Number.NEGATIVE_INFINITY,P=S.maxDate?ac.clearTime(S.maxDate,true):Number.POSITIVE_INFINITY,X=S.disabledDatesRE,T=S.disabledDatesText,M=S.disabledDays?S.disabledDays.join(""):false,Z=S.disabledDaysText,K=S.format,af=ac.getDaysInMonth(ab),Y=ac.getFirstDateOfMonth(ab),ai=Y.getDay()-S.startDay,J=ac.add(ab,ac.MONTH,-1),an=S.longDayFormat,ag,W,ao,Q,ad,aa,am,ah,U;if(ai<0){ai+=7}af+=ai;ag=ac.getDaysInMonth(J)-ai;W=new Date(J.getFullYear(),J.getMonth(),ag,S.initHour);if(S.showToday){Q=ac.clearTime(new Date());ao=(Q<R||Q>P||(X&&K&&X.test(ac.dateFormat(Q,K)))||(M&&M.indexOf(Q.getDay())!=-1));if(!S.disabled){S.todayBtn.setDisabled(ao);S.todayKeyListener.setDisabled(ao)}}ad=function(c,a){U=+ac.clearTime(W,true);c.title=ac.format(W,an);c.firstChild.dateValue=U;if(U==I){a+=" "+S.todayCls;c.title=S.todayText;S.todayElSpan=Ext.DomHelper.append(c.firstChild,{tag:"span",cls:Ext.baseCSSPrefix+"hide-clip",html:S.todayText},true)}if(U==ae){a+=" "+S.selectedCls;S.fireEvent("highlightitem",S,c);if(ak&&S.floating){Ext.fly(c.firstChild).focus(50)}}if(U<R){a+=" "+O;c.title=S.minText}else{if(U>P){a+=" "+O;c.title=S.maxText}else{if(M&&M.indexOf(W.getDay())!==-1){c.title=Z;a+=" "+O}else{if(X&&K){ah=ac.dateFormat(W,K);if(X.test(ah)){c.title=T.replace("%0",ah);a+=" "+O}}}}}c.className=a+" "+S.cellCls};for(;N<S.numDays;++N){if(N<ai){aa=(++ag);am=S.prevCls}else{if(N>=af){aa=(++V);am=S.nextCls}else{aa=N-ai+1;am=S.activeCls}}al[N].innerHTML=aa;W.setDate(W.getDate()+1);ad(aj[N],am)}S.monthBtn.setText(Ext.Date.format(ab,S.monthYearFormat))},update:function(h,j){var e=this,l=e.activeDate;if(e.rendered){e.activeDate=h;if(!j&&l&&e.el&&l.getMonth()==h.getMonth()&&l.getFullYear()==h.getFullYear()){e.selectedUpdate(h,l)}else{e.fullUpdate(h,l)}}return e},beforeDestroy:function(){var c=this;if(c.rendered){Ext.destroy(c.todayKeyListener,c.keyNav,c.monthPicker,c.monthBtn,c.nextRepeater,c.prevRepeater,c.todayBtn);delete c.textNodes;delete c.cells.elements}c.callParent()},onShow:function(){this.callParent(arguments);if(this.focusOnShow){this.focus()}}},0,["datepicker"],["component","box","datepicker"],{component:true,box:true,datepicker:true},["widget.datepicker"],0,[Ext.picker,"Date",Ext,"DatePicker"],0));(Ext.cmd.derive("Ext.form.field.Date",Ext.form.field.Picker,{alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:Ext.baseCSSPrefix+"form-date-trigger",showToday:true,useStrict:undefined,initTime:"12",initTimeFormat:"H",matchFieldWidth:false,startDay:0,initComponent:function(){var j=this,e=Ext.isString,l,h;l=j.minValue;h=j.maxValue;if(e(l)){j.minValue=j.parseDate(l)}if(e(h)){j.maxValue=j.parseDate(h)}j.disabledDatesRE=null;j.initDisabledDays();j.callParent()},initValue:function(){var d=this,c=d.value;if(Ext.isString(c)){d.value=d.rawToValue(c)}d.callParent()},initDisabledDays:function(){if(this.disabledDates){var d=this.disabledDates,j=d.length-1,m="(?:",l,n=d.length,o;for(l=0;l<n;l++){o=d[l];m+=Ext.isDate(o)?"^"+Ext.String.escapeRegex(o.dateFormat(this.format))+"$":o;if(l!==j){m+="|"}}this.disabledDatesRE=new RegExp(m+")")}},setDisabledDates:function(e){var h=this,d=h.picker;h.disabledDates=e;h.initDisabledDays();if(d){d.setDisabledDates(h.disabledDatesRE)}},setDisabledDays:function(d){var c=this.picker;this.disabledDays=d;if(c){c.setDisabledDays(d)}},setMinValue:function(l){var e=this,h=e.picker,j=(Ext.isString(l)?e.parseDate(l):l);e.minValue=j;if(h){h.minText=Ext.String.format(e.minText,e.formatDate(e.minValue));h.setMinDate(j)}},setMaxValue:function(l){var e=this,h=e.picker,j=(Ext.isString(l)?e.parseDate(l):l);e.maxValue=j;if(h){h.maxText=Ext.String.format(e.maxText,e.formatDate(e.maxValue));h.setMaxDate(j)}},getErrors:function(s){var z=this,t=Ext.String.format,y=Ext.Date.clearTime,u=z.callParent(arguments),v=z.disabledDays,D=z.disabledDatesRE,w=z.minValue,A=z.maxValue,B=v?v.length:0,C=0,G,F,x,E;s=z.formatDate(s||z.processRawValue(z.getRawValue()));if(s===null||s.length<1){return u}G=s;s=z.parseDate(s);if(!s){u.push(t(z.invalidText,G,Ext.Date.unescapeFormat(z.format)));return u}E=s.getTime();if(w&&E<y(w).getTime()){u.push(t(z.minText,z.formatDate(w)))}if(A&&E>y(A).getTime()){u.push(t(z.maxText,z.formatDate(A)))}if(v){x=s.getDay();for(;C<B;C++){if(x===v[C]){u.push(z.disabledDaysText);break}}}F=z.formatDate(s);if(D&&D.test(F)){u.push(t(z.disabledDatesText,F))}return u},rawToValue:function(c){return this.parseDate(c)||c||null},valueToRaw:function(c){return this.formatDate(this.parseDate(c))},safeParse:function(n,m){var o=this,q=Ext.Date,l=null,j=o.useStrict,p;if(q.formatContainsHourInfo(m)){l=q.parse(n,m,j)}else{p=q.parse(n+" "+o.initTime,m+" "+o.initTimeFormat,j);if(p){l=q.clearTime(p)}}return l},getSubmitValue:function(){var c=this.submitFormat||this.format,d=this.getValue();return d?Ext.Date.format(d,c):""},parseDate:function(o){if(!o||Ext.isDate(o)){return o}var p=this,m=p.safeParse(o,p.format),j=p.altFormats,n=p.altFormatsArray,q=0,l;if(!m&&j){n=n||j.split("|");l=n.length;for(;q<l&&!m;++q){m=p.safeParse(o,n[q])}}return m},formatDate:function(c){return Ext.isDate(c)?Ext.Date.dateFormat(c,this.format):c},createPicker:function(){var d=this,c=Ext.String.format;return new Ext.picker.Date({pickerField:d,renderTo:document.body,floating:true,hidden:true,focusOnShow:true,minDate:d.minValue,maxDate:d.maxValue,disabledDatesRE:d.disabledDatesRE,disabledDatesText:d.disabledDatesText,disabledDays:d.disabledDays,disabledDaysText:d.disabledDaysText,format:d.format,showToday:d.showToday,startDay:d.startDay,minText:c(d.minText,d.formatDate(d.minValue)),maxText:c(d.maxText,d.formatDate(d.maxValue)),listeners:{scope:d,select:d.onSelect},keyNavConfig:{esc:function(){d.collapse();d.focus()}}})},onDownArrow:function(c){this.callParent(arguments);if(this.isExpanded){this.getPicker().focus()}},onSelect:function(e,h){var d=this;d.setValue(h);d.fireEvent("select",d,h);d.collapse();d.focus(false,50)},onExpand:function(){var c=this.getValue();this.picker.setValue(Ext.isDate(c)?c:new Date())},beforeBlur:function(){var c=this,d=c.rawToValue(c.getRawValue());if(Ext.isDate(d)){c.setValue(d)}}},0,["datefield"],["component","box","field","textfield","triggerfield","trigger","pickerfield","datefield"],{component:true,box:true,field:true,textfield:true,triggerfield:true,trigger:true,pickerfield:true,datefield:true},["widget.datefield"],0,[Ext.form.field,"Date",Ext.form,"DateField",Ext.form,"Date"],0));(Ext.cmd.derive("Ext.form.field.FileButton",Ext.button.Button,{childEls:["btnEl","btnWrap","btnInnerEl","btnIconEl","fileInputEl"],inputCls:Ext.baseCSSPrefix+"form-file-input",cls:Ext.baseCSSPrefix+"form-file-btn",preventDefault:false,autoEl:{tag:"div",unselectable:"on"},renderTpl:['<span id="{id}-btnWrap" role="presentation" class="{baseCls}-wrap','<tpl if="splitCls"> {splitCls}</tpl>','{childElCls}" unselectable="on">','<span id="{id}-btnEl" class="{baseCls}-button" role="button">','<span id="{id}-btnInnerEl" class="{baseCls}-inner {innerCls}','{childElCls}" unselectable="on">',"{text}","</span>",'<span role="presentation" id="{id}-btnIconEl" class="{baseCls}-icon-el {iconCls}','{childElCls} {glyphCls}" unselectable="on" style="','<tpl if="iconUrl">background-image:url({iconUrl});</tpl>','<tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>">','<tpl if="glyph">&#{glyph};</tpl><tpl if="iconCls || iconUrl">&#160;</tpl>',"</span>","</span>","</span>",'<input id="{id}-fileInputEl" class="{childElCls} {inputCls}" type="file" size="1" name="{inputName}" role="{role}" tabIndex="{tabIndex}">'],getTemplateArgs:function(){var c=this.callParent();c.inputCls=this.inputCls;c.inputName=this.inputName;c.tabIndex=this.ownerCt.tabIndex;return c},afterRender:function(){var c=this;c.callParent(arguments);c.fileInputEl.on("change",c.fireChange,c)},fireChange:function(c){this.fireEvent("change",this,c,this.fileInputEl.dom.value)},createFileInput:function(d){var c=this;c.fileInputEl=c.el.createChild({name:c.inputName,id:!d?c.id+"-fileInputEl":undefined,cls:c.inputCls,tag:"input",type:"file",size:1,role:"button"});c.fileInputEl.on("change",c.fireChange,c)},reset:function(c){if(c){this.fileInputEl.remove()}this.createFileInput(!c)},restoreInput:function(c){this.fileInputEl.remove();c=Ext.get(c);this.el.appendChild(c);this.fileInputEl=c},onDisable:function(){this.callParent();this.fileInputEl.dom.disabled=true},onEnable:function(){this.callParent();this.fileInputEl.dom.disabled=false}},0,["filebutton"],["component","box","button","filebutton"],{component:true,box:true,button:true,filebutton:true},["widget.filebutton"],0,[Ext.form.field,"FileButton"],0));(Ext.cmd.derive("Ext.form.field.File",Ext.form.field.Trigger,{alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],buttonText:"Browse...",buttonOnly:false,buttonMargin:3,clearOnSubmit:true,extraFieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",readOnly:true,submitValue:false,triggerNoEditCls:"",componentLayout:"triggerfield",childEls:["browseButtonWrap"],onRender:function(){var e=this,h=e.id,d;e.callParent(arguments);d=e.inputEl;d.dom.name="";e.button=new Ext.form.field.FileButton(Ext.apply({renderTo:h+"-browseButtonWrap",ownerCt:e,ownerLayout:e.componentLayout,id:h+"-button",ui:e.ui,disabled:e.disabled,text:e.buttonText,style:e.buttonOnly?"":e.getButtonMarginProp()+e.buttonMargin+"px",inputName:e.getName(),listeners:{scope:e,change:e.onFileChange}},e.buttonConfig));e.fileInputEl=e.button.fileInputEl;d.on("focus",e.button.focus,e.button);if(e.buttonOnly){e.inputCell.setDisplayed(false);e.shrinkWrap=3}e.browseButtonWrap.dom.style.width=(e.browseButtonWrap.dom.lastChild.offsetWidth+e.button.getEl().getMargin("lr"))+"px";if(Ext.isIE){e.button.getEl().repaint()}},getTriggerMarkup:function(){return'<td id="'+this.id+'-browseButtonWrap" role="presentation"></td>'},onFileChange:function(e,h,d){this.duringFileSelect=true;Ext.form.field.File.superclass.setValue.call(this,d);delete this.duringFileSelect},didValueChange:function(){return !!this.duringFileSelect},setValue:Ext.emptyFn,reset:function(){var c=this,d=c.clearOnSubmit;if(c.rendered){c.button.reset(d);c.fileInputEl=c.button.fileInputEl;if(d){c.inputEl.dom.value="";Ext.form.field.File.superclass.setValue.call(this,null)}}c.callParent()},onShow:function(){this.callParent();this.button.updateLayout()},onDisable:function(){this.callParent();this.button.disable()},onEnable:function(){this.callParent();this.button.enable()},isFileUpload:function(){return true},extractFileInput:function(){var c=this,d;if(c.rendered){d=c.button.fileInputEl.dom;c.reset()}else{d=document.createElement("input");d.type="file";d.className=Ext.baseCSSPrefix+"hide-display";d.name=c.getName()}return d},restoreInput:function(c){if(this.rendered){var d=this.button;d.restoreInput(c);this.fileInputEl=d.fileInputEl}},onDestroy:function(){Ext.destroyMembers(this,"button");delete this.fileInputEl;this.callParent()},getButtonMarginProp:function(){return"margin-left:"}},0,["fileuploadfield","filefield"],["component","box","field","textfield","triggerfield","trigger","filefield","fileuploadfield"],{component:true,box:true,field:true,textfield:true,triggerfield:true,trigger:true,filefield:true,fileuploadfield:true},["widget.filefield","widget.fileuploadfield"],0,[Ext.form.field,"File",Ext.form,"FileUploadField",Ext.ux.form,"FileUploadField",Ext.form,"File"],0));(Ext.cmd.derive("Ext.form.field.Hidden",Ext.form.field.Base,{alternateClassName:"Ext.form.Hidden",inputType:"hidden",hideLabel:true,hidden:true,ariaRole:"presentation",initComponent:function(){this.formItemCls+="-hidden";this.callParent()},isEqual:function(c,d){return this.isEqualAsString(c,d)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn},0,["hidden","hiddenfield"],["component","box","field","hiddenfield","hidden"],{component:true,box:true,field:true,hiddenfield:true,hidden:true},["widget.hidden","widget.hiddenfield"],0,[Ext.form.field,"Hidden",Ext.form,"Hidden"],0));(Ext.cmd.derive("Ext.picker.Color",Ext.Component,{alternateClassName:"Ext.ColorPalette",componentCls:Ext.baseCSSPrefix+"color-picker",selectedCls:Ext.baseCSSPrefix+"color-picker-selected",itemCls:Ext.baseCSSPrefix+"color-picker-item",value:null,clickEvent:"click",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" role="button" class="color-{.} {parent.itemCls}" hidefocus="on">','<span class="{parent.itemCls}-inner" style="background:#{.}">&#160;</span>',"</a>","</tpl>"],initComponent:function(){var c=this;c.callParent(arguments);c.addEvents("select");if(c.handler){c.on("select",c.handler,c.scope,true)}},initRenderData:function(){var c=this;return Ext.apply(c.callParent(),{itemCls:c.itemCls,colors:c.colors})},onRender:function(){var c=this,d=c.clickEvent;c.callParent(arguments);c.mon(c.el,d,c.handleClick,c,{delegate:"a"});if(d!="click"){c.mon(c.el,"click",Ext.emptyFn,c,{delegate:"a",stopEvent:true})}},afterRender:function(){var d=this,c;d.callParent(arguments);if(d.value){c=d.value;d.value=null;d.select(c,true)}},handleClick:function(l,j){var e=this,h;l.stopEvent();if(!e.disabled){h=j.className.match(e.colorRe)[1];e.select(h.toUpperCase())}},select:function(h,j){var n=this,l=n.selectedCls,m=n.value,o;h=h.replace("#","");if(!n.rendered){n.value=h;return}if(h!=m||n.allowReselect){o=n.el;if(n.value){o.down("a.color-"+m).removeCls(l)}o.down("a.color-"+h).addCls(l);n.value=h;if(j!==true){n.fireEvent("select",n,h)}}},clear:function(){var d=this,h=d.value,e;if(h&&d.rendered){e=d.el.down("a.color-"+h);e.removeCls(d.selectedCls)}d.value=null},getValue:function(){return this.value||null}},0,["colorpicker"],["component","box","colorpicker"],{component:true,box:true,colorpicker:true},["widget.colorpicker"],0,[Ext.picker,"Color",Ext,"ColorPalette"],0));(Ext.cmd.derive("Ext.layout.component.field.HtmlEditor",Ext.layout.component.field.FieldContainer,{type:"htmleditor",naturalHeight:150,naturalWidth:300,beginLayout:function(d){var e=this.owner,h;if(Ext.isGecko){h=e.textareaEl.dom;this.lastValue=h.value;h.value=""}this.callParent(arguments);d.toolbarContext=d.context.getCmp(e.toolbar);d.inputCmpContext=d.context.getCmp(e.inputCmp);d.textAreaContext=d.getEl("textareaEl");d.iframeContext=d.getEl("iframeEl")},beginLayoutCycle:function(m){var n=this,q=m.widthModel,j=m.heightModel,l=n.owner,o=l.iframeEl,p=l.textareaEl;n.callParent(arguments);if(q.shrinkWrap){o.setStyle("width","");p.setStyle("width","")}else{if(q.natural){m.bodyCellContext.setWidth(n.naturalWidth)}}if(j.natural||j.shrinkWrap){o.setHeight(n.naturalHeight);p.setHeight(n.naturalHeight)}},finishedLayout:function(){var c=this.owner;this.callParent(arguments);if(Ext.isIE9m&&Ext.isIEQuirks){c.el.repaint()}if(Ext.isGecko){c.textareaEl.dom.value=this.lastValue}},publishOwnerWidth:function(c,d){this.callParent(arguments);d-=c.inputCmpContext.getBorderInfo().width;c.textAreaContext.setWidth(d);c.iframeContext.setWidth(d)},publishInnerWidth:function(l,n){var h=l.inputCmpContext.getBorderInfo().width,m=Ext.isStrict&&Ext.isIE8m,j=l.widthModel.natural;this.callParent(arguments);n=l.bodyCellContext.props.width-h;if(j){if(m){n-=2}l.textAreaContext.setWidth(n);l.iframeContext.setWidth(n)}else{if(m){l.textAreaContext.setWidth(n)}}},publishInnerHeight:function(l,h){var j=l.toolbarContext.getProp("height"),e=this.owner.sourceEditMode;this.callParent(arguments);h=l.bodyCellContext.props.height;if(j!==undefined){h-=j+l.inputCmpContext.getFrameInfo().height;if(Ext.isIE8&&Ext.isStrict){h-=2}else{if(Ext.isIEQuirks&&(Ext.isIE8||Ext.isIE9)){h-=4}}l.iframeContext.setHeight(h);l.textAreaContext.setHeight(h)}else{this.done=false}}},0,0,0,0,["layout.htmleditor"],0,[Ext.layout.component.field,"HtmlEditor"],0));(Ext.cmd.derive("Ext.form.field.HtmlEditor",Ext.form.FieldContainer,{alternateClassName:"Ext.form.HtmlEditor",componentLayout:"htmleditor",componentTpl:["{beforeTextAreaTpl}",'<textarea id="{id}-textareaEl" name="{name}" tabIndex="-1" {inputAttrTpl}',' class="{textareaCls}" autocomplete="off">',"{[Ext.util.Format.htmlEncode(values.value)]}","</textarea>","{afterTextAreaTpl}","{beforeIFrameTpl}",'<iframe id="{id}-iframeEl" name="{iframeName}" frameBorder="0" {iframeAttrTpl}',' src="{iframeSrc}" class="{iframeCls}"></iframe>',"{afterIFrameTpl}",{disableFormats:true}],stretchInputElFixed:true,subTplInsertions:["beforeTextAreaTpl","afterTextAreaTpl","beforeIFrameTpl","afterIFrameTpl","iframeAttrTpl","inputAttrTpl"],enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultValue:(Ext.isOpera||Ext.isIE6)?"&#160;":"&#8203;",extraFieldBodyCls:Ext.baseCSSPrefix+"html-editor-wrap",initialized:false,activated:false,sourceEditMode:false,iframePad:3,hideMode:"offsets",maskOnDisable:true,containerElCls:Ext.baseCSSPrefix+"html-editor-container",reStripQuotes:/^['"]*|['"]*$/g,initComponent:function(){var c=this;c.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange");c.items=[c.createToolbar(),c.createInputCmp()];c.layout={type:"vbox",align:"stretch"};c.callParent(arguments);c.initField()},createInputCmp:function(){this.inputCmp=Ext.widget(this.getInputCmpCfg());return this.inputCmp},getInputCmpCfg:function(){var e=this,h=e.id+"-inputCmp",d={id:h,name:e.name,textareaCls:Ext.baseCSSPrefix+"hidden",value:e.value,iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,iframeCls:Ext.baseCSSPrefix+"htmleditor-iframe"};e.getInsertionRenderData(d,e.subTplInsertions);return{flex:1,xtype:"component",tpl:e.getTpl("componentTpl"),childEls:["iframeEl","textareaEl"],id:h,cls:Ext.baseCSSPrefix+"html-editor-input",data:d}},createToolbar:function(){this.toolbar=Ext.widget(this.getToolbarCfg());return this.toolbar},getToolbarCfg:function(){var o=this,l=[],q,m=Ext.quickTipsActive&&Ext.tip.QuickTipManager.isEnabled(),s=Ext.baseCSSPrefix,n,p;function t(a,d,c){return{itemId:a,cls:s+"btn-icon",iconCls:s+"edit-"+a,enableToggle:d!==false,scope:o,handler:c||o.relayBtnCmd,clickEvent:"mousedown",tooltip:m?o.buttonTips[a]||p:p,overflowText:o.buttonTips[a].title||p,tabIndex:-1}}if(o.enableFont&&!Ext.isSafari2){n=Ext.widget("component",{itemId:"fontSelect",renderTpl:['<select id="{id}-selectEl" class="'+s+'font-select">',"</select>"],childEls:["selectEl"],afterRender:function(){o.fontSelect=this.selectEl;Ext.Component.prototype.afterRender.apply(this,arguments)},onDisable:function(){var a=this.selectEl;if(a){a.dom.disabled=true}Ext.Component.prototype.onDisable.apply(this,arguments)},onEnable:function(){var a=this.selectEl;if(a){a.dom.disabled=false}Ext.Component.prototype.onEnable.apply(this,arguments)},listeners:{change:function(){o.win.focus();o.relayCmd("fontName",o.fontSelect.dom.value);o.deferFocus()},element:"selectEl"}});l.push(n,"-")}if(o.enableFormat){l.push(t("bold"),t("italic"),t("underline"))}if(o.enableFontSize){l.push("-",t("increasefontsize",false,o.adjustFont),t("decreasefontsize",false,o.adjustFont))}if(o.enableColors){l.push("-",{itemId:"forecolor",cls:s+"btn-icon",iconCls:s+"edit-forecolor",overflowText:o.buttonTips.forecolor.title,tooltip:m?o.buttonTips.forecolor||p:p,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,clickEvent:"mousedown",handler:function(a,c){o.relayCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+c:c);this.up("menu").hide()}}]})},{itemId:"backcolor",cls:s+"btn-icon",iconCls:s+"edit-backcolor",overflowText:o.buttonTips.backcolor.title,tooltip:m?o.buttonTips.backcolor||p:p,tabIndex:-1,menu:Ext.widget("menu",{plain:true,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,clickEvent:"mousedown",handler:function(a,c){if(Ext.isGecko){o.execCmd("useCSS",false);o.execCmd("hilitecolor","#"+c);o.execCmd("useCSS",true);o.deferFocus()}else{o.relayCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE||Ext.isOpera?"#"+c:c)}this.up("menu").hide()}}]})})}if(o.enableAlignments){l.push("-",t("justifyleft"),t("justifycenter"),t("justifyright"))}if(!Ext.isSafari2){if(o.enableLinks){l.push("-",t("createlink",false,o.createLink))}if(o.enableLists){l.push("-",t("insertorderedlist"),t("insertunorderedlist"))}if(o.enableSourceEdit){l.push("-",t("sourceedit",true,function(a){o.toggleSourceEdit(!o.sourceEditMode)}))}}for(q=0;q<l.length;q++){if(l[q].itemId!=="sourceedit"){l[q].disabled=true}}return{xtype:"toolbar",defaultButtonUI:o.defaultButtonUI,cls:Ext.baseCSSPrefix+"html-editor-tb",enableOverflow:true,items:l,listeners:{click:function(a){a.preventDefault()},element:"el"}}},getMaskTarget:function(){return Ext.isGecko?this.inputCmp.el:this.bodyEl},setReadOnly:function(l){var m=this,n=m.textareaEl,h=m.iframeEl,j;m.readOnly=l;if(n){n.dom.readOnly=l}if(m.initialized){j=m.getEditorBody();if(Ext.isIE){h.setDisplayed(false);j.contentEditable=!l;h.setDisplayed(true)}else{m.setDesignMode(!l)}if(j){j.style.cursor=l?"default":"text"}m.disableItems(l)}},getDocMarkup:function(){var d=this,e=d.iframeEl.getHeight()-d.iframePad*2,h=Ext.isIE8m;return Ext.String.format((h?"":"<!DOCTYPE html>")+'<html><head><style type="text/css">'+(Ext.isOpera||Ext.isIE?"p{margin:0;}":"")+"body{border:0;margin:0;padding:{0}px;direction:"+(d.rtl?"rtl;":"ltr;")+(h?Ext.emptyString:"min-")+"height:{1}px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;cursor:text;background-color:white;"+(Ext.isIE?"":"font-size:12px;font-family:{2}")+"}</style></head><body></body></html>",d.iframePad,e,d.defaultFont)},getEditorBody:function(){var c=this.getDoc();return c.body||c.documentElement},getDoc:function(){return this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return this.iframeEl.dom.contentWindow||window.frames[this.iframeEl.dom.name]},initDefaultFont:function(){var n=this,u=0,m,t,l,p,q,o,s;if(!n.defaultFont){t=n.textareaEl.getStyle("font-family");t=Ext.String.capitalize(t.split(",")[0]);m=Ext.Array.clone(n.fontFamilies);Ext.Array.include(m,t);m.sort();n.defaultFont=t;l=n.down("#fontSelect").selectEl.dom;for(q=0,o=m.length;q<o;++q){t=m[q];s=t.toLowerCase();p=new Option(t,s);if(t==n.defaultFont){u=q}p.style.fontFamily=s;if(Ext.isIE){l.add(p)}else{l.options.add(p)}}l.options[u].selected=true}},isEqual:function(c,d){return this.isEqualAsString(c,d)},afterRender:function(){var c=this,d=c.inputCmp;c.callParent(arguments);c.iframeEl=d.iframeEl;c.textareaEl=d.textareaEl;c.inputEl=c.iframeEl;if(c.enableFont){c.initDefaultFont()}c.monitorTask=Ext.TaskManager.start({run:c.checkDesignMode,scope:c,interval:100})},initFrameDoc:function(){var d=this,h,e;Ext.TaskManager.stop(d.monitorTask);h=d.getDoc();d.win=d.getWin();h.open();h.write(d.getDocMarkup());h.close();e={run:function(){var a=d.getDoc();if(a.body||a.readyState==="complete"){Ext.TaskManager.stop(e);d.setDesignMode(true);Ext.defer(d.initEditor,10,d)}},interval:10,duration:10000,scope:d};Ext.TaskManager.start(e)},checkDesignMode:function(){var d=this,c=d.getDoc();if(c&&(!c.editorInitialized||d.getDesignMode()!=="on")){d.initFrameDoc()}},setDesignMode:function(h){var e=this,d=e.getDoc();if(d){if(e.readOnly){h=false}d.designMode=(/on|true/i).test(String(h).toLowerCase())?"on":"off"}},getDesignMode:function(){var c=this.getDoc();return !c?"":String(c.designMode).toLowerCase()},disableItems:function(m){var h=this.getToolbar().items.items,n,j=h.length,l;for(n=0;n<j;n++){l=h[n];if(l.getItemId()!=="sourceedit"){l.setDisabled(m)}}},toggleSourceEdit:function(h){var l=this,n=l.iframeEl,j=l.textareaEl,m=Ext.baseCSSPrefix+"hidden",o=l.getToolbar().getComponent("sourceedit");if(!Ext.isBoolean(h)){h=!l.sourceEditMode}l.sourceEditMode=h;if(o.pressed!==h){o.toggle(h)}if(h){l.disableItems(true);l.syncValue();n.addCls(m);j.removeCls(m);j.dom.removeAttribute("tabIndex");j.focus();l.inputEl=j}else{if(l.initialized){l.disableItems(l.readOnly)}l.pushValue();n.removeCls(m);j.addCls(m);j.dom.setAttribute("tabIndex",-1);l.deferFocus();l.inputEl=n}l.fireEvent("editmodechange",l,h);l.updateLayout()},createLink:function(){var c=prompt(this.createLinkText,this.defaultLinkValue);if(c&&c!=="http://"){this.relayCmd("createlink",c)}},clearInvalid:Ext.emptyFn,setValue:function(j){var l=this,e=l.textareaEl,h=l.inputCmp;if(j===null||j===undefined){j=""}if(e){e.dom.value=j}l.pushValue();if(!l.rendered&&l.inputCmp){l.inputCmp.data.value=j}l.mixins.field.setValue.call(l,j);return l},cleanHtml:function(c){c=String(c);if(Ext.isWebKit){c=c.replace(/\sclass="(?:Apple-style-span|Apple-tab-span|khtml-block-placeholder)"/gi,"")}if(c.charCodeAt(0)===parseInt(this.defaultValue.replace(/\D/g,""),10)){c=c.substring(1)}return c},syncValue:function(){var n=this,j,m,p,l,q,o;if(n.initialized){j=n.getEditorBody();p=j.innerHTML;o=n.textareaEl.dom;if(Ext.isWebKit){l=j.getAttribute("style");q=l.match(/text-align:(.*?);/i);if(q&&q[1]){p='<div style="'+q[0]+'">'+p+"</div>"}}p=n.cleanHtml(p);if(n.fireEvent("beforesync",n,p)!==false){if(Ext.isGecko&&o.value===""&&p==="<br>"){p=""}if(o.value!==p){o.value=p;m=true}n.fireEvent("sync",n,p);if(m){n.checkChange()}}}},getValue:function(){var d=this,c;if(!d.sourceEditMode){d.syncValue()}c=d.rendered?d.textareaEl.dom.value:d.value;d.value=c;return c},pushValue:function(){var c=this,d;if(c.initialized){d=c.textareaEl.dom.value||"";if(!c.activated&&d.length<1){d=c.defaultValue}if(c.fireEvent("beforepush",c,d)!==false){c.getEditorBody().innerHTML=d;if(Ext.isGecko){c.setDesignMode(false);c.setDesignMode(true)}c.fireEvent("push",c,d)}}},deferFocus:function(){this.focus(false,true)},getFocusEl:function(){var d=this,c=d.win;return c&&!d.sourceEditMode?c:d.textareaEl},focus:function(m,h){var n=this,l,j;if(h){if(!n.focusTask){n.focusTask=new Ext.util.DelayedTask(n.focus)}n.focusTask.delay(Ext.isNumber(h)?h:10,null,n,[m,false])}else{if(m){if(n.textareaEl&&n.textareaEl.dom){l=n.textareaEl.dom.value}if(l&&l.length){n.execCmd("selectall",true)}}j=n.getFocusEl();if(j&&j.focus){j.focus()}}return n},initEditor:function(){try{var o=this,p=o.getEditorBody(),e=o.textareaEl.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),m,q;e["background-attachment"]="fixed";p.bgProperties="fixed";Ext.DomHelper.applyStyles(p,e);m=o.getDoc();if(m){try{Ext.EventManager.removeAll(m)}catch(n){}}q=Ext.Function.bind(o.onEditorEvent,o);Ext.EventManager.on(m,{mousedown:q,dblclick:q,click:q,keyup:q,buffer:100});q=o.onRelayedEvent;Ext.EventManager.on(m,{mousedown:q,mousemove:q,mouseup:q,click:q,dblclick:q,scope:o});if(Ext.isGecko){Ext.EventManager.on(m,"keypress",o.applyCommand,o)}if(o.fixKeys){Ext.EventManager.on(m,"keydown",o.fixKeys,o)}if(o.fixKeysAfter){Ext.EventManager.on(m,"keyup",o.fixKeysAfter,o)}if(Ext.isIE9&&Ext.isStrict){Ext.EventManager.on(m.documentElement,"focus",o.focus,o)}if(Ext.isIE8m||(Ext.isIE9&&!Ext.isStrict)){Ext.EventManager.on(m,"focusout",function(){o.savedSelection=m.selection.type!=="None"?m.selection.createRange():null},o);Ext.EventManager.on(m,"focusin",function(){if(o.savedSelection){o.savedSelection.select()}},o)}Ext.EventManager.onWindowUnload(o.beforeDestroy,o);m.editorInitialized=true;o.initialized=true;o.pushValue();o.setReadOnly(o.readOnly);o.fireEvent("initialize",o)}catch(l){}},beforeDestroy:function(){var h=this,l=h.monitorTask,m,j;if(l){Ext.TaskManager.stop(l)}if(h.rendered){Ext.EventManager.removeUnloadListener(h.beforeDestroy,h);try{m=h.getDoc();if(m){Ext.EventManager.removeAll(Ext.fly(m));for(j in m){if(m.hasOwnProperty&&m.hasOwnProperty(j)){delete m[j]}}}}catch(e){}h.iframeEl.remove();delete h.iframeEl;delete h.textareaEl;delete h.toolbar;delete h.inputCmp}h.callParent()},onRelayedEvent:function(n){var h=this.iframeEl,m=Ext.Element.getTrueXY(h),l=n.getXY(),j=Ext.EventManager.getPageXY(n.browserEvent);n.xy=[m[0]+j[0],m[1]+j[1]];n.injectEvent(h);n.xy=l},onFirstFocus:function(){var l=this,e,h;l.activated=true;l.disableItems(l.readOnly);if(Ext.isGecko){l.win.focus();e=l.win.getSelection();if(e.focusNode&&!l.getValue().length){h=e.getRangeAt(0);h.selectNodeContents(l.getEditorBody());h.collapse(true);l.deferFocus()}try{l.execCmd("useCSS",true);l.execCmd("styleWithCSS",false)}catch(j){}}l.fireEvent("activate",l)},adjustFont:function(m){var l=m.getItemId()==="increasefontsize"?1:-1,n=this.getDoc().queryCommandValue("FontSize")||"2",j=Ext.isString(n)&&n.indexOf("px")!==-1,h;n=parseInt(n,10);if(j){if(n<=10){n=1+l}else{if(n<=13){n=2+l}else{if(n<=16){n=3+l}else{if(n<=18){n=4+l}else{if(n<=24){n=5+l}else{n=6+l}}}}}n=Ext.Number.constrain(n,1,6)}else{h=Ext.isSafari;if(h){l*=2}n=Math.max(1,n+l)+(h?"px":0)}this.relayCmd("FontSize",n)},onEditorEvent:function(c){this.updateToolbar()},updateToolbar:function(){var o=this,s,u,t,n,v,q,w,p;if(o.readOnly){return}if(!o.activated){o.onFirstFocus();return}t=o.getToolbar().items.map;n=o.getDoc();if(o.enableFont&&!Ext.isSafari2){q=n.queryCommandValue("fontName");v=(q?q.split(",")[0].replace(o.reStripQuotes,""):o.defaultFont).toLowerCase();w=o.fontSelect.dom;if(v!==w.value||v!=q){w.value=v}}function l(){var a;for(s=0,u=arguments.length,v;s<u;s++){v=arguments[s];try{a=n.queryCommandState(v)}catch(c){a=false}t[v].toggle(a)}}if(o.enableFormat){l("bold","italic","underline")}if(o.enableAlignments){l("justifyleft","justifycenter","justifyright")}if(!Ext.isSafari2&&o.enableLists){l("insertorderedlist","insertunorderedlist")}p=o.toolbar.query("menu");for(s=0;s<p.length;s++){p[s].hide()}o.syncValue()},relayBtnCmd:function(c){this.relayCmd(c.getItemId())},relayCmd:function(c,d){Ext.defer(function(){var a=this;if(!this.isDestroyed){a.win.focus();a.execCmd(c,d);a.updateToolbar()}},10,this)},execCmd:function(l,e){var h=this,j=h.getDoc();j.execCommand(l,false,(e==undefined?null:e));h.syncValue()},applyCommand:function(j){if(j.ctrlKey){var e=this,h=j.getCharCode(),c;if(h>0){h=String.fromCharCode(h);switch(h){case"b":c="bold";break;case"i":c="italic";break;case"u":c="underline";break}if(c){e.win.focus();e.execCmd(c);e.deferFocus();j.preventDefault()}}}},insertAtCursor:function(o){var q=this,s=q.getWin(),p=q.getDoc(),w,t,v,n,u,x,y;if(q.activated){s.focus();if(s.getSelection){w=s.getSelection();if(w.getRangeAt&&w.rangeCount){t=w.getRangeAt(0);t.deleteContents();v=p.createElement("div");v.innerHTML=o;n=p.createDocumentFragment();while((u=v.firstChild)){x=n.appendChild(u)}y=n.firstChild;t.insertNode(n);if(x){t=t.cloneRange();t.setStartAfter(x);t.collapse(true);w.removeAllRanges();w.addRange(t)}}}else{w=p.selection;if(w&&w.type!=="Control"){w.createRange().collapse(true);w.createRange().pasteHTML(o)}}q.syncValue();q.deferFocus()}},fixKeys:(function(){var c;if(Ext.isIE10m){return function(m){var p=this,q=m.getKey(),n=p.getDoc(),e=p.readOnly,a,o;if(q===m.TAB){m.stopEvent();if(!e){a=n.selection.createRange();if(a){if(a.collapse){a.collapse(true);a.pasteHTML("&#160;&#160;&#160;&#160;")}p.deferFocus()}}}}}if(Ext.isOpera){return function(h){var j=this,a=h.getKey(),e=j.readOnly;if(a===h.TAB){h.stopEvent();if(!e){j.win.focus();j.execCmd("InsertHTML","&#160;&#160;&#160;&#160;");j.deferFocus()}}}}return null}()),fixKeysAfter:(function(){if(Ext.isIE){return function(n){var e=this,j=n.getKey(),o=e.getDoc(),l=e.readOnly,m;if(!l&&(j===n.BACKSPACE||j===n.DELETE)){m=o.body.innerHTML;if(m==="<p>&nbsp;</p>"||m==="<P>&nbsp;</P>"){o.body.innerHTML=""}}}}return null}()),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:Ext.baseCSSPrefix+"html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:Ext.baseCSSPrefix+"html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:Ext.baseCSSPrefix+"html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:Ext.baseCSSPrefix+"html-editor-tip"}}},0,["htmleditor"],["component","box","container","fieldcontainer","htmleditor"],{component:true,box:true,container:true,fieldcontainer:true,htmleditor:true},["widget.htmleditor"],[["field",Ext.form.field.Field]],[Ext.form.field,"HtmlEditor",Ext.form,"HtmlEditor"],0));(Ext.cmd.derive("Ext.picker.Time",Ext.view.BoundList,{increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:Ext.baseCSSPrefix+"timepicker",loadMask:false,initComponent:function(){var l=this,h=Ext.Date,e=h.clearTime,j=l.initDate;l.absMin=e(new Date(j[0],j[1],j[2]));l.absMax=h.add(e(new Date(j[0],j[1],j[2])),"mi",(24*60)-1);l.store=l.createStore();l.store.addFilter(l.rangeFilter=new Ext.util.Filter({id:"time-picker-filter"}),false);l.updateList();l.callParent()},setMinValue:function(c){this.minValue=c;this.updateList()},setMaxValue:function(c){this.maxValue=c;this.updateList()},normalizeDate:function(d){var c=this.initDate;d.setFullYear(c[0],c[1],c[2]);return d},updateList:function(){var h=this,d=h.normalizeDate(h.minValue||h.absMin),e=h.normalizeDate(h.maxValue||h.absMax);h.rangeFilter.setFilterFn(function(c){var a=c.get("date");return a>=d&&a<=e});h.store.filter()},createStore:function(){var m=this,n=Ext.Date,l=[],h=m.absMin,j=m.absMax;while(h<=j){l.push({disp:n.dateFormat(h,m.format),date:h});h=n.add(h,"mi",m.increment)}return new Ext.data.Store({model:m.modelType,autoDestroy:true,data:l})},focusNode:function(c){return false}},0,["timepicker"],["component","box","dataview","boundlist","timepicker"],{component:true,box:true,dataview:true,boundlist:true,timepicker:true},["widget.timepicker"],0,[Ext.picker,"Time"],function(){this.prototype.modelType=Ext.define(null,{extend:"Ext.data.Model",fields:["disp","date"]})}));(Ext.cmd.derive("Ext.form.field.Time",Ext.form.field.ComboBox,{alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:Ext.baseCSSPrefix+"form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,pickerMaxHeight:300,selectOnTab:true,snapToIncrement:false,initDate:"1/1/2008",initDateParts:[2008,0,1],initDateFormat:"j/n/Y",ignoreSelection:0,queryMode:"local",displayField:"disp",valueField:"date",initComponent:function(){var h=this,d=h.minValue,e=h.maxValue;if(d){h.setMinValue(d)}if(e){h.setMaxValue(e)}h.store=h.getPicker().store;h.displayTpl=new Ext.XTemplate('<tpl for=".">{[typeof values === "string" ? values : this.formatDate(values["'+h.displayField+'"])]}<tpl if="xindex < xcount">'+h.delimiter+"</tpl></tpl>",{formatDate:Ext.Function.bind(h.formatDate,h)});h.callParent()},transformOriginalValue:function(c){if(Ext.isDefined(c)){return this.rawToValue(c)||c||null}return c},isEqual:function(l,m){var h=Ext.Array.from,n=Ext.Date.isEqual,o,j;l=h(l);m=h(m);j=l.length;if(j!==m.length){return false}for(o=0;o<j;o++){if(!n(m[o],l[o])){return false}}return true},setMinValue:function(h){var d=this,e=d.picker;d.setLimit(h,true);if(e){e.setMinValue(d.minValue)}},setMaxValue:function(h){var d=this,e=d.picker;d.setLimit(h,false);if(e){e.setMaxValue(d.maxValue)}},setLimit:function(d,j){var h=this,l,m;if(Ext.isString(d)){l=h.parseDate(d)}else{if(Ext.isDate(d)){l=d}}if(l){m=h.getInitDate();m.setHours(l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds())}else{m=null}h[j?"minValue":"maxValue"]=m},getInitDate:function(h,e,j){var l=this.initDateParts;return new Date(l[0],l[1],l[2],h||0,e||0,j||0,0)},valueToRaw:function(c){return this.formatDate(this.parseDate(c))},getErrors:function(q){var v=this,s=Ext.String.format,t=v.callParent(arguments),u=v.minValue,w=v.maxValue,y=v.displayTplData,p=v.getRawValue(),z,x,A,o;if(y&&y.length>0){for(z=0,x=y.length;z<x;z++){o=y[z];o=o.date||o.disp;A=v.parseDate(o);if(!A){t.push(s(v.invalidText,o,Ext.Date.unescapeFormat(v.format)));continue}if(u&&A<u){t.push(s(v.minText,v.formatDate(u)))}if(w&&A>w){t.push(s(v.maxText,v.formatDate(w)))}}}else{if(p.length&&!v.parseDate(p)){t.push(s(v.invalidText,p,Ext.Date.unescapeFormat(v.format)))}}return t},formatDate:function(e){var j=[],l,h;e=Ext.Array.from(e);for(l=0,h=e.length;l<h;l++){j.push(Ext.form.field.Date.prototype.formatDate.call(this,e[l]))}return j.join(this.delimiter)},parseDate:function(o){var p=this,m=o,j=p.altFormats,n=p.altFormatsArray,q=0,l;if(o&&!Ext.isDate(o)){m=p.safeParse(o,p.format);if(!m&&j){n=n||j.split("|");l=n.length;for(;q<l&&!m;++q){m=p.safeParse(o,n[q])}}}if(m&&p.snapToIncrement){m=new Date(Ext.Number.snap(m.getTime(),p.increment*60*1000))}return m},safeParse:function(m,l){var n=this,h=Ext.Date,o,j=null;if(h.formatContainsDateInfo(l)){j=h.parse(m,l)}else{o=h.parse(n.initDate+" "+m,n.initDateFormat+" "+l);if(o){j=o}}return j},getSubmitValue:function(){var e=this,h=e.submitFormat||e.format,d=e.getValue();return d?Ext.Date.format(d,h):null},createPicker:function(){var c=this,d;c.listConfig=Ext.apply({xtype:"timepicker",selModel:{mode:c.multiSelect?"SIMPLE":"SINGLE"},cls:undefined,minValue:c.minValue,maxValue:c.maxValue,increment:c.increment,format:c.format,maxHeight:c.pickerMaxHeight},c.listConfig);d=c.callParent();return d},onItemClick:function(e,h){var j=this,l=e.getSelectionModel().getSelection();if(!j.multiSelect&&l.length){if(l.length>0){l=l[0];if(l&&Ext.Date.isEqual(h.get("date"),l.get("date"))){j.collapse()}}}},syncSelection:function(){var u=this,x=u.picker,v=Ext.Date.isEqual,C=[],z,t,s,B,y,d,D,w,A,E;if(x){x.clearHighlight();t=u.getValue();z=x.getSelectionModel();u.ignoreSelection++;if(t===null){z.deselectAll()}else{s=Ext.Array.from(t);D=x.store.data.items;A=D.length;for(B=0,y=s.length;B<y;B++){d=s[B];if(Ext.isDate(d)){for(w=0;w<A;w++){E=D[w];if(v(E.get("date"),d)){C.push(E);if(!u.multiSelect){break}}}if(C.length){z.select(C)}}}}u.ignoreSelection--}},postBlur:function(){var d=this,c=d.getValue();d.callParent(arguments);if(d.validateValue(c)){d.setValue(c)}},findRecordByValue:function(c){if(typeof c==="string"){c=this.parseDate(c)}return this.callParent([c])},rawToValue:function(l){var m=this,o,h,n,j;if(m.multiSelect){h=[];o=Ext.Array.from(l);for(n=0,j=o.length;n<j;n++){h.push(m.parseDate(o[n]))}return h}return m.parseDate(l)},setValue:function(c){this.getPicker();if(Ext.isDate(c)){c=this.getInitDate(c.getHours(),c.getMinutes(),c.getSeconds())}return this.callParent([c])},getValue:function(){return this.rawToValue(this.callParent(arguments))}},0,["timefield"],["component","box","field","textfield","triggerfield","trigger","pickerfield","combobox","combo","timefield"],{component:true,box:true,field:true,textfield:true,triggerfield:true,trigger:true,pickerfield:true,combobox:true,combo:true,timefield:true},["widget.timefield"],0,[Ext.form.field,"Time",Ext.form,"TimeField",Ext.form,"Time"],0));(Ext.cmd.derive("Ext.grid.CellContext",Ext.Base,{isCellContext:true,constructor:function(c){this.view=c},isEqual:function(c){if(c){return this.record===c.record&&this.columnHeader===c.columnHeader}return false},setPosition:function(h,e){var d=this;if(arguments.length===1){if(h.view){d.view=h.view}e=h.column;h=h.row}d.setRow(h);d.setColumn(e);return d},setRow:function(c){var d=this;if(c!==undefined){if(typeof c==="number"){d.row=Math.max(Math.min(c,d.view.dataSource.getCount()-1),0);d.record=d.view.dataSource.getAt(c)}else{if(c.isModel){d.record=c;d.row=d.view.indexOf(c)}else{if(c.tagName){d.record=d.view.getRecord(c);d.row=d.view.indexOf(d.record)}}}}},setColumn:function(e){var d=this,h=d.view.ownerCt.getColumnManager();if(e!==undefined){if(typeof e==="number"){d.column=e;d.columnHeader=h.getHeaderAtIndex(e)}else{if(e.isHeader){d.columnHeader=e;d.column=h.getHeaderIndex(e)}}}}},1,0,0,0,0,0,[Ext.grid,"CellContext"],0));(Ext.cmd.derive("Ext.grid.CellEditor",Ext.Editor,{alignment:"l-l?",hideEl:false,cls:Ext.baseCSSPrefix+"small-editor "+Ext.baseCSSPrefix+"grid-editor "+Ext.baseCSSPrefix+"grid-cell-editor",treeNodeSelector:"."+Ext.baseCSSPrefix+"tree-node-text",shim:false,shadow:false,constructor:function(d){var c;this.y=0;d=Ext.apply({},d);c=d.field;if(c){c.monitorTab=false}this.callParent([d])},setGrid:function(n){var l=this,m=l.grid,j,h;if(n!==m){h={beforerefresh:l.beforeViewRefresh,refresh:l.onViewRefresh,scope:l};if(m){m.getView().un(h)}j=n.getView();l.renderTo=j.getTargetEl().dom;l.grid=n;j.on(h)}},afterFirstLayout:function(c,d){delete this.y;this.callParent([c,d])},beforeViewRefresh:function(){var d=this,c=d.el&&d.el.dom;if(c&&c.parentNode){if(d.editing&&!(d.field.column&&d.field.column.sorting)){d.wasAllowBlur=d.allowBlur;d.allowBlur=false}c.parentNode.removeChild(c)}},onViewRefresh:function(){var e=this,h=e.el&&e.el.dom,d;if(h){d=e.field.column&&e.field.column.sorting;if(e.editing&&!d){e.allowBlur=e.wasAllowBlur;e.renderTo.appendChild(h);e.field.focus()}else{if(!d){Ext.getDetachedBody().dom.appendChild(h)}}if(e.editing&&d){e.completeEdit()}}},onStartEdit:function(){var d=this,c=d.boundEl.first();if(d.el.dom.parentNode!==d.renderTo){d.renderTo.appendChild(d.el.dom)}if(c){if(d.isForTree){c=c.child(d.treeNodeSelector)}c.hide()}d.callParent(arguments)},onEndEdit:function(){var d=this,c=d.boundEl.first();if(c){if(d.isForTree){c=c.child(d.treeNodeSelector)}c.show()}d.callParent(arguments)},afterRender:function(){var d=this,c=d.field;d.callParent(arguments);if(c.isCheckbox){c.mon(c.inputEl,{mousedown:d.onCheckBoxMouseDown,click:d.onCheckBoxClick,scope:d})}},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit;this.field.focus(false,10)},realign:function(v){var p=this,t=p.boundEl,s=t.first(),n=s.dom.firstChild,x=t.getWidth(),w=Ext.Array.clone(p.offsets),y=p.grid,q,o="",u=!n||(n.nodeType===3&&!(Ext.String.trim(o=n.data).length));if(p.isForTree){q=p.getTreeNodeOffset(s);x-=Math.abs(q);w[0]+=q}if(y.columnLines){x-=t.getBorderWidth("rl")}if(v===true){p.field.setWidth(x)}if(u){s.dom.innerHTML="X"}p.alignTo(s,p.alignment,w);if(u){s.dom.firstChild.data=o}},getTreeNodeOffset:function(c){return c.child(this.treeNodeSelector).getOffsetsTo(c)[0]},onEditorTab:function(c){var d=this.field;if(d.onEditorTab){d.onEditorTab(c)}},onFieldBlur:function(){this.callParent(arguments);this.selectSameEditor=false}},1,0,["component","box","container","editor"],{component:true,box:true,container:true,editor:true},0,0,[Ext.grid,"CellEditor"],0));(Ext.cmd.derive("Ext.grid.ColumnComponentLayout",Ext.layout.component.Auto,{type:"columncomponent",setWidthInDom:true,beginLayout:function(c){this.callParent(arguments);c.titleContext=c.getEl("titleEl");c.triggerContext=c.getEl("triggerEl")},beginLayoutCycle:function(c){var d=this.owner;this.callParent(arguments);if(c.widthModel.shrinkWrap){d.el.setWidth("")}d.titleEl.setStyle({paddingTop:"",paddingBottom:""})},publishInnerHeight:function(s,n){var p=this,v=p.owner,w,t,o,q,m,u;if(v.getOwnerHeaderCt().hiddenHeaders){s.setProp("innerHeight",0);return}w=n-s.getBorderInfo().height;t=w;if(!v.noWrap&&!s.hasDomProp("width")){p.done=false;return}if(s.hasRawContent){q=t;o=v.textEl.getHeight();if(o){t-=o;if(t>0){m=Math.floor(t/2);u=t-m;s.titleContext.setProp("padding-top",m);s.titleContext.setProp("padding-bottom",u)}}}else{q=v.titleEl.getHeight();s.setProp("innerHeight",w-q,false)}if((Ext.isIE6||Ext.isIEQuirks)&&s.triggerContext){s.triggerContext.setHeight(q)}},measureContentHeight:function(c){return c.el.dom.offsetHeight},publishOwnerHeight:function(c,d){this.callParent(arguments);if((Ext.isIE6||Ext.isIEQuirks)&&c.triggerContext){c.triggerContext.setHeight(d)}},publishInnerWidth:function(d,c){if(!d.hasRawContent){d.setProp("innerWidth",c-d.getBorderInfo().width,false)}},calculateOwnerHeightFromContentHeight:function(h,d){var e=this.callParent(arguments);if(!h.hasRawContent){if(this.owner.noWrap||h.hasDomProp("width")){return d+this.owner.titleEl.getHeight()+h.getBorderInfo().height}return null}return e},calculateOwnerWidthFromContentWidth:function(l,h){var j=this.owner,m=l.getPaddingInfo().width,n=this.getTriggerOffset(j,l),o;if(j.isGroupHeader){o=h}else{o=Math.max(h,j.textEl.getWidth()+l.titleContext.getPaddingInfo().width)}return o+m+n},getTriggerOffset:function(e,h){var d=0;if(h.widthModel.shrinkWrap&&!e.menuDisabled){if(e.query(">:not([hidden])").length===0){d=e.self.triggerElWidth}}return d}},0,0,0,0,["layout.columncomponent"],0,[Ext.grid,"ColumnComponentLayout"],0));(Ext.cmd.derive("Ext.grid.ColumnLayout",Ext.layout.container.HBox,{type:"gridcolumn",reserveOffset:false,firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",initLayout:function(){var c=this;if(c.scrollbarWidth===undefined){c.self.prototype.scrollbarWidth=Ext.getScrollbarSize().width}c.grid=c.owner.up("tablepanel");c.controllingGrid=c.owner.up("[scrollerOwner]");c.callParent()},beginLayout:function(y){var t=this,z=t.owner,A=t.controllingGrid,q=t.grid.view,u=t.getVisibleItems(),v=u.length,x=t.firstHeaderCls,o=t.lastHeaderCls,s=[x,o],w,p;if(!q.scrollFlags.y){t.scrollbarWidth=0}else{delete t.scrollbarWidth}for(w=0;w<v;w++){p=u[w];p.margin=null;p.removeCls(s);if(w===0){p.addCls(x)}if(w===v-1){p.addCls(o)}}t.scrollbarAdjustment=t.scrollbarWidth;t.callParent(arguments);if(!z.isColumn&&!A.collapsed&&q&&q.rendered&&(y.viewTable=q.body.dom)&&t.scrollbarWidth){y.viewContext=y.context.getCmp(q)}},injectViewContext:function(c,d){if(!this.controllingGrid.collapsed&&d.rendered&&(c.viewTable=d.body.dom)&&this.scrollbarWidth){c.viewContext=c.context.getCmp(d)}},roundFlex:function(c){return Math.floor(c)},calculate:function(c){this.callParent(arguments);if(c.state.parallelDone&&!(this.owner.forceFit&&!c.state.flexesCalculated)){c.setProp("columnWidthsDone",true)}if(c.viewContext){c.state.tableHeight=c.viewTable.offsetHeight}},completeLayout:function(j){var e=this,h=e.owner,l=j.state;e.callParent(arguments);if(j.viewTable&&!l.flexesCalculated&&!j.flexedItems.length&&h.forceFit&&e.convertWidthsToFlexes(j)){e.cacheFlexes(j);j.invalidate({state:{flexesCalculated:true,tableHeight:j.viewTable.offsetHeight}})}else{j.setProp("columnWidthsDone",true)}},finishedLayout:function(c){var d=this.grid.getView();this.callParent(arguments);if(!this.owner.isColumn&&d.scrollFlags.x&&this.owner.tooNarrow&&this.owner.componentLayoutCounter){this.owner.el.dom.scrollLeft=d.el.dom.scrollLeft}},convertWidthsToFlexes:function(u){var o=this,q=0,n=o.sizeModels.calculated,s,p,t,l,m;s=u.childItems;p=s.length;for(t=0;t<p;t++){l=s[t];m=l.target;q+=l.props.width;if(!(m.fixed||m.resizable===false)){m.flex=u.childItems[t].flex=l.props.width;m.width=null;l.widthModel=n}}return q!==u.props.width},getContainerSize:function(n){var o=this,l,p=n.viewContext,q,m,j=p&&p.heightModel.shrinkWrap;if(o.owner.isColumn){l=o.getColumnContainerSize(n)}else{l=o.callParent(arguments);if(o.scrollbarWidth&&!o.controllingGrid.reserveScrollbar&&p){m=p.target.componentLayout.ownerContext;if(!j&&p.target.scrollFlags.y&&(n.flexedItems&&n.flexedItems.length||o.owner.forceFit)&&m){q=p.getProp("height");if(isNaN(q)){o.done=false}else{if(n.state.tableHeight<=q&&p.target.scrollFlags.y){n.state.parallelDone=false;m.invalidate();return l}}}}}if(!j){l.width-=o.scrollbarWidth}return l},getColumnContainerSize:function(p){var n=p.paddingContext.getPaddingInfo(),l=0,q=0,o,s,t,m;if(!p.widthModel.shrinkWrap){++q;t=p.getProp("innerWidth");o=(typeof t=="number");if(o){++l;t-=n.width;if(t<0){t=0}}}if(!p.heightModel.shrinkWrap){++q;m=p.getProp("innerHeight");s=(typeof m=="number");if(s){++l;m-=n.height;if(m<0){m=0}}}return{width:t,height:m,needed:q,got:l,gotAll:l==q,gotWidth:o,gotHeight:s}},publishInnerCtSize:function(l){var m=this,j=m.owner,n=l.state.boxPlan.targetSize,h=l.peek("contentWidth");m.owner.tooNarrow=l.state.boxPlan.tooNarrow;if((h!=null)&&!j.isColumn){n.width=h;if(j.ownerCt.view.scrollFlags.y){n.width+=m.scrollbarAdjustment}}return m.callParent(arguments)},destroy:function(){this.grid=this.controllingGrid=null;this.callParent()}},0,0,0,0,["layout.gridcolumn"],0,[Ext.grid,"ColumnLayout"],0));(Ext.cmd.derive("Ext.grid.ColumnManager",Ext.Base,{alternateClassName:["Ext.grid.ColumnModel"],columns:null,constructor:function(d,h,e){this.headerCt=h;if(e){this.secondHeaderCt=e}this.visibleOnly=!!d},getColumns:function(){if(!this.columns){this.cacheColumns()}return this.columns},getHeaderIndex:function(c){if(c.isGroupHeader){c=this.getHeaderColumns(c)[0]}return Ext.Array.indexOf(this.getColumns(),c)},getHeaderAtIndex:function(d){var h=this.getColumns(),e=h[d];return e||null},getPreviousSibling:function(h){var d=this.getHeaderIndex(h),e=null;if(d>0){e=this.getColumns()[d-1]}return e},getNextSibling:function(h){var d=this.getHeaderIndex(h),e;if(d!==-1){e=this.getColumns()[d+1]}return e||null},getFirst:function(){var c=this.getColumns();return c.length>0?c[0]:null},getLast:function(){var c=this.getColumns(),d=c.length;return d>0?c[d-1]:null},getHeaderById:function(l){var n=this.getColumns(),j=n.length,h,m;for(h=0;h<j;++h){m=n[h];if(m.getItemId()===l){return m}}return null},getVisibleHeaderClosestToIndex:function(c){var d=this.getHeaderAtIndex(c);if(d&&d.hidden){d=d.next(":not([hidden])")||d.prev(":not([hidden])")}return d},cacheColumns:function(){var c=this.getHeaderColumns(this.headerCt),d=this.secondHeaderCt;if(d){c=c.concat(this.getHeaderColumns(d))}this.columns=c},getHeaderColumns:function(c){var d=this.visibleOnly?c.getVisibleGridColumns():c.getGridColumns();return Ext.Array.clone(d)},invalidate:function(){var c=this.rootColumns;this.columns=null;if(c){c.invalidate()}},destroy:function(){this.columns=this.rootColumns=null}},1,0,0,0,0,0,[Ext.grid,"ColumnManager",Ext.grid,"ColumnModel"],function(){this.createAlias("indexOf","getHeaderIndex")}));(Ext.cmd.derive("Ext.layout.container.Fit",Ext.layout.container.Container,{alternateClassName:"Ext.layout.FitLayout",itemCls:Ext.baseCSSPrefix+"fit-item",targetCls:Ext.baseCSSPrefix+"layout-fit",type:"fit",defaultMargins:{top:0,right:0,bottom:0,left:0},manageMargins:true,sizePolicies:{0:{readsWidth:1,readsHeight:1,setsWidth:0,setsHeight:0},1:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},2:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},3:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(e,l){var h=l||this.owner.getSizeModel(),j=(h.width.shrinkWrap?0:1)|(h.height.shrinkWrap?0:2);return this.sizePolicies[j]},beginLayoutCycle:function(E,H){var v=this,c=v.lastHeightModel&&v.lastHeightModel.calculated,G=v.lastWidthModel&&v.lastWidthModel.calculated,A=G||c,D=0,C=0,w,K,z,x,I,M,F,B,y,J;v.callParent(arguments);if(A&&E.targetContext.el.dom.tagName.toUpperCase()!="TD"){A=G=c=false}K=E.childItems;I=K.length;for(z=0;z<I;++z){x=K[z];if(H){w=x.target;F=w.minHeight;B=w.minWidth;if(B||F){M=x.marginInfo||x.getMarginInfo();F+=M.height;B+=M.height;if(D<F){D=F}if(C<B){C=B}}}if(A){y=x.el.dom.style;if(c){y.height=""}if(G){y.width=""}}}if(H){E.maxChildMinHeight=D;E.maxChildMinWidth=C}w=E.target;E.overflowX=(!E.widthModel.shrinkWrap&&E.maxChildMinWidth&&w.scrollFlags.x)||J;E.overflowY=(!E.heightModel.shrinkWrap&&E.maxChildMinHeight&&w.scrollFlags.y)||J},calculate:function(C){var v=this,y=C.childItems,E=y.length,F=v.getContainerSize(C),D={length:E,ownerContext:C,targetSize:F},s=C.widthModel.shrinkWrap,x=C.heightModel.shrinkWrap,z=C.overflowX,B=C.overflowY,w,G,u,A,H,t;if(z||B){w=v.getScrollbarsNeeded(z&&F.width,B&&F.height,C.maxChildMinWidth,C.maxChildMinHeight);if(w){G=Ext.getScrollbarSize();if(w&1){F.height-=G.height}if(w&2){F.width-=G.width}}}if(E>0){for(A=0;A<E;++A){D.index=A;v.fitItem(y[A],D)}}else{D.contentWidth=D.contentHeight=0}if(x||s){u=C.targetContext.getPaddingInfo();if(s){if(B&&!F.gotHeight){v.done=false}else{H=D.contentWidth+u.width;if(w&2){H+=G.width}if(!C.setContentWidth(H)){v.done=false}}}if(x){if(z&&!F.gotWidth){v.done=false}else{t=D.contentHeight+u.height;if(w&1){t+=G.height}if(!C.setContentHeight(t)){v.done=false}}}}},fitItem:function(d,h){var e=this;if(d.invalid){e.done=false;return}h.margins=d.getMarginInfo();h.needed=h.got=0;e.fitItemWidth(d,h);e.fitItemHeight(d,h);if(h.got!=h.needed){e.done=false}},fitItemWidth:function(l,j){var h,e;if(j.ownerContext.widthModel.shrinkWrap){e=l.getProp("width")+j.margins.width;h=j.contentWidth;if(h===undefined){j.contentWidth=e}else{j.contentWidth=Math.max(h,e)}}else{if(l.widthModel.calculated){++j.needed;if(j.targetSize.gotWidth){++j.got;this.setItemWidth(l,j)}}}this.positionItemX(l,j)},fitItemHeight:function(l,j){var e,h;if(j.ownerContext.heightModel.shrinkWrap){h=l.getProp("height")+j.margins.height;e=j.contentHeight;if(e===undefined){j.contentHeight=h}else{j.contentHeight=Math.max(e,h)}}else{if(l.heightModel.calculated){++j.needed;if(j.targetSize.gotHeight){++j.got;this.setItemHeight(l,j)}}}this.positionItemY(l,j)},positionItemX:function(e,h){var d=h.margins;if(h.index||d.left){e.setProp("x",d.left)}if(d.width){e.setProp("margin-right",d.width)}},positionItemY:function(e,h){var d=h.margins;if(h.index||d.top){e.setProp("y",d.top)}if(d.height){e.setProp("margin-bottom",d.height)}},setItemHeight:function(d,c){d.setHeight(c.targetSize.height-c.margins.height)},setItemWidth:function(d,c){d.setWidth(c.targetSize.width-c.margins.width)}},0,0,0,0,["layout.fit"],0,[Ext.layout.container,"Fit",Ext.layout,"FitLayout"],0));(Ext.cmd.derive("Ext.panel.Table",Ext.panel.Panel,{extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",layout:"fit",hasView:false,viewType:null,selType:"rowmodel",scroll:true,deferRowRender:true,sortableColumns:true,multiColumnSort:false,enableLocking:false,scrollerOwner:true,enableColumnMove:true,sealedColumns:false,enableColumnResize:true,rowLines:true,colLinesCls:Ext.baseCSSPrefix+"grid-with-col-lines",rowLinesCls:Ext.baseCSSPrefix+"grid-with-row-lines",noRowLinesCls:Ext.baseCSSPrefix+"grid-no-row-lines",hiddenHeaderCtCls:Ext.baseCSSPrefix+"grid-header-ct-hidden",hiddenHeaderCls:Ext.baseCSSPrefix+"grid-header-hidden",resizeMarkerCls:Ext.baseCSSPrefix+"grid-resize-marker",emptyCls:Ext.baseCSSPrefix+"grid-empty",initComponent:function(){var n=this,m=n.columns||n.colModel,j,o,l,q=n.store=Ext.data.StoreManager.lookup(n.store||"ext-empty-store"),p;if(n.plugins){n.plugins=n.constructPlugins()}if(n.columnLines){n.addBodyCls(n.colLinesCls)}n.addBodyCls(n.rowLines?n.rowLinesCls:n.noRowLinesCls);n.addBodyCls(n.extraBodyCls);if(m.isRootHeader){n.headerCt=m;n.headerCt.forceFit=!!n.forceFit;n.columnManager=m.columnManager;n.visibleColumnManager=m.visibleColumnManager;if(n.columnLines){n.headerCt.cascade(function(a){if(!a.isColumn){a.columnLines=true}})}}else{if(n.enableLocking||n.hasLockedColumns(m)){n.self.mixin("lockable",Ext.grid.locking.Lockable);n.injectLockable()}else{if(Ext.isArray(m)){m={items:m}}Ext.apply(m,{grid:n,forceFit:n.forceFit,sortable:n.sortableColumns,enableColumnMove:n.enableColumnMove,enableColumnResize:n.enableColumnResize,columnLines:n.columnLines,sealed:n.sealedColumns});if(Ext.isDefined(n.enableColumnHide)){m.enableColumnHide=n.enableColumnHide}if(!n.headerCt){n.headerCt=new Ext.grid.header.Container(m)}}}n.columns=p=n.headerCt.getGridColumns();n.scrollTask=new Ext.util.DelayedTask(n.syncHorizontalScroll,n);n.addEvents("reconfigure","viewready");n.cls=(n.cls||"")+(" "+n.extraBaseCls);delete n.autoScroll;if(!n.hasView){if(q.buffered&&!q.remoteSort){for(o=0,l=p.length;o<l;o++){p[o].sortable=false}}if(n.hideHeaders){n.headerCt.height=0;n.headerCt.hiddenHeaders=true;n.headerCt.addCls(n.hiddenHeaderCtCls);n.addCls(n.hiddenHeaderCls);if(Ext.isIEQuirks){n.headerCt.style={display:"none"}}}n.relayHeaderCtEvents(n.headerCt);n.features=n.features||[];if(!Ext.isArray(n.features)){n.features=[n.features]}n.dockedItems=[].concat(n.dockedItems||[]);n.dockedItems.unshift(n.headerCt);n.viewConfig=n.viewConfig||{};j=n.getView();n.items=[j];n.hasView=true;if(!n.hideHeaders){j.on({scroll:{fn:n.onHorizontalScroll,element:"el",scope:n}})}n.bindStore(q,true);n.mon(j,{viewready:n.onViewReady,refresh:n.onRestoreHorzScroll,scope:n})}n.relayEvents(n.view,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown","beforeitemkeydown","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermousedown","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect","select","beforedeselect","deselect"]);n.callParent(arguments);n.addStateEvents(["columnresize","columnmove","columnhide","columnshow","sortchange","filterchange","groupchange"])},getHeaderContainer:function(){return this.getView().getHeaderCt()},getColumns:function(){return this.getHeaderContainer().getGridColumns()},getVisibleColumns:function(){return this.getHeaderContainer().getVisibleGridColumns()},hasLockedColumns:function(l){var e,h,j;if(Ext.isObject(l)){l=l.items}for(e=0,h=l.length;e<h;e++){j=l[e];if(!j.processed&&j.locked){return true}}},relayHeaderCtEvents:function(c){this.relayEvents(c,["columnresize","columnmove","columnhide","columnshow","columnschanged","sortchange","headerclick","headercontextmenu","headertriggerclick"])},getState:function(){var d=this,h=d.callParent(),e=d.store.getState();h=d.addPropertyToState(h,"columns",d.headerCt.getColumnsState());if(e){h.storeState=e}return h},applyState:function(m){var n=this,l=m.sort,j=m.storeState,h=n.store,o=m.columns;delete m.columns;n.callParent(arguments);if(o){n.headerCt.applyColumnsState(o)}if(l){if(h.remoteSort){h.sort({property:l.property,direction:l.direction,root:l.root},null,false)}else{h.sort(l.property,l.direction)}}else{if(j){h.applyState(j)}}},getStore:function(){return this.store},getView:function(){var d=this,c;if(!d.view){c=d.getSelectionModel();Ext.widget(Ext.apply({grid:d,deferInitialRefresh:d.deferRowRender!==false,trackOver:d.trackMouseOver!==false,scroll:d.scroll,xtype:d.viewType,store:d.store,headerCt:d.headerCt,columnLines:d.columnLines,rowLines:d.rowLines,selModel:c,features:d.features,panel:d,emptyText:d.emptyText||""},d.viewConfig));if(d.view.emptyText){d.view.emptyText='<div class="'+d.emptyCls+'">'+d.view.emptyText+"</div>"}d.view.getComponentLayout().headerCt=d.headerCt;d.mon(d.view,{uievent:d.processEvent,scope:d});c.view=d.view;d.headerCt.view=d.view;if(d.hasListeners.viewcreated){d.fireEvent("viewcreated",d,d.view)}}return d.view},getColumnManager:function(){return this.columnManager},getVisibleColumnManager:function(){return this.visibleColumnManager},getTopLevelColumnManager:function(){var c=this.ownerLockable;return c?c.getColumnManager():this.getColumnManager()},getTopLevelVisibleColumnManager:function(){var c=this.ownerLockable;return c?c.getVisibleColumnManager():this.getVisibleColumnManager()},setAutoScroll:Ext.emptyFn,processEvent:function(q,o,n,w,p,t,u,e){var s=this,v;if(p!==-1){v=s.getColumnManager().getHeaderAtIndex(p);return v.processEvent.apply(v,arguments)}},determineScrollbars:function(){},invalidateScroller:function(){},scrollByDeltaY:function(c,d){this.getView().scrollBy(0,c,d)},scrollByDeltaX:function(c,d){this.getView().scrollBy(c,0,d)},afterCollapse:function(){this.saveScrollPos();this.callParent(arguments)},afterExpand:function(){this.callParent(arguments);this.restoreScrollPos()},saveScrollPos:Ext.emptyFn,restoreScrollPos:Ext.emptyFn,onHeaderResize:Ext.emptyFn,onHeaderMove:function(m,l,j,h,n){var o=this;if(o.optimizedColumnMove===false){o.view.refreshView()}else{o.view.moveColumn(h,n,j)}o.delayScroll()},onHeaderHide:function(d,h){var e=this.view;if(e.refreshCounter){e.refreshView()}},onHeaderShow:function(d,h){var e=this.view;if(e.refreshCounter){e.refreshView()}},onHeadersChanged:function(d,h){var e=this;if(e.rendered&&!e.reconfiguring){e.view.refreshView();e.delayScroll()}},delayScroll:function(){var c=this.getScrollTarget().el;if(c){this.scrollTask.delay(10,null,null,[c.dom])}},onViewReady:function(){this.fireEvent("viewready",this)},onRestoreHorzScroll:function(){var c=this.scrollLeft;if(c){this.syncHorizontalScroll(this,true)}},getScrollerOwner:function(){var c=this;if(!this.scrollerOwner){c=this.up("[scrollerOwner]")}return c},getLhsMarker:function(){var c=this;return c.lhsMarker||(c.lhsMarker=Ext.DomHelper.append(c.el,{role:"presentation",cls:c.resizeMarkerCls},true))},getRhsMarker:function(){var c=this;return c.rhsMarker||(c.rhsMarker=Ext.DomHelper.append(c.el,{role:"presentation",cls:c.resizeMarkerCls},true))},getSelectionModel:function(){var n=this,j=n.selModel,l,m,h;if(!j){j={};l=true}if(!j.events){h=j.selType||n.selType;l=!j.mode;j=n.selModel=Ext.create("selection."+h,j)}if(n.simpleSelect){m="SIMPLE"}else{if(n.multiSelect){m="MULTI"}}Ext.applyIf(j,{allowDeselect:n.allowDeselect});if(m&&l){j.setSelectionMode(m)}if(!j.hasRelaySetup){n.relayEvents(j,["selectionchange","beforeselect","beforedeselect","select","deselect"]);j.hasRelaySetup=true}if(n.disableSelection){j.locked=true}return j},getScrollTarget:function(){var d=this.getScrollerOwner(),c=d.query("tableview");return c[1]||c[0]},onHorizontalScroll:function(d,c){this.syncHorizontalScroll(c)},syncHorizontalScroll:function(l,h){var n=this,m=l.scrollLeft,j;h=h===true;if(n.rendered&&(h||m!==n.scrollLeft)){if(h){j=n.getScrollTarget();j.el.dom.scrollLeft=m}n.headerCt.el.dom.scrollLeft=m;n.scrollLeft=m}},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(h,o){var n=this,j=n.getView(),m=h&&h.buffered,l;if(h){n.store=h;l=n.findPlugin("bufferedrenderer");if(l||m){if(!l){l=n.addPlugin(Ext.apply({ptype:"bufferedrenderer"},n.initialConfig.verticalScroller));l.store=h}n.verticalScroller=l;if(l.store){l.bindStore(h)}}if(j.store!==h){j.bindStore(h,false)}n.mon(h,{load:n.onStoreLoad,scope:n});n.storeRelayers=n.relayEvents(h,["filterchange","groupchange"]);if(l){n.invalidateScrollerOnRefresh=false}if(n.invalidateScrollerOnRefresh!==undefined){j.preserveScrollOnRefresh=!n.invalidateScrollerOnRefresh}}else{n.unbindStore()}},unbindStore:function(){var h=this,d=h.store,e;if(d){h.store=null;h.mun(d,{load:h.onStoreLoad,scope:h});Ext.destroy(h.storeRelayers);e=h.view;if(e.store){e.bindStore(null)}}},reconfigure:function(l,q){var p=this,m=p.getView(),s,n=p.store,o=p.headerCt,t=o?o.items.getRange():p.columns;if(arguments.length===1&&Ext.isArray(l)){q=l;l=null}if(q){q=Ext.Array.slice(q)}Ext.suspendLayouts();p.reconfiguring=true;p.fireEvent("beforereconfigure",p,l,q,n,t);if(p.lockable){p.reconfigureLockable(l,q)}else{if(q){delete p.scrollLeft;o.removeAll();o.add(q)}if(l&&(l=Ext.StoreManager.lookup(l))!==n){if(p.store){p.unbindStore()}s=m.deferInitialRefresh;m.deferInitialRefresh=false;p.bindStore(l);m.deferInitialRefresh=s}else{m.refreshView()}o.setSortState()}Ext.resumeLayouts(true);p.fireEvent("reconfigure",p,l,q,n,t);delete p.reconfiguring},beforeDestroy:function(){var c=this.scrollTask;if(c){c.cancel();this.scrollTask=null}this.callParent()},onDestroy:function(){var c=this;if(c.lockable){c.destroyLockable()}c.callParent();c.columns=c.storeRelayers=c.columnManager=c.visibleColumnManager=null},destroy:function(){var c=this;c.callParent();if(c.isDestroyed){c.view=c.selModel=c.headerCt=null}}},0,["tablepanel"],["component","box","container","panel","tablepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true},["widget.tablepanel"],0,[Ext.panel,"Table"],0));(Ext.cmd.derive("Ext.util.CSS",Ext.Base,function(){var n,l=null,m=document,h=/(-[a-z])/gi,j=function(c,a){return a.charAt(1).toUpperCase()};return{singleton:true,rules:l,initialized:false,constructor:function(){n=this},createStyleSheet:function(d,a){var e,o=m.getElementsByTagName("head")[0],c=m.createElement("style");c.setAttribute("type","text/css");if(a){c.setAttribute("id",a)}e=c.styleSheet;if(e){o.appendChild(c);e.cssText=d}else{c.appendChild(m.createTextNode(d));o.appendChild(c);e=c.sheet}n.cacheStyleSheet(e);return e},removeStyleSheet:function(a){var c=m.getElementById(a);if(c){c.parentNode.removeChild(c)}},swapStyleSheet:function(a,d){var c;n.removeStyleSheet(a);c=m.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("id",a);c.setAttribute("href",d);m.getElementsByTagName("head")[0].appendChild(c)},cacheStyleSheet:function(a){if(!l){l=n.rules={}}try{var s=a.cssRules||a.rules,c=s.length-1,e=a.imports,q=e?e.length:0,t,d;for(d=0;d<q;++d){n.cacheStyleSheet(e[d])}for(;c>=0;--c){t=s[c];if(t.styleSheet){n.cacheStyleSheet(t.styleSheet)}n.cacheRule(t,a)}}catch(u){}},cacheRule:function(e,a){if(e.styleSheet){return n.cacheStyleSheet(e.styleSheet)}var c=e.selectorText,d,o;if(c){c=c.split(",");d=c.length;for(o=0;o<d;o++){l[Ext.String.trim(c[o]).toLowerCase()]={parentStyleSheet:a,cssRule:e}}}},getRules:function(a){var c={},d;if(l===null||a){n.refreshCache()}for(d in l){c[d]=l[d].cssRule}return c},refreshCache:function(){var c=m.styleSheets,d=0,e=c.length;l=n.rules={};for(;d<e;d++){try{if(!c[d].disabled){n.cacheStyleSheet(c[d])}}catch(a){}}},getRule:function(e,c,d){var a,o;if(!l||c){n.refreshCache()}if(!Ext.isArray(e)){o=l[e.toLowerCase()];if(o&&!d){o=o.cssRule}return o||null}for(a=0;a<e.length;a++){if(l[e[a]]){return d?l[e[a].toLowerCase()]:l[e[a].toLowerCase()].cssRule}}return null},createRule:function(a,o,d){var p,c=a.cssRules||a.rules,e=c.length;if(a.insertRule){a.insertRule(o+"{"+d+"}",e)}else{a.addRule(o,d||" ")}n.cacheRule(p=c[e],a);return p},updateRule:function(p,c,d){var a,o,e;if(!Ext.isArray(p)){a=n.getRule(p);if(a){if(arguments.length===2){e=Ext.Element.parseStyles(c);for(c in e){a.style[c.replace(h,j)]=e[c]}}else{a.style[c.replace(h,j)]=d}return true}}else{for(o=0;o<p.length;o++){if(n.updateRule(p[o],c,d)){return true}}}return false},deleteRule:function(e){var c=n.getRule(e,false,true),a,d;if(c){a=c.parentStyleSheet;d=Ext.Array.indexOf(a.cssRules||a.rules,c.cssRule);if(a.deleteRule){a.deleteRule(d)}else{a.removeRule(d)}delete l[e]}}}},1,0,0,0,0,0,[Ext.util,"CSS"],0));(Ext.cmd.derive("Ext.view.TableLayout",Ext.layout.component.Auto,{type:"tableview",beginLayout:function(j){var l=this,e=l.owner.lockingPartner,h=l.owner;l.callParent(arguments);if(e){l.lockedGrid=l.owner.up("[lockable]");l.lockedGrid.needsRowHeightSync=true;if(!j.lockingPartner){j.lockingPartner=j.context.getItem(e,e.el);if(j.lockingPartner&&!j.lockingPartner.lockingPartner){j.lockingPartner.lockingPartner=j}}}j.headerContext=j.context.getCmp(l.headerCt);if(l.owner.body.dom){j.bodyContext=j.getEl(l.owner.body)}if(Ext.isWebKit){h.el.select(h.getBodySelector()).setStyle("table-layout","auto")}},calculate:function(l){var m=this,o=m.lockingPartner,j=m.owner,n=0,h;if(l.headerContext.hasProp("columnWidthsDone")){if(!m.setColumnWidths(l)){m.done=false;return}l.state.columnWidthsSynced=true;if(l.bodyContext){h=m.owner.el.down("."+j.ownerCt.emptyCls,true);if(!h){n=l.bodyContext.el.dom.offsetHeight;l.bodyContext.setHeight(n,false)}else{n=h.offsetHeight}if(l.headerContext.state.boxPlan.tooNarrow&&l.ownerCtContext.sizeModel.height.shrinkWrap){n+=Ext.getScrollbarSize().height}l.setProp("contentHeight",n)}if(o&&!o.state.columnWidthsSynced){m.done=false}else{m.callParent(arguments)}}else{m.done=false}},measureContentHeight:function(c){var d=c.lockingPartner;if(!c.bodyContext||(c.state.columnWidthsSynced&&(!d||d.state.columnWidthsSynced))){return this.callParent(arguments)}},setColumnWidths:function(D){if(!this.owner.body.dom){return true}var u=this,F=u.owner,G=D.context,B=u.headerCt.getVisibleGridColumns(),C,y,v=B.length,w=0,H=0,s,z,A=!Ext.isBorderBox,E=F.body.dom.firstChild,t=E.tagName.toUpperCase()==="COLGROUP",x=[];if(G){G.currentLayout=u}for(y=0;y<v;y++){C=B[y];s=G.getCmp(C);if(!C.lastBox||C.lastBox.invalid||s.props.width!==C.lastBox.width||(s.cellWidth&&s.cellWidth!=s.props.width)){z=s.props.width;if(isNaN(z)){s.getProp("width");return false}w+=z;s.columnIndex=y;x.push(s)}else{w+=C.lastBox.width}s.cellWidth=s.props.width}v=x.length;if(!v){return true}F.body.setWidth(w);for(y=0;y<v;y++){s=x[y];z=s.props.width;if(A&&F.columnLines){if(!H){H=D.headerContext.childItems[0].borderInfo.width}z-=H}if(t){E.childNodes[s.columnIndex].style.width=z+"px"}if(F.features.length){F.body.select(F.getColumnSizerSelector(s.target)).setWidth(z)}}return true},finishedLayout:function(){var c=this,d=c.owner;c.callParent(arguments);if(Ext.isWebKit){d.el.select(d.getBodySelector()).setStyle("table-layout","")}if(d.refreshCounter&&c.lockedGrid&&c.lockedGrid.syncRowHeight&&c.lockedGrid.needsRowHeightSync){c.lockedGrid.syncRowHeights();c.lockedGrid.needsRowHeightSync=false}}},0,0,0,0,["layout.tableview"],0,[Ext.view,"TableLayout"],0));(Ext.cmd.derive("Ext.view.NodeCache",Ext.Base,{constructor:function(c){this.view=c;this.clear();this.el=new Ext.dom.AbstractElement.Fly()},clear:function(l){var n=this,m=this.elements,j,h;if(l){for(j in m){h=m[j];h.parentNode.removeChild(h)}}n.elements={};n.count=n.startIndex=0;n.endIndex=-1},fill:function(h,l){var n=this,m=n.elements={},o,j=h.length;if(!l){l=0}for(o=0;o<j;o++){m[l+o]=h[o]}n.startIndex=l;n.endIndex=l+j-1;n.count=j;return this},insert:function(l,h){var n=this,m=n.elements,o,j=h.length;if(n.count){if(l<n.count){for(o=n.endIndex+j;o>=l+j;o--){m[o]=m[o-j];m[o].setAttribute("data-recordIndex",o)}}n.endIndex=n.endIndex+j}else{n.startIndex=l;n.endIndex=l+j-1}for(o=0;o<j;o++,l++){m[l]=h[o];m[l].setAttribute("data-recordIndex",l)}n.count+=j},item:function(l,e){var j=this.elements[l],h=null;if(j){h=e?this.elements[l]:this.el.attach(this.elements[l])}return h},first:function(c){return this.item(this.startIndex,c)},last:function(c){return this.item(this.endIndex,c)},moveBlock:function(l){var n=this,m=n.elements,o,j,p,q;if(l<0){q=n.startIndex-1;j=n.endIndex;p=1}else{q=n.endIndex+1;j=n.startIndex;p=-1}n.startIndex+=l;n.endIndex+=l;do{q+=p;o=m[q+l]=m[q];o.setAttribute("data-recordIndex",q+l);if(q<n.startIndex||q>n.endIndex){delete m[q]}}while(q!==j);delete m[q]},getCount:function(){return this.count},slice:function(l,h){var m=this.elements,j=[],n;if(arguments.length<2){h=this.endIndex}else{h=Math.min(this.endIndex,h-1)}for(n=l||this.startIndex;n<=h;n++){j.push(m[n])}return j},replaceElement:function(m,n,j){var l=this.elements,h=(typeof m==="number")?m:this.indexOf(m);if(h>-1){n=Ext.getDom(n);if(j){m=l[h];m.parentNode.insertBefore(n,m);Ext.removeNode(m);n.setAttribute("data-recordIndex",h)}this.elements[h]=n}return this},indexOf:function(d){var h=this.elements,e;d=Ext.getDom(d);for(e=this.startIndex;e<=this.endIndex;e++){if(h[e]===d){return e}}return -1},removeRange:function(t,o,q){var m=this,u=m.elements,p,n,s,l;if(o==null){o=m.endIndex+1}else{o=Math.min(m.endIndex+1,o+1)}if(t==null){t=m.startIndex}s=o-t;for(n=t,l=o;n<=m.endIndex;n++,l++){if(q&&n<o){Ext.removeNode(u[n])}if(l<=m.endIndex){p=u[n]=u[l];p.setAttribute("data-recordIndex",n)}else{delete u[n]}}m.count-=s;m.endIndex-=s},removeElement:function(n,w){var s=this,o,p,y=s.elements,v,u,x=0,t,q;if(Ext.isArray(n)){o=n;n=[];u=o.length;for(x=0;x<u;x++){p=o[x];if(typeof p!=="number"){p=s.indexOf(p)}if(p>=s.startIndex&&p<=s.endIndex){n[n.length]=p}}Ext.Array.sort(n);u=n.length}else{if(n<s.startIndex||n>s.endIndex){return}u=1;n=[n]}for(t=q=n[0],x=0;t<=s.endIndex;t++,q++){if(x<u&&t===n[x]){q++;x++;if(w){Ext.removeNode(y[t])}}if(q<=s.endIndex&&q>=s.startIndex){v=y[t]=y[q];v.setAttribute("data-recordIndex",t)}else{delete y[t]}}s.endIndex-=u;s.count-=u},scroll:function(w,q,y){var s=this,A=s.elements,o=w.length,u,x,z,v,t=s.view.getNodeContainer(),p=document.createDocumentFragment();if(q==-1){for(u=(s.endIndex-y)+1;u<=s.endIndex;u++){x=A[u];delete A[u];x.parentNode.removeChild(x)}s.endIndex-=y;v=s.view.bufferRender(w,s.startIndex-=o);for(u=0;u<o;u++){A[s.startIndex+u]=v[u];p.appendChild(v[u])}t.insertBefore(p,t.firstChild)}else{z=s.startIndex+y;for(u=s.startIndex;u<z;u++){x=A[u];delete A[u];x.parentNode.removeChild(x)}s.startIndex=u;v=s.view.bufferRender(w,s.endIndex+1);for(u=0;u<o;u++){A[s.endIndex+=1]=v[u];p.appendChild(v[u])}t.appendChild(p)}s.count=s.endIndex-s.startIndex+1;return v}},1,0,0,0,0,0,[Ext.view,"NodeCache"],0));(Ext.cmd.derive("Ext.view.Table",Ext.view.View,{componentLayout:"tableview",baseCls:Ext.baseCSSPrefix+"grid-view",unselectableCls:Ext.baseCSSPrefix+"unselectable",firstCls:Ext.baseCSSPrefix+"grid-cell-first",lastCls:Ext.baseCSSPrefix+"grid-cell-last",headerRowSelector:"tr."+Ext.baseCSSPrefix+"grid-header-row",selectedItemCls:Ext.baseCSSPrefix+"grid-row-selected",beforeSelectedItemCls:Ext.baseCSSPrefix+"grid-row-before-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-row-focused",beforeFocusedItemCls:Ext.baseCSSPrefix+"grid-row-before-focused",tableFocusedFirstCls:Ext.baseCSSPrefix+"grid-table-focused-first",tableSelectedFirstCls:Ext.baseCSSPrefix+"grid-table-selected-first",tableOverFirstCls:Ext.baseCSSPrefix+"grid-table-over-first",overItemCls:Ext.baseCSSPrefix+"grid-row-over",beforeOverItemCls:Ext.baseCSSPrefix+"grid-row-before-over",altRowCls:Ext.baseCSSPrefix+"grid-row-alt",dirtyCls:Ext.baseCSSPrefix+"grid-dirty-cell",rowClsRe:new RegExp("(?:^|\\s*)"+Ext.baseCSSPrefix+"grid-row-(first|last|alt)(?:\\s+|$)","g"),cellRe:new RegExp(Ext.baseCSSPrefix+"grid-cell-headerId-([^\\s]+)(?:\\s|$)",""),positionBody:true,trackOver:true,getRowClass:null,stripeRows:true,markDirty:true,ariaRole:"grid",tpl:"{%values.view.tableTpl.applyOut(values, out)%}",tableTpl:["{%",'var view=values.view,tableCls="'+Ext.baseCSSPrefix+'" + view.id + "-table '+Ext.baseCSSPrefix+'grid-table";',"values.fullWidth","%}",'<table id="{view.id}-table" class="{[tableCls]}" border="0" cellspacing="0" cellpadding="0" style="{tableStyle}" {ariaTableAttr}>',"{[view.renderColumnSizer(out)]}","{[view.renderTHead(values, out)]}","{[view.renderTFoot(values, out)]}",'<tbody id="{view.id}-body" {ariaTbodyAttr}>',"{%","view.renderRows(values.rows, values.viewStartIndex, out);","%}","</tbody>","</table>",{priority:0}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-data-row";',"%}",'<tr {[values.rowId ? ("id=\\"" + values.rowId + "\\"") : ""]} ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]} {[values.rowClasses.join(" ")]}{[dataRowCls]}" ','{rowAttr:attributes} tabIndex="-1" {ariaRowAttr}>','<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, parent.rowIndex, xindex - 1, out, parent)","%}","</tpl>","</tr>",{priority:0}],cellTpl:['<td class="{tdCls}" {tdAttr} {[Ext.aria ? "id=\\"" + Ext.id() + "\\"" : ""]} {ariaCellAttr}>','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner {innerCls}"','style="text-align:{align};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</td>",{priority:0}],refreshSelmodelOnRefresh:false,tableValues:{},rowValues:{itemClasses:[],rowClasses:[]},cellValues:{classes:[Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+"grid-td"]},renderBuffer:document.createElement("div"),constructor:function(c){if(c.grid.isTree){c.baseCls=Ext.baseCSSPrefix+"tree-view"}this.callParent([c])},initComponent:function(){var c=this,d=c.scroll;this.addEvents("beforecellclick","cellclick","beforecelldblclick","celldblclick","beforecellcontextmenu","cellcontextmenu","beforecellmousedown","cellmousedown","beforecellmouseup","cellmouseup","beforecellkeydown","cellkeydown");c.body=new Ext.dom.Element.Fly();c.body.id=c.id+"gridBody";c.autoScroll=undefined;if(!c.trackOver){c.overItemCls=null;c.beforeOverItemCls=null}if(d===true||d==="both"){c.autoScroll=true}else{if(d==="horizontal"){c.overflowX="auto"}else{if(d==="vertical"){c.overflowY="auto"}}}c.selModel.view=c.headerCt.view=c;c.grid.view=c;c.initFeatures(c.grid);delete c.grid;c.itemSelector=c.getItemSelector();c.all=new Ext.view.NodeCache(c);c.callParent()},getVisibleColumnManager:function(){var d=this.ownerCt,c=d.ownerLockable;return c?c.getVisibleColumnManager():d.getVisibleColumnManager()},beforeLayout:function(){var c=this,d=!c.firstRefreshDone&&c.headerCt.layout.running;c.callParent(arguments);if(d&&c.body.dom){c.headerCt.layout.injectViewContext(c.headerCt.layout.ownerContext,c)}},moveColumn:function(G,v,D){var w=this,y=(D>1)?document.createDocumentFragment():undefined,E=v,u=w.getGridColumns().length,A=u-1,F=(w.firstCls||w.lastCls)&&(v===0||v==u||G===0||G==A),B,C,H,z,x,j,t;if(w.rendered&&v!==G){H=w.el.query(w.getDataRowSelector());if(v>G&&y){E-=1}for(B=0,z=H.length;B<z;B++){x=H[B];j=x.childNodes;if(F){if(j.length===1){Ext.fly(j[0]).addCls(w.firstCls);Ext.fly(j[0]).addCls(w.lastCls);continue}if(G===0){Ext.fly(j[0]).removeCls(w.firstCls);Ext.fly(j[1]).addCls(w.firstCls)}else{if(G===A){Ext.fly(j[A]).removeCls(w.lastCls);Ext.fly(j[A-1]).addCls(w.lastCls)}}if(v===0){Ext.fly(j[0]).removeCls(w.firstCls);Ext.fly(j[G]).addCls(w.firstCls)}else{if(v===u){Ext.fly(j[A]).removeCls(w.lastCls);Ext.fly(j[G]).addCls(w.lastCls)}}}if(y){for(C=0;C<D;C++){y.appendChild(j[G])}x.insertBefore(y,j[E]||null)}else{x.insertBefore(j[G],j[E]||null)}}t=w.el.query(w.getBodySelector());for(B=0,z=t.length;B<z;B++){x=t[B].firstChild;if(x.tagName.toUpperCase()==="COLGROUP"){if(y){for(C=0;C<D;C++){y.appendChild(x.childNodes[G])}x.insertBefore(y,x.childNodes[E]||null)}else{x.insertBefore(x.childNodes[G],x.childNodes[E]||null)}}}}},scrollToTop:Ext.emptyFn,addElListener:function(e,h,d){this.mon(this,e,h,d,{element:"el"})},getGridColumns:function(){return this.ownerCt.getVisibleColumnManager().getColumns()},getHeaderAtIndex:function(c){return this.ownerCt.getVisibleColumnManager().getHeaderAtIndex(c)},getCell:function(e,d){var h=this.getNode(e,true);return Ext.fly(h).down(d.getCellSelector())},getFeature:function(c){var d=this.featuresMC;if(d){return d.get(c)}},findFeature:function(c){if(this.features){return Ext.Array.findBy(this.features,function(a){if(a.ftype===c){return true}})}},initFeatures:function(n){var l=this,o,m,h,j;l.tableTpl=Ext.XTemplate.getTpl(this,"tableTpl");l.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl");l.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl");l.featuresMC=new Ext.util.MixedCollection();m=l.features=l.constructFeatures();j=m?m.length:0;for(o=0;o<j;o++){h=m[o];h.view=l;h.grid=n;l.featuresMC.add(h);h.init(n)}},renderTHead:function(h,n){var l=h.view.headerFns,j,m;if(l){for(m=0,j=l.length;m<j;++m){l[m].call(this,h,n)}}},addHeaderFn:function(){var c=this.headerFns;if(!c){c=this.headerFns=[]}c.push(fn)},renderTFoot:function(h,n){var l=h.view.footerFns,j,m;if(l){for(m=0,j=l.length;m<j;++m){l[m].call(this,h,n)}}},addFooterFn:function(d){var c=this.footerFns;if(!c){c=this.footerFns=[]}c.push(d)},addTableTpl:function(c){return this.addTpl("tableTpl",c)},addRowTpl:function(c){return this.addTpl("rowTpl",c)},addCellTpl:function(c){return this.addTpl("cellTpl",c)},addTpl:function(l,m){var n=this,j,h;m=Ext.Object.chain(m);if(!m.isTemplate){m.applyOut=n.tplApplyOut}for(j=n[l];m.priority<j.priority;j=j.nextTpl){h=j}if(h){h.nextTpl=m}else{n[l]=m}m.nextTpl=j;return m},tplApplyOut:function(d,c){if(this.before){if(this.before(d,c)===false){return}}this.nextTpl.applyOut(d,c);if(this.after){this.after(d,c)}},constructFeatures:function(){var l=this,m=l.features,n,h,o=0,j;if(m){h=[];j=m.length;for(;o<j;o++){n=m[o];if(!n.isFeature){n=Ext.create("feature."+n.ftype,n)}h[o]=n}}return h},beforeRender:function(){var c=this;c.callParent();if(!c.enableTextSelection){c.protoEl.unselectable()}},onViewScroll:function(c,d){if(!this.ignoreScroll){this.callParent(arguments);this.fireEvent("bodyscroll",c,d)}},createRowElement:function(h,e){var l=this,j=l.renderBuffer;l.tpl.overwrite(j,l.collectData([h],e));return Ext.fly(j).down(l.getNodeContainerSelector(),true).firstChild},bufferRender:function(h,e){var l=this,j=l.renderBuffer;l.tpl.overwrite(j,l.collectData(h,e));return Ext.Array.toArray(Ext.fly(j).down(l.getNodeContainerSelector(),true).childNodes)},collectData:function(d,c){this.rowValues.view=this;return{view:this,rows:d,viewStartIndex:c,tableStyle:"width:"+this.headerCt.getTableWidth()+"px"+(this.bufferedRenderer?(";position:absolute;top:"+this.bufferedRenderer.bodyTop+"px"):"")}},collectNodes:function(c){this.all.fill(this.getNodeContainer().childNodes,this.all.startIndex)},refreshSize:function(){var h=this,d,e=h.getBodySelector();if(e){h.body.attach(h.el.child(e,true))}if(!h.hasLoadingHeight){d=h.up("tablepanel");Ext.suspendLayouts();h.callParent();if(h.dataSource.getCount()){d.updateLayout()}Ext.resumeLayouts(true)}},getMaskTarget:function(){var c=this.ownerCt;if(c.ownerLockable){c=c.ownerLockable}return c.getMaskTarget()},statics:{getBoundView:function(c){return Ext.getCmp(c.getAttribute("data-boundView"))}},getRecord:function(h){var d=this,e;if(d.store.isDestroyed){return}h=d.getNode(h);if(h){if(!d.hasActiveFeature()){e=h.getAttribute("data-recordIndex");if(e){e=parseInt(e,10);if(e>-1){return d.store.data.getAt(e)}}}return d.dataSource.getByInternalId(h.getAttribute("data-recordId"))}},indexOf:function(c){c=this.getNode(c,false);if(!c&&c!==0){return -1}return this.all.indexOf(c)},indexInStore:function(c){return this.dataSource.indexOf(this.getRecord(c))},renderRows:function(m,n,h){var l=this.rowValues,j=m.length,o;l.view=this;l.columns=this.ownerCt.getVisibleColumnManager().getColumns();for(o=0;o<j;o++,n++){l.itemClasses.length=l.rowClasses.length=0;this.renderRow(m[o],n,h)}l.view=l.columns=l.record=null},renderColumnSizer:function(h){var m=this.getGridColumns(),j=m.length,n,l;h.push('<colgroup id="',this.id,'-col-sizer" role="presentation">');for(n=0;n<j;n++){l=m[n];h.push('<col role="presentation" class="',m[n].getCellId(),'" style="width:'+l.getCellWidth()+'px">')}h.push("</colgroup>")},replaceColumnSizer:function(){var e=this,j=[],l=e.el.down("#"+e.id+"-col-sizer"),h=e.body;e.renderColumnSizer(j);j=j.join("");if(l){l.destroy()}if(h){h.dom.style.width=e.headerCt.getTableWidth()+"px";Ext.core.DomHelper.insertFirst(h,j)}},renderRow:function(t,y,u){var q=this,v=y===-1,s=q.selModel,n=q.rowValues,w=n.itemClasses,x=n.rowClasses,o,p=q.rowTpl;n.rowAttr={};n.record=t;n.recordId=t.internalId;n.recordIndex=q.store.indexOf(t);n.rowIndex=y;n.rowId=q.getRowId(t);n.itemCls=n.rowCls="";if(!n.columns){n.columns=q.ownerCt.getVisibleColumnManager().getColumns()}w.length=x.length=0;if(!v){w[0]=Ext.baseCSSPrefix+"grid-row";if(!q.ownerCt.disableSelection&&s.isRowSelected){if(s.isRowSelected(t)){w.push(q.selectedItemCls)}if(q.rowValues.recordIndex<q.store.getTotalCount()-1&&s.isRowSelected(q.rowValues.recordIndex+1)&&!q.isRowStyleFirst(y+1)){x.push(q.beforeSelectedItemCls)}}if(q.stripeRows&&y%2!==0){w.push(q.altRowCls)}if(q.getRowClass){o=q.getRowClass(t,y,null,q.dataSource);if(o){x.push(o)}}}if(u){p.applyOut(n,u)}else{return p.apply(n)}},renderCell:function(D,A,B,u,y,C){var w=this,z=w.selModel,x=w.cellValues,E=x.classes,G=A.data[D.dataIndex],t=w.cellTpl,F,s,v;x.record=A;x.column=D;x.recordIndex=B;x.rowIndex=u;x.columnIndex=y;x.cellIndex=y;x.align=D.align;x.tdCls=D.tdCls;x.innerCls=D.innerCls;x.style=x.tdAttr="";x.unselectableAttr=w.enableTextSelection?"":'unselectable="on"';if(D.renderer&&D.renderer.call){F=w.ownerCt.columnManager.getHeaderIndex(D);s=D.renderer.call(D.usingDefaultRenderer?D:D.scope||w.ownerCt,G,x,A,B,F,w.dataSource,w);if(x.css){A.cssWarning=true;x.tdCls+=" "+x.css;delete x.css}}else{s=G}x.value=(s==null||s==="")?D.emptyCellText:s;E[1]=D.getCellId();v=2;if(D.tdCls){E[v++]=D.tdCls}if(w.markDirty&&A.isModified(D.dataIndex)){E[v++]=w.dirtyCls}if(D.isFirstVisible){E[v++]=w.firstCls}if(D.isLastVisible){E[v++]=w.lastCls}if(!w.enableTextSelection){E[v++]=w.unselectableCls}if(x.tdCls){E[v++]=x.tdCls}if(z&&z.isCellModel&&z.isCellSelected(w,B,D)){E[v++]=(w.selectedCellCls)}E.length=v;x.tdCls=E.join(" ");t.applyOut(x,C);x.column=null;x.record=null},getNode:function(l,e){var j,h=this.callParent(arguments);if(h&&h.tagName){if(e){if(!(j=Ext.fly(h)).is(this.dataRowSelector)){return j.down(this.dataRowSelector,true)}}else{if(e===false){if(!(j=Ext.fly(h)).is(this.itemSelector)){return j.up(this.itemSelector,null,true)}}}}return h},getRowId:function(c){return this.id+"-record-"+c.internalId},constructRowId:function(c){return this.id+"-record-"+c},getNodeById:function(c,d){c=this.constructRowId(c);return this.retrieveNode(c,d)},getNodeByRecord:function(e,d){var h=this.getRowId(e);return this.retrieveNode(h,d)},retrieveNode:function(l,n){var j=this.el.getById(l,true),h=this.itemSelector,m;if(n===false&&j){if(!(m=Ext.fly(j)).is(h)){return m.up(h,null,true)}}return j},updateIndexes:Ext.emptyFn,bodySelector:"table",nodeContainerSelector:"tbody",itemSelector:"tr."+Ext.baseCSSPrefix+"grid-row",dataRowSelector:"tr."+Ext.baseCSSPrefix+"grid-data-row",cellSelector:"td."+Ext.baseCSSPrefix+"grid-cell",sizerSelector:"col."+Ext.baseCSSPrefix+"grid-cell-headerId",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getNodeContainer:function(){return this.el.down(this.nodeContainerSelector,true)},getBodySelector:function(){return this.bodySelector+"."+Ext.baseCSSPrefix+this.id+"-table"},getNodeContainerSelector:function(){return this.nodeContainerSelector},getColumnSizerSelector:function(c){return this.sizerSelector+"-"+c.getItemId()},getItemSelector:function(){return this.itemSelector},getDataRowSelector:function(){return this.dataRowSelector},getCellSelector:function(c){return c?c.getCellSelector():this.cellSelector},getCellInnerSelector:function(c){return this.getCellSelector(c)+" "+this.innerSelector},addRowCls:function(d,e){var h=this.getNode(d,false);if(h){Ext.fly(h).addCls(e)}},removeRowCls:function(d,e){var h=this.getNode(d,false);if(h){Ext.fly(h).removeCls(e)}},setHighlightedItem:function(h){var d=this,e=d.highlightedItem;if(e&&d.el.isAncestor(e)&&d.isRowStyleFirst(e)){d.toggleRowTableCls(e,d.tableOverFirstCls,false)}h=d.getNode(h,false);if(h&&d.isRowStyleFirst(h)){d.toggleRowTableCls(h,d.tableOverFirstCls,true)}d.callParent(arguments)},onRowSelect:function(d){var e=this,h=e.beforeSelectedItemCls;e.addRowCls(d,e.selectedItemCls);if(e.isRowStyleFirst(d)){e.toggleRowTableCls(d,e.tableSelectedFirstCls,true);if(d>0){e.removeRowCls(d-1,h)}}else{e.addRowCls(d-1,h)}},onRowDeselect:function(c){var d=this;d.removeRowCls(c,[d.selectedItemCls,d.focusedItemCls]);if(d.isRowStyleFirst(c)){d.toggleRowTableCls(c,[d.tableFocusedFirstCls,d.tableSelectedFirstCls],false)}else{d.removeRowCls(c-1,[d.beforeFocusedItemCls,d.beforeSelectedItemCls])}},onCellSelect:function(c){var d=this.getCellByPosition(c);if(d){d.addCls(this.selectedCellCls)}},onCellDeselect:function(c){var d=this.getCellByPosition(c,true);if(d){Ext.fly(d).removeCls(this.selectedCellCls)}},getCellByPosition:function(h,e){if(h){var l=this.getNode(h.row,true),j=this.ownerCt.getColumnManager().getHeaderAtIndex(h.column);if(j&&l){return Ext.fly(l).down(this.getCellSelector(j),e)}}return false},getFocusEl:function(){return this.focusEl},onRowFocus:function(j,e,h){var l=this;if(e){l.addRowCls(j,l.focusedItemCls);if(l.isRowStyleFirst(j)){l.toggleRowTableCls(j,l.tableFocusedFirstCls,true)}else{l.addRowCls(j-1,l.beforeFocusedItemCls)}if(!h){l.focusRow(j)}}else{l.removeRowCls(j,l.focusedItemCls);if(l.isRowStyleFirst(j)){l.toggleRowTableCls(j,l.tableFocusedFirstCls,false)}else{l.removeRowCls(j-1,l.beforeFocusedItemCls)}}if((Ext.isIE6||Ext.isIE7)&&!l.ownerCt.rowLines){l.repaintRow(j)}},focusRow:function(l,h,m){var n=this,j,o=n.getFocusTask();if(h){o.delay(Ext.isNumber(h)?h:10,n.focusRow,n,[l,false,m]);return}if(m&&this.getEl().contains(Ext.Element.getActiveElement())){return}o.cancel();if(n.isVisible(true)&&(l=n.getNode(l,true))){n.scrollRowIntoView(l);j=n.getRecord(l);n.selModel.setLastFocused(j);n.doFocus(l);n.fireEvent("rowfocus",j,l,n.indexInStore(l))}},scrollRowIntoView:function(c){c=this.getNode(c,true);if(c){Ext.fly(c).scrollIntoView(this.el,false)}},focusCell:function(h,n){var l=this,j,m=l.getFocusTask();if(n){m.delay(Ext.isNumber(n)?n:10,l.focusCell,l,[h,false]);return}m.cancel();if(l.isVisible(true)&&(j=l.getCellByPosition(h))){l.scrollCellIntoView(j);l.doFocus(l.getNode(h.row,true));l.fireEvent("cellfocus",h.record,j,h)}},doFocus:function(e){var l=this,h=Ext.isIE,j;if(h){j=l.el.getScrollLeft();l.ignoreScroll=true}(l.focusEl=Ext.get(e)).focus();if(h){l.el.setScrollLeft(j);l.ignoreScroll=false}},scrollCellIntoView:function(c){if(c.row!=null&&c.column!=null){c=this.getCellByPosition(c)}if(c){Ext.fly(c).scrollIntoView(this.el)}},scrollByDelta:function(h,d){d=d||"scrollTop";var e=this.el.dom;e[d]=(e[d]+=h)},isDataRow:function(c){return Ext.fly(c).hasCls(Ext.baseCSSPrefix+"grid-data-row")},syncRowHeights:function(l,j){l=Ext.get(l);j=Ext.get(j);l.dom.style.height=j.dom.style.height="";var n=this,m=n.rowTpl,h=l.dom.offsetHeight,o=j.dom.offsetHeight;if(h!==o){while(m){if(m.syncRowHeights){if(m.syncRowHeights(l,j)===false){break}}m=m.nextTpl}h=l.dom.offsetHeight;o=j.dom.offsetHeight;if(h!==o){l=l.down("[data-recordId]")||l;j=j.down("[data-recordId]")||j;if(l&&j){l.dom.style.height=j.dom.style.height="";h=l.dom.offsetHeight;o=j.dom.offsetHeight;if(h>o){l.setHeight(h);j.setHeight(h)}else{if(o>h){l.setHeight(o);j.setHeight(o)}}}}}},onIdChanged:function(l,m,n,q,j){var o=this,p;if(o.viewReady){p=o.getNodeById(j);if(p){p.setAttribute("data-recordId",m.internalId);p.id=o.getRowId(m)}}},onUpdate:function(N,Q,H,C){var y=this,F=y.rowTpl,B,R,J,I,G,A,z,O,E,D,K,P,x,M,S;if(y.viewReady){R=y.getNodeByRecord(Q,false);if(R){E=y.overItemCls;D=y.beforeOverItemCls;K=y.focusedItemCls;P=y.beforeFocusedItemCls;x=y.selectedItemCls;M=y.beforeSelectedItemCls;B=Ext.fly(R,"_internal");I=y.createRowElement(Q,y.dataSource.data.indexOf(Q));if(B.hasCls(E)){Ext.fly(I).addCls(E)}if(B.hasCls(D)){Ext.fly(I).addCls(D)}if(B.hasCls(K)){Ext.fly(I).addCls(K)}if(B.hasCls(P)){Ext.fly(I).addCls(P)}if(B.hasCls(x)){Ext.fly(I).addCls(x)}if(B.hasCls(M)){Ext.fly(I).addCls(M)}S=y.ownerCt.getVisibleColumnManager().getColumns();if(Ext.isIE9m&&R.mergeAttributes){R.mergeAttributes(I,true)}else{G=I.attributes;A=G.length;for(O=0;O<A;O++){z=G[O].name;if(z!=="id"){R.setAttribute(z,G[O].value)}}}if(S.length&&(J=y.getNode(R,true))){y.updateColumns(Q,J,y.getNode(I,true),S,C)}while(F){if(F.syncContent){if(F.syncContent(R,I)===false){break}}F=F.nextTpl}y.fireEvent("itemupdate",Q,y.store.indexOf(Q),R);y.refreshSize()}}},updateColumns:function(K,M,G,N,z){var v=this,F,y,x,I,D=N.length,C,J,O,E,H,A=v.editingPlugin||(v.lockingPartner&&v.ownerCt.ownerLockable.view.editingPlugin),B=A&&A.editing,w=v.getCellSelector();if(M.mergeAttributes){M.mergeAttributes(G,true)}else{F=G.attributes;y=F.length;for(I=0;I<y;I++){x=F[I].name;if(x!=="id"){M.setAttribute(x,F[I].value)}}}for(C=0;C<D;C++){J=N[C];if(v.shouldUpdateCell(K,J,z)){w=v.getCellSelector(J);O=Ext.DomQuery.selectNode(w,M);E=Ext.DomQuery.selectNode(w,G);if(B){Ext.fly(O).syncContent(E)}else{H=O.parentNode;H.insertBefore(E,O);H.removeChild(O)}}}},shouldUpdateCell:function(h,m,n){if(m.hasCustomRenderer||!n){return true}if(n){var j=n.length,o,l;for(o=0;o<j;++o){l=n[o];if(l===m.dataIndex||l===h.idProperty){return true}}}return false},refresh:function(){var c=this;c.callParent(arguments);c.headerCt.setSortState();if(c.el&&c.headerCt&&!c.ownerCt.hideHeaders&&c.headerCt.tooNarrow&&!c.all.getCount()){c.el.createChild({role:"presentation",style:"position:absolute;height:1px;width:1px;left:"+(c.headerCt.getTableWidth()-1)+"px"})}c.refreshSelection()},refreshSelection:function(){var l=this,h=l.selModel,m,j,n;if(h.isRowModel){m=h.selected.items;j=m.length;for(n=0;n<j;n++){l.onRowSelect(l.indexOf(l.getNode(m[n])))}}l.selModel.onLastFocusChanged(null,l.selModel.lastFocused,true)},processItemEvent:function(C,H,v,z){x=this;if(Ext.isIE&&z.type==="mouseup"&&!z.within(x.el)){return false}if(this.indexInStore(H)!==-1){var x,u=z.getTarget(x.getCellSelector(),H),w,G=x.statics().EventMap,B=x.getSelectionModel(),y=z.type,F=x.features,A=F.length,E,e,t,D;if(y=="keydown"&&!u&&B.getCurrentPosition){u=x.getCellByPosition(B.getCurrentPosition(),true)}if(u){if(!u.parentNode){return false}D=x.getHeaderByCell(u);w=x.ownerCt.getColumnManager().getHeaderIndex(D)}else{w=-1}e=x.fireEvent("uievent",y,x,u,v,w,z,C,H);if((e===false||x.callParent(arguments)===false)){if(B.onVetoUIEvent){B.onVetoUIEvent(y,x,u,v,w,z,C,H)}return false}for(E=0;E<A;++E){t=F[E];if(t.wrapsItem){if(t.vetoEvent(C,H,v,z)===false){x.processSpecialEvent(z);return false}}}if(y=="mouseover"||y=="mouseout"){return true}if(!u){return true}return !((x["onBeforeCell"+G[y]](u,w,C,H,v,z)===false)||(x.fireEvent("beforecell"+y,x,u,w,C,H,v,z)===false)||(x["onCell"+G[y]](u,w,C,H,v,z)===false)||(x.fireEvent("cell"+y,x,u,w,C,H,v,z)===false))}else{this.processSpecialEvent(z);return false}},processSpecialEvent:function(u){var q=this,y=q.features,s=y.length,p=u.type,x,e,w,v,z,t,A=q.ownerCt;q.callParent(arguments);if(p=="mouseover"||p=="mouseout"){return}for(x=0;x<s;x++){e=y[x];if(e.hasFeatureEvent){v=u.getTarget(e.eventSelector,q.getTargetEl());if(v){w=e.eventPrefix;z=e.getFireEventArgs("before"+w+p,q,v,u);t=e.getFireEventArgs(w+p,q,v,u);if((q.fireEvent.apply(q,z)===false)||(A.fireEvent.apply(A,z)===false)||(q.fireEvent.apply(q,t)===false)||(A.fireEvent.apply(A,t)===false)){return false}}}}return true},onCellMouseDown:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,expandToFit:function(c){this.autoSizeColumn(c)},autoSizeColumn:function(c){if(Ext.isNumber(c)){c=this.getGridColumns[c]}if(c){if(c.isGroupHeader){c.autoSize();return}delete c.flex;c.setWidth(this.getMaxContentWidth(c))}},getMaxContentWidth:function(t){var q=this,m=q.el.query(t.getCellInnerSelector()),v=t.getWidth(),u=0,s=m.length,w=q.body.select(q.getColumnSizerSelector(t)),o=Math.max,p=0,n;if(s>0){if(Ext.supports.ScrollWidthInlinePaddingBug){p+=q.getCellPaddingAfter(m[0])}if(q.columnLines){p+=Ext.fly(m[0].parentNode).getBorderWidth("lr")}}w.setWidth(1);t.titleEl.setStyle("text-overflow","clip");n=t.textEl.dom.offsetWidth+t.titleEl.getPadding("lr");t.titleEl.setStyle("text-overflow","");for(;u<s;u++){n=o(n,m[u].scrollWidth)}n+=p;n=o(n,40);w.setWidth(v);return n},getPositionByEvent:function(m){var n=this,e=m.getTarget(n.cellSelector),o=m.getTarget(n.itemSelector),j=n.getRecord(o),l=n.getHeaderByCell(e);return n.getPosition(j,l)},getHeaderByCell:function(d){if(d){var c=d.className.match(this.cellRe);if(c&&c[1]){return this.ownerCt.getVisibleColumnManager().getHeaderById(c[1])}}return false},walkCells:function(w,v,z,u,G,J){if(!w){return false}var y=this,I=w.row,D=w.column,x=y.dataSource.getCount(),B=y.ownerCt.getColumnManager(),E=y.ownerCt.getVisibleColumnManager(),H=B.getHeaderIndex(E.getFirst()),A=B.getHeaderIndex(E.getLast()),e=I,C=D,F=B.getHeaderAtIndex(D);if(!F||F.hidden||!x){return false}z=z||{};v=v.toLowerCase();switch(v){case"right":if(D===A){if(u||I===x-1){return false}if(!z.ctrlKey){e=y.walkRows(I,1);if(e!==I){C=H}}}else{if(!z.ctrlKey){C=B.getHeaderIndex(E.getNextSibling(F))}else{C=A}}break;case"left":if(D===H){if(u||I===0){return false}if(!z.ctrlKey){e=y.walkRows(I,-1);if(e!==I){C=A}}}else{if(!z.ctrlKey){C=B.getHeaderIndex(E.getPreviousSibling(F))}else{C=H}}break;case"up":if(I===0){return false}else{if(!z.ctrlKey){e=y.walkRows(I,-1)}else{e=y.walkRows(-1,1)}}break;case"down":if(I===x-1){return false}else{if(!z.ctrlKey){e=y.walkRows(I,1)}else{e=y.walkRows(x,-1)}}break}if(G&&G.call(J||y,{row:e,column:C})!==true){return false}C=B.getHeaderAtIndex(C);return new Ext.grid.CellContext(y).setPosition(e,C)},walkRows:function(o,w){var t=this,p=t.dataSource,s=0,m=o,v,u=(w<0)?0:(p.buffered?p.getTotalCount():p.getCount())-1,q=u?1:-1,n=o;do{if(u?n>=u:n<=u){return m||u}n+=q;if((v=Ext.fly(t.getNode(n,true)))&&v.isVisible(true)){s+=q;m=n}}while(s!==w);return n},walkRecs:function(x,y){var s=this,o=s.dataSource,q=0,n=x,w,u=(y<0)?0:(o.buffered?o.getTotalCount():o.getCount())-1,p=u?1:-1,t=o.indexOf(x),v;do{if(u?t>=u:t<=u){return n}t+=p;v=o.getAt(t);if(!v.isCollapsedPlaceholder&&(w=Ext.fly(s.getNodeByRecord(v,true)))&&w.isVisible(true)){q+=p;n=v}}while(q!==y);return n},getFirstVisibleRowIndex:function(){var h=this,d=(h.dataSource.buffered?h.dataSource.getTotalCount():h.dataSource.getCount()),e=h.indexOf(h.all.first())-1;do{e+=1;if(e===d){return}}while(!Ext.fly(h.getNode(e,true)).isVisible(true));return e},getLastVisibleRowIndex:function(){var c=this,d=c.indexOf(c.all.last());do{d-=1;if(d===-1){return}}while(!Ext.fly(c.getNode(d,true)).isVisible(true));return d},getHeaderCt:function(){return this.headerCt},getPosition:function(d,c){return new Ext.grid.CellContext(this).setPosition(d,c)},beforeDestroy:function(){var c=this;if(c.rendered){c.el.removeAllListeners()}c.callParent(arguments)},onDestroy:function(){var j=this,l=j.featuresMC,h,e;if(l){for(e=0,h=l.getCount();e<h;++e){l.getAt(e).destroy()}}j.featuresMC=null;this.callParent(arguments)},onReplace:function(n,m,u,t){var p=this,q=p.selModel,s,l,o;p.callParent(arguments);p.doStripeRows(m);if(p.rendered&&q.isRowModel&&!t[0].isCollapsedPlaceholder){s=m+t.length;l=q.isRowSelected(s);o=p.indexOf(q.lastFocused)===(s);if(l||o){p.onRowDeselect(m)}if(l){p.onRowSelect(s)}if(q.isRowSelected(m)){p.onRowSelect(m)}}p.selModel.onLastFocusChanged(null,p.selModel.lastFocused,true)},onAdd:function(n,t,q){var o=this,l=o.selModel,m,s,p;o.callParent(arguments);o.doStripeRows(q);if(o.rendered&&l.isRowModel&&!t[0].isCollapsedPlaceholder){m=q+t.length;s=l.isRowSelected(m);p=o.indexOf(l.lastFocused)===(m);if(s||p){o.onRowDeselect(q)}if(s){o.onRowSelect(m)}if(l.isRowSelected(q)){o.onRowSelect(q)}}o.selModel.onLastFocusChanged(null,o.selModel.lastFocused,true)},onRemove:function(w,v,s){var n=this,p,q=n.selModel,o=s.length,u=0,m=0,t;n.callParent(arguments);n.doStripeRows(s[0]);if(n.rendered&&q.isRowModel&&!v[0].isCollapsedPlaceholder){for(;u<o;u++,m++){p=s[u]-m;t=n.store.getAt(p);n.onRowDeselect(p);if(q.isRowSelected(t)&&n.getNode(t)){n.onRowSelect(p)}}}q.onLastFocusChanged(null,q.lastFocused,true)},doStripeRows:function(j,l){var p=this,o,m,q,n;if(p.rendered&&p.stripeRows){o=p.getNodes(j,l);for(q=0,m=o.length;q<m;q++){n=o[q];n.className=n.className.replace(p.rowClsRe," ");j++;if(j%2===0){n.className+=(" "+p.altRowCls)}}}},repaintRow:function(j){var l=this.getNode(j),e,h;if(l){e=l.childNodes;h=e.length;while(h--){e[h].className=e[h].className}}},getRowStyleTableEl:function(c){var d=this;if(!c.tagName){c=this.getNode(c)}return(d.hasActiveFeature()?Ext.fly(c):this.el).down("table."+Ext.baseCSSPrefix+"grid-table")},toggleRowTableCls:function(l,h,o){var m=this,n,j;if(!l.tagName){l=this.getNode(l)}j=m.isGrouping?Ext.fly(l):this.el;if(j){n=j.down("table."+Ext.baseCSSPrefix+"grid-table")}if(n){n[o?"addCls":"removeCls"](h)}},isRowStyleFirst:function(h){var d=this,e;if(h===-1){return false}if(!h.tagName){e=h;h=this.getNode(h)}else{e=d.indexOf(h)}return(!e||d.hasActiveFeature()&&h&&Ext.fly(h).hasCls(Ext.baseCSSPrefix+"grid-group-row"))},hasActiveFeature:function(){return(this.isGrouping&&this.store.isGrouped())||this.isRowWrapped},getCellPaddingAfter:function(c){return Ext.fly(c).getPadding("r")},hasVerticalScroll:function(){var d=this,c;if(d.ownerCt.isLocked||!d.scrollFlags.y){return false}c=d.el.down("table");if(!c){return false}return this.getHeight()<c.getHeight()}},1,["tableview"],["component","box","dataview","tableview"],{component:true,box:true,dataview:true,tableview:true},["widget.tableview"],0,[Ext.view,"Table"],0));Ext.define("Ext.grid.plugin.BufferedRendererTableView",{override:"Ext.view.Table",onReplace:function(h,m,j,n){var o=this,l=o.bufferedRenderer;if(o.rendered&&l){l.onReplace(h,m,j,n)}else{o.callParent(arguments)}},onAdd:function(h,j,n){var m=this,l=m.bufferedRenderer;if(m.rendered&&l){l.onReplace(h,n,[],j)}else{m.callParent([h,j,n])}},onRemove:function(q,j,n,l,p){var o=this,m=o.bufferedRenderer;if(o.rendered&&m){if(p){m.onReplace(q,n[0],j,[])}else{m.refreshView()}}else{o.callParent([q,j,n])}}});(Ext.cmd.derive("Ext.grid.View",Ext.view.Table,{stripeRows:true,autoScroll:true},0,["gridview"],["component","box","dataview","tableview","gridview"],{component:true,box:true,dataview:true,tableview:true,gridview:true},["widget.gridview"],0,[Ext.grid,"View"],0));(Ext.cmd.derive("Ext.grid.Panel",Ext.panel.Table,{alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"gridview",lockable:false,rowLines:true},0,["grid","gridpanel"],["component","box","container","panel","tablepanel","gridpanel","grid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true},["widget.grid","widget.gridpanel"],0,[Ext.grid,"Panel",Ext.list,"ListView",Ext,"ListView",Ext.grid,"GridPanel"],0));(Ext.cmd.derive("Ext.grid.RowEditorButtons",Ext.container.Container,{frame:true,shrinkWrap:true,position:"bottom",constructor:function(h){var m=this,j=h.rowEditor,l=Ext.baseCSSPrefix,n=j.editingPlugin;h=Ext.apply({baseCls:l+"grid-row-editor-buttons",defaults:{xtype:"button",ui:j.buttonUI,scope:n,flex:1,minWidth:Ext.panel.Panel.prototype.minButtonWidth},items:[{cls:l+"row-editor-update-button",itemId:"update",handler:n.completeEdit,text:j.saveBtnText,disabled:j.updateButtonDisabled},{cls:l+"row-editor-cancel-button",itemId:"cancel",handler:n.cancelEdit,text:j.cancelBtnText}]},h);m.callParent([h]);m.addClsWithUI(m.position)},setButtonPosition:function(j){var o=this,l=this.rowEditor,m=l.getHeight(),p=l.body,q="",n="";o.removeClsWithUI(o.position);o.position=j;o.addClsWithUI(j);if(j==="top"){q=(m-p.getBorderWidth("t"))+"px"}else{n=(m-p.getBorderWidth("b"))+"px"}o.el.setStyle({top:n,bottom:q})},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this.position},getFrameInfo:function(){var c=this.callParent();c.top=true;return c}},1,["roweditorbuttons"],["component","box","container","roweditorbuttons"],{component:true,box:true,container:true,roweditorbuttons:true},["widget.roweditorbuttons"],0,[Ext.grid,"RowEditorButtons"],0));(Ext.cmd.derive("Ext.grid.RowEditor",Ext.form.Panel,{saveBtnText:"Update",cancelBtnText:"Cancel",errorsText:"Errors",dirtyText:"You need to commit or cancel your changes",lastScrollLeft:0,lastScrollTop:0,border:false,errorCls:Ext.baseCSSPrefix+"grid-row-editor-errors-item",buttonUI:"default",hideMode:"offsets",initComponent:function(){var j=this,e=j.editingPlugin.grid,h=Ext.container.Container,l;j.cls=Ext.baseCSSPrefix+"grid-editor "+Ext.baseCSSPrefix+"grid-row-editor";j.layout={type:"hbox",align:"middle"};j.lockable=e.lockable;if(j.lockable){j.items=[j.lockedColumnContainer=new h({id:e.id+"-locked-editor-cells",layout:{type:"hbox",align:"middle"},margin:"0 1 0 0"}),j.normalColumnContainer=new h({flex:1,id:e.id+"-normal-editor-cells",layout:{type:"hbox",align:"middle"}})]}else{j.lockedColumnContainer=j.normalColumnContainer=j}j.callParent(arguments);if(j.fields){j.addFieldsForColumn(j.fields,true);j.insertColumnEditor(j.fields);delete j.fields}j.mon(j.hierarchyEventSource,{scope:j,show:j.repositionIfVisible});l=j.getForm();l.trackResetOnLoad=true;l.on("validitychange",j.onValidityChange,j)},onGridResize:function(){var n=this,l=n.getClientWidth(),j=n.editingPlugin.grid,m=j.body,h=n.getFloatingButtons();n.setLocalX(m.getOffsetsTo(j)[0]+m.getBorderWidth("l")-j.el.getBorderWidth("l"));n.setWidth(l);h.setLocalX((l-h.getWidth())/2)},syncAllFieldWidths:function(){var c=this;Ext.Array.each(c.query("[isEditorComponent]"),function(a){if(a.column.isVisible()){c.onColumnShow(a.column)}},c)},syncFieldWidth:function(d){var h=d.getEditor(),e;h._marginWidth=(h._marginWidth||h.el.getMargin("lr"));e=d.getWidth()-h._marginWidth;h.setWidth(e);if(h.xtype==="displayfield"){h.inputWidth=e}},onValidityChange:function(h,d){var e=this;if(e.errorSummary&&e.isVisible()){e[d?"hideToolTip":"showToolTip"]()}e.updateButton(d)},updateButton:function(c){var d=this.floatingButtons;if(d){d.child("#update").setDisabled(!c)}else{this.updateButtonDisabled=!c}},afterRender:function(){var j=this,l=j.editingPlugin,e=l.grid,h=e.lockable?e.normalGrid.view:e.view;j.callParent(arguments);j.scrollingView=h;j.scrollingViewEl=h.el;h.mon(j.scrollingViewEl,"scroll",j.onViewScroll,j);j.mon(j.el,{click:Ext.emptyFn,stopPropagation:true});j.mon(e,{resize:j.onGridResize,scope:j});j.el.swallowEvent(["keypress","keydown"]);j.fieldScroller=j.normalColumnContainer.layout.innerCt;j.fieldScroller.dom.style.overflow="hidden";j.fieldScroller.on({scroll:j.onFieldContainerScroll,scope:j});j.initKeyNav();j.mon(l.view,{beforerefresh:j.onBeforeViewRefresh,refresh:j.onViewRefresh,itemremove:j.onViewItemRemove,scope:j});j.preventReposition=true;j.syncAllFieldWidths();delete j.preventReposition},initKeyNav:function(){var c=this,d=c.editingPlugin;c.keyNav=new Ext.util.KeyNav(c.el,{enter:d.onEnter,esc:d.onEscKey,scope:d})},onBeforeViewRefresh:function(d){var h=this,e=d.el.dom;if(h.el.dom.parentNode===e){e.removeChild(h.el.dom)}},onViewRefresh:function(h){var l=this,e=l.context,j;if(e&&(j=h.getNode(e.record,true))){e.row=j;l.reposition();if(l.tooltip&&l.tooltip.isVisible()){l.tooltip.setTarget(e.row)}}else{l.editingPlugin.cancelEdit()}},onViewItemRemove:function(e,d){var h=this.context;if(h&&e===h.record){this.editingPlugin.cancelEdit()}},onViewScroll:function(){var t=this,l=t.editingPlugin.view.el,s=t.scrollingViewEl,q=s.dom.scrollTop,n=s.getScrollLeft(),o=n!==t.lastScrollLeft,m=q!==t.lastScrollTop,p;t.lastScrollTop=q;t.lastScrollLeft=n;if(t.isVisible()){p=Ext.getDom(t.context.row.id);if(p&&l.contains(p)){if(m){t.context.row=p;t.reposition(null,true);if((t.tooltip&&t.tooltip.isVisible())||t.hiddenTip){t.repositionTip()}t.syncEditorClip()}}else{t.setLocalY(-400)}}if(t.rendered&&o){t.syncFieldsHorizontalScroll()}},syncFieldsHorizontalScroll:function(){this.fieldScroller.setScrollLeft(this.lastScrollLeft)},onFieldContainerScroll:function(){this.scrollingViewEl.setScrollLeft(this.fieldScroller.getScrollLeft())},onColumnResize:function(d,e){var h=this;if(h.rendered&&!h.editingPlugin.reconfiguring){h.onGridResize();h.onViewScroll();if(!d.isGroupHeader){h.syncFieldWidth(d);h.repositionIfVisible()}}},onColumnHide:function(c){if(!this.editingPlugin.reconfiguring&&!c.isGroupHeader){c.getEditor().hide();this.repositionIfVisible()}},onColumnShow:function(d){var c=this;if(c.rendered&&!c.editingPlugin.reconfiguring&&!d.isGroupHeader&&d.getEditor){d.getEditor().show();c.syncFieldWidth(d);if(!c.preventReposition){this.repositionIfVisible()}}},onColumnMove:function(y,C,q){var s=this,v=y.isLocked(),B=s.editingPlugin.grid,p=v?B.lockedGrid.getColumnManager():B.getColumnManager(),u=v?s.lockedColumnContainer:s.normalColumnContainer,z,w,t,A,x;if(y.isGroupHeader){Ext.suspendLayouts();A=q>C;x=A?1:0;z=y.getGridColumns();for(w=0,t=z.length;w<t;++w){y=z[w];q=p.getHeaderIndex(y);if(A){++x}this.setColumnEditor(y,q+x,u)}Ext.resumeLayouts(true)}else{q=p.getHeaderIndex(y);this.setColumnEditor(y,q,u)}},setColumnEditor:function(d,e,h){this.addFieldsForColumn(d);h.insert(e,d.getEditor())},onColumnAdd:function(c){if(c.isGroupHeader){c=c.getGridColumns()}this.addFieldsForColumn(c);this.insertColumnEditor(c);this.preventReposition=false},insertColumnEditor:function(s){var o=this,p=o.editingPlugin,t=p.grid,q=t.lockable,n,m,l;if(Ext.isArray(s)){for(l=0,m=s.length;l<m;l++){o.insertColumnEditor(s[l])}return}if(!s.getEditor){return}n=s.isLocked()?o.lockedColumnContainer:o.normalColumnContainer;n.insert(t.getColumnManager().getHeaderIndex(s),s.getEditor());o.needsSyncFieldWidths=true},destroyColumnEditor:function(n){var m=this,l,j,h;if(Ext.isArray(n)){for(h=0,j=n.length;h<j;h++){m.removeColumnEditor(n[h])}return}if(n.hasEditor()&&(l=n.getEditor())){l.destroy()}},getFloatingButtons:function(){var c=this,d=c.floatingButtons;if(!d){c.floatingButtons=d=new Ext.grid.RowEditorButtons({rowEditor:c})}return d},repositionIfVisible:function(h){var c=this,e=c.view;if(h&&(h==c||!h.el.isAncestor(e.el))){return}if(c.isVisible()&&e.isVisible(true)){c.reposition()}},getRefOwner:function(){return this.editingPlugin.grid},getRefItems:function(d){var h=this,e;if(h.lockable){e=[h.lockedColumnContainer];e.push.apply(e,h.lockedColumnContainer.getRefItems(d));e.push(h.normalColumnContainer);e.push.apply(e,h.normalColumnContainer.getRefItems(d))}else{e=h.callParent(arguments)}e.push.apply(e,h.getFloatingButtons().getRefItems(d));return e},reposition:function(n,q){var p=this,v=p.context,m=v&&Ext.get(v.row),u=0,w,t,s,o;if(m&&Ext.isElement(m.dom)){s=p.syncButtonPosition(p.getScrollDelta());if(!p.editingPlugin.grid.rowLines){u=-parseInt(m.first().getStyle("border-bottom-width"),10)}w=p.calculateLocalRowTop(m);t=p.calculateEditorTop(w)+u;if(!q){o=function(){if(s){p.scrollingViewEl.scrollBy(0,s,true)}p.focusContextCell()}}p.syncEditorClip();if(n){p.animate(Ext.applyIf({to:{top:t},duration:n.duration||125,callback:o},n))}else{p.setLocalY(t);if(o){o()}}}},getScrollDelta:function(){var l=this,m=l.scrollingViewEl.dom,n=l.context,h=l.body,j=0;if(n){j=Ext.fly(n.row).getOffsetsTo(m)[1]-h.getBorderPadding().beforeY;if(j>0){j=Math.max(j+l.getHeight()+l.floatingButtons.getHeight()-m.clientHeight-h.getBorderWidth("b"),0)}}return j},calculateLocalRowTop:function(c){var d=this.editingPlugin.grid;return Ext.fly(c).getOffsetsTo(d)[1]-d.el.getBorderWidth("t")+this.lastScrollTop},calculateEditorTop:function(c){return c-this.body.getBorderPadding().beforeY-this.lastScrollTop},getClientWidth:function(){var h=this,d=h.editingPlugin.grid,e;if(h.lockable){e=d.lockedGrid.getWidth()+d.normalGrid.view.el.dom.clientWidth-1}else{e=d.view.el.dom.clientWidth}return e},getEditor:function(d){var c=this;if(Ext.isNumber(d)){return c.query("[isEditorComponent]")[d]}else{if(d.isHeader&&!d.isGroupHeader){return d.getEditor()}}},addFieldsForColumn:function(o,j){var m=this,h,n,l;if(Ext.isArray(o)){for(h=0,n=o.length;h<n;h++){m.addFieldsForColumn(o[h],j)}return}if(o.getEditor){l=o.getEditor(null,m.getDefaultFieldCfg());if(o.align==="right"){l.fieldStyle="text-align:right"}if(o.xtype==="actioncolumn"){l.fieldCls+=" "+Ext.baseCSSPrefix+"form-action-col-field"}if(m.isVisible()&&m.context){if(l.is("displayfield")){m.renderColumnData(l,m.context.record,o)}else{l.suspendEvents();l.setValue(m.context.record.get(o.dataIndex));l.resumeEvents()}}if(o.hidden){m.onColumnHide(o)}else{if(o.rendered&&!j){m.onColumnShow(o)}}}},getDefaultFieldCfg:function(){return{xtype:"displayfield",getModelData:function(){return null}}},loadRecord:function(q){var m=this,u=m.getForm(),p=u.getFields(),n=p.items,t=n.length,s,o,l;for(s=0;s<t;s++){n[s].suspendEvents()}u.loadRecord(q);for(s=0;s<t;s++){n[s].resumeEvents()}if(u.hasInvalidField()===u.wasValid){delete u.wasValid}l=u.isValid();if(m.errorSummary){if(l){m.hideToolTip()}else{m.showToolTip()}}m.updateButton(l);o=m.query(">displayfield");t=o.length;for(s=0;s<t;s++){m.renderColumnData(o[s],q)}},renderColumnData:function(v,z,E){var x=this,G=x.editingPlugin.grid,C=G.headerCt,w=x.scrollingView,t=w.dataSource,B=E||v.column,u=z.get(B.dataIndex),y=B.editRenderer||B.renderer,s=(B.usingDefaultRenderer&&!B.scope)?B:B.scope,F,D,A;if(y){F={tdCls:"",style:""};D=t.indexOf(z);A=C.getHeaderIndex(B);u=y.call(s||C.ownerCt,u,F,z,D,A,t,w)}v.setRawValue(u);v.resetOriginalValue()},beforeEdit:function(){var d=this,c;if(d.isVisible()&&d.errorSummary&&!d.autoCancel&&d.isDirty()){c=d.getScrollDelta();if(c){d.scrollingViewEl.scrollBy(0,c,true)}d.showToolTip();return false}},startEdit:function(j,l){var m=this,h=m.editingPlugin,n=h.grid,o=m.context=h.context;if(!m.rendered){m.width=m.getClientWidth();m.render(n.el,n.el.dom.firstChild);m.getFloatingButtons().render(m.el);m.onViewScroll()}else{m.syncFieldsHorizontalScroll()}o.grid.getSelectionModel().select(j);if(m.isVisible()){m.reposition(true)}else{m.show()}m.onGridResize();m.loadRecord(j)},syncButtonPosition:function(m){var h=this,j=h.getFloatingButtons(),n=h.scrollingViewEl.dom,l=this.getScrollDelta()-(n.scrollHeight-n.scrollTop-n.clientHeight);if(l>0){if(!h._buttonsOnTop){j.setButtonPosition("top");h._buttonsOnTop=true}m=0}else{if(h._buttonsOnTop!==false){j.setButtonPosition("bottom");h._buttonsOnTop=false}}return m},syncEditorClip:function(){var d=this,h=d.getScrollDelta(),e;if(h){d.isOverflowing=true;e=d.floatingButtons.getHeight();if(h>0){d.clipBottom(Math.max(d.getHeight()-h+e,-e))}else{if(h<0){h=Math.abs(h);d.clipTop(Math.max(h,0))}}}else{if(d.isOverflowing){d.clearClip();d.isOverflowing=false}}},focusContextCell:function(){var d=this.context.column,c;if(!d.isDestroyed){c=this.getEditor(d);if(c&&c.focus){c.focus()}}},cancelEdit:function(){var l=this,m=l.getForm(),j=m.getFields(),h=j.items,n=h.length,o;l.hide();m.clearInvalid();for(o=0;o<n;o++){h[o].suspendEvents()}m.reset();for(o=0;o<n;o++){h[o].resumeEvents()}},completeEdit:function(){var c=this,d=c.getForm();if(!d.isValid()){return false}d.updateRecord(c.context.record);c.hide();return true},onShow:function(){var c=this;c.callParent(arguments);if(c.needsSyncFieldWidths){c.suspendLayouts();c.syncAllFieldWidths();c.resumeLayouts(true)}delete c.needsSyncFieldWidths;c.reposition()},onHide:function(){var c=this;c.callParent(arguments);if(c.tooltip){c.hideToolTip()}if(c.context){c.context.view.focusRow(c.context.record);c.context=null}},isDirty:function(){var c=this,d=c.getForm();return d.isDirty()},getToolTip:function(){return this.tooltip||(this.tooltip=new Ext.tip.ToolTip({cls:Ext.baseCSSPrefix+"grid-row-editor-errors",title:this.errorsText,autoHide:false,closable:true,closeAction:"disable",anchor:"left",anchorToTarget:false}))},hideToolTip:function(){var d=this,c=d.getToolTip();if(c.rendered){c.disable()}d.hiddenTip=false},showToolTip:function(){var d=this,c=d.getToolTip();c.showAt([0,0]);c.update(d.getErrors());d.repositionTip();c.enable()},repositionTip:function(){var q=this,p=q.getToolTip(),w=q.context,n=Ext.get(w.row),o=q.scrollingViewEl,u=o.dom.clientHeight,t=q.lastScrollTop,s=t+u,x=n.getHeight(),y=n.getOffsetsTo(q.context.view.body)[1],v=y+x;if(v>t&&y<s){p.showAt(p.getAlignToXY(o,"tl-tr",[15,n.getOffsetsTo(o)[1]]));q.hiddenTip=false}else{p.hide();q.hiddenTip=true}},getErrors:function(){var m=this,l=[],j=m.query(">[isFormField]"),n=j.length,h;for(h=0;h<n;h++){l=l.concat(Ext.Array.map(j[h].getErrors(),m.createErrorListItem))}if(!l.length&&!m.autoCancel&&m.isDirty()){l[0]=m.createErrorListItem(m.dirtyText)}return'<ul class="'+Ext.plainListCls+'">'+l.join("")+"</ul>"},createErrorListItem:function(c){return'<li class="'+this.errorCls+'">'+c+"</li>"},beforeDestroy:function(){Ext.destroy(this.floatingButtons,this.tooltip);this.callParent()},clipBottom:function(c){this.el.setStyle("clip","rect(-1000px auto "+c+"px auto)")},clipTop:function(c){this.el.setStyle("clip","rect("+c+"px auto 1000px auto)")},clearClip:function(c){this.el.setStyle("clip",Ext.isIE8m||Ext.isIEQuirks?"rect(-1000px auto 1000px auto)":"auto")}},0,["roweditor"],["component","box","container","panel","form","roweditor"],{component:true,box:true,container:true,panel:true,form:true,roweditor:true},["widget.roweditor"],0,[Ext.grid,"RowEditor"],0));(Ext.cmd.derive("Ext.view.DropZone",Ext.dd.DropZone,{indicatorCls:Ext.baseCSSPrefix+"grid-drop-indicator",indicatorHtml:['<div class="',Ext.baseCSSPrefix,'grid-drop-indicator-left" role="presentation"></div>','<div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-right" role="presentation"></div>'].join(""),constructor:function(d){var c=this;Ext.apply(c,d);if(!c.ddGroup){c.ddGroup="view-dd-zone-"+c.view.id}c.callParent([c.view.el])},fireViewEvent:function(){var c=this,d;c.lock();d=c.view.fireEvent.apply(c.view,arguments);c.unlock();return d},getTargetFromEvent:function(m){var n=m.getTarget(this.view.getItemSelector()),q,s,e,p,l,o;if(!n){q=m.getPageY();for(p=0,s=this.view.getNodes(),l=s.length;p<l;p++){e=s[p];o=Ext.fly(e).getBox();if(q<=o.bottom){return e}}}return n},getIndicator:function(){var c=this;if(!c.indicator){c.indicator=new Ext.Component({ariaRole:"presentation",html:c.indicatorHtml,cls:c.indicatorCls,ownerCt:c.view,floating:true,shadow:false})}return c.indicator},getPosition:function(m,h){var j=m.getXY()[1],e=Ext.fly(h).getRegion(),l;if((e.bottom-j)>=(e.bottom-e.top)/2){l="before"}else{l="after"}return l},containsRecordAtOffset:function(p,j,n){if(!j){return false}var l=this.view,q=l.indexOf(j),o=l.getNode(q+n,true),m=o?l.getRecord(o):null;return m&&Ext.Array.contains(p,m)},positionIndicator:function(t,s,q){var p=this,n=p.view,o=p.getPosition(q,t),e=n.getRecord(t),u=s.records,m;if(!Ext.Array.contains(u,e)&&(o=="before"&&!p.containsRecordAtOffset(u,e,-1)||o=="after"&&!p.containsRecordAtOffset(u,e,1))){p.valid=true;if(p.overRecord!=e||p.currentPosition!=o){m=Ext.fly(t).getY()-n.el.getY()-1;if(o=="after"){m+=Ext.fly(t).getHeight()}p.getIndicator().setWidth(Ext.fly(n.el).getWidth()).showAt(0,m);p.overRecord=e;p.currentPosition=o}}else{p.invalidateDrop()}},invalidateDrop:function(){if(this.valid){this.valid=false;this.getIndicator().hide()}},onNodeOver:function(m,h,j,l){var e=this;if(!Ext.Array.contains(l.records,e.view.getRecord(m))){e.positionIndicator(m,l,j)}return e.valid?e.dropAllowed:e.dropNotAllowed},notifyOut:function(m,h,j,l){var e=this;e.callParent(arguments);e.overRecord=e.currentPosition=null;e.valid=false;if(e.indicator){e.indicator.hide()}},onContainerOver:function(j,l,m){var n=this,e=n.view,o=e.dataSource.getCount();if(o){n.positionIndicator(e.all.last(),m,l)}else{n.overRecord=n.currentPosition=null;n.getIndicator().setWidth(Ext.fly(e.el).getWidth()).showAt(0,0);n.valid=true}return n.dropAllowed},onContainerDrop:function(e,h,d){return this.onNodeDrop(e,null,h,d)},onNodeDrop:function(n,l,o,p){var q=this,s=false,e={wait:false,processDrop:function(){q.invalidateDrop();q.handleNodeDrop(p,q.overRecord,q.currentPosition);s=true;q.fireViewEvent("drop",n,p,q.overRecord,q.currentPosition)},cancelDrop:function(){q.invalidateDrop();s=true}},m=false;if(q.valid){m=q.fireViewEvent("beforedrop",n,p,q.overRecord,q.currentPosition,e);if(e.wait){return}if(m!==false){if(!s){e.processDrop()}}}return m},destroy:function(){Ext.destroy(this.indicator);delete this.indicator;this.callParent()}},1,0,0,0,0,0,[Ext.view,"DropZone"],0));(Ext.cmd.derive("Ext.grid.ViewDropZone",Ext.view.DropZone,{indicatorHtml:'<div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-left" role="presentation"></div><div class="'+Ext.baseCSSPrefix+'grid-drop-indicator-right" role="presentation"></div>',indicatorCls:Ext.baseCSSPrefix+"grid-drop-indicator",handleNodeDrop:function(t,q,p){var m=this.view,l=m.getStore(),n,u,s,o;if(t.copy){u=t.records;t.records=[];for(s=0,o=u.length;s<o;s++){t.records.push(u[s].copy())}}else{t.view.store.remove(t.records,t.view===m)}if(q&&p){n=l.indexOf(q);if(p!=="before"){n++}l.insert(n,t.records)}else{l.add(t.records)}m.getSelectionModel().select(t.records)}},0,0,0,0,0,0,[Ext.grid,"ViewDropZone"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderResizer",Ext.AbstractPlugin,{disabled:false,config:{dynamic:false},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1000,wResizeCursor:"col-resize",eResizeCursor:"col-resize",init:function(c){this.headerCt=c;c.on("render",this.afterHeaderRender,this,{single:true})},destroy:function(){var c=this.tracker;if(c){delete c.onBeforeStart;delete c.onStart;delete c.onDrag;delete c.onEnd;c.destroy();this.tracker=null}},afterHeaderRender:function(){var d=this,h=this.headerCt,e=h.el;h.mon(e,"mousemove",this.onHeaderCtMouseMove,this);d.markerOwner=d.ownerGrid=d.headerCt.up("tablepanel");if(d.markerOwner.ownerLockable){d.markerOwner=d.markerOwner.ownerLockable}d.tracker=new Ext.dd.DragTracker({disabled:d.disabled,onBeforeStart:Ext.Function.bind(d.onBeforeStart,d),onStart:Ext.Function.bind(d.onStart,d),onDrag:Ext.Function.bind(d.onDrag,d),onEnd:Ext.Function.bind(d.onEnd,d),tolerance:3,autoStart:300,el:e})},onHeaderCtMouseMove:function(o){var e=this,l,j,m,n;if(e.headerCt.dragging||e.disabled){if(e.activeHd){e.activeHd.el.dom.style.cursor="";delete e.activeHd}}else{l=o.getTarget("."+e.colHeaderCls,3,true);if(l){j=Ext.getCmp(l.id);if(j.isOnRightEdge(o)){if(e.headerCt.visibleColumnManager.getColumns().length===1&&e.headerCt.forceFit){return}m=j}else{if(j.isOnLeftEdge(o)){n=e.headerCt.visibleColumnManager.getColumns();m=n[Ext.Array.indexOf(n,j)-1];if(!m&&e.ownerGrid.ownerLockable&&!e.ownerGrid.isLocked){n=e.ownerGrid.ownerLockable.lockedGrid.headerCt.visibleColumnManager.getColumns();m=n[n.length-1]}}}if(m){if(m.isGroupHeader){n=m.getGridColumns();m=n[n.length-1]}if(m&&!(m.fixed||(m.resizable===false))){e.activeHd=m;j.el.dom.style.cursor=e.eResizeCursor;if(j.triggerEl){j.triggerEl.dom.style.cursor=e.eResizeCursor}}}else{j.el.dom.style.cursor="";if(j.triggerEl){j.triggerEl.dom.style.cursor=""}e.activeHd=null}}}},onBeforeStart:function(c){var d=this;d.dragHd=d.activeHd;if(!!d.dragHd&&!d.headerCt.dragging){d.xDelta=d.dragHd.getX()+d.dragHd.getWidth()-d.tracker.getXY()[0];this.tracker.constrainTo=this.getConstrainRegion();return true}else{d.headerCt.dragging=false;return false}},getConstrainRegion:function(){var n=this,j=n.dragHd.el,m=0,o,l,h=n.headerCt.getWidth()-n.headerCt.visibleColumnManager.getColumns().length*n.minColWidth;if(n.headerCt.forceFit){o=n.dragHd.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(o&&n.headerInSameGrid(o)){m=o.getWidth()-n.minColWidth}}else{if((l=n.dragHd.up("tablepanel")).isLocked){m=n.dragHd.up("[scrollerOwner]").getTargetEl().getWidth()-l.getWidth()-(l.ownerLockable.normalGrid.visibleColumnManager.getColumns().length*n.minColWidth+Ext.getScrollbarSize().width)}else{m=h-j.getWidth()}}return n.adjustConstrainRegion(j.getRegion(),0,m-n.xDelta,0,n.minColWidth-n.xDelta)},onStart:function(t){var s=this,u=s.dragHd,x=u.el.getWidth(),v=u.getOwnerHeaderCt(),o,p,w,y,q,e;s.headerCt.dragging=true;s.origWidth=x;if(!s.dynamic){w=s.markerOwner;if(w.frame&&w.resizable){s.gridOverflowSetting=w.el.dom.style.overflow;w.el.dom.style.overflow="hidden"}o=s.getLeftMarkerX(w);y=w.getLhsMarker();q=w.getRhsMarker();e=s.ownerGrid.body.getHeight()+v.getHeight();p=v.getOffsetsTo(w)[1]-w.el.getBorderWidth("t");y.setLocalY(p);q.setLocalY(p);y.setHeight(e);q.setHeight(e);s.setMarkerX(y,o);s.setMarkerX(q,o+x)}},onDrag:function(c){var d=this;if(d.dynamic){d.doResize()}else{d.setMarkerX(d.getMovingMarker(d.markerOwner),d.calculateDragX(d.markerOwner))}},getMovingMarker:function(c){return c.getRhsMarker()},onEnd:function(d){this.headerCt.dragging=false;if(this.dragHd){if(!this.dynamic){var c=this.headerCt.up("tablepanel");if(c.ownerLockable){c=c.ownerLockable}if("gridOverflowSetting" in this){c.el.dom.style.overflow=this.gridOverflowSetting}this.setMarkerX(c.getLhsMarker(),-9999);this.setMarkerX(c.getRhsMarker(),-9999)}this.doResize()}this.onHeaderCtMouseMove(d)},doResize:function(){var l=this,e=l.dragHd,h,j=l.tracker.getOffset("point");if(e&&j[0]){if(e.flex){delete e.flex}Ext.suspendLayouts();l.adjustColumnWidth(j[0]);if(l.headerCt.forceFit){h=e.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(h&&!l.headerInSameGrid(h)){h=null}if(h){delete h.flex;h.setWidth(h.getWidth()-j[0])}}Ext.resumeLayouts(true)}},headerInSameGrid:function(c){var d=this.dragHd.up("tablepanel");return !!c.up(d)},disable:function(){this.disabled=true;if(this.tracker){this.tracker.disable()}},enable:function(){this.disabled=false;if(this.tracker){this.tracker.enable()}},calculateDragX:function(c){return this.tracker.getXY("point")[0]+this.xDelta-c.getX()-c.el.getBorderWidth("l")},getLeftMarkerX:function(c){return this.dragHd.getX()-c.getX()-c.el.getBorderWidth("l")-1},setMarkerX:function(c,d){c.setLocalX(d)},adjustConstrainRegion:function(j,m,l,h,n){return j.adjust(m,l,h,n)},adjustColumnWidth:function(c){this.dragHd.setWidth(this.origWidth+c)}},0,0,0,0,["plugin.gridheaderresizer"],0,[Ext.grid.plugin,"HeaderResizer"],0));(Ext.cmd.derive("Ext.grid.header.DragZone",Ext.dd.DragZone,{colHeaderSelector:"."+Ext.baseCSSPrefix+"column-header",colInnerSelector:"."+Ext.baseCSSPrefix+"column-header-inner",maxProxyWidth:120,constructor:function(c){var d=this;d.headerCt=c;d.ddGroup=d.getDDGroup();d.autoGroup=true;d.callParent([c.el]);d.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(e){if(e.getTarget(this.colInnerSelector)){var j=e.getTarget(this.colHeaderSelector),h,l;if(j){h=Ext.getCmp(j.id);if(!this.headerCt.dragging&&h.draggable&&!(h.isOnLeftEdge(e)||h.isOnRightEdge(e))){l=document.createElement("div");l.role="presentation";l.innerHTML=Ext.getCmp(j.id).text;return{ddel:l,header:h}}}}return false},onBeforeDrag:function(){return !(this.headerCt.dragging||this.disabled)},onInitDrag:function(){this.headerCt.dragging=true;this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=false;this.callParent(arguments)},afterRepair:function(){this.callParent();this.headerCt.dragging=false},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=true},enable:function(){this.disabled=false}},1,0,0,0,0,0,[Ext.grid.header,"DragZone"],0));(Ext.cmd.derive("Ext.grid.header.DropZone",Ext.dd.DropZone,{colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(c){var d=this;d.headerCt=c;d.ddGroup=d.getDDGroup();d.autoGroup=true;d.callParent([c.el])},destroy:function(){this.callParent();Ext.destroy(this.topIndicator,this.bottomIndicator)},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(c){return c.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){if(!this.topIndicator){this.topIndicator=Ext.DomHelper.append(Ext.getBody(),{role:"presentation",cls:"col-move-top",html:"&#160;"},true);this.indicatorXOffset=Math.floor((this.topIndicator.dom.offsetWidth+1)/2)}return this.topIndicator},getBottomIndicator:function(){if(!this.bottomIndicator){this.bottomIndicator=Ext.DomHelper.append(Ext.getBody(),{role:"presentation",cls:"col-move-bottom",html:"&#160;"},true)}return this.bottomIndicator},getLocation:function(l,e){var h=l.getXY()[0],m=Ext.fly(e).getRegion(),j;if((m.right-h)<=(m.right-m.left)/2){j="after"}else{j="before"}return{pos:j,header:Ext.getCmp(e.id),node:e}},positionIndicator:function(e,J,D){var A=this,I=e.header,S=A.getLocation(D,J),P=S.header,T=S.pos,U,E,N,G,F,W,V,O,M,B,C,K,Q,H,R;if(P===A.lastTargetHeader&&T===A.lastDropPos){return}U=I.nextSibling("gridcolumn:not([hidden])");E=I.previousSibling("gridcolumn:not([hidden])");A.lastTargetHeader=P;A.lastDropPos=T;if(!P.draggable&&T==="before"&&P.getIndex()===0){return false}e.dropLocation=S;if((I!==P)&&((T==="before"&&U!==P)||(T==="after"&&E!==P))&&!P.isDescendantOf(I)){K=Ext.dd.DragDropManager.getRelated(A);Q=K.length;H=0;for(;H<Q;H++){R=K[H];if(R!==A&&R.invalidateDrop){R.invalidateDrop()}}A.valid=true;N=A.getTopIndicator();G=A.getBottomIndicator();if(T==="before"){F="bc-tl";W="tc-bl"}else{F="bc-tr";W="tc-br"}V=N.getAlignToXY(P.el,F);O=G.getAlignToXY(P.el,W);M=A.headerCt.el;B=M.getX()-A.indicatorXOffset;C=M.getX()+M.getWidth();V[0]=Ext.Number.constrain(V[0],B,C);O[0]=Ext.Number.constrain(O[0],B,C);N.setXY(V);G.setXY(O);N.show();G.show()}else{A.invalidateDrop()}},invalidateDrop:function(){this.valid=false;this.hideIndicators()},onNodeOver:function(u,q,s,t){var p=this,n=t.header,w,e,v,o;if(t.header.el.dom===u){w=false}else{t.isLock=t.isUnlock=t.crossPanel=false;e=p.getLocation(s,u).header;w=(n.ownerCt===e.ownerCt);if(!w&&(!n.ownerCt.sealed&&!e.ownerCt.sealed)){w=true;v=n.up("tablepanel");o=e.up("tablepanel");if(v!==o){t.crossPanel=true;t.isLock=o.isLocked&&!v.isLocked;t.isUnlock=!o.isLocked&&v.isLocked;if((t.isUnlock&&n.lockable===false)||(t.isLock&&!n.isLockable())){w=false}}}}if(w){p.positionIndicator(t,u,s)}else{p.valid=false}return p.valid?p.dropAllowed:p.dropNotAllowed},hideIndicators:function(){var c=this;c.getTopIndicator().hide();c.getBottomIndicator().hide();c.lastTargetHeader=c.lastDropPos=null},onNodeOut:function(){this.hideIndicators()},getNestedHeader:function(j,e){var h=j.items,l;if(j.isGroupHeader&&h.length){l=!e?"first":"last";j=this.getNestedHeader(h[l](),e)}return j},onNodeDrop:function(C,J,y,e){if(this.valid){var x=this,B=e.header,G=e.dropLocation,z=G.pos,E=G.header,v=B.ownerCt,M=E.ownerCt,I=x.headerCt.visibleColumnManager,A=I.getHeaderIndex(B),K,D,w,F,H;if(e.isLock||e.isUnlock){F=v.up("[scrollerOwner]");K=M.items.indexOf(E);if(z==="after"){K++}if(e.isLock){F.lock(B,K,M)}else{F.unlock(B,K,M)}}else{K=z==="after"?I.getHeaderIndex(x.getNestedHeader(E,1))+1:I.getHeaderIndex(x.getNestedHeader(E,0)),x.invalidateDrop();H=B.getWidth();Ext.suspendLayouts();v.isDDMoveInGrid=M.isDDMoveInGrid=!e.crossPanel;w="move"+z.charAt(0).toUpperCase()+z.substr(1);M[w](B,E);if(K>=0&&!(E.isGroupHeader&&!E.items.length)&&A!==K){D=B.isGroupHeader?B.query(":not([hidden]):not([isGroupHeader])").length:1;if((A<=K)&&D>1){K-=D}M.getOwnerHeaderCt().grid.view.moveColumn(A,K,D)}(v.ownerCt||v).fireEvent("columnmove",v,B,A,K);v.isDDMoveInGrid=M.isDDMoveInGrid=false;if(M.isGroupHeader&&!v.isGroupHeader){if(v!==M){B.savedFlex=B.flex;delete B.flex;B.width=H}}else{if(!v.isGroupHeader){if(B.savedFlex){B.flex=B.savedFlex;delete B.width}}}Ext.resumeLayouts(true)}}}},1,0,0,0,0,0,[Ext.grid.header,"DropZone"],0));(Ext.cmd.derive("Ext.grid.plugin.HeaderReorderer",Ext.AbstractPlugin,{init:function(c){this.headerCt=c;c.on({render:this.onHeaderCtRender,single:true,scope:this})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){var c=this;c.dragZone=new Ext.grid.header.DragZone(c.headerCt);c.dropZone=new Ext.grid.header.DropZone(c.headerCt);if(c.disabled){c.dragZone.disable()}},enable:function(){this.disabled=false;if(this.dragZone){this.dragZone.enable()}},disable:function(){this.disabled=true;if(this.dragZone){this.dragZone.disable()}}},0,0,0,0,["plugin.gridheaderreorderer"],0,[Ext.grid.plugin,"HeaderReorderer"],0));(Ext.cmd.derive("Ext.grid.header.Container",Ext.container.Container,{border:true,baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",detachOnRemove:false,defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",menuSortAscCls:Ext.baseCSSPrefix+"hmenu-sort-asc",menuSortDescCls:Ext.baseCSSPrefix+"hmenu-sort-desc",menuColsIcon:Ext.baseCSSPrefix+"cols-icon",ddLock:false,dragging:false,sortable:true,enableColumnHide:true,initComponent:function(){var c=this;c.headerCounter=0;c.plugins=c.plugins||[];c.defaults=c.defaults||{};if(!c.isColumn){if(c.enableColumnResize){c.resizer=new Ext.grid.plugin.HeaderResizer();c.plugins.push(c.resizer)}if(c.enableColumnMove){c.reorderer=new Ext.grid.plugin.HeaderReorderer();c.plugins.push(c.reorderer)}}if(c.isColumn&&!c.isGroupHeader){if(!c.items||c.items.length===0){c.isContainer=false;c.layout={type:"container",calculate:Ext.emptyFn}}}else{c.layout=Ext.apply({type:"gridcolumn",align:"stretch"},c.initialConfig.layout);c.defaults.columnLines=c.columnLines;if(!c.isGroupHeader){c.isRootHeader=true;c.columnManager=new Ext.grid.ColumnManager(false,c);c.visibleColumnManager=new Ext.grid.ColumnManager(true,c);if(c.grid){c.grid.columnManager=c.columnManager;c.grid.visibleColumnManager=c.visibleColumnManager}}else{c.visibleColumnManager=new Ext.grid.ColumnManager(true,c);c.columnManager=new Ext.grid.ColumnManager(false,c)}}Ext.applyIf(c.defaults,{sortable:c.sortable});c.menuTask=new Ext.util.DelayedTask(c.updateMenuDisabledState,c);c.callParent();c.addEvents("columnresize","headerclick","headercontextmenu","headertriggerclick","columnmove","columnhide","columnshow","columnschanged","sortchange","menucreate")},initEvents:function(){var c=this;c.callParent();if(!c.isColumn&&!c.isGroupHeader){c.mon(c.el,{click:c.onHeaderCtEvent,dblclick:c.onHeaderCtEvent,contextmenu:c.onHeaderCtEvent,mouseover:c.onHeaderCtMouseOver,mouseout:c.onHeaderCtMouseOut,scope:c})}},onHeaderCtEvent:function(p,l){var q=this,m=p.getTarget("."+Ext.grid.column.Column.prototype.baseCls),n,o,e;if(m&&!q.ddLock){n=Ext.getCmp(m.id);if(n){o=n[n.clickTargetName];if(p.within(o)){if(p.type==="click"){e=n.onTitleElClick(p,o);if(e){q.onHeaderTriggerClick(n,p,l)}else{q.onHeaderClick(n,p,l)}}else{if(p.type==="contextmenu"){q.onHeaderContextMenu(n,p,l)}else{if(p.type==="dblclick"&&n.resizable){n.onTitleElDblClick(p,o.dom)}}}}}}},onHeaderCtMouseOver:function(e,h){var j,l,m;if(!e.within(this.el,true)){j=e.getTarget("."+Ext.grid.column.Column.prototype.baseCls);l=j&&Ext.getCmp(j.id);if(l){m=l[l.clickTargetName];if(e.within(m)){l.onTitleMouseOver(e,m.dom)}}}},onHeaderCtMouseOut:function(o,q){var p="."+Ext.grid.column.Column.prototype.baseCls,e=o.getTarget(p),l=o.getRelatedTarget(p),m,n;if(e!==l){if(e){m=Ext.getCmp(e.id);if(m){n=m[m.clickTargetName];m.onTitleMouseOut(o,n.dom)}}if(l){m=Ext.getCmp(l.id);if(m){n=m[m.clickTargetName];m.onTitleMouseOver(o,n.dom)}}}},isLayoutRoot:function(){if(this.hiddenHeaders){return false}return this.callParent()},getOwnerHeaderCt:function(){var c=this;return c.isRootHeader?c:c.up("[isRootHeader]")},onDestroy:function(){var c=this;if(c.menu){c.menu.un("hide",c.onMenuHide,c)}c.menuTask.cancel();c.callParent();Ext.destroy(c.visibleColumnManager,c.columnManager,c.menu);c.columnManager=c.visibleColumnManager=null},applyColumnsState:function(v){if(!v||!v.length){return}var o=this,q=o.items.items,s=q.length,u=0,x=v.length,p,w,y,t,c=false;for(p=0;p<x;p++){y=v[p];for(t=s;t--;){w=q[t];if(w.getStateId&&w.getStateId()==y.id){if(u!==t){o.items.insert(u,o.items.getAt(t));c=true}if(w.applyColumnState){w.applyColumnState(y)}++u;break}}}if(c){o.purgeHeaderCtCache(o)}},getColumnsState:function(){var d=this,e=[],h;d.items.each(function(a){h=a.getColumnState&&a.getColumnState();if(h){e.push(h)}});return e},onAdd:function(c){var d=this;if(!c.headerId){c.headerId=c.initialConfig.id||Ext.id(null,"header-")}if(!c.getStateId()){c.stateId=c.initialConfig.id||("h"+(++d.headerCounter))}d.callParent(arguments);d.onHeadersChanged(c,d.isDDMoveInGrid)},move:function(e,j){var l=this,h=l.items.items[e];h.visibleFromIdx=l.getOwnerHeaderCt().visibleColumnManager.indexOf(h);l.callParent(arguments)},onMove:function(m,s,o){var p=this,q=p.getOwnerHeaderCt(),l=q.visibleColumnManager,n=1,t;p.onHeadersChanged(m,true);t=l.indexOf(m);if(t>=m.visibleFromIdx){t++}p.callParent(arguments);if(m.isGroupHeader){n=m.visibleColumnManager.getColumns().length}q.onHeaderMoved(m,n,m.visibleFromIdx,t)},onRemove:function(h){var c=this,e=c.ownerCt;c.callParent(arguments);if(!c.destroying){if(!c.isDDMoveInGrid){c.onHeadersChanged(h,false)}if(c.isGroupHeader&&!c.isStackedTargetHeaderParent&&e&&!c.items.getCount()){c.detachComponent(h);Ext.suspendLayouts();e.remove(c);Ext.resumeLayouts(true)}}},onHeadersChanged:function(j,h){var c,l=this.getOwnerHeaderCt();this.purgeHeaderCtCache(this);if(l){l.onColumnsChanged();if(!j.isGroupHeader){c=l.ownerCt;if(c&&!h){c.onHeadersChanged(l,j)}}}},onHeaderMoved:function(l,j,o,m){var n=this,h=n.ownerCt;if(n.rendered){if(h&&h.onHeaderMove){h.onHeaderMove(n,l,j,o,m)}n.fireEvent("columnmove",n,l,o,m)}},onColumnsChanged:function(){var l=this,j=l.menu,h,e;if(l.rendered){l.fireEvent("columnschanged",l);if(j&&(h=j.child("#columnItemSeparator"))){e=j.child("#columnItem"),h.destroy();e.destroy()}}},applyDefaults:function(c){var d;if(c&&!c.isComponent&&c.xtype=="rownumberer"){d=c}else{d=this.callParent(arguments);if(!c.isGroupHeader&&!("width" in d)&&!d.flex){d.width=this.defaultWidth}}return d},setSortState:function(){var h=this.up("[store]").store,n=this.visibleColumnManager.getColumns(),j=n.length,o,l,m;for(o=0;o<j;o++){l=n[o];m=h.sorters.get(l.getSortParam());l.setSortState(m)}},getHeaderMenu:function(){var c=this.getMenu(),d;if(c){d=c.child("#columnItem");if(d){return d.menu}}return null},onHeaderVisibilityChange:function(l,m){var h=this,n=h.getHeaderMenu(),j;h.purgeHeaderCtCache(l.ownerCt);if(n){j=h.getMenuItemForHeader(n,l);if(j){j.setChecked(m,true)}if(n.isVisible()){h.menuTask.delay(50)}}},updateMenuDisabledState:function(o){var p=this,s=p.query(":not([hidden])"),t,m=s.length,q,l,n;if(!o){o=p.getMenu()}for(t=0;t<m;++t){q=s[t];l=p.getMenuItemForHeader(o,q);if(l){n=q.isHideable()?"enable":"disable";if(l.menu){n+="CheckChange"}l[n]()}}},getMenuItemForHeader:function(d,c){return c?d.down("menucheckitem[headerId="+c.id+"]"):null},onHeaderShow:function(j){var l=this,e=l.ownerCt,h=j.lastHiddenHeader;if(!e){return}if(l.forceFit){delete l.flex}if(h&&!j.query("[hidden=false]").length){h.show();j.lastHiddenHeader=null}l.onHeaderVisibilityChange(j,true);e.onHeaderShow(l,j);l.fireEvent("columnshow",l,j);l.fireEvent("columnschanged",this)},onHeaderHide:function(h){var d=this,e=d.ownerCt;if(!e){return}d.onHeaderVisibilityChange(h,false);e.onHeaderHide(d,h);d.fireEvent("columnhide",d,h);d.fireEvent("columnschanged",this)},tempLock:function(){this.ddLock=true;Ext.Function.defer(function(){this.ddLock=false},200,this)},onHeaderResize:function(j,h){var l=this,e=l.ownerCt;if(e){e.onHeaderResize(l,j,h)}l.fireEvent("columnresize",l,j,h)},onHeaderClick:function(h,d,e){h.fireEvent("headerclick",this,h,d,e);this.fireEvent("headerclick",this,h,d,e)},onHeaderContextMenu:function(h,d,e){h.fireEvent("headercontextmenu",this,h,d,e);this.fireEvent("headercontextmenu",this,h,d,e)},onHeaderTriggerClick:function(j,l,h){var e=this;if(j.fireEvent("headertriggerclick",e,j,l,h)!==false&&e.fireEvent("headertriggerclick",e,j,l,h)!==false){e.showMenuBy(h,j)}},showMenuBy:function(h,l){var n=this.getMenu(),m=n.down("#ascItem"),o=n.down("#descItem"),j;n.activeHeader=n.ownerCmp=n.ownerButton=l;l.setMenuActive(true);j=l.sortable?"enable":"disable";if(m){m[j]()}if(o){o[j]()}n.showBy(h,"tl-bl?")},onMenuHide:function(c){c.activeHeader.setMenuActive(false)},moveHeader:function(d,c){this.tempLock();this.move(d,c)},purgeHeaderCtCache:function(c){while(c){c.purgeCache();if(c.isRootHeader){return}c=c.ownerCt}},purgeCache:function(){var h=this,d=h.visibleColumnManager,e=h.columnManager;h.gridVisibleColumns=h.gridDataColumns=h.hideableColumns=null;if(d){d.invalidate();e.invalidate()}},getMenu:function(){var c=this;if(!c.menu){c.menu=new Ext.menu.Menu({hideOnParentHide:false,items:c.getMenuItems(),listeners:{beforeshow:c.beforeMenuShow,hide:c.onMenuHide,scope:c}});c.fireEvent("menucreate",c,c.menu)}return c.menu},beforeMenuShow:function(l){var n=this,h=l.child("#columnItem"),j,m,l;if(!h){j=n.enableColumnHide?n.getColumnMenu(n):null;m=n.sortable?2:0;if(j&&j.length){l.insert(m,[{itemId:"columnItemSeparator",xtype:"menuseparator"},{itemId:"columnItem",text:n.columnsText,iconCls:n.menuColsIcon,menu:{items:j},hideOnClick:false}])}}n.updateMenuDisabledState(n.menu);if(!l.rendered){l.render(this.el.up("{overflow=auto}")||document.body)}},getMenuItems:function(){var h=this,d=[],e=h.enableColumnHide?h.getColumnMenu(h):null;if(h.sortable){d=[{itemId:"ascItem",text:h.sortAscText,iconCls:h.menuSortAscCls,handler:h.onSortAscClick,scope:h},{itemId:"descItem",text:h.sortDescText,iconCls:h.menuSortDescCls,handler:h.onSortDescClick,scope:h}]}if(e&&e.length){if(h.sortable){d.push({itemId:"columnItemSeparator",xtype:"menuseparator"})}d.push({itemId:"columnItem",text:h.columnsText,iconCls:h.menuColsIcon,menu:e,hideOnClick:false})}return d},onSortAscClick:function(){var c=this.getMenu(),d=c.activeHeader;d.sort("ASC")},onSortDescClick:function(){var c=this.getMenu(),d=c.activeHeader;d.sort("DESC")},getColumnMenu:function(n){var q=[],j=0,o,l=n.query(">gridcolumn[hideable]"),m=l.length,p;for(;j<m;j++){o=l[j];p=new Ext.menu.CheckItem({text:o.menuText||o.text,checked:!o.hidden,hideOnClick:false,headerId:o.id,menu:o.isGroupHeader?this.getColumnMenu(o):undefined,checkHandler:this.onColumnCheckChange,scope:this});q.push(p)}return q},onColumnCheckChange:function(e,d){var h=Ext.getCmp(e.headerId);if(h.rendered){h[d?"show":"hide"]()}else{h.hidden=!d}},getColumnCount:function(){return this.getGridColumns().length},getTableWidth:function(){var l=0,e=this.getVisibleGridColumns(),j=e.length,h;for(h=0;h<j;h++){l+=e[h].getCellWidth()||0}return l},getVisibleGridColumns:function(){if(this.gridVisibleColumns){return this.gridVisibleColumns}var o=this.getGridColumns(),h=[],j=o.length,m=this.getOwnerHeaderCt(),n,l;for(n=0;n<j;n++){l=o[n];if(!l.hidden&&!l.isColumnHidden(m)){h[h.length]=l}}this.gridVisibleColumns=h;return h},isColumnHidden:function(c){var d=this.getRefOwner();while(d&&d!==c){if(d.hidden){return true}d=d.getRefOwner()}return false},getGridColumns:function(n,u){if(!n&&this.gridDataColumns){return this.gridDataColumns}var o=this,l=n||[],p,t,q,m,s;u=u||o.hidden;if(o.items){p=o.items.items;for(t=0,q=p.length;t<q;t++){m=p[t];if(m.isGroupHeader){m.visibleIndex=l.length;m.getGridColumns(l,u)}else{m.hiddenAncestor=u;l.push(m)}}}if(!n){o.gridDataColumns=l}if(!n&&q){for(t=0,q=l.length;t<q;t++){m=l[t];m.isFirstVisible=m.isLastVisible=false;if(!(m.hidden||m.hiddenAncestor)){if(!s){m.isFirstVisible=true}s=m}}if(s){s.isLastVisible=true}}return l},getHideableColumns:function(){var c=this,d=c.hideableColumns;if(!d){d=c.hideableColumns=c.query("[hideable]")}return d},getHeaderIndex:function(c){if(!this.columnManager){this.columnManager=this.getOwnerHeaderCt().columnManager}return this.columnManager.getHeaderIndex(c)},getHeaderAtIndex:function(c){if(!this.columnManager){this.columnManager=this.getOwnerHeaderCt().columnManager}return this.columnManager.getHeaderAtIndex(c)},getVisibleHeaderClosestToIndex:function(c){if(!this.visibleColumnManager){this.visibleColumnManager=this.getOwnerHeaderCt().visibleColumnManager}return this.visibleColumnManager.getVisibleHeaderClosestToIndex(c)},applyForceFit:function(C){var x=this,w=x.view,H=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,F=false,J=Ext.grid.header.Container.prototype.defaultWidth,I=x.el.getViewSize().width-(w.el.dom.scrollHeight>w.el.dom.clientHeight?Ext.getScrollbarSize().width:0),E=0,y=x.getVisibleGridColumns(),B=C.hidden,z,D,t,A,G;function v(){for(D=0,z=y.length;D<z;D++){t=y[D];if(t===C){continue}t.flex=t.flex||t.width||t.getWidth();E+=t.flex;t.width=null}}function u(){var a;for(D=0,z=y.length;D<z;D++){t=y[D];a=(t===C);if(F&&!a){t.flex=H;t.width=null}else{if(!a){G=t.flex||J;t.flex=Math.max(Math.ceil((G/E)*I),H);t.width=null}}t.setWidth(t.width||t.flex)}}Ext.suspendLayouts();A=(I-((y.length+1)*H));C.flex=null;if(B){G=C.width||C.savedWidth;C.savedWidth=null}else{G=w.getMaxContentWidth(C)}if(G>A){C.width=A;F=true}else{C.width=G;I-=G+J;v()}u();Ext.resumeLayouts(true)},autoSizeColumn:function(c){var d=this.view;if(d){d.autoSizeColumn(c);if(this.forceFit){this.applyForceFit(c)}}}},0,["headercontainer"],["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},["widget.headercontainer"],0,[Ext.grid.header,"Container"],0));(Ext.cmd.derive("Ext.grid.column.Column",Ext.grid.header.Container,{alternateClassName:"Ext.grid.Column",baseCls:Ext.baseCSSPrefix+"column-header",hoverCls:Ext.baseCSSPrefix+"column-header-over",handleWidth:4,ariaRole:"columnheader",sortState:null,possibleSortStates:["ASC","DESC"],childEls:["titleEl","triggerEl","textEl"],noWrap:true,renderTpl:['<div id="{id}-titleEl" role="presentation" {tipMarkup}class="',Ext.baseCSSPrefix,"column-header-inner",'<tpl if="empty"> ',Ext.baseCSSPrefix,'column-header-inner-empty</tpl>">','<span id="{id}-textEl" class="',Ext.baseCSSPrefix,"column-header-text",'{childElCls}">',"{text}","</span>",'<tpl if="!menuDisabled">','<div id="{id}-triggerEl" role="presentation" class="',Ext.baseCSSPrefix,"column-header-trigger",'{childElCls}"></div>',"</tpl>","</div>","{%this.renderContainer(out,values)%}"],dataIndex:null,text:"&#160;",menuText:null,emptyCellText:"&#160;",sortable:true,resizable:true,hideable:true,menuDisabled:false,renderer:false,editRenderer:false,align:"left",draggable:true,tooltipType:"qtip",initDraggable:Ext.emptyFn,tdCls:"",isHeader:true,isColumn:true,ascSortCls:Ext.baseCSSPrefix+"column-header-sort-ASC",descSortCls:Ext.baseCSSPrefix+"column-header-sort-DESC",componentLayout:"columncomponent",groupSubHeaderCls:Ext.baseCSSPrefix+"group-sub-header",groupHeaderCls:Ext.baseCSSPrefix+"group-header",clickTargetName:"titleEl",detachOnRemove:true,initResizable:Ext.emptyFn,initComponent:function(){var d=this,c;if(d.header!=null){d.text=d.header;d.header=null}if(d.columns!=null){d.isGroupHeader=true;d.items=d.columns;d.columns=d.flex=d.width=null;d.cls=(d.cls||"")+" "+d.groupHeaderCls;d.sortable=d.resizable=false;d.align="center"}else{if(d.flex){d.minWidth=d.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth}}d.addCls(Ext.baseCSSPrefix+"column-header-align-"+d.align);c=d.renderer;if(c){if(typeof c=="string"){d.renderer=Ext.util.Format[c]}d.hasCustomRenderer=true}else{if(d.defaultRenderer){d.renderer=d.defaultRenderer;d.usingDefaultRenderer=true}}d.callParent(arguments)},hasVisibleChildColumns:function(){var e=this.items.items,h=e.length,l,j;for(l=0;l<h;++l){j=e[l];if(j.isColumn&&!j.hidden){return true}}return false},onAdd:function(c){if(c.isColumn){c.isSubHeader=true;c.addCls(this.groupSubHeaderCls)}this.callParent([c])},onRemove:function(c){var d=this;if(c.isSubHeader){c.isSubHeader=false;c.removeCls(d.groupSubHeaderCls)}d.callParent([c]);if(!(d.isDestroyed||d.destroying)&&!d.hasVisibleChildColumns()&&(d.isGroupHeader&&!d.ownerCt.down("[isStackedTargetHeaderParent]"))){d.hide()}},initRenderData:function(){var h=this,l="",n=h.tooltip,m=h.text,j=h.tooltipType==="qtip"?"data-qtip":"title";if(!Ext.isEmpty(n)){l=j+'="'+n+'" '}return Ext.applyIf(h.callParent(arguments),{text:m,empty:m==="&#160;"||m===" "||m==="",menuDisabled:h.menuDisabled,tipMarkup:l})},applyColumnState:function(c){var d=this;d.applyColumnsState(c.columns);if(c.hidden!=null){d.hidden=c.hidden}if(c.locked!=null){d.locked=c.locked}if(c.sortable!=null){d.sortable=c.sortable}if(c.width!=null){d.flex=null;d.width=c.width}else{if(c.flex!=null){d.width=null;d.flex=c.flex}}},getColumnState:function(){var m=this,h=m.items.items,j=h?h.length:0,n,o=[],l={id:m.stateId||m.getStateId()};m.savePropsToState(["hidden","sortable","locked","flex","width"],l);if(m.isGroupHeader){for(n=0;n<j;n++){o.push(h[n].getColumnState())}if(o.length){l.columns=o}}if("width" in l){delete l.flex}return l},getStateId:function(){return(this.stateId=this.stateId||this.headerId)},setText:function(c){this.text=c;if(this.rendered){this.textEl.update(c)}},getIndex:function(){return this.isGroupColumn?false:this.getOwnerHeaderCt().getHeaderIndex(this)},getVisibleIndex:function(){return this.isGroupColumn?false:Ext.Array.indexOf(this.getOwnerHeaderCt().getVisibleGridColumns(),this)},beforeRender:function(){var c=this,d=c.up("tablepanel");c.callParent();if(d&&(!c.sortable||d.sortableColumns===false)&&!c.groupable&&!c.lockable&&(d.enableColumnHide===false||!c.getOwnerHeaderCt().getHideableColumns().length)){c.menuDisabled=true}c.protoEl.unselectable()},afterRender:function(){var c=this,d=c.triggerEl;c.callParent(arguments);if(d&&c.self.triggerElWidth===undefined){d.setStyle("display","block");c.self.triggerElWidth=d.getWidth();d.setStyle("display","")}},afterComponentLayout:function(n,j,o,l){var m=this,h=m.getOwnerHeaderCt();m.callParent(arguments);if(h&&(o!=null||m.flex)&&n!==o){h.onHeaderResize(m,n)}},onDestroy:function(){var c=this;Ext.destroy(c.textEl,c.keyNav,c.field);c.keyNav=null;c.callParent(arguments)},onTitleMouseOver:function(){this.titleEl.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleEl.removeCls(this.hoverCls)},onDownKey:function(c){if(this.triggerEl){this.onTitleElClick(c,this.triggerEl.dom||this.el.dom)}},onEnterKey:function(c){this.onTitleElClick(c,this.el.dom)},onTitleElDblClick:function(m,j){var o=this,e,n,l;if(o.isOnLeftEdge(m)){e=o.previousNode("gridcolumn:not([hidden]):not([isGroupHeader])");if(e&&e.getOwnerHeaderCt()===o.getOwnerHeaderCt()){e.autoSize()}}else{if(o.isOnRightEdge(m)){if(o.isGroupHeader&&m.getPoint().isContainedBy(o.layout.innerCt)){n=o.query("gridcolumn:not([hidden]):not([isGroupHeader])");o.getOwnerHeaderCt().autoSizeColumn(n[n.length-1]);return}else{l=o.getOwnerHeaderCt();if(l.visibleColumnManager.getColumns().length===1&&l.forceFit){return}}o.autoSize()}}},autoSize:function(){var h=this,n,l,j,m;if(h.isGroupHeader){n=h.query("gridcolumn:not([hidden]):not([isGroupHeader])");l=n.length;m=this.getOwnerHeaderCt();Ext.suspendLayouts();for(j=0;j<l;j++){m.autoSizeColumn(n[j])}Ext.resumeLayouts(true);return}this.getOwnerHeaderCt().autoSizeColumn(this)},onTitleElClick:function(j,h){var l=this,e;e=l.triggerEl&&(j.target===l.triggerEl.dom||h===l.triggerEl.dom||j.within(l.triggerEl));if(!e&&!l.isOnLeftEdge(j)&&!l.isOnRightEdge(j)||j.getKey()){l.toggleSortState()}return e},processEvent:function(m,e,j,o,n,l){return this.fireEvent.apply(this,arguments)},toggleSortState:function(){var d=this,e,h;if(d.sortable){e=Ext.Array.indexOf(d.possibleSortStates,d.sortState);h=(e+1)%d.possibleSortStates.length;d.sort()}},sort:function(j){var l=this,e=l.up("tablepanel"),h=e.store;if(e.ownerLockable&&h.isNodeStore){h=e.ownerLockable.lockedGrid.store}l.sorting=true;h.sort(l.getSortParam(),j,e.multiColumnSort?"multi":"replace");delete l.sorting},getSortParam:function(){return this.dataIndex},setSortState:function(l){var o=this,n=l&&l.direction,m=o.ascSortCls,h=o.descSortCls,j=o.getOwnerHeaderCt();switch(n){case"DESC":o.addCls(h);o.removeCls(m);break;case"ASC":o.addCls(m);o.removeCls(h);break;default:o.removeCls([m,h])}if(n){j.fireEvent("sortchange",j,o,n)}},isHideable:function(){var c={hideCandidate:this,result:this.hideable};if(c.result){this.ownerCt.bubble(this.hasOtherMenuEnabledChildren,null,[c])}return c.result},hasOtherMenuEnabledChildren:function(e){var d,h;if(!this.isXType("headercontainer")){e.result=false;return false}d=this.query(">:not([hidden]):not([menuDisabled])");h=d.length;if(Ext.Array.contains(d,e.hideCandidate)){h--}if(h){return false}e.hideCandidate=this},isLockable:function(){var c={result:this.lockable!==false};if(c.result){this.ownerCt.bubble(this.hasMultipleVisibleChildren,null,[c])}return c.result},isLocked:function(){return this.locked||!!this.up("[isColumn][locked]","[isRootHeader]")},hasMultipleVisibleChildren:function(c){if(!this.isXType("headercontainer")){c.result=false;return false}if(this.query(">:not([hidden])").length>1){return false}},hide:function(s){var m=this,p=m.getOwnerHeaderCt(),t=m.ownerCt,u,l,n,o,q;if(!p){m.callParent();return m}if(m.rendered&&!m.isVisible()){return m}if(p.forceFit){m.visibleSiblingCount=p.getVisibleGridColumns().length-1;if(m.flex){m.savedWidth=m.getWidth();m.flex=null}}u=t.isGroupHeader;if(u&&!s){n=t.query(">:not([hidden])");if(n.length===1&&n[0]===m){m.ownerCt.hide();t.lastHiddenHeader=m}}Ext.suspendLayouts();m.callParent();p.onHeaderHide(m);Ext.resumeLayouts(true);return m},show:function(t,s){var m=this,p=m.getOwnerHeaderCt(),u=m.ownerCt,n,o,q,l;if(m.isVisible()){return m}if(u.isGroupHeader){u.lastHiddenHeader=null}if(m.rendered){if(p.forceFit){p.applyForceFit(m)}}Ext.suspendLayouts();if(m.isSubHeader&&u.hidden){u.show(false,true)}m.callParent(arguments);u=m.getOwnerHeaderCt();if(u){u.onHeaderShow(m)}Ext.resumeLayouts(true);return m},getCellWidth:function(){var d=this,e,h=true;if(d.rendered&&d.componentLayout&&d.componentLayout.lastComponentSize){e=d.componentLayout.lastComponentSize.width}else{if(d.width){e=d.width}else{if(!d.isColumn){e=d.getTableWidth();h=false}}}if(h&&!Ext.isBorderBox&&d.ownerCt.columnLines){if(d.columnBorderWidth==null&&d.rendered){d.self.prototype.columnBorderWidth=d.el.getBorderWidth("lr")}e-=d.columnBorderWidth}return e},getCellId:function(){return Ext.baseCSSPrefix+"grid-cell-headerId-"+this.getItemId()},getCellSelector:function(){return"."+this.getCellId()},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isOnLeftEdge:function(c){return(c.getXY()[0]-this.getX()<this.handleWidth)},isOnRightEdge:function(c){return(this.getX()+this.getWidth()-c.getXY()[0]<=this.handleWidth)},setMenuActive:function(c){this.titleEl[c?"addCls":"removeCls"](this.headerOpenCls)}},0,["gridcolumn"],["component","box","container","headercontainer","gridcolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true},["widget.gridcolumn"],0,[Ext.grid.column,"Column",Ext.grid,"Column"],0));(Ext.cmd.derive("Ext.grid.column.Action",Ext.grid.column.Column,{alternateClassName:"Ext.grid.ActionColumn",stopSelection:true,actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",menuText:"<i>Actions</i>",sortable:false,innerCls:Ext.baseCSSPrefix+"grid-cell-inner-action-col",actionIconCls:Ext.baseCSSPrefix+"action-col-icon",constructor:function(p){var n=this,j=Ext.apply({},p),q=j.items||n.items||[n],m,o,l;n.origRenderer=j.renderer||n.renderer;n.origScope=j.scope||n.scope;n.renderer=n.scope=j.renderer=j.scope=null;j.items=null;n.callParent([j]);n.items=q;for(o=0,l=q.length;o<l;++o){if(q[o].getClass){m=true;break}}if(n.origRenderer||m){n.hasCustomRenderer=true}},defaultRenderer:function(w,t,E,I,F,x,y){var z=this,D=Ext.baseCSSPrefix,u=z.origScope||z,A=z.items,C=A.length,G=0,v,B,H,J;B=Ext.isFunction(z.origRenderer)?z.origRenderer.apply(u,arguments)||"":"";t.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell";for(;G<C;G++){v=A[G];H=v.disabled||(v.isDisabled?v.isDisabled.call(v.scope||u,y,I,F,v,E):false);J=H?null:(v.tooltip||(v.getTip?v.getTip.apply(v.scope||u,arguments):null));if(!v.hasActionConfiguration){v.stopSelection=z.stopSelection;v.disable=Ext.Function.bind(z.disableAction,z,[G],0);v.enable=Ext.Function.bind(z.enableAction,z,[G],0);v.hasActionConfiguration=true}B+='<img role="button" alt="'+(v.altText||z.altText)+'" src="'+(v.icon||Ext.BLANK_IMAGE_URL)+'" class="'+z.actionIconCls+" "+D+"action-col-"+String(G)+" "+(H?D+"item-disabled":" ")+(Ext.isFunction(v.getClass)?v.getClass.apply(v.scope||u,arguments):(v.iconCls||z.iconCls||""))+'"'+(J?' data-qtip="'+J+'"':"")+" />"}return B},enableAction:function(d,e){var h=this;if(!d){d=0}else{if(!Ext.isNumber(d)){d=Ext.Array.indexOf(h.items,d)}}h.items[d].disabled=false;h.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+d).removeCls(h.disabledCls);if(!e){h.fireEvent("enable",h)}},disableAction:function(d,e){var h=this;if(!d){d=0}else{if(!Ext.isNumber(d)){d=Ext.Array.indexOf(h.items,d)}}h.items[d].disabled=true;h.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+d).addCls(h.disabledCls);if(!e){h.fireEvent("disable",h)}},destroy:function(){delete this.items;delete this.renderer;return this.callParent(arguments)},processEvent:function(y,v,t,E,x,A,C,e){var z=this,B=A.getTarget(),D,s,w,u=(y==="keydown"&&A.getKey()),F;if(y==="mousedown"){return false}if(u&&!Ext.fly(B).findParent(v.getCellSelector())){B=Ext.fly(t).down("."+Ext.baseCSSPrefix+"action-col-icon",true)}if(B&&(D=B.className.match(z.actionIdRe))){s=z.items[parseInt(D[1],10)];F=s.disabled||(s.isDisabled?s.isDisabled.call(s.scope||z.origScope||z,v,E,x,s,C):false);if(s&&!F){if(y=="click"||(u==A.ENTER||u==A.SPACE)){w=s.handler||z.handler;if(w){w.call(s.scope||z.origScope||z,v,E,x,s,A,C,e)}if(s.stopSelection!==false){return false}}}}return z.callParent(arguments)},cascade:function(c,d){c.call(d||this,this)},getRefItems:function(){return[]}},1,["actioncolumn"],["component","box","container","headercontainer","gridcolumn","actioncolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,actioncolumn:true},["widget.actioncolumn"],0,[Ext.grid.column,"Action",Ext.grid,"ActionColumn"],0));(Ext.cmd.derive("Ext.grid.column.Boolean",Ext.grid.column.Column,{alternateClassName:"Ext.grid.BooleanColumn",trueText:"true",falseText:"false",undefinedText:"&#160;",defaultRenderer:function(c){if(c===undefined){return this.undefinedText}if(!c||c==="false"){return this.falseText}return this.trueText}},0,["booleancolumn"],["component","box","container","headercontainer","gridcolumn","booleancolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,booleancolumn:true},["widget.booleancolumn"],0,[Ext.grid.column,"Boolean",Ext.grid,"BooleanColumn"],0));(Ext.cmd.derive("Ext.grid.column.Check",Ext.grid.column.Column,{alternateClassName:["Ext.ux.CheckColumn","Ext.grid.column.CheckColumn"],align:"center",stopSelection:true,tdCls:Ext.baseCSSPrefix+"grid-cell-checkcolumn",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-checkcolumn",clickTargetName:"el",constructor:function(){this.addEvents("beforecheckchange","checkchange");this.scope=this;this.callParent(arguments)},processEvent:function(x,v,q,B,w,z,A,e){var y=this,s=x==="keydown"&&z.getKey(),C=x=="mousedown";if(!y.disabled&&(C||(s==z.ENTER||s==z.SPACE))){var u=y.dataIndex,t=!A.get(u);if(y.fireEvent("beforecheckchange",y,B,t)!==false){A.set(u,t);y.fireEvent("checkchange",y,B,t);if(C){z.stopEvent()}if(!y.stopSelection){v.selModel.selectByPosition({row:B,column:w})}return false}else{return !y.stopSelection}}else{return y.callParent(arguments)}},onEnable:function(){this.callParent(arguments);this._setDisabled(false)},onDisable:function(){this._setDisabled(true)},_setDisabled:function(l){var j=this,h=j.disabledCls,e;e=j.up("tablepanel").el.select(j.getCellSelector());if(l){e.addCls(h)}else{e.removeCls(h)}},renderer:function(e,l){var j=Ext.baseCSSPrefix,h=j+"grid-checkcolumn";if(this.disabled){l.tdCls+=" "+this.disabledCls}if(e){h+=" "+j+"grid-checkcolumn-checked"}return'<img class="'+h+'" src="'+Ext.BLANK_IMAGE_URL+'"/>'}},1,["checkcolumn"],["component","box","container","headercontainer","gridcolumn","checkcolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,checkcolumn:true},["widget.checkcolumn"],0,[Ext.grid.column,"Check",Ext.ux,"CheckColumn",Ext.grid.column,"CheckColumn"],0));(Ext.cmd.derive("Ext.grid.column.Date",Ext.grid.column.Column,{alternateClassName:"Ext.grid.DateColumn",initComponent:function(){if(!this.format){this.format=Ext.Date.defaultFormat}this.callParent(arguments)},defaultRenderer:function(c){return Ext.util.Format.date(c,this.format)}},0,["datecolumn"],["component","box","container","headercontainer","gridcolumn","datecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,datecolumn:true},["widget.datecolumn"],0,[Ext.grid.column,"Date",Ext.grid,"DateColumn"],0));(Ext.cmd.derive("Ext.grid.column.Number",Ext.grid.column.Column,{alternateClassName:"Ext.grid.NumberColumn",format:"0,000.00",defaultRenderer:function(c){return Ext.util.Format.number(c,this.format)}},0,["numbercolumn"],["component","box","container","headercontainer","gridcolumn","numbercolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,numbercolumn:true},["widget.numbercolumn"],0,[Ext.grid.column,"Number",Ext.grid,"NumberColumn"],0));(Ext.cmd.derive("Ext.grid.column.RowNumberer",Ext.grid.column.Column,{alternateClassName:"Ext.grid.RowNumberer",text:"&#160;",width:23,sortable:false,draggable:false,autoLock:true,lockable:false,align:"right",constructor:function(d){var c=this;c.width=c.width;c.callParent(arguments);c.scope=c},beforeRender:function(){var c=this.up("tablepanel").view.findFeature("rowbody");this.callParent(arguments);if(c&&this.ownerCt.items.indexOf(this)===1){c.colSpanDecrement=c.colSpanDecrement+1;this.rowspan=2}},resizable:false,hideable:false,menuDisabled:true,dataIndex:"",cls:Ext.baseCSSPrefix+"row-numberer",tdCls:Ext.baseCSSPrefix+"grid-cell-row-numberer "+Ext.baseCSSPrefix+"grid-cell-special",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-row-numberer",rowspan:undefined,renderer:function(n,v,q,u,s,w,o){var t=this.rowspan,p=w.currentPage,m=o.store.indexOf(q);if(t){v.tdAttr='rowspan="'+t+'"'}if(p>1){m+=(p-1)*w.pageSize}return m+1}},1,["rownumberer"],["component","box","container","headercontainer","gridcolumn","rownumberer"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,rownumberer:true},["widget.rownumberer"],0,[Ext.grid.column,"RowNumberer",Ext.grid,"RowNumberer"],0));(Ext.cmd.derive("Ext.grid.column.Template",Ext.grid.column.Column,{alternateClassName:"Ext.grid.TemplateColumn",initComponent:function(){var c=this;c.tpl=(!Ext.isPrimitive(c.tpl)&&c.tpl.compile)?c.tpl:new Ext.XTemplate(c.tpl);c.hasCustomRenderer=true;c.callParent(arguments)},defaultRenderer:function(l,j,h){var e=Ext.apply({},h.data,h.getAssociatedData());return this.tpl.apply(e)}},0,["templatecolumn"],["component","box","container","headercontainer","gridcolumn","templatecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,templatecolumn:true},["widget.templatecolumn"],0,[Ext.grid.column,"Template",Ext.grid,"TemplateColumn"],0));(Ext.cmd.derive("Ext.grid.feature.Feature",Ext.util.Observable,{wrapsItem:false,isFeature:true,disabled:false,hasFeatureEvent:true,eventPrefix:null,eventSelector:null,view:null,grid:null,constructor:function(c){this.initialConfig=c;this.callParent(arguments)},clone:function(){return new this.self(this.initialConfig)},init:Ext.emptyFn,destroy:function(){this.clearListeners()},getFireEventArgs:function(e,h,l,j){return[e,h,l,j]},vetoEvent:Ext.emptyFn,enable:function(){this.disabled=false},disable:function(){this.disabled=true}},1,0,0,0,["feature.feature"],0,[Ext.grid.feature,"Feature"],0));(Ext.cmd.derive("Ext.grid.feature.AbstractSummary",Ext.grid.feature.Feature,{summaryRowCls:Ext.baseCSSPrefix+"grid-row-summary",summaryTableCls:Ext.plainTableCls+" "+Ext.baseCSSPrefix+"grid-table",summaryRowSelector:"."+Ext.baseCSSPrefix+"grid-row-summary",summaryRowTpl:{before:function(d,c){if(d.record.isSummary&&this.summaryFeature.showSummaryRow){this.summaryFeature.outputSummaryRecord(d.record,d,c);return false}},priority:1000},showSummaryRow:true,init:function(){var c=this;c.view.summaryFeature=c;c.rowTpl=c.view.self.prototype.rowTpl;c.view.addRowTpl(c.summaryRowTpl).summaryFeature=c;c.summaryData={}},toggleSummaryRow:function(c){this.showSummaryRow=!!c},createRenderer:function(m,h){var l=this,o=h.ownerGroup,j=o?l.summaryData[o]:l.summaryData,n=m.dataIndex||m.id;return function(a,c){return m.summaryRenderer?m.summaryRenderer(h.get(n),j,n,c):h.get(n)}},outputSummaryRecord:function(q,m,t){var p=m.view,w=p.rowValues,u=m.columns||p.headerCt.getVisibleGridColumns(),n=u.length,s,v,o={view:p,record:q,rowStyle:"",rowClasses:[this.summaryRowCls],itemClasses:[],recordIndex:-1,rowId:p.getRowId(q),columns:u};for(s=0;s<n;s++){v=u[s];v.savedRenderer=v.renderer;if(v.summaryType||v.summaryRenderer){v.renderer=this.createRenderer(v,q)}else{v.renderer=Ext.emptyFn}}p.rowValues=o;p.self.prototype.rowTpl.applyOut(o,t);p.rowValues=w;for(s=0;s<n;s++){v=u[s];v.renderer=v.savedRenderer;v.savedRenderer=null}},getSummary:function(h,n,l,m){var j=m.records;if(n){if(Ext.isFunction(n)){return h.getAggregate(n,null,j,[l])}switch(n){case"count":return j.length;case"min":return h.getMin(j,l);case"max":return h.getMax(j,l);case"sum":return h.getSum(j,l);case"average":return h.getAverage(j,l);default:return""}}},generateSummaryData:function(u){var p=this,s=p.view.store.proxy.reader,n={},t,q,o,l,m;o=s.root;s.root=p.remoteRoot;s.buildExtractors(true);l=s.getRoot(s.rawData);if(!s.convertRecordData){s.buildExtractors()}if(l){if(!Ext.isArray(l)){l=[l]}for(t=0,q=l.length;t<q;++t){m={};s.convertRecordData(m,l[t]);if(u){n[m[u]]=m}}}s.root=o;s.buildExtractors(true);return u?n:m},setSummaryData:function(e,l,h,j){if(j){if(!this.summaryData[j]){this.summaryData[j]={}}this.summaryData[j][l]=h}else{this.summaryData[l]=h}},populateRecord:function(u,w){var z=this,y=z.grid.ownerLockable?z.grid.ownerLockable.view:z.view,v=z.view.store,B=u.getAggregateRecord(),D=y.headerCt.getGridColumns(),A=D.length,s=u.key,E,x,C,F,t,G;B.beginEdit();if(w){E=w[s];for(x in E){if(E.hasOwnProperty(x)){if(x!==B.idProperty){B.set(x,E[x])}}}}for(C=0;C<A;++C){F=D[C];t=F.dataIndex||F.id;if(!w){G=z.getSummary(v,F.summaryType,t,u);B.set(t,G)}else{G=B.get(t)}z.setSummaryData(B,F.id,G,s)}B.ownerGroup=s;B.endEdit(true);B.commit();return B}},0,0,0,0,["feature.abstractsummary"],0,[Ext.grid.feature,"AbstractSummary"],0));(Ext.cmd.derive("Ext.grid.feature.GroupStore",Ext.util.Observable,{isStore:true,defaultViewSize:100,isFeatureStore:true,constructor:function(h,e){var d=this;d.callParent();d.groupingFeature=h;d.bindStore(e)},bindStore:function(d){var c=this;if(c.store){Ext.destroy(c.storeListeners);c.store=null}if(d){c.storeListeners=d.on({bulkremove:c.onBulkRemove,add:c.onAdd,update:c.onUpdate,refresh:c.onRefresh,clear:c.onClear,scope:c,destroyable:true});c.store=d;c.processStore(d)}},processStore:function(s){var t=this,y=s.getGroups(),p=y.length,v,o,n,w=t.data,q=t.groupingFeature.groupCache,x=t.groupingFeature.clearGroupCache(),u=t.groupingFeature.startCollapsed;if(w){w.clear()}else{w=t.data=new Ext.util.MixedCollection(false,Ext.data.Store.recordIdFn)}if(s.getCount()){t.groupingFeature.startCollapsed=false;for(v=0;v<p;v++){o=y[v];x[o.name]=o;o.isCollapsed=u||(q[o.name]&&q[o.name].isCollapsed);if(o.isCollapsed){o.placeholder=n=new s.model(null,"group-"+o.name+"-placeholder");n.set(s.getGroupField(),o.name);n.rows=n.children=o.children;n.isCollapsedPlaceholder=true;w.add(n)}else{w.insert(t.data.length,o.children)}}}},isCollapsed:function(c){return this.groupingFeature.groupCache[c].isCollapsed},isInCollapsedGroup:function(e){var d=this.store,h;if(d.isGrouped()&&(h=this.groupingFeature.groupCache[e.get(d.getGroupField())])){return h.isCollapsed||false}return false},getCount:function(){return this.data.getCount()},getTotalCount:function(){return this.data.getCount()},rangeCached:function(c,d){return d<this.getCount()},getRange:function(j,e,l){var h=this.data.getRange(j,e);if(l&&l.callback){l.callback.call(l.scope||this,h,j,e,l)}return h},getAt:function(c){return this.getRange(c,c)[0]},getById:function(c){return this.store.getById(c)},getByInternalId:function(c){return(this.store.snapshot||this.data).get(c)||null},expandGroup:function(h){var d=this,e;if(typeof h==="string"){h=d.groupingFeature.groupCache[h]}if(h&&h.children.length&&(e=d.data.indexOf(h.placeholder))!==-1){h.isCollapsed=false;d.isExpandingOrCollapsing=1;d.data.removeAt(e);d.data.insert(e,h.children);d.fireEvent("replace",d,e,[h.placeholder],h.children);d.fireEvent("groupexpand",d,h);d.isExpandingOrCollapsing=0}},collapseGroup:function(m){var n=this,h,l,j;if(typeof m==="string"){m=n.groupingFeature.groupCache[m]}if(m&&(j=m.children.length)&&(h=n.data.indexOf(m.children[0]))!==-1){m.isCollapsed=true;n.isExpandingOrCollapsing=2;n.data.removeRange(h,j);n.data.insert(h,l=n.getGroupPlaceholder(m));n.fireEvent("replace",n,h,m.children,[l]);n.fireEvent("groupcollapse",n,m);n.isExpandingOrCollapsing=0}},getGroupPlaceholder:function(d){if(!d.placeholder){var c=d.placeholder=new this.store.model(null,"group-"+d.name+"-placeholder");c.set(this.store.getGroupField(),d.name);c.rows=c.children=d.children;c.isCollapsedPlaceholder=true}return d.placeholder},indexOf:function(c){if(!c.isCollapsedPlaceholder){return this.data.indexOf(c)}return -1},indexOfTotal:function(c){return this.store.indexOf(c)},onRefresh:function(c){this.processStore(this.store);this.fireEvent("refresh",this)},onBulkRemove:function(n,h,l,j,m){this.processStore(this.store);if(n.getCount()){if(m){this.fireEvent("replace",this,this.indexOf(h[0]),h,[])}else{this.fireEvent("refresh",this)}}},onClear:function(d,e,h){this.processStore(this.store);this.fireEvent("clear",this)},onAdd:function(d,e,h){this.processStore(this.store);this.fireEvent("replace",this,this.indexOf(e[0]),[],e)},onUpdate:function(t,m,l,o){var p=this,s,n,q;if(t.isGrouped()){s=m.group=p.groupingFeature.getRecordGroup(m);if(o&&Ext.Array.contains(o,p.groupingFeature.getGroupField())){return p.onRefresh(p.store)}if(s.isCollapsed){p.fireEvent("update",p,s.placeholder)}else{Ext.suspendLayouts();p.fireEvent("update",p,m,l,o);n=s.children[0];q=s.children[s.children.length-1];if(n!==m){n.group=s;p.fireEvent("update",p,n,"edit");delete n.group}if(q!==m&&q!==n&&p.groupingFeature.showSummaryRow){q.group=s;p.fireEvent("update",p,q,"edit");delete q.group}Ext.resumeLayouts(true)}delete m.group}else{p.fireEvent("update",p,m,l,o)}}},1,0,0,0,0,0,[Ext.grid.feature,"GroupStore"],0));(Ext.cmd.derive("Ext.grid.feature.Grouping",Ext.grid.feature.Feature,{eventPrefix:"group",groupCls:Ext.baseCSSPrefix+"grid-group-hd",eventSelector:"."+Ext.baseCSSPrefix+"grid-group-hd",refreshData:{},groupInfo:{},wrapsItem:true,groupHeaderTpl:"{columnName}: {name}",depthToIndent:17,collapsedCls:Ext.baseCSSPrefix+"grid-group-collapsed",hdCollapsedCls:Ext.baseCSSPrefix+"grid-group-hd-collapsed",hdNotCollapsibleCls:Ext.baseCSSPrefix+"grid-group-hd-not-collapsible",collapsibleCls:Ext.baseCSSPrefix+"grid-group-hd-collapsible",ctCls:Ext.baseCSSPrefix+"group-hd-container",groupByText:"Group by this field",showGroupsText:"Show in groups",hideGroupedHeader:false,startCollapsed:false,enableGroupingMenu:true,enableNoGroups:true,collapsible:true,expandTip:"Click to expand. CTRL key collapses all others",collapseTip:"Click to collapse. CTRL/click collapses all others",showSummaryRow:false,tableTpl:{before:function(c){if(this.groupingFeature.disabled||c.rows.length===1&&c.rows[0].isSummary){return}this.groupingFeature.setup(c.rows,c.view.rowValues)},after:function(c){if(this.groupingFeature.disabled||c.rows.length===1&&c.rows[0].isSummary){return}this.groupingFeature.cleanup(c.rows,c.view.rowValues)},priority:200},groupTpl:["{%","var me = this.groupingFeature;","if (me.disabled) {","values.needsWrap = false;","} else {","me.setupRowData(values.record, values.rowIndex, values);","}","%}",'<tpl if="needsWrap">','<tr {[values.isCollapsedGroup ? ("id=\\"" + values.rowId + "\\"") : ""]} data-boundView="{view.id}" data-recordId="{record.internalId:htmlEncode}" data-recordIndex="{[values.isCollapsedGroup ? -1 : values.recordIndex]}" ','class="{[values.itemClasses.join(" ")]} ',Ext.baseCSSPrefix,'grid-wrap-row<tpl if="!summaryRecord"> ',Ext.baseCSSPrefix,'grid-group-row</tpl>" {ariaRowAttr}>','<td class="',Ext.baseCSSPrefix,'group-hd-container" colspan="{columns.length}" {ariaCellAttr}>','<tpl if="isFirstRow">',"{%",'var groupTitleStyle = (!values.view.lockingPartner || (values.view.ownerCt === values.view.ownerCt.ownerLockable.lockedGrid) || (values.view.lockingPartner.headerCt.getVisibleGridColumns().length === 0)) ? "" : "visibility:hidden";',"%}",'<div id="{groupId}" class="',Ext.baseCSSPrefix,'grid-group-hd {collapsibleCls}" tabIndex="0" hidefocus="on" {ariaCellInnerAttr}>','<div class="',Ext.baseCSSPrefix,'grid-group-title" style="{[groupTitleStyle]}" {ariaGroupTitleAttr}>','{[values.groupHeaderTpl.apply(values.groupInfo, parent) || "&#160;"]}',"</div>","</div>","</tpl>",'<tpl if="summaryRecord || !isCollapsedGroup">','<table class="',Ext.baseCSSPrefix,"{view.id}-table ",Ext.baseCSSPrefix,"grid-table",'<tpl if="summaryRecord"> ',Ext.baseCSSPrefix,'grid-table-summary</tpl>"','border="0" cellspacing="0" cellpadding="0" style="width:100%" {ariaSummaryTableAttr}>',"{[values.view.renderColumnSizer(out)]}",'<tpl if="!isCollapsedGroup">',"{%","values.itemClasses.length = 0;","this.nextTpl.applyOut(values, out, parent);","%}","</tpl>",'<tpl if="summaryRecord">',"{%me.outputSummaryRecord(values.summaryRecord, values, out);%}","</tpl>","</table>","</tpl>","</td>","</tr>","<tpl else>","{%this.nextTpl.applyOut(values, out, parent);%}","</tpl>",{priority:200,syncRowHeights:function(q,l){q=Ext.fly(q,"syncDest");l=Ext.fly(l,"sycSrc");var t=this.owner,p=q.down(t.eventSelector,true),o,n=q.down(t.summaryRowSelector,true),s,u,m;if(p&&(o=l.down(t.eventSelector,true))){p.style.height=o.style.height="";if((u=p.offsetHeight)>(m=o.offsetHeight)){Ext.fly(o).setHeight(u)}else{if(m>u){Ext.fly(p).setHeight(m)}}}if(n&&(s=l.down(t.summaryRowSelector,true))){n.style.height=s.style.height="";if((u=n.offsetHeight)>(m=s.offsetHeight)){Ext.fly(s).setHeight(u)}else{if(m>u){Ext.fly(n).setHeight(m)}}}},syncContent:function(j,m){j=Ext.fly(j,"syncDest");m=Ext.fly(m,"sycSrc");var l=this.owner,p=j.down(l.eventSelector,true),q=m.down(l.eventSelector,true),n=j.down(l.summaryRowSelector,true),o=m.down(l.summaryRowSelector,true);if(p&&q){Ext.fly(p).syncContent(q)}if(n&&o){Ext.fly(n).syncContent(o)}}}],constructor:function(){this.groupCache={};this.callParent(arguments)},init:function(l){var j=this,h=j.view,e=h.store;h.isGrouping=!!e.isGrouped();if(j.lockingPartner&&j.lockingPartner.groupCache){j.groupCache=j.lockingPartner.groupCache}j.mixins.summary.init.call(j);j.callParent(arguments);h.headerCt.on({columnhide:j.onColumnHideShow,columnshow:j.onColumnHideShow,columnmove:j.onColumnMove,scope:j});h.addTableTpl(j.tableTpl).groupingFeature=j;h.addRowTpl(Ext.XTemplate.getTpl(j,"groupTpl")).groupingFeature=j;h.preserveScrollOnRefresh=true;if(e.buffered){j.collapsible=false}else{if(this.lockingPartner&&this.lockingPartner.dataSource){j.dataSource=h.dataSource=this.lockingPartner.dataSource}else{j.dataSource=h.dataSource=new Ext.grid.feature.GroupStore(j,e)}}j.grid.on({scope:j,reconfigure:j.onReconfigure,staterestore:j.onStateRestore});h.on({afterrender:j.afterViewRender,scope:j,single:true})},indexOf:function(c){return this.dataSource.indexOf(c)},isInCollapsedGroup:function(e){var h,d=this.view.store;if(d.isGrouped()&&(h=this.getGroup(e))){return h.isCollapsed||false}return false},clearGroupCache:function(){var c=this,d=c.groupCache={};if(c.lockingPartner){c.lockingPartner.groupCache=d}return d},vetoEvent:function(h,l,j,e){if(e.type!=="mouseover"&&e.type!=="mouseout"&&e.type!=="mouseenter"&&e.type!=="mouseleave"&&e.getTarget(this.eventSelector)){return false}},enable:function(){var l=this,h=l.view,e=h.store,j;h.isGrouping=true;if(l.lastGroupers){l.block();e.group(l.lastGroupers);l.lastGroupers=null;l.unblock()}l.callParent();j=l.view.headerCt.getMenu().down("#groupToggleMenuItem");if(j){j.setChecked(true,true)}l.refreshIf()},disable:function(){var n=this,j=n.view,h=j.store,m,l=h.groupers.getRange();j.isGrouping=false;if(l.length){n.lastGroupers=l;n.block();h.clearGrouping();n.unblock()}n.callParent();m=n.view.headerCt.getMenu().down("#groupToggleMenuItem");if(m){m.setChecked(false,true)}n.refreshIf()},refreshIf:function(){var c=this.grid.ownerCt,d=this.view;if(!d.store.remoteGroup&&!this.blockRefresh){if(c&&c.lockable){c.view.refresh()}else{d.refresh()}}},afterViewRender:function(){var c=this,d=c.view;d.on({scope:c,groupclick:c.onGroupClick});if(c.enableGroupingMenu){c.injectGroupingMenu()}c.pruneGroupedHeader();c.lastGroupers=c.view.store.groupers.getRange();c.block();c.onGroupChange();c.unblock();if(c.disabled){c.disable()}},injectGroupingMenu:function(){var d=this,c=d.view.headerCt;c.showMenuBy=d.showMenuBy;c.getMenuItems=d.getMenuItems()},onColumnHideShow:function(x,v){var q=this.view,z=q.headerCt,A=z.getMenu(),y=A.activeHeader,p=A.down("#groupMenuItem"),u,o=this.grid.getVisibleColumnManager().getColumns().length,s,t,w;if(y&&p){u=y.groupable===false||y.dataIndex==null||this.view.headerCt.getVisibleGridColumns().length<2?"disable":"enable";p[u]()}if(q.rendered){s=q.el.query("."+this.ctCls);for(w=0,t=s.length;w<t;++w){s[w].colSpan=o}}},onColumnMove:function(){var p=this,j=p.view.store,l,m,o,n,q;if(j.isGrouped()){l=p.groupCache;Ext.suspendLayouts();for(m in l){if(l.hasOwnProperty(m)){o=l[m];n=o.children[0];q=o.children[o.children.length-1];j.fireEvent("update",j,n,"edit",null);if(q!==n&&p.showSummaryRow){j.fireEvent("update",j,q,"edit",null)}}}Ext.resumeLayouts(true)}},showMenuBy:function(j,m){var n=this.getMenu(),q=n.down("#groupMenuItem"),l=m.groupable===false||m.dataIndex==null||this.view.headerCt.getVisibleGridColumns().length<2?"disable":"enable",o=n.down("#groupToggleMenuItem"),p=this.view.store.isGrouped();q[l]();if(o){o.setChecked(p,true);o[p?"enable":"disable"]()}Ext.grid.header.Container.prototype.showMenuBy.apply(this,arguments)},getMenuItems:function(){var l=this,o=l.groupByText,m=l.disabled||!l.getGroupField(),j=l.showGroupsText,n=l.enableNoGroups,h=l.view.headerCt.getMenuItems;return function(){var a=h.call(this);a.push("-",{iconCls:Ext.baseCSSPrefix+"group-by-icon",itemId:"groupMenuItem",text:o,handler:l.onGroupMenuItemClick,scope:l});if(n){a.push({itemId:"groupToggleMenuItem",text:j,checked:!m,checkHandler:l.onGroupToggleMenuItemClick,scope:l})}return a}},onGroupMenuItemClick:function(q,o){var p=this,n=q.parentMenu,m=n.activeHeader,l=p.view,e=l.store;p.lastGroupers=null;p.block();p.enable();e.group(m.dataIndex);p.pruneGroupedHeader();p.unblock();p.refreshIf()},block:function(c){this.blockRefresh=this.view.blockRefresh=true;if(this.lockingPartner&&!c){this.lockingPartner.block(true)}},unblock:function(c){this.blockRefresh=this.view.blockRefresh=false;if(this.lockingPartner&&!c){this.lockingPartner.unblock(true)}},onGroupToggleMenuItemClick:function(d,c){this[c?"enable":"disable"]()},pruneGroupedHeader:function(){var d=this,c=d.getGroupedHeader();if(d.hideGroupedHeader&&c){Ext.suspendLayouts();if(d.prunedHeader&&d.prunedHeader!==c){d.prunedHeader.show()}d.prunedHeader=c;c.hide();Ext.resumeLayouts(true)}},getHeaderNode:function(c){return Ext.get(this.createGroupId(c))},getGroup:function(d){if(d.isModel){d=d.get(this.view.store.getGroupField())}var e=this.groupCache,h=e[d];if(!h){h=e[d]={isCollapsed:false}}return h},isExpanded:function(c){return !this.getGroup(c).isCollapsed},expand:function(c,d){this.doCollapseExpand(false,c,d)},expandAll:function(){var l=this,e=l.groupCache,j,h=l.lockingPartner;for(j in e){if(e.hasOwnProperty(j)){e[j].isCollapsed=false}}Ext.suspendLayouts();l.dataSource.onRefresh();Ext.resumeLayouts(true);for(j in e){if(e.hasOwnProperty(j)){l.afterCollapseExpand(false,j);if(h){h.afterCollapseExpand(false,j)}}}},collapse:function(c,d){this.doCollapseExpand(true,c,d)},isAllCollapsed:function(){var d=this,e=d.groupCache,h;for(h in e){if(e.hasOwnProperty(h)){if(!e[h].isCollapsed){return false}}}return true},isAllExpanded:function(){var d=this,e=d.groupCache,h;for(h in e){if(e.hasOwnProperty(h)){if(e[h].isCollapsed){return false}}}return true},collapseAll:function(){var l=this,e=l.groupCache,j,h=l.lockingPartner;for(j in e){if(e.hasOwnProperty(j)){e[j].isCollapsed=true}}Ext.suspendLayouts();l.dataSource.onRefresh();if(h&&!h.isAllCollapsed()){h.collapseAll()}Ext.resumeLayouts(true);for(j in e){if(e.hasOwnProperty(j)){l.afterCollapseExpand(true,j);if(h){h.afterCollapseExpand(true,j)}}}},doCollapseExpand:function(m,l,j){var o=this,h=o.lockingPartner,n=o.groupCache[l];if(n.isCollapsed!==m){Ext.suspendLayouts();if(m){o.dataSource.collapseGroup(n)}else{o.dataSource.expandGroup(n)}Ext.resumeLayouts(true);o.afterCollapseExpand(m,l,j);if(h){h.afterCollapseExpand(m,l,false)}}},afterCollapseExpand:function(n,l,h){var o=this,j=o.view,m;m=Ext.get(this.getHeaderNode(l));j.fireEvent(n?"groupcollapse":"groupexpand",j,m,l);if(h){m.up(j.getItemSelector()).scrollIntoView(j.el,null,true)}},onGroupChange:function(){var m=this,l=m.getGroupField(),n,j,o,h;if(m.hideGroupedHeader){if(m.lastGroupers&&m.lastGroupers.length){n=m.getMenuItem(m.lastGroupers[0].property);if(n){h=true}}if(l){j=m.view.headerCt.getVisibleGridColumns();o=((j.length===1)&&(j[0].dataIndex===l));n=m.getMenuItem(l);if(n&&!o){h=false}}if(n&&n.checked!==h){n.setChecked(h)}}m.refreshIf();m.lastGroupers=m.view.store.groupers.getRange()},getMenuItem:function(e){var h=this.view,j=h.headerCt.down("gridcolumn[dataIndex="+e+"]"),l=h.headerCt.getMenu();return j?l.down("menuitem[headerId="+j.id+"]"):null},onGroupKey:function(l,e){var h=this,j=h.getGroupName(e.target);if(j){h.onGroupClick(h.view,e.target,j,e)}},onGroupClick:function(n,p,m,o){var q=this,s=q.groupCache,e=!q.isExpanded(m),t;if(q.collapsible){if(o.ctrlKey){Ext.suspendLayouts();for(t in s){if(t===m){if(e){q.expand(m)}}else{if(!s[t].isCollapsed){q.doCollapseExpand(true,t,false)}}}Ext.resumeLayouts(true);return}if(e){q.expand(m)}else{q.collapse(m)}}},setupRowData:function(x,u,s){var w=this,B=s.recordIndex,A=w.refreshData,D=w.groupInfo,y=A.header,E=A.groupField,v=w.view.store,F=w.view.dataSource,G,t,C,z;s.isCollapsedGroup=false;s.summaryRecord=null;if(A.doGrouping){G=w.view.store.groupers.first();if(x.children){t=G.getGroupString(x.children[0]);s.isFirstRow=s.isLastRow=true;s.itemClasses.push(w.hdCollapsedCls);s.isCollapsedGroup=s.needsWrap=true;s.groupInfo=D;D.groupField=E;D.name=t;D.groupValue=x.children[0].get(E);D.columnName=y?y.text:E;s.collapsibleCls=w.collapsible?w.collapsibleCls:w.hdNotCollapsibleCls;s.groupId=w.createGroupId(t);D.rows=D.children=x.children;if(w.showSummaryRow){s.summaryRecord=A.summaryData[t]}return}t=G.getGroupString(x);if(x.group){s.isFirstRow=x===x.group.children[0];s.isLastRow=x===x.group.children[x.group.children.length-1]}else{s.isFirstRow=B===0;if(!s.isFirstRow){C=v.getAt(B-1);if(C){s.isFirstRow=!C.isEqual(G.getGroupString(C),t)}}s.isLastRow=B==(v.buffered?v.getTotalCount():v.getCount())-1;if(!s.isLastRow){z=v.getAt(B+1);if(z){s.isLastRow=!z.isEqual(G.getGroupString(z),t)}}}if(s.isFirstRow){D.groupField=E;D.name=t;D.groupValue=x.get(E);D.columnName=y?y.text:E;s.collapsibleCls=w.collapsible?w.collapsibleCls:w.hdNotCollapsibleCls;s.groupId=w.createGroupId(t);if(!w.isExpanded(t)){s.itemClasses.push(w.hdCollapsedCls);s.isCollapsedGroup=true}if(F.buffered){D.rows=D.children=[]}else{D.rows=D.children=w.getRecordGroup(x).children}s.groupInfo=D}if(s.isLastRow){if(w.showSummaryRow){s.summaryRecord=A.summaryData[t]}}s.needsWrap=(s.isFirstRow||s.summaryRecord)}},setup:function(m,l){var o=this,n=o.refreshData,j=o.view,h=j.isGrouping=!o.disabled&&j.store.isGrouped();o.skippedRows=0;if(l.view.bufferedRenderer){l.view.bufferedRenderer.variableRowHeight=true}n.groupField=o.getGroupField();n.header=o.getGroupedHeader(n.groupField);n.doGrouping=h;l.groupHeaderTpl=Ext.XTemplate.getTpl(o,"groupHeaderTpl");if(h&&o.showSummaryRow){n.summaryData=o.generateSummaryData()}},cleanup:function(d,h){var e=this.refreshData;h.groupInfo=h.groupHeaderTpl=h.isFirstRow=null;e.groupField=e.header=null},generateSummaryData:function(){var u=this,s=u.view.store,B=s.groups.items,x=s.proxy.reader,D=u.getGroupField(),v=u.lockingPartner,A={},z,w,q,E,y,C,t;if(u.remoteRoot&&x.rawData){C=true;t=u.mixins.summary.generateSummaryData.call(u,D)}for(z=0,w=B.length;z<w;++z){q=B[z];if(C||q.isDirty()||!q.hasAggregate()){y=u.populateRecord(q,t);if(!v||(u.view.ownerCt===u.view.ownerCt.ownerLockable.normalGrid)){q.commit()}}else{y=q.getAggregateRecord()}A[q.key]=y}return A},getGroupName:function(j){var p=this,l=p.view,q=p.eventSelector,o,m,n;m=Ext.fly(j).findParent(q);if(!m){n=Ext.fly(j).findParent(l.itemSelector);if(n){m=n.down(q,true)}}if(m){o=m.id.split(l.id+"-hd-");if(o.length===2){return Ext.htmlDecode(o[1])}}},getRecordGroup:function(d){var c=this.view.store.groupers.first();if(c){return this.groupCache[c.getGroupString(d)]}},createGroupId:function(c){return this.view.id+"-hd-"+Ext.htmlEncode(c)},createGroupCls:function(c){return this.view.id+"-"+Ext.htmlEncode(c)+"-item"},getGroupField:function(){return this.view.store.getGroupField()},getGroupedHeader:function(h){var n=this,m=n.view.headerCt,o=n.lockingPartner,j,l;h=h||this.getGroupField();if(h){j="[dataIndex="+h+"]";l=m.down(j);if(!l&&o){l=o.view.headerCt.down(j)}}return l||null},getFireEventArgs:function(e,h,j,l){return[e,h,j,this.getGroupName(j),l]},destroy:function(){var d=this,c=d.dataSource;d.view=d.prunedHeader=d.grid=d.groupCache=d.dataSource=null;d.callParent();if(c){c.bindStore(null)}},onReconfigure:function(n,j,o,l,h){var m;if(j&&j!==l){m=j.buffered;if(m!==l.buffered){Ext.Error.raise("Cannot reconfigure grouping switching between buffered and non-buffered stores")}if(m||n.findPlugin("bufferedrenderer")){n.view.dataSource.bindStore(j)}}},onStateRestore:function(n,l){var j=l.storeState,m=j&&j.groupers,h;if(m){h=m[0];n.store.group(h.property,h.direction);this.refreshIf()}}},1,0,0,0,["feature.grouping"],[["summary",Ext.grid.feature.AbstractSummary]],[Ext.grid.feature,"Grouping"],0));(Ext.cmd.derive("Ext.grid.feature.GroupingSummary",Ext.grid.feature.Grouping,{showSummaryRow:true,vetoEvent:function(e,l,j,m){var h=this.callParent(arguments);if(h!==false){if(m.getTarget(this.summaryRowSelector)){h=false}}return h}},0,0,0,0,["feature.groupingsummary"],0,[Ext.grid.feature,"GroupingSummary"],0));(Ext.cmd.derive("Ext.grid.feature.RowWrap",Ext.grid.feature.Feature,{rowWrapTd:"td."+Ext.baseCSSPrefix+"grid-rowwrap",hasFeatureEvent:false,tableTpl:{before:function(d,c){if(d.view.bufferedRenderer){d.view.bufferedRenderer.variableRowHeight=true}},priority:200},wrapTpl:['<tr data-boundView="{view.id}" data-recordId="{record.internalId}" data-recordIndex="{recordIndex}" class="{[values.itemClasses.join(" ")]} ',Ext.baseCSSPrefix,'grid-wrap-row" {ariaRowAttr}>','<td class="',Ext.baseCSSPrefix,"grid-rowwrap ",Ext.baseCSSPrefix,'grid-td" colspan="{columns.length}" {ariaCellAttr}>','<table class="',Ext.baseCSSPrefix,"{view.id}-table ",Ext.baseCSSPrefix,'grid-table" border="0" cellspacing="0" cellpadding="0" style="width:100%" {ariaCellInnerTableAttr}>',"{[values.view.renderColumnSizer(out)]}","{%","values.itemClasses.length = 0;","this.nextTpl.applyOut(values, out, parent)","%}","</table>","</td>","</tr>",{priority:200}],getTargetSelector:function(){return this.itemSelector},init:function(d){var h=this,e=h.view;e.addTableTpl(h.tableTpl);e.addRowTpl(Ext.XTemplate.getTpl(h,"wrapTpl"));e.isRowWrapped=true;e.getTargetSelector=h.getTargetSelector}},0,0,0,0,["feature.rowwrap"],0,[Ext.grid.feature,"RowWrap"],0));(Ext.cmd.derive("Ext.grid.feature.RowBody",Ext.grid.feature.RowWrap,{rowBodyCls:Ext.baseCSSPrefix+"grid-row-body",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowBodyTdSelector:"td."+Ext.baseCSSPrefix+"grid-cell-rowbody",eventPrefix:"rowbody",eventSelector:"tr."+Ext.baseCSSPrefix+"grid-rowbody-tr",hasFeatureEvent:true,colSpanDecrement:0,tableTpl:{before:function(e,l){if(!this.rowBody){return}var h=e.view,j=h.rowValues;this.rowBody.setup(e.rows,j)},after:function(e,l){if(!this.rowBody){return}var h=e.view,j=h.rowValues;this.rowBody.cleanup(e.rows,j)},priority:100},extraRowTpl:["{%","values.view.rowBodyFeature.setupRowData(values.record, values.recordIndex, values);","this.nextTpl.applyOut(values, out, parent);","%}",'<tr class="',Ext.baseCSSPrefix,'grid-rowbody-tr {rowBodyCls}" {ariaRowAttr}>','<td class="',Ext.baseCSSPrefix,"grid-cell-rowbody",'" colspan="{rowBodyColspan}" {ariaCellAttr}>','<div class="',Ext.baseCSSPrefix,"grid-rowbody",' {rowBodyDivCls}" {ariaCellInnerAttr}>{rowBody}</div>',"</td>","</tr>",{priority:100,syncRowHeights:function(n,q){var l=this.owner,j=Ext.fly(n).down(l.eventSelector,true),m,p,o;if(j&&(m=Ext.fly(q).down(l.eventSelector,true))){if((p=j.offsetHeight)>(o=m.offsetHeight)){Ext.fly(m).setHeight(p)}else{if(o>p){Ext.fly(j).setHeight(o)}}}},syncContent:function(h,l){var j=this.owner,n=Ext.fly(h).down(j.eventSelector,true),m;if(n&&(m=Ext.fly(l).down(j.eventSelector,true))){Ext.fly(n).syncContent(m)}}}],init:function(d){var h=this,e=h.view=d.getView();e.rowBodyFeature=h;h.mon(d.getStore(),"remove",h.onStoreRemove,h);e.headerCt.on({columnschanged:h.onColumnsChanged,scope:h});e.addTableTpl(h.tableTpl).rowBody=h;e.addRowTpl(Ext.XTemplate.getTpl(this,"extraRowTpl"));e.mouseOverOutBuffer=0;h.callParent(arguments)},onStoreRemove:function(h,m,n){var j=this.view,l;if(j.rendered){l=j.getNode(n);if(l){l=Ext.fly(l).next(this.eventSelector);if(l){l.remove()}}}},getSelectedRow:function(e,h){var d=e.getNode(h,false);if(d){return Ext.fly(d).down(this.eventSelector)}return null},onColumnsChanged:function(m){var h=this.view.el.query(this.rowBodyTdSelector),l=m.getVisibleGridColumns().length,j=h.length,n;for(n=0;n<j;++n){h[n].colSpan=l}},setupRowData:function(e,h,d){if(this.getAdditionalData){Ext.apply(d,this.getAdditionalData(e.data,h,e,d))}},setup:function(d,c){c.rowBodyCls=this.rowBodyCls;c.rowBodyColspan=c.view.getGridColumns().length-this.colSpanDecrement},cleanup:function(d,c){c.rowBodyCls=c.rowBodyColspan=c.rowBody=null}},0,0,0,0,["feature.rowbody"],0,[Ext.grid.feature,"RowBody"],0));(Ext.cmd.derive("Ext.grid.feature.Summary",Ext.grid.feature.AbstractSummary,{dock:undefined,dockedSummaryCls:Ext.baseCSSPrefix+"docked-summary",panelBodyCls:Ext.baseCSSPrefix+"summary-",scrollPadProperty:"padding-right",hasFeatureEvent:false,init:function(d){var h=this,e=h.view;h.callParent(arguments);if(h.dock){d.headerCt.on({add:h.onStoreUpdate,afterlayout:h.onStoreUpdate,scope:h});d.on({beforerender:function(){var a=[h.summaryTableCls];if(e.columnLines){a[a.length]=e.ownerCt.colLinesCls}h.summaryBar=d.addDocked({childEls:["innerCt"],renderTpl:['<div id="{id}-innerCt" role="presentation">','<table cellPadding="0" cellSpacing="0" class="'+a.join(" ")+'">','<tr class="'+h.summaryRowCls+'"></tr>',"</table>","</div>"],style:"overflow:hidden",itemId:"summaryBar",cls:[h.dockedSummaryCls,h.dockedSummaryCls+"-"+h.dock],xtype:"component",dock:h.dock,weight:10000000})[0]},afterrender:function(){d.body.addCls(h.panelBodyCls+h.dock);e.mon(e.el,{scroll:h.onViewScroll,scope:h});h.onStoreUpdate()},single:true});d.headerCt.afterComponentLayout=Ext.Function.createSequence(d.headerCt.afterComponentLayout,function(){var c=this.getTableWidth(),a=h.summaryBar.innerCt,j;if(e.hasVerticalScroll()){j=Ext.getScrollbarSize().width;c-=j;a.down("table").setStyle(h.scrollPadProperty,j+"px")}a.setWidth(c)})}else{h.view.addFooterFn(h.renderTFoot)}d.on({columnmove:h.onStoreUpdate,scope:h});e.mon(e.store,{update:h.onStoreUpdate,datachanged:h.onStoreUpdate,scope:h})},renderTFoot:function(n,m){var h=n.view,l=h.findFeature("summary"),j;if(!h.store.loading&&l.showSummaryRow){j=l.summaryRecord;m.push("<tfoot>");l.outputSummaryRecord((j&&j.isModel)?j:l.createSummaryRecord(h),n,m);m.push("</tfoot>")}},toggleSummaryRow:function(h){var d=this,e=d.summaryBar;d.callParent(arguments);if(e){e.setVisible(d.showSummaryRow);d.onViewScroll()}},vetoEvent:function(h,l,j,e){return !e.getTarget(this.summaryRowSelector)},onViewScroll:function(){this.summaryBar.el.dom.scrollLeft=this.view.el.dom.scrollLeft},createSummaryRecord:function(s){var t=this,p=s.store,w=s.headerCt.getVisibleGridColumns(),y={records:p.getRange()},o=w.length,v,x,A=t.remoteRoot,u=t.summaryRecord||(t.summaryRecord=new p.model(null,s.id+"-summary-record")),q,z;u.beginEdit();if(A&&p.proxy.reader.rawData){u.set(t.generateSummaryData())}else{if(!A){for(v=0;v<o;v++){x=w[v];q=x.dataIndex||x.id;z=t.getSummary(p,x.summaryType,q,y);u.set(q,z);t.setSummaryData(u,x.id,z)}}}u.endEdit(true);u.commit(true);u.isSummary=true;return u},onStoreUpdate:function(){var m=this,h=m.view,j=m.createSummaryRecord(h),n=h.createRowElement(j,-1),o,l;if(!h.rendered){return}if(m.dock){o=m.summaryBar.el.down("."+m.summaryRowCls,true)}else{o=m.view.getNode(j)}if(o){l=o.parentNode;l.insertBefore(n,o);l.removeChild(o)}if(m.dock){m.onColumnHeaderLayout()}},onColumnHeaderLayout:function(){var j=this.view,p=j.headerCt.getVisibleGridColumns(),n,l=p.length,q,m=this.summaryBar.el,o;for(q=0;q<l;q++){n=p[q];o=m.down(j.getCellSelector(n));if(o){if(n.hidden){o.setDisplayed(false)}else{o.setDisplayed(true);o.setWidth(n.width||(n.lastBox?n.lastBox.width:100))}}}}},0,0,0,0,["feature.summary"],0,[Ext.grid.feature,"Summary"],0));(Ext.cmd.derive("Ext.grid.locking.HeaderContainer",Ext.grid.header.Container,{constructor:function(p){var q=this,l,j,m=[],n=p.lockedGrid,o=p.normalGrid;q.lockable=p;q.callParent();n.visibleColumnManager.rootColumns=o.visibleColumnManager.rootColumns=p.visibleColumnManager=q.visibleColumnManager=new Ext.grid.ColumnManager(true,n.headerCt,o.headerCt);n.columnManager.rootColumns=o.columnManager.rootColumns=p.columnManager=q.columnManager=new Ext.grid.ColumnManager(false,n.headerCt,o.headerCt);l=n.headerCt.events;for(j in l){if(l.hasOwnProperty(j)){m.push(j)}}q.relayEvents(n.headerCt,m);q.relayEvents(o.headerCt,m)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var d=this,e=d.lockable.lockedGrid.headerCt.getColumnsState(),h=d.lockable.normalGrid.headerCt.getColumnsState();return e.concat(h)},applyColumnsState:function(A){var t=this,C=t.lockable.lockedGrid,B=C.headerCt,v=t.lockable.normalGrid.headerCt,s=Ext.Array.toValueMap(B.items.items,"stateId"),z=Ext.Array.toValueMap(v.items.items,"stateId"),w=[],u=[],x=1,F=A.length,y,G,D,E;for(y=0;y<F;y++){E=A[y];D=s[E.id];G=D||z[E.id];if(G){if(G.applyColumnState){G.applyColumnState(E)}if(G.locked===undefined){G.locked=!!D}if(G.locked){w.push(G);if(!G.hidden&&typeof G.width=="number"){x+=G.width}}else{u.push(G)}}}if(w.length+u.length==B.items.getCount()+v.items.getCount()){B.removeAll(false);v.removeAll(false);B.add(w);v.add(u);C.setWidth(x)}}},1,0,["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},0,0,[Ext.grid.locking,"HeaderContainer"],0));(Ext.cmd.derive("Ext.grid.locking.View",Ext.Base,{alternateClassName:"Ext.grid.LockingView",isLockingView:true,loadMask:true,eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell|refresh)/,constructor:function(l){var o=this,n=[],m=o.eventRelayRe,p,s,t,q;o.panel=l.panel;l.locked.viewConfig.bindStore=l.normal.viewConfig.bindStore=Ext.emptyFn;l.locked.viewConfig.beforeLayout=l.normal.viewConfig.beforeLayout=o.beforeLayout;o.lockedGrid=o.panel.lockedGrid=Ext.ComponentManager.create(l.locked);o.lockedView=p=o.lockedGrid.getView();if(o.lockedGrid.isTree){o.lockedView.animate=false;l.normal.store=p.store;l.normal.viewConfig.stripeRows=o.lockedView.stripeRows;l.normal.rowLines=o.lockedGrid.rowLines}o.normalGrid=o.panel.normalGrid=Ext.ComponentManager.create(l.normal);p.lockingPartner=s=o.normalView=o.normalGrid.getView();s.lockingPartner=p;o.deferInitialRefresh=s.deferInitialRefresh&&p.deferInitialRefresh;o.loadMask=(l.loadMask!==undefined)?l.loadMask:o.loadMask;o.mixins.observable.constructor.call(o);t=p.events;for(q in t){if(t.hasOwnProperty(q)&&m.test(q)){n.push(q)}}o.relayEvents(p,n);o.relayEvents(s,n);s.on({scope:o,itemmouseleave:o.onItemMouseLeave,itemmouseenter:o.onItemMouseEnter});p.on({scope:o,itemmouseleave:o.onItemMouseLeave,itemmouseenter:o.onItemMouseEnter});o.panel.on({render:o.onPanelRender,scope:o});o.loadingText=s.loadingText;o.loadingCls=s.loadingCls;o.loadingUseMsg=s.loadingUseMsg;o.bindStore(s.dataSource,true,"dataSource")},beforeLayout:function(){var h=this.ownerCt.ownerLockable.view,d=h.lockedGrid.view,e=h.normalGrid.view;if(h.lockedGrid.isVisible()){if(d.refreshNeeded){d.doFirstRefresh(d.dataSource)}}if(e.refreshNeeded){e.doFirstRefresh(e.dataSource)}},onPanelRender:function(){var h=this,d=h.loadMask,e={target:h.panel,msg:h.loadingText,msgCls:h.loadingCls,useMsg:h.loadingUseMsg,store:h.panel.store};h.el=h.panel.body;h.fireEvent("render",h);if(d){if(Ext.isObject(d)){e=Ext.apply(e,d)}h.loadMask=new Ext.LoadMask(e)}},getRefOwner:function(){return this.panel},getGridColumns:function(){var c=this.lockedGrid.headerCt.getVisibleGridColumns();return c.concat(this.normalGrid.headerCt.getVisibleGridColumns())},getEl:function(c){return this.getViewForColumn(c).getEl()},getViewForColumn:function(d){var e=this.lockedView,h;e.headerCt.cascade(function(a){if(a===d){h=true;return false}});return h?e:this.normalView},onItemMouseEnter:function(o,h){var l=this,n=l.lockedView,j=l.normalView,m;if(o.trackOver){if(o!==n){j=n}m=j.getNode(h,false);j.highlightItem(m)}},onItemMouseLeave:function(n,h){var l=this,m=l.lockedView,j=l.normalView;if(n.trackOver){if(n!==m){j=m}j.clearHighlight()}},relayFn:function(h,d){var e=this.lockedView;d=d||[];e[h].apply(e,d);e=this.normalView;e[h].apply(e,d)},getSelectionModel:function(){return this.panel.getSelectionModel()},getStore:function(){return this.panel.store},bindStore:function(h,e,j){var l=this;l.mixins.bindable.bindStore.apply(l,arguments);if(!e){l.getSelectionModel().bindStore(h)}if(l.componentLayoutCounter){Ext.suspendLayouts();l.normalView.doFirstRefresh(h);l.lockedView.doFirstRefresh(h);Ext.resumeLayouts(true)}},getStoreListeners:function(){var c=this;return{idchanged:c.onIdChanged,refresh:c.onDataRefresh,replace:c.onReplace,add:c.onAdd,bulkremove:c.onRemove,update:c.onUpdate,clear:c.refresh}},onIdChanged:function(e,h,d){this.relayFn("onIdChanged",arguments)},onDataRefresh:function(e,h,d){this.relayFn("onDataRefresh",arguments)},onReplace:function(e,h,d){this.relayFn("onReplace",arguments)},onAdd:function(e,h,d){this.relayFn("onAdd",arguments)},onRemove:function(e,h,d){this.relayFn("onRemove",arguments)},onUpdate:function(e,h,d){this.relayFn("onUpdate",arguments)},refresh:function(e,h,d){this.relayFn("refresh",arguments)},getNode:function(c,d){return this.normalView.getNode(c,d)},getCell:function(e,l){var h=this.getViewForColumn(l),j=h.getNode(e,true);return Ext.fly(j).down(l.getCellSelector())},indexOf:function(c){var d=this.lockedView.indexOf(c);if(!d){d=this.normalView.indexOf(c)}return d},focus:function(){var c=this.getSelectionModel().getCurrentPosition(),d=c?c.view:this.normalView;d.focus()},focusRow:function(c){this.normalView.focusRow(c)},focusCell:function(c){c.view.focusCell(c)},isVisible:function(c){return this.panel.isVisible(c)},getCellByPosition:function(j,e){var h=j.column,l=this.lockedGrid.getColumnManager().getColumns().length;if(h>=l){j=Ext.apply({},j);j.column-=l;return this.normalView.getCellByPosition(j,e)}else{return this.lockedView.getCellByPosition(j,e)}},getRecord:function(c){var d=this.lockedView.getRecord(c);if(!d){d=this.normalView.getRecord(c)}return d},scrollBy:function(){var c=this.normalView;c.scrollBy.apply(c,arguments)},addElListener:function(e,h,d){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)},destroy:function(){var c=this,d=c.loadMask;this.isDestroyed=true;c.clearListeners();if(d&&d.bindStore){d.bindStore(null)}}},1,0,0,0,0,[["observable",Ext.util.Observable],["bindable",Ext.util.Bindable]],[Ext.grid.locking,"View",Ext.grid,"LockingView"],function(){this.borrow(Ext.AbstractComponent,["up"]);this.borrow(Ext.view.AbstractView,["doFirstRefresh","applyFirstRefresh"])}));(Ext.cmd.derive("Ext.grid.locking.Lockable",Ext.Base,{alternateClassName:"Ext.grid.Lockable",supportsOverflowX:"overflow-x" in document.documentElement.style,syncRowHeight:true,headerCounter:0,scrollDelta:40,lockedGridCls:Ext.baseCSSPrefix+"grid-inner-locked",normalGridCls:Ext.baseCSSPrefix+"grid-inner-normal",unlockText:"Unlock",lockText:"Lock",bothCfgCopy:["invalidateScrollerOnRefresh","hideHeaders","enableColumnHide","enableColumnMove","enableColumnResize","sortableColumns","multiColumnSort","columnLines","rowLines","deferRowRender"],normalCfgCopy:["verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:[],determineXTypeToCreate:function(o){var q=this,m,p,j,n,l;if(q.subGridXType){m=q.subGridXType}else{if(!o){return"gridpanel"}p=this.getXTypes().split("/");j=p.length;n=p[j-1];l=p[j-2];if(l!=="tablepanel"){m=l}else{m=n}}return m},injectLockable:function(){this.lockable=true;this.hasView=true;var w=this,J=Ext.getScrollbarSize().height,M=w.store=Ext.StoreManager.lookup(w.store),G=w.getSelectionModel(),E,D,y,H,C,N,K,z,I,v,F,x=w.viewConfig,O=x&&x.loadMask,B=(O!==undefined)?O:w.loadMask,A=w.findPlugin("bufferedrenderer");E=w.constructLockableFeatures();if(w.features){w.features=null}D=w.constructLockablePlugins();w.plugins=D.topPlugins;y=Ext.apply({id:w.id+"-locked",isLocked:true,ownerLockable:w,xtype:w.determineXTypeToCreate(true),store:M,scrollerOwner:false,animate:false,scroll:J?false:"vertical",selModel:G,border:false,cls:w.lockedGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||w.normalGrid.floatedFromCollapse},features:E.lockedFeatures,plugins:D.lockedPlugins},w.lockedGridConfig);H=Ext.apply({id:w.id+"-normal",isLocked:false,ownerLockable:w,xtype:w.determineXTypeToCreate(),store:M,scrollerOwner:false,selModel:G,border:false,cls:w.normalGridCls,isLayoutRoot:function(){return this.floatedFromCollapse||w.lockedGrid.floatedFromCollapse},features:E.normalFeatures,plugins:D.normalPlugins},w.normalGridConfig);w.addCls(Ext.baseCSSPrefix+"grid-locked");Ext.copyTo(H,w,w.bothCfgCopy,true);Ext.copyTo(y,w,w.bothCfgCopy,true);Ext.copyTo(H,w,w.normalCfgCopy,true);Ext.copyTo(y,w,w.lockedCfgCopy,true);for(C=0;C<w.normalCfgCopy.length;C++){delete w[w.normalCfgCopy[C]]}for(C=0;C<w.lockedCfgCopy.length;C++){delete w[w.lockedCfgCopy[C]]}w.addEvents("processcolumns","lockcolumn","unlockcolumn");w.addStateEvents(["lockcolumn","unlockcolumn"]);N=w.processColumns(w.columns,y);y.columns=N.locked;if(!y.columns.items.length){y.hidden=true}H.columns=N.normal;H.flex=1;y.viewConfig=w.lockedViewConfig||{};H.viewConfig=w.normalViewConfig||{};y.viewConfig.loadingUseMsg=false;y.viewConfig.loadMask=false;if(J&&!w.supportsOverflowX){y.viewConfig.style="border-bottom:"+J+"px solid #f6f6f6;"+(y.viewConfig.style||"");H.viewConfig.style="border-bottom:"+J+"px solid #f6f6f6;"+(y.viewConfig.style||"")}H.viewConfig.loadMask=false;Ext.applyIf(y.viewConfig,x);Ext.applyIf(H.viewConfig,x);if(!w.initialConfig.layout){w.layout={type:"hbox",align:"stretch"}}w.getLayout();if(w.layout.type==="border"){if(w.split){y.split=true}if(!y.region){y.region="west"}if(!H.region){H.region="center"}w.addCls(Ext.baseCSSPrefix+"grid-locked-split")}if(!(w.layout instanceof Ext.layout.container.Box)){w.split=false}w.view=new Ext.grid.locking.View({loadMask:B,locked:y,normal:H,panel:w});I=w.lockedGrid.getView();v=w.normalGrid.getView();F=A?{}:{scroll:{fn:w.onLockedViewScroll,element:"el",scope:w}};if(J){w.lockedGrid.on({afterlayout:w.afterLockedViewLayout,scope:w});I.getOverflowStyle();if(I.scrollFlags.y){w.lockedGrid.headerCt.forceFit=true}else{F.mousewheel={fn:w.onLockedViewMouseWheel,element:"el",scope:w}}}I.on(F);F=A?{}:{scroll:{fn:w.onNormalViewScroll,element:"el",scope:w},scope:w};v.on(F);K=w.lockedGrid.headerCt;z=w.normalGrid.headerCt;w.headerCt=w.view.headerCt=new Ext.grid.locking.HeaderContainer(w);K.lockedCt=true;K.lockableInjected=true;z.lockableInjected=true;K.on({add:{buffer:1,scope:w,fn:w.onLockedHeaderAdd},columnshow:w.onLockedHeaderShow,columnhide:w.onLockedHeaderHide,sortchange:w.onLockedHeaderSortChange,columnresize:w.onLockedHeaderResize,scope:w});z.on({sortchange:w.onNormalHeaderSortChange,scope:w});w.modifyHeaderCt();w.items=[w.lockedGrid];if(w.split){w.addCls(Ext.baseCSSPrefix+"grid-locked-split");w.items[1]={xtype:"splitter"}}w.items.push(w.normalGrid);w.relayHeaderCtEvents(K);w.relayHeaderCtEvents(z);w.storeRelayers=w.relayEvents(M,["filterchange","groupchange"]);w.gridRelayers=w.relayEvents(w.normalGrid,["viewready"])},getLockingViewConfig:function(){return{xclass:"Ext.grid.locking.View",locked:this.lockedGrid,normal:this.normalGrid,panel:this}},processColumns:function(z,B){var t=this,y,w,A,u=new Ext.grid.header.Container(),v=[],C=[],D={itemId:"lockedHeaderCt",stretchMaxPartner:"^^>>#normalHeaderCt",items:v},x={itemId:"normalHeaderCt",stretchMaxPartner:"^^>>#lockedHeaderCt",items:C},q={lockedWidth:B.width||0,locked:D,normal:x},s=t.shrinkWrapLocked=!(B.width||B.flex),E;if(Ext.isObject(z)){Ext.applyIf(D,z);Ext.applyIf(x,z);E=Ext.apply({},z);delete E.items;Ext.apply(u,E);z=z.items}for(y=0,w=z.length;y<w;++y){A=z[y];if(!A.isComponent){A=u.lookupComponent(u.applyDefaults(A))}A.processed=true;if(A.locked||A.autoLock){if(s&&!A.hidden){q.lockedWidth+=t.getColumnWidth(A)||u.defaultWidth}v.push(A)}else{C.push(A)}if(!A.headerId){A.headerId=(A.initialConfig||A).id||("h"+(++t.headerCounter))}}t.fireEvent("processcolumns",t,v,C);u.destroy();if(s){B.width=(q.lockedWidth+=Ext.num(t.getSelectionModel().headerWidth,0)+(v.length?1:0))}return q},getColumnWidth:function(l){var h=l.width||0,m,j,n;if(!h&&l.isGroupHeader){m=l.items.items;j=m.length;for(n=0;n<j;n++){h+=this.getColumnWidth(m[n])}}return h},afterLockedViewLayout:function(){var p=this,q=p.lockedGrid.getView(),s=p.normalGrid.getView(),m=q.el,l=s.el,o=Ext.getScrollbarSize().height,t=(q.scrollFlags.x&&p.lockedGrid.headerCt.tooNarrow?o:0),n=(s.scrollFlags.x&&p.normalGrid.headerCt.tooNarrow?o:0);if(t!==n){if(t){if(p.supportsOverflowX){l.dom.style.overflowX="scroll";q.getOverflowEl().setStyle(q.getOverflowStyle())}else{l.dom.style.borderBottomWidth=t+"px";m.dom.style.borderBottomWidth="0px"}}else{if(p.supportsOverflowX){m.dom.style.overflowX="scroll";s.getOverflowEl().setStyle(s.getOverflowStyle())}else{m.dom.style.borderBottomWidth=n+"px";l.dom.style.borderBottomWidth="0px"}}}else{if(p.supportsOverflowX){q.getOverflowEl().dom.style.overflowX=n?"scroll":"";s.getOverflowEl().setStyle(s.getOverflowStyle())}else{l.dom.style.borderBottomWidth=m.dom.style.borderBottomWidth="0px"}}if(!Ext.isBorderBox&&!p.supportsOverflowX){m.setHeight(q.lastBox.height);l.setHeight(s.lastBox.height)}},onLockedViewMouseWheel:function(l){var n=this,j=-n.scrollDelta*l.getWheelDeltas().y,e=n.lockedGrid.getView().el.dom,o,m;if(!n.ignoreMousewheel){if(e){o=e.scrollTop!==e.scrollHeight-e.clientHeight;m=e.scrollTop!==0}if((j<0&&m)||(j>0&&o)){l.stopEvent();e.scrollTop+=j;n.normalGrid.getView().el.dom.scrollTop=e.scrollTop;n.onNormalViewScroll()}}},onLockedViewScroll:function(){var e=this,h=e.normalGrid.getView().el.dom,d=e.lockedGrid.getView().el.dom;if(h.scrollTop!==d.scrollTop){h.scrollTop=d.scrollTop}},onNormalViewScroll:function(){var e=this,h=e.normalGrid.getView().el.dom,d=e.lockedGrid.getView().el.dom;if(h.scrollTop!==d.scrollTop){d.scrollTop=h.scrollTop}},syncRowHeights:function(){var q=this,m,s=q.lockedGrid.getView(),l=q.normalGrid.getView(),p=s.all.slice(),n=l.all.slice(),t=p.length,o;if(n.length===t){for(m=0;m<t;m++){l.syncRowHeights(p[m],n[m])}o=l.el.dom.scrollTop;l.el.dom.scrollTop=o;s.el.dom.scrollTop=o}},modifyHeaderCt:function(){var c=this;c.lockedGrid.headerCt.getMenuItems=c.getMenuItems(c.lockedGrid.headerCt.getMenuItems,true);c.normalGrid.headerCt.getMenuItems=c.getMenuItems(c.normalGrid.headerCt.getMenuItems,false);c.lockedGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(c.lockedGrid.headerCt.showMenuBy,c.showMenuBy);c.normalGrid.headerCt.showMenuBy=Ext.Function.createInterceptor(c.normalGrid.headerCt.showMenuBy,c.showMenuBy)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},showMenuBy:function(h,l){var m=this.getMenu(),o=m.down("#unlockItem"),n=m.down("#lockItem"),j=o.prev();if(l.lockable===false){j.hide();o.hide();n.hide()}else{j.show();o.show();n.show();if(!o.initialConfig.disabled){o.setDisabled(l.lockable===false)}if(!n.initialConfig.disabled){n.setDisabled(!l.isLockable())}}},getMenuItems:function(o,s){var n=this,m=n.unlockText,u=n.lockText,l=Ext.baseCSSPrefix+"hmenu-unlock",t=Ext.baseCSSPrefix+"hmenu-lock",p=Ext.Function.bind(n.onUnlockMenuClick,n),q=Ext.Function.bind(n.onLockMenuClick,n);return function(){var a=o.call(this);a.push("-",{itemId:"unlockItem",iconCls:l,text:m,handler:p,disabled:!s});a.push({itemId:"lockItem",iconCls:t,text:u,handler:q,disabled:s});return a}},syncLockedWidth:function(){var o=this,j=o.lockedGrid,p=j.view,q=p.el.dom,m=o.normalGrid,n=j.headerCt.getVisibleGridColumns().length,l=m.headerCt.getVisibleGridColumns().length;Ext.suspendLayouts();if(l){m.show();if(n){if(o.shrinkWrapLocked&&!j.headerCt.forceFit){delete j.flex;j.setWidth(j.headerCt.getTableWidth()+j.el.getBorderWidth("lr"))}j.addCls(o.lockedGridCls);j.show();if(o.split){o.child("splitter").show()}}else{j.getView().clearViewEl();j.hide();if(o.split){o.child("splitter").hide()}}p.el.setStyle(p.getOverflowStyle());o.ignoreMousewheel=p.scrollFlags.y}else{m.hide();q.style.borderBottomWidth="0";j.flex=1;delete j.width;j.removeCls(o.lockedGridCls);j.show();p.el.setStyle(m.view.getOverflowStyle());o.ignoreMousewheel=true}Ext.resumeLayouts(true);return[n,l]},onLockedHeaderAdd:function(){if(!this.ignoreAddLockedColumn){this.syncLockedWidth()}},onLockedHeaderResize:function(){this.syncLockedWidth()},onLockedHeaderHide:function(){this.syncLockedWidth()},onLockedHeaderShow:function(){this.syncLockedWidth()},onLockedHeaderSortChange:Ext.emptyFn,onNormalHeaderSortChange:Ext.emptyFn,lock:function(u,o,v){var s=this,t=s.normalGrid,x=s.lockedGrid,w=t.view,n=x.view,p=t.headerCt,q,y;u=u||p.getMenu().activeHeader;v=v||x.headerCt;y=u.ownerCt;if(!u.isLockable()){return}if(u.flex){u.width=u.getWidth();u.flex=null}Ext.suspendLayouts();if(x.hidden){x.show()}w.blockRefresh=n.blockRefresh=true;y.remove(u,false);u.locked=true;s.ignoreAddLockedColumn=true;if(Ext.isDefined(o)){v.insert(o,u)}else{v.add(u)}s.ignoreAddLockedColumn=false;w.blockRefresh=n.blockRefresh=false;q=s.syncLockedWidth();if(q[0]){x.getView().refresh()}if(q[1]){t.getView().refresh()}Ext.resumeLayouts(true);s.fireEvent("lockcolumn",s,u)},unlock:function(t,n,u){var q=this,s=q.normalGrid,w=q.lockedGrid,v=s.view,m=w.view,o=w.headerCt,p;if(!Ext.isDefined(n)){n=0}t=t||o.getMenu().activeHeader;u=u||s.headerCt;Ext.suspendLayouts();v.blockRefresh=m.blockRefresh=true;t.ownerCt.remove(t,false);t.locked=false;u.insert(n,t);v.blockRefresh=m.blockRefresh=false;p=q.syncLockedWidth();if(p[0]){w.getView().refresh()}if(p[1]){s.getView().refresh()}Ext.resumeLayouts(true);q.fireEvent("unlockcolumn",q,t)},reconfigureLockable:function(j,h){var o=this,l=o.store,m=o.lockedGrid,n=o.normalGrid;if(h){m.headerCt.removeAll();n.headerCt.removeAll();m.width=null;h=o.processColumns(h,m);o.ignoreAddLockedColumn=true;m.headerCt.add(h.locked.items);o.ignoreAddLockedColumn=false;n.headerCt.add(h.normal.items);o.syncLockedWidth()}if(j&&j!==l){j=Ext.data.StoreManager.lookup(j);o.store=j;m.bindStore(j);n.bindStore(j)}else{m.getView().refresh();n.getView().refresh()}},constructLockableFeatures:function(){var o=this.features,q,p,n,m,j=0,l;if(o){if(!Ext.isArray(o)){o=[o]}n=[];m=[];l=o.length;for(;j<l;j++){q=o[j];if(!q.isFeature){q=Ext.create("feature."+q.ftype,q)}switch(q.lockableScope){case"locked":n.push(q);break;case"normal":m.push(q);break;default:q.lockableScope="both";n.push(q);m.push(p=q.clone());p.lockingPartner=q;q.lockingPartner=p}}}return{normalFeatures:m,lockedFeatures:n}},constructLockablePlugins:function(){var w=this.plugins,s,x,y,p,o,u,t=0,q,n,v;if(w){if(!Ext.isArray(w)){w=[w]}p=[];o=[];u=[];q=w.length;for(;t<q;t++){s=w[t];if(s.init){n=s.lockableScope}else{v=s.ptype?Ext.ClassManager.getByAlias(("plugin."+s.ptype)):Ext.ClassManager.get(s.xclass);n=v.prototype.lockableScope}switch(n){case"both":o.push(y=s.clonePlugin());u.push(x=s.clonePlugin());y.lockingPartner=x;x.lockingPartner=y;Ext.destroy(s);break;case"locked":o.push(s);break;case"normal":u.push(s);break;default:p.push(s)}}}return{topPlugins:p,normalPlugins:u,lockedPlugins:o}},destroyLockable:function(){Ext.destroy(this.view,this.headerCt)}},0,0,0,0,0,0,[Ext.grid.locking,"Lockable",Ext.grid,"Lockable"],function(){this.borrow(Ext.AbstractComponent,["constructPlugin"])}));(Ext.cmd.derive("Ext.grid.plugin.BufferedRenderer",Ext.AbstractPlugin,{lockableScope:"both",percentageFromEdge:0.35,variableRowHeight:false,numFromEdge:8,trailingBufferZone:10,leadingBufferZone:20,synchronousRender:true,scrollToLoadBuffer:200,viewSize:0,rowHeight:21,position:0,lastScrollDirection:1,bodyTop:0,init:function(n){var m=this,j=n.view,h={scroll:{fn:m.onViewScroll,element:"el",scope:m},boxready:m.onViewResize,resize:m.onViewResize,refresh:m.onViewRefresh,scope:m,destroyable:true},l=j.initialConfig;if(!m.variableRowHeight&&n.ownerLockable){n.ownerLockable.syncRowHeight=false}if(n.isTree||(n.ownerLockable&&n.ownerLockable.isTree)){j.blockRefresh=false;if(l&&l.loadMask===undefined){j.loadMask=true}}if(j.positionBody){h.refresh=m.onViewRefresh}m.grid=n;m.view=j;m.isRTL=j.getHierarchyState().rtl;j.bufferedRenderer=m;j.preserveScrollOnRefresh=true;j.animate=false;m.bindStore(j.dataSource);j.getViewRange=function(){return m.getViewRange()};m.position=0;m.gridListeners=n.on("reconfigure",m.onReconfigure,m);m.viewListeners=j.on(h)},bindStore:function(n){var m=this,h=m.view,l=h.dataSource,j=l&&l.isFeatureStore;if(j===n.isFeatureStore){if(m.store){m.unbindStore()}m.storeListeners=n.on({scope:m,clear:m.onStoreClear,destroyable:true});m.store=n}if(m.view.componentLayout.layoutCount){m.onViewResize(m.view,0,m.view.getHeight())}},onReconfigure:function(c,d){if(d&&d!==this.store){this.bindStore(d)}},unbindStore:function(){this.storeListeners.destroy();this.store=null},onStoreClear:function(){var c=this;if(c.view.rendered&&!c.store.isDestroyed){if(c.scrollTop!==0){c.ignoreNextScrollEvent=true;c.view.el.dom.scrollTop=0}c.bodyTop=c.scrollTop=c.position=c.scrollHeight=0;c.lastScrollDirection=c.scrollOffset=null;delete c.rowHeight}},onViewRefresh:function(){var c=this,d=c.view;if(d.all.getCount()){delete c.rowHeight}c.refreshSize();if(c.refreshing){return}if(c.scrollTop!==d.el.dom.scrollTop){c.onViewScroll()}else{if(!c.hasOwnProperty("bodyTop")){c.bodyTop=d.all.startIndex*c.rowHeight;d.el.dom.scrollTop=c.bodyTop}c.setBodyTop(c.bodyTop);if(d.all.getCount()){c.viewSize=0;c.onViewResize(d,null,d.getHeight())}}},refreshSize:function(){var e=this,h=e.view,l=h.all,j=e.getScrollHeight();if(l.count&&l.endIndex===(e.store.getCount())-1){j=e.scrollHeight=e.bodyTop+h.body.dom.offsetHeight}else{if(j!==e.scrollHeight){e.scrollHeight=j}}e.stretchView(h,j)},onViewResize:function(q,o,l,j,m){var n=this,p;n.tableTopBorderWidth=q.body.getBorderWidth("t");if(!m||l!==m){p=Math.ceil(l/n.rowHeight)+n.trailingBufferZone+n.leadingBufferZone;n.viewSize=n.setViewSize(p)}},stretchView:function(h,j){var m=this,n=(m.store.buffered?m.store.getTotalCount():m.store.getCount()),l,o;if(m.stretcher){m.stretcher.dom.style.marginTop=(n<=m.viewSize?0:(j-1))+"px"}else{o=h.el;if(h.refreshCounter){h.fixedNodes++}if(n&&(m.view.all.endIndex===n-1)){j=m.bodyTop+h.body.dom.offsetHeight}l={style:{width:"1px",height:"1px",marginTop:(j-1)+"px",position:"absolute"}};l.style[m.isRTL?"right":"left"]=0;m.stretcher=o.createChild(l,o.dom.firstChild)}},setViewSize:function(m){if(m!==this.viewSize){this.scrollTop=this.view.el.dom.scrollTop;var o=this,j=o.store,p=o.view.all.getCount(),n,l,q=o.lockingPartner;o.viewSize=j.viewSize=m;if(p){n=o.view.all.startIndex;l=Math.min(n+m-1,(j.buffered?j.getTotalCount():j.getCount())-1);if(q){q.disable()}o.renderRange(n,l);if(q){q.enable()}}}return m},getViewRange:function(){var e=this,l=e.view.all,h=e.store,j=l.getCount()?l.startIndex:l.startIndex=(h.currentPage-1)*h.pageSize;if(l.getCount()){j=l.startIndex}else{if(!h.currentPage){h.currentPage=1}j=l.startIndex=(h.currentPage-1)*(h.pageSize||1);h.currentPage=1}if(h.data.getCount()){return h.getRange(j,j+(e.viewSize||h.defaultViewSize)-1)}else{return[]}},onReplace:function(s,q,w,v){var u=this,t=u.view,o=t.all,A,x=o.getCount(),y=q+w.length-1,p=v.length-w.length,z=p*u.rowHeight;if(q>=o.startIndex+u.viewSize){u.refreshSize();return}if(!u.lockingPartner&&x&&y<o.startIndex){o.moveBlock(p);u.refreshSize();A=o.startIndex;if(p>0){u.doNotMirror=true;u.handleViewScroll(-1);u.doNotMirror=false}if(o.startIndex===A){if(o.startIndex){u.setBodyTop(u.bodyTop+=z);t.suspendEvent("scroll");t.scrollBy(0,z);t.resumeEvent("scroll");u.position=u.scrollTop=t.el.dom.scrollTop}}else{t.suspendEvent("scroll");t.scrollBy(0,(A-o.startIndex)*u.rowHeight);t.resumeEvent("scroll")}t.refreshSize(o.getCount()!==x);return}if(x&&q>o.endIndex){u.refreshSize();if(p>0){u.onRangeFetched(null,o.startIndex,Math.min(s.getCount(),o.startIndex+u.viewSize)-1,true)}t.refreshSize(o.getCount()!==x);return}if(q<o.startIndex&&y<=o.endIndex){u.refreshView(o.startIndex);return}u.refreshView()},scrollTo:function(y,F,u,J){var B=this,z=B.view,t=z.el.dom,x=B.store,A=x.buffered?x.getTotalCount():x.getCount(),C,H,D,I,v,G,w,E;if((G=z.dataSource.groupingFeature)&&(G.collapsible!==false)){y=Math.min(Math.max(y,0),z.store.getCount()-1);E=z.store.getAt(y);w=G.getGroup(E);if(w.isCollapsed){G.expand(w.name);A=x.buffered?x.getTotalCount():x.getCount()}y=G.indexOf(E)}else{y=Math.min(Math.max(y,0),A-1)}C=Math.max(Math.min(y-(Math.floor((B.leadingBufferZone+B.trailingBufferZone)/2)),A-B.viewSize+1),0);v=Math.max(C*B.rowHeight-B.tableTopBorderWidth,0);H=Math.min(C+B.viewSize-1,A-1);x.getRange(C,H,{callback:function(c,a,d){B.renderRange(a,d,true);D=x.data.getRange(y,y)[0];I=z.getNode(D,false);z.body.dom.style.top=v+"px";B.position=B.scrollTop=t.scrollTop=v=Math.min(Math.max(0,v-z.body.getOffsetsTo(I)[1]),t.scrollHeight-t.clientHeight);if(Ext.isIE){t.scrollTop=v}if(F){z.selModel.select(D)}if(u){u.call(J||B,y,D)}}})},onViewScroll:function(q,e){var p=this,n=p.store,m=(n.buffered?n.getTotalCount():n.getCount()),s,u,t=p.scrollTop=p.view.el.dom.scrollTop,o=false;if(p.ignoreNextScrollEvent){p.ignoreNextScrollEvent=false;return}if(!(p.disabled||m<p.viewSize)){s=t-p.position;u=s>0?1:-1;if(Math.abs(s)>=20||(u!==p.lastScrollDirection)){p.lastScrollDirection=u;p.handleViewScroll(p.lastScrollDirection);o=true}}if(!o){if(p.lockingPartner&&p.lockingPartner.scrollTop!==t){p.lockingPartner.view.el.dom.scrollTop=t}}},handleViewScroll:function(o){var q=this,p=q.view.all,l=q.store,n=q.viewSize,m=(l.buffered?l.getTotalCount():l.getCount()),s,t;if(o==-1){if(p.startIndex){if((q.getFirstVisibleRowIndex()-p.startIndex)<q.numFromEdge){s=Math.max(0,q.getLastVisibleRowIndex()+q.trailingBufferZone-n)}}}else{if(p.endIndex<m-1){if((p.endIndex-q.getLastVisibleRowIndex())<q.numFromEdge){s=Math.max(0,q.getFirstVisibleRowIndex()-q.trailingBufferZone)}}}if(s!=null){t=Math.min(s+n-1,m-1);if(s!==p.startIndex||t!==p.endIndex){q.renderRange(s,t);return}}if(q.lockingPartner&&q.lockingPartner.view.el&&q.lockingPartner.scrollTop!==q.scrollTop){q.lockingPartner.view.el.dom.scrollTop=q.scrollTop}},refreshView:function(n){var q=this,m=q.view,t=m.selModel,o=m.all,l=q.store,s=l.getCount()-1,n=Math.max(0,Math.min(n==null?o.startIndex:n,s-q.viewSize+1)),p=Math.min(n+q.viewSize-1,s);o.removeRange(null,null,true);m.replaceColumnSizer();if(p-n+1){q.refreshing=m.refreshing=true;q.renderRange(n,p,true);m.fireEvent("refresh",m,l.getRange(n,p));t.onLastFocusChanged(null,t.lastFocused,true)}else{q.setBodyTop(0);m.fireEvent("refresh",m,[])}},renderRange:function(l,j,m){var o=this,n=o.view.all,h=o.store;if(!(l===n.startIndex&&j===n.endIndex)){if(h.rangeCached(l,j)){o.cancelLoad();if(o.synchronousRender||m){o.onRangeFetched(null,l,j)}else{if(!o.renderTask){o.renderTask=new Ext.util.DelayedTask(o.onRangeFetched,o,null,false)}o.renderTask.delay(1,null,null,[null,l,j])}}else{o.attemptLoad(l,j)}}},onRangeFetched:function(A,G,D,F){var x=this,v=x.view,E,s=v.all,H,t=0,C=G*x.rowHeight-x.tableTopBorderWidth,y=v.lockingPartner&&!F&&!x.doNotMirror&&v.lockingPartner.bufferedRenderer,w,z,u,B;if(v.isDestroyed){return}if(!A){A=x.store.getRange(G,D);if(!A){return}}if(G<s.startIndex&&D>s.endIndex){u=s.startIndex-G;s.clear(true);z=Ext.Array.slice(v.doAdd(A,G),0,u);for(B=0;B<z.length;B++){t-=z[B].offsetHeight}x.setBodyTop(x.bodyTop+t);return}if(G>s.endIndex||D<s.startIndex){s.clear(true);w=C}if(!s.getCount()){v.doAdd(A,G)}else{if(D>s.endIndex){H=Math.max(G-s.startIndex,0);if(x.variableRowHeight){t=s.item(s.startIndex+H,true).offsetTop}s.scroll(Ext.Array.slice(A,s.endIndex+1-G),1,H,G,D);if(x.variableRowHeight){w=x.bodyTop+t}else{w=C}}else{H=Math.max(s.endIndex-D,0);E=s.startIndex;s.scroll(Ext.Array.slice(A,0,s.startIndex-G),-1,H,G,D);if(x.variableRowHeight){w=x.bodyTop-s.item(E,true).offsetTop}else{w=C}}}x.position=x.scrollTop;if(v.positionBody){x.setBodyTop(w,C)}if(y&&!y.disabled){y.onRangeFetched(A,G,D,true);if(y.scrollTop!==x.scrollTop){y.view.el.dom.scrollTop=x.scrollTop}}},setBodyTop:function(p,n){var o=this,j=o.view,q=o.store,l=j.body.dom,m;p=Math.floor(p);if(n!==undefined){m=p-n;p=n}l.style.position="absolute";l.style.top=(o.bodyTop=Math.max(p,0))+"px";if(o.isRTL&&Ext.supports.xOriginBug&&j.scrollFlags.y){l.style.right=-Ext.getScrollbarSize().width+"px"}if(m){o.scrollTop=o.position=j.el.dom.scrollTop-=m}if(j.all.endIndex===(q.buffered?q.getTotalCount():q.getCount())-1){o.stretchView(j,o.bodyTop+l.offsetHeight)}},getFirstVisibleRowIndex:function(p,w,x,t){var s=this,q=s.view,n=q.all,y=n.elements,v=q.el.dom.clientHeight,u,o;if(n.getCount()&&s.variableRowHeight){if(!arguments.length){p=n.startIndex;w=n.endIndex;x=s.scrollTop;t=x+v;if(s.bodyTop>t||s.bodyTop+q.body.getHeight()<x){return Math.floor(s.scrollTop/s.rowHeight)}u=p+Math.min(s.numFromEdge+((s.lastScrollDirection==-1)?s.leadingBufferZone:s.trailingBufferZone),Math.floor((w-p)/2))}else{u=p+Math.floor((w-p)/2)}o=s.bodyTop+y[u].offsetTop;if(o+y[u].offsetHeight<x){return s.getFirstVisibleRowIndex(u+1,w,x,t)}if(o<=x){return u}else{if(u!==p){return s.getFirstVisibleRowIndex(p,u-1,x,t)}}}return Math.floor(s.scrollTop/s.rowHeight)},getLastVisibleRowIndex:function(q,y,z,v){var t=this,s=t.view,o=s.all,A=o.elements,x=s.el.dom.clientHeight,w,p,u;if(o.getCount()&&t.variableRowHeight){if(!arguments.length){q=o.startIndex;y=o.endIndex;z=t.scrollTop;v=z+x;if(t.bodyTop>v||t.bodyTop+s.body.getHeight()<z){return Math.floor(t.scrollTop/t.rowHeight)+Math.ceil(x/t.rowHeight)}w=y-Math.min(t.numFromEdge+((t.lastScrollDirection==1)?t.leadingBufferZone:t.trailingBufferZone),Math.floor((y-q)/2))}else{w=q+Math.floor((y-q)/2)}p=t.bodyTop+A[w].offsetTop;if(p>v){return t.getLastVisibleRowIndex(q,w-1,z,v)}u=p+A[w].offsetHeight;if(u>=v){return w}else{if(w!==y){return t.getLastVisibleRowIndex(w+1,y,z,v)}}}return t.getFirstVisibleRowIndex()+Math.ceil(x/t.rowHeight)},getScrollHeight:function(){var m=this,j=m.view,h=m.store,n=!m.hasOwnProperty("rowHeight"),l=m.store.getCount();if(!l){return 0}if(n){if(j.all.getCount()){m.rowHeight=Math.floor(j.body.getHeight()/j.all.getCount())}}return this.scrollHeight=Math.floor((h.buffered?h.getTotalCount():h.getCount())*m.rowHeight)},attemptLoad:function(h,e){var d=this;if(d.scrollToLoadBuffer){if(!d.loadTask){d.loadTask=new Ext.util.DelayedTask(d.doAttemptLoad,d,[])}d.loadTask.delay(d.scrollToLoadBuffer,d.doAttemptLoad,d,[h,e])}else{d.store.getRange(h,e,{callback:d.onRangeFetched,scope:d,fireEvent:false})}},cancelLoad:function(){if(this.loadTask){this.loadTask.cancel()}},doAttemptLoad:function(c,d){this.store.getRange(c,d,{callback:this.onRangeFetched,scope:this,fireEvent:false})},destroy:function(){var c=this,d=c.view;if(d&&d.el){d.el.un("scroll",c.onViewScroll,c)}Ext.destroy(c.viewListeners,c.storeListeners,c.gridListeners)}},0,0,0,0,["plugin.bufferedrenderer"],0,[Ext.grid.plugin,"BufferedRenderer"],0));(Ext.cmd.derive("Ext.grid.plugin.Editing",Ext.AbstractPlugin,{clicksToEdit:2,triggerEvent:undefined,relayedEvents:["beforeedit","edit","validateedit","canceledit"],defaultFieldXType:"textfield",editStyle:"",constructor:function(d){var c=this;c.addEvents("beforeedit","edit","validateedit","canceledit");c.callParent(arguments);c.mixins.observable.constructor.call(c);c.on("edit",function(e,a){c.fireEvent("afteredit",e,a)})},init:function(d){var c=this;c.grid=d;c.view=d.view;c.initEvents();c.mon(d,{beforereconfigure:c.onBeforeReconfigure,reconfigure:c.onReconfigure,scope:c,beforerender:{fn:c.onReconfigure,single:true,scope:c}});d.relayEvents(c,c.relayedEvents);if(c.grid.ownerLockable){c.grid.ownerLockable.relayEvents(c,c.relayedEvents)}d.isEditable=true;d.editingPlugin=d.view.editingPlugin=c},onBeforeReconfigure:function(){this.reconfiguring=true},onReconfigure:function(){this.initFieldAccessors(this.grid.getTopLevelColumnManager().getColumns());delete this.reconfiguring},destroy:function(){var c=this,d=c.grid;Ext.destroy(c.keyNav);c.clearListeners();if(d){d.editingPlugin=d.view.editingPlugin=c.grid=c.view=c.editor=c.keyNav=null}},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(h){if(h.isGroupHeader){h=h.getGridColumns()}else{if(!Ext.isArray(h)){h=[h]}}var m=this,j,l=h.length,c;for(j=0;j<l;j++){c=h[j];if(!c.getEditor){c.getEditor=function(d,a){return m.getColumnField(this,a)}}if(!c.hasEditor){c.hasEditor=function(){return m.hasColumnField(this)}}if(!c.setEditor){c.setEditor=function(a){m.setColumnField(this,a)}}}},removeFieldAccessors:function(h){if(h.isGroupHeader){h=h.getGridColumns()}else{if(!Ext.isArray(h)){h=[h]}}var j,l=h.length,c;for(j=0;j<l;j++){c=h[j];c.getEditor=c.hasEditor=c.setEditor=c.field=c.editor=null}},getColumnField:function(d,e){var h=d.field;if(!(h&&h.isFormField)){h=d.field=this.createColumnField(d,e)}return h},hasColumnField:function(c){return !!(c.field&&c.field.isComponent)},setColumnField:function(d,c){d.field=c;d.field=this.createColumnField(d)},createColumnField:function(l,h){var j=l.field,e;if(!j&&l.editor){j=l.editor;l.editor=null}if(!j&&h){j=h}if(j){e=l.dataIndex;if(j.isComponent){j.column=l}else{if(Ext.isString(j)){j={name:e,xtype:j,column:l}}else{j=Ext.apply({name:e,column:l},j)}j=Ext.ComponentManager.create(j,this.defaultFieldXType)}j.dataIndex=e;j.isEditorComponent=true;l.field=j}return j},initEvents:function(){var c=this;c.initEditTriggers();c.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var c=this,d=c.view;if(c.triggerEvent=="cellfocus"){c.mon(d,"cellfocus",c.onCellFocus,c)}else{if(c.triggerEvent=="rowfocus"){c.mon(d,"rowfocus",c.onRowFocus,c)}else{if(d.getSelectionModel().isCellModel){d.onCellFocus=Ext.Function.bind(c.beforeViewCellFocus,c)}c.mon(d,c.triggerEvent||("cell"+(c.clicksToEdit===1?"click":"dblclick")),c.onCellClick,c)}}c.initAddRemoveHeaderEvents();d.on("render",c.initKeyNavHeaderEvents,c,{single:true})},beforeViewCellFocus:function(c){if(this.view.selModel.keyNavigation||!this.editing||!this.isCellEditable||!this.isCellEditable(c.row,c.columnHeader)){this.view.focusCell.apply(this.view,arguments)}},onRowFocus:function(e,h,d){this.startEdit(h,0)},onCellFocus:function(h,d,e){this.startEdit(e.row,e.column)},onCellClick:function(p,o,v,u,e,y,s){var q=this,w=p.expanderSelector,x=p.ownerCt.getColumnManager().getHeaderAtIndex(v),t=x.getEditor(u);if(q.shouldStartEdit(t)&&(!w||!s.getTarget(w))){q.startEdit(u,x)}},initAddRemoveHeaderEvents:function(){var d=this,c=d.grid.headerCt;d.mon(c,{scope:d,add:d.onColumnAdd,columnmove:d.onColumnMove,beforedestroy:d.beforeGridHeaderDestroy})},initKeyNavHeaderEvents:function(){var c=this;c.keyNav=Ext.create("Ext.util.KeyNav",c.view.el,{enter:c.onEnterKey,esc:c.onEscKey,scope:c})},onColumnAdd:function(d,c){this.initFieldAccessors(c)},onColumnMove:Ext.emptyFn,onEnterKey:function(n){var p=this,q=p.grid,e=q.getSelectionModel(),l,m,o;if(p.editing){return true}if(e.getCurrentPosition&&(m=e.getCurrentPosition())){l=m.record;o=m.columnHeader}else{l=e.getLastSelected();o=q.getColumnManager().getHeaderAtIndex(0)}if(l&&o){p.startEdit(l,o)}},onEscKey:function(c){return this.cancelEdit()},beforeEdit:Ext.emptyFn,shouldStartEdit:function(c){return !!c},startEdit:function(h,l){var m=this,n,j=m.grid.lockable?m.grid:m.view;if(!j.componentLayoutCounter){j.on({boxready:Ext.Function.bind(m.startEdit,m,[h,l]),single:true});return false}if(m.grid.collapsed||!m.grid.view.isVisible(true)){return false}n=m.getEditingContext(h,l);if(n==null){return false}if(!m.preventBeforeCheck){if(m.beforeEdit(n)===false||m.fireEvent("beforeedit",m,n)===false||n.cancel){return false}}return n},getEditingContext:function(p,s){var n=this,u=n.grid,o=u.columnManager,m,l,t,q;if(Ext.isNumber(s)){s=o.getHeaderAtIndex(s)}if(!s){return}if(s.hidden){s=s.next(":not([hidden])")||s.prev(":not([hidden])")}m=s.getOwnerHeaderCt().view;l=m.getNode(p,true);if(!l){return}q=o.getHeaderIndex(s);if(Ext.isNumber(p)){t=p;p=m.getRecord(l)}else{t=m.indexOf(l)}if(!p){return}return{grid:u,view:m,store:m.dataSource,record:p,field:s.dataIndex,value:p.get(s.dataIndex),row:l,column:s,rowIdx:t,colIdx:q}},cancelEdit:function(){var c=this;c.editing=false;c.fireEvent("canceledit",c,c.context)},completeEdit:function(){var c=this;if(c.editing&&c.validateEdit()){c.fireEvent("edit",c,c.context)}c.context=null;c.editing=false},validateEdit:function(){var c=this,d=c.context;return c.fireEvent("validateedit",c,d)!==false&&!d.cancel}},1,0,0,0,["editing.editing"],[["observable",Ext.util.Observable]],[Ext.grid.plugin,"Editing"],0));(Ext.cmd.derive("Ext.grid.plugin.CellEditing",Ext.grid.plugin.Editing,{lockableScope:"both",init:function(e){var h=this,d=h.lockingPartner;h.callParent([e]);if(d){if(d.editors){h.editors=d.editors}else{h.editors=d.editors=new Ext.util.MixedCollection(false,function(a){return a.editorId})}}else{h.editors=new Ext.util.MixedCollection(false,function(a){return a.editorId})}if(Ext.isIE){e.view.on("refresh",function(){var a=this,c=a.context;if(a.activeEditor){setTimeout(function(){a.startEdit(c.record,c.column)},1)}},h)}},beforeGridHeaderDestroy:function(m){var n=this,q=n.grid.getColumnManager().getColumns(),l=q.length,j,o,p;for(j=0;j<l;j++){o=q[j];p=n.editors.getByKey(o.getItemId());if(!p&&o.hasEditor&&o.hasEditor()){p=o.getEditor()}Ext.destroy(p);n.removeFieldAccessors(o)}},onReconfigure:function(h,e,d){if(d){this.editors.clear()}this.callParent()},destroy:function(){var c=this;if(c.editors){c.editors.each(Ext.destroy,Ext);c.editors.clear()}c.callParent(arguments)},initCancelTriggers:function(){var h=this,d=h.grid,e=d.view;h.mon(d,{columnresize:h.cancelEdit,columnmove:h.cancelEdit,scope:h})},isCellEditable:function(h,j){var l=this,e=l.getEditingContext(h,j);if(l.grid.view.isVisible(true)&&e){j=e.column;h=e.record;if(j&&l.getEditor(h,j)){return true}}},startEdit:function(l,o,q){var p=this,m,n,j;if(!q){p.preventBeforeCheck=true;q=p.callParent(arguments);delete p.preventBeforeCheck;if(q===false){return false}}if(q&&p.grid.view.isVisible(true)){l=q.record;o=q.column;q.originalValue=q.value=l.get(o.dataIndex);n=(o&&o.getEditor(l))&&!(p.beforeEdit(q)===false||p.fireEvent("beforeedit",p,q)===false||q.cancel);if(n){j=p.getEditor(l,o);m=j.editing}else{return false}p.completeEdit(m);if(p.editing){return false}p.context=q;p.grid.view.cancelFocus();p.view.scrollCellIntoView(p.getCell(l,o));if(j){if(Ext.isIE&&m){j.selectSameEditor=true}p.showEditor(j,q,q.value);return true}return false}},showEditor:function(p,u,l){var n=this,q=u.record,s=u.column,t=n.grid.getSelectionModel(),o=t.preventFocus,m=t.getCurrentPosition();if(!s.up(n.view.ownerCt)){return n.lockingPartner.showEditor(p,n.lockingPartner.getEditingContext(m.record,m.columnHeader),l)}n.setEditingContext(u);n.setActiveEditor(p);n.setActiveRecord(q);n.setActiveColumn(s);if(!m||!t.isCellSelected(n.view,q,s)){t.preventFocus=true;t.selectByPosition({row:q,column:s,view:n.view},true);t.preventFocus=o}if(Ext.isIE&&Ext.EventObject.type==="click"){Ext.Function.defer(p.startEdit,1,p,[n.getCell(q,s),l,u])}else{p.startEdit(n.getCell(q,s),l,u)}n.editing=true;n.scroll=n.view.el.getScroll()},completeEdit:function(d){var c=this.getActiveEditor();if(c){c.completeEdit(d)}},setEditingContext:function(c){this.context=c;if(this.lockingPartner){this.lockingPartner.context=c}},setActiveEditor:function(c){this.activeEditor=c;if(this.lockingPartner){this.lockingPartner.activeEditor=c}},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(c){this.activeColumn=c;if(this.lockingPartner){this.lockingPartner.activeColumn=c}},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(c){this.activeRecord=c;if(this.lockingPartner){this.lockingPartner.activeRecord=c}},getActiveRecord:function(){return this.activeRecord},getEditor:function(l,o){var m=this,n=m.editors,p=o.getItemId(),q=n.getByKey(p),j=m.grid.ownerLockable||m.grid;if(!q){q=o.getEditor(l);if(!q){return false}if(q instanceof Ext.grid.CellEditor){q.floating=true}else{q=new Ext.grid.CellEditor({floating:true,editorId:p,field:q})}q.field.excludeForm=true;j.add(q);q.on({scope:m,specialkey:m.onSpecialKey,complete:m.onEditComplete,canceledit:m.cancelEdit});o.on("removed",m.cancelActiveEdit,m);n.add(q)}if(o.isTreeColumn){q.isForTree=o.isTreeColumn;q.addCls(Ext.baseCSSPrefix+"tree-cell-editor")}q.setGrid(m.grid);q.editingPlugin=m;return q},cancelActiveEdit:function(c){var d=this.context;if(d&&d.column===c){this.cancelEdit()}},setColumnField:function(d,h){var e=this.editors.getByKey(d.getItemId());Ext.destroy(e,d.field);this.editors.removeAtKey(d.getItemId());this.callParent(arguments)},getCell:function(d,c){return this.grid.getView().getCell(d,c)},onSpecialKey:function(h,l,e){var j;if(e.getKey()===e.TAB){e.stopEvent();if(h){h.onEditorTab(e)}j=h.up("tablepanel").getSelectionModel();if(j.onEditorTab){return j.onEditorTab(h.editingPlugin,e)}}},onEditComplete:function(q,m,j){var n=this,o=n.getActiveColumn(),p=n.context,l;if(o){l=p.record;n.setActiveEditor(null);n.setActiveColumn(null);n.setActiveRecord(null);p.value=m;if(!n.validateEdit()){n.editing=false;return}if(!l.isEqual(m,j)){l.set(o.dataIndex,m)}p.view.focusRow(p.rowIdx,100,true);n.fireEvent("edit",n,p);n.editing=false}},cancelEdit:function(){var h=this,e=h.context,d=h.getActiveEditor();h.setActiveEditor(null);h.setActiveColumn(null);h.setActiveRecord(null);if(d){if(d.field){h.context.value=("editedValue" in d)?d.editedValue:d.getValue();d.cancelEdit()}e.view.focusRow(e.rowIdx,100,true);h.callParent(arguments);return}return true},startEditByPosition:function(e){var h=this.grid.getColumnManager(),j,l;if(!e.isCellContext){e=new Ext.grid.CellContext(this.view).setPosition(e)}j=h.getHeaderIndex(e.columnHeader);e.setColumn(h.getVisibleHeaderClosestToIndex(j));return this.startEdit(e.record,e.columnHeader)}},0,0,0,0,["plugin.cellediting"],0,[Ext.grid.plugin,"CellEditing"],0));(Ext.cmd.derive("Ext.grid.plugin.DivRenderer",Ext.AbstractPlugin,{tableTpl:['<div id="{view.id}-table" class="',Ext.baseCSSPrefix,"{view.id}-table ",Ext.baseCSSPrefix,'grid-table" style="{tableStyle}" {ariaTableAttr}>',"{%","values.view.renderRows(values.rows, values.viewStartIndex, out);","%}","</div>",{priority:0}],rowTpl:["{%",'var dataRowCls = values.recordIndex === -1 ? "" : " '+Ext.baseCSSPrefix+'grid-data-row";',"%}",'<dl {[values.rowId ? ("id=\\"" + values.rowId + "\\"") : ""]} ','data-boundView="{view.id}" ','data-recordId="{record.internalId}" ','data-recordIndex="{recordIndex}" ','class="{[values.itemClasses.join(" ")]} {[values.rowClasses.join(" ")]}{[dataRowCls]}" ','style="position:relative" ',"{rowAttr:attributes} {ariaRowAttr}>",'<tpl for="columns">{%',"parent.view.renderCell(values, parent.record, parent.recordIndex, xindex - 1, out, parent)","%}","</tpl>","</dl>",{priority:0}],cellTpl:['<dt class="{tdCls}" {tdAttr} data-cellIndex="{cellIndex}" {ariaCellAttr}>','<div {unselectableAttr} class="'+Ext.baseCSSPrefix+'grid-cell-inner"','style="text-align:{align};<tpl if="style">{style}</tpl>" {ariaCellInnerAttr}>{value}</div>',"</dt>",{priority:0}],selectors:{bodySelector:"div",nodeContainerSelector:"div",itemSelector:"dl."+Ext.baseCSSPrefix+"grid-row",dataRowSelector:"dl."+Ext.baseCSSPrefix+"grid-data-row",cellSelector:"dt."+Ext.baseCSSPrefix+"grid-cell",innerSelector:"div."+Ext.baseCSSPrefix+"grid-cell-inner",getNodeContainerSelector:function(){return this.getBodySelector()},getNodeContainer:function(){return this.el.getById(this.id+"-table",true)}},init:function(c){var d=c.getView();d.tableTpl=Ext.XTemplate.getTpl(this,"tableTpl");d.rowTpl=Ext.XTemplate.getTpl(this,"rowTpl");d.cellTpl=Ext.XTemplate.getTpl(this,"cellTpl");Ext.apply(d,this.selectors)}},0,0,0,0,["plugin.divrenderer"],0,[Ext.grid.plugin,"DivRenderer"],0));(Ext.cmd.derive("Ext.grid.plugin.DragDrop",Ext.AbstractPlugin,{dragText:"{0} selected row{1}",ddGroup:"GridDD",enableDrop:true,enableDrag:true,containerScroll:false,init:function(c){c.on("render",this.onViewRender,this,{single:true})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},enable:function(){var c=this;if(c.dragZone){c.dragZone.unlock()}if(c.dropZone){c.dropZone.unlock()}c.callParent()},disable:function(){var c=this;if(c.dragZone){c.dragZone.lock()}if(c.dropZone){c.dropZone.lock()}c.callParent()},onViewRender:function(e){var d=this,h;if(d.enableDrag){if(d.containerScroll){h=e.getEl()}d.dragZone=new Ext.view.DragZone(Ext.apply({view:e,ddGroup:d.dragGroup||d.ddGroup,dragText:d.dragText,containerScroll:d.containerScroll,scrollEl:h},d.dragZone))}if(d.enableDrop){d.dropZone=new Ext.grid.ViewDropZone(Ext.apply({view:e,ddGroup:d.dropGroup||d.ddGroup},d.dropZone))}}},0,0,0,0,["plugin.gridviewdragdrop"],0,[Ext.grid.plugin,"DragDrop"],0));(Ext.cmd.derive("Ext.grid.plugin.RowEditing",Ext.grid.plugin.Editing,{lockableScope:"top",editStyle:"row",autoCancel:true,errorSummary:true,constructor:function(){var c=this;c.callParent(arguments);if(!c.clicksToMoveEditor){c.clicksToMoveEditor=c.clicksToEdit}c.autoCancel=!!c.autoCancel},destroy:function(){Ext.destroy(this.editor);this.callParent(arguments)},onBeforeReconfigure:function(){this.callParent(arguments);this.cancelEdit()},onReconfigure:function(j,e,l){var h=this.editor;this.callParent(arguments);if(l&&h&&h.rendered){h.needsSyncFieldWidths=true}},shouldStartEdit:function(c){return true},startEdit:function(j,l){var m=this,n=m.getEditor(),h;if(Ext.isEmpty(l)){l=m.grid.getTopLevelVisibleColumnManager().getHeaderAtIndex(0)}if(n.beforeEdit()!==false){h=m.callParent([j,l]);if(h){m.context=h;if(m.lockingPartner){m.lockingPartner.cancelEdit()}n.startEdit(h.record,h.column,h);m.editing=true;return true}}return false},cancelEdit:function(){var c=this;if(c.editing){c.getContextFieldValues();c.getEditor().cancelEdit();c.callParent(arguments);return}return true},onEnter:function(c){if(this.editor.down("#cancel").owns(c)){return this.cancelEdit()}else{this.completeEdit()}},completeEdit:function(){var c=this;if(c.editing&&c.validateEdit()){c.editing=false;c.fireEvent("edit",c,c.context)}},validateEdit:function(){this.getContextFieldValues();return this.callParent(arguments)&&this.getEditor().completeEdit()},getEditor:function(){var c=this;if(!c.editor){c.editor=c.initEditor()}return c.editor},getContextFieldValues:function(){var q=this.editor,v=this.context,s=v.record,m={},u={},o=q.query(">[isFormField]"),p=o.length,t,w,n;for(t=0;t<p;t++){n=o[t];w=n.dataIndex;m[w]=n.getValue();u[w]=s.get(w)}Ext.apply(v,{newValues:m,originalValues:u})},initEditor:function(){return new Ext.grid.RowEditor(this.initEditorConfig())},initEditorConfig:function(){var p=this,u=p.grid,o=p.view,t=u.headerCt,s=["saveBtnText","cancelBtnText","errorsText","dirtyText"],n,v=s.length,q={autoCancel:p.autoCancel,errorSummary:p.errorSummary,fields:t.getGridColumns(),hidden:true,view:o,editingPlugin:p},m;for(n=0;n<v;n++){m=s[n];if(Ext.isDefined(p[m])){q[m]=p[m]}}return q},initEditTriggers:function(){var d=this,e=d.view,h=d.clicksToMoveEditor===1?"click":"dblclick";d.callParent(arguments);if(d.clicksToMoveEditor!==d.clicksToEdit){d.mon(e,"cell"+h,d.moveEditorByClick,d)}e.on({render:function(){d.mon(d.grid.headerCt,{scope:d,columnresize:d.onColumnResize,columnhide:d.onColumnHide,columnshow:d.onColumnShow})},single:true})},moveEditorByClick:function(){var c=this;if(c.editing){c.superclass.onCellClick.apply(c,arguments)}},onColumnAdd:function(h,l){if(l.isHeader){var j=this,e;j.initFieldAccessors(l);e=j.editor;if(e){e.onColumnAdd(l)}}},beforeGridHeaderDestroy:function(l){var o=this.grid.getColumnManager().getColumns(),j=o.length,h,n,m;for(h=0;h<j;h++){n=o[h];if(n.hasEditor){if(n.hasEditor()&&(m=n.getEditor())){m.destroy()}this.removeFieldAccessors(n)}}},onColumnResize:function(j,m,n){if(m.isHeader){var l=this,h=l.getEditor();if(h){h.onColumnResize(m,n)}}},onColumnHide:function(h,l){var j=this,e=j.getEditor();if(e){e.onColumnHide(l)}},onColumnShow:function(h,l){var j=this,e=j.getEditor();if(e){e.onColumnShow(l)}},onColumnMove:function(j,n,o,l){var m=this,h=m.getEditor();m.initFieldAccessors(n);if(h){h.onColumnMove(n,o,l)}},setColumnField:function(e,j){var l=this,h=l.getEditor();if(h){h.destroyColumnEditor(e)}l.callParent(arguments);if(h){h.insertColumnEditor(e)}},createColumnField:function(l,h){var e=this.editor,j;if(e){j=e.getDefaultFieldCfg()}return this.callParent([l,h||j])}},1,0,0,0,["plugin.rowediting"],0,[Ext.grid.plugin,"RowEditing"],0));(Ext.cmd.derive("Ext.grid.plugin.RowExpander",Ext.AbstractPlugin,{lockableScope:"normal",columnWidth:24,rowBodyTpl:null,lockedTpl:null,expandOnEnter:true,expandOnDblClick:true,selectRowOnExpand:false,rowBodyTrSelector:"."+Ext.baseCSSPrefix+"grid-rowbody-tr",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowCollapsedCls:Ext.baseCSSPrefix+"grid-row-collapsed",addCollapsedCls:{before:function(e,d){var h=this.rowExpander;if(!h.recordsExpanded[e.record.internalId]){e.itemClasses.push(h.rowCollapsedCls)}},priority:500},setCmp:function(o){var m=this,n=[],l,j,h;m.callParent(arguments);m.recordsExpanded={};j=m.rowBodyTpl=Ext.XTemplate.getTpl(m,"rowBodyTpl");h=m.lockedTpl=Ext.XTemplate.getTpl(m,"lockedTpl");l={ftype:"rowbody",recordsExpanded:m.recordsExpanded,rowBodyHiddenCls:m.rowBodyHiddenCls,rowCollapsedCls:m.rowCollapsedCls,setupRowData:m.getRowBodyFeatureData,setup:m.setup};n.push(Ext.apply({lockableScope:"normal",getRowBodyContents:function(a){return j.applyTemplate(a.getData())}},l));if(h){n.push(Ext.apply({lockableScope:"locked",getRowBodyContents:function(a){return h.applyTemplate(a.getData())}},l))}if(o.features){o.features=Ext.Array.push(n,o.features)}else{o.features=n}},init:function(o){var l=this,h=o,j,n,m;if(o.lockable){o=o.lockedGrid}l.callParent(arguments);l.grid=o;j=l.view=o.getView();l.addExpander();l.bindView(j);j.addRowTpl(l.addCollapsedCls).rowExpander=l;if(o.ownerLockable){h=o.ownerLockable;h.syncRowHeight=false;m=h.lockedGrid.getView();l.bindView(m);m.addRowTpl(l.addCollapsedCls).rowExpander=l;h.mon(h,"columnschanged",l.refreshRowHeights,l);h.mon(h.store,"datachanged",l.refreshRowHeights,l)}h.on("beforereconfigure",l.beforeReconfigure,l)},beforeReconfigure:function(n,j,o,m,h){var l=this.getHeaderConfig();l.locked=true;o.unshift(l)},addExpander:function(){var d=this,e=d.grid,h=d.getHeaderConfig();if(e.ownerLockable){d.grid=e=e.ownerLockable.lockedGrid;e.width+=h.width;e.hidden=false}e.headerCt.insert(0,h);e.getSelectionModel().injectCheckbox=1},getRowBodyFeatureData:function(e,h,j){var l=this;l.self.prototype.setupRowData.apply(l,arguments);j.rowBody=l.getRowBodyContents(e);j.rowBodyCls=l.recordsExpanded[e.internalId]?"":l.rowBodyHiddenCls},setup:function(d,h){var e=this;e.self.prototype.setup.apply(e,arguments);if(!e.grid.ownerLockable){h.rowBodyColspan-=1}},bindView:function(c){if(this.expandOnEnter){c.on("itemkeydown",this.onKeyDown,this)}if(this.expandOnDblClick){c.on("itemdblclick",this.onDblClick,this)}},onKeyDown:function(m,p,e,u,o){if(o.getKey()==o.ENTER){var t=m.store,s=m.getSelectionModel().getSelection(),n=s.length,q=0;for(;q<n;q++){u=t.indexOf(s[q]);this.toggleRow(u,s[q])}}},onDblClick:function(e,h,j,m,l){this.toggleRow(m,h)},toggleRow:function(E,y){var w=this,v=w.view,D=v.getNode(E),A=Ext.fly(D,"_rowExpander"),z,x=A.down(w.rowBodyTrSelector,true),s=A.hasCls(w.rowCollapsedCls),u=s?"removeCls":"addCls",F,t,C=v.getSizeModel().height.shrinkWrap,G,B;Ext.suspendLayouts();A[u](w.rowCollapsedCls);Ext.fly(x)[u](w.rowBodyHiddenCls);w.recordsExpanded[y.internalId]=s;if(C){v.refreshSize()}if(w.grid.ownerLockable){A.setHeight("");B=A.getHeight();F=w.grid.ownerLockable;t=F.getView();v=F.lockedGrid.view;A.setHeight(s?B:"");z=Ext.fly(v.getNode(E),"_rowExpander");z[u](w.rowCollapsedCls);if(w.lockedTpl){x=z.down(w.rowBodyTrSelector,true);Ext.fly(x)[u](w.rowBodyHiddenCls);G=z.getHeight();if(s){if(G>B){A.setHeight(G)}else{z.setHeight(B)}}else{z.setHeight("")}}else{z.setHeight(s?B:"")}if(C){v.refreshSize()}}else{t=v}t.fireEvent(s?"expandbody":"collapsebody",A.dom,y,x);Ext.resumeLayouts(true)},refreshRowHeights:function(){Ext.globalEvents.on({idle:this.doRefreshRowHeights,scope:this,single:true})},doRefreshRowHeights:function(){var p=this,n=p.recordsExpanded,o,s,m=p.grid.ownerLockable.lockedGrid.view,w=p.grid.ownerLockable.normalGrid.view,u,t,q,v;for(o in n){if(n.hasOwnProperty(o)){s=this.view.store.data.get(o);t=m.getNode(s,false);u=w.getNode(s,false);t.style.height=u.style.height="";q=t.offsetHeight;v=u.offsetHeight;if(v>q){t.style.height=v+"px"}else{if(q>v){u.style.height=q+"px"}}}}},getHeaderConfig:function(){var c=this;return{width:c.columnWidth,lockable:false,sortable:false,resizable:false,draggable:false,hideable:false,menuDisabled:true,tdCls:Ext.baseCSSPrefix+"grid-cell-special",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-row-expander",renderer:function(d,a){if(!c.grid.ownerLockable){a.tdAttr+=' rowspan="2"'}return'<div class="'+Ext.baseCSSPrefix+'grid-row-expander" role="presentation"></div>'},processEvent:function(m,o,a,e,n,l,p){if(l.getTarget("."+Ext.baseCSSPrefix+"grid-row-expander")){if(m=="click"){c.toggleRow(e,p);return c.selectRowOnExpand}}}}}},0,0,0,0,["plugin.rowexpander"],0,[Ext.grid.plugin,"RowExpander"],0));(Ext.cmd.derive("Ext.grid.property.Grid",Ext.grid.Panel,{alternateClassName:"Ext.grid.PropertyGrid",valueField:"value",nameField:"name",inferTypes:true,enableColumnMove:false,columnLines:true,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,gridCls:Ext.baseCSSPrefix+"property-grid",initComponent:function(){var c=this;c.source=c.source||{};c.addCls(c.gridCls);c.plugins=c.plugins||[];c.plugins.push(new Ext.grid.plugin.CellEditing({clicksToEdit:c.clicksToEdit,startEdit:function(a,d){return this.self.prototype.startEdit.call(this,a,c.valueColumn)}}));c.selModel={selType:"cellmodel",onCellSelect:function(a){a.columnHeader=c.valueColumn;a.column=c.valueColumn.getVisibleIndex();return this.self.prototype.onCellSelect.call(this,a)}};c.sourceConfig=Ext.apply({},c.sourceConfig);if(!c.store){c.propStore=c.store=new Ext.grid.property.Store(c,c.source)}c.configure(c.sourceConfig);if(c.sortableColumns){c.store.sort("name","ASC")}c.columns=new Ext.grid.property.HeaderContainer(c,c.store);c.addEvents("beforepropertychange","propertychange");c.callParent();c.getView().walkCells=this.walkCells;c.editors={date:new Ext.grid.CellEditor({field:new Ext.form.field.Date({selectOnFocus:true})}),string:new Ext.grid.CellEditor({field:new Ext.form.field.Text({selectOnFocus:true})}),number:new Ext.grid.CellEditor({field:new Ext.form.field.Number({selectOnFocus:true})}),"boolean":new Ext.grid.CellEditor({field:new Ext.form.field.ComboBox({editable:false,store:[[true,c.headerCt.trueText],[false,c.headerCt.falseText]]})})};c.store.on("update",c.onUpdate,c)},configure:function(x){var s=this,p=s.store,v=0,u=s.store.getCount(),o=s.nameField,n=s.valueField,y,q,w,t;s.configureLegacy(x);if(s.inferTypes){for(;v<u;++v){w=p.getAt(v);y=w.get(o);if(!s.getConfig(y,"type")){q=w.get(n);if(Ext.isDate(q)){t="date"}else{if(Ext.isNumber(q)){t="number"}else{if(Ext.isBoolean(q)){t="boolean"}else{t="string"}}}s.setConfig(y,"type",t)}}}},getConfig:function(l,m,j){var n=this.sourceConfig[l],h;if(n){h=n[m]}return h||j},setConfig:function(l,h,n){var j=this.sourceConfig,m=j[l];if(!m){m=j[l]={__copied:true}}else{if(!m.__copied){m=Ext.apply({__copied:true},m);j[l]=m}}m[h]=n;return n},configureLegacy:function(d){var c=this;c.copyLegacyObject(d,c.customRenderers,"renderer");c.copyLegacyObject(d,c.customEditors,"editor");c.copyLegacyObject(d,c.propertyNames,"displayName")},copyLegacyObject:function(h,j,l){var e;for(e in j){if(j.hasOwnProperty(e)){if(!h[e]){h[e]={}}h[e][l]=j[e]}}},onUpdate:function(n,j,o){var l=this,h,m;if(l.rendered&&o==Ext.data.Model.EDIT){h=j.get(l.valueField);m=j.modified.value;if(l.fireEvent("beforepropertychange",l.source,j.getId(),h,m)!==false){if(l.source){l.source[j.getId()]=h}j.commit();l.fireEvent("propertychange",l.source,j.getId(),h,m)}else{j.reject()}}},walkCells:function(m,n,o,p,l,s){var q=this,e=q.ownerCt.valueColumn;if(n=="left"){n="up"}else{if(n=="right"){n="down"}}m=Ext.view.Table.prototype.walkCells.call(q,m,n,o,p,l,s);m.columnHeader=e;m.column=e.getVisibleIndex();return m},getCellEditor:function(m,s){var p=this,o=m.get(p.nameField),n=m.get(p.valueField),t=p.getConfig(o,"editor"),l=p.getConfig(o,"type"),q=p.editors;if(t){if(!(t instanceof Ext.grid.CellEditor)){if(!(t instanceof Ext.form.field.Base)){t=Ext.ComponentManager.create(t,"textfield")}t=p.setConfig(o,"editor",new Ext.grid.CellEditor({field:t}))}}else{if(l){switch(l){case"date":t=q.date;break;case"number":t=q.number;break;case"boolean":t=p.editors["boolean"];break;default:t=q.string}}else{if(Ext.isDate(n)){t=q.date}else{if(Ext.isNumber(n)){t=q.number}else{if(Ext.isBoolean(n)){t=q["boolean"]}else{t=q.string}}}}}t.editorId=o;return t},beforeDestroy:function(){var c=this;c.callParent();c.destroyEditors(c.editors);c.destroyEditors(c.customEditors);delete c.source},destroyEditors:function(c){for(var d in c){if(c.hasOwnProperty(d)){Ext.destroy(c[d])}}},setSource:function(d,h){var e=this;e.source=d;if(h!==undefined){e.sourceConfig=Ext.apply({},h);e.configure(e.sourceConfig)}e.propStore.setSource(d)},getSource:function(){return this.propStore.getSource()},setProperty:function(h,d,e){this.propStore.setValue(h,d,e)},removeProperty:function(c){this.propStore.remove(c)}},0,["propertygrid"],["component","box","container","panel","tablepanel","gridpanel","grid","propertygrid"],{component:true,box:true,container:true,panel:true,tablepanel:true,gridpanel:true,grid:true,propertygrid:true},["widget.propertygrid"],0,[Ext.grid.property,"Grid",Ext.grid,"PropertyGrid"],0));(Ext.cmd.derive("Ext.grid.property.HeaderContainer",Ext.grid.header.Container,{alternateClassName:"Ext.grid.PropertyColumnModel",nameWidth:115,nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",nameColumnCls:Ext.baseCSSPrefix+"grid-property-name",nameColumnInnerCls:Ext.baseCSSPrefix+"grid-cell-inner-property-name",constructor:function(d,e){var h=this;h.grid=d;h.store=e;h.callParent([{isRootHeader:true,enableColumnResize:Ext.isDefined(d.enableColumnResize)?d.enableColumnResize:h.enableColumnResize,enableColumnMove:Ext.isDefined(d.enableColumnMove)?d.enableColumnMove:h.enableColumnMove,items:[{header:h.nameText,width:d.nameColumnWidth||h.nameWidth,sortable:d.sortableColumns,dataIndex:d.nameField,renderer:Ext.Function.bind(h.renderProp,h),itemId:d.nameField,menuDisabled:true,tdCls:h.nameColumnCls,innerCls:h.nameColumnInnerCls},{header:h.valueText,renderer:Ext.Function.bind(h.renderCell,h),getEditor:Ext.Function.bind(h.getCellEditor,h),sortable:d.sortableColumns,flex:1,fixed:true,dataIndex:d.valueField,itemId:d.valueField,menuDisabled:true}]}]);h.grid.valueColumn=h.items.items[1]},getCellEditor:function(c){return this.grid.getCellEditor(c,this)},renderProp:function(c){return this.getPropertyName(c)},renderCell:function(m,o,n){var q=this,j=q.grid,p=j.getConfig(n.get(j.nameField),"renderer"),l=m;if(p){return p.apply(q,arguments)}if(Ext.isDate(m)){l=q.renderDate(m)}else{if(Ext.isBoolean(m)){l=q.renderBool(m)}}return Ext.util.Format.htmlEncode(l)},renderDate:Ext.util.Format.date,renderBool:function(c){return this[c?"trueText":"falseText"]},getPropertyName:function(c){return this.grid.getConfig(c,"displayName",c)}},1,0,["component","box","container","headercontainer"],{component:true,box:true,container:true,headercontainer:true},0,0,[Ext.grid.property,"HeaderContainer",Ext.grid,"PropertyColumnModel"],0));(Ext.cmd.derive("Ext.grid.property.Property",Ext.data.Model,{alternateClassName:"Ext.PropGridProperty",fields:[{name:"name",type:"string"},{name:"value"}],idProperty:"name"},0,0,0,0,0,0,[Ext.grid.property,"Property",Ext,"PropGridProperty"],0));(Ext.cmd.derive("Ext.grid.property.Store",Ext.data.Store,{alternateClassName:"Ext.grid.PropertyStore",sortOnLoad:false,constructor:function(e,h){var d=this;d.grid=e;d.source=h;d.callParent([{data:h,model:Ext.grid.property.Property,proxy:d.getProxy()}])},getProxy:function(){if(!this.proxy){Ext.grid.property.Store.prototype.proxy=new Ext.data.proxy.Memory({model:Ext.grid.property.Property,reader:this.getReader()})}return this.proxy},getReader:function(){if(!this.reader){Ext.grid.property.Store.prototype.reader=new Ext.data.reader.Reader({model:Ext.grid.property.Property,buildExtractors:Ext.emptyFn,read:function(c){return this.readRecords(c)},readRecords:function(e){var j,l,h={records:[],success:true};for(l in e){if(e.hasOwnProperty(l)){j=e[l];if(this.isEditableValue(j)){h.records.push(new Ext.grid.property.Property({name:l,value:j},l))}}}h.total=h.count=h.records.length;return new Ext.data.ResultSet(h)},isEditableValue:function(c){return Ext.isPrimitive(c)||Ext.isDate(c)||c===null}})}return this.reader},setSource:function(d){var c=this;c.source=d;c.suspendEvents();c.removeAll();c.proxy.data=d;c.load();c.resumeEvents();c.fireEvent("datachanged",c);c.fireEvent("refresh",c)},getProperty:function(c){return Ext.isNumber(c)?this.getAt(c):this.getById(c)},setValue:function(l,n,j){var h=this,m=h.getRec(l);if(m){m.set("value",n);h.source[l]=n}else{if(j){h.source[l]=n;m=new Ext.grid.property.Property({name:l,value:n},l);h.add(m)}}},remove:function(c){var d=this.getRec(c);if(d){this.callParent([d]);delete this.source[c]}},getRec:function(c){return this.getById(c)},getSource:function(){return this.source}},1,0,0,0,0,0,[Ext.grid.property,"Store",Ext.grid,"PropertyStore"],0));(Ext.cmd.derive("Ext.layout.ClassList",Ext.Base,(function(){var c=Ext.String.splitWords,d=Ext.Array.toMap;return{dirty:false,constructor:function(a){this.owner=a;this.map=d(this.classes=c(a.el.className))},add:function(e){var a=this;if(!a.map[e]){a.map[e]=true;a.classes.push(e);if(!a.dirty){a.dirty=true;a.owner.markDirty()}}},addMany:function(a){Ext.each(c(a),this.add,this)},contains:function(a){return this.map[a]},flush:function(){this.owner.el.className=this.classes.join(" ");this.dirty=false},remove:function(e){var a=this;if(a.map[e]){delete a.map[e];a.classes=Ext.Array.filter(a.classes,function(h){return h!=e});if(!a.dirty){a.dirty=true;a.owner.markDirty()}}},removeMany:function(h){var a=this,j=d(c(h));a.classes=Ext.Array.filter(a.classes,function(e){if(!j[e]){return true}delete a.map[e];if(!a.dirty){a.dirty=true;a.owner.markDirty()}return false})}}}()),1,0,0,0,0,0,[Ext.layout,"ClassList"],0));(Ext.cmd.derive("Ext.util.Queue",Ext.Base,{constructor:function(){this.clear()},add:function(h){var d=this,e=d.getKey(h);if(!d.map[e]){++d.length;d.items.push(h);d.map[e]=h}return h},clear:function(){var c=this,d=c.items;c.items=[];c.map={};c.length=0;return d},contains:function(c){var d=this.getKey(c);return this.map.hasOwnProperty(d)},getCount:function(){return this.length},getKey:function(c){return c.id},remove:function(l){var m=this,n=m.getKey(l),j=m.items,h;if(m.map[n]){h=Ext.Array.indexOf(j,l);Ext.Array.erase(j,h,1);delete m.map[n];--m.length}return l}},1,0,0,0,0,0,[Ext.util,"Queue"],0));(Ext.cmd.derive("Ext.layout.ContextItem",Ext.Base,{heightModel:null,widthModel:null,sizeModel:null,optOut:false,ownerSizePolicy:null,boxChildren:null,boxParent:null,isBorderBoxValue:null,children:[],dirty:null,dirtyCount:0,hasRawContent:true,isContextItem:true,isTopLevel:false,consumersContentHeight:0,consumersContentWidth:0,consumersContainerHeight:0,consumersContainerWidth:0,consumersHeight:0,consumersWidth:0,ownerCtContext:null,remainingChildDimensions:0,props:null,state:null,wrapsComponent:false,constructor:function(x){var w=this,z=Ext.layout.SizeModel.sizeModels,E=z.configured,F=z.shrinkWrap,N,y,B,C,I,K,v,J,A,D,M,G,H,O;Ext.apply(w,x);v=w.target;N=w.el;w.id=v.id;w.flushedProps={};w.props=I={};w.styles={};if(!v.isComponent){y=N.lastBox}else{w.wrapsComponent=true;w.framing=v.frameSize||null;w.isComponentChild=v.ownerLayout&&v.ownerLayout.isComponentLayout;y=v.lastBox;B=v.ownerCt;if(B&&(C=B.el&&w.context.items[B.el.id])){w.ownerCtContext=C}w.sizeModel=K=v.getSizeModel(C&&C.widthModel.pairsByHeightOrdinal[C.heightModel.ordinal]);w.widthModel=G=K.width;w.heightModel=H=K.height;if(y&&y.invalid===false){D=(v.width===(J=y.width));M=(v.height===(A=y.height));if(G===F&&H===F){O=true}else{if(G===E&&D){O=H===F||(H===E&&M)}}if(O){w.optOut=true;I.width=J;I.height=A}}}w.lastBox=y},init:function(I,O){var z=this,Q=z.props,N=z.dirty,G=z.ownerCtContext,D=z.target.ownerLayout,J=!z.state,y=I||J,M,E,F,C,P,x,n=z.heightModel,K=z.widthModel,H,B,A=0;z.dirty=z.invalid=false;z.props={};z.remainingChildDimensions=0;if(z.boxChildren){z.boxChildren.length=0}if(!J){z.clearAllBlocks("blocks");z.clearAllBlocks("domBlocks")}if(!z.wrapsComponent){return y}x=z.target;z.state={};if(J){if(x.beforeLayout&&x.beforeLayout!==Ext.emptyFn){x.beforeLayout()}if(!G&&(C=x.ownerCt)){G=z.context.items[C.el.id]}if(G){z.ownerCtContext=G;z.isBoxParent=x.ownerLayout.isItemBoxParent(z)}else{z.isTopLevel=true}z.frameBodyContext=z.getEl("frameBody")}else{G=z.ownerCtContext;z.isTopLevel=!G;M=z.children;for(E=0,F=M.length;E<F;++E){M[E].init(true)}}z.hasRawContent=!(x.isContainer&&x.items.items.length>0);if(I){z.widthModel=z.heightModel=null;P=x.getSizeModel(G&&G.widthModel.pairsByHeightOrdinal[G.heightModel.ordinal]);if(J){z.sizeModel=P}z.widthModel=P.width;z.heightModel=P.height;if(G&&!z.isComponentChild){G.remainingChildDimensions+=2}}else{if(Q){z.recoverProp("x",Q,N);z.recoverProp("y",Q,N);if(z.widthModel.calculated){z.recoverProp("width",Q,N)}else{if("width" in Q){++A}}if(z.heightModel.calculated){z.recoverProp("height",Q,N)}else{if("height" in Q){++A}}if(G&&!z.isComponentChild){G.remainingChildDimensions+=A}}}if(Q&&D&&D.manageMargins){z.recoverProp("margin-top",Q,N);z.recoverProp("margin-right",Q,N);z.recoverProp("margin-bottom",Q,N);z.recoverProp("margin-left",Q,N)}if(O){H=O.heightModel;B=O.widthModel;if(B&&H&&K&&n){if(K.shrinkWrap&&n.shrinkWrap){if(B.constrainedMax&&H.constrainedMin){H=null}}}if(B){z.widthModel=B}if(H){z.heightModel=H}if(O.state){Ext.apply(z.state,O.state)}}return y},initContinue:function(o){var n=this,p=n.ownerCtContext,l=n.target,q=n.widthModel,m=l.getHierarchyState(),j;if(q.fixed){m.inShrinkWrapTable=false}else{delete m.inShrinkWrapTable}if(o){if(p&&q.shrinkWrap){j=p.isBoxParent?p:p.boxParent;if(j){j.addBoxChild(n)}}else{if(q.natural){n.boxParent=p}}}return o},initDone:function(j){var e=this,h=e.props,l=e.state;if(e.remainingChildDimensions===0){h.containerChildrenSizeDone=true}if(j){h.containerLayoutDone=true}if(e.boxChildren&&e.boxChildren.length&&e.widthModel.shrinkWrap){e.el.setWidth(10000);l.blocks=(l.blocks||0)+1}},initAnimation:function(){var d=this,h=d.target,e=d.ownerCtContext;if(e&&e.isTopLevel){d.animatePolicy=h.ownerLayout.getAnimatePolicy(d)}else{if(!e&&h.isCollapsingOrExpanding&&h.animCollapse){d.animatePolicy=h.componentLayout.getAnimatePolicy(d)}}if(d.animatePolicy){d.context.queueAnimation(d)}},addCls:function(c){this.getClassList().addMany(c)},removeCls:function(c){this.getClassList().removeMany(c)},addBlock:function(h,n,m){var o=this,l=o[h]||(o[h]={}),j=l[m]||(l[m]={});if(!j[n.id]){j[n.id]=n;++n.blockCount;++o.context.blockCount}},addBoxChild:function(j){var l=this,e,h=j.widthModel;j.boxParent=this;j.measuresBox=h.shrinkWrap?j.hasRawContent:h.natural;if(j.measuresBox){e=l.boxChildren;if(e){e.push(j)}else{l.boxChildren=[j]}}},addPositionStyles:function(m,h){var j=h.x,l=h.y,n=0;if(j!==undefined){m.left=j+"px";++n}if(l!==undefined){m.top=l+"px";++n}return n},addTrigger:function(p,o){var q=this,m=o?"domTriggers":"triggers",n=q[m]||(q[m]={}),l=q.context,s=l.currentLayout,t=n[p]||(n[p]={});if(!t[s.id]){t[s.id]=s;++s.triggerCount;t=l.triggers[o?"dom":"data"];(t[s.id]||(t[s.id]=[])).push({item:this,prop:p});if(q.props[p]!==undefined){if(!o||!(q.dirty&&(p in q.dirty))){++s.firedTriggers}}}},boxChildMeasured:function(){var d=this,h=d.state,e=(h.boxesMeasured=(h.boxesMeasured||0)+1);if(e===d.boxChildren.length){h.clearBoxWidth=1;++d.context.progressCount;d.markDirty()}},borderNames:["border-top-width","border-right-width","border-bottom-width","border-left-width"],marginNames:["margin-top","margin-right","margin-bottom","margin-left"],paddingNames:["padding-top","padding-right","padding-bottom","padding-left"],trblNames:["top","right","bottom","left"],cacheMissHandlers:{borderInfo:function(d){var c=d.getStyles(d.borderNames,d.trblNames);c.width=c.left+c.right;c.height=c.top+c.bottom;return c},marginInfo:function(d){var c=d.getStyles(d.marginNames,d.trblNames);c.width=c.left+c.right;c.height=c.top+c.bottom;return c},paddingInfo:function(d){var e=d.frameBodyContext||d,h=e.getStyles(d.paddingNames,d.trblNames);h.width=h.left+h.right;h.height=h.top+h.bottom;return h}},checkCache:function(c){return this.cacheMissHandlers[c](this)},clearAllBlocks:function(e){var h=this[e],d;if(h){for(d in h){this.clearBlocks(e,d)}}},clearBlocks:function(q,n){var m=this[q],j=m&&m[n],p,o,l;if(j){delete m[n];p=this.context;for(l in j){o=j[l];--p.blockCount;if(!--o.blockCount&&!o.pending&&!o.done){p.queueLayout(o)}}}},block:function(d,c){this.addBlock("blocks",d,c)},domBlock:function(d,c){this.addBlock("domBlocks",d,c)},fireTriggers:function(j,n){var m=this[j],p=m&&m[n],q=this.context,o,l;if(p){for(l in p){o=p[l];++o.firedTriggers;if(!o.done&&!o.blockCount&&!o.pending){q.queueLayout(o)}}}},flush:function(){var e=this,h=e.dirty,l=e.state,j=e.el;e.dirtyCount=0;if(e.classList&&e.classList.dirty){e.classList.flush()}if("attributes" in e){j.set(e.attributes);delete e.attributes}if("innerHTML" in e){j.innerHTML=e.innerHTML;delete e.innerHTML}if(l&&l.clearBoxWidth){l.clearBoxWidth=0;e.el.setStyle("width",null);if(!--l.blocks){e.context.queueItemLayouts(e)}}if(h){delete e.dirty;e.writeProps(h,true)}},flushAnimations:function(){var j=this,A=j.previousSize,t,q,y,w,x,z,v,s,u,C,B,x;if(A){t=j.target;q=t.getAnimationProps();y=q.duration;w=Ext.Object.getKeys(j.animatePolicy);x=Ext.apply({},{from:{},to:{},duration:y||Ext.fx.Anim.prototype.duration},q);for(z=0,v=0,s=w.length;v<s;v++){u=w[v];C=A[u];B=j.peek(u);if(C!=B){u=j.translateProps[u]||u;x.from[u]=C;x.to[u]=B;++z}}if(z){if(j.isCollapsingOrExpanding===1){t.componentLayout.undoLayout(j)}else{j.writeProps(x.from)}j.el.animate(x);x=Ext.fx.Manager.getFxQueue(j.el.id)[0];t.$layoutAnim=x;x.on({afteranimate:function(){delete t.$layoutAnim;if(j.isCollapsingOrExpanding===1){t.componentLayout.redoLayout(j);t.afterCollapse(true)}else{if(j.isCollapsingOrExpanding===2){t.afterExpand(true)}}}})}}},getBorderInfo:function(){var d=this,c=d.borderInfo;if(!c){d.borderInfo=c=d.checkCache("borderInfo")}return c},getClassList:function(){return this.classList||(this.classList=new Ext.layout.ClassList(this))},getEl:function(o,j){var m=this,l,n,h;if(o){if(o.dom){n=o}else{l=m.target;if(j){l=j}n=l[o];if(typeof n=="function"){n=n.call(l);if(n===m.el){return this}}}if(n){h=m.context.getEl(m,n)}}return h||null},getFrameInfo:function(){var l=this,j=l.frameInfo,e,h;if(!j){e=l.framing;h=l.getBorderInfo();l.frameInfo=j=e?{top:e.top+h.top,right:e.right+h.right,bottom:e.bottom+h.bottom,left:e.left+h.left,width:e.width+h.width,height:e.height+h.height}:h}return j},getMarginInfo:function(){var p=this,m=p.marginInfo,j,l,n,o,q;if(!m){if(!p.wrapsComponent){m=p.checkCache("marginInfo")}else{j=p.target;o=j.ownerLayout;q=o?o.id:null;l=o&&o.manageMargins;m=j.margin$;if(m&&m.ownerId!==q){m=null}if(!m){m=p.parseMargins(j,j.margin)||p.checkCache("marginInfo");if(l){n=p.parseMargins(j,j.margins,o.defaultMargins);if(n){m={top:m.top+n.top,right:m.right+n.right,bottom:m.bottom+n.bottom,left:m.left+n.left}}p.setProp("margin-top",0);p.setProp("margin-right",0);p.setProp("margin-bottom",0);p.setProp("margin-left",0)}m.ownerId=q;j.margin$=m}m.width=m.left+m.right;m.height=m.top+m.bottom}p.marginInfo=m}return m},clearMarginCache:function(){delete this.marginInfo;delete this.target.margin$},getPaddingInfo:function(){var d=this,c=d.paddingInfo;if(!c){d.paddingInfo=c=d.checkCache("paddingInfo")}return c},getProp:function(h){var d=this,e=d.props[h];d.addTrigger(h);return e},getDomProp:function(h){var d=this,e=(d.dirty&&(h in d.dirty))?undefined:d.props[h];d.addTrigger(h,true);return e},getStyle:function(j){var n=this,h=n.styles,l,m;if(j in h){m=h[j]}else{l=n.styleInfo[j];m=n.el.getStyle(j);if(l&&l.parseInt){m=parseInt(m,10)||0}h[j]=m}return m},getStyles:function(t,E){var v=this,B=v.styles,s={},A=0,C=t.length,x,y,w,F,D,z,n,u;E=E||t;for(x=0;x<C;++x){F=t[x];if(F in B){s[E[x]]=B[F];++A;if(x&&A==1){y=t.slice(0,x);w=E.slice(0,x)}}else{if(A){(y||(y=[])).push(F);(w||(w=[])).push(E[x])}}}if(A<C){y=y||t;w=w||E;z=v.styleInfo;n=v.el.getStyle(y);for(x=y.length;x--;){F=y[x];D=z[F];u=n[F];if(D&&D.parseInt){u=parseInt(u,10)||0}s[w[x]]=u;B[F]=u}}return s},hasProp:function(c){return this.getProp(c)!=null},hasDomProp:function(c){return this.getDomProp(c)!=null},invalidate:function(c){this.context.queueInvalidate(this,c)},markDirty:function(){if(++this.dirtyCount==1){this.context.queueFlush(this)}},onBoxMeasured:function(){var d=this.boxParent,c=this.state;if(d&&d.widthModel.shrinkWrap&&!c.boxMeasured&&this.measuresBox){c.boxMeasured=1;d.boxChildMeasured()}},parseMargins:function(j,l,m){if(l===true){l=5}var n=typeof l,h;if(n=="string"||n=="number"){h=j.parseBox(l)}else{if(l||m){h={top:0,right:0,bottom:0,left:0};if(m){Ext.apply(h,this.parseMargins(j,m))}if(l){l=Ext.apply(h,j.parseBox(l))}}}return h},peek:function(c){return this.props[c]},recoverProp:function(l,h,j){var m=this,n=m.props,o;if(l in h){n[l]=h[l];if(j&&l in j){o=m.dirty||(m.dirty={});o[l]=j[l]}}},redo:function(h){var l=this,n,j,m;l.revertProps(l.props);if(h&&l.wrapsComponent){if(l.childItems){for(m=0,n=l.childItems,j=n.length;m<j;m++){n[m].redo(h)}}for(m=0,n=l.children,j=n.length;m<j;m++){n[m].redo()}}},removeEl:function(h,j){var m=this,l,n;if(h){if(h.dom){n=h}else{l=m.target;if(j){l=j}n=l[h];if(typeof n=="function"){n=n.call(l);if(n===m.el){return this}}}if(n){m.context.removeEl(m,n)}}},revertProps:function(j){var h,e=this.flushedProps,l={};for(h in j){if(e.hasOwnProperty(h)){l[h]=j[h]}}this.writeProps(l)},setAttribute:function(e,h){var d=this;if(!d.attributes){d.attributes={}}d.attributes[e]=h;d.markDirty()},setBox:function(c){var d=this;if("left" in c){d.setProp("x",c.left)}if("top" in c){d.setProp("y",c.top)}d.setSize(c.width,c.height)},setContentHeight:function(d,c){if(!c&&this.hasRawContent){return 1}return this.setProp("contentHeight",d)},setContentWidth:function(c,d){if(!d&&this.hasRawContent){return 1}return this.setProp("contentWidth",c)},setContentSize:function(h,e,d){return this.setContentWidth(h,d)+this.setContentHeight(e,d)==2},setProp:function(p,q,l){var j=this,m=typeof q,n,o;if(m=="undefined"||(m==="number"&&isNaN(q))){return 0}if(j.props[p]===q){return 1}j.props[p]=q;++j.context.progressCount;if(l===false){j.fireTriggers("domTriggers",p);j.clearBlocks("domBlocks",p)}else{o=j.styleInfo[p];if(o){if(!j.dirty){j.dirty={}}if(p=="width"||p=="height"){n=j.isBorderBoxValue;if(n===null){j.isBorderBoxValue=n=!!j.el.isBorderBox()}if(!n){j.borderInfo||j.getBorderInfo();j.paddingInfo||j.getPaddingInfo()}}j.dirty[p]=q;j.markDirty()}}j.fireTriggers("triggers",p);j.clearBlocks("blocks",p);return 1},setHeight:function(m,w){var q=this,t=q.target,u=q.ownerCtContext,p,s,v,n,o;if(m<0){m=0}if(!q.wrapsComponent){if(!q.setProp("height",m,w)){return NaN}}else{v=q.collapsedVert?0:(t.minHeight||0);m=Ext.Number.constrain(m,v,t.maxHeight);n=q.props.height;if(!q.setProp("height",m,w)){return NaN}if(u&&!q.isComponentChild&&isNaN(n)){o=--u.remainingChildDimensions;if(!o){u.setProp("containerChildrenSizeDone",true)}}p=q.frameBodyContext;if(p){s=q.getFrameInfo();p.setHeight(m-s.height,w)}}return m},setWidth:function(v,w){var o=this,q=o.target,s=o.ownerCtContext,n,p,t,u,m;if(v<0){v=0}if(!o.wrapsComponent){if(!o.setProp("width",v,w)){return NaN}}else{t=o.collapsedHorz?0:(q.minWidth||0);v=Ext.Number.constrain(v,t,q.maxWidth);u=o.props.width;if(!o.setProp("width",v,w)){return NaN}if(s&&!o.isComponentChild&&isNaN(u)){m=--s.remainingChildDimensions;if(!m){s.setProp("containerChildrenSizeDone",true)}}n=o.frameBodyContext;if(n){p=o.getFrameInfo();n.setWidth(v-p.width,w)}}return v},setSize:function(h,e,d){this.setWidth(h,d);this.setHeight(e,d)},translateProps:{x:"left",y:"top"},undo:function(h){var l=this,n,j,m;l.revertProps(l.lastBox);if(h&&l.wrapsComponent){if(l.childItems){for(m=0,n=l.childItems,j=n.length;m<j;m++){n[m].undo(h)}}for(m=0,n=l.children,j=n.length;m<j;m++){n[m].undo()}}},unsetProp:function(c){var d=this.dirty;delete this.props[c];if(d){delete d[c]}},writeProps:function(S,T){if(!(S&&typeof S=="object")){return}var A=this,U=A.el,P={},Q=0,V=A.styleInfo,B,O,J,H=S.width,M=S.height,C=A.isBorderBoxValue,z=A.target,F=Math.max,D=0,N=0,R,W,I,G,E,K;if("displayed" in S){U.setDisplayed(S.displayed)}for(O in S){if(T){A.fireTriggers("domTriggers",O);A.clearBlocks("domBlocks",O);A.flushedProps[O]=1}B=V[O];if(B&&B.dom){if(B.suffix&&(J=parseInt(S[O],10))){P[O]=J+B.suffix}else{P[O]=S[O]}++Q}}if("x" in S||"y" in S){if(z.isComponent){z.setPosition(S.x,S.y)}else{Q+=A.addPositionStyles(P,S)}}if(!C&&(H>0||M>0)){if(!A.frameBodyContext){D=A.paddingInfo.width;N=A.paddingInfo.height}if(H){H=F(parseInt(H,10)-(A.borderInfo.width+D),0);P.width=H+"px";++Q}if(M){M=F(parseInt(M,10)-(A.borderInfo.height+N),0);P.height=M+"px";++Q}}if(A.wrapsComponent&&Ext.isIE9&&Ext.isStrict){if((R=H!==undefined&&A.hasOverflowY)||(W=M!==undefined&&A.hasOverflowX)){I=A.isAbsolute;if(I===undefined){I=false;K=A.target.getTargetEl();E=K.getStyle("position");if(E=="absolute"){E=K.getStyle("box-sizing");I=(E=="border-box")}A.isAbsolute=I}if(I){G=Ext.getScrollbarSize();if(R){H=parseInt(H,10)+G.width;P.width=H+"px";++Q}if(W){M=parseInt(M,10)+G.height;P.height=M+"px";++Q}}}}if(Q){U.setStyle(P)}}},1,0,0,0,0,0,[Ext.layout,"ContextItem"],function(){var h={dom:true,parseInt:true,suffix:"px"},d={dom:true},e={dom:false};this.prototype.styleInfo={containerChildrenSizeDone:e,containerLayoutDone:e,displayed:e,done:e,x:e,y:e,columnWidthsDone:e,left:h,top:h,right:h,bottom:h,width:h,height:h,"border-top-width":h,"border-right-width":h,"border-bottom-width":h,"border-left-width":h,"margin-top":h,"margin-right":h,"margin-bottom":h,"margin-left":h,"padding-top":h,"padding-right":h,"padding-bottom":h,"padding-left":h,"line-height":d,display:d}}));(Ext.cmd.derive("Ext.layout.Context",Ext.Base,{remainingLayouts:0,state:0,constructor:function(d){var c=this;Ext.apply(c,d);c.items={};c.layouts={};c.blockCount=0;c.cycleCount=0;c.flushCount=0;c.calcCount=0;c.animateQueue=c.newQueue();c.completionQueue=c.newQueue();c.finalizeQueue=c.newQueue();c.finishQueue=c.newQueue();c.flushQueue=c.newQueue();c.invalidateData={};c.layoutQueue=c.newQueue();c.invalidQueue=[];c.triggers={data:{},dom:{}}},callLayout:function(c,d){this.currentLayout=c;c[d](this.getCmp(c.owner))},cancelComponent:function(B,I,z){var w=this,C=B,A=!B.isComponent,H=A?C.length:1,F,G,x,y,D,K,v,u,J,E;for(F=0;F<H;++F){if(A){B=C[F]}if(z&&B.ownerCt){E=this.items[B.ownerCt.el.id];if(E){Ext.Array.remove(E.childItems,w.getCmp(B))}}if(!I){v=w.invalidQueue;x=v.length;if(x){w.invalidQueue=K=[];for(G=0;G<x;++G){u=v[G];J=u.item.target;if(J!=B&&!J.isDescendant(B)){K.push(u)}}}}D=B.componentLayout;w.cancelLayout(D);if(D.getLayoutItems){y=D.getLayoutItems();if(y.length){w.cancelComponent(y,true)}}if(B.isContainer&&!B.collapsed){D=B.layout;w.cancelLayout(D);y=D.getVisibleItems();if(y.length){w.cancelComponent(y,true)}}}},cancelLayout:function(c){var d=this;d.completionQueue.remove(c);d.finalizeQueue.remove(c);d.finishQueue.remove(c);d.layoutQueue.remove(c);if(c.running){d.layoutDone(c)}c.ownerContext=null},clearTriggers:function(o,n){var u=o.id,p=this.triggers[n?"dom":"data"],m=p&&p[u],t=(m&&m.length)||0,q,l,s;for(q=0;q<t;++q){s=m[q];l=s.item;p=n?l.domTriggers:l.triggers;delete p[s.prop][u]}},flush:function(){var j=this,h=j.flushQueue.clear(),l=h.length,e;if(l){++j.flushCount;for(e=0;e<l;++e){h[e].flush()}}},flushAnimations:function(){var j=this,e=j.animateQueue.clear(),h=e.length,l;if(h){for(l=0;l<h;l++){if(e[l].target.animate!==false){e[l].flushAnimations()}}Ext.fx.Manager.runner()}},flushInvalidates:function(){var m=this,l=m.invalidQueue,n=l&&l.length,j,o,p,q;m.invalidQueue=[];if(n){o=[];for(q=0;q<n;++q){j=(p=l[q]).item.target;if(!j.container.isDetachedBody){o.push(j);if(p.options){m.invalidateData[j.id]=p.options}}}m.invalidate(o,null)}},flushLayouts:function(o,m,t){var p=this,n=t?p[o].items:p[o].clear(),q=n.length,l,s;if(q){for(l=0;l<q;++l){s=n[l];if(!s.running){p.callLayout(s,m)}}p.currentLayout=null}},getCmp:function(c){return this.getItem(c,c.el)},getEl:function(d,e){var h=this.getItem(e,e);if(!h.parent){h.parent=d;if(d.children.length){d.children.push(h)}else{d.children=[h]}}return h},getItem:function(m,h){var l=h.id,j=this.items,n=j[l]||(j[l]=new Ext.layout.ContextItem({context:this,target:m,el:h}));return n},handleFailure:function(){var h=this.layouts,d,e;Ext.failedLayouts=(Ext.failedLayouts||0)+1;for(e in h){d=h[e];if(h.hasOwnProperty(e)){d.running=false;d.ownerContext=null}}},invalidate:function(y,v){var t=this,w=!y.isComponent,E,G,B,x,s,u,F,A,z,C,D;for(B=0,F=w?y.length:1;B<F;++B){x=w?y[B]:y;if(x.rendered&&!x.hidden){s=t.getCmp(x);A=x.componentLayout;G=!A.ownerContext;z=(x.isContainer&&!x.collapsed)?x.layout:null;C=t.invalidateData[s.id];delete t.invalidateData[s.id];D=s.init(v,C);if(C){t.processInvalidate(C,s,"before")}if(A.beforeLayoutCycle){A.beforeLayoutCycle(s)}if(z&&z.beforeLayoutCycle){z.beforeLayoutCycle(s)}D=s.initContinue(D);E=true;if(A.getLayoutItems){A.renderChildren();u=A.getLayoutItems();if(u.length){t.invalidate(u,true)}}if(z){E=false;z.renderChildren();u=z.getVisibleItems();if(u.length){t.invalidate(u,true)}}s.initDone(E);t.resetLayout(A,s,G);if(z){t.resetLayout(z,s,G)}s.initAnimation();if(C){t.processInvalidate(C,s,"after")}}}t.currentLayout=null},layoutDone:function(d){var c=d.ownerContext;d.running=false;if(d.isComponentLayout){if(c.measuresBox){c.onBoxMeasured()}c.setProp("done",true)}else{c.setProp("containerLayoutDone",true)}--this.remainingLayouts;++this.progressCount},newQueue:function(){return new Ext.util.Queue()},processInvalidate:function(h,l,j){if(h[j]){var m=this,n=m.currentLayout;m.currentLayout=h.layout||null;h[j](l,h);m.currentLayout=n}},queueAnimation:function(c){this.animateQueue.add(c)},queueCompletion:function(c){this.completionQueue.add(c)},queueFinalize:function(c){this.finalizeQueue.add(c)},queueFlush:function(c){this.flushQueue.add(c)},chainFns:function(m,n,p){var s=this,t=m.layout,q=n.layout,l=m[p],o=n[p];return function(c){var a=s.currentLayout;if(l){s.currentLayout=t;l.call(m.scope||m,c,m)}s.currentLayout=q;o.call(n.scope||n,c,n);s.currentLayout=a}},queueInvalidate:function(o,n){var s=this,p=[],q=s.invalidQueue,t=q.length,v,x,u,y,w;if(o.isComponent){o=s.getCmp(v=o)}else{v=o.target}o.invalid=true;while(t--){x=q[t];u=x.item.target;if(v.isDescendant(u)){return}if(u==v){if(!(y=x.options)){x.options=n}else{if(n){if(n.widthModel){y.widthModel=n.widthModel}if(n.heightModel){y.heightModel=n.heightModel}if(!(w=y.state)){y.state=n.state}else{if(n.state){Ext.apply(w,n.state)}}if(n.before){y.before=s.chainFns(y,n,"before")}if(n.after){y.after=s.chainFns(y,n,"after")}}}return}if(!u.isDescendant(v)){p.push(x)}}p.push({item:o,options:n});s.invalidQueue=p},queueItemLayouts:function(h){var e=h.isComponent?h:h.target,d=e.componentLayout;if(!d.pending&&!d.invalid&&!d.done){this.queueLayout(d)}d=e.layout;if(d&&!d.pending&&!d.invalid&&!d.done&&!e.collapsed){this.queueLayout(d)}},queueLayout:function(c){this.layoutQueue.add(c);c.pending=true},removeEl:function(m,n){var l=n.id,h=m.children,j=this.items;if(h){Ext.Array.remove(h,j[l])}delete j[l]},resetLayout:function(e,l,j){var h=this;h.currentLayout=e;e.done=false;e.pending=true;e.firedTriggers=0;h.layoutQueue.add(e);if(j){h.layouts[e.id]=e;e.running=true;if(e.finishedLayout){h.finishQueue.add(e)}++h.remainingLayouts;++e.layoutCount;e.ownerContext=l;e.beginCount=0;e.blockCount=0;e.calcCount=0;e.triggerCount=0;if(!e.initialized){e.initLayout()}e.beginLayout(l)}else{++e.beginCount;if(!e.running){++h.remainingLayouts;e.running=true;if(e.isComponentLayout){l.unsetProp("done")}h.completionQueue.remove(e);h.finalizeQueue.remove(e)}}e.beginLayoutCycle(l,j)},run:function(){var h=this,d=false,e=100;h.flushInvalidates();h.state=1;h.totalCount=h.layoutQueue.getCount();h.flush();while((h.remainingLayouts||h.invalidQueue.length)&&e--){if(h.invalidQueue.length){h.flushInvalidates()}if(h.runCycle()){d=false}else{if(!d){h.flush();d=true;h.flushLayouts("completionQueue","completeLayout")}else{if(!h.invalidQueue.length){h.state=2;break}}}if(!(h.remainingLayouts||h.invalidQueue.length)){h.flush();h.flushLayouts("completionQueue","completeLayout");h.flushLayouts("finalizeQueue","finalizeLayout")}}return h.runComplete()},runComplete:function(){var c=this;c.state=2;if(c.remainingLayouts){c.handleFailure();return false}c.flush();c.flushLayouts("finishQueue","finishedLayout",true);c.flushLayouts("finishQueue","notifyOwner");c.flush();c.flushAnimations();return true},runCycle:function(){var l=this,j=l.layoutQueue.clear(),e=j.length,h;++l.cycleCount;l.progressCount=0;for(h=0;h<e;++h){l.runLayout(l.currentLayout=j[h])}l.currentLayout=null;return l.progressCount>0},runLayout:function(d){var e=this,h=e.getCmp(d.owner);d.pending=false;if(h.state.blocks){return}d.done=true;++d.calcCount;++e.calcCount;d.calculate(h);if(d.done){e.layoutDone(d);if(d.completeLayout){e.queueCompletion(d)}if(d.finalizeLayout){e.queueFinalize(d)}}else{if(!d.pending&&!d.invalid&&!(d.blockCount+d.triggerCount-d.firedTriggers)){e.queueLayout(d)}}},setItemSize:function(m,n,j){var p=m,l=1,q,o;if(m.isComposite){p=m.elements;l=p.length;m=p[0]}else{if(!m.dom&&!m.el){l=p.length;m=p[0]}}for(o=0;o<l;){q=this.get(m);q.setSize(n,j);m=p[++o]}}},1,0,0,0,0,0,[Ext.layout,"Context"],0));(Ext.cmd.derive("Ext.layout.component.Body",Ext.layout.component.Auto,{type:"body",beginLayout:function(c){this.callParent(arguments);c.bodyContext=c.getEl("body")},beginLayoutCycle:function(n,h){var o=this,l=o.lastWidthModel,m=o.lastHeightModel,j=o.owner.body;o.callParent(arguments);if(l&&l.fixed&&n.widthModel.shrinkWrap){j.setWidth(null)}if(m&&m.fixed&&n.heightModel.shrinkWrap){j.setHeight(null)}},calculateOwnerHeightFromContentHeight:function(h,d){var e=this.callParent(arguments);if(h.targetContext!=h){e+=h.getPaddingInfo().height}return e},calculateOwnerWidthFromContentWidth:function(h,e){var d=this.callParent(arguments);if(h.targetContext!=h){d+=h.getPaddingInfo().width}return d},measureContentWidth:function(c){return c.bodyContext.setWidth(c.bodyContext.el.dom.offsetWidth,false)},measureContentHeight:function(c){return c.bodyContext.setHeight(c.bodyContext.el.dom.offsetHeight,false)},publishInnerHeight:function(l,h){var j=h-l.getFrameInfo().height,e=l.targetContext;if(e!=l){j-=l.getPaddingInfo().height}return l.bodyContext.setHeight(j,!l.heightModel.natural)},publishInnerWidth:function(j,l){var h=l-j.getFrameInfo().width,e=j.targetContext;if(e!=j){h-=j.getPaddingInfo().width}j.bodyContext.setWidth(h,!j.widthModel.natural)}},0,0,0,0,["layout.body"],0,[Ext.layout.component,"Body"],0));(Ext.cmd.derive("Ext.layout.component.FieldSet",Ext.layout.component.Body,{type:"fieldset",defaultCollapsedWidth:100,beforeLayoutCycle:function(c){if(c.target.collapsed){c.heightModel=this.sizeModels.shrinkWrap}},beginLayout:function(c){var d=this.owner.legend;this.callParent([c]);if(d){c.legendContext=c.context.getCmp(d)}},beginLayoutCycle:function(d){var h=d.target,e;this.callParent(arguments);if(h.collapsed){d.setContentHeight(0);d.restoreMinHeight=h.minHeight;delete h.minHeight;if(d.widthModel.shrinkWrap){e=this.lastComponentSize;d.setContentWidth((e&&e.contentWidth)||this.defaultCollapsedWidth)}}},finishedLayout:function(h){var e=this.owner,d=h.restoreMinHeight;this.callParent(arguments);if(d){e.minHeight=d}},calculateOwnerWidthFromContentWidth:function(h,e){var d=h.legendContext;if(d){e=Math.max(e,d.getProp("width"))}return this.callParent([h,e])},calculateOwnerHeightFromContentHeight:function(j,l){var h=j.getBorderInfo(),e=j.legendContext;return j.getProp("contentHeight")+j.getPaddingInfo().height+((Ext.isIEQuirks||Ext.isIE8m)?j.bodyContext.getPaddingInfo().top:0)+(e?e.getProp("height"):h.top)+h.bottom},publishInnerHeight:function(j,h){var l=j.legendContext,e=0;if(l){e=l.getProp("height")}if(e===undefined){this.done=false}else{this.callParent([j,h-e])}},getLayoutItems:function(){var c=this.owner.legend;return c?[c]:[]}},0,0,0,0,["layout.fieldset"],0,[Ext.layout.component,"FieldSet"],0));(Ext.cmd.derive("Ext.layout.component.field.Slider",Ext.layout.component.field.Field,{type:"sliderfield",beginLayout:function(c){this.callParent(arguments);c.endElContext=c.getEl("endEl");c.innerElContext=c.getEl("innerEl");c.bodyElContext=c.getEl("bodyEl")},publishInnerHeight:function(m,j){var l=j-this.measureLabelErrorHeight(m),n,h;if(this.owner.vertical){n=m.endElContext.getPaddingInfo();h=m.inputContext.getPaddingInfo();m.innerElContext.setHeight(l-h.height-n.height)}else{m.bodyElContext.setHeight(l)}},publishInnerWidth:function(j,l){if(!this.owner.vertical){var e=j.endElContext.getPaddingInfo(),h=j.inputContext.getPaddingInfo();j.innerElContext.setWidth(l-h.left-e.right-j.labelContext.getProp("width"))}},beginLayoutFixed:function(m,j,l){var h=this,n=h.ieInputWidthAdjustment;if(n){h.owner.bodyEl.setStyle("padding-right",n+"px")}h.callParent(arguments)}},0,0,0,0,["layout.sliderfield"],0,[Ext.layout.component.field,"Slider"],0));(Ext.cmd.derive("Ext.layout.container.Absolute",Ext.layout.container.Anchor,{alternateClassName:"Ext.layout.AbsoluteLayout",targetCls:Ext.baseCSSPrefix+"abs-layout-ct",itemCls:Ext.baseCSSPrefix+"abs-layout-item",ignoreOnContentChange:true,type:"absolute",adjustWidthAnchor:function(l,e){var j=this.targetPadding,h=e.getStyle("left");return l-h+j.left},adjustHeightAnchor:function(e,h){var l=this.targetPadding,j=h.getStyle("top");return e-j+l.top},isItemLayoutRoot:function(c){return this.ignoreOnContentChange||this.callParent(arguments)},isItemShrinkWrap:function(c){return true},beginLayout:function(d){var e=this,h=e.getTarget();e.callParent(arguments);if(h.dom!==document.body){h.position()}e.targetPadding=d.targetContext.getPaddingInfo()},isItemBoxParent:function(c){return true},onContentChange:function(){if(this.ignoreOnContentChange){return false}return this.callParent(arguments)},calculateContentSize:function(D,F){var v=this,K=(F||0)|((D.widthModel.shrinkWrap?1:0)|(D.heightModel.shrinkWrap?2:0)),M=(K&1)||undefined,H=(K&2)||undefined,N=D.childItems,I=N.length,y=0,A=0,E=0,J=D.props,w,G,C,B,x,O,z;if(M){if(isNaN(J.contentWidth)){++E}else{M=undefined}}if(H){if(isNaN(J.contentHeight)){++E}else{H=undefined}}if(E){for(x=0;x<I;++x){C=N[x];G=C.target;B=H&&C.getProp("height");z=M&&C.getProp("width");O=C.getMarginInfo();B+=O.bottom;z+=O.right;y=Math.max(y,(G.y||0)+B);A=Math.max(A,(G.x||0)+z);if(isNaN(y)&&isNaN(A)){v.done=false;return}}if(M||H){w=D.targetContext.getPaddingInfo()}if(M&&!D.setContentWidth(A+w.width)){v.done=false}if(H&&!D.setContentHeight(y+w.height)){v.done=false}}}},0,0,0,0,["layout.absolute"],0,[Ext.layout.container,"Absolute",Ext.layout,"AbsoluteLayout"],0));(Ext.cmd.derive("Ext.layout.container.Accordion",Ext.layout.container.VBox,{alternateClassName:"Ext.layout.AccordionLayout",targetCls:Ext.baseCSSPrefix+"accordion-layout-ct",itemCls:[Ext.baseCSSPrefix+"box-item",Ext.baseCSSPrefix+"accordion-item"],align:"stretch",fill:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:undefined,animate:true,activeOnTop:false,multi:false,defaultAnimatePolicy:{y:true,height:true},constructor:function(){var c=this;c.callParent(arguments);if(!c.multi&&c.animate){c.animatePolicy=Ext.apply({},c.defaultAnimatePolicy)}else{c.animatePolicy=null}},beforeRenderItems:function(p){var o=this,q=p.length,u=0,v=o.owner,n=o.collapseFirst,w=Ext.isDefined(n),m=o.getExpanded(true)[0],s=o.multi,t;for(;u<q;u++){t=p[u];if(!t.rendered){if(!s||t.collapsible!==false){t.collapsible=true}if(t.collapsible){if(w){t.collapseFirst=n}if(o.hideCollapseTool){t.hideCollapseTool=o.hideCollapseTool;t.titleCollapse=true}else{if(o.titleCollapse&&t.titleCollapse===undefined){t.titleCollapse=o.titleCollapse}}}delete t.hideHeader;delete t.width;t.title=t.title||"&#160;";t.addBodyCls(Ext.baseCSSPrefix+"accordion-body");if(!s){if(m){t.collapsed=m!==t}else{if(t.hasOwnProperty("collapsed")&&t.collapsed===false){m=t}else{t.collapsed=true}}v.mon(t,"show",o.onComponentShow,o)}t.headerOverCls=Ext.baseCSSPrefix+"accordion-hd-over"}}if(!o.processing&&!s){if(!m){if(q){p[0].collapsed=false}}else{if(o.activeOnTop){m.collapsed=false;o.configureItem(m);if(v.items.indexOf(m)>0){v.insert(0,m)}}}}},getItemsRenderTree:function(c){this.beforeRenderItems(c);return this.callParent(arguments)},renderItems:function(d,c){this.beforeRenderItems(d);this.callParent(arguments)},configureItem:function(c){this.callParent(arguments);c.animCollapse=c.border=false;if(this.fill){c.flex=1}},beginLayout:function(c){this.callParent(arguments);this.updatePanelClasses(c)},updatePanelClasses:function(o){var q=o.visibleItems,p=q.length,l=true,j,m,n;for(j=0;j<p;j++){m=q[j];n=m.header;n.addCls(Ext.baseCSSPrefix+"accordion-hd");if(l){n.removeCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded")}else{n.addCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded")}if(j+1==p&&m.collapsed){n.addCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed")}else{n.removeCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed")}l=m.collapsed}},onBeforeComponentExpand:function(s){var m=this,t=m.owner,o=m.multi,u=m.animate,l=!o&&!m.animate&&m.activeOnTop,n,q,p;if(!m.processing){m.processing=true;q=t.deferLayouts;t.deferLayouts=true;if(!o){n=m.getExpanded()[0];if(n&&n!==s){p=n.$layoutAnim;if(p){p.jumpToEnd()}n.collapse()}}if(l){Ext.suspendLayouts();t.insert(0,s);Ext.resumeLayouts()}t.deferLayouts=q;m.processing=false}},onBeforeComponentCollapse:function(n){var m=this,j=m.owner,l,o,h;if(m.owner.items.getCount()===1){return false}if(!m.processing){m.processing=true;h=j.deferLayouts;j.deferLayouts=true;l=n.next()||n.prev();if(m.multi){o=m.getExpanded();if(o.length===1){l.expand()}}else{if(l){l.expand()}}j.deferLayouts=h;m.processing=false}},onComponentShow:function(c){this.onBeforeComponentExpand(c)},onRemove:function(h,e){var j=this,l;j.callParent(arguments);if(!j.owner.destroying&&!j.multi&&!h.collapsed){l=j.owner.items.first();if(l){l.expand()}}},getExpanded:function(m){var j=this.owner.items.items,l=j.length,p=0,q=[],n,o;for(;p<l;++p){o=j[p];if(!o.hidden){if(m){n=o.hasOwnProperty("collapsed")&&o.collapsed===false}else{n=!o.collapsed}if(n){q.push(o)}}}return q}},1,0,0,0,["layout.accordion"],0,[Ext.layout.container,"Accordion",Ext.layout,"AccordionLayout"],0));(Ext.cmd.derive("Ext.resizer.Splitter",Ext.Component,{childEls:["collapseEl"],renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" role="presentation" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}{childElCls}">&#160;',"</div>","</tpl>"],baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",canResize:true,collapsible:false,collapseOnDblClick:true,defaultSplitMin:40,defaultSplitMax:1000,collapseTarget:"next",horizontal:false,vertical:false,size:5,tracker:null,ariaRole:"separator",getTrackerConfig:function(){return Ext.apply({xclass:"Ext.resizer.SplitterTracker",el:this.el,splitter:this},this.tracker)},beforeRender:function(){var d=this,c=d.getCollapseTarget();d.callParent();if(c.collapsed){d.addCls(d.collapsedClsInternal)}if(!d.canResize){d.addCls(d.baseCls+"-noresize")}Ext.applyIf(d.renderData,{collapseDir:d.getCollapseDirection(),collapsible:d.collapsible||c.collapsible});d.protoEl.unselectable()},onRender:function(){var h=this,d,e;h.callParent(arguments);if(h.performCollapse!==false){if(h.renderData.collapsible){h.mon(h.collapseEl,"click",h.toggleTargetCmp,h)}if(h.collapseOnDblClick){h.mon(h.el,"dblclick",h.toggleTargetCmp,h)}}h.mon(h.getCollapseTarget(),{collapse:h.onTargetCollapse,expand:h.onTargetExpand,beforeexpand:h.onBeforeTargetExpand,beforecollapse:h.onBeforeTargetCollapse,scope:h});if(h.canResize){h.tracker=Ext.create(h.getTrackerConfig());h.relayEvents(h.tracker,["beforedragstart","dragstart","dragend"])}d=h.collapseEl;if(d){d.lastCollapseDirCls=h.collapseDirProps[h.collapseDirection].cls}},getCollapseDirection:function(){var l=this,o=l.collapseDirection,m,j,h,n;if(!o){m=l.collapseTarget;if(m.isComponent){o=m.collapseDirection}if(!o){n=l.ownerCt.layout.type;if(m.isComponent){h=l.ownerCt.items;j=Number(h.indexOf(m)===h.indexOf(l)-1)<<1|Number(n==="hbox")}else{j=Number(l.collapseTarget==="prev")<<1|Number(n==="hbox")}o=["bottom","right","top","left"][j]}l.collapseDirection=o}l.setOrientation((o==="top"||o==="bottom")?"horizontal":"vertical");return o},getCollapseTarget:function(){var c=this;return c.collapseTarget.isComponent?c.collapseTarget:c.collapseTarget==="prev"?c.previousSibling():c.nextSibling()},setCollapseEl:function(c){var d=this.collapseEl;if(d){d.setDisplayed(c)}},onBeforeTargetExpand:function(c){this.setCollapseEl("none")},onBeforeTargetCollapse:function(){this.setCollapseEl("none")},onTargetCollapse:function(c){var d=this;d.addCls([d.collapsedClsInternal,d.collapsedCls]);d.setCollapseEl("")},onTargetExpand:function(c){var d=this;d.removeCls([d.collapsedClsInternal,d.collapsedCls]);d.setCollapseEl("")},collapseDirProps:{top:{cls:Ext.baseCSSPrefix+"layout-split-top"},right:{cls:Ext.baseCSSPrefix+"layout-split-right"},bottom:{cls:Ext.baseCSSPrefix+"layout-split-bottom"},left:{cls:Ext.baseCSSPrefix+"layout-split-left"}},orientationProps:{horizontal:{opposite:"vertical",fixedAxis:"height",stretchedAxis:"width"},vertical:{opposite:"horizontal",fixedAxis:"width",stretchedAxis:"height"}},applyCollapseDirection:function(){var l=this,e=l.collapseEl,j=l.collapseDirProps[l.collapseDirection],h;if(e){h=e.lastCollapseDirCls;if(h){e.removeCls(h)}e.addCls(e.lastCollapseDirCls=j.cls)}},applyOrientation:function(){var o=this,q=o.orientation,p=o.orientationProps[q],n=o.size,j=p.fixedAxis,m=p.stretchedAxis,l=o.baseCls+"-";o[q]=true;o[p.opposite]=false;if(!o.hasOwnProperty(j)||o[j]==="100%"){o[j]=n}if(!o.hasOwnProperty(m)||o[m]===n){o[m]="100%"}o.removeCls(l+p.opposite);o.addCls(l+q)},setOrientation:function(d){var c=this;if(c.orientation!==d){c.orientation=d;c.applyOrientation()}},updateOrientation:function(){delete this.collapseDirection;this.getCollapseDirection();this.applyCollapseDirection()},toggleTargetCmp:function(l,e){var m=this.getCollapseTarget(),j=m.placeholder,h;if(Ext.isFunction(m.expand)&&Ext.isFunction(m.collapse)){if(j&&!j.hidden){h=true}else{h=!m.hidden}if(h){if(m.collapsed){m.expand()}else{if(m.collapseDirection){m.collapse()}else{m.collapse(this.renderData.collapseDir)}}}}},setSize:function(){var c=this;c.callParent(arguments);if(Ext.isIE&&c.el){c.el.repaint()}},beforeDestroy:function(){Ext.destroy(this.tracker);this.callParent()}},0,["splitter"],["component","box","splitter"],{component:true,box:true,splitter:true},["widget.splitter"],0,[Ext.resizer,"Splitter"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitter",Ext.resizer.Splitter,{collapseTarget:null,getTrackerConfig:function(){var c=this.callParent();c.xclass="Ext.resizer.BorderSplitterTracker";return c},onTargetCollapse:function(c){this.callParent(arguments);if(this.performCollapse!==false&&c.collapseMode=="mini"){c.addCls(c.baseCls+"-"+c.collapsedCls+"-mini")}},onTargetExpand:function(c){this.callParent(arguments);if(this.performCollapse!==false&&c.collapseMode=="mini"){c.removeCls(c.baseCls+"-"+c.collapsedCls+"-mini")}}},0,["bordersplitter"],["component","box","splitter","bordersplitter"],{component:true,box:true,splitter:true,bordersplitter:true},["widget.bordersplitter"],0,[Ext.resizer,"BorderSplitter"],0));(Ext.cmd.derive("Ext.layout.container.Border",Ext.layout.container.Container,{alternateClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:[Ext.baseCSSPrefix+"border-item",Ext.baseCSSPrefix+"box-item"],type:"border",isBorderLayout:true,padding:undefined,percentageRe:/(\d+)%/,horzPositionProp:"left",padOnContainerProp:"left",padNotOnContainerProp:"right",axisProps:{horz:{borderBegin:"west",borderEnd:"east",horizontal:true,posProp:"x",sizeProp:"width",sizePropCap:"Width"},vert:{borderBegin:"north",borderEnd:"south",horizontal:false,posProp:"y",sizeProp:"height",sizePropCap:"Height"}},centerRegion:null,manageMargins:true,panelCollapseAnimate:true,panelCollapseMode:"placeholder",regionWeights:{north:20,south:10,center:0,west:-10,east:-20},beginAxis:function(H,R,x){var z=this,Q=z.axisProps[x],C=!Q.horizontal,I=Q.sizeProp,E=0,S=H.childItems,N=S.length,A,D,F,M,B,O,J,G,P,y,K;for(D=0;D<N;++D){F=S[D];B=F.target;F.layoutPos={};if(B.region){F.region=O=B.region;F.isCenter=B.isCenter;F.isHorz=B.isHorz;F.isVert=B.isVert;F.weight=B.weight||z.regionWeights[O]||0;R[B.id]=F;if(B.isCenter){A=F;M=B.flex;H.centerRegion=A;continue}if(C!==F.isVert){continue}F.reverseWeighting=(O==Q.borderEnd);G=B[I];P=typeof G;if(!B.collapsed){if(P=="string"&&(J=z.percentageRe.exec(G))){F.percentage=parseInt(J[1],10)}else{if(B.flex){E+=F.flex=B.flex}}}}}if(A){y=A.target;if((K=y.placeholderFor)){if(!M&&C===K.collapsedVertical()){M=0;A.collapseAxis=x}}else{if(y.collapsed&&(C===y.collapsedVertical())){M=0;A.collapseAxis=x}}}if(M==null){M=1}E+=M;return Ext.apply({before:C?"top":"left",totalFlex:E},Q)},beginLayout:function(D){var x=this,y=x.getLayoutItems(),C=x.padding,w=typeof C,t=false,s,u,F,A,B,G,E,z,v;if(C){if(w=="string"||w=="number"){C=Ext.util.Format.parseBox(C)}}else{C=D.getEl("getTargetEl").getPaddingInfo();t=true}D.outerPad=C;D.padOnContainer=t;for(A=0,F=y.length;A<F;++A){u=y[A];G=x.getSplitterTarget(u);if(G){E=undefined;z=!!u.hidden;if(!G.split){if(G.isCollapsingOrExpanding){E=!!G.collapsed}}else{if(z!==G.hidden){E=!G.hidden}}if(E){u.show()}else{if(E===false){u.hide()}}}}x.callParent(arguments);y=D.childItems;F=y.length;B={};D.borderAxisHorz=x.beginAxis(D,B,"horz");D.borderAxisVert=x.beginAxis(D,B,"vert");for(A=0;A<F;++A){s=y[A];G=x.getSplitterTarget(s.target);if(G){v=B[G.id];if(!v){v=D.getEl(G.el,x);v.region=G.region}s.collapseTarget=G=v;s.weight=G.weight;s.reverseWeighting=G.reverseWeighting;G.splitter=s;s.isHorz=G.isHorz;s.isVert=G.isVert}}x.sortWeightedItems(y,"reverseWeighting");x.setupSplitterNeighbors(y)},calculate:function(D){var w=this,G=w.getContainerSize(D),z=D.childItems,E=z.length,F=D.borderAxisHorz,y=D.borderAxisVert,C=D.outerPad,u=D.padOnContainer,A,s,x,t,v,B;F.begin=C[w.padOnContainerProp];y.begin=C.top;v=F.end=F.flexSpace=G.width+(u?C[w.padOnContainerProp]:-C[w.padNotOnContainerProp]);B=y.end=y.flexSpace=G.height+(u?C.top:-C.bottom);for(A=0;A<E;++A){s=z[A];x=s.getMarginInfo();if(s.isHorz||s.isCenter){F.addUnflexed(x.width);v-=x.width}if(s.isVert||s.isCenter){y.addUnflexed(x.height);B-=x.height}if(!s.flex&&!s.percentage){if(s.isHorz||(s.isCenter&&s.collapseAxis==="horz")){t=s.getProp("width");F.addUnflexed(t);if(s.collapseTarget){v-=t}}else{if(s.isVert||(s.isCenter&&s.collapseAxis==="vert")){t=s.getProp("height");y.addUnflexed(t);if(s.collapseTarget){B-=t}}}}}for(A=0;A<E;++A){s=z[A];x=s.getMarginInfo();if(s.percentage){if(s.isHorz){t=Math.ceil(v*s.percentage/100);t=s.setWidth(t);F.addUnflexed(t)}else{if(s.isVert){t=Math.ceil(B*s.percentage/100);t=s.setHeight(t);y.addUnflexed(t)}}}}for(A=0;A<E;++A){s=z[A];if(!s.isCenter){w.calculateChildAxis(s,F);w.calculateChildAxis(s,y)}}if(w.finishAxis(D,y)+w.finishAxis(D,F)<2){w.done=false}else{w.finishPositions(z)}},calculateChildAxis:function(n,w){var y=n.collapseTarget,s="set"+w.sizePropCap,u=w.sizeProp,v=n.getMarginInfo()[u],p,x,t,q,o;if(y){p=y.region}else{p=n.region;t=n.flex}x=p==w.borderBegin;if(!x&&p!=w.borderEnd){n[s](w.end-w.begin-v);q=w.begin}else{if(t){o=Math.ceil(w.flexSpace*(t/w.totalFlex));o=n[s](o)}else{if(n.percentage){o=n.peek(u)}else{o=n.getProp(u)}}o+=v;if(x){q=w.begin;w.begin+=o}else{w.end=q=w.end-o}}n.layoutPos[w.posProp]=q},finishAxis:function(j,l){var e=l.end-l.begin,h=j.centerRegion;if(h){h["set"+l.sizePropCap](e-h.getMarginInfo()[l.sizeProp]);h.layoutPos[l.posProp]=l.begin}return Ext.isNumber(e)?1:0},finishPositions:function(l){var n=l.length,h,j,m=this.horzPositionProp;for(h=0;h<n;++h){j=l[h];j.setProp("x",j.layoutPos.x+j.marginInfo[m]);j.setProp("y",j.layoutPos.y+j.marginInfo.top)}},getLayoutItems:function(){var l=this.owner,o=(l&&l.items&&l.items.items)||[],p=o.length,j=[],q=0,n,m;for(;q<p;q++){n=o[q];m=n.placeholderFor;if(n.hidden||((!n.floated||n.isCollapsingOrExpanding===2)&&!(m&&m.isCollapsingOrExpanding===2))){j.push(n)}}return j},getPlaceholder:function(c){return c.getPlaceholder&&c.getPlaceholder()},getSplitterTarget:function(c){var d=c.collapseTarget;if(d&&d.collapsed){return d.placeholder||d}return d},isItemBoxParent:function(c){return true},isItemShrinkWrap:function(c){return true},insertSplitter:function(p,q,n,j){var m=p.region,o=Ext.apply({xtype:"bordersplitter",collapseTarget:p,id:p.id+"-splitter",hidden:n,canResize:p.splitterResize!==false,splitterFor:p},j),l=q+((m==="south"||m==="east")?0:1);if(p.collapseMode==="mini"){o.collapsedCls=p.collapsedCls}p.splitter=this.owner.add(l,o)},onAdd:function(l,q){var o=this,s=l.placeholderFor,m=l.region,p,n,u,t;o.callParent(arguments);if(m){Ext.apply(l,o.regionFlags[m]);if(l.initBorderRegion){l.initBorderRegion()}p=m==="center";if(p){o.centerRegion=l}else{n=l.split;u=!!l.hidden;if(typeof n==="object"){t=n;n=true}if((l.isHorz||l.isVert)&&(n||l.collapseMode=="mini")){o.insertSplitter(l,q,u||!n,t)}}if(!p&&!l.hasOwnProperty("collapseMode")){l.collapseMode=o.panelCollapseMode}if(!l.hasOwnProperty("animCollapse")){if(l.collapseMode!=="placeholder"){l.animCollapse=false}else{l.animCollapse=o.panelCollapseAnimate}}}else{if(s){Ext.apply(l,o.regionFlags[s.region]);l.region=s.region;l.weight=s.weight}}},onDestroy:function(){this.centerRegion=null;this.callParent()},onRemove:function(l,s){var q=this,n=l.region,p=l.splitter,m=q.owner,o=m.destroying,t;if(n){if(l.isCenter){q.centerRegion=null}delete l.isCenter;delete l.isHorz;delete l.isVert;if(p&&!m.destroying){m.doRemove(p,true)}delete l.splitter}q.callParent(arguments);if(!o&&!s&&l.rendered){t=l.getEl();t.setStyle("top","");t.setStyle(q.horzPositionProp,"")}},regionMeta:{center:{splitterDelta:0},north:{splitterDelta:1},south:{splitterDelta:-1},west:{splitterDelta:1},east:{splitterDelta:-1}},regionFlags:{center:{isCenter:true,isHorz:false,isVert:false},north:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"top"},south:{isCenter:false,isHorz:false,isVert:true,collapseDirection:"bottom"},west:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"left"},east:{isCenter:false,isHorz:true,isVert:false,collapseDirection:"right"}},setupSplitterNeighbors:function(t){var j={},y=t.length,q=this.touchedRegions,w,x,C,u,z,v,s,B,A;for(w=0;w<y;++w){v=t[w].target;s=v.region;if(v.isCenter){C=v}else{if(s){A=q[s];for(x=0,u=A.length;x<u;++x){z=j[A[x]];if(z){z.neighbors.push(v)}}if(v.placeholderFor){B=v.placeholderFor.splitter}else{B=v.splitter}if(B){B.neighbors=[]}j[s]=B}}}if(C){A=q.center;for(x=0,u=A.length;x<u;++x){z=j[A[x]];if(z){z.neighbors.push(C)}}}},touchedRegions:{center:["north","south","east","west"],north:["north","east","west"],south:["south","east","west"],east:["east","north","south"],west:["west","north","south"]},sizePolicies:{vert:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},horz:{readsWidth:1,readsHeight:0,setsWidth:0,setsHeight:1},flexAll:{readsWidth:0,readsHeight:0,setsWidth:1,setsHeight:1}},getItemSizePolicy:function(o){var p=this,l=this.sizePolicies,q,j,n,m;if(o.isCenter){m=o.placeholderFor;if(m){if(m.collapsedVertical()){return l.vert}return l.horz}if(o.collapsed){if(o.collapsedVertical()){return l.vert}return l.horz}return l.flexAll}q=o.collapseTarget;if(q){return q.isVert?l.vert:l.horz}if(o.region){if(o.isVert){j=o.height;n=l.vert}else{j=o.width;n=l.horz}if(o.flex||(typeof j=="string"&&p.percentageRe.test(j))){return l.flexAll}return n}return p.autoSizePolicy}},0,0,0,0,["layout.border"],0,[Ext.layout.container,"Border",Ext.layout,"BorderLayout"],function(){var d={addUnflexed:function(a){this.flexSpace=Math.max(this.flexSpace-a,0)}},c=this.prototype.axisProps;Ext.apply(c.horz,d);Ext.apply(c.vert,d)}));(Ext.cmd.derive("Ext.layout.container.Card",Ext.layout.container.Fit,{alternateClassName:"Ext.layout.CardLayout",type:"card",hideInactive:true,deferredRender:false,getRenderTree:function(){var d=this,c=d.getActiveItem();if(c){if(c.hasListeners.beforeactivate&&c.fireEvent("beforeactivate",c)===false){c=d.activeItem=d.owner.activeItem=null}else{if(c.hasListeners.activate){c.on({boxready:function(){c.fireEvent("activate",c)},single:true})}}if(d.deferredRender){if(c){return d.getItemsRenderTree([c])}}else{return d.callParent(arguments)}}},renderChildren:function(){var d=this,c=d.getActiveItem();if(!d.deferredRender){d.callParent()}else{if(c){d.renderItems([c],d.getRenderTarget())}}},isValidParent:function(l,j,h){var e=l.el?l.el.dom:Ext.getDom(l);return(e&&e.parentNode===(j.dom||j))||false},getActiveItem:function(){var h=this,d=h.activeItem===undefined?(h.owner&&h.owner.activeItem):h.activeItem,e=h.parseActiveItem(d);if(e&&h.owner.items.indexOf(e)!==-1){h.activeItem=e}return e==null?null:(h.activeItem||h.owner.activeItem)},parseActiveItem:function(d){var c;if(d&&d.isComponent){c=d}else{if(typeof d==="number"||d===undefined){c=this.getLayoutItems()[d||0]}else{if(d===null){c=null}else{c=this.owner.getComponent(d)}}}return c},configureItem:function(c){if(c===this.getActiveItem()){c.hidden=false}else{c.hidden=true}this.callParent(arguments)},onRemove:function(c){this.callParent([c]);if(c===this.activeItem){this.activeItem=undefined}},getAnimation:function(d,e){var h=(d||{}).cardSwitchAnimation;if(h===false){return false}return h||e.cardSwitchAnimation},getNext:function(){var h=arguments[0],e=this.getLayoutItems(),d=Ext.Array.indexOf(e,this.activeItem);return e[d+1]||(h?e[0]:false)},next:function(){var c=arguments[0],d=arguments[1];return this.setActiveItem(this.getNext(d),c)},getPrev:function(){var h=arguments[0],e=this.getLayoutItems(),d=Ext.Array.indexOf(e,this.activeItem);return e[d-1]||(h?e[e.length-1]:false)},prev:function(){var c=arguments[0],d=arguments[1];return this.setActiveItem(this.getPrev(d),c)},setActiveItem:function(h){var m=this,j=m.owner,n=m.activeItem,l=j.rendered,o;h=m.parseActiveItem(h);o=j.items.indexOf(h);if(o===-1){o=j.items.items.length;Ext.suspendLayouts();h=j.add(h);Ext.resumeLayouts()}if(h&&n!=h){if(h.fireEvent("beforeactivate",h,n)===false){return false}if(n&&n.fireEvent("beforedeactivate",n,h)===false){return false}if(l){Ext.suspendLayouts();if(!h.rendered){m.renderItem(h,m.getRenderTarget(),j.items.length)}if(n){if(m.hideInactive){n.hide();n.hiddenByLayout=true}n.fireEvent("deactivate",n,h)}if(h.hidden){h.show()}if(!h.hidden){m.activeItem=h}Ext.resumeLayouts(true)}else{m.activeItem=h}h.fireEvent("activate",h,n);return m.activeItem}return false}},0,0,0,0,["layout.card"],0,[Ext.layout.container,"Card",Ext.layout,"CardLayout"],0));(Ext.cmd.derive("Ext.layout.container.Column",Ext.layout.container.Auto,{alternateClassName:"Ext.layout.ColumnLayout",type:"column",itemCls:Ext.baseCSSPrefix+"column",targetCls:Ext.baseCSSPrefix+"column-layout-ct",columnWidthSizePolicy:{readsWidth:0,readsHeight:1,setsWidth:1,setsHeight:0},createsInnerCt:true,manageOverflow:true,isItemShrinkWrap:function(c){return true},getItemSizePolicy:function(d,c){if(d.columnWidth){if(!c){c=this.owner.getSizeModel()}if(!c.width.shrinkWrap){return this.columnWidthSizePolicy}}return this.autoSizePolicy},calculateItems:function(B,E){var s=this,A=B.targetContext,t=B.childItems,v=t.length,D=0,z=E.gotWidth,x,q,y,C,w,u;if(z===false){A.domBlock(s,"width");x=true}else{if(z){q=E.width}else{return true}}for(y=0;y<v;++y){C=t[y];w=C.getMarginInfo().width;if(!C.widthModel.calculated){u=C.getProp("width");if(typeof u!="number"){C.block(s,"width");x=true}D+=u+w}}if(!x){q=(q<D)?0:q-D;for(y=0;y<v;++y){C=t[y];if(C.widthModel.calculated){w=C.marginInfo.width;u=C.target.columnWidth;u=Math.floor(u*q)-w;u=C.setWidth(u);D+=u+w}}B.setContentWidth(D+B.paddingContext.getPaddingInfo().width)}return !x},setCtSizeIfNeeded:function(e,j){var h=this,l=e.paddingContext.getPaddingInfo();h.callParent(arguments);if((Ext.isIEQuirks||Ext.isIE7m)&&h.isShrinkWrapTpl&&l.right){e.outerCtContext.setProp("width",j.width+l.left)}}},0,0,0,0,["layout.column"],0,[Ext.layout.container,"Column",Ext.layout,"ColumnLayout"],0));(Ext.cmd.derive("Ext.layout.container.Form",Ext.layout.container.Container,{alternateClassName:"Ext.layout.FormLayout",tableCls:Ext.baseCSSPrefix+"form-layout-table",type:"form",createsInnerCt:true,manageOverflow:true,lastOverflowAdjust:{width:0,height:0},childEls:["formTable"],padRow:'<tr role="presentation"><td class="'+Ext.baseCSSPrefix+'form-item-pad" colspan="3" role="presentation"></td></tr>',renderTpl:['<table id="{ownerId}-formTable" class="{tableCls}" style="width:100%" cellpadding="0" role="presentation">',"{%this.renderBody(out,values)%}","</table>","{%this.renderPadder(out,values)%}"],getRenderData:function(){var c=this.callParent();c.tableCls=this.tableCls;return c},calculate:function(p){var q=this,n=q.getContainerSize(p,true),m,o,l=0,s,t=p.sizeModel.height.shrinkWrap;if(t){if(p.hasDomProp("containerChildrenSizeDone")){p.setProp("contentHeight",q.formTable.dom.offsetHeight+p.targetContext.getPaddingInfo().height)}else{q.done=false}}if(n.gotWidth){m=q.formTable.dom.offsetWidth;o=p.childItems;for(s=o.length;l<s;++l){o[l].setWidth(m,false)}}else{q.done=false}},getRenderTarget:function(){return this.formTable},getRenderTree:function(){var j=this,e=j.callParent(arguments),l,h;for(l=0,h=e.length;l<h;l++){e[l]=j.transformItemRenderTree(e[l])}return e},transformItemRenderTree:function(c){if(c.tag&&c.tag=="table"){c.tag="tbody";c.role="presentation";delete c.cellspacing;delete c.cellpadding;if(Ext.isIE6){c.cn=this.padRow}return c}return{tag:"tbody",role:"presentation",cn:{tag:"tr",role:"presentation",cn:{tag:"td",role:"presentation",colspan:3,style:"width:100%",cn:c}}}},isValidParent:function(d,h,e){return true},isItemShrinkWrap:function(c){return((c.shrinkWrap===true)?3:c.shrinkWrap||0)&2},getItemSizePolicy:function(c){return{setsWidth:1,setsHeight:0}},beginLayoutCycle:function(d,e){var h=this.overflowPadderEl;if(h){h.setStyle("display","none")}if(!d.state.overflowAdjust){d.state.overflowAdjust=this.lastOverflowAdjust}},calculateOverflow:function(F,B,N){var x=this,G=F.targetContext,I=x.manageOverflow,Q=F.state,H=Q.overflowAdjust,O,J,R,E,S,A,K,C,P,D,z,M,y;if(I&&!Q.secondPass&&!x.reserveScrollbar){M=(x.getOverflowXStyle(F)==="auto");y=(x.getOverflowYStyle(F)==="auto");if(!B.gotWidth){M=false}if(!B.gotHeight){y=false}if(M||y){A=Ext.getScrollbarSize();K=F.peek("contentWidth");C=F.peek("contentHeight");E=G.getPaddingInfo();K-=E.width;C-=E.height;P=B.width;D=B.height;z=x.getScrollbarsNeeded(P,D,K,C);Q.overflowState=z;if(typeof N=="number"){z&=~N}H={width:(M&&(z&2))?A.width:0,height:(y&&(z&1))?A.height:0};if(H.width!==x.lastOverflowAdjust.width||H.height!==x.lastOverflowAdjust.height){x.done=false;F.invalidate({state:{overflowAdjust:H,overflowState:Q.overflowState,secondPass:true}})}}}if(!x.done){return}R=F.padElContext||(F.padElContext=F.getEl("overflowPadderEl",x));if(R){z=Q.overflowState;O=F.peek("contentWidth");J=1;if(z){E=G.getPaddingInfo();S=x.scrollRangeFlags;if((z&2)&&(S&1)){J+=E.bottom}if((z&1)&&(S&4)){O+=E.right}R.setProp("display","");R.setSize(O,J)}else{R.setProp("display","none")}}},completeLayout:function(c){this.lastOverflowAdjust=c.state.overflowAdjust},doRenderPadder:function(h,m){var n=m.$layout,j=n.owner,l=n.getScrollRangeFlags();if(n.manageOverflow){if(l&5){h.push('<div id="',j.id,'-overflowPadderEl" role="presentation"','style="font-size: 1px; height: 1px; margin-top: -1px; position: relative; z-index: -99999');h.push('"></div>');n.scrollRangeFlags=l}}},getContainerSize:function(z,v,B){var y=z.targetContext,w=y.getFrameInfo(),s=y.getPaddingInfo(),t=0,q=0,C=B?null:z.state.overflowAdjust,x,u,A,p;if(!z.widthModel.shrinkWrap){++q;A=v?y.getDomProp("width"):y.getProp("width");x=(typeof A=="number");if(x){++t;A-=w.width+s.width;if(C){A-=C.width}}}if(!z.heightModel.shrinkWrap){++q;p=v?y.getDomProp("height"):y.getProp("height");u=(typeof p=="number");if(u){++t;p-=w.height+s.height;if(C){p-=C.height}}}return{width:A,height:p,needed:q,got:t,gotAll:t==q,gotWidth:x,gotHeight:u}},getOverflowXStyle:function(c){var d=this;return d.overflowXStyle||(d.overflowXStyle=d.owner.scrollFlags.overflowX||c.targetContext.getStyle("overflow-x"))},getOverflowYStyle:function(c){var d=this;return d.overflowYStyle||(d.overflowYStyle=d.owner.scrollFlags.overflowY||c.targetContext.getStyle("overflow-y"))},getScrollRangeFlags:(function(){var c=-1;return function(){if(c<0){var h=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"border-box",role:"presentation",style:{width:"100px",height:"100px",padding:"10px",overflow:"auto"},children:[{role:"presentation",style:{border:"1px solid red",width:"150px",height:"150px",margin:"0 5px 5px 0"}}]}),l=h.dom.scrollHeight,m=h.dom.scrollWidth,j={175:0,165:1,170:2,160:3},a={175:0,165:4,170:8,160:12};c=(j[l]||0)|(a[m]||0);h.remove()}return c}}()),initLayout:function(){var c=this,d=Ext.getScrollbarSize().width;c.callParent();if(d&&c.manageOverflow&&!c.hasOwnProperty("lastOverflowAdjust")){if(c.owner.scrollFlags.y||c.reserveScrollbar){c.lastOverflowAdjust={width:d,height:0}}}},setupRenderTpl:function(c){this.callParent(arguments);c.renderPadder=this.doRenderPadder}},0,0,0,0,["layout.form"],0,[Ext.layout.container,"Form",Ext.layout,"FormLayout"],0));(Ext.cmd.derive("Ext.menu.Item",Ext.Component,{alternateClassName:"Ext.menu.TextItem",isMenuItem:true,activeCls:Ext.baseCSSPrefix+"menu-item-active",ariaRole:"menuitem",canActivate:true,clickHideDelay:0,destroyMenu:true,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:true,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,tooltipType:"qtip",arrowCls:Ext.baseCSSPrefix+"menu-item-arrow",baseIconCls:Ext.baseCSSPrefix+"menu-item-icon",textCls:Ext.baseCSSPrefix+"menu-item-text",indentCls:Ext.baseCSSPrefix+"menu-item-indent",indentNoSeparatorCls:Ext.baseCSSPrefix+"menu-item-indent-no-separator",indentRightIconCls:Ext.baseCSSPrefix+"menu-item-indent-right-icon",indentRightArrowCls:Ext.baseCSSPrefix+"menu-item-indent-right-arrow",linkCls:Ext.baseCSSPrefix+"menu-item-link",childEls:["itemEl","iconEl","textEl","arrowEl"],renderTpl:['<tpl if="plain">',"{text}","<tpl else>",'<a id="{id}-itemEl"',' class="{linkCls} {childElCls}"',' href="{href}" role="presentation" ','<tpl if="hrefTarget"> target="{hrefTarget}"</tpl>',' hidefocus="true"',' unselectable="on"','<tpl if="tabIndex">',' tabIndex="{tabIndex}"',"</tpl>",">",'<span id="{id}-textEl" class="{textCls} {indentCls}{childElCls}" unselectable="on">{text}</span>','<tpl if="hasIcon">','<div role="presentation" id="{id}-iconEl" class="{baseIconCls}','{[values.rightIcon ? "-right" : ""]} {iconCls}','{childElCls} {glyphCls}" style="<tpl if="icon">background-image:url({icon});</tpl>','<tpl if="glyph && glyphFontFamily">font-family:{glyphFontFamily};</tpl>">','<tpl if="glyph">&#{glyph};</tpl>',"</div>","</tpl>",'<tpl if="showCheckbox">','<div role="presentation" id="{id}-checkEl" class="{baseIconCls}','{[(values.hasIcon && !values.rightIcon) ? "-right" : ""]} ','{groupCls} {checkboxCls}{childElCls}">',"</div>","</tpl>",'<tpl if="hasMenu">','<div role="presentation" id="{id}-arrowEl" class="{arrowCls}{childElCls}"></div>',"</tpl>","</a>","</tpl>"],maskOnDisable:false,iconAlign:"left",activate:function(c){var d=this;if(c||(!d.activated&&d.canActivate&&d.rendered&&!d.isDisabled()&&d.isVisible())){if(!d.plain){d.el.addCls(d.activeCls)}d.focus(false,true);d.activated=true;if(d.hasListeners.activate){d.fireEvent("activate",d)}}},getFocusEl:function(){return this.itemEl},deactivate:function(){var c=this,d;if(c.activated){d=c.up("");if(!c.plain){c.el.removeCls(c.activeCls)}if(d){d.focus(false,true)}c.hideMenu();c.activated=false;if(c.hasListeners.deactivate){c.fireEvent("deactivate",c)}}},deferHideMenu:function(){if(this.menu.isVisible()){this.menu.hide()}},cancelDeferHide:function(){clearTimeout(this.hideMenuTimer)},deferHideParentMenus:function(){var c;Ext.menu.Manager.hideAll();if(!Ext.Element.getActiveElement()){c=this.up(":not([hidden])");if(c){c.focus()}}},expandMenu:function(d){var c=this;if(c.menu){c.cancelDeferHide();if(d===0){c.doExpandMenu()}else{clearTimeout(c.expandMenuTimer);c.expandMenuTimer=Ext.defer(c.doExpandMenu,Ext.isNumber(d)?d:c.menuExpandDelay,c)}}},doExpandMenu:function(){var d=this,c=d.menu;if(d.activated&&(!c.rendered||!c.isVisible())){d.parentMenu.activeChild=c;c.ownerCmp=c.ownerItem=d;c.parentMenu=d.parentMenu;c.constrainTo=document.body;c.showBy(d,d.menuAlign)}},getRefItems:function(e){var h=this.menu,d;if(h){d=h.getRefItems(e);d.unshift(h)}return d||[]},hideMenu:function(d){var c=this;if(c.menu){clearTimeout(c.expandMenuTimer);c.hideMenuTimer=Ext.defer(c.deferHideMenu,Ext.isNumber(d)?d:c.menuHideDelay,c)}},initComponent:function(){var e=this,l=Ext.baseCSSPrefix,h=[l+"menu-item"],j;e.addEvents("activate","click","deactivate","textchange","iconchange");if(e.plain){h.push(l+"menu-item-plain")}if(e.cls){h.push(e.cls)}e.cls=h.join(" ");if(e.menu){j=e.menu;delete e.menu;e.setMenu(j)}e.callParent(arguments)},onClick:function(l){var m=this,e=m.clickHideDelay,j=l.browserEvent,h;if(!m.href||m.disabled){l.stopEvent()}if(m.disabled||m.handlingClick){return}if(m.hideOnClick){if(!e){m.deferHideParentMenus()}else{m.deferHideParentMenusTimer=Ext.defer(m.deferHideParentMenus,e,m)}}Ext.callback(m.handler,m.scope||m,[m,l]);m.fireEvent("click",m,l);if(Ext.isIE9m||Ext.isIEQuirks){h=(j.returnValue===false)?true:false}else{h=!!j.defaultPrevented}if(m.href&&!h){m.handlingClick=true;m.itemEl.dom.click();delete m.handlingClick}if(!m.hideOnClick){m.focus()}},onRemoved:function(){var c=this;if(c.activated&&c.parentMenu.activeItem===c){c.parentMenu.deactivateActiveItem()}c.callParent(arguments);c.parentMenu=c.ownerCmp=c.ownerButton=null},beforeDestroy:function(){var c=this;if(c.rendered){c.clearTip()}c.callParent()},onDestroy:function(){var c=this;clearTimeout(c.expandMenuTimer);c.cancelDeferHide();clearTimeout(c.deferHideParentMenusTimer);c.setMenu(null);c.callParent(arguments)},beforeRender:function(){var p=this,o=p.glyph,q=Ext._glyphFontFamily,u=!!(p.icon||p.iconCls||o),n=!!p.menu,t=((p.iconAlign==="right")&&!n),w=p.isMenuCheckItem,y=[],v=p.ownerCt,s=v.plain,x;p.callParent();if(u){if(n&&p.showCheckbox){u=false}}if(typeof o==="string"){x=o.split("@");o=x[0];q=x[1]}if(!s||(u&&!t)||w){if(v.showSeparator&&!s){y.push(p.indentCls)}else{y.push(p.indentNoSeparatorCls)}}if(n){y.push(p.indentRightArrowCls)}else{if(u&&(t||w)){y.push(p.indentRightIconCls)}}Ext.applyIf(p.renderData,{href:p.href||"#",hrefTarget:p.hrefTarget,icon:p.icon,iconCls:p.iconCls,glyph:o,glyphCls:o?Ext.baseCSSPrefix+"menu-item-glyph":undefined,glyphFontFamily:q,hasIcon:u,hasMenu:n,indent:!s||u||w,isCheckItem:w,rightIcon:t,plain:p.plain,text:p.text,arrowCls:p.arrowCls,baseIconCls:p.baseIconCls,textCls:p.textCls,indentCls:y.join(" "),linkCls:p.linkCls,groupCls:p.group?p.groupCls:"",tabIndex:p.tabIndex})},onRender:function(){var c=this;c.callParent(arguments);if(c.tooltip){c.setTooltip(c.tooltip,true)}},setMenu:function(l,m){var n=this,h=n.menu,j=n.arrowEl;if(h){h.ownerCmp=h.ownerItem=h.parentMenu=null;if(m===true||(m!==false&&n.destroyMenu)){Ext.destroy(h)}}if(l){n.menu=Ext.menu.Manager.get(l);n.menu.ownerCmp=n.menu.ownerItem=n}else{n.menu=null}if(n.rendered&&!n.destroying&&j){j[n.menu?"addCls":"removeCls"](n.arrowCls)}},setHandler:function(c,d){this.handler=c||null;this.scope=d},setIcon:function(d){var e=this.iconEl,h=this.icon;if(e){e.src=d||Ext.BLANK_IMAGE_URL}this.icon=d;this.fireEvent("iconchange",this,h,d)},setIconCls:function(e){var j=this,h=j.iconEl,l=j.iconCls;if(h){if(j.iconCls){h.removeCls(j.iconCls)}if(e){h.addCls(e)}}j.iconCls=e;j.fireEvent("iconchange",j,l,e)},setText:function(j){var l=this,e=l.textEl||l.el,h=l.text;l.text=j;if(l.rendered){e.update(j||"");l.ownerCt.updateLayout()}l.fireEvent("textchange",l,h,j)},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},clearTip:function(){if(Ext.quickTipsActive&&Ext.isObject(this.tooltip)){Ext.tip.QuickTipManager.unregister(this.itemEl)}},setTooltip:function(h,e){var d=this;if(d.rendered){if(!e){d.clearTip()}if(Ext.quickTipsActive&&Ext.isObject(h)){Ext.tip.QuickTipManager.register(Ext.apply({target:d.itemEl.id},h));d.tooltip=h}else{d.itemEl.dom.setAttribute(d.getTipAttr(),h)}}else{d.tooltip=h}return d}},0,["menuitem"],["component","box","menuitem"],{component:true,box:true,menuitem:true},["widget.menuitem"],[["queryable",Ext.Queryable]],[Ext.menu,"Item",Ext.menu,"TextItem"],0));(Ext.cmd.derive("Ext.menu.CheckItem",Ext.menu.Item,{checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:false,checkChangeDisabled:false,ariaRole:"menuitemcheckbox",childEls:["itemEl","iconEl","textEl","checkEl"],showCheckbox:true,isMenuCheckItem:true,checkboxCls:Ext.baseCSSPrefix+"menu-item-checkbox",initComponent:function(){var c=this;c.checked=!!c.checked;c.addEvents("beforecheckchange","checkchange");c.callParent(arguments);Ext.menu.Manager.registerCheckable(c);if(c.group){if(c.initialConfig.hideOnClick!==false){c.hideOnClick=true}}},beforeRender:function(){var c=this;c.callParent();Ext.apply(c.renderData,{checkboxCls:c.checkboxCls,showCheckbox:c.showCheckbox})},afterRender:function(){var c=this;c.callParent();c.checked=!c.checked;c.setChecked(!c.checked,true);if(c.checkChangeDisabled){c.disableCheckChange()}},disableCheckChange:function(){var c=this,d=c.checkEl;if(d){d.addCls(c.disabledCls)}if(!(Ext.isIE10p||(Ext.isIE9&&Ext.isStrict))&&c.rendered){c.el.repaint()}c.checkChangeDisabled=true},enableCheckChange:function(){var c=this,d=c.checkEl;if(d){d.removeCls(c.disabledCls)}c.checkChangeDisabled=false},onClick:function(c){var d=this;if(!d.disabled&&!d.checkChangeDisabled&&!(d.checked&&d.group)){d.setChecked(!d.checked)}this.callParent([c])},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this);this.callParent(arguments)},setChecked:function(n,h){var o=this,m=o.checkedCls,l=o.uncheckedCls,j=o.el;if(o.checked!==n&&(h||o.fireEvent("beforecheckchange",o,n)!==false)){if(j){if(n){j.addCls(m);j.removeCls(l)}else{j.addCls(l);j.removeCls(m)}}o.checked=n;Ext.menu.Manager.onCheckChange(o,n);if(!h){Ext.callback(o.checkHandler,o.scope||o,[o,n]);o.fireEvent("checkchange",o,n)}}}},0,["menucheckitem"],["component","box","menuitem","menucheckitem"],{component:true,box:true,menuitem:true,menucheckitem:true},["widget.menucheckitem"],0,[Ext.menu,"CheckItem"],0));(Ext.cmd.derive("Ext.menu.KeyNav",Ext.util.KeyNav,{constructor:function(d){var c=this;c.menu=d.target;c.callParent([Ext.apply({down:c.down,enter:c.enter,esc:c.escape,left:c.left,right:c.right,space:c.enter,tab:c.tab,up:c.up},d)])},down:function(d){var e=this,h=e.menu.focusedItem;if(h&&d.getKey()==Ext.EventObject.DOWN&&e.isWhitelisted(h)){return true}e.focusNextItem(1)},enter:function(d){var h=this.menu,e=h.focusedItem;if(h.activeItem){h.onClick(d)}else{if(e&&e.isFormField){return true}}},escape:function(c){Ext.menu.Manager.hideAll()},focusNextItem:function(t){var u=this.menu,p=u.items,n=u.focusedItem,o=n?p.indexOf(n):-1,m=o+t,q=p.length,s=0,l;while(s<q&&m!==o){if(m<0){m=q-1}else{if(m>=q){m=0}}l=p.getAt(m);if(u.canActivateItem(l)){u.setActiveItem(l);break}m+=t;++s}},isWhitelisted:function(d){var c=Ext.FocusManager;return c&&c.isWhitelisted(d)},left:function(e){var d=this.menu,h=d.focusedItem;if(h&&this.isWhitelisted(h)){return true}if(d.parentMenu){d.hide();d.parentMenu.focus()}},right:function(m){var l=this.menu,j=l.focusedItem,h=l.activeItem,e;if(j&&this.isWhitelisted(j)){return true}if(h){e=l.activeItem.menu;if(e){h.expandMenu(0);e.setActiveItem(e.child(":focusable"))}}},tab:function(c){var d=this;if(c.shiftKey){d.up(c)}else{d.down(c)}},up:function(d){var e=this,h=e.menu.focusedItem;if(h&&d.getKey()==Ext.EventObject.UP&&e.isWhitelisted(h)){return true}e.focusNextItem(-1)}},1,0,0,0,0,0,[Ext.menu,"KeyNav"],0));(Ext.cmd.derive("Ext.menu.Separator",Ext.menu.Item,{canActivate:false,focusable:false,hideOnClick:false,plain:true,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",ariaRole:"separator",beforeRender:function(e,h){var d=this;d.callParent();d.addCls(d.separatorCls)}},0,["menuseparator"],["component","box","menuitem","menuseparator"],{component:true,box:true,menuitem:true,menuseparator:true},["widget.menuseparator"],0,[Ext.menu,"Separator"],0));(Ext.cmd.derive("Ext.menu.Menu",Ext.panel.Panel,{enableKeyNav:true,allowOtherMenus:false,ariaRole:"menu",floating:true,constrain:true,hidden:true,hideMode:"visibility",ignoreParentClicks:false,isMenu:true,showSeparator:true,minWidth:undefined,defaultMinWidth:120,defaultAlign:"tl-bl?",initComponent:function(){var h=this,m=Ext.baseCSSPrefix,j=[m+"menu"],n=h.bodyCls?[h.bodyCls]:[],l=h.floating!==false;h.addEvents("click","mouseenter","mouseleave","mouseover");Ext.menu.Manager.register(h);if(h.plain){j.push(m+"menu-plain")}h.cls=j.join(" ");n.push(m+"menu-body",Ext.dom.Element.unselectableCls);h.bodyCls=n.join(" ");if(!h.layout){h.layout={type:"vbox",align:"stretchmax",overflowHandler:"Scroller"}}if(l){if(h.minWidth===undefined){h.minWidth=h.defaultMinWidth}}else{h.hidden=!!h.initialConfig.hidden;h.constrain=false}h.callParent(arguments);Ext.override(h.getLayout(),{configureItem:h.configureItem})},initFloatConstrain:Ext.emptyFn,initHierarchyEvents:Ext.emptyFn,getHierarchyState:function(){var c=this.callParent();c.hidden=this.hidden;return c},beforeRender:function(){this.callParent(arguments);if(!this.getSizeModel().width.shrinkWrap){this.layout.align="stretch"}},onBoxReady:function(){var c=this;c.callParent(arguments);if(c.showSeparator){c.iconSepEl=c.layout.getElementTarget().insertFirst({role:"presentation",cls:Ext.baseCSSPrefix+"menu-icon-separator",html:"&#160;"})}c.mon(c.el,{click:c.onClick,mouseover:c.onMouseOver,scope:c});c.mouseMonitor=c.el.monitorMouseLeave(100,c.onMouseLeave,c);if(c.enableKeyNav){c.keyNav=new Ext.menu.KeyNav({target:c,keyMap:c.getKeyMap()})}},canActivateItem:function(c){return c&&!c.isDisabled()&&c.isVisible()&&(c.canActivate||!c.isMenuItem)},deactivateActiveItem:function(e){var l=this,j=l.activeItem,h=l.focusedItem;if(j){j.deactivate();if(!j.activated){delete l.activeItem}}if(h&&e){h.blur();delete l.focusedItem}},getFocusEl:function(){return this.focusedItem||this.items.items[0]},hide:function(){this.deactivateActiveItem(true);this.callParent(arguments)},getItemFromEvent:function(j){var h=this,l=h.layout.getRenderTarget().dom,e=j.getTarget();while(e.parentNode!==l){e=e.parentNode;if(!e){return}}return Ext.getCmp(e.id)},lookupComponent:function(c){var d=this;if(typeof c=="string"){c=d.lookupItemFromString(c)}else{if(Ext.isObject(c)){c=d.lookupItemFromObject(c)}}c.minWidth=c.minWidth||d.minWidth;return c},lookupItemFromObject:function(c){var d=this;if(!c.isComponent){if(!c.xtype){c=Ext.create("Ext.menu."+(Ext.isBoolean(c.checked)?"Check":"")+"Item",c)}else{c=Ext.ComponentManager.create(c,c.xtype)}}if(c.isMenuItem){c.parentMenu=d}return c},lookupItemFromString:function(c){return(c=="separator"||c=="-")?new Ext.menu.Separator():new Ext.menu.Item({canActivate:false,hideOnClick:false,plain:true,text:c})},configureItem:function(m){var n=this,j=n.owner,l=Ext.baseCSSPrefix,h;if(n.owner.items.getCount()>1&&!m.rendered&&!m.isMenuItem&&!m.dock){h=[l+"menu-item-cmp"];if(!j.plain&&(m.indent!==false||m.iconCls==="no-icon")){h.push(l+"menu-item-indent")}if(m.rendered){m.el.addCls(h)}else{m.cls=(m.cls||"")+" "+h.join(" ")}}this.callParent(arguments)},onClick:function(h){var d=this,e;if(d.disabled){h.stopEvent();return}e=(h.type==="click")?d.getItemFromEvent(h):d.activeItem;if(e&&e.isMenuItem){if(!e.menu||!d.ignoreParentClicks){e.onClick(h)}else{h.stopEvent()}}if(!e||e.disabled){e=undefined}d.fireEvent("click",d,e,h)},onDestroy:function(){var c=this;Ext.menu.Manager.unregister(c);c.parentMenu=c.ownerCmp=c.ownerButton=null;if(c.rendered){c.el.un(c.mouseMonitor);Ext.destroy(c.keyNav);c.keyNav=null}c.callParent(arguments)},onMouseLeave:function(c){var d=this;d.deactivateActiveItem();if(d.disabled){return}d.fireEvent("mouseleave",d,c)},onMouseOver:function(n){var o=this,m=n.getRelatedTarget(),e=!o.el.contains(m),p=o.getItemFromEvent(n),q=o.parentMenu,l=o.ownerCmp;if(e&&q){q.setActiveItem(l);l.cancelDeferHide();q.mouseMonitor.mouseenter()}if(o.disabled){return}if(p&&!p.activated){o.setActiveItem(p);if(p.activated&&p.expandMenu){p.expandMenu()}}if(e){o.fireEvent("mouseenter",o,n)}o.fireEvent("mouseover",o,p,n)},setActiveItem:function(c){var d=this;if(c&&(c!=d.activeItem)){d.deactivateActiveItem();if(d.canActivateItem(c)){if(c.activate){c.activate(true);if(c.activated){d.activeItem=c;d.focusedItem=c}}else{c.focus();d.focusedItem=c}}}},beforeShow:function(){var c=this,d;if(c.floating){c.savedMaxHeight=c.maxHeight;d=c.container.getViewSize().height;c.maxHeight=Math.min(c.maxHeight||d,d)}c.callParent(arguments)},afterShow:function(){var c=this;c.callParent(arguments);if(c.floating){c.maxHeight=c.savedMaxHeight}}},0,["menu"],["component","box","container","panel","menu"],{component:true,box:true,container:true,panel:true,menu:true},["widget.menu"],0,[Ext.menu,"Menu"],0));(Ext.cmd.derive("Ext.menu.ColorPicker",Ext.menu.Menu,{hideOnClick:true,pickerId:null,initComponent:function(){var c=this,d=Ext.apply({},c.initialConfig);delete d.listeners;Ext.apply(c,{plain:true,showSeparator:false,bodyPadding:0,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-color-item",margin:0,id:c.pickerId,xtype:"colorpicker"},d)});c.callParent(arguments);c.picker=c.down("colorpicker");c.relayEvents(c.picker,["select"]);if(c.hideOnClick){c.on("select",c.hidePickerOnSelect,c)}},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}},0,["colormenu"],["component","box","container","panel","menu","colormenu"],{component:true,box:true,container:true,panel:true,menu:true,colormenu:true},["widget.colormenu"],0,[Ext.menu,"ColorPicker"],0));(Ext.cmd.derive("Ext.menu.DatePicker",Ext.menu.Menu,{hideOnClick:true,pickerId:null,initComponent:function(){var c=this,d=Ext.apply({},c.initialConfig);delete d.listeners;Ext.apply(c,{showSeparator:false,plain:true,bodyPadding:0,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-date-item",margin:0,border:false,id:c.pickerId,xtype:"datepicker"},d)});c.callParent(arguments);c.picker=c.down("datepicker");c.relayEvents(c.picker,["select"]);if(c.hideOnClick){c.on("select",c.hidePickerOnSelect,c)}},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}},0,["datemenu"],["component","box","container","panel","menu","datemenu"],{component:true,box:true,container:true,panel:true,menu:true,datemenu:true},["widget.datemenu"],0,[Ext.menu,"DatePicker"],0));(Ext.cmd.derive("Ext.panel.Tool",Ext.Component,{isTool:true,baseCls:Ext.baseCSSPrefix+"tool",disabledCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",ariaRole:"button",childEls:["toolEl"],renderTpl:['<img id="{id}-toolEl" src="{blank}" class="{baseCls}-img {baseCls}-{type}{childElCls}" role="presentation"/>'],toolOwner:null,tooltipType:"qtip",stopEvent:true,height:15,width:15,initComponent:function(){var c=this;c.addEvents("click");c.type=c.type||c.id;Ext.applyIf(c.renderData,{baseCls:c.baseCls,blank:Ext.BLANK_IMAGE_URL,type:c.type});c.tooltip=c.tooltip||c.qtip;c.callParent()},afterRender:function(){var c=this,d;c.callParent(arguments);c.el.on({click:c.onClick,mousedown:c.onMouseDown,mouseover:c.onMouseOver,mouseout:c.onMouseOut,scope:c});if(c.tooltip){if(Ext.quickTipsActive&&Ext.isObject(c.tooltip)){Ext.tip.QuickTipManager.register(Ext.apply({target:c.id},c.tooltip))}else{d=c.tooltipType=="qtip"?"data-qtip":"title";c.el.dom.setAttribute(d,c.tooltip)}}},getFocusEl:function(){return this.el},setType:function(e){var d=this,h=d.type;d.type=e;if(d.rendered){if(h){d.toolEl.removeCls(d.baseCls+"-"+h)}d.toolEl.addCls(d.baseCls+"-"+e)}else{d.renderData.type=e}return d},onClick:function(h,d){var e=this;if(e.disabled){return false}e.el.removeCls(e.toolPressedCls);e.el.removeCls(e.toolOverCls);if(e.stopEvent!==false){h.stopEvent()}if(e.handler){Ext.callback(e.handler,e.scope||e,[h,d,e.ownerCt,e])}else{if(e.callback){Ext.callback(e.callback,e.scope||e,[e.toolOwner||e.ownerCt,e,h])}}e.fireEvent("click",e,h);return true},onDestroy:function(){var c=this;if(Ext.quickTipsActive&&Ext.isObject(c.tooltip)){Ext.tip.QuickTipManager.unregister(c.id)}if(c.keyMap){c.keyMap.destroy()}delete c.toolOwner;c.callParent()},onMouseDown:function(){if(this.disabled){return false}this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled){return false}this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}},0,["tool"],["component","box","tool"],{component:true,box:true,tool:true},["widget.tool"],0,[Ext.panel,"Tool"],0));(Ext.cmd.derive("Ext.resizer.SplitterTracker",Ext.dd.DragTracker,{enabled:true,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",createDragOverlay:function(){var c;c=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});c.unselectable();c.setSize(Ext.Element.getViewWidth(true),Ext.Element.getViewHeight(true));c.show()},getPrevCmp:function(){var c=this.getSplitter();return c.previousSibling(":not([hidden])")},getNextCmp:function(){var c=this.getSplitter();return c.nextSibling(":not([hidden])")},onBeforeStart:function(m){var p=this,o=p.getPrevCmp(),l=p.getNextCmp(),q=p.getSplitter().collapseEl,n=m.getTarget(),e;if(!o||!l){return false}if(q&&n===p.getSplitter().collapseEl.dom){return false}if(l.collapsed||o.collapsed){return false}p.prevBox=o.getEl().getBox();p.nextBox=l.getEl().getBox();p.constrainTo=e=p.calculateConstrainRegion();if(!e){return false}return e},onStart:function(c){var d=this.getSplitter();this.createDragOverlay();d.addCls(d.baseCls+"-active")},calculateConstrainRegion:function(){var u=this,A=u.getSplitter(),t=A.getWidth(),s=A.defaultSplitMin,z=A.orientation,w=u.prevBox,q=u.getPrevCmp(),y=u.nextBox,v=u.getNextCmp(),o,p,x;if(z==="vertical"){x={prevCmp:q,nextCmp:v,prevBox:w,nextBox:y,defaultMin:s,splitWidth:t};o=new Ext.util.Region(w.y,u.getVertPrevConstrainRight(x),w.bottom,u.getVertPrevConstrainLeft(x));p=new Ext.util.Region(y.y,u.getVertNextConstrainRight(x),y.bottom,u.getVertNextConstrainLeft(x))}else{o=new Ext.util.Region(w.y+(q.minHeight||s),w.right,(q.maxHeight?w.y+q.maxHeight:y.bottom-(v.minHeight||s))+t,w.x);p=new Ext.util.Region((v.maxHeight?y.bottom-v.maxHeight:w.y+(q.minHeight||s))-t,y.right,y.bottom-(v.minHeight||s),y.x)}return o.intersect(p)},performResize:function(w,B){var u=this,G=u.getSplitter(),A=G.orientation,t=u.getPrevCmp(),v=u.getNextCmp(),F=G.ownerCt,y=F.query(">[flex]"),x=y.length,E=A==="vertical",z=0,C=E?"width":"height",D=0,e,H;for(;z<x;z++){e=y[z];H=E?e.getWidth():e.getHeight();D+=H;e.flex=H}B=E?B[0]:B[1];if(t){H=u.prevBox[C]+B;if(t.flex){t.flex=H}else{t[C]=H}}if(v){H=u.nextBox[C]-B;if(v.flex){v.flex=H}else{v[C]=H}}F.updateLayout()},endDrag:function(){var c=this;if(c.overlay){c.overlay.remove();delete c.overlay}c.callParent(arguments)},onEnd:function(h){var e=this,d=e.getSplitter();d.removeCls(d.baseCls+"-active");e.performResize(h,e.getResizeOffset())},onDrag:function(m){var o=this,l=o.getOffset("dragTarget"),n=o.getSplitter(),e=n.getEl(),j=n.orientation;if(j==="vertical"){e.setX(o.startRegion.left+l[0])}else{e.setY(o.startRegion.top+l[1])}},getSplitter:function(){return this.splitter},getVertPrevConstrainRight:function(c){return(c.prevCmp.maxWidth?c.prevBox.x+c.prevCmp.maxWidth:c.nextBox.right-(c.nextCmp.minWidth||c.defaultMin))+c.splitWidth},getVertPrevConstrainLeft:function(c){return c.prevBox.x+(c.prevCmp.minWidth||c.defaultMin)},getVertNextConstrainRight:function(c){return c.nextBox.right-(c.nextCmp.minWidth||c.defaultMin)},getVertNextConstrainLeft:function(c){return(c.nextCmp.maxWidth?c.nextBox.right-c.nextCmp.maxWidth:c.prevBox.x+(c.prevBox.minWidth||c.defaultMin))-c.splitWidth},getResizeOffset:function(){return this.getOffset("dragTarget")}},0,0,0,0,0,0,[Ext.resizer,"SplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.BorderSplitterTracker",Ext.resizer.SplitterTracker,{getPrevCmp:null,getNextCmp:null,calculateConstrainRegion:function(){var z=this,W=z.splitter,J=W.collapseTarget,T=W.defaultSplitMin,Q=W.vertical?"Width":"Height",U="min"+Q,D="max"+Q,P="get"+Q,E=W.neighbors,S=E.length,K=J.el.getBox(),R=K.x,I=K.y,A=K.right,O=K.bottom,G=W.vertical?(A-R):(O-I),B,N,M,C,F,H,V;M=(J[U]||Math.min(G,T))-G;C=J[D];if(!C){C=1000000000}else{C-=G}V=G;for(B=0;B<S;++B){N=E[B];G=N[P]();F=G-N[D];H=G-(N[U]||Math.min(G,T));if(!isNaN(F)){if(M<F){M=F}}if(C>H){C=H}}if(C-M<2){return null}K=new Ext.util.Region(I,A,O,R);z.constraintAdjusters[z.getCollapseDirection()](K,M,C,W);z.dragInfo={minRange:M,maxRange:C,targetSize:V};return K},constraintAdjusters:{left:function(l,h,e,j){l[0]=l.x=l.left=l.right+h;l.right+=e+j.getWidth()},top:function(l,h,e,j){l[1]=l.y=l.top=l.bottom+h;l.bottom+=e+j.getHeight()},bottom:function(l,h,e,j){l.bottom=l.top-h;l.top-=e+j.getHeight()},right:function(l,h,e,j){l.right=l.left-h;l[0]=l.x=l.left=l.x-e+j.getWidth()}},onBeforeStart:function(q){var o=this,v=o.splitter,w=v.collapseTarget,e=v.neighbors,t=o.getSplitter().collapseEl,p=q.getTarget(),u=e.length,s,n;if(t&&p===v.collapseEl.dom){return false}if(w.collapsed){return false}for(s=0;s<u;++s){n=e[s];if(n.collapsed&&n.isHorz===w.isHorz){return false}}if(!(o.constrainTo=o.calculateConstrainRegion())){return false}return true},performResize:function(o,p){var n=this,v=n.splitter,q=v.getCollapseDirection(),w=v.collapseTarget,s=n.splitAdjusters[v.vertical?"horz":"vert"],e=p[s.index],t=n.dragInfo,u;if(q=="right"||q=="bottom"){e=-e}e=Math.min(Math.max(t.minRange,e),t.maxRange);if(e){(u=v.ownerCt).suspendLayouts();s.adjustTarget(w,t.targetSize,e);u.resumeLayouts(true)}},splitAdjusters:{horz:{index:0,adjustTarget:function(d,e,h){d.flex=null;d.setSize(e+h)}},vert:{index:1,adjustTarget:function(d,e,h){d.flex=null;d.setSize(undefined,e+h)}}},getCollapseDirection:function(){return this.splitter.getCollapseDirection()}},0,0,0,0,0,0,[Ext.resizer,"BorderSplitterTracker"],0));(Ext.cmd.derive("Ext.resizer.Handle",Ext.Component,{handleCls:"",baseHandleCls:Ext.baseCSSPrefix+"resizable-handle",region:"",ariaRole:"presentation",beforeRender:function(){var c=this;c.callParent();c.protoEl.unselectable();c.addCls(c.baseHandleCls,c.baseHandleCls+"-"+c.region,c.handleCls)}},0,0,["component","box"],{component:true,box:true},0,0,[Ext.resizer,"Handle"],0));(Ext.cmd.derive("Ext.resizer.ResizeTracker",Ext.dd.DragTracker,{dynamic:true,preserveRatio:false,constrainTo:null,proxyCls:Ext.baseCSSPrefix+"resizable-proxy",constructor:function(h){var m=this,n,j,l;if(!h.el){if(h.target.isComponent){m.el=h.target.getEl()}else{m.el=h.target}}this.callParent(arguments);if(m.preserveRatio&&m.minWidth&&m.minHeight){n=m.minWidth/m.el.getWidth();j=m.minHeight/m.el.getHeight();if(j>n){m.minWidth=m.el.getWidth()*j}else{m.minHeight=m.el.getHeight()*n}}if(m.throttle){l=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(m,arguments)},m.throttle);m.resize=function(c,a,d){if(d){Ext.resizer.ResizeTracker.prototype.resize.apply(m,arguments)}else{l.apply(null,arguments)}}}},onBeforeStart:function(c){this.startBox=this.target.getBox()},getProxy:function(){var c=this;if(!c.dynamic&&!c.proxy){c.proxy=c.createProxy(c.target||c.el);c.hideProxy=true}if(c.proxy){c.proxy.show();return c.proxy}},createProxy:function(h){var d,e=this.proxyCls;if(h.isComponent){d=h.getProxy().addCls(e)}else{d=h.createProxy({tag:"div",role:"presentation",cls:e,id:h.id+"-rzproxy"},Ext.getBody())}d.removeCls(Ext.baseCSSPrefix+"proxy-el");return d},onStart:function(c){this.activeResizeHandle=Ext.get(this.getDragTarget().id);if(!this.dynamic){this.resize(this.startBox)}},onDrag:function(c){if(this.dynamic||this.proxy){this.updateDimensions(c)}},updateDimensions:function(z,D){var y=this,M=y.activeResizeHandle.region,J=y.getOffset(y.constrainTo?"dragTarget":null),F=y.startBox,I,B=0,x=0,G,A,O=0,e=0,w,H,N,K,C,E;M=y.convertRegionName(M);switch(M){case"south":x=J[1];N=2;break;case"north":x=-J[1];e=-x;N=2;break;case"east":B=J[0];N=1;break;case"west":B=-J[0];O=-B;N=1;break;case"northeast":x=-J[1];e=-x;B=J[0];H=[F.x,F.y+F.height];N=3;break;case"southeast":x=J[1];B=J[0];H=[F.x,F.y];N=3;break;case"southwest":B=-J[0];O=-B;x=J[1];H=[F.x+F.width,F.y];N=3;break;case"northwest":x=-J[1];e=-x;B=-J[0];O=-B;H=[F.x+F.width,F.y+F.height];N=3;break}K={width:F.width+B,height:F.height+x,x:F.x+O,y:F.y+e};G=Ext.Number.snap(K.width,y.widthIncrement);A=Ext.Number.snap(K.height,y.heightIncrement);if(G!=K.width||A!=K.height){switch(M){case"northeast":K.y-=A-K.height;break;case"north":K.y-=A-K.height;break;case"southwest":K.x-=G-K.width;break;case"west":K.x-=G-K.width;break;case"northwest":K.x-=G-K.width;K.y-=A-K.height}K.width=G;K.height=A}if(K.width<y.minWidth||K.width>y.maxWidth){K.width=Ext.Number.constrain(K.width,y.minWidth,y.maxWidth);if(O){K.x=F.x+(F.width-K.width)}}else{y.lastX=K.x}if(K.height<y.minHeight||K.height>y.maxHeight){K.height=Ext.Number.constrain(K.height,y.minHeight,y.maxHeight);if(e){K.y=F.y+(F.height-K.height)}}else{y.lastY=K.y}if(y.preserveRatio||z.shiftKey){I=y.startBox.width/y.startBox.height;C=Math.min(Math.max(y.minHeight,K.width/I),y.maxHeight);E=Math.min(Math.max(y.minWidth,K.height*I),y.maxWidth);if(N==1){K.height=C}else{if(N==2){K.width=E}else{w=Math.abs(H[0]-this.lastXY[0])/Math.abs(H[1]-this.lastXY[1]);if(w>I){K.height=C}else{K.width=E}if(M=="northeast"){K.y=F.y-(K.height-F.height)}else{if(M=="northwest"){K.y=F.y-(K.height-F.height);K.x=F.x-(K.width-F.width)}else{if(M=="southwest"){K.x=F.x-(K.width-F.width)}}}}}}y.setPosition=K.x!==y.startBox.x||K.y!==y.startBox.y;y.resize(K,D)},resize:function(m,j){var n=this,l,h=n.setPosition;if(n.dynamic||(!n.dynamic&&j)){if(h){n.target.setBox(m)}else{n.target.setSize(m.width,m.height)}}if(!j){l=n.getProxy();if(l&&l!==n.target){if(h||n.hideProxy){l.setBox(m)}else{l.setSize(m.width,m.height)}}}},onEnd:function(c){this.updateDimensions(c,true);if(this.proxy&&this.hideProxy){this.proxy.hide()}},convertRegionName:function(c){return c}},1,0,0,0,0,0,[Ext.resizer,"ResizeTracker"],0));(Ext.cmd.derive("Ext.resizer.Resizer",Ext.Base,{alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",overCls:Ext.baseCSSPrefix+"resizable-handle-over",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",wrappedCls:Ext.baseCSSPrefix+"resizable-wrapped",delimiterRe:/(?:\s*[,;]\s*)|\s+/,dynamic:true,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:10000,maxWidth:10000,pinned:false,preserveRatio:false,transparent:false,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},ariaRole:"presentation",constructor:function(G){var y=this,u,J,t=y.handles,F,v,C,D=0,w,H,x=[],B,I,z,E,A=Ext.dom.Element.unselectableCls;y.addEvents("beforeresize","resizedrag","resize");if(Ext.isString(G)||Ext.isElement(G)||G.dom){u=G;G=arguments[1]||{};G.target=u}y.mixins.observable.constructor.call(y,G);u=y.target;if(u){if(u.isComponent){u.addClsWithUI("resizable");if(u.minWidth){y.minWidth=u.minWidth}if(u.minHeight){y.minHeight=u.minHeight}if(u.maxWidth){y.maxWidth=u.maxWidth}if(u.maxHeight){y.maxHeight=u.maxHeight}if(u.floating){if(!y.hasOwnProperty("handles")){y.handles="n ne e se s sw w nw"}}y.el=u.getEl()}else{u=y.el=y.target=Ext.get(u)}}else{u=y.target=y.el=Ext.get(y.el)}y.el.addCls(Ext.AbstractComponent.prototype.borderBoxCls);if(Ext.isNumber(y.width)){y.width=Ext.Number.constrain(y.width,y.minWidth,y.maxWidth)}if(Ext.isNumber(y.height)){y.height=Ext.Number.constrain(y.height,y.minHeight,y.maxHeight)}if(y.width!==null||y.height!==null){y.target.setSize(y.width,y.height)}J=y.el.dom.tagName.toUpperCase();if(J==="TEXTAREA"||J==="IMG"||J==="TABLE"){y.originalTarget=y.target;E=u.isComponent?u.getEl():u;y.el.addCls(y.wrappedCls);y.target=y.el=y.el.wrap({role:"presentation",cls:y.wrapCls,id:y.el.id+"-rzwrap",style:E.getStyles("margin-top","margin-bottom")});y.el.setPositioning(E.getPositioning());E.clearPositioning();y.el.setBox(E.getBox());E.setStyle("position","absolute");y.isTargetWrapped=true}y.el.position();if(y.pinned){y.el.addCls(y.pinnedCls)}y.resizeTracker=new Ext.resizer.ResizeTracker({disabled:y.disabled,target:u,el:y.el,constrainTo:y.constrainTo,handleCls:y.handleCls,overCls:y.overCls,throttle:y.throttle,proxy:y.originalTarget?y.el:null,dynamic:y.originalTarget?true:y.dynamic,originalTarget:y.originalTarget,delegate:"."+y.handleCls,preserveRatio:y.preserveRatio,heightIncrement:y.heightIncrement,widthIncrement:y.widthIncrement,minHeight:y.minHeight,maxHeight:y.maxHeight,minWidth:y.minWidth,maxWidth:y.maxWidth});y.resizeTracker.on({mousedown:y.onBeforeResize,drag:y.onResize,dragend:y.onResizeEnd,scope:y});if(y.handles=="all"){y.handles="n s e w ne nw se sw"}t=y.handles=y.handles.split(y.delimiterRe);v=y.possiblePositions;C=t.length;F=y.handleCls+" "+y.handleCls+"-{0}";if(y.target.isComponent){z=y.target.baseCls;F+=" "+z+"-handle "+z+"-handle-{0}";if(Ext.supports.CSS3BorderRadius){F+=" "+z+"-handle-{0}-br"}}B=Ext.isIE6?' style="height:'+y.el.getHeight()+'px"':"";for(;D<C;D++){if(t[D]&&v[t[D]]){w=v[t[D]];if(w==="east"||w==="west"){I=B}else{I=""}x.push('<div id="',y.el.id,"-",w,'-handle" class="',Ext.String.format(F,w)," ",A,'" unselectable="on" role="presentation"',I,"></div>")}}Ext.DomHelper.append(y.el,x.join(""));x.length=0;for(D=0;D<C;D++){if(t[D]&&v[t[D]]){w=v[t[D]];H=y[w]=y.el.getById(y.el.id+"-"+w+"-handle");x.push(H);H.region=w;if(y.transparent){H.setOpacity(0)}}}y.resizeTracker.handleEls=x;y.forceHandlesHeight()},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(d,h){var e=this.el.getBox();return this.fireEvent("beforeresize",this,e.width,e.height,h)},onResize:function(l,j){var e=this,h;e.forceHandlesHeight();if(e.hasListeners.resizedrag){h=l.getResizeTarget().getBox();return e.fireEvent("resizedrag",e,h.width,h.height,j)}},onResizeEnd:function(l,j){var e=this,h=e.el.getBox();e.forceHandlesHeight();return e.fireEvent("resize",e,h.width,h.height,j)},resizeTo:function(d,e){var h=this;h.target.setSize(d,e);h.fireEvent("resize",h,d,e,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var m=this,n,o=m.handles,j=o.length,h=m.possiblePositions,l;m.resizeTracker.destroy();if(m.isTargetWrapped){m.target.destroy()}for(n=0;n<j;n++){if(l=m[h[o[n]]]){l.remove()}}},forceHandlesHeight:function(){var d=this,c;if(Ext.isIE6){c=d.east;if(c){c.setHeight(d.el.getHeight())}c=d.west;if(c){c.setHeight(d.el.getHeight())}d.el.repaint()}}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.resizer,"Resizer",Ext,"Resizable"],0));(Ext.cmd.derive("Ext.selection.CellModel",Ext.selection.Model,{isCellModel:true,enableKeyNav:true,preventWrap:false,noSelection:{row:-1,column:-1},constructor:function(){this.addEvents("deselect","select");this.callParent(arguments)},bindComponent:function(e){var h=this,d=e.ownerCt;h.primaryView=e;h.views=h.views||[];h.views.push(e);h.bindStore(e.getStore(),true);e.on({cellclick:h.onCellClick,cellcontextmenu:h.onCellClick,refresh:h.onViewRefresh,scope:h});if(d.optimizedColumnMove!==false){d.on("columnmove",h.onColumnMove,h)}if(h.enableKeyNav){h.initKeyNav(e)}},initKeyNav:function(d){var c=this;if(!d.rendered){d.on("render",Ext.Function.bind(c.initKeyNav,c,[d],0),c,{single:true});return}d.el.set({tabIndex:-1});c.keyNav=new Ext.util.KeyNav({target:d.el,ignoreInputFields:true,up:c.onKeyUp,down:c.onKeyDown,right:c.onKeyRight,left:c.onKeyLeft,tab:c.onKeyTab,scope:c})},getHeaderCt:function(){var c=this.getCurrentPosition(),d=c?c.view:this.primaryView;return d.headerCt},onKeyUp:function(c){this.doMove("up",c)},onKeyDown:function(c){this.doMove("down",c)},onKeyLeft:function(c){this.doMove("left",c)},onKeyRight:function(c){this.doMove("right",c)},doMove:function(c,d){this.keyNavigation=true;this.move(c,d);this.keyNavigation=false},selectWithEvent:function(d,c){this.select(d)},select:function(m,o,j){var p=this,n,q=p.getCurrentPosition(),l=p.view.store;if(m||m===0){if(m.isModel){n=l.indexOf(m);if(n!==-1){m={row:n,column:q?q.column:0}}else{m=null}}else{if(typeof m==="number"){m={row:m,column:0}}}}if(m){p.selectByPosition(m,j)}else{p.deselect()}},deselect:function(d,c){this.selectByPosition(null,c)},move:function(h,l){var m=this,j=m.getCurrentPosition(),e;if(j){e=j.view.walkCells(j,h,l,m.preventWrap);if(e){return m.setCurrentPosition(e)}}},getCurrentPosition:function(){return this.selecting?this.nextSelection:this.selection},setCurrentPosition:function(l,j,m){var n=this,h=n.selection;n.lastSelection=h;if(l){l=l.isCellContext?l:new Ext.grid.CellContext(n.primaryView).setPosition(l)}if(!m&&h){if(l&&(l.record===h.record&&l.columnHeader===h.columnHeader&&l.view===h.view)){l=null}else{n.onCellDeselect(n.selection,j)}}if(l){n.nextSelection=l;n.selecting=true;n.onCellSelect(n.nextSelection,j);n.selecting=false;return(n.selection=l)}},isCellSelected:function(j,m,o){var n=this,h,l=n.getCurrentPosition();if(l&&l.view===j){h=new Ext.grid.CellContext(j).setPosition({row:m,column:o});return(h.record===l.record)&&(h.columnHeader===l.columnHeader)}},onStoreRemove:function(h,j,n){var m=this,l=m.getCurrentPosition();m.callParent(arguments);if(l&&h.getCount()&&h.indexOf(l.record)!==-1){m.setCurrentPosition({row:l.record,column:l.columnHeader},true,true)}else{m.selection=null}},onStoreAdd:function(){var d=this,c=d.getCurrentPosition();d.callParent(arguments);if(c){d.setCurrentPosition({row:c.record,column:c.columnHeader},true,true)}else{d.selection=null}},onCellClick:function(s,l,p,e,m,q,n){var o;if(q!==-1){o=new Ext.grid.CellContext(s).setPosition({view:s,row:m,column:s.ownerCt.getColumnManager().getHeaderAtIndex(p)});this.setCurrentPosition(o)}},onCellSelect:function(d,c){if(d&&d.row!==undefined&&d.row>-1){this.doSelect(d.record,false,c)}},onCellDeselect:function(d,c){if(d&&d.row!==undefined){this.doDeselect(d.record,c)}},onSelectChange:function(l,q,s,o){var p=this,n,t,m;if(q){n=p.nextSelection;t="select"}else{n=p.lastSelection||p.noSelection;t="deselect"}m=n.view||p.primaryView;if((s||p.fireEvent("before"+t,p,l,n.row,n.column))!==false&&o()!==false){if(q){if(!p.preventFocus){m.focusCell(n,true)}m.onCellSelect(n)}else{m.onCellDeselect(n);delete p.selection}if(!s){p.fireEvent(t,p,l,n.row,n.column)}}},onKeyTab:function(l,e){var m=this,j=m.getCurrentPosition(),h;if(j){h=j.view.editingPlugin;if(h&&m.wasEditing){m.onEditorTab(h,l)}else{m.move(l.shiftKey?"left":"right",l)}}},onEditorTab:function(e,m){var o=this,n=m.shiftKey?"left":"right",l=o.getCurrentPosition(),j=l.view.walkCells(l,n,m,o.preventWrap);if(j){if(e.startEdit(j.record,j.columnHeader)){o.wasEditing=false}else{o.setCurrentPosition(j);o.wasEditing=true}}},refresh:function(){var c=this.getCurrentPosition(),d;if(c&&(d=this.store.indexOf(this.selected.last()))!==-1){c.row=d}},onColumnMove:function(m,l,h,n){var j=m.up("tablepanel");if(j){this.onViewRefresh(j.view)}},onUpdate:function(e){var d=this,h;if(d.isSelected(e)){h=d.selecting?d.nextSelection:d.selection;d.view.onCellSelect(h)}},onViewRefresh:function(j){var p=this,m=p.getCurrentPosition(),q,n=j.headerCt,l,o;if(m&&m.view===j){l=m.record;o=m.columnHeader;if(!o.isDescendantOf(n)){o=n.queryById(o.id)||n.down('[text="'+o.text+'"]')||n.down('[dataIndex="'+o.dataIndex+'"]')}if(m.record){if(o&&(j.store.indexOfId(l.getId())!==-1)){q=new Ext.grid.CellContext(j).setPosition({row:l,column:o});p.setCurrentPosition(q,true,true)}}else{p.selection=null}}},selectByPosition:function(d,c){this.setCurrentPosition(d,c)}},1,0,0,0,["selection.cellmodel"],0,[Ext.selection,"CellModel"],0));(Ext.cmd.derive("Ext.selection.RowModel",Ext.selection.Model,{deltaScroll:5,enableKeyNav:true,ignoreRightMouseSelection:false,isRowModel:true,constructor:function(){this.addEvents("beforedeselect","beforeselect","deselect","select");this.views=[];this.callParent(arguments)},bindComponent:function(d){var c=this;d.on({itemcontextmenu:c.onRowClick,itemclick:c.onRowClick,scope:c});if(c.enableKeyNav){c.initKeyNav(d)}},initKeyNav:function(d){var c=this;if(!d.rendered){d.on("render",Ext.Function.bind(c.initKeyNav,c,[d],0),c,{single:true});return}d.el.set({tabIndex:-1});c.keyNav=new Ext.util.KeyNav({target:d,ignoreInputFields:true,eventName:"itemkeydown",processEvent:function(m,n,a,l,j){j.record=n;j.recordIndex=l;return j},up:c.onKeyUp,down:c.onKeyDown,right:c.onKeyRight,left:c.onKeyLeft,pageDown:c.onKeyPageDown,pageUp:c.onKeyPageUp,home:c.onKeyHome,end:c.onKeyEnd,space:c.onKeySpace,enter:c.onKeyEnter,A:{ctrl:true,handler:c.selectAll},scope:c})},onUpdate:function(e){var j=this,h=j.view,l;if(h&&j.isSelected(e)){l=h.indexOf(e);h.onRowSelect(l);if(e===j.lastFocused){h.onRowFocus(l,true)}}},getRowsVisible:function(){var l=false,j=this.views[0],m=j.all.first(),h,n;if(m){h=m.getHeight();n=j.el.getHeight();l=Math.floor(n/h)}return l},onKeyEnd:function(h){var d=this,e=d.views[0];if(e.bufferedRenderer){e.bufferedRenderer.scrollTo(d.store.getCount()-1,false,function(a,c){d.afterKeyNavigate(h,c)})}else{d.afterKeyNavigate(h,e.walkRecs(h.record,e.dataSource.getCount()-1-e.dataSource.indexOf(h.record)))}},onKeyHome:function(h){var d=this,e=d.views[0];if(e.bufferedRenderer){e.bufferedRenderer.scrollTo(0,false,function(a,c){d.afterKeyNavigate(h,c)})}else{d.afterKeyNavigate(h,e.walkRecs(h.record,-e.dataSource.indexOf(h.record)))}},onKeyPageUp:function(m){var n=this,j=n.views[0],l=n.getRowsVisible(),o,e;if(l){if(j.bufferedRenderer){o=Math.max(m.recordIndex-l,0);(n.lastKeyEvent||(n.lastKeyEvent=new Ext.EventObjectImpl())).setEvent(m.browserEvent);j.bufferedRenderer.scrollTo(o,false,n.afterBufferedScrollTo,n)}else{e=j.walkRecs(m.record,-l);n.afterKeyNavigate(m,e)}}},onKeyPageDown:function(m){var n=this,j=n.views[0],l=n.getRowsVisible(),o,e;if(l){if(j.bufferedRenderer){o=Math.min(m.recordIndex+l,n.store.getCount()-1);(n.lastKeyEvent||(n.lastKeyEvent=new Ext.EventObjectImpl())).setEvent(m.browserEvent);j.bufferedRenderer.scrollTo(o,false,n.afterBufferedScrollTo,n)}else{e=j.walkRecs(m.record,l);n.afterKeyNavigate(m,e)}}},onKeySpace:function(c){var d=c.record||this.lastFocused;if(d){this.afterKeyNavigate(c,d)}},onKeyEnter:Ext.emptyFn,onKeyUp:function(c){var d=this.views[0].walkRecs(c.record,-1);if(d){this.afterKeyNavigate(c,d)}},onKeyDown:function(c){var d=c.record.isExpandingOrCollapsing?null:this.views[0].walkRecs(c.record,1);if(d){this.afterKeyNavigate(c,d)}},afterBufferedScrollTo:function(c,d){this.afterKeyNavigate(this.lastKeyEvent,d)},scrollByDeltaX:function(j){var h=this.views[0],l=h.up(),e=l.horizontalScroller;if(e){e.scrollByDeltaX(j)}},onKeyLeft:function(c){this.scrollByDeltaX(-this.deltaScroll)},onKeyRight:function(c){this.scrollByDeltaX(this.deltaScroll)},onRowClick:function(e,h,l,m,j){if(m!==-1){if(!this.allowRightMouseSelection(j)){return}if(!(j.type==="contextmenu"&&this.isSelected(h))){this.processSelection(e,h,l,m,j)}}},processSelection:function(e,h,l,m,j){this.selectWithEvent(h,j)},allowRightMouseSelection:function(d){var c=this.ignoreRightMouseSelection&&d.button!==0;if(c){c=this.hasSelection()}return !c},onSelectChange:function(q,u,n,w){var o=this,m=o.views,t=m.length,v=m[0].indexOf(q),p=u?"select":"deselect",s=0;if((n||o.fireEvent("before"+p,o,q,v))!==false&&w()!==false){for(;s<t;s++){if(u){m[s].onRowSelect(v,n)}else{m[s].onRowDeselect(v,n)}}if(!n){o.fireEvent(p,o,q,v)}}},onLastFocusChanged:function(m,q,j){var l=this.views,n=l.length,o,p=0;if(m){o=l[0].indexOf(m);if(o!==-1){for(;p<n;p++){l[p].onRowFocus(o,false,true)}}}if(q){o=l[0].indexOf(q);if(o!==-1){for(p=0;p<n;p++){l[p].onRowFocus(o,true,j)}}}this.callParent(arguments)},onEditorTab:function(o,q){var p=this,m=o.context.view,t=o.getActiveRecord(),u=o.getActiveColumn(),s=m.getPosition(t,u),e=q.shiftKey?"left":"right",n;do{n=s;s=m.walkCells(s,e,q,p.preventWrap);if(n&&n.isEqual(s)){return}}while(s&&(!s.columnHeader.getEditor(t)||!o.startEditByPosition(s)))},getCurrentPosition:function(){var c=this.selected.getAt(0);if(c){return new Ext.grid.CellContext(this.view).setPosition(this.store.indexOf(c),0)}},selectByPosition:function(e,h){var d=new Ext.grid.CellContext(this.view);d.setPosition(e.row,e.column);this.select(d.record,h)},selectNext:function(o,t){var p=this,l=p.store,q=p.getSelection(),m=q[q.length-1],s=p.views[0].indexOf(m)+1,n;if(s===l.getCount()||s===0){n=false}else{p.doSelect(s,o,t);n=true}return n},selectPrevious:function(n,j){var o=this,p=o.getSelection(),l=p[0],q=o.views[0].indexOf(l)-1,m;if(q<0){m=false}else{o.doSelect(q,n,j);m=true}return m},isRowSelected:function(c){return this.isSelected(c)},isCellSelected:function(d,e,h){return this.isSelected(e)},destroy:function(){var c=this.keyNav;if(c){c.destroy();c=null}this.callParent()}},1,0,0,0,["selection.rowmodel"],0,[Ext.selection,"RowModel"],0));(Ext.cmd.derive("Ext.selection.CheckboxModel",Ext.selection.RowModel,{mode:"MULTI",injectCheckbox:0,checkOnly:false,showHeaderCheckbox:undefined,checkSelector:"."+Ext.baseCSSPrefix+"grid-row-checker",headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",tdCls:Ext.baseCSSPrefix+"grid-cell-special "+Ext.baseCSSPrefix+"grid-cell-row-checker",constructor:function(){var c=this;c.callParent(arguments);if(c.mode==="SINGLE"&&c.showHeaderCheckbox!==true){c.showHeaderCheckbox=false}},beforeViewRender:function(d){var h=this,e;h.callParent(arguments);if(!h.hasLockedHeader()||d.headerCt.lockedCt){if(h.showHeaderCheckbox!==false){d.headerCt.on("headerclick",h.onHeaderClick,h)}h.addCheckbox(d,true);e=d.ownerCt;if(d.headerCt.lockedCt){e=e.ownerCt}h.mon(e,"reconfigure",h.onReconfigure,h)}},bindComponent:function(d){var c=this;c.sortable=false;c.callParent(arguments)},hasLockedHeader:function(){var e=this.views,h=e.length,d;for(d=0;d<h;d++){if(e[d].headerCt.lockedCt){return true}}return false},addCheckbox:function(j,h){var n=this,m=n.injectCheckbox,l=j.headerCt;if(m!==false){if(m=="first"){m=0}else{if(m=="last"){m=l.getColumnCount()}}Ext.suspendLayouts();if(j.getStore().buffered){n.showHeaderCheckbox=false}l.add(m,n.getHeaderConfig());Ext.resumeLayouts()}if(h!==true){j.refresh()}},onReconfigure:function(h,e,d){if(d){this.addCheckbox(this.views[0])}},toggleUiHeader:function(l){var h=this.views[0],m=h.headerCt,n=m.child("gridcolumn[isCheckerHd]"),j=this.checkerOnCls;if(n){if(l){n.addCls(j)}else{n.removeCls(j)}}},onHeaderClick:function(m,j,e){if(j.isCheckerHd){e.stopEvent();var h=this,l=j.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on");h.preventFocus=true;if(l){h.deselectAll()}else{h.selectAll()}delete h.preventFocus}},getHeaderConfig:function(){var d=this,c=d.showHeaderCheckbox!==false;return{isCheckerHd:c,text:"&#160;",clickTargetName:"el",width:d.headerWidth,sortable:false,draggable:false,resizable:false,hideable:false,menuDisabled:true,dataIndex:"",tdCls:d.tdCls,cls:c?Ext.baseCSSPrefix+"column-header-checkbox ":"",renderer:Ext.Function.bind(d.renderer,d),editRenderer:d.editRenderer||d.renderEmpty,locked:d.hasLockedHeader()}},renderEmpty:function(){return"&#160;"},refresh:function(){this.callParent(arguments);this.updateHeaderState()},renderer:function(n,q,j,m,o,p,l){return'<div class="'+Ext.baseCSSPrefix+'grid-row-checker" role="presentation">&#160;</div>'},processSelection:function(e,l,o,q,n){var p=this,s=n.getTarget(p.checkSelector),m;if(p.checkOnly&&!s){return}if(s){m=p.getSelectionMode();if(m!=="SINGLE"){p.setSelectionMode("SIMPLE")}p.selectWithEvent(l,n);p.setSelectionMode(m)}else{p.selectWithEvent(l,n)}},onSelectChange:function(){this.callParent(arguments);if(!this.suspendChange){this.updateHeaderState()}},onStoreLoad:function(){this.callParent(arguments);this.updateHeaderState()},onStoreAdd:function(){this.callParent(arguments);this.updateHeaderState()},onStoreRemove:function(){this.callParent(arguments);this.updateHeaderState()},onStoreRefresh:function(){this.callParent(arguments);this.updateHeaderState()},maybeFireSelectionChange:function(c){if(c&&!this.suspendChange){this.updateHeaderState()}this.callParent(arguments)},resumeChanges:function(){this.callParent();if(!this.suspendChange){this.updateHeaderState()}},updateHeaderState:function(){var o=this,n=o.store,p=n.getCount(),m=o.views,l=false,u=0,t,q,s;if(!n.buffered&&p>0){t=o.selected;l=true;for(s=0,q=t.getCount();s<q;++s){if(!o.getStoreRecord(t.getAt(s))){break}++u}l=p===u}if(m&&m.length){o.toggleUiHeader(l)}}},1,0,0,0,["selection.checkboxmodel"],0,[Ext.selection,"CheckboxModel"],0));(Ext.cmd.derive("Ext.selection.TreeModel",Ext.selection.RowModel,{constructor:function(c){this.callParent(arguments);if(this.pruneRemoved){this.pruneRemoved=false;this.pruneRemovedNodes=true}},bindStore:function(e,d){var h=this;h.callParent(arguments);if(h.pruneRemovedNodes){h.view.mon(h.treeStore,{remove:h.onNodeRemove,scope:h})}},onNodeRemove:function(d,h,e){if(!e){this.deselectDeletedRecords([h])}},onKeyRight:function(c,d){this.navExpand(c,d)},navExpand:function(j,e){var m=this,l=m.getLastFocused(),h=m.view;if(l){if(l.isExpanded()){m.onKeyDown(j,e)}else{if(l.isExpandable()){if(!h.isTreeView){h=h.lockingPartner}h.expand(l);if(l){m.onLastFocusChanged(null,l)}}}}},onKeyLeft:function(c,d){this.navCollapse(c,d)},navCollapse:function(l,o){var n=this,m=n.getLastFocused(),e=n.view,j;if(m){j=m.parentNode;if(m.isExpanded()){if(!e.isTreeView){e=e.lockingPartner}e.collapse(m);n.onLastFocusChanged(null,m)}else{if(j&&!j.isRoot()){if(l.shiftKey){n.selectRange(j,m,l.ctrlKey,"up");n.setLastFocused(j)}else{if(l.ctrlKey){n.setLastFocused(j)}else{n.select(j)}}}}this.onLastFocusChanged(null,m)}},onKeySpace:function(c,d){if(c.record.data.checked!=null){this.toggleCheck(c)}else{this.callParent(arguments)}},onKeyEnter:function(c,d){if(c.record.data.checked!=null){this.toggleCheck(c)}else{this.callParent(arguments)}},toggleCheck:function(h){var e=this.view,d=this.getLastSelected();h.stopEvent();if(d){if(!e.isTreeView){e=e.lockingPartner}e.onCheckChange(d)}}},1,0,0,0,["selection.treemodel"],0,[Ext.selection,"TreeModel"],0));(Ext.cmd.derive("Ext.slider.Thumb",Ext.Base,{constructor:function(d){var c=this;Ext.apply(c,d||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:false});c.callParent([d])},render:function(){var c=this;c.el=c.slider.innerEl.insertFirst(c.getElConfig());c.onRender()},onRender:function(){if(this.disabled){this.disable()}this.initEvents()},getElConfig:function(){var h=this,d=h.slider,e={};e[d.vertical?"bottom":d.horizontalProp]=d.calculateThumbPosition(d.normalizeValue(h.value))+"%";return{style:e,id:this.id,cls:this.cls,role:"presentation"}},move:function(t,l){var p=this,s=p.el,q=p.slider,m=q.vertical?"bottom":q.horizontalProp,n,o;t+="%";if(!l){s.dom.style[m]=t}else{n={};n[m]=t;if(!Ext.supports.GetPositionPercentage){o={};o[m]=s.dom.style[m]}new Ext.fx.Anim({target:s,duration:350,from:o,to:n})}},enable:function(){var c=this;c.disabled=false;if(c.el){c.el.removeCls(c.slider.disabledCls)}},disable:function(){var c=this;c.disabled=true;if(c.el){c.el.addCls(c.slider.disabledCls)}},initEvents:function(){var c=this,d=c.el;c.tracker=new Ext.dd.DragTracker({onBeforeStart:Ext.Function.bind(c.onBeforeDragStart,c),onStart:Ext.Function.bind(c.onDragStart,c),onDrag:Ext.Function.bind(c.onDrag,c),onEnd:Ext.Function.bind(c.onDragEnd,c),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"});c.tracker.initEl(d)},onBeforeDragStart:function(l){var m=this,e=m.el,h=m.tracker.getXY(),j=m.pointerOffset=e.getXY();if(m.disabled){return false}else{j[0]+=Math.floor(e.getWidth()/2)-h[0];j[1]+=Math.floor(e.getHeight()/2)-h[1];m.slider.promoteThumb(m);return true}},onDragStart:function(h){var d=this,e=d.slider;e.onDragStart(d,h);d.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag");d.dragging=d.slider.dragging=true;d.dragStartValue=d.value;e.fireEvent("dragstart",e,h,d)},onDrag:function(n){var p=this,q=p.slider,e=p.index,o=p.getValueFromTracker(),l,m;if(o!==undefined){if(p.constrain){l=q.thumbs[e+1];m=q.thumbs[e-1];if(m!==undefined&&o<=m.value){o=m.value}if(l!==undefined&&o>=l.value){o=l.value}}q.setValue(e,o,false);q.fireEvent("drag",q,n,p)}},getValueFromTracker:function(){var d=this.slider,e=this.tracker.getXY(),h;e[0]+=this.pointerOffset[0];e[1]+=this.pointerOffset[1];h=d.getTrackpoint(e);if(h!==undefined){return d.reversePixelValue(h)}},onDragEnd:function(j){var e=this,h=e.slider,l=e.value;h.onDragEnd(e,j);e.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag");e.dragging=h.dragging=false;h.fireEvent("dragend",h,j);if(e.dragStartValue!=l){h.fireEvent("changecomplete",h,l,e)}},destroy:function(){Ext.destroy(this.tracker)}},1,0,0,0,0,0,[Ext.slider,"Thumb"],0));(Ext.cmd.derive("Ext.slider.Tip",Ext.tip.Tip,{minWidth:10,offsets:null,align:null,position:"",defaultVerticalPosition:"left",defaultHorizontalPosition:"top",isSliderTip:true,init:function(l){var e=this,j,h;if(!e.position){e.position=l.vertical?e.defaultVerticalPosition:e.defaultHorizontalPosition}switch(e.position){case"top":h=[0,-10];j="b-t?";break;case"bottom":h=[0,10];j="t-b?";break;case"left":h=[-10,0];j="r-l?";break;case"right":h=[10,0];j="l-r?"}if(!e.align){e.align=j}if(!e.offsets){e.offsets=h}l.on({scope:e,dragstart:e.onSlide,drag:e.onSlide,dragend:e.hide,destroy:e.destroy})},onSlide:function(l,j,h){var e=this;e.show();e.update(e.getText(h));e.el.alignTo(h.el,e.align,e.offsets)},getText:function(c){return String(c.value)}},0,["slidertip"],["component","box","container","panel","tip","slidertip"],{component:true,box:true,container:true,panel:true,tip:true,slidertip:true},["widget.slidertip"],0,[Ext.slider,"Tip"],0));(Ext.cmd.derive("Ext.slider.Multi",Ext.form.field.Base,{alternateClassName:"Ext.slider.MultiSlider",childEls:["endEl","innerEl"],fieldSubTpl:['<div id="{id}" role="{role}" {inputAttrTpl} class="'+Ext.baseCSSPrefix+"slider {fieldCls} {vertical}",'{childElCls}"','<tpl if="tabIdx != null"> tabIndex="{tabIdx}"</tpl>','<tpl if="isVertical"> aria-orientation="vertical"<tpl else> aria-orientation="horizontal"</tpl>',">",'<div id="{cmpId}-endEl" class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div id="{cmpId}-innerEl" class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">',"{%this.renderThumbs(out, values)%}","</div>","</div>","</div>",{renderThumbs:function(p,q){var n=q.$comp,o=0,t=n.thumbs,l=t.length,s,m;for(;o<l;o++){s=t[o];m=s.getElConfig();m.id=n.id+"-thumb-"+o;Ext.DomHelper.generateMarkup(m,p)}},disableFormats:true}],horizontalProp:"left",vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,dragging:false,constrainThumbs:true,componentLayout:"sliderfield",useTips:true,tipText:null,ariaRole:"slider",initValue:function(){var l=this,n=Ext.value,h=n(l.values,[n(l.value,n(l.minValue,0))]),m=0,j=h.length;l.originalValue=h;for(;m<j;m++){l.addThumb(l.normalizeValue(h[m]))}},initComponent:function(){var m=this,o,n,l,h,j;m.thumbs=[];m.keyIncrement=Math.max(m.increment,m.keyIncrement);m.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");m.callParent();if(m.useTips){if(Ext.isObject(m.useTips)){o=Ext.apply({},m.useTips)}else{o=m.tipText?{getText:m.tipText}:{}}j=m.plugins=m.plugins||[];h=j.length;for(l=0;l<h;l++){if(j[l].isSliderTip){n=true;break}}if(!n){m.plugins.push(new Ext.slider.Tip(o))}}},addThumb:function(h){var d=this,e=new Ext.slider.Thumb({ownerCt:d,ownerLayout:d.getComponentLayout(),value:h,slider:d,index:d.thumbs.length,constrain:d.constrainThumbs,disabled:!!d.readOnly});d.thumbs.push(e);if(d.rendered){e.render()}return e},promoteThumb:function(h){var j=this.thumbStack||(this.thumbStack=Ext.Array.slice(this.thumbs)),m=j.length,l=10000,n;if(j[0]!==h){Ext.Array.remove(j,h);j.unshift(h)}for(n=0;n<m;n++){j[n].el.setStyle("zIndex",l);l-=1000}},getSubTplData:function(){var c=this;return Ext.apply(c.callParent(),{$comp:c,isVertical:c.vertical,vertical:c.vertical?Ext.baseCSSPrefix+"slider-vert":Ext.baseCSSPrefix+"slider-horz",minValue:c.minValue,maxValue:c.maxValue,value:c.value,tabIdx:c.tabIndex,childElCls:""})},onRender:function(){var l=this,h=l.thumbs,j=h.length,m=0,n;l.callParent(arguments);for(m=0;m<j;m++){n=h[m];n.el=l.el.getById(l.id+"-thumb-"+m);n.onRender()}},initEvents:function(){var c=this;c.mon(c.el,{scope:c,mousedown:c.onMouseDown,keydown:c.onKeyDown})},onDragStart:Ext.emptyFn,onDragEnd:Ext.emptyFn,getTrackpoint:function(m){var n=this,p=n.vertical,q=n.innerEl,j,l,o;if(p){o="top";j=q.getHeight()}else{o=n.horizontalProp;j=q.getWidth()}m=n.transformTrackPoints(q.translatePoints(m));l=Ext.Number.constrain(m[o],0,j);return p?j-l:l},transformTrackPoints:Ext.identityFn,onMouseDown:function(m){var p=this,n=false,q=0,e=p.thumbs,l=e.length,o;if(p.disabled){return}for(;q<l;q++){n=n||m.target==e[q].el.dom}if(p.clickToChange&&!n){o=p.getTrackpoint(m.getXY());if(o!==undefined){p.onClickChange(o)}}p.focus()},onClickChange:function(j){var l=this,h,e;h=l.getNearest(j);if(!h.disabled){e=h.index;l.setValue(e,Ext.util.Format.round(l.reversePixelValue(j),l.decimalPrecision),undefined,true)}},getNearest:function(q){var p=this,t=p.reversePixelValue(q),o=p.getRange()+5,x=null,u=p.thumbs,w=0,v=u.length,y,n,s;for(;w<v;w++){y=p.thumbs[w];n=y.value;s=Math.abs(n-t);if(Math.abs(s<=o)){x=y;o=s}}return x},onKeyDown:function(l){var e=this,h,j;if(e.disabled||e.thumbs.length!==1){l.preventDefault();return}h=l.getKey();switch(h){case l.UP:case l.RIGHT:l.stopEvent();j=l.ctrlKey?e.maxValue:e.getValue(0)+e.keyIncrement;e.setValue(0,j,undefined,true);break;case l.DOWN:case l.LEFT:l.stopEvent();j=l.ctrlKey?e.minValue:e.getValue(0)-e.keyIncrement;e.setValue(0,j,undefined,true);break;default:l.preventDefault()}},normalizeValue:function(d){var h=this,e=h.zeroBasedSnapping?"snap":"snapInRange";d=Ext.Number[e](d,h.increment,h.minValue,h.maxValue);d=Ext.util.Format.round(d,h.decimalPrecision);d=Ext.Number.constrain(d,h.minValue,h.maxValue);return d},setMinValue:function(l){var m=this,h=m.thumbs,j=h.length,o,n;m.minValue=l;for(n=0;n<j;++n){o=h[n];if(o.value<l){m.setValue(n,l,false)}}m.syncThumbs()},setMaxValue:function(l){var m=this,h=m.thumbs,j=h.length,o,n;m.maxValue=l;for(n=0;n<j;++n){o=h[n];if(o.value>l){m.setValue(n,l,false)}}m.syncThumbs()},setValue:function(s,n,v,t){var o=this,p=o.thumbs,w,q,u,m;if(Ext.isArray(s)){m=s;v=n;for(u=0,q=m.length;u<q;++u){w=p[u];if(w){o.setValue(u,m[u],v)}}return o}w=o.thumbs[s];n=o.normalizeValue(n);if(n!==w.value&&o.fireEvent("beforechange",o,n,w.value,w)!==false){w.value=n;if(o.rendered){w.move(o.calculateThumbPosition(n),Ext.isDefined(v)?v!==false:o.animate);o.fireEvent("change",o,n,w);o.checkDirty();if(t){o.fireEvent("changecomplete",o,n,w)}}}return o},calculateThumbPosition:function(h){var e=this,l=e.minValue,j=(h-l)/e.getRange()*100;if(isNaN(j)){j=l}return j},getRatio:function(){var e=this,j=e.innerEl,h=e.vertical?j.getHeight():j.getWidth(),l=e.getRange();return l===0?h:(h/l)},getRange:function(){return this.maxValue-this.minValue},reversePixelValue:function(c){return this.minValue+(c/this.getRatio())},reversePercentageValue:function(c){return this.minValue+this.getRange()*(c/100)},onDisable:function(){var n=this,p=0,j=n.thumbs,l=j.length,q,o,m;n.callParent();for(;p<l;p++){q=j[p];o=q.el;q.disable();if(Ext.isIE){m=o.getXY();o.hide();n.innerEl.addCls(n.disabledCls).dom.disabled=true;if(!n.thumbHolder){n.thumbHolder=n.endEl.createChild({role:"presentation",cls:Ext.baseCSSPrefix+"slider-thumb "+n.disabledCls})}n.thumbHolder.show().setXY(m)}}},onEnable:function(){var l=this,n=0,h=l.thumbs,j=h.length,o,m;this.callParent();for(;n<j;n++){o=h[n];m=o.el;o.enable();if(Ext.isIE){l.innerEl.removeCls(l.disabledCls).dom.disabled=false;if(l.thumbHolder){l.thumbHolder.hide()}m.show();l.syncThumbs()}}},syncThumbs:function(){if(this.rendered){var e=this.thumbs,h=e.length,d=0;for(;d<h;d++){e[d].move(this.calculateThumbPosition(e[d].value))}}},getValue:function(c){return Ext.isNumber(c)?this.thumbs[c].value:this.getValues()},getValues:function(){var l=[],j=0,e=this.thumbs,h=e.length;for(;j<h;j++){l.push(e[j].value)}return l},getSubmitValue:function(){var c=this;return(c.disabled||!c.submitValue)?null:c.getValue()},reset:function(){var j=this,a=[].concat(j.originalValue),m=0,l=a.length,h;for(;m<l;m++){h=a[m];j.setValue(m,h)}j.clearInvalid();delete j.wasValid},setReadOnly:function(l){var m=this,h=m.thumbs,j=h.length,n=0;m.callParent(arguments);l=m.readOnly;for(;n<j;++n){if(l){h[n].disable()}else{h[n].enable()}}},beforeDestroy:function(){var l=this,h=l.thumbs,m=0,j=h.length,n;Ext.destroy(l.innerEl,l.endEl,l.focusEl);for(;m<j;m++){n=h[m];Ext.destroy(n)}l.callParent()}},0,["multislider"],["component","box","field","multislider"],{component:true,box:true,field:true,multislider:true},["widget.multislider"],0,[Ext.slider,"Multi",Ext.slider,"MultiSlider"],0));(Ext.cmd.derive("Ext.slider.Single",Ext.slider.Multi,{alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],getValue:function(){return this.callParent([0])},setValue:function(j,e){var l=arguments,h=l.length;if(h==1||(h<=3&&typeof l[1]!="number")){l=Ext.toArray(l);l.unshift(0)}return this.callParent(l)},getNearest:function(){return this.thumbs[0]}},0,["slider","sliderfield"],["component","box","field","multislider","slider","sliderfield"],{component:true,box:true,field:true,multislider:true,slider:true,sliderfield:true},["widget.slider","widget.sliderfield"],0,[Ext.slider,"Single",Ext,"Slider",Ext.form,"SliderField",Ext.slider,"SingleSlider",Ext.slider,"Slider"],0));(Ext.cmd.derive("Ext.state.CookieProvider",Ext.state.Provider,{constructor:function(d){var c=this;c.path="/";c.expires=new Date(Ext.Date.now()+(1000*60*60*24*7));c.domain=null;c.secure=false;c.callParent(arguments);c.state=c.readCookies()},set:function(e,h){var d=this;if(typeof h=="undefined"||h===null){d.clear(e);return}d.setCookie(e,h);d.callParent(arguments)},clear:function(c){this.clearCookie(c);this.callParent(arguments)},readCookies:function(){var q={},m=document.cookie+";",s=/\s?(.*?)=(.*?);/g,n=this.prefix,l=n.length,o,c,p;while((o=s.exec(m))!=null){c=o[1];p=o[2];if(c&&c.substring(0,l)==n){q[c.substr(l)]=this.decodeValue(p)}}return q},setCookie:function(e,h){var d=this;document.cookie=d.prefix+e+"="+d.encodeValue(h)+((d.expires==null)?"":("; expires="+d.expires.toUTCString()))+((d.path==null)?"":("; path="+d.path))+((d.domain==null)?"":("; domain="+d.domain))+((d.secure==true)?"; secure":"")},clearCookie:function(d){var c=this;document.cookie=c.prefix+d+"=null; expires=Thu, 01-Jan-1970 00:00:01 GMT"+((c.path==null)?"":("; path="+c.path))+((c.domain==null)?"":("; domain="+c.domain))+((c.secure==true)?"; secure":"")}},1,0,0,0,0,0,[Ext.state,"CookieProvider"],0));(Ext.cmd.derive("Ext.util.LocalStorage",Ext.Base,{id:null,destroyed:false,lazyKeys:true,prefix:"",session:false,_keys:null,_store:null,_users:0,statics:{cache:{},get:function(l){var m=this,h=m.cache,n={_users:1},j;if(Ext.isString(l)){n.id=l}else{Ext.apply(n,l)}if(!(j=h[n.id])){j=new m(n)}else{++j._users}return j},supported:true},constructor:function(d){var c=this;Ext.apply(c,d);if(c._users){Ext.util.LocalStorage.cache[c.id]=c}c.init()},init:function(){var d=this,c=d.id;if(!d.prefix&&c){d.prefix=c+"-"}d._store=(d.session?window.sessionStorage:window.localStorage)},destroy:function(){var c=this;delete Ext.util.LocalStorage.cache[c.id];c._store=c._keys=null;c.destroyed=true;c.destroy=Ext.emptyFn},getKeys:function(){var o=this,l=o._store,n=o.prefix,p=o._keys,m=n.length,q,j;if(!p){o._keys=p=[];for(q=l.length;q--;){j=l.key(q);if(j.length>m){if(n===j.substring(0,m)){p.push(j.substring(m))}}}}return p},release:function(){if(!--this._users){this.destroy()}},save:Ext.emptyFn,clear:function(){var m=this,j=m._store,l=m.prefix,n=m._keys||m.getKeys(),h;for(h=n.length;h--;){j.removeItem(l+n[h])}n.length=0},key:function(d){var c=this._keys||this.getKeys();return(0<=d&&d<c.length)?c[d]:null},getItem:function(c){var d=this.prefix+c;return this._store.getItem(d)},removeItem:function(o){var l=this,h=l.prefix+o,j=l._store,m=l._keys,n=j.length;j.removeItem(h);if(m&&n!==j.length){if(l.lazyKeys){l._keys=null}else{Ext.Array.remove(m,o)}}},setItem:function(q,m){var n=this,j=n.prefix+q,l=n._store,o=l.length,p=n._keys;l.setItem(j,m);if(p&&o!==l.length){p.push(q)}}},1,0,0,0,0,0,[Ext.util,"LocalStorage"],function(){var c=this;if("localStorage" in window){return}if(!Ext.isIE){c.supported=false;return}c.override({data:null,flushDelay:1,init:function(){var h=this,e=h.data,a;h.el=a=document.createElement("div");a.id=(h.id||(h.id="extjs-localstore"));a.addBehavior("#default#userdata");Ext.getHead().dom.appendChild(a);a.load(h.id);e=a.getAttribute("xdata");h.data=e=(e?Ext.decode(e):{});h._flushFn=function(){h._timer=null;h.save(0)}},destroy:function(){var d=this,a=d.el;if(a){if(d._timer){d.save()}a.parentNode.removeChild(a);d.data=d.el=null;d.callParent()}},getKeys:function(){var d=this,a=d._keys;if(!a){d._keys=a=Ext.Object.getKeys(d.data)}return a},save:function(a){var d=this;if(!a){if(d._timer){clearTimeout(d._timer);d._timer=null}d.el.setAttribute("xdata",Ext.encode(d.data));d.el.save(d.id)}else{if(!d._timer){d._timer=setTimeout(d._flushFn,a)}}},clear:function(){var a=this;a.data={};a._keys=null;a.save(a.flushDelay)},getItem:function(a){var d=this.data;return(a in d)?d[a]:null},removeItem:function(a){var j=this,l=j._keys,h=j.data;if(a in h){delete h[a];if(l){if(j.lazyKeys){j._keys=null}else{Ext.Array.remove(l,a)}}j.save(j.flushDelay)}},setItem:function(a,h){var l=this,j=l.data,m=l._keys;if(m&&!(a in j)){m.push(a)}j[a]=h;l.save(l.flushDelay)}})}));(Ext.cmd.derive("Ext.state.LocalStorageProvider",Ext.state.Provider,{constructor:function(){var c=this;c.callParent(arguments);c.store=c.getStorageObject();if(c.store){c.state=c.readLocalStorage()}else{c.state={}}},readLocalStorage:function(){var j=this.store,l={},m=j.getKeys(),n=m.length,h;while(n--){h=m[n];l[h]=this.decodeValue(j.getItem(h))}return l},set:function(e,h){var d=this;d.clear(e);if(h!=null){d.store.setItem(e,d.encodeValue(h));d.callParent(arguments)}},clear:function(c){this.store.removeItem(c);this.callParent(arguments)},getStorageObject:function(){var e=this.prefix,h=e,d=h.length-1;if(h.charAt(d)==="-"){h=h.substring(0,d)}return new Ext.util.LocalStorage({id:h,prefix:e})}},1,0,0,0,["state.localstorage"],0,[Ext.state,"LocalStorageProvider"],0));(Ext.cmd.derive("Ext.tab.Tab",Ext.button.Button,{isTab:true,baseCls:Ext.baseCSSPrefix+"tab",closeElOverCls:Ext.baseCSSPrefix+"tab-close-btn-over",activeCls:"active",closableCls:"closable",closable:true,closeText:"Close Tab",active:false,childEls:["closeEl"],scale:false,position:"top",ariaRole:"tab",initComponent:function(){var c=this;c.addEvents("activate","deactivate","beforeclose","close");c.callParent(arguments);if(c.card){c.setCard(c.card)}c.overCls=["over",c.position+"-over"]},getTemplateArgs:function(){var c=this,d=c.callParent();d.closable=c.closable;d.closeText=c.closeText;return d},getFramingInfoCls:function(){return this.baseCls+"-"+this.ui+"-"+this.position},beforeRender:function(){var d=this,e=d.up("tabbar"),h=d.up("tabpanel");d.callParent();d.addClsWithUI(d.position);if(d.active){d.addClsWithUI([d.activeCls,d.position+"-"+d.activeCls])}d.syncClosableUI();if(!d.minWidth){d.minWidth=(e)?e.minTabWidth:d.minWidth;if(!d.minWidth&&h){d.minWidth=h.minTabWidth}if(d.minWidth&&d.iconCls){d.minWidth+=25}}if(!d.maxWidth){d.maxWidth=(e)?e.maxTabWidth:d.maxWidth;if(!d.maxWidth&&h){d.maxWidth=h.maxTabWidth}}},onRender:function(){var c=this;c.setElOrientation();c.callParent(arguments);if(c.closable){c.closeEl.addClsOnOver(c.closeElOverCls)}c.initKeyNav()},initKeyNav:function(){var c=this;c.keyNav=new Ext.util.KeyNav(c.el,{enter:c.onEnterKey,del:c.onDeleteKey,scope:c})},setElOrientation:function(){var c=this.position;if(c==="left"||c==="right"){this.el.setVertical(c==="right"?90:270)}},enable:function(d){var c=this;c.callParent(arguments);c.removeClsWithUI(c.position+"-disabled");return c},disable:function(d){var c=this;c.callParent(arguments);c.addClsWithUI(c.position+"-disabled");return c},onDestroy:function(){var c=this;Ext.destroy(c.keyNav);delete c.keyNav;c.callParent(arguments)},setClosable:function(d){var c=this;d=(!arguments.length||!!d);if(c.closable!=d){c.closable=d;if(c.card){c.card.closable=d}c.syncClosableUI();if(c.rendered){c.syncClosableElements();c.updateLayout()}}},syncClosableElements:function(){var d=this,c=d.closeEl;if(d.closable){if(!c){c=d.closeEl=d.btnWrap.insertSibling({tag:"a",role:"presentation",cls:d.baseCls+"-close-btn",href:"#",title:d.closeText},"after")}c.addClsOnOver(d.closeElOverCls)}else{if(c){c.remove();delete d.closeEl}}},syncClosableUI:function(){var c=this,d=[c.closableCls,c.closableCls+"-"+c.position];if(c.closable){c.addClsWithUI(d)}else{c.removeClsWithUI(d)}},setCard:function(d){var c=this;c.card=d;c.setText(c.title||d.title);c.setIconCls(c.iconCls||d.iconCls);c.setIcon(c.icon||d.icon);c.setGlyph(c.glyph||d.glyph)},onCloseClick:function(){var c=this;if(c.fireEvent("beforeclose",c)!==false){if(c.tabBar){if(c.tabBar.closeTab(c)===false){return}}else{c.fireClose()}}},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(c){var d=this;if(d.tabBar){d.tabBar.onClick(c,d.el)}},onDeleteKey:function(c){if(this.closable){this.onCloseClick()}},afterClick:function(c){if(!c){this.focus()}},activate:function(c){var d=this;d.active=true;d.addClsWithUI([d.activeCls,d.position+"-"+d.activeCls]);if(c!==true){d.fireEvent("activate",d)}},deactivate:function(c){var d=this;d.active=false;d.removeClsWithUI([d.activeCls,d.position+"-"+d.activeCls]);if(c!==true){d.fireEvent("deactivate",d)}}},0,["tab"],["component","box","button","tab"],{component:true,box:true,button:true,tab:true},["widget.tab"],0,[Ext.tab,"Tab"],0));(Ext.cmd.derive("Ext.util.Point",Ext.util.Region,{statics:{fromEvent:function(c){c=c.browserEvent||c;c=(c.changedTouches&&c.changedTouches.length>0)?c.changedTouches[0]:c;return new this(c.pageX,c.pageY)}},constructor:function(d,c){this.callParent([c,d,c,d])},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(c){return(this.x==c.x&&this.y==c.y)},isWithin:function(c,d){if(!Ext.isObject(d)){d={x:d,y:d}}return(this.x<=c.x+d.x&&this.x>=c.x-d.x&&this.y<=c.y+d.y&&this.y>=c.y-d.y)},isContainedBy:function(c){if(!(c instanceof Ext.util.Region)){c=Ext.get(c.el||c).getRegion()}return c.contains(this)},roundedEquals:function(c){return(Math.round(this.x)==Math.round(c.x)&&Math.round(this.y)==Math.round(c.y))}},3,0,0,0,0,0,[Ext.util,"Point"],function(){this.prototype.translate=Ext.util.Region.prototype.translateBy}));(Ext.cmd.derive("Ext.tab.Bar",Ext.panel.Header,{baseCls:Ext.baseCSSPrefix+"tab-bar",isTabBar:true,defaultType:"tab",plain:false,ariaRole:"tablist",childEls:["body","strip"],renderTpl:['<div id="{id}-body" role="presentation" class="{baseCls}-body {bodyCls} {bodyTargetCls}{childElCls}','<tpl if="ui"> {baseCls}-body-{ui}','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"{%this.renderContainer(out,values)%}","</div>",'<div id="{id}-strip" role="presentation" class="{baseCls}-strip {baseCls}-strip-{dock}{childElCls}','<tpl if="ui"> {baseCls}-strip-{ui}','<tpl for="uiCls"> {parent.baseCls}-strip-{parent.ui}-{.}</tpl>','</tpl>">',"</div>"],_reverseDockNames:{left:"right",right:"left"},initComponent:function(){var c=this;if(c.plain){c.addCls(c.baseCls+"-plain")}c.addClsWithUI(c.orientation);c.addEvents("change");c.callParent(arguments);Ext.merge(c.layout,c.initialConfig.layout);c.layout.align=(c.orientation=="vertical")?"left":"top";c.layout.overflowHandler=new Ext.layout.container.boxOverflow.Scroller(c.layout);c.remove(c.titleCmp);delete c.titleCmp;Ext.apply(c.renderData,{bodyCls:c.bodyCls,dock:c.dock})},onRender:function(){var c=this;c.callParent();if(c.orientation==="vertical"&&(Ext.isIE8||Ext.isIE9)&&Ext.isStrict){c.el.on({mousemove:c.onMouseMove,scope:c})}},afterRender:function(){var c=this.layout;this.callParent();if(Ext.isIE9&&Ext.isStrict&&this.orientation==="vertical"){c.innerCt.on("scroll",function(){c.innerCt.dom.scrollLeft=0})}},afterLayout:function(){this.adjustTabPositions();this.callParent(arguments)},adjustTabPositions:function(){var e=this.items.items,d=e.length,h;if(!Ext.isIE9m){if(this.dock==="right"){while(d--){h=e[d];if(h.isVisible()){h.el.setStyle("left",h.lastBox.width+"px")}}}else{if(this.dock==="left"){while(d--){h=e[d];if(h.isVisible()){h.el.setStyle("left",-h.lastBox.height+"px")}}}}}},getLayout:function(){var c=this;c.layout.type=(c.orientation==="horizontal")?"hbox":"vbox";return c.callParent(arguments)},onAdd:function(c){c.position=this.dock;this.callParent(arguments)},onRemove:function(d){var c=this;if(d===c.previousTab){c.previousTab=null}c.callParent(arguments)},afterComponentLayout:function(d){var h=this,e=h.needsScroll;h.callParent(arguments);if(e){h.layout.overflowHandler.scrollToItem(h.activeTab)}delete h.needsScroll},onClick:function(o,p){var q=this,m=q.tabPanel,n,s,e,l;if(o.getTarget("."+Ext.baseCSSPrefix+"box-scroller")){return}if(q.orientation==="vertical"&&(Ext.isIE8||Ext.isIE9)&&Ext.isStrict){l=q.getTabInfoFromPoint(o.getXY());s=l.tab;e=l.close}else{n=o.getTarget("."+Ext.tab.Tab.prototype.baseCls);s=n&&Ext.getCmp(n.id);e=s&&s.closeEl&&(p===s.closeEl.dom)}if(e){o.preventDefault()}if(s&&s.isDisabled&&!s.isDisabled()){if(s.closable&&e){s.onCloseClick()}else{if(m){m.setActiveTab(s.card)}else{q.setActiveTab(s)}}s.afterClick(e)}},onMouseMove:function(j){var l=this,e=l._overTab,h,m;if(j.getTarget("."+Ext.baseCSSPrefix+"box-scroller")){return}h=l.getTabInfoFromPoint(j.getXY());m=h.tab;if(m!==e){if(e&&e.rendered){e.onMouseLeave(j);l._overTab=null}if(m){m.onMouseEnter(j);l._overTab=m;if(!m.disabled){l.el.setStyle("cursor","pointer")}}else{l.el.setStyle("cursor","default")}}},onMouseLeave:function(c){var d=this._overTab;if(d&&d.rendered){d.onMouseLeave(c)}},getTabInfoFromPoint:function(V){var M=this,E=M.items.items,W=E.length,O=M.layout.innerCt,G=O.getXY(),H=new Ext.util.Point(V[0],V[1]),F=0,D,Z,aa,N,C,T,U,X,J,R,S,P,Q,I,K,B,Y;for(;F<W;F++){D=E[F].lastBox;R=G[0]+D.x;S=G[1]-O.dom.scrollTop+D.y;P=D.width;Q=D.height;Z=new Ext.util.Region(S,R+P,S+Q,R);if(Z.contains(H)){Y=E[F];aa=Y.closeEl;if(aa){if(M._isTabReversed===undefined){M._isTabReversed=K=(Y.btnWrap.dom.currentStyle.filter.indexOf("rotation=2")!==-1)}B=K?this._reverseDockNames[M.dock]:M.dock;X=aa.getWidth();J=aa.getHeight();C=M.getCloseXY(aa,R,S,P,Q,X,J,B);T=C[0];U=C[1];I=new Ext.util.Region(U,T+X,U+J,T);N=I.contains(H)}break}}return{tab:Y,close:N}},getCloseXY:function(w,o,q,t,n,p,v,s){var u=w.getXY(),x,y;if(s==="right"){x=o+t-((u[1]-q)+v);y=q+(u[0]-o)}else{x=o+(u[1]-q);y=q+o+n-u[0]-p}return[x,y]},closeTab:function(n){var m=this,h=n.card,l=m.tabPanel,j;if(h&&h.fireEvent("beforeclose",h)===false){return false}j=m.findNextActivatable(n);Ext.suspendLayouts();if(l&&h){delete n.ownerCt;h.fireEvent("close",h);l.remove(h);if(!l.getComponent(h)){n.fireClose();m.remove(n)}else{n.ownerCt=m;Ext.resumeLayouts(true);return false}}if(j){if(l){l.setActiveTab(j.card)}else{m.setActiveTab(j)}j.focus()}Ext.resumeLayouts(true)},findNextActivatable:function(d){var c=this;if(d.active&&c.items.getCount()>1){return(c.previousTab&&c.previousTab!==d&&!c.previousTab.disabled)?c.previousTab:(d.next("tab[disabled=false]")||d.prev("tab[disabled=false]"))}},setActiveTab:function(d,e){var h=this;if(!d.disabled&&d!==h.activeTab){if(h.activeTab){if(h.activeTab.isDestroyed){h.previousTab=null}else{h.previousTab=h.activeTab;h.activeTab.deactivate()}}d.activate();h.activeTab=d;h.needsScroll=true;if(!e){h.fireEvent("change",h,d,d.card);h.updateLayout()}}}},0,["tabbar"],["component","box","container","header","tabbar"],{component:true,box:true,container:true,header:true,tabbar:true},["widget.tabbar"],0,[Ext.tab,"Bar"],0));(Ext.cmd.derive("Ext.tab.Panel",Ext.panel.Panel,{alternateClassName:["Ext.TabPanel"],tabPosition:"top",removePanelHeader:true,plain:false,itemCls:Ext.baseCSSPrefix+"tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:true,initComponent:function(){var j=this,l=[].concat(j.dockedItems||[]),h=j.activeTab!==null?(j.activeTab||0):null,e=j.tabPosition;j.layout=new Ext.layout.container.Card(Ext.apply({owner:j,deferredRender:j.deferredRender,itemCls:j.itemCls,activeItem:h},j.layout));j.tabBar=new Ext.tab.Bar(Ext.apply({ui:j.ui,dock:j.tabPosition,orientation:(e==="top"||e==="bottom")?"horizontal":"vertical",plain:j.plain,cardLayout:j.layout,tabPanel:j},j.tabBar));l.push(j.tabBar);j.dockedItems=l;j.addEvents("beforetabchange","tabchange");j.callParent(arguments);h=j.activeTab=j.getComponent(h);if(h){j.tabBar.setActiveTab(h.tab,true)}},setActiveTab:function(e){var h=this,d;e=h.getComponent(e);if(e){d=h.getActiveTab();if(d===e||h.fireEvent("beforetabchange",h,e,d)===false){return false}if(!e.isComponent){Ext.suspendLayouts();e=h.add(e);Ext.resumeLayouts()}h.activeTab=e;Ext.suspendLayouts();h.layout.setActiveItem(e);e=h.activeTab=h.layout.getActiveItem();if(e&&e!==d){h.tabBar.setActiveTab(e.tab);Ext.resumeLayouts(true);if(d!==e){h.fireEvent("tabchange",h,e,d)}}else{Ext.resumeLayouts(true)}return e}},getActiveTab:function(){var c=this,d=c.getComponent(c.activeTab);if(d&&c.items.indexOf(d)!==-1){c.activeTab=d}else{c.activeTab=null}return c.activeTab},getTabBar:function(){return this.tabBar},onAdd:function(l,n){var m=this,h=l.tabConfig||{},j={xtype:"tab",ui:m.tabBar.ui,card:l,disabled:l.disabled,closable:l.closable,hidden:l.hidden&&!l.hiddenByLayout,tooltip:l.tooltip,tabBar:m.tabBar,position:m.tabPosition};if(l.closeText!==undefined){j.closeText=l.closeText}h=Ext.applyIf(h,j);l.tab=m.tabBar.insert(n,h);l.on({scope:m,enable:m.onItemEnable,disable:m.onItemDisable,beforeshow:m.onItemBeforeShow,iconchange:m.onItemIconChange,iconclschange:m.onItemIconClsChange,glyphchange:m.onItemGlyphChange,titlechange:m.onItemTitleChange});if(l.isPanel){if(m.removePanelHeader){if(l.rendered){if(l.header){l.header.hide()}}else{l.header=false}}if(l.isPanel&&m.border){l.setBorder(false)}}if(m.rendered&&m.loader&&m.activeTab===undefined&&m.layout.activeItem!==null){m.setActiveTab(0)}},onItemEnable:function(c){c.tab.enable()},onItemDisable:function(c){c.tab.disable()},onItemBeforeShow:function(c){if(c!==this.activeTab){this.setActiveTab(c);return false}},onItemIconChange:function(c,d){c.tab.setIcon(d)},onItemIconClsChange:function(c,d){c.tab.setIconCls(d)},onItemGlyphChange:function(d,c){d.tab.setGlyph(c)},onItemTitleChange:function(d,c){d.tab.setText(c)},doRemove:function(j,e){var l=this,h;if(l.destroying||l.items.getCount()===1){l.activeTab=null}else{if((h=l.tabBar.items.indexOf(l.tabBar.findNextActivatable(j.tab)))!==-1){l.setActiveTab(h)}}this.callParent(arguments);delete j.tab.card;delete j.tab},onRemove:function(d,h){var e=this;d.un({scope:e,enable:e.onItemEnable,disable:e.onItemDisable,beforeshow:e.onItemBeforeShow,iconchange:e.onItemIconChange,iconclschange:e.onItemIconClsChange,glyphchange:e.onItemGlyphChange,titlechange:e.onItemTitleChange});if(!e.destroying&&d.tab.ownerCt===e.tabBar){e.tabBar.remove(d.tab)}}},0,["tabpanel"],["component","box","container","panel","tabpanel"],{component:true,box:true,container:true,panel:true,tabpanel:true},["widget.tabpanel"],0,[Ext.tab,"Panel",Ext,"TabPanel"],0));Ext.define("Ext.toolbar.Spacer",{extend:Ext.Component,alias:"widget.tbspacer",alternateClassName:"Ext.Toolbar.Spacer",baseCls:Ext.baseCSSPrefix+"toolbar-spacer",focusable:false,ariaRole:"presentation"});(Ext.cmd.derive("Ext.tree.Column",Ext.grid.column.Column,{tdCls:Ext.baseCSSPrefix+"grid-cell-treecolumn",autoLock:true,lockable:false,draggable:false,hideable:false,iconCls:Ext.baseCSSPrefix+"tree-icon",checkboxCls:Ext.baseCSSPrefix+"tree-checkbox",elbowCls:Ext.baseCSSPrefix+"tree-elbow",expanderCls:Ext.baseCSSPrefix+"tree-expander",textCls:Ext.baseCSSPrefix+"tree-node-text",innerCls:Ext.baseCSSPrefix+"grid-cell-inner-treecolumn",isTreeColumn:true,cellTpl:['<tpl for="lines">','<img src="{parent.blankUrl}" class="{parent.childCls} {parent.elbowCls}-img ','{parent.elbowCls}-<tpl if=".">line<tpl else>empty</tpl>" role="presentation"/>',"</tpl>",'<img src="{blankUrl}" class="{childCls} {elbowCls}-img {elbowCls}','<tpl if="isLast">-end</tpl><tpl if="expandable">-plus {expanderCls}</tpl>" role="presentation"/>','<tpl if="checked !== null">','<input type="button" {ariaCellCheckboxAttr}',' class="{childCls} {checkboxCls}<tpl if="checked"> {checkboxCls}-checked</tpl>"/>',"</tpl>",'<img src="{blankUrl}" role="presentation" class="{childCls} {baseIconCls} ','{baseIconCls}-<tpl if="leaf">leaf<tpl else>parent</tpl> {iconCls}"','<tpl if="icon">style="background-image:url({icon})"</tpl>/>','<tpl if="href">','<a href="{href}" role="link" target="{hrefTarget}" class="{textCls} {childCls}">{value}</a>',"<tpl else>",'<span class="{textCls} {childCls}">{value}</span>',"</tpl>"],initComponent:function(){var d=this,c=d.renderer;if(typeof c=="string"){c=Ext.util.Format[c]}d.origRenderer=c;d.origScope=d.scope||window;d.renderer=d.treeRenderer;d.scope=d;d.callParent()},treeRenderer:function(o,w,s,v,u,n,p){var q=this,m=s.get("cls"),t;if(m){w.tdCls+=" "+m}t=q.initTemplateRendererData(o,w,s,v,u,n,p);return q.getTpl("cellTpl").apply(t)},initTemplateRendererData:function(u,E,A,D,B,t,w){var x=this,y=x.origRenderer,C=A.data,v=A.parentNode,s=w.rootVisible,q=[],z;while(v&&(s||v.data.depth>0)){z=v.data;q[s?z.depth:z.depth-1]=z.isLast?0:1;v=v.parentNode}return{record:A,baseIconCls:x.iconCls,iconCls:C.iconCls,icon:C.icon,checkboxCls:x.checkboxCls,checked:C.checked,elbowCls:x.elbowCls,expanderCls:x.expanderCls,textCls:x.textCls,leaf:C.leaf,expandable:A.isExpandable(),isLast:C.isLast,blankUrl:Ext.BLANK_IMAGE_URL,href:C.href,hrefTarget:C.hrefTarget,lines:q,metaData:E,childCls:x.getChildCls?x.getChildCls()+" ":"",value:y?y.apply(x.origScope,arguments):u}}},0,["treecolumn"],["component","box","container","headercontainer","gridcolumn","treecolumn"],{component:true,box:true,container:true,headercontainer:true,gridcolumn:true,treecolumn:true},["widget.treecolumn"],0,[Ext.tree,"Column"],0));(Ext.cmd.derive("Ext.tree.View",Ext.view.Table,{isTreeView:true,loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",leafCls:Ext.baseCSSPrefix+"grid-tree-node-leaf",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",checkboxSelector:"."+Ext.baseCSSPrefix+"tree-checkbox",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",nodeAnimWrapCls:Ext.baseCSSPrefix+"tree-animator-wrap",ariaRole:"tree",loadMask:false,rootVisible:true,deferInitialRefresh:false,expandDuration:250,collapseDuration:250,toggleOnDblClick:true,stripeRows:false,uiFields:["expanded","loaded","checked","expandable","leaf","icon","iconCls","loading","qtip","qtitle"],treeRowTpl:["{%","this.processRowValues(values);","this.nextTpl.applyOut(values, out, parent);","%}",{priority:10,processRowValues:function(h){var d=h.record,e=h.view;h.rowAttr["data-qtip"]=d.get("qtip")||"";h.rowAttr["data-qtitle"]=d.get("qtitle")||"";if(d.isExpanded()){h.rowClasses.push(e.expandedCls)}if(d.isLeaf()){h.rowClasses.push(e.leafCls)}if(d.isLoading()){h.rowClasses.push(e.loadingCls)}}}],initComponent:function(){var d=this,h=d.panel.getStore(),e=d.store;if(d.initialConfig.animate===undefined){d.animate=Ext.enableFx}if(!e||e===h){d.store=e=new Ext.data.NodeStore({treeStore:h,recursive:true,rootVisible:d.rootVisible})}if(d.node){d.setRootNode(d.node)}d.animQueue={};d.animWraps={};d.addEvents("afteritemexpand","afteritemcollapse","nodedragover");d.callParent(arguments);d.addRowTpl(Ext.XTemplate.getTpl(d,"treeRowTpl"))},onBeforeFill:function(c,d){this.store.suspendEvents()},onFillComplete:function(m,n,h){var o=this,j=o.store,l=j.indexOf(h[0]);j.resumeEvents();n.triggerUIUpdate();if(!h.length||l===-1){return}o.onAdd(o.store,h,l);o.refreshPartner()},onBeforeSort:function(){this.store.suspendEvents()},onSort:function(c){if(c.isStore){this.store.resumeEvents();this.refresh();this.refreshPartner()}},refreshPartner:function(){var c=this.lockingPartner;if(c){c.refresh()}},getMaskStore:function(){return this.panel.getStore()},afterRender:function(){var c=this;c.callParent(arguments);c.el.on({scope:c,delegate:c.expanderSelector,mouseover:c.onExpanderMouseOver,mouseout:c.onExpanderMouseOut,click:{delegate:c.checkboxSelector,fn:c.onCheckboxChange,scope:c}})},afterComponentLayout:function(){this.callParent(arguments);var c=this.stretcher;if(c){c.setWidth((this.getWidth()-Ext.getScrollbarSize().width))}},processUIEvent:function(c){if(c.getTarget("."+this.nodeAnimWrapCls,this.el)){return false}return this.callParent(arguments)},onClear:function(){this.store.removeAll()},setRootNode:function(c){var d=this;d.store.setNode(c);d.node=c},onCheckboxChange:function(j,h){var l=this,e=j.getTarget(l.getItemSelector(),l.getTargetEl());if(e){l.onCheckChange(l.getRecord(e))}},onCheckChange:function(d){var c=d.get("checked");if(Ext.isBoolean(c)){c=!c;d.set("checked",c);this.fireEvent("checkchange",d,c)}},getChecked:function(){var c=[];this.node.cascadeBy(function(a){if(a.get("checked")){c.push(a)}});return c},isItemChecked:function(c){return c.get("checked")},createAnimWrap:function(l,j){var n=this,o=n.getNode(l,!n.isRowWrapped),p,q,m=[];n.renderColumnSizer(m);q=Ext.get(o);p=q.insertSibling({role:"presentation",tag:"tr",html:['<td colspan="'+n.panel.headerCt.getColumnCount()+'" role="presentation">','<div class="'+n.nodeAnimWrapCls+'" role="presentation">','<table class="'+Ext.baseCSSPrefix+n.id+"-table "+Ext.baseCSSPrefix+'grid-table" style="border:0" cellspacing="0" cellpadding="0" role="presentation">',m.join(""),"<tbody></tbody></table>","</div>","</td>"].join("")},"after");return{record:l,node:o,el:p,expanding:false,collapsing:false,animating:false,animateEl:p.down("div"),targetEl:p.down("tbody")}},getAnimWrap:function(j,h){if(!this.animate){return null}var e=this.animWraps,l=e[j.internalId];if(h!==false){while(!l&&j){j=j.parentNode;if(j){l=e[j.internalId]}}}return l},doAdd:function(y,u){var t=this,A,w=y[0],s=w.parentNode,q=t.all,o,x=t.getAnimWrap(s),p,z,v;if(!x||!x.expanding){return t.callParent(arguments)}A=t.bufferRender(y,u,true),s=x.record;p=x.targetEl;z=p.dom.childNodes;v=z.length;o=u-t.indexInStore(s)-1;if(!v||o>=v){p.appendChild(A)}else{Ext.fly(z[o]).insertSibling(A,"before",true)}q.insert(u,A);if(x.isAnimating){t.onExpand(s)}},onRemove:function(l,j,h){var n=this,m,o;if(n.viewReady){m=n.store.getCount()===0;if(m){n.refresh()}else{for(o=h.length-1;o>=0;--o){n.doRemove(j[o],h[o])}}if(n.hasListeners.itemremove){for(o=h.length-1;o>=0;--o){n.fireEvent("itemremove",j[o],h[o])}}}},doRemove:function(l,q){var m=this,p=m.all,j=m.getAnimWrap(l),n=p.item(q),o=n?n.dom:null;if(!o||!j||!j.collapsing){return m.callParent(arguments)}j.targetEl.dom.insertBefore(o,j.targetEl.dom.firstChild);p.removeElement(q)},onBeforeExpand:function(m,h,n){var l=this,j;if(l.rendered&&l.all.getCount()&&l.animate){if(l.getNode(m)){j=l.getAnimWrap(m,false);if(!j){j=l.animWraps[m.internalId]=l.createAnimWrap(m);j.animateEl.setHeight(0)}else{if(j.collapsing){j.targetEl.select(l.itemSelector).remove()}}j.expanding=true;j.collapsing=false}}},onExpand:function(n){var o=this,q=o.animQueue,w=n.getId(),u=o.getNode(n),p=u?o.indexOf(u):-1,s,v,m,t=Ext.isIEQuirks?1:0;if(o.singleExpand){o.ensureSingleExpand(n)}if(p===-1){return}s=o.getAnimWrap(n,false);if(!s){o.refreshSelection();n.isExpandingOrCollapsing=false;o.fireEvent("afteritemexpand",n,p,u);o.refreshSize();return}v=s.animateEl;m=s.targetEl;v.stopAnimation();q[w]=true;v.dom.style.height=t+"px";v.animate({from:{height:t},to:{height:m.getHeight()},duration:o.expandDuration,listeners:{afteranimate:function(){var a=m.query(o.itemSelector);if(a.length){s.el.insertSibling(a,"before",true)}s.el.remove();o.refreshSize();delete o.animWraps[s.record.internalId];delete q[w]}},callback:function(){o.refreshSelection();n.isExpandingOrCollapsing=false;o.fireEvent("afteritemexpand",n,p,u)}});s.isAnimating=true},onBeforeCollapse:function(o,j,q,m,p){var n=this,l;if(n.rendered&&n.all.getCount()){if(n.animate){if(Ext.Array.contains(o.stores,n.store)){l=n.getAnimWrap(o);if(!l){l=n.animWraps[o.internalId]=n.createAnimWrap(o,q)}else{if(l.expanding){l.targetEl.select(this.itemSelector).remove()}}l.expanding=false;l.collapsing=true;l.callback=m;l.scope=p}}else{n.onCollapseCallback=m;n.onCollapseScope=p}n.onRowDeselect(n.indexOf(o.firstChild))}},onCollapse:function(s){var p=this,m=p.animQueue,n=s.getId(),q=p.getNode(s),t=q?p.indexOf(q):-1,l=p.getAnimWrap(s),o;if(!p.all.getCount()||!Ext.Array.contains(s.stores,p.store)){return}if(!l){p.refreshSelection();s.isExpandingOrCollapsing=false;p.fireEvent("afteritemcollapse",s,t,q);p.refreshSize();Ext.callback(p.onCollapseCallback,p.onCollapseScope);p.onCollapseCallback=p.onCollapseScope=null;return}o=l.animateEl;m[n]=true;o.stopAnimation();o.animate({to:{height:Ext.isIEQuirks?1:0},duration:p.collapseDuration,listeners:{afteranimate:function(){l.el.remove();if(!p.isDestroyed){p.refreshSize()}delete p.animWraps[l.record.internalId];delete m[n]}},callback:function(){p.refreshSelection();s.isExpandingOrCollapsing=false;p.fireEvent("afteritemcollapse",s,t,q);Ext.callback(l.callback,l.scope);l.callback=l.scope=null}});l.isAnimating=true},isAnimating:function(c){return !!this.animQueue[c.getId()]},expand:function(p,q,m,o){var n=this,j=!!n.animate,l;if(!j||!p.isExpandingOrCollapsing){if(!p.isLeaf()){p.isExpandingOrCollapsing=j}Ext.suspendLayouts();l=p.expand(q,m,o);Ext.resumeLayouts(true);return l}},collapse:function(o,h,l,n){var m=this,j=!!m.animate;if(!j||!o.isExpandingOrCollapsing){if(!o.isLeaf()){o.isExpandingOrCollapsing=j}return o.collapse(h,l,n)}},toggle:function(e,h,j,l){if(e.isExpanded()){this.collapse(e,h,j,l)}else{this.expand(e,h,j,l)}},onItemDblClick:function(j,l,n){var m=this,h=m.editingPlugin;m.callParent(arguments);if(m.toggleOnDblClick&&j.isExpandable()&&!(h&&h.clicksToEdit===2)){m.toggle(j)}},onBeforeItemMouseDown:function(h,l,e,j){if(j.getTarget(this.expanderSelector,l)){return false}return this.callParent(arguments)},onItemClick:function(h,l,e,j){if(j.getTarget(this.expanderSelector,l)&&h.isExpandable()){this.toggle(h,j.ctrlKey);return false}return this.callParent(arguments)},onExpanderMouseOver:function(c,d){c.getTarget(this.cellSelector,10,true).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(c,d){c.getTarget(this.cellSelector,10,true).removeCls(this.expanderIconOverCls)},getStoreListeners:function(){var c=this,d=c.callParent(arguments);return Ext.apply(d,{beforeexpand:c.onBeforeExpand,expand:c.onExpand,beforecollapse:c.onBeforeCollapse,collapse:c.onCollapse,write:c.onStoreWrite,datachanged:c.onStoreDataChanged})},onBindStore:function(){var d=this,c=d.getTreeStore();d.callParent(arguments);d.mon(c,{scope:d,beforefill:d.onBeforeFill,fillcomplete:d.onFillComplete});if(!c.remoteSort){d.mon(c,{scope:d,beforesort:d.onBeforeSort,sort:d.onSort})}},onUnbindStore:function(){var d=this,c=d.getTreeStore();d.callParent(arguments);d.mun(c,{scope:d,beforefill:d.onBeforeFill,fillcomplete:d.onFillComplete});if(!c.remoteSort){d.mun(c,{scope:d,beforesort:d.onBeforeSort,sort:d.onSort})}},getTreeStore:function(){return this.panel.store},ensureSingleExpand:function(c){var d=c.parentNode;if(d){d.eachChild(function(a){if(a!==c&&a.isExpanded()){a.collapse()}})}},shouldUpdateCell:function(h,l,m){if(m){var n=0,j=m.length;for(;n<j;++n){if(Ext.Array.contains(this.uiFields,m[n])){return true}}}return this.callParent(arguments)},onStoreWrite:function(d,e){var h=this.panel.store;h.fireEvent("write",h,e)},onStoreDataChanged:function(d,e){var h=this.panel.store;h.fireEvent("datachanged",h)}},0,["treeview"],["component","box","dataview","tableview","treeview"],{component:true,box:true,dataview:true,tableview:true,treeview:true},["widget.treeview"],0,[Ext.tree,"View"],0));Ext.define("Ext.grid.plugin.BufferedRendererTreeView",{override:"Ext.tree.View",onRemove:function(q,j,n,l,p){var o=this,m=o.bufferedRenderer;if(o.rendered&&m){if(p){m.onReplace(q,n[0],j,[])}else{m.refreshView()}}else{o.callParent([q,j,n])}}});(Ext.cmd.derive("Ext.tree.Panel",Ext.panel.Table,{alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],viewType:"treeview",selType:"treemodel",treeCls:Ext.baseCSSPrefix+"tree-panel",deferRowRender:false,rowLines:false,lines:true,useArrows:false,singleExpand:false,ddConfig:{enableDrag:true,enableDrop:true},rootVisible:true,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],isTree:true,arrowCls:Ext.baseCSSPrefix+"tree-arrows",linesCls:Ext.baseCSSPrefix+"tree-lines",noLinesCls:Ext.baseCSSPrefix+"tree-no-lines",autoWidthCls:Ext.baseCSSPrefix+"autowidth-table",constructor:function(c){c=c||{};if(c.animate===undefined){c.animate=Ext.isBoolean(this.animate)?this.animate:Ext.enableFx}this.enableAnimations=c.animate;delete c.animate;this.callParent([c])},initComponent:function(){var j=this,e=[j.treeCls],l=j.store,h;if(j.useArrows){e.push(j.arrowCls);j.lines=false}if(j.lines){e.push(j.linesCls)}else{if(!j.useArrows){e.push(j.noLinesCls)}}if(Ext.isString(l)){l=j.store=Ext.StoreMgr.lookup(l)}else{if(!l||!l.isStore){l=Ext.apply({type:"tree",root:j.root,fields:j.fields,model:j.model,folderSort:j.folderSort},l);l=j.store=Ext.StoreMgr.lookup(l)}else{if(j.root){l=j.store=Ext.data.StoreManager.lookup(l);l.setRootNode(j.root);if(j.folderSort!==undefined){l.folderSort=j.folderSort;l.sort()}}}}j.store.singleExpand=j.singleExpand;j.viewConfig=Ext.apply({rootVisible:j.rootVisible,animate:j.enableAnimations,singleExpand:j.singleExpand,node:l.getRootNode(),hideHeaders:j.hideHeaders},j.viewConfig);if(!j.columns){if(j.initialConfig.hideHeaders===undefined){j.hideHeaders=true}j.addCls(j.autoWidthCls);j.columns=[{xtype:"treecolumn",text:"Name",width:Ext.isIE6?"100%":10000,dataIndex:j.displayField}]}if(j.cls){e.push(j.cls)}j.cls=e.join(" ");j.callParent();j.selModel.treeStore=j.store;h=j.getView();j.relayEvents(h,["checkchange","afteritemexpand","afteritemcollapse"]);if(!h.isLockingView){if(!h.rootVisible&&!j.getRootNode()){j.setRootNode({expanded:l.autoLoad!==false})}}},bindStore:function(e,d){var h=this;h.store=e;h.storeListeners=h.mon(e,{destroyable:true,load:h.onStoreLoad,rootchange:h.onRootChange,clear:h.onClear,scope:h});h.storeRelayers=h.relayEvents(e,["beforeload","load"]);h.storeRelayers1=h.mon(e,{destroyable:true,append:h.createRelayer("itemappend"),remove:h.createRelayer("itemremove"),move:h.createRelayer("itemmove",[0,4]),insert:h.createRelayer("iteminsert"),beforeappend:h.createRelayer("beforeitemappend"),beforeremove:h.createRelayer("beforeitemremove"),beforemove:h.createRelayer("beforeitemmove"),beforeinsert:h.createRelayer("beforeiteminsert"),expand:h.createRelayer("itemexpand",[0,1]),collapse:h.createRelayer("itemcollapse",[0,1]),beforeexpand:h.createRelayer("beforeitemexpand",[0,1]),beforecollapse:h.createRelayer("beforeitemcollapse",[0,1])});e.ownerTree=h;if(!d){h.view.setRootNode(h.getRootNode())}},unbindStore:function(){var c=this,d=c.store;if(d){Ext.destroy(c.storeListeners,c.storeRelayers,c.storeRelayers1);delete d.ownerTree}},onClear:function(){this.view.onClear()},setRootNode:function(){return this.store.setRootNode.apply(this.store,arguments)},getRootNode:function(){return this.store.getRootNode()},onRootChange:function(c){this.view.setRootNode(c)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(c){return c.get("checked")},expandNode:function(e,h,j,l){return this.getView().expand(e,h,j,l||this)},collapseNode:function(e,h,j,l){return this.getView().collapse(e,h,j,l||this)},expandAll:function(l,n){var m=this,j=m.getRootNode(),h=m.enableAnimations;if(j){if(!h){Ext.suspendLayouts()}j.expand(true,l,n||m);if(!h){Ext.resumeLayouts(true)}}},collapseAll:function(l,n){var m=this,h=m.getRootNode(),o=m.enableAnimations,j=m.getView();if(h){if(!o){Ext.suspendLayouts()}n=n||m;if(j.rootVisible){h.collapse(true,l,n)}else{h.collapseChildren(true,l,n)}if(!o){Ext.resumeLayouts(true)}}},expandPath:function(n,t,y,s,o){var v=this,w=v.getRootNode(),x=1,u=v.getView(),p,q;t=t||v.getRootNode().idProperty;y=y||"/";if(Ext.isEmpty(n)){Ext.callback(s,o||v,[false,null]);return}p=n.split(y);if(w.get(t)!=p[1]){Ext.callback(s,o||v,[false,w]);return}q=function(){if(++x===p.length){Ext.callback(s,o||v,[true,w]);return}var a=w.findChild(t,p[x]);if(!a){Ext.callback(s,o||v,[false,w]);return}w=a;w.expand(false,q)};w.expand(false,q)},selectPath:function(l,q,u,o,m){var t=this,s,n,p;q=q||t.getRootNode().idProperty;u=u||"/";n=l.split(u);p=n.pop();if(n.length>1){t.expandPath(n.join(u),q,u,function(d,a){var c=a;if(d&&a){a=a.findChild(q,p);if(a){t.getSelectionModel().select(a);Ext.callback(o,m||t,[true,a]);return}}Ext.callback(o,m||t,[false,c])},t)}else{s=t.getRootNode();if(s.getId()===p){t.getSelectionModel().select(s);Ext.callback(o,m||t,[true,s])}else{Ext.callback(o,m||t,[false,null])}}}},1,["treepanel"],["component","box","container","panel","tablepanel","treepanel"],{component:true,box:true,container:true,panel:true,tablepanel:true,treepanel:true},["widget.treepanel"],0,[Ext.tree,"Panel",Ext.tree,"TreePanel",Ext,"TreePanel"],0));(Ext.cmd.derive("Ext.view.DragZone",Ext.dd.DragZone,{containerScroll:false,constructor:function(h){var l=this,j,m,n;Ext.apply(l,h);if(!l.ddGroup){l.ddGroup="view-dd-zone-"+l.view.id}j=l.view;m=j.ownerCt;if(m){n=m.getTargetEl().dom}else{n=j.el.dom.parentNode}l.callParent([n]);l.ddel=Ext.get(document.createElement("div"));l.ddel.addCls(Ext.baseCSSPrefix+"grid-dd-wrap")},init:function(j,h,e){var l=this;l.initTarget(j,h,e);l.view.on("itemmousedown",l.onItemMouseDown,l)},onValidDrop:function(d,e,h){this.callParent([d,e,h]);d.el.focus()},onItemMouseDown:function(e,h,l,m,j){if(!this.isPreventDrag(j,h,l,m)){if(e.focusRow){e.focusRow(h)}this.handleMouseDown(j)}},isPreventDrag:function(j,h,l,e){return false},getDragData:function(h){var e=this.view,d=h.getTarget(e.getItemSelector());if(d){return{copy:e.copy||(e.allowCopy&&h.ctrlKey),event:new Ext.EventObjectImpl(h),view:e,ddel:this.ddel,item:d,records:e.getSelectionModel().getSelection(),fromPosition:Ext.fly(d).getXY()}}},onInitDrag:function(j,m){var o=this,n=o.dragData,p=n.view,l=p.getSelectionModel(),q=p.getRecord(n.item);if(!l.isSelected(q)){l.selectWithEvent(q,o.DDMInstance.mousedownEvent)}n.records=l.getSelection();o.ddel.update(o.getDragText());o.proxy.update(o.ddel.dom);o.onStartDrag(j,m);return true},getDragText:function(){var c=this.dragData.records.length;return Ext.String.format(this.dragText,c,c===1?"":"s")},getRepairXY:function(c,d){return d?d.fromPosition:false}},1,0,0,0,0,0,[Ext.view,"DragZone"],0));(Ext.cmd.derive("Ext.tree.ViewDragZone",Ext.view.DragZone,{isPreventDrag:function(c,d){return(d.get("allowDrag")===false)||!!c.getTarget(this.view.expanderSelector)},getDragText:function(){var h=this.dragData.records,e=h.length,j=h[0].get(this.displayField),l="s";if(e===1&&j){return j}else{if(!j){l=""}}return Ext.String.format(this.dragText,e,l)},afterRepair:function(){var o=this,m=o.view,n=m.selectedItemCls,l=o.dragData.records,p,q=l.length,t=Ext.fly,s;if(Ext.enableFx&&o.repairHighlight){for(p=0;p<q;p++){s=m.getNode(l[p]);t(s.firstChild).highlight(o.repairHighlightColor,{listeners:{beforeanimate:function(){if(m.isSelected(s)){t(s).removeCls(n)}},afteranimate:function(){if(m.isSelected(s)){t(s).addCls(n)}}}})}}o.dragging=false}},0,0,0,0,0,0,[Ext.tree,"ViewDragZone"],0));(Ext.cmd.derive("Ext.tree.ViewDropZone",Ext.view.DropZone,{allowParentInserts:false,allowContainerDrops:false,appendOnly:false,expandDelay:500,indicatorCls:Ext.baseCSSPrefix+"tree-ddindicator",expandNode:function(c){var d=this.view;this.expandProcId=false;if(!c.isLeaf()&&!c.isExpanded()){d.expand(c);this.expandProcId=false}},queueExpand:function(c){this.expandProcId=Ext.Function.defer(this.expandNode,this.expandDelay,this,[c])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},getPosition:function(p,t){var m=this.view,s=m.getRecord(t),o=p.getPageY(),e=s.isLeaf(),u=false,n=Ext.fly(t).getRegion(),q;if(s.isRoot()){return"append"}if(this.appendOnly){return e?false:"append"}if(!this.allowParentInserts){u=s.hasChildNodes()&&s.isExpanded()}q=(n.bottom-n.top)/(e?2:3);if(o>=n.top&&o<(n.top+q)){return"before"}else{if(!u&&(e||(o>=(n.bottom-q)&&o<=n.bottom))){return"after"}else{return"append"}}},isValidDropPoint:function(z,u,p,t,w){if(!z||!w.item){return false}var e=this.view,s=e.getRecord(z),x=w.records,A=x.length,q=x.length,y,v;if(!(s&&u&&A)){return false}for(y=0;y<q;y++){v=x[y];if(v.isNode&&v.contains(s)){return false}}if(u==="append"&&s.get("allowDrop")===false){return false}else{if(u!="append"&&s.parentNode.get("allowDrop")===false){return false}}if(Ext.Array.contains(x,s)){return false}return e.fireEvent("nodedragover",s,u,w,t)!==false},onNodeOver:function(w,p,s,u){var t=this.getPosition(s,w),v=this.dropNotAllowed,o=this.view,q=o.getRecord(w),n=this.getIndicator(),e=0;this.cancelExpand();if(t=="append"&&!this.expandProcId&&!Ext.Array.contains(u.records,q)&&!q.isLeaf()&&!q.isExpanded()){this.queueExpand(q)}if(this.isValidDropPoint(w,t,p,s,u)){this.valid=true;this.currentPosition=t;this.overRecord=q;n.setWidth(Ext.fly(w).getWidth());e=Ext.fly(w).getY()-Ext.fly(o.el).getY()-1;if(t=="before"){v=q.isFirst()?Ext.baseCSSPrefix+"tree-drop-ok-above":Ext.baseCSSPrefix+"tree-drop-ok-between";n.showAt(0,e);p.proxy.show()}else{if(t=="after"){v=q.isLast()?Ext.baseCSSPrefix+"tree-drop-ok-below":Ext.baseCSSPrefix+"tree-drop-ok-between";e+=Ext.fly(w).getHeight();n.showAt(0,e);p.proxy.show()}else{v=Ext.baseCSSPrefix+"tree-drop-ok-append";n.hide()}}}else{this.valid=false}this.currentCls=v;return v},onNodeOut:function(j,h,l,e){this.valid=false;this.getIndicator().hide()},onContainerOver:function(e,h,d){return h.getTarget("."+this.indicatorCls)?this.currentCls:this.dropNotAllowed},notifyOut:function(){this.callParent(arguments);this.cancelExpand()},handleNodeDrop:function(B,v,z){var t=this,G=t.view,y=v?v.parentNode:G.panel.getRootNode(),F=G.getStore().treeStore.model,E,C,w,A,D,x,u,s;if(B.copy){E=B.records;B.records=[];for(C=0,w=E.length;C<w;C++){A=E[C];if(A.isNode){B.records.push(A.copy(undefined,true))}else{B.records.push(new F(A.data,A.getId()))}}}t.cancelExpand();if(z=="before"){D=y.insertBefore;x=[null,v];v=y}else{if(z=="after"){if(v.nextSibling){D=y.insertBefore;x=[null,v.nextSibling]}else{D=y.appendChild;x=[null]}v=y}else{if(!(v.isExpanded()||v.isLoading())){u=true}D=v.appendChild;x=[null]}}s=function(){var c,a;Ext.suspendLayouts();for(C=0,w=B.records.length;C<w;C++){A=B.records[C];if(!A.isNode){if(A.isModel){A=new F(A.data,A.getId())}else{A=new F(A)}B.records[C]=A}x[0]=A;D.apply(v,x)}if(t.sortOnDrop){v.sort(v.getOwnerTree().store.generateComparator())}Ext.resumeLayouts(true);if(Ext.enableFx&&t.dropHighlight){c=t.dropHighlightColor;for(C=0;C<w;C++){a=G.getNode(B.records[C]);if(a){Ext.fly(a).highlight(c)}}}};if(u){v.expand(false,s)}else{if(v.isLoading()){v.on({expand:s,delay:1,single:true})}else{s()}}}},0,0,0,0,0,0,[Ext.tree,"ViewDropZone"],0));(Ext.cmd.derive("Ext.tree.plugin.TreeViewDragDrop",Ext.AbstractPlugin,{dragText:"{0} selected node{1}",allowParentInserts:false,allowContainerDrops:false,appendOnly:false,ddGroup:"TreeDD",containerScroll:false,expandDelay:1000,enableDrop:true,enableDrag:true,nodeHighlightColor:"c3daf9",nodeHighlightOnDrop:Ext.enableFx,displayField:"text",init:function(c){c.on("render",this.onViewRender,this,{single:true})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onViewRender:function(e){var d=this,h;if(d.enableDrag){if(d.containerScroll){h=e.getEl()}d.dragZone=new Ext.tree.ViewDragZone(Ext.apply({view:e,ddGroup:d.dragGroup||d.ddGroup,dragText:d.dragText,displayField:d.displayField,repairHighlightColor:d.nodeHighlightColor,repairHighlight:d.nodeHighlightOnRepair,scrollEl:h},d.dragZone))}if(d.enableDrop){d.dropZone=new Ext.tree.ViewDropZone(Ext.apply({view:e,ddGroup:d.dropGroup||d.ddGroup,allowContainerDrops:d.allowContainerDrops,appendOnly:d.appendOnly,allowParentInserts:d.allowParentInserts,expandDelay:d.expandDelay,dropHighlightColor:d.nodeHighlightColor,dropHighlight:d.nodeHighlightOnDrop,sortOnDrop:d.sortOnDrop,containerScroll:d.containerScroll},d.dropZone))}}},0,0,0,0,["plugin.treeviewdragdrop"],0,[Ext.tree.plugin,"TreeViewDragDrop"],function(){var c=this.prototype;c.nodeHighlightOnDrop=c.nodeHighlightOnRepair=Ext.enableFx}));(Ext.cmd.derive("Ext.util.Cookies",Ext.Base,{singleton:true,set:function(t,q){var m=arguments,n=arguments.length,l=(n>2)?m[2]:null,o=(n>3)?m[3]:"/",s=(n>4)?m[4]:null,p=(n>5)?m[5]:false;document.cookie=t+"="+escape(q)+((l===null)?"":("; expires="+l.toUTCString()))+((o===null)?"":("; path="+o))+((s===null)?"":("; domain="+s))+((p===true)?"; secure":"")},get:function(o){var l=document.cookie.split("; "),j=l.length,m,n,h;for(n=0;n<j;++n){m=l[n].split("=");if(m[0]===o){h=m[1];return h?unescape(h):""}}return null},clear:function(d,c){if(this.get(d)){c=c||"/";document.cookie=d+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c}},getCookieVal:function(h){var e=document.cookie,d=e.indexOf(";",h);if(d==-1){d=e.length}return unescape(e.substring(h,d))}},0,0,0,0,0,0,[Ext.util,"Cookies"],0));(Ext.cmd.derive("Ext.util.Grouper",Ext.util.Sorter,{isGrouper:true,getGroupString:function(c){return c.get(this.property)}},0,0,0,0,0,0,[Ext.util,"Grouper"],0));(Ext.cmd.derive("Ext.util.History",Ext.Base,{singleton:true,alternateClassName:"Ext.History",useTopWindow:true,iframeId:Ext.baseCSSPrefix+"history-frame",constructor:function(){var d=this,h,e;d.oldIEMode=Ext.isIE7m||Ext.isIEQuirks&&(Ext.isIE8||Ext.isIE9);d.iframe=null;d.hiddenField=null;d.ready=false;d.currentToken=null;d.mixins.observable.constructor.call(d);d.onHashChange=function(){e=d.getHash();if(e!==h){h=e;d.handleStateChange(h)}}},getHash:function(){return this.win.location.hash.substr(1)},setHash:function(c){try{this.win.location.hash=c}catch(d){}},handleStateChange:function(c){this.currentToken=c;this.fireEvent("change",c)},updateIFrame:function(h){var e=this.iframe,d=e&&e.contentWindow&&e.contentWindow.document;d.open().close();d.location.hash=h;return true},checkIFrame:function(){var l=this,e=l.iframe.contentWindow,h,j;if(!e||!e.document){Ext.Function.defer(l.checkIFrame,10,l);return}h=e.location.hash.substr(1);j=l.getHash();Ext.TaskManager.start({run:function(){var c=e.location.hash.substr(1),a=l.getHash();if(c!==h){h=c;l.handleStateChange(c);l.setHash(c);j=c}else{if(a!==j){j=a;l.updateIFrame(a)}}},interval:50,scope:l});l.ready=true;l.fireEvent("ready",l)},startUp:function(){var c=this;c.currentToken=c.getHash();if(c.oldIEMode){c.checkIFrame()}else{if(Ext.supports.Hashchange){Ext.EventManager.on(c.win,"hashchange",c.onHashChange)}else{Ext.TaskManager.start({run:c.onHashChange,interval:50})}c.ready=true;c.fireEvent("ready",c)}},init:function(h,e){var d=this;if(d.ready){Ext.callback(h,e,[d]);return}if(!Ext.isReady){Ext.onReady(function(){d.init(h,e)});return}d.win=d.useTopWindow?window.top:window;if(d.oldIEMode){d.iframe=Ext.getDom(d.iframeId);if(!d.iframe){d.iframe=Ext.DomHelper.append(document.body,{tag:"iframe",role:"presentation",id:d.iframeId,style:"display:none;",src:Ext.SSL_SECURE_URL})}}d.addEvents("ready","change");if(h){d.on("ready",h,e,{single:true})}d.startUp()},add:function(e,d){var h=this;if(d!==false){if(h.getToken()===e){return true}}if(h.oldIEMode){return h.updateIFrame(e)}else{h.setHash(e);return true}},back:function(){var c=this.useTopWindow?window.top:window;c.history.go(-1)},forward:function(){var c=this.useTopWindow?window.top:window;c.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}},1,0,0,0,0,[["observable",Ext.util.Observable]],[Ext.util,"History",Ext,"History"],0));Ext.define("Wasutp.FixDragAndDrop",{singleton:true,enableEventListeners:function(){if(!this.events){this.events={};this.events.onDrop=this.onDrop.bind(this);this.events.onDragOver=this.onDragOver.bind(this)}window.addEventListener("drop",this.events.onDrop);window.addEventListener("dragover",this.events.onDragOver);return true},disableEventListeners:function(){if(!this.events){return false}window.removeEventListener("drop",this.events.onDrop);window.removeEventListener("dragover",this.events.onDragOver);delete this.events;return true},onDrop:function(a){a.stopPropagation();a.preventDefault()},onDragOver:function(a){a.stopPropagation();a.preventDefault()}});try{Wasutp.FixDragAndDrop.enableEventListeners()}catch(ex){console.error("Не удалось выполнить подмену обработчиков перетаскивания в isms извне",ex)}Ext.define("Wasutp.window.Window",{extend:"Ext.window.Window",listeners:{},initComponent:function(){var d=this,a=d.listeners&&d.listeners.afterrender?d.listeners.afterrender:function(){},c=d.listeners&&d.listeners.move?d.listeners.move:function(){};d.listeners.afterrender=function(e){a.apply(d,arguments);e.getEl().on("click",function(h){Wasutp.Params.Updater.enable()});e.getEl().on("mouseup",function(h){Wasutp.Params.Updater.enable()});e.getEl().on("mousedown",function(h){Wasutp.Params.Updater.disable()})};d.listeners.move=function(e){c.apply(d,arguments);Wasutp.Params.Updater.enable()};d.callParent(arguments)}});Ext.define("Wasutp.window.MessageBox",{statics:{params:{},buttons:[],window:null,bar:{OK:{text:"OK",value:"ok"},YES:{text:"Да",value:"yes"},NO:{text:"Нет",value:"no"},},resizable:false,title:"&#160;",modal:true,width:600,minWidth:250,minHeight:110,constrain:true,buttonAlign:"center",iconCls:"",getWindow:function(){var c=this,h,e;h={title:typeof c.params.title!=="undefined"?c.params.title:c.title,width:typeof c.params.width!=="undefined"?c.params.width:c.width,minWidth:typeof c.params.minWidth!=="undefined"?c.params.minWidth:c.minWidth,maxWidth:typeof c.params.maxWidth!=="undefined"?c.params.maxWidth:c.maxWidth,minHeight:typeof c.params.minHeight!=="undefined"?c.params.minHeight:c.minHeight,maxHeight:typeof c.params.maxHeight!=="undefined"?c.params.maxHeight:c.maxHeight,constrain:typeof c.params.constrain!=="undefined"?c.params.constrain:c.constrain,resizable:typeof c.params.resizable!=="undefined"?c.params.resizable:c.resizable,buttonAlign:typeof c.params.buttonAlign!=="undefined"?c.params.buttonAlign:c.buttonAlign,modal:typeof c.params.modal!=="undefined"?c.params.modal:c.modal,cls:"wasutp-messagebox",iconCls:typeof c.params.iconCls!=="undefined"?c.params.iconCls:c.iconCls,buttons:c.buttons,height:typeof c.params.height!=="undefined"?c.params.height:undefined,autoScroll:typeof c.params.autoScroll!=="undefined"?c.params.autoScroll:false};if(typeof c.params.iconTitle!=="undefined"){c.window.icon=c.params.iconTitle}if(typeof c.params.listeners!=="undefined"){c.window.listeners=c.params.listeners}if(h.modal){c.window=Ext.create("Wasutp.window.Modal",h)}else{if(c.params.integrate){h.modal=false;c.window=wasutpApp.getDesktop().createWindow(h)}else{c.window=Ext.create("Ext.window.Window",h)}}e=typeof c.params.modal;if(e!=="undefined"){if(e==="boolean"){h.modal=c.params.modal}else{if(e==="string"){if(c.params.modal==="parent"){var d=Ext.WindowManager.getActive();if(d){c.disableRelatedWindow(d)}}else{if(e==="number"){var a=Ext.getCmp(c.params.modal);if(a){c.disableRelatedWindow(a)}}}}}}return c.window},disableRelatedWindow:function(c){var a=this;a.window.on("afterrender",function(){c.disable()});a.window.on("close",function(){if(!c.isHidden()){c.enable()}})},alert:function(d){var a=this,c;a.params=d;a.buttons=[];a.addButtons([a.getButton("OK",true)]);if(typeof a.params.buttons!=="undefined"){a.addButtons(a.params.buttons)}c=a.getWindow();a.addItems(a.getMsgPanel());if(typeof a.params.items!=="undefined"){a.addItems(a.params.items)}c.show()},confirm:function(d){var a=this,c;a.params=d;a.buttons=[];a.addButtons([a.getButton("YES",true),a.getButton("NO")]);if(typeof a.params.buttons!=="undefined"){a.addButtons(a.params.buttons)}c=a.getWindow();a.addItems(a.getMsgPanel());if(typeof a.params.items!=="undefined"){a.addItems(a.params.items)}c.show()},getMsgPanel:function(){var c=this,a=c.params.icon?c.params.icon:"x-message-box-question";return{layout:"table",padding:10,border:0,cls:"isms-message-box-table",items:[{html:'<div class="'+a+'" style="width: 50px; height: 35px; left: 0px; margin: 0px; top: 0px;"></div>',border:0},{border:0,items:[{border:0,html:c.params.msg?c.params.msg:"&#160;"}]}]}},getButton:function(c,e){var h=this,a,d=typeof h.params.scope!=="undefined"&&h.params.scope?h.params.scope:h;a=Ext.create("Ext.button.Button",{text:h.bar[c].text,handler:function(){if(typeof h.params.callback==="function"){h.params.callback.call(d,h.bar[c].value)}h.window.close()}});if(e===true){a.listeners={afterrender:function(j){j.focus(false,300)}}}return a},addButtons:function(c){var e=this,d=typeof c;if(d==="object"){if(c.length){for(var a in c){e.buttons.push(c[a])}}else{e.buttons.push(c)}}else{if(d==="number"){}else{if(d==="string"){}}}},addItems:function(c){var e=this,d=typeof c;if(d==="object"){if(c.length){for(var a in c){e.window.add(c[a])}}else{e.window.add(c)}}else{if(d==="number"){}else{if(d==="string"){}}}}}});Ext.define("Wasutp.Panels.components.Chart",{extend:"Ext.chart.Chart",alias:"widget.panel-chart",chartData:[],buffer:{},timeout:null,valuesCount:60,width:200,height:200,bgColor:null,gridColor:"#a1a1a1",textColor:"#000000",strokeColors:["#000000"],minValue:null,maxValue:null,enableAutoScale:null,strokeWidths:[],paramPositions:[],shadow:false,animate:false,valueFieldTpl:"value{id}",paramsData:[],defaults:{strokeColor:"#000000",strokeWidth:1,paramPosition:1},dataHandler:null,listeners:{beforerender:function(){this.flushCache()}},getTimeout:function(){if(this.timeout===null){this.timeout=Wasutp.Panels.PanelsUpdater.timeout}return this.timeout},getDuration:function(){return(this.valuesCount-1)*this.getTimeout()},updateData:function(e){var d=this,c=d.getLinesIdByPid(e.PID);if(!c.length){return false}for(var a in c){d.setLineData(c[a],e)}if(d.isBufferFilled()){d.updateBuffer(Object.assign({},d.buffer));d.buffer={}}},setLineData:function(a,h){var e=this,j=new Date(h.TIME*1000),c=e.getValueField(a);if(e.buffer.data===undefined){e.buffer.data={}}e.buffer.data[c]=parseFloat(h.VALUE);e.buffer.data.date=j;if(e.buffer.statuses===undefined){e.buffer.statuses={}}for(var d in h.STATUSES){e.buffer.statuses[h.STATUSES[d]]=true}},isBufferFilled:function(){var c=this,a=c.getFields();if(c.buffer.data===undefined){return false}for(var d in a){if(c.buffer.data[a[d]]===undefined){return false}}return true},updateBuffer:function(a){var d=this,j=d.axes.get(1),h=d.getDuration(),e=a.data,c=[];d.chartData.push(e);if(d.chartData.length>d.valuesCount){d.chartData.shift()}j.fromDate=d.chartData[0].date;if(d.chartData.length===d.valuesCount){j.toDate=new Date(e.date)}else{j.toDate=new Date(+d.chartData[0].date+h)}d.store.loadData(d.chartData);if(a.statuses.OIC_DST_NOPRESENT){c.push("OIC_DST_NOPRESENT")}if(a.statuses.OIC_DST_VALUENOCORRECT){c.push("OIC_DST_VALUENOCORRECT")}d.setStatuses(c)},getStrokeColor:function(a){if(this.strokeColors.indexOf(a)){return this.strokeColors[a]}return this.defaults.strokeColor},getStrokeWidth:function(a){if(this.strokeWidths.indexOf(a)){return this.strokeWidths[a]}return this.defaults.strokeWidth},initComponent:function(){var a=this;a.store=Ext.create("Ext.data.Store",{fields:this.getFields(),data:[]});if(this.bgColor!==null){var c="background-color: "+this.bgColor;this.style=this.style?this.style+";"+c:c}a.initMappedParams();a.axes=[a.getAxisY(),a.getAxisX()];a.series=a.getSeries();a.callParent(arguments)},getFields:function(){var a=this.getValueFields();a.push("date");return a},getValueFields:function(){var c=this,a=[];if(this.isEmptyParamPositions()){a.push(c.getValueField())}else{for(var d in this.paramPositions){a.push(c.getValueField(c.paramPositions[d]))}}return a},getAxisY:function(){var d=this,a=d.getValueFields(),c={type:"Numeric",position:"left",fields:a,gridColor:d.gridColor,grid:true,constrain:false,majorTickSteps:9,minorTickSteps:1,label:{fill:d.textColor}};if(d.enableAutoScale!==true){if(d.minValue!==null){c.minimum=Math.floor(d.minValue)}if(d.maxValue!==null){c.maximum=Math.floor(d.maxValue)}}return c},getAxisX:function(){var c=this,a={grid:true,gridColor:c.gridColor,type:"Time",position:"bottom",constrain:false,fields:"date",dateFormat:"H:i:s",step:[Ext.Date.SECOND,20],fromDate:new Date(),label:{fill:c.textColor}};return a},getValueField:function(d){var c=this,a=d||c.defaults.paramPosition;return new Ext.XTemplate(c.valueFieldTpl).apply({id:a})},isEmptyParamPositions:function(){return this.paramPositions===null||this.paramPositions.length===0},getSeries:function(){var d=this,c=[];if(this.isEmptyParamPositions()){c.push({type:"line",axis:["left","bottom"],xField:"date",yField:d.getValueField(),style:{stroke:d.getStrokeColor(0),"stroke-width":d.getStrokeWidth(0)},showMarkers:false})}for(var e in this.paramPositions){var a={type:"line",axis:["left","bottom"],xField:"date",yField:d.getValueField(d.paramPositions[e]),style:{stroke:d.getStrokeColor(e),"stroke-width":d.getStrokeWidth(e)},showMarkers:false};c.push(a)}return c},initMappedParams:function(){var c=this,d=this.isContained.id,a=c.id.substring(d.length+1,c.id.length);Wasutp.Ajax.request({url:"/json/panels/get-mapped-params",params:{panelName:JSON.stringify(d),constName:JSON.stringify(a)},success:function(e){if(e.data.length){c.paramsData=e.data}}})},flushCache:function(){this.chartData=[];this.paramsData=[];this.buffer={}},getDataHandler:function(){if(this.dataHandler===null){this.dataHandler=Ext.create("Wasutp.Panels.DataHandler")}return this.dataHandler},setStatuses:function(c){var a=this.getDataHandler();return a.setStatuses(c,this.id)},getLinesIdByPid:function(a){var e=this,c=[];if(!e.paramsData.length){return c}for(var h in e.paramsData){if(e.paramsData[h]["ID_PARAM"]===a){c.push(e.paramsData[h]["PARAM_POSITION"])}}return c}});Ext.define("Wasutp.Panels.PanelsUpdater",{statics:{timeout:5000,panels:{},panelsModule:null,timerId:null,init:function(a){var c=this;if(!a.panelsModule){throw new Error("Не указал модуль панелей!")}c.panelsModule=a.panelsModule||null;c.timeout=a.timeout||(appHelper.getWasutpConfig().infoPanelUpdatePeriod||5000)},addPanel:function(d,a){var c=this;if(Ext.Object.isEmpty(c.panels)){c.panels[d]=a;c.requestData()}else{if(typeof(c.panels[d])==="undefined"){c.panels[d]=a}}},removePanel:function(c){var a=this;if(typeof(a.panels[c])!=="undefined"){delete a.panels[c]}if(Ext.Object.isEmpty(a.panels)){clearTimeout(a.timerId)}},requestData:function(){var c=this,a=[],d={};if(Ext.Object.isEmpty(c.panels)){return false}a=Object.keys(c.panels);Wasutp.Ajax.request({params:{ids:JSON.stringify(a),testmode:appHelper.getWasutpConfig().infoPanelTestMode?1:0},url:"/json/panels/get-data-by-id",success:function(h){try{panelsHelper.addPanelData(h.data);c.panelsModule.updateHtml(d)}catch(j){console.error(j);panelsHelper.addPanelData([]);c.panelsModule.updateHtml(d)}c.timerId=setTimeout(c.requestData.bind(c),c.timeout)},unsuccess:function(e){panelsHelper.addPanelData([]);c.panelsModule.updateHtml(d);c.timerId=setTimeout(c.requestData.bind(c),c.timeout)},failure:function(e){panelsHelper.addPanelData([]);c.panelsModule.updateHtml(d);c.timerId=setTimeout(c.requestData.bind(c),c.timeout)}})}}});Ext.define("Wasutp.Panels.components.ComponentInterface",{extend:"Ext.Component",constructor:function(){if(typeof this.updateData!=="function"){throw"Unimplemented method updateData."}this.callParent(arguments)}});Ext.define("Wasutp.Panels.components.Component",{extend:"Wasutp.Panels.components.ComponentInterface",dataHandler:null,getDataHandler:function(){if(this.dataHandler===null){this.dataHandler=Ext.create("Wasutp.Panels.DataHandler")}return this.dataHandler},setStatuses:function(c){var a=this.getDataHandler();return a.setStatuses(c,this.id)}});Ext.define("Wasutp.Administration.auth.Form",{okButton:"",url:"",showMessage:"",title:"",cmdSubmittedText:"Команда принята к исполнению",checkHandler:function(){},scope:this,form:null,constructor:function(c){var a=this;if(!c){console.log("params == null");return null}if(c.okButton){a.okButton=c.okButton}if(c.url){a.url=c.url}if(c.showMessage){a.showMessage=c.showMessage}if(c.title){a.title=c.title}if(c.checkHandler){a.checkHandler=c.checkHandler}if(c.successText){a.successText=c.successText}if(c.cmdSubmittedText){a.cmdSubmittedText=c.cmdSubmittedText}}});Ext.define("Wasutp.Configurations.Form.TransferActionSelection",{addSourcesAction:null,createParamAction:null,draggingParamsCount:null,profileParamName:"",win:null,formPanel:null,addSourceLabel:'Добавить новый источник у параметра "{name}"',addSourcesLabel:'Добавить новые источники у параметра "{name}"',createParamLabel:"Добавить новый параметр для передачи",createParamsLabel:"Добавить новые параметры для передачи",constructor:function(a){var c=this;c.addSourcesAction=a.addSourcesAction;c.createParamAction=a.createParamAction;c.draggingParamsCount=a.draggingParamsCount;c.profileParamName=a.profileParamName||""},show:function(){var j=this,a="",h="",c=100,e=j.profileParamName.length>c?j.profileParamName.substring(0,c)+"...":j.profileParamName;if(j.draggingParamsCount>1){a=new Ext.XTemplate(j.addSourcesLabel).apply({name:e});h=j.createParamsLabel}else{a=new Ext.XTemplate(j.addSourceLabel).apply({name:e});h=j.createParamLabel}var d=[{xtype:"displayfield",fieldLabel:"Выберите операцию"},{xtype:"radiogroup",layout:{type:"vbox",align:"left"},items:[{name:"action",boxLabel:h,inputValue:"createParamAction",checked:true},{name:"action",boxLabel:a,inputValue:"addSourcesAction"}]}];j.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,border:0,fieldDefaults:{labelAlign:"left",anchor:"100%",labelWidth:300},items:d,buttons:["->",{text:"ОК",margin:"5 5 5 5",handler:function(){j.sendForm()}},{text:"Отмена",margin:"5 10 5 5",handler:function(){j.win.close()}}]});j.win=Ext.create("Wasutp.window.Modal",{title:"Подтверждение действия",margin:"5 0 5 0",layout:"fit",items:j.formPanel,closable:true});j.win.show()},sendForm:function(){var c=this,a=c.formPanel.down("radiogroup"),d=a.getValue();switch(d.action){case"addSourcesAction":c.addSourcesAction.fn.call(c.addSourcesAction.scope);break;case"createParamAction":c.createParamAction.fn.call(c.createParamAction.scope);break;default:break}c.win.close()}});Ext.define("Wasutp.Configurations.Form.AbstractForm",{nameLengthHelper:null,validateIpAdressWithEmpty:function(a){if(a===""){return true}else{if(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(a)){return true}}return"Поле содержит некорректный ip адрес"},validateString:function(a){if(!/^[^<>]*$/.test(a)){return"Поле не может содержать символы: <>"}return true},validateNaturalNumber:function(a){if(/[^\d]/.test(a)){return"Поле должно содержать натуральное число"}return true},validateString256:function(d){var c=256,a=this;if(d.length>c){return"Максимальный размер поля - "+c+" символов"}if(!/^[^<>]*$/.test(d)){return"Поле не может содержать символы: <>"}return true},validateLength256:function(d){var c=256,a=this;if(d.length<=c){return true}else{return"Максимальный размер поля - "+c+" символов"}},scale19dot7validator:function(c){var a=c.split(".");if(a[0]>999999999999){return"Значение этого поля не может быть больше 999999999999.9999999"}if(a[1]&&a[1]>9999999){return"Точность значения этого поля не может быть выше 7 знаков после запятой"}return true},scale19dot7IntValidator:function(a){if(a.split(".").length>1){return"Значением этого поля, для булевых параметров, может быть только целое число, дробная часть будет отброшена"}return true},showOverPanel:function(a){a.el.setStyle("z-index","100002")},prepareNaturalNumber:function(a,d,c){if(typeof d=="string"){a.setValue(c);d=c;a.setValue(d)}else{if(typeof d=="number"&&d<=0){d=c;a.setValue(d)}}return d},prepareNaturalNumberWith0:function(a,d,c){if(typeof d=="string"){a.setValue(c);d=c;a.setValue(d)}else{if(typeof d=="number"&&d<0){d=c;a.setValue(d)}}return d},prepareNaturalNumberInRange:function(c,h,d,e,a){if(typeof h=="string"){c.setValue(d);h=d;c.setValue(h)}else{if(typeof h=="number"&&h<e){h=e;c.setValue(h)}else{if(typeof h=="number"&&h>a){h=a;c.setValue(h)}}}return h},validate61850Param:function(c){var a=256;if(c.length>a){return"Максимальный размер поля - "+a+" символов"}else{if(c===""){return"Это обязательное поле"}else{if(/^[a-zA-Z0-9_]*\/[a-zA-Z0-9_]*\.[A-Z]*\.[a-zA-Z0-9_]*[\.]*[a-zA-Z]*[a-zA-Z0-9_.]*$/.test(c)){return true}}}return"Путь параметра задан некорректно"},getNameLengthHelper:function(){if(this.nameLengthHelper===null){this.nameLengthHelper=Ext.create("Wasutp.Configurations.NameLengthHelper")}return this.nameLengthHelper},validateTextAriaStrings:function(m){var l=Ext.create("Wasutp.Configurations.Form.AbstractForm"),c=l.getNameLengthHelper().maxFieldLength,j=l.getNameLengthHelper().maxStringLengthText,d=m.split("\n");if(d.length){for(var h in d){var e=d[h];if(e.length>c){return new Ext.XTemplate(j).apply([c])}}for(var h in d){var e=d[h],a=l.validateString(e);if(a!==true){return a}}}return true}});Ext.define("Wasutp.Configurations.Form.Create.CreateForm",{extend:"Wasutp.Configurations.Form.AbstractForm",params:{},constructor:function(a){this.params=a},formPanel:null,getPanel:function(){var c=this,a=c.getItems();if(a.length===0){return null}c.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",labelWidth:90,anchor:"100%"},items:a,buttons:["->",{id:"wasutp-configuration-ok-btn",text:"Создать",margin:"5 5 5 5",handler:function(){this.up("window").save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});return c.formPanel}});Ext.define("Wasutp.Date.Date",{statics:{serverTimezone:null,serverTimezoneOffset:null,getServerTimezone:function(){if(Wasutp.Date.Date.serverTimezone===null){Wasutp.Date.Date.serverTimezone=appHelper.serverDateConfig.serverTimeZone}return Wasutp.Date.Date.serverTimezone},getServerTimezoneOffset:function(){if(Wasutp.Date.Date.serverTimezoneOffset===null){Wasutp.Date.Date.serverTimezoneOffset=appHelper.serverDateConfig.serverTimezoneOffset}return Wasutp.Date.Date.serverTimezoneOffset},calcServerDate:function(e){var d=this,c=new Date(e),h=c.getTimezoneOffset()*60*1000,a=Wasutp.Date.Date.getServerTimezoneOffset()*60*60*1000;c.setTime(c.getTime()+h+a);return c},calcFormattedServerDate:function(d,h){var c=this,a=Wasutp.Date.Date.calcServerDate(d),e=h||"Y.m.d H:i:s";return Ext.Date.format(a,e)}}});Ext.define("Wasutp.tabsession.TabSessionManager",{tabSessionId:1,tabSession:null,tabSessions:null,localStorageKey:"ismsTabSessions",getTabSessions:function(){var c=this;var a=localStorage.getItem(c.localStorageKey);c.tabSessions=c.unserialize(a);return c.tabSessions},getSession:function(){var a=this;if(a.tabSession===null){a.tabSession=Ext.create("Wasutp.tabsession.TabSession",{tabId:a.tabSessionId})}return a.tabSession},init:function(){if(!this.isLocalStorageAvailable()){console.log("Браузер не поддерживает LocalStorage");return false}var e=this,a=e.getTabSessions();if(!Ext.isEmpty(a)){var d=0;for(var c in a){if(a[c].isExpired()){delete a[c]}else{if(a[c].getTabId()>d){d=a[c].getTabId()}}}if(a.length){e.showWarning()}e.tabSessionId=d+1}a.push(e.getSession());e.saveTabSessions(a);e.addDeleteSessionEvent()},isLocalStorageAvailable:function(){if(window.localStorage){return true}return false},saveTabSessions:function(a){var c=this;localStorage.setItem(c.localStorageKey,c.serialize(a))},showWarning:function(){var c=this,a="";a+="Возможно вы открыли две или более вкладки в одном браузере, ";a+="что может привести к нарушению в работе iSMS. ";a+="Закройте лишние вкладки, либо зайдите в многопользовательском режиме вашего браузера.";errorsHandler.addMessage("Предупреждение",a,0)},serialize:function(c){var d=this,e="";if(c.length){for(var a in c){e+=c[a].toString()}}return e},unserialize:function(m){if(m===null){return[]}var h=this,c=[],l=m.split(";");if(l.length){for(var a in l){var d=l[a].split(":"),j,e;if(d.length===2){e=new Date();e.setTime(d[1]);j=Ext.create("Wasutp.tabsession.TabSession",{tabId:d[0],expiresDate:e});c.push(j)}}}return c},addDeleteSessionEvent:function(){var a=this;window.addEventListener("beforeunload",function(){var c=a.getTabSessions();for(var d in c){if(c[d].getTabId()===a.tabSessionId){delete c[d]}}a.saveTabSessions(c)})},extendTabSession:function(){var d=this,a=d.getTabSessions();for(var c in a){if(a[c].getTabId()===d.tabSessionId){a[c].extendExpiresDate()}}d.saveTabSessions(a)}});Ext.define("Wasutp.tabsession.TabSession",{statics:{MINUTES:5,FIELD_DELIMITER:":",COLUMN_DELIMITER:";"},tabId:null,expiresDate:null,constructor:function(e){var c=this,a=parseInt(e.tabId),d=e.expiresDate||c.getExpiresDate();c.tabId=a;c.extendExpiresDate(d)},getExpiresDate:function(){var d=this,a=new Date(),c=this.self.MINUTES;expiresDate=new Date(a.getTime()+c*60000);return expiresDate},isExpired:function(){var c=this,a=new Date();return a>c.expiresDate},extendExpiresDate:function(a){var c=this,d=a||c.getExpiresDate();c.expiresDate=d},toString:function(){var d=this,a=this.self.FIELD_DELIMITER,c=this.self.COLUMN_DELIMITER,e=d.expiresDate.getTime(),h=d.tabId+a+e+c;return h},getTabId:function(){return this.tabId}});Ext.define("Wasutp.ColorCombobox",{extend:"Ext.form.field.Picker",statics:{checkColorFormat:function(a){if(typeof a!=="string"||a.length<6){return false}a=a.toUpperCase();var c,d;for(c=0;c<6;c++){d=a.charCodeAt(c);if(d<"0".charCodeAt(0)||d>"F".charCodeAt(0)){return false}}return true}},constructor:function(a){var d=this;var c;a=Ext.Object.merge(a,this._getDefaultCfg());if(!a.listeners){a.listeners={}}a.listeners.change=function(j,h,e){d._onChange(h)};a.listeners.afterrender=function(){setTimeout(function(){d._onChange(d.getValue())},50)};c=this.callParent([a]);if(a&&a.colors){this.setColors(Ext.clone(a.colors))}return c},_onChange:function(c){var a=this.id+"-color";var d=document.querySelector("#"+a);if(d){d.style.backgroundColor=c}},_getDefaultCfg:function(){return{}},colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],_checkColorFormat:function(a){return this.self.checkColorFormat(a)},setColors:function(a){var e,c,d=false;this.colors.length=0;for(e=0;e<a.length;e++){c=a[e];if(this._checkColorFormat(c)){this.colors.push(c);d=true}}if(d&&this._colorPicker){this._colorPicker.colors=this.colors}return d},getColors:function(){return this.colors},createPicker:function(){var c=this;var a=Ext.create("Ext.picker.Color",{renderTo:document.body,minWidth:150,floating:true,hidden:true,focusOnShow:true,style:{"background-color":"#FFFFFF"},listeners:{select:function(e,d){e.colorCombobox.setValue(SLDiagram.toColor(d));e.colorCombobox.collapse()},beforerender:function(d,e){d.colors=c.getColors()}}});a.colors=this.getColors();a.colorCombobox=this;return a},getSubTplMarkup:function(t){var m=this,u=t.childElCls;var c=Ext.create("Ext.form.field.Base");var o=c.getSubTplMarkup.apply(this,arguments);var q="#000000";var p=["display: inline-block;","width: 10px;","height: 10px;","background-color: "+q+";","border: 1px solid #000000;","margin-right: 4px;"].join(" ");var s=m.id+"-color";var a='<div style="'+p+'" id="'+s+'"></div>';var n=["text-align: right;"].join(" ");var d='<div style="'+n+'">'+a+"</div>";var e=["border-top: 1px solid rgba(0, 0, 0, 0);","width: 20px;"].join(" ");var l=["padding-left: 3px;"].join(" ");var h=["margin-top: 2px;"].join(" ");var j=['<table id="',m.id,'-triggerWrap" class="',Ext.baseCSSPrefix,"form-trigger-wrap",u,'" cellpadding="0" cellspacing="0" role="presentation" style="'+h+'">','<tbody role="presentation">','<tr role="presentation">','<td style="'+e+'">'+d+"</td>",'<td style="'+l+'" id="',m.id,'-inputCell" role="presentation">',o,"</td>",m.getTriggerMarkup(),"</tr>","</tbody>","</table>"].join("");return j}});Ext.define("Wasutp.Panels.components.Dial",{extend:"Wasutp.Panels.components.Component",alias:"widget.panel-dial",dashMargin:5,arrowMargin:5,arrowColor:"red",dashColor:"black",circleColor:"black",circleBgColor:"white",minValue:0,maxValue:360,arrowId:null,defaultSize:100,getValueOfDivision:function(){var a=this,c;c=(a.maxValue-a.minValue)/360;return c},getDegreesByValue:function(c){var a=this,d,e=a.getValueOfDivision();c=c?parseFloat(c):0;d=Math.floor(c/e-a.minValue/e);return d},getDashWidth:function(){var c=this,a=c.width<=100?3:5;return a},getStrokeWidth:function(){var c=this,a=c.width<=100?1:2;return a},getDashStyle:function(){return"stroke:"+this.dashColor+"; stroke-linecap:round; stroke-width:1px;"},getCircleStyle:function(){return"stroke:"+this.circleColor+"; stroke-width:"+this.getStrokeWidth()+"px; fill:"+this.circleBgColor+";"},getArrowStyle:function(){return"stroke:"+this.arrowColor+"; stroke-linecap:round; stroke-width:"+this.getStrokeWidth()+"px;"},dialTpl:'<div class="wasutp-panel-dial"><svg width="{width}" height="{height}"><circle style="{circleStyle}" class="wasutp-panel-dial-face" cx="{cx}" cy="{cy}" r="{r}" /><line id="{arrowId}" style="{arrowStyle}" class="wasutp-panel-dial-m-hand" x1="{arrowX1}" y1="{arrowY1}" x2="{arrowX2}" y2="{arrowY2}" /><line style="{dashStyle}" x1="{d1X1}" y1="{d1Y1}" x2="{d1X2}" y2="{d1Y2}" /><line style="{dashStyle}" x1="{d2X1}" y1="{d2Y1}" x2="{d2X2}" y2="{d2Y2}" /><line style="{dashStyle}" x1="{d3X1}" y1="{d3Y1}" x2="{d3X2}" y2="{d3Y2}" /><line style="{dashStyle}" x1="{d4X1}" y1="{d4Y1}" x2="{d4X2}" y2="{d4Y2}" /></svg></div>',onRender:function(){this.callParent(arguments)},updateDial:function(c){var a=this,d;d=a.getDegreesByValue(c);a.setHandAttr(d+180)},setHandAttr:function(l){var j=this,a=Math.floor(j.width/2),e=Math.floor(j.height/2),c="rotate("+l+", "+a+", "+e+")",d=document.getElementById(j.getArrowId());if(d){d.setAttribute("transform",c)}},updateData:function(d,c,e){var a=this;a.enable();a.updateDial.call(a,d);a.handleStatuses(c)},handleStatuses:function(c){var a=this;a.setStatuses(c)},initComponent:function(){var a=this;this.width=this.width||this.defaultSize;this.height=this.height||this.defaultSize;if(this.width>this.height){this.height=this.width}else{this.width=this.height}a.html=a.getHtml();a.disabled=true},getArrowId:function(){if(this.arrowId===null){this.arrowId=Ext.id()}return this.arrowId},getHtml:function(){var a=this;return new Ext.XTemplate(a.dialTpl).apply({arrowId:a.getArrowId(),width:a.width,height:a.height,cx:a.getCircleAttr("x"),cy:a.getCircleAttr("y"),r:a.getCircleAttr("r"),arrowX1:a.getArrowAttr("x1"),arrowY1:a.getArrowAttr("y1"),arrowX2:a.getArrowAttr("x2"),arrowY2:a.getArrowAttr("y2"),d1X1:a.getDashAttr(0,"x1"),d1Y1:a.getDashAttr(0,"y1"),d1X2:a.getDashAttr(0,"x2"),d1Y2:a.getDashAttr(0,"y2"),d2X1:a.getDashAttr(90,"x1"),d2Y1:a.getDashAttr(90,"y1"),d2X2:a.getDashAttr(90,"x2"),d2Y2:a.getDashAttr(90,"y2"),d3X1:a.getDashAttr(180,"x1"),d3Y1:a.getDashAttr(180,"y1"),d3X2:a.getDashAttr(180,"x2"),d3Y2:a.getDashAttr(180,"y2"),d4X1:a.getDashAttr(270,"x1"),d4Y1:a.getDashAttr(270,"y1"),d4X2:a.getDashAttr(270,"x2"),d4Y2:a.getDashAttr(270,"y2"),arrowStyle:a.getArrowStyle(),circleStyle:a.getCircleStyle(),dashStyle:a.getDashStyle()})},getCircleAttr:function(a){var c=null;switch(a){case"x":c=this.width/2;break;case"y":c=this.height/2;break;case"r":c=this.height/2-this.dashMargin}return Math.floor(c)},getArrowAttr:function(a){var d=null;switch(a){case"x1":d=this.width/2;break;case"y1":d=this.height/2;break;case"x2":d=this.width/2;break;case"y2":var c=this.height/2;d=this.height-c*0.28}return Math.floor(d)},getDashAttr:function(o,e){var l=this,c=l.width,j=l.height,a=l.dashMargin,d=l.getDashWidth(),n=null;switch(o){case 0:switch(e){case"x1":n=c/2;break;case"y1":n=a;break;case"x2":n=c/2;break;case"y2":n=a+d;break}break;case 90:switch(e){case"x1":n=c-a;break;case"y1":n=j/2;break;case"x2":n=c-a-d;break;case"y2":n=j/2;break}break;case 180:switch(e){case"x1":n=c/2;break;case"y1":n=j-a-d;break;case"x2":n=c/2;break;case"y2":n=j-a;break}break;case 270:switch(e){case"x1":n=a;break;case"y1":n=j/2;break;case"x2":n=a+d;break;case"y2":n=j/2;break}}return Math.floor(n)}});Ext.define("Wasutp.Params.Param",{statics:{TIGtype:1,TUGtype:3,availableStatuses:{OIC_DST_NOPRESENT:{description:"Нет источника"},OIC_DST_VALUENOCORRECT:{description:"Недостоверно"},OIC_DST_ADERATING:{description:"Аварийные уставки"},OIC_DST_WDERATING:{description:"Предупредительные уставки"},OIC_DST_MANUAL:{description:"Ручной ввод"},OIC_DST_SUBSTITUTION:{description:"Замещение данных"},OIC_DST_SRCMANUAL:{description:"Источник на ручном вводе"},OIC_DST_SLAVESEND:{description:"Нарушен обмен данными"},OIC_DST_UNDEFINED_STATE:{description:"Неисправность"},OIC_DST_NEUTRAL_STATE:{description:"Промежуточное положение"}},getStatusDescByName:function(a){var c=this;if(typeof c.availableStatuses[a]!="undefined"){return c.availableStatuses[a].description}else{return null}},statusFillCls:{OIC_DST_NOPRESENT:"wasutp-oic-dst-nopresent-fill",OIC_DST_VALUENOCORRECT:"wasutp-oic-dst-valuenocorrect-fill",OIC_DST_ADERATING:"wasutp-oic-dst-aderating-fill",OIC_DST_WDERATING:"wasutp-oic-dst-wderating-fill",OIC_DST_MANUAL:"wasutp-oic-dst-manual-fill",OIC_DST_SRCMANUAL:"wasutp-oic-dst-srcmanual-fill",OIC_DST_SUBSTITUTION:"wasutp-oic-dst-substitution-fill",OIC_DST_SLAVESEND:"wasutp-oic-dst-slavesend-fill"},getChartMarkerClsByStatuses:function(e){var d=this,a=[];if(e&&e.length){for(var c in e){if(typeof d.statusFillCls[e[c]]!=="undefined"){a.push(d.statusFillCls[e[c]])}else{console.log(e[c]+" отсутствует в каталоге статусов me.statusFillCls")}}}return a},statusesStyles:{OIC_DST_NOPRESENT:{style:"border-width: 1px; border-color: #00B000;",cls:"wasutp-dcs-data-nopresent",gridCls:"wasutp-dcs-grid-data-nopresent"},OIC_DST_VALUENOCORRECT:{style:"border-width: 1px; border-color: #EDE613;",cls:"wasutp-dcs-data-valuenocorrect",gridCls:"wasutp-dcs-grid-data-valuenocorrect"},OIC_DST_ADERATING:{style:"border-width: 1px; border-color: #FF0000;",cls:"wasutp-dcs-data-aderating",gridCls:"wasutp-dcs-grid-data-aderating"},OIC_DST_WDERATING:{style:"border-width: 1px; border-color: #c43c35;",cls:"wasutp-dcs-data-wderating",gridCls:"wasutp-dcs-grid-data-wderating"},OIC_DST_MANUAL:{style:"border-width: 1px;",cls:"wasutp-dcs-data-manual",gridCls:"wasutp-dcs-grid-data-manual"},OIC_DST_SRCMANUAL:{style:"border-width: 1px;",cls:"wasutp-dcs-data-srcmanual",gridCls:"wasutp-dcs-grid-data-srcmanual"},OIC_DST_SUBSTITUTION:{style:"border-width: 1px;",cls:"wasutp-dcs-data-substitution",gridCls:"wasutp-dcs-grid-data-substitution"},OIC_DST_SLAVESEND:{style:"border-width: 1px;",cls:"wasutp-dcs-data-slavesend",gridCls:"wasutp-dcs-grid-data-slavesend"}},statusesColors:{OIC_DST_NOPRESENT:"#00B000",OIC_DST_VALUENOCORRECT:"#EDE613",OIC_DST_ADERATING:"#FF0000",OIC_DST_WDERATING:"#c43c35",OIC_DST_MANUAL:"#0078FF",OIC_DST_SRCMANUAL:"#FF8C00",OIC_DST_SUBSTITUTION:"#FF8C00",OIC_DST_SLAVESEND:"#FF0000"},squareAttribs:{OIC_DST_MANUAL:{},OIC_DST_SLAVESEND:{},OIC_DST_SRCMANUAL:{},OIC_DST_SUBSTITUTION:{}},getStatusColor:function(a){var c;if(c=Wasutp.Params.Param.statusesColors[a]){return c}return null},getStatusStyle:function(a){var c;if(c=Wasutp.Params.Param.statusesStyles[a]){return c.style}return null},getStatusCls:function(a){var c;if(c=Wasutp.Params.Param.statusesStyles[a]){return c.cls}return null},getDataByIds:function(d,l,a,j){var e=this,c=j?j:e,h=d?d:[],a=a?a:{};Wasutp.Ajax.request({url:"/json/params/get-param-data-by-id",params:{params:JSON.stringify(h)},success:function(m){l.call(c,a,m)}})},gisDisplayClasses:{OIC_DST_NOPRESENT:{cls:"wasutp-gis-display-nopresent"},OIC_DST_VALUENOCORRECT:{cls:"wasutp-gis-display-valuenocorrect"},OIC_DST_ADERATING:{cls:"wasutp-gis-display-aderating"},OIC_DST_WDERATING:{cls:"wasutp-gis-display-wderating"},OIC_DST_MANUAL:{},OIC_DST_SRCMANUAL:{},OIC_DST_SUBSTITUTION:{}}}});Ext.define("Wasutp.Panels.components.Switcher",{extend:"Wasutp.Panels.components.Component",require:["Wasutp.Params.Param"],alias:"widget.panel-switcher",buttonId:null,htmlTpl:'<div style="{divStyle}" id="{buttonId}"><button style="{btnStyle}"></button></div>',divStyle:"background-color: {color};margin: 0;border-radius: {divBorderRadius};height: 100%;width: 100%;position: relative;display: inline-block;user-select: none;-webkit-user-select: none;-ms-user-select: none;-moz-user-select: none;",btnStyle:"outline: 0;display:block;position: absolute;left: {btnLeft};top: {btnTop};border-radius: {btnBorderRadius};width: {btnWidth};height: {btnHeight};background-color: white;float: left;margin: -2px 0 0 -2px;padding: 0;border: 2px solid #D0D0D0;",initParams:{},orientation:null,orients:{r:"right",l:"left",t:"top",b:"bottom"},defaultWidth:50,defaultHeight:50,defaultStripeHeight:24,defaultColor:"#978e7b",borderStyles:{r:"round",s:"square"},getDivBorderRadius:function(){var a=this;if(a.borderStyle===a.borderStyles.s){return 0}return"20px"},getBtnBorderRadius:function(){var a=this;if(a.borderStyle===a.borderStyles.s){return 0}return"100%"},getLeftOffset:function(){return this.width-(this.getBtnSize()-2)},getTopOffset:function(){return this.height-(this.getBtnSize()-2)},getInputId:function(){if(this.inputId===null){this.inputId=Ext.id()}return this.inputId},getDivStyle:function(){var c=this,a=c.initParams.color||c.defaultColor;return new Ext.XTemplate(c.divStyle).apply({color:a,divBorderRadius:c.getDivBorderRadius()})},getBtnStyle:function(){var d=this,c="",h="",e="",a=d.getBtnSize()+"px";switch(d.orientation){case d.orients.l:h=2+"px";e=2+"px";break;case d.orients.r:h=d.getLeftOffset()+"px";e=2+"px";break;case d.orients.t:h=2+"px";e=2+"px";break;case d.orients.b:h=2+"px";e=d.getTopOffset()+"px";break;default:break}c=new Ext.XTemplate(d.btnStyle).apply({btnLeft:h,btnTop:e,btnWidth:a,btnHeight:a,btnBorderRadius:d.getBtnBorderRadius()});return c},getBtnSize:function(){var d=this,c=d.width<d.height?d.width:d.height,a=c;return a},constructor:function(a){this.initParams=a||{};this.callParent(arguments)},initComponent:function(){var a=this;if(!a.orientation){a.orientation=a.orients.l}if(a.orientation===a.orients.t||a.orientation===a.orients.b){if(!a.width){a.width=a.defaultStripeHeight}if(!a.height){a.height=a.defaultWidth}}else{if(!a.width){a.width=a.defaultWidth}if(!a.height){a.height=a.defaultStripeHeight}}a.html=a.getHtml();a.disabled=true;a.style={boxSizing:"content-box"}},getHtml:function(){var a=this;return new Ext.XTemplate(a.htmlTpl).apply({buttonId:a.getButtonId(),divStyle:a.getDivStyle(),btnStyle:a.getBtnStyle()})},updateData:function(d,c,e){var a=this;a.enable();d=Math.floor(d%2);d=parseInt(d);a.switchBtn(d);a.handleStatuses(c)},handleStatuses:function(c){var a=this;a.setStatuses(c)},getButtonId:function(){if(this.buttonId===null){this.buttonId=Ext.id()}return this.buttonId},getButtonEl:function(){var d=this,a="#"+d.getButtonId()+" button",c=Ext.query(a);if(c.length){return c[0]}return null},switchBtn:function(c){var a=this;switch(a.orientation){case a.orients.l:c?a.shiftToRight():a.shiftToLeft();break;case a.orients.r:c?a.shiftToLeft():a.shiftToRight();break;case a.orients.t:c?a.shiftToBottom():a.shiftToTop();break;case a.orients.b:c?a.shiftToTop():a.shiftToBottom();break;default:break}},shiftToRight:function(){var c=this,a;if(a=c.getButtonEl()){a.style.left=c.getLeftOffset()+"px"}},shiftToLeft:function(){var c=this,a;if(a=c.getButtonEl()){a.style.left="2px"}},shiftToBottom:function(){var c=this,a;if(a=c.getButtonEl()){a.style.top=c.getTopOffset()+"px"}},shiftToTop:function(){var c=this,a;if(a=c.getButtonEl()){a.style.top="2px"}}});Ext.define("Wasutp.Panels.DataHandler",{squares:[],requires:["Wasutp.Params.Param"],availableStatuses:[],getAvailableStatuses:function(){var d=this;if(!d.availableStatuses.length){for(var a in Wasutp.Params.Param.statusesStyles){var c=Wasutp.Params.Param.statusesStyles[a];d.availableStatuses.push(c.cls)}d.availableStatuses.push("x-item-disabled")}return d.availableStatuses},removeActiveClasses:function(d){var e=this,a=e.getAvailableStatuses();for(var c in a){if(d.classList.contains(a[c])){d.classList.remove(a[c])}}},setStatuses:function(h,j){var e=this,d;d=Ext.get(j);e.removeActiveClasses(d.dom);if(e.squares.length){for(var c in e.squares){e.squares[c].remove()}}e.squares=[];if(h&&h.length){for(var a in h){e.setStatus(h[a],d)}}},setStatus:function(a,c){var d=this,e=Wasutp.Params.Param.getStatusCls(a);if(e){c.addCls(e)}}});Ext.define("Wasutp.goto.Goto",{getConfigurationModule:function(){if(wasutpApp.modules.length){for(var a in wasutpApp.modules){if(Ext.getClass(wasutpApp.modules[a]).getName()==="Wasutp.Configurations.Configuration"){return wasutpApp.modules[a]}}}return null}});Ext.define("Wasutp.goto.GotoDcs",{extend:"Wasutp.goto.Goto",path:"",configurationManager:null,animate:function(c){var a=this,d=c&&c.id?c.id:null;if(!d){console.error("Не указан id параметра");return false}Wasutp.Ajax.request({url:"/json/configuration/get-path-to-dcs-param",params:{id:d},success:function(e){a._animate(e.data.path)}})},_animate:function(d){var c=this;c.path=d;c.configurationManager=c.getConfigurationModule();var a=Ext.getCmp(Wasutp.Configurations.Dcs.dcsGridId);if(!a){c.configurationManager.initDCS({},{dcsWindowCallback:function(){c.expandTree()}})}else{a.up("window").show();c.expandTree()}},expandTree:function(){var e=this,a=e.configurationManager.dcs,c=a.tree,h="/root/dcs_ibm_"+e.path.ibm_id+"/dcs_interface_"+e.path.interface_id+"/dcs_port_"+e.path.port_id+"/dcs_device_"+e.path.device_id+"/dcs_param_"+e.path.device_id,d=Ext.create("Wasutp.goto.GotoGrid");c.expandPath(h,null,null,function(l,j){if(!l){setTimeout(function(){e.expandTree()},300);return}c.getSelectionModel().deselectAll();c.getSelectionModel().select(j);a.dcsGridCallback=function(){var m=a.grid.getStore().findRecord("ID",e.path.param_id,null,null,null,true);if(m){setTimeout(function(){d.setGrid(a.grid);d.jumpToRow(m)},300)}}})},getMenuAction:function(d){var a=this,c,e=d&&d.id||false;if(!e){console.error("Не указан id параметра");return false}c=Ext.create("Ext.Action",{iconCls:"wasutp-goto-param",text:"Перейти к параметру",handler:function(){a.animate({id:e})}});return c}});Ext.define("Wasutp.goto.GotoSource",{extend:"Wasutp.goto.GotoDcs",getMenuAction:function(d){var a=this,c,e=d&&d.id||false;if(!e){console.error("Не указан id параметра");return false}c=Ext.create("Ext.Action",{iconCls:"wasutp-goto-param",text:"Перейти к источнику",handler:function(){a.animate({id:e})}});return c}});Ext.define("Wasutp.goto.GotoProfile",{extend:"Wasutp.goto.Goto",path:"",configurationManager:null,id:null,dddId:null,animate:function(c){var a=this;a.id=c&&c.id?c.id:null;if(!a.id){console.error("Не указан id параметра");return false}Wasutp.Ajax.request({url:"/json/configuration/get-path-to-profile-param",params:{id:a.id},success:function(d){a._animate(d.data)}})},_animate:function(d){var c=this;c.dddId=d.paramId;if(!c.dddId){console.error("Не указан ddd.id параметра");return false}c.path=d.path;c.configurationManager=c.getConfigurationModule();var a=Ext.getCmp(Wasutp.Configurations.Profiles.profileGridId);if(!a){c.configurationManager.initProfiles({},{profileWindowCallback:function(){c.expandTree()}})}else{a.up("window").show();c.expandTree()}},expandTree:function(){var e=this,d=e.configurationManager.profiles,a=d.tree,h="/root/"+e.path.join("/"),c=Ext.create("Wasutp.goto.GotoGrid");a.expandPath(h,null,null,function(m,l){if(l.childNodes[0]){var j=a.getSelectionModel();j.deselectAll();j.select(l.childNodes[0]);d.profileGridCallback=function(){var n=d.grid.getStore().findRecord("ID",e.dddId,null,null,null,true);if(n){setTimeout(function(){c.setGrid(d.grid);c.jumpToRow(n)},300)}}}})},getMenuAction:function(d){var a=this,c,e=d&&d.id||false;if(!e){console.error("Не указан id параметра");return false}c=Ext.create("Ext.Action",{iconCls:"wasutp-goto-profile",text:"Перейти к профилю",handler:function(){a.animate({id:e})}});return c}});Ext.define("Wasutp.Administration.SqlConsole",{windowId:"wasutp-server-sql-console-panel",contentContainerId:"",contentContainer:"",window:null,screenPanel:null,textAreaPanel:null,headerDlm:"=========================================================================================================================",stringDlm:"\n",columnDlm:"\t",cmds:[],arrowsIndex:0,query:"",response:{},isWaiting:false,constructor:function(){var a=this;a.contentContainerId=a.windowId+"-content";a.contentContainer='<pre><div id="'+a.contentContainerId+'"></div></pre>'},open:function(){var a=this,c=a.getWindow();c.show()},getWindow:function(){var a=this,c=wasutpApp.getDesktop();a.window=c.getWindow(a.windowId);if(!a.window){a.window=c.createWindow({id:a.windowId,iconCls:"wasutp-server-sql-console",title:"SQL Консоль",height:600,width:900,layout:"border",defaults:{split:true,bodyStyle:"padding:5px; color: #fff; background: #000;"},items:[a.getScreenPanel(),a.getTextAreaPanel()],bbar:[{xtype:"button",text:"Ok",margin:"5 5 5 5",handler:function(d,h){a.sendRequest();a.getTextAreaPanel().focus(true,500)}},{xtype:"button",text:"Очистить",margin:"5 5 5 5",handler:function(d,h){a.clearScreen();a.getTextAreaPanel().focus(true,500)},listeners:{afterrender:function(d){Ext.EventManager.addListener(d.el,"keydown",function(l){var j=l.getKey();var h=l.shiftKey;if(!h&&j==l.TAB){l.stopEvent();a.getTextAreaPanel().focus(true,100)}})}}},a.getPaginationFieldset()],listeners:{show:function(){a.getTextAreaPanel().focus(true,500)}}})}return a.window},paginationFieldset:null,getPaginationFieldset:function(){var a=this;if(a.paginationFieldset===null){a.paginationFieldset=Ext.create("Ext.form.FieldSet",{width:350,layout:"column",padding:0,disabled:true,items:[{xtype:"button",text:"<<",margin:"5 5 5 5",handler:function(c,d){if(a.response){if(!a.response.page){a.response.page=1}a.response.page=parseInt(a.response.page)-1;a.sendRequest({query:a.query,page:a.response.page});a.getTextAreaPanel().focus(true,500)}}},{xtype:"button",text:">>",margin:"5 5 5 5",handler:function(c,d){if(a.response){if(!a.response.page){a.response.page=1}a.response.page=parseInt(a.response.page)+1;a.sendRequest({query:a.query,page:a.response.page});a.getTextAreaPanel().focus(true,500)}}},{xtype:"numberfield",text:"Очистить",fieldLabel:"Страница",margin:"5 5 5 5",labelWidth:50,width:150,minValue:1,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){a.sendRequest({query:a.query,page:d.getValue()})}}}}]})}return a.paginationFieldset},clearScreen:function(){var c=this,a=c.getScreenPanel();if(a){a.update(c.contentContainer)}},getScreenPanel:function(){var a=this;if(a.screenPanel===null){a.screenPanel=Ext.create("Ext.panel.Panel",{region:"center",height:350,name:"screen",html:a.contentContainer,autoScroll:true})}return a.screenPanel},screenMask:null,getScreenMask:function(){var a=this;if(a.screenMask===null){a.screenMask=new Ext.LoadMask({target:a.getWindow(),msg:"Подождите...",listeners:{hide:function(){a.isWaiting=false},show:function(){a.isWaiting=true}}})}return a.screenMask},getTextAreaPanel:function(){var a=this;if(a.textAreaPanel===null){a.textAreaPanel=Ext.create("Ext.form.field.TextArea",{region:"south",height:150,name:"message",fieldStyle:"background: #000 none repeat scroll 0 0 !important; color: #fff",listeners:{afterrender:function(c){Ext.defer(function(){c.focus(true)},1);Ext.create("Ext.util.KeyMap",c.getEl(),{key:Ext.EventObject.ENTER,shift:false,ctrl:false,handler:function(d,h){h.stopEvent();a.sendRequest()}});Ext.create("Ext.util.KeyMap",c.getEl(),{key:Ext.EventObject.ENTER,shift:false,ctrl:true,handler:function(d,h){a.getTextAreaPanel().setValue(a.getTextAreaPanel().getValue()+"\n")}});Ext.create("Ext.util.KeyMap",c.getEl(),{key:Ext.EventObject.L,shift:false,ctrl:true,handler:function(d,h){h.stopEvent();a.clearScreen()}});Ext.EventManager.on(c.getEl(),"keydown",function(h,d){if(h.getKey()==h.BACKSPACE){h.stopPropagation()}if(h.getKey()===38){h.stopEvent();a.arrowsHandler("up")}else{if(h.getKey()===40){h.stopEvent();a.arrowsHandler("down")}}})}}})}return a.textAreaPanel},sendRequest:function(l){var d=this,l=typeof(l)==="object"?l:{},j=d.getTextAreaPanel(),h=l.query?l.query:j.getValue(),e=l.page?l.page:1,a=d.getScreenMask();if(!h){return false}if(d.isWaiting){return false}d.query=h;var c=d.getContainerDom();if(c){c.innerHTML+="> "+h+d.stringDlm;c.scrollTop=c.scrollHeight+100}a.show();Wasutp.Ajax.request({url:"/json/administration/exec-sql-query",params:{query:JSON.stringify(d.query),page:e},success:function(o){d.getScreenMask().hide();if(o.data){d.response=o.data;j.setValue("");d.cmds.push(h);d.arrowsIndex=d.cmds.length;d.printResults();var p=Ext.get(d.contentContainerId);var n=p.getHeight();var m=d.getScreenPanel();m.body.scroll("b",n,true)}else{d.response={}}},failure:function(){d.getScreenMask().hide()},unsuccess:function(){d.getScreenMask().hide()}})},printResults:function(){var m=this,h="",a=m.response.fetch,j=m.response.succeed,o=m.response.message,l=m.response.preResMsg,d=m.response.resultMsg;if(!j){h+=o;h+=m.stringDlm;h+=m.stringDlm;m.getPaginationFieldset().disable();m.response.partitionMode=false;m.getPaginationFieldset().down("numberfield").setValue("")}else{if(a.length){h+=m.fetchToString(a);h+=m.stringDlm}if(l!==""){h+=l;h+=m.stringDlm}if(m.response.partitionMode&&a.length){var n=m.response.limit*m.response.page-m.response.limit+1,e=n+a.length;m.getPaginationFieldset().down("numberfield").setValue(m.response.page);m.getPaginationFieldset().enable()}else{m.getPaginationFieldset().down("numberfield").setValue("");m.getPaginationFieldset().disable();m.response.partitionMode=false}if(d!==""){h+=d;h+=m.stringDlm}h+=m.stringDlm}var c=m.getContainerDom();if(c){c.innerHTML+=h;c.scrollTop=c.scrollHeight}},fetchToString:function(e){var h=this,l="",c=false;for(var d in e){if(!Ext.isEmpty(e[d])){if(!c){for(var a in e[d]){l+=a+h.columnDlm}l+=h.stringDlm;l+=h.headerDlm;l+=h.stringDlm;c=true}for(var a in e[d]){l+=e[d][a]+h.columnDlm}}l+=h.stringDlm}return l},getContainerDom:function(){var c=this,a=document.getElementById(c.contentContainerId);return a},arrowsHandler:function(c){var a=this,d=a.getTextAreaPanel();if(c==="up"){if(a.cmds[a.arrowsIndex-1]){a.arrowsIndex--}}else{if(c==="down"){if(a.cmds[a.arrowsIndex+1]){a.arrowsIndex++}}}if(a.cmds[a.arrowsIndex]){d.setValue(a.cmds[a.arrowsIndex])}},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)}});Ext.define("Wasutp.Administration.auth.ChangePassForm",{extend:"Wasutp.Administration.auth.Form",okButtomId:null,passMinLength:6,passMaxLength:16,getForm:function(){var d=this,c=365,e="10 5 5 5",j,a,h=appHelper.userRole!=="supervisor";d.okButtomId=Ext.id();j=Ext.create("Ext.data.Store",{fields:["ID","NAME"],proxy:{type:"ajax",url:"/json/acl/get-users",reader:{type:"json",root:"data"}},autoLoad:{scope:this,callback:function(l){if(l.length){for(var m in l){if(parseInt(l[m].data.ID)===appHelper.userId){a.setValue(j.getAt(m).get("ID"));break}}}}}});a=Ext.create("Ext.form.ComboBox",{xtype:"combobox",name:"userId",id:"userId",margin:"20 5 5 5",width:c,fieldLabel:"Пользователь",store:j,queryMode:"local",displayField:"NAME",valueField:"ID",readOnly:h});d.form=Ext.create("Ext.form.Panel",{width:400,bodyPadding:10,items:[{xtype:"label",text:"Для смены пароля необходимо заполнить следующие поля."},a,{xtype:"textfield",name:"password",id:"password",margin:"10 5 5 5",fieldLabel:"Пароль текущего пользователя",inputType:"password",minLength:d.passMinLength,maxLength:d.passMaxLength,allowBlank:false,width:c,listeners:{specialkey:function(m,l){if(l.getKey()==l.ENTER){d.submitForm()}},afterrender:function(l){Ext.defer(function(){l.focus(true)},1)}}},{xtype:"textfield",name:"newPass",id:"newPass",margin:e,fieldLabel:"Новый пароль",inputType:"password",width:c,minLength:d.passMinLength,maxLength:d.passMaxLength,allowBlank:false,listeners:{specialkey:function(m,l){if(l.getKey()==l.ENTER){d.submitForm()}}}},{xtype:"textfield",name:"confirmPass",id:"confirmPass",margin:e,fieldLabel:"Подтверждение",inputType:"password",width:c,minLength:d.passMinLength,maxLength:d.passMaxLength,allowBlank:false,listeners:{specialkey:function(m,l){if(l.getKey()==l.ENTER){d.submitForm()}}}},{xtype:"button",formBind:true,disabled:true,id:d.okButtomId,text:d.okButton,width:180,margin:"5 0 5 5",handler:function(){d.submitForm()}},{xtype:"button",text:"Отмена",width:180,margin:"5 0 5 5",handler:function(){d.form.up("window").close()}}]});return d.form},submitForm:function(){var d=this,c=d.form.getForm(),a=Ext.getCmp(d.okButtomId);if(a&&a.disabled===true){return false}Wasutp.Ajax.request({url:d.url,params:c.getValues(),success:function(e){d.form.up("window").close();if(e.data.result===true){errorsHandler.addMessage("Выполнение команды",'Команда "'+d.title+'" выполнена',Wasutp.ErrorsHandler.message,null,true)}}})}});Ext.define("Wasutp.Administration.auth.CheckPassForm",{extend:"Wasutp.Administration.auth.Form",getForm:function(){var d=this,e=appHelper.config.userName?'пользователем "'+appHelper.config.userName+'" ':"",a=[],c,h,l,j;c=Ext.create("Ext.form.Label",{xtype:"label",text:"Подтвердите действие, введя пароль, использованный "+e+"при входе в систему."});a.push(c);h=Ext.create("Ext.form.field.Text",{xtype:"textfield",name:"password",id:"password",margin:"20 5 5 5",fieldLabel:"Пароль",inputType:"password",width:365,listeners:{specialkey:function(n,m){if(m.getKey()==m.ENTER&&n.getValue()!==""){d.submitForm()}},afterrender:function(m){Ext.defer(function(){m.focus(true)},1)},change:function(m){if(m.getValue()!==""){l.enable()}else{l.disable()}}}});a.push(h);l=Ext.create("Ext.button.Button",{text:d.okButton,width:180,margin:"5 0 5 5",disabled:true,handler:function(){d.submitForm()}});a.push(l);j=Ext.create("Ext.button.Button",{text:"Отмена",width:180,margin:"5 0 5 5",handler:function(){d.form.up("window").close()}});a.push(j);d.form=Ext.create("Ext.form.Panel",{width:400,bodyPadding:10,items:a});return d.form},submitForm:function(){var c=this,a=c.form.getForm();Wasutp.Ajax.request({url:c.url,params:a.getValues(),success:function(d){c.form.up("window").close();if(d.data.result!==false){if(c.showMessage){errorsHandler.addMessage(c.title,c.cmdSubmittedText,Wasutp.ErrorsHandler.message,null,true)}c.checkHandler()}else{if(c.showMessage){errorsHandler.addMessage(c.title,"Команда не выполнена",Wasutp.ErrorsHandler.error)}}}})}});Ext.define("Wasutp.Administration.auth.CheckPassManager",{title:"",params:{},init:function(e){var c=this,d,a;c.params=e;a=c.getForm();if(!a){console.log("form == null");return null}d=Ext.create("Wasutp.window.Modal",{id:"win-authenticate",title:c.params.title?c.params.title:"Выполнение команды",items:[a]});d.show()},getForm:function(){var c=this,a;if(c.params.form&&c.params.form==="changeUserPass"){a=Ext.create("Wasutp.Administration.auth.ChangePassForm",c.params);return a.getForm()}else{a=Ext.create("Wasutp.Administration.auth.CheckPassForm",c.params);return a.getForm()}},sendRequest:function(){}});Ext.define("Wasutp.ColorComboboxList",{extend:"Ext.form.field.ComboBox",defaultColors:["#000000","#000080","#0000FF","#008000","#008080","#00FF00","#00FFFF","#800000","#800080","#808000","#808080","#C0C0C0","#FF0000","#FF00FF","#FFFF00","#FFFFFF"],constructor:function(a){if(!a){a={}}if(a.colors){this.setColors(a.colors)}else{if(a.store){this.setColors(a.store)}else{this.setColors(this.defaultColors)}}a.store=this.getStore();if(!a.valueField){a.valueField="label"}if(!a.displayField){a.displayField="label"}a.queryMode="local";a.tpl=Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div style="'+this.colorDivStyleTpl+'"></div>',"<span>{label}</span>","</div>","</tpl>");var c=this.callParent([a]);var d=this;this.on("afterrender",function(){setTimeout(function(){d._onChange(d.getValue())},50)});this.on("change",function(j,h,e){d._onChange(h)});return c},_onChange:function(h){var c=this.id+"-color";var j=document.querySelector("#"+c);var e=this.getStore();var a;var d;if(e){a=e.findRecord("label",h)}else{a=null}if(a){d=a.get("color")}else{d=null}if(typeof d==="string"&&d.length>0&&SLDiagram.isColor(d)){if(j){j.style.backgroundColor=d}}else{if(j){j.style.backgroundColor=null}}},getSubTplMarkup:function(t){var m=this,u=t.childElCls;var c=Ext.create("Ext.form.field.Base");var o=c.getSubTplMarkup.apply(this,arguments);var q="#000000";var p=["display: inline-block;","width: 10px;","height: 10px;","background-color: "+q+";","border: 1px solid #000000;","margin-right: 4px;"].join(" ");var s=m.id+"-color";var a='<div style="'+p+'" id="'+s+'"></div>';var n=["text-align: right;"].join(" ");var d='<div style="'+n+'">'+a+"</div>";var e=["border-top: 1px solid rgba(0, 0, 0, 0);","width: 20px;"].join(" ");var l=["padding-left: 3px;"].join(" ");var h=["margin-top: 2px;"].join(" ");var j=['<table id="',m.id,'-triggerWrap" class="',Ext.baseCSSPrefix,"form-trigger-wrap",u,'" cellpadding="0" cellspacing="0" role="presentation" style="'+h+'">','<tbody role="presentation">','<tr role="presentation">','<td style="'+e+'">'+d+"</td>",'<td style="'+l+'" id="',m.id,'-inputCell" role="presentation">',o,"</td>",m.getTriggerMarkup(),"</tr>","</tbody>","</table>"].join("");return j},setColors:function(a){var d,e;var c=false;if(this.colors&&typeof this.colors.length==="number"){this.colors.length=0}else{this.colors=[]}this.colors=[];for(d=0;d<a.length;d++){e=a[d];if(e&&typeof e.color==="string"){this.colors.push({color:e.color,label:((typeof e.label==="string")?e.label:e.color)});c=true}else{if(typeof e==="string"){this.colors.push({color:e,label:e});c=true}else{if(e&&e.length>=2){this.colors.push({color:e[0],label:e[1]});c=true}}}}return c},getStore:function(){if(!this.store){this.store=Ext.create("Ext.data.Store",{fields:["label","color"],data:this.colors})}return this.store},colorDivStyleTpl:["display: inline-block;","width: 10px;","height: 10px;","background-color: {color};","margin-left: 0px;","margin-right: 12px;","margin-top: 4px;","border: 1px solid #000000;"].join(" "),onDestroy:function(){var a=this;if(a.typeAheadTask){a.typeAheadTask.cancel();a.typeAheadTask=null}Ext.destroy(a.listKeyNav)}});Ext.define("Wasutp.Configurations.archives.Tree",{extend:"Ext.tree.Panel",region:"west",split:true,width:300,height:600,rootVisible:false,maxDeepValue:720,listeners:{itemclick:{fn:function(c,a){var d=Ext.getCmp("archive_system");if(d){d.show()}this.loadGrid(a.data.id)}},itemcontextmenu:{fn:function(c,a,j,d,l,h){if(a.data.leaf===true){this.showLeafMenu.apply(this,arguments)}else{this.showNodeMenu.apply(this,arguments)}}}},constructor:function(){this.callParent(arguments)},initComponent:function(){this.store=Ext.create("Ext.data.TreeStore",{proxy:{type:"ajax",url:"/json/archive/get-tree",actionMethods:{read:"POST"},reader:{type:"json",root:"data"}},root:{text:"root"},listeners:{}});this.callParent(arguments)},showLeafMenu:function(a,d,o,h,j){var m=this,c,l=[],n;n=Ext.create("Ext.Action",{text:"Свойства",iconCls:"wasutp-settings",handler:function(){Wasutp.Ajax.request({url:"/json/archive/get-archive-props",params:{id:d.data.id},success:function(e){if(e.data){var p=m.getProperyWindow(e.data);if(p){p.show()}}}})}});l.push(n);c=Ext.create("Wasutp.menu.Menu",{items:l});j.stopEvent();c.showAt(j.getXY());return false},showNodeMenu:function(a,d,o,h,j){var m=this,c,l=[],n;n=Ext.create("Ext.Action",{text:"Принять изменения",iconCls:"wasutp-reload-dcs",handler:function(){var e=appHelper.getAclManager();if(e.amIAllowed("archives","administration")){var p=appHelper.modules["Wasutp.Server"];p.applyArchiveChanges()}else{e.aclFailureMessage()}}});l.push(n);c=Ext.create("Wasutp.menu.Menu",{items:l});j.stopEvent();c.showAt(j.getXY());return false},getProperyWindow:function(d){var c=this,h,e=d.time,a="",j="Свойства архива";if(d.name){j+=": "+d.name}if(d.interval==="0"){a="по изменению"}else{if(d.interval===null){a="не задано"}else{a=d.interval}}h=Ext.create("Wasutp.window.Modal",{title:j,width:700,minWidth:700,layout:"fit",closable:true,items:[{xtype:"form",border:0,defaults:{margin:10,labelWidth:200,width:660},items:[{xtype:"displayfield",name:"id",fieldLabel:"Идентификатор",value:d.id?d.id:null},{xtype:"textfield",name:"name",fieldLabel:"Наименование",value:d.name?d.name:"",listeners:{specialkey:function(m,l){if(l.getKey()==l.ENTER){c.saveProps.apply(c,arguments)}},afterrender:function(l){Ext.defer(function(){l.focus(true)},1)}}},{xtype:"numberfield",name:"depth",fieldLabel:"Глубина хранения, час",value:d.depth?d.depth:"",minValue:0,maxValue:c.maxDeepValue,listeners:{specialkey:function(m,l){if(l.getKey()==l.ENTER){c.saveProps.apply(c,arguments)}}}},{xtype:"displayfield",name:"interval",fieldLabel:"Период записи, сек",value:a},{xtype:"displayfield",name:"cache_size",fieldLabel:"Объем кэша, записей",value:d.cache_size?d.cache_size:null},{xtype:"displayfield",name:"cache_timeout",fieldLabel:"Тайм-аут кэширования, сек",value:d.cache_timeout?d.cache_timeout:null},{xtype:"displayfield",name:"time",fieldLabel:"Время последнего обновления",value:e}]}],buttons:["->",{text:"OK",margin:"5 5 5 5",handler:function(l){c.saveProps.apply(c,arguments)}},{text:"Отмена",margin:"5 20 5 5",handler:function(l){c.cancelProps.apply(c,arguments)}}]});return h},saveProps:function(a){var j=this,h=a.up("window"),e=h.down("form").getForm(),d=e.findField("name").getValue(),m=e.findField("id").getValue(),l=e.findField("depth").getValue(),c=arguments;Wasutp.Ajax.request({url:"/json/archive/set-archive-props",params:{id:m,name:JSON.stringify(d),depth:l},success:function(n){if(n.success===true){var o=j.getSelectionModel().getSelection();if(o.length){o[0].set("text",d)}j.cancelProps.apply(j,c)}}})},cancelProps:function(a){var d=this,c=a.up("window");if(c){c.close()}},loadGrid:function(c){var a=this;Wasutp.Ajax.request({url:"/json/archive/get-grid",params:{id:c},success:function(d){var h=Ext.getCmp("arvhives-grid"),j=[];h.getStore().removeAll();for(var e in d.data){j.push(Ext.create(h.getStore().model.modelName,d.data[e]))}h.getStore().loadData(j)}})}});Ext.define("Wasutp.Configurations.archives.Archives",{id:"configurations-archives",windowId:"archive_system",treePanelId:"archive-tree-panel",gridId:"arvhives-grid",tree:null,treeStore:null,grid:null,init:function(){return false},getConfig:function(c){var a=this;a.createWindow(c)},createWindow:function(d){var a=this;var e=wasutpApp.getDesktop();var c=e.getWindow(a.windowId);if(!c){c=e.createWindow({id:a.windowId,title:"Архивы",height:600,width:900,layout:"border",iconCls:"wasutp-configuration-archives",items:[a.getTree(),a.getGrid()]})}c.show()},getTree:function(){var a=this;a.tree=Ext.create("Wasutp.Configurations.archives.Tree",{id:a.treePanelId});return a.tree},getGrid:function(c){var a=this;a.grid=Ext.create("Wasutp.Configurations.archives.Grid",{id:a.gridId});return a.grid}});Ext.define("Wasutp.Configurations.archives.Grid",{extend:"Ext.grid.Panel",statics:{category:"archives"},constructor:function(){this.callParent(arguments)},counterId:"configuration-archives-counter-id",region:"center",width:600,height:600,columns:[{text:"ID",dataIndex:"id"},{text:"Имя",dataIndex:"name",width:400}],multiSelect:true,listeners:{headerclick:function headerclick(){appHelper.getColumnsState().save(this,[Wasutp.Configurations.archives.Grid.category,appHelper.userId])},columnschanged:function columnschanged(){appHelper.getColumnsState().save(this,[Wasutp.Configurations.archives.Grid.category,appHelper.userId])},columnresize:function columnresize(){appHelper.getColumnsState().save(this,[Wasutp.Configurations.archives.Grid.category,appHelper.userId])},beforerender:function(){appHelper.getColumnsState().load(this,[Wasutp.Configurations.archives.Grid.category,appHelper.userId])}},viewConfig:{plugins:{ptype:"gridviewdragdrop",enableDrop:true,enableDrag:false,dropGroup:"secondGridDDGroup"},trackOver:false,listeners:{itemcontextmenu:function(a,m,h,c,j){j.stopEvent();var d=this.up("grid"),l=d.getGridItemContextMenu.apply(d,arguments);if(l){l.showAt(j.getXY())}},beforeitemdblclick:function(){var a=this.up("grid");a.showSettings.apply(a,arguments)},beforedrop:function(a,e,m,o,l){var j=this.up("grid"),c=[],n,h=j.getIdGinfo();if(!h){errorsHandler.addMessage("Ошибка","Необходимо выбрать тип архива для создания архивного параметра",0);return false}if(!e.records.length){return false}n=[];for(var d in e.records){n.push(e.records[d].data)}e.records=[];for(var d in n){c.push({checked:true,idGinfo:h,id:n[d].ID})}Wasutp.Ajax.request({url:"/json/archive/change-dcs-param-archives",params:{params:JSON.stringify(c)},success:function(q){if(q.data.addedParams&&q.data.addedParams.length){var p=j.getStore(),t=q.data.addedParams;for(var s in n){if(p.findRecord("id",n[s].ID,null,null,null,true)===null){if(t.indexOf(parseInt(n[s].ID))<0){continue}p.insert(0,Ext.create(p.model.modelName,{id:n[s].ID,name:n[s].NAME,idGinfo:h}))}}}}})}}},updateCounter:function(){var d=this,a=Ext.getCmp(d.counterId),c=0;this.suspendEvents();if(a){c=d.store.getCount();if(c){a.setText(c)}else{a.setText("")}}this.resumeEvents()},initComponent:function(){var a=this;Ext.define("ConfigurationArchivesGridModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"int",sortType:"asInt"},{name:"name",type:"string"},{name:"idGinfo",type:"int"}]});this.store=Ext.create("Ext.data.Store",{model:"ConfigurationArchivesGridModel",data:[],listeners:{datachanged:function(){a.updateCounter()},clear:function(){a.updateCounter()}}});this.bbar=["->",{id:a.counterId,xtype:"label",cls:"x-toolbar-text",forId:"myFieldId",text:"",margin:"5 10 5 10",listeners:{render:{fn:function(d){var c=Ext.create("Wasutp.tip.ToolTip",{target:d.getEl(),html:"Количество объектов"})}}}}];this.callParent(arguments)},getIdGinfo:function(){var e=this,c=Ext.getCmp("archive-tree-panel"),a=c.getSelectionModel(),d=a.getSelection();if(d.length){return d[0].raw.idGinfo}return null},getGridItemContextMenu:function(t,j,d,n,o){var s=this,q=[],u,h,c,a,m=s.getSelectionModel(),v=m.getSelection();c=Ext.create("Ext.Action",{iconCls:"wasutp-arrow-all",text:"Выделить все",handler:function(x,e,w){m.selectAll()}});q.push(c);q.push({xtype:"menuseparator"});u=Ext.create("Ext.Action",{iconCls:"wasutp-delete",text:"Удалить",handler:function(x,e,w){s.deleteRows()}});q.push(u);q.push({xtype:"menuseparator"});if(j&&j.data&&j.data.id){var l=Ext.create("Wasutp.goto.GotoDcs"),p=l.getMenuAction({id:j.data.id});if(p){q.push(p)}}h=Ext.create("Ext.Action",{iconCls:"wasutp-settings",text:"Свойства",handler:function(){s.showSettings.apply(s,arguments)}});q.push(h);a=Ext.create("Wasutp.menu.Menu",{items:q});return a},deleteRows:function(){var e=this,a=e.getSelectionModel(),d=a.getSelection(),h=[];if(d.length){for(var c in d){h.push({id:d[c].data.id,idGinfo:d[c].data.idGinfo})}Wasutp.Ajax.request({url:"/json/archive/remove-params",params:{params:JSON.stringify(h)},success:function(m){var l=e.getStore(),j;for(var n in h){j=l.findRecord("id",h[n].id,null,null,null,true);if(j){l.remove(j)}}}})}},showSettings:function(d,j){var c=this,a=this.getSelectionModel().getSelection(),l,h;if(!a.length){return false}Wasutp.Ajax.request({url:"/json/params/get-param-model",params:{id:a[0].data.id},success:function(e){if(e.data){l="dcs_param_"+a[0].data.id;h=Ext.create("Wasutp.Configurations.ParamUpdate",{});h.init(l,e,"dcs")}}})}});Ext.define("Wasutp.Configurations.serialize.ConfirmWindow",{extend:"Wasutp.Configurations.Form.AbstractForm",converter:{},profileName:{},treeRoot:{},store:null,treePanel:null,profileNameField:null,interfaceField:null,createDeviceField:null,ipField:null,portField:null,formPanel:null,window:null,ips:[],ports:[],showIpPort:false,constructor:function(a){var c=this;if(!(a.converter instanceof Wasutp.Configurations.serialize.ProfileToTreeConverter)){throw new Error("Не передан конвертер профиля!")}c.converter=a.converter;c.profileName=a.profileName||"";c.treeRoot=c.converter.getTreeRoot();c.ips=a.ips||[];c.ports=a.ports||[];c.showIpPort=a.showIpPort||false},getStore:function(){var a=this;if(a.store instanceof Ext.data.TreeStore){return a.store}a.store=Ext.create("Ext.data.TreeStore",{root:a.treeRoot});return a.store},getTreePanel:function(){var a=this;if(a.treePanel instanceof Ext.tree.Panel){return a.treePanel}a.treePanel=Ext.create("Ext.tree.Panel",{store:a.getStore(),rootVisible:false,border:0,listeners:{checkchange:function(e,d,c){e.cascadeBy(function(h){h.set("checked",d);h.data.checked=d;h.raw.checked=d});if(e.parentNode&&d===true){a.setParentsChecked(e.parentNode)}}}});return a.treePanel},setParentsChecked:function(c){var a=this;c.set("checked",true);c.data.checked=true;c.raw.checked=true;if(c.parentNode&&c.parentNode.data.checked===false){a.setParentsChecked(c.parentNode)}},getProfileNameField:function(){var a=this;if(a.profileNameField instanceof Ext.form.field.Text){return a.profileNameField}a.profileNameField=Ext.create("Ext.form.field.Text",{disabled:false,name:"profileName",fieldLabel:"Имя нового профиля",value:a.profileName,listeners:{specialkey:function(d,c){if(c.getKey()==c.ENTER){a.sendRequest(a.getStore().getRootNode())}},afterrender:function(c){Ext.defer(function(){c.focus(true)},1)}}});return a.profileNameField},getCreateDeviceField:function(){var a=this;if(a.createDeviceField===null){a.createDeviceField=Ext.create("Ext.form.field.Checkbox",{checked:false,name:"create-device",fieldLabel:"Создать устройство",listeners:{change:function(c,d){if(d){a.getInterfaceField().enable();a.getIpField().enable();a.getPortField().enable()}else{a.getInterfaceField().disable();a.getIpField().disable();a.getPortField().disable()}}}})}return a.createDeviceField},getInterfaceField:function(){var c=this;if(c.interfaceField===null){var a=Ext.create("Ext.data.Store",{fields:["id","name"],data:[]});c.interfaceField=Ext.create("Ext.form.ComboBox",{disabled:true,editable:false,fieldLabel:"Интерфейс",store:a,queryMode:"local",displayField:"name",valueField:"id",name:"interface",listeners:{afterrender:function(e,d){Wasutp.Ajax.request({url:"/json/profile-import/get-interfaces",params:{protoNodes:JSON.stringify(c.converter.profile.depends.da_proto_desc)},success:function(j){var m=j.data.interfaces,l=j.data.disabled;if(m.length){a.loadData(m);var h=a.getAt(0);if(h){c.interfaceField.select(h)}}if(l||m.length===0){c.getCreateDeviceField().disable()}}})}}})}return c.interfaceField},getFormPanel:function(){var a=this;if(a.formPanel instanceof Ext.form.Panel){return a.formPanel}a.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",anchor:"100%",labelWidth:120},items:[a.getProfileNameField(),a.getCreateDeviceField(),a.getInterfaceField(),a.getIpField(),a.getPortField(),{xtype:"fieldset",title:"Профиль",collapsible:true,collapsed:true,items:[a.getTreePanel()],listeners:{expand:function(d){var h=a.getWindow(),e=d.getHeight()+200,c=e<400?e:400;h.setHeight(c)}}}],buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){a.sendRequest(a.getStore().getRootNode())}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){a.getWindow().close()}}]});return a.formPanel},getWindow:function(){var a=this;if(a.window instanceof Wasutp.window.Modal){return a.window}a.window=Ext.create("Wasutp.window.Modal",{title:"Загрузка профиля на сервер",width:530,height:270,margin:"5 0 5 0",layout:"fit",resizable:true,items:a.getFormPanel(),closable:true,maximizable:true});return a.window},show:function(){var a=this;a.getWindow().show()},sendRequest:function(c){var e=this,d=e.converter.treeToProfile(c),h=null,j=null,a=null;if(e.getIpField().isValid()===false){errorsHandler.addMessage("Ошибка",'Поле "IP адрес" заполнено неверно',Wasutp.ErrorsHandler.error);return false}if(e.getCreateDeviceField().getValue()){h=e.getInterfaceField().getValue();j=e.getIpField().getValue();a=e.getPortField().getValue()}e.getInterfaceField().getValue();d.info.device_name=e.getProfileNameField().getValue();Wasutp.Ajax.request({url:"/json/profile-import/upload-json",params:{profile:JSON.stringify(d),ip:JSON.stringify(j),port:a,interfaceId:h},success:function(m){if(typeof m.treeBehavior!=="undefined"&&m.treeBehavior!==null&&m.treeBehavior.length){var t=Ext.create("Wasutp.Configurations.TreeBehavior");var l=Ext.getCmp("profile-tree-panel");var n=Ext.getCmp("dcs-tree-panel");for(var o in m.treeBehavior){var s=m.treeBehavior[o].id,p=m.treeBehavior[o].cmd,q=m.treeBehavior[o].params;if(l&&s.indexOf("profile_")===0){t.setTree(l);t.execute(s,p,q)}else{if(n&&s.indexOf("dcs_")===0){t.setTree(n);t.execute(s,p,q)}}}}e.getWindow().close()}})},getIpField:function(){var d=this;if(d.ipField===null){var e=[];for(var c in d.ips){e.push({addr:d.ips[c]})}var a=Ext.create("Ext.data.Store",{fields:["addr"],data:e});d.ipField=Ext.create("Ext.form.ComboBox",{hidden:!d.showIpPort,disabled:true,fieldLabel:"IP адрес",store:a,queryMode:"local",editable:true,displayField:"addr",valueField:"addr",name:"ip",validator:d.validateIpAdressWithEmpty,listeners:{afterrender:function(l,j){if(d.ips.length){var h=a.getAt(0);if(h){d.ipField.select(h)}}}}})}return d.ipField},getPortField:function(){var d=this;if(d.portField===null){var e=[];for(var c in d.ports){e.push({port:d.ports[c]})}var a=Ext.create("Ext.data.Store",{fields:["port"],data:[]});d.portField=Ext.create("Ext.form.ComboBox",{hidden:!d.showIpPort,disabled:true,fieldLabel:"Порт",store:a,queryMode:"local",editable:true,displayField:"port",valueField:"port",name:"port",validator:d.validateNaturalNumber,listeners:{afterrender:function(j,h){Wasutp.Ajax.request({url:"/json/profile-import/get-ports",params:{protoNodes:JSON.stringify(d.converter.profile.depends.da_proto_desc)},success:function(m){if(m.data.portnumber!==null){e.unshift({port:m.data.portnumber})}a.loadRawData(e);if(e.length){var l=a.getAt(0);if(l){d.portField.select(l)}}}})}}})}return d.portField}});Ext.define("Wasutp.Configurations.serialize.ProfileToTreeConverter",{profile:{},constructor:function(a){this.profile=a.profile||{}},getTreeRoot:function(){var c=this,a=c.walkProfile(c.profile.tree[0]);return{expanded:true,children:[a]}},walkProfile:function(a){var j=this,h=[],c=false,d=a.childs.length<=5;if(a.childs.length>0){for(var e in a.childs){var l=j.walkProfile(a.childs[e]);if(l!==null){h.push(l)}}}else{c=true}return{text:a.data.name,expanded:d,leaf:c,checked:true,children:h,profileData:Object.assign({},a.data)}},treeToProfile:function(d){var c=this,a=Object.assign({},c.profile);a.tree[0]=c.walkTree(d.raw.children[0]);return a},walkTree:function(d){var c=this,e=[];if(d.children.length){for(var a in d.children){if(d.children[a].checked!==false){e.push(c.walkTree(d.children[a]))}}}return{childs:e,data:d.profileData}}});Ext.define("Wasutp.Configurations.serialize.UploadProfileForm",{profile:null,constructor:function(a){this.profile=a&&a.profile?a.profile:null},allowedExtensions:["profile","iid","cid"],getExtensionHint:function(){var e=this,a="";for(var c in e.allowedExtensions){var d="*."+e.allowedExtensions[c];if(e.allowedExtensions.length-1!==+c){d+=", "}a+=d}return"("+a+")"},open:function(){var e=this,d,c=[],l,j;var a=Ext.create("Wasutp.overrides.form.action.Submit");a.handleResponse();d=Ext.create("Ext.form.Panel",{layout:"fit",border:false,frame:true,bodyBorder:false,style:"border-width: 0;",items:[{xtype:"filefield",id:"form-file",emptyText:"Выберите файл...",fieldLabel:'Файл профиля<br><small style="color: #666666;">'+e.getExtensionHint()+"</small>",name:"profile",width:300,buttonText:"...",listeners:{change:function(n,p){var m=p.split("."),o=m[m.length-1].toLowerCase();if(e.allowedExtensions.indexOf(o)>=0){l.enable()}else{l.disable()}}}}]});c.push(d);l=Ext.create("Ext.button.Button",{text:"Ок",disabled:"true",handler:function(m){var n=this.up("window").down("form").getForm();if(n.isValid()){n.submit({url:"/json/profile-import/parse-file-data",waitMsg:"Идет загрузка профиля...",success:function(q,p){var v=p.result.data,u=p.result.ips,w=p.result.ports,s=p.result.showIpPort;var t=Ext.create("Wasutp.Configurations.serialize.ProfileToTreeConverter",{profile:v.profile});var o=Ext.create("Wasutp.Configurations.serialize.ConfirmWindow",{converter:t,profileName:v.profileName,ips:u,ports:w,showIpPort:s});o.show();if(typeof p.result.messages!="undefined"){errorsHandler.addMessages(p.result.messages)}if(typeof p.result.errors!="undefined"){errorsHandler.addErrors(p.result.errors)}m.up("window").close()}})}}});j=Ext.create("Ext.button.Button",{xtype:"button",text:"Отмена",handler:function(m){console.log("отмена");m.up("window").close()}});var h=Ext.create("Wasutp.window.Modal",{id:"win-authenticate",title:"Загрузка профиля на сервер",bodyPadding:10,items:c,bbar:["->",l,j]});h.show()}});Ext.define("Wasutp.Configurations.Form.RenameParams",{extend:"Wasutp.Configurations.Form.Create.CreateForm",win:null,show:function(){var c=this,a;c.win=Ext.create("Wasutp.window.Modal",{id:"ParamSettings",title:"Переименование",width:600,height:400,layout:"fit",items:c.getFormPanel(),closable:true});c.win.show();a=c.formPanel.getForm().findField("names");Ext.create("Ext.util.KeyMap",a.getEl(),{key:Ext.EventObject.ENTER,shift:false,ctrl:true,handler:function(){c.sendRequest()}});Ext.EventManager.on(a.getEl(),"keydown",function(h,d){if(h.getKey()==h.BACKSPACE){h.stopPropagation()}})},setParams:function(c){var a=this;a.params=c},formPanel:null,getFormPanel:function(){var c=this,a=c.getCurrentNames();c.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,layout:"fit",items:[{id:c.textareaId,xtype:"textareafield",name:"names",value:a.length?a.join("\n"):"",validator:c.validateTextAriaStrings,listeners:{afterrender:function(d){Ext.defer(function(){d.focus(true)},1)}}}],buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){c.sendRequest()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){c.closeWin()}}]});return c.formPanel},getCurrentNames:function(){var e=this,c=e.getApp().grid.getStore(),a,h=[];for(var d in e.params.ids){a=c.findRecord("ID",e.params.ids[d]);if(a){h.push(a.data.NAME)}else{break}}return h},closeWin:function(){var a=this;a.win.close()},sendRequest:function(){var e=this,h,c=[],a=[];if(!e.params.ids.length){errorsHandler.addMessage("Ошибка","Не выбрано ни одного параметра для переименования имени",0);e.closeWin();return}h=e.formPanel.getForm().findField("names").getValue();c=h.split("\n");if(c.length){for(var d in c){if(c[d]!==""){a.push(c[d])}}}if(!a.length){errorsHandler.addMessage("Ошибка","Необходимо ввести новые наименования параметров",0);return}Wasutp.Ajax.request({url:e.url,params:{names:JSON.stringify(a),ids:JSON.stringify(e.params.ids)},success:function(j){if(typeof j.gridBehavior!=="undefined"&&j.gridBehavior!==null&&j.gridBehavior.length){var l=e.getApp().getGridBehavior();l.setGrid(e.getApp().grid);for(var m in j.gridBehavior){l.execute(j.gridBehavior[m].id,j.gridBehavior[m].cmd,j.gridBehavior[m].params)}}if(j.success===true){e.closeWin()}}})}});Ext.define("Wasutp.Configurations.Form.RenameProfileParams",{extend:"Wasutp.Configurations.Form.RenameParams",textareaId:"wasutp-configuration-rename-profile-params-textarea",url:"/json/configuration/renameProfileParams",getApp:function(){return this.params.profile}});Ext.define("Wasutp.Configurations.Form.Create.Profile.DcsDnDCreateTransferDevice",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(a){this.superclass.constructor(a)},getItems:function(){var j=this,d=[],m="5 0 5 0",l=[],c,e;d.push({xtype:"displayfield",cls:"wasutp-displayfield-auto-height",hideLabel:true,border:false,margin:m,value:j.params.confirmMessage});for(var h in j.params.interfaces){var a=j.params.interfaces[h];l.push({id:a.ID,name:a.NAME})}c=Ext.create("Ext.data.Store",{fields:["id","name"],data:l});e=Ext.create("Ext.form.ComboBox",{fieldLabel:"Интерфейс",store:c,queryMode:"local",displayField:"name",valueField:"id",name:"interface",editable:false,disabled:l.length===1?true:false,listeners:{afterrender:function(o){var n=c.getAt(0);if(n){o.select(n)}}}});d.push(e);return d},win:null,formPanel:null,continueFunc:null,continueParams:{},show:function(a,c){var d=this;if(d.params.interfaces.length<1){errorsHandler.addMessage("Ошибка",' Создание порта передачи невозможно. Для этого необходимо описать хотя бы один магистральный интерфейс с типом "Сетевые карты Ethernet" в подсистеме сбора и передачи.',0);return false}d.continueFunc=a;d.continueParams=c;d.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",labelWidth:100,anchor:"100%"},items:d.getItems(),buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){this.up("window").save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});d.win=Ext.create("Wasutp.window.Modal",{title:"Добавить новое устройство",width:450,margin:"5 0 5 0",layout:"fit",items:d.formPanel,closable:true,save:function(){d.sendData()}});d.win.show()},sendData:function(){var d=this,c=d.formPanel.getForm(),a=c.findField("interface");d.continueParams.interfaceId=a.getValue();d.continueParams.prefix=d.params.prefix;d.continueParams.startCvalif=d.params.startCvalif;(d.continueFunc)(d.continueParams);d.win.close()}});Ext.define("Wasutp.Configurations.Form.Create.Profile.DcsDnDCreateDPTSDevice",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(a){this.superclass.constructor(a)},getItems:function(){var j=this,d=[],m="5 0 5 0",l=[],c,e;d.push({xtype:"displayfield",cls:"wasutp-displayfield-auto-height",hideLabel:true,border:false,margin:m,value:j.params.confirmMessage});for(var h in j.params.interfaces){var a=j.params.interfaces[h];l.push({id:a.ID,name:a.NAME})}c=Ext.create("Ext.data.Store",{fields:["id","name"],data:l});e=Ext.create("Ext.form.ComboBox",{fieldLabel:"Интерфейс",store:c,queryMode:"local",displayField:"name",valueField:"id",name:"interface",listeners:{afterrender:function(o){var n=c.getAt(0);if(n){o.select(n)}}}});d.push(e);return d},win:null,formPanel:null,continueFunc:null,continueParams:{},show:function(a,c){var d=this;if(d.params.interfaces.length<1){errorsHandler.addMessage("Ошибка",' Создание порта передачи невозможно. Для этого необходимо описать хотя бы один магистральный интерфейс с типом "Сетевые карты Ethernet" в подсистеме сбора и передачи.',0);return false}d.continueFunc=a;d.continueParams=c;d.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",labelWidth:100,anchor:"100%"},items:d.getItems(),buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){this.up("window").save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});d.win=Ext.create("Wasutp.window.Modal",{title:"Добавить новое устройство",width:450,margin:"5 0 5 0",layout:"fit",items:d.formPanel,closable:true,save:function(){d.sendData()},});d.win.show()},sendData:function(){var c=this,a=c.formPanel.getForm().findField("interface");if(a){c.continueParams.interfaceId=a.getValue();(c.continueFunc)(c.continueParams)}c.win.close()}});Ext.define("Wasutp.Configurations.models.AccessToModuleFunctions",{protoDescId:72,channelsControlCvalif:1,dptsCvalif:2,typesConversionCvalif:3,createControll:function(e){var a=e.dcsDeviceId||null,d=e.profileId||null,c=e.profile||null;Wasutp.Ajax.request({url:"/json/configuration/create-channels-control",params:{dcsDeviceId:a,profileId:d},success:function(h){if(c.type==="param"){if(h.gridBehavior&&h.gridBehavior[0]&&h.gridBehavior[0].id&&h.gridBehavior[0].id!==e.profile.treeNodeId){return false}if(typeof h.gridBehavior!=="undefined"&&h.gridBehavior!==null&&h.gridBehavior.length){var j=c.getGridBehavior();j.setGrid(c.grid);for(var l in h.gridBehavior){j.execute(h.gridBehavior[l].id,h.gridBehavior[l].cmd,h.gridBehavior[l].params)}}}}})}});Ext.define("Wasutp.Gis.IconPicker",{extend:"Ext.Component",requires:"Ext.XTemplate",alias:"widget.wasutp-colorpicker",alternateClassName:"Wasutp.ColorPalette",componentCls:Ext.baseCSSPrefix+"color-picker",selectedCls:Ext.baseCSSPrefix+"color-picker-selected",value:null,clickEvent:"click",allowReselect:false,colors:[{name:"marker",style:"background-image: url(/images/marker.png) !important; height: 16px; width: 16px;",},{name:"marker1",style:"background-image: url(/images/marker1.png) !important; height: 16px; width: 16px;",},{name:"marker2",style:"background-image: url(/images/marker2.png) !important; height: 16px; width: 16px;",},{name:"marker3",style:"background-image: url(/images/marker3.png) !important; height: 16px; width: 16px;",},{name:"marker4",style:"background-image: url(/images/marker4.png) !important; height: 16px; width: 16px;",},{name:"marker5",style:"background-image: url(/images/marker5.png) !important; height: 16px; width: 16px;",},{name:"marker6",style:"background-image: url(/images/marker6.png) !important; height: 16px; width: 16px;",},{name:"marker7",style:"background-image: url(/images/marker7.png) !important; height: 16px; width: 16px;",}],renderTpl:['<tpl for="colors">','<a href="#" name="{name}" hidefocus="on">','<em><span style="{style}" unselectable="on">&#160;</span></em>',"</a>","</tpl>"],initComponent:function(){var a=this;a.callParent(arguments);a.addEvents("select");if(a.handler){a.on("select",a.handler,a.scope,true)}},initRenderData:function(){var a=this;return Ext.apply(a.callParent(),{itemCls:a.itemCls,colors:a.colors})},onRender:function(){var c=this,a=c.clickEvent;c.callParent(arguments);c.mon(c.el,a,c.handleClick,c,{delegate:"a"});if(a!="click"){c.mon(c.el,"click",Ext.emptyFn,c,{delegate:"a",stopEvent:true})}},afterRender:function(){var a=this,c;a.callParent(arguments);if(a.value){c=a.value;a.value=null;a.select(c,true)}},handleClick:function(d,e){var c=this,a;d.stopEvent();if(!c.disabled){c.select(e)}},select:function(d,a){var c=this;c.fireEvent("select",c,d);return},getValue:function(){return this.value||null}});Ext.define("Wasutp.Gis.MenuIconPicker",{extend:"Ext.menu.Menu",alias:"widget.wasutp-colormenu",requires:["Wasutp.Gis.IconPicker"],hideOnClick:true,pickerId:null,initComponent:function(){var c=this,a=Ext.apply({},c.initialConfig);delete a.listeners;Ext.apply(c,{plain:true,showSeparator:false,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-color-item",id:c.pickerId,xtype:"wasutp-colorpicker"},a)});c.callParent(arguments);c.picker=c.down("wasutp-colorpicker");c.relayEvents(c.picker,["select"]);if(c.hideOnClick){c.on("select",c.hidePickerOnSelect,c)}},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}});Ext.define("Wasutp.Gis.TBar",{map:null,colorButtonIconCls:"wasutp-gis-color-button-icon",bgColorButtonIconCls:"wasutp-gis-bgcolor-button-icon",thicknessIconPrefix:"wasutp-gis-icon-line",opacityIconPrefix:"wasutp-gis-icon-opacity",markerIconPrefix:"wasutp-gis-icon-marker",constructor:function(a){this.map=a.map?a.map:"null"},getBar:function(){var c=this,a=[c.getEditButton(),c.getColorButton(),c.getBgColorButton(),c.getThicknessButton(),c.getOpacityButton(),c.getMarkerButton()];return a},getEditButton:function(){var c=this,a=Ext.create("Ext.button.Button",{text:"Редактирование",enableToggle:true,pressed:c.map.editingMode,toggleHandler:function(d,e){c.map.switchMode(e);c.switchBar(e)}});return a},switchBar:function(c){var a=this;if(c){a.getColorButton().enable();a.getBgColorButton().enable();a.getThicknessButton().enable();a.getOpacityButton().enable();a.getMarkerButton().enable()}else{a.getColorButton().disable();a.getBgColorButton().disable();a.getThicknessButton().disable();a.getOpacityButton().disable();a.getMarkerButton().disable()}},colorButton:null,getColorButton:function(){var a=this;if(a.colorButton===null){a.colorButton=Ext.create("Ext.button.Button",{text:"Цвет",iconCls:a.colorButtonIconCls,disabled:a.map.isEditingMode()?false:true,menu:Ext.create("Ext.menu.ColorPicker",{handler:function(c,d){els=Ext.query("#"+a.map.window.id+" span."+a.colorButtonIconCls);if(els.length){for(var e in els){els[e].style.background="#"+d}}a.setColor("#"+d)}})})}return a.colorButton},bgColorButton:null,getBgColorButton:function(){var a=this;if(a.bgColorButton===null){a.bgColorButton=Ext.create("Ext.button.Button",{text:"Цвет фона",iconCls:a.bgColorButtonIconCls,disabled:a.map.isEditingMode()?false:true,menu:Ext.create("Ext.menu.ColorPicker",{handler:function(c,d){els=Ext.query("#"+a.map.window.id+" span."+a.bgColorButtonIconCls);if(els.length){for(var e in els){els[e].style.background="#"+d}}a.setFillColor("#"+d)}})})}return a.bgColorButton},thicknessButton:null,getThicknessButton:function(){var c=this;if(c.thicknessButton===null){var d=Ext.create("Ext.menu.Menu");for(var a=1;a<=5;++a){d.add({text:a+"px",iconCls:c.thicknessIconPrefix+a,thickness:a,handler:c.selectThickness,scope:c})}c.thicknessButton=Ext.create("Ext.button.Button",{text:"Толщина",iconCls:c.thicknessIconPrefix,disabled:c.map.isEditingMode()?false:true,menu:d})}return c.thicknessButton},selectThickness:function(h,j){var d=this;var c=Ext.query("#"+d.map.window.id+" span."+d.thicknessIconPrefix);if(c.length){for(var a in c){c[a].style.backgroundImage='url("/images/icon-line'+h.thickness+'.png")'}}d.setThickness(h.thickness)},opacityButton:null,getOpacityButton:function(){var me=this;if(me.opacityButton===null){var menu=Ext.create("Ext.menu.Menu"),opacities=[{text:1,clsSuf:"1"},{text:0.75,clsSuf:"075"},{text:0.5,clsSuf:"05"},{text:0.25,clsSuf:"025"},{text:0,clsSuf:"0"}];for(var i=1 in opacities){menu.add({text:opacities[i].text,iconCls:me.opacityIconPrefix+opacities[i].clsSuf,opsty:opacities[i].text,handler:me.selectOpacity,scope:me})}me.opacityButton=Ext.create("Ext.button.Button",{text:"Прозрачность",iconCls:me.opacityIconPrefix,disabled:me.map.isEditingMode()?false:true,menu:menu})}return me.opacityButton},selectOpacity:function(item,e){var me=this,els=Ext.query("#"+me.map.window.id+" span."+me.opacityIconPrefix);if(els.length){for(var i in els){els[i].style.backgroundImage='url("/images/icon-opacity'+item.opsty+'.png")'}}me.setOpacity(item.opsty)},markerButton:null,getMarkerButton:function(){var me=this;if(me.markerButton===null){me.markerButton=Ext.create("Ext.button.Button",{text:"Маркер",iconCls:me.markerIconPrefix,disabled:me.map.isEditingMode()?false:true,menu:Ext.create("Wasutp.Gis.MenuIconPicker",{handler:function(cm,el){var els=Ext.query("#"+me.map.window.id+" span."+me.markerIconPrefix),targets=Ext.query("span",el),backgroundImage;if(targets.length){for(var i in targets){backgroundImage=targets[i].style.backgroundImage}}if(els.length){for(var i in els){if(backgroundImage){els[i].style.backgroundImage=backgroundImage}}}me.setMarker(el.name)}})})}return me.markerButton},color:"#000000",setColor:function(color){Wasutp.Gis.StyleManager.color=color;this.color=color},fillColor:"#000000",setFillColor:function(color){Wasutp.Gis.StyleManager.fillColor=color;this.fillColor=color},thickness:"4",setThickness:function(thickness){Wasutp.Gis.StyleManager.weight=thickness;this.thickness=thickness},opacity:"0.5",setOpacity:function(opacity){Wasutp.Gis.StyleManager.fillOpacity=opacity;this.opacity=opacity},marker:"marker",setMarker:function(marker){Wasutp.Gis.StyleManager.marker=marker;this.marker=marker},restoreStyle:function(){Wasutp.Gis.StyleManager.color=this.color;Wasutp.Gis.StyleManager.fillColor=this.fillColor;Wasutp.Gis.StyleManager.weight=this.thickness;Wasutp.Gis.StyleManager.fillOpacity=this.opacity;Wasutp.Gis.StyleManager.marker=this.marker}});Ext.define("Wasutp.Gis.Display",{statics:{className:"wasutp-gis-display",disabledClassName:"wasutp-gis-display-disabled",clearClassName:"wasutp-gis-display-clear",updating:false,displays:[],updatingInterval:3000,leafletClasses:"leaflet-marker-icon leaflet-zoom-animated leaflet-clickable",add:function(layer,params){var me=this,el=layer._icon,dropTarget=null,editingMode=params&&params.editingMode?params.editingMode:false;if(!layer||!layer.options||layer.options.type!=="display"){return false}if(el&&editingMode===true){dropTarget=Ext.create("Ext.dd.DropTarget",el,{ddGroup:"secondGridDDGroup",notifyDrop:function(ddSource,e,data){var target=e.target||e.srcElement;if(!/wasutp-gis-display/i.test(target.className)){return false}var records=ddSource.dragData.records;if(records.length>1){errorsHandler.addMessage("Ошибка","Нельзя привязать больше одного параметра",0)}me.initParam(layer,records[0].data)}})}me.initParam(layer,null)},initParam:function(layer,record){var me=this;if(!record&&layer._icon){var params=me.parseClassName(layer._icon.className);if(params&&params[1]){Wasutp.Params.Param.getDataByIds([params[1]],me.getParamDataCallBack,arguments,me)}}else{me._initParam(layer,record)}},_initParam:function(layer,data){if(!data){return}var me=this,name=data.NAME?data.NAME:"",unit=data.UNIT?data.UNIT:"",idParam=null,html="999.99";if(data.ID){idParam="t54p"+data.ID}else{var props=me.parseClassName(layer._icon.className);if(props){idParam=props[0]}}for(var i in me.displays){if(layer&&me.displays[i].layer&&me.displays[i].layer._leaflet_id===layer._leaflet_id){delete me.displays[i]}}me.displays.push({layer:layer,data:data,id:idParam});if(name){var className=me.disabledClassName+" "+idParam,value=0;value=me.prepareParamValue({value:value,gtype:data.GTYPE,precis:data.PRECIS});html=name+" = "+value+"&nbsp;"+unit;className+=" "+me.leafletClasses;if(layer&&layer._icon){layer._icon.setAttribute("class",className);layer._icon.innerHTML=html;layer.options.icon.options.className=className;layer.options.icon.options.html=html}}},disableDataUpdating:function(){this.updating=false},enableDataUpdating:function(){var me=this;if(me.updating!==true){me.updating=true;me.updateData()}},updateData:function(){var me=this,ids=[];if(me.displays.length){for(var i in me.displays){ids.push(me.displays[i].id)}}Wasutp.Ajax.request({url:"/gis/map/get-oper-data",params:{ids:JSON.stringify(ids)},success:function(response){if(response.data){me._updateData(response.data)}},failure:function(){me._updateData({})}})},_updateData:function(data){var me=this;if(me.displays.length){for(var i in me.displays){var gtype=me.displays[i].data.GTYPE,id=me.displays[i].data.ID,ind=gtype+":"+id;if(!me.displays[i].layer||!me.displays[i].layer._icon){continue}if(data[ind]){var name=data[ind].NAME?data[ind].NAME:"",unit=data[ind].UNIT?data[ind].UNIT:"",idParam="t54p"+data[ind].ID1,value=data[ind].VALUE1?data[ind].VALUE1:0,statuses=data[ind].STATUSES?data[ind].STATUSES:[],cls="";value=me.prepareParamValue({value:value,gtype:data[ind].GTYPE,precis:data[ind].PRECIS});if(statuses.length){for(var j in statuses){cls+=Wasutp.Params.Param.gisDisplayClasses[statuses[j]]?" "+Wasutp.Params.Param.gisDisplayClasses[statuses[j]].cls:""}}else{cls=me.clearClassName}if(me.updating===true){me.displays[i].layer._icon.setAttribute("class",cls+" "+idParam+" "+me.leafletClasses)}else{me.displays[i].layer._icon.setAttribute("class",me.disabledClassName+" "+idParam+" "+me.leafletClasses)}me.displays[i].layer._icon.innerHTML=name+" = "+value+"&nbsp;"+unit}else{var name=me.displays[i].data.NAME?me.displays[i].data.NAME:"",unit=me.displays[i].data.UNIT?me.displays[i].data.UNIT:"",idParam="t54p"+id,value=0;value=me.prepareParamValue({value:value,gtype:me.displays[i].data.GTYPE,precis:me.displays[i].data.PRECIS});if(me.updating===true){me.displays[i].layer._icon.setAttribute("class","wasutp-gis-display-nopresent "+idParam+" "+me.leafletClasses)}else{me.displays[i].layer._icon.setAttribute("class",me.disabledClassName+" "+idParam+" "+me.leafletClasses)}me.displays[i].layer._icon.innerHTML=name+" = "+value+"&nbsp;"+unit}}}if(me.updating===true){setTimeout(function(){me.updateData()},me.updatingInterval)}},prepareParamValue:function(params){var me=this,gtype=params.gtype?parseInt(params.gtype):1,precis=params.precis?parseInt(params.precis):2,value=params.value?params.value:0;if(gtype===3){if(value=="0"){value="ОТКЛ"}else{value="ВКЛ"}}else{value=accounting.formatNumber(parseFloat(value),precis,"",".")}return value},parseClassName:function(className){var me=this,regexp=/t[\d]+p([\d]+)\s*/i,matches=className.match(regexp);return matches},getParamDataCallBack:function(layers,response){var me=this,responseData=response.data?response.data:{};if(layers.length){for(var i in layers){me._initParam(layers[i],responseData[0])}}}}});Ext.define("Wasutp.Gis.Text",{textElements:[],fontSize:18,constructor:function(){this.textElements=[]},add:function(layer,params){var me=this,id=layer._leaflet_id?layer._leaflet_id:null,startZoom=params.startZoom?params.startZoom:13;if(!id){return false}me.textElements[id]={layer:layer,startZoom:startZoom}},resizeText:function(mapZoom){var me=this,zoomToPx={1:6,2:6,3:6,4:6,5:6,6:6,7:6,8:6,9:6,10:8,11:8,12:8,13:8,14:8,15:8,16:10,17:18,18:24},className="gis-draw-text";if(me.textElements.length){for(var i in me.textElements){var layer=me.textElements[i].layer,startZoom=me.textElements[i].startZoom,textEls=[];if(layer._icon){textEls=layer._icon.getElementsByClassName(className)}if(textEls.length&&zoomToPx[zoom]){if(mapZoom>=startZoom){textEls[0].style.fontSize=me.fontSize+"px"}else{var fontSize=me.fontSize,mz=mapZoom;while(mz<startZoom){fontSize-=4;mz++}textEls[0].style.fontSize=fontSize+"px"}}}}}});Ext.define("Wasutp.Gis.StyleManager",{statics:{stroke:true,color:"#000000",weight:3,opacity:0.5,fill:true,clickable:true,fillColor:"#000000",fillOpacity:0.25,bgColor:"#000000",marker:"marker",getStroke:function(){return this.stroke},getColor:function(){return this.color},getWeight:function(){return this.weight},getOpacity:function(){return this.opacity},getFill:function(){return this.fill},getClickable:function(){return this.clickable},getBgColor:function(){return this.bgColor},getThickness:function(){return this.thickness},getMarker:function(){return this.marker},getFillColor:function(){return this.fillColor},getFillOpacity:function(){return this.fillOpacity},getMarkerCls:function(){switch(this.marker){case"marker":return"wasutp-gis-marker";break;case"marker1":return"wasutp-gis-marker1";break;case"marker2":return"wasutp-gis-marker2";break;case"marker3":return"wasutp-gis-marker3";break;case"marker4":return"wasutp-gis-marker4";break;case"marker5":return"wasutp-gis-marker5";break;case"marker6":return"wasutp-gis-marker6";break;case"marker7":return"wasutp-gis-marker7";break;default:return"wasutp-gis-marker8";break}},getMarker:function(params){if(this.marker==="marker"){return new L.Icon.Default()}else{var className=this.getMarkerCls(),addClass=params&&params.addClass?params.addClass:"";return new L.DivIcon({html:'<div class="'+className+" "+addClass+'"></div>',className:className,iconSize:new L.Point(26,null)})}}}});Ext.define("Wasutp.Gis.Map",{windowId:null,window:null,url:"",center:[],zoom:0,geojson:null,tileLayer:null,map:null,drawnItems:{},clusterItems:{},markers:[],drawControl:{},modalWindowId:"",gisId:null,mapName:null,operDataCls:"wasutp-gis-oper-data-switch",editingMode:true,constructor:function(params){var me=this;if(params.gisId){me.initMapParams({id:params.gisId});me.editingMode=false}if(!Wasutp.Gis.Display){Ext.create("Wasutp.Gis.Display")}if(!Wasutp.Gis.StyleManager){Ext.create("Wasutp.Gis.StyleManager")}me.markers=[]},open:function(params){var me=this,win=me.getWindow();win.maximized=params&&params.maximized?params.maximized:false;me.center=params&&params.center?params.center:[];win.show();me.modalWindowId=me.windowId+"-modal-dialog-window";me.loadMapData()},getWindow:function(){var me=this,desktop=wasutpApp.getDesktop(),tbarManager=me.getTbarManager();me.window=desktop.createWindow({iconCls:Wasutp.Menu.getItem(["gis"]).iconCls,title:Wasutp.Menu.getItem(["gis"]).title,height:600,width:900,cls:"wasutp-gis-wrapper",onEsc:function(code,e){},tbar:tbarManager.getBar(),bbar:[me.getSaveButton(),{xtype:"button",text:"Оперативные данные",enableToggle:true,cls:me.operDataCls,toggleHandler:function(item,pressed){if(pressed){me.enableDataUpdating()}else{me.disableDataUpdating()}}},me.getMouseLatCoordField(),me.getMouseLngCoordField(),],listeners:{afterrender:function(ths){me.windowId=ths.id},resize:function(){if(me.map){me.map.invalidateSize()}},destroy:function(){var buttons=Ext.ComponentQuery.query("button[cls="+me.operDataCls+"]");if(!buttons.length){Wasutp.Gis.Display.updating=false}}}});return me.window},saveButton:null,getSaveButton:function(){var me=this;if(me.saveButton===null){me.saveButton=Ext.create("Ext.button.Button",{text:"Сохранить",disabled:me.isEditingMode()?false:true,handler:function(){me.save()}})}return me.saveButton},enableDataUpdating:function(){var me=this;Wasutp.Gis.Display.enableDataUpdating();var buttons=Ext.ComponentQuery.query("button[cls="+me.operDataCls+"]");if(buttons.length){for(var i in buttons){if(buttons[i].pressed===false){buttons[i].toggle(true)}}}},disableDataUpdating:function(){var me=this;Wasutp.Gis.Display.disableDataUpdating();var buttons=Ext.ComponentQuery.query("button[cls="+me.operDataCls+"]");if(buttons.length){for(var i in buttons){if(buttons[i].pressed===true){buttons[i].toggle(false)}}}},getContainerId:function(){var me=this;return me.windowId+"-body"},renderGis:function(){var me=this;me.map=new L.Map(me.getContainerId(),{center:new L.LatLng(me.center[0],me.center[1]),zoom:me.zoom});me.tileLayer=L.tileLayer(me.url,{maxZoom:18,attribution:""}).addTo(me.map);me.drawnItems=L.featureGroup().addTo(me.map);me.drawControl=new L.Control.WasutpDraw({edit:{featureGroup:me.drawnItems}});if(me.isEditingMode()){me.map.addControl(me.drawControl)}me.map.on("draw:created",function(event){var layer=event.layer;var params={};if(layer.options&&layer.options.type){params.type=layer.options.type}me.addLayer(layer,params)});me.map.on("draw:deleted",function(event){var layer=event.layer;if(event.layers._layers){for(var i in event.layers._layers){me.removeLayer(event.layers._layers[i])}}});me.map.on("mousemove",function(event){me.showMousePosition(event)});me.map.on("focus",function(event){me.getTbarManager().restoreStyle()});me.map.on("zoomend",function(event){me.changeTextSize(event)});me.clusterItems=new L.MarkerClusterGroup();me.map.addLayer(me.clusterItems);if(me.geojson){var json=L.geoJson([me.geojson],{style:function(feature){if(feature.properties&&feature.properties.style){return feature.properties.style}else{return{weight:4,color:"#F06EAA",opacity:0.5,fillColor:"#F06EAA",fillOpacity:0.2}}},pointToLayer:function(feature,latlng){if(feature.properties){if(feature.properties.type==="display"){var idClass=feature.properties.className?feature.properties.className:"";return L.marker(latlng,{icon:new L.DivIcon({html:"999.99",className:"wasutp-gis-display "+idClass,iconSize:new L.Point()}),type:feature.properties.type})}else{if(feature.properties.type==="circle"){return new L.Circle(latlng,feature.properties.radius)}else{if(feature.properties.type==="text"){var text=feature.properties.text?feature.properties.text:"";return new L.Marker(latlng,{icon:new L.DivIcon({html:'<div class="gis-draw-text">'+text+"</div>",className:"gis-draw-text",iconSize:new L.Point(300,16)}),type:feature.properties.type,startZoom:feature.properties.startZoom})}else{if(feature.properties.type==="marker"){if(feature.properties.style){if(feature.properties.style.className){return L.marker(latlng,{icon:new L.DivIcon({html:feature.properties.style.html,className:feature.properties.style.className,iconSize:new L.Point(feature.properties.style.iconSize.x,feature.properties.style.iconSize.y)}),type:feature.properties.type})}else{return L.marker(latlng,{icon:new L.Icon.Default(),type:feature.properties.type})}}}else{return L.marker(latlng,{icon:new L.Icon.Default(),type:feature.properties.type})}}}}}}});for(var i in json._layers){var params={};if(json._layers[i].options&&json._layers[i].options.type){params.type=json._layers[i].options.type}me.addLayer(json._layers[i],params)}}me.changeTextSize(me.zoom)},addLayer:function(layer,params){var me=this;if(params&&(params.type==="marker"||params.type==="display")){me.markers.push(layer);if(me.isEditingMode()){me.drawnItems.addLayer(layer)}else{me.clusterItems.addLayer(layer)}if(params.type==="display"){Wasutp.Gis.Display.add(layer,{editingMode:me.isEditingMode()})}}else{me.drawnItems.addLayer(layer);if(params.type==="text"){if(layer.options.startZoom===null){layer.options.startZoom=me.map.getZoom()}me.getTextManager().add(layer,{startZoom:layer.options.startZoom})}}},removeLayer:function(layer){var me=this;if(me.markers.length){for(var i in me.markers){if(me.markers[i]._leaflet_id===layer._leaflet_id){delete me.markers[i]}}}},switchMode:function(isEditing){var me=this;if(isEditing){me.editingMode=true;me.getSaveButton().enable();if(me.markers.length){Wasutp.Gis.Display.displays=[];for(var i in me.markers){if(me.clusterItems.hasLayer(me.markers[i])){me.clusterItems.removeLayer(me.markers[i])}me.drawnItems.addLayer(me.markers[i]);Wasutp.Gis.Display.add(me.markers[i],{editingMode:me.isEditingMode()})}}me.map.addControl(me.drawControl)}else{me.editingMode=false;me.getSaveButton().disable();if(me.markers.length){for(var i in me.markers){if(me.drawnItems.hasLayer(me.markers[i])){me.drawnItems.removeLayer(me.markers[i])}me.clusterItems.addLayer(me.markers[i])}}me.map.removeControl(me.drawControl)}},isEditingMode:function(){var me=this;return me.editingMode},changeTextSize:function(event){var me=this,textManager=me.getTextManager();zoom=me.map.getZoom();textManager.resizeText(zoom)},loadMapData:function(){var me=this;Wasutp.Ajax.request({url:"/gis/map/get-data",params:{gisId:me.gisId},success:function(response){if(response.data){var center=me.center.length===0?response.data.center:me.center;me.initMapParams({url:response.data.url,center:center,zoom:response.data.zoom,name:response.data.name,geojson:response.data.geojson?JSON.parse(response.data.geojson):null});me.renderGis()}}})},mapIsSaved:function(){var me=this;if(me.gisId===null){return false}return true},save:function(){var me=this;if(me.mapIsSaved()){me.saveMap()}else{me.createNewMap()}},getCreateForm:function(){var me=this,form=Ext.create("Ext.form.Panel",{bodyPadding:10,padding:0,items:[{xtype:"textfield",name:"name",fieldLabel:"Введите название карты",labelWidth:150,width:460,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendCreateRequest(form)}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}},{xtype:"button",text:"Ok",width:140,margin:"10 5 0 85",handler:function(){me.sendCreateRequest(form)}},{xtype:"button",text:"Отмена",width:140,margin:"10 5 0 5",handler:function(ths){Ext.getCmp(me.modalWindowId).close()}}]});return form},getSaveForm:function(){var me=this,form=Ext.create("Ext.form.Panel",{bodyPadding:10,padding:0,items:[{xtype:"textfield",name:"name",fieldLabel:"Название карты",labelWidth:150,width:460,value:me.getMapName(),listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendSaveRequest(form)}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}},{xtype:"button",text:"Ok",width:140,margin:"10 5 0 85",handler:function(){me.sendSaveRequest(form)}},{xtype:"button",text:"Отмена",width:140,margin:"10 5 0 5",handler:function(ths){Ext.getCmp(me.modalWindowId).close()}}]});return form},saveMap:function(){var me=this,win=Ext.create("Wasutp.window.Modal",{id:me.modalWindowId,title:"Сохранение карты",width:500,items:[me.getSaveForm()]});win.show()},createNewMap:function(){var me=this,win=Ext.create("Wasutp.window.Modal",{id:me.modalWindowId,title:"Сохранение карты",width:500,items:[me.getCreateForm()]});win.show()},sendCreateRequest:function(form){var me=this,formData=form.getForm(),name=formData.findField("name").getValue(),url=me.tileLayer._url,zoom=me.map.getZoom(),latLng=me.map.getCenter(),center=[latLng.lat,latLng.lng];var geojsonCollection=me.prepareGeojson(me.drawnItems);Wasutp.Ajax.request({url:"/gis/map/create",params:{name:JSON.stringify(name),geojson:JSON.stringify(geojsonCollection),url:JSON.stringify(url),zoom:zoom,center:JSON.stringify(center)},success:function(response){if(response.data&&response.data.result){me.initMapParams({id:response.data.id,name:name});Ext.getCmp(me.modalWindowId).close()}}})},sendSaveRequest:function(form){var me=this,formData=form.getForm(),name=formData.findField("name").getValue(),url=me.tileLayer._url,zoom=me.map.getZoom(),latLng=me.map.getCenter(),center=[latLng.lat,latLng.lng];var geojsonCollection=me.prepareGeojson(me.drawnItems);Wasutp.Ajax.request({url:"/gis/map/save",params:{id:me.gisId,name:JSON.stringify(name),geojson:JSON.stringify(geojsonCollection),url:JSON.stringify(url),zoom:zoom,center:JSON.stringify(center)},success:function(response){if(response.data&&response.data.result){me.initMapParams({name:name});Ext.getCmp(me.modalWindowId).close()}}})},prepareGeojson:function(drawnItems){var me=this,features=[],geojsonCollection={type:"FeatureCollection",features:features},layers=drawnItems._layers;for(var i in layers){var layer=layers[i].toGeoJSON();if(layers[i]._icon&&/wasutp-gis-display/i.test(layers[i]._icon.className)){var params=Wasutp.Gis.Display.parseClassName(layers[i]._icon.className);if(params&&params[0]){layer.properties.className=params[0]}}if(layers[i].options&&layers[i].options.type){layer.properties.type=layers[i].options.type}if(layers[i]._radius){layer.properties.radius=layers[i]._mRadius}if(layers[i].options&&layers[i].options.text){layer.properties.text=layers[i].options.text}if(layers[i].options&&layers[i].options.startZoom){layer.properties.startZoom=layers[i].options.startZoom}layer.properties.style=me.getLayerStyle(layers[i]);features.push(layer)}geojsonCollection.features=features;return geojsonCollection},getLayerStyle:function(layer){var me=this,options=layer&&layer.options?layer.options:{},type=options.type?options.type:null,style={};if(type==="marker"||type==="display"||type==="text"){style=options.icon.options}else{style=options}return style},getMapName:function(){return this.mapName},initMapParams:function(params){var me=this;if(params.url){me.url=params.url}if(params.center){me.center=params.center}if(params.zoom){me.zoom=params.zoom}if(params.geojson){me.geojson=params.geojson}if(params.name){me.window.setTitle(params.name);me.mapName=params.name}if(params.id){me.gisId=params.id}},tbarManager:null,getTbarManager:function(){var me=this;if(me.tbarManager===null){me.tbarManager=Ext.create("Wasutp.Gis.TBar",{map:me})}return me.tbarManager},textManager:null,getTextManager:function(){var me=this;if(me.textManager===null){me.textManager=Ext.create("Wasutp.Gis.Text")}return me.textManager},showMousePosition:function(e){var me=this,latlng=e.latlng;me.getMouseLatCoordField().setValue(latlng.lat);me.getMouseLngCoordField().setValue(latlng.lng)},mouseLatCoordField:null,getMouseLatCoordField:function(){var me=this;if(me.mouseLatCoordField===null){me.mouseLatCoordField=Ext.create("Ext.form.field.Text",{name:"mouseLatCoordField",fieldLabel:"Широта",labelWidth:50,width:200,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.positionMap()}}}})}return me.mouseLatCoordField},mouseLngCoordField:null,getMouseLngCoordField:function(){var me=this;if(me.mouseLngCoordField===null){me.mouseLngCoordField=Ext.create("Ext.form.field.Text",{name:"mouseLngCoordField",fieldLabel:"Долгота",labelWidth:50,width:200,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.positionMap()}}}})}return me.mouseLngCoordField},positionMap:function(){var me=this,lat=me.getMouseLatCoordField().getValue(),lng=me.getMouseLngCoordField().getValue();if(me.map){me.map.panTo([lat,lng])}}});Ext.define("Wasutp.Schemes.IndexManager",{ERROR_PANEL_UNDEFINED:"Не задано свойство panel",WARN_UNSUCCESS_ENABLE_INDEX_MANAGER:"Не удалось включить менеджер индексов",constructor:function(cfg){var i;for(i in cfg){if(cfg.hasOwnProperty(i)){this[i]=cfg[i]}}if(!this.panel){throw new Error(this.ERROR_PANEL_UNDEFINED)}this.isEnabledInCfg=SLDiagram.Underscore.memoize(this.isEnabledInCfg);this.events=new SLDiagram.Utils.EventEmitter();var sld=this.panel.getSLDiagram();sld.events.listen("setEditMode",this.updateState.bind(this,false),{anyContext:true},this);sld.events.listen("afterOpenScheme",this.updateState.bind(this,true),{anyContext:true},this);sld.events.listen("clearScheme",this.updateState.bind(this,true),{anyContext:true},this);if(this.isEnabledInCfg()&&!this.enable()){console.warn(this.WARN_UNSUCCESS_ENABLE_INDEX_MANAGER)}this.updateState();return this},enable:function(){if(!this.isEnabledInCfg()){return false}if(!this._enabled){this._enabled=true;return true}else{return false}},disable:function(){if(this._enabled){this._enabled=false;this.panel.getSLDiagram().dropIndex();return true}else{return false}},getEditModeButton:function(){return this.panel.getEditModeButton()},isEditMode:function(){return Boolean(this.panel.getSLDiagram().getEditMode())},isEnabledInCfg:function(){return Boolean(SLDiagram.Utils.get(window,"appHelper.wasutpConfig.enableSldiagramIndex"))},updateState:function(force){if(!this._updateStateArgs){this._updateStateArgs={}}if(force){this._updateStateArgs.force=force}if(this._updateState){return this._updateState}var me=this;this._updateState=new SLDiagram.Utils.Bluebird(function(resolve,reject){me.events.emit("beforeUpdateState");setTimeout(function(){if(!me._enabled){return resolve(false)}var currentEditModeState=me.isEditMode();if(me._oldEditModeState===currentEditModeState&&!me._updateStateArgs.force){return resolve(false)}me.events.emit("updateState",currentEditModeState,me._oldEditModeState);if(currentEditModeState){me.onSwitchToEditMode()}else{me.onSwitchToViewMode()}me._oldEditModeState=currentEditModeState;delete me._updateState;delete me._updateStateArgs;me.events.emit("afterUpdateState");return resolve(true)},500)});return this._updateState},onSwitchToEditMode:function(){var sld=this.panel.getSLDiagram();sld.dropIndex()},onSwitchToViewMode:function(){var sld=this.panel.getSLDiagram();sld.createIndex()}});Ext.define("Wasutp.Schemes.ConfirmImportModusScheme",{MESSAGE_UNDEFINED_SCHEME_PANEL:"Не задан обязательный параметр schemePanel",constructor:function(cfg){if(!cfg){cfg={}}if(!cfg.schemePanel){throw new Error(this.MESSAGE_UNDEFINED_SCHEME_PANEL)}this.schemePanel=cfg.schemePanel},getSLDiagram:function(){return this.schemePanel.getSLDiagram()},isSchemeEmpty:function(){return SLDiagram.Underscore.isEmpty(this.getSLDiagram().elements)},isNewScheme:function(){var id=this.getSLDiagram().getConfigProperty("scheme/id",null,false);var name=this.getSLDiagram().getConfigProperty("scheme/name",null,false);return Boolean(id===null||name===null||(typeof name==="string"&&name.length<=0))},WINDOW_TITLE:"Импорт схемы",YES_LABEL:"Да",NO_LABEL:"Нет",createWin:function(cfg){cfg=cfg||{};var handlers={};handlers.yes=this.confirmCallback.bind(this,true);handlers.no=this.confirmCallback.bind(this,false);var buttons={};buttons.yes=Ext.create("Ext.button.Button",{text:this.YES_LABEL,handler:handlers.yes});buttons.no=Ext.create("Ext.button.Button",{text:this.NO_LABEL,handler:handlers.no});return Ext.create("Ext.window.Window",{title:cfg.title||this.WINDOW_TITLE,modal:true,closeAction:"destroy",closable:false,layout:"fit",bodyBorder:false,border:false,width:300,height:150,html:'<p style="margin: 15px;">'+cfg.msg+"</p>",buttons:[buttons.yes,buttons.no]})},MESSAGE_CONFIRM_IMPORT1:"Вы желаете импортировать схему MODUS в редактор iSMS?",MESSAGE_CONFIRM_IMPORT2:"Вы желаете импортировать схему MODUS в редактор iSMS?",confirm:function(){var me=this;return new SLDiagram.Utils.Bluebird(function(resolve,reject){var msg;if(me.isSchemeEmpty()){msg=me.MESSAGE_CONFIRM_IMPORT1}else{msg=me.MESSAGE_CONFIRM_IMPORT2}me.confirmCallback=function(res){resolve(res);delete me.confirmCallback;me.win.close();delete me.win};me.win=me.createWin({msg:msg});me.win.show()})}});Ext.define("Wasutp.Schemes.Manager",{statics:{getInstance:function(){if(!this._instance){Wasutp.Schemes.Manager._instance=Ext.create("Wasutp.Schemes.Manager")}return Wasutp.Schemes.Manager._instance}},_getStore:function(){if(!this._store){this._store=[]}return this._store},add:function(panel){var store=this._getStore();var id=panel.getSLDiagram().getSchemeId();var me=this;if(panel&&this.isPanelAlreadyRegistred(panel)===false){store.push(panel);panel.getEvents().addListener("close",this._onCloseScheme,this,{single:true});return true}else{return false}},remove:function(panel){var store=this._getStore(),i,item;for(i=0;i<store.length;i++){item=store[i];if(panel===item){store.splice(i,1);return true}}return false},getSchemeIds:function(){var store=this._getStore(),i,res=[];for(i=0;i<store.length;i++){res.push(store[i].getSLDiagram().getSchemeId())}return res},getSchemePanelById:function(id){var store=this._getStore(),i,panel;for(i=0;i<store.length;i++){panel=store[i];if(panel.getSLDiagram().getSchemeId()==id){return panel}}return null},getSchemePanelByName:function(name){var store=this._getStore(),i,panel;for(i=0;i<store.length;i++){panel=store[i];if(panel.getSLDiagram().getConfigProperty("scheme/name",null,false)===name){return panel}}return null},getSchemePanelByWindowId:function(id){var store=this._getStore(),i,panel;if(typeof id==="number"){id=String(id)}if(typeof id!=="string"||id.length<=0){return null}for(i=0;i<store.length;i++){panel=store[i];if(panel.getSchemeWindowId()===id){return panel}}return null},_onCloseScheme:function(panel){this.remove(panel)},isPanelAlreadyRegistred:function(panel){var store=this._getStore(),i;for(i=0;i<store.length;i++){if(store[i]===panel){return true}}return false}});Ext.define("Wasutp.Schemes.tablelist.Telecontrol",{singleton:true,data:[{id:54,title:"Сегмент сбора 1","default":true},{id:57,title:"Сегмент сбора 2","default":true},{id:33,title:"Коммутационные аппараты","default":false},{id:35,title:"Устройства СРЗиА","default":false}],getData:function(){return this.data}});Ext.define("Wasutp.Schemes.tablelist.Pullstate",{singleton:true,data:[{id:54,title:"Сегмент сбора 1","default":true},{id:57,title:"Сегмент сбора 2","default":true},{id:29,title:"Электрический режим","default":false},{id:33,title:"Коммутационные аппараты","default":false},{id:116,title:"Прочие параметры","default":false},{id:35,title:"Устройства СРЗиА","default":false}],getData:function(){return this.data}});Ext.define("Wasutp.Schemes.tablelist.Main",{singleton:true,data:[{id:54,title:"Сегмент сбора 1","default":true},{id:57,title:"Сегмент сбора 2","default":true},{id:29,title:"Электрический режим","default":false},{id:33,title:"Коммутационные аппараты","default":false},{id:116,title:"Прочие параметры","default":false},{id:35,title:"Устройства СРЗиА","default":false}],getData:function(){return this.data}});Ext.define("Wasutp.Schemes.tablelist.All",{requires:["Wasutp.Schemes.tablelist.Main","Wasutp.Schemes.tablelist.Pullstate","Wasutp.Schemes.tablelist.Telecontrol"],singleton:true});Ext.define("Wasutp.Schemes.DatasourceScaleField",{MESSAGE_UNDEFINED_SCHEME_SETTINGS:"Не задан обязательный параметр schemeSettings",MESSAGE_UNDEFINED_SCALE_VALUE_GETTER:"Не задан обязательный параметр scaleValueGetter",MESSAGE_UNDEFINED_SCALE_VALUE_SETTER:"Не задан обязательный параметр scaleValueSetter",defaultScale:1,constructor:function(cfg){if(!cfg){cfg={}}if(!cfg.schemeSettings){throw new Error(this.MESSAGE_UNDEFINED_SCHEME_SETTINGS)}else{this.schemeSettings=cfg.schemeSettings}if(!cfg.scaleValueGetter){throw new Error(this.MESSAGE_UNDEFINED_SCALE_VALUE_GETTER)}else{this.scaleValueGetter=cfg.scaleValueGetter}if(!cfg.scaleValueSetter){throw new Error(this.MESSAGE_UNDEFINED_SCALE_VALUE_SETTER)}else{this.scaleValueSetter=cfg.scaleValueSetter}this.field=null;this.onAfterRender=this.onAfterRender.bind(this);this.onDeleteDatasource=this.onDeleteDatasource.bind(this);this.onSetDatasource=this.onSetDatasource.bind(this);this.onChangeSelection=this.onChangeSelection.bind(this);this.onChangeValue=this.onChangeValue.bind(this);this.setEventListeners();return this},destructor:function(){this.cancelEventListeners()},getSelectedElement:function(){return this.schemeSettings.getSLDiagram().getSelectedElement(0)},checkboxLabel:"Инверсия",numberFieldLabel:"Коэффициент",createField:function(){var el=this.getSelectedElement();var valueType;var panel;var res;var me;if(el){valueType=el.getValueType()}else{valueType=null}panel=this.getPanel();if(this.field&&panel){panel.remove(this.field);this.field.removeListener("change",this.onChangeValue)}if(valueType==="boolean"){this.field=Ext.create("Ext.form.field.Checkbox",{fieldLabel:this.checkboxLabel});res=true}else{if(valueType==="number"){this.field=Ext.create("Ext.form.field.Number",{fieldLabel:this.numberFieldLabel});res=true}else{this.field=null;res=false}}if(res){this.field.on("change",this.onChangeValue,this);this.field.suspendEvents();this.updateFieldValue();this.field.resumeEvents()}if(res&&panel){panel.add(this.field)}else{if(res&&!panel){me=this;this.schemeSettings.getEventEmitter().once("afterrender",function(){var panel=me.getPanel();if(panel&&me.field){panel.add(me.field)}})}}return res},getField:function(){if(this.field){return this.field}else{if(this.createField()){return this.field}else{return null}}},updateFieldValue:function(){var el=this.getSelectedElement();if(!el){return false}var value=el[this.scaleValueGetter]();return this.setValue(value)},getValue:function(){var value;if(this.field){if(this.field instanceof Ext.form.field.Number){return Number(this.field.getValue())}else{if(this.field instanceof Ext.form.field.Checkbox){value=this.field.getValue();return((value)?-1:1)}else{return null}}}else{return null}},setValue:function(value){if(this.field){if(this.field instanceof Ext.form.field.Number){if(SLDiagram.isNumber(value)){this.field.setValue(Number(value));return true}else{return false}}else{if(this.field instanceof Ext.form.field.Checkbox){if(SLDiagram.isNumber(value)){value=Number(value);if(value>0){value=false}else{value=true}}else{if(typeof value!=="boolean"){value=Boolean(value)}}this.field.setValue(value);return true}else{return false}}}else{return false}},getPanel:function(){if(this.schemeSettings.settingsPanel){return this.schemeSettings.settingsPanel}else{return null}},getSLDiagram:function(){return this.schemeSettings.getSLDiagram()},updateElementValue:function(){if(!this.field){return false}var el=this.getSelectedElement();if(!el){return false}var value=this.getValue();el[this.scaleValueSetter](value);return true},resetElementDefaultValue:function(){var el=this.getSelectedElement();if(!el){return false}el[this.scaleValueSetter](this.defaultScale);return true},onAfterRender:function(){},onSetDatasource:function(){this.updateElementValue()},onDeleteDatasource:function(){this.resetElementDefaultValue()},onChangeSelection:function(){this.createField()},onChangeValue:function(){this.updateElementValue()},setEventListeners:function(){var ee=this.schemeSettings.getEventEmitter();var sld=this.getSLDiagram();ee.on("setdatasource",this.onSetDatasource);ee.on("deletedatasource",this.onDeleteDatasource);sld.events.listen("changeSelection",this.onChangeSelection,{anyContext:true},this)},cancelEventListeners:function(){var ee=this.schemeSettings.getEventEmitter();var sld=this.getSLDiagram();ee.removeListener("setdatasource",this.onSetDatasource);ee.removeListener("deletedatasource",this.onDeleteDatasource)}});Ext.define("Wasutp.Schemes.NewSchemeTableModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"number"},{name:"title",type:"string"},{name:"default",type:"boolean"}]});Ext.define("Wasutp.Schemes.NewSchemeSettings",{requires:["Wasutp.Schemes.NewSchemeTableModel","Wasutp.Schemes.DatasourceScaleField","Wasutp.Schemes.tablelist.All"],params:{},sldiagram:null,schemePanel:null,datasourceName:"main",constructor:function(cfg){var me=this,onEditDataFn;this.params=cfg.params;this.sldiagram=cfg.sldiagram;this.schemePanel=cfg.schemePanel;var sld=this.sldiagram;sld.events.listen("changeSelection",me.onChangeSelection,{block:true},me)},getEventEmitter:function(){if(!this._eventEmitter){this._eventEmitter=new SLDiagram.Utils.EventEmitter()}return this._eventEmitter},getSchemePanel:function(){if(this.schemePanel){return this.schemePanel}else{return null}},pidField:null,getPidField:function(){var me=this;if(me.pidField===null){me.pidField=Ext.create("Ext.form.field.Number",{fieldLabel:"Параметр",minValue:0,value:(this.params&&typeof this.params.pidFieldValue!=="undefined")?this.params.pidFieldValue:0,disabled:this._getDisableChangeDatasourcesState(),validator:function(value){if(me._getDisableChangeDatasourcesState()){return me.disableChangeDatasourcesErrorMessage}else{return true}},listeners:{change:function(scope,newValue,oldValue,eOpts){var fn=me._getOnEditData();fn()}}})}return me.pidField},idTableField:null,getIdTableField:function(){var me=this;if(me.idTableField===null){me.idTableField=Ext.create("Ext.form.field.ComboBox",{fieldLabel:"Подсистема",store:this.getTableStore(),queryMode:"local",displayField:"title",valueField:"id",editable:Boolean(SLDiagram.debugMode),newSchemeSettings:this,disabled:this._getDisableChangeDatasourcesState(),validator:function(value){if(me._getDisableChangeDatasourcesState()){return me.disableChangeDatasourcesErrorMessage}else{return true}},getNumberValue:function(){var value=this.getValue();if(!isNaN(value)){value=Number(value)}else{value=null}return value},listeners:{change:function(scope,newValue,oldValue,eOpts){var fn=me._getOnEditData();fn()},expand:function(field){var picker=field.getPicker();var el=picker.el;el.dom.style.zIndex=99999}}})}return me.idTableField},tableStore:null,_tableDataClassName:"Main",getTableStore:function(){var me;if(!this.tableStore){me=this;this.tableStore=Ext.create("Ext.data.Store",{model:"Wasutp.Schemes.NewSchemeTableModel",data:Wasutp.Schemes.tablelist[this._tableDataClassName].getData(),autoLoad:true})}return this.tableStore},getDefaultValueFromTableStore:function(){var store=this.getTableStore();var id=store.find("default",true,null,null,null,true);if(typeof id==="number"||isNaN(id)===false){id=Number(id)}else{return null}var row=store.getAt(id);var res=row.get("id");return res},setFieldValue:function(params){var me=this;if(params&&(typeof params.pidFieldValue!=="undefined")){me.pidField.setValue(params.pidFieldValue)}if(params&&(typeof params.idTableFieldValue!=="undefined")){me.idTableField.setValue(params.idTableFieldValue)}if(params&&(typeof params.paramId!=="undefined")){me.params.paramId=params.paramId}if(params&&(typeof params.schemeId!=="undefined")){me.params.schemeId=params.schemeId}if(params&&(typeof params.elementTypeId!=="undefined")){me.params.elementTypeId=params.elementTypeId}},_scaleValueGetter:"getMainDatasourceScale",_scaleValueSetter:"setMainDatasourceScale",onChangeSelection:function(events,type,data){var me=this;this.updateVisibleState();try{var sld=this.getSLDiagram();var el=this.getSelectedElement();var t;var schemeId;var ids;var i,id,successId,store;if(el!==null){t=el.type;if(t.isMaybeActive.call(el)===false){me.setFieldValue({pidFieldValue:null,idTableFieldValue:null,paramId:null,schemeId:null,elementTypeId:null});return}schemeId=t.getId.call(el);ids=null;store=sld.getSchemeAndDatabaseIds();ids=store.searchBySchemeId(schemeId);successId=false;for(i in ids){if(ids.hasOwnProperty(i)){id=ids[i];if(id.regim===this.getRegim()){ids=id;successId=true;break}}}if(!successId){ids=null}if(ids===null){me.clearData();ids={ID_DATABASE:null,ID_SCHEME:schemeId,ID_TABLE:this.getDefaultValueFromTableStore()}}var params={pidFieldValue:ids.ID_DATABASE,paramId:ids.ID_SCHEME,idTableFieldValue:((isNaN(ids.ID_TABLE)===false)?Number(ids.ID_TABLE):ids.ID_TABLE),schemeId:sld.getConfigProperty("scheme/id"),elementTypeId:t.id};me._getOnEditData().disable();me.setFieldValue(params);me._getOnEditData().enable()}else{me.clearData();return}}catch(ex){console.error("ERROR: error at exec NewSchemeSettings.js -> onChangeSelection");me.clearData();return}},getTitle:function(){var el,ds,name1,name2,res;el=this.getSelectedElement();name1="Источник данных";name2="Состояние КА";if(el){ds=el.getType().getDatasourcesNames();if(ds.length>=2){res=name2}else{res=name1}}else{res="Источник данных"}return res},settingsPanel:null,getSettingsPanel:function(){var me=this;var datasourceScale=this.getDatasourceScaleField();var datasourceScaleField=((datasourceScale)?datasourceScale.getField():null);if(me.settingsPanel===null){me.settingsPanel=Ext.create("Ext.panel.Panel",{title:this.getTitle(),width:"100%",flex:1,layout:"form",maxHeight:130,height:130,minHeight:130,border:0,bodyPadding:5,newSchemeSettings:this,collapsed:true,collapsible:true,collapseMode:"header",collapseDirection:"bottom",items:[me.getPidField(),me.getIdTableField(),datasourceScaleField],listeners:{afterrender:function(panel,eOpts){var newSchemeSettings=panel.newSchemeSettings;newSchemeSettings.afterRender(panel);newSchemeSettings._initHeaderEvents()}}});me.sldiagram.events.listen("afterSaveScheme",me.afterSaveScheme,{anyContext:true},me);me.sldiagram.events.listen("beforeSaveScheme",me.beforeSetSettings,{anyContext:true},me)}return me.settingsPanel},afterRender:function(panel){var dropTarget,dom;if(typeof panel==="undefined"){return}dom=panel.getEl();if(dom){dom=dom.dom}else{return}if(!this._getDisableChangeDatasourcesState()){dropTarget=Ext.create("Ext.dd.DropTarget",dom,{ddGroup:"secondGridDDGroup",newSchemeSettings:panel.newSchemeSettings,notifyDrop:this.onDrop})}this.getEventEmitter().emit("afterrender")},onDrop:function(source,e,data){var newSchemeSettings=this.newSchemeSettings;var databaseId=SLDiagram.getProperty(data,"records/0/raw/ID");var pidField;var tableField;if(SLDiagram.isNumber(databaseId)){databaseId=Number(databaseId);newSchemeSettings.setFieldValue({pidFieldValue:databaseId,idTableFieldValue:54})}},clearData:function(){var me=this;me.setFieldValue({pidFieldValue:null,paramId:null,idTableFieldValue:null,schemeId:null,elementTypeId:null})},updateElement:function(params){var nss=this;var el=this.getSelectedElement();if(!(el)){return false}var t=el.type;if(!(t.isMaybeActive.call(el))){return false}if(!(params&&params.paramId)){return false}t.setId.call(el,Number(params.paramId));return true},queue:null,checkWithQueue:function(){if(this.queue&&this.queue.abort&&this.queue.aborted===false&&this.queue.finished!==true){this.queue.abort()}if(!(this.queue)){this.queue=new SLDiagram.Queue2();var q=this.queue;q.newSchemeSettings=this;q.checkData=function(q){var nss=q.newSchemeSettings,pid;pid=nss._getPidFieldValue();if((pid>0||pid===null)&&nss.idTableField.getNumberValue()!==null&&nss.params&&nss.params.elementTypeId){q.next("success")}else{var msg=("Невозможно выполнить привязку источника данных при отсутствии обязательных параметров или их некорректного заполнения");if(SLDiagram.debugMode){console.error("ERROR: "+msg,"pidFieldValue:",nss._getPidFieldValue(),"idTableFieldValue:",nss.idTableField.getNumberValue())}nss._sendMessage({last_res:false,last_res_message:msg,pidFieldValue:nss._getElementIdInDatabase(),paramId:nss._getElementIdInScheme()})}};q.checkSchemeId=function(queue){var nss=queue.newSchemeSettings;var sld=nss.sldiagram;var id=sld.getConfigProperty("scheme/id",null,false);if(id===null){queue.next("no")}else{if(SLDiagram.isNumber(id)){queue.next("yes")}else{queue.next("no")}}};q.showAlertDialog=function(queue){Ext.Msg.show({title:"Привязка источника данных",msg:"Для привязки источника данных необходимо сначала сохранить схему. Выполнить это сейчас?",buttons:Ext.Msg.YESNO,fn:function(btn,text){if(btn==="yes"){queue.next("yes")}else{queue.next("no")}}})};q.showSaveDialog=function(queue){var nss=this;var sp=nss.schemePanel;sp.childrens.toolbars.actions.saveas.call(sp)};q.success=function(queue){var nss=queue.newSchemeSettings;nss.setSettings()};q.functions={start:{fn:q.checkData,scope:this,results:{success:"checkSchemeId"}},checkSchemeId:{fn:q.checkSchemeId,scope:this,results:{yes:"success",no:"showAlertDialog"}},showAlertDialog:{fn:q.showAlertDialog,scope:this,results:{yes:"showSaveDialog"}},showSaveDialog:{fn:q.showSaveDialog,scope:this,results:{yes:"success"}},success:{fn:q.success,scope:this}}}this.queue.start()},afterSaveScheme:function(events,type,data){var q=this.queue;if(q&&q.next){q.next("yes")}},beforeSetSettings:function(){var t=this;var sld=t.sldiagram;if(!(sld.schemeAndDatabaseIds)){sld.initSchemeAndDatabaseIds()}if(!t.params.paramId){t.params.paramId=sld.getNextSchemeId()}},afterSetSettings:function(){var params={paramId:this.params.paramId};this.updateElement(params)},_getSchemeAndDatabaseIds:function(){return this.getSLDiagram().getSchemeAndDatabaseIds()},_getParamId:function(){var sld=this.getSLDiagram();var el=this.getSelectedElement();var id;if(el===null){return sld.getNextSchemeId()}else{id=el.getId();if(id===null){return sld.getNextSchemeId()}else{return id}}},_getSchemeId:function(){var sld,id;sld=this.getSLDiagram();id=sld.getConfigProperty("scheme/id",null,false);return id},_getElementIdInScheme:function(){return this._getParamId()},_getElementIdInDatabase:function(){var value=this.getPidField().getValue();value=SLDiagram.Utils.anyStringToNumber(value);return value},_getPidFieldValue:function(){return this._getElementIdInDatabase()},_setDataSource:function(callback){var me=this,params,elementTypeId,sld,el,activeEls,nextId,failure,gtype,schemeAndDatabaseIds,addRes,delRes;if(typeof callback!=="function"){callback=function(){}}sld=this.sldiagram;el=this.getSelectedElement();activeEls=sld.searchActiveElementsById(this.params.paramId);if(activeEls&&activeEls.length>1){nextId=sld.getNextSchemeId();el.setId(nextId);this.setFieldValue({paramId:nextId})}elementTypeId=((this.params.elementTypeId)?this.params.elementTypeId:null);params={pidFieldValue:this._getPidFieldValue(),idTableFieldValue:this.idTableField.getNumberValue(),paramId:this._getParamId(),elementTypeId:elementTypeId,regim:this.getRegim(),schemeId:this._getSchemeId()};schemeAndDatabaseIds=sld.getSchemeAndDatabaseIds();delRes=schemeAndDatabaseIds.deleteBySchemeIdAndRegim(params.paramId,params.regim);addRes=schemeAndDatabaseIds.add({GTYPE:null,ID_SCHEME:params.paramId,ID_DATABASE:params.pidFieldValue,ID_TABLE:params.idTableFieldValue,regim:params.regim,da_sys_gtopt_define_alias:null,meas_val_id_param:null,source_id:null});this.updateElement({paramId:params.paramId});this.getEventEmitter().emit("setdatasource");return callback(null,addRes)},_deleteDataSource:function(callback){var params,me=this,errMsg="Неудачное выполнение запроса на удаление источника данных",schemeAndDatabaseIds,res;if(typeof callback!=="function"){callback=function(){}}params={scheme_id:this._getSchemeId(),data_sources:[{comp_id:this._getElementIdInScheme(),type:this.getRegim()}]};schemeAndDatabaseIds=this._getSchemeAndDatabaseIds();res=schemeAndDatabaseIds.deleteBySchemeIdAndRegim(params.data_sources[0].comp_id,params.data_sources[0].type);this.getEventEmitter().emit("deletedatasource");return callback(null,res)},setSettings:function(callback){var pid,callback0;if(typeof callback!=="function"){callback=function(){}}callback0=function(err){if(err){console.error(err)}return callback.apply(this,arguments)};callback0=SLDiagram.Underscore.once(callback0);pid=this._getPidFieldValue();if(pid===null){this._deleteDataSource(callback0)}else{this._setDataSource(callback0)}},getRegim:function(){return 2},getSLDiagram:function(){return this.sldiagram},getSelectedElement:function(){var sld,el;sld=this.getSLDiagram();if(sld){el=sld.getSelectedElement(0)}else{el=null}return el},getVisibleState:function(){var el,t,ds,res;el=this.getSelectedElement();if(el){t=el.getType();ds=t.getDatasourcesNames();res=Boolean(ds.indexOf(this.getDatasourceName())>=0)}else{res=false}return res},updateVisibleState:function(){var state,panel;state=this.getVisibleState();panel=this.getSettingsPanel();if(state){panel.show();panel.setTitle(this.getTitle())}else{panel.hide()}},getDatasourceName:function(){return this.datasourceName},_getElementDescription:function(){var el;el=this.getSelectedElement();return el.type.description},_getTableName:function(){var field,v;field=this.getIdTableField();v=field.getRawValue();if(SLDiagram.isNumber(v)){return null}else{return v}},_compareId:function(id){var el,id0;if(!SLDiagram.isNumber(id)){return null}else{id=Number(id)}el=this.getSelectedElement();id0=Number(el.type.getId.call(el));return Boolean(id===id0)},_sendMessage:function(data){var msg,compare,elDesc,elId,tableName,dbId,last_res_message,title;compare=this._compareId(data.paramId);if(compare===null){console.error("ERROR: Невозможно сравнить идентификаторы");return}elDesc=this._getElementDescription();elId=SLDiagram.Utils.anyStringToNumber(data.paramId);tableName=this._getTableName();if(!tableName){tableName=""}dbId=SLDiagram.Utils.anyStringToNumber(data.pidFieldValue);if(dbId===null){dbId=""}title="Выполнение команды";if(Boolean(data.last_res)){if(compare){msg='Обновлена настройка для объекта схемы "'+elDesc+'" (ID "'+String(elId)+'") на параметр подсистемы "'+tableName+'" (ID "'+String(dbId)+'")'}else{msg='Добавлена настройка для объекта схемы "'+elDesc+'" (ID "'+String(elId)+'") на параметр подсистемы "'+tableName+'" (ID "'+String(dbId)+'")'}SLDiagram.Debug.addMessage(title,msg,SLDiagram.Debug.statuses.INFO)}else{if(compare){msg='Ошибка при обновлении настройки для объекта схемы "'+elDesc+'" (ID "'+String(elId)+'") на параметр подсистемы "'+tableName+'" (ID "'+String(dbId)+'")'}else{msg='Ошибка при добавлении настройки для объекта схемы "'+elDesc+'" (ID "'+String(elId)+'") на параметр подсистемы "'+tableName+'" (ID "'+String(dbId)+'")'}last_res_message=SLDiagram.getProperty(data,"last_res_message");if(last_res_message!==null){msg=msg+": "+last_res_message}SLDiagram.Debug.addMessage(title,msg,SLDiagram.Debug.statuses.ERROR,{showPopUp:false})}},_sendMessageOnDeleteDataSource:function(request,response){var _=SLDiagram.Underscore;var d;var title="Удаление источника данных";var params,delMsg;if(response&&response.data&&response.data.last_res){d=response.data;if(d.data_sources&&d.data_sources.length>0){params={data_source_type:{id:"",name:""},el:{id:"",name:""}};params.el.id=d.data_sources[0].comp_id;params.el.name=this._getElementDescription();params.data_source_type.name=this.getTitle();delMsg='Удалён источник данных "'+params.data_source_type.name+'" из объекта схемы "'+params.el.name+'" (ID "'+params.el.id+'")';SLDiagram.Debug.addMessage(title,delMsg,SLDiagram.Debug.statuses.INFO)}else{if(request&&request.data_sources&&request.data_sources.length>0){params={data_source_type:{id:"",name:""},el:{id:"",name:""}};params.el.id=String(request.data_sources[0].comp_id);params.el.name=this._getElementDescription();params.data_source_type.name=this.getTitle();delMsg='Источник данных "'+params.data_source_type.name+'" объекта схемы "'+params.el.name+'" (ID "'+params.el.id+'") не был удалён. Вероятно он отсутствует в БД.';SLDiagram.Debug.addMessage(title,delMsg,SLDiagram.Debug.statuses.INFO)}}}else{if(request&&request.data_sources&&request.data_sources.length>0){params={data_source_type:{id:"",name:""},el:{id:"",name:""}};params.el.id=String(request.data_sources[0].comp_id);params.el.name=this._getElementDescription();params.data_source_type.name=this.getTitle();delMsg='Не удалось выполнить удаление источника данных "'+params.data_source_type.name+'" объекта схемы "'+params.el.name+'" (ID "'+params.el.id+'")';SLDiagram.Debug.addMessage(title,delMsg,SLDiagram.Debug.statuses.ERROR,{showPopUp:false})}}},_getOnEditData:function(){var me;if(!this._onEditData){me=this;this._onEditData=SLDiagram.AsyncFunction.create(function(){me.setSettings()},{timeout:500,scope:this});this.schemePanel.getEditModeButton().on("switchToViewMode",function(){me._onEditData.force()});this.schemePanel.getEvents().on("save",function(){me._onEditData.force()})}return this._onEditData},_initHeaderEvents:function(){var panel,header;panel=this.getSettingsPanel();header=panel.getHeader();header.addListener("click",function(){this._onHeaderClick()},this)},_onHeaderClick:function(){var panel=this.getSettingsPanel();panel.toggleCollapse()},disableChangeDatasourcesErrorMessage:"Установлен запрет на редактирование источников данных",_getDisableChangeDatasourcesState:function(){return this.getSchemePanel().getDisableChangeDatasourcesState()},getDatasourceScaleField:function(){if(!this._datasourceScaleField){this._datasourceScaleField=Ext.create("Wasutp.Schemes.DatasourceScaleField",{schemeSettings:this,scaleValueGetter:this._scaleValueGetter,scaleValueSetter:this._scaleValueSetter})}return this._datasourceScaleField}});Ext.define("Wasutp.Schemes.NewSchemePropertiesModel",{extend:"Ext.data.Model",statics:{_factoryType:function(type,propDesc){if(SLDiagram.TreeStoreItem.isInstanceOf(propDesc)){propDesc=propDesc.getValue()}if(!SLDiagram.properties.Prototype.isInstanceOf(propDesc)){throw new Error("Недопустимый тип аргумента propDesc")}var fullPath=propDesc.getPath();var model=Ext.create("Wasutp.Schemes.NewSchemePropertiesModel",{path:SLDiagram.Utils.getPath(fullPath),name:SLDiagram.Utils.getName(fullPath),fullPath:fullPath,description:propDesc.getDesc(),type:type,value:"",defaultValue:null,customValue:false,propertyDescriptor:propDesc,leaf:((type==="object")?false:true)});return model},factory:function(propDesc){return Wasutp.Schemes.NewSchemePropertiesModel._factoryType("auto",propDesc)},factoryEmpty:function(fullPath){var name=SLDiagram.Utils.getName(fullPath);var path=SLDiagram.Utils.getPath(fullPath);return Ext.create("Wasutp.Schemes.NewSchemePropertiesModel",{path:path,name:name,fullPath:fullPath,description:name,type:"object",value:null,defaultValue:null,customValue:false,propertyDescriptor:null})},factoryObject:function(propDesc){return Wasutp.Schemes.NewSchemePropertiesModel._factoryType("object",propDesc)}},fields:[{name:"path",type:"string"},{name:"name",type:"string"},{name:"fullPath",type:"string"},{name:"description",type:"string"},{name:"type",type:"string"},{name:"value"},{name:"defaultValue"},{name:"customValue",type:"boolean"},{name:"propertyDescriptor"}],getPropertyDescriptor:function(){return this.get("propertyDescriptor")}});Ext.define("Wasutp.Schemes.extends.VoltageInScheme",{extend:"Ext.window.Window",constructor:function(cfg){if(cfg.data){this.setData(cfg.data)}else{this.setData(null)}if(cfg.sldiagram){this.setSLDiagram(cfg.sldiagram)}else{this.setSLDiagram(null)}cfg=SLDiagram.Underscore.defaults(cfg,this._getDefaultCfg());var res=this.callParent([cfg]);return res},setData:function(data){var i;if(!this.store){this.store=Ext.create("Ext.data.Store",{fields:["name","color"],data:[],sorters:[{sorterFn:function(o1,o2){var v1=Number(o1.get("name"));var v2=Number(o2.get("name"));if(v1===v2){return 0}else{return((v1<v2)?-1:1)}}}]})}this.store.removeAll(true);if(typeof data==="object"&&data!==null){for(i in data){if(data.hasOwnProperty(i)){if(SLDiagram.isColor(data[i])){this.store.add({name:i,color:data[i]})}}}return true}else{return false}},findColorByName:function(name){var store=this.getStore();var model=store.findRecord("name",name);if(model){return model.get("color")}else{return null}},getData:function(){var res={};this.store.each(function(item){res[item.get("name")]=item.get("color")});return res},getStore:function(){return this.store},setCallback:function(callback){if(typeof callback==="function"){this._callback=SLDiagram.Underscore.once(callback);return true}else{return false}},getCallback:function(){if(typeof this._callback==="function"){return this._callback}else{return function(){}}},_getDefaultCfg:function(){return{title:"Классы напряжений",modal:true,width:350,heigth:200,minWidth:350,minHeight:200,maxHeight:400,layout:"fit",items:[this._getTable()],fbar:this._getFootbar()}},_getTable:function(){var me=this;if(!this._table){this._table=Ext.create("Ext.grid.Panel",{store:this.getStore(),columns:[{text:"Класс напряжения, кВ",dataIndex:"name",flex:3},{text:"Цвет",dataIndex:"color",flex:2,renderer:function(value,metaData,record){var divStyle=["display: inline-block;","width: 10px;","height: 10px;","background-color: "+value+";","margin-left: 0px;","margin-right: 12px;","margin-top: 4px;","border: 1px solid #000000;"].join(" ");return'<div style="'+divStyle+'"></div><span>'+value+"</span>"}}],listeners:{itemdblclick:function(table,record,item,index,e,eOpts){me._onRowEdit(record)}}})}return this._table},_getFootbar:function(){return[{type:"button",text:"Добавить",voltageInScheme:this,handler:function(){this.voltageInScheme._addRow()}},{type:"button",text:"Удалить",voltageInScheme:this,handler:function(){this.voltageInScheme._delRow()}},"->",{type:"button",text:"ОК",voltageInScheme:this,handler:function(){this.voltageInScheme._okClick()}},{type:"button",text:"Отмена",voltageInScheme:this,handler:function(){this.voltageInScheme._cancelClick()}}]},_cancelClick:function(){this.close()},_getRowEditing:function(){if(!this._rowEditing){this._rowEditing=Ext.create("Ext.grid.plugin.RowEditing",{clicksToMoveEditor:1,autoCancel:false,voltageInScheme:this,listeners:{validateedit:function(editor,context,eOpts){var values=context.newValues;return this.voltageInScheme._validateValues(values.name,values.color)}}})}return this._rowEditing},_getRowEditor:function(record){var rowEditor,data={color:"#FFFFFF",name:"0"},isModel=false,mode;if(record){isModel=Boolean(record instanceof Ext.data.Model);if(isModel||(typeof record==="object"&&record!==null&&typeof record.get==="function")){data.name=record.get("name");data.color=record.get("color");mode="edit"}else{if(typeof record==="object"&&record!==null){data.name=record.name;data.color=record.color;mode="edit"}}}else{mode="new"}rowEditor=Ext.create("Wasutp.Schemes.extends.VoltageRowEditor",{data:data,voltageEditor:this});rowEditor.setMode(mode);if(isModel){rowEditor.setRecord(record)}return rowEditor},_addRow:function(){var rowEditor=this._getRowEditor(),me=this;rowEditor.setCallback(function(err,res){me._afterRowCreate(err,res)});rowEditor.show()},_delRow:function(){var store=this.getStore();var table=this._getTable();var row=table.getSelectionModel().getSelection();var voltage=row[0].get("name");if(SLDiagram.isNumber(voltage)&&this._checkUsingVoltage(Number(voltage))){SLDiagram.Debug.addMessage("Удаление класса напряжения","Невозможно удалить используемый в схеме класс напряжения "+String(voltage)+"кВ",SLDiagram.Debug.statuses.INFO,{showPopUp:true});return}store.remove(row)},_validateValues:function(name,color){var checkName=Boolean(SLDiagram.isNumber(name));var checkColor=Boolean(typeof color==="string"&&color.length>0&&SLDiagram.isColor(color));return Boolean(checkColor&&checkName)},_okClick:function(){var callback=this.getCallback();callback(null,this.getData());this.close()},_onClose:function(){var callback=this.getCallback();callback(null,null)},_onRowEdit:function(record){var rowEditor,me=this;rowEditor=this._getRowEditor(record);rowEditor.setCallback(function(err,res){me._afterRowEdit(err,res)});rowEditor.show()},_afterRowEdit:function(err,res){if(res&&res.record&&this._validateValues(res.name,res.color)){res.record.set("name",res.name);res.record.set("color",res.color)}},_afterRowCreate:function(err,res){var store;if(res&&this._validateValues(res.name,res.color)){store=this.getStore();store.add({name:res.name,color:res.color})}},setSLDiagram:function(sld){if(SLDiagram.isSLDiagram(sld)||sld===null){this._sldiagram=sld;return true}else{return false}},getSLDiagram:function(){return((this._sldiagram)?this._sldiagram:null)},_checkUsingVoltage:function(voltage){return SLDiagram.Utils.checkUsingVoltage(this.getSLDiagram(),voltage)},listeners:{close:function(panel,eOpts){panel._onClose()}}});Ext.define("Wasutp.Schemes.extends.PropertiesStore",{extend:"Ext.data.TreeStore",requires:["Wasutp.Schemes.NewSchemePropertiesModel"],constructor:function(cfg){var res=this.callParent(arguments);if(cfg&&cfg.propertiesEditor){this.propertiesEditor=cfg.propertiesEditor}else{throw new Error("Не определён обязательный параметр propertiesEditor")}this.setRootNode({expanded:true,name:"Properties",children:[]});this.addEvents("afterUpdateFullData");return res},model:Wasutp.Schemes.NewSchemePropertiesModel,getPropertiesEditor:function(){if(this.propertiesEditor){return this.propertiesEditor}else{throw new Error("Не определено свойство propertiesEditor")}},_getConfigDescriptor:function(el){if(SLDiagram.isElement(el)){return el.getConfigDescriptor()}else{if(SLDiagram.isType(el)){return el.getConfigDescriptor()}else{if(SLDiagram.isSLDiagram(el)){return el.getConfigDescriptor()}else{throw new Error("Недопустимый тип аргумента el")}}}},_getMergedStore:function(){if(this._mergedStore){return this._mergedStore}var me=this;var propsEd=this.getPropertiesEditor();var els=propsEd.getElements();var stores=[];var i,el;if(els.length>0){for(i=0;i<els.length;i++){el=els[i];stores.push(this._getConfigDescriptor(el))}this._mergedStore=new SLDiagram.properties.MergedStore({sldiagram:propsEd.getSLDiagram(),stores:stores});setTimeout(function(){delete me._mergedStore;me.fireEvent("afterUpdateFullData")},10);return this._mergedStore}else{if(this._mergedStore){delete this._mergedStore}return null}},_pathDelimiter:"/",setNode:function(path,leaf,force){var items=path.split(this._pathDelimiter);var i,item;var current=this.getRootNode();var node;var currentPath="";SLDiagram.Utils.clearEmptyItems(items);for(i=0;i<items.length;i++){item=items[i];currentPath=currentPath+((currentPath.length>0)?"/":"")+item;node=current.findChild("name",item);if(!node){if(force){node=Wasutp.Schemes.NewSchemePropertiesModel.factoryEmpty(currentPath);current.appendChild(node)}else{return false}}current=node}current.appendChild(leaf);return true},getNode:function(fullPath){var rootNode=this.getRootNode();return rootNode.findChild("fullPath",fullPath,true)},delNode:function(fullPath){var path=SLDiagram.Utils.getPath(fullPath);var parentNode=this.getNode(path);parentNode.eachChild(function(node){if(node.get("")){}});return true},delAllNodes:function(){var rootNode=this.getRootNode();rootNode.removeAll();return true},_createModel:function(item){var propDesc,model,els;if(SLDiagram.TreeStoreItem.isInstanceOf(item)){propDesc=item.getValue()}else{propDesc=item}if(!SLDiagram.properties.Prototype.isInstanceOf(propDesc)){return null}if(propDesc.getHidden()){return null}if(propDesc.getTreeStoreItem().hasChildren()){model=Wasutp.Schemes.NewSchemePropertiesModel.factoryObject(propDesc)}else{model=Wasutp.Schemes.NewSchemePropertiesModel.factory(propDesc)}els=this.getPropertiesEditor().getElements();if(model.get("name")==="figure"&&els.length>1){model.set("description",String(els.length)+" элемента(ов)")}return model},updateFullData:function(){var mergedStore;var me=this;var model,propDesc,item,value,els,storeItem;this.delAllNodes();mergedStore=this._getMergedStore();mergedStore.forEach(function(item){var fullPath=item.getPath(true);var path=item.getPath();if(fullPath===""){return}model=me._createModel(item);if(model){propDesc=model.getPropertyDescriptor();item=propDesc.getTreeStoreItem();if(propDesc&&item.hasChildren()===false){els=me.getPropertiesEditor().getElements();value=propDesc.getValueFromElements(els);value=propDesc.format(value)}else{value=null}model.set("value",value);me.setNode(path,model);if(propDesc&&item.hasChildren()){if(propDesc.getExpanded()){storeItem=me.getNode(fullPath);storeItem.expand()}if(propDesc&&propDesc.getRememberExpanded()){storeItem=me.getNode(fullPath);storeItem.on("expand",function(){me.setExpanded(fullPath,true)});storeItem.on("collapse",function(){me.setExpanded(fullPath,false)})}}}});return true},getPropertyDescriptors:function(path){var els=this.getPropertiesEditor().getElements();var res=[];var i,el;var desc;for(i=0;i<els.length;i++){el=els[i];try{desc=el.getConfigDescriptor().getChildByPath(path).getValue();res.push(desc)}catch(ex){}}return res},setExpanded:function(path,value){var descriptors=this.getPropertyDescriptors(path);var i;for(i=0;i<descriptors.length;i++){descriptors[i].setExpanded(value)}return true}});Ext.define("Wasutp.Schemes.extends.CellEditing",{extend:"Ext.grid.plugin.CellEditing",clicksToEdit:1,constructor:function(cfg){var res=this.callParent(arguments);if(cfg&&cfg.propertiesEditor){this.propertiesEditor=cfg.propertiesEditor}else{throw new Error("Не определён обязательный параметр propertiesEditor")}return res},getEditor:function(model){var res=this.callParent(arguments),propertyDescriptor=model.get("propertyDescriptor");res.setPropertyDescriptor(propertyDescriptor);return res},getPropertiesEditor:function(){return this.propertiesEditor},disableEventHandlers:function(){if(!this._disabledEventHandlerCounter){this._disabledEventHandlerCounter=0}this._disabledEventHandlerCounter++;return true},enableEventHandlers:function(){if(!this._disabledEventHandlerCounter){this._disabledEventHandlerCounter=0}if(this._disabledEventHandlerCounter>0){this._disabledEventHandlerCounter--;return true}else{return false}},isEnabledEventHandlers:function(){return Boolean(typeof this._disabledEventHandlerCounter==="undefined"||this._disabledEventHandlerCounter===0)},listeners:{beforeedit:function(editor,e,eOpts){this._value=e.value;var r=e.record;var t=r.get("type");var res=Boolean(t!=="object");editor.getPropertiesEditor().setEditProcess(res);return res},edit:function(editor,e,eOpts){if(!editor.isEnabledEventHandlers()){return false}var propsEd=editor.getPropertiesEditor();var record=e.record;var value=e.value;var res=false;if(e.value!==this._value){res=propsEd.updatePropertyValue(record,value)}propsEd.setEditProcess(false);if(propsEd.getNeedUpdate()===true){propsEd.changeSelection()}if(typeof this._value!=="undefined"){delete this._value}return res},canceledit:function(editor,e,eOpts){if(!editor.isEnabledEventHandlers()){return false}if(typeof this._value!=="undefined"){delete this._value}editor.getPropertiesEditor().setEditProcess(false);return true}}});Ext.define("Wasutp.Schemes.extends.CellEditor",{extend:"Ext.grid.CellEditor",constructor:function(cfg){var res=this.callParent(arguments);return res},getPropertyDescriptor:function(){if(SLDiagram.properties.Prototype.isInstanceOf(this.propertyDescriptor)){return this.propertyDescriptor}else{throw new Error("SLDiagram.ui.CellEditor.propertyDescriptor не существует или не является экземпляром SLDiagram.properties.Prototype")}},setPropertyDescriptor:function(pd){if(SLDiagram.properties.Prototype.isInstanceOf(pd)){this.propertyDescriptor=pd;if(this.field){this.field.propertyDescriptor=pd}else{console.warn("WARN: Не существует свойства field")}return true}else{return false}}});Ext.define("Wasutp.Schemes.extends.VoltageRowEditor",{requires:["Wasutp.ColorCombobox"],extend:"Ext.window.Window",constructor:function(cfg){var res;cfg=SLDiagram.Underscore.defaults(cfg,this._getDefaultCfg());res=this.callParent([cfg]);this.setMode("new");if(cfg){if(typeof cfg.callback==="function"){this.setCallback(cfg.callback)}if(typeof cfg.data==="object"){this.setData(cfg.data)}if(cfg.voltageEditor){this.setVoltageEditor(cfg.voltageEditor)}}return res},_getDefaultCfg:function(){return{modal:true,width:310,height:180,layout:"fit",items:this._getInsidePanel(),fbar:[this._getOkButton(),this._getCancelButton()]}},_getInsidePanel:function(){if(!this._insidePanel){this._insidePanel=Ext.create("Ext.panel.Panel",{padding:10,layout:"anchor",border:null,bodyStyle:"background-color: #dfe8f6;",items:this._getFormItems()})}return this._insidePanel},_getFormItems:function(){return[this._getNameField(),this._getColorField()]},_getNameField:function(){var me;if(!this._nameField){me=this;this._nameField=Ext.create("Ext.form.field.Number",{fieldLabel:"Класс напряжения, кВ",labelWidth:173,minValue:0,anchor:"100%",validator:function(){var NAME_WRONG_VALUE=me._validateResults.NAME_WRONG_VALUE,VOLTAGE_CLASS_EXISTS=me._validateResults.VOLTAGE_CLASS_EXISTS,validateRes=me._validate();switch(validateRes){case NAME_WRONG_VALUE.value:return NAME_WRONG_VALUE.explanation;case VOLTAGE_CLASS_EXISTS.value:return VOLTAGE_CLASS_EXISTS.explanation;default:return true}}})}return this._nameField},_getColorField:function(){var store,data=[],i,me;if(!this._colorField){me=this;this._colorField=Ext.create("Wasutp.ColorCombobox",{fieldLabel:"Цвет",editable:true,labelWidth:150,anchor:"100%",validator:function(){var COLOR_WRONG_VALUE=me._validateResults.COLOR_WRONG_VALUE,validateRes=me._validate();switch(validateRes){case COLOR_WRONG_VALUE.value:return COLOR_WRONG_VALUE.explanation;default:return true}}})}return this._colorField},_getOkButton:function(){var me=this;if(!this._okButton){this._okButton=Ext.create("Ext.button.Button",{text:"ОК",handler:function(){me._onOkClick()}})}return this._okButton},_onOkClick:function(){var callback,data,voltage;data=this.getData();voltage=data.name;if(this._checkVoltageClassExist(voltage)){SLDiagram.Debug.addMessage("Создание класса напряжения","Невозможно создать класс напряжения "+voltage+"кВ. Такой класс уже существует",SLDiagram.Debug.statuses.INFO);return}callback=this.getCallback();callback(null,data);this.close()},_getCancelButton:function(){var me;if(!this._cancelButton){me=this;this._cancelButton=Ext.create("Ext.button.Button",{text:"Отмена",handler:function(){me.close()}})}return this._cancelButton},_onClose:function(){var callback=this.getCallback();callback(null,null)},setData:function(data){var color,name;if(data&&SLDiagram.isNumber(data.name)&&SLDiagram.isColor(data.color)){name=this._getNameField();name.setValue(Number(data.name));color=this._getColorField();color.setValue(data.color);return true}else{return false}},getData:function(){var color,name,res;name=this._getNameField();color=this._getColorField();res={name:Number(name.getValue()),color:SLDiagram.toColor(color.getValue()),record:this.getRecord()};return res},setCallback:function(callback){if(typeof callback==="function"){this._callback=SLDiagram.Underscore.once(callback);return true}else{return false}},getCallback:function(){if(typeof this._callback==="function"){return this._callback}else{return function(){}}},setRecord:function(record){if(record instanceof Ext.data.Model){this._record=record;this.setMode("edit");return true}else{if(record===null){if(this._record){delete this._record}this.setMode("new");return true}else{return false}}},getRecord:function(){var data;if(this._record){return this._record}else{return null}},setVoltageEditor:function(voltageEditor){if(voltageEditor instanceof Wasutp.Schemes["extends"].VoltageInScheme||voltageEditor===null){this._voltageEditor=voltageEditor;return true}else{return false}},getVoltageEditor:function(){return((this._voltageEditor)?this._voltageEditor:null)},isNew:function(){return Boolean(this.getMode()==="new")},isEdit:function(){return Boolean(this.getMode()==="edit")},_checkVoltageClassExist:function(voltage){var voltageEditor,data;voltageEditor=this.getVoltageEditor();if(this.isNew()&&voltageEditor){data=voltageEditor.getData();return Boolean(data.hasOwnProperty(String(voltage)))}else{return false}},_mode:"new",setMode:function(mode){var nameField;if(typeof mode==="string"&&(mode==="new"||mode==="edit")){this._mode=mode;nameField=this._getNameField();if(this._mode==="edit"){nameField.disable()}else{nameField.enable()}return true}else{return false}},getMode:function(){return this._mode},_validateResults:{SUCCESS:{value:0,explanation:""},NAME_WRONG_VALUE:{value:1,explanation:"Недопустимое значение класса напряжения"},VOLTAGE_CLASS_EXISTS:{value:2,explanation:"Класс напряжения уже существует"},COLOR_WRONG_VALUE:{value:3,explanation:"Недопустимое значение цвета"}},_validate:function(){var name=this._getNameField().getValue();var checkName=Boolean(typeof name==="number"||(typeof name==="string"&&SLDiagram.isNumber(name)));if(!checkName){return this._onAfterValidate(this._validateResults.NAME_WRONG_VALUE.value)}var voltageClassExists=Boolean(this._checkVoltageClassExist(name));if(voltageClassExists){return this._onAfterValidate(this._validateResults.VOLTAGE_CLASS_EXISTS.value)}var color=this._getColorField().getValue();var checkColor=SLDiagram.isColor(color);if(!checkColor){return this._onAfterValidate(this._validateResults.COLOR_WRONG_VALUE.value)}return this._onAfterValidate(this._validateResults.SUCCESS.value)},_onAfterValidate:function(result){var button=this._getOkButton();if(result===this._validateResults.SUCCESS.value){button.enable()}else{button.disable()}return result},listeners:{close:function(rowEditor,eOpts){rowEditor._onClose()},afterrender:function(rowEditor){var mode,title,data;mode=rowEditor.getMode();var okBtn;if(mode==="new"){title="Создание нового класса";okBtn=this._getOkButton();okBtn.disable()}else{data=rowEditor.getData();title="Редактирование класса "+data.name+"кВ"}rowEditor.setTitle(title)}}});Ext.define("Wasutp.Schemes.NewSchemeSettingsTelecontrol",{extend:"Wasutp.Schemes.NewSchemeSettings",datasourceName:"telecontrol",getRegim:function(){return 5},getTitle:function(){return"Телеуправление"},_scaleValueGetter:"getTelecontrolDatasourceScale",_scaleValueSetter:"setTelecontrolDatasourceScale",_tableDataClassName:"Telecontrol",getDatasourceScaleField:function(){return null}});Ext.define("Wasutp.Schemes.NewSchemeSettingsPullState",{extend:"Wasutp.Schemes.NewSchemeSettings",datasourceName:"pullState",getRegim:function(){return 3},getTitle:function(){return"Положение тележки"},_scaleValueGetter:"getPullstateDatasourceScale",_scaleValueSetter:"setPullstateDatasourceScale",_tableDataClassName:"Pullstate"});Ext.define("Wasutp.Schemes.NewSchemeZoomModel",{extend:"Ext.data.Model",fields:[{name:"value",type:"number"},{name:"label",type:"string"}]});Ext.define("Wasutp.acl.Manager",{acl:null,getAcl:function(){var me=this;if(me.acl===null){me.acl=Ext.create("Wasutp.acl.Acl")}return me.acl},initAcl:function(params){var me=this,roles=params.roles||[],resources=params.resources||[],privileges=params.privileges||[],acl=me.getAcl();if(roles.length){for(var i in roles){acl.addRole(roles[i])}}if(resources.length){for(var i in resources){acl.addResource(resources[i])}}if(privileges.length){for(var i in privileges){acl.allow(privileges[i]["ROLE"],privileges[i]["RES"],privileges[i]["PRIVILEGE"])}}},isAllowed:function(role,resource,privilege){var me=this;return me.getAcl().isAllowed(role,resource,privilege)},amIAllowed:function(resource,privilege){var me=this;return me.getAcl().amIAllowed(resource,privilege)},aclFailureMessage:function(params){var title=params&&params.title?params.title:"Ошибка доступа";var message=params&&params.message?params.message:"У вас недостаточно прав для выполнения текущей операции";errorsHandler.addMessage(title,message,Wasutp.ErrorsHandler.error)},allow:function(role,resource,privilege){var me=this;return me.getAcl().allow(role,resource,privilege)},deny:function(role,resource,privilege){var me=this;return me.getAcl().deny(role,resource,privilege)}});Ext.define("Wasutp.acl.RolesManager",{win:null,windowId:"wasutp-server-roles-manager",data:{},winCls:"isms-roles-manager-window",roleRadioCls:"isms_acl_role_radio",show:function(){var me=this,desktop,aclManager=appHelper.getAclManager();if(!aclManager.amIAllowed("users","read")){aclManager.aclFailureMessage();return false}desktop=wasutpApp.getDesktop();me.win=desktop.getWindow(me.windowId);if(me.win){me.win.show()}else{me.getData()}},getData:function(){var me=this;Wasutp.Ajax.request({url:"/json/acl/get-users-data",params:{},success:function(response){if(response.data){me.data=response.data;me.showWindow()}}})},showWindow:function(){var me=this,desktop=wasutpApp.getDesktop();me.win=desktop.createWindow({id:me.windowId,title:"Права доступа",height:600,width:900,iconCls:"wasutp-change-acl",cls:me.winCls,layout:"fit",items:[me.getGrid()],bbar:["->",{xtype:"button",text:"OK",handler:function(){me.saveRoles()}},{xtype:"button",text:"Отмена",handler:function(){me.win.close()}}]});me.win.show()},getGrid:function(){var me=this,gridData=[],fields=[{name:"name"},{name:"login"}],columns=[{text:"Пользователь",locked:true,width:200,sortable:false,dataIndex:"name"}],store,grid;if(!Ext.isEmpty(me.data.roles)){for(var r in me.data.roles){var role=me.data.roles[r];fields.push({name:role.ALIAS});columns.push({text:role.NAME,dataIndex:role.ALIAS,width:130,sortable:true,renderer:change,align:"center"})}}if(!Ext.isEmpty(me.data.users)){for(var u in me.data.users){var user=me.data.users[u],d={name:user.NAME,login:user.LOGIN};if(!Ext.isEmpty(me.data.roles)){for(var r in me.data.roles){var role=me.data.roles[r];if(user.ROLE_ID===role.ID){d[role.ALIAS]=1}else{d[role.ALIAS]=0}}}gridData.push(d)}}function change(val,style,record){if(val===1&&record.data&&record.data.name){return'<input class="'+me.roleRadioCls+'" type="radio" name="'+record.data.name+'" checked>'}return'<input class="'+me.roleRadioCls+'" type="radio" name="'+record.data.name+'">'}store=Ext.create("Ext.data.Store",{fields:fields,data:gridData});grid=Ext.create("Ext.grid.Panel",{store:store,columnLines:true,columns:columns,viewConfig:{stripeRows:true,listeners:{cellclick:function(view,cell,cellIndex,record,row,rowIndex,e){var clickedDataIndex=view.panel.headerCt.getHeaderAtIndex(cellIndex).dataIndex;var input=cell.getElementsByClassName(me.roleRadioCls);if(input[0]){input[0].checked=true}if(me.data.users[record.data.login]&&me.data.roles[clickedDataIndex]&&me.data.roles[clickedDataIndex]["ID"]){me.data.users[record.data.login]["ROLE_ID"]=me.data.roles[clickedDataIndex]["ID"]}}}}});return grid},saveRoles:function(){var me=this,data=[];if(!Ext.isEmpty(me.data.users)){for(var u in me.data.users){data.push({roleId:me.data.users[u]["ROLE_ID"],userId:me.data.users[u]["USER_ID"]})}Wasutp.Ajax.request({url:"/json/acl/save-roles",params:{data:JSON.stringify(data)},success:function(response){if(response.data&&response.data.result===true){me.win.close()}else{errorsHandler.addMessage("Ошибка доступа","Не удалось установить выбранные роли",0)}}})}}});Ext.define("Wasutp.acl.Acl",{statics:{allowed:1,denied:0},roles:{},resources:{},rules:{},addRole:function(role){var me=this;if(!role.ALIAS){return false}if(!role.NAME){return false}if(!role.ID){return false}me.roles[role.ALIAS]={id:role.ID,name:role.NAME}},addResource:function(resource){var me=this;if(!resource.ALIAS){return false}if(!resource.NAME){return false}if(!resource.ID){return false}me.resources[resource.ALIAS]={id:resource.ID,name:resource.NAME}},allow:function(role,resource,privilege){var me=this;me.setRule(role,resource,privilege,Wasutp.acl.Acl.allowed)},deny:function(role,resource,privilege){var me=this;me.setRule(role,resource,privilege,Wasutp.acl.Acl.denied)},setRule:function(role,resource,privilege,status){var me=this;if(!me.roles[role]){errorsHandler.addMessage("Ошибка доступа",'Роль "'+role+'" не существует',Wasutp.ErrorsHandler.error);return false}if(!me.rules[role]){me.rules[role]={}}if(resource){if(!me.rules[role][resource]){me.rules[role][resource]={}}if(privilege){me.rules[role][resource][privilege]=status}else{me.rules[role][resource]=null}}else{for(var r in me.resources){me.rules[role]=null}}},isAllowed:function(role,resource,privilege){var me=this;if(!(role&&resource&&privilege)){return false}if(typeof me.rules[role]==="undefined"){return false}if(me.rules[role]===null){return true}if(typeof me.rules[role][resource]==="undefined"){return false}if(me.rules[role][resource]===null){return true}else{if(me.rules[role][resource][privilege]===Wasutp.acl.Acl.allowed){return true}}return false},amIAllowed:function(resource,privilege){if(!(resource&&privilege)){return false}var me=this,role=appHelper.getUserRole();return me.isAllowed(role,resource,privilege)}});Ext.define("Wasutp.overrides.form.action.Submit",{handleResponse:function(){Ext.override(Ext.form.action.Submit,{handleResponse:function(response){var form=this.form,errorReader=form.errorReader,rs,errors,i,len,records;if(errorReader){rs=errorReader.read(response);records=rs.records;errors=[];if(records){for(i=0,len=records.length;i<len;i++){errors[i]=records[i].data}}if(errors.length<1){errors=null}return{success:rs.success,errors:errors}}if(!response.responseText){if(response.responseXML){try{var sText=response.responseXML.firstChild.children[1].children[0].firstChild.textContent;response.responseText=sText}catch(e){}}}return Ext.decode(response.responseText)}})}});
/*!
 * Ext JS Library 4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.define("Ext.ux.desktop.ShortcutModel",{extend:"Ext.data.Model",fields:[{name:"id"},{name:"name"},{name:"iconCls"},{name:"module"},{name:"itemId"}]});Ext.define("Ext.ux.grid.FiltersFeature",{extend:"Ext.grid.feature.Feature",alias:"feature.filters",uses:["Ext.ux.grid.menu.ListMenu","Ext.ux.grid.menu.RangeMenu","Ext.ux.grid.filter.BooleanFilter","Ext.ux.grid.filter.DateFilter","Ext.ux.grid.filter.ListFilter","Ext.ux.grid.filter.NumericFilter","Ext.ux.grid.filter.StringFilter"],autoReload:true,filterCls:"ux-filtered-column",local:false,menuFilterText:"Filters",paramPrefix:"filter",showMenu:true,stateId:undefined,updateBuffer:500,hasFeatureEvent:false,constructor:function(config){var me=this;config=config||{};Ext.apply(me,config);me.deferredUpdate=Ext.create("Ext.util.DelayedTask",me.reload,me);me.filters=me.createFiltersCollection();me.filterConfigs=config.filters},attachEvents:function(){var me=this,view=me.view,headerCt=view.headerCt,grid=me.getGridPanel();me.bindStore(view.getStore(),true);headerCt.on("menucreate",me.onMenuCreate,me);view.on("refresh",me.onRefresh,me);grid.on({scope:me,beforestaterestore:me.applyState,beforestatesave:me.saveState,beforedestroy:me.destroy});grid.filters=me;grid.addEvents("filterupdate")},createFiltersCollection:function(){return Ext.create("Ext.util.MixedCollection",false,function(o){return o?o.dataIndex:null})},createFilters:function(){var me=this,hadFilters=me.filters.getCount(),grid=me.getGridPanel(),filters=me.createFiltersCollection(),model=grid.store.model,fields=model.prototype.fields,field,filter,state;if(hadFilters){state={};me.saveState(null,state)}function add(dataIndex,config,filterable){if(dataIndex&&(filterable||config)){field=fields.get(dataIndex);filter={dataIndex:dataIndex,type:(field&&field.type&&field.type.type)||"auto"};if(Ext.isObject(config)){Ext.apply(filter,config)}filters.replace(filter)}}Ext.Array.each(me.filterConfigs,function(filterConfig){add(filterConfig.dataIndex,filterConfig)});Ext.Array.each(grid.columns,function(column){if(column.filterable===false){filters.removeAtKey(column.dataIndex)}else{add(column.dataIndex,column.filter,column.filterable)}});me.removeAll();if(filters.items){me.initializeFilters(filters.items)}if(hadFilters){me.applyState(null,state)}},initializeFilters:function(filters){var me=this,filtersLength=filters.length,i,filter,FilterClass;for(i=0;i<filtersLength;i++){filter=filters[i];if(filter){FilterClass=me.getFilterClass(filter.type);filter=filter.menu?filter:new FilterClass(filter);me.filters.add(filter);Ext.util.Observable.capture(filter,this.onStateChange,this)}}},onMenuCreate:function(headerCt,menu){var me=this;me.createFilters();menu.on("beforeshow",me.onMenuBeforeShow,me)},onMenuBeforeShow:function(menu){var me=this,menuItem,filter;if(me.showMenu){menuItem=me.menuItem;if(!menuItem||menuItem.isDestroyed){me.createMenuItem(menu);menuItem=me.menuItem}filter=me.getMenuFilter();if(filter){menuItem.setMenu(filter.menu,false);menuItem.setChecked(filter.active);menuItem.setDisabled(filter.disabled===true)}menuItem.setVisible(!!filter);this.sep.setVisible(!!filter)}},createMenuItem:function(menu){var me=this;me.sep=menu.add("-");me.menuItem=menu.add({checked:false,itemId:"filters",text:me.menuFilterText,listeners:{scope:me,checkchange:me.onCheckChange,beforecheckchange:me.onBeforeCheck}})},getGridPanel:function(){return this.view.up("gridpanel")},applyState:function(grid,state){var me=this,key,filter;me.applyingState=true;me.clearFilters();if(state.filters){for(key in state.filters){if(state.filters.hasOwnProperty(key)){filter=me.filters.get(key);if(filter){filter.setValue(state.filters[key]);filter.setActive(true)}}}}me.deferredUpdate.cancel();if(me.local){me.reload()}delete me.applyingState;delete state.filters},saveState:function(grid,state){var filters={};this.filters.each(function(filter){if(filter.active){filters[filter.dataIndex]=filter.getValue()}});return(state.filters=filters)},destroy:function(){var me=this;Ext.destroyMembers(me,"menuItem","sep");me.removeAll();me.clearListeners()},removeAll:function(){if(this.filters){Ext.destroy.apply(Ext,this.filters.items);this.filters.clear()}},bindStore:function(store){var me=this;if(me.store&&me.storeListeners){me.store.un(me.storeListeners)}if(store){me.storeListeners={scope:me};if(me.local){me.storeListeners.load=me.onLoad}else{me.storeListeners["before"+(store.buffered?"prefetch":"load")]=me.onBeforeLoad}store.on(me.storeListeners)}else{delete me.storeListeners}me.store=store},getMenuFilter:function(){var header=this.view.headerCt.getMenu().activeHeader;return header?this.filters.get(header.dataIndex):null},onCheckChange:function(item,value){this.getMenuFilter().setActive(value)},onBeforeCheck:function(check,value){return !value||this.getMenuFilter().isActivatable()},onStateChange:function(event,filter){if(event!=="serialize"){var me=this,grid=me.getGridPanel();if(filter==me.getMenuFilter()){me.menuItem.setChecked(filter.active,false)}if((me.autoReload||me.local)&&!me.applyingState){me.deferredUpdate.delay(me.updateBuffer)}me.updateColumnHeadings();if(!me.applyingState){grid.saveState()}grid.fireEvent("filterupdate",me,filter)}},onBeforeLoad:function(store,options){options.params=options.params||{};this.cleanParams(options.params);var params=this.buildQuery(this.getFilterData());Ext.apply(options.params,params)},onLoad:function(store){store.filterBy(this.getRecordFilter())},onRefresh:function(){this.updateColumnHeadings()},updateColumnHeadings:function(){var me=this,headerCt=me.view.headerCt;if(headerCt){headerCt.items.each(function(header){var filter=me.getFilter(header.dataIndex);header[filter&&filter.active?"addCls":"removeCls"](me.filterCls)})}},reload:function(){var me=this,store=me.view.getStore();if(me.local){store.clearFilter(true);store.filterBy(me.getRecordFilter());store.sort()}else{me.deferredUpdate.cancel();if(store.buffered){store.pageMap.clear()}store.loadPage(1)}},getRecordFilter:function(){var f=[],len,i;this.filters.each(function(filter){if(filter.active){f.push(filter)}});len=f.length;return function(record){for(i=0;i<len;i++){if(!f[i].validateRecord(record)){return false}}return true}},addFilter:function(config){var me=this,columns=me.getGridPanel().columns,i,columnsLength,column,filtersLength,filter;for(i=0,columnsLength=columns.length;i<columnsLength;i++){column=columns[i];if(column.dataIndex===config.dataIndex){column.filter=config}}if(me.view.headerCt.menu){me.createFilters()}else{me.view.headerCt.getMenu()}for(i=0,filtersLength=me.filters.items.length;i<filtersLength;i++){filter=me.filters.items[i];if(filter.dataIndex===config.dataIndex){return filter}}},addFilters:function(filters){if(filters){var me=this,i,filtersLength;for(i=0,filtersLength=filters.length;i<filtersLength;i++){me.addFilter(filters[i])}}},getFilter:function(dataIndex){return this.filters.get(dataIndex)},clearFilters:function(){this.filters.each(function(filter){filter.setActive(false)})},getFilterData:function(){var filters=[],i,len;this.filters.each(function(f){if(f.active){var d=[].concat(f.serialize());for(i=0,len=d.length;i<len;i++){filters.push({field:f.dataIndex,data:d[i]})}}});return filters},buildQuery:function(filters){var p={},i,f,root,dataPrefix,key,tmp,len=filters.length;if(!this.encode){for(i=0;i<len;i++){f=filters[i];root=[this.paramPrefix,"[",i,"]"].join("");p[root+"[field]"]=f.field;dataPrefix=root+"[data]";for(key in f.data){p[[dataPrefix,"[",key,"]"].join("")]=f.data[key]}}}else{tmp=[];for(i=0;i<len;i++){f=filters[i];tmp.push(Ext.apply({},{field:f.field},f.data))}if(tmp.length>0){p[this.paramPrefix]=Ext.JSON.encode(tmp)}}return p},cleanParams:function(p){if(this.encode){delete p[this.paramPrefix]}else{var regex,key;regex=new RegExp("^"+this.paramPrefix+"[[0-9]+]");for(key in p){if(regex.test(key)){delete p[key]}}}},getFilterClass:function(type){switch(type){case"auto":type="string";break;case"int":case"float":type="numeric";break;case"bool":type="boolean";break}return Ext.ClassManager.getByAlias("gridfilter."+type)}});Ext.define("Ext.ux.desktop.Desktop",{extend:"Ext.panel.Panel",alias:"widget.desktop",uses:["Ext.util.MixedCollection","Ext.menu.Menu","Ext.view.View","Ext.window.Window","Ext.ux.desktop.TaskBar","Ext.ux.desktop.Wallpaper"],activeWindowCls:"ux-desktop-active-win",inactiveWindowCls:"ux-desktop-inactive-win",lastActiveWindow:null,border:false,html:"&#160;",layout:"fit",xTickSize:1,yTickSize:1,app:null,shortcuts:null,shortcutItemSelector:"div.ux-desktop-shortcut",shortcutTpl:['<tpl for=".">','<div class="ux-desktop-shortcut" id="{itemId}-shortcut">','<div class="ux-desktop-shortcut-icon {iconCls}">','<img src="',Ext.BLANK_IMAGE_URL,'" title="{name}">',"</div>",'<span class="ux-desktop-shortcut-text">{name}</span><br>',"</div>","</tpl>",'<div class="x-clear"></div>'],taskbarConfig:null,windowMenu:null,initComponent:function(){var me=this;me.windowMenu=new Ext.menu.Menu(me.createWindowMenu());me.bbar=me.taskbar=new Ext.ux.desktop.TaskBar(me.taskbarConfig);me.taskbar.windowMenu=me.windowMenu;me.windows=new Ext.util.MixedCollection();me.contextMenu=new Ext.menu.Menu(me.createDesktopMenu());me.items=[{xtype:"wallpaper",id:me.id+"_wallpaper"},me.createDataView()];me.callParent();me.shortcutsView=me.items.getAt(1);me.shortcutsView.on("itemclick",me.onShortcutItemClick,me);var wallpaper=me.wallpaper;me.wallpaper=me.items.getAt(0);if(wallpaper){me.setWallpaper(wallpaper,me.wallpaperStretch)}},afterRender:function(){var me=this;me.callParent();me.el.on("contextmenu",me.onDesktopMenu,me);var dataView=me.down("dataview"),el=dataView.getEl(),dropTargetEl=el.dom,dropTarget=Ext.create("Ext.dd.DropTarget",dropTargetEl,{ddGroup:"secondGridDDGroup",notifyEnter:function(ddSource,e,data){},notifyDrop:function(ddSource,e,data){var target=e.target||e.srcElement;if(target.id!=="wasutp-desktop-dataview"){return false}var aclManager=appHelper.getAclManager();if(!aclManager.amIAllowed("desktop","adjust")){aclManager.aclFailureMessage({message:"У вас недостаточно прав для создания виджетов"});return false}var selectedRecord=ddSource.dragData.records,pos=e.getXY();if(selectedRecord.length){for(var i in selectedRecord){selectedRecord[i].data.SAVED=false;var widgetParam=Ext.create("Wasutp.Widgets.DcsParam",selectedRecord[i].data);widgetParam.show(pos)}}return true}})},createDataView:function(){var me=this;return{xtype:"dataview",id:"wasutp-desktop-dataview",overItemCls:"x-view-over",trackOver:true,itemSelector:me.shortcutItemSelector,store:me.shortcuts,style:{position:"absolute"},x:0,y:0,tpl:new Ext.XTemplate(me.shortcutTpl),listeners:{resize:function(){Wasutp.desktop.ShortcutManager.sortShortcuts()},afterrender:function(){Wasutp.desktop.ShortcutManager.restoreShortcuts()},itemcontextmenu:Wasutp.desktop.ShortcutManager.afterrenderItemFn(),refresh:function(){Wasutp.desktop.ShortcutManager.sortShortcuts()}}}},createDesktopMenu:function(){var me=this,ret={items:me.contextMenuItems||[]};Ext.create("Wasutp.Widgets.WidgetObserver");if(ret.items.length){ret.items.push("-")}ret.items.push({text:"Разместить окна плиткой",iconCls:"wasutp-application-tile-vertical",handler:me.tileWindows,scope:me,minWindows:1},{text:"Разместить окна каскадом",iconCls:"wasutp-application-cascade",handler:me.cascadeWindows,scope:me,minWindows:1},{xtype:"menuseparator"},{text:"Упорядочить виджеты",iconCls:"wasutp-sort-widgets",handler:me.alignWidgets,scope:me,minWidgets:1},{text:"Выровнять виджеты по сетке",iconCls:"wasutp-sort-widgets",handler:me.alignToGrid,scope:me,minWidgets:1},{text:"Закрыть все виджеты",iconCls:"wasutp-widget-close-all",handler:me.closeAllWidgets,scope:me,minWidgets:1},{xtype:"menuseparator"},{text:"Сохранить десктоп",iconCls:"wasutp-save-desktop",handler:me.saveDesktop,scope:me});ret.listeners={show:{fn:function(ths){ths.el.setStyle("z-index","999999")}}};return ret},closeAllWidgets:function(item){var widgets=Wasutp.Widgets.WidgetObserver.getParams(),cmp;for(var i in widgets){cmp=Ext.getCmp(i);if(cmp){cmp.hide();Wasutp.Widgets.WidgetObserver.deleteParam(i)}}},alignWidgets:function(item){var me=this;Wasutp.Widgets.WidgetObserver.alignWidgets()},alignToGrid:function(item){var me=this;Wasutp.Widgets.WidgetObserver.alignToGrid()},saveDesktop:function(item){var me=this,widgets;Ext.create("Wasutp.Widgets.WidgetObserver");widgets=Wasutp.Widgets.WidgetObserver.getParams();if(widgets!==null){var cmp,position;for(var i in widgets){cmp=Ext.getCmp(i);if(cmp){position=cmp.getPosition();widgets[i].position=[position[0],position[1]];widgets[i].params={page:cmp.getPage(),name:cmp.getWidgetName()};widgets[i]["SAVED"]=true}}}Wasutp.Ajax.request({url:"/json/application/save-desktop",params:{widgets:JSON.stringify(widgets)}})},createWindowMenu:function(){var me=this;return{defaultAlign:"br-tr",items:[{text:"Восстановить",iconCls:"wasutp-window-retrieve",handler:me.onWindowMenuRestore,scope:me},{text:"Свернуть",iconCls:"wasutp-window-collapse",handler:me.onWindowMenuMinimize,scope:me},{text:"Развернуть",iconCls:"wasutp-window-expand",handler:me.onWindowMenuMaximize,scope:me},"-",{text:"Закрыть",iconCls:"wasutp-window-close",handler:me.onWindowMenuClose,scope:me}],listeners:{beforeshow:me.onWindowMenuBeforeShow,hide:me.onWindowMenuHide,scope:me}}},onDesktopMenu:function(e){var me=this,menu=me.contextMenu;e.stopEvent();if(!menu.rendered){menu.on("beforeshow",me.onDesktopMenuBeforeShow,me)}menu.showAt(e.getXY());menu.doConstrain()},onDesktopMenuBeforeShow:function(menu){var me=this,count=me.windows.getCount(),widgetsCount=Wasutp.Widgets.WidgetObserver.getParamsCount();menu.items.each(function(item){var min=item.minWindows||0;item.setDisabled(count<min);if(item.minWidgets){var minWidgets=item.minWidgets||1;item.setDisabled(widgetsCount<minWidgets)}})},onShortcutItemClick:function(dataView,record){var me=this,module,win,menuItem;if(record.data.module){module=me.app.getModule(record.data.module);if(record.data.itemId){menuItem=Ext.getCmp(record.data.itemId);if(menuItem){if(menuItem.usMenuId){Wasutp.Ajax.request({url:"/json/menu/isset-menu",params:{usMenuId:menuItem.usMenuId},success:function(response){if(response.data&&response.data.result){menuItem.handler.call(module,menuItem)}else{me.deleteItem(function(){me.deleteShortcut(record.data.itemId);me.deleteMenuItem(module,menuItem)})}}})}else{menuItem.handler.call(module,menuItem)}}else{var idParts=record.data.itemId.split("-"),usMenuId=idParts[idParts.length-1];Wasutp.Ajax.request({url:"/json/panels/get-panel-by-menu-id",params:{usMenuId:usMenuId},success:function(response){if(response.data.panel){module.getPanelConfig(response.data.panel)}else{me.deleteItem(function(){me.deleteShortcut(record.data.itemId)})}}})}}else{if(typeof module.createWindow==="function"){win=module&&module.createWindow();if(win){me.restoreWindow(win)}}}}},deleteItem:function(callback){Ext.MessageBox.alert({title:"Ошибка",cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:"Объект, на который ссылается этот ярлык, больше не существует.<br />Ярлык будет удалён с рабочего стола.",buttons:Ext.MessageBox.OK,closable:false,callback:function(btn){callback()},scope:null})},deleteShortcut:function(iconId){Wasutp.desktop.ShortcutManager.deleteShortcutById(iconId)},deleteMenuItem:function(module,menuItem){var menu=menuItem.up("menu");if(menu){menu.remove(menuItem)}},onWindowClose:function(win){var me=this;me.windows.remove(win);me.taskbar.removeTaskButton(win.taskButton);me.updateActiveWindow()},onWindowMenuBeforeShow:function(menu){var items=menu.items.items,win=menu.theWin;items[0].setDisabled(win.maximized!==true&&win.hidden!==true);items[1].setDisabled(win.minimized===true);items[2].setDisabled(win.maximized===true||win.hidden===true)},onWindowMenuClose:function(){var me=this,win=me.windowMenu.theWin;win.close()},onWindowMenuHide:function(menu){Ext.defer(function(){menu.theWin=null},1)},onWindowMenuMaximize:function(){var me=this,win=me.windowMenu.theWin;win.maximize();win.toFront()},onWindowMenuMinimize:function(){var me=this,win=me.windowMenu.theWin;win.minimize()},onWindowMenuRestore:function(){var me=this,win=me.windowMenu.theWin;me.restoreWindow(win)},getWallpaper:function(){return this.wallpaper.wallpaper},setTickSize:function(xTickSize,yTickSize){var me=this,xt=me.xTickSize=xTickSize,yt=me.yTickSize=(arguments.length>1)?yTickSize:xt;me.windows.each(function(win){var dd=win.dd,resizer=win.resizer;dd.xTickSize=xt;dd.yTickSize=yt;resizer.widthIncrement=xt;resizer.heightIncrement=yt})},setWallpaper:function(wallpaper,stretch){this.wallpaper.setWallpaper(wallpaper,stretch);return this},cascadeWindows:function(){var x=0,y=0,zmgr=this.getDesktopZIndexManager();zmgr.eachBottomUp(function(win){if(win.isWindow&&win.isVisible()&&!win.maximized){win.setPosition(x,y);x+=20;y+=20}})},createWindow:function(config,cls){var me=this,win,cfg=Ext.applyIf(config||{},{stateful:false,isWindow:true,constrainHeader:true,minimizable:true,maximizable:true});cls=cls||Wasutp.window.Window;win=me.add(new cls(cfg));me.windows.add(win);win.taskButton=me.taskbar.addTaskButton(win);win.animateTarget=win.taskButton.el;win.on({activate:me.updateActiveWindow,beforeshow:me.updateActiveWindow,deactivate:me.updateActiveWindow,minimize:me.minimizeWindow,destroy:me.onWindowClose,scope:me});win.on({boxready:function(){win.dd.xTickSize=me.xTickSize;win.dd.yTickSize=me.yTickSize;if(win.resizer){win.resizer.widthIncrement=me.xTickSize;win.resizer.heightIncrement=me.yTickSize}},single:true});win.on({render:function(panel){panel.body.on("contextmenu",function(e){e.stopEvent();return false});var windowSizes=appHelper.getWindowSize();if(windowSizes[1]&&windowSizes[1]<win.getHeight()+40){win.setHeight(windowSizes[1]-40)}if(windowSizes[0]&&windowSizes[0]<win.getWidth()+20){win.setWidth(windowSizes[0]-20)}},afterlayout:function(panel){me.doCascadeShift(panel)}});win.doClose=function(){win.doClose=Ext.emptyFn;win.el.disableShadow();win.el.fadeOut({listeners:{afteranimate:function(){win.destroy()}}})};var bars=me.taskbar.windowBar.items.items;var windowBar=bars[bars.length-1];var el=windowBar.getEl();var tip=Ext.create("Wasutp.tip.ToolTip",{target:el.id,html:win.title,anchor:"top"});return win},doCascadeShift:function(newWin){var me=this;var zmgr=me.getDesktopZIndexManager();for(var i in zmgr.map){var win=zmgr.map[i];if(win.isWindow&&win.isVisible()&&!win.maximized){if(win.id!==newWin.id){var newWinPos=newWin.getPosition();var winPos=win.getPosition();if(newWinPos[0]===winPos[0]&&newWinPos[1]===winPos[1]){newWin.setPosition(newWinPos[0]+20,newWinPos[1]+20)}}}}},getActiveWindow:function(){var win=null,zmgr=this.getDesktopZIndexManager();if(zmgr){zmgr.eachTopDown(function(comp){if(comp.isWindow&&!comp.hidden){win=comp;return false}return true})}return win},getDesktopZIndexManager:function(){var windows=this.windows;return(windows.getCount()&&windows.getAt(0).zIndexManager)||null},getWindow:function(id){return this.windows.get(id)},minimizeWindow:function(win){win.minimized=true;win.hide()},restoreWindow:function(win){if(win.isVisible()){win.restore();win.toFront()}else{win.show()}return win},tileWindows:function(){var me=this,availWidth=me.body.getWidth(true);var x=me.xTickSize,y=me.yTickSize,nextY=y;me.windows.each(function(win){if(win.isVisible()&&!win.maximized){var w=win.el.getWidth();if(x>me.xTickSize&&x+w>availWidth){x=me.xTickSize;y=nextY}win.setPosition(x,y);x+=w+me.xTickSize;nextY=Math.max(nextY,y+win.el.getHeight()+me.yTickSize)}})},updateActiveWindow:function(){var me=this,activeWindow=me.getActiveWindow(),last=me.lastActiveWindow;if(last&&last.isDestroyed){me.lastActiveWindow=null;return}if(activeWindow===last){return}if(last){if(typeof last.el!="undefined"){if(last.el.dom){last.addCls(me.inactiveWindowCls);last.removeCls(me.activeWindowCls)}last.active=false}}me.lastActiveWindow=activeWindow;if(activeWindow){activeWindow.addCls(me.activeWindowCls);activeWindow.removeCls(me.inactiveWindowCls);activeWindow.minimized=false;activeWindow.active=true}me.taskbar.setActiveButton(activeWindow&&activeWindow.taskButton)}});
/*!
 * Ext JS Library 4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.define("Ext.ux.desktop.Module",{mixins:{observable:"Ext.util.Observable"},constructor:function(config){this.mixins.observable.constructor.call(this,config);this.init()},init:Ext.emptyFn});
/*!
 * Ext JS Library 4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.define("Ext.ux.desktop.Wallpaper",{extend:"Ext.Component",alias:"widget.wallpaper",cls:"ux-wallpaper",html:'<img src="'+Ext.BLANK_IMAGE_URL+'">',stretch:false,wallpaper:null,stateful:true,stateId:"desk-wallpaper",afterRender:function(){var me=this;me.callParent();me.setWallpaper(me.wallpaper,me.stretch)},applyState:function(){var me=this,old=me.wallpaper;me.callParent(arguments);if(old!=me.wallpaper){me.setWallpaper(me.wallpaper)}},getState:function(){return this.wallpaper&&{wallpaper:this.wallpaper}},setWallpaper:function(wallpaper,stretch){var me=this,imgEl,bkgnd;me.stretch=(stretch!==false);me.wallpaper=wallpaper;if(me.rendered){imgEl=me.el.dom.firstChild;if(!wallpaper||wallpaper==Ext.BLANK_IMAGE_URL){Ext.fly(imgEl).hide()}else{if(me.stretch){imgEl.src=wallpaper;me.el.removeCls("ux-wallpaper-tiled");Ext.fly(imgEl).setStyle({width:"100%",height:"100%"}).show()}else{Ext.fly(imgEl).hide();bkgnd="url("+wallpaper+")";me.el.addCls("ux-wallpaper-tiled")}}me.el.setStyle({backgroundImage:bkgnd||""});if(me.stateful){me.saveState()}}return me}});Ext.define("Wasutp.Timer",{statics:{timers:{},intervals:{},addTimer:function(name,period,func,delay,count,params){var me=this;if(typeof me.timers[name]!="undefined"){return false}count=typeof count!="undefined"?count:0;params=typeof params!="undefined"?params:{};delay=typeof delay!="undefined"?delay:0;me.timers[name]={name:name,period:period,func:func,params:params,count:0,maxCount:count,delay:delay,isStarted:false}},startTimer:function(name){var me=this;if(typeof me.timers[name]=="undefined"){return false}if(me.timers[name].isStarted===true){return false}else{me.timers[name].isStarted=true}me.timers[name].count=0;var execFunction=function(){me.timers[name].func();me.timers[name].count++;if(me.timers[name].maxCount!=0){if(me.timers[name].count>=me.timers[name].maxCount){me.removeTimer(name)}}};setTimeout(function(){execFunction();me.intervals[name]=setInterval(function(){execFunction()},me.timers[name].period)},me.timers[name].delay)},startTimeout:function(name){var me=this;if(typeof me.timers[name]=="undefined"){return false}me.timers[name].count=0;var execFunction=function(){me.timers[name].func();me.timers[name].count++;if(me.timers[name].maxCount!=0){if(me.timers[name].count>=me.timers[name].maxCount){me.removeTimer(name)}}};setTimeout(function(){execFunction()},me.timers[name].period)},removeTimer:function(name){var me=this;clearInterval(me.intervals[name]);delete me.timers[name];delete me.intervals[name]},editTimer:function(name,period,func,count,params){var me=this},getTimer:function(name){return this.timers[name]}}});Ext.define("Wasutp.desktop.ShortcutManager",{statics:{getCreateIconMenuItem:function(){var me=this,item={iconCls:"wasutp-desktop-context-menu-add-shortcut",text:"Создать ярлык",hideOnClick:false,handler:function(ths,event,q){me.createShortcut(ths.up("menu"));ths.up("menu").hide()}};return item},getMainSubMenu:function(){var me=this,menu=Ext.create("Wasutp.menu.Menu",{allowOtherMenus:true,items:[me.getCreateIconMenuItem()]});return menu},getDesktopItemMenu:function(){var me=this,menu=Ext.create("Wasutp.menu.Menu",{allowOtherMenus:true,items:[{iconCls:"wasutp-desktop-context-menu-delete-shortcut",text:"Удалить ярлык",handler:function(ths,e){me.deleteShortcut.apply(me,arguments)}}]});return menu},dataview:null,getDataview:function(){var me=this,desktop;if(me.dataview===null){desktop=wasutpApp.getDesktop();if(desktop){me.dataview=desktop.down("dataview")}else{console.error("desktop еще не загружен!")}}return me.dataview},createShortcut:function(menu){var me=this,name=menu.menuItem.text,module=menu.menuItem.module,itemId=menu.menuItem.id,order=me.getDataview().store.count(),iconCls=menu.menuItem.iconCls?menu.menuItem.iconCls+"-48-shortcut":"grid-shortcut";Wasutp.Ajax.request({url:"/json/administration/add-shortcut",params:{name:name,iconCls:iconCls,module:module,itemId:itemId,order:order},success:function(response){if(response.data.result){me.addShortcut({id:response.data.id,order:order,name:name,iconCls:iconCls,itemId:itemId,module:module})}},failure:function(){}})},deleteitem:function(){var me=this;console.log("delete")},deleteShortcut:function(ths,e){var me=this,menu=ths.up("menu"),dataViewItem=menu.dataViewItem;me.deleteShortcutByModel(dataViewItem)},deleteShortcutByModel:function(dataViewItem,params){var me=this,id=dataViewItem.data.id;Wasutp.Ajax.request({url:"/json/administration/remove-shortcut",params:{id:id,all_users:JSON.stringify(Boolean(params&&params.allUsers))},success:function(response){if(response.data.result){me.getDataview().store.remove(dataViewItem);me.shortcutIndex--}Wasutp.desktop.ShortcutManager.sortShortcuts()},failure:function(){}})},deleteShortcutById:function(id,params){var me=this,shortcutmodel=null;shortcutmodel=me.getDataview().store.findRecord("itemId",id);if(shortcutmodel){me.deleteShortcutByModel(shortcutmodel,params)}},afterrenderMenuFn:function(ths){var me=this;return function(menuItem){menuItem.getEl().on("contextmenu",function(e,dom){e.stopEvent();e.preventDefault();var menu=me.getMainSubMenu();menu.menuItem=menuItem;me.showMenu(menu,e);return false})}},showMenu:function(menu,e){var me=this;menu.showAt(e.getXY());me.closeAllMenus();me.menus.push(menu)},closeAllMenus:function(){var me=this;if(me.menus.length){for(var m in me.menus){me.menus[m].hide();delete me.menus[m]}}},menus:[],afterrenderItemFn:function(ths){var me=this;return function(ths,record,item,index,e,eOpts){var menu=me.getDesktopItemMenu();e.stopEvent();e.preventDefault();menu.dataViewItem=record;menu.showAt(e.getXY());return false}},restoreShortcuts:function(){var me=this;Wasutp.Ajax.request({url:"/json/administration/get-shortcuts",success:function(response){if(response.data&&response.data.length){for(var i in response.data){me.addShortcut(response.data[i])}}}})},shortcutIndex:0,addShortcut:function(data){var me=this;me.getDataview().store.insert(me.shortcutIndex++,{id:parseInt(data.id),name:data.name,iconCls:data.iconCls,module:data.module,itemId:data.itemId});Wasutp.desktop.ShortcutManager.sortShortcuts()},sortShortcuts:function(){var els=document.getElementsByClassName("ux-desktop-shortcut"),ids={},el,windowSizes=appHelper.getWindowSize(),maxY=windowSizes[1],maxX=windowSizes[0],startY=0,startX=0,y=startY,x=startX,offsetY=96,offsetX=70;if(els.length){for(var i in els){if(typeof els[i]==="object"){ids[els[i].id]=els[i].id}}for(var i in ids){el=document.getElementById(ids[i]);if(el&&typeof el==="object"){if(y+(offsetY+40)>maxY){y=startY;x+=offsetX}el.style.top=y+"px";el.style.left=x+"px";y+=offsetY}}}}}});Ext.define("Wasutp.ErrorsHandler",{statics:{error:0,message:1},messages:[],maxCount:10000,gridCategory:"systemMessages",systemMessages:null,getSystemMessages:function(){if(this.systemMessages===null){this.systemMessages=Ext.create("Wasutp.SystemMessages")}return this.systemMessages},constructor:function(config){hiddenImg=new Image();hiddenImg.src="/shared/icons/fam/exclamation.png";hiddenImgGreen=new Image();hiddenImgGreen.src="/shared/icons/fam/exclamation_green.png";this.systemMessages=Ext.create("Wasutp.SystemMessages");if(typeof config!="undefined"){if(typeof config.messages!="undefined"){for(var i in config.messages){if(typeof config.messages[i].title!="undefined"&&typeof config.messages[i].message!="undefined"){this.addMessage(config.messages[i].title,config.messages[i].message,Wasutp.ErrorsHandler.message)}}}if(typeof config.errors!="undefined"){for(var i in config.errors){if(typeof config.errors[i].title!="undefined"&&typeof config.errors[i].message!="undefined"){this.addMessage(config.errors[i].title,config.errors[i].message,Wasutp.ErrorsHandler.error)}}}}this.iconGreenOn()},isEmpty:function(){if(this.messages.length){return false}return true},addMessage:function(title,message,status,serverTimestamp,showPopUp){var me=this,length=me.messages.length,style={},st=serverTimestamp||null,messObj={date:Ext.Date.format(new Date,"d.m.Y H:i:s"),status:status,title:title,shortMessage:message.split("\n")[0],message:message,serverTimestamp:st},grid=Ext.getCmp("SystemMessagesGrid");switch(status){case Wasutp.ErrorsHandler.error:style.color="#f00";break;case Wasutp.ErrorsHandler.message:style.color="#000";break;default:style.color="#000";break}if(length<me.maxCount){me.messages.push(messObj)}else{var nextInd;for(var i in me.messages){nextInd=parseInt(i)+1;if(me.messages[nextInd]){me.messages[i]=me.messages[nextInd]}}me.messages[length-1]=messObj;if(grid){grid.getStore().removeAt(me.maxCount-1)}}if(showPopUp===true||(typeof showPopUp==="undefined"&&status==Wasutp.ErrorsHandler.error)){Ext.example.msg(title,messObj.shortMessage,style)}if(status==0){me.iconRedOn()}else{me.iconGreenOn()}if(grid){grid.getStore().add(Ext.create("SystemMessagesGridModel",messObj))}},addMessages:function(data){if(data.length){for(var i in data){var message=""+data[i].message,serverTimestamp=data[i].timestamp||null,showPopUp=data[i].showPopUp;message=message?message:"";this.addMessage(data[i].title,message,Wasutp.ErrorsHandler.message,serverTimestamp,showPopUp)}}},addErrors:function(data){if(data.length){var message;for(var i in data){var message=""+data[i].message,serverTimestamp=data[i].timestamp||null,showPopUp=data[i].showPopUp;message=message?message:"";this.addMessage(data[i].title,message,Wasutp.ErrorsHandler.error,serverTimestamp,showPopUp)}}},grid:null,bookTpl:null,getPanel:function(){var me=this;Ext.define("SystemMessagesGridModel",{extend:"Ext.data.Model",fields:["date","title","message","shortMessage","status","serverTimestamp"]});var store=Ext.create("Ext.data.Store",{model:"SystemMessagesGridModel",data:this.messages,clearOnPageLoad:true,sorters:[{property:"date",direction:"DESC"}]});me.grid=Ext.create("Ext.grid.Panel",{plugins:"bufferedrenderer",selModel:{pruneRemoved:false},id:"SystemMessagesGrid",viewConfig:{getRowClass:function(record,index){if(record.data.status==Wasutp.ErrorsHandler.error){return"red-text"}},trackOver:false,listeners:{refresh:function(){me.grid.headerCt.setSortState()}}},store:store,columns:[{text:"Дата/Время",width:125,dataIndex:"date"},{text:"Дата/Время сервера",width:125,dataIndex:"serverTimestamp",hidden:true},{text:"Событие",width:200,dataIndex:"title"},{text:"Примечание",width:325,dataIndex:"shortMessage"}],forceFit:true,width:700,height:320,split:true,region:"north",listeners:{headerclick:function(){appHelper.getColumnsState().save(me.grid,[me.gridCategory,appHelper.userId])},columnschanged:function(){appHelper.getColumnsState().save(me.grid,[me.gridCategory,appHelper.userId])},columnresize:function(){appHelper.getColumnsState().save(me.grid,[me.gridCategory,appHelper.userId])},beforerender:function(){appHelper.getColumnsState().load(me.grid,[me.gridCategory,appHelper.userId])}}});me.grid.getSelectionModel().on("selectionchange",function(sm,selectedRecord){if(selectedRecord.length){var detailPanel=Ext.getCmp("detailPanel");me.bookTpl.overwrite(detailPanel.body,selectedRecord[0].data)}});var bookTplMarkup=['<div class="error-handler">{message}</div>'];me.bookTpl=Ext.create("Ext.Template",bookTplMarkup);var detailPanel=Ext.create("Ext.panel.Panel",{id:"detailPanel",region:"center",html:"Выберите сообщение.",layout:"fit",autoscroll:true,setAutoScroll:true});var panel=Ext.create("Ext.panel.Panel",{layout:"border",items:[me.grid,detailPanel]});return panel},show:function(){var me=this;if(!this.messages.length){return}var desktop=wasutpApp.getDesktop();var win=desktop.getWindow("SystemMessages");if(!win){win=desktop.createWindow({id:"SystemMessages",title:"Сообщения системы",height:600,width:700,layout:"fit",items:me.getPanel(),autoscroll:true,setAutoScroll:true,iconCls:"icon-messages-off",tbar:[Ext.create("Ext.Button",{iconCls:"wasutp-delete",text:"Очистить список",handler:function(){me.messages.length=0;me.grid.store.removeAll();me.iconOff();detailPanel=Ext.getCmp("detailPanel");me.bookTpl.overwrite(detailPanel.body,"")}})],})}win.show()},iconGreenOn:function(){if(!this.messages.length){return}var icon=Ext.select("#error-handler-btnIconEl");icon.removeCls("icon-errors-off");icon.removeCls("icon-messages-off");icon.addCls("icon-messages-on")},iconRedOn:function(){if(!this.messages.length){return}var icon=Ext.select("#error-handler-btnIconEl");icon.removeCls("icon-errors-off");icon.removeCls("icon-messages-off");icon.addCls("icon-errors-on")},iconOff:function(){var icon=Ext.select("#error-handler-btnIconEl");icon.removeCls("icon-messages-on");icon.removeCls("icon-errors-on");icon.addCls("icon-messages-off")}});Ext.define("Wasutp.SystemMessages",{error:"Ошибка",server_error:"Ошибка на стороне сервера",server_error_with_status:"Ошибка на стороне сервера со статусом ",data_not_exist:"Отсутствуют данные"});Ext.define("Wasutp.TU.Manager",{statics:{paramTypeId:"45",suitableGtoptAliases:["GLT_BOOL_OPT_TELECONTROL_SINGLE","GLT_BOOL_OPT_TELECONTROL_DOUBLE","GLT_BOOL_TELECONTROL_SELECT","GLT_BOOL_OPT_TELECONTROL_PULSE_SHORT","GLT_BOOL_OPT_TELECONTROL_PULSE_LONG"],isTUOpt:function(opt,system){system=system||"dcs";if(!opt){return false}if(system==="dcs"){return this.isTUOptDcs(opt)}if(system==="pswt"){return this.isTUOptPswt(opt)}if(system==="telecontrol"){return this.isTUOptTelecontrol(opt)}else{return false}},isTUOptDcs:function(opt){return this.suitableGtoptAliases.indexOf(opt)>=0},isTUOptPswt:function(opt){return Boolean(typeof opt==="number")},isTUOptTelecontrol:function(opt){return Boolean(typeof opt==="object"&&opt!==null&&(typeof opt.ID_TABLE==="number"||(typeof opt.ID_TABLE==="string"&&opt.ID_TABLE.length>0))&&opt.regim===5)}},params:{},constructor:function(params){if(typeof params==="object"&&params!==null){this.params=params}else{this.params={}}},getMenuAction:function(){var me=this,action,menu;var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("oik","telecontrol")===false){return false}menu=Ext.create("Wasutp.menu.Menu",{items:[{iconCls:"wasutp-tu-on-icon",text:"Включить",handler:function(widget,event,q){me.switchOn()}},{iconCls:"wasutp-tu-off-icon",text:"Отключить",handler:function(widget,event,q){me.switchOff()}}]});action=Ext.create("Ext.Action",{iconCls:"wasutp-tu-icon",text:"Телеуправление",menu:menu,handler:function(){return false}});return action},switchOn:function(){var me=this;me.execute(1)},switchOff:function(){var me=this;me.execute(0)},getParams:function(cmd){var res={};res.cmd=Number(cmd);res.param_id=Number(this.params.id);res.system=((typeof this.params.system==="string"&&this.params.system.length>0)?this.params.system:"dcs");if((typeof this.params.id_table==="string"&&this.params.id_table.length>0)||typeof this.params.id_table==="number"){res.id_table=this.params.id_table}return res},execute:function(cmd){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("desktop","telecontrol")===false){aclManager.aclFailureMessage({message:"У вас недостаточно прав для телеуправления"});return false}var me=this,title="Запрос выполнения команды ТУ",cmdText=cmd?"Включить":"Отключить",paramName="",message="",system;if(typeof this.params.system==="string"){system=this.params.system}else{system="dcs"}paramName=typeof me.params.paramName!=="undefined"?' для "'+me.params.paramName+'" ':" ";message="Вы действительно хотите"+paramName+'отправить команду "'+cmdText+'"?';Ext.MessageBox.confirm({title:title,cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:message,buttons:Ext.MessageBox.YESNO,callback:function(btn){if(btn==="yes"){Wasutp.Ajax.request({url:"/json/tu/execute",params:me.getParams(cmd),success:function(response){var message;var title="Результат выполнения команды ТУ";if(response.data.result=="0"){message='Команда "'+cmdText+'"'+paramName+"принята к исполнению."}else{if(typeof response.data.result!="undefined"){var errorMsg="";switch(response.data.result){case 246:errorMsg="Ошибка выполнения команды.";break;case 236:errorMsg="Ошибка, сервер не отвечает.";break;default:errorMsg="";break}message='Команда "'+cmdText+'"'+paramName+"выполнена с ошибками!<br /> "+errorMsg}else{message='Команда "'+cmdText+'"'+paramName+"не выполнена!"}}Ext.MessageBox.alert(title,message)}})}}})}});Ext.define("Wasutp.menu.Menu",{extend:"Ext.menu.Menu",alias:"widget.wasutp-menu",taskbarHeight:28,pickUpUnderTaskbar:false,setXY:function(xy,animate){var me=this,menuHeight=parseInt(me.el.dom.style.height),e=document.documentElement,g=document.getElementsByTagName("body")[0],windowHeight=window.innerHeight||e.clientHeight||g.clientHeight,menuComputedStyle=getComputedStyle(me.el.dom),menuBottom=parseInt(menuComputedStyle.bottom);if(windowHeight-menuHeight-me.taskbarHeight<=0){me.setHeight(menuHeight-me.taskbarHeight);xy[1]=0}else{if(me.pickUpUnderTaskbar||menuBottom<me.taskbarHeight){xy[1]-=me.taskbarHeight;me.pickUpUnderTaskbar=true}}me.el.setXY(xy,animate)},listeners:{show:function(ths){ths.el.setStyle("z-index","999999")},afterrender:function(container){container.getEl().on("mouseup",function(e){Wasutp.Params.Updater.enable()})},deactivate:function(){Wasutp.desktop.ShortcutManager.closeAllMenus()}},constructor:function(config){me=this;this.callParent(arguments)},initComponent:function(){this.callParent(arguments)}});Ext.Loader.require("Ext.menu.Menu",function(){Ext.override(Ext.menu.Menu,{onMouseLeave:function(e){var me=this;var visibleSubmenu=false;me.items.each(function(item){if(item.menu&&item.menu.isVisible()){visibleSubmenu=true}});if(visibleSubmenu){return}me.deactivateActiveItem();if(me.disabled){return}me.fireEvent("mouseleave",me,e)}})});Ext.define("Wasutp.Server",{extend:"Ext.ux.desktop.Module",id:"wasutp-server",statics:{configExtention:".tar.bz2"},init:function(){var me=this;var serverModules=Wasutp.Menu.getItem(["administration","logs","serverModules"]);if(serverModules){var emaModulesItem=Ext.create("Ext.menu.Item",{text:serverModules.title,iconCls:serverModules.iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false},menu:{items:[]},scope:me,listeners:{focus:function(ths){return me.addNesteditems(ths)}}});me.addNesteditems(emaModulesItem)}var items=[],systemConfig=Wasutp.Menu.getItem(["administration","systemConfig"]);if(systemConfig){var systemConfigMenuItems=[],interfaces=Wasutp.Menu.getItem(["administration","systemConfig","interfaces"]),uploadConfig=Wasutp.Menu.getItem(["administration","systemConfig","uploadConfig"]),downloadConfig=Wasutp.Menu.getItem(["administration","systemConfig","downloadConfig"]);if(interfaces){systemConfigMenuItems.push({text:interfaces.title,iconCls:interfaces.iconCls,handler:me.initInterfaces,scope:this,module:me.id,id:"wasutp-configuration-interfaces",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}if(uploadConfig){systemConfigMenuItems.push({text:uploadConfig.title,iconCls:uploadConfig.iconCls,handler:me.importConfigRequest,scope:me,module:me.id,id:"wasutp-admin-config-upload",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}if(downloadConfig){systemConfigMenuItems.push({text:downloadConfig.title,iconCls:downloadConfig.iconCls,handler:me.exportConfigRequest,scope:me,module:me.id,id:"wasutp-admin-config-download",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}items.push({text:systemConfig.title,iconCls:systemConfig.iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false},menu:{items:systemConfigMenuItems}});items.push("-")}var tm=Wasutp.Menu.getItem(["administration","tm"]);if(tm){var tmMenuItems=[],startTm=Wasutp.Menu.getItem(["administration","tm","startTm"]),stopTm=Wasutp.Menu.getItem(["administration","tm","stopTm"]),restartTm=Wasutp.Menu.getItem(["administration","tm","restartTm"]);if(startTm){tmMenuItems.push({text:startTm.title,iconCls:startTm.iconCls,handler:me.startServer,scope:me,module:me.id,id:"wasutp-start-server",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}if(stopTm){tmMenuItems.push({text:stopTm.title,iconCls:stopTm.iconCls,handler:me.stopServer,scope:me,module:me.id,id:"wasutp-stop-server",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}if(restartTm){tmMenuItems.push({text:restartTm.title,iconCls:restartTm.iconCls,handler:me.reloadModules,scope:me,module:me.id,id:"wasutp-reload-server",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}items.push({text:tm.title,iconCls:tm.iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false},menu:{xtype:"wasutp-menu",items:tmMenuItems}})}var srv=Wasutp.Menu.getItem(["administration","server"]);if(srv){var serverMenuItems=[],stopServer=Wasutp.Menu.getItem(["administration","server","stopServer"]),restartServer=Wasutp.Menu.getItem(["administration","server","restartServer"]);if(stopServer){serverMenuItems.push({text:stopServer.title,iconCls:stopServer.iconCls,handler:me.switchOfServer,scope:me,module:me.id,id:"wasutp-server-switchoff",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}if(restartServer){serverMenuItems.push({text:restartServer.title,iconCls:restartServer.iconCls,handler:me.reloadServer,scope:me,module:me.id,id:"wasutp-server-reload-modules",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}items.push({text:srv.title,iconCls:srv.iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false},menu:{xtype:"wasutp-menu",items:serverMenuItems}});items.push("-")}var logs=Wasutp.Menu.getItem(["administration","logs"]);if(logs){var logsMenuItems=[],ntpLog=Wasutp.Menu.getItem(["administration","logs","ntp"]),webServer=Wasutp.Menu.getItem(["administration","logs","webServer"]),syslog=Wasutp.Menu.getItem(["administration","logs","syslog"]),kernlog=Wasutp.Menu.getItem(["administration","logs","kernlog"]),downloadAllLogs=Wasutp.Menu.getItem(["administration","logs","downloadAllLogs"]);logsMenuItems.push(emaModulesItem);if(ntpLog){logsMenuItems.push({text:ntpLog.title,iconCls:ntpLog.iconCls,handler:me.getNtpLogs,scope:me,module:me.id,id:"wasutp-server-admin-ntp",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}if(webServer){logsMenuItems.push({text:webServer.title,iconCls:webServer.iconCls,handler:me.getPhpLogs,scope:me,module:me.id,id:"wasutp-server-admin-page",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}if(syslog){logsMenuItems.push({text:syslog.title,iconCls:syslog.iconCls,handler:me.getSysLogs,scope:me,module:me.id,id:"wasutp-server-syslog",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}if(kernlog){logsMenuItems.push({text:kernlog.title,iconCls:kernlog.iconCls,handler:me.getKernLogs,scope:me,module:me.id,id:"wasutp-server-kernlog",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}});logsMenuItems.push("-")}if(downloadAllLogs){logsMenuItems.push({text:downloadAllLogs.title,iconCls:downloadAllLogs.iconCls,handler:me.getAllLogs,scope:me,module:me.id,id:"wasutp-server-admin-save-all-logs",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}items.push({text:logs.title,iconCls:logs.iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false},menu:{xtype:"wasutp-menu",items:logsMenuItems}});items.push("-")}var changePass=Wasutp.Menu.getItem(["administration","changePass"]);if(changePass){items.push({text:changePass.title,iconCls:changePass.iconCls,handler:me.changeUserPass,scope:me,module:me.id,id:"wasutp-server-change-user-password",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}});items.push("-")}var sqlConsole=Wasutp.Menu.getItem(["administration","sqlConsole"]);if(sqlConsole){items.push({text:sqlConsole.title,iconCls:sqlConsole.iconCls,handler:me.sqlConsole,scope:me,module:me.id,id:"wasutp-server-sql-console",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}});items.push("-")}var roles=Wasutp.Menu.getItem(["administration","roles"]);if(roles){items.push({text:roles.title,iconCls:roles.iconCls,handler:me.rolesHanler,scope:me,module:me.id,id:"wasutp-server-roles-management",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}});items.push("-")}var systemInfo=Wasutp.Menu.getItem(["administration","systemInfo"]);if(systemInfo){items.push({text:systemInfo.title,iconCls:systemInfo.iconCls,scope:me,module:me.id,id:"wasutp-server-system-information",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)},handler:function(){me.openInfoWindow()}})}var menu=Ext.create("Wasutp.menu.Menu",{items:items});this.launcher={text:Wasutp.Menu.getItem(["administration"]).title,iconCls:Wasutp.Menu.getItem(["administration"]).iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false},menu:menu}},addNesteditems:function(ths){var me=this;if(!ths.uirName&&!ths.menu.items.length){Wasutp.Ajax.request({params:{id:ths.windowId,type:"panel"},url:"/json/administration/get-ema-logs-menu-items",success:function(response){if(typeof response.data=="object"&&response.data.length){ths.menu=Ext.create("Wasutp.menu.Menu",{items:[]});for(var i in response.data){ths.menu.add({text:response.data[i].desc,iconCls:"wasutp-admin-page",serverName:response.data[i].name,handler:me.getEmaLogs,scope:me})}ths.menu.updateLayout()}}})}},getEmaLogs:function(src){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","read")){document.location.target="_blank";document.location.href="/application/download/get-ema-logs?name="+src.serverName}else{aclManager.aclFailureMessage({message:"У вас недостаточно прав для просмотра логов"})}},getNtpLogs:function(){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","read")){document.location.target="_blank";document.location.href="/application/download/get-ntp-logs"}else{aclManager.aclFailureMessage({message:"У вас недостаточно прав для просмотра логов"})}},getPhpLogs:function(){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","read")){document.location.target="_blank";document.location.href="/application/download/get-php-logs"}else{aclManager.aclFailureMessage({message:"У вас недостаточно прав для просмотра логов"})}},getSysLogs:function(){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","read")){document.location.target="_blank";document.location.href="/application/download/get-sys-logs"}else{aclManager.aclFailureMessage({message:"У вас недостаточно прав для просмотра логов"})}},getKernLogs:function(){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","read")){document.location.target="_blank";document.location.href="/application/download/get-kern-logs"}else{aclManager.aclFailureMessage({message:"У вас недостаточно прав для просмотра логов"})}},getAllLogs:function(){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","read")){window.open("/application/download/get-all-logs")}else{aclManager.aclFailureMessage({message:"У вас недостаточно прав для просмотра логов"})}},changeUserPass:function(){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("users","read")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/change-user-pass",title:"Смена пароля",okButton:"Ок",checkHandler:me.checkModulesLoaded,successText:"Пароль успешно изменен",cmdSubmittedText:"Команда принята к исполнению. Смена пароля",form:"changeUserPass",showMessage:true})},reloadModules:function(){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/reload-modules",title:"Перезагрузка модулей ТМ",okButton:"Перезагрузить",checkHandler:me.checkModulesLoaded,successText:"Модули успешно перезагружены",cmdSubmittedText:"Команда принята к исполнению. Перезагрузка модулей ТМ",form:"confirmPass",showMessage:true})},applyChanges:function(params){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/reload-modules",title:"Принять изменения",okButton:"Ok",checkHandler:me.checkModulesLoaded,successText:"Изменения приняты",cmdSubmittedText:"Команда принята к исполнению. Принять изменения",form:"confirmPass",showMessage:true})},applyDcsChanges:function(params){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/reload-dcs",title:"Принять изменения",okButton:"Ok",checkHandler:me.checkModulesLoaded,successText:'Изменения приняты. Сегмент "Сбор и передача"',cmdSubmittedText:'Команда принята к исполнению. Сегмент "Сбор и передача"',form:"confirmPass",showMessage:true})},applyDsgwdChanges:function(params){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/reload-dsgwd",title:"Принять изменения",okButton:"Ok",checkHandler:me.checkModulesLoaded,successText:'Изменения приняты. Сегмент "Сбор IEC61850"',cmdSubmittedText:'Команда принята к исполнению. Сегмент "Сбор IEC61850"',form:"confirmPass",showMessage:true})},applyArchiveChanges:function(params){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/reload-archives",title:"Принять изменения",okButton:"Ok",checkHandler:me.checkModulesLoaded,successText:'Изменения приняты. Подсистема "Архивы"',cmdSubmittedText:'Команда принята к исполнению. Подсистема "Архивы"',form:"confirmPass",showMessage:true})},reloadServer:function(){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/reload-server",title:"Перезагрузка сервера",okButton:"Перезагрузить",checkHandler:me.checkServerLoaded,successText:"Сервер успешно перезагружен",cmdSubmittedText:"Команда принята к исполнению. Перезагрузка сервера",form:"confirmPass",showMessage:true})},stopServer:function(){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/stop-server",title:"Остановка модулей ТМ",okButton:"Остановить",checkHandler:me.checkModulesStopped,successText:"Модули успешно остановлены",cmdSubmittedText:"Команда принята к исполнению. Остановка модулей ТМ",form:"confirmPass",showMessage:true})},startServer:function(){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/start-server",title:"Запуск модулей ТМ",okButton:"Запустить",checkHandler:me.checkModulesLoaded,successText:"Модули успешно запущены",cmdSubmittedText:"Команда принята к исполнению. Запуск модулей ТМ",form:"confirmPass",showMessage:true})},switchOfServer:function(){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/shut-down",title:"Выключение сервера",okButton:"Выключить",checkHandler:me.checkServerOf,successText:"Сервер выключен",cmdSubmittedText:"Команда принята к исполнению. Выключение сервера",form:"confirmPass",showMessage:true})},sendRequest:function(params){var me=this;me.getCheckPassManager().init(params)},checkModulesLoaded:function(){var me=this,d=new Date(),time=d.getTime(),timerName="checkModulesLoaded"+time,func;func=function(){Ext.Ajax.request({url:"/json/administration/check-modules-loaded",success:function(response){response=Ext.decode(response.responseText);if(typeof response!="undefined"&&typeof response.data!="undefined"&&typeof response.data.result!="undefined"){if(response.data.result==true){var timer=Wasutp.Timer.getTimer(timerName);if(timer&&timer.isStarted){errorsHandler.addMessage(me.title,me.successText,Wasutp.ErrorsHandler.message,null,true);Wasutp.Timer.removeTimer(timerName)}}else{if(response.data.result=="error"){var timer=Wasutp.Timer.getTimer(timerName);if(timer&&timer.isStarted){if(typeof response.messages!="undefined"){errorsHandler.addMessages(response.messages)}if(typeof response.errors!="undefined"){errorsHandler.addErrors(response.errors)}Wasutp.Timer.removeTimer(timerName)}}}}}})};Wasutp.Timer.addTimer(timerName,5000,func,20000);Wasutp.Timer.startTimer(timerName)},checkModulesStopped:function(){var me=this,d=new Date(),time=d.getTime(),timerName="checkModulesStopped"+time,func;func=function(){Ext.Ajax.request({url:"/json/administration/check-modules-stopped",success:function(response){response=Ext.decode(response.responseText);if(typeof response!="undefined"&&typeof response.data!="undefined"&&typeof response.data.result!="undefined"){if(response.data.result==true){var timer=Wasutp.Timer.getTimer(timerName);if(timer&&timer.isStarted){errorsHandler.addMessage(me.title,me.successText,Wasutp.ErrorsHandler.message,null,true);Wasutp.Timer.removeTimer(timerName)}}else{if(response.data.result=="error"){var timer=Wasutp.Timer.getTimer(timerName);if(timer&&timer.isStarted){if(typeof response.messages!="undefined"){errorsHandler.addMessages(response.messages)}if(typeof response.errors!="undefined"){errorsHandler.addErrors(response.errors)}Wasutp.Timer.removeTimer(timerName)}}}}}})};Wasutp.Timer.addTimer(timerName,5000,func,20000);Wasutp.Timer.startTimer(timerName)},checkServerLoaded:function(){var me=this,d=new Date(),time=d.getTime(),timerName="checkServerLoaded"+time,func;func=function(){Ext.Ajax.request({url:"/json/administration/check-server-loaded",success:function(response){response=Ext.decode(response.responseText);if(typeof response!="undefined"&&typeof response.data!="undefined"&&typeof response.data.result!="undefined"){if(response.data.result==true){var timer=Wasutp.Timer.getTimer(timerName);if(timer&&timer.isStarted){errorsHandler.addMessage(me.title,me.successText,Wasutp.ErrorsHandler.message,null,true);Wasutp.Timer.removeTimer(timerName)}}}}})};Wasutp.Timer.addTimer(timerName,5000,func,20000);Wasutp.Timer.startTimer(timerName)},checkServerOf:function(){var me=this,d=new Date(),time=d.getTime(),timerName="checkServerOf"+time,func;func=function(){Ext.Ajax.request({url:"/json/administration/check-server-loaded",success:function(response){},failure:function(response){var timer=Wasutp.Timer.getTimer(timerName);if(timer&&timer.isStarted){errorsHandler.addMessage(me.title,me.successText,Wasutp.ErrorsHandler.message,null,true);Wasutp.Timer.removeTimer(timerName)}}})};Wasutp.Timer.addTimer(timerName,5000,func,20000);Wasutp.Timer.startTimer(timerName)},interfaces:null,getInterfaces:function(){if(this.interfaces===null){this.interfaces=Ext.create("Wasutp.Configurations.Interfaces",{})}return this.interfaces},initInterfaces:function(src){this.getInterfaces().getConfig(src)},importConfigRequest:function(){var me=this;var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/check-pass",title:"Загрузка конфигурации на сервер",okButton:"Загрузить",checkHandler:me.importConfig,showMessage:false,form:"confirmPass"})},importConfig:function(){var me=this,form,items=[],okButton,cancelButton;var formSubmitOverride=Ext.create("Wasutp.overrides.form.action.Submit");formSubmitOverride.handleResponse();form=Ext.create("Ext.form.Panel",{layout:"fit",border:false,frame:true,bodyBorder:false,style:"border-width: 0;",items:[{xtype:"filefield",id:"form-file",emptyText:"Выберите файл...",fieldLabel:"Файл конфигурации",name:"photo-path",width:365,buttonText:"...",labelWidth:120,listeners:{change:function(ths,fileName){if(fileName.indexOf(Wasutp.Server.configExtention)!==-1){okButton.enable()}else{okButton.disable()}}}}]});items.push(form);okButton=Ext.create("Ext.button.Button",{text:"Ок",width:180,margin:"5 0 5 5",disabled:"true",handler:function(ths){var form=this.up("window").down("form").getForm();if(form.isValid()){form.submit({url:"/json/application/import-configuration",waitMsg:"Загрузка конфигурации...",success:function(fp,o){if(typeof o.result.messages!="undefined"){errorsHandler.addMessages(o.result.messages)}if(typeof o.result.errors!="undefined"){errorsHandler.addErrors(o.result.errors)}var errorLogCount="";if(o.result.data&&o.result.data.errorLogCount){errorLogCount="?c="+o.result.data.errorLogCount}if(typeof o.result.auth!="undefined"&&o.result.auth===false){window.location="/auth/logout"+errorLogCount}ths.up("window").close()}})}}});items.push(okButton);cancelButton=Ext.create("Ext.button.Button",{xtype:"button",text:"Отмена",width:180,margin:"5 0 5 5",handler:function(ths){console.log("отмена");ths.up("window").close()}});items.push(cancelButton);me.win=Ext.create("Wasutp.window.Modal",{id:"win-authenticate",title:"Импорт конфигурации",bodyPadding:10,items:items});me.win.show()},exportConfigRequest:function(){var me=this;var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("server","administration")===false){aclManager.aclFailureMessage();return false}me.sendRequest({url:"/json/administration/check-pass",title:"Выгрузка конфигурации с сервера",okButton:"Выгрузить",checkHandler:me.exportConfig,showMessage:false,form:"confirmPass"})},exportConfig:function(){Ext.MessageBox.show({msg:"Подождите, выполняется выгрузка конфигурации сервера...",progressText:"Сохранение...",width:300,wait:true,waitConfig:{interval:300},icon:"isms_backup_config_icon",iconHeight:50});Wasutp.Ajax.request({url:"/json/application/export-configuration-prepare",timeout:10*60*1000,success:function(response){Ext.MessageBox.hide();var result=response.data.result,log=response.data.log.replace(/\n/g,"<br>"),filename=response.data.filename;if(result===true){var url="/json/application/export-configuration?filename="+encodeURIComponent(filename);document.location.target="_blank";document.location.href=url;errorsHandler.addMessage("Экспорт конфигурации",log,1,null,false)}else{errorsHandler.addMessage("Ошибка экспорта конфигурации",log,0,null,true)}},failure:function(){Ext.MessageBox.hide()}})},openInfoWindow:function(){var me=this;Wasutp.Ajax.request({url:"/json/application/get-server-info",success:function(response){if(response.data){var host=response.data.host,desktop=wasutpApp.getDesktop(),winId="wasutp-system-information",win=desktop.getWindow(winId),title="Информация о системе";if(host){title+=" "+host}if(!win){win=desktop.createWindow({iconCls:"wasutp-system-info",id:winId,title:title,width:800,height:600,autoScroll:true,items:[{xtype:"panel",padding:"0 10 0 10",border:false,layout:"fit",html:'<iframe src="/info" width="1800" height="5000"></iframe>',listeners:{render:function(component){var iframe=document.getElementsByTagName("iframe")[0];iframe.onload=function(){var iframeDoc2=iframe.contentWindow.document,els=iframeDoc2.getElementsByClassName("isms-about-system-iframe"),el=els[0],actualHeight=el.offsetHeight,actualWidth=el.offsetWidth;iframe.height=actualHeight+100;iframe.width=actualWidth;component.setWidth(actualWidth);component.setHeight(actualHeight+100)};component.getEl().on("load",function(e){var iframe=me.getInfoFrameByWinId(win.id);me.preventContextMenu(iframe)})}}}],bbar:[{xtype:"button",text:"Обновить",handler:function(){var iframe=me.getInfoFrameByWinId(win.id);iframe.src=iframe.src}},{xtype:"button",text:"Сохранить как",handler:function(){document.location.target="_blank";document.location.href="/info?saveas=1"}}]})}win.show()}}})},preventContextMenu:function(iframe){var me=this,fWin=iframe.contentWindow||iframe.contentDocument;Ext.EventManager.on(fWin,"contextmenu",function(e,t){e.stopEvent();return false})},getInfoFrameByWinId:function(id){var me=this,iframes=Ext.query("#"+id+" iframe");if(iframes.length){return iframes[0]}return null},checkPassManager:null,getCheckPassManager:function(){var me=this;if(me.checkPassManager===null){me.checkPassManager=Ext.create("Wasutp.Administration.auth.CheckPassManager")}return me.checkPassManager},sqlConsole:function(){var me=this,params={checkHandler:me.showSqlConsole,showMessage:false,title:"SQL консоль",okButton:"Открыть",url:"/json/administration/check-sql-console-access",scope:me};var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("sql-console","adjust")===false){aclManager.aclFailureMessage();return false}var desktop=wasutpApp.getDesktop(),sqlConsoleManager=Ext.create("Wasutp.Administration.SqlConsole"),window=desktop.getWindow(sqlConsoleManager.windowId);if(!window){me.getCheckPassManager().init(params)}else{window.show()}},rolesHanler:function(){var me=this,rolesManager=Ext.create("Wasutp.acl.RolesManager");rolesManager.show()},showSqlConsole:function(){var me=this,sqlConsoleManager=Ext.create("Wasutp.Administration.SqlConsole");sqlConsoleManager.open()}});Ext.define("Wasutp.SystemStatus",{extend:"Ext.ux.desktop.Module",requires:["Ext.chart.*"],id:"systemstatus",refreshRate:1000,t:0,r:100,init:function(){Ext.chart.theme.Memory=Ext.extend(Ext.chart.theme.Base,{constructor:function(config){Ext.chart.theme.Memory.superclass.constructor.call(this,Ext.apply({colors:["rgb(244, 16, 0)","rgb(248, 130, 1)","rgb(0, 7, 255)","rgb(84, 254, 0)"]},config))}})},createNewWindow:function(){var me=this,desktop=me.app.getDesktop();me.cpuLoadData=[];me.cpuLoadStore=Ext.create("store.json",{url:"ajax/rtquery",baseParams:{cmd:"getFeeds",feed:1},fields:["core1","core2"]});me.generateCpuLoad(50,50);return desktop.createWindow({id:"systemstatus",title:"Графики",width:800,height:600,animCollapse:false,constrainHeader:true,border:false,layout:"fit",listeners:{afterrender:{fn:me.updateCharts,delay:1000},destroy:function(){clearTimeout(me.updateTimer);me.updateTimer=null},scope:me},items:[{xtype:"panel",layout:{type:"hbox",align:"stretch"},items:[{flex:1,height:600,width:400,xtype:"container",layout:{type:"vbox",align:"stretch"},items:[me.createCpu1LoadChart(),me.createCpu2LoadChart()]}]}]})},createWindow:function(){var win=this.app.getDesktop().getWindow(this.id);if(!win){win=this.createNewWindow()}win.show();return win},createCpu1LoadChart:function(){return{flex:1,xtype:"chart",theme:"Category1",animate:false,store:this.cpuLoadStore,legend:{position:"bottom"},axes:[{type:"Numeric",position:"left",minimum:0,maximum:100,fields:["core1"],title:"P MВт",grid:true,labelTitle:{font:"13px Arial"},label:{font:"11px Arial"}}],series:[{title:"P ВЛ С-15",type:"line",lineWidth:4,showMarkers:false,fill:true,axis:"right",xField:"time",yField:"core1",style:{"stroke-width":1}}]}},createCpu2LoadChart:function(){return{flex:1,xtype:"chart",theme:"Category2",animate:false,store:this.cpuLoadStore,legend:{position:"bottom"},axes:[{type:"Numeric",position:"left",minimum:0,maximum:100,grid:true,fields:["core2"],title:"P МВт",labelTitle:{font:"13px Arial"},label:{font:"11px Arial"}}],series:[{title:"P ВЛ С-12",type:"line",lineWidth:4,showMarkers:false,fill:true,axis:"right",xField:"time",yField:"core2",style:{"stroke-width":1}}]}},generateCpuLoad:function(nval1,nval2){var me=this,data=me.cpuLoadData;if(data.length===0){data.push({core1:0,core2:0,time:0});for(var i=1;i<100;i++){data.push({core1:100,core2:100,time:i})}me.cpuLoadStore.loadData(data)}else{me.cpuLoadStore.data.removeAt(0);me.cpuLoadStore.data.each(function(item,key){item.data.time=key});var lastData=me.cpuLoadStore.last().data;me.cpuLoadStore.loadData([{core1:Math.round(nval1),core2:Math.round(nval2),time:lastData.time+1}],true)}},updateCharts:function(){var me=this;clearTimeout(me.updateTimer);me.updateTimer=setTimeout(function(){var start=new Date().getTime();Wasutp.Ajax.request({url:"/ajax/rtquery",loadMask:true,params:{cmd:"getDataFromFeed",feed:2},success:function(r,o){var a=Ext.decode(r.responseText);if(a.result.values[0]!==undefined&&a.result.values[1]!==undefined){value1=parseFloat(a.result.values[0].value);value2=parseFloat(a.result.values[1].value);me.generateCpuLoad(value1,value2)}},scope:this});var end=new Date().getTime();me.refreshRate=Math.max(me.refreshRate,(end-start)*4);me.updateCharts()},me.refreshRate)}});Ext.define("Wasutp.Archives.DownloadArch",{extend:"Ext.ux.desktop.Module",requires:["Ext.data.ArrayStore","Ext.util.Format","Ext.grid.Panel","Ext.grid.RowNumberer"],id:"download-arch",init:function(){this.launcher={}},createWindow:function(){var dt=new Date();dt=Ext.Date.format(dt,"Y_m");document.location.href="/resource/arch/arch_"+dt+".csv.gz"}});Ext.define("Wasutp.Widgets.DcsParam",{statics:{chartCounter:0,panelText:{on:"ВКЛ",off:"ОТКЛ",undefined:"НЕИСПР",neutral:"ПРОМЕЖУТ"}},params:{},container:null,chartTitle:"График",panelIconCls:"wasutp-panels",chartIconCls:"wasutp-charts",panelTitle:"Панель",switchMenuTitle:"",switchMenuIconCls:"",chartHelper:null,panel:null,panelId:null,chartId:null,panelHeight:126,panelWidth:200,constructor:function(params){Ext.create("Wasutp.Widgets.WidgetObserver");this.params={};for(var i in params){this.params[i]=params[i]}this.switchMenuTitle=this.chartTitle;this.switchMenuIconCls=this.chartIconCls},setParams:function(params){var me=this;for(var i in params){me.params[i]=params[i]}},show:function(pos){var me=this;me.container=Ext.create("Wasutp.container.Container",{floating:true,draggable:true,constrain:true,cls:"wasutp-widget-container wasutp-wiget-a-btn wasutp-widget-chart-wrap",paramObject:me,width:me.panelWidth,height:me.panelHeight,tip:null,padding:0,getPage:function(){if(me.switchMenuTitle===me.chartTitle){return"panel"}else{if(me.switchMenuTitle===me.panelTitle){return"chart"}else{return null}}},getWidgetNameEls:function(){return els=me.container.getEl().select("."+me.widgetNameCls).elements},getWidgetName:function(){var els=me.container.getWidgetNameEls();if(els.length){return els[0].innerText}return null},setWidgetName:function(name){var els=me.container.getWidgetNameEls();if(els.length){for(var i in els){els[i].innerText=name}}return false},updateWidget:function(params){var panel,chart;if(typeof params.value!=="undefined"){panel=Ext.getCmp(me.panelId);if(panel){me.setParams({PRECIS:params.precis,DATA:params.value,STATUSES:params.statuses});panel.update(me.getHtml())}chart=Ext.getCmp(me.chartId);if(chart&&me.switchMenuTitle!==me.chartTitle){chart.chartHelper.addPoint({PRECIS:params.precis,statuses:params.statuses,value:params.value,date:params.date})}}},items:[me.getWidgetPanel(),me.getWidgetChart()]});me.container.showAt(parseInt(pos[0]),parseInt(pos[1]));me.container.getEl().on("contextmenu",function(e){var menu;menu=me.getContextMenu();if(menu){menu.showAt(e.getXY())}});me.container.getEl().on("mousedown",function(){me.container.toFront()});Wasutp.Widgets.WidgetObserver.addParam(me.container.id,me.params)},getContextMenu:function(){var me=this,items=[],menu;var switchPanel=Ext.create("Ext.Action",{iconCls:me.switchMenuIconCls,text:me.switchMenuTitle,handler:function(){me.switchPanel()}});items.push(switchPanel);items.push("-");var close=Ext.create("Ext.Action",{iconCls:"wasutp-widget-close",text:"Закрыть виджет",handler:function(){me.container.hide();Wasutp.Widgets.WidgetObserver.deleteParam(me.container.id)}});items.push(close);var closeAll=Ext.create("Ext.Action",{iconCls:"wasutp-widget-close-all",text:"Закрыть все виджеты",handler:function(){var widgets=Wasutp.Widgets.WidgetObserver.getParams(),cmp;for(var i in widgets){cmp=Ext.getCmp(i);if(cmp){cmp.hide();Wasutp.Widgets.WidgetObserver.deleteParam(i)}}}});items.push(closeAll);items.push("-");var rename=Ext.create("Ext.Action",{iconCls:"wasutp-dcs-param-rename",text:"Переименовать",handler:function(){me.renameWidget()}});items.push(rename);items.push("-");var gotoHandler=Ext.create("Wasutp.goto.GotoDcs"),gotoMenuAction=gotoHandler.getMenuAction({id:me.params.ID});if(gotoMenuAction){items.push(gotoMenuAction)}var properties=Ext.create("Ext.Action",{iconCls:"wasutp-settings",text:"Свойства параметра",handler:function(){me.showSettings.apply(me,arguments)}});items.push(properties);if(me.params&&Wasutp.TU.Manager.isTUOpt(me.params.GTOPT)){var TUMenuHelper=Ext.create("Wasutp.TU.Manager",{id:me.params.ID,paramName:me.params.NAME});var TU=TUMenuHelper.getMenuAction();if(TU){items.push({xtype:"menuseparator"});items.push(TU)}}menu=Ext.create("Wasutp.menu.Menu",{items:items});return menu},getWidgetPanel:function(){var me=this;if(me.panel===null){me.panel=Ext.create("Ext.panel.Panel",{height:me.panelHeight,padding:"20 10 10 10",cls:"wasutp-wiget-a-btn-text",html:me.getHtml()})}me.panelId=me.panel.id;return me.panel},getWidgetChart:function(){var me=this,chart,name,unit,chartTitle,panel;if(me.chartHelper===null){this.chartHelper=Ext.create("Wasutp.Widgets.Chart");Wasutp.Widgets.DcsParam.chartCounter++;me.chartId="wasutp-widget-chart-"+Wasutp.Widgets.DcsParam.chartCounter;this.chartHelper.initChart(me.chartId,{gtype:me.params.GTYPE})}chart=me.chartHelper.getChart();name=me.params.NAME?me.params.NAME:"";unit=me.params.UNIT?me.params.UNIT:"";chartTitle=Ext.create("Ext.panel.Panel",{html:new Ext.XTemplate('<small class="wasutp-widget-chart-title"><span class="{widgetNameCls}">{name}</span>, {unit}</small>').apply({widgetNameCls:me.widgetNameCls,name:name,unit:unit})});chart.chartTitlePanel=chartTitle;panel=Ext.create("Ext.panel.Panel",{cls:"wasutp-wiget-chart-side",items:[chartTitle,chart]});return panel},switchPanel:function(){var me=this,panel=Ext.getCmp(me.panelId);if(me.switchMenuTitle===me.chartTitle){me.chartHelper.resetChart();panel.hide();me.switchMenuTitle=me.panelTitle;me.switchMenuIconCls=me.panelIconCls}else{panel.show();me.switchMenuTitle=me.chartTitle;me.switchMenuIconCls=me.chartIconCls}},statusesStyles:{OIC_DST_NOPRESENT:{cls:"wasutp-widget-status-wrap-nopresent"},OIC_DST_VALUENOCORRECT:{cls:"wasutp-widget-status-wrap-valuenocorrect"},OIC_DST_ADERATING:{cls:"wasutp-widget-status-wrap-aderating"},OIC_DST_WDERATING:{cls:"wasutp-widget-status-wrap-wderating"},OIC_DST_MANUAL:{cls:"wasutp-widget-status-wrap-manual"},OIC_DST_SRCMANUAL:{cls:"wasutp-widget-status-wrap-srcmanual"},OIC_DST_SUBSTITUTION:{cls:"wasutp-widget-status-wrap-substitution"},OIC_DST_SLAVESEND:{cls:"wasutp-widget-status-wrap-slavesend"}},widgetNameCls:"isms-widget-name-cls",tpl:'<div class="wasutp-widget-trand-arrows">{trend}</div><small class="{widgetNameCls}">{name}</small><div class="wasutp-widget-value {fontSizeCls}">{value}{units}</div>',rawValue:null,lastRawValue:null,getHtml:function(){var me=this,rawValue,value,trend="",name=me.params.NAME?me.params.NAME:"";if(me.container){name=me.container.getWidgetName()}rawValue=me.params.DATA?me.params.DATA:"";me.lastRawValue=me.rawValue;me.rawValue=rawValue;me.params.PRECIS=me.params.PRECIS?parseInt(me.params.PRECIS):2;if(me.params.GTYPE&&me.params.GTYPE==="3"){value=me.getTsHtmlText(rawValue)}else{if(rawValue.indexOf(".")!==-1){value=accounting.formatNumber(parseFloat(rawValue),me.params.PRECIS,"",".")}else{value=rawValue}}if(me.container){var statuses=me.params.STATUSES,border=Ext.select("#"+me.container.id);for(var i in me.statusesStyles){border.removeCls(me.statusesStyles[i].cls)}for(var i in me.statusesStyles){if(statuses.indexOf(i)!==-1){border.addCls(me.statusesStyles[i].cls)}}}if(!me.params.GTYPE||me.params.GTYPE!=="3"){if(me.lastRawValue&&me.rawValue){if(me.rawValue>me.lastRawValue){trend="up"}else{if(me.rawValue<me.lastRawValue){trend="down"}}}}if(trend==="up"){trend='<img src="/images/trendup.png">'}else{if(trend==="down"){trend='<img src="/images/trenddown.png">'}}var html=new Ext.XTemplate(me.tpl).apply({trend:trend,widgetNameCls:me.widgetNameCls,name:name,fontSizeCls:me.getFontSizeCls(me.params.PRECIS),value:value,units:me.params.UNIT?" "+me.params.UNIT:""});return html},getTsHtmlText:function(rawValue){var me=this,self=Wasutp.Widgets.DcsParam,undefinedStatus="OIC_DST_UNDEFINED_STATE",neutralStatus="OIC_DST_NEUTRAL_STATE",text="",cls="",html=rawValue;if(rawValue==="0"){text=self.panelText.off;cls="wasutp-wiget-text-ts-off"}else{if(rawValue==="1"){text=self.panelText.on;cls="wasutp-wiget-text-ts-on"}}if(me.params.STATUSES){if(me.params.STATUSES.indexOf(undefinedStatus)!==-1){text=self.panelText.undefined;cls="wasutp-wiget-text-ts-on"}else{if(me.params.STATUSES.indexOf(neutralStatus)!==-1){text=self.panelText.neutral;cls="wasutp-wiget-text-ts-off"}}}if(cls!==""){html='<span class="'+cls+'">'+text+"</span>"}else{html=text}return html},getPanelHeight:function(){return this.panelHeight},getPanelWidth:function(){return this.panelWidth},getFontSizeCls:function(precision){var fontSizeCls="wasutp-widget-value-font-size-";if(precision<1){fontSizeCls+=40}else{if(precision<2){fontSizeCls+=36}else{if(precision<3){fontSizeCls+=32}else{if(precision<4){fontSizeCls+=28}else{if(precision<5){fontSizeCls+=26}else{if(precision<6){fontSizeCls+=24}else{if(precision<7){fontSizeCls+=22}else{if(precision<8){fontSizeCls+=20}else{if(precision<9){fontSizeCls+=18}else{if(precision<10){fontSizeCls+=17}else{if(precision<11){fontSizeCls+=17}else{fontSizeCls+=17}}}}}}}}}}}return fontSizeCls},showSettings:function(){var me=this,settingsHelper,id;Wasutp.Ajax.request({url:"/json/params/get-param-model",params:{id:me.params.ID},success:function(response){if(response.data){id="dcs_param_"+me.params.ID;settingsHelper=Ext.create("Wasutp.Configurations.ParamUpdate",{});settingsHelper.init(id,response,"dcs")}}})},renameWidget:function(){var me=this;Ext.MessageBox.prompt("Переименование","Введите имя виджета:",function(btn,text){if(btn==="ok"){me.container.setWidgetName(text)}},null,null,me.container.getWidgetName())}});Ext.define("Wasutp.ServerStatement",{timeout:null,interval:1000*60,iconPanelId:"wasutp-server-statement",startManager:function(){var me=this;me.timeout=setTimeout(function(){me.getServerStatement()},me.interval)},start:function(){var me=this;me.timeout=setTimeout(function(){me.getServerStatement()},3000)},getServerStatement:function(){var me=this;Wasutp.Ajax.request({url:"/json/application/get-server-statement",params:{},success:function(response){me.startManager();if(response.data){if(response.data.state==="master"){me.setMasterState()}else{if(response.data.state==="slave"){me.setSlaveState()}else{me.setUnknownState()}}if(response.data.isBlocked===true){me.changeStatusMenuItem.disable()}else{me.changeStatusMenuItem.enable()}}else{me.setUnknownState()}var trayClock=Ext.getCmp("wasutp-trayClock"),time;if(response.data.trayClockTime){time=response.data.trayClockTime}trayClock.updateTime(time);if(appHelper.tabSessionManager.isLocalStorageAvailable()){appHelper.tabSessionManager.extendTabSession()}},unsuccess:function(){me.startManager();me.setUnknownState()},failure:function(){me.startManager();me.setUnknownState()}})},iconDomElement:null,getIconElement:function(){var me=this;if(!me.iconDomElement){me.iconDomElement=Ext.getCmp(me.iconPanelId)}return me.iconDomElement},statuses:{unknown:"wasutp-icon-flag-unknown",master:"wasutp-icon-flag-master",slave:"wasutp-icon-flag-slave"},setMasterState:function(){var me=this,icon=me.getIconElement();if(icon){icon.setIconCls(me.statuses.master);icon.setTooltip({text:"Статус сервера - основной",align:"b-t"});if(me.changeStatusMenuItem!==null){me.changeStatusMenuItem.enable()}}},setSlaveState:function(){var me=this,icon=me.getIconElement();if(icon){icon.setIconCls(me.statuses.slave);icon.setTooltip({text:"Статус сервера - резервный",align:"b-t"});if(me.changeStatusMenuItem!==null){me.changeStatusMenuItem.disable()}}},setUnknownState:function(){var me=this,icon=me.getIconElement();if(icon){icon.setIconCls(me.statuses.unknown);icon.setTooltip({text:"Статус сервера не определен",align:"b-t"});if(me.changeStatusMenuItem!==null){me.changeStatusMenuItem.disable()}}},changeStatus:function(){var me=this,params={okButton:"OK",url:"/json/administration/change-server-status",showMessage:"Смена статуса сообщение",title:"Смена статуса"},checkPassManager=Ext.create("Wasutp.Administration.auth.CheckPassManager");checkPassManager.init(params)},changeStatusMenuItem:null,getServerStatementMenu:function(){var me=this,menu;me.changeStatusMenuItem=Ext.create("Ext.menu.Item",{text:"Сменить статус",iconCls:"wasutp-change-server-status",disabled:true,handler:function(){me.changeStatus()}});menu={items:[me.changeStatusMenuItem]};return menu}});Ext.define("Wasutp.Widgets.DesktopTheme",{constructor:function(config){Ext.define("Ext.chart.theme.DesktopWidgetChart",{requires:["Ext.chart.theme.Theme"],constructor:function(config){Ext.chart.theme.call(this,config,{background:false,axis:{"stroke-width":0.5},axisLabelTop:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(v){return v}},axisLabelRight:{fill:"#fff",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:12,renderer:function(v){return v}},axisLabelBottom:{fill:"#fff",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(v){return v}},axisLabelLeft:{fill:"#fff",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(v){return v}},axisTitleTop:{font:"bold 18px Arial",fill:"#444"},axisTitleRight:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},axisTitleBottom:{font:"bold 18px Arial",fill:"#444"},axisTitleLeft:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},series:{"stroke-width":0},seriesLabel:{font:"12px Arial",fill:"#333"},marker:{radius:3,size:3},colors:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],seriesThemes:[{fill:"#fff"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#a66111"}],markerThemes:[{fill:"#115fa6",type:"circle"},{fill:"#94ae0a",type:"cross"},{fill:"#115fa6",type:"plus"},{fill:"#94ae0a",type:"circle"},{fill:"#a61120",type:"cross"}]})}},function(){var palette=["#b1da5a","#4ce0e7","#e84b67","#da5abd","#4d7fe6","#fec935"],names=["Green","Sky","Red","Purple","Blue","Yellow"],i=0,j=0,l=palette.length,themes=Ext.chart.theme,categories=[["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]],cats=categories.length;for(;i<l;i++){themes[names[i]]=(function(color){return Ext.extend(themes.Base,{constructor:function(config){themes.Base.prototype.constructor.call(this,Ext.apply({baseColor:color},config))}})}(palette[i]))}for(i=0;i<cats;i++){themes["Category"+(i+1)]=(function(category){return Ext.extend(themes.Base,{constructor:function(config){themes.Base.prototype.constructor.call(this,Ext.apply({colors:category},config))}})}(categories[i]))}})}});Ext.define("Wasutp.Reports.ReportsConfig",{props:null,constructor:function(props){this.props=props;if(typeof this.props=="undefined"){errorsHandler.addMessage("Ошибка конфигурации отчетов","Нет данных для конфигурации. "+Ext.getDisplayName)}},getStoreFields:function(){if(typeof this.props.fields!="undefined"){var fields=[];for(var i in this.props.fields){fields.push(i)}return fields}else{errorsHandler.addMessage("Ошибка конфигурации отчетов","Нет данных для конфигурации. "+Ext.getDisplayName)}},getSource:function(){if(typeof this.props.fields!="undefined"){var source=[];for(var i in this.props.fields){if(typeof this.props.fields[i].filter!="undefined"){switch(this.props.fields[i].filter){case"string":source[this.props.fields[i].column]="";break;case"int":source[this.props.fields[i].column]="";break;case"float":source[this.props.fields[i].column]="";break;case"bool":source[this.props.fields[i].column]=false;break;case"date":source["dateStart_"+this.props.fields[i].column]=Ext.Date.parse(Ext.Date.format(new Date(),"Y-m-d"),"Y-m-d");source["dateEnd_"+this.props.fields[i].column]=Ext.Date.parse(Ext.Date.format(new Date(),"Y-m-d"),"Y-m-d");break;case"combobox":source[this.props.fields[i].column]="";break;default:break}}else{}}return source}else{errorsHandler.addMessage("Ошибка конфигурации отчетов","Нет данных для конфигурации. "+Ext.getDisplayName)}},getPropertyNames:function(){if(typeof this.props.fields!="undefined"){var propertyNames={};for(var i in this.props.fields){if(typeof this.props.fields[i].filter!="undefined"){if(this.props.fields[i].filter=="date"){var sources=this.getSource();for(var j in sources){if(!j.indexOf("dateStart_")){propertyNames[j]=this.props.fields[i].title+" (от)"}if(!j.indexOf("dateEnd_")){propertyNames[j]=this.props.fields[i].title+" (до)"}}}else{propertyNames[this.props.fields[i].column]=this.props.fields[i].title}}else{}}return propertyNames}else{errorsHandler.addMessage("Ошибка конфигурации отчетов","Нет данных для конфигурации. "+Ext.getDisplayName)}},getCustomEditors:function(){var editors={};if(typeof this.props!="undefined"&&typeof this.props.fields!="undefined"){for(var i in this.props.fields){if(this.props.fields[i].editorClassName){editors[this.props.fields[i].column]=Ext.create(this.props.fields[i].editorClassName,this.props.fields[i])}else{if(this.props.fields[i].filter==="combobox"){var data=[];data=data.concat(this.props.fields[i].data);editors[this.props.fields[i].column]=Ext.create("Ext.form.field.ComboBox",{editable:false,store:data,forceSelection:true})}}}return editors}return""},getCustomRenderers:function(){var customRenderers={};var sources=this.getSource();for(var j in sources){if(!j.indexOf("dateStart_")||!j.indexOf("dateEnd_")){customRenderers[j]=function(date){return Ext.Date.format(date,"d.m.y")}}}return customRenderers},getWindowProps:function(){if(typeof this.props.window!="undefined"){if(typeof this.props.window.title=="undefined"&&!this.props.window.title){this.props.window.title="Нет заголовка"}if(typeof this.props.window.width!="undefined"&&this.props.window.width){this.props.window.width=parseInt(this.props.window.width)}else{this.props.window.width=1000}if(typeof this.props.window.height=="undefined"&&!this.props.window.height){this.props.window.height=parseInt(this.props.window.height)}else{this.props.window.height=650}if(typeof this.props.window.size=="undefined"&&!this.props.window.size){this.props.window.size=28}if(typeof this.props.window.updatePeriod=="undefined"&&!this.props.window.updatePeriod){this.props.window.updatePeriod=20000}return this.props.window}},getFilterTypeByName:function(name){if(typeof name!="undefined"){if(typeof this.props.fields!="undefined"){if(name=="dateStart"||name=="dateEnd"){return"date"}for(var i in this.props.fields){if(this.props.fields[i].column==name&&typeof this.props.fields[i].filter!="undefined"&&this.props.fields[i].filter){return this.props.fields[i].filter}}}else{errorsHandler.addMessage("Ошибка конфигурации отчетов","Нет данных для конфигурации. "+Ext.getDisplayName)}}return""},getFilters:function(source){var filters=[];if(typeof this.props.fields!="undefined"){for(var i in source){var time=null;try{time=Ext.Date.format(source[i],"Y-m-d")}catch(e){time=null}if(source[i]!==""&&source[i]!==null){filters.push({name:i,value:time?time:source[i]})}}}else{errorsHandler.addMessage("Ошибка конфигурации отчетов","Нет данных для конфигурации. "+Ext.getDisplayName)}return filters},getConlumns:function(){var conlumns=[];for(var i in this.props.fields){if(this.props.fields[i].grid==="false"){continue}var text,dataIndex,width,flex;var column={text:typeof this.props.fields[i].title!="undefined"?this.props.fields[i].title:"",dataIndex:i};if(typeof this.props.fields[i].width!="undefined"&&this.props.fields[i].width){column.width=parseInt(this.props.fields[i].width)}else{column.flex=1}conlumns.push(column)}return conlumns},getRowClasses:function(column,conditions){var classes=[];if(typeof conditions!="undefined"&&typeof conditions.condition!="undefined"){for(var i in conditions.condition){if(!conditions.condition[i]){continue}switch(i){case"equal":if(column==conditions.condition[i]){classes=this.pushRowClass(classes,conditions.cls)}break;case"greater":if(column>conditions.condition[i]){classes=this.pushRowClass(classes,conditions.cls)}break;case"less":if(column<conditions.condition[i]){classes=this.pushRowClass(classes,conditions.cls)}break;case"equalgreater":if(column<=conditions.condition[i]){classes=this.pushRowClass(classes,conditions.cls)}break;case"equalless":if(column>=conditions.condition[i]){classes=this.pushRowClass(classes,conditions.cls)}break}}}return classes},pushRowClass:function(classes,cls){if(classes.length){for(var i in classes){if(classes[i]==cls){return classes}}}classes.push(cls);return classes},getConditions:function(){if(typeof this.props.conditions!="undefined"){return this.props.conditions}}});Ext.define("Wasutp.Widgets.WidgetObserver",{statics:{updatePeriod:null,getUpdatePeriod:function(){if(this.updatePeriod===null){var widgetUpdatePeriod=appHelper.getWasutpConfig().widgetUpdatePeriod;this.updatePeriod=widgetUpdatePeriod?widgetUpdatePeriod:5000}return this.updatePeriod},dataIsRequesting:false,params:{},addParam:function(id,param){var me=this;me.params[id]=param;if(me.dataIsRequesting===false){me.sendRequest();me.dataIsRequesting=true}},getParams:function(){return this.params},getParamsCount:function(){var count=0,i;for(i in this.params){count++}return count},deleteParam:function(id){var me=this;if(me.params[id]){delete me.params[id]}},getData:function(){var me=this;setTimeout(function(){me.sendRequest()},me.getUpdatePeriod())},sendRequest:function(){var me=this,params=[];if(me.isEmpty(me.params)===true){me.dataIsRequesting=false;return}for(var i in me.params){if(params.indexOf(me.params[i].ID)===-1){params.push(me.params[i].ID)}}Wasutp.Ajax.request({url:"/json/params/get-data",params:{id:"ParamObserver",options:JSON.stringify({createConfig:true}),params:JSON.stringify(params)},success:function(response){me.getData();me.updateWidgets(response)},unsuccess:function(response){me.getData();me.updateWidgets(response)},failure:function(response){me.getData();me.updateWidgets(response)}})},updateWidgets:function(response){var me=this,data=response.data,i,container;if(!data||data.length===0){for(i in me.params){container=Ext.getCmp(i);Wasutp.Params.Updater.callFn(container.updateWidget,this,[{value:"0",date:null,statuses:["OIC_DST_NOPRESENT"]}])}return false}var arr=[];for(var i in me.params){arr.push({id:i,item:me.params[i]})}arr.forEach(function(item,i){setTimeout(function(){me.updateWidget(item.id,data,item.item)},100*(i+1))})},updateWidget:function(containerId,data,params){var me=this,container=Ext.getCmp(containerId);if(data["param"+params.ID]){Wasutp.Params.Updater.callFn(container.updateWidget,this,[{precis:data["param"+params.ID].PRECIS,value:data["param"+params.ID].VALUE1,statuses:data["param"+params.ID].STATUSES,date:data["param"+params.ID].DATE}])}else{Wasutp.Params.Updater.callFn(container.updateWidget,this,[{value:"0",date:null,statuses:["OIC_DST_NOPRESENT"]}])}},isEmpty:function(obj){var i;for(i in obj){return false}return true},alignWidgets:function(){var me=this,params=me.getSortedParams(),container,gridMargin=8,gridSizes=me.getGridSizes(),startPoint=me.getStartPoint(),currentPoint=[startPoint[0],startPoint[1]],windowSize=appHelper.getWindowSize();if(!params.length){return false}for(var i in params){container=Ext.getCmp(params[i].id);container.showAt(currentPoint[0],currentPoint[1]);if(currentPoint[1]+2*(gridSizes[1]+gridMargin)+28>windowSize[1]){if(currentPoint[0]+2*gridSizes[0]+gridMargin>windowSize[0]){break}currentPoint[0]=currentPoint[0]+gridMargin+gridSizes[0];currentPoint[1]=startPoint[1]}else{currentPoint[1]=currentPoint[1]+gridMargin+gridSizes[1]}}},alignToGrid:function(){var me=this,params=me.getSortedParams(),startPoint=me.getStartPoint(),grid;if(!params.length){return false}var cmp,position,ind,sqr,minSqr;for(var i in params){cmp=Ext.getCmp(params[i].id);position=cmp.getPosition();ind=null;minSqr=null;if(me.isWidgetInGrid(position)){continue}grid=me.getGrid(startPoint,false);for(var g in grid){if(grid[g]){if(ind===null){ind=g;minSqr=Math.abs(position[0]-grid[g].x)*Math.abs(position[1]-grid[g].y)}sqr=Math.abs(position[0]-grid[g].x)*Math.abs(position[1]-grid[g].y);if(minSqr>sqr){ind=g;minSqr=sqr}}}cmp.showAt(grid[ind].x,grid[ind].y)}},isWidgetInGrid:function(point){var me=this,startPoint=me.getStartPoint(),grid=me.getGrid(startPoint,true);for(var i in grid){if(point[0]===grid[i].x&&point[1]===grid[i].y){return true}}return false},issetWidget:function(point){var me=this,params=me.getSortedParams();for(var i in params){if(point[0]===params[i].x&&point[1]===params[i].y){return true}}return false},getGrid:function(startPoint,countBusyPlaces){var me=this,gridMargin=8,gridSizes=me.getGridSizes(),currentPoint=[startPoint[0],startPoint[1]],windowSize=appHelper.getWindowSize(),grid=[];for(;;){if(countBusyPlaces||!me.issetWidget(currentPoint)){grid.push({x:currentPoint[0],y:currentPoint[1]})}if(currentPoint[1]+2*(gridSizes[1]+gridMargin)+28>windowSize[1]){if(currentPoint[0]+2*gridSizes[0]+gridMargin>windowSize[0]){return grid}currentPoint[0]=currentPoint[0]+gridMargin+gridSizes[0];currentPoint[1]=startPoint[1]}else{currentPoint[1]=currentPoint[1]+gridMargin+gridSizes[1]}}},sortAlgorithm:function(a,b){if(a.y<b.y){if(a.x<b.x){return -1}else{if(a.x>b.x){return 1}else{return 0}}}else{if(a.y>b.y){if(a.x<b.x){return -1}else{if(a.x>b.x){return 1}else{return 1}}}else{if(a.x<b.x){return -1}else{if(a.x>b.x){return 1}else{return 0}}}}},getSortedParams:function(){var me=this,params=me.getParams(),sortedParams=[],cmp,position;for(var i in params){cmp=Ext.getCmp(i);position=cmp.getPosition();sortedParams.push({id:i,x:position[0],y:position[1],data:params[i]})}sortedParams.sort(me.sortAlgorithm);return sortedParams},getGridSizes:function(){var emptyWidget=Ext.create("Wasutp.Widgets.DcsParam"),gridWidth=emptyWidget.getPanelWidth(),gridHeight=emptyWidget.getPanelHeight();return[gridWidth,gridHeight]},getStartPoint:function(){var desktop=wasutpApp.getDesktop(),dataview=desktop.down("dataview"),nodes=dataview.getNodes(),lastViewNode,boundingClientRect,gridYMargin=20,gridXMargin=10,startXPoint=0;if(nodes.length){lastViewNode=nodes[nodes.length-1];boundingClientRect=lastViewNode.getBoundingClientRect();startXPoint=boundingClientRect.right+gridXMargin}else{startXPoint=gridYMargin}return[startXPoint,gridYMargin]},deleteWidgetFromDesktop:function(id){var me=this,id=parseInt(id);Wasutp.Ajax.request({url:"/json/application/delete-widget-if-exists",params:{id:id}})}}});Ext.define("Wasutp.Widgets.Chart",{params:{},props:{},chartData:[],store:null,chart:null,chartLength:8,chartTitlePanel:null,koefCorrectYAxes:0.3,chartWidth:190,chartHeight:95,floatingTextId:null,construct:function(params){this.params=params},initChart:function(id,props){var me=this,yLeftAxis,xAxis,yRighttAxis;me.props=props;me.floatingTextId=id+"-floating-text";me.chartData=[];me.store=Ext.create("Ext.data.JsonStore",{fields:["date","value"],data:[]});me.store.loadData(me.chartData);Ext.create("Wasutp.Widgets.DesktopTheme");yLeftAxis={type:"Numeric",position:"left",fields:["value"],minorTickSteps:0,grid:{even:{opacity:0.5,stroke:"#fff","stroke-width":0.5},odd:{opacity:0.5,stroke:"#fff","stroke-width":0.5}},label:{renderer:function(v){if(me.isBoolParam()){if(v===1){return"ВКЛ"}else{if(v===0){return"ОТКЛ"}else{return""}}}else{if(v===0){return v}else{v=accounting.formatNumber(parseFloat(v),2,"",".")}}return v}}};if(me.isBoolParam()){yLeftAxis.minimum=0;yLeftAxis.maximum=1}xAxis={type:"Category",position:"bottom",fields:["date"],majorTickSteps:0,minorTickSteps:0,grid:{even:{opacity:0.5,stroke:"#fff","stroke-width":0.5},odd:{opacity:0.5,stroke:"#fff","stroke-width":0.5}}};yRighttAxis={type:"Numeric",majorTickSteps:0,minorTickSteps:0,position:"right",fields:["value"],label:{renderer:function(){return"          "}}};me.chart=Ext.create("Ext.chart.Chart",{id:id,chartHelper:me,theme:"DesktopWidgetChart",width:me.chartWidth,height:me.chartHeight,xtype:"chart",store:me.store,shadow:false,axes:[yLeftAxis,xAxis,yRighttAxis],series:[{type:"line",axis:"left",xField:"date",yField:"value",selectionTolerance:5,label:{display:"insideEnd",field:"data1",renderer:Ext.util.Format.numberRenderer("0"),orientation:"horizontal",color:"#333","text-anchor":"middle"},listeners:{draw:function(ths){var markersCount=parseInt(me.store.getCount()),record,availableClses=Wasutp.Params.Param.statusFillCls,sprite,cls="",i,j,c;for(i=0;i<markersCount;i++){record=me.store.getAt(i);sprite=ths.items[i].sprite;for(j in availableClses){sprite.removeCls(availableClses[j])}cls=Wasutp.Params.Param.getChartMarkerClsByStatuses(record.raw.statuses);if(cls.length){for(c in cls){sprite.addCls(cls[c])}}}}}}],items:[{type:"text",id:me.floatingTextId,text:"",cls:"wasutp-widget-chart-floating-value",x:me.chartWidth-20,y:me.chartHeight-58,fill:"#FFFFFF",font:"12px Arial, Helvetica, sans-serif"}],listeners:{refresh:function(chart){var points,lastPoint=null,floatingText=null;points=chart.series.items[0].items;if(points.length){lastPoint=points[points.length-1]}if(!me.isBoolParam()){if(lastPoint){floatingText=document.getElementById(me.floatingTextId);if(floatingText){floatingText.textContent=parseInt(lastPoint.value[1]);floatingText.setAttribute("y",parseInt(lastPoint.point[1])+5)}}}}}})},addPoint:function(point){var me=this,time=null,dt=point.date;if(point.value&&dt){time=Ext.Date.format(new Date(dt.year,dt.month-1,dt.date,dt.hours,dt.minutes,dt.seconds),"H:i:s");if(me.chartData.length>=me.chartLength){for(var i in me.chartData){i=parseInt(i);if(typeof me.chartData[i+1]!="undefined"){me.chartData[i]=me.chartData[i+1]}}me.chartData[me.chartData.length-1]={date:time,value:parseFloat(point.value),statuses:point.statuses}}else{me.chartData.push({date:time,value:parseFloat(point.value),statuses:point.statuses})}me.store.loadData(me.chartData)}},resetChart:function(){var me=this;me.chart.surface.removeAll();me.chartData=[];me.store.loadData(me.chartData)},correctYAxesLimits:function(){var me=this,valueAxis=me.chart.axes.get(0);if(me.props.gtype&&me.props.gtype=="3"){valueAxis.maximum=1;valueAxis.minimum=0}},getChart:function(){var me=this;if(me.chart===null){me.initChart()}return me.chart},isBoolParam:function(){var me=this;return me.props.gtype&&me.props.gtype=="3"}});Ext.define("Wasutp.AppHelper",{remoteControll:null,config:{userName:"Пользователь",userId:null,userRole:null,menuItems:[],wasutpConfig:[],menuPanels:[],menuSchemes:[],menuReports:[],serverDateConfig:null},tabSessionManager:null,constructor:function(config){if(config.response===null){return false}this.initConfig({userName:config.response.data.user.userName,userId:config.response.data.user.userId,userRole:config.response.data.user.userRole,menuItems:config.response.data.items,wasutpConfig:config.response.data.wasutpConfig,menuPanels:config.response.data.menuPanels,menuSchemes:config.response.data.menuSchemes,menuReports:config.response.data.menuReports,serverDateConfig:config.response.data.serverDateConfig});if(config.response.data.acl){this.initAcl(config.response.data.acl)}this.tabSessionManager=Ext.create("Wasutp.tabsession.TabSessionManager");this.tabSessionManager.init()},getContextMenu:function(){if(this.contextMenu==null){this.contextMenu=Ext.create("Wasutp.ContextMenu")}return this.contextMenu},getWindowSize:function(){var e=document.documentElement,g=document.getElementsByTagName("body")[0],x=window.innerWidth||e.clientWidth||g.clientWidth,y=window.innerHeight||e.clientHeight||g.clientHeight;return[x,y]},aclManager:null,initAcl:function(params){var me=this;if(me.aclManager===null){me.aclManager=Ext.create("Wasutp.acl.Manager",{})}me.aclManager.initAcl(params)},getAclManager:function(){var me=this;return me.aclManager},modules:{},columnsState:null,getColumnsState:function(){var me=this;if(me.columnsState===null){me.columnsState=Wasutp.grid.columns.State.getInstance()}return me.columnsState}});
/*!
 * Ext JS Library 4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.define("Wasutp.Settings",{extend:"Ext.window.Window",uses:["Ext.tree.Panel","Ext.tree.View","Ext.form.field.Checkbox","Ext.layout.container.Anchor","Ext.layout.container.Border","Ext.ux.desktop.Wallpaper","Wasutp.WallpaperModel"],layout:"anchor",title:"Настройки",modal:true,width:640,height:480,border:false,initComponent:function(){var me=this;me.selected=me.desktop.getWallpaper();me.stretch=me.desktop.wallpaper.stretch;me.preview=Ext.create("widget.wallpaper");me.preview.setWallpaper(me.selected);me.tree=me.createTree();me.buttons=[{text:"OK",handler:me.onOK,scope:me},{text:"Отмена",handler:me.close,scope:me}];me.items=[{anchor:"0 -30",border:false,layout:"border",items:[me.tree,{xtype:"panel",title:"Preview",region:"center",layout:"fit",items:[me.preview]}]},{xtype:"checkbox",boxLabel:"На весь экран",checked:me.stretch,listeners:{change:function(comp){me.stretch=comp.checked}}}];me.callParent()},createTree:function(){var me=this;function child(img){return{img:img,text:me.getTextOfWallpaper(img),iconCls:"",leaf:true}}var tree=new Ext.tree.Panel({title:"Фоновый рисунок",rootVisible:false,lines:false,autoScroll:true,width:150,region:"west",split:true,minWidth:100,listeners:{afterrender:{fn:this.setInitialSelection,delay:100},select:this.onSelect,scope:this},store:new Ext.data.TreeStore({model:"Wasutp.WallpaperModel",root:{text:"Wallpaper",expanded:true,children:[{text:"None",iconCls:"",leaf:true},child("Blue-Ema.jpg"),child("blue.jpg"),child("desk.jpg"),child("desktop.jpg"),child("desktop2.jpg"),child("sky.jpg")]}})});return tree},getTextOfWallpaper:function(path){var text=path,slash=path.lastIndexOf("/");if(slash>=0){text=text.substring(slash+1)}var dot=text.lastIndexOf(".");text=Ext.String.capitalize(text.substring(0,dot));text=text.replace(/[-]/g," ");return text},onOK:function(){var me=this;if(me.selected){me.desktop.setWallpaper(me.selected,me.stretch)}me.destroy()},onSelect:function(tree,record){var me=this;if(record.data.img){me.selected="wallpapers/"+record.data.img}else{me.selected=Ext.BLANK_IMAGE_URL}me.preview.setWallpaper(me.selected)},setInitialSelection:function(){var s=this.desktop.getWallpaper();if(s){var path="/Wallpaper/"+this.getTextOfWallpaper(s);this.tree.selectPath(path,"text")}}});Ext.define("Wasutp.tip.ToolTip",{isTargetVisible:function(el){if(!el){return false}var rect=el.getBoundingClientRect();if(rect&&rect.top>0&&rect.left>0&&rect.bottom<(window.innerHeight||document.documentElement.clientHeight)&&rect.right<(window.innerWidth||document.documentElement.clientWidth)){return true}return false},constructor:function(config){var me=this,tip=Ext.create("Ext.tip.ToolTip",config);tip.on({beforeshow:function(ths){if(ths.target&&!me.isTargetVisible(ths.target.dom)){return false}},show:function(ths){ths.el.setStyle("z-index","999999")}});return tip}});Ext.define("Wasutp.Date.TrayClock",{extend:"Ext.toolbar.TextItem",alias:"widget.wasutp-trayclock",cls:"ux-desktop-trayclock",html:"&#160;",timeFormat:"H:i",tpl:"{time}",emptyText:"--:--",initComponent:function(){var me=this;me.callParent();if(typeof(me.tpl)=="string"){me.tpl=new Ext.XTemplate(me.tpl)}},afterRender:function(){var me=this;me.updateTime();me.callParent()},onDestroy:function(){var me=this;me.callParent()},updateTime:function(time){var me=this,text;time=time?time:me.emptyText;text=me.tpl.apply({time:time});if(me.lastText!=text){me.setText(text);me.lastText=text}}});Ext.define("Wasutp.ContextMenu",{getMenuItems:function(el){var items=[];var tu=this.getTU(el);if(tu){items.push(tu)}var charts=this.getCharts(el);if(charts){items.push(charts)}return items},getCharts:function(el){if(el.elementType!="ti"){return false}var item={iconCls:"wasutp-charts",text:"Графики",handler:function(){var charts=Ext.create("Wasutp.Charts.Charts",el);charts.show()}};return item},getTU:function(el){if(el.elementType!="ts"){return false}var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("oik","telecontrol")===false){return false}var me=this;var disabled=false;if(el.tu==1){disabled=false}else{disabled=true}if(typeof el.statuses=="undefined"){return false}for(var i in el.statuses){if(el.statuses[i]=="OIC_DST_NOPRESENT"||el.statuses[i]=="OIC_DST_VALUENOCORRECT"){disabled=true;break}}var menu={items:[{iconCls:"wasutp-tu-on-icon",text:"Включить",disabled:el.value==0?false:true,handler:function(){me.execute(1,el)}},{iconCls:"wasutp-tu-off-icon",text:"Отключить",disabled:el.value==1?false:true,handler:function(){me.execute(0,el)}}]};var item={iconCls:"wasutp-tu-icon",text:"Телеуправление",disabled:disabled,menu:menu};return item},getContextMenu:function(el){var title=el.name?el.name:"Отсутствует",disabled=el.name?false:true;if(el.elementType=="ti"){var unit=el.unit?", "+el.unit:"";title+=unit}if(appHelper.config.wasutpConfig.debugMode){title+=" ("+el.param_id+")"}var contextMenu=Ext.create("Wasutp.menu.Menu",{disabled:disabled,title:title,items:this.getMenuItems(el)});return contextMenu},constructor:function(){},setMenuEvent:function(panelId){var me=this,panel=Ext.getCmp(panelId),els=[];if(panel&&panel.items){var els=panel.items.items}if(els.length){for(var i in els){var el=els[i].getEl();el.on("contextmenu",function(e){e.preventDefault();if(this.name&&this.hasContextMenu!==false){var menu=me.getContextMenu(this);if(menu){menu.showAt(e.getXY())}}})}}},execute:function(cmd,el){var title="Запрос выполнения команды ТУ";cmdText=cmd?"Включить":"Отключить";var message='Вы действительно хотите для "'+el.name+'" отправить команду "'+cmdText+'"?';Ext.MessageBox.confirm({title:title,cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:message,buttons:Ext.MessageBox.YESNO,callback:function(btn){if(btn==="yes"){Wasutp.Ajax.request({url:"/json/context-menu/execute",params:{cmd:cmd,param_id:el.param_id,panel_id:el.panel_id},success:function(response){var title="Результат выполнения команды ТУ";if(response.data.result=="0"){var message='Команда "'+cmdText+'" для "'+el.name+'" принята к исполнению.'}else{if(typeof response.data.result!="undefined"){var errorMsg="";switch(response.data.result){case 246:errorMsg="Ошибка выполнения команды.";break;case 236:errorMsg="Ошибка, сервер не отвечает.";break;default:errorMsg="";break}var message='Команда "'+cmdText+'" для "'+el.name+'" выполнена с ошибками!<br /> '+errorMsg}else{var message='Команда "'+cmdText+'" для "'+el.name+'" не выполнена!'}}Ext.MessageBox.alert(title,message)}})}}})}});Ext.define("Wasutp.Reports.Reports",{extend:"Ext.ux.desktop.Module",id:"wasutp-reports",requires:["Ext.util.Format","Ext.grid.Panel","Ext.grid.RowNumberer","Ext.Date"],tipCollapse:null,tipExpand:null,init:function(){this.launcher={text:Wasutp.Menu.getItem(["reports"]).title,iconCls:Wasutp.Menu.getItem(["reports"]).iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false}};var items=this.getMenuItems();if(items.length){this.launcher.menu=Ext.create("Wasutp.menu.Menu",{items:items})}},getMenuItems:function(){var me=this,menu=[],items=appHelper.getMenuReports();for(var i in items){if(items[i].FILE_NAME){menu.push({text:items[i].NAME,iconCls:Wasutp.Menu.getItem(["reports"]).iconCls,handler:me.createWindow,scope:me,reportId:items[i].ID,fileName:items[i].FILE_NAME,module:me.id,id:"wasutp-reports-"+items[i].ID,listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}else{menu.push({text:items[i].NAME,iconCls:"x-tree-icon-parent",scope:me,reportId:items[i].ID,fileName:items[i].FILE_NAME,handler:function(){return false},menu:{items:[]},listeners:{added:function(ths){return me.addNesteditems(ths)}}})}}return menu},addNesteditems:function(ths){var me=this;if(!ths.uirName&&!ths.menu.items.length){Wasutp.Ajax.request({params:{id:ths.reportId,type:"report"},url:"/json/application/getChildMenuItems",success:function(response){ths.menu=Ext.create("Wasutp.menu.Menu",{items:[]});for(var i in response.data){if(response.data[i].FILE_NAME){ths.menu.add({text:response.data[i].NAME,iconCls:Wasutp.Menu.getItem(["reports"]).iconCls,handler:me.createWindow,scope:me,reportId:response.data[i].ID,fileName:response.data[i].FILE_NAME,module:me.id,id:"wasutp-reports-"+response.data[i].ID,listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}else{ths.menu.add({text:response.data[i].NAME,iconCls:"x-tree-icon-parent",scope:me,reportId:response.data[i].ID,fileName:response.data[i].FILE_NAME,handler:function(){return false},menu:{items:[]},listeners:{added:function(ths){return me.addNesteditems(ths)}}})}}ths.menu.updateLayout()}})}},createWindow:function(src){var me=this,desktop=this.app.getDesktop(),win;win=desktop.getWindow(src.reportId);if(!win){win=this.getWindow(src)}else{win.show()}return win},getWindow:function(src,win){var me=this;Wasutp.Ajax.request({params:{id:src.reportId},url:"/json/reports/get-report-props",success:function(response){me.createGrid(src,response.data)},scope:this})},createGrid:function(src,responseData){var me=this,props=Ext.create("Wasutp.Reports.ReportsConfig",responseData),storeFields=props.getStoreFields(),source=props.getSource(),reportId=src.reportId;Ext.define("ReportModel",{extend:"Ext.data.Model",fields:storeFields});Ext.require("Ext.data.reader.Json",function(){Ext.override(Ext.data.reader.Json,{getResponseData:function(response){var data,error;try{data=Ext.decode(response.responseText);return this.readRecords(data)}catch(ex){errorsHandler.addMessage(errorsHandler.getSystemMessages().server_error,ex,0);error=new Ext.data.ResultSet({total:0,count:0,records:[],success:false,message:ex.message});this.fireEvent("exception",this,response,error);Ext.Logger.warn("Unable to parse the JSON returned by the server");return error}}})});Ext.create("Ext.data.Store",{pageSize:props.getWindowProps().size,storeId:"gridStore"+reportId,model:"ReportModel",remoteSort:true,proxy:{type:"ajax",url:"/json/reports/get-report-data?id="+reportId,actionMethods:{read:"POST"},reader:{type:"json",root:"data"},listeners:{exception:{fn:function(ths,response,operation,eOpts){try{response=Ext.decode(response)}catch(e){errorsHandler.addMessage("Ошибка на стороне сервера со статусом ",e,0)}}}},timeout:120000,doRequest:function(operation,callback,scope){request=this.buildRequest(operation,callback,scope);Ext.apply(request,{headers:this.headers,timeout:this.timeout,scope:this,callback:this.createRequestCallback(request,operation,callback,scope),method:this.getMethod(request),disableCaching:false});var filters=props.getFilters(source);request.params.filters=JSON.stringify(filters);Ext.Ajax.request(request);return request}},listeners:{beforeload:{element:"el",fn:function(){var report=Ext.getCmp(reportId),grid,btn;if(report){grid=report.down("grid");if(grid){btn=grid.down("toolbar");children=btn.items?btn.items.items:[];Ext.each(children,function(child){if(child.itemId=="refresh"){child.disable()}});Ext.getCmp(reportId+"-pg-update").disable()}}}},load:{element:"el",fn:function(){if(typeof this.proxy.reader.rawData!="undefined"){errorsHandler.addErrors(this.proxy.reader.rawData.errors);errorsHandler.addMessages(this.proxy.reader.rawData.messages)}var report=Ext.getCmp(reportId),grid,btn;if(report){grid=report.down("grid");if(grid){btn=grid.down("toolbar");children=btn.items?btn.items.items:[];Ext.each(children,function(child){if(child.itemId=="refresh"){child.enable()}});Ext.getCmp(reportId+"-pg-update").enable()}}}}},autoLoad:true});var interval;var conlumns=props.getConlumns();var desktop=this.app.getDesktop();Ext.require("Ext.grid.property.HeaderContainer",function(){Ext.override(Ext.grid.property.HeaderContainer,{constructor:function(){this.enableColumnResize=true;this.callParent(arguments)}})});var paging=Ext.create("Ext.PagingToolbar",{shadow:false,store:"gridStore"+reportId,displayInfo:true,height:30,displayMsg:"Записи {0} - {1} из {2}",emptyMsg:"Нет записей",width:300,items:[Ext.create("Ext.Img",{cls:"grid_load_icon"+reportId+" display_none",src:"/ext/resources/themes/images/default/grid/loading.gif"})]});var customEditors=props.getCustomEditors();var win=desktop.createWindow({reportProps:props,id:reportId,iconCls:Wasutp.Menu.getItem(["reports"]).iconCls,title:props.getWindowProps().title,width:props.getWindowProps().width,height:props.getWindowProps().height,layout:"border",cls:"report-panel",listeners:{destroy:function(){clearInterval(interval);win=null}},reports:me,items:[Ext.create("Ext.grid.Panel",{region:"center",cls:"center-panel",viewConfig:{getRowClass:function(record,index){var classes="";var conditions=props.getConditions();for(var i in conditions){var value=record.get(conditions[i].column);var rowClasses=props.getRowClasses(value,conditions[i]);classes+=" "+rowClasses}return classes},loadMask:false},store:Ext.data.StoreManager.lookup("gridStore"+reportId),columns:conlumns,bbar:paging,listeners:{render:function(ths){var nmbField=paging.down("#inputItem");if(nmbField){var domTable=document.getElementById(nmbField.id);if(domTable){domTable.style.width="50px";nmbField.setWidth(50)}}}}}),Ext.create("Ext.grid.property.Grid",{id:reportId+"-grid-property",region:"east",sortableColumns:false,title:"Фильтры",cls:"east-panel",width:250,layoutConfig:{animate:true},split:true,minSize:175,maxSize:400,collapsible:true,margins:"0 0 0 5",cmargins:"0 0 0 5",reserveScrollbar:true,itemCls:"reportFilter",customRenderers:props.getCustomRenderers(),source:source,propertyNames:props.getPropertyNames(),customEditors:customEditors,listeners:{edit:{fn:function(){var store=this.up("window").down("grid").store;store.currentPage=1}},render:{fn:function(){me.tipCollapse=Ext.create("Wasutp.tip.ToolTip",{html:"Скрыть"});me.tipExpand=Ext.create("Wasutp.tip.ToolTip",{html:"Развернуть"})}}},tbar:Ext.create("Ext.toolbar.Toolbar",{items:[{text:"Периодический",icon:"/shared/icons/fam/clock.png",tooltip:"Режим автообновления выключен",enableToggle:true,toggleHandler:function(item,pressed){if(pressed){item.setTooltip("Режим автообновления включен");interval=setTimeout(function updateReportData(){var store=Ext.StoreMgr.lookup("gridStore"+reportId);store.load(function(records,operation,success){if(item.pressed&&win){interval=setTimeout(updateReportData,props.getWindowProps().updatePeriod)}})},props.getWindowProps().updatePeriod)}else{clearInterval(interval);item.setTooltip("Режим автообновления выключен")}},pressed:false},{id:reportId+"-pg-update",itemId:"refresh",tooltip:paging.refreshText,overflowText:paging.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",handler:function(){paging.doRefresh.apply(paging,arguments)},scope:paging},"-",{tooltip:"Скачать архив",iconCls:"wasutp-report-download-archive",handler:function(){me.downloadArchive.call(me,win)},scope:me}]})})]});win.show();var splitter=Ext.get(win.id+"-grid-property-splitter-collapseEl");if(splitter){splitter.on("mouseover",function(e){me.getSplitterTooltip(e,win)});splitter.on("mouseout",function(e){if(me.tipCollapse){me.tipCollapse.hide()}if(me.tipExpand){me.tipExpand.hide()}})}},getSplitterTooltip:function(e,win){var me=this;var coord=e.getXY();var obj=Ext.getCmp(win.id+"-grid-property");if(obj.getCollapsed()===false){me.tipCollapse.showAt([coord[0]+10,coord[1]+10])}else{if(obj.getCollapsed()==="right"){me.tipExpand.showAt([coord[0]+10,coord[1]+10])}}},downloadArchive:function(win){var me=this,url="/json/reports/get-archive",columns=[],pg,source,filters,filtersStr,store,sort,grid,head,headItems,reportId=win.id;pg=Ext.getCmp(reportId+"-grid-property");source=pg.getSource();filters=win.reportProps.getFilters(source);filtersStr=JSON.stringify(filters);store=Ext.data.StoreManager.lookup("gridStore"+reportId);sort=JSON.stringify(store.sorters.items);grid=win.down("grid");head=grid.getView().getHeaderCt();headItems=head.items.items;if(headItems.length){for(var i in headItems){if(headItems[i].isHidden()===false){columns.push(headItems[i].dataIndex)}}}columns=JSON.stringify(columns);url+="?id="+reportId+"&filters="+filtersStr+"&sort="+sort+"&columns="+columns;document.location=url}});Ext.define("Wasutp.Panels.PanelsConfig",{config:null,data:null,constructor:function(config){this.config=config},getPanelId:function(){if(typeof this.config.id!="undefuned"){return this.config.id}else{return null}},setData:function(data){this.data=data}});Ext.define("Wasutp.Panels.Panels",{extend:"Ext.ux.desktop.Module",id:"wasutp-panels",requires:["Wasutp.Panels.PanelsUpdater"],statics:{idTemplates:{ti:"NUMERIC",tsPicture:"PICTURERING",tsLed:"LED"}},init:function(){var menu=this.getMenuItems();if(!menu.length){return false}this.launcher={text:Wasutp.Menu.getItem(["panels"]).title,iconCls:Wasutp.Menu.getItem(["panels"]).iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false}};this.launcher.menu={xtype:"wasutp-menu",items:menu}},getMenuItems:function(){var me=this;var menu=[],items=appHelper.getMenuPanels();for(var i in items){if(items[i].UIR_NAME){menu.push({text:items[i].M_NAME,panelName:items[i].PANEL_NAME,iconCls:Wasutp.Menu.getItem(["panels"]).iconCls,handler:me.getPanelConfig,scope:me,windowId:items[i].PANEL_ID,uirName:items[i].UIR_NAME,module:me.id,id:"wasutp-panels-"+items[i].ID,listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}else{menu.push({text:items[i].M_NAME,iconCls:"x-tree-icon-parent",handler:function(){return false},menu:{items:[],listeners:{beforeshow:function(){return false}}},scope:me,windowId:items[i].ID,uirName:items[i].UIR_NAME,listeners:{focus:function(ths){return me.addNesteditems(ths)}}})}}return menu},getPanelConfig:function(src){var me=this;Wasutp.Ajax.request({params:{id:src.windowId},url:"/json/panels/get-config-by-id",success:function(response){panelsHelper.addPanelConfig(src.windowId,response.data);me.createWindow(src)}})},addNesteditems:function(ths){var me=this;if(!ths.uirName&&!ths.menu.items.length){Wasutp.Ajax.request({params:{id:ths.windowId,type:"panel"},url:"/json/application/getChildMenuItems",success:function(response){if(response.data.length===0){return false}ths.menu=Ext.create("Wasutp.menu.Menu",{items:[]});for(var i in response.data){if(response.data[i].UIR_NAME){ths.menu.add({text:response.data[i].M_NAME,panelName:response.data[i].PANEL_NAME,iconCls:Wasutp.Menu.getItem(["panels"]).iconCls,handler:me.getPanelConfig,scope:me,windowId:response.data[i].PANEL_ID,uirName:response.data[i].UIR_NAME,module:me.id,id:"wasutp-panels-"+response.data[i].ID,listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)}})}else{ths.menu.add({text:response.data[i].M_NAME,iconCls:"x-tree-icon-parent",handler:function(){return false},menu:{items:[],listeners:{beforeshow:function(){return false}}},scope:me,windowId:response.data[i].ID,uirName:response.data[i].UIR_NAME,listeners:{focus:function(ths){return me.addNesteditems(ths)}}})}}ths.doExpandMenu()}})}},toolTipHelper:null,getToolTipHelper:function(){var me=this;if(me.toolTipHelper===null){me.toolTipHelper=Ext.create("Wasutp.Panels.ToolTipHelper")}return me.toolTipHelper},createWindow:function(src){var desktop=this.app.getDesktop();var win=desktop.getWindow(src.uirName);if(!win){win=desktop.createWindow(this.getPanel(src));Wasutp.Panels.PanelsUpdater.init({panelsModule:this});Wasutp.Panels.PanelsUpdater.addPanel(src.windowId,src)}win.show();appHelper.getContextMenu().setMenuEvent(src.uirName);if(appHelper.getWasutpConfig().showPanelTips){this.getToolTipHelper().setToolTip(src.uirName)}return win},getPanel:function(src){var me=this,p=Ext.create("MyPanels."+src.uirName),panel;console.log(p.items);panel={vpPanelId:src.windowId,id:p.id,title:src.panelName,width:p.width,height:p.height,layout:p.layout,items:p.items,bodyStyle:p.bodyStyle,iconCls:Wasutp.Menu.getItem(["panels"]).iconCls,listeners:{destroy:function(){Wasutp.Panels.PanelsUpdater.removePanel(src.windowId)},scope:me}};function jP(o,src){if(o.length<=0){return o;}for(let j=0;j<o.length;j++){let ob=o[j];if(ob.length<=0){continue;}for(let key in ob){if(ob.hasOwnProperty(key)&&(typeof ob[key]==="object")&&(key.toLowerCase()=="items")){ob[key]=jP(ob[key],src);} else if(ob.hasOwnProperty(key)&&(key.toLowerCase()=="id")){if(ob[key].indexOf(src.uirName)){ob[key]=src.uirName+'_'+ob[key];}}}}return o;} var vq1=jP(p.items,src);console.log(vq1);panel.items=vq1;return panel;for(var i in panel.items){if(panel.items[i].id.indexOf(src.uirName)){panel.items[i].id=src.uirName+"_"+panel.items[i].id;}}return panel},updateHtml:function(src){var me=this,panels=panelsHelper.panels,panel,data,cmp,get,ts,styles,value,decimalPrecision,id,dataHandler;for(var pn in panels){panel=panels[pn];for(var pr in panel.data){data=panel.data[pr];id=data.FILENAME+"_"+data.CNAME;cmp=Ext.getCmp(id);get=Ext.get(id);if(!cmp||!get){continue}console.log('updateHtml1=',data,cmp,get);cmp.rtData=data;dataHandler=Ext.create("Wasutp.Panels.DataHandler",id);switch(cmp.xtype){case"panel-switcher":get.elementType="ts";cmp.updateData(data.VALUE,data.STATUSES);break;case"panel-chart":get.hasContextMenu=false;cmp.updateData(data);break;case"panel-dial":get.elementType="ti";cmp.updateData(data.VALUE,data.STATUSES);break;default:if(data.CNAME.indexOf(me.self.idTemplates.tsPicture)===0||data.CNAME.indexOf(me.self.idTemplates.tsLed)===0){get.elementType="ts";dataHandler.setStatuses(data.STATUSES,id)}else{if(data.CNAME.indexOf(me.self.idTemplates.ti)===0){get.elementType="ti";value=data.VALUE;decimalPrecision=0;if(typeof cmp!="undefined"&&typeof cmp.decimalPrecision!="undefined"){decimalPrecision=parseInt(cmp.decimalPrecision)}value=accounting.formatNumber(parseFloat(value),decimalPrecision,"",",");cmp.setValue(value);dataHandler.setStatuses(data.STATUSES,id)}else{if(Ext.getClassName(cmp)==="Ext.form.Label"&&data.FEATURE!==null){me.updateTimeField(cmp,data)}}console.log('updateHtml2=',data,cmp,get);}}get.panelId=panel.id;get.value=data.VALUE;get.tu=data.TU;get.name=data.NAME;get.param_id=data.PID;get.panel_id=panel.id;get.unit=data.UNIT;get.statuses=data.STATUSES;console.log('updateHtml3=',data,cmp,get);if(data.CNAME.indexOf(me.self.idTemplates.tsPicture)===0||data.CNAME.indexOf(me.self.idTemplates.tsLed)===0){value=parseInt(data.VALUE);ts=Ext.select("#"+id);ts.applyStyles("padding:0; overflow: inherit;");styles=[];if(typeof cmp!="undefined"&&cmp.vstyle!="undefined"){styles=cmp.vstyle[value]}if(styles!==undefined&&styles.length){for(var i in styles){for(var name in styles[i]){get.applyStyles(name+":"+styles[i][name]+";")}}}}}}},updateTimeField:function(cmp,data){var me=this;switch(+data.FEATURE){case 16:cmp.setText(Ext.Date.format(new Date(data.TIME*1000),"d.m.Y H:i:s"));break;case 64:cmp.setText(Ext.Date.format(new Date(),"d.m.Y H:i:s"));break}}});Ext.define("Wasutp.Panels.PanelsHelper",{openWindow:function(idPanel,idParam){var me=this,cmp=Ext.getCmp(idPanel);if(!cmp){console.error('Не удалось получить экземпляр окна панели "'+idPanel+'"');return false}idParam=idParam.replace(idPanel+"_","");Wasutp.Ajax.request({url:"/json/panels/getChildPanelPropsById",params:{idPanel:Number(cmp.vpPanelId),idParam:JSON.stringify(idParam)},success:function(response){me.createWindow(response.data)},scope:this})},createWindow:function(data){switch(data.type){case"panel":this.createPanel(data);break;case"scheme":this.createScheme(data);break;case"report":this.createReport(data);break;default:break}},createPanel:function(data){var modules=wasutpApp.modules,panels,src;for(var i in modules){if(Ext.ClassManager.getName(modules[i])=="Wasutp.Panels.Panels"){panels=modules[i];break}}if(!panels){errorsHandler.addMessage(errorsHandler.getSystemMessages().error,'Класс "Wasutp.Panels.Panels" не найден',0)}src={text:data.name,panelName:data.name,windowId:data.pid,uirName:data.fileName};panels.getPanelConfig(src)},createScheme:function(data){var src={id:"wasutp-scheme-"+data.menuId,idScheme:data.sid,iconCls:"wasutp-schemes",text:data.name,usMenuId:data.menuId,windowId:data.menuId};appHelper.modules["Wasutp.Schemes.NewSchemes"].launchScheme(src)},windowIds:{ids:[],isset:function(id,collection){for(var i in collection){if(id==collection[i]){return true}}return false},getIds:function(){return this.ids}},panels:[],addPanelConfig:function(id,config){var panel={id:id,data:config};if(!this.panels.length){this.panels.push(panel);return}for(var i in this.panels){if(this.panels[i].id==id){this.panels[i]=panel;return}}this.panels.push(panel)},addPanelData:function(data){if(!data.length){for(var p in this.panels){for(var c in this.panels[p].data){this.panels[p].data[c].VALUE=null;this.panels[p].data[c].STATUSES=["OIC_DST_NOPRESENT"]}}return false}console.log(data);for(var d in data){for(var p in this.panels){if(this.panels[p].id==data[d].id){for(var c in this.panels[p].data){this.panels[p].data[c].VALUE=null;this.panels[p].data[c].STATUSES=["OIC_DST_NOPRESENT"];for(var v in data[d].data){var vParts=v.split(":"),feed=parseInt(vParts[vParts.length-1]);if(data[d].data[v].ID1==this.panels[p].data[c].PID&&data[d].data[v].TYPE1==this.panels[p].data[c].GTYPE&&feed==this.panels[p].data[c].FEED){this.panels[p].data[c].VALUE=data[d].data[v].VALUE1;this.panels[p].data[c].STATUSES=data[d].data[v].STATUSES;this.panels[p].data[c].TIME=data[d].data[v].TIME1}}}}}}},createReport:function(data){var me=this,url=data.url||null;if(url){window.open(url,"_blank")}else{errorsHandler.addMessage("Ошибка","Не указан адрес отчета.",0)}}});Ext.define("Wasutp.Charts.Charts",{element:null,intr:null,isOpened:true,count:100,interval:5000,startTime:null,elId:null,chartId:null,chartWinId:null,chartStoreId:null,chartPid:null,chartName:null,chartUnit:null,chartPanelId:null,constructor:function(el){this.paramsInit(el)},paramsInit:function(el){if(el){this.element=el;this.elId=el.id;this.chartId="chart_"+el.id;this.chartWinId="win_chart_"+el.id;this.chartStoreId="store_chart_"+el.id;this.chartPid=el.param_id;this.chartName=el.name;this.chartUnit=el.unit;this.chartPanelId=el.panelId}},getId:function(){return this.elId},getChartId:function(){return this.chartId},getWinId:function(){return this.chartWinId},getStoreId:function(){return this.chartStoreId},getPid:function(){return this.chartPid},getName:function(){return this.chartName},getUnit:function(){return this.chartUnit},getPanelId:function(){return this.chartPanelId},show:function(){var me=this,chart,valuesAxis,timeAxis,data=[],store;store=Ext.create("Ext.data.JsonStore",{id:me.getStoreId(),fields:["name","data1"],data:[]});var generateData=function(){Ext.Ajax.request({params:{menuid:me.getPanelId(),pid:me.getPid()},url:"/json/charts/get-chart-value",success:function(response){updateChart();try{response=Ext.decode(response.responseText)}catch(e){errorsHandler.addMessage("Ошибка",response.responseText);return null}var dateOfPoint=new Date(),dt=dateOfPoint,data1,statuses;if(me.startTime===null){me.startTime=dt;timeAxis.fromDate=dt;timeAxis.toDate=new Date(me.startTime.getTime()+((me.count-1)*me.interval))}if(response.data.VALUE1){data1=parseFloat(response.data.VALUE1)}else{data1=0}if(response.data.STATUSES){statuses=response.data.STATUSES}else{statuses=["OIC_DST_VALUENOCORRECT"]}if(data.length<me.count){data.push({name:dt,data1:data1,statuses:statuses})}else{for(var i in data){i=parseInt(i);if(typeof data[i+1]!="undefined"){data[i]=data[i+1]}}data[data.length-1]={name:dt,data1:data1,statuses:statuses}}if(timeAxis.toDate<dt){timeAxis.toDate=dt;timeAxis.fromDate=data[0].name}store.loadData(data)},failure:function(response,opts){updateChart()}})};generateData();var updateChart=function(win){if(me.isOpened){me.intr=setTimeout(function(){generateData()},me.interval)}};var unit=me.getUnit()?", "+me.getUnit():"";chart=Ext.create("Ext.chart.Chart",{style:"background:#fff",store:store,shadow:false,margin:"50 50 0 0",axes:[{type:"Numeric",position:"left",fields:["data1"],title:me.getName()+unit,grid:{odd:{opacity:1,stroke:"#bbb","stroke-width":0.5}}},{type:"Time",position:"bottom",fields:"name",title:"Время",dateFormat:"H:i:s",labelTitle:{y:-20}}],series:[{type:"line",axis:"left",xField:"name",yField:"data1",label:{display:"none",field:"visits",renderer:function(v){return v>>0},"text-anchor":"middle"},selectionTolerance:5,tips:{trackMouse:true,width:140,renderer:function(storeItem,item){if(typeof item.value!="undefined"&&typeof item.value[1]!="undefined"){var value="",status="",date="";var statuses=storeItem.raw.statuses;var unit=me.getUnit()?", "+me.getUnit():"";value=item.value[1]+unit+"<br>";if(statuses.length>0){for(var i in statuses){status+=Wasutp.Params.Param.getStatusDescByName(statuses[i])+" "}status+="<br>"}date=Ext.Date.format(storeItem.raw.name,"d.m.Y H:i:s");this.setTitle(value+status+date)}}}}]});var desktop=wasutpApp.getDesktop();var win=desktop.getWindow(me.getWinId());if(!win){win=desktop.createWindow({cls:"wasutp-chart",iconCls:"wasutp-charts",width:600,height:400,minWidth:400,minHeight:300,maximizable:true,title:me.getName()+unit,layout:"fit",listeners:{destroy:function(win){clearTimeout(me.intr);me.isOpened=false},afterlayout:function(ths){}},items:[chart]})}win.show();valuesAxis=chart.axes.get(0);timeAxis=chart.axes.get(1)}});Ext.define("Wasutp.Panels.ToolTipHelper",{setToolTip:function(panelName){var me=this,panel=Ext.getCmp(panelName),els=[];if(panel&&panel.items){els=panel.items.items}if(els.length){for(var i in els){var el=els[i].getEl();if(els[i].id.indexOf(Wasutp.Panels.Panels.idTemplates.tiDial)>0||els[i].id.indexOf(Wasutp.Panels.Panels.idTemplates.ti)>0){me.setTiTip(el)}else{if(els[i].id.indexOf(Wasutp.Panels.Panels.idTemplates.tsPicture)>0||els[i].id.indexOf(Wasutp.Panels.Panels.idTemplates.tsLed)>0||els[i].id.indexOf(Wasutp.Panels.Panels.idTemplates.tsSwitch)>0){me.setTsTip(el)}}}}},setTiTip:function(el){var me=this,tip=Ext.create("Wasutp.tip.ToolTip",{target:el.id,html:el.value,anchor:"top",listeners:{beforeshow:function(ths){var cmp=Ext.getCmp(ths.target.id);if(!cmp.rtData){ths.disable();return false}var html="";html="<b>"+cmp.rtData.NAME+"</b><br/>";html+=cmp.rtData&&cmp.rtData.VALUE?cmp.rtData.VALUE:0;if(cmp.rtData.UNIT){html+=cmp.rtData.UNIT?", "+cmp.rtData.UNIT:""}var statusDescs=[];if(cmp.rtData.STATUSES.length>0){html+="<br/>";for(var i in cmp.rtData.STATUSES){var status=cmp.rtData.STATUSES[i],statusDesc=Wasutp.Params.Param.getStatusDescByName(status);if(statusDesc!==null){statusDescs.push(statusDesc)}}html+=statusDescs.join(", ")}var d=cmp.rtData.TIME?Ext.Date.format(new Date(cmp.rtData.TIME*1000),"d.m.Y H:i:s"):"";html+="<br/>"+d;ths.update(html)}}})},setTsTip:function(el){var me=this,tip=Ext.create("Wasutp.tip.ToolTip",{target:el.id,html:el.value,anchor:"top",listeners:{beforeshow:function(ths){var cmp=Ext.getCmp(ths.target.id);if(!cmp.rtData){ths.disable();return false}if(!cmp.rtData){console.log("Для этого параметра нет данных");return false}var html="";html="<b>"+cmp.rtData.NAME+"</b><br/>";if(cmp.rtData.VALUE==="1"){html+="ВКЛ"}else{html+="ВЫКЛ"}if(cmp.rtData.UNIT){html+=cmp.rtData.UNIT?", "+cmp.rtData.UNIT:""}var statusDescs=[];if(cmp.rtData.STATUSES.length>0){html+="<br/>";for(var i in cmp.rtData.STATUSES){var status=cmp.rtData.STATUSES[i],statusDesc=Wasutp.Params.Param.getStatusDescByName(status);if(statusDesc!==null){statusDescs.push(statusDesc)}}html+=statusDescs.join(", ")}var d=cmp.rtData.TIME?Ext.Date.format(new Date(cmp.rtData.TIME*1000),"d.m.Y H:i:s"):"";html+="<br/>"+d;ths.update(html)}}})}});Ext.define("Wasutp.Administration.Administration",{extend:"Ext.ux.desktop.Module",init:function(){var me=this;this.launcher={text:"Администрирование",iconCls:"panels",handler:function(){return false},menu:{items:[{text:"Очистить кэш",iconCls:"bogus",handler:function(){me.clearCache()}}]}}},clearCache:function(){Wasutp.Ajax.request({url:"/json/administration/clear-cache",success:function(response){}})}});Ext.define("Wasutp.model.StartConfig",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},{name:"name",type:"string"}]});Ext.define("Wasutp.Configurations.DropBehavior",{dcsNode:null,profileNode:null,dcs:null,options:{},prefix:"",start:function(data){var me=this;me.dcsNode=data.dcsNode;me.profileNode=data.profileNode;me.dcs=data.dcs;me.options=data.options;if(data.prefix){me.prefix=data.prefix}else{me.prefix=""}me.sendRequest()},getDcsId:function(){var me=this;if(typeof me.dcsNode.data.id!="undefined"){return me.dcsNode.data.id}else{return null}},getProfileId:function(){var me=this;if(typeof me.profileNode.id!="undefined"){return me.profileNode.id}else{return"profile_gridParam_1"}},sendRequest:function(){var me=this;Wasutp.Ajax.request({url:"/json/configuration/drop",params:{dcsId:me.getDcsId(),profileId:me.getProfileId(),prefix:me.prefix,options:JSON.stringify(me.options)},success:function(response){if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.dcs.getTreeBehavior();treeBehavior.setTree(me.dcs.tree);for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.dcs.getGridBehavior();gridBehavior.setGrid(me.dcs.grid);for(var i in response.gridBehavior){gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}me.dcs.updateGridCounter()}}})}});Ext.define("Wasutp.Configurations.ProfileGridDropBehavior",{profileNode:null,dcsNodes:null,profile:null,prefix:"",isNode:false,start:function(data){var me=this;me.profileNode=data.profileNode;me.dcsNodes=data.dcsNodes;me.profile=data.profile;me.overModel=data.overModel;me.node=data.node;me.profileTreeNode=data.profileTreeNode;if(typeof data.isNode!="undefined"){me.isNode=data.isNode}if(data.prefix){me.prefix=data.prefix}else{me.prefix=""}if(me.doAdjustTwoPositionSwitch()){me.adjustTwoPositionSwitch()}else{if(me.doAdjustTransferParam()){me.adjustTransferParam()}else{if(me.doAdjustTuSource()){me.adjustTuSource()}}}},getProfileId:function(){var me=this;if(typeof me.profileNode.data.id!="undefined"){return me.profileNode.data.id}else{return null}},getGridId:function(){var me=this;if(typeof me.profileNode=="string"){return me.profileNode}else{if(typeof me.profileNode=="object"){if(typeof me.profileNode.data.id!="undefined"){return me.profileNode.data.id}else{return null}}else{return null}}},getDcsId:function(){var me=this;if(me.dcsNodes.length){for(var i in me.dcsNodes){return"dcs_param_"+me.dcsNodes[i].ID;break}}else{return"dcs_param_1"}},adjustTransferParam:function(){var me=this;if(typeof me.node.$className==="undefined"){Ext.create("Wasutp.Configurations.Form.TransferActionSelection",{addSourcesAction:{fn:me.addSourcesToTransferParam,scope:me},createParamAction:{fn:me.createTransferParam,scope:me},draggingParamsCount:me.dcsNodes.length,profileParamName:me.overModel.raw.NAME}).show()}else{me.createTransferParam()}},createTransferParam:function(){var me=this,options={cancelDcsOptionGridBehavior:true};Wasutp.Ajax.request({url:"/json/configuration/drop-profile-grid",params:{profileNode:me.getGridId(),data:JSON.stringify(me.dcsNodes),dcsId:me.getDcsId(),prefix:me.prefix,isNode:me.isNode,options:JSON.stringify(options)},success:function(response){if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.profile.getTreeBehavior();treeBehavior.setTree(me.profile.tree);for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.profile.getGridBehavior();gridBehavior.setGrid(me.profile.grid);for(var i in response.gridBehavior){if(typeof response.gridBehavior[i].grid!="undefined"){var grid=Ext.getCmp(response.gridBehavior[i].grid);if(grid){gridBehavior.setGrid(grid)}}gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}me.profile.updateGridCounter();if(response.startCvalif){me.profile.lastChangedCvalif=response.startCvalif}}})},addSourcesToTransferParam:function(){var me=this,sources=me.dcsNodes,profileParam=me.overModel.raw;Wasutp.Ajax.request({url:"/json/configuration/add-transfer-sources",params:{sources:JSON.stringify(sources),profileParam:JSON.stringify(profileParam)},success:function(response){}})},doAdjustTwoPositionSwitch:function(){var me=this,treeStore=me.profile.tree.getStore(),paramsNode=treeStore.getNodeById(me.profileNode),l1ParentNode=paramsNode.parentNode,l1ParentNodeData=l1ParentNode.raw.nodeRecordData,l2ParentNode=l1ParentNode.parentNode,l2ParentNodeData=l2ParentNode.raw.nodeRecordData;if(l1ParentNodeData.CVALIF&&l1ParentNodeData.CVALIF==="2"){if(l2ParentNodeData.ID_PROTO_POINT&&l2ParentNodeData.ID_PROTO_POINT==="72"){return true}}return false},tuSysGtoptAliases:["GLT_BOOL_OPT_TELECONTROL_DOUBLE","GLT_BOOL_OPT_TELECONTROL_SINGLE","GLT_BOOL_TELECONTROL_SELECT","GLT_BOOL_OPT_TELECONTROL_PULSE_SHORT","GLT_BOOL_OPT_TELECONTROL_PULSE_LONG"],doAdjustTuSource:function(){var me=this;if(me.dcsNodes.length){for(var i in me.dcsNodes){if(me.dcsNodes[i].GTYPE==1){return false}}}if(typeof me.node.$className==="undefined"&&me.overModel.raw.OPT_ALIAS&&me.tuSysGtoptAliases.indexOf(me.overModel.raw.OPT_ALIAS)!==-1){return true}return false},doAdjustTransferParam:function(){var me=this,treeNode=me.profileTreeNode;if(treeNode&&treeNode.raw&&treeNode.raw.nodeRecordData&&parseInt(treeNode.raw.nodeRecordData.IS_ROUTE)===1){return true}return false},adjustTwoPositionSwitch:function(){var me=this;if(me.node.$className){me.firstSourceAdjust()}else{me.secondSourceAdjust()}},firstSourceAdjust:function(){var me=this,params={dcsNodes:me.dcsNodes,profile:me.profile},form=Ext.create("Wasutp.Configurations.Form.Create.Profile.TwoPositionSwitchForm",params);form.show()},secondSourceAdjust:function(){var me=this;if(me.dcsNodes.length>1){errorsHandler.addMessage("Ошибка","На текущую строку можно добавить только один параметр",0)}else{if(me.overModel.raw.temporary){me.createTwoPositionSwitch()}else{me.changeTwoPositionSwitch()}}},changeTwoPositionSwitch:function(){var me=this,params={dcsNodes:me.dcsNodes,overModel:me.overModel,title:"Изменение настройки двухпозиционного ТС",confirmMessage:"Изменить источник двухпозиционного ТС",disabledName:true,profileParamName:me.overModel.data.NAME},form=Ext.create("Wasutp.Configurations.Form.Create.Profile.ChangeTwoPositionSwitchForm",params);form.show()},createTwoPositionSwitch:function(){var me=this,overModelData=me.overModel.raw,droppedNode=me.dcsNodes[0],sourceOn,sourceOff;if(overModelData.DPTS_ON===true){sourceOn=overModelData.source.ID;sourceOff=droppedNode.ID}else{sourceOff=overModelData.source.ID;sourceOn=droppedNode.ID}Wasutp.Ajax.request({url:"/json/configuration/dpts",params:{name:overModelData.dptsName,on:overModelData.on,sourceOn:sourceOn,sourceOff:sourceOff,profileNode:me.profileNode},success:function(response){if(response.success===true){var record=me.profile.grid.getStore().findRecord("ID",overModelData.ID,null,null,null,true);if(record){me.profile.grid.getStore().remove(record)}if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.profile.getGridBehavior();gridBehavior.setGrid(me.profile.grid);for(var i in response.gridBehavior){if(typeof response.gridBehavior[i].grid!="undefined"){var grid=Ext.getCmp(response.gridBehavior[i].grid);if(grid){gridBehavior.setGrid(grid)}}gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.profile.getTreeBehavior();treeBehavior.setTree(Ext.getCmp("dcs-tree-panel"));for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}}}})},adjustTuSource:function(){var me=this,profileParam=me.overModel.raw;Wasutp.Ajax.request({url:"/json/configuration/get-profile-params",params:{pointId:profileParam.ID},success:function(request){if(!request.data.length){var msg=new Ext.XTemplate('Не обнаружено параметра, созданного на основе точки {name}({id}) профиля "{device}"').apply({name:profileParam.NAME,id:profileParam.ID,device:profileParam.ID_DEV});errorsHandler.addMessage("Ошибка",msg,0)}else{me.adjustTuSourceConfirmWindow(request.data)}}})},adjustTuSourceConfirmWindow:function(params){var me=this,sources=me.dcsNodes,profileParam=me.overModel.raw,msgBox,items=[],ids=[],disabled=params.length===1;if(params.length){var prms=[];params.map(function(param){ids.push(param.ID);prms.push({xtype:"checkboxfield",paramId:param.ID,boxLabel:new Ext.XTemplate("{port} / {device} / {param} ({id})").apply({port:param.PORT,device:param.DEVICE,param:param.PARAM,id:param.ID}),checked:true,disabled:disabled,listeners:{change:function(ths,newValue,oldValue,eOpts){var ind=ids.indexOf(ths.paramId);if(newValue&&ind===-1){ids.push(ths.paramId)}else{if(ind!==-1){ids.splice(ind,1)}}}}})});items.push({xtype:"fieldset",title:"Параметры в подсистеме сбора",collapsible:true,items:prms})}msgBox=Ext.create("Ext.window.MessageBox",{closeAction:"destroy",listeners:{afterrender:function(win,e){win.add({xtype:"panel",border:0,padding:10,items:items})}}});var msg="Будет добавлен источник блокировки для следующего параметра подсистемы сбора";if(params.length>1){msg="Выберите параметры подсистемы сбора, для которых Вы хотите добавить источники блокировки"}msgBox.confirm({title:"Добавление источников",cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:msg,buttons:Ext.MessageBox.YESNO,width:500,callback:function(btn){if(!ids.length){msgBox.close()}if(btn==="yes"){Wasutp.Ajax.request({url:"/json/configuration/add-tu-sources",params:{sources:JSON.stringify(sources),profileParam:JSON.stringify(profileParam),dcsParamsId:JSON.stringify(ids)},success:function(response){}})}}})}});Ext.define("Wasutp.Configurations.NodeCreator",{configuration:null,id:null,record:null,win:null,options:null,constructor:function(configuration){this.configuration=configuration},init:function(columns,id,action,options){var items=[],me=this;me.id=id;me.options=options;me.record={};for(var i in columns){me.record[i]=columns[i].defaultValue}var types=id.split("_"),className="";if(options&&options.formCls){className=options.formCls}else{switch(types[0]+"_"+types[1]){case"dcs_root":className="Wasutp.Configurations.Form.Create.Dcs.CreateIbm";break;case"profile_transferDevice":className="Wasutp.Configurations.Form.Create.Profile.CreateTransferDevice";break;case"profile_funcDevice":className="Wasutp.Configurations.Form.Create.Profile.CreateFunctionDevice";break;case"dcs_ibm":className="Wasutp.Configurations.Form.Create.Dcs.CreateInterface";break;case"profile_root":className="Wasutp.Configurations.Form.Create.Profile.CreateDevice";break;case"profile_proto":className="Wasutp.Configurations.Form.Create.Profile.CreateNode";break;case"profile_node":className="Wasutp.Configurations.Form.Create.Profile.CreateNode";break;case"profile_param":className="Wasutp.Configurations.Form.Create.Profile.CreateParam";break;case"dcs_options":className="Wasutp.Configurations.Form.Create.Dcs.CreateOption";break;default:return"";break}}var formObject=Ext.create(className,{record:me.record,columns:columns});var formPanel=formObject.getPanel();var win=Ext.getCmp("ParamSettings");if(win){win.close()}if(formPanel===null){return false}var title=action.text;if(typeof formObject.title!="undefined"){title=formObject.title}me.win=Ext.create("Wasutp.window.Modal",{id:"ParamSettings",title:title,width:700,minWidth:700,layout:"fit",items:[formPanel],autoscroll:true,setAutoScroll:true,closable:true,save:function(){me.win.blockSending();me.create()},getFieldData:function(el,params){me.getFieldData(el,params)},isAlreadySending:false,getOkBtn:function(){return me.win.down("#wasutp-configuration-ok-btn")},blockSending:function(){var btn=me.win.getOkBtn();if(btn){btn.disable()}},releaseSending:function(){var btn=me.win.getOkBtn();me.win.isAlreadySending=false;if(btn&&btn.isVisible()){btn.enable()}}});me.win.show()},create:function(){var me=this;me.createNodeRequest()},createNodeRequest:function(){var me=this;if(me.win.isAlreadySending){return true}else{me.win.isAlreadySending=true}Wasutp.Ajax.request({url:"/json/configuration/insert",params:{data:JSON.stringify(me.record),id:me.id,idParent:1,options:JSON.stringify(me.options)},method:"POST",success:function(response){me.win.releaseSending();if(typeof response.successful!="undefined"&&response.successful){me.win.close()}else{return false}if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.configuration.getTreeBehavior();treeBehavior.setTree(me.configuration.tree);for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.configuration.getGridBehavior();gridBehavior.setGrid(me.configuration.grid);for(var i in response.gridBehavior){gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}me.configuration.updateGridCounter()},failure:function(){me.win.releaseSending()}})},getFieldData:function(el,params){var me=this;params.category=me.configuration.category;params.type=me.type;params.id=me.configuration.treeNodeId;Wasutp.Ajax.request({params:params,url:"/json/configuration/get-field-data",success:function(response){if(typeof el!="undefined"){if(typeof el.store!="undefined"){if(response.data.length){var oldValue=el.getValue();el.store.removeAll();el.store.loadData(response.data[0]);if(el.findRecordByValue(oldValue)){el.setValue(oldValue)}else{el.setValue("")}}}else{el.setValue(response.data)}}}})}});Ext.define("Wasutp.Configurations.ParamUpdate",{configuration:null,type:null,record:null,win:null,id:null,constructor:function(configuration){this.configuration=configuration},init:function(id,record,type){var me=this;me.id=id;Wasutp.Ajax.request({url:"/json/configuration/get-update-form",params:{node:id},success:function(response){me.initWindow(response.data,record,id,type)}})},initWindow:function(data,record,id,type){var me=this,resizable=false,minHeight=null;me.type=type;for(var i in data.columns){if(data.columns[i].editor=="checkbox"){record.data[i]=data.columns[i].defaultValue}}me.record={};for(var i in record.data){me.record[i]=record.data[i]}var types=id.split("_"),className="";if(data.formCls){className=data.formCls}else{switch(types[0]+"_"+types[1]){case"dcs_ibm":className="Wasutp.Configurations.Form.Update.Dcs.UpdateIbm";break;case"dcs_interface":className="Wasutp.Configurations.Form.Update.Dcs.UpdateInterface";break;case"dcs_port":className="Wasutp.Configurations.Form.Update.Dcs.UpdatePort";break;case"dcs_device":className="Wasutp.Configurations.Form.Update.Dcs.UpdateDevice";break;case"dcs_param":resizable=true;minHeight=442;className="Wasutp.Configurations.Form.Update.Dcs.UpdateParam";break;case"profile_device":className="Wasutp.Configurations.Form.Update.Profile.UpdateDevice";break;case"profile_transferdevice":className="Wasutp.Configurations.Form.Update.Profile.UpdateTransferDevice";break;case"profile_funcDevice":className="Wasutp.Configurations.Form.Update.Profile.UpdateFunctionDevice";break;case"profile_proto":className="Wasutp.Configurations.Form.Update.Profile.UpdateProto";break;case"profile_node":className="Wasutp.Configurations.Form.Update.Profile.UpdateNode";break;case"profile_param":className="Wasutp.Configurations.Form.Update.Profile.UpdateParam";break;case"dcs_options":className="Wasutp.Configurations.Form.Update.Dcs.UpdateOption";break;default:return"";break}}var formPanel=Ext.create(className,{record:me.record,columns:data.columns,sources:data.sources,rawData:data}).getPanel();var win=Ext.getCmp("ParamSettings");if(win){win.close()}me.win=Ext.create("Wasutp.window.Modal",{id:"ParamSettings",title:me.getWindowTitle(),width:700,minWidth:700,minHeight:minHeight,layout:"fit",items:[formPanel],closable:true,save:function(){me.save()},getFieldData:function(el,params){me.getFieldData(el,params)},resizable:resizable});me.win.show()},getTypeTitle:function(type,category){var me=this;switch(type){case"ibm":return"NAME";break;case"interface":return"NAME";break;case"port":return"NODE";break;case"device":if(category=="dcs"){return"NODE"}else{if(category=="profile"){return"NAME"}}break;case"param":return"NAME";break;case"proto":return"NAME";break;case"node":return"NAME";break;default:return"";break}},windowTitle:"",getWindowTitle:function(){var me=this;var title="Свойства";var name=me.record[me.getTypeTitle(me.configuration.type,me.configuration.category)];if(name){title+=": "+name}me.windowTitle=title;return me.windowTitle},save:function(){var me=this;me.updateGridRow()},updateGridRow:function(){var me=this,id=me.id;Wasutp.Ajax.request({url:"/json/configuration/update",params:{data:JSON.stringify(me.record),category:me.configuration.category?me.configuration.category:"",type:me.type,id:id},method:"POST",success:function(response){if(typeof response.successful!="undefined"&&response.successful){me.win.close()}else{return false}if(appHelper.getWasutpConfig().bufferedDcsGrid===true){me.configuration.prepareGrid(me.configuration.treeNodeId);return}if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.configuration.getTreeBehavior();treeBehavior.setTree(me.configuration.tree);for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}if(typeof me.configuration.getGridBehavior==="function"&&typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.configuration.getGridBehavior();gridBehavior.setGrid(me.configuration.grid);for(var i in response.gridBehavior){gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}if(typeof me.configuration.updateGridCounter==="function"){me.configuration.updateGridCounter()}}})},getFieldData:function(el,params){var me=this;params.category=me.configuration.category;params.type=me.type;params.id=me.configuration.treeNodeId;Wasutp.Ajax.request({params:params,url:"/json/configuration/get-field-data",success:function(response){if(typeof el!="undefined"){if(typeof el.store!="undefined"){if(response.data.length){var oldValue=el.getValue();el.store.removeAll();el.store.loadData(response.data[0]);if(el.findRecordByValue(oldValue)){el.setValue(oldValue)}else{el.setValue("")}}}else{el.setValue(response.data)}}}})}});Ext.define("Wasutp.Configurations.GridBehavior",{grid:null,id:null,params:null,setGrid:function(grid){var me=this;me.grid=grid},execute:function(id,cmd,params){var me=this;me.id=id;me.params=params;if(!me.grid){console.log("Wasutp.Configurations.GridBehavior - "+me.grid);return false}switch(cmd){case"create":me.createRow();break;case"delete":me.deleteRow();break;case"edit":me.editRow();break;case"update":me.updateRow();break;default:break}},createRow:function(){var me=this;me.grid.getStore().insert(me.grid.getStore().count()+1,Ext.create(me.grid.getStore().model.modelName,me.params))},deleteRow:function(){var me=this;var record=me.grid.getStore().findRecord(me.params.field,me.params.value,null,null,null,true);if(record){me.grid.getStore().remove(record)}else{console.log("grid");console.log(me.grid);console.log("store");console.log(me.grid.getStore());console.log("field");console.log(me.params.field);console.log("params value");console.log(me.params.value);console.log("params");console.log(me.params)}if(me.id.indexOf("dcs_")===0){var desktop=Ext.create("Wasutp.Widgets.Desktop",{});desktop.closeDeletedWidgets()}},editRow:function(){var me=this;var record=me.grid.getStore().findRecord(me.params.field,me.params[me.params.field],null,null,null,true);if(record){for(var i in me.params){if(i=="field"){continue}record.set(i,me.params[i])}}else{console.log("grid");console.log(me.grid);console.log("store");console.log(me.grid.getStore());console.log("field");console.log(me.params.field);console.log("field value");console.log(me.params[me.params.field]);console.log("params");console.log(me.params)}},updateRow:function(){var me=this}});Ext.define("Wasutp.Configurations.RowNumberer",{extend:"Ext.grid.column.Column",alias:"widget.rownumberer",text:"&#160",width:23,sortable:true,draggable:true,align:"right",constructor:function(config){this.width=this.width;this.callParent(arguments);if(this.rowspan){this.renderer=Ext.Function.bind(this.renderer,this)}},resizable:true,hideable:true,menuDisabled:false,dataIndex:"",cls:Ext.baseCSSPrefix+"row-numberer",rowspan:undefined,renderer:function(value,metaData,record,rowIdx,colIdx,store){if(this.rowspan){metaData.cellAttr='rowspan="'+this.rowspan+'"'}metaData.tdCls=Ext.baseCSSPrefix+"grid-cell-special";return store.indexOfTotal(record)+1}});Ext.define("Wasutp.Configurations.Configuration",{extend:"Ext.ux.desktop.Module",dcs:null,profiles:null,archives:null,calc:null,id:"wasutp-configuration",init:function(){var me=this,items=[];if(Wasutp.Menu.getItem(["configuration","dcs"])){items.push({text:Wasutp.Menu.getItem(["configuration","dcs"]).title,iconCls:Wasutp.Menu.getItem(["configuration","dcs"]).iconCls,handler:me.initDCS,module:me.id,id:"wasutp-configuration-dcs-menu-item",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)},scope:this})}if(Wasutp.Menu.getItem(["configuration","profiles"])){items.push({text:Wasutp.Menu.getItem(["configuration","profiles"]).title,iconCls:Wasutp.Menu.getItem(["configuration","profiles"]).iconCls,handler:me.initProfiles,module:me.id,id:"wasutp-configuration-profile-menu-item",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)},scope:this})}if(Wasutp.Menu.getItem(["configuration","calc"])){items.push({text:Wasutp.Menu.getItem(["configuration","calc"]).title,iconCls:Wasutp.Menu.getItem(["configuration","calc"]).iconCls,handler:me.initCalc,module:me.id,id:"wasutp-configuration-calc-menu-item",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)},scope:this})}items.push({xtype:"menuseparator"});if(Wasutp.Menu.getItem(["configuration","archives"])){items.push({text:Wasutp.Menu.getItem(["configuration","archives"]).title,iconCls:Wasutp.Menu.getItem(["configuration","archives"]).iconCls,handler:me.initArchives,module:me.id,id:"wasutp-configuration-archives-menu-item",listeners:{afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(this)},scope:this})}this.launcher={text:Wasutp.Menu.getItem(["configuration"]).title,iconCls:Wasutp.Menu.getItem(["configuration"]).iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false},menu:{items:items}}},getDcs:function(){if(this.dcs===null){this.dcs=Ext.create("Wasutp.Configurations.Dcs",{})}return this.dcs},initDCS:function(src,params){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("scada","read")){this.getDcs().getConfig(src,params)}else{aclManager.aclFailureMessage()}},getProfiles:function(){if(this.profiles===null){this.profiles=Ext.create("Wasutp.Configurations.Profiles",{})}return this.profiles},initProfiles:function(src,params){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("scada","read")){this.getProfiles().getConfig(src,params)}else{aclManager.aclFailureMessage()}},initArchives:function(src){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("archives","read")){this.getArchives().getConfig(src)}else{aclManager.aclFailureMessage()}},getArchives:function(){if(this.archives===null){this.archives=Ext.create("Wasutp.Configurations.archives.Archives",{})}return this.archives},initCalc:function(src){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("scada","read")){this.getCalc().getConfig()}else{aclManager.aclFailureMessage()}},getCalc:function(){if(this.calc===null){this.calc=Ext.create("Wasutp.Configurations.calc.Calc",{})}return this.calc}});Ext.define("Wasutp.Configurations.DcsGridDropBehavior",{dcsNode:null,profileNodes:null,dcs:null,options:{},prefix:"",isNode:false,start:function(data){var me=this;me.dcsNode=data.dcsNode;me.profileNodes=data.profileNodes;me.dcs=data.dcs;me.options=data.options;if(typeof data.isNode!="undefined"){me.isNode=data.isNode}if(data.prefix){me.prefix=data.prefix}else{me.prefix=""}me.sendRequest()},getDcsId:function(){var me=this;if(typeof me.dcsNode.data.id!="undefined"){return me.dcsNode.data.id}else{return null}},getGridId:function(){var me=this;if(typeof me.dcsNode=="string"){return me.dcsNode}else{if(typeof me.dcsNode=="object"){if(typeof me.dcsNode.data.id!="undefined"){return me.dcsNode.data.id}else{return null}}else{return null}}},getProfileId:function(){var me=this;if(me.profileNodes.length){for(var i in me.profileNodes){return"profile_param_"+me.profileNodes[i].ID;break}}else{return"profile_param_1"}},sendRequest:function(){var me=this;Wasutp.Ajax.request({url:"/json/configuration/drop-dcs-grid",params:{dcsNode:me.getGridId(),data:JSON.stringify(me.profileNodes),profileId:me.getProfileId(),prefix:me.prefix,isNode:me.isNode,options:JSON.stringify(me.options)},success:function(response){if(appHelper.getWasutpConfig().bufferedDcsGrid===true){me.dcs.prepareGrid(me.dcs.treeNodeId);return}if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.dcs.getTreeBehavior();treeBehavior.setTree(me.dcs.tree);for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.dcs.getGridBehavior();gridBehavior.setGrid(me.dcs.grid);for(var i in response.gridBehavior){gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}me.dcs.updateGridCounter()}})}});Ext.define("Wasutp.Configurations.Form.RenameDcsParams",{extend:"Wasutp.Configurations.Form.RenameParams",textareaId:"wasutp-configuration-rename-dcs-params-textarea",url:"/json/configuration/renameDcsParams",getApp:function(){return this.params.dcs}});Ext.define("Wasutp.Configurations.Form.DcsDnDConfirm",{confirmMessage:"",prefix:"",onSucced:function(){},constructor:function(params){var me=this;if(typeof params.confirmMessage!="undefined"){me.confirmMessage=params.confirmMessage}if(typeof params.onSucced=="function"){me.onSucced=params.onSucced}},init:function(){var me=this;me.win=Ext.create("Wasutp.window.Modal",{title:"Добавить новое устройство",width:450,cls:"wasutp-messagebox",items:[{xtype:"displayfield",hideLabel:true,border:false,margin:"10 10 10 10",cls:"wasutp-displayfield-auto-height",value:me.confirmMessage},{xtype:"textfield",name:"prefix",margin:"0 10 10 10",fieldLabel:"Префикс",value:"",labelWidth:60,width:420,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.prefix=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){(me.onSucced)();this.up("window").close()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}}],closable:true,buttons:[{text:"Добавить",margin:"0 10 0 0",handler:function(){(me.onSucced)();this.up("window").close()}},{text:"Отменить",margin:"0 10 0 0",handler:function(){this.up("window").close()}}]});me.win.show()}});Ext.define("Wasutp.Configurations.Form.ChangeCvalifNames",{win:null,show:function(){var me=this;me.win=Ext.create("Wasutp.window.Modal",{id:"ParamSettings",title:"Задание новых квалификаторов",width:350,height:120,layout:"fit",items:me.getFormPanel(),closable:true});me.win.show()},setParams:function(params){var me=this;me.params=params},formPanel:null,getFormPanel:function(){var me=this,lastChangedCvalif=0;if(typeof me.params.profile!="undefined"&&typeof me.params.profile.lastChangedCvalif!="undefined"){lastChangedCvalif=me.params.profile.lastChangedCvalif}me.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,items:[{xtype:"numberfield",name:"start",minValue:0,value:lastChangedCvalif,fieldLabel:"Начальный квалификатор",labelWidth:160,listeners:{afterrender:function(field){Ext.defer(function(){field.focus(true)},1)},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendRequest()}}}}],buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){me.sendRequest()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){me.closeWin()}}]});return me.formPanel},closeWin:function(){var me=this;me.win.close()},sendRequest:function(){var me=this,start;if(!me.params.ids.length){errorsHandler.addMessage("Ошибка","Не выбрано ни одного параметра для смены квалификатора",0);me.closeWin();return}start=me.formPanel.getForm().findField("start").getValue();if(typeof me.params.profile!="undefined"){me.params.profile.lastChangedCvalif=start+me.params.ids.length}Wasutp.Ajax.request({url:"/json/configuration/changeCvalifs",params:{start:start,ids:JSON.stringify(me.params.ids)},success:function(response){if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.params.profile.getGridBehavior();gridBehavior.setGrid(me.params.profile.grid);for(var i in response.gridBehavior){gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}if(response.success===true){me.closeWin()}}})}});Ext.define("Wasutp.Configurations.ParamsDataHelper",{dcs:null,constructor:function(params){var me=this;if(typeof params!="undefined"){if(typeof params.dcs!="undefined"){me.dcs=params.dcs}}me.statusesStyles=Wasutp.Params.Param.statusesStyles},paramStatusTips:{},getDataColumnNumber:function(){var me=this;var column=me.dcs.grid.down("[dataIndex=DATA]");var gridColumns=me.dcs.grid.headerCt.getGridColumns();var index=0;for(var i=0;i<gridColumns.length;i++){if(column&&gridColumns[i].dataIndex==column.dataIndex){return index}if(!gridColumns[i].hidden){index++}}return null},getCell:function(record){var me=this,view=Ext.fly(me.dcs.grid.getView().getNode(record));if(!view){return false}var rowEls=view.query(".x-grid-cell");var coulumnIndex=me.getDataColumnNumber();var cell=rowEls[coulumnIndex];return cell},getDataCell:function(record){var me=this,view=Ext.fly(me.dcs.grid.getView().getNode(record));if(!view){return false}var rowEls=view.query(".x-grid-cell .x-grid-cell-inner span");var coulumnIndex=me.getDataColumnNumber();var cell=rowEls[coulumnIndex-1];return cell},getRow:function(record){var me=this,row=Ext.fly(me.dcs.grid.getView().getNode(record));return row},updateDataButtonAction:function(options){var me=this,params=[],visibleRange=me.dcs.visibleRange||[];me.dcs.grid.store.each(function(rec,num){if(Ext.isEmpty(visibleRange)||(num>=visibleRange[0]&&num<=visibleRange[1])){params.push(rec.data.ID)}});var activeTreeRecord=me.dcs.getActivetreeRecord(),activeTreeRecordId=null;if(activeTreeRecord){activeTreeRecordId=activeTreeRecord.internalId}if(!activeTreeRecordId){console.error("Ошибка! Невозможно получить id активного узла дерева.");return false}Wasutp.Ajax.request({url:"/json/params/get-data",params:{id:activeTreeRecordId,params:JSON.stringify(params),options:JSON.stringify(options)},failure:function(response){for(var i in params){var id=params[i],record=me.dcs.grid.getStore().findRecord("ID",id,null,null,null,true),cell,cl;if(record){Wasutp.Params.Updater.callFn(me.updateCell,me,[record,"DATA",0]);cell=me.getCell(record);cl=Ext.get(cell);if(cl){for(var i in me.statusesStyles){cl.removeCls(me.statusesStyles[i].gridCls)}cl.addCls(me.statusesStyles.OIC_DST_NOPRESENT.gridCls)}}}},success:function(response){if(!me.dcs.grid.getEl()){return false}if(typeof response.data!="undefined"){var data=response.data,selectionModel=me.dcs.grid.getSelectionModel();for(var i in params){var id=params[i],record=me.dcs.grid.getStore().findRecord("ID",id,null,null,null,true),value;if(record){var cell=me.getCell(record);if(typeof data["param"+id]==="undefined"){Wasutp.Params.Updater.callFn(me.updateCell,me,[record,"DATA",0]);cell=me.getCell(record);var cl=Ext.get(cell);if(cl){for(var i in me.statusesStyles){cl.removeCls(me.statusesStyles[i].gridCls)}cl.addCls(me.statusesStyles.OIC_DST_NOPRESENT.gridCls)}}else{value=data["param"+id].VALUE1;Wasutp.Params.Updater.callFn(me.updateCell,me,[record,"DATA",value]);var cl=null;for(var i in me.statusesStyles){if(cl=Ext.get(cell)){cl.removeCls(me.statusesStyles[i].gridCls)}}cell=me.getCell(record);var html=data["param"+id].VALUE1;var statuses=data["param"+id].STATUSES;var noPresent="OIC_DST_NOPRESENT",valueNoCorrect="OIC_DST_VALUENOCORRECT";if(statuses.length){for(var s in statuses){if(me.statusesStyles[statuses[s]]){cl=Ext.get(cell);if(cl){cl.addCls(me.statusesStyles[statuses[s]].gridCls)}}else{console.log(statuses[s]+" отсутствует в каталоге статусов me.statusesStyle")}}for(var s in statuses){if(typeof Wasutp.Params.Param.availableStatuses[statuses[s]]!="undefined"){html+="<br/>"+Wasutp.Params.Param.getStatusDescByName(statuses[s])+" "}}}var dt=data["param"+id].DATE;var time=Ext.Date.format(new Date(dt.year,dt.month-1,dt.date,dt.hours,dt.minutes,dt.seconds),"Y.m.d H:i:s");html+="<br/>"+time;if(!me.paramStatusTips[data["param"+id].ID1]){me.paramStatusTips[data["param"+id].ID1]=Ext.create("Wasutp.tip.ToolTip",{target:cell,html:html,anchor:"top",listeners:{}})}else{me.paramStatusTips[data["param"+id].ID1].setTarget(cell);me.paramStatusTips[data["param"+id].ID1].update(html)}}}else{console.log("Параметр с id = "+id+" не найден в таблице параметров dcs")}}var selection=selectionModel.getSelection(),record,row;if(selection.length){for(var i in selection){record=selection[i];row=me.getRow(record);if(row){row.addCls("x-grid-row-selected")}}}me.dcs.markEvenRowsManually()}}})},updateCell:function(record,column,value){var me=this;record.set(column,value)},removeData:function(){var me=this,params=[];me.dcs.grid.store.each(function(rec){params.push(rec.data.ID)});for(var i in params){var id=params[i];var record=me.dcs.grid.getStore().findRecord("ID",id,null,null,null,true);if(record){var cell=me.getCell(record);Wasutp.Params.Updater.callFn(me.updateCell,me,[record,"DATA",""]);var cl=Ext.get(cell);if(cl){cl.applyStyles("border-width: 1px; border-color: #FFFFFF;")}}}}});Ext.define("Wasutp.Configurations.Panel",{extend:"Ext.ux.desktop.Module",treeBehavior:null,getTreeBehavior:function(){var me=this;if(me.treeBehavior===null){me.treeBehavior=Ext.create("Wasutp.Configurations.TreeBehavior")}return me.treeBehavior},gridBehavior:null,getGridBehavior:function(){var me=this;if(me.gridBehavior===null){me.gridBehavior=Ext.create("Wasutp.Configurations.GridBehavior")}return me.gridBehavior},hasTreeChildren:function(node,childId){var result=false;if(node.childNodes.length>0){node.eachChild(function(n1){if(n1.internalId==childId){result=true}if(n1.childNodes.length>0){n1.eachChild(function(n2){if(n2.internalId==childId){result=true}})}})}return result},doRemoveGrid:function(deletingId){var me=this,result=false,id,childs=[];if(me.treeNodeId==null){return false}if(me.treeNodeId==deletingId){return true}var issetNodeChild=function(id){var node=me.tree.getStore().getNodeById(id),nodeId;if(node&&node.childNodes.length){var childs=node.childNodes;for(var i in childs){nodeId=childs[i].data.id;if(nodeId==me.treeNodeId){return true}else{return issetNodeChild(nodeId)}}}};result=issetNodeChild(deletingId);return result},updateGridCounter:function(){var me=this,counter=Ext.getCmp(me.gridCounterId);if(counter){counter.update(me.grid.getStore().getCount())}},setColor:function(color,type){var me=this,selection=me.grid.getSelectionModel().getSelection(),ids=[];if(selection.length){for(var i in selection){ids.push(selection[i].data.ID)}}Wasutp.Ajax.request({url:"/json/configuration/set-color",params:{ids:JSON.stringify(ids),color:color,type:type},success:function(response){var record;for(var i in ids){record=me.grid.getStore().findRecord("ID",ids[i],null,null,null,true);record.set("COLOR",color)}me.markEvenRowsManually()}})},markEvenRowsManually:function(){var me=this,count=0,row;me.grid.getStore().each(function(record){count++;if(count%2==0){row=Ext.fly(me.grid.getView().getNode(record));if(row){row.addCls("x-grid-row-alt")}}})},changeRowRender:function(val,style,record,rowNum){var color="000000";val=val===null?"":val;if(record.data.COLOR){color=record.data.COLOR}return'<span style="color: #'+color+';">'+val+"</span>"},deselectByClickOnRow:function(record,e){var me=this,selectionModel=me.grid.getSelectionModel(),selection=selectionModel.getSelection(),issetRecord=false;if(selection.length){for(var i in selection){if(record.internalId===selection[i].internalId){issetRecord=true;break}}}if((e.shiftKey||e.ctrlKey)===false&&issetRecord===true){selectionModel.deselectAll();if(issetRecord===true){selectionModel.select(record)}}},deselectByClickOnWin:function(e){var me=this,selectionModel,selection;if(!me.grid){return false}selectionModel=me.grid.getSelectionModel();selection=selectionModel.getSelection();if((e.shiftKey||e.ctrlKey)===false&&selection.length!==1){selectionModel.deselectAll()}},getActivetreeRecord:function(){var me=this,treeSelection=me.tree.getSelectionModel().getSelection();if(treeSelection&&treeSelection[0]){return treeSelection[0]}return null}});Ext.define("Wasutp.Configurations.GridDropBehavior",{dcsNode:null,profileNodes:null,dcs:null,prefix:"",isNode:false,start:function(data){var me=this;me.dcsNode=data.dcsNode;me.profileNodes=data.profileNodes;me.dcs=data.dcs;if(typeof data.isNode!="undefined"){me.isNode=data.isNode}Ext.MessageBox.prompt("Префикс","Введите префикс для имен создаваемых объектов",function(btn,prefix){if(btn=="ok"){if(prefix){me.prefix=prefix}else{me.prefix=""}}else{me.prefix=""}me.sendRequest()})},getDcsId:function(){var me=this;if(typeof me.dcsNode.data.id!="undefined"){return me.dcsNode.data.id}else{return null}},getGridId:function(){var me=this;if(typeof me.dcsNode=="string"){return me.dcsNode}else{if(typeof me.dcsNode=="object"){if(typeof me.dcsNode.data.id!="undefined"){return me.dcsNode.data.id}else{return null}}else{return null}}},getProfileId:function(){var me=this;if(me.profileNodes.length){for(var i in me.profileNodes){return"profile_param_"+me.profileNodes[i].ID;break}}else{return"profile_param_1"}},sendRequest:function(){var me=this;Wasutp.Ajax.request({url:"/json/configuration/drop-grid",params:{dcsNode:me.getGridId(),data:JSON.stringify(me.profileNodes),profileId:me.getProfileId(),prefix:me.prefix,isNode:me.isNode},success:function(response){me.dcs.prepareGrid(me.dcs.treeNodeId);if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.dcs.getTreeBehavior();treeBehavior.setTree(me.dcs.tree);for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}me.dcs.prepareGrid(me.dcs.treeNodeId)}})}});Ext.define("Wasutp.window.Modal",{extend:"Ext.window.Window",alias:"widget.modal-win",id:"wasutp-modal-window",closable:false,resizable:false,maximizable:false,minimizable:false,modal:true,constrain:true,bodyPadding:0,autoscroll:true,setAutoScroll:true,listeners:{close:{fn:function(ths){wasutpApp.getDesktop().taskbar.enable();Ext.WindowMgr.each(function(win){if(win.__proto__.$className==="Wasutp.window.Window"||win.__proto__.$className==="Wasutp.container.Container"){win.enable()}})}},show:{fn:function(ths){wasutpApp.getDesktop().taskbar.startMenu.hide();wasutpApp.getDesktop().taskbar.disable();Ext.WindowMgr.each(function(win){if(win.__proto__.$className==="Wasutp.window.Window"||win.__proto__.$className==="Wasutp.container.Container"){win.disable()}})}},boxready:function(win){var map=new Ext.KeyMap(win.getEl(),{key:Ext.EventObject.ESC,fn:function(){this.close()},scope:win})}},initComponent:function(){var me=this;me.callParent(arguments)},show:function(){var me=this,desktop;desktop=wasutpApp.getDesktop();me=desktop.add(me);me.callParent(arguments)}});Ext.define("Wasutp.Configurations.TreeBehavior",{tree:null,id:null,params:null,setTree:function(tree){var me=this;me.tree=tree},execute:function(id,cmd,params){var me=this;me.id=id;me.params=params;switch(cmd){case"create":me.createNode();break;case"delete":me.deleteNode();break;case"edit":me.editNode();break;case"update":me.updateNode();break;default:break}},createNode:function(){var me=this;if(typeof me.params.tree!="undefined"&&me.params.tree!==""){me.tree=Ext.getCmp(me.params.tree)}if(me.params.parentId.indexOf("root_root")>=0){var parent=me.tree.getRootNode()}else{if(me.params.parentId.indexOf("root_root")<0){var parent=me.tree.getStore().getNodeById(me.params.parentId)}}var allowDrag=true;if(typeof me.params.allowDrag!="undefined"){allowDrag=me.params.allowDrag}var node=parent.appendChild({id:me.id,text:me.params.text,leaf:false,internalId:me.id,iconCls:me.params.iconCls,menu:me.params.menu,allowDrag:allowDrag,nodeRecordData:me.params.nodeRecordData,expanded:true});if(typeof me.params.menu!="undefined"&&me.params.menu!==""){node.raw.menu=me.params.menu}if(typeof me.params.expandParentNode!="undefined"&&me.params.expandParentNode==true){node.parentNode.expand()}},deleteNode:function(){var me=this;var node=me.tree.getStore().getNodeById(me.id);if(node){node.remove()}if(me.id.indexOf("dcs_")===0){var desktop=Ext.create("Wasutp.Widgets.Desktop",{});desktop.closeDeletedWidgets()}},editNode:function(){var me=this;var node=me.tree.getStore().getNodeById(me.id);if(typeof me.params.text!="undefined"&&me.params.text!==""){node.set("text",me.params.text)}if(typeof me.params.iconCls!="undefined"&&me.params.iconCls!==""){node.set("iconCls",me.params.iconCls)}if(typeof me.params.menu!="undefined"&&me.params.menu!==""){node.raw.menu=me.params.menu}if(typeof me.params.updateNode!="undefined"&&me.params.updateNode==true){me.tree.getStore().load({node:node})}if(typeof me.params.expandNode!="undefined"&&me.params.expandNode==true){if(typeof me.params.updateNode!="undefined"&&me.params.updateNode==true){setTimeout(function(){node.expand()},1000)}else{node.expand()}}},updateNode:function(){var me=this;var node=me.tree.getStore().getNodeById(me.id);if(typeof node=="undefined"){return false}if(typeof me.params.updateNode!="undefined"&&me.params.updateNode==true){var result=me.tree.getStore().load({node:node})}if(typeof me.params.expandNode!="undefined"&&me.params.expandNode==true){if(typeof me.params.updateNode!="undefined"&&me.params.updateNode==true){setTimeout(function(){node.expand()},1000)}else{node.expand()}}}});Ext.define("Wasutp.SessionExtender",{sessionExtenderInterval:null,constructor:function(){this.sessionExtenderInterval=setInterval(function(){Wasutp.Ajax.request({url:"/json/application/extend-session",success:function(response){console.log("Статус файла сессии обновлен")}})},1000*60*60*24);if(this.sessionExtenderInterval){console.log("session extender started!")}}});Ext.define("Wasutp.Profiler",{enabled:false,startTime:null,title:"Code",lastTime:null,index:0,microtime:function microtime(get_as_float){var now=new Date().getTime()/1000;var s=parseInt(now);return(get_as_float)?now:(Math.round((now-s)*1000)/1000)+" "+s},start:function(title){if(typeof title!="undefined"&&title){this.title=title}this.startTime=this.microtime(true);this.write(this.title+" start profiling...")},end:function(){if(this.start!==null){var end=this.microtime(true);time=end-this.startTime;this.write(this.title+" end profiling: "+time)}else{this.write("Start point is null")}},showTime:function(title,reset){message="microtime";if(typeof title!="undefined"&&title){message=title}time=this.microtime(true);if(typeof reset!="undefined"&&(reset===true||this.lastTime===null)){this.index=0}else{if(this.lastTime!==null){time=time-this.lastTime}}this.index++;message+="("+this.index+"): ";this.write(message+time);this.lastTime=this.microtime(true)},write:function(value){if(this.enabled){console.log(value)}}});Ext.define("Wasutp.Documentation",{extend:"Ext.ux.desktop.Module",menuId:"wasutp-startMenu-Documentation",init:function(){var me=this;this.launcher={id:me.menuId,text:Wasutp.Menu.getItem(["documentation"]).title,iconCls:Wasutp.Menu.getItem(["documentation"]).iconCls,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false},menu:{items:[]}};me.addNesteditems()},addNesteditems:function(ths){var me=this;Wasutp.Ajax.request({url:"/json/administration/get-doc-menu-items",success:function(response){if(!response.data){return false}var raw=response.data;var docsMenu=Ext.getCmp(me.menuId);var menuL1;if(raw.items&&raw.items.length){menuL1=Ext.create("Wasutp.menu.Menu",{items:[]});for(var l1 in raw.items){var itemL1=raw.items[l1],item;item=Ext.create("Ext.menu.Item",{text:itemL1.title,iconCls:itemL1.iconCls,menu:{items:[]},hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false}});if(itemL1.items.length){var menuL2=Ext.create("Wasutp.menu.Menu",{items:[]});for(var l2 in itemL1.items){var itemL2=itemL1.items[l2];menuL2.add({text:itemL2.title,iconCls:itemL2.iconCls,document:itemL2.document,handler:me.getDocument});item.menu=menuL2}}menuL1.add(item);docsMenu.menu=menuL1}}}})},getDocument:function(){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("base","read")){document.location.target="_blank";document.location.href="/application/download/get-document?document="+me.document}else{aclManager.aclFailureMessage()}}});Ext.define("Wasutp.Ajax",{statics:{rawParams:null,rawDialogParams:null,initDialog:function(dialog){switch(dialog.type){case"alert":Ext.MessageBox.alert({modal:dialog.params&&typeof dialog.params.modal!=="undefined"?dialog.params.modal:true,title:dialog.title,cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:dialog.message,buttons:Ext.MessageBox.OK,callback:function(btn){},scope:null});break;case"confirm":Ext.MessageBox.confirm({title:dialog.title,cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:dialog.message,buttons:Ext.MessageBox.YESNO,callback:function(btn){if(btn==="yes"){Wasutp.Ajax.rawDialogParams.params.dialog=JSON.stringify({response:true,name:dialog.name,params:dialog.params});Wasutp.Ajax.request(Wasutp.Ajax.rawDialogParams)}else{if(btn==="no"){Wasutp.Ajax.rawDialogParams.params.dialog=JSON.stringify({response:false,name:dialog.name});Wasutp.Ajax.request(Wasutp.Ajax.rawDialogParams)}}},scope:null});break;case"prompt":Ext.MessageBox.prompt({title:dialog.title,cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:dialog.message,buttons:Ext.MessageBox.YESNO,callback:function(btn){if(btn==="ok"){Wasutp.Ajax.rawDialogParams.params.dialog=JSON.stringify({response:true,name:dialog.name,text:text,params:dialog.params});Wasutp.Ajax.request(Wasutp.Ajax.rawDialogParams)}else{if(btn==="cancel"){Wasutp.Ajax.rawDialogParams.params.dialog=JSON.stringify({response:false,name:dialog.name,text:text});Wasutp.Ajax.request(Wasutp.Ajax.rawDialogParams)}}}});break;case"custom":var form=Ext.create(dialog.form,dialog.params);var continueCmd=function(params){Wasutp.Ajax.rawDialogParams.params.dialog=JSON.stringify(params);Wasutp.Ajax.request(Wasutp.Ajax.rawDialogParams)};form.show(continueCmd,{response:true,name:dialog.name});break;default:break}},request:function(rawParams){var me=this,ajaxMethod=typeof appHelper.getWasutpConfig().ajaxMethod!=="undefined"&&appHelper.getWasutpConfig().ajaxMethod?appHelper.getWasutpConfig().ajaxMethod:"POST",params={},i,scope;if(typeof appHelper.getWasutpConfig().ajaxAddParams!=="undefined"){for(i in appHelper.getWasutpConfig().ajaxAddParams){params[i]=appHelper.getWasutpConfig().ajaxAddParams[i]}}if(rawParams){scope=((typeof rawParams.scope!=="undefined")?rawParams.scope:window);if(typeof rawParams.params==="object"&&rawParams.params!==null){for(i in rawParams.params){params[i]=rawParams.params[i]}}else{if(typeof rawParams.params==="function"){params=rawParams.params.call(scope)}else{if(typeof rawParams.params!=="undefined"){params=rawParams.params}}}}else{throw new Error("Отсутствует обязательный аргумент rawParams")}var timeout=rawParams.timeout||180000;var requestParams={url:rawParams.url,params:params,timeout:timeout,method:ajaxMethod,success:function(response){try{response=Ext.decode(response.responseText)}catch(e){me.addMessage("Ошибка на стороне сервера",e);if(typeof rawParams.unsuccess!="undefined"){(rawParams.unsuccess).call(this.scope,response)}}if(typeof response.auth!="undefined"&&response.auth===false){window.location="/auth/logout"}if(typeof response.messages!="undefined"){errorsHandler.addMessages(response.messages)}if(typeof response.errors!="undefined"){errorsHandler.addErrors(response.errors)}if(response.acl===false){if(rawParams.acl&&typeof rawParams.acl.failure==="function"){return rawParams.acl.failure.call(rawParams.scope,response)}else{return false}}else{if(rawParams.acl&&typeof rawParams.acl.success==="function"){rawParams.acl.success.call(rawParams.scope,response)}}if(typeof response.dialog!="undefined"){Wasutp.Ajax.rawDialogParams=rawParams;Wasutp.Ajax.initDialog(response.dialog)}else{if(typeof response.data!="undefined"){if(typeof rawParams.success!="undefined"){rawParams.success.call(this,response)}}}},failure:function(response){var message="Сервер недоступен.";if(typeof response.responseText!="undefined"&&response.responseText){message+="\n"+response.responseText}me.addMessage(errorsHandler.getSystemMessages().server_error_with_status+response.status,message);if(typeof rawParams.failure!="undefined"){(rawParams.failure).call(this.scope,response)}},scope:typeof rawParams.scope!="undefined"?rawParams.scope:null};var result=Ext.Ajax.request(requestParams);return result},addMessage:function(title,message,status){if(typeof status=="undefined"){status=0}message=""+message;errorsHandler.addMessage(title,message,status)}}});
/*!
 * Ext JS Library 4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.define("Wasutp.WallpaperModel",{extend:"Ext.data.Model",fields:[{name:"text"},{name:"img"}]});
/*!
 * Ext JS Library 4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.define("Ext.ux.desktop.StartMenu",{extend:"Ext.panel.Panel",requires:["Ext.menu.Menu","Ext.toolbar.Toolbar"],ariaRole:"menu",cls:"x-menu ux-start-menu",defaultAlign:"bl-tl",iconCls:"user",floating:true,shadow:true,width:320,initComponent:function(){var me=this,menu=me.menu;me.menu=new Ext.menu.Menu({cls:"ux-start-menu-body",border:false,floating:false,items:menu});me.menu.layout.align="stretch";me.items=[me.menu];me.layout="fit";Ext.menu.Manager.register(me);me.callParent();me.toolbar=new Ext.toolbar.Toolbar(Ext.apply({dock:"right",cls:"ux-start-menu-toolbar",vertical:true,width:100,listeners:{add:function(tb,c){c.on({click:function(){me.menu.items.each(function(item){if(item.menu){item.menu.hide()}});me.hide()}})}}},me.toolConfig));me.toolbar.layout.align="stretch";me.addDocked(me.toolbar);delete me.toolItems},addMenuItem:function(){var cmp=this.menu;cmp.add.apply(cmp,arguments)},addToolItem:function(){var cmp=this.toolbar;cmp.add.apply(cmp,arguments)}});Ext.define("Wasutp.Schemes.NewSchemeDepsLoader",{singleton:true,deps:[{url:"/easeljs/easeljs-0.6.1.min.js",check:function(){return(typeof window.createjs=="object"&&typeof window.createjs.Stage=="function")}},{url:"/sldiagram/rtree.js",check:function(){return(typeof window.RTree=="function")}},{url:"/sldiagram/sldiagram.js",check:function(){return(typeof window.SLDiagram=="function")}},{url:"/sldiagram/typesLibrary.js",check:function(){return(typeof window.SLDiagram=="function"&&typeof window.SLDiagram.createTypes=="function")}}],loadAll:function(successFn,failFn){var loader=this;var deps=loader.deps;function load(deps,depIndex){var loader=this;var deps=loader.deps;var dep=deps[depIndex];var url=dep.url;if(dep.check()==false){Ext.Loader.loadScript({url:url,onLoad:function(){console.log(url+" - load successful");if(depIndex<deps.length-1){load.call(this,deps,depIndex+1)}if(depIndex==deps.length-1&&typeof successFn=="function"){successFn()}},onError:function(){console.error("Error at load "+url);if(typeof failFn=="function"){failFn()}},scope:this})}else{if(depIndex<deps.length-1){load.call(this,deps,depIndex+1)}else{if(depIndex==deps.length-1){successFn()}}}}res=load.call(loader,deps,0)}});Ext.define("Wasutp.Schemes.NewSchemeToggledWidget",{constructor:function(cfg){if(!cfg){console.error("ERROR: Wasutp.Schemes.NewSchemeToggledWidget: Нет обязательного аргумента cfg");return}var funcs;if(typeof cfg.type==="string"){switch(cfg.type){case"enable":funcs={enable:function(){this.widget.enable()},disable:function(){this.widget.disable()}};break;case"show":funcs={enable:function(){this.widget.show()},disable:function(){this.widget.hide()}};break}}Ext.apply(this,cfg);Ext.apply(this,funcs)},setState:function(state){var funcName=((state)?"enable":"disable");this[funcName]()}});Ext.define("Wasutp.Schemes.NewSchemeSchemeContextMenu",{schemePanel:null,contextMenu:null,constructor:function(cfg){Ext.apply(this,cfg);this.contextMenu=null},showContextMenu:function(e){e.stopEvent();var cm=this;var cfg=cm.getConfigForContextMenu();if(cfg===null||(cfg.items&&cfg.items.length===0)){return}var contextMenu=cm.getConextMenu(cfg);contextMenu.showAt(e.getXY())},getConfigForContextMenu:function(){var cm=this;var schemePanel=cm.schemePanel;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;var els=sld.getSelectedElements();var el=sld.getElementUnderPoint();var cfg={floating:true,renderTo:Ext.getBody(),items:[]};var items=[];var item;if(el===null){}else{if(el){items=el.type.getItemsForContextMenu.call(el)}}cfg.items=cfg.items.concat(items);this.trimMenuSeparators(cfg.items);return cfg},trimMenuSeparators:function(items){var item;item=items[0];if(item&&item.xtype&&item.xtype==="menuseparator"){items.splice(0,1)}item=items[items.length];if(item&&items.xtype&&item.xtype==="menuseparator"){items.splice(items.length-1,1)}return items},getConextMenu:function(cfg){var cm=this;if(cm.contextMenu){cm.contextMenu.close()}cm.contextMenu=Ext.create("Ext.menu.Menu",cfg);return cm.contextMenu}});Ext.define("Wasutp.Schemes.NewSchemePaletteDragSource",{extend:"Ext.dd.DragSource",schemePanel:null,constructor:function(el,config){this.el=Ext.get(el);if(!this.dragData){this.dragData={}}Ext.apply(this,config);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy({id:this.el.id+"-drag-status-proxy",animRepair:this.animRepair})}this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true}]);this.dragging=false},template:null,setTemplate:function(template){if(template){this.template=template;return true}else{return false}},hint:null,type:null,cursor:null,scroll:false,updateDragEl:function(type){if(!type){return}this.type=type;var showState;if(this.hint){showState=this.hideDragEl();delete this.hint}this.cursor=type.getImageForCursor();var src=this.template.apply({image:this.cursor.url});var parser=new DOMParser();var dom=parser.parseFromString(src,"text/html");this.hint=dom.getElementsByTagName("body")[0].firstChild;var id=Ext.id(this.hint);this.hint.setAttribute("id",id);this.hint.setAttribute("class","x-component x-layer x-component-default x-dd-drag-proxy x-dd-drag-current x-dd-drop-ok");this.hint.style.width=String(this.cursor.width)+"px";this.hint.style.height=String(this.cursor.height)+"px"},showDragEl:function(){var palette=this.schemePanel.getPalettePanel();if(this.hint&&palette.getSelectedItem()){Ext.getBody().dom.appendChild(this.hint);return true}else{return false}},hideDragEl:function(){if(this.hint){if(document.body.contains(this.hint)){document.body.removeChild(this.hint)}return true}else{return false}},emptyDiv:function(){return document.createElement("div")},getDragEl:function(){var el;if(this.hint){el=document.getElementById(this.hint.id);if(!(el)){this.showDragEl()}return this.hint}else{return this.emptyDiv()}},onEndDrag:function(data,e){this.hideDragEl();if(this.schemePanel){this.schemePanel.childrens.sldiagramCmp.panel.getEl().focus()}},showFrame:function(iPageX,iPageY){var el=this.getEl(),dragEl=this.getDragEl(),s=dragEl.style;this._resizeProxy();if(this.centerFrame&&this.cursor&&typeof this.cursor.x==="number"&&typeof this.cursor.y==="number"){this.setDelta(this.cursor.x,this.cursor.y)}this.setDragElPos(iPageX,iPageY);Ext.fly(dragEl).show()},autoOffset:function(x,y){var el=this.getEl(),dragEl=this.getDragEl(),s=dragEl.style;if(this.centerFrame&&this.cursor&&typeof this.cursor.x==="number"&&typeof this.cursor.y==="number"){this.setDelta(this.cursor.x,this.cursor.y)}},alignElWithMouse:function(el,iPageX,iPageY){var oCoord=this.getTargetCoord(iPageX,iPageY),fly=el.dom?el:Ext.fly(el,"_dd"),elSize=fly.getSize(),EL=Ext.Element,vpSize,newLeft,newTop;if(!this.deltaSetXY){vpSize=this.cachedViewportSize={width:EL.getDocumentWidth(),height:EL.getDocumentHeight()};fly.setXY([oCoord.x,oCoord.y]);newLeft=fly.getLocalX();newTop=fly.getLocalY();this.deltaSetXY=[newLeft-oCoord.x,newTop-oCoord.y]}else{vpSize=this.cachedViewportSize;fly.setLeftTop(oCoord.x+this.deltaSetXY[0],oCoord.y+this.deltaSetXY[1])}this.cachePosition(oCoord.x,oCoord.y);this.autoScroll(oCoord.x,oCoord.y,el.offsetHeight,el.offsetWidth);return oCoord},onMouseUp:function(e){return this.hideDragEl()},afterRepair:function(){var me=this;me.dragging=false;me.hideDragEl();me.schemePanel.getPalettePanel().setSelectedItem(null)}});Ext.define("Wasutp.Schemes.NewSchemeServerDataModel",{extend:"Ext.data.Model",fields:[{name:"id",type:"number"},{name:"name",type:"string"},{name:"file_name",type:"string"},{name:"scheme",type:"string"},{name:"menu_id",type:"number"},{name:"menu_name",type:"string"},{name:"format_id",type:"number"},{name:"format_name",type:"string"},{name:"last_res",type:"boolean"},{name:"last_res_value",type:"number"},{name:"last_res_message",type:"string"}]});Ext.define("Wasutp.Schemes.NewSchemeFormat",{statics:{formatName:"empty"},sldiagram:null,format:null,openFieldSet:null,saveFieldSet:null,getOpenValues:function(){},getSaveValues:function(){},applyOpenValues:function(){},applySaveValues:function(){},getOpenFields:function(){console.warn("WARN: Class Wasutp.Schemes.NewSchemeFormat for extend")},getSaveFields:function(){console.warn("WARN: Class Wasutp.Schemes.NewSchemeFormat for extend")},constructor:function(cfg){if(typeof cfg==="undefined"){throw new Error("FATAL: cfg not exist")}if(SLDiagram.checkRequiredProperties(cfg,["sldiagram","format"])===false){throw new Error("FATAL: cfg not include all required properties")}this.sldiagram=cfg.sldiagram;this.format=cfg.format}});Ext.define("Wasutp.Schemes.SchemeXsde",{extend:"Wasutp.Schemes.NewSchemeFormat",statics:{formatName:"modus"},getOpenFields:function(){if(this.openFieldSet){return this.openFieldSet}var format=this.format;var sld=this.sldiagram;this.openFieldSet=Ext.create("Ext.form.FieldSet",{title:"Additional properties",collapsible:false,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:"URL getConfig",name:"urlGetConfig",value:format.getConfigProperty("scheme/urls/getconfig","/json/schemesxsde/"),scope:this},{fieldLabel:"URL getScheme",name:"urlGetScheme",value:format.getConfigProperty("scheme/urls/getscheme","/resource/schemes/"),scope:this},{fieldLabel:"URL getData",name:"urlGetData",value:format.getConfigProperty("scheme/urls/getdata","/json/newschemesrtree/get-data-by-id"),scope:this},{fieldLabel:"URL send",name:"urlSend",value:format.getConfigProperty("scheme/urls/send","/json/newschemesrtree/send"),scope:this},{xtype:"numberfield",fieldLabel:"ID",name:"id",value:sld.getConfigProperty("scheme/id",0,false),scope:this}]});return this.openFieldSet},getSaveFields:function(){if(this.saveFieldSet){return this.saveFieldSet}this.saveFieldSet=Ext.create("Ext.form.FieldSet",{title:"Additional properties",collapsible:false,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"label",text:'Формат "modus" не поддерживает сохранение'}]});return this.saveFieldSet},getFileName:function(fullFileName){var items=fullFileName.split("/");if(items.length<=0){return null}return items[items.length-1]},getOpenValues:function(){var fields=this.openFieldSet;var fileName=this.getFileName(fields.child("[name=urlGetScheme]").getValue());var id=fields.child("[name=id]").getValue();if(SLDiagram.isNumber(id)){id=Number(id)}else{id=null}return{urls:{getconfig:fields.child("[name=urlGetConfig]").getValue(),getdata:fields.child("[name=urlGetData]").getValue(),send:fields.child("[name=urlSend]").getValue()},id:id,name:fileName,filename:fields.child("[name=urlGetScheme]").getValue()}}});
/*!
 * Ext JS Library 4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.define("Ext.ux.desktop.TaskBar",{extend:"Ext.toolbar.Toolbar",requires:["Ext.button.Button","Ext.resizer.Splitter","Ext.menu.Menu","Ext.ux.desktop.StartMenu"],alias:"widget.taskbar",cls:"ux-taskbar",startBtnText:"",initComponent:function(){var me=this;me.id="isms-taskbar";me.startMenu=new Ext.ux.desktop.StartMenu(me.startConfig);me.quickStart=new Ext.toolbar.Toolbar(me.getQuickStart());me.windowBar=new Ext.toolbar.Toolbar(me.getWindowBarConfig());me.tray=new Ext.toolbar.Toolbar(me.getTrayConfig());me.items=[{xtype:"button",cls:"ux-start-button",iconCls:"wasutp-start",menu:me.startMenu,menuAlign:"bl-tl",text:me.startBtnText,width:100},me.quickStart,{xtype:"splitter",html:"&#160;",height:14,width:2,cls:"x-toolbar-separator x-toolbar-separator-horizontal"},me.windowBar,"-",me.tray];me.callParent()},afterLayout:function(){var me=this;me.callParent();me.windowBar.el.on("contextmenu",me.onButtonContextMenu,me)},getQuickStart:function(){var me=this,ret={minWidth:0,width:0,items:[],enableOverflow:true};Ext.each(this.quickStart,function(item){ret.items.push({tooltip:{text:item.name,align:"bl-tl"},overflowText:item.name,iconCls:item.iconCls,module:item.module,handler:me.onQuickStartClick,scope:me})});return ret},getTrayConfig:function(){var me=this,items=[],ret;items.push({id:"error-handler",tooltip:{text:"Системные сообщения",align:"b-t"},overflowText:"Системные сообщения",iconCls:errorsHandler.isEmpty()?"icon-messages-off":"icon-messages-on",handler:function(){errorsHandler.show()}});var serverStatementMenu=null;if(serverStatement){serverStatementMenu=serverStatement.getServerStatementMenu()}items.push({id:"wasutp-server-statement",tooltip:{text:"Статус не определен",align:"b-t"},iconCls:"wasutp-icon-flag-unknown",handler:function(){return false},menu:serverStatementMenu});items.push(Ext.create("Wasutp.Date.TrayClock",{xtype:"wasutptrayclock",id:"wasutp-trayClock"}));ret={items:items};delete this.trayItems;return ret},getWindowBarConfig:function(){return{flex:1,cls:"ux-desktop-windowbar",items:["&#160;"],layout:{overflowHandler:"Scroller"}}},getWindowBtnFromEl:function(el){var c=this.windowBar.getChildByElement(el);return c||null},onQuickStartClick:function(btn){var module=this.app.getModule(btn.module),window;if(module){window=module.createWindow();window.show()}},onButtonContextMenu:function(e){var me=this,t=e.getTarget(),btn=me.getWindowBtnFromEl(t);if(btn){e.stopEvent();me.windowMenu.theWin=btn.win;me.windowMenu.showBy(t)}},onWindowBtnClick:function(btn){var win=btn.win;if(win.minimized||win.hidden){btn.disable();win.show(null,function(){btn.enable()})}else{if(win.active){btn.disable();win.on("hide",function(){btn.enable()},null,{single:true});win.minimize()}else{win.toFront()}}},addTaskButton:function(win){var config={iconCls:win.iconCls,enableToggle:true,toggleGroup:"all",width:140,margins:"0 2 0 3",text:Ext.util.Format.ellipsis(win.title,20),listeners:{click:this.onWindowBtnClick,scope:this},win:win};var cmp=this.windowBar.add(config);cmp.toggle(true);return cmp},removeTaskButton:function(btn){var found,me=this;me.windowBar.items.each(function(item){if(item===btn){found=item}return !found});if(found){me.windowBar.remove(found)}return found},setActiveButton:function(btn){if(btn){btn.toggle(true)}else{this.windowBar.items.each(function(item){if(item.isButton){item.toggle(false)}})}}});
/*!
 * Ext JS Library 4.0
 * Copyright(c) 2006-2011 Sencha Inc.
 * licensing@sencha.com
 * http://www.sencha.com/license
 */
Ext.define("Ext.ux.desktop.App",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.container.Viewport","Ext.ux.desktop.Desktop"],isReady:false,modules:null,useQuickTips:true,constructor:function(config){var me=this;me.addEvents("ready","beforeunload");me.mixins.observable.constructor.call(this,config);if(Ext.isReady){Ext.Function.defer(me.init,10,me)}else{Ext.onReady(me.init,me)}},init:function(){var me=this,desktopCfg;if(me.useQuickTips){Ext.QuickTips.init()}me.modules=me.getModules();if(me.modules){me.initModules(me.modules)}desktopCfg=me.getDesktopConfig();me.desktop=new Ext.ux.desktop.Desktop(desktopCfg);me.viewport=new Ext.container.Viewport({layout:"fit",items:[me.desktop]});Ext.EventManager.on(window,"beforeunload",me.onUnload,me);me.isReady=true;me.fireEvent("ready",me)},getDesktopConfig:function(){var me=this,cfg={app:me,taskbarConfig:me.getTaskbarConfig()};Ext.apply(cfg,me.desktopConfig);return cfg},getModules:Ext.emptyFn,getStartConfig:function(){var me=this,cfg={app:me,menu:[]},launcher;Ext.apply(cfg,me.startConfig);Ext.each(me.modules,function(module){if(typeof module!="undefined"){launcher=module.launcher;if(launcher){launcher.handler=launcher.handler||Ext.bind(me.createWindow,me,[module]);cfg.menu.push(module.launcher)}}});return cfg},createWindow:function(module){var window=module.createWindow();window.show()},getTaskbarConfig:function(){var me=this,cfg={app:me,startConfig:me.getStartConfig()};Ext.apply(cfg,me.taskbarConfig);return cfg},initModules:function(modules){var me=this;Ext.each(modules,function(module){if(typeof module!="undefined"){module.app=me}})},getModule:function(name){var ms=this.modules;for(var i=0,len=ms.length;i<len;i++){var m=ms[i];if(m.id==name||m.appType==name){return m}}return null},onReady:function(fn,scope){if(this.isReady){fn.call(scope,this)}else{this.on({ready:fn,scope:scope,single:true})}},getDesktop:function(){return this.desktop},onUnload:function(e){if(this.fireEvent("beforeunload",this)===false){e.stopEvent()}}});Ext.define("Wasutp.Widgets.Desktop",{requires:["Wasutp.Ajax","Wasutp.Widgets.WidgetObserver"],restoreWidgets:function(){var me=this;Wasutp.Ajax.request({url:"/json/application/get-desktop-widgets",params:{},success:function(response){if(response.data.widgets&&response.data.widgets.length){for(var i in response.data.widgets){me.restoreWidget(response.data.widgets[i])}}}})},restoreWidget:function(widget){var widgetParam=Ext.create("Wasutp.Widgets.DcsParam",{ID:widget.ID,NAME:widget.NAME,UNIT:widget.UNIT,PRECIS:widget.PRECIS?widget.PRECIS:2,DATA:"0",GTYPE:widget.GTYPE,CVALIF2_NUMERIC:widget.CVALIF2_NUMERIC,GTOPT:widget.GTOPT,SAVED:true});widgetParam.show([widget.COORD_X,widget.COORD_Y]);if(widget.PARAMS&&widget.PARAMS.page&&widget.PARAMS.page==="chart"){widgetParam.switchPanel()}},closeDeletedWidgets:function(){Wasutp.Ajax.request({url:"/json/application/get-desktop-widgets",params:{},success:function(response){var ids=[];if(response.data.widgets&&response.data.widgets.length){for(var i in response.data.widgets){ids.push(parseInt(response.data.widgets[i].ID))}}for(var p in Wasutp.Widgets.WidgetObserver.params){var param=Wasutp.Widgets.WidgetObserver.params[p],id=parseInt(param.ID),cmp=null;if(param.SAVED&&ids.indexOf(id)===-1){cmp=Ext.getCmp(p);if(cmp){cmp.hide();Wasutp.Widgets.WidgetObserver.deleteParam(p)}}}}})}});Ext.define("Wasutp.storage.localStorage.LocalStorage",{errorMsg:"Браузер не поддерживает LocalStorage",constructor:function(){if(!window.localStorage){throw new Error(this.errorMsg)}},getItem:function(key){var me=this,itemStr,item;itemStr=localStorage.getItem(key);item=me.unserialize(itemStr);return item},setItem:function(key,value){var me=this,strValue;strValue=me.serialize(value);return localStorage.setItem(key,strValue)},serialize:function(data){var me=this,strData;strData=JSON.stringify(data);return strData},unserialize:function(strData){var me=this,data;if(!strData){return""}data=JSON.parse(strData);return data}});Ext.define("Wasutp.grid.columns.State",{statics:{localStorageKey:"ismsTableFields",instance:null,getInstance:function(){if(Wasutp.grid.columns.State.instance===null){Wasutp.grid.columns.State.instance=new Wasutp.grid.columns.State()}return Wasutp.grid.columns.State.instance}},requires:["Wasutp.storage.localStorage.LocalStorage"],statements:{},autoCommit:true,save:function(grid,compositeKey){var me=this,key=compositeKey.join(""),state={grid:{key:compositeKey},columns:me.getVisibleColumns(grid)};me.statements[key]=state;if(me.autoCommit===true){me.commit()}},load:function(grid,compositeKey){var me=this,key=compositeKey.join(""),state;if(me.autoCommit===true){me.checkout()}state=me.statements[key];if(!state){return false}grid.suspendEvents();me.restoreColumns(grid,state);grid.resumeEvents()},commit:function(){var me=this,localStorage=me.getLocalStorageManager();localStorage.setItem(me.self.localStorageKey,me.statements)},checkout:function(){var me=this,localStorage=me.getLocalStorageManager(),data=localStorage.getItem(me.self.localStorageKey);if(data){me.statements=data}},restoreColumns:function(grid,state){var me=this,stateColumns=state.columns,headerContainer=grid.getHeaderContainer(),gridColumns=headerContainer.getGridColumns(),store;if(gridColumns.length){store=grid.getStore();for(var i in gridColumns){var index=gridColumns[i].dataIndex;if(stateColumns[index]){gridColumns[i].show();gridColumns[i].setWidth(stateColumns[index].width);if(stateColumns[index].direction){store.sort(index,stateColumns[index].direction)}}else{gridColumns[i].hide()}}}var headerCt=grid.headerCt,stateColumnsArray=[],columns=headerCt.items.getRange();for(var i in stateColumns){stateColumnsArray.push(i)}var sortedColumns=[],i=0;for(var c in columns){if(stateColumnsArray.indexOf(columns[c].dataIndex)!==-1){var column=columns.find(function(obj){return obj.dataIndex===stateColumnsArray[i]});if(column){sortedColumns.push(column)}i++}else{if(columns[c]){sortedColumns.push(columns[c])}}}columns=sortedColumns;headerCt.suspendLayouts();for(var i=0;i<columns.length;i++){headerCt.moveAfter(columns[i],(columns[i-1]||null))}headerCt.resumeLayouts(true);return true},getVisibleColumns:function(grid){var me=this,headerContainer=grid.getHeaderContainer(),visibleColumns=headerContainer.getVisibleGridColumns(),columns={},sorting=me.getSorting(grid);if(visibleColumns.length){for(var i in visibleColumns){var index=visibleColumns[i].dataIndex;columns[index]={width:visibleColumns[i].getWidth()};if(sorting[index]){columns[index]["direction"]=sorting[index]}}}return columns},getSorting:function(grid){var me=this,store=grid.getStore(),sorters=store.sorters,items=sorters.items,columns={};if(items.length){for(var i in items){columns[items[i].property]=items[i].direction}}return columns},localStorageManager:null,getLocalStorageManager:function(){var me=this;if(me.localStorageManager===null){me.localStorageManager=new Wasutp.storage.localStorage.LocalStorage()}return me.localStorageManager},clear:function(key){var me=this;if(key){localStorage.setItem(key,null)}else{localStorage.clear()}me.statements={}}});Ext.define("Wasutp.Configurations.Profiles",{statics:{profileGridId:"profile-grid"},requires:["Ext.grid.plugin.BufferedRenderer","Wasutp.grid.columns.State"],extend:"Wasutp.Configurations.Panel",id:"configurations-profiles",init:function(){return false},type:"",columns:[],category:"profile",treeStore:null,tree:null,gridSubType:null,treeNodeId:null,selectAllMenuText:"Выделить всё",deselectAllMenuText:"Снять выделение",windowId:"profile_system",lastChangedCvalif:0,paramsDraggable:true,profileTreeCallback:Ext.emptyFn,profileGridCallback:Ext.emptyFn,profileWindowCallback:Ext.emptyFn,getConfig:function(src,params){var me=this;if(params&&typeof params.profileTreeCallback==="function"){me.profileTreeCallback=params.profileTreeCallback}if(params&&typeof params.profileGridCallback==="function"){me.profileGridCallback=params.profileGridCallback}if(params&&typeof params.profileWindowCallback==="function"){me.profileWindowCallback=params.profileWindowCallback}me.createWindow(src)},getEmptyPanel:function(){var panel=Ext.create("Ext.panel.Panel",{id:"profile-grid",region:"center",width:600,height:600});return panel},createWindow:function(src){var me=this;var desktop=wasutpApp.getDesktop();var win=desktop.getWindow(me.windowId);if(!win){win=desktop.createWindow({id:me.windowId,title:"Профили устройств",height:600,width:900,layout:"border",iconCls:"wasutp-configuration-profiles",items:[me.getTree(),me.getEmptyPanel()],listeners:{show:function(){me.profileWindowCallback.call(me);me.profileWindowCallback=Ext.emptyFn}}})}me.treeNodeId=null;win.show();win.getEl().on("click",function(e){me.deselectByClickOnWin(e)})},getTree:function(){var me=this;me.treeStore=Ext.create("Ext.data.TreeStore",{proxy:{type:"ajax",url:"/json/configuration/get-tree",actionMethods:{read:"POST"},reader:{type:"json",root:"data"},listeners:{exception:{fn:function(ths,response,operation,eOpts){try{response=Ext.decode(response)}catch(e){errorsHandler.addMessage("Ошибка на стороне сервера со статусом "+response.status,e,0)}}}}},root:{text:"Профили устройств",expanded:true},listeners:{beforeload:{element:"el",fn:function(ths,operation,eOpts){var id="profile_root_root";if(operation.id==="root"){operation.id=id;operation.params.id=id;operation.params.node=id}}},load:{element:"el",fn:function(){if(typeof this.proxy.reader.rawData!="undefined"){errorsHandler.addErrors(this.proxy.reader.rawData.errors)}}}}});me.tree=Ext.create("Ext.tree.Panel",{id:"profile-tree-panel",region:"west",split:true,width:300,height:600,store:me.treeStore,listeners:{beforeitemdblclick:function(ths,record,item,index,e,eOpts){var node=me.tree.getStore().getNodeById(record.internalId);if(node){node.expand(true)}return false},render:function(){me.profileTreeCallback.call(me);me.profileTreeCallback=Ext.emptyFn},select:{fn:function(view,record,item,index,e){me.prepareGrid(record.data.id);me.profileInit({treeNodeId:record.data.id})}},itemcontextmenu:{fn:function(ths,record,item,index,e,eOpts){if(record.data.id!==me.treeNodeId){me.prepareGrid(record.data.id);me.profileInit({treeNodeId:record.data.id})}me.getNodeMenu(e,record)}},beforecontainercontextmenu:{fn:function(ths,e,eOpts){me.getNodeMenu(e)}}},viewConfig:{plugins:[{ptype:"treeviewdragdrop",enableDrop:true,dropGroup:"dcsToProfiles"}],listeners:{beforedrop:function(node,data,overModel,dropPosition,dropHandlers){var record=data.records[0],nodeData=overModel.raw.nodeRecordData,accessToModuleFunctions=Ext.create("Wasutp.Configurations.models.AccessToModuleFunctions"),protoNode,protoNodeData;data.records=[];if(!record.data||!record.data.id||record.data.id.indexOf("dcs_device_")!==0){return false}if(!nodeData){return false}if(parseInt(nodeData.CVALIF)!==accessToModuleFunctions.channelsControlCvalif){return false}if(overModel.internalId.indexOf("profile_node_")===0){protoNode=me.tree.getStore().getNodeById(overModel.parentNode.internalId)}else{if(overModel.internalId.indexOf("profile_param_")===0){var parentNode=me.tree.getStore().getNodeById(overModel.parentNode.get("id"));protoNode=me.tree.getStore().getNodeById(parentNode.parentNode.get("id"))}else{return false}}protoNodeData=protoNode.raw.nodeRecordData;if(!protoNodeData||parseInt(protoNodeData.ID_PROTO_POINT)!==accessToModuleFunctions.protoDescId){return false}accessToModuleFunctions.createControll({dcsDeviceId:record.data.id,profileId:overModel.data.id,profile:me})}}}});return me.tree},profileInit:function(params){var me=this;if(!params){return false}if(params.treeNodeId){me.treeNodeId=params.treeNodeId}return true},getRootNodeMenu:function(){var me=this,items=[];var updateNode=Ext.create("Ext.Action",{text:"Обновить",iconCls:"wasutp-update",cmd:"updateNode",task:"updateNode",handler:function(ths){me.execMenuAction(ths,"profile_root_root")}});items.push(updateNode);items.push({xtype:"menuseparator"});var newDevice=Ext.create("Ext.Action",{text:"Профиль сбора",iconCls:"wasutp-configuration-profile-add1",cmd:"createRoot",task:"createNode",handler:function(ths){me.execMenuAction(ths,"profile_root_root")}});var newTransProfile=Ext.create("Ext.Action",{text:"Профиль передачи",iconCls:"wasutp-configuration-profile-add2",cmd:"createTransProfile",task:"createNode",handler:function(ths){me.execMenuAction(ths,"profile_transferDevice_root")}});var funcProfile=Ext.create("Ext.Action",{text:"Профиль общих функций",iconCls:"wasutp-configuration-profile-add3",cmd:"createFuncProfile",task:"createNode",handler:function(ths){me.execMenuAction(ths,"profile_funcDevice_root")}});var create=Ext.create("Ext.Action",{text:"Создать",iconCls:"x-tree-icon-parent",menu:{xtype:"wasutp-menu",items:[newDevice,newTransProfile,funcProfile]},handler:function(){return false}});items.push(create);items.push({xtype:"menuseparator"});var importProfile=Ext.create("Ext.Action",{text:"Загрузить профиль на сервер",iconCls:"wasutp-configuration-profiles-upload-profile",handler:function(){var aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("scada","adjust")===false){aclManager.aclFailureMessage();return false}var uploadProfileForm=Ext.create("Wasutp.Configurations.serialize.UploadProfileForm",{profile:me});uploadProfileForm.open()}});items.push(importProfile);var contextMenu=Ext.create("Wasutp.menu.Menu",{items:items});return contextMenu},getNodeMenu:function(e,record){var me=this;if(typeof record==="undefined"||record.raw.id==="root"){var contextMenu=me.getRootNodeMenu();e.stopEvent();contextMenu.showAt(e.getXY());return false}if(typeof record.raw.menu=="undefined"){return}var items=[];for(var i in record.raw.menu){if(typeof record.raw.menu[i].menuseparator!="undefined"&&record.raw.menu[i].menuseparator==true){items.push({xtype:"menuseparator"});continue}var confirm=false;if(typeof record.raw.menu[i].confirm!="undefined"&&record.raw.menu[i].confirm==true){confirm=true}var confirmMessage=false;if(typeof record.raw.menu[i].confirmMessage!="undefined"){confirmMessage=record.raw.menu[i].confirmMessage}var task=false;if(typeof record.raw.menu[i].task!="undefined"){task=record.raw.menu[i].task}var action=Ext.create("Ext.Action",{text:record.raw.menu[i].text,iconCls:typeof record.raw.menu[i].iconCls!="undefined"?record.raw.menu[i].iconCls:"",cmd:record.raw.menu[i].cmd,confirm:confirm,confirmMessage:confirmMessage,task:task,options:record.raw.menu[i].options,handler:function(ths){me.execMenuAction(ths,record.data.id,ths.options)}});items.push(action)}var contextMenu=Ext.create("Wasutp.menu.Menu",{items:items});e.stopEvent();contextMenu.showAt(e.getXY());return false},getGridSelectionMenu:function(){var me=this;var selectAll=Ext.create("Ext.Action",{text:"Выделить всё",iconCls:"wasutp-arrow-all",handler:function(widget,event,q){me.selectAll(me.contextRow)}});return selectAll},execMenuAction:function(action,id,options){var me=this;switch(action.task){case"createNode":me.createNode(action,id,options);break;case"executeCommand":me.executeCommand(action,id,options);break;case"settings":me.showSettings(action,id);break;case"updateNode":me.updateTreeNode(action,id);break;case"downloadData":me.downloadData(action,id);break}},downloadData:function(action,id){var me=this,url=action.options&&action.options.url?action.options.url:null,idArr=id.split("_"),aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("scada","adjust")){if(url&&idArr[2]){document.location.target="_blank";document.location.href=url+"?id="+idArr[2]}}else{aclManager.aclFailureMessage()}},showSettings:function(action,id){var me=this;var onSucced=function(grid){var records=grid.getStore().getRange();if(records.length){me.getSettingsHelper().init(id,records[0],me.type)}};if(me.treeNodeId==id){(onSucced)(me.grid)}else{me.prepareGrid(id,onSucced)}},updateTreeNode:function(action,id){var me=this;var node=me.tree.getStore().getNodeById(id);if(id=="profile_root_root"){me.treeStore.load({node:me.treeStore.getRootNode()})}else{if(node){if(node.raw&&node.raw.leaf!==true){me.tree.getStore().load({node:node})}}}},createNode:function(action,id,options){var me=this;if(me.treeNodeId!=id){if(typeof options!="undefined"){options.cancelProfileGridBehavior=true}else{options={cancelProfileGridBehavior:true}}}else{options={}}Wasutp.Ajax.request({url:"/json/configuration/get-node-pattern",params:{cmd:action.cmd,id:id,options:options},success:function(response){me.treeNodeId=id?id:"profile_root_root";if(!Ext.isEmpty(response.data)&&!Ext.isEmpty(response.data.columns)){if(response.data.formCls){options.formCls=response.data.formCls}me.getNodeCreator().init(response.data.columns,id,action,options)}}})},executeCommand:function(action,id,options){var me=this;if(me.treeNodeId!=id){if(typeof options!="undefined"){options.cancelProfileGridBehavior=true}else{options={cancelProfileGridBehavior:true}}}else{options={}}var ajax=function(){Wasutp.Ajax.request({url:"/json/configuration/execute-cmd",params:{cmd:action.cmd,id:id,category:me.category,options:JSON.stringify(options)},success:function(response){if(action.cmd=="deleteNode"){if(me.doRemoveGrid(id)){var gridPanel=Ext.getCmp("profile_system");gridPanel.remove("profile-grid");gridPanel.insert(0,me.getEmptyPanel())}}if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.getTreeBehavior();treeBehavior.setTree(me.tree);for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.getGridBehavior();gridBehavior.setGrid(me.grid);for(var i in response.gridBehavior){gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}}})};if(action.confirm){confirmMessage=action.confirmMessage?action.confirmMessage:action.text;Ext.MessageBox.on("show",function(){wasutpApp.getDesktop().taskbar.disable()});Ext.MessageBox.confirm({title:"Выполнение команды",cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:confirmMessage,buttons:Ext.MessageBox.YESNO,callback:function(btn){if(btn==="yes"){ajax()}wasutpApp.getDesktop().taskbar.enable()},scope:null})}else{ajax()}},refreshTreeNodeById:function(id){var me=this;var node=me.treeStore.getNodeById(id);if(id=="profile_root_root"){me.treeStore.load({node:me.treeStore.getRootNode()})}else{if(node&&node.parentNode){me.treeStore.load({node:node.parentNode})}}},gridItemParamContextMenu:null,getGridItemParamContextMenu:function(){var me=this;var items=[];if(me.selectAllGridItemMenu===null){me.selectAllGridItemMenu=Ext.create("Ext.menu.Item",{iconCls:"wasutp-arrow-all",text:me.selectAllMenuText,handler:function(widget,event,q){me.selectAll(me.contextRow)}})}items.push(me.selectAllGridItemMenu);items.push({xtype:"menuseparator"});var setColor=Ext.create("Ext.Action",{iconCls:"wasutp-dcs-param-set-color",text:"Установить цвет",menu:{items:[Ext.create("Ext.ColorPalette",{listeners:{select:function(cp,color,q,w){this.up("menu").up("menu").hide();me.setColor(color,"profile")}}}),{xtype:"menuseparator"},{iconCls:"wasutp-dcs-param-set-default-color",text:"Цвет по умолчанию",handler:function(widget,event,q){this.up("menu").up("menu").hide();me.setColor("000000","profile")}}]},handler:function(){return false}});items.push(setColor);var changeCvalifs=Ext.create("Ext.menu.Item",{iconCls:"wasutp-profile-param-set-cvalif",text:"Задать новые квалификаторы",handler:function(widget,event,q){me.changeCvalifNames()}});items.push(changeCvalifs);items.push({xtype:"menuseparator"});var addParamAction=Ext.create("Ext.Action",{iconCls:"wasutp-add",text:"Добавить параметр",cmd:"addParam",task:"createNode",handler:function(ths){me.execMenuAction(ths,me.treeNodeId)}});items.push(addParamAction);if(me.gridSubType===null){var addParamsAction=Ext.create("Ext.Action",{iconCls:"wasutp-add",text:"Добавить типовые параметры ТИ",cmd:"addStandartParams",task:"executeCommand",handler:function(ths){var onSucced=function(){me.prepareGrid(me.treeNodeId)};me.execMenuAction(ths,me.treeNodeId,onSucced)}});items.push(addParamsAction)}var delRow=Ext.create("Ext.Action",{iconCls:"wasutp-delete",text:"Удалить",handler:function(widget,event,q){me.delRow(me.contextRow)}});items.push(delRow);var rename=Ext.create("Ext.Action",{iconCls:"wasutp-profile-param-rename",text:"Переименовать",handler:function(widget,event,q){me.renameMenuHandler()}});items.push(rename);items.push({xtype:"menuseparator"});var settings=Ext.create("Ext.Action",{iconCls:"wasutp-settings",text:"Свойства",handler:function(widget,event,q){var params=me.treeNodeId.split("_");if(params.length===3){var id=params[0]+"_"+params[1]+"_"+me.contextRow.data.ID;me.getSettingsHelper().init(id,me.contextRow,me.type)}}});items.push(settings);me.gridItemParamContextMenu=Ext.create("Wasutp.menu.Menu",{items:items});return me.gridItemParamContextMenu},changeCvalifNames:function(){var me=this,selection=me.grid.getSelectionModel().getSelection(),ids=[],form;if(selection.length){for(var i in selection){ids.push(selection[i].data.ID)}}form=Ext.create("Wasutp.Configurations.Form.ChangeCvalifNames");if(form){form.setParams({ids:ids,profile:me});form.show()}},gridItemOtherContextMenu:null,getGridItemOtherContextMenu:function(){var me=this;var items=[];var settings=Ext.create("Ext.Action",{iconCls:"wasutp-settings",text:"Свойства",handler:function(widget,event,q){me.getSettingsHelper().init(me.treeNodeId,me.contextRow,me.type)}});items.push(settings);me.gridItemOtherContextMenu=Ext.create("Wasutp.menu.Menu",{items:items});return me.gridItemOtherContextMenu},selectAllGridItemMenu:null,getGridItemContextMenu:function(){var me=this;var menu;if(me.type=="param"){menu=me.getGridItemParamContextMenu()}else{menu=me.getGridItemOtherContextMenu()}return menu},selectAllGridMenu:null,getGridContextMenu:function(){var me=this;var menu;if(me.type=="param"){menu=me.getGridParamContextMenu()}else{return null}return menu},gridParamContextMenu:null,getGridParamContextMenu:function(){var me=this;var items=[];if(me.selectAllGridMenu===null){me.selectAllGridMenu=Ext.create("Ext.menu.Item",{iconCls:"wasutp-arrow-all",text:me.selectAllMenuText,handler:function(widget,event,q){me.selectAll(me.contextRow)}})}items.push(me.selectAllGridMenu);var addParamAction=Ext.create("Ext.Action",{iconCls:"wasutp-add",text:"Добавить параметр",cmd:"addParam",task:"createNode",handler:function(ths){me.execMenuAction(ths,me.treeNodeId)}});items.push(addParamAction);if(me.gridSubType===null){var addParamsAction=Ext.create("Ext.Action",{iconCls:"wasutp-add",text:"Добавить типовые параметры ТИ",cmd:"addStandartParams",task:"executeCommand",handler:function(ths){var options={updateGrid:true};me.execMenuAction(ths,me.treeNodeId,options)}});items.push(addParamsAction)}me.gridParamContextMenu=Ext.create("Wasutp.menu.Menu",{width:230,items:items});return me.gridParamContextMenu},gridCounterId:"configuration-profile-grid-counter",getGrid:function(data){var me=this;var fields=[],columns=[],numberer=Ext.create("Wasutp.Configurations.RowNumberer",{text:"#",hidden:true});numberer.width=40;columns.push(numberer);for(var i in me.columns){if(me.columns[i].editor=="checkbox"){continue}if(me.columns.hasOwnProperty(i)){var field={name:i};if(typeof me.columns[i].sortType!="undefined"){field.sortType=me.columns[i].sortType}fields.push(field);if(i==="COLOR"){continue}var column={text:me.columns[i].title,dataIndex:i,hidden:typeof me.columns[i].hidden!="undefined"?me.columns[i].hidden:false,filter:typeof me.columns[i].filter!="undefined"?me.columns[i].filter:false,renderer:me.changeRowRender};if(typeof me.columns[i].width!="undefined"){column.width=me.columns[i].width}if(typeof me.columns[i].align!="undefined"){column.align=me.columns[i].align}columns.push(column)}}Ext.define("ConfigurationProfilesGridModel",{extend:"Ext.data.Model",fields:fields});var store=Ext.create("Ext.data.Store",{model:"ConfigurationProfilesGridModel",data:data});if(me.type=="param"){var plugins={ptype:"gridviewdragdrop",enableDrop:true,enableDrag:me.paramsDraggable,dragGroup:"firstGridDDGroup",dropGroup:"secondGridDDGroup"}}else{var plugins=null}me.selectAllGridMenu=null;me.selectAllGridItemMenu=null;setTimeout(function(){me.getGridItemContextMenu();me.getGridContextMenu()},0);me.grid=Ext.create("Ext.grid.Panel",{plugins:"bufferedrenderer",selModel:{pruneRemoved:false},id:Wasutp.Configurations.Profiles.profileGridId,region:"center",store:store,width:600,height:600,columns:columns,multiSelect:true,features:[{ftype:"filters",encode:false,local:true}],bbar:["->",{id:me.gridCounterId,xtype:"label",cls:"x-toolbar-text",forId:"myFieldId",text:store.getCount(),margin:"5 10 5 10",listeners:{render:{fn:function(e){var tip=Ext.create("Wasutp.tip.ToolTip",{target:e.getEl(),html:"Количество объектов"})}}}}],listeners:{afterrender:function(){me.profileGridCallback.call(me);me.profileGridCallback=Ext.emptyFn},headerclick:function(){appHelper.getColumnsState().save(me.grid,me.getColumnsStateParams())},columnschanged:function(){appHelper.getColumnsState().save(me.grid,me.getColumnsStateParams())},columnresize:function(){appHelper.getColumnsState().save(me.grid,me.getColumnsStateParams())},beforerender:function(){appHelper.getColumnsState().load(me.grid,me.getColumnsStateParams())}},viewConfig:{trackOver:true,plugins:plugins,copy:true,stripeRows:true,listeners:{refresh:function(){me.updateGridCounter();me.grid.headerCt.setSortState()},itemadd:function(){me.updateGridCounter();if(me.grid){me.grid.getView().refresh()}},itemremove:function(){me.updateGridCounter();if(me.grid){me.grid.getView().refresh()}},beforeitemclick:function(ths,record,item,index,e){me.deselectByClickOnRow(record,e)},itemclick:function(){var win=Ext.getCmp(me.windowId);if(win){win.show()}},itemcontextmenu:function(view,rec,node,index,e){e.stopEvent();me.contextRow=rec;if(typeof rec.raw.menu!=="undefined"&&rec.raw.menu===false){return false}var menu=me.getGridItemContextMenu();if(menu){menu.showAt(e.getXY())}},beforeitemdblclick:function(view,rec){var selection=me.grid.getSelectionModel().getSelection();if(selection.length!==1){return false}if(typeof rec.raw.menu!=="undefined"&&rec.raw.menu===false){return false}me.contextRow=rec;var params=me.treeNodeId.split("_");if(params.length===3){var id=params[0]+"_"+params[1]+"_"+me.contextRow.data.ID;me.getSettingsHelper().init(id,rec,me.type)}},containercontextmenu:function(ths,e){e.stopEvent();var menu=me.getGridContextMenu();if(menu){menu.showAt(e.getXY())}return false},beforedrop:function(node,data,overModel,dropPosition,dropHandlers){var treeNode=me.tree.getStore().getNodeById(me.treeNodeId);var dcsNodes=[];for(var i in data.records){dcsNodes.push(data.records[i].data)}data.records=[];me.getGridDropBehavior().start({profileNode:me.treeNodeId,dcsNodes:dcsNodes,profile:me,prefix:"",overModel:overModel,node:node,profileTreeNode:treeNode})}}}});me.grid.getSelectionModel().on("beforeselect",function(ths){var selection=ths.getSelection();var menu=me.getGridContextMenu();var item=null;if(menu){for(var i in menu.items.items){if(menu.items.items[i].text=="Свойства"){item=menu.items.items[i];break}}}if(item!==null){if(selection.length==0){if(item.isDisabled()){item.enable()}}else{if(!item.isDisabled()){item.disable()}}}if((selection.length+1)==me.grid.getStore().count()){me.changeSelectAllButton()}});return me.grid},changeRowRender:function(val,style,record,rowNum,cellNum){if(typeof record.data.DPTS_ON!=="undefined"){var DPTSONColumnNum=null,columns=this.getHeaderContainer().getGridColumns();if(columns.length){for(var i in columns){if(columns[i].dataIndex==="DPTS_ON"){DPTSONColumnNum=i;break}}}if(DPTSONColumnNum&&cellNum==DPTSONColumnNum){if(Boolean(record.data.DPTS_ON)===true){return'<input type="checkbox" checked = checked disabled />'}else{return'<input type="checkbox" disabled />'}}}if(typeof record.data.DPTS_OFF!=="undefined"){var DPTSOFFColumnNum=null,columns=this.getHeaderContainer().getGridColumns();if(columns.length){for(var i in columns){if(columns[i].dataIndex==="DPTS_OFF"){DPTSOFFColumnNum=i;break}}}if(DPTSOFFColumnNum&&cellNum==DPTSOFFColumnNum){if(Boolean(record.data.DPTS_OFF)===true){return'<input type="checkbox" checked = checked disabled />'}else{return'<input type="checkbox" disabled />'}}}var color="000000";val=val===null?"":val;if(record.data.COLOR){color=record.data.COLOR}return'<span style="color: #'+color+';">'+val+"</span>"},changeSelectAllButton:function(){},gridDropBehavior:null,getGridDropBehavior:function(){var me=this;if(me.gridDropBehavior===null){me.gridDropBehavior=Ext.create("Wasutp.Configurations.ProfileGridDropBehavior")}return me.gridDropBehavior},selectAll:function(row){var me=this;var grid=Ext.getCmp("profile-grid");if(grid){var rows=grid.getSelectionModel();rows.deselectAll();rows.selectAll();var selection=grid.getSelectionModel().getSelection();if((selection.length+1)==grid.getStore().count()){me.changeSelectAllButton()}}},delRow:function(row){var me=this;var grid=Ext.getCmp("profile-grid");var rows=grid.getSelectionModel().getSelection();var ids=[];for(var i in rows){ids.push(rows[i].data.ID)}Wasutp.Ajax.request({url:"/json/configuration/execute-cmd",params:{cmd:"deleteParams",category:me.category,ids:JSON.stringify(ids)},success:function(response){if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.getGridBehavior();gridBehavior.setGrid(me.grid);for(var i in response.gridBehavior){gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}var items=[me.selectAllGridItemMenu,me.selectAllGridMenu];for(var j in items){items[j].setText(me.selectAllMenuText);items[j].setHandler(me.selectAll)}}})},prepareGrid:function(id,onSuccess){var me=this;var selectedRowId=me.getSelectedRowId();Wasutp.Ajax.request({url:"/json/configuration/get-grid-data",params:{id:id},success:function(response){me.lastChangedCvalif=0;var gridPanel=Ext.getCmp("profile_system");gridPanel.remove("profile-grid");if(response.data.grid){if(typeof response.data.paramsDraggable!=="undefined"){me.paramsDraggable=response.data.paramsDraggable}else{me.paramsDraggable=true}me.gridSubType=response.data.grid.params.gridSubType;me.type=response.data.type;me.columns=response.data.grid.columns;grid=me.getGrid(response.data.grid.data);grid.internalId=id;gridPanel.insert(0,grid);if(selectedRowId!==null){me.setSelectedRowById(selectedRowId)}}else{gridPanel.insert(0,me.getEmptyPanel())}if(typeof onSuccess=="function"){(onSuccess)(grid)}}})},getSelectedRowId:function(){var grid=Ext.getCmp("profile-grid");if(grid){if(Ext.getClass(grid).getName()==="Ext.grid.Panel"){var selected=grid.getSelectionModel().getSelection();if(selected.length===1){var selectedRowId=selected[0].data.ID;return selectedRowId}}}return null},setSelectedRowById:function(id){var grid=Ext.getCmp("profile-grid");if(grid){if(Ext.getClass(grid).getName()==="Ext.grid.Panel"){var items=grid.getStore().data.items;if(items.length){for(var i in items){if(items[i].data.ID===id){grid.getSelectionModel().select(items[i]);break}}}}}return null},settingsHelper:null,getSettingsHelper:function(){var me=this;if(me.settingsHelper===null){me.settingsHelper=Ext.create("Wasutp.Configurations.ParamUpdate",me)}return me.settingsHelper},nodeCreator:null,getNodeCreator:function(){var me=this;if(me.nodeCreator===null){me.nodeCreator=Ext.create("Wasutp.Configurations.NodeCreator",me)}return me.nodeCreator},renameMenuHandler:function(){var me=this,selection=me.grid.getSelectionModel().getSelection(),ids=[],form;if(selection.length){for(var i in selection){ids.push(selection[i].data.ID)}}form=Ext.create("Wasutp.Configurations.Form.RenameProfileParams");if(form){form.setParams({ids:ids,profile:me});form.show()}},getColumnsStateParams:function(){var me=this,params=[];params.push(me.category);params.push(me.type);params.push(appHelper.userId);if(me.type==="param"&&me.gridSubType){params.push(me.gridSubType)}return params}});Ext.define("Wasutp.Configurations.Dcs",{statics:{dcsGridId:"dcs-grid"},requires:["Ext.grid.plugin.BufferedRenderer","Wasutp.grid.columns.State"],extend:"Wasutp.Configurations.Panel",id:"configurations-dcs",init:function(){return false},type:"",columns:[],category:"dcs",treeStore:null,tree:null,selectAllMenuText:"Выделить всё",deselectAllMenuText:"Снять выделение",windowId:"dcs_system",treeNodeId:null,dcsType:null,dcsTreeCallback:Ext.emptyFn,dcsGridCallback:Ext.emptyFn,dcsWindowCallback:Ext.emptyFn,visibleRange:[],getConfig:function(src,params){var me=this;if(params&&typeof params.dcsTreeCallback==="function"){me.dcsTreeCallback=params.dcsTreeCallback}if(params&&typeof params.dcsGridCallback==="function"){me.dcsGridCallback=params.dcsGridCallback}if(params&&typeof params.dcsWindowCallback==="function"){me.dcsWindowCallback=params.dcsWindowCallback}me.createWindow(src)},getEmptyPanel:function(){var panel=Ext.create("Ext.panel.Panel",{id:Wasutp.Configurations.Dcs.dcsGridId,region:"center",width:600,height:600});return panel},createWindow:function(src){var me=this;var desktop=wasutpApp.getDesktop();var win=desktop.getWindow(me.windowId);if(!win){win=desktop.createWindow({iconCls:"wasutp-configuration-dcs",id:me.windowId,title:"Сбор и передача",height:600,width:900,layout:"border",items:[me.getTree(),me.getEmptyPanel()],listeners:{hide:function(){me.clearUpdateDataInterval()},show:function(){me.dcsWindowCallback.call(me);me.dcsWindowCallback=Ext.emptyFn}}})}me.treeNodeId=null;win.show();win.getEl().on("click",function(e){me.deselectByClickOnWin(e)})},getTree:function(){var me=this;me.treeStore=Ext.create("Ext.data.TreeStore",{proxy:{type:"ajax",url:"/json/configuration/get-tree",actionMethods:{read:"POST"},reader:{type:"json",root:"data"},listeners:{exception:{fn:function(ths,response,operation,eOpts){try{response=Ext.decode(response)}catch(e){errorsHandler.addMessage("Ошибка на стороне сервера со статусом "+response.status,e,0)}}}}},root:{text:"root"},listeners:{beforeload:{element:"el",fn:function(ths,operation,eOpts){var id="dcs_root_root";if(operation.id==="root"){operation.id=id;operation.params.id=id;operation.params.node=id}}},load:{element:"el",fn:function(ths,node,records,successful,eOpts){if(typeof this.proxy.reader.rawData!="undefined"){errorsHandler.addErrors(this.proxy.reader.rawData.errors)}}}}});me.tree=Ext.create("Ext.tree.Panel",{id:"dcs-tree-panel",region:"west",split:true,width:300,height:600,rootVisible:false,store:me.treeStore,listeners:{beforeitemdblclick:function(ths,record,item,index,e,eOpts){var node=me.tree.getStore().getNodeById(record.internalId);if(node){node.expand(true)}return false},render:function(){me.dcsTreeCallback.call(me);me.dcsTreeCallback=Ext.emptyFn},itemappend:function(parentRecord,addedRecord){if(addedRecord.data.id.indexOf("dcs_device_")!==0){addedRecord.data.allowDrag=false}},select:{fn:function(view,record,item,index,e){me.prepareGrid(record.data.id);me.dcsInit({treeNodeId:record.data.id,dcsType:(record.raw&&record.raw.dcsType)?record.raw.dcsType:me.getNodeTypeById(record.data.id)})}},itemcontextmenu:{fn:function(ths,record,item,index,e,eOpts){if(record.data.id!==me.treeNodeId){me.prepareGrid(record.data.id);me.dcsInit({treeNodeId:record.data.id,dcsType:(record.raw&&record.raw.dcsType)?record.raw.dcsType:me.getNodeTypeById(record.data.id)})}me.getNodeMenu(e,record)}},beforecontainercontextmenu:{fn:function(ths,e,eOpts){me.getNodeMenu(e)}}},droppedRecords:undefined,viewConfig:{plugins:[{ptype:"treeviewdragdrop",enableDrag:true,dragGroup:"dcsToProfiles"},{ptype:"gridviewdragdrop",enableDrag:false,dropGroup:"firstGridDDGroup"}],listeners:{beforedrop:function(node,data,overModel,dropPosition,dropHandlers){if(typeof node=="undefined"){return false}if(typeof data=="undefined"){return false}if(typeof overModel=="undefined"){return false}if(typeof dropPosition=="undefined"){return false}if(typeof dropHandlers=="undefined"){return false}if(data.view.xtype==="treeview"){me.beforedropFromTree(node,data,overModel,dropPosition,dropHandlers)}else{if(data.view.xtype==="gridview"){me.beforedropFromGrid(node,data,overModel,dropPosition,dropHandlers)}}}}}});return me.tree},getNodeTypeById:function(id){var me=this,idSplit=id.split("_");if(idSplit.length===3){return idSplit[1]}return null},dcsInit:function(params){var me=this;if(!params){return false}if(params.treeNodeId){me.treeNodeId=params.treeNodeId}if(params.dcsType){me.dcsType=params.dcsType}return true},beforedropFromTree:function(node,data,overModel,dropPosition,dropHandlers){var me=this;me.tree.droppedRecords=data.records;data.records=[];var profileNode=null;var dcsNode=overModel;for(var i in me.tree.droppedRecords){profileNode=me.tree.droppedRecords[i].data;break}var droppedObjectTitle="параметры";if(typeof profileNode.text!="undefined"){droppedObjectTitle=profileNode.text}var options={};options.cancelDcsGridBehavior=me.doesCancelGridBehavior(dcsNode);options.cancelDcsOptionGridBehavior=true;me.getDropBehavior().start({dcsNode:dcsNode,profileNode:profileNode,dcs:me,prefix:"",options:options})},beforedropFromGrid:function(node,data,overModel,dropPosition,dropHandlers){var me=this;var grid=Ext.getCmp(Wasutp.Configurations.Dcs.dcsGridId);grid.droppedRecords=data.records;data.records=[];var profileNodes=[];var dcsNode=overModel;for(var i in grid.droppedRecords){profileNodes.push(grid.droppedRecords[i].data)}var options={};options.cancelDcsGridBehavior=me.doesCancelGridBehavior(dcsNode);options.cancelDcsOptionGridBehavior=true;me.getGridDropBehavior().start({dcsNode:dcsNode,profileNodes:profileNodes,dcs:me,isNode:true,prefix:"",options:options})},doesCancelGridBehavior:function(dcsNode){var me=this;if(typeof dcsNode=="undefined"){return false}var type=dcsNode.internalId.split("_");var lastLoadedType=null;if(me.treeNodeId){lastLoadedType=me.treeNodeId.split("_")[1]}if(type[1]=="interface"){return true}else{if(!me.treeNodeId){return true}else{if(lastLoadedType!=="param"){return true}else{if(type[1]=="param"&&me.treeNodeId==dcsNode.internalId){return false}else{if(me.hasTreeChildren(dcsNode,me.treeNodeId)===false){return true}else{return false}}}}}},gridDropBehavior:null,getGridDropBehavior:function(){var me=this;if(me.gridDropBehavior===null){me.gridDropBehavior=Ext.create("Wasutp.Configurations.DcsGridDropBehavior")}return me.gridDropBehavior},dropBehavior:null,getDropBehavior:function(){var me=this;if(me.dropBehavior===null){me.dropBehavior=Ext.create("Wasutp.Configurations.DropBehavior")}return me.dropBehavior},getNodeMenu:function(e,record){var me=this;if(typeof record=="undefined"){var items=[];var updateNode=Ext.create("Ext.Action",{text:"Обновить",iconCls:"wasutp-update",cmd:"updateNode",task:"updateNode",handler:function(ths){me.execMenuAction(ths,"dcs_root_root")}});items.push(updateNode);if(appHelper.config.wasutpConfig.debugMode){items.push({xtype:"menuseparator"});var createContr=Ext.create("Ext.Action",{text:"Создать контроллер ТМ",iconCls:"wasutp-add",cmd:"createIbm",task:"createNode",handler:function(ths){me.execMenuAction(ths,"dcs_root_root")}});items.push(createContr)}var contextMenu=Ext.create("Wasutp.menu.Menu",{items:items});e.stopEvent();contextMenu.showAt(e.getXY());return false}if(typeof record.raw.menu=="undefined"){e.stopEvent();return false}var items=[];for(var i in record.raw.menu){if(record.raw.menu[i].hidden===true){continue}if(typeof record.raw.menu[i].menuseparator!="undefined"&&record.raw.menu[i].menuseparator==true){items.push({xtype:"menuseparator"});continue}var confirm=false;if(typeof record.raw.menu[i].confirm!="undefined"&&record.raw.menu[i].confirm==true){confirm=true}var confirmMessage=false;if(typeof record.raw.menu[i].confirmMessage!="undefined"){confirmMessage=record.raw.menu[i].confirmMessage}var task=false;if(typeof record.raw.menu[i].task!="undefined"){task=record.raw.menu[i].task}var action=Ext.create("Ext.Action",{text:record.raw.menu[i].text,iconCls:typeof record.raw.menu[i].iconCls!="undefined"?record.raw.menu[i].iconCls:"",cmd:record.raw.menu[i].cmd,confirm:confirm,confirmMessage:confirmMessage,task:task,handler:function(ths){me.execMenuAction(ths,record.data.id)}});items.push(action)}var contextMenu=Ext.create("Wasutp.menu.Menu",{items:items});e.stopEvent();contextMenu.showAt(e.getXY());return false},execMenuAction:function(action,id){var me=this;switch(action.task){case"createNode":me.createNode(action,id);break;case"executeCommand":me.executeCommand(action,id);break;case"settings":me.showSettings(action,id);break;case"updateNode":me.updateTreeNode(action,id);break;case"reloadDcs":me.reloadDcs(action,id);break;case"reloadDsgwd":me.reloadDsgwd(action,id);break;case"dcs-log":me.showLog("Консоль ошибок подсистемы сбора","dcs");break;case"dsgwd-log":me.showLog("Консоль ошибок шлюза цифровой подстанции","dsgwd");break}},reloadDcs:function(action,id){var me=this,server=appHelper.modules["Wasutp.Server"],aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("scada","administration")===false){aclManager.aclFailureMessage();return false}server.applyDcsChanges()},reloadDsgwd:function(action,id){var me=this,server=appHelper.modules["Wasutp.Server"],aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("scada","administration")===false){aclManager.aclFailureMessage();return false}server.applyDsgwdChanges()},showSettings:function(action,id){var me=this;var onSucced=function(grid){var records=grid.getStore().getRange();if(records.length){me.getSettingsHelper().init(id,records[0],me.type)}};if(me.treeNodeId==id){(onSucced)(me.grid)}else{me.prepareGrid(id,onSucced)}},updateTreeNode:function(action,id){var me=this;var node=me.tree.getStore().getNodeById(id);if(id=="dcs_root_root"){me.treeStore.load({node:me.treeStore.getRootNode()})}else{if(node){me.tree.getStore().load({node:node})}}},createNode:function(action,id){var me=this;Wasutp.Ajax.request({url:"/json/configuration/get-node-pattern",params:{cmd:action.cmd,id:id},success:function(response){if(!Ext.isEmpty(response.data)&&!Ext.isEmpty(response.data.columns)){me.getNodeCreator().init(response.data.columns,id,action)}}})},executeCommand:function(action,id){var me=this;var ajax=function(){Wasutp.Ajax.request({url:"/json/configuration/execute-cmd",params:{cmd:action.cmd,id:id,category:me.category},success:function(response){if(action.cmd=="deleteIbm"||action.cmd=="deleteInterface"||action.cmd=="deletePort"||action.cmd=="deleteDevice"){if(me.doRemoveGrid(id)){var gridPanel=Ext.getCmp("dcs_system");gridPanel.remove(Wasutp.Configurations.Dcs.dcsGridId);gridPanel.insert(0,me.getEmptyPanel())}}if(action.cmd=="inWork"||action.cmd=="outOfWork"){me.prepareGrid(id)}if(typeof response.treeBehavior!=="undefined"&&response.treeBehavior!==null&&response.treeBehavior.length){var treeBehavior=me.getTreeBehavior();treeBehavior.setTree(me.tree);for(var i in response.treeBehavior){treeBehavior.execute(response.treeBehavior[i].id,response.treeBehavior[i].cmd,response.treeBehavior[i].params)}}}})};if(action.confirm){confirmMessage=action.confirmMessage?action.confirmMessage:action.text;Ext.MessageBox.confirm({title:"Выполнение команды",cls:"wasutp-messagebox",icon:Ext.MessageBox.QUESTION,msg:confirmMessage,buttons:Ext.MessageBox.YESNO,callback:function(btn){if(btn==="yes"){ajax()}wasutpApp.getDesktop().taskbar.enable()}})}else{ajax()}},refreshTreeNodeById:function(id){var me=this;var node=me.treeStore.getNodeById(id);if(id=="dcs_root_root"){me.treeStore.load({node:me.treeStore.getRootNode()})}else{if(node&&node.parentNode){me.treeStore.load({node:node.parentNode})}}},gridItemParamContextMenu:null,getGridItemParamContextMenu:function(view,rec,node,index,e){var me=this,items=[];if(me.selectAllGridItemMenu===null){me.selectAllGridItemMenu=Ext.create("Ext.menu.Item",{iconCls:"wasutp-arrow-all",text:me.selectAllMenuText,handler:function(widget,event,q){me.selectAll(me.contextRow)}})}items.push(me.selectAllGridItemMenu);items.push({xtype:"menuseparator"});var setColorMenu=Ext.create("Wasutp.menu.Menu",{items:[Ext.create("Ext.ColorPalette",{listeners:{select:function(cp,color,q,w){this.up("menu").up("menu").hide();me.setColor(color,"dcs")}}}),{xtype:"menuseparator"},{iconCls:"wasutp-dcs-param-set-default-color",text:"Цвет по умолчанию",handler:function(widget,event,q){this.up("menu").up("menu").hide();me.setColor("000000","dcs")}}]});var setColor=Ext.create("Ext.Action",{iconCls:"wasutp-dcs-param-set-color",text:"Установить цвет",menu:setColorMenu,handler:function(){return false}});items.push(setColor);var setOriginalSources=Ext.create("Ext.Action",{iconCls:"wasutp-dcs-param-set-sources",text:"Установить исходные источники",handler:function(widget,event,q){me.setOriginalSources()}});items.push(setOriginalSources);items.push({xtype:"menuseparator"});var delRow=Ext.create("Ext.Action",{iconCls:"wasutp-delete",text:"Удалить",handler:function(widget,event,q){me.delRow(me.contextRow)}});items.push(delRow);var rename=Ext.create("Ext.Action",{iconCls:"wasutp-dcs-param-rename",text:"Переименовать",handler:function(widget,event,q){me.renameMenuHandler()}});items.push(rename);items.push({xtype:"menuseparator"});if(rec&&rec.data&&rec.data.ID){var gotoHandler=Ext.create("Wasutp.goto.GotoProfile"),gotoMenuAction=gotoHandler.getMenuAction({id:rec.data.ID});if(gotoMenuAction){items.push(gotoMenuAction)}}if(rec&&rec.data&&rec.data.SOURCE_ID){var gotoSourceHandler=Ext.create("Wasutp.goto.GotoSource"),gotoSourceMenuAction=gotoSourceHandler.getMenuAction({id:rec.data.SOURCE_ID});if(gotoSourceMenuAction){items.push(gotoSourceMenuAction)}}var settings=Ext.create("Ext.Action",{iconCls:"wasutp-settings",text:"Свойства",handler:function(widget,event,q){var id="dcs_param_"+me.contextRow.data.ID;me.getSettingsHelper().init(id,me.contextRow,me.type)}});items.push(settings);if(rec&&rec.data&&Wasutp.TU.Manager.isTUOpt(rec.data.GTOPT)){var TUMenuHelper=Ext.create("Wasutp.TU.Manager",{id:rec.data.ID,paramName:rec.data.NAME});var TU=TUMenuHelper.getMenuAction();if(TU){items.push({xtype:"menuseparator"});items.push(TU)}}me.gridItemParamContextMenu=Ext.create("Wasutp.menu.Menu",{items:items});return me.gridItemParamContextMenu},renameMenuHandler:function(){var me=this,selection=me.grid.getSelectionModel().getSelection(),ids=[],form;if(selection.length){for(var i in selection){ids.push(selection[i].data.ID)}}form=Ext.create("Wasutp.Configurations.Form.RenameDcsParams");if(form){form.setParams({ids:ids,dcs:me});form.show()}},setOriginalSources:function(){var me=this,selection=me.grid.getSelectionModel().getSelection(),ids=[];if(selection.length){for(var i in selection){ids.push(selection[i].data.ID)}}Wasutp.Ajax.request({url:"/json/configuration/setOriginalSources",params:{ids:JSON.stringify(ids)},success:function(response){}})},gridItemOtherContextMenu:null,getGridItemOtherContextMenu:function(){var me=this;var items=[];var settings=Ext.create("Ext.Action",{iconCls:"wasutp-settings",text:"Свойства",handler:function(widget,event,q){me.getSettingsHelper().init(me.treeNodeId,me.contextRow,me.type)}});items.push(settings);me.gridItemOtherContextMenu=Ext.create("Wasutp.menu.Menu",{items:items});return me.gridItemOtherContextMenu},gridItemOptionContextMenu:null,getGridItemOptionContextMenu:function(){var me=this;var items=[];if(me.selectAllGridItemMenu===null){me.selectAllGridItemMenu=Ext.create("Ext.menu.Item",{iconCls:"wasutp-arrow-all",text:me.selectAllMenuText,handler:function(widget,event,q){me.selectAll(me.contextRow)}})}items.push(me.selectAllGridItemMenu);items.push({xtype:"menuseparator"});var addOptionAction=Ext.create("Ext.Action",{iconCls:"wasutp-add",text:"Добавить опцию",cmd:"addOption",task:"createNode",handler:function(ths){me.execMenuAction(ths,me.treeNodeId)}});items.push(addOptionAction);var delOpt=Ext.create("Ext.Action",{iconCls:"wasutp-delete",text:"Удалить",handler:function(widget,event,q){me.delOpt(me.contextRow)}});items.push(delOpt);items.push({xtype:"menuseparator"});var settings=Ext.create("Ext.Action",{iconCls:"wasutp-settings",text:"Свойства",handler:function(widget,event,q){var id="dcs_options_"+me.contextRow.data.ID;me.getSettingsHelper().init(id,me.contextRow,me.type)}});items.push(settings);me.gridItemOptionContextMenu=Ext.create("Wasutp.menu.Menu",{items:items});return me.gridItemOptionContextMenu},selectAllGridItemMenu:null,getGridItemContextMenu:function(){var me=this;var menu;if(me.type=="options"){menu=me.getGridItemOptionContextMenu.apply(me,arguments)}else{if(me.type=="param"){menu=me.getGridItemParamContextMenu.apply(me,arguments)}else{menu=me.getGridItemOtherContextMenu.apply(me,arguments)}}return menu},selectAllGridMenu:null,getGridContextMenu:function(){var me=this;var menu;if(me.type=="options"){menu=me.getGridOptionContextMenu()}else{if(me.type=="param"){menu=me.getGridParamContextMenu()}else{return null}}return menu},gridOptionContextMenu:null,getGridOptionContextMenu:function(){var me=this,items=[],addOptionAction;if(me.selectAllGridMenu===null){me.selectAllGridMenu=Ext.create("Ext.menu.Item",{text:me.selectAllMenuText,iconCls:"wasutp-arrow-all",handler:function(widget,event,q){me.selectAll(me.contextRow)}})}items.push(me.selectAllGridMenu);items.push({xtype:"menuseparator"});addOptionAction=Ext.create("Ext.Action",{text:"Добавить опцию",iconCls:"wasutp-add",cmd:"addOption",task:"createNode",handler:function(ths){me.execMenuAction(ths,me.treeNodeId)}});items.push(addOptionAction);me.gridOptionContextMenu=Ext.create("Wasutp.menu.Menu",{width:150,items:items});return me.gridOptionContextMenu},gridParamContextMenu:null,getGridParamContextMenu:function(){var me=this;var items=[];if(me.selectAllGridMenu===null){me.selectAllGridMenu=Ext.create("Ext.menu.Item",{iconCls:"wasutp-arrow-all",text:me.selectAllMenuText,handler:function(widget,event,q){me.selectAll(me.contextRow)}})}items.push(me.selectAllGridMenu);me.gridParamContextMenu=Ext.create("Wasutp.menu.Menu",{width:140,items:items});return me.gridParamContextMenu},gridCounterId:"wasutp-configuration-dcs-grid-count",getGrid:function(data){var me=this;var fields=[],columns=[],numberer=Ext.create("Wasutp.Configurations.RowNumberer",{text:"#",hidden:true});numberer.width=40;columns.push(numberer);for(var i in me.columns){if(me.columns.hasOwnProperty(i)){var field={name:i,align:"right"};if(typeof me.columns[i].sortType!="undefined"){field.sortType=me.columns[i].sortType}fields.push(field);if(i==="COLOR"){continue}var column={text:me.columns[i].title,dataIndex:i,hidden:typeof me.columns[i].hidden!="undefined"?me.columns[i].hidden:false,filter:typeof me.columns[i].filter!="undefined"?me.columns[i].filter:false,renderer:me.changeRowRender};if(typeof me.columns[i].width!="undefined"){column.width=me.columns[i].width}if(typeof me.columns[i].align!="undefined"){column.align=me.columns[i].align}columns.push(column)}}Ext.define("ConfigurationDcsGridModel",{extend:"Ext.data.Model",fields:fields});var storeConfig={model:"ConfigurationDcsGridModel",data:data};if(appHelper.getWasutpConfig().bufferedDcsGrid===true){storeConfig.buffered=true;storeConfig.pageSize=10000;storeConfig.proxy={type:"memory"}}var store=Ext.create("Ext.data.Store",storeConfig);if(me.type=="param"){var plugins=[{ptype:"gridviewdragdrop",enableDrag:true,dragGroup:"secondGridDDGroup",dropGroup:"firstGridDDGroup"}]}else{var plugins=null}me.selectAllGridMenu=null;me.selectAllGridItemMenu=null;setTimeout(function(){me.getGridItemContextMenu();me.getGridContextMenu()},0);me.clearUpdateDataInterval();Ext.define("BufferInfo",{override:"Ext.grid.plugin.BufferedRenderer",renderRange:function(from,to){if(me.dcsType==="params"){me.visibleRange=[from,to]}else{me.visibleRange=[]}this.callParent(arguments)}});var gridConfig={id:Wasutp.Configurations.Dcs.dcsGridId,region:"center",store:store,width:600,height:600,columns:columns,multiSelect:true,features:[{ftype:"filters",encode:false,local:true}],bbar:["->",{id:me.gridCounterId,xtype:"label",cls:"x-toolbar-text",forId:"myFieldId",text:store.getCount(),margin:"5 10 5 10",listeners:{render:{fn:function(e){var tip=Ext.create("Wasutp.tip.ToolTip",{target:e.getEl(),html:"Количество объектов"})}}}}],listeners:{afterrender:function(){me.dcsGridCallback.call(me);me.dcsGridCallback=Ext.emptyFn},headerclick:function(){appHelper.getColumnsState().save(me.grid,[me.category,me.dcsType,appHelper.userId])},columnschanged:function(){appHelper.getColumnsState().save(me.grid,[me.category,me.dcsType,appHelper.userId])},columnresize:function(){appHelper.getColumnsState().save(me.grid,[me.category,me.dcsType,appHelper.userId])},beforerender:function(){appHelper.getColumnsState().load(me.grid,[me.category,me.dcsType,appHelper.userId])}},viewConfig:{trackOver:true,copy:true,plugins:plugins,stripeRows:true,listeners:{refresh:function(){me.updateGridCounter();me.grid.headerCt.setSortState()},itemadd:function(){me.updateGridCounter();if(me.grid){me.grid.getView().refresh()}},itemremove:function(){me.updateGridCounter();if(me.grid){me.grid.getView().refresh()}},beforeitemclick:function(ths,record,item,index,e){me.deselectByClickOnRow(record,e)},itemclick:function(ths,record){var win=Ext.getCmp(me.windowId);if(win){win.show()}},itemcontextmenu:function(view,rec,node,index,e){e.stopEvent();me.contextRow=rec;var menu;menu=me.getGridItemContextMenu.apply(me,arguments);if(menu){menu.showAt(e.getXY())}},beforeitemdblclick:function(view,rec){var selection=me.grid.getSelectionModel().getSelection();if(selection.length!==1){return}me.contextRow=rec;var id="";if(me.dcsType==="params"){id="dcs_param_"+me.contextRow.data.ID}else{if(me.dcsType==="options"){id="dcs_options_"+me.contextRow.data.ID}else{id=me.treeNodeId}}me.getSettingsHelper().init(id,rec,me.type)},containercontextmenu:function(ths,e){e.stopEvent();var menu=me.getGridContextMenu();if(menu){menu.showAt(e.getXY())}return false},beforedrop:function(node,data,overModel,dropPosition,dropHandlers){var grid=Ext.getCmp(Wasutp.Configurations.Dcs.dcsGridId);grid.droppedRecords=data.records;data.records=[];var profileNodes=[];var dcsNode=overModel;for(var i in grid.droppedRecords){profileNodes.push(grid.droppedRecords[i].data)}var options={};if(me.dcsType!=="params"){options.cancelDcsGridBehavior=true}me.getGridDropBehavior().start({dcsNode:me.treeNodeId,profileNodes:profileNodes,dcs:me,prefix:"",options:options})}}}};gridConfig.plugins="bufferedrenderer";gridConfig.selModel={pruneRemoved:false};me.grid=Ext.create("Ext.grid.Panel",gridConfig);if(me.type==="param"){var showDataButton=Ext.create("Ext.menu.CheckItem",{id:"Configuration-Dcs-Params-Update-Data-Button",text:"Показать оперативные данные",handler:function(item){setTimeout(function(){me.updateDataButtonHandler(item,item.checked)},0)},pressed:false});me.grid.headerCt.on("menucreate",function(ct,menu,eOpts){menu.add("-");menu.add(showDataButton)})}return me.grid},updateDataInterval:null,updateDataButtonHandler:function(item,pressed){var me=this;var column=me.grid.down("[dataIndex=DATA]");var updatePeriod=appHelper.getWasutpConfig().dcsUpdatePeriod;updatePeriod=updatePeriod?updatePeriod:5000;if(pressed){if(column){column.show();me.getParamsDataHelper().updateDataButtonAction({createConfig:true});me.updateDataInterval=setInterval(function(){me.getParamsDataHelper().updateDataButtonAction({createConfig:true})},updatePeriod)}}else{if(column){me.getParamsDataHelper().removeData();me.clearUpdateDataInterval();return}}},clearUpdateDataInterval:function(){var me=this;if(me.updateDataInterval!==null){clearInterval(me.updateDataInterval)}},paramsDataHelper:null,getParamsDataHelper:function(){var me=this;if(me.paramsDataHelper===null){me.paramsDataHelper=Ext.create("Wasutp.Configurations.ParamsDataHelper",{dcs:me})}return me.paramsDataHelper},changeSelectAllButton:function(){},selectAll:function(row){var me=this;var grid=Ext.getCmp(Wasutp.Configurations.Dcs.dcsGridId);if(grid){var rows=grid.getSelectionModel();rows.deselectAll();rows.selectAll();var selection=grid.getSelectionModel().getSelection();if((selection.length+1)==grid.getStore().count()){me.changeSelectAllButton()}}},delRow:function(row){var me=this;var grid=Ext.getCmp(Wasutp.Configurations.Dcs.dcsGridId);var rows=grid.getSelectionModel().getSelection();var ids=[];for(var i in rows){ids.push(rows[i].data.ID)}Wasutp.Ajax.request({url:"/json/configuration/execute-cmd",params:{cmd:"deleteParams",category:"dcs",ids:JSON.stringify(ids)},success:function(response){if(appHelper.getWasutpConfig().bufferedDcsGrid===true){me.prepareGrid(me.treeNodeId);return}if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.getGridBehavior();gridBehavior.setGrid(me.grid);for(var i in response.gridBehavior){if(typeof response.gridBehavior[i].grid!="undefined"){gridBehavior.setGrid(Ext.getCmp(response.gridBehavior[i].grid))}gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}var items=[me.selectAllGridItemMenu,me.selectAllGridMenu];for(var j in items){items[j].setText(me.selectAllMenuText);items[j].setHandler(me.selectAll)}}})},delOpt:function(row){var me=this;var grid=Ext.getCmp(Wasutp.Configurations.Dcs.dcsGridId);var rows=grid.getSelectionModel().getSelection();var ids=[];for(var i in rows){ids.push(rows[i].data.ID)}Wasutp.Ajax.request({url:"/json/configuration/execute-cmd",params:{cmd:"deleteOptions",category:"dcs",ids:JSON.stringify(ids)},success:function(response){if(typeof response.gridBehavior!=="undefined"&&response.gridBehavior!==null&&response.gridBehavior.length){var gridBehavior=me.getGridBehavior();gridBehavior.setGrid(me.grid);for(var i in response.gridBehavior){gridBehavior.execute(response.gridBehavior[i].id,response.gridBehavior[i].cmd,response.gridBehavior[i].params)}}}})},addRow:function(){var me=this;var id=me.treeNodeId;Wasutp.Ajax.request({url:"/json/configuration/insert",params:{id:id},success:function(response){var gridPanel=Ext.getCmp("dcs_system");gridPanel.remove(Wasutp.Configurations.Dcs.dcsGridId);if(response.data.grid){me.type=response.data.type;me.columns=response.data.grid.columns;grid=me.getGrid(response.data.grid.data);grid.internalId=id;gridPanel.insert(0,grid)}else{gridPanel.insert(0,me.getEmptyPanel())}}})},prepareGrid:function(id,onSuccess){var me=this;var selectedRowId=me.getSelectedRowId();if(!id){return false}Wasutp.Ajax.request({url:"/json/configuration/get-grid-data",params:{id:id},success:function(response){var gridPanel=Ext.getCmp("dcs_system");gridPanel.remove(Wasutp.Configurations.Dcs.dcsGridId);if(response.data.grid){me.type=response.data.type;me.columns=response.data.grid.columns;var grid=me.getGrid(response.data.grid.data);grid.internalId=id;gridPanel.insert(0,grid);if(selectedRowId!==null){me.setSelectedRowById(selectedRowId)}}else{gridPanel.insert(0,me.getEmptyPanel())}if(typeof onSuccess=="function"){(onSuccess)(grid)}}})},getSelectedRowId:function(){var grid=Ext.getCmp(Wasutp.Configurations.Dcs.dcsGridId);if(grid){if(Ext.getClass(grid).getName()==="Ext.grid.Panel"){var selected=grid.getSelectionModel().getSelection();if(selected.length===1){var selectedRowId=selected[0].data.ID;return selectedRowId}}}return null},setSelectedRowById:function(id){var grid=Ext.getCmp(Wasutp.Configurations.Dcs.dcsGridId);if(grid){if(Ext.getClass(grid).getName()==="Ext.grid.Panel"){var items=grid.getStore().data.items;if(items.length){for(var i in items){if(items[i].data.ID===id){grid.getSelectionModel().select(items[i]);break}}}}}return null},settingsHelper:null,getSettingsHelper:function(){var me=this;if(me.settingsHelper===null){me.settingsHelper=Ext.create("Wasutp.Configurations.ParamUpdate",me)}return me.settingsHelper},nodeCreator:null,getNodeCreator:function(){var me=this;if(me.nodeCreator===null){me.nodeCreator=Ext.create("Wasutp.Configurations.NodeCreator",me)}return me.nodeCreator},updateGridCounter:function(){var me=this;if(me.type==="param"){if(me.grid.internalId){Wasutp.Ajax.request({url:"/json/configuration/get-params-count",params:{id:me.grid.internalId},success:function(response){if(response.data&&response.data.count){var counter=Ext.getCmp(me.gridCounterId);if(counter){counter.update(response.data.count)}}}})}}else{return me.callParent()}},showLog:function(title,log){var me=this,logsViewer=Ext.create("Wasutp.logs.Viewer",{title:title,log:log});logsViewer.launch()}});Ext.define("Wasutp.Configurations.Interfaces",{extend:"Wasutp.Configurations.Panel",moduleName:"interfaces",id:"configurations-"+this.moduleName,grid:null,init:function(){return false},getConfig:function(src){var me=this;me.prepareGrid()},prepareGrid:function(){var me=this;Wasutp.Ajax.request({url:"/json/configuration/get-interfaces-grid-data",success:function(response){me.createWindow();var gridPanel=Ext.getCmp(me.moduleName+"_system");if(response.data.grid){me.columns=response.data.grid.columns;var grid=me.getGrid(response.data.grid.data);var win=Ext.getCmp(me.moduleName+"_system");win.remove("configurations-"+me.moduleName+"-grid");win.insert(0,grid)}}})},createWindow:function(src){var me=this;var windowId=me.moduleName+"_system";var desktop=wasutpApp.getDesktop();var win=desktop.getWindow(windowId);if(!win){win=desktop.createWindow({iconCls:"wasutp-configuration-interfaces",id:windowId,title:"Сетевые интерфейсы",height:600,width:900,layout:"border",items:[]})}win.show()},getGrid:function(data){var me=this;var fields=[],columns=[];for(var i in me.columns){if(me.columns.hasOwnProperty(i)){var field={name:i,align:"right"};if(typeof me.columns[i].sortType!="undefined"){field.sortType=me.columns[i].sortType}fields.push(field);var column={text:me.columns[i].title,dataIndex:i,hidden:typeof me.columns[i].hidden!="undefined"?me.columns[i].hidden:false};if(typeof me.columns[i].align!="undefined"){column.align=me.columns[i].align}if(typeof me.columns[i].width!="undefined"){column.width=me.columns[i].width}columns.push(column)}}var store=Ext.create("Ext.data.Store",{fields:fields,data:data});var settings=Ext.create("Ext.Action",{iconCls:"wasutp-settings",text:"Свойства",handler:function(widget,event,q){me.updateAction(me.contextRow)}});var items=[settings];var updateNode=Ext.create("Ext.Action",{text:"Обновить",iconCls:"wasutp-update",handler:function(ths){me.prepareGrid()}});items.push(updateNode);var contextMenu=Ext.create("Wasutp.menu.Menu",{items:items});var grid=Ext.create("Ext.grid.Panel",{id:"configurations-"+me.moduleName+"-grid",region:"center",store:store,width:900,height:600,columns:columns,multiSelect:true,bbar:["->",{id:"wasutp-configuration-"+me.moduleName+"-grid-count",xtype:"label",cls:"x-toolbar-text",forId:"myFieldId",text:store.getCount(),margin:"5 10 5 10",listeners:{render:{fn:function(e){var tip=Ext.create("Wasutp.tip.ToolTip",{target:e.getEl(),html:"Количество объектов"})}}}}],viewConfig:{copy:true,stripeRows:true,listeners:{itemcontextmenu:function(view,record,node,index,e){e.stopEvent();me.contextRow=record;contextMenu.showAt(e.getXY())},beforeitemdblclick:function(view,record){me.contextRow=record;me.updateAction(record)}}}});grid.on("sortchange",function(ct,column,direction,eOpts){me.sortColumn=column.dataIndex;me.sortDirection=direction});return grid},updateAction:function(record){var items=[],me=this;var rec={};for(var i in record.data){rec[i]=record.data[i]}var formPanel=Ext.create("Wasutp.Configurations.Form.Update.Interfaces.UpdateInterfaces",{interfaceObject:me,record:rec}).getPanel();var win=Ext.getCmp("ParamSettings");if(win){win.close()}var win=Ext.create("Wasutp.window.Modal",{id:"ParamSettings",title:"Свойства сетевого интерфейса",width:700,layout:"fit",items:[formPanel],autoscroll:true,setAutoScroll:true,closable:true,getFieldData:function(el,params){me.getFieldData(el,params)},});win.show()}});Ext.define("Wasutp.Configurations.Form.Update.UpdateForm",{extend:"Wasutp.Configurations.Form.AbstractForm",params:{},constructor:function(params){this.params=params},getPanel:function(){var me=this;var formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",anchor:"100%",labelWidth:175},items:me.getItems(),buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){this.up("window").save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});return formPanel}});Ext.define("Wasutp.Configurations.Form.Update.Dcs.UpdateIbm",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:margin,height:height,value:me.params.record.ID});items.push({xtype:"displayfield",name:"ID_NODE",fieldLabel:"ID узла",margin:margin,height:height,value:me.params.record.ID_NODE});if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PCNUM!=="undefined"){items.push({disabled:false,xtype:"numberfield",name:"PCNUM",margin:margin,height:height,fieldLabel:"Номер машины",value:me.params.record.PCNUM,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumber(ths,newValue,me.params.record.PCNUM);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.LSTTBL!=="undefined"){me.params.record.LSTTBL=me.params.columns.LSTTBL.data[0].value;items.push({hidden:true,disabled:false,xtype:"combobox",name:"LSTTBL",margin:margin,height:height,fieldLabel:"Сегмент сбора",store:Ext.create("Ext.data.Store",{fields:["text","value"],data:me.params.columns.LSTTBL.data}),value:me.params.columns.LSTTBL.data[0].text,editable:true,displayField:"text",valueField:"value",listeners:{select:{fn:function(ths,records,eOpts){me.params.record[ths.name]=ths.getValue()}}}})}return items}});Ext.define("Wasutp.Configurations.Form.Update.Dcs.UpdateOption",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;var nameValue=me.params.record.DESCRIPTION+" ("+me.params.record.NAME+")";items.push({xtype:"displayfield",name:"NAME",fieldLabel:"Имя",margin:margin,height:height,value:nameValue});me.params.record.NAME=nameValue;if(typeof me.params.columns.VALUE!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"VALUE",margin:margin,height:height,fieldLabel:"Значение",value:me.params.record.VALUE,validator:me.validateString256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}return items}});Ext.define("Wasutp.Configurations.Form.Update.Dcs.UpdateDevice",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},qrCode:null,qrCodeId:null,qrCodeData:{},serverIpAddr:null,getQRCodeId:function(){var me=this;if(me.qrCodeId===null){me.qrCodeId=Ext.id()}return me.qrCodeId},getQRCode:function(){var me=this,id=me.getQRCodeId();if(me.qrCode===null){me.qrCode=new QRCode(document.getElementById(id),{width:57,height:57})}return me.qrCode},renderQRCode:function(data){var me=this,qrcode=me.getQRCode();Ext.apply(me.qrCodeData,data);qrcode.makeCode(new Ext.XTemplate("{idProto};{ipAddr};{ipPort};{asduAddr};").apply({idProto:me.qrCodeData.idProto,ipAddr:me.qrCodeData.ipAddr,ipPort:me.qrCodeData.ipPort,asduAddr:me.qrCodeData.asduAddr}))},getQrCodeField:function(){var me=this,id=me.getQRCodeId();return{border:0,cls:"isms-dcs-device-qrcode",tpl:'<div id="{id}" class="isms-dcs-device-qrcode-container"></div>',data:{id:id},listeners:{afterrender:function(ths){Wasutp.Ajax.request({url:"/json/qr-code/get-text",params:{id:me.params.record.ID_NODE},success:function(response){var d=response.data;if(d.length!==0){me.serverIpAddr=d.ipAddr;me.renderQRCode({idProto:d.idProto,ipAddr:d.ipAddr,ipPort:d.ipPort,asduAddr:d.asduAddr})}}})}}}},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;items.push(me.getQrCodeField());if(typeof me.params.columns.ID!=="undefined"){items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:margin,height:height,value:me.params.record.ID,cls:"isms-dcs-device-field-above-qr"})}items.push({xtype:"displayfield",name:"ID_NODE",fieldLabel:"ID узла",margin:margin,height:height,value:me.params.record.ID_NODE,cls:"isms-dcs-device-field-above-qr"});if(typeof me.params.columns.NODE!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NODE",margin:margin,height:height,fieldLabel:"Прибор",value:me.params.record.NODE,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.ADDR!=="undefined"){items.push({disabled:false,xtype:"numberfield",name:"ADDR",margin:margin,height:height,fieldLabel:"Физический адрес",value:me.params.record.ADDR,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumberWith0(ths,newValue,me.params.record.ADDR);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.DEV_NAME!=="undefined"){items.push({xtype:"displayfield",cls:"wasutp-displayfield-auto-height",name:"DEV_NAME",fieldLabel:"Профиль",margin:margin,value:me.params.record.DEV_NAME})}if(typeof me.params.columns.STATE!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.STATE.data){if(typeof me.params.record.GTYPE!="undefined"){if(me.params.columns.STATE.data[b].ID_GTYP!==me.params.record.GTYPE){continue}}checkBoxes.push({disabled:false,xtype:"checkboxfield",name:"STATE",boxLabel:me.params.columns.STATE.data[b].NAME+" ("+me.params.columns.STATE.data[b].MASK+")",mask:me.params.columns.STATE.data[b].MASK,checked:(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?true:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=parseInt(me.params.record[ths.name]);ths.mask=parseInt(ths.mask);if(newValue===true){if(!(me.params.record[ths.name]&ths.mask)){me.params.record[ths.name]+=ths.mask}}else{if(newValue===false){if(me.params.record[ths.name]&ths.mask){me.params.record[ths.name]-=ths.mask}}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Состояние",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true})}if(me.params.record.IFACE_ALIAS!=="IF_ETHERGATE"){if(typeof me.params.columns.IP_ADDR!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"IP_ADDR",margin:margin,height:height,fieldLabel:"IP адрес",value:me.params.record.IP_ADDR,validator:me.validateIpAdressWithEmpty,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){var ipAddr=me.validateIpAdressWithEmpty(newValue)!==true||!newValue?me.serverIpAddr:newValue;me.renderQRCode({ipAddr:ipAddr});me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}}if(typeof me.params.columns.IP_PORT!=="undefined"){items.push({disabled:false,hidden:me.params.record.IFACE_ALIAS==="IF_ETHERGATE",xtype:"numberfield",name:"IP_PORT",margin:margin,height:height,fieldLabel:"IP порт",value:me.params.record.IP_PORT,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumber(ths,newValue,me.params.record.IP_PORT);me.renderQRCode({ipPort:newValue});me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}return items}});Ext.define("Wasutp.Configurations.Form.Update.Dcs.UpdatePort",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.ID!=="undefined"){items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:"0 0 0 0 ",height:height,value:me.params.record.ID})}items.push({xtype:"displayfield",name:"ID_NODE",fieldLabel:"ID узла",margin:"0 0 0 0 ",height:height,value:me.params.record.ID_NODE});if(typeof me.params.columns.NODE!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NODE",margin:"0 0 0 0 ",height:height,fieldLabel:"Узел",value:me.params.record.NODE,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PROTO_NAME!=="undefined"){items.push({xtype:"displayfield",name:"PROTO_NAME",fieldLabel:"Протокол",margin:"5 0 0 0",height:height,value:me.params.record.PROTO_NAME})}if(typeof me.params.columns.MAIN_PORT!=="undefined"){me.params.record.MAIN_PORT=me.params.columns.MAIN_PORT["defaultValue"];items.push({margin:"0 0 5 0",name:"MAIN_PORT",xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:Ext.create("Ext.data.Store",{fields:["name","id"],data:me.params.columns.MAIN_PORT["data"]}),lazyRender:true,fieldLabel:me.params.columns.MAIN_PORT["title"],listClass:"x-combo-list-small",value:me.params.columns.MAIN_PORT["defaultValue"],disabled:me.params.columns.MAIN_PORT["disabled"],editable:false,valueField:"id",displayField:"name",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}}}})}if(typeof me.params.columns.BAUDRATE!=="undefined"){if(me.params.record.BAUDRATE&&me.params.columns.BAUDRATE.data.length){for(var b in me.params.columns.BAUDRATE.data){if(b[0]===me.params.record.BAUDRATE){me.params.record.BAUDRATE=b;break}}}else{me.params.record.BAUDRATE=["","","0"]}items.push({margin:"5 0 5 0",name:"BAUDRATE",xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.BAUDRATE.data,lazyRender:true,fieldLabel:"Скорость",listClass:"x-combo-list-small",value:me.params.record.BAUDRATE,editable:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}}}})}if(typeof me.params.columns.STATE!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.STATE.data){if(typeof me.params.record.GTYPE!="undefined"){if(me.params.columns.STATE.data[b].ID_GTYP!==me.params.record.GTYPE){continue}}checkBoxes.push({disabled:false,xtype:"checkboxfield",name:"STATE",boxLabel:me.params.columns.STATE.data[b].NAME+" ("+me.params.columns.STATE.data[b].MASK+")",mask:me.params.columns.STATE.data[b].MASK,checked:(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?true:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=parseInt(me.params.record[ths.name]);ths.mask=parseInt(ths.mask);if(newValue===true){if(!(me.params.record[ths.name]&ths.mask)){me.params.record[ths.name]+=ths.mask}}else{if(newValue===false){if(me.params.record[ths.name]&ths.mask){me.params.record[ths.name]-=ths.mask}}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Состояние",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true})}if(typeof me.params.columns.IP_ADDR!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"IP_ADDR",margin:margin,height:height,fieldLabel:me.params.record.IFACE_ALIAS==="IF_ETHERGATE"?"TCP адрес":"IP адрес",value:me.params.record.IP_ADDR,validator:me.validateIpAdressWithEmpty,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(me.params.record.IFACE_ALIAS!=="IF_ETHERNET"){if(typeof me.params.columns.PORTNUMBER!=="undefined"){items.push({disabled:false,xtype:"numberfield",name:"PORTNUMBER",margin:margin,height:height,fieldLabel:me.params.record.IFACE_ALIAS==="IF_ETHERGATE"?"TCP порт":"IP порт",value:me.params.record.PORTNUMBER,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumber(ths,newValue,me.params.record.PORTNUMBER);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}}return items}});Ext.define("Wasutp.Configurations.Form.Update.Dcs.UpdateInterface",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:margin,height:height,value:me.params.record.ID});items.push({xtype:"displayfield",name:"ID_NODE",fieldLabel:"ID узла",margin:margin,height:height,value:me.params.record.ID_NODE});if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}items.push({xtype:"displayfield",name:"TYPE",fieldLabel:"Интерфейс",margin:margin,height:height,value:me.params.record.TYPE});return items}});Ext.define("Wasutp.Configurations.Form.Update.Dcs.UpdateParam",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",sourcesText:"Источники блокировки",transferSourcesText:"Источники значений",statics:{BIG_ENDIAN_MASK:8388608,LITTLE_ENDIAN:131072},constructor:function(params){this.superclass.constructor(params)},margin:"5 0 5 0",width:"50%",height:22,tabHeight:430,getIdField:function(){var me=this;return{xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:"5 0 10 0",height:me.height,value:me.params.record.ID}},getNameField:function(){var me=this;return{disabled:false,xtype:"textfield",name:"NAME",margin:"5 0 10 0",height:me.height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,width:me.width,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}}},getCvalif1Field:function(){var me=this;return{xtype:"panel",border:0,layout:"column",margin:"10 0 10 0",items:[{columnWidth:0.286,xtype:"panel",margin:"5 0 0 0",border:0,html:"Точка (Квалификатор):"},{columnWidth:0.715,name:"CVALIF1",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.CVALIF1.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.CVALIF1,editable:false,width:me.width,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};me.params.getFieldData(el,params)}}}}]}},getCvalif2Field:function(){var me=this;return{xtype:"displayfield",name:"CVALIF2",fieldLabel:"Тип",margin:me.margin,height:me.height,value:me.params.record.CVALIF2}},getCvalif3Field:function(){var me=this;return{disabled:true,xtype:"numberfield",name:"CVALIF3",fieldLabel:"Группа",value:me.params.record.CVALIF3,width:me.width,margin:"10 0 10 0",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}},getCvalif4Field:function(){var me=this;return{disabled:true,xtype:"numberfield",name:"CVALIF4",fieldLabel:"Адрес ASDU",value:me.params.record.CVALIF4,width:me.width,margin:me.margin,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}},getUnitField:function(){var me=this;return{xtype:"panel",border:0,layout:"column",margin:"10 0 10 0",items:[{columnWidth:0.286,xtype:"panel",margin:"5 0 0 0",border:0,html:"Единица измерения:"},{columnWidth:0.715,name:"UNIT",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.UNIT.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.UNIT,editable:false,width:me.width,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};me.params.getFieldData(el,params)}}}}]}},getPrecisField:function(){var me=this,precisStore=[[0,0,0],[1,1,1],[2,2,2],[3,3,3],[4,4,4],[5,5,5],[6,6,6],[7,7,7],[8,8,8],[9,9,9],[10,10,10]];return{xtype:"panel",border:0,layout:"column",margin:"10 0 10 0",items:[{columnWidth:0.286,xtype:"panel",margin:"5 0 0 0",border:0,html:"Точность представления:"},{columnWidth:0.715,name:"PRECIS",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:precisStore,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.PRECIS,editable:false,width:me.width,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};me.params.getFieldData(el,params)}}}}]}},getScaleField:function(){var me=this,isTs=me.params.record.GTYPE==3;return{disabled:false,xtype:"numberfield",name:"SCALE",height:me.height,margin:me.margin,fieldLabel:"Коэф.масштаб. (K)",value:me.params.record.SCALE,maxLength:20,enforceMaxLength:20,decimalPrecision:7,decimalSeparator:".",validator:isTs?me.scale19dot7IntValidator:me.scale19dot7validator,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=isTs?parseInt(newValue):newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}},getPriorityField:function(){var me=this;return{xtype:"numberfield",name:"PRIORITY",fieldLabel:me.params.columns.PRIORITY["title"],value:me.params.record.PRIORITY,width:me.width,margin:"10 0 5 0",minValue:0,maxValue:250,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}},getApertureField:function(){var me=this;return{disabled:false,xtype:"textfield",name:"APERTURE",height:me.height,margin:"10 0 0 0",fieldLabel:"Апертура",value:me.params.record.APERTURE,validator:me.validateLength256,width:me.width,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}},getStateField:function(){var me=this,checkBoxes=[],boxLabel;for(var b in me.params.columns.STATE.data){if(typeof me.params.record.GTYPE!="undefined"){if(me.params.columns.STATE.data[b].ID_GTYP!==me.params.record.GTYPE){continue}}boxLabel=me.params.columns.STATE.data[b].NAME;boxLabel+=boxLabel==="Масштабирование"?" (((Max - Min) / K) * Value) + Min":"";boxLabel+=" ("+me.params.columns.STATE.data[b].MASK+")";checkBoxes.push(Ext.create("Ext.form.field.Checkbox",{disabled:false,name:"STATE",boxLabel:boxLabel,mask:me.params.columns.STATE.data[b].MASK,checked:(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?true:false,width:me.width,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=parseInt(me.params.record[ths.name]);ths.mask=parseInt(ths.mask);if(newValue===true){if(ths.mask==me.self.BIG_ENDIAN_MASK){var endian=me.getCheckboxByMask(checkBoxes,me.self.LITTLE_ENDIAN);endian.setValue(false)}else{if(ths.mask==me.self.LITTLE_ENDIAN){var endian=me.getCheckboxByMask(checkBoxes,me.self.BIG_ENDIAN_MASK);endian.setValue(false)}}if(ths.mask==128){Ext.getCmp("state-limit-min").enable();Ext.getCmp("state-limit-max").enable();Ext.getCmp("state-limit-minmnl").enable();Ext.getCmp("state-limit-maxmnl").enable()}if(ths.mask==262144){Ext.getCmp("state-scale-max").enable();Ext.getCmp("state-scale-min").enable()}if(!(me.params.record[ths.name]&ths.mask)){me.params.record[ths.name]+=ths.mask}}else{if(newValue===false){if(ths.mask==128){Ext.getCmp("state-limit-min").disable();Ext.getCmp("state-limit-max").disable();Ext.getCmp("state-limit-minmnl").disable();Ext.getCmp("state-limit-maxmnl").disable()}if(ths.mask==262144){Ext.getCmp("state-scale-max").disable();Ext.getCmp("state-scale-min").disable()}if(me.params.record[ths.name]&ths.mask){me.params.record[ths.name]-=ths.mask}}}}}}}));if(me.params.columns.STATE.data[b].MASK==128){var disabled=(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?false:true;var limits=[];limits.push({xtype:"container",anchor:"100%",layout:"column",disabled:false,items:[{xtype:"container",columnWidth:0.4,layout:"anchor",disabled:false,items:[{labelWidth:100,disabled:disabled,id:"state-limit-min",layout:"anchor",anchor:"100%",xtype:"textfield",name:"LIMIT_MIN",fieldLabel:"Нижний предел",value:me.params.record.LIMIT_MIN,validator:me.validateLength256,margin:"5 10 0 20",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}]},{xtype:"container",columnWidth:0.6,layout:"anchor",items:[{labelWidth:200,disabled:disabled,id:"state-limit-minmnl",layout:"anchor",anchor:"100%",xtype:"textfield",name:"LIMIT_MINMNL",fieldLabel:"При выходе за нижний предел",value:me.params.record.LIMIT_MINMNL,validator:me.validateLength256,margin:"5 0 0 10",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}]}]});limits.push({xtype:"container",anchor:"100%",layout:"column",disabled:false,items:[{xtype:"container",columnWidth:0.4,layout:"anchor",disabled:false,items:[{labelWidth:100,disabled:disabled,id:"state-limit-max",layout:"anchor",anchor:"100%",xtype:"textfield",name:"LIMIT_MAX",fieldLabel:"Верхний предел",value:me.params.record.LIMIT_MAX,validator:me.validateLength256,margin:"5 10 0 20",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}]},{xtype:"container",columnWidth:0.6,layout:"anchor",items:[{labelWidth:200,disabled:disabled,id:"state-limit-maxmnl",layout:"anchor",anchor:"100%",xtype:"textfield",name:"LIMIT_MAXMNL",fieldLabel:"При выходе за верхний предел",value:me.params.record.LIMIT_MAXMNL,validator:me.validateLength256,margin:"5 0 0 10",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}}]}]});checkBoxes.push({id:"state-limit-fieldset",xtype:"fieldset",flex:1,margin:me.margin,defaultType:"radio",layout:"anchor",items:limits,collapsible:true,collapsed:me.params.record.STATE&128?false:true})}if(me.params.columns.STATE.data[b].MASK==262144){var disabled=(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?false:true;var scales=[];if(typeof me.params.columns.SCALE_MIN!=="undefined"){scales.push({id:"state-scale-min",disabled:disabled,xtype:"textfield",name:"SCALE_MIN",margin:"5 0 5 20",fieldLabel:"Минимальная величина (Min)",value:me.params.record.SCALE_MIN,validator:me.validateLength256,labelWidth:200,width:300,maxWidth:300,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}})}if(typeof me.params.columns.SCALE_MAX!=="undefined"){scales.push({id:"state-scale-max",disabled:disabled,xtype:"textfield",name:"SCALE_MAX",margin:"5 0 5 20",fieldLabel:"Максимальная&nbsp;величина&nbsp;(Max)",labelWidth:200,width:300,maxWidth:300,value:me.params.record.SCALE_MAX,validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save(this)}}}})}checkBoxes.push({xtype:"fieldset",id:"state-scale-fieldset",flex:1,margin:me.margin,defaultType:"radio",layout:"anchor",items:scales,collapsible:true,collapsed:me.params.record.STATE&262144?false:true})}}return{xtype:"fieldset",flex:1,margin:me.margin,title:"Состояние",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true}},getItems:function(){var me=this,items=[];me.removeChannelStack=[];if(typeof me.params.columns.ID!=="undefined"){items.push(me.getIdField())}if(typeof me.params.columns.NAME!=="undefined"){items.push(me.getNameField())}if(typeof me.params.columns.CVALIF1!=="undefined"){items.push(me.getCvalif1Field())}if(typeof me.params.columns.CVALIF2!=="undefined"){items.push(me.getCvalif2Field())}if(typeof me.params.columns.CVALIF3!=="undefined"){items.push(me.getCvalif3Field())}if(typeof me.params.columns.CVALIF3!=="undefined"){items.push(me.getCvalif4Field())}if(typeof me.params.columns.UNIT!=="undefined"){items.push(me.getUnitField())}if(typeof me.params.columns.UNIT!=="undefined"){items.push(me.getPrecisField())}if(typeof me.params.columns.SCALE!=="undefined"){items.push(me.getScaleField())}if(me.params.sources&&me.params.sources.length&&typeof me.params.columns.PRIORITY!=="undefined"){items.push(me.getPriorityField())}if(me.params.sources&&me.params.sources.length&&me.params.record&&parseInt(me.params.record.GTYPE)===Wasutp.Params.Param.TIGtype){if(me.params.columns.APERTURE){items.push(me.getApertureField())}}if(typeof me.params.columns.STATE!=="undefined"){items.push(me.getStateField())}return items},getSourcesTabField:function(){var me=this,title=me.params.rawData.isRoute===0?me.sourcesText:me.transferSourcesText;return{title:title,items:me.getSourcesTab(),border:0,autoScroll:true}},getArchiveTabField:function(){var me=this;return{title:"Архивы",items:me.getArchiveTab()}},getForm:function(){var me=this,form={xtype:"form",bodyPadding:10,padding:5,margin:5,fieldDefaults:{labelAlign:"left",anchor:"100%",labelWidth:175,border:0},border:0,width:660,items:me.getItems()};return form},getTabItems:function(){var me=this,tabItems=[],aclManager=appHelper.getAclManager();tabItems.push({title:"Основные свойства",autoScroll:true,items:me.getForm(),border:0});if(me.params.rawData.doShowSources===true){tabItems.push(me.getSourcesTabField())}if(aclManager.amIAllowed("archives","read")){tabItems.push(me.getArchiveTabField())}return tabItems},getPanel:function(){var me=this,tabs;tabs=Ext.widget("tabpanel",{height:me.tabHeight,border:0,items:me.getTabItems(),buttons:["->",{text:"ОК",margin:"5 5 5 5",handler:function(){me.save(this)}},{text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});return tabs},changeActiveChannelFn:Ext.emptyFn,removeChannelStack:[],removeChannelFn:function(){var me=this,saveFn=me.getArchiveTab().up("window").save;if(me.removeChannelStack.length){Wasutp.Ajax.request({url:"/json/configuration/remove-param-source",params:{idChannels:JSON.stringify(me.removeChannelStack)},success:function(response){saveFn.call(me)}})}else{saveFn.call(me)}},getSourcesTab:function(){var me=this;var tree=Ext.create("Ext.tree.Panel",{rootVisible:true,root:{text:"Источники",expanded:true,children:me.params.sources},listeners:{checkchange:function(node,checked,e){if(!checked){node.set("checked",true);return}var idChannel=node.raw.idChannel,idProfileParam=node.raw.idProfileParam,idActiveChannel=null;tree.getRootNode().cascade(function(n){if(n.data.leaf===true){if(n.data.checked===true){idActiveChannel=n.raw.idChannel}n.set("checked",node===n)}});if(idActiveChannel){me.changeActiveChannelFn=function(callBack,callBack2){Wasutp.Ajax.request({url:"/json/configuration/change-active-channel",params:{idChannel:idChannel,idProfileParam:idProfileParam},success:function(response){if(response.data.result===true&&typeof callBack==="function"){callBack.call(me,callBack2)}}})}}},itemcontextmenu:{fn:function(ths,record,item,index,e,eOpts){if(record.data.leaf===true){var contextMenu=Ext.create("Wasutp.menu.Menu",{items:[{text:"Удалить источник",iconCls:"wasutp-delete",disabled:record.data.checked===true&&(me.params.rawData.isRoute===1||me.params.rawData.isRoute===2),handler:function(ths){record.parentNode.parentNode.parentNode.removeChild(record.parentNode.parentNode);me.removeChannelStack.push(record.raw.idChannel);var sourcesCount=0;tree.getRootNode().cascade(function(n){if(n.data.leaf===true){sourcesCount++}});if(sourcesCount>0&&me.params.rawData.isRoute===0&&record.data.checked===true){Ext.MessageBox.alert("Выберите активный канал","В списке каналов не выбрано ни одного активного источника. Рекомендуется выбрать и установить активный канал",function(){})}}}]});contextMenu.showAt(e.getXY())}}}}});return tree},paramArchivePanel:null,getArchiveTab:function(){var me=this;if(me.paramArchivePanel===null){me.paramArchivePanel=Ext.create("Ext.panel.Panel",{margin:10,listeners:{afterrender:function(){me.addParamArchives()}},border:0,items:[]})}return me.paramArchivePanel},addParamArchives:function(){var me=this;Wasutp.Ajax.request({url:"/json/archive/get-dcs-param-archives",params:{id:me.params.record.ID},success:function(response){if(response.data&&response.data.length){for(var i in response.data){me.getArchiveTab().add({xtype:"checkboxfield",idGinfo:response.data[i].ID_GINFO,boxLabel:response.data[i].NAME,name:response.data[i].ALIAS,checked:response.data[i].CHECKED==="1"?true:false})}}}})},save:function(ths){var me=this,aclManager=appHelper.getAclManager();if(aclManager.amIAllowed("archives","adjust")&&me.updateArchiveStatuses()===true){if(me.changeActiveChannelFn!==Ext.emptyFn){me.changeActiveChannelFn.call(me,me.removeChannelFn)}else{me.removeChannelFn.call(me)}}else{aclManager.aclFailureMessage()}},updateArchiveStatuses:function(){var me=this,archiveTab=me.getArchiveTab(),fields=archiveTab.items.items,params=[];if(fields.length){for(var i in fields){params.push({checked:fields[i].getValue(),idGinfo:fields[i].idGinfo,id:me.params.record.ID})}Wasutp.Ajax.request({url:"/json/archive/change-dcs-param-archives",params:{params:JSON.stringify(params)},success:function(response){}})}return true},getCheckboxByMask:function(checkBoxes,mask){if(checkBoxes.length){for(var c in checkBoxes){if(checkBoxes[c]["mask"]==mask){return checkBoxes[c]}}}return null}});Ext.define("Wasutp.Configurations.Form.Update.Profile.UpdateDevice",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0";if(typeof me.params.columns.ID!=="undefined"){items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",value:me.params.record.ID})}if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PROTOCOLS!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.PROTOCOLS.data){checkBoxes.push({xtype:"checkboxfield",name:"PROTOCOLS",boxLabel:me.params.columns.PROTOCOLS.data[b].NAME,checkboxValue:me.params.columns.PROTOCOLS.data[b].ID,checked:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,disabled:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){ths.checkboxValue=parseInt(ths.checkboxValue);if(newValue===true){var isset=false;for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]==ths.checkboxValue){isset=true}}if(isset!==true){me.params.record[ths.name].push(ths.checkboxValue)}}else{if(newValue===false){var newArray=[];for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]!=ths.checkboxValue){newArray.push(me.params.record[ths.name][i])}}me.params.record[ths.name]=newArray}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Протоколы",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true})}return items}});Ext.define("Wasutp.Configurations.Form.Update.Profile.UpdateTransferDevice",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.ID!=="undefined"){items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:margin,height:height,value:me.params.record.ID})}if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PROTOCOLS!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.PROTOCOLS.data){var disabled=false;if(typeof me.params.columns.PROTOCOLS.disabled!="undefined"){disabled=me.params.columns.PROTOCOLS.disabled}checkBoxes.push({xtype:"radiofield",name:"PROTOCOLS",boxLabel:me.params.columns.PROTOCOLS.data[b].NAME,checkboxValue:me.params.columns.PROTOCOLS.data[b].ID,checked:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,disabled:disabled,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){ths.checkboxValue=parseInt(ths.checkboxValue);if(newValue===true){var isset=false;for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]==ths.checkboxValue){isset=true}}if(isset!==true){me.params.record[ths.name].push(ths.checkboxValue)}}else{if(newValue===false){var newArray=[];for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]!=ths.checkboxValue){newArray.push(me.params.record[ths.name][i])}}me.params.record[ths.name]=newArray}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Протоколы",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true})}return items}});Ext.define("Wasutp.Configurations.Form.Update.Profile.UpdateNode",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},margin:"5 0 5 0",height:22,getIdItem:function(){var me=this;return{xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:me.margin,height:me.height,value:me.params.record.ID}},getIdDevItem:function(){var me=this;return{xtype:"displayfield",name:"ID_DEV",fieldLabel:"Устройство",margin:me.margin,cls:"wasutp-displayfield-auto-height",value:me.params.record.ID_DEV}},getProtoLevelNameItem:function(){var me=this;return{xtype:"displayfield",name:"PROTO_LEVEL_NAME",fieldLabel:"Узел протокола",margin:me.margin,height:me.height,value:me.params.record.PROTO_LEVEL_NAME}},getNameItem:function(){var me=this;return{disabled:false,xtype:"textfield",name:"NAME",margin:me.margin,height:me.height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}}},getCvalifItem:function(){var me=this;return{disabled:false,xtype:"numberfield",name:"CVALIF",margin:me.margin,height:me.height,fieldLabel:"Квалификатор",value:me.params.record.CVALIF,minValue:0,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumberWith0(ths,newValue,me.params.record.CVALIF);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}},getTypeItem:function(){var me=this;return{disabled:false,xtype:"combobox",name:"TYPE",margin:me.margin,height:me.height,fieldLabel:"Тип",value:me.params.record.TYPE,typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.TYPE.data,lazyRender:true,listClass:"x-combo-list-small",editable:false}},getItems:function(){var me=this,items=[];if(typeof me.params.columns.ID!=="undefined"){items.push(me.getIdItem())}items.push(me.getIdDevItem());items.push(me.getProtoLevelNameItem());if(typeof me.params.columns.NAME!=="undefined"){items.push(me.getNameItem())}if(typeof me.params.columns.CVALIF!=="undefined"){items.push(me.getCvalifItem())}if(typeof me.params.columns.TYPE!=="undefined"){items.push(me.getTypeItem())}return items}});Ext.define("Wasutp.Configurations.Form.Update.Interfaces.UpdateInterfaces",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",width="50%";items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",value:me.params.record.ID,hidden:true});items.push({disabled:false,xtype:"textfield",name:"DOMAIN",margin:margin,fieldLabel:"Домен",value:me.params.record.DOMAIN,width:width,validator:me.validateString256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}});items.push({disabled:false,xtype:"textfield",name:"IP",margin:margin,fieldLabel:"IP-адрес",value:me.params.record.IP,width:width,validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save()}}}});items.push({disabled:false,xtype:"textfield",name:"MASK",margin:margin,fieldLabel:"Маска сети",value:me.params.record.MASK,validator:me.validateLength256,width:width,validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){me.save()}}}});items.push({xtype:"panel",margin:"7 0 3 0",height:22,border:0,html:"Необходимо перезагрузить модули iSMS для принятия изменений"});return items},getPanel:function(){var me=this;var formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",labelWidth:90,anchor:"100%",labelWidth:175},items:me.getItems(),buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){me.save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});return formPanel},save:function(){var me=this;Wasutp.Ajax.request({url:"/json/configuration/update-interface",params:{data:JSON.stringify(me.params.record)},method:"POST",success:function(response){if(typeof response.successful!="undefined"&&response.successful){var win=Ext.getCmp("ParamSettings");if(win){win.close()}}else{return false}if(response.data.result==true){var row=me.params.interfaceObject.contextRow;row.set("IP",me.params.record.IP);row.set("MASK",me.params.record.MASK);row.set("DOMAIN",me.params.record.DOMAIN)}}})}});Ext.define("Wasutp.Configurations.Form.Update.Profile.UpdateProto",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.ID!=="undefined"){items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:margin,height:height,value:me.params.record.ID,listeners:{afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:true,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Протокол",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}return items}});Ext.define("Wasutp.Configurations.Form.Update.Profile.UpdateFunctionDevice",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0";if(typeof me.params.columns.ID!=="undefined"){items.push({xtype:"displayfield",name:"ID",fieldLabel:"ID",value:me.params.record.ID})}if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PROTOCOLS!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.PROTOCOLS.data){checkBoxes.push({xtype:"checkboxfield",name:"PROTOCOLS",boxLabel:me.params.columns.PROTOCOLS.data[b].NAME,checkboxValue:me.params.columns.PROTOCOLS.data[b].ID,checked:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,disabled:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){ths.checkboxValue=parseInt(ths.checkboxValue);if(newValue===true){var isset=false;for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]==ths.checkboxValue){isset=true}}if(isset!==true){me.params.record[ths.name].push(ths.checkboxValue)}}else{if(newValue===false){var newArray=[];for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]!=ths.checkboxValue){newArray.push(me.params.record[ths.name][i])}}me.params.record[ths.name]=newArray}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Протоколы",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true})}return items}});Ext.define("Wasutp.Configurations.Form.Update.Profile.UpdateParam",{extend:"Wasutp.Configurations.Form.Update.UpdateForm",constructor:function(params){this.superclass.constructor(params)},margin:"5 0 5 0",height:22,leftColumnWidth:0.2,rightColumnWidth:0.8,labelWidth:128,getIdItem:function(){var me=this;return{xtype:"displayfield",name:"ID",fieldLabel:"ID",margin:me.margin,height:me.height,value:me.params.record.ID,labelWidth:me.labelWidth}},getNameItem:function(){var me=this;return{disabled:false,xtype:"textfield",name:"NAME",margin:me.margin,height:me.height,fieldLabel:"Имя",value:me.params.record.NAME,labelWidth:me.labelWidth,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}}},getCvalifItem:function(){var me=this;return{disabled:false,xtype:"numberfield",name:"CVALIF",margin:me.margin,height:me.height,fieldLabel:"Квалификатор",value:me.params.record.CVALIF,minValue:0,labelWidth:me.labelWidth,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumberWith0(ths,newValue,me.params.record.CVALIF);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}},getTypeItem:function(){var me=this;return{xtype:"panel",border:0,layout:"column",items:[{columnWidth:me.leftColumnWidth,xtype:"panel",margin:"5 0 0 0",height:me.height,border:0,html:"Тип:"},{margin:"0 -1 0 0",id:"configuration-profile-update-param-TYPE",columnWidth:me.rightColumnWidth,name:"TYPE",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.TYPE.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.TYPE,editable:false,dependence:"OPT",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var el=Ext.getCmp("configuration-profile-update-param-OPT");var params={field:ths.dependence,dependId:id};this.up("window").getFieldData(el,params)}}}}]}},getOptItem:function(){var me=this;return{xtype:"panel",border:0,layout:"column",items:[{columnWidth:me.leftColumnWidth,xtype:"panel",margin:me.margin,border:0,html:"Опция:"},{margin:"0 -1 0 0",columnWidth:me.rightColumnWidth,id:"configuration-profile-update-param-OPT",name:"OPT",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.OPT.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.OPT,editable:false,listeners:{afterrender:function(ths,e){var el=Ext.getCmp("configuration-profile-update-param-TYPE"),data=el.initialConfig.store,id,params;for(var d in data){if(data[d][0]===el.value){id=data[d][2];break}}params={field:ths.name,dependId:id};this.up("window").getFieldData(ths,params)},change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};me.params.getFieldData(el,params)}}}}]}},getScaleItem:function(){var me=this;return{disabled:false,xtype:"numberfield",name:"SCALE",height:me.height,margin:me.margin,fieldLabel:"Коэф.масштаб.",value:me.params.record.SCALE,maxLength:20,enforceMaxLength:20,decimalPrecision:7,decimalSeparator:".",validator:me.scale19dot7validator,labelWidth:me.labelWidth,width:me.width,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=Ext.util.Format.number(newValue,"0.0000000")}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}},getItems:function(){var me=this,items=[];if(typeof me.params.columns.ID!=="undefined"){items.push(me.getIdItem())}if(typeof me.params.columns.NAME!=="undefined"){items.push(me.getNameItem())}if(typeof me.params.columns.CVALIF!=="undefined"){items.push(me.getCvalifItem())}if(typeof me.params.columns.TYPE!=="undefined"){items.push(me.getTypeItem())}if(typeof me.params.columns.OPT!=="undefined"){items.push(me.getOptItem())}if(typeof me.params.columns.SCALE!=="undefined"){items.push(me.getScaleItem())}return items}});Ext.define("Wasutp.Configurations.Form.Create.Dcs.CreateOption",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22,valueFieldId="configuration-dcs-create-option-VALUE";if(me.params.columns.NAME.data.length===0){return items}if(typeof me.params.columns.NAME!=="undefined"){items.push({xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.145,xtype:"panel",margin:margin,height:height,border:0,html:"Имя:"},{columnWidth:0.855,name:"NAME",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.NAME.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.NAME,editable:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;var data=ths.initialConfig.store,defValue="",valueField;for(var d in data){if(data[d][0]===newValue){defValue=data[d][3];break}}if(defValue){valueField=Ext.getCmp(valueFieldId);valueField.setValue(defValue)}}}}}]})}if(typeof me.params.columns.VALUE!=="undefined"){items.push({id:valueFieldId,disabled:false,xtype:"textfield",name:"VALUE",margin:margin,height:height,fieldLabel:"Значение",value:me.params.record.VALUE,validator:me.validateString256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Dcs.CreateIbm",{extend:"Wasutp.Configurations.Form.Create.CreateForm",getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PCNUM!=="undefined"){items.push({disabled:false,xtype:"numberfield",name:"PCNUM",margin:margin,height:height,fieldLabel:"Номер машины",value:me.params.record.PCNUM,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumber(ths,newValue,me.params.record.PCNUM);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.LSTTBL!=="undefined"){me.params.record.LSTTBL=me.params.columns.LSTTBL.data[0].value;items.push({disabled:false,xtype:"combobox",name:"LSTTBL",margin:margin,height:height,fieldLabel:"Сегмент сбора",store:Ext.create("Ext.data.Store",{fields:["text","value"],data:me.params.columns.LSTTBL.data}),value:me.params.columns.LSTTBL.data[0].text,editable:true,displayField:"text",valueField:"value",listeners:{select:{fn:function(ths,records,eOpts){me.params.record[ths.name]=ths.getValue()}}}})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Dcs.CreateParam",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.CVALIF1!=="undefined"){items.push({xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.16,xtype:"panel",margin:margin,height:height,border:0,html:"Адрес точки:"},{columnWidth:0.85,name:"CVALIF1",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.CVALIF1.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.CVALIF1,editable:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};this.up("window").getFieldData(el,params)}}}}]})}if(typeof me.params.columns.CVALIF2!=="undefined"){items.push({margin:margin,xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.17,xtype:"panel",margin:margin,border:0,html:"Тип:"},{columnWidth:0.83,name:"CVALIF2",disabled:true,margin:margin,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.CVALIF2.data,lazyRender:true,fieldLabel:"Тип",listClass:"x-combo-list-small",value:me.params.record.CVALIF2,editable:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};this.up("window").getFieldData(el,params)}}}}]})}if(typeof me.params.columns.CVALIF3!=="undefined"){items.push({disabled:true,xtype:"numberfield",name:"CVALIF3",margin:margin,fieldLabel:"Группа",value:me.params.record.CVALIF3,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.CVALIF3!=="undefined"){items.push({disabled:true,xtype:"numberfield",name:"CVALIF4",margin:margin,fieldLabel:"Адрес ASDU",value:me.params.record.CVALIF4,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.UNIT!=="undefined"){items.push({margin:margin,xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.17,xtype:"panel",margin:margin,border:0,html:"Ед.изм:"},{columnWidth:0.83,name:"UNIT",disabled:false,margin:margin,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.UNIT.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.UNIT,editable:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};this.up("window").getFieldData(el,params)}}}}]})}if(typeof me.params.columns.SCALE!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"SCALE",margin:margin,fieldLabel:"Коэф.масштаб.",value:me.params.record.SCALE,validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.STATE!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.STATE.data){if(typeof me.params.record.GTYPE!="undefined"){if(me.params.columns.STATE.data[b].ID_GTYP!==me.params.record.GTYPE){continue}}checkBoxes.push({disabled:false,xtype:"checkboxfield",name:"STATE",boxLabel:me.params.columns.STATE.data[b].NAME+" ("+me.params.columns.STATE.data[b].MASK+")",mask:me.params.columns.STATE.data[b].MASK,checked:(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?true:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=parseInt(me.params.record[ths.name]);ths.mask=parseInt(ths.mask);if(newValue===true){if(ths.mask==128){Ext.getCmp("state-limit-min").enable();Ext.getCmp("state-limit-max").enable();Ext.getCmp("state-limit-minmnl").enable();Ext.getCmp("state-limit-maxmnl").enable()}if(ths.mask==262144){Ext.getCmp("state-scale-max").enable();Ext.getCmp("state-scale-min").enable()}if(!(me.params.record[ths.name]&ths.mask)){me.params.record[ths.name]+=ths.mask}}else{if(newValue===false){if(ths.mask==128){Ext.getCmp("state-limit-min").disable();Ext.getCmp("state-limit-max").disable();Ext.getCmp("state-limit-minmnl").disable();Ext.getCmp("state-limit-maxmnl").disable()}if(ths.mask==262144){Ext.getCmp("state-scale-max").disable();Ext.getCmp("state-scale-min").disable()}if(me.params.record[ths.name]&ths.mask){me.params.record[ths.name]-=ths.mask}}}}}}});if(me.params.columns.STATE.data[b].MASK==128){var disabled=(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?false:true;var limits=[];limits.push({xtype:"container",anchor:"100%",layout:"column",disabled:false,items:[{xtype:"container",columnWidth:0.5,layout:"anchor",disabled:false,items:[{disabled:disabled,id:"state-limit-min",layout:"anchor",anchor:"100%",xtype:"textfield",name:"LIMIT_MIN",fieldLabel:"Нижн.пред.д/контроля",value:me.params.record.LIMIT_MIN,validator:me.validateLength256,margin:"5 10 0 20",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}]},{xtype:"container",columnWidth:0.5,layout:"anchor",items:[{disabled:disabled,id:"state-limit-minmnl",layout:"anchor",anchor:"100%",xtype:"textfield",name:"LIMIT_MINMNL",fieldLabel:"Установ.знач.вых.нижн.пред.",value:me.params.record.LIMIT_MIN,validator:me.validateLength256,margin:"5 0 0 10",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}]}]});limits.push({xtype:"container",anchor:"100%",layout:"column",disabled:false,items:[{xtype:"container",columnWidth:0.5,layout:"anchor",disabled:false,items:[{disabled:disabled,id:"state-limit-max",layout:"anchor",anchor:"100%",xtype:"textfield",name:"LIMIT_MAX",fieldLabel:"Верх.пред.д/контроля",value:me.params.record.LIMIT_MAX,validator:me.validateLength256,margin:"5 10 0 20",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}]},{xtype:"container",columnWidth:0.5,layout:"anchor",items:[{disabled:disabled,id:"state-limit-maxmnl",layout:"anchor",anchor:"100%",xtype:"textfield",name:"LIMIT_MAXMNL",fieldLabel:"Установ.знач.вых.верх.предел",value:me.params.record.LIMIT_MAXMNL,validator:me.validateLength256,margin:"5 0 0 10",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}]}]});checkBoxes.push({id:"state-limit-fieldset",xtype:"fieldset",flex:1,margin:margin,defaultType:"radio",layout:"anchor",items:limits,collapsible:true,collapsed:me.params.record.STATE&128?false:true})}if(me.params.columns.STATE.data[b].MASK==262144){var disabled=(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?false:true;var scales=[];if(typeof me.params.columns.SCALE_MAX!=="undefined"){scales.push({id:"state-scale-max",disabled:disabled,xtype:"textfield",name:"SCALE_MAX",margin:"5 0 5 20",fieldLabel:"Макс.шкал.масштаб.",value:me.params.record.SCALE_MAX,validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.SCALE_MIN!=="undefined"){scales.push({id:"state-scale-min",disabled:disabled,xtype:"textfield",name:"SCALE_MIN",margin:"5 0 5 20",fieldLabel:"Мин.масштаб.",value:me.params.record.SCALE_MIN,validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}checkBoxes.push({xtype:"fieldset",id:"state-scale-fieldset",flex:1,margin:margin,defaultType:"radio",layout:"anchor",items:scales,collapsible:true,collapsed:me.params.record.STATE&262144?false:true})}}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Свойства",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Dcs.CreateInterface",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",labelWidth=155;if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,labelWidth:labelWidth,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.TYPE!=="undefined"){items.push({margin:margin,xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.239,xtype:"panel",margin:margin,border:0,html:"Интерфейс:"},{columnWidth:0.761,name:"TYPE",margin:margin,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.TYPE.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.TYPE,editable:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};this.up("window").getFieldData(el,params)}}}}]})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Dcs.CreateDevice",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.NODE!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NODE",margin:margin,height:height,fieldLabel:"Прибор",value:me.params.record.NODE,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.ADDR!=="undefined"){items.push({disabled:false,xtype:"numberfield",name:"ADDR",margin:margin,height:height,fieldLabel:"Физический адрес",value:me.params.record.ADDR,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumber(ths,newValue,me.params.record.ADDR);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.DEV_NAME!=="undefined"){items.push({xtype:"displayfield",cls:"wasutp-displayfield-auto-height",name:"DEV_NAME",fieldLabel:"Профиль",margin:margin,value:me.params.record.DEV_NAME})}if(typeof me.params.columns.STATE!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.STATE.data){if(typeof me.params.record.GTYPE!="undefined"){if(me.params.columns.STATE.data[b].ID_GTYP!==me.params.record.GTYPE){continue}}checkBoxes.push({disabled:false,xtype:"checkboxfield",name:"STATE",boxLabel:me.params.columns.STATE.data[b].NAME+" ("+me.params.columns.STATE.data[b].MASK+")",mask:me.params.columns.STATE.data[b].MASK,checked:(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?true:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=parseInt(me.params.record[ths.name]);ths.mask=parseInt(ths.mask);if(newValue===true){if(!(me.params.record[ths.name]&ths.mask)){me.params.record[ths.name]+=ths.mask}}else{if(newValue===false){if(me.params.record[ths.name]&ths.mask){me.params.record[ths.name]-=ths.mask}}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Состояние",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true})}if(typeof me.params.columns.IP_ADDR!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"IP_ADDR",margin:margin,height:height,fieldLabel:"IP адрес",value:me.params.record.IP_ADDR,validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}if(typeof me.params.columns.IP_PORT!=="undefined"){items.push({disabled:false,xtype:"numberfield",name:"IP_PORT",margin:margin,height:height,fieldLabel:"IP порт",value:me.params.record.IP_PORT,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateParam",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},isCvalifToChanged:false,nameDisplay:"",cvalifDisplay:1,cvalifDisplayTo:1,displayCvalif:true,serialDisplay:"",confirmNameDisplay:function(values){var me=this,paramDisplay=me.formPanel.getForm().findField("PARAM_DISPLAY"),cvalif=me.formPanel.getForm().findField("CVALIF"),cvalifTo=me.formPanel.getForm().findField("CVALIF_TO"),displayFrom,displayTo,serialDisplayTo;if(typeof values.name!="undefined"){me.nameDisplay=values.name}if(typeof values.displayCvalif!="undefined"){me.displayCvalif=values.displayCvalif}if(typeof values.cvalif!="undefined"){me.cvalifDisplay=values.cvalif}if(typeof values.cvalifTo!="undefined"){me.cvalifDisplayTo=values.cvalifTo}if(typeof values.serial!="undefined"){me.serialDisplay=values.serial}if(paramDisplay){displayFrom=me.nameDisplay;if(me.displayCvalif){displayFrom+=cvalif.getValue()!==null?" "+cvalif.getValue():" 0"}displayFrom+=me.serialDisplay?" "+me.serialDisplay:"";if(me.serialDisplay!==null&&me.serialDisplay!==""){serialDisplayTo=Math.abs(parseInt(cvalif.getValue())-parseInt(cvalifTo.getValue()))+me.serialDisplay}else{serialDisplayTo=""}displayTo=me.nameDisplay;if(me.displayCvalif){displayTo+=cvalifTo.getValue()!==null?" "+cvalifTo.getValue():" 0"}displayTo+=serialDisplayTo?" "+serialDisplayTo:"";paramDisplay.setValue('с "'+displayFrom+'" - по "'+displayTo+'"')}},getParamDisplayItem:function(){var me=this;return{xtype:"displayfield",cls:"wasutp-displayfield-auto-height",name:"PARAM_DISPLAY",fieldLabel:"Пример:",value:'с "Имя [Квалификатор] [Инкремент]" - по "Имя [Квалификатор] [Инкремент]"',margin:"0 0 5 0"}},getNameItem:function(){var me=this;return{xtype:"container",anchor:"100%",layout:"column",items:[{xtype:"container",columnWidth:0.8,layout:"anchor",items:[{xtype:"textfield",name:"NAME",fieldLabel:"Имя",validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;me.confirmNameDisplay({name:newValue})}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){field.setValue(me.getDefaultName());Ext.defer(function(){field.focus(true)},1)}}}]},{xtype:"container",columnWidth:0.05,layout:"anchor",margin:"0 10",items:[{xtype:"checkbox",name:"SERIAL_NUMBER_SWITCHER",listeners:{change:function(ths,newValue,oldValue){var serialNumberFiled=me.formPanel.getForm().findField("SERIAL_NUMBER");if(serialNumberFiled){if(newValue===true){me.params.record.SERIAL_NUMBER=serialNumberFiled.getValue();serialNumberFiled.enable();me.confirmNameDisplay({serial:serialNumberFiled.getValue()})}else{me.params.record.SERIAL_NUMBER=null;serialNumberFiled.disable();me.confirmNameDisplay({serial:""})}}}}}]},{xtype:"container",columnWidth:0.15,layout:"anchor",items:[{xtype:"numberfield",name:"SERIAL_NUMBER",disabled:true,value:1,listeners:{change:function(ths,newValue,oldValue){me.params.record.SERIAL_NUMBER=newValue;me.confirmNameDisplay({serial:newValue})}}}]}]}},getCvalifItem:function(){var me=this;me.params.record.CVALIF=me.params.record.CVALIF?me.params.record.CVALIF:1;me.params.record.CVALIF_TO=me.params.record.CVALIF?me.params.record.CVALIF:1;return{xtype:"container",anchor:"100%",layout:"column",margin:0,items:[{xtype:"container",columnWidth:0.48,layout:"anchor",margin:0,items:[{disabled:false,layout:"anchor",anchor:"100%",xtype:"numberfield",name:"CVALIF",fieldLabel:"Квалификатор",value:me.params.record.CVALIF,minValue:0,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumberWith0(ths,newValue,me.params.record.CVALIF_FROM);if(!me.isCvalifToChanged){if(me.formPanel){var to=me.formPanel.getForm().findField("CVALIF_TO");if(to){to.setValue(newValue)}}}me.params.record[ths.name]=newValue;me.confirmNameDisplay({cvalif:newValue})}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}]},{xtype:"displayfield",name:"separator_CVALIF",value:"&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;",margin:0},{xtype:"container",columnWidth:0.313,layout:"anchor",margin:0,items:[{disabled:false,layout:"anchor",anchor:"100%",xtype:"numberfield",name:"CVALIF_TO",value:me.params.record.CVALIF_TO,minValue:0,margin:0,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumberWith0(ths,newValue,me.params.record.CVALIF_FROM);me.params.record[ths.name]=newValue;me.confirmNameDisplay({cvalifTo:newValue})}},spin:function(){me.isCvalifToChanged=true},focus:function(field,event){me.isCvalifToChanged=true},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}]},{xtype:"container",columnWidth:0.05,layout:"anchor",margin:"0 10",items:[{xtype:"checkbox",name:"CVALIF_SWITCHER",checked:true,listeners:{change:function(ths,newValue,oldValue){var cvalif=me.formPanel.getForm().findField("CVALIF");cvalifTo=me.formPanel.getForm().findField("CVALIF_TO");me.params.record.ADD_CVALIF=newValue;me.confirmNameDisplay({displayCvalif:newValue});if(newValue===true){me.confirmNameDisplay({cvalif:cvalif.getValue()});me.confirmNameDisplay({cvalifTo:cvalifTo.getValue()})}else{me.confirmNameDisplay({cvalif:""});me.confirmNameDisplay({cvalifTo:""})}}}}]}]}},getTypeItem:function(){var me=this;return{xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.142,xtype:"panel",margin:"5 0 5 0",border:0,html:"Тип:"},{id:"configuration-profile-create-param-TYPE",columnWidth:0.858,name:"TYPE",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.TYPE.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.TYPE,editable:false,dependence:"OPT",listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el=Ext.getCmp("configuration-profile-create-param-OPT");var params={field:ths.dependence,dependId:id};this.up("window").getFieldData(el,params)}}}}]}},getOptItem:function(){var me=this;return{xtype:"panel",border:0,layout:"column",margin:"3 0 5 0",items:[{margin:"5 0 0 0",columnWidth:0.142,xtype:"panel",border:0,html:"Опция:"},{margin:"0 0 0 0",columnWidth:0.858,id:"configuration-profile-create-param-OPT",name:"OPT",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.OPT.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.OPT,editable:false,listeners:{afterrender:function(ths,e){var el=Ext.getCmp("configuration-profile-create-param-TYPE"),data=el.initialConfig.store,id,params;for(var d in data){if(data[d][0]===el.value){id=data[d][2];break}}params={field:ths.name,dependId:id};this.up("window").getFieldData(ths,params)},change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};this.up("window").getFieldData(el,params)}}}}]}},getDefaultName:function(){var me=this,tree=Ext.getCmp("profile-tree-panel"),value="";if(!tree){return value}var selection=tree.view.getSelectionModel().getSelection();if(selection.length===0){return value}value=selection[0].parentNode.get("text");return value},getScaleItem:function(){var me=this;me.params.record.SCALE=1;return{disabled:false,xtype:"numberfield",name:"SCALE",fieldLabel:"Коэф.масштаб.",value:me.params.record.SCALE,maxLength:20,enforceMaxLength:20,decimalPrecision:7,decimalSeparator:".",validator:me.scale19dot7validator,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}},getItems:function(){var me=this,items=[];items.push(me.getParamDisplayItem());if(typeof me.params.columns.NAME!=="undefined"){items.push(me.getNameItem())}if(typeof me.params.columns.CVALIF!=="undefined"){items.push(me.getCvalifItem())}if(typeof me.params.columns.TYPE!=="undefined"){items.push(me.getTypeItem())}if(typeof me.params.columns.OPT!=="undefined"){items.push(me.getOptItem())}if(typeof me.params.columns.SCALE!=="undefined"){items.push(me.getScaleItem())}return items}});Ext.define("Wasutp.Configurations.Form.Create.Dcs.CreatePort",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.NODE!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NODE",margin:margin,height:height,fieldLabel:"Узел",value:me.params.record.NODE,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PROTO_NAME!=="undefined"){items.push({xtype:"displayfield",name:"PROTO_NAME",fieldLabel:"Протокол",margin:margin,height:height,value:me.params.record.PROTO_NAME})}if(typeof me.params.columns.BAUDRATE!=="undefined"){items.push({xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.16,xtype:"panel",margin:margin,height:height,border:0,html:"Скорость:"},{columnWidth:0.85,name:"BAUDRATE",disabled:true,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.BAUDRATE.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.BAUDRATE,editable:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;if(!ths.dependence){return}var data=ths.initialConfig.store,id;for(var d in data){if(data[d][0]===newValue){id=data[d][2];break}}var items=ths.up().items.items;var el;for(var i in items){if(items[i].name===ths.dependence){el=items[i];break}}var params={field:ths.dependence,dependId:id};this.up("window").getFieldData(el,params)}}}}]})}if(typeof me.params.columns.STATE!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.STATE.data){if(typeof me.params.record.GTYPE!="undefined"){if(me.params.columns.STATE.data[b].ID_GTYP!==me.params.record.GTYPE){continue}}checkBoxes.push({disabled:false,xtype:"checkboxfield",name:"STATE",boxLabel:me.params.columns.STATE.data[b].NAME+" ("+me.params.columns.STATE.data[b].MASK+")",mask:me.params.columns.STATE.data[b].MASK,checked:(me.params.record.STATE&me.params.columns.STATE.data[b].MASK)?true:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=parseInt(me.params.record[ths.name]);ths.mask=parseInt(ths.mask);if(newValue===true){if(!(me.params.record[ths.name]&ths.mask)){me.params.record[ths.name]+=ths.mask}}else{if(newValue===false){if(me.params.record[ths.name]&ths.mask){me.params.record[ths.name]-=ths.mask}}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Состояние",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:true})}if(typeof me.params.columns.IP_ADDR!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"IP_ADDR",margin:margin,height:height,fieldLabel:"IP адрес",value:me.params.record.IP_ADDR,validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PORTNUMBER!=="undefined"){items.push({disabled:false,xtype:"numberfield",name:"PORTNUMBER",margin:margin,height:height,fieldLabel:"IP порт",value:me.params.record.PORTNUMBER,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumber(ths,newValue,me.params.record.PORTNUMBER);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Profile.DcsDnDConfirmTransfer",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;items.push({xtype:"displayfield",cls:"wasutp-displayfield-auto-height",hideLabel:true,border:false,margin:"10 10 10 10",value:me.params.confirmMessage});var prefix=me.params.prefix?me.params.prefix:"";items.push({xtype:"textfield",name:"prefix",margin:"0 10 10 10",fieldLabel:"Префикс",value:prefix,labelWidth:170,width:420,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendData()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}});var cvalifValue=me.params.startCvalif?me.params.startCvalif:0;items.push({xtype:"numberfield",name:"cvalif",margin:"0 10 10 10",fieldLabel:"Начальный квалификатор",value:cvalifValue,minValue:0,labelWidth:170,width:420,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendData()}}}});return items},win:null,formPanel:null,continueFunc:null,continueParams:{},show:function(continueFunc,continueParams){var me=this;me.continueFunc=continueFunc;me.continueParams=continueParams;me.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",anchor:"100%",labelWidth:175},items:me.getItems(),buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){this.up("window").save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});me.win=Ext.create("Wasutp.window.Modal",{title:"Добавить новые параметры",width:450,margin:"5 0 5 0",layout:"fit",items:me.formPanel,closable:true,save:function(){me.sendData()}});me.win.show()},sendData:function(){var me=this,prefix=me.formPanel.getForm().findField("prefix"),startCvalif=me.formPanel.getForm().findField("cvalif");if(prefix){me.continueParams.prefix=prefix.getValue();me.continueParams.startCvalif=startCvalif.getValue();(me.continueFunc)(me.continueParams)}me.win.close()}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateStandartParams",{extend:"Wasutp.Configurations.Form.Create.CreateForm",cvalif:0,constructor:function(params){this.cvalif=params.cvalif||0;this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;items.push({disabled:false,xtype:"numberfield",name:"CVALIF",margin:margin,height:height,fieldLabel:"Начальный квалификатор",value:this.cvalif,minValue:0,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumberWith0(ths,newValue,oldValue);ths.setValue(newValue)}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}});return items},win:null,continueFunc:null,continueParams:{},show:function(continueFunc,continueParams){var me=this;me.continueFunc=continueFunc;me.continueParams=continueParams;var formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",anchor:"100%",labelWidth:175},items:me.getItems(),buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){this.up("window").save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});me.win=Ext.create("Wasutp.window.Modal",{title:"Создание стандартных параметров",width:400,margin:"5 0 5 0",layout:"fit",items:formPanel,closable:true,save:function(){me.sendData()}});me.win.show()},sendData:function(){var me=this;var cvalif=me.win.down("numberfield");if(cvalif){me.continueParams.cvalif=cvalif.getValue();(me.continueFunc)(me.continueParams)}me.win.close()}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateFunctionDevice",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},title:"Создание профиля общих функций",getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22,defaultFunctionIndex=0,deviceNameField=null;if(typeof me.params.columns.NAME!=="undefined"){me.params.record.NAME=me.params.record.NAME?me.params.record.NAME:"Общие функции модуля";var deviceName="";if(me.params.columns.FUNCTIONS&&me.params.columns.FUNCTIONS.data&&me.params.columns.FUNCTIONS.data[defaultFunctionIndex]){deviceName=me.params.columns.FUNCTIONS.data[defaultFunctionIndex].name;me.params.record.NAME=deviceName}else{deviceName=me.params.record.NAME}deviceNameField=Ext.create("Ext.form.field.Text",{disabled:false,name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:deviceName,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}});items.push(deviceNameField)}if(typeof me.params.columns.PROTOCOLS!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.PROTOCOLS.data){if(me.params.columns.PROTOCOLS.data[b].ID=="72"){me.params.columns.PROTOCOLS.data[b].CHECKED="1";me.params.record.PROTOCOLS.push(me.params.columns.PROTOCOLS.data[b].ID)}checkBoxes.push({xtype:"checkboxfield",name:"PROTOCOLS",boxLabel:me.params.columns.PROTOCOLS.data[b].NAME,checkboxValue:me.params.columns.PROTOCOLS.data[b].ID,checked:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,disabled:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,hidden:true,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){ths.checkboxValue=parseInt(ths.checkboxValue);if(newValue===true){var isset=false;for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]==ths.checkboxValue){isset=true}}if(isset!==true){me.params.record[ths.name].push(ths.checkboxValue)}}else{if(newValue===false){var newArray=[];for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]!=ths.checkboxValue){newArray.push(me.params.record[ths.name][i])}}me.params.record[ths.name]=newArray}}}}}})}if(me.params.columns.FUNCTIONS&&me.params.columns.FUNCTIONS.data&&me.params.columns.FUNCTIONS.data.length){var functions=me.params.columns.FUNCTIONS.data;me.params.record.FUNCTIONS=functions[defaultFunctionIndex].cvalif;for(var i in functions){checkBoxes.push({xtype:"radiofield",boxLabel:functions[i].name,name:"FUNCTIONS",inputValue:functions[i].cvalif,id:"function_"+functions[i].cvalif,checked:i==defaultFunctionIndex,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){if(newValue){me.params.record.FUNCTIONS=ths.inputValue;deviceNameField.setValue(ths.boxLabel)}}}}})}}items.push({xtype:"fieldset",flex:1,margin:"10 0 5 0",title:'Функции протокола "Доступ к функциям модулей"',defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:false})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateNode",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},margin:"5 0 5 0",height:22,labelWidth:130,getProtoLevelId:function(name){var me=this,data=me.params.columns.PROTO_LEVEL_NAME.data,protoName=name||me.params.record.PROTO_LEVEL_NAME;if(data.length){for(var i in data){if(protoName===data[i][0]){return data[i][2]}}}return false},getProtoLevelNameItem:function(){var me=this;return{xtype:"panel",border:0,layout:"column",margin:me.margin,items:[{columnWidth:0.205,xtype:"panel",border:0,html:"Узел протокола:"},{columnWidth:0.795,name:"PROTO_LEVEL_NAME",disabled:false,xtype:"combobox",typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.PROTO_LEVEL_NAME.data,lazyRender:true,listClass:"x-combo-list-small",value:me.params.record.PROTO_LEVEL_NAME,editable:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue;me.params.record.PROTO_LEVEL_ID=me.getProtoLevelId(newValue);var nameField=ths.up("window").down("textfield[name=NAME]");if(nameField){nameField.setValue(newValue)}}}}}]}},getNameItem:function(){var me=this;return{disabled:false,xtype:"textfield",name:"NAME",fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,labelWidth:me.labelWidth,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}}},getCvalifItem:function(){var me=this;return{disabled:false,xtype:"numberfield",name:"CVALIF",fieldLabel:"Квалификатор",value:me.params.record.CVALIF,minValue:0,labelWidth:me.labelWidth,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumberWith0(ths,newValue,me.params.record.CVALIF);me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}},getTypeItem:function(){var me=this;return{disabled:false,xtype:"combobox",name:"TYPE",margin:me.margin,height:me.height,fieldLabel:"Тип",value:me.params.record.TYPE,typeAhead:true,triggerAction:"all",selectOnTab:true,store:me.params.columns.TYPE.data,lazyRender:true,listClass:"x-combo-list-small",labelWidth:me.labelWidth,editable:false}},getItems:function(){var me=this,items=[];if(typeof me.params.columns.PROTO_LEVEL_NAME!=="undefined"){me.params.record.PROTO_LEVEL_ID=me.getProtoLevelId();items.push(me.getProtoLevelNameItem())}if(typeof me.params.columns.NAME!=="undefined"){if(!me.params.record.NAME&&me.params.record.PROTO_LEVEL_NAME){me.params.record.NAME=me.params.record.PROTO_LEVEL_NAME}items.push(me.getNameItem())}if(typeof me.params.columns.CVALIF!=="undefined"){if(!me.params.record.CVALIF){me.params.record.CVALIF=1}items.push(me.getCvalifItem())}if(typeof me.params.columns.TYPE!=="undefined"){items.push(me.getTypeItem())}return items}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateProto",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateDevice",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},title:"Создание профиля сбора",getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PROTOCOLS!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.PROTOCOLS.data){checkBoxes.push({xtype:"checkboxfield",name:"PROTOCOLS",boxLabel:me.params.columns.PROTOCOLS.data[b].NAME,checkboxValue:me.params.columns.PROTOCOLS.data[b].ID,checked:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,disabled:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){ths.checkboxValue=parseInt(ths.checkboxValue);if(newValue===true){var isset=false;for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]==ths.checkboxValue){isset=true}}if(isset!==true){me.params.record[ths.name].push(ths.checkboxValue)}}else{if(newValue===false){var newArray=[];for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]!=ths.checkboxValue){newArray.push(me.params.record[ths.name][i])}}me.params.record[ths.name]=newArray}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Протоколы",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:false})}return items}});Ext.define("Wasutp.Configurations.Form.Create.Profile.DcsDnDConfirm",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],height=22;items.push({xtype:"displayfield",hideLabel:true,border:false,margin:"10 10 10 10",cls:"wasutp-displayfield-auto-height",value:me.params.confirmMessage});items.push({xtype:"textfield",name:"prefix",margin:"0 10 10 10",fieldLabel:"Наименование",value:"",labelWidth:100,width:420,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendData()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}});return items},win:null,formPanel:null,continueFunc:null,continueParams:{},show:function(continueFunc,continueParams){var me=this;me.continueFunc=continueFunc;me.continueParams=continueParams;me.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",anchor:"100%",labelWidth:175},items:me.getItems(),buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){this.up("window").save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});me.win=Ext.create("Wasutp.window.Modal",{title:"Добавить новое устройство",width:450,margin:"5 0 5 0",layout:"fit",items:me.formPanel,closable:true,save:function(){me.sendData()}});me.win.show()},sendData:function(){var me=this,prefix=me.formPanel.getForm().findField("prefix");if(prefix){me.continueParams.prefix=prefix.getValue();(me.continueFunc)(me.continueParams)}me.win.close()}});Ext.define("Wasutp.Configurations.Form.Create.Profile.TwoPositionSwitchForm",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params);this.init()},init:function(){var me=this,name="",src1="",onChecked=true,offChecked=false;if(me.params.dcsNodes.length===1){name=me.params.dcsNodes[0].NAME;src1=me.params.dcsNodes[0].NAME}else{if(me.params.dcsNodes.length>1){for(var i in me.params.dcsNodes){name+=me.params.dcsNodes[i].NAME+"\n"}name=name.substr(0,name.length-1);src1=name}}if(typeof me.params.title==="undefined"){me.params.title="Создание двухпозиционного ТС"}if(typeof me.params.confirmMessage==="undefined"){me.params.confirmMessage="Создать двухпозиционный ТС"}me.params.name=name;me.params.src1=src1;me.params.onChecked=onChecked;me.params.offChecked=offChecked},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;items.push({xtype:"displayfield",cls:"wasutp-displayfield-auto-height",hideLabel:true,border:false,margin:"10 10 10 10",value:me.params.confirmMessage});if(me.params.dcsNodes.length===1){items.push({xtype:"textfield",disabled:me.params.disabledName?true:false,name:"name",margin:"0 10 10 10",fieldLabel:"Имя",validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,value:me.params.name,cls:"wasutp-two-position-switch-form-name",listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.okHandler()}},afterrender:function(field){if(!me.params.disabledName){Ext.defer(function(){field.focus(true)},1)}}}})}else{if(me.params.dcsNodes.length>1){items.push({xtype:"textareafield",disabled:me.params.disabledName?true:false,name:"name",margin:"0 10 10 10",fieldLabel:"Имя",value:me.params.name,cls:"wasutp-two-position-switch-form-name",listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.okHandler()}},render:function(ths){Ext.EventManager.on(ths.getEl(),"keydown",function(e,t){if(e.getKey()==e.BACKSPACE){e.stopPropagation()}});ths.handlerKeyMap=Ext.create("Ext.util.KeyMap",ths.getEl(),{key:Ext.EventObject.ENTER,shift:false,ctrl:true,handler:function(){me.okHandler()}})}}})}}var onChecked=true;if(me.params.dcsNodes.length===1){if(/выкл|откл/i.test(me.params.dcsNodes[0].NAME)){onChecked=false}}items.push({xtype:"fieldcontainer",fieldLabel:me.params.dcsNodes[0].NAME,defaultType:"radiofield",margin:"0 10 10 10",defaults:{flex:1},layout:"hbox",cls:"wasutp-two-position-switch-form-radio",items:[{boxLabel:"ВКЛ",name:"on",checked:onChecked},{boxLabel:"ОТКЛ",name:"on",checked:!onChecked}]});return items},win:null,formPanel:null,continueFunc:null,continueParams:{},getFormPanel:function(){var me=this;me.formPanel=Ext.create("Ext.form.Panel",{bodyPadding:10,fieldDefaults:{labelAlign:"left",labelWidth:90,anchor:"100%",labelWidth:175},items:me.getItems(),buttons:["->",{id:"wasutp-configuration-ok-btn",text:"ОК",margin:"5 5 5 5",handler:function(){this.up("window").save()}},{id:"wasutp-configuration-cancel-btn",text:"Отмена",margin:"5 10 5 5",handler:function(){this.up("window").close()}}]});return me.formPanel},show:function(continueFunc,continueParams){var me=this;me.continueFunc=continueFunc;me.continueParams=continueParams;me.win=Ext.create("Wasutp.window.Modal",{title:me.params.title,width:450,margin:"5 0 5 0",layout:"fit",items:me.getFormPanel(),closable:true,save:function(){me.okHandler()}});me.win.show()},okHandler:function(){var me=this,grid=me.params.profile.grid,store=grid.getStore(),model=store.model.modelName,cvalif=0,record,dptsName=me.formPanel.getForm().findField("name").getValue(),on=me.formPanel.getForm().findField("on").getValue(),dptsNames=dptsName.split("\n");for(var i in me.params.dcsNodes){record=Ext.create(model,{ID:me.params.dcsNodes[i].ID,NAME:dptsNames[i],CVALIF:cvalif++,DPTS_ON:on,DPTS_OFF:!on,source:me.params.dcsNodes[i],dptsName:dptsNames[i],menu:false,temporary:true,SCALE:"1.0000000"});store.insert(store.getCount()+1,record)}me.win.close()}});Ext.define("Wasutp.Configurations.Form.Create.Profile.ChangeTwoPositionSwitchForm",{extend:"Wasutp.Configurations.Form.Create.Profile.TwoPositionSwitchForm",okHandler:function(){var me=this,on=me.formPanel.getForm().findField("on").getValue(),dptsName=me.formPanel.getForm().findField("name").getValue();Wasutp.Ajax.request({url:"/json/configuration/changeDpts",params:{on:on,paramId:me.params.dcsNodes[0].ID,dptsProfileId:me.params.overModel.raw.ID}});me.win.close()},init:function(){var me=this;me.superclass.init(arguments);me.params.name=me.params.profileParamName}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateTransferDevice",{extend:"Wasutp.Configurations.Form.Create.CreateForm",constructor:function(params){this.superclass.constructor(params)},title:"Создание профиля передачи",getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;if(typeof me.params.columns.NAME!=="undefined"){items.push({disabled:false,xtype:"textfield",name:"NAME",margin:margin,height:height,fieldLabel:"Имя",value:me.params.record.NAME,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}})}if(typeof me.params.columns.PROTOCOLS!=="undefined"){var checkBoxes=[];for(var b in me.params.columns.PROTOCOLS.data){if(me.params.columns.PROTOCOLS.data[b].ID==="48"){me.params.columns.PROTOCOLS.data[b].CHECKED=1}me.params.record.PROTOCOLS=["48"];checkBoxes.push({xtype:"radiofield",name:"PROTOCOLS",boxLabel:me.params.columns.PROTOCOLS.data[b].NAME,checkboxValue:me.params.columns.PROTOCOLS.data[b].ID,checked:me.params.columns.PROTOCOLS.data[b].CHECKED=="1"?true:false,disabled:false,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){ths.checkboxValue=parseInt(ths.checkboxValue);if(newValue===true){var isset=false;for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]==ths.checkboxValue){isset=true}}if(isset!==true){me.params.record[ths.name].push(ths.checkboxValue)}}else{if(newValue===false){var newArray=[];for(var i in me.params.record[ths.name]){if(me.params.record[ths.name][i]!=ths.checkboxValue){newArray.push(me.params.record[ths.name][i])}}me.params.record[ths.name]=newArray}}}}}})}items.push({xtype:"fieldset",flex:1,margin:margin,title:"Протоколы",defaultType:"radio",layout:"anchor",items:checkBoxes,collapsible:true,collapsed:false})}return items}});Ext.define("Wasutp.App",{extend:"Ext.ux.desktop.App",init:function(){this.callParent()},getModules:function(){var moduleObjects=[];var modules=appHelper.getMenuItems();for(var i in modules){appHelper.modules[modules[i]]=Ext.create(modules[i]);moduleObjects.push(appHelper.modules[modules[i]])}return moduleObjects},getArchTitle:function(){var title,y,m,dt=new Date();try{y=Ext.Date.format(dt,"Y");m=Ext.Date.format(dt,"F");m=m.toLowerCase();title="Архив за "+m+" "+y+" года"}catch(e){title="Архив"}return title},getDesktopConfig:function(){var me=this,ret=me.callParent();return Ext.apply(ret,{contextMenuItems:[],shortcuts:Ext.create("Ext.data.Store",{model:"Ext.ux.desktop.ShortcutModel",data:[]}),wallpaperStretch:false})},getStartConfig:function(){var me=this,ret=me.callParent();var getStartConfig={title:appHelper.getUserName(),iconCls:"user",height:300,toolConfig:{width:120,items:[{text:"Выход",iconCls:"wasutp-exit",handler:me.onLogout,scope:me},{text:Wasutp.About.menuText,iconCls:Wasutp.About.cls,handler:me.openProInfo,scope:me}]}};return Ext.apply(ret,getStartConfig)},getTaskbarConfig:function(){var ret=this.callParent();return Ext.apply(ret,{quickStart:[],trayItems:[{xtype:"trayclock",flex:1}]})},onLogout:function(){var me=this;me.win=Ext.create("Wasutp.window.Modal",{id:"win-authenticate",title:"Выход из системы",width:335,items:{xtype:"panel",bodyPadding:10,padding:0,items:[{xtype:"label",text:"Вы действительно хотите выйти?"},{xtype:"button",text:"Ok",width:140,margin:"20 5 5 5",handler:function(){Ext.Ajax.request({url:"/auth/logout",params:{id:1},success:function(response){window.location="/auth/login"},failure:function(response){var message="Сервер недоступен ";if(typeof response.responseText!="undefined"&&response.responseText){message+=response.responseText}message=""+message;errorsHandler.addMessage(errorsHandler.getSystemMessages().server_error_with_status+response.status,message,0)}})}},{xtype:"button",text:"Отмена",width:140,margin:"20 5 5 5",handler:function(){if(typeof me.win!="undefined"){me.win.close()}}}]}});me.win.show()},openProInfo:function(){Wasutp.About.open()},onSettings:function(){}});Ext.define("Wasutp.Schemes.NewSchemePalette",{requires:["Wasutp.Schemes.NewSchemePaletteDragSource"],schemePanel:null,sldiagram:null,panel:null,dataStore:null,dataView:null,types:null,selectedItem:null,groups:null,constructor:function(cfg){var palette=this;var schemePanel;if(typeof cfg=="undefined"&&typeof cfg.schemePanel=="undefined"&&cfg.schemePanel==null){throw"FATAL: cfg.schemePanel not exist"}else{palette.schemePanel=cfg.schemePanel}schemePanel=palette.schemePanel;palette.sldiagram=schemePanel.childrens.sldiagramCmp.sldiagram;var sldiagram=palette.sldiagram;if(typeof sldiagram.types=="undefined"||sldiagram.types==null||sldiagram.types.length==0){console.error("ERROR: SLDiagram.types not exist or empty");return palette}palette.types=sldiagram.types;palette.getPanel();var panel=palette.panel;return palette},getSchemePanel:function(){return this.schemePanel},getSLDiagram:function(){return this.getSchemePanel().getSLDiagram()},checkSelectedItem:function(i){return Boolean(i===null||SLDiagram.isType(i)===true)},getSelectedItem:function(format){if(this.checkSelectedItem(this.selectedItem)===false){console.error("ERROR: Некорректная ссылка на создаваемый тип элемента");return null}else{return this.selectedItem}},setSelectedItem:function(i){if(this.checkSelectedItem(i)===false){console.error("ERROR: Некорректная ссылка на создаваемый тип элемента");this.selectedItem=null}else{this.selectedItem=i}},getStore:function(){var palette=this;if(!palette.dataStore){palette.dataStore=Ext.create("Ext.data.Store",{fields:["id","name","items"],data:palette.getData()});palette.dataStore.load()}return palette.dataStore},groupOrder:{"Устройства индикации":99,"Графические элементы":98,"Линии, шины, соединительные элементы":97,"Выключатели":96,"Заземления":95,"Разъединители, отделители":94,"Автоматы силовые":93,"Трансформаторы":92,"Предохранители":91,"Разрядники":90,"Муфты, кабельный разъем":89,"Устройства компенсации":88,"Генераторы":87},getData:function(){var _=SLDiagram.Underscore,res=[],sld=this.sldiagram,groupedByName,id,me=this;groupedByName=_.groupBy(sld.types,function(type){return((typeof type.groupName==="string")?type.groupName:"Разное")});id=0;_.each(groupedByName,function(items,groupName){if(groupName==="Debug"){return}res.push({id:id,items:items,name:groupName});id++});res=_.sortBy(res,function(item){return((me.groupOrder.hasOwnProperty(item.name))?-me.groupOrder[item.name]:0)});return res},getPanel:function(){var title;var palette=this;if(!palette.panel){palette.loadStyles();if(SLDiagram.debugMode){title="{description} (id={id})"}else{title="{description}"}palette.panel=Ext.create("Ext.view.View",{store:palette.getStore(),width:"100%",palette:palette,autoScroll:true,tpl:new Ext.XTemplate('<div class="sldiagram-ct">','<tpl for=".">','<div class="sldiagram-types-group">','<p class="sldiagram-types-group-title">{name}</p>','<div class="sldiagram-types">','<tpl for="items">','<div class="sldiagram-type" id="{id}" title="'+title+'" style="background-image: url({% out.push( values.getImageForPalette() ) %}); background-position: center center; background-repeat: no-repeat;">',"</div>","</tpl>","</div>","</div>","</tpl>","</div>"),itemSelector:".sldiagram-types",listeners:{itemmousedown:palette.itemmousedown,itemmouseup:palette.itemmouseup,containerclick:palette.containerclick}})}return palette.panel},loadStyles:function(){var palette=this;if(!palette.styles){Ext.Ajax.request({url:"/desktop/css/sldiagram.css",success:function(resp){var palette=this;var content=resp.responseText;palette.styles=Ext.util.CSS.createStyleSheet(content,"sldiagram")},scope:palette})}},containerclick:function(scope,e,eOpts){var groupTitle=e.getTarget(".sldiagram-types-group-title",3,true);if(!groupTitle){return}var group=groupTitle.up(".sldiagram-types-group");if(!group){return}var div=group.down(".sldiagram-types");if(!div){return}div.toggleCls("collapsed");groupTitle.toggleCls("collapsed")},itemmousedown:function(scope,record,item,index,e,eOpts){var palette=this.palette;var schemePanel=palette.schemePanel;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;var dom=e.getTarget(null,3,true);var id=Number(dom.id);var type=sld.getTypeById(id);var dragSource=schemePanel.childrens.dragDrop.dragSource;palette.setSelectedItem(type);dragSource.updateDragEl(type);return true},itemmouseup:function(scope,record,item,index,e,eOpts){var palette=this.palette;var schemePanel=palette.schemePanel;var dragSource=schemePanel.childrens.dragDrop.dragSource;dragSource.hideDragEl();return true}});Ext.define("Wasutp.Schemes.NewSchemePropertiesEditor",{requires:["Wasutp.Schemes.NewSchemePropertiesModel","Wasutp.Schemes.extends.CellEditing","Wasutp.Schemes.extends.CellEditor","Wasutp.ColorComboboxList"],element:null,origCfg:null,panel:null,schemePanel:null,_panelCls:"sldiagram-properties-editor",constructor:function(cfg){var propsEd=this;if(typeof cfg.schemePanel==="undefined"){throw new Error("FATAL: cfg.schemePanel not exist")}else{this.schemePanel=cfg.schemePanel}var panelCfg={plugins:[this.getCellEditing()],title:"Параметры элементов",border:false,store:this.getStore(),useArrows:true,rootVisible:false,autoScroll:true,animate:false,rowLines:true,cls:this._panelCls,tools:[Ext.create("Ext.panel.Tool",{propsEd:propsEd,type:"refresh",handler:function(){var propsEd=this.propsEd;propsEd.updateStore()}})],columns:[Ext.create("Ext.tree.Column",{dataIndex:"description",header:"Параметр",xtype:"treecolumn",sortable:false,menuDisabled:true,flex:3}),this.getValueColumn()],listeners:{itemcontextmenu:function(treepanel,record,item,index,e,eOpts){propsEd._getContextMenu(treepanel,record,item,index,e)},itemclick:function(treepanel,record,item,index,e,eOpts){propsEd._onItemclick(treepanel,record,item,index,e,eOpts)},beforecellkeydown:function(){var domEvents=SLDiagram.DomEvents.getInstance();if(domEvents.getFocusedSldiagram()){return false}}}};propsEd.panel=Ext.create("Ext.tree.Panel",Ext.apply(panelCfg,cfg));var sldiagram=propsEd.schemePanel.childrens.sldiagramCmp.sldiagram;sldiagram.events.listen("changeSelection",propsEd.changeSelection,null,propsEd);sldiagram.events.listen("onUpdateSchemeConfig",propsEd.onUpdateSchemeConfig,{block:true},propsEd,"SLDiagram.setConfigProperty");sldiagram.events.listen("onUpdateElementConfig",propsEd.onUpdateElementConfig,{block:true},propsEd);sldiagram.events.listen("beforeChangeSelection",propsEd.beforeChangeSelection,{anyContext:true},propsEd);this._initCSS();this._initEventHandlers();return propsEd},arrayReplaceRecursive:function(arr){var retObj={},i=0,p="",argl=arguments.length;if(argl<2){throw new Error("There should be at least 2 arguments passed to array_replace_recursive()")}for(p in arr){retObj[p]=arr[p]}for(i=1;i<argl;i++){for(p in arguments[i]){if(retObj[p]&&typeof retObj[p]==="object"){retObj[p]=this.arrayReplaceRecursive(retObj[p],arguments[i][p])}else{retObj[p]=arguments[i][p]}}}return retObj},getElements:function(){var sld=this.getSLDiagram(),els=sld.getSelectedElements(),res;if(els.length>=1){res=els}else{res=[sld]}return res},updateStore:function(callback){if(this._updateStoreFn){this._needNextUpdateStore=true;return}this._needNextUpdateStore=false;var store=this.getStore(),me=this,disabler=this.getSLDiagram().getDisablerEvents();if(typeof callback!=="function"){callback=function(){}}this._updateStoreFn=function(){store.on("afterUpdateFullData",function(){delete me._updateStoreFn;if(me._needNextUpdateStore){return me.updateStore(callback)}else{return callback(null)}},this,{single:true,delay:100});store.updateFullData()};if(disabler.isDisabled()){disabler.once("enable",this._updateStoreFn)}else{setTimeout(this._updateStoreFn,100)}},isNumber:function(arg){var re=new RegExp("^(\\d+|\\d+\\.\\d+)$");return re.test(arg)},updatePropertyValue:function(record,value){var els=this.getElements();var i,el,propDesc;var res=true;var sld=this.getSLDiagram();for(i=0;i<els.length;i++){el=els[i];propDesc=this.getPropertyDescriptor(el,record.get("fullPath"));if(propDesc&&!propDesc.setValue(el,value)){res=false}}sld.render();return res},_setValue:function(record,value){return this.updatePropertyValue(record,value)},beforeChangeSelection:function(){if(this.getEditProcess()===true){this.getCellEditing().completeEdit();this.setEditProcess(false)}},changeSelection:function(type,data){this.clearSelection();this.setEditProcess(false);var sldiagram=this.getSLDiagram();if(sldiagram===null||sldiagram.getEditMode()===false){return}var count=sldiagram.getSelectedElements().length;var statusText="";if(count===1){statusText="Выделен элемент: "+sldiagram.getSelectedElement(0).type.description}else{if(count>1){statusText="Выделено "+count+" элемента(ов)"}else{statusText=""}}this.setStatusText(statusText);this.updateStore();this.setNeedUpdate(false)},updateElements:function(){var els=this.getElements(),sld=this.getSLDiagram(),i,el;for(i=0;i<els.length;i++){el=els[i];if(SLDiagram.isElement(el)){el.type.draw.call(el)}else{if(SLDiagram.isSLDiagram(el)){sld.render()}}sld.stage.update()}},onUpdateSchemeConfig:function(events,type,data){var path;var pathArray=[];var name;var value;if(SLDiagram.isSLDiagram(this.element)){pathArray=data.path.split("/");name=pathArray[pathArray.length-1];pathArray.splice(pathArray.length-1,1);path=pathArray.join("/");value=data.value;this.updateRecord(path,name,value)}},onUpdateElementConfig:function(events,type,data){var includedElement=false;if(SLDiagram.isArray(this.element)){for(var i in this.element){if(this.element.hasOwnProperty(i)){var el=this.element[i];if(el.id===data.element.id){includedElement=true;break}}}}else{if(SLDiagram.isElement(this.element)){if(this.element.id===data.element.id){includedElement=true}}}if(includedElement===true){}return true},setStatusText:function(text){this.statusText=String(text)},getStatusText:function(){if(typeof this.statusText!=="string"){return""}else{return this.statusText}},setEditProcess:function(state){this.editProcess=Boolean(state)},getEditProcess:function(){return Boolean(this.editProcess)},setNeedUpdate:function(state){this.needUpdate=Boolean(state)},getNeedUpdate:function(){return Boolean(this.needUpdate)},getNameFromPath:function(path){return SLDiagram.Utils.getName(path)},getPropertyDescriptor:function(el,path){if(SLDiagram.isSLDiagram(el)){return el.getPropertyDescriptor(path)}else{if(SLDiagram.isElement(el)||SLDiagram.isType(el)){return el.getPropertyDescriptor(path)}else{return null}}},getPathFromRecord:function(record,full){var path=record.get("path");var name=record.get("name");var res="";if(full){res=path+((path.length===0)?"":"/")+name}else{res=path}return res},getValueColumn:function(){var me=this;return Ext.create("Ext.grid.column.Column",{dataIndex:"value",header:"Значение",propsEd:this,sortable:false,menuDisabled:true,getEditor:function(record){return this.propsEd.getValueFieldEditor(record)},flex:2,renderer:function(value,metaData,record){var propDesc=record.getPropertyDescriptor();var divStyle;var spanStyle;var Props=SLDiagram.properties;var coloredValue=Boolean(Props.Color2.isInstanceOf(propDesc)||Props.ListVoltageClass.isInstanceOf(propDesc));var sld;var color;if(coloredValue){sld=me.getSLDiagram();if(Props.ListVoltageClass.isInstanceOf(propDesc)){if(value===null||value===""||value==="нет"){color=sld.getEmptyVoltageColor()}else{color=sld.getVoltageColor(value)}}else{color=value}divStyle=["display: inline-block;","width: 10px;","height: 10px;","background-color: "+color+";","margin-left: 0px;","margin-right: 12px;","margin-top: 0px;","border: 1px solid #000000;","position: relative;","top: 2px;"].join(" ");spanStyle=["position: relative;","left: 1px;","top: 1px;"].join(" ");return'<div style="'+divStyle+'"></div><span style="'+spanStyle+'">'+value+"</span>"}else{return value}}})},getValueFieldEditor:function(record,defaultField){var propDesc=record.getPropertyDescriptor();var els=this.getElements();return propDesc.getEditor(els)},getSchemePanel:function(){if(this.schemePanel){return this.schemePanel}else{return null}},getSLDiagram:function(){var schemePanel=this.getSchemePanel();if(schemePanel){return schemePanel.getSLDiagram()}else{return null}},getStore:function(){if(this.store){return this.store}this.store=Ext.create("Wasutp.Schemes.extends.PropertiesStore",{propertiesEditor:this});this.store.setRootNode({expanded:true,name:"Properties",children:[]});return this.store},getCellEditing:function(){if(!this._cellEditing){this._cellEditing=Ext.create("Wasutp.Schemes.extends.CellEditing",{propertiesEditor:this})}return this._cellEditing},_initEventHandlers:function(){var schemePanel=this.getSchemePanel(),sld=this.getSLDiagram(),me=this;sld.events.listen("afterSaveScheme",function(){this._onAfterSaveScheme()},{block:true,anyContext:true},this);schemePanel.getEvents().addListener("afterNewSchemeClick",function(sld,panel){this._onAfterSaveScheme()},this);sld.events.listen("afterOpenScheme",this._onAfterOpenScheme,{block:true,anyContext:true},this);sld.events.listen("afterElementMove",this._onAfterElementMove,{block:true,anyContext:true},this)},_onAfterSaveScheme:function(){this.updateStore()},_onCreateNewScheme:function(){this.updateStore()},_onAfterOpenScheme:function(){this.updateStore()},_onAfterElementMove:function(){this.updateStore()},_getContextMenu:function(treepanel,record,htmlelement,index,e){var propDesc=record.getPropertyDescriptor();var items=propDesc.getMenu();if(!items||(items&&items.length===0)){return null}var i,item;var items2=[];for(i=0;i<items.length;i++){item=items[i];items2.push(Ext.create("Ext.menu.Item",{text:item.text,origItem:item,propDesc:propDesc,handler:function(){return this.origItem.handler.call(this,propDesc)}}))}var menu=Ext.create("Ext.menu.Menu",{items:items2});menu.showAt(e.getXY());return menu},_onItemclick:function(treepanel,record,item,index,e,eOpts){var cellEditing;if(record.get("type")!=="object"){cellEditing=this.getCellEditing();this.setEditProcess(true);this.setNeedUpdate(false);cellEditing.disableEventHandlers();cellEditing.startEdit(record,1);cellEditing.enableEventHandlers()}},getSelectedRecord:function(){var selModel,selection;selModel=this.panel.getSelectionModel();selection=selModel.getSelection();if(selection.length===0){return null}else{return selection[0]}},clearSelection:function(){var me=this,selectedItem=this.getSelectedRecord(),editProcess=this.getEditProcess(),el,rows,row,i,fn;if(selectedItem){fn=function(){el=me.panel.getEl();rows=el.dom.querySelectorAll("tr.x-grid-row-focused");for(i=0;i<rows.length;i++){row=rows[i];row.className=row.className.replace("x-grid-row-focused","")}};fn=SLDiagram.Underscore.once(fn);this.panel.on("deselect",fn,this,{delay:100,single:true});this.getCellEditing().cancelEdit();this.panel.getSelectionModel().deselectAll();return true}else{return false}},_initCSS:function(){var selector="."+this._panelCls+" td",rule=Ext.util.CSS.getRule(selector),styleSheet;if(rule){return false}styleSheet=Ext.util.CSS.createStyleSheet("");rule=Ext.util.CSS.createRule(styleSheet,selector,"border-bottom-color: #FFFFFF !important; border-bottom-width: 1px;");return true}});Ext.define("Wasutp.Schemes.NewSchemeAris",{extend:"Wasutp.Schemes.NewSchemeFormat",statics:{formatName:"aris"},getOpenFields:function(){var aris=this;var format=aris.format;var sld=aris.sldiagram;aris.openFieldSet=Ext.create("Ext.form.FieldSet",{title:"Additional properties",collapsible:false,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:"URL getConfig",name:"urlGetConfig",value:format.getConfigProperty("scheme/urls/getconfig","/json/newschemesrtree/"),scope:aris},{fieldLabel:"URL getScheme",name:"urlGetScheme",value:format.getConfigProperty("scheme/urls/getscheme","/json/newschemesrtree/get-scheme-by-id"),scope:aris},{fieldLabel:"URL getData",name:"urlGetData",value:format.getConfigProperty("scheme/urls/getdata","/json/newschemesrtree/get-data-by-id"),scope:aris},{fieldLabel:"URL send",name:"urlSend",value:format.getConfigProperty("scheme/urls/send","/json/newschemesaris/send"),scope:aris},{xtype:"numberfield",fieldLabel:"ID",name:"id",value:sld.getConfigProperty("scheme/id",0,false),scope:aris},{xtype:"textfield",name:"filename",fieldLabel:"Filename",value:sld.getConfigProperty("scheme/filename","",false),scope:aris}]});return aris.openFieldSet},getSaveFields:function(){var aris=this;var format=aris.format;var sld=aris.sldiagram;this.saveFieldSet=Ext.create("Ext.form.FieldSet",{title:"Additional properties",collapsible:false,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{xtype:"label",text:'Формат "aris" не поддерживает сохранение'}]});return this.saveFieldSet},getOpenValues:function(){var originalUrls=this.format.getConfigProperty("scheme/urls",null);var openFieldSet=this.openFieldSet;var newUrls=new Object();newUrls.getconfig=(openFieldSet.child("[name=urlGetConfig]")).getValue();newUrls.getscheme=(openFieldSet.child("[name=urlGetScheme]")).getValue();newUrls.getdata=(openFieldSet.child("[name=urlGetData]")).getValue();newUrls.send=(openFieldSet.child("[name=urlSend]")).getValue();var diff=SLDiagram.diffObjects(originalUrls,newUrls);var res=new Object();for(var i in diff){if(diff.hasOwnProperty(i)){var d=diff[i];if(typeof d.right!=="undefined"){res[i]=d.right}}}return{urls:res,id:(openFieldSet.child("[name=id]")).getValue(),filename:(openFieldSet.child("[name=filename]")).getValue()}},getSaveValues:function(){return new Object()}});Ext.define("Wasutp.Schemes.NewSchemeRTree",{extend:"Wasutp.Schemes.NewSchemeFormat",statics:{formatName:"rtree"},getOpenFields:function(){var rtree=this;var format=rtree.format;var sld=rtree.sldiagram;rtree.openFieldSet=Ext.create("Ext.form.FieldSet",{title:"Additional properties",collapsible:false,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:"URL getConfig",name:"urlGetConfig",value:format.getConfigProperty("scheme/urls/getconfig","/json/newschemesrtree/"),scope:rtree},{fieldLabel:"URL getScheme",name:"urlGetScheme",value:format.getConfigProperty("scheme/urls/getscheme","/json/newschemesrtree/get-scheme-by-id"),scope:rtree},{fieldLabel:"URL getData",name:"urlGetData",value:format.getConfigProperty("scheme/urls/getdata","/json/newschemesrtree/get-data-by-id"),scope:rtree},{fieldLabel:"URL send",name:"urlSend",value:format.getConfigProperty("scheme/urls/send","/json/newschemesrtree/send"),scope:rtree},{xtype:"numberfield",fieldLabel:"ID",name:"id",value:sld.getConfigProperty("scheme/id",0,false),scope:rtree},{xtype:"textfield",fieldLabel:"Name",name:"name",value:sld.getConfigProperty("scheme/name","",false),scope:format}]});return rtree.openFieldSet},getSaveFields:function(){var rtree=this;var format=rtree.format;var sld=rtree.sldiagram;rtree.saveFieldSet=Ext.create("Ext.form.FieldSet",{title:"Additional properties",collapsible:false,defaultType:"textfield",layout:"anchor",defaults:{anchor:"100%"},items:[{fieldLabel:"URL saveScheme",name:"urlSaveScheme",value:format.getConfigProperty("scheme/urls/savescheme","/json/newschemesrtree/save-scheme"),scope:rtree},{xtype:"numberfield",fieldLabel:"ID",name:"id",value:sld.getConfigProperty("scheme/id",0,false),scope:rtree},{xtype:"textfield",fieldLabel:"Name",name:"name",value:sld.getConfigProperty("scheme/name","",false),scope:rtree},{xtype:"checkbox",boxLabel:"Overwrite",name:"overwrite",checked:true,disabled:true}]});return rtree.saveFieldSet},getOpenValues:function(){var originalUrls=this.format.getConfigProperty("scheme/urls",null);var openFieldSet=this.openFieldSet;var newUrls=new Object();newUrls.getconfig=(openFieldSet.child("[name=urlGetConfig]")).getValue();newUrls.getscheme=(openFieldSet.child("[name=urlGetScheme]")).getValue();newUrls.getdata=(openFieldSet.child("[name=urlGetData]")).getValue();newUrls.send=(openFieldSet.child("[name=urlSend]")).getValue();var diff=SLDiagram.diffObjects(originalUrls,newUrls);var res=new Object();for(var i in diff){if(diff.hasOwnProperty(i)){var d=diff[i];if(typeof d.right!=="undefined"){res[i]=d.right}}}return{id:(openFieldSet.child("[name=id]")).getValue(),name:(openFieldSet.child("[name=name]")).getValue(),urls:res}},getSaveValues:function(){var originalUrls=this.format.getConfigProperty("scheme/urls",null);var saveFieldSet=this.saveFieldSet;var newUrls=new Object();newUrls.savescheme=(saveFieldSet.child("[name=urlSaveScheme]")).getValue();var diff=SLDiagram.diffObjects(originalUrls,newUrls);var res=new Object();for(var i in diff){if(diff.hasOwnProperty(i)){var d=diff[i];if(typeof d.right!=="undefined"){res[i]=d.right}}}return{urls:res,id:(saveFieldSet.child("[name=id]")).getValue(),name:(saveFieldSet.child("[name=name]")).getValue()}}});Ext.define("Wasutp.Schemes.NewSchemeFormats",{singleton:true,requires:["Wasutp.Schemes.NewSchemeRTree","Wasutp.Schemes.NewSchemeAris","Wasutp.Schemes.SchemeXsde"],getFormatClasses:function(){return this.requires},getFormatNames:function(){var formatClasses=this.getFormatClasses();var res=[];for(var i in formatClasses){if(formatClasses.hasOwnProperty(i)){var formatClass=formatClasses[i];res.push(Ext.ClassManager.get(formatClass).format.name)}}return res},formats:{aris:Ext.ClassManager.get("Wasutp.Schemes.NewSchemeAris"),rtree:Ext.ClassManager.get("Wasutp.Schemes.NewSchemeRTree"),modus:Ext.ClassManager.get("Wasutp.Schemes.SchemeXsde")},getFormatByName:function(name){var formatClasses=this.getFormatClasses();var f;var fn;var i;for(i in formatClasses){if(formatClasses.hasOwnProperty(i)){f=formatClasses[i];fn=f.formatName;if(fn==name){return f}}}return null},getFormatStore:function(){var formatClasses=this.getFormatClasses();var res=[];for(var i in formatClasses){if(formatClasses.hasOwnProperty(i)){var formatClass=formatClasses[i];res.push({name:formatClass.formatName,label:((formatClass.formatName==="aris")?"uni":formatClass.formatName)})}}var store=Ext.create("Ext.data.Store",{fields:["name","label"],data:res});return store}});Ext.define("Wasutp.Schemes.Helper",{statics:{getSchemesMenu:function(){try{return Ext.getCmp("wasutp-scheme-menu").menu}catch(ex){console.error(ex);return null}},getSchemesMenuItems:function(){try{return Wasutp.Schemes.Helper.getSchemesMenu().items}catch(ex){console.error(ex);return null}},getMenuItemBySchemeId:function(id){var newSchemeItem=Ext.getCmp("wasutp-scheme-menu");if(newSchemeItem){var newSchemes=newSchemeItem.newSchemes;var menu=newSchemeItem.menu;var items=menu.items.items;var item;for(var i in items){if(items.hasOwnProperty(i)){item=items[i];if(item.idScheme==id){return item}}}}return null},_getMenuItemByMenuId:function(menu,id){var i,res;for(i in menu.items.items){if(menu.items.items.hasOwnProperty(i)){item=menu.items.items[i];if(item.windowId==id){return{menu:menu,item:item}}}}for(i in menu.items.items){if(menu.items.items.hasOwnProperty(i)){item=menu.items.items[i];if(item.menu){res=this._getMenuItemByMenuId(item.menu,id);if(res!==null){return res}}}}return null},getMenuItemByMenuId:function(id){var newSchemeItem,newSchemes,menu,checkId,find,res;checkId=function(item){return Boolean(item.windowId==id)};find=function(menu){var res=null,item;item=menu.items.findBy(checkId);if(item){res={menu:menu,parent:null,item:item};return res}else{menu.items.each(function(item){if(res){return false}var r;if(item.menu){r=find(item.menu);if(res){return false}if(r){res={menu:item.menu,parent:item,item:r.item};return false}else{return true}}else{return true}});return res}};newSchemeItem=Ext.getCmp("wasutp-scheme-menu");if(newSchemeItem){newSchemes=newSchemeItem.newSchemes;menu=newSchemeItem.menu;res=find(menu);return res}else{return null}},removeSchemeFromMenu:function(id){var module,menuItems,item,i,menu;module=Wasutp.Schemes.Helper.getSchemeModule();menuItems=module.getMenuItems();menu=module.launcher.menu;item=Wasutp.Schemes.Helper.getMenuItemBySchemeId(id);if(item){menu.remove(item);Wasutp.desktop.ShortcutManager.deleteShortcutById(item.id);return true}else{return false}},removeMenuItem:function(id,params){var module,menuItems,menu,item;module=Wasutp.Schemes.Helper.getSchemeModule();menuItems=module.getMenuItems();menu=module.launcher.menu;item=Wasutp.Schemes.Helper.getMenuItemByMenuId(id);if(item){item.menu.remove(item.item);Wasutp.desktop.ShortcutManager.deleteShortcutById(item.item.id,params);return true}else{return false}},getSchemeModule:function(){return wasutpApp.getModule("wasutp-scheme")}}});Ext.define("Wasutp.Schemes.NewSchemeOpenDialog",{requires:["Wasutp.Schemes.NewSchemeFormats","Wasutp.Schemes.NewSchemeServerDataModel","Wasutp.Schemes.Helper"],canvas:null,tabs:null,schemePanel:null,updateExtFieldSet:function(format){var dialog=this;dialog.clearExtFieldSet();dialog.initExtFieldSet(format)},clearExtFieldSet:function(){var dialog=this;var extFieldSet=dialog.tabs.extended.fields.extFieldSet;var panel=dialog.tabs.extended.panel;panel.remove(extFieldSet)},initExtFieldSet:function(format){var dialog=this;var panel=dialog.tabs.extended.panel;var formatField=dialog.tabs.extended.fields.formatField;var fields=dialog.tabs.extended.fields;var schemePanel=dialog.schemePanel;var sldiagramCmp=schemePanel.childrens.sldiagramCmp;var sld=sldiagramCmp.sldiagram;var formatGuiClass=Wasutp.Schemes.NewSchemeFormats.getFormatByName(format);var formatSchemeClass=sld.getFormatByName(format);sldiagramCmp.format=new formatGuiClass({sldiagram:sld,format:formatSchemeClass});fields.extFieldSet=sldiagramCmp.format.getOpenFields();if(typeof fields.extFieldSet=="object"&&fields.extFieldSet!=null){panel.add(fields.extFieldSet)}if(formatField.getValue()!=format){formatField.setValue(format)}},initTabsStruct:function(){this.tabs={panel:null,byname:{panel:null,reader:null,proxy:null,store:null,fields:{files:{panel:null,contextMenu:null}}},extended:{panel:null,fields:{formatFieldStore:null,formatField:null,extFieldSet:null}}}},constructor:function(cfg){var dialog=this;if(typeof cfg.canvas!=="object"||cfg.canvas===null){throw"Fatal: cfg.canvas not exist"}else{dialog.canvas=cfg.canvas}if(typeof cfg.schemePanel!=="object"||cfg.schemePanel===null){console.error("Error: cfg.schemePanel not exist")}else{dialog.schemePanel=cfg.schemePanel}dialog.initTabsStruct();var tabs=dialog.tabs;var extended=tabs.extended;var fields=extended.fields;dialog.initByNameTab();this.tabs.extended.fields.formatFieldStore=this.getFormatFieldStore();this.tabs.extended.fields.formatField=this.getFormatField();this.tabs.extended.panel=this.getTabExtended();this.tabs.panel=this.getTabsPanel();this.getBottomToolbar();this.getWin()},getWin:function(){var dialog;if(!this.win){dialog=this;this.win=Ext.create("Ext.window.Window",{title:"Открытие схемы",layout:"fit",closeAction:"hide",width:400,height:400,modal:true,constrain:true,dialog:this,dockedItems:[{dock:"bottom",items:[this.getBottomToolbar()]}],items:[this.getTabsPanel()],listeners:{close:{fn:function(ths){if(window.wasutpApp&&typeof window.wasutpApp.getDesktop==="function"){wasutpApp.getDesktop().taskbar.enable()}dialog._onCancelButtonClick(false)}},show:function(scope,eOpts){try{var formatField=dialog.tabs.extended.fields.formatField;dialog.clearExtFieldSet();formatField.setValue(null);dialog._onShowDialog()}catch(ex){console.error(ex)}setTimeout(function(){var FORCE_INIT_FOCUSABLE=true;dialog.getFocusableComponents(FORCE_INIT_FOCUSABLE)},100);if(window.wasutpApp&&typeof window.wasutpApp.getDesktop==="function"){wasutpApp.getDesktop().taskbar.disable()}},afterrender:function(scope){dialog._createKeyNav(dialog.win)}}})}return this.win},getBottomToolbar:function(){if(!this.bottomToolbar){this.bottomToolbar=Ext.create("Ext.toolbar.Toolbar",{padding:10,border:false,items:["->",this._getOkButton(),this._getCancelButton()]})}return this.bottomToolbar},getTabsPanel:function(){var tabsPanelItems;if(!this.tabsPanel){tabsPanelItems=[];tabsPanelItems.push({itemId:"byName",title:"По названию",items:[this.getTabByname()]});if(SLDiagram.debugMode){tabsPanelItems.push({itemId:"extended",title:"Extended",items:[this.getTabExtended()]})}this.tabsPanel=Ext.create("Ext.tab.Panel",{margin:10,border:false,activeTab:"byName",items:tabsPanelItems})}return this.tabsPanel},getTabExtended:function(){if(!this._tabExtended){this._tabExtended=Ext.create("Ext.panel.Panel",{layout:"anchor",border:false,margin:10,items:[this.getFormatField()]})}return this._tabExtended},getFormatField:function(){if(!this._formatField){this._formatField=Ext.create("Ext.form.field.ComboBox",{fieldLabel:"Формат",store:this.getFormatFieldStore(),displayField:"label",valueField:"name",dialog:this,editable:false,listeners:{change:function(scope,newValue,oldValue,eOpts){try{if(newValue===null){return}var dialog=this.dialog;var format=Wasutp.Schemes.NewSchemeFormats.getFormatByName(newValue);dialog.updateExtFieldSet(newValue)}catch(ex){console.error(ex)}}}})}return this._formatField},getFormatFieldStore:function(){if(!this._formatFieldStore){this._formatFieldStore=Wasutp.Schemes.NewSchemeFormats.getFormatStore()}return this._formatFieldStore},getTabByname:function(){if(!this.tabByname){this.tabByname=Ext.create("Ext.panel.Panel",{layout:"anchor",border:false,margin:10,items:[this._getFilesGrid()]})}return this.tabByname},getContextMenuForFile:function(){if(!this.contextMenuForFile){this.contextMenuForFile=Ext.create("Ext.menu.Menu",{items:[{text:"Удалить",openDialog:this,handler:function(item,ev){var dialog=this.openDialog;return dialog.beforeRemoveFile.apply(dialog,arguments)}}]})}return this.contextMenuForFile},getSLDiagram:function(){return this.canvas},getSchemePanel:function(){return this.schemePanel},_getFilesStoreReader:function(){if(!this._filesStoreReader){this._filesStoreReader=Ext.create("Ext.data.reader.Json",{model:"Wasutp.Schemes.NewSchemeServerDataModel",root:"data"})}return this._filesStoreReader},_getFilesStoreProxy:function(){if(!this._filesStoreProxy){this._filesStoreProxy=Ext.create("Ext.data.proxy.Ajax",{model:"Wasutp.Schemes.NewSchemeServerDataModel",reader:this._getFilesStoreReader(),url:"/json/newschemes/files"})}return this._filesStoreProxy},_getFilesStore:function(){if(!this._filesStore){this._filesStore=Ext.create("Ext.data.Store",{model:"Wasutp.Schemes.NewSchemeServerDataModel",proxy:this._getFilesStoreProxy(),autoLoad:false})}return this._filesStore},_getFilesGrid:function(){var me;if(!this._filesGrid){me=this;this._filesGrid=Ext.create("Ext.grid.Panel",{store:this._getFilesStore(),openDialog:this,height:250,columns:[{text:"Название схемы",dataIndex:"name",flex:1}],listeners:{itemcontextmenu:function(scope,record,item,index,e,eOpts){var dialog=this.openDialog;return dialog.showFileContextMenu.apply(dialog,arguments)},itemdblclick:function(scope,record,item,index,e,eOpts){var dialog=this.openDialog;dialog._openScheme(dialog._configureSchemeByName,function(){dialog.win.close()})}}})}return this._filesGrid},initByNameTab:function(cfg){var dialog=this;var tabs=dialog.tabs;var byname=tabs.byname;byname.reader=this._getFilesStoreReader();byname.proxy=this._getFilesStoreProxy();byname.store=this._getFilesStore();byname.fields.files.contextMenu=this.getContextMenuForFile();byname.fields.files.panel=this._getFilesGrid();byname.panel=this.getTabByname()},beforeRemoveFile:function(item,ev){var dialog=this;var sel=dialog.tabs.byname.fields.files.panel.getSelectionModel().getSelection();var id=sel[0].get("id");var name=(sel[0].get("name")||"");var manager=Wasutp.Schemes.Manager.getInstance();var panel=manager.getSchemePanelById(id);if(panel){SLDiagram.Debug.addMessage("Удаление схемы","Невозможно удалить открытую схему",SLDiagram.Debug.statuses.ERROR);return}var handler=function(btn,text){if(btn==="yes"){dialog.removeFile(id)}};Ext.Msg.show({title:"Удаление схемы",msg:'Вы действительно хотите удалить схему "'+name+'"',buttons:Ext.Msg.YESNO,fn:handler})},removeFile:function(id){var dialog=this;SLDiagram.Ajax.request({url:"/json/newschemes/files",params:{action:"delete",id:id},success:dialog.afterRemoveFile,scope:dialog})},afterRemoveFile:function(resp){var dialog=this;var last_res=SLDiagram.getProperty(resp,"data/last_res")||false;if(last_res===false){var name=SLDiagram.getProperty(resp,"data/name")||"";SLDiagram.Debug.addMessage("Ошибка",'Не удалось удалить схему "'+name+'"',SLDiagram.Debug.statuses.ERROR)}else{var id=Number(SLDiagram.getProperty(resp,"data/id"));if(id===null){SLDiagram.Debug.addMessage("Ошибка","Нет идентификатора схемы. Невозможно обновить списки файлов и меню.",SLDiagram.Debug.statuses.ERROR)}else{var schemePanel=dialog.schemePanel;Wasutp.Schemes.Helper.removeSchemeFromMenu(id);dialog.removeFromFileList(id)}}},showFileContextMenu:function(scope,record,item,index,e,eOpts){var dialog=this;var cm=this.getContextMenuForFile();cm.showAt(e.getXY())},removeFromFileList:function(id){var dialog=this;var store=dialog.tabs.byname.store;var recordId=store.find("id",id,null,null,null,true);store.remove(recordId);store.reload()},updateByNameFields:function(cfg){var dialog=this;var store=this._getFilesStore();store.load()},getActiveTab:function(){var dialog=this;if(!(dialog.tabs.panel.rendered)){return null}else{var atab=dialog.tabs.panel.getActiveTab();var id=atab.getItemId();return id}},setActiveTab:function(tabItemId){var dialog=this;if(dialog.tabs.panel.rendered){return dialog.tabs.panel.setActiveTab(tabItemId)}else{return null}},openActionExtended:function(){console.warn("Выполнение устаревшего метода Wasutp.Schemes.NewSchemeOpenDialog.openActionExtended");return true},openActionByName:function(){console.warn("Выполнение устаревшего метода Wasutp.Schemes.NewSchemeOpenDialog.openActionByName");return true},_configureSchemeByName:function(){var dialog=this;var canvas=dialog.canvas;var sel=dialog.tabs.byname.fields.files.panel.getSelectionModel().getSelection()[0];if(!sel){return false}canvas.clearScheme();var params={id:sel.get("id"),name:sel.get("name")};canvas.setConfigProperty("scheme",params);var format="rtree";canvas.setFormat(canvas.getFormatByName(format));dialog.schemePanel.setTitle(params.name);return true},_configureSchemeExtended:function(){var dialog=this;var canvas=dialog.canvas;canvas.clearScheme();var schemePanel=dialog.schemePanel;var sldCmp=schemePanel.childrens.sldiagramCmp;var formatGui=sldCmp.format;var formatSld=formatGui.format;var params=formatGui.getOpenValues();canvas.setConfigProperty("scheme",params);canvas.setFormat(formatSld);return true},_beforeOpenScheme:function(callback){var sld=this.getSLDiagram(),schemePanel=this.getSchemePanel(),changedState=sld.getChangedState(),schemeName,msg;callback=SLDiagram.Utils.createCallbackFn(callback);if(changedState===false){callback(null,true)}else{schemeName=sld.getSchemeName();msg="Сохранить изменения"+((schemeName)?' в "'+schemeName+'" ':" ")+"перед открытием другой схемы? Все несохранённые изменения будут потеряны.";schemePanel.getUnsavedChangesNotification2({msg:msg},function(err,btn){if(btn==="yes"||btn==="no"){callback(null,true)}else{callback(null,false)}})}},_openScheme:function(configureFn,callback){callback=SLDiagram.Utils.createCallbackFn(callback);var err;if(typeof configureFn!=="function"){err=new Error("Параметр configureFn не является функцией");callback(err,null);this._getExecutorCallback().execute(err,null);throw err}var me=this,sld=this.getSLDiagram(),schemePanel=this.getSchemePanel();SLDiagram.Async.auto({before:function(callback){me._beforeOpenScheme(callback)},open:["before",function(callback,results){var configureRes;if(results.before===true){schemePanel.clearSelection();sld.clearScheme();sld.clearFormat();sld.config=SLDiagram.getSldiagramDefaultConfig();sld.prepareDefaultConfig();schemePanel.resizeSchemePanel(schemePanel);configureRes=configureFn.call(me);if(!configureRes){callback(null,false);return}sld.format.openScheme(function(err,res){me._getExecutorCallback().enable();if(err){callback(err,null)}else{schemePanel.updateZoomComboboxValue();callback(null,Boolean(res[0]&&res[1]))}})}else{callback(null,false)}}]},function(err,results){if(err){callback(err,null);me._getExecutorCallback().execute(err,null)}else{callback(null,results.open);me._getExecutorCallback().execute(null,results.open)}})},_onOkButtonClick:function(){var dialog=this;var res=false;var sel;this._getExecutorCallback().disable();var close=function(err,res){if(res){dialog.win.close()}};try{var atab=dialog.getActiveTab();if(atab==="byName"){sel=dialog.tabs.byname.fields.files.panel.getSelectionModel().getSelection()[0];if(sel){this._openScheme(this._configureSchemeByName,close)}}else{if(atab==="extended"){this._openScheme(this._configureSchemeExtended,close)}}}catch(ex){console.error("ERROR at open scheme from open dialog",ex)}},_onCancelButtonClick:function(close){if(typeof close==="undefined"){close=true}if(close){this.win.close()}this._getExecutorCallback().execute(null,null)},_getSchemeParams:function(){var sld=this.getSLDiagram();var res={};res.type=sld.getConfigProperty("scheme/format/name",null,true);res.id=sld.getSchemeId();res.name=sld.getConfigProperty("scheme/name",null,false);return res},_setCallback:function(fn){if(typeof fn==="function"){this._callback=fn;return true}else{return false}},_getExecutorCallback:function(){var fn;if(!this._executorCallback){fn=function(err,res){if(typeof this._callback==="function"){this._callback.call(this,err,res);delete this._callback}};this._executorCallback=SLDiagram.DisabledFunction.create(fn,this)}return this._executorCallback},show:function(callback){var desk;var wasutpApp=((window.wasutpApp)?window.wasutpApp:null);this._setCallback(callback);if(wasutpApp&&typeof wasutpApp.getDesktop==="function"){desk=wasutpApp.getDesktop();this.win=desk.add(this.win)}this.win.show();return},_onShowDialog:function(){this.setActiveTab("byname");this.updateByNameFields()},_getOkButton:function(){if(!this._okButton){this._okButton=Ext.create("Ext.button.Button",{text:"ОК",dialog:this,handler:this._onOkButtonClick.bind(this)})}return this._okButton},_getCancelButton:function(){if(!this._cancelButton){this._cancelButton=Ext.create("Ext.button.Button",{text:"Отмена",dialog:this,handler:this._onCancelButtonClick.bind(this)})}return this._cancelButton},getFocusableComponents:function(force){var me=this,store,count;if(!this._focusableComponents){this._focusableComponents=[]}if(this._focusableComponents.length===0||force){this._focusableComponents.length=0;this._focusableComponents=this._focusableComponents.concat([{component:this._getFilesGrid(),check:function(){return Boolean(me.getActiveTab()==="byName")},focus:function(){this.component.getView().focus()}},{component:this._getOkButton()},{component:this._getCancelButton()}]);this._focusableIndex=0;setTimeout(function(){var store,count;store=me._getFilesStore();count=store.getCount();if(count>0){me._getFilesGrid().getSelectionModel().select(0)}},300)}return this._focusableComponents},nextFocus:function(){var components=this.getFocusableComponents(),index=this._focusableIndex,i,cmp,res=false,count=0;do{index++;if(index>=components.length){index=0}cmp=components[index];if((typeof cmp.check==="function"&&cmp.check())||typeof cmp.check!=="function"){if(typeof cmp.focus==="function"){cmp.focus()}else{cmp.component.focus()}res=true;this._focusableIndex=index;break}count++}while(!res&&count<components.length);return res},_createKeyNav:function(win){var me;var enter;var esc;if(!this._keyNav){me=this;this._keyNav=Ext.create("Ext.util.KeyNav",{target:win.getEl(),tab:function(){me.nextFocus()}});this._keyNavFilesGrid=Ext.create("Ext.util.KeyNav",{target:this._getFilesGrid().getView().getEl(),space:function(){me._onOkButtonClick()},enter:function(){me._onOkButtonClick()},esc:function(){me._onCancelButtonClick()}})}return this._keyNav},getKeyNav:function(){if(!this._keyNav){this._createKeyNav(this.getWin())}return this._keyNav},getKeyNavForFilesGrid:function(){if(!this._keyNavFilesGrid){this._createKeyNav(this.getWin())}return this._keyNavFilesGrid},getFocusableComponent:function(){var components=this.getFocusableComponents();return components[this._focusableIndex]}});Ext.define("Wasutp.Schemes.NewSchemeSaveDialog",{requires:["Wasutp.Schemes.NewSchemeFormats","Wasutp.window.Window"],canvas:null,win:null,tabs:null,bottomToolbar:null,config:null,updateExtFieldSet:function(format){var dialog=this;dialog.clearExtFieldSet();dialog.initExtFieldSet(format)},clearExtFieldSet:function(){var dialog=this;var extFieldSet=dialog.tabs.extended.fields.extFieldSet;var panel=dialog.tabs.extended.panel;panel.remove(extFieldSet)},initExtFieldSet:function(format){var dialog=this;var panel=dialog.tabs.extended.panel;var formatField=dialog.tabs.extended.fields.formatField;var fields=dialog.tabs.extended.fields;var schemePanel=dialog.schemePanel;var sldiagramCmp=schemePanel.childrens.sldiagramCmp;var sld=sldiagramCmp.sldiagram;var formatGuiClass=Wasutp.Schemes.NewSchemeFormats.getFormatByName(format);var formatSchemeClass=sld.getFormatByName(format);sldiagramCmp.format=new formatGuiClass({sldiagram:sld,format:formatSchemeClass});fields.extFieldSet=sldiagramCmp.format.getSaveFields();if(typeof fields.extFieldSet=="object"&&fields.extFieldSet!=null){panel.add(fields.extFieldSet)}if(formatField.getValue()!=format){formatField.setValue(format)}},updateByNameFields:function(cfg){var dialog=this;dialog.tabs.byname.fields.name.setValue(cfg.name)},initTabsStruct:function(){this.tabs={panel:null,byname:{panel:null,fields:{name:null}},extended:{panel:null,fields:{formatFieldStore:null,formatField:null,extFieldSet:null}}}},constructor:function(cfg){var dialog=this;if(typeof cfg.canvas!="object"||cfg.canvas==null){throw"Fatal: cfg.canvas not exist"}else{dialog.canvas=cfg.canvas}if(typeof cfg.schemePanel!="object"||cfg.schemePanel==null){console.error("Error: cfg.schemePanel not exist")}else{dialog.schemePanel=cfg.schemePanel}dialog.initTabsStruct();var tabs=dialog.tabs;var extended=tabs.extended;var fields=extended.fields;dialog.initByNameTab(cfg);fields.formatFieldStore=Wasutp.Schemes.NewSchemeFormats.getFormatStore();fields.formatField=Ext.create("Ext.form.field.ComboBox",{fieldLabel:"Формат",store:fields.formatFieldStore,displayField:"name",valueField:"name",dialog:dialog,editable:false,listeners:{change:function(scope,newValue,oldValue,eOpts){try{if(newValue==null){return}var dialog=this.dialog;var format=Wasutp.Schemes.NewSchemeFormats.getFormatByName(newValue);dialog.updateExtFieldSet(newValue)}catch(ex){console.error(ex)}}}});extended.panel=Ext.create("Ext.panel.Panel",{layout:"anchor",border:false,margin:10,items:[fields.formatField]});var tabsPanelItems=[{itemId:"byName",title:"По названию",items:[tabs.byname.panel]}];if(SLDiagram.debugMode){tabsPanelItems.push({itemId:"extended",title:"Extended",items:[extended.panel]})}tabs.panel=Ext.create("Ext.tab.Panel",{margin:10,border:false,activeTab:"byName",items:tabsPanelItems});dialog.win=Ext.create("Wasutp.window.Window",{title:"Сохранение схемы",layout:"fit",closeAction:"hide",width:400,height:400,modal:true,constrain:true,dialog:dialog,dockedItems:[{dock:"bottom",items:[dialog.getBottomToolbar()]}],items:[tabs.panel],listeners:{close:{fn:function(ths){if(window.wasutpApp&&typeof window.wasutpApp.getDesktop==="function"){wasutpApp.getDesktop().taskbar.enable()}dialog._execCallback(null,false)}},show:function(scope,eOpts){try{var formatField=dialog.tabs.extended.fields.formatField;dialog.clearExtFieldSet();formatField.setValue(null)}catch(ex){console.error(ex)}setTimeout(function(){dialog.win.focus()},150);setTimeout(function(){dialog.tabs.byname.fields.name.focus(true)},300);if(window.wasutpApp&&typeof window.wasutpApp.getDesktop==="function"){wasutpApp.getDesktop().taskbar.disable()}}}})},initByNameTab:function(cfg){var dialog=this;var tabs=dialog.tabs;var byname=tabs.byname;byname.fields.name=Ext.create("Ext.form.field.Text",{fieldLabel:"Название",anchor:"100%",listeners:{specialkey:function(scope,e,eOpts){var key=e.getKey();if(key===e.ENTER){dialog.onOkButtonClick()}else{if(key===e.ESC){dialog.onCancelButtonClick()}}}}});byname.panel=Ext.create("Ext.panel.Panel",{border:false,margin:10,layout:"anchor",items:[byname.fields.name]})},getActiveTab:function(){var dialog=this;if(!(dialog.tabs.panel.rendered)){return null}else{var atab=dialog.tabs.panel.getActiveTab();var id=atab.getItemId();return id}},setActiveTab:function(tabItemId){var dialog=this;if(dialog.tabs.panel.rendered){return dialog.tabs.panel.setActiveTab(tabItemId)}else{return null}},saveActionExtended:function(){var name,id,oldId,oldName;var dialog=this;var canvas=dialog.canvas;var schemePanel=dialog.schemePanel;var sldiagramCmp=schemePanel.childrens.sldiagramCmp;var guiFormat=sldiagramCmp.format;var sldFormat=guiFormat.format;oldName=canvas.getConfigProperty("scheme/name",null,false);oldId=canvas.getConfigProperty("scheme/id",null,false);var params=guiFormat.getSaveValues();name=params.name;canvas.setConfigProperty("scheme/name",SLDiagram.getProperty(params,"name")||"");canvas.setConfigProperty("scheme/id",SLDiagram.getProperty(params,"id"));canvas.setFormat(sldFormat);canvas.events.listen("afterSaveScheme",this.afterSaveScheme,{once:true,anyContext:true},this);this._saveParams={name:name,old_id:oldId,old_name:oldName};this._saveScheme({},function(err,res,details){dialog._getExecutorCallback().enable();if(err){dialog._execCallback(err,null)}else{dialog._execCallback(null,res)}});return true},saveActionByName:function(){var dialog=this;var canvas=dialog.canvas;var schemePanel=dialog.schemePanel;var name=dialog.tabs.byname.fields.name.getValue();name=dialog.prepareSchemeName(name);if(dialog.checkSchemeName(name)!==true){var msg="Недопустимое название схемы";SLDiagram.Debug.addMessage("Ошибка",msg,SLDiagram.Debug.statuses.ERROR);return false}var format="rtree";var oldId=canvas.getConfigProperty("scheme/id",null,false);var oldName=canvas.getConfigProperty("scheme/name",null,false);var params={};if(name){params.name=name}if(oldId){params.old_id=oldId}SLDiagram.setProperty(dialog.config,"scheme/id",oldId);SLDiagram.setProperty(dialog.config,"scheme/name",oldName);canvas.setFormat(canvas.getFormatByName(format));canvas.events.listen("afterSaveScheme",this.afterSaveScheme,{once:true,anyContext:true},this);this._saveParams={name:name,old_id:oldId,old_name:oldName};this._saveScheme(params,function(err,res,details){dialog._getExecutorCallback().enable();if(err){dialog._execCallback(err,null)}else{dialog._execCallback(null,res)}});dialog.setDialogLock(true);return false},_saveScheme:function(params,callback){var me=this,sld=this.canvas,SUCCESS=1,UNSUCCESS=2,NEED_CONFIRM_REWRITE=3,NO_NEED=4,YES=5,NO=6,saveSchemeDetails;callback=SLDiagram.Utils.createCallbackFn(callback);SLDiagram.Async.auto({saveScheme:function(callback){sld.format.saveScheme(params,function(err,res,details){var schemeExists;if(err){callback(err,null);return}schemeExists=SLDiagram.getProperty(details,"saveScheme/scheme_exists");if(res||schemeExists){saveSchemeDetails=((details&&details.saveScheme)?details.saveScheme:null)}if(res){callback(null,SUCCESS)}else{if(schemeExists){callback(null,NEED_CONFIRM_REWRITE)}else{callback(new Error("Неожиданный ответ на запрос сохранения схемы"),null)}}})},confirmRewrite:["saveScheme",function(callback,results){var msg;if(results.saveScheme===NEED_CONFIRM_REWRITE){msg="Схема "+((saveSchemeDetails&&saveSchemeDetails.name)?'"'+saveSchemeDetails.name+'" ':"")+"уже существует. Вы хотите перезаписать её?";Ext.MessageBox.show({title:"Сохранение схемы",msg:msg,buttons:Ext.MessageBox.YESNO,fn:function(btn){if(btn==="yes"){callback(null,YES)}else{callback(null,NO)}}})}else{callback(null,NO_NEED)}}],saveSchemeForceRewrite:["confirmRewrite",function(callback,results){var p;if(results.confirmRewrite===YES){p=SLDiagram.recursCloneObject(params);p.force_replace=JSON.stringify(true);sld.events.listen("afterSaveScheme",me.afterSaveScheme,{once:true,anyContext:true},me);sld.format.saveScheme(p,function(err,res,details){if(err){callback(err,null)}else{if(res){callback(null,SUCCESS)}else{callback(null,UNSUCCESS)}}})}else{callback(null,NO_NEED)}}]},function(err,results){var res,details;if(err){me.setDialogLock(false);callback(err,false,null)}else{res=Boolean(results.saveScheme===SUCCESS||results.saveSchemeForceRewrite===SUCCESS);details={};details.saveScheme=Boolean(results.saveScheme===SUCCESS);if(results.saveScheme===SUCCESS){details.confirmRewrite=null;details.saveSchemeForceRewrite=null}else{details.confirmRewrite=Boolean(results.confirmRewrite===YES);details.saveSchemeForceRewrite=Boolean(results.saveSchemeForceRewrite===SUCCESS)}me.setDialogLock(false);callback(null,res,details)}})},afterSaveScheme:function(events,type,data){var sld,name,fileName,id;var dialog=this;sld=this.canvas;if(data&&(data.last_res===true||typeof data.last_res==="undefined")){dialog.win.close();name=this._saveParams.name;id=data.id;fileName=data.file_name;sld.setConfigProperty("scheme/name",name);sld.setConfigProperty("scheme/id",id);sld.setConfigProperty("scheme/filename",fileName);dialog.schemePanel.setTitle(name);delete this._saveParams}},prepareSchemeName:function(name){return name.replace(/^\s+|\s+$/g,"")},checkSchemeName:function(name){var count,re;if(typeof name!=="string"&&name.length<=0){return false}else{re=new RegExp("[ 0-9a-zA-Zа-яА-Я_\\-\\.,]","g");count=name.match(re);if(count===null||count.length<name.length){return false}else{re=new RegExp("(^\\s|\\s$)");count=name.match(re);if(count!==null&&count.length>0){return false}else{return true}}}return true},setDialogLock:function(state){var dialog=this;var win=dialog.win;var el=win.getEl();if(state&&typeof el.mask==="function"){el.mask("Saving ...")}else{if(!state&&typeof el==="object"&&typeof el.unmask==="function"){el.unmask()}}},onOkButtonClick:function(){this._getExecutorCallback().disable();var dialog=this;var canvas=dialog.canvas;var schemePanel=dialog.schemePanel;var atab=dialog.getActiveTab();var res;try{if(atab==="extended"){res=dialog.saveActionExtended()}else{res=dialog.saveActionByName()}}catch(ex){console.error("ERROR at save scheme from save dialog: ",ex);res=null}if(res){dialog.win.close()}},onCancelButtonClick:function(){this.win.close();this._execCallback(null,false)},_setCallback:function(callback){if(typeof callback==="function"){this._callback=callback;return true}else{return false}},_execCallback:function(err,res){this._getExecutorCallback().execute(err,res);return},_getExecutorCallback:function(){var fn;if(!this._executorCallback){fn=function(err,res){if(typeof this._callback==="function"){this._callback.call(this,err,res);delete this._callback}};this._executorCallback=SLDiagram.DisabledFunction.create(fn,this)}return this._executorCallback},show:function(callback){var desk;this._setCallback(callback);if(window.wasutpApp&&typeof window.wasutpApp.getDesktop==="function"){desk=wasutpApp.getDesktop();this.win=desk.add(this.win)}this.win.show()},getBottomToolbar:function(){if(!this.bottomToolbar){this.bottomToolbar=Ext.create("Ext.toolbar.Toolbar",{padding:10,border:false,items:["->",{xtype:"button",text:"ОК",dialog:this,handler:this.onOkButtonClick.bind(this)},{xtype:"button",text:"Отмена",dialog:this,handler:this.onCancelButtonClick.bind(this)}]})}return this.bottomToolbar}});Ext.define("Wasutp.Schemes.Info",{singleton:true,ERROR_WRONG_TYPEOF_ID:"Неверный тип аргумента id",ERROR_UNSUCCESS:"Неудачное выполнение запроса",byId:function(id,callback){var me=this;var err;if(typeof callback!=="function"){callback=function(){}}if(typeof id!=="number"&&!(typeof id==="string"&&!isNaN(id)&&isFinite(id))){err=new Error(this.ERROR_WRONG_TYPEOF_ID);callback(err,null);return SLDiagram.Utils.Bluebird.reject(err)}id=Number(id);return new SLDiagram.Utils.Bluebird(function(resolve,reject){var rej=function(err){if(typeof err==="string"){err=new Error(err)}callback(err,null);reject(err)};SLDiagram.Ajax.request({url:"/json/newschemes/get-schemes-info",params:{scheme_id:id},method:"GET",success:function(resp){if(!(resp&&resp.data&&resp.data.last_res)){return rej(me.ERROR_UNSUCCESS)}var scheme;try{scheme=resp.data.schemes[0]}catch(ex){return rej(ex)}callback(null,scheme);resolve(scheme)},unsuccess:function(){rej(me.ERROR_UNSUCCESS)},failure:function(){rej(me.ERROR_UNSUCCESS)},scope:me})})}});Ext.define("Wasutp.Schemes.NewSchemePanel",{requires:["Wasutp.Schemes.NewSchemeFormats","Wasutp.Schemes.NewSchemeOpenDialog","Wasutp.Schemes.NewSchemeSaveDialog","Wasutp.Schemes.NewSchemeDepsLoader","Wasutp.Schemes.NewSchemePalette","Wasutp.Schemes.NewSchemePropertiesEditor","Ext.util.Cookies","Wasutp.Schemes.NewSchemeToggledWidget","Wasutp.Schemes.NewSchemeSchemeContextMenu","Wasutp.Schemes.Manager","Ext.FocusManager","Wasutp.window.Window","Wasutp.Schemes.ConfirmImportModusScheme","Wasutp.Schemes.Info"],panel:null,schemeWindow:null,childrens:null,autoScroll:true,constructor:function(cfg){var schemePanel=this;schemePanel.schemePanel=schemePanel;schemePanel.initDebugMode();this.childrens={toolbars:{actions:null,main:null},rightSideBar:{panel:null,palette:null,properties:null},sldiagramCmp:{panel:null,cmp:null,settings:null,sldiagram:null,format:null},dialogs:{open:null,save:null},dragDrop:{dragSource:null,dropTarget:null}};schemePanel.childrens.sldiagramCmp.settings=SLDiagram.getSldiagramDefaultConfig();var settings=schemePanel.childrens.sldiagramCmp.settings;if(SLDiagram.isObject(cfg)&&SLDiagram.isEmptyObject(cfg)===false){if(SLDiagram.isNumber(cfg.idScheme)){settings.scheme.id=Number(cfg.idScheme)}if(typeof cfg.text==="string"&&cfg.text.length>0){settings.scheme.name=cfg.text}if(typeof cfg.fileName==="string"&&cfg.fileName.length>0){settings.scheme.filename=String(cfg.fileName)+".xsde"}}var sldiagramCmp=schemePanel.childrens.sldiagramCmp;sldiagramCmp.cmp=Ext.create("Ext.Component",{schemePanel:this,autoEl:{tag:"canvas",height:settings.canvasSize.height,width:settings.canvasSize.width},listeners:{afterrender:function(cmp,eOpts){this.schemePanel.afterRenderSLDiagramCmp(cmp)}}});sldiagramCmp.panel=Ext.create("Ext.panel.Panel",{layout:"absolute",region:"center",schemePanel:schemePanel,items:[sldiagramCmp.cmp],listeners:{focus:function(scope,e,eOpts){var schemePanel=scope.schemePanel;schemePanel.setFocusState(true)},blur:function(scope,e,eOpts){var schemePanel=scope.schemePanel;schemePanel.setFocusState(false)}}});sldiagramCmp.sldiagram=new SLDiagram(settings);this.setConfigDescriptor(sldiagramCmp.sldiagram);var sldiagram=schemePanel.childrens.sldiagramCmp.sldiagram;SLDiagram.Manager.registerSLDiagram(sldiagram);var types=SLDiagram.createTypes();for(var i in types){if(types.hasOwnProperty(i)){var type=types[i];sldiagram.addType(type)}}schemePanel.applySLDiagramEvents();if(settings.scheme.id!==null||settings.scheme.filename!==null){sldiagramCmp.sldiagram.setEditMode(false)}var formats=SLDiagram.createFormats();for(var i in formats){if(formats.hasOwnProperty(i)){var f=formats[i];sldiagram.addFormat(f)}}var dialogs=schemePanel.childrens.dialogs;dialogs.open=Ext.create("Wasutp.Schemes.NewSchemeOpenDialog",{canvas:sldiagram,schemePanel:schemePanel});dialogs.save=Ext.create("Wasutp.Schemes.NewSchemeSaveDialog",{canvas:sldiagram,schemePanel:schemePanel});var toolbars=this.childrens.toolbars;var rightSideBar=this.childrens.rightSideBar;this.getRightSideBar();this.getLeftSideBar();schemePanel.addToEditModeToggledWidgets("show",this.getRightSideBar());schemePanel.addToEditModeToggledWidgets("show",this.getLeftSideBar());schemePanel.initMainToolbar();var body=Ext.getBody();schemePanel.panel=Ext.create("Ext.panel.Panel",{layout:"border",height:500,schemePanel:schemePanel,items:[sldiagramCmp.panel,toolbars.main,this.getRightSideBar(),this.getLeftSideBar()],listeners:{resize:this.resizeSchemePanel,afterrender:function(scope,eOpts){var schemePanel=scope.schemePanel;var sldiagramFormatName=SLDiagram.FormatAliases.getSldiagramFormatName(cfg.schemeType)||"rtree";schemePanel.initSLDiagram();try{var sldiagram=schemePanel.childrens.sldiagramCmp.sldiagram;if(sldiagram.config.scheme.id!==null||sldiagram.config.scheme.filename!==null){sldiagram.setFormat(sldiagram.getFormatByName(sldiagramFormatName));if(typeof sldiagram.format==="object"&&SLDiagram.isFormat(sldiagram.format)===true){var f=sldiagram.format;f.openScheme(function(err,res){if(!err){schemePanel._updateZoomComboboxValue()}});sldiagram.getRunner().start("getData")}}var el=schemePanel.childrens.sldiagramCmp.panel.getEl();var scrollEvent=function(e,scope){var schemePanel=this;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;var oldScale=sld.getScale();if(e.browserEvent.wheelDelta>0||e.browserEvent.detail<0){schemePanel.setScale("next")}else{if(e.browserEvent.wheelDelta<0||e.browserEvent.detail>0){schemePanel.setScale("prev")}}newScale=sld.getScale();if(oldScale!==newScale){sld.updateVisibleElements();sld.render()}};el.on("mousewheel",scrollEvent,schemePanel,{stopEvent:true});var palette=schemePanel.getPalettePanel();var sldPanel=schemePanel.childrens.sldiagramCmp.panel;var dragDrop=schemePanel.childrens.dragDrop;dragDrop.dragSource=new Wasutp.Schemes.NewSchemePaletteDragSource(palette.panel.getEl().dom,{ddGroup:"ddGroup",schemePanel:schemePanel,scroll:false,maintainOffset:true});dragDrop.dragSource.config.centerFrame=true;dragDrop.dragSource.applyConfig();var template=new Ext.XTemplate('<tpl for=".">','<div class="palette-element-type" align="center">','<img src="{image}" style="vertical-align: top;">',"</div>","</tpl>");dragDrop.dragSource.setTemplate(template);sldiagram.events.listen("setEditMode",function(events,type,data){if(data&&!data.editMode){this.applyData([])}},{anyContext:true},sldiagram);schemePanel.getAction("grid")({schemePanel:schemePanel},false);dragDrop.dropTarget=new Ext.dd.DropTarget(sldPanel.getEl().dom,{ddGroup:"ddGroup",schemePanel:schemePanel,notifyDrop:function(source,e,data){var schemePanel=this.schemePanel;var palette=schemePanel.getPalettePanel();var dragSource=schemePanel.childrens.dragDrop.dragSource;var type=palette.getSelectedItem();if(!type){return}schemePanel.createElement({type:type,mouseInWindow:{x:e.xy[0],y:e.xy[1]}});dragSource.hideDragEl();palette.setSelectedItem(null);schemePanel.childrens.sldiagramCmp.panel.getEl().focus()}});schemePanel.resizeSchemePanel(schemePanel);schemePanel.getDragAndDropContainer().enableEventListeners();schemePanel.getIndexManager()}catch(ex){console.error("ERROR: at load scheme")}},destroy:function(scope,eOpts){var schemePanel=scope.schemePanel;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;sld.getRunner().stopAll()}}});this._initDomEvents();schemePanel.initDebugMode()},_initDomEvents:function(){var domEvents,sld;if(!this._initDomEventsStatus){this._initDomEventsStatus=true;sld=this.getSLDiagram();domEvents=SLDiagram.DomEvents.getInstance();domEvents.enable();domEvents.on("down",function(){this.move(null,0,1)},this,sld);domEvents.on("right",function(){this.move(null,1,0)},this,sld);domEvents.on("up",function(){this.move(null,0,-1)},this,sld);domEvents.on("left",function(){this.move(null,-1,0)},this,sld);domEvents.on("delete",function(){this.removeSelectedElements()},this,sld);domEvents.on("copy",function(){this.getSLDiagram().copyElementsToClipboard()},this,sld);domEvents.on("paste",function(){this.getSLDiagram().pasteElementsFromClipboard()},this,sld);sld.initControlFocusState();return true}else{return false}},initSLDiagram:function(){var schemePanel=this;var sldiagramCmp=schemePanel.childrens.sldiagramCmp;var canvas_id=sldiagramCmp.cmp.getId();sldiagramCmp.sldiagram.setStage(canvas_id);sldiagramCmp.sldiagram.stage.enableMouseOver(10);var origGetDataPeriodUpdate=sldiagramCmp.sldiagram.getDataPeriodUpdate;sldiagramCmp.sldiagram.getDataPeriodUpdate=function(){var res;try{res=appHelper.getWasutpConfig().schemeUpdatePeriod}catch(ex){res=null}if(!SLDiagram.isNumber(res)){res=origGetDataPeriodUpdate.apply(sldiagramCmp.sldiagram);return((SLDiagram.isNumber(res))?Number(res):5000)}else{return Number(res)}}},getSLDiagram:function(){var sld;try{sld=this.childrens.sldiagramCmp.sldiagram}catch(ex){return null}if(SLDiagram.isSLDiagram(sld)){return sld}else{return null}},getBodySize:function(){var w=0;var h=0;var schemePanel=this;var panel=schemePanel.panel;if(SLDiagram.isObject(panel)===false){return}w=panel.getWidth();h=panel.getHeight();var items=panel.items.items;var regionWidth;for(var i in items){if(items.hasOwnProperty(i)){var item=items[i];if(item.region==="north"){h=h-item.getHeight()}else{if(item.region==="east"||item.region==="west"){regionWidth=item.getWidth();w-=regionWidth;if(regionWidth>0){w-=5}}}}}return{width:w,height:h}},resizeSchemePanel:function(scope,width,height){var schemePanel=scope.schemePanel;var size=schemePanel.getBodySize();if(SLDiagram.isObject(size)===false){return}var sldiagramCmp=schemePanel.childrens.sldiagramCmp;if(sldiagramCmp.sldiagram!=null){sldiagramCmp.sldiagram.setCanvasSize(size.width,size.height)}},move:function(e,dx,dy){var schemePanel=this.schemePanel;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;var els=sld.getSelectedElements();for(var i in els){if(els.hasOwnProperty(i)){var el=els[i];el.move(dx,dy)}}sld.render({delay:10});return true},getFocusState:function(){return((!(this.focus))?false:this.focus)},setFocusState:function(state){if(typeof state!=="boolean"){console.error("ERROR: state is not boolean");return}this.focus=state},setSchemeFocus:function(){var schemePanel=this;schemePanel.childrens.sldiagramCmp.panel.getEl().focus()},addNewSchemeIntoMenu:function(events,type,data){if(data&&data.action==="new"&&data.name&&data.id){var newSchemeItem=Ext.getCmp("wasutp-scheme-menu");if(newSchemeItem){var newSchemes=newSchemeItem.newSchemes;var menu=newSchemeItem.menu;var pos=menu.items.items.length-2;var item=newSchemes.getMenuConfig(data);if(item){menu.insert(pos,item)}}}},applySLDiagramEvents:function(){var schemePanel=this;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;sld.events.listen("afterSaveScheme",schemePanel.addNewSchemeIntoMenu,{block:true,anyContext:true},schemePanel)},setTitle:function(name){var sp=this;var sw;if(sp.schemeWindow){sw=sp.schemeWindow;sw.setTitle(name);if(sw.taskButton&&typeof sw.taskButton.setText==="function"){sw.taskButton.setText(name)}return true}else{return false}},initDebugMode:function(){var debugMode=false;var config;if(window.appHelper&&typeof window.appHelper.getWasutpConfig==="function"){config=appHelper.getWasutpConfig()}else{config={debugMode:true}}if(config&&config.debugMode){debugMode=config.debugMode}else{debugMode=Ext.util.Cookies.get("SLDiagramDebugMode")}if(debugMode){SLDiagram.debugMode=true;if(typeof this.schemePanel==="object"){globalSchemePanel=this.schemePanel}var sld=SLDiagram.getProperty(this.schemePanel,"childrens/sldiagramCmp/sldiagram");if(sld!==null){globalSld=sld}}},getAction:function(name){var schemePanel=this;if(!schemePanel.actions){schemePanel.actions={new_scheme:function(){schemePanel.createNewScheme()},open_scheme:function(){schemePanel.getOpenDialog()},save_scheme:function(){schemePanel.saveScheme(function(err){if(err){console.error(err)}})},saveas_scheme:function(){schemePanel.saveAsScheme(function(err){if(err){console.error(err)}})},create_index:function(){var schemePanel=this.schemePanel;var c=schemePanel.childrens.sldiagramCmp.sldiagram;c.createIndex()},delete_index:function(){var schemePanel=this.schemePanel;var c=schemePanel.childrens.sldiagramCmp.sldiagram;c.dropIndex()},create_global_vars:function(){globalSchemePanel=this.schemePanel;globalSld=globalSchemePanel.childrens.sldiagramCmp.sldiagram;console.debug("Created global vars","globalSchemePanel:",globalSchemePanel,"globalSld:",globalSld)},next_zoom:function(){this.schemePanel.setScale("next")},prev_zoom:function(){this.schemePanel.setScale("prev")},normal_zoom:function(){this.schemePanel.setScale(1,{center:true})},all_zoom:function(){this.schemePanel.setScale("all")},refresh_and_render:function(){var schemePanel=this.schemePanel;var c=schemePanel.childrens.sldiagramCmp.sldiagram;console.debug("Please set breakpoint on me");c.updateVisibleElements();c.render()},grid:function(item,value){var sldiagram=item.schemePanel.childrens.sldiagramCmp.sldiagram;if(value){sldiagram.setGridSettingsFromConfig()}else{if(sldiagram.isEnabledSnapToPixel()){sldiagram.setGridSettingsForPixelSnap()}else{sldiagram.setGridStatus(false);sldiagram.setGridSnapStatus(false)}}sldiagram.render()},snap_to_figures:function(item,value){var sld=item.schemePanel.childrens.sldiagramCmp.sldiagram;sld.setFigureSnapStatus(value)}}}if(typeof name==="string"&&typeof schemePanel.actions[name]==="function"){return schemePanel.actions[name]}else{if(typeof name==="string"&&typeof schemePanel.actions[name]!=="function"){return function(){console.error('ERROR: Обращение за несуществующим действием "'+name+'"')}}else{return schemePanel.actions}}},_getEditModeButton:function(){var acl,disabled;if(this._editModeButton){return this._editModeButton}acl=this._getAclManager();if(acl){if(acl.amIAllowed("oik","adjust")){disabled=false}else{disabled=true}}else{disabled=false}this._editModeButton=Ext.create("Ext.button.Button",{enableToggle:true,tooltip:"Режим редактирования",icon:"/shared/icons/fam/page_edit.png",schemePanel:this,disabled:disabled,toggleHandler:function(editModeButton,state){editModeButton.schemePanel._onEditModeButtonClick(editModeButton,state)}});this._editModeButton.addEvents("switchToEditMode","switchToViewMode");this._editModeButton.addListener("switchToEditMode",this._onSwitchToEditMode,this);return this._editModeButton},getEditModeButton:function(){return this._getEditModeButton()},_onEditModeButtonClick:function(editModeButton,state){var schemePanel=this;var sld=schemePanel.getSLDiagram();var schemeName=sld.getSchemeName();var format=sld.getCurrentFormat();var changedState=sld.getChangedState();if(state===true){schemePanel.setEditMode(true);sld.setChangedState(false,true);editModeButton.toggle(true,true);editModeButton.fireEvent("switchToEditMode");return}else{if(changedState===true){SLDiagram.Async.auto({notification:function(callback){var msg="Перед выходом в оперативный режим необходимо сохранить изменения"+((schemeName)?' в схеме "'+schemeName+'".':".");schemePanel._getUnsavedChangesNotification2({msg:msg,nobutton_hidden:true},callback)},viewMode:["notification",function(callback,results){if(results.notification==="yes"||results.notification==="no"){schemePanel.setEditMode(false);sld.setChangedState(false,true);editModeButton.toggle(false,true);editModeButton.fireEvent("switchToViewMode");if(format){format.openScheme(function(err,results){schemePanel.updateZoomComboboxValue()})}callback(null,true)}else{callback(null,false)}}],cancel:["notification",function(callback,results){if(results.notification==="cancel"){sld.setChangedState(true,true);editModeButton.toggle(true,true);callback(null,true)}else{callback(null,false)}}]},SLDiagram.Utils.createCallbackFn(null,{printErrors:true}));return}else{schemePanel.setEditMode(false);sld.setChangedState(false,true);editModeButton.toggle(false,true);editModeButton.fireEvent("switchToViewMode");if(format){format.openScheme(function(err,results){schemePanel.updateZoomComboboxValue()})}return}}},_getUnsavedChangesNotification:function(params,callback){var p;try{if(typeof callback!=="function"){callback=function(){}}p={title:"Сохранение изменений",msg:"Вы действительно хотите выйти без сохранения изменений?"};if(typeof params==="object"&&params!==null){if(typeof params.title==="string"&&params.title.length>0){p.title=params.title}if(typeof params.msg==="string"&&params.msg.length>0){p.msg=params.msg}}Ext.MessageBox.show({buttons:Ext.MessageBox.YESNO,title:p.title,msg:p.msg,closeAction:"destroy",fn:function(btn){if(["yes","no","cancel"].indexOf(btn)>=0){callback(null,btn)}else{callback(null,"cancel")}}})}catch(ex){callback(ex,null)}},_getUnsavedChangesNotification2:function(params,callback){if(typeof callback!=="function"){callback=function(){}}var p,win,yesHandler,noHandler,cancelHandler,save,sld,me=this,hotkey,yesButton;try{sld=this.getSLDiagram();save=function(callback){callback=SLDiagram.Utils.createCallbackFn(callback);me.saveScheme(callback)};p={};p.title=SLDiagram.getProperty(params,"title")||"Сохранение";p.msg=SLDiagram.getProperty(params,"msg")||"Сохранить изменения в схеме?";p.buttons={};p.buttons.yes=SLDiagram.getProperty(params,"buttons/yes")||"Сохранить";p.buttons.no=SLDiagram.getProperty(params,"buttons/no")||"Не сохранять";p.buttons.cancel=SLDiagram.getProperty(params,"buttons/cancel")||"Отмена";p.save=SLDiagram.getProperty(params,"save")||save;p.buttons.nobutton_hidden=SLDiagram.getProperty(params,"nobutton_hidden")||false;yesHandler=function(){try{win.close();return p.save.call(this,function(err,res){if(err){callback(err,null)}else{if(res===true){callback(null,"yes")}else{callback(null,"cancel")}}})}catch(ex){return callback(ex,null)}};noHandler=function(){try{win.close();return callback(null,"no")}catch(ex){return callback(ex,null)}};cancelHandler=function(){try{win.close();return callback(null,"cancel")}catch(ex){return callback(ex,null)}};yesButton=Ext.create("Ext.button.Button",{id:"yes",text:p.buttons.yes,handler:yesHandler});noButton=Ext.create("Ext.button.Button",{id:"no",text:p.buttons.no,handler:noHandler,hidden:p.buttons.nobutton_hidden});win=Ext.create("Wasutp.window.Window",{title:p.title,layout:"fit",bodyBorder:false,border:false,width:300,height:150,html:'<p style="margin: 15px;">'+p.msg+"</p>",closeAction:"destroy",modal:true,closable:false,defaultFocus:yesButton,buttons:[yesButton,noButton,"->",{id:"cancel",text:p.buttons.cancel,handler:cancelHandler}],listeners:{afterrender:function(scope,eOpts){hotkey=new Ext.util.KeyMap({target:win.getEl().dom,binding:[{key:Ext.EventObject.ESC,fn:cancelHandler}]})}}});win.show()}catch(ex){callback(ex,null);return}},getUnsavedChangesNotification2:function(params,callback){return this._getUnsavedChangesNotification2(params,callback)},initMainToolbar:function(){var schemePanel=this;var toolbars=schemePanel.childrens.toolbars;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;var buttons=[];var zoomComboBox=this.getZoomCombobox();buttons.push(this._getEditModeButton());buttons.push("-");buttons.push(Ext.create("Ext.button.Button",{tooltip:"Увеличение масштаба",icon:"/shared/icons/fam/magnifier_zoom_in.png",schemePanel:schemePanel,handler:schemePanel.getAction("next_zoom")}));buttons.push(Ext.create("Ext.button.Button",{tooltip:"Уменьшение масштаба",icon:"/shared/icons/fam/magnifier_zoom_out.png",schemePanel:schemePanel,handler:schemePanel.getAction("prev_zoom")}));buttons.push(zoomComboBox);buttons.push(Ext.create("Ext.button.Button",{tooltip:"100%",icon:"/shared/icons/fam/magnifier_zoom_100.png",schemePanel:schemePanel,handler:schemePanel.getAction("normal_zoom")}));buttons.push(Ext.create("Ext.button.Button",{tooltip:"Уместить схему в окне",icon:"/shared/icons/fam/magnifier_zoom_all.png",schemePanel:schemePanel,handler:schemePanel.getAction("all_zoom")}));if(SLDiagram.debugMode){buttons.push("-");var refresh=Ext.create("Ext.button.Button",{tooltip:"Обновить рисунок схемы",icon:"/shared/icons/fam/arrow_refresh.png",schemePanel:schemePanel,handler:schemePanel.getAction("refresh_and_render")});buttons.push(refresh)}buttons.push(Ext.create("Ext.toolbar.Separator"));schemePanel.addToEditModeToggledWidgets("show",buttons[buttons.length-1]);var save=Ext.create("Ext.button.Split",{tooltip:"Сохранить",icon:"/shared/icons/fam/page_save.png",schemePanel:schemePanel,handler:schemePanel.getAction("save_scheme"),menu:[{text:"Сохранить",icon:"/shared/icons/fam/page_save.png",schemePanel:schemePanel,handler:schemePanel.getAction("save_scheme")},{text:"Сохранить как ...",icon:"/shared/icons/fam/page_save_as.png",schemePanel:schemePanel,handler:schemePanel.getAction("saveas_scheme")}]});schemePanel.addToEditModeToggledWidgets("show",save);buttons.push(save);buttons.push("->");var anotherItems=Ext.create("Ext.button.Button",{icon:"/shared/icons/fam/cog.png",menu:schemePanel.getMenuForAnotherItems()});schemePanel.addToEditModeToggledWidgets("show",anotherItems);buttons.push(anotherItems);toolbars.main=Ext.create("Ext.toolbar.Toolbar",{region:"north",border:false,items:buttons});schemePanel.setEditMode(false)},_getDebugModeMenuItem:function(){var acl,exist;if(typeof this._debugModeMenuItem!=="undefined"){return this._debugModeMenuItem}acl=this._getAclManager();if(acl){if(acl.amIAllowed("oik","administration")){exist=true}else{exist=false}}else{exist=true}if(exist){this._debugModeMenuItem=Ext.create("Ext.menu.CheckItem",{text:"Режим разработки",schemePanel:this,checked:Boolean(SLDiagram.debugMode),checkHandler:function(item,value){if(value){Ext.util.Cookies.set("SLDiagramDebugMode",1)}else{Ext.util.Cookies.clear("SLDiagramDebugMode")}}})}else{this._debugModeMenuItem=null}return this._debugModeMenuItem},getMenuForAnotherItems:function(){var schemePanel=this;var items=[];var debugModeMenuItem;items.push(Ext.create("Ext.menu.Item",{text:"Новая схема",icon:"/shared/icons/fam/page.png",schemePanel:schemePanel,handler:schemePanel.getAction("new_scheme")}));items.push(Ext.create("Ext.menu.Item",{text:"Открыть",icon:"/shared/icons/fam/folder_page.png",schemePanel:schemePanel,handler:schemePanel.getAction("open_scheme")}));items.push(Ext.create("Ext.menu.Separator"));items.push(Ext.create("Ext.menu.CheckItem",{text:"Сетка",schemePanel:schemePanel,checkHandler:schemePanel.getAction("grid")}));items.push(Ext.create("Ext.menu.CheckItem",{text:"Привязка фигур",schemePanel:schemePanel,checkHandler:schemePanel.getAction("snap_to_figures")}));if(SLDiagram.debugMode){items=items.concat(["-",Ext.create("Ext.menu.Item",{text:"Удалить индекс",schemePanel:schemePanel,handler:schemePanel.getAction("delete_index")}),Ext.create("Ext.menu.Item",{text:"Создать индекс",schemePanel:schemePanel,handler:schemePanel.getAction("create_index")}),Ext.create("Ext.menu.Item",{text:"Создать глобальные переменные",schemePanel:schemePanel,handler:schemePanel.getAction("create_global_vars")})])}debugModeMenuItem=this._getDebugModeMenuItem();if(debugModeMenuItem){items.push("-");items.push(debugModeMenuItem)}return items},getVoltageEditorMenuItem:function(){var me=this;if(!this._voltageEditorMenuItem){this._voltageEditorMenuItem=Ext.create("Ext.menu.Item",{text:"Классы напряжений",handler:function(){var win=me.getVoltageEditor();win.show()}})}return this._voltageEditorMenuItem},getVoltageEditor:function(data){var me=this,sld=this.getSLDiagram(),voltageEditor;voltageEditor=Ext.create("Wasutp.Schemes.extends.VoltageInScheme",{sldiagram:sld});voltageEditor.setCallback(function(err,data){me._afterCloseVoltageEditor(err,data)});if(typeof data==="undefined"){data=sld.getConfigProperty("voltageColors",null,false)}voltageEditor.setData(data);return voltageEditor},_afterCloseVoltageEditor:function(err,data){var sld=this.getSLDiagram();if(err){console.error("Ошибка во время работы редактора классов напряжений:",err)}if(typeof data==="object"&&data!==null){sld.delConfigProperty("voltageColors");sld.setConfigProperty("voltageColors",data);sld.render({clearCache:true})}},getAllZoomsStore:function(){var schemePanel=this;if(typeof schemePanel.zooms==="object"){return schemePanel.zooms}var data=[];var value,label;for(var i=-4;i<=4;i++){value=Math.pow(2,i/2);label=String(SLDiagram.precisionNumber(value*100,0))+"%";data.push({label:label,value:value})}data.push({label:"800%",value:8});data.push({label:"1600%",value:16});var zooms=Ext.create("Ext.data.Store",{fields:["label","value"],data:data});zooms.sort("value","ASC");zooms.load();schemePanel.zooms=zooms;return schemePanel.zooms},getCurrentZoomModel:function(){var schemePanel=this;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;return schemePanel.getZoomModel(sld.getScale())},setScale:function(scale,opts){var schemePanel=this;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;var scaleNum;var scaleStr;var res=false;var newScale;var onlyCenter=((opts&&opts.center)?true:false);if(typeof scale==="number"){var oldRegion=sld.getVisibleRegion();var oldMousePos=((!onlyCenter&&schemePanel.getSchemeMousePosition())||schemePanel.getCenterScheme());var oldScale=sld.getScale();res=sld.setScale(scale);newScale=sld.getScale();if(!res&&SLDiagram.debugMode){console.warn("WARN: Невозможно применить масштаб",scale)}var newRegion=sld.getVisibleRegion();var newMousePos=((!onlyCenter&&schemePanel.getSchemeMousePosition())||schemePanel.getCenterScheme());sld.setCurrentOffset(oldRegion.x+oldMousePos.x-newMousePos.x,oldRegion.y+oldMousePos.y-newMousePos.y);if(oldScale!==newScale){sld.render({updateVisibleElements:true})}}else{if(typeof scale==="string"&&scale.length>0){var zooms=schemePanel.getAllZoomsStore();var currentZoom=schemePanel.getCurrentZoomModel();switch(scale){case"next":case"prev":var anotherZooms=zooms.queryBy(function(r){return Boolean((scale==="next"&&r.get("value")>currentZoom.get("value"))||(scale==="prev"&&r.get("value")<currentZoom.get("value")))});var anotherZoom;if(anotherZooms.getCount()>0){anotherZoom=anotherZooms.get((scale==="next")?0:anotherZooms.getCount()-1)}else{anotherZoom=currentZoom}res=schemePanel.setScale(anotherZoom.get("value"),opts);break;case"all":var margin=10;var schemeRegion=sld.getSchemeRegion();if(!schemeRegion){return false}var screenRegion=schemePanel.getBodySize();schemeRegion.x-=margin;schemeRegion.y-=margin;schemeRegion.width+=margin*2;schemeRegion.height+=margin*2;newScale=Math.min(screenRegion.width/schemeRegion.width,screenRegion.height/schemeRegion.height);res=schemePanel.setScale(newScale,opts);sld.setCurrentOffset(schemeRegion.x,schemeRegion.y);sld.updateVisibleElements();sld.render();break;default:res=schemePanel.setScale(SLDiagram.persentStringToNumber(scale),opts)}}}return res},getZoomModel:function(scale){var schemePanel=this;var store=schemePanel.getAllZoomsStore();var zooms=store.queryBy(function(r){return Boolean(SLDiagram.precisionNumber(r.get("value"),2)===SLDiagram.precisionNumber(scale,2))});var zoom;if(zooms.getCount()>0){if(zooms.getCount()>1&&SLDiagram.debugMode){console.warn("WARN: Найден более чем один масштаб. Будет использован первый найденный.")}zoom=zooms.get(0)}else{zoom=Ext.create("Wasutp.Schemes.NewSchemeZoomModel",{value:scale,label:String(SLDiagram.numberToPersentString(scale,0))})}return zoom},getEditMode:function(){var schemePanel=this;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;return Boolean(sld.getEditMode())},setEditMode:function(state){if(typeof state!=="boolean"&&SLDiagram.debugMode){console.warn("WARN: Wasutp.Schemes.NewSchemePanel.setEditMode: Неверный тип аргумента state")}var schemePanel=this;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;state=Boolean(state);sld.setEditMode(state);schemePanel.setEditModeToggledWidgetsState(state);schemePanel.resizeSchemePanel(schemePanel);if(state){sld.render.setTimeout(50)}if(sld.getEditMode()){this.getPropertiesPanel().changeSelection();this.getSourceSettingsPanel().onChangeSelection();this.getSourcePullStateSettingsPanel().onChangeSelection();this.getSourceTelecontrolSettingsPanel().onChangeSelection();this._sendMessageSaveForbid()}},setEditModeToggledWidgetsState:function(state){var schemePanel=this;var widgets=schemePanel.getEditModeToggledWidgets();for(var i in widgets){if(widgets.hasOwnProperty(i)){var widget=widgets[i];widget.setState(state)}}},getEditModeToggledWidgets:function(){var schemePanel=this;if(!schemePanel.editModeToggledWidgets){return null}else{return schemePanel.editModeToggledWidgets}},addToEditModeToggledWidgets:function(type,widget){var schemePanel=this;if(!schemePanel.editModeToggledWidgets){schemePanel.editModeToggledWidgets=[]}var toggled=Ext.create("Wasutp.Schemes.NewSchemeToggledWidget",{widget:widget,type:type});schemePanel.editModeToggledWidgets.push(toggled)},getSchemeMousePosition:function(except){var sld=this.childrens.sldiagramCmp.sldiagram;if(sld.stage.mouseInBounds){return sld.getMousePosition()}else{return null}},getCenterScheme:function(){var region=this.childrens.sldiagramCmp.sldiagram.getVisibleRegion();return{x:region.x+region.width/2,y:region.y+region.height/2}},getPropertiesPanel:function(){var schemePanel=this;var rightSideBar=schemePanel.childrens.rightSideBar;if(!rightSideBar.properties){rightSideBar.properties=Ext.create("Wasutp.Schemes.NewSchemePropertiesEditor",{schemePanel:schemePanel,width:"100%",flex:3})}return rightSideBar.properties},getSourceSettingsPanel:function(){var rightSideBar=this.childrens.rightSideBar;if(!rightSideBar.settings){rightSideBar.settings=Ext.create("Wasutp.Schemes.NewSchemeSettings",{sldiagram:this.childrens.sldiagramCmp.sldiagram,schemePanel:this,params:{pidFieldValue:null,idTableFieldValue:null,paramId:null,schemeId:null,elementTypeId:null}})}return rightSideBar.settings},getSourcePullStateSettingsPanel:function(){var rightSideBar=this.childrens.rightSideBar;if(!rightSideBar.pullStateSettings){rightSideBar.pullStateSettings=Ext.create("Wasutp.Schemes.NewSchemeSettingsPullState",{sldiagram:this.childrens.sldiagramCmp.sldiagram,schemePanel:this,params:{pidFieldValue:null,idTableFieldValue:null,paramId:null,schemeId:null,elementTypeId:null}})}return rightSideBar.pullStateSettings},getSourceTelecontrolSettingsPanel:function(){var rightSideBar=this.childrens.rightSideBar;if(!rightSideBar.telecontrolSettings){rightSideBar.telecontrolSettings=Ext.create("Wasutp.Schemes.NewSchemeSettingsTelecontrol",{sldiagram:this.childrens.sldiagramCmp.sldiagram,schemePanel:this,params:{pidFieldValue:null,idTableFieldValue:null,paramId:null,schemeId:null,elementTypeId:null}})}return rightSideBar.telecontrolSettings},getDatasourcesPanel:function(){var sideBar,panel;sideBar=this.childrens.rightSideBar;if(!sideBar.datasourcesPanel){panel=Ext.create("Ext.panel.Panel",{items:[this.getSourceSettingsPanel().getSettingsPanel(),this.getSourcePullStateSettingsPanel().getSettingsPanel(),this.getSourceTelecontrolSettingsPanel().getSettingsPanel()]});sideBar.datasourcesPanel=panel}return sideBar.datasourcesPanel},getPalettePanel:function(){if(!this._palette){this._palette=Ext.create("Wasutp.Schemes.NewSchemePalette",{schemePanel:this})}return this._palette},getLeftSideBar:function(widget){var c=this.childrens;var palette;if(!(c.leftSideBar&&c.leftSideBar.panel)){palette=this.getPalettePanel();c.leftSideBar={};c.leftSideBar.palette=this.getPalettePanel();c.leftSideBar.panel=Ext.create("Ext.panel.Panel",{region:"west",layout:"fit",split:true,schemePanel:this,width:140,items:[palette.getPanel()],listeners:{resize:this.resizeSchemePanel}})}if(!widget||!c.leftSideBar.hasOwnProperty(widget)){widget="panel"}return c.leftSideBar[widget]},getRightSideBar:function(widget){var c=this.childrens;if(!(c.rightSideBar&&c.rightSideBar.panel)){c.rightSideBar={};c.rightSideBar.properties=this.getPropertiesPanel();c.rightSideBar.settings=this.getSourceSettingsPanel();c.rightSideBar.panel=Ext.create("Ext.panel.Panel",{region:"east",layout:"vbox",split:true,schemePanel:this,width:300,items:[this.getPropertiesPanel().panel,this.getSourceSettingsPanel().getSettingsPanel(),this.getSourcePullStateSettingsPanel().getSettingsPanel(),this.getSourceTelecontrolSettingsPanel().getSettingsPanel()],listeners:{resize:this.resizeSchemePanel}})}if(!widget||!c.rightSideBar.hasOwnProperty(widget)){widget="panel"}return c.rightSideBar[widget]},setConfigDescriptor:function(sld){sld.configDescriptor=SLDiagram.getSldiagramDefaultConfigDescriptor()},getZoomCombobox:function(){var schemePanel=this;var sld;if(!this.zoomComboBox){sld=this.getSLDiagram();this.zoomComboBox=Ext.create("Ext.form.field.ComboBox",{displayField:"label",valueField:"value",store:schemePanel.getAllZoomsStore(),editable:true,width:75,schemePanel:schemePanel,enableKeyEvents:true,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item" align="right">{label}</div>',"</tpl>"),onUpdateSchemeConfig:function(events,type,data){var schemePanel=this.schemePanel;if(data.path==="scale"){schemePanel._updateZoomComboboxValue()}},changeValue:function(newValue){var zoomComboBox=this;var schemePanel=zoomComboBox.schemePanel;var sld=schemePanel.childrens.sldiagramCmp.sldiagram;var zooms=schemePanel.getAllZoomsStore();var scale;var resFromZooms;if(typeof newValue==="string"){resFromZooms=zooms.query("label",newValue).get(0);if(typeof resFromZooms==="object"&&resFromZooms.get){scale=resFromZooms.get("value")}else{scale=SLDiagram.persentStringToNumber(newValue)}}else{if(typeof newValue==="number"){scale=newValue}}if(typeof scale!=="number"){if(SLDiagram.debugMode){console.warn("WARN: Не удалось распарсить масштаб. Будет использован масштаб 100%.")}scale=1}return schemePanel.setScale(scale,{center:true})},setManualInputState:function(state){this.manualInputState=Boolean(state);return true},getManualInputState:function(){return Boolean(this.manualInputState)},changeValueTask:Ext.create("Ext.util.DelayedTask"),changeValueForEvents:function(newValue){this.changeValue(newValue);this.setManualInputState(false)},listeners:{change:function(zoomComboBox,newValue,oldValue,eOpts){if(zoomComboBox.getManualInputState()){zoomComboBox.changeValueTask.delay(500,zoomComboBox.changeValueForEvents,zoomComboBox,[newValue])}else{zoomComboBox.changeValueForEvents(newValue)}},beforequery:function(queryPlan,eOpts){return queryPlan.forceAll},keydown:function(zoomComboBox,e,eOpts){zoomComboBox.setManualInputState(true)}}});sld.events.listen("onUpdateSchemeConfig",this.zoomComboBox.onUpdateSchemeConfig,{block:true,anyContext:true},this.zoomComboBox);this._updateZoomComboboxValue()}return this.zoomComboBox},contextMenu:null,getContextMenu:function(){if(!this.contextMenu){this.contextMenu=Ext.create("Wasutp.Schemes.NewSchemeSchemeContextMenu",{schemePanel:this})}return this.contextMenu},afterRenderSLDiagramCmp:function(cmp){cmp.getEl().on("contextmenu",function(e,t,eOpts){this.getContextMenu().showContextMenu(e)},this);this.getEvents().addListener("afterNewSchemeClick",this._updateSchemeSettingsOnNewScheme,this)},_updateZoomComboboxValue:function(){var zoomCombobox,sld,scale,currentValue,zoomModel,zoomLabel;zoomCombobox=this.getZoomCombobox();sld=this.getSLDiagram();scale=sld.getScale();currentValue=zoomCombobox.getValue();zoomModel=this.getZoomModel(scale);zoomLabel=zoomModel.get("label");if(currentValue!==zoomLabel){zoomCombobox.setValue(zoomModel)}},updateZoomComboboxValue:function(){return this._updateZoomComboboxValue()},updateEditModeButtonState:function(){var update,me=this,schemeWindow=this.getSchemeWindow();update=function(){me.getEditModeButton().toggle(me.getEditMode())};if(!schemeWindow){this.panel.addListener("afterrender",update,this,{single:true})}else{if(!schemeWindow.rendered){schemeWindow.addListener("afterrender",update,this,{signle:true})}else{update.call(this)}}},_getAclManager:function(){var appHelper=((window.appHelper)?window.appHelper:null);if(appHelper&&typeof appHelper.getAclManager==="function"){return appHelper.getAclManager()}else{return null}},_checkSavePermission:function(){var acl=this._getAclManager();if(acl){return acl.amIAllowed("oik","adjust")}else{return true}},_sendMessageSaveForbid:function(force){var acl=this._getAclManager(),title="Ограничение прав доступа",msg="У вас недостаточно прав для сохранения схемы";if(!this._checkSavePermission()||force){if(acl){acl.aclFailureMessage({title:title,message:msg})}else{console.error(title+": "+msg)}}},getSchemeWindow:function(){if(this.schemeWindow){return this.schemeWindow}else{return null}},onCloseWindow:function(callback){var sld=this.getSLDiagram(),schemeName=sld.getSchemeName(),unsavedChanges=sld.getChangedState(),win=this.getSchemeWindow(),me=this;if(typeof callback!=="function"){callback=function(){}}if(unsavedChanges){SLDiagram.Async.auto({notification:function(callback,results){var msg="Сохранить изменения перед закрытием схемы"+((schemeName)?' "'+schemeName+'"':"")+"? Все несохранённые изменения будут потеряны.";me._getUnsavedChangesNotification2({msg:msg},callback)},close:["notification",function(callback,results){if(results.notification==="yes"||results.notification==="no"){if(win){win.suspendEvents();win.close();win.resumeEvents()}me.getEvents().fireEvent("close",me);callback(null,true)}else{callback(null,false)}}],cancel:["notification",function(callback,results){if(results.notification==="cancel"){callback(null,true)}else{callback(null,false)}}]},SLDiagram.Utils.createCallbackFn(null,{printError:true}));return}else{if(win){win.suspendEvents();win.close();win.resumeEvents()}this.getEvents().fireEvent("close",this);return callback(null,true)}},getEvents:function(){if(!this._events){this._events=Ext.create("Ext.util.Observable");this._events.addEvents("save");this._events.addEvents("close");this._events.addEvents("afterNewSchemeClick")}return this._events},getSchemeWindowId:function(){var win=this.getSchemeWindow();if(win){return win.id}else{return null}},getDesktop:function(){try{return wasutpApp.getDesktop()}catch(ex){return null}},createNewScheme:function(callback){var me=this,sld,schemeName,createNewSchemeFn,saveRequestFn,getChangedStateFn;if(typeof callback!=="function"){callback=function(){}}try{sld=this.getSLDiagram();schemeName=sld.getSchemeName();getChangedStateFn=function(callback,results){try{callback(null,sld.getChangedState());return}catch(ex){callback(ex,null);return}};saveRequestFn=function(callback,results){var msg,cb;try{msg="Сохранить изменения"+((schemeName)?' в "'+schemeName+'" ':" ")+"перед созданием новой схемы? Все несохранённые изменения будут потеряны.";cb=function(err,res){if(res==="yes"||res==="no"){callback(null,true);return}else{callback(null,false);return}};if(results.getChangedStateFn===true){me._getUnsavedChangesNotification2({msg:msg},cb);return}else{callback(null,true);return}}catch(ex){callback(ex,null);return}};createNewSchemeFn=function(callback,results){try{if(results.saveRequestFn===false){callback(null,false);return}me.clearSelection();sld.clearScheme();sld.clearFormat();sld.config=SLDiagram.getSldiagramDefaultConfig();sld.prepareDefaultConfig();me.setTitle(SLDiagram.newSchemeName);sld.updateVisibleElements();sld.render();me.getEvents().fireEvent("afterNewSchemeClick",sld,me);me.resizeSchemePanel(me);me.updateZoomComboboxValue();sld.getSchemeAndDatabaseIds().clearData();callback(null,true);return}catch(ex){callback(ex,null);return}};SLDiagram.Async.auto({getChangedStateFn:getChangedStateFn,saveRequestFn:["getChangedStateFn",saveRequestFn],createNewSchemeFn:["saveRequestFn",createNewSchemeFn]},function(err,results){if(err){console.error(err);callback(err,null);return}else{callback(null,results.createNewSchemeFn);return}});return}catch(ex){callback(ex,null);return}},getSaveAsDialog:function(callback){if(typeof callback!=="function"){callback=function(){}}var saveDialog=SLDiagram.getProperty(this,"childrens/dialogs/save"),sld=this.getSLDiagram(),schemeName;if(!saveDialog){saveDialog=Ext.create("Wasutp.Schemes.NewSchemeSaveDialog",{canvas:this.getSLDiagram(),schemePanel:this});SLDiagram.setProperty(this,"childrens/dialogs/save",saveDialog)}saveDialog.setActiveTab("byName");schemeName=sld.getConfigProperty("scheme/name","",false);saveDialog.updateByNameFields({name:schemeName});saveDialog.show(callback);return saveDialog},saveScheme:function(callback){if(typeof callback!=="function"){callback=function(){}}var sld=this.getSLDiagram();if(sld.isNewScheme()){return this.saveAsScheme(callback)}else{this.getEvents().fireEvent("save");return sld.format.saveScheme(null,function(err,res){if(err){return callback(err,null)}else{return callback(null,true)}})}},saveAsScheme:function(callback){if(typeof callback!=="function"){callback=function(){}}this.getEvents().fireEvent("save");return this.getSaveAsDialog(callback)},clearSelection:function(){var sld=this.getSLDiagram();sld.changeSelection({actions:[{action:"clear"}]});return true},getOpenDialog:function(callback){callback=SLDiagram.Utils.createCallbackFn(callback);var openDialog=SLDiagram.getProperty(this,"childrens/dialogs/open");if(!openDialog){openDialog=Ext.create("Wasutp.Schemes.NewSchemeOpenDialog",{canvas:this.getSLDiagram(),schemePanel:this});SLDiagram.setProperty(this,"childrens/dialogs/open",openDialog)}openDialog.show(callback);return openDialog},createElement:function(params){var sld=this.getSLDiagram();var el,type,canvasRect,canvasPos,screenPos,schemePos,deltaForSnap;if(typeof params.type==="string"){type=sld.getTypeByName(params.type)}else{if(typeof params.type==="number"){type=sld.getTypeById(params.type)}else{type=params.type}}if(!type){throw new Error("Не корректно задан или не удалось определить тип элемента")}el=new SLDiagram.Element({type:type});if(params.pos){schemePos=params.pos}else{if(params.mouseInSchemeRegion){screenPos=params.mouseInSchemeRegion;schemePos=sld.screenToScheme(screenPos.x,screenPos.y)}else{if(params.mouseInWindow){canvasRect=sld.stage.canvas.getClientRects();canvasPos={x:canvasRect[0].left,y:canvasRect[0].top};screenPos={x:SLDiagram.precisionNumber(params.mouseInWindow.x-canvasPos.x,4),y:SLDiagram.precisionNumber(params.mouseInWindow.y-canvasPos.y,4)};schemePos=sld.screenToScheme(screenPos.x,screenPos.y)}else{throw new Error("Невозможно определить координаты для создаваемого элемента")}}}el.setPosition(schemePos.x,schemePos.y);sld.addElement(el);deltaForSnap=el.calcDeltaForSnapOnMove({x:schemePos.x,y:schemePos.y,elementCaller:el,diff:{x:0,y:0}});el.setPosition(SLDiagram.precisionNumber(schemePos.x+deltaForSnap.x,4),SLDiagram.precisionNumber(schemePos.y+deltaForSnap.y,4));sld.changeSelection({actions:[{action:"clear"},{action:"add",elements:[el]}],disableDraw:true});sld.updateVisibleElements();sld.render();return true},_onSwitchToEditMode:function(){var sld=this.getSLDiagram();if(sld.getGridStatus()){sld.setGridSettingsFromConfig();sld.render()}if(this.getDisableChangeDatasourcesState()){this.sendNotifyDisableChangeDatasources()}},_updateSchemeSettingsOnNewScheme:function(sld,panel){if(sld.getGridStatus()){sld.setGridSettingsFromConfig();sld.render()}},getDisableChangeDatasourcesState:function(){var path="appHelper/config/wasutpConfig/disableChangeDatasources";return Boolean(SLDiagram.getProperty(window,path))},sendNotifyDisableChangeDatasources:function(){var msg="Установлен запрет на редактирование источников данных";SLDiagram.Debug.addMessage("Редактирование источников данных",msg,SLDiagram.Debug.statuses.INFO,{showPopUp:true})},removeSelectedElements:function(){var editMode=this.getEditMode();if(editMode===false){return}var disabledChangeDatasources=this.getDisableChangeDatasourcesState();var sld=this.getSLDiagram();var i,el,id,ds,hasDs,canRemove,needRender=false,deletedElements=[];for(i in sld.selectedElements){if(sld.selectedElements.hasOwnProperty(i)){el=sld.selectedElements[i];id=el.getId();ds=((id!==null)?sld.getSchemeAndDatabaseIds().searchBySchemeId(id):null);hasDs=Boolean(ds&&ds.length>0);canRemove=Boolean(!disabledChangeDatasources||!hasDs);if(canRemove){deletedElements.push(el);el.removeElement();needRender=true}}}sld.changeSelection({actions:[{action:"remove",elements:deletedElements}],disableDraw:true});if(needRender){sld.updateVisibleElements();sld.render()}return needRender},_createDragAndDropContainer:function(){if(!this._dragAndDropContainer){this._dragAndDropContainer=new SLDiagram.Modus.DragAndDropContainer({sldiagram:this.getSLDiagram()})}},getDragAndDropContainer:function(){var sld;var checkItem;this._createDragAndDropContainer();this._dragAndDropContainer.removeAllListeners("beforeconvert");this._dragAndDropContainer.addListener("beforeconvert",this.onBeforeConvert.bind(this));return this._dragAndDropContainer},getConfirmImportModusScheme:function(){if(!this._confirmImportModusScheme){this._confirmImportModusScheme=Ext.create("Wasutp.Schemes.ConfirmImportModusScheme",{schemePanel:this})}return this._confirmImportModusScheme},onBeforeConvert:function(){var confirm=this.getConfirmImportModusScheme();var me=this;var sld=this.getSLDiagram();var Bluebird=SLDiagram.Utils.Bluebird;if(!sld.getEditMode()){return Bluebird.resolve(false)}return confirm.confirm().then(function(confirmImportRes){if(confirmImportRes&&!SLDiagram.Underscore.isEmpty(sld.elements)){return new Bluebird(function(resolve,reject){return me.createNewScheme(function(err,confirmSaveRes){if(err){return reject(err)}else{return resolve(confirmSaveRes)}})})}else{return Bluebird.resolve(confirmImportRes)}})},getIndexManager:function(){if(!this._indexManager){this._indexManager=Ext.create("Wasutp.Schemes.IndexManager",{panel:this})}return this._indexManager}});Ext.define("Wasutp.Schemes.NewScheme",{extend:"Ext.ux.desktop.Module",requires:["Wasutp.Schemes.NewSchemePanel","Wasutp.Schemes.NewSchemeDepsLoader"],launchScheme:function(src){var me=this;if(src.usMenuId){Wasutp.Ajax.request({url:"/json/menu/isset-menu",params:{usMenuId:src.usMenuId},success:function(response){if(response.data&&response.data.result){Wasutp.Schemes.Info.byId(src.idScheme).then(function(data){var type;if(data){type=SLDiagram.FormatAliases.getDefineAlias(data.type);if(type!==null){src.schemeType=type}}})["catch"](function(err){console.error(err)}).then(function(){me.createWindow(src)})}else{var desktop=wasutpApp.getDesktop(),module=desktop.app.getModule(src.module);desktop.deleteItem(function(){desktop.deleteShortcut(src.id);desktop.deleteMenuItem(module,src)})}}})}},createWindow:function(src){var desktop=this.app.getDesktop();var manager=Wasutp.Schemes.Manager.getInstance(),schemeId,panel,win,schemePanel;SLDiagram.Ajax=Wasutp.Ajax;SLDiagram.Debug.wasutpErrorsHandler=errorsHandler;if(src&&typeof src.idScheme!=="undefined"&&SLDiagram.isNumber(src.idScheme)){schemeId=Number(src.idScheme);panel=manager.getSchemePanelById(schemeId);if(panel){win=panel.getSchemeWindow()}}if(!win){schemePanel=Ext.create("Wasutp.Schemes.NewSchemePanel",src);win=desktop.createWindow({id:Ext.id(),title:src.text,width:700,height:500,layout:"fit",iconCls:"wasutp-schemes",schemePanel:schemePanel,items:[schemePanel.panel],listeners:{afterrender:function(scope){var sld=this.schemePanel.getSLDiagram();console.log("Render successful!")},activate:function(scope,eOpts){var win=this;var schemePanel=win.schemePanel;schemePanel.setSchemeFocus();var sld=schemePanel.getSLDiagram()},beforeclose:function(panel,eOpts){schemePanel.onCloseWindow();return false}}});manager.add(schemePanel);schemePanel.schemeWindow=win}win.show();return win}});Ext.define("Wasutp.Schemes.NewScheme",{extend:"Ext.ux.desktop.Module",requires:["Wasutp.Schemes.NewSchemePanel","Wasutp.Schemes.NewSchemeDepsLoader"],launchScheme:function(src){var me=this;if(src.usMenuId){Wasutp.Ajax.request({url:"/json/menu/isset-menu",params:{usMenuId:src.usMenuId},success:function(response){if(response.data&&response.data.result){Wasutp.Schemes.Info.byId(src.idScheme).then(function(data){var type;if(data){type=SLDiagram.FormatAliases.getDefineAlias(data.type);if(type!==null){src.schemeType=type}}})["catch"](function(err){console.error(err)}).then(function(){me.createWindow(src)})}else{var desktop=wasutpApp.getDesktop(),module=desktop.app.getModule(src.module);desktop.deleteItem(function(){desktop.deleteShortcut(src.id);desktop.deleteMenuItem(module,src)})}}})}},createWindow:function(src){var desktop=this.app.getDesktop();var manager=Wasutp.Schemes.Manager.getInstance(),schemeId,panel,win,schemePanel;SLDiagram.Ajax=Wasutp.Ajax;SLDiagram.Debug.wasutpErrorsHandler=errorsHandler;if(src&&typeof src.idScheme!=="undefined"&&SLDiagram.isNumber(src.idScheme)){schemeId=Number(src.idScheme);panel=manager.getSchemePanelById(schemeId);if(panel){win=panel.getSchemeWindow()}}if(!win){schemePanel=Ext.create("Wasutp.Schemes.NewSchemePanel",src);win=desktop.createWindow({id:Ext.id(),title:src.text,width:700,height:500,layout:"fit",iconCls:"wasutp-schemes",schemePanel:schemePanel,items:[schemePanel.panel],listeners:{afterrender:function(scope){var sld=this.schemePanel.getSLDiagram();console.log("Render successful!")},activate:function(scope,eOpts){var win=this;var schemePanel=win.schemePanel;schemePanel.setSchemeFocus();var sld=schemePanel.getSLDiagram()},beforeclose:function(panel,eOpts){schemePanel.onCloseWindow();return false}}});manager.add(schemePanel);schemePanel.schemeWindow=win}win.show();return win}});Ext.define("Wasutp.Schemes.NewSchemes",{extend:"Wasutp.Schemes.NewScheme",requires:["Wasutp.Schemes.NewSchemePanel"],schemesMenuId:"wasutp-scheme-menu",id:"wasutp-scheme",init:function(){var items=this.getMenuItems();items.push({xtype:"menuseparator"});items.push({text:"Новая ...",iconCls:Wasutp.Menu.getItem(["schemes"]).iconCls,scope:this,handler:this.createNewScheme});this.launcher={id:this.schemesMenuId,text:Wasutp.Menu.getItem(["schemes"]).title,iconCls:Wasutp.Menu.getItem(["schemes"]).iconCls,newSchemes:this,hideOnClick:false,handler:function(ths,e){ths.expandMenu();return false}};var menu=this.getMenuItems();if(items.length){this.launcher.menu=Ext.create("Wasutp.menu.Menu",{items:items})}},createNewScheme:function(src){var acl=null,win;if(appHelper&&typeof appHelper.getAclManager==="function"){acl=appHelper.getAclManager()}if(acl&&!acl.amIAllowed("oik","adjust")){acl.aclFailureMessage({message:"У вас недостаточно прав для редактирования и сохранения схем"});return null}win=this.createWindow(src);win.schemePanel.setEditMode(true);win.schemePanel.updateEditModeButtonState();return win},supportSchemeTypes:["OTYP_MODUS_SCHEME","OTYP_RTREE_SLDIAGRAM"],getMenuItems:function(){var me=this;var menu=[],items=appHelper.getMenuSchemes(),menuConfig;for(var i in items){if(items[i].FILE_NAME||items[i].M_ID_PARAM){if(this.supportSchemeTypes.indexOf(items[i].DEFINE_ALIAS)>=0){menuConfig=this.getMenuConfig(items[i]);if(menuConfig){menu.push(menuConfig)}}}else{menu.push({text:items[i].M_NAME,iconCls:"x-tree-icon-parent",scope:me,windowId:items[i].M_ID,idScheme:items[i].M_ID_PARAM,fileName:items[i].FILE_NAME,handler:function(){return false},menu:{items:[],listeners:{beforeshow:function(){return false}}},listeners:{focus:function(ths){return me.addNesteditems(ths)}}})}}return menu},addNesteditems:function(ths){var me=this;if(!ths.uirName&&!ths.menu.items.length){Wasutp.Ajax.request({params:{id:ths.windowId,type:"scheme"},url:"/json/application/getChildMenuItems",success:function(response){if(response.data.length===0){return false}var menuConfig;ths.menu=Ext.create("Wasutp.menu.Menu",{items:[]});for(var i in response.data){if(response.data[i].FILE_NAME||response.data[i].M_ID_PARAM){if(me.supportSchemeTypes.indexOf(response.data[i].DEFINE_ALIAS)>=0){menuConfig=me.getMenuConfig(response.data[i]);if(menuConfig){ths.menu.add(menuConfig)}}}else{ths.menu.add({text:response.data[i].M_NAME,iconCls:"x-tree-icon-parent",scope:me,windowId:response.data[i].M_ID,idScheme:response.data[i].M_ID_PARAM,fileName:response.data[i].FILE_NAME,handler:function(){return false},menu:{items:[],listeners:{beforeshow:function(){return false}}},listeners:{focus:function(ths){return me.addNesteditems(ths)}}})}}ths.doExpandMenu()}})}},getMenuConfig:function(config){var me=this;var r={iconCls:Wasutp.Menu.getItem(["schemes"]).iconCls,handler:this.launchScheme,scope:this,module:this.id,listeners:{afterrender:function(menuItem){menuItem.getEl().on("contextmenu",function(e,dom){e.stopEvent();e.preventDefault();var sm=Wasutp.desktop.ShortcutManager,menu=sm.getMainSubMenu();menu.menuItem=menuItem;menu.add({iconCls:"switchoff",text:"Удалить схему",handler:function(ths,event,q){me._onClickDeleteInContextMenu(menuItem)}});sm.showMenu(menu,e);return false})}}};r.text=config.M_NAME||config.name;if(typeof config.M_ID!=="undefined"){r.windowId=config.M_ID}if(typeof config.menu_id!=="undefined"){r.windowId=String(config.menu_id)}r.fileName=config.FILE_NAME||config.fileName||"";r.idScheme=config.M_ID_PARAM||config.id;r.schemeType=config.DEFINE_ALIAS;if(typeof config.M_ID!=="undefined"){r.id=this._getId(config.M_ID);if(isFinite(config.M_ID)){r.usMenuId=Number(config.M_ID)}}if(typeof config.menu_id!=="undefined"){r.id=this._getId(config.menu_id);if(isFinite(config.menu_id)){r.usMenuId=Number(config.menu_id)}}if(!this._checkMenuConfig(r)){console.warn("WARN: Wrong menu config:",r);return null}return r},_getSchemeInfo:function(schemeId,callback){var errMsg="Не удалось получить с сервера isms данные о схеме",schemeInfo;callback=SLDiagram.Utils.createCallbackFn(callback);Wasutp.Ajax.request({url:"/json/newschemes/get-schemes-info",params:{scheme_id:String(schemeId)},scope:this,success:function(resp){var isSuccess;isSuccess=Boolean(resp.success&&resp.data&&resp.data.last_res&&resp.data.schemes.length>0&&resp.data.schemes[0].id===schemeId);if(isSuccess){schemeInfo=resp.data.schemes[0];callback(null,schemeInfo)}else{callback(null,null)}},unsuccess:function(){callback(new Error(errMsg),null)},failure:function(){callback(new Error(errMsg),null)}})},_confirmDeleteSchemeYesNo:function(params,callback){var title,msg,name;callback=SLDiagram.Utils.createCallbackFn(callback);name=SLDiagram.getProperty(params,"name");msg=SLDiagram.getProperty(params,"msg")||"Вы действительно хотите удалить схему"+((name)?' "'+name+'"':"")+"?";title=SLDiagram.getProperty(params,"title")||"Удаление схемы";Ext.MessageBox.show({title:title,msg:msg,buttons:Ext.MessageBox.YESNO,closable:false,fn:function(btn){if(btn==="yes"){callback(null,"yes")}else{callback(null,"no")}}})},_confirmDeleteMenuOrSchemeYesNoCancel:function(params,callback){var title,msg,name;callback=SLDiagram.Utils.createCallbackFn(callback);name=SLDiagram.getProperty(params,"name");msg=SLDiagram.getProperty(params,"msg")||"Схема"+((name)?' "'+name+'" ':" ")+"будет удалена из меню предпочтений текущего пользователя. Вы желаете удалить исходную схему?";title=SLDiagram.getProperty(params,"title")||"Удаление пункта меню";Ext.MessageBox.show({title:title,msg:msg,buttons:Ext.MessageBox.YESNOCANCEL,closable:false,fn:function(btn){if(btn==="yes"){callback(null,"yes")}else{if(btn==="no"){callback(null,"no")}else{callback(null,"cancel")}}}})},_deleteMenuItem:function(menuId,callback){var errMsg="Не удалось удалить пункт меню схемы из предпочтений";var title="Удаление меню схемы";callback=SLDiagram.Utils.createCallbackFn(callback);Wasutp.Ajax.request({url:"/json/newschemes/delete-menu",params:{menu_id:String(menuId)},scope:this,success:function(resp){var msg,menuName,schemeName;if(resp&&resp.data&&resp.data.last_res){menuName=resp.data.menu_name;schemeName=resp.data.scheme_name;msg="Успешно удалён пункт меню"+((menuName)?' "'+menuName+'"':"")+((schemeName)?' для схемы "'+schemeName+'"':"")+".";errorsHandler.addMessage(title,msg,1);callback(null,resp.data)}else{errorsHandler.addMessage(title,errMsg,0,null,true);callback(new Error(errMsg),null)}},unsuccess:function(){errorsHandler.addMessage(title,errMsg,0,null,true);callback(new Error(errMsg),null)},failure:function(){errorsHandler.addMessage(title,errMsg,0,null,true);callback(new Error(errMsg),null)}})},_afterDeleteMenuItems:function(menuIds,params){var res=[],i,menuId;for(i=0;i<menuIds.length;i++){menuId=menuIds[i];if(Wasutp.Schemes.Helper.removeMenuItem(menuId,params)){res.push(menuId)}}return res},_deleteScheme:function(schemeId,callback){var errMsg="Не удалось удалить схему";var title="Удаление схемы";callback=SLDiagram.Utils.createCallbackFn(callback);Wasutp.Ajax.request({url:"/json/newschemesrtree/delete-file",params:{scheme_id:String(schemeId),force_delete_menu:JSON.stringify(true)},scope:this,success:function(resp){var msg,schemeName;if(resp&&resp.data&&resp.data.last_res){schemeName=resp.data.scheme_name;msg="Схема"+((schemeName)?' "'+schemeName+'" ':" ")+"успешно удалена";errorsHandler.addMessage(title,msg,1,null,true);callback(null,resp.data)}else{errorsHandler.addMessage(title,errMsg,0,null,true);callback(new Error(errMsg),null)}},unsuccess:function(){errorsHandler.addMessage(title,errMsg,0,null,true);callback(new Error(errMsg),null)},failure:function(){errorsHandler.addMessage(title,errMsg,0,null,true);callback(new Error(errMsg),null)}})},_checkSchemeOpen:function(schemeId){var manager=Wasutp.Schemes.Manager.getInstance();var panel=manager.getSchemePanelById(schemeId);return Boolean(panel)},_onClickDeleteInContextMenu:function(menuItem){var me=this,menuId=menuItem.windowId,schemeId=menuItem.idScheme,errTitle="Удаление схемы";SLDiagram.Async.auto({check:function(callback){var errMsg;if(SLDiagram.isNumber(schemeId)===false){errMsg="Неверный идентификатор схемы";errorsHandler.addMessage(errTitle,errMsg,0,null,true);callback(new Error(errMsg),null)}else{if(me._checkSchemeOpen(Number(schemeId))===false){callback(null,true)}else{errMsg="Невозможно удалить открытую схему";errorsHandler.addMessage(errTitle,errMsg,0,null,true);callback(new Error(errMsg),null)}}},getSchemeInfo:["check",function(callback,results){var errMsg;if(results.check){me._getSchemeInfo(Number(schemeId),callback)}else{errMsg="Проверка прошла неудачно";callback(new Error(errMsg),null)}}],confirmDeleteMenuOrScheme:["getSchemeInfo",function(callback,results){var name;if(results.getSchemeInfo&&results.getSchemeInfo.menu.length>1){name=SLDiagram.getProperty(results,"getSchemeInfo/name");me._confirmDeleteMenuOrSchemeYesNoCancel({name:name},callback)}else{callback(null,null)}}],confirmDeleteScheme:["getSchemeInfo",function(callback,results){var name;if(results.getSchemeInfo&&results.getSchemeInfo.menu.length===1){name=SLDiagram.getProperty(results,"getSchemeInfo/name");me._confirmDeleteSchemeYesNo({name:name},callback)}else{callback(null,null)}}],deleteOnlyMenuItem:["confirmDeleteMenuOrScheme",function(callback,results){if(results.confirmDeleteMenuOrScheme==="no"){me._deleteMenuItem(menuId,callback)}else{callback(null,null)}}],deleteScheme:["confirmDeleteScheme","confirmDeleteMenuOrScheme",function(callback,results){if(results.confirmDeleteScheme==="yes"||results.confirmDeleteMenuOrScheme==="yes"){me._deleteScheme(schemeId,callback)}else{callback(null,null)}}],afterDeleteOnlyMenuItem:["deleteOnlyMenuItem",function(callback,results){var res;if(results.deleteOnlyMenuItem){if(!results.deleteOnlyMenuItem.last_res){callback(null,false);return}res=me._afterDeleteMenuItems([results.deleteOnlyMenuItem.menu_id],{allUsers:false});if(res.length===1){callback(null,true)}else{callback(null,false)}}else{callback(null,null)}}],afterDeleteScheme:["deleteScheme",function(callback,results){var res,menuIds,i,menuId;if(results.deleteScheme){if(!results.deleteScheme.last_res){callback(null,false);return}menuIds=[];for(i=0;i<results.deleteScheme.deleted_menu_items.length;i++){menuId=results.deleteScheme.deleted_menu_items[i];menuIds.push(menuId.id)}res=me._afterDeleteMenuItems(menuIds,{allUsers:true});if(res.length===menuIds.length){callback(null,true)}else{callback(null,false)}}else{callback(null,null)}}]},function(err,results){if(err){console.error(err)}else{if(results.confirmDeleteMenuAndScheme===null&&results.confirmDeleteScheme===null){console.error("Не удалось определить сценарий удаления пунктов меню и схемы")}}})},_checkMenuConfig:function(config){var params,param,i;params=["text","idScheme"];for(i=0;i<params.length;i++){param=params[i];if(typeof param!=="number"&&typeof param!=="string"){return false}}return true},_getId:function(id){if(typeof id!=="number"&&typeof id!=="string"){id=""}return"wasutp-scheme-"+String(id)}});Ext.define("Ext.ux.grid.menu.RangeMenu",{extend:"Ext.menu.Menu",fieldCls:"Ext.form.field.Number",itemIconCls:{gt:"ux-rangemenu-gt",lt:"ux-rangemenu-lt",eq:"ux-rangemenu-eq"},fieldLabels:{gt:"Greater Than",lt:"Less Than",eq:"Equal To"},menuItemCfgs:{emptyText:"Enter Number...",selectOnFocus:false,width:155},menuItems:["lt","gt","-","eq"],constructor:function(config){var me=this,fields,fieldCfg,i,len,item,cfg,Cls;me.callParent(arguments);fields=me.fields=me.fields||{};fieldCfg=me.fieldCfg=me.fieldCfg||{};me.addEvents("update");me.updateTask=Ext.create("Ext.util.DelayedTask",me.fireUpdate,me);for(i=0,len=me.menuItems.length;i<len;i++){item=me.menuItems[i];if(item!=="-"){cfg={itemId:"range-"+item,enableKeyEvents:true,hideLabel:false,fieldLabel:me.iconTpl.apply({cls:me.itemIconCls[item]||"no-icon",text:me.fieldLabels[item]||"",src:Ext.BLANK_IMAGE_URL}),labelSeparator:"",labelWidth:29,labelStyle:"position: relative;",listeners:{scope:me,change:me.onInputChange,keyup:me.onInputKeyUp,el:{click:function(e){e.stopPropagation()}}},activate:Ext.emptyFn,deactivate:Ext.emptyFn};Ext.apply(cfg,Ext.applyIf(fields[item]||{},fieldCfg[item]),me.menuItemCfgs);Cls=cfg.fieldCls||me.fieldCls;item=fields[item]=Ext.create(Cls,cfg)}me.add(item)}},fireUpdate:function(){this.fireEvent("update",this)},getValue:function(){var result={},key,field;for(key in this.fields){field=this.fields[key];if(field.isValid()&&field.getValue()!==null){result[key]=field.getValue()}}return result},setValue:function(data){var me=this,key,field;for(key in me.fields){field=me.fields[key];field.suspendEvents();field.setValue(key in data?data[key]:"");field.resumeEvents()}me.fireEvent("update",me)},onInputKeyUp:function(field,e){if(e.getKey()===e.RETURN&&field.isValid()){e.stopEvent();this.hide()}},onInputChange:function(field){var me=this,fields=me.fields,eq=fields.eq,gt=fields.gt,lt=fields.lt;if(field==eq){if(gt){gt.setValue(null)}if(lt){lt.setValue(null)}}else{eq.setValue(null)}this.updateTask.delay(this.updateBuffer)}},function(){this.prototype.iconTpl=Ext.create("Ext.XTemplate",'<img src="{src}" alt="{text}" class="'+Ext.baseCSSPrefix+'menu-item-icon ux-rangemenu-icon {cls}" />')});Ext.define("Ext.ux.grid.menu.ListMenu",{extend:"Ext.menu.Menu",labelField:"text",loadingText:"Loading...",loadOnShow:true,single:false,constructor:function(cfg){var me=this,options,i,len,value;me.selected=[];me.addEvents("checkchange");me.callParent([cfg=cfg||{}]);if(!cfg.store&&cfg.options){options=[];for(i=0,len=cfg.options.length;i<len;i++){value=cfg.options[i];switch(Ext.type(value)){case"array":options.push(value);break;case"object":options.push([value.id,value[me.labelField]]);break;case"string":options.push([value,value]);break}}me.store=Ext.create("Ext.data.ArrayStore",{fields:["id",me.labelField],data:options,listeners:{load:me.onLoad,scope:me}});me.loaded=true;me.autoStore=true}else{me.add({text:me.loadingText,iconCls:"loading-indicator"});me.store.on("load",me.onLoad,me)}},destroy:function(){var me=this,store=me.store;if(store){if(me.autoStore){store.destroyStore()}else{store.un("unload",me.onLoad,me)}}me.callParent()},show:function(){if(this.loadOnShow&&!this.loaded&&!this.store.loading){this.store.load()}this.callParent()},onLoad:function(store,records){var me=this,gid,itemValue,i,len,listeners={checkchange:me.checkChange,scope:me};Ext.suspendLayouts();me.removeAll(true);gid=me.single?Ext.id():null;for(i=0,len=records.length;i<len;i++){itemValue=records[i].get("id");me.add(Ext.create("Ext.menu.CheckItem",{text:records[i].get(me.labelField),group:gid,checked:Ext.Array.contains(me.selected,itemValue),hideOnClick:false,value:itemValue,listeners:listeners}))}me.loaded=true;Ext.resumeLayouts(true);me.fireEvent("load",me,records)},getSelected:function(){return this.selected},setSelected:function(value){value=this.selected=[].concat(value);if(this.loaded){this.items.each(function(item){item.setChecked(false,true);for(var i=0,len=value.length;i<len;i++){if(item.value==value[i]){item.setChecked(true,true)}}},this)}},checkChange:function(item,checked){var value=[];this.items.each(function(item){if(item.checked){value.push(item.value)}},this);this.selected=value;this.fireEvent("checkchange",item,checked)}});Ext.define("Ext.ux.grid.filter.Filter",{extend:"Ext.util.Observable",active:false,dataIndex:null,menu:null,updateBuffer:500,constructor:function(config){Ext.apply(this,config);this.addEvents("activate","deactivate","serialize","update");Ext.ux.grid.filter.Filter.superclass.constructor.call(this);this.menu=this.createMenu(config);this.init(config);if(config&&config.value){this.setValue(config.value);this.setActive(config.active!==false,true);delete config.value}},destroy:function(){if(this.menu){this.menu.destroy()}this.clearListeners()},init:Ext.emptyFn,createMenu:function(config){return Ext.create("Ext.menu.Menu",config)},getValue:Ext.emptyFn,setValue:Ext.emptyFn,isActivatable:function(){return true},getSerialArgs:Ext.emptyFn,validateRecord:function(){return true},serialize:function(){var args=this.getSerialArgs();this.fireEvent("serialize",args,this);return args},fireUpdate:function(){if(this.active){this.fireEvent("update",this)}this.setActive(this.isActivatable())},setActive:function(active,suppressEvent){if(this.active!=active){this.active=active;if(suppressEvent!==true){this.fireEvent(active?"activate":"deactivate",this)}}}});Ext.define("Ext.ux.grid.filter.DateFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.date",uses:["Ext.picker.Date","Ext.menu.Menu"],afterText:"After",beforeText:"Before",compareMap:{before:"lt",after:"gt",on:"eq"},dateFormat:"m/d/Y",menuItems:["before","after","-","on"],menuItemCfgs:{selectOnFocus:true,width:125},onText:"On",pickerOpts:{},init:function(config){var me=this,pickerCfg,i,len,item,cfg;pickerCfg=Ext.apply(me.pickerOpts,{xtype:"datepicker",minDate:me.minDate,maxDate:me.maxDate,format:me.dateFormat,listeners:{scope:me,select:me.onMenuSelect}});me.fields={};for(i=0,len=me.menuItems.length;i<len;i++){item=me.menuItems[i];if(item!=="-"){cfg={itemId:"range-"+item,text:me[item+"Text"],menu:Ext.create("Ext.menu.Menu",{items:[Ext.apply(pickerCfg,{itemId:item,listeners:{select:me.onPickerSelect,scope:me}}),]}),listeners:{scope:me,checkchange:me.onCheckChange}};item=me.fields[item]=Ext.create("Ext.menu.CheckItem",cfg)}me.menu.add(item)}me.values={}},onCheckChange:function(item,checked){var me=this,picker=item.menu.items.first(),itemId=picker.itemId,values=me.values;if(checked){values[itemId]=picker.getValue()}else{delete values[itemId]}me.setActive(me.isActivatable());me.fireEvent("update",me)},onInputKeyUp:function(field,e){var k=e.getKey();if(k==e.RETURN&&field.isValid()){e.stopEvent();this.menu.hide()}},onMenuSelect:function(picker,date){var fields=this.fields,field=this.fields[picker.itemId];field.setChecked(true);if(field==fields.on){fields.before.setChecked(false,true);fields.after.setChecked(false,true)}else{fields.on.setChecked(false,true);if(field==fields.after&&this.getFieldValue("before")<date){fields.before.setChecked(false,true)}else{if(field==fields.before&&this.getFieldValue("after")>date){fields.after.setChecked(false,true)}}}this.fireEvent("update",this);picker.up("menu").hide()},getValue:function(){var key,result={};for(key in this.fields){if(this.fields[key].checked){result[key]=this.getFieldValue(key)}}return result},setValue:function(value,preserve){var key;for(key in this.fields){if(value[key]){this.getPicker(key).setValue(value[key]);this.fields[key].setChecked(true)}else{if(!preserve){this.fields[key].setChecked(false)}}}this.fireEvent("update",this)},isActivatable:function(){var key;for(key in this.fields){if(this.fields[key].checked){return true}}return false},getSerialArgs:function(){var args=[];for(var key in this.fields){if(this.fields[key].checked){args.push({type:"date",comparison:this.compareMap[key],value:Ext.Date.format(this.getFieldValue(key),this.dateFormat)})}}return args},getFieldValue:function(item){return this.values[item]},getPicker:function(item){return this.fields[item].menu.items.first()},validateRecord:function(record){var key,pickerValue,val=record.get(this.dataIndex),clearTime=Ext.Date.clearTime;if(!Ext.isDate(val)){return false}val=clearTime(val,true).getTime();for(key in this.fields){if(this.fields[key].checked){pickerValue=clearTime(this.getFieldValue(key),true).getTime();if(key=="before"&&pickerValue<=val){return false}if(key=="after"&&pickerValue>=val){return false}if(key=="on"&&pickerValue!=val){return false}}}return true},onPickerSelect:function(picker,date){this.values[picker.itemId]=date;this.fireEvent("update",this)}});Ext.define("Ext.ux.grid.filter.BooleanFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.boolean",defaultValue:false,yesText:"Yes",noText:"No",init:function(config){var gId=Ext.id();this.options=[Ext.create("Ext.menu.CheckItem",{text:this.yesText,group:gId,checked:this.defaultValue===true}),Ext.create("Ext.menu.CheckItem",{text:this.noText,group:gId,checked:this.defaultValue===false})];this.menu.add(this.options[0],this.options[1]);for(var i=0;i<this.options.length;i++){this.options[i].on("click",this.fireUpdate,this);this.options[i].on("checkchange",this.fireUpdate,this)}},getValue:function(){return this.options[0].checked},setValue:function(value){this.options[value?0:1].setChecked(true)},getSerialArgs:function(){var args={type:"boolean",value:this.getValue()};return args},validateRecord:function(record){return record.get(this.dataIndex)==this.getValue()}});Ext.define("Ext.ux.grid.filter.ListFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.list",phpMode:false,init:function(config){this.dt=Ext.create("Ext.util.DelayedTask",this.fireUpdate,this)},createMenu:function(config){var menu=Ext.create("Ext.ux.grid.menu.ListMenu",config);menu.on("checkchange",this.onCheckChange,this);return menu},getValue:function(){return this.menu.getSelected()},setValue:function(value){this.menu.setSelected(value);this.fireEvent("update",this)},isActivatable:function(){return this.getValue().length>0},getSerialArgs:function(){return{type:"list",value:this.phpMode?this.getValue().join(","):this.getValue()}},onCheckChange:function(){this.dt.delay(this.updateBuffer)},validateRecord:function(record){var valuesArray=this.getValue();return Ext.Array.indexOf(valuesArray,record.get(this.dataIndex))>-1}});Ext.define("Ext.ux.grid.filter.StringFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.string",iconCls:"ux-gridfilter-text-icon",emptyText:"Enter Filter Text...",selectOnFocus:true,width:125,init:function(config){Ext.applyIf(config,{enableKeyEvents:true,iconCls:this.iconCls,hideLabel:true,listeners:{scope:this,keyup:this.onInputKeyUp,el:{click:function(e){e.stopPropagation()}}}});this.inputItem=Ext.create("Ext.form.field.Text",config);this.menu.add(this.inputItem);this.updateTask=Ext.create("Ext.util.DelayedTask",this.fireUpdate,this)},getValue:function(){return this.inputItem.getValue()},setValue:function(value){this.inputItem.setValue(value);this.fireEvent("update",this)},isActivatable:function(){return this.inputItem.getValue().length>0},getSerialArgs:function(){return{type:"string",value:this.getValue()}},validateRecord:function(record){var val=record.get(this.dataIndex);if(typeof val!="string"){return(this.getValue().length===0)}return val.toLowerCase().indexOf(this.getValue().toLowerCase())>-1},onInputKeyUp:function(field,e){var k=e.getKey();if(k==e.RETURN&&field.isValid()){e.stopEvent();this.menu.hide();return}this.updateTask.delay(this.updateBuffer)}});Ext.define("Ext.ux.grid.filter.NumericFilter",{extend:"Ext.ux.grid.filter.Filter",alias:"gridfilter.numeric",uses:["Ext.form.field.Number"],createMenu:function(config){var me=this,menu;menu=Ext.create("Ext.ux.grid.menu.RangeMenu",config);menu.on("update",me.fireUpdate,me);return menu},getValue:function(){return this.menu.getValue()},setValue:function(value){this.menu.setValue(value)},isActivatable:function(){var values=this.getValue(),key;for(key in values){if(values[key]!==undefined){return true}}return false},getSerialArgs:function(){var key,args=[],values=this.menu.getValue();for(key in values){args.push({type:"numeric",comparison:key,value:values[key]})}return args},validateRecord:function(record){var val=record.get(this.dataIndex),values=this.getValue(),isNumber=Ext.isNumber;if(isNumber(values.eq)&&val!=values.eq){return false}if(isNumber(values.lt)&&val>=values.lt){return false}if(isNumber(values.gt)&&val<=values.gt){return false}return true}});Ext.example=function(){var msgCt;function createBox(t,s,style){var style=style&&style.color?'style="color: '+style.color+'"':"";return'<div class="msg" '+style+"><h3>"+t+"</h3><p>"+s+"</p></div>"}return{msg:function(title,format,style){if(!msgCt){msgCt=Ext.DomHelper.insertFirst(document.body,{id:"msg-div"},true)}var s=Ext.String.format.apply(String,Array.prototype.slice.call(arguments,1));var m=Ext.DomHelper.append(msgCt,createBox(title,s,style),true);m.hide();m.slideIn("t").ghost("t",{delay:1000,remove:true})},init:function(){if(!msgCt){msgCt=Ext.DomHelper.insertFirst(document.body,{id:"msg-div"},true)}}}}();
/*!
 * accounting.js v0.3.2
 * Copyright 2011, Joss Crowcroft
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://josscrowcroft.github.com/accounting.js/
 */
(function(root,undefined){var lib={};lib.version="0.3.2";lib.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var nativeMap=Array.prototype.map,nativeIsArray=Array.isArray,toString=Object.prototype.toString;function isString(obj){return !!(obj===""||(obj&&obj.charCodeAt&&obj.substr))}function isArray(obj){return nativeIsArray?nativeIsArray(obj):toString.call(obj)==="[object Array]"}function isObject(obj){return obj&&toString.call(obj)==="[object Object]"}function defaults(object,defs){var key;object=object||{};defs=defs||{};for(key in defs){if(defs.hasOwnProperty(key)){if(object[key]==null){object[key]=defs[key]}}}return object}function map(obj,iterator,context){var results=[],i,j;if(!obj){return results}if(nativeMap&&obj.map===nativeMap){return obj.map(iterator,context)}for(i=0,j=obj.length;i<j;i++){results[i]=iterator.call(context,obj[i],i,obj)}return results}function checkPrecision(val,base){val=Math.round(Math.abs(val));return isNaN(val)?base:val}function checkCurrencyFormat(format){var defaults=lib.settings.currency.format;if(typeof format==="function"){format=format()}if(isString(format)&&format.match("%v")){return{pos:format,neg:format.replace("-","").replace("%v","-%v"),zero:format}}else{if(!format||!format.pos||!format.pos.match("%v")){return(!isString(defaults))?defaults:lib.settings.currency.format={pos:defaults,neg:defaults.replace("%v","-%v"),zero:defaults}}}return format}var unformat=lib.unformat=lib.parse=function(value,decimal){if(isArray(value)){return map(value,function(val){return unformat(val,decimal)})}value=value||0;if(typeof value==="number"){return value}decimal=decimal||lib.settings.number.decimal;var regex=new RegExp("[^0-9-"+decimal+"]",["g"]),unformatted=parseFloat((""+value).replace(/\((.*)\)/,"-$1").replace(regex,"").replace(decimal,"."));return !isNaN(unformatted)?unformatted:0};var toFixed=lib.toFixed=function(value,precision){precision=checkPrecision(precision,lib.settings.number.precision);var power=Math.pow(10,precision);return(Math.round(lib.unformat(value)*power)/power).toFixed(precision)};var formatNumber=lib.formatNumber=function(number,precision,thousand,decimal){if(isArray(number)){return map(number,function(val){return formatNumber(val,precision,thousand,decimal)})}number=unformat(number);var opts=defaults((isObject(precision)?precision:{precision:precision,thousand:thousand,decimal:decimal}),lib.settings.number),usePrecision=checkPrecision(opts.precision),negative=number<0?"-":"",base=parseInt(toFixed(Math.abs(number||0),usePrecision),10)+"",mod=base.length>3?base.length%3:0;return negative+(mod?base.substr(0,mod)+opts.thousand:"")+base.substr(mod).replace(/(\d{3})(?=\d)/g,"$1"+opts.thousand)+(usePrecision?opts.decimal+toFixed(Math.abs(number),usePrecision).split(".")[1]:"")};var formatMoney=lib.formatMoney=function(number,symbol,precision,thousand,decimal,format){if(isArray(number)){return map(number,function(val){return formatMoney(val,symbol,precision,thousand,decimal,format)})}number=unformat(number);var opts=defaults((isObject(symbol)?symbol:{symbol:symbol,precision:precision,thousand:thousand,decimal:decimal,format:format}),lib.settings.currency),formats=checkCurrencyFormat(opts.format),useFormat=number>0?formats.pos:number<0?formats.neg:formats.zero;return useFormat.replace("%s",opts.symbol).replace("%v",formatNumber(Math.abs(number),checkPrecision(opts.precision),opts.thousand,opts.decimal))};lib.formatColumn=function(list,symbol,precision,thousand,decimal,format){if(!list){return[]}var opts=defaults((isObject(symbol)?symbol:{symbol:symbol,precision:precision,thousand:thousand,decimal:decimal,format:format}),lib.settings.currency),formats=checkCurrencyFormat(opts.format),padAfterSymbol=formats.pos.indexOf("%s")<formats.pos.indexOf("%v")?true:false,maxLength=0,formatted=map(list,function(val,i){if(isArray(val)){return lib.formatColumn(val,opts)}else{val=unformat(val);var useFormat=val>0?formats.pos:val<0?formats.neg:formats.zero,fVal=useFormat.replace("%s",opts.symbol).replace("%v",formatNumber(Math.abs(val),checkPrecision(opts.precision),opts.thousand,opts.decimal));if(fVal.length>maxLength){maxLength=fVal.length}return fVal}});return map(formatted,function(val,i){if(isString(val)&&val.length<maxLength){return padAfterSymbol?val.replace(opts.symbol,opts.symbol+(new Array(maxLength-val.length+1).join(" "))):(new Array(maxLength-val.length+1).join(" "))+val}return val})};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=lib}exports.accounting=lib}else{if(typeof define==="function"&&define.amd){define([],function(){return lib})}else{lib.noConflict=(function(oldAccounting){return function(){root.accounting=oldAccounting;lib.noConflict=undefined;return lib}})(root.accounting);root.accounting=lib}}}(this));Ext.onReady(function(){if(Ext.Date){Ext.Date.monthNames=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];Ext.Date.shortMonthNames=["Янв","Февр","Март","Апр","Май","Июнь","Июль","Авг","Сент","Окт","Нояб","Дек"];Ext.Date.getShortMonthName=function(month){return Ext.Date.shortMonthNames[month]};Ext.Date.monthNumbers={"Янв":0,"Фев":1,"Мар":2,"Апр":3,"Май":4,"Июн":5,"Июл":6,"Авг":7,"Сен":8,"Окт":9,"Ноя":10,"Дек":11};Ext.Date.getMonthNumber=function(name){return Ext.Date.monthNumbers[name.substring(0,1).toUpperCase()+name.substring(1,3).toLowerCase()]};Ext.Date.dayNames=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"];Ext.Date.getShortDayName=function(day){return Ext.Date.dayNames[day].substring(0,3)}}if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{thousandSeparator:".",decimalSeparator:",",currencySign:"руб",dateFormat:"d.m.Y"})}});Ext.define("Ext.locale.ru.view.View",{override:"Ext.view.View",emptyText:""});Ext.define("Ext.locale.ru.grid.plugin.DragDrop",{override:"Ext.grid.plugin.DragDrop",dragText:"{0} выбранных строк"});Ext.define("Ext.locale.ru.tab.Tab",{override:"Ext.tab.Tab",closeText:"Закрыть эту вкладку"});Ext.define("Ext.locale.ru.form.field.Base",{override:"Ext.form.field.Base",invalidText:"Значение в этом поле неверное"});Ext.define("Ext.locale.ru.view.AbstractView",{override:"Ext.view.AbstractView",loadingText:"Загрузка..."});Ext.define("Ext.locale.ru.picker.Date",{override:"Ext.picker.Date",todayText:"Сегодня",minText:"Эта дата раньше минимальной даты",maxText:"Эта дата позже максимальной даты",disabledDaysText:"Недоступно",disabledDatesText:"Недоступно",nextText:"Следующий месяц (Control+Вправо)",prevText:"Предыдущий месяц (Control+Влево)",monthYearText:"Выбор месяца (Control+Вверх/Вниз для выбора года)",todayTip:"{0} (Пробел)",format:"d.m.y",startDay:1});Ext.define("Ext.locale.ru.picker.Month",{override:"Ext.picker.Month",okText:"&#160;OK&#160;",cancelText:"Отмена"});Ext.define("Ext.locale.ru.toolbar.Paging",{override:"Ext.PagingToolbar",beforePageText:"Страница",afterPageText:"из {0}",firstText:"Первая страница",prevText:"Предыдущая страница",nextText:"Следующая страница",lastText:"Последняя страница",refreshText:"Обновить",displayMsg:"Отображаются записи с {0} по {1}, всего {2}",emptyMsg:"Нет данных для отображения"});Ext.define("Ext.locale.ru.form.field.Text",{override:"Ext.form.field.Text",minLengthText:"Минимальная длина этого поля {0}",maxLengthText:"Максимальная длина этого поля {0}",blankText:"Это поле обязательно для заполнения",regexText:"",emptyText:null});Ext.define("Ext.locale.ru.form.field.Number",{override:"Ext.form.field.Number",minText:"Значение этого поля не может быть меньше {0}",maxText:"Значение этого поля не может быть больше {0}",nanText:"{0} не является числом",negativeText:"Значение не может быть отрицательным"});Ext.define("Ext.locale.ru.form.field.Date",{override:"Ext.form.field.Date",disabledDaysText:"Недоступно",disabledDatesText:"Недоступно",minText:"Дата в этом поле должна быть позже {0}",maxText:"Дата в этом поле должна быть раньше {0}",invalidText:"{0} не является правильной датой - дата должна быть указана в формате {1}",format:"d.m.y",altFormats:"d.m.y|d/m/Y|d-m-y|d-m-Y|d/m|d-m|dm|dmy|dmY|d|Y-m-d"});Ext.define("Ext.locale.ru.form.field.ComboBox",{override:"Ext.form.field.ComboBox",valueNotFoundText:undefined},function(){Ext.apply(Ext.form.field.ComboBox.prototype.defaultListConfig,{loadingText:"Загрузка..."})});Ext.define("Ext.locale.ru.form.field.VTypes",{override:"Ext.form.field.VTypes",emailText:'Это поле должно содержать адрес электронной почты в формате "user@example.com"',urlText:'Это поле должно содержать URL в формате "http://www.example.com"',alphaText:'Это поле должно содержать только латинские буквы и символ подчеркивания "_"',alphanumText:'Это поле должно содержать только латинские буквы, цифры и символ подчеркивания "_"'});Ext.define("Ext.locale.ru.form.field.HtmlEditor",{override:"Ext.form.field.HtmlEditor",createLinkText:"Пожалуйста, введите адрес:"},function(){Ext.apply(Ext.form.field.HtmlEditor.prototype,{buttonTips:{bold:{title:"Полужирный (Ctrl+B)",text:"Применение полужирного начертания к выделенному тексту.",cls:Ext.baseCSSPrefix+"html-editor-tip"},italic:{title:"Курсив (Ctrl+I)",text:"Применение курсивного начертания к выделенному тексту.",cls:Ext.baseCSSPrefix+"html-editor-tip"},underline:{title:"Подчёркнутый (Ctrl+U)",text:"Подчёркивание выделенного текста.",cls:Ext.baseCSSPrefix+"html-editor-tip"},increasefontsize:{title:"Увеличить размер",text:"Увеличение размера шрифта.",cls:Ext.baseCSSPrefix+"html-editor-tip"},decreasefontsize:{title:"Уменьшить размер",text:"Уменьшение размера шрифта.",cls:Ext.baseCSSPrefix+"html-editor-tip"},backcolor:{title:"Заливка",text:"Изменение цвета фона для выделенного текста или абзаца.",cls:Ext.baseCSSPrefix+"html-editor-tip"},forecolor:{title:"Цвет текста",text:"Измение цвета текста.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyleft:{title:"Выровнять текст по левому краю",text:"Вырaвнивание текста по левому краю.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifycenter:{title:"По центру",text:"Вырaвнивание текста по центру.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyright:{title:"Выровнять текст по правому краю",text:"Вырaвнивание текста по правому краю.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertunorderedlist:{title:"Маркеры",text:"Начать маркированный список.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertorderedlist:{title:"Нумерация",text:"Начать нумернованный список.",cls:Ext.baseCSSPrefix+"html-editor-tip"},createlink:{title:"Вставить гиперссылку",text:"Создание ссылки из выделенного текста.",cls:Ext.baseCSSPrefix+"html-editor-tip"},sourceedit:{title:"Исходный код",text:"Переключиться на исходный код.",cls:Ext.baseCSSPrefix+"html-editor-tip"}}})});Ext.define("Ext.locale.ru.form.Basic",{override:"Ext.form.Basic",waitTitle:"Пожалуйста, подождите..."});Ext.define("Ext.locale.ru.grid.header.Container",{override:"Ext.grid.header.Container",sortAscText:"Сортировать по возрастанию",sortDescText:"Сортировать по убыванию",lockText:"Закрепить столбец",unlockText:"Снять закрепление столбца",columnsText:"Столбцы"});Ext.define("Ext.locale.ru.grid.GroupingFeature",{override:"Ext.grid.feature.Grouping",emptyGroupText:"(Пусто)",groupByText:"Группировать по этому полю",showGroupsText:"Отображать по группам"});Ext.define("Ext.locale.ru.grid.PropertyColumnModel",{override:"Ext.grid.PropertyColumnModel",nameText:"Название",valueText:"Значение",dateFormat:"d.m.Y"});Ext.define("Ext.locale.ru.window.MessageBox",{override:"Ext.window.MessageBox",buttonText:{ok:"OK",cancel:"Отмена",yes:"Да",no:"Нет"}});Ext.define("Ext.locale.ru.Component",{override:"Ext.Component"});Ext.onReady(function(){var cm=Ext.ClassManager,exists=Ext.Function.bind(cm.get,cm);if(Ext.Updater){Ext.Updater.defaults.indicatorText='<div class="loading-indicator">Идет загрузка...</div>'}Ext.define("Ext.locale.messages.MyDesktop.SystemMessages",{override:"MyDesktop.SystemMessages",server_error:"Ошибка на стороне сервера",server_error_with_status:"Ошибка на стороне сервера со статусом ",data_not_exist:"Отсутствуют данные"});Ext.define("Ext.locale.messages.Ext.grid.RowEditor",{override:"Ext.grid.RowEditor",saveBtnText:"Сохранить",cancelBtnText:"Отмена",errorsText:"Ошибка",dirtyText:"Нажмите Обновить или Отмена."});Ext.define("Ext.locale.messages.Ext.grid.plugin.DragDrop",{override:"Ext.grid.plugin.DragDrop",dragText:"Выбрано параметров ({0})"});Ext.define("Ext.locale.messages.Ext.tree.plugin.TreeViewDragDrop",{override:"Ext.tree.plugin.TreeViewDragDrop",dragText:"Выбрано узлов ({0})"});Ext.define("Ext.locale.messages.Ext.ux.grid.FiltersFeature",{override:"Ext.ux.grid.FiltersFeature",menuFilterText:"Фильтрация"})});Ext.define("Wasutp.container.Container",{extend:"Ext.container.Container",listeners:{afterrender:function(container){container.getEl().on("click",function(e){Wasutp.Params.Updater.enable()});container.getEl().on("mouseup",function(e){Wasutp.Params.Updater.enable()});container.getEl().on("mousedown",function(e){Wasutp.Params.Updater.disable()})}},initComponent:function(){var me=this;me.callParent(arguments)}});Ext.define("Wasutp.Menu",{statics:{menu:null,_getMenu:function(){if(this.menu===null){this.menu=appHelper.getWasutpConfig().menu}return this.menu},getItem:function(path){var menu=this._getMenu(),length=0;if(path&&path.length&&menu[path[0]]){length=path.length;menu=menu[path[0]];for(var i=1;i<length;i++){if(menu.items&&menu.items[path[i]]){menu=menu.items[path[i]]}else{menu=null;break}}}if(menu&&!menu.title){menu.title=""}if(menu&&!menu.iconCls){menu.iconCls=""}return menu}}});Ext.define("Wasutp.About",{statics:{menuText:"О программе",cls:"wasutp-o-programme",id:"wasutp-about-isms",open:function(){var me=this;wasutpApp.getDesktop().taskbar.startMenu.hide();Wasutp.Ajax.request({url:"/json/application/get-about-info",success:function(response){me.show(response)}})},show:function(params){var me=this,notes=params.data&&params.data.notes?params.data.notes:"",html="";if(notes.length){for(var i in notes){html+=notes[i]+"<br>"}html+="<br>"}var desktop=wasutpApp.getDesktop();var win=desktop.getWindow(Wasutp.About.id);if(!win){win=desktop.createWindow({iconCls:me.cls,id:me.id,title:"О программе",width:800,height:600,layout:"border",cls:"wasutp-about",items:[{cls:"wasutp-about-inner",autoscroll:true,html:html}],modal:false,bbar:[{xtype:"button",text:"Сохранить как",handler:function(){console.log("Скачать");document.location.target="_blank";document.location.href="/application/download/about"}}],closable:true,maximizable:true,minimizable:true,resizable:true})}win.show()}}});Ext.define("Wasutp.Params.Updater",{statics:{enabled:true,isEnabled:function(){var me=this;if(me.enabled===true){return true}else{return false}},disable:function(){this.enabled=false},enable:function(){this.enabled=true},callFn:function(fn,scope,args){var me=this;if(typeof fn!=="function"){return false}if(me.isEnabled()){fn.apply(scope,args)}}}});Ext.Loader.setConfig({enabled:true});Ext.Loader.setPath({"Ext.ux.desktop":"/desktop/js","Ext.ux.grid":"/ext/src/grid","Ext.ux.DataView":"/ext/src/DataView",Wasutp:"/scripts",MyPanels:"/resource/panels"});Ext.require(["Wasutp.About","Ext.window.MessageBox","Wasutp.Params.Updater","Wasutp.window.Window","Wasutp.container.Container","Ext.ux.desktop.Desktop","Ext.ux.desktop.ShortcutModel","Ext.ux.grid.FiltersFeature","Ext.ux.desktop.TaskBar","Ext.ux.desktop.App","Ext.ux.desktop.Wallpaper","Ext.ux.desktop.Module","Wasutp.Timer","Wasutp.Params.Param","Wasutp.window.MessageBox","Wasutp.TU.Manager","Wasutp.desktop.ShortcutManager","Wasutp.ErrorsHandler","Wasutp.SystemMessages","Wasutp.Server","Wasutp.menu.Menu","Wasutp.Archives.DownloadArch","Wasutp.SystemStatus","Wasutp.ServerStatement","Wasutp.Widgets.DcsParam","Wasutp.Widgets.Desktop","Wasutp.Widgets.DesktopTheme","Wasutp.Widgets.WidgetObserver","Wasutp.Widgets.Chart","Wasutp.Date.TrayClock","Wasutp.ErrorsHandler","Wasutp.AppHelper","Wasutp.Menu","Wasutp.Reports.ReportsConfig","Wasutp.Reports.Reports","Wasutp.Settings","Wasutp.tip.ToolTip","Wasutp.ContextMenu","Wasutp.Panels.Panels","Wasutp.Panels.PanelsConfig","Wasutp.Panels.PanelsHelper","Wasutp.Panels.ToolTipHelper","Wasutp.Charts.Charts","Wasutp.Administration.Administration","Wasutp.model.StartConfig","Wasutp.SystemMessages","Wasutp.Configurations.DropBehavior","Wasutp.Configurations.Dcs","Wasutp.Configurations.ProfileGridDropBehavior","Wasutp.Configurations.Profiles","Wasutp.Configurations.DcsGridDropBehavior","Wasutp.Configurations.NodeCreator","Wasutp.Configurations.GridBehavior","Wasutp.Configurations.ParamUpdate","Wasutp.Configurations.ParamsDataHelper","Wasutp.Configurations.RowNumberer","Wasutp.Configurations.Configuration","Wasutp.Configurations.Interfaces","Wasutp.Configurations.Form.RenameDcsParams","Wasutp.Configurations.Form.DcsDnDConfirm","Wasutp.Configurations.Form.ChangeCvalifNames","Wasutp.Configurations.Form.Update.Interfaces.UpdateInterfaces","Wasutp.Configurations.Form.Update.Dcs.UpdateOption","Wasutp.Configurations.Form.Update.Dcs.UpdateIbm","Wasutp.Configurations.Form.Update.Dcs.UpdateDevice","Wasutp.Configurations.Form.Update.Dcs.UpdatePort","Wasutp.Configurations.Form.Update.Dcs.UpdateInterface","Wasutp.Configurations.Form.Update.Dcs.UpdateParam","Wasutp.Configurations.Form.Update.Profile.UpdateProto","Wasutp.Configurations.Form.Update.Profile.UpdateNode","Wasutp.Configurations.Form.Update.Profile.UpdateTransferDevice","Wasutp.Configurations.Form.Update.Profile.UpdateDevice","Wasutp.Configurations.Form.Update.Profile.UpdateParam","Wasutp.Configurations.Form.Update.Profile.UpdateFunctionDevice","Wasutp.Configurations.Form.Update.UpdateForm","Wasutp.Configurations.Form.Create.Dcs.CreateParam","Wasutp.Configurations.Form.Create.Dcs.CreateIbm","Wasutp.Configurations.Form.Create.Dcs.CreateOption","Wasutp.Configurations.Form.Create.Dcs.CreatePort","Wasutp.Configurations.Form.Create.Dcs.CreateInterface","Wasutp.Configurations.Form.Create.Dcs.CreateDevice","Wasutp.Configurations.Form.Create.Profile.CreateParam","Wasutp.Configurations.Form.Create.Profile.CreateNode","Wasutp.Configurations.Form.Create.Profile.DcsDnDConfirmTransfer","Wasutp.Configurations.Form.Create.Profile.CreateStandartParams","Wasutp.Configurations.Form.Create.Profile.CreateFunctionDevice","Wasutp.Configurations.Form.Create.Profile.CreateProto","Wasutp.Configurations.Form.Create.Profile.ChangeTwoPositionSwitchForm","Wasutp.Configurations.Form.Create.Profile.CreateDevice","Wasutp.Configurations.Form.Create.Profile.CreateTransferDevice","Wasutp.Configurations.Form.Create.Profile.DcsDnDConfirm","Wasutp.Configurations.Form.Create.Profile.TwoPositionSwitchForm","Wasutp.Configurations.Form.Create.CreateForm","Wasutp.Configurations.Form.AbstractForm","Wasutp.Configurations.Panel","Wasutp.Configurations.TreeBehavior","Wasutp.Configurations.GridDropBehavior","Wasutp.window.Modal","Wasutp.App","Wasutp.Profiler","Wasutp.SessionExtender","Wasutp.Schemes.NewSchemeSettings","Wasutp.Schemes.NewSchemes","Wasutp.Schemes.NewScheme","Wasutp.Documentation","Wasutp.Timer","Wasutp.Ajax","Wasutp.WallpaperModel","Wasutp.Timer","Wasutp.ErrorsHandler","Wasutp.Date.Date","Wasutp.SystemMessages","Wasutp.Configurations.models.AccessToModuleFunctions","Wasutp.Panels.components.Switcher","Wasutp.Panels.components.Dial","Wasutp.Panels.components.Chart","Wasutp.FixDragAndDrop"]);var wasutpApp;var panelsHelper;var appHelper;var errorsHandler;var profiler;Ext.onReady(function(){errorsHandler=Ext.create("Wasutp.ErrorsHandler",{});Ext.require("Wasutp.Ajax");Ext.Ajax.request({url:"/json/application/get-config",success:function(response){if(response){try{response=Ext.decode(response.responseText)}catch(e){errorsHandler.addMessage(errorsHandler.getSystemMessages().server_error_with_status+response.status,response.responseText,0);response=null}appHelper=Ext.create("Wasutp.AppHelper",{response:response});Ext.EventManager.on(window,"keydown",function(e,t){if(e.getKey()==e.BACKSPACE){if(t.type!=="text"&&t.type!=="password"){e.stopEvent()}}});Ext.EventManager.on(window,"contextmenu",function(e,t){e.stopEvent()});errorsHandler.addMessages(response.messages);errorsHandler.addErrors(response.errors);wasutpApp=Ext.create("Wasutp.App");panelsHelper=Ext.create("Wasutp.Panels.PanelsHelper");profiler=Ext.create("Wasutp.Profiler");sessionExtender=Ext.create("Wasutp.SessionExtender");serverStatement=Ext.create("Wasutp.ServerStatement");serverStatement.start();desktopWidgets=Ext.create("Wasutp.Widgets.Desktop");desktopWidgets.restoreWidgets();Ext.MessageBox.on("show",function(){wasutpApp.getDesktop().taskbar.disable()});Ext.MessageBox.on("deactivate",function(){if(wasutpApp.getDesktop().taskbar.isDisabled()){wasutpApp.getDesktop().taskbar.enable()}});if(appHelper.getWasutpConfig().startTesting){setTimeout(function(){var test=Ext.create("Wasutp.test.Test");Wasutp.test.Test.init()},500)}}},failure:function(response){errorsHandler.addMessage(errorsHandler.getSystemMessages().server_error_with_status+response.status,response.responseText,0);appHelper=Ext.create("Wasutp.AppHelper",{response:null});wasutpApp=Ext.create("Wasutp.App");panelsHelper=Ext.create("Wasutp.Panels.PanelsHelper")}})});Ext.define("Wasutp.goto.GotoGrid",{grid:null,constructor:function(grid){this.setGrid(grid)},setGrid:function(grid){this.grid=grid||null},jumpToRow:function(record){var me=this,sm=me.grid.getSelectionModel(),index=me.grid.store.indexOf(record);sm.select(record);if(index&&me.grid.view.bufferedRenderer){me.grid.view.bufferedRenderer.scrollTo(index,false)}}});Ext.define("Wasutp.Configurations.Form.Create.Profile.DcsDnDConfirmIpPort",{extend:"Wasutp.Configurations.Form.Create.Profile.DcsDnDConfirm",constructor:function(params){this.superclass.constructor(params)},getItems:function(){var me=this,items=[],margin="5 0 5 0",height=22;items.push({xtype:"displayfield",cls:"wasutp-displayfield-auto-height",hideLabel:true,border:false,margin:"10 10 10 10",value:me.params.confirmMessage});items.push({xtype:"textfield",name:"prefix",margin:"5 10 5 10",fieldLabel:"Наименование",value:"",labelWidth:100,width:420,validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendData()}},afterrender:function(field){Ext.defer(function(){field.focus(true)},1)}}});items.push({xtype:"textfield",name:"adress",margin:"0 10 5 10",fieldLabel:"IP адрес",value:"",labelWidth:100,width:420,validator:me.validateIpAdressWithEmpty,hidden:me.params.hideIpPort===true,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendData()}}}});items.push({xtype:"numberfield",name:"port",margin:"0 10 5 10",fieldLabel:"Порт",value:me.params.port,labelWidth:100,width:420,validator:me.validateLength256,allowBlank:false,hidden:me.params.hideIpPort===true,listeners:{specialkey:function(field,event){if(event.getKey()==event.ENTER){me.sendData()}},change:{fn:function(ths,newValue,oldValue,eOpts){newValue=me.prepareNaturalNumber(ths,newValue,oldValue);ths.setValue(newValue)}}}});return items},sendData:function(){var me=this,form=me.formPanel.getForm(),prefixField=form.findField("prefix"),adressField=form.findField("adress"),portField=form.findField("port");me.continueParams.prefix=prefixField.getValue();me.continueParams.adress=adressField.getValue();me.continueParams.port=portField.getValue();if(adressField.isValid()===false){errorsHandler.addMessage("Ошибка",'Поле "IP адрес" заполнено неверно',Wasutp.ErrorsHandler.error);return false}if(!me.continueParams.port){errorsHandler.addMessage("Ошибка",'Поле "Порт" обязательно для заполнения',Wasutp.ErrorsHandler.error);return false}(me.continueFunc)(me.continueParams);me.win.close()}});(function(mod){if(typeof exports=="object"&&typeof module=="object"){module.exports=mod()}else{if(typeof define=="function"&&define.amd){return define([],mod)}else{(this||window).CodeMirror=mod()}}})(function(){var userAgent=navigator.userAgent;var platform=navigator.platform;var gecko=/gecko\/\d/i.test(userAgent);var ie_upto10=/MSIE \d/.test(userAgent);var ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);var ie=ie_upto10||ie_11up;var ie_version=ie&&(ie_upto10?document.documentMode||6:ie_11up[1]);var webkit=/WebKit\//.test(userAgent);var qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent);var chrome=/Chrome\//.test(userAgent);var presto=/Opera\//.test(userAgent);var safari=/Apple Computer/.test(navigator.vendor);var mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);var phantom=/PhantomJS/.test(userAgent);var ios=/AppleWebKit/.test(userAgent)&&/Mobile\/\w+/.test(userAgent);var mobile=ios||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);var mac=ios||/Mac/.test(platform);var chromeOS=/\bCrOS\b/.test(userAgent);var windows=/win/i.test(platform);var presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);if(presto_version){presto_version=Number(presto_version[1])}if(presto_version&&presto_version>=15){presto=false;webkit=true}var flipCtrlCmd=mac&&(qtwebkit||presto&&(presto_version==null||presto_version<12.11));var captureRightClick=gecko||(ie&&ie_version>=9);var sawReadOnlySpans=false,sawCollapsedSpans=false;function CodeMirror(place,options){if(!(this instanceof CodeMirror)){return new CodeMirror(place,options)}this.options=options=options?copyObj(options):{};copyObj(defaults,options,false);setGuttersForLineNumbers(options);var doc=options.value;if(typeof doc=="string"){doc=new Doc(doc,options.mode,null,options.lineSeparator)}this.doc=doc;var input=new CodeMirror.inputStyles[options.inputStyle](this);var display=this.display=new Display(place,doc,input);display.wrapper.CodeMirror=this;updateGutters(this);themeChanged(this);if(options.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(options.autofocus&&!mobile){display.input.focus()}initScrollbars(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new Delayed(),keySeq:null,specialChars:null};var cm=this;if(ie&&ie_version<11){setTimeout(function(){cm.display.input.reset(true)},20)}registerEventHandlers(this);ensureGlobalHandlers();startOperation(this);this.curOp.forceUpdate=true;attachDoc(this,doc);if((options.autofocus&&!mobile)||cm.hasFocus()){setTimeout(bind(onFocus,this),20)}else{onBlur(this)}for(var opt in optionHandlers){if(optionHandlers.hasOwnProperty(opt)){optionHandlers[opt](this,options[opt],Init)}}maybeUpdateLineNumberWidth(this);if(options.finishInit){options.finishInit(this)}for(var i=0;i<initHooks.length;++i){initHooks[i](this)}endOperation(this);if(webkit&&options.lineWrapping&&getComputedStyle(display.lineDiv).textRendering=="optimizelegibility"){display.lineDiv.style.textRendering="auto"}}function Display(place,doc,input){var d=this;this.input=input;d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler");d.scrollbarFiller.setAttribute("cm-not-content","true");d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler");d.gutterFiller.setAttribute("cm-not-content","true");d.lineDiv=elt("div",null,"CodeMirror-code");d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1");d.cursorDiv=elt("div",null,"CodeMirror-cursors");d.measure=elt("div",null,"CodeMirror-measure");d.lineMeasure=elt("div",null,"CodeMirror-measure");d.lineSpace=elt("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");d.mover=elt("div",[elt("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative");d.sizer=elt("div",[d.mover],"CodeMirror-sizer");d.sizerWidth=null;d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerGap+"px; width: 1px;");d.gutters=elt("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=elt("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(ie&&ie_version<8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0}if(!webkit&&!(gecko&&mobile)){d.scroller.draggable=true}if(place){if(place.appendChild){place.appendChild(d.wrapper)}else{place(d.wrapper)}}d.viewFrom=d.viewTo=doc.first;d.reportedViewFrom=d.reportedViewTo=doc.first;d.view=[];d.renderedView=null;d.externalMeasured=null;d.viewOffset=0;d.lastWrapHeight=d.lastWrapWidth=0;d.updateLineNumbers=null;d.nativeBarWidth=d.barHeight=d.barWidth=0;d.scrollbarsClipped=false;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.alignWidgets=false;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.maxLine=null;d.maxLineLength=0;d.maxLineChanged=false;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;d.shift=false;d.selForContextMenu=null;d.activeTouch=null;input.init(d)}function loadMode(cm){cm.doc.mode=CodeMirror.getMode(cm.options,cm.doc.modeOption);resetModeState(cm)}function resetModeState(cm){cm.doc.iter(function(line){if(line.stateAfter){line.stateAfter=null}if(line.styles){line.styles=null}});cm.doc.frontier=cm.doc.first;startWorker(cm,100);cm.state.modeGen++;if(cm.curOp){regChange(cm)}}function wrappingChanged(cm){if(cm.options.lineWrapping){addClass(cm.display.wrapper,"CodeMirror-wrap");cm.display.sizer.style.minWidth="";cm.display.sizerWidth=null}else{rmClass(cm.display.wrapper,"CodeMirror-wrap");findMaxLine(cm)}estimateLineHeights(cm);regChange(cm);clearCaches(cm);setTimeout(function(){updateScrollbars(cm)},100)}function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping;var perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line)){return 0}var widgetsHeight=0;if(line.widgets){for(var i=0;i<line.widgets.length;i++){if(line.widgets[i].height){widgetsHeight+=line.widgets[i].height}}}if(wrapping){return widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th}else{return widgetsHeight+th}}}function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);if(estHeight!=line.height){updateLineHeight(line,estHeight)}})}function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");clearCaches(cm)}function guttersChanged(cm){updateGutters(cm);regChange(cm);setTimeout(function(){alignHorizontally(cm)},20)}function updateGutters(cm){var gutters=cm.display.gutters,specs=cm.options.gutters;removeChildren(gutters);for(var i=0;i<specs.length;++i){var gutterClass=specs[i];var gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+gutterClass));if(gutterClass=="CodeMirror-linenumbers"){cm.display.lineGutter=gElt;gElt.style.width=(cm.display.lineNumWidth||1)+"px"}}gutters.style.display=i?"":"none";updateGutterSpace(cm)}function updateGutterSpace(cm){var width=cm.display.gutters.offsetWidth;cm.display.sizer.style.marginLeft=width+"px"}function lineLength(line){if(line.height==0){return 0}var len=line.text.length,merged,cur=line;while(merged=collapsedSpanAtStart(cur)){var found=merged.find(0,true);cur=found.from.line;len+=found.from.ch-found.to.ch}cur=line;while(merged=collapsedSpanAtEnd(cur)){var found=merged.find(0,true);len-=cur.text.length-found.from.ch;cur=found.to.line;len+=cur.text.length-found.to.ch}return len}function findMaxLine(cm){var d=cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first);d.maxLineLength=lineLength(d.maxLine);d.maxLineChanged=true;doc.iter(function(line){var len=lineLength(line);if(len>d.maxLineLength){d.maxLineLength=len;d.maxLine=line}})}function setGuttersForLineNumbers(options){var found=indexOf(options.gutters,"CodeMirror-linenumbers");if(found==-1&&options.lineNumbers){options.gutters=options.gutters.concat(["CodeMirror-linenumbers"])}else{if(found>-1&&!options.lineNumbers){options.gutters=options.gutters.slice(0);options.gutters.splice(found,1)}}}function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth;var docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW}}function NativeScrollbars(place,scroll,cm){this.cm=cm;var vert=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var horiz=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");place(vert);place(horiz);on(vert,"scroll",function(){if(vert.clientHeight){scroll(vert.scrollTop,"vertical")}});on(horiz,"scroll",function(){if(horiz.clientWidth){scroll(horiz.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(ie&&ie_version<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}NativeScrollbars.prototype=copyObj({update:function(measure){var needsH=measure.scrollWidth>measure.clientWidth+1;var needsV=measure.scrollHeight>measure.clientHeight+1;var sWidth=measure.nativeBarWidth;if(needsV){this.vert.style.display="block";this.vert.style.bottom=needsH?sWidth+"px":"0";var totalHeight=measure.viewHeight-(needsH?sWidth:0);this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+totalHeight)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(needsH){this.horiz.style.display="block";this.horiz.style.right=needsV?sWidth+"px":"0";this.horiz.style.left=measure.barLeft+"px";var totalWidth=measure.viewWidth-measure.barLeft-(needsV?sWidth:0);this.horiz.firstChild.style.width=(measure.scrollWidth-measure.clientWidth+totalWidth)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&measure.clientHeight>0){if(sWidth==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:needsV?sWidth:0,bottom:needsH?sWidth:0}},setScrollLeft:function(pos){if(this.horiz.scrollLeft!=pos){this.horiz.scrollLeft=pos}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}},setScrollTop:function(pos){if(this.vert.scrollTop!=pos){this.vert.scrollTop=pos}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}},zeroWidthHack:function(){var w=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=w;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new Delayed;this.disableVert=new Delayed},enableZeroWidthBar:function(bar,delay){bar.style.pointerEvents="auto";function maybeDisable(){var box=bar.getBoundingClientRect();var elt=document.elementFromPoint(box.left+1,box.bottom-1);if(elt!=bar){bar.style.pointerEvents="none"}else{delay.set(1000,maybeDisable)}}delay.set(1000,maybeDisable)},clear:function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz);parent.removeChild(this.vert)}},NativeScrollbars.prototype);function NullScrollbars(){}NullScrollbars.prototype=copyObj({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},NullScrollbars.prototype);CodeMirror.scrollbarModel={"native":NativeScrollbars,"null":NullScrollbars};function initScrollbars(cm){if(cm.display.scrollbars){cm.display.scrollbars.clear();if(cm.display.scrollbars.addClass){rmClass(cm.display.wrapper,cm.display.scrollbars.addClass)}}cm.display.scrollbars=new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller);on(node,"mousedown",function(){if(cm.state.focused){setTimeout(function(){cm.display.input.focus()},0)}});node.setAttribute("cm-not-content","true")},function(pos,axis){if(axis=="horizontal"){setScrollLeft(cm,pos)}else{setScrollTop(cm,pos)}},cm);if(cm.display.scrollbars.addClass){addClass(cm.display.wrapper,cm.display.scrollbars.addClass)}}function updateScrollbars(cm,measure){if(!measure){measure=measureForScrollbars(cm)}var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(var i=0;i<4&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;i++){if(startWidth!=cm.display.barWidth&&cm.options.lineWrapping){updateHeightsInViewport(cm)}updateScrollbarsInner(cm,measureForScrollbars(cm));startWidth=cm.display.barWidth;startHeight=cm.display.barHeight}}function updateScrollbarsInner(cm,measure){var d=cm.display;var sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px";d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px";d.heightForcer.style.borderBottom=sizes.bottom+"px solid transparent";if(sizes.right&&sizes.bottom){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=sizes.bottom+"px";d.scrollbarFiller.style.width=sizes.right+"px"}else{d.scrollbarFiller.style.display=""}if(sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter){d.gutterFiller.style.display="block";d.gutterFiller.style.height=sizes.bottom+"px";d.gutterFiller.style.width=measure.gutterWidth+"px"}else{d.gutterFiller.style.display=""}}function visibleLines(display,doc,viewport){var top=viewport&&viewport.top!=null?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-paddingTop(display));var bottom=viewport&&viewport.bottom!=null?viewport.bottom:top+display.wrapper.clientHeight;var from=lineAtHeight(doc,top),to=lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line,ensureTo=viewport.ensure.to.line;if(ensureFrom<from){from=ensureFrom;to=lineAtHeight(doc,heightAtLine(getLine(doc,ensureFrom))+display.wrapper.clientHeight)}else{if(Math.min(ensureTo,doc.lastLine())>=to){from=lineAtHeight(doc,heightAtLine(getLine(doc,ensureTo))-display.wrapper.clientHeight);to=ensureTo}}}return{from:from,to:Math.max(to,from+1)}}function alignHorizontally(cm){var display=cm.display,view=display.view;if(!display.alignWidgets&&(!display.gutters.firstChild||!cm.options.fixedGutter)){return}var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft;var gutterW=display.gutters.offsetWidth,left=comp+"px";for(var i=0;i<view.length;i++){if(!view[i].hidden){if(cm.options.fixedGutter){if(view[i].gutter){view[i].gutter.style.left=left}if(view[i].gutterBackground){view[i].gutterBackground.style.left=left}}var align=view[i].alignable;if(align){for(var j=0;j<align.length;j++){align[j].style.left=left}}}}if(cm.options.fixedGutter){display.gutters.style.left=(comp+gutterW)+"px"}}function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers){return false}var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length!=display.lineNumChars){var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;display.lineGutter.style.width="";display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding)+1;display.lineNumWidth=display.lineNumInnerWidth+padding;display.lineNumChars=display.lineNumInnerWidth?last.length:-1;display.lineGutter.style.width=display.lineNumWidth+"px";updateGutterSpace(cm);return true}return false}function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left}function DisplayUpdate(cm,viewport,force){var display=cm.display;this.viewport=viewport;this.visible=visibleLines(display,cm.doc,viewport);this.editorIsHidden=!display.wrapper.offsetWidth;this.wrapperHeight=display.wrapper.clientHeight;this.wrapperWidth=display.wrapper.clientWidth;this.oldDisplayWidth=displayWidth(cm);this.force=force;this.dims=getDimensions(cm);this.events=[]}DisplayUpdate.prototype.signal=function(emitter,type){if(hasHandler(emitter,type)){this.events.push(arguments)}};DisplayUpdate.prototype.finish=function(){for(var i=0;i<this.events.length;i++){signal.apply(null,this.events[i])}};function maybeClipScrollbars(cm){var display=cm.display;if(!display.scrollbarsClipped&&display.scroller.offsetWidth){display.nativeBarWidth=display.scroller.offsetWidth-display.scroller.clientWidth;display.heightForcer.style.height=scrollGap(cm)+"px";display.sizer.style.marginBottom=-display.nativeBarWidth+"px";display.sizer.style.borderRightWidth=scrollGap(cm)+"px";display.scrollbarsClipped=true}}function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden){resetView(cm);return false}if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&countDirtyView(cm)==0){return false}if(maybeUpdateLineNumberWidth(cm)){resetView(cm);update.dims=getDimensions(cm)}var end=doc.first+doc.size;var from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first);var to=Math.min(end,update.visible.to+cm.options.viewportMargin);if(display.viewFrom<from&&from-display.viewFrom<20){from=Math.max(doc.first,display.viewFrom)}if(display.viewTo>to&&display.viewTo-to<20){to=Math.min(end,display.viewTo)}if(sawCollapsedSpans){from=visualLineNo(cm.doc,from);to=visualLineEndNo(cm.doc,to)}var different=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;adjustView(cm,from,to);display.viewOffset=heightAtLine(getLine(cm.doc,display.viewFrom));cm.display.mover.style.top=display.viewOffset+"px";var toUpdate=countDirtyView(cm);if(!different&&toUpdate==0&&!update.force&&display.renderedView==display.view&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)){return false}var focused=activeElt();if(toUpdate>4){display.lineDiv.style.display="none"}patchDisplay(cm,display.updateLineNumbers,update.dims);if(toUpdate>4){display.lineDiv.style.display=""}display.renderedView=display.view;if(focused&&activeElt()!=focused&&focused.offsetHeight){focused.focus()}removeChildren(display.cursorDiv);removeChildren(display.selectionDiv);display.gutters.style.height=display.sizer.style.minHeight=0;if(different){display.lastWrapHeight=update.wrapperHeight;display.lastWrapWidth=update.wrapperWidth;startWorker(cm,400)}display.updateLineNumbers=null;return true}function postUpdateDisplay(cm,update){var viewport=update.viewport;for(var first=true;;first=false){if(!first||!cm.options.lineWrapping||update.oldDisplayWidth==displayWidth(cm)){if(viewport&&viewport.top!=null){viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-displayHeight(cm),viewport.top)}}update.visible=visibleLines(cm.display,cm.doc,viewport);if(update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo){break}}if(!updateDisplayIfNeeded(cm,update)){break}updateHeightsInViewport(cm);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure)}update.signal(cm,"update",cm);if(cm.display.viewFrom!=cm.display.reportedViewFrom||cm.display.viewTo!=cm.display.reportedViewTo){update.signal(cm,"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo);cm.display.reportedViewFrom=cm.display.viewFrom;cm.display.reportedViewTo=cm.display.viewTo}}function updateDisplaySimple(cm,viewport){var update=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,update)){updateHeightsInViewport(cm);postUpdateDisplay(cm,update);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure);update.finish()}}function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px";cm.display.heightForcer.style.top=measure.docHeight+"px";cm.display.gutters.style.height=(measure.docHeight+cm.display.barHeight+scrollGap(cm))+"px"}function updateHeightsInViewport(cm){var display=cm.display;var prevBottom=display.lineDiv.offsetTop;for(var i=0;i<display.view.length;i++){var cur=display.view[i],height;if(cur.hidden){continue}if(ie&&ie_version<8){var bot=cur.node.offsetTop+cur.node.offsetHeight;height=bot-prevBottom;prevBottom=bot}else{var box=cur.node.getBoundingClientRect();height=box.bottom-box.top}var diff=cur.line.height-height;if(height<2){height=textHeight(display)}if(diff>0.001||diff<-0.001){updateLineHeight(cur.line,height);updateWidgetHeight(cur.line);if(cur.rest){for(var j=0;j<cur.rest.length;j++){updateWidgetHeight(cur.rest[j])}}}}}function updateWidgetHeight(line){if(line.widgets){for(var i=0;i<line.widgets.length;++i){line.widgets[i].height=line.widgets[i].node.parentNode.offsetHeight}}}function getDimensions(cm){var d=cm.display,left={},width={};var gutterLeft=d.gutters.clientLeft;for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){left[cm.options.gutters[i]]=n.offsetLeft+n.clientLeft+gutterLeft;width[cm.options.gutters[i]]=n.clientWidth}return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}function patchDisplay(cm,updateNumbersFrom,dims){var display=cm.display,lineNumbers=cm.options.lineNumbers;var container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;if(webkit&&mac&&cm.display.currentWheelTarget==node){node.style.display="none"}else{node.parentNode.removeChild(node)}return next}var view=display.view,lineN=display.viewFrom;for(var i=0;i<view.length;i++){var lineView=view[i];if(lineView.hidden){}else{if(!lineView.node||lineView.node.parentNode!=container){var node=buildLineElement(cm,lineView,lineN,dims);container.insertBefore(node,cur)}else{while(cur!=lineView.node){cur=rm(cur)}var updateNumber=lineNumbers&&updateNumbersFrom!=null&&updateNumbersFrom<=lineN&&lineView.lineNumber;if(lineView.changes){if(indexOf(lineView.changes,"gutter")>-1){updateNumber=false}updateLineForChanges(cm,lineView,lineN,dims)}if(updateNumber){removeChildren(lineView.lineNumber);lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,lineN)))}cur=lineView.node.nextSibling}}lineN+=lineView.size}while(cur){cur=rm(cur)}}function updateLineForChanges(cm,lineView,lineN,dims){for(var j=0;j<lineView.changes.length;j++){var type=lineView.changes[j];if(type=="text"){updateLineText(cm,lineView)}else{if(type=="gutter"){updateLineGutter(cm,lineView,lineN,dims)}else{if(type=="class"){updateLineClasses(lineView)}else{if(type=="widget"){updateLineWidgets(cm,lineView,dims)}}}}}lineView.changes=null}function ensureLineWrapped(lineView){if(lineView.node==lineView.text){lineView.node=elt("div",null,null,"position: relative");if(lineView.text.parentNode){lineView.text.parentNode.replaceChild(lineView.node,lineView.text)}lineView.node.appendChild(lineView.text);if(ie&&ie_version<8){lineView.node.style.zIndex=2}}return lineView.node}function updateLineBackground(lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;if(cls){cls+=" CodeMirror-linebackground"}if(lineView.background){if(cls){lineView.background.className=cls}else{lineView.background.parentNode.removeChild(lineView.background);lineView.background=null}}else{if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt("div",null,cls),wrap.firstChild)}}}function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;if(ext&&ext.line==lineView.line){cm.display.externalMeasured=null;lineView.measure=ext.measure;return ext.built}return buildLineContent(cm,lineView)}function updateLineText(cm,lineView){var cls=lineView.text.className;var built=getLineContent(cm,lineView);if(lineView.text==lineView.node){lineView.node=built.pre}lineView.text.parentNode.replaceChild(built.pre,lineView.text);lineView.text=built.pre;if(built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass){lineView.bgClass=built.bgClass;lineView.textClass=built.textClass;updateLineClasses(lineView)}else{if(cls){lineView.text.className=cls}}}function updateLineClasses(lineView){updateLineBackground(lineView);if(lineView.line.wrapClass){ensureLineWrapped(lineView).className=lineView.line.wrapClass}else{if(lineView.node!=lineView.text){lineView.node.className=""}}var textClass=lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass;lineView.text.className=textClass||""}function updateLineGutter(cm,lineView,lineN,dims){if(lineView.gutter){lineView.node.removeChild(lineView.gutter);lineView.gutter=null}if(lineView.gutterBackground){lineView.node.removeChild(lineView.gutterBackground);lineView.gutterBackground=null}if(lineView.line.gutterClass){var wrap=ensureLineWrapped(lineView);lineView.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px");wrap.insertBefore(lineView.gutterBackground,lineView.text)}var markers=lineView.line.gutterMarkers;if(cm.options.lineNumbers||markers){var wrap=ensureLineWrapped(lineView);var gutterWrap=lineView.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px");cm.display.input.setUneditable(gutterWrap);wrap.insertBefore(gutterWrap,lineView.text);if(lineView.line.gutterClass){gutterWrap.className+=" "+lineView.line.gutterClass}if(cm.options.lineNumbers&&(!markers||!markers["CodeMirror-linenumbers"])){lineView.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+cm.display.lineNumInnerWidth+"px"))}if(markers){for(var k=0;k<cm.options.gutters.length;++k){var id=cm.options.gutters[k],found=markers.hasOwnProperty(id)&&markers[id];if(found){gutterWrap.appendChild(elt("div",[found],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"))}}}}}function updateLineWidgets(cm,lineView,dims){if(lineView.alignable){lineView.alignable=null}for(var node=lineView.node.firstChild,next;node;node=next){var next=node.nextSibling;if(node.className=="CodeMirror-linewidget"){lineView.node.removeChild(node)}}insertLineWidgets(cm,lineView,dims)}function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);lineView.text=lineView.node=built.pre;if(built.bgClass){lineView.bgClass=built.bgClass}if(built.textClass){lineView.textClass=built.textClass}updateLineClasses(lineView);updateLineGutter(cm,lineView,lineN,dims);insertLineWidgets(cm,lineView,dims);return lineView.node}function insertLineWidgets(cm,lineView,dims){insertLineWidgetsFor(cm,lineView.line,lineView,dims,true);if(lineView.rest){for(var i=0;i<lineView.rest.length;i++){insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,false)}}}function insertLineWidgetsFor(cm,line,lineView,dims,allowAbove){if(!line.widgets){return}var wrap=ensureLineWrapped(lineView);for(var i=0,ws=line.widgets;i<ws.length;++i){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget");if(!widget.handleMouseEvents){node.setAttribute("cm-ignore-events","true")}positionLineWidget(widget,node,lineView,dims);cm.display.input.setUneditable(node);if(allowAbove&&widget.above){wrap.insertBefore(node,lineView.gutter||lineView.text)}else{wrap.appendChild(node)}signalLater(widget,"redraw")}}function positionLineWidget(widget,node,lineView,dims){if(widget.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px";if(!widget.coverGutter){width-=dims.gutterTotalWidth;node.style.paddingLeft=dims.gutterTotalWidth+"px"}node.style.width=width+"px"}if(widget.coverGutter){node.style.zIndex=5;node.style.position="relative";if(!widget.noHScroll){node.style.marginLeft=-dims.gutterTotalWidth+"px"}}}var Pos=CodeMirror.Pos=function(line,ch){if(!(this instanceof Pos)){return new Pos(line,ch)}this.line=line;this.ch=ch};var cmp=CodeMirror.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};function copyPos(x){return Pos(x.line,x.ch)}function maxPos(a,b){return cmp(a,b)<0?b:a}function minPos(a,b){return cmp(a,b)<0?a:b}function ensureFocus(cm){if(!cm.state.focused){cm.display.input.focus();onFocus(cm)}}var lastCopied=null;function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=false;if(!sel){sel=doc.sel}var paste=cm.state.pasteIncoming||origin=="paste";var textLines=doc.splitLines(inserted),multiPaste=null;if(paste&&sel.ranges.length>1){if(lastCopied&&lastCopied.text.join("\n")==inserted){if(sel.ranges.length%lastCopied.text.length==0){multiPaste=[];for(var i=0;i<lastCopied.text.length;i++){multiPaste.push(doc.splitLines(lastCopied.text[i]))}}}else{if(textLines.length==sel.ranges.length){multiPaste=map(textLines,function(l){return[l]})}}}for(var i=sel.ranges.length-1;i>=0;i--){var range=sel.ranges[i];var from=range.from(),to=range.to();if(range.empty()){if(deleted&&deleted>0){from=Pos(from.line,from.ch-deleted)}else{if(cm.state.overwrite&&!paste){to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length))}else{if(lastCopied&&lastCopied.lineWise&&lastCopied.text.join("\n")==inserted){from=to=Pos(from.line,0)}}}}var updateInput=cm.curOp.updateInput;var changeEvent={from:from,to:to,text:multiPaste?multiPaste[i%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming?"cut":"+input")};makeChange(cm.doc,changeEvent);signalLater(cm,"inputRead",cm,changeEvent)}if(inserted&&!paste){triggerElectric(cm,inserted)}ensureCursorVisible(cm);cm.curOp.updateInput=updateInput;cm.curOp.typing=true;cm.state.pasteIncoming=cm.state.cutIncoming=false}function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("Text");if(pasted){e.preventDefault();if(!cm.isReadOnly()&&!cm.options.disableInput){runInOp(cm,function(){applyTextInput(cm,pasted,0,null,"paste")})}return true}}function triggerElectric(cm,inserted){if(!cm.options.electricChars||!cm.options.smartIndent){return}var sel=cm.doc.sel;for(var i=sel.ranges.length-1;i>=0;i--){var range=sel.ranges[i];if(range.head.ch>100||(i&&sel.ranges[i-1].head.line==range.head.line)){continue}var mode=cm.getModeAt(range.head);var indented=false;if(mode.electricChars){for(var j=0;j<mode.electricChars.length;j++){if(inserted.indexOf(mode.electricChars.charAt(j))>-1){indented=indentLine(cm,range.head.line,"smart");break}}}else{if(mode.electricInput){if(mode.electricInput.test(getLine(cm.doc,range.head.line).text.slice(0,range.head.ch))){indented=indentLine(cm,range.head.line,"smart")}}}if(indented){signalLater(cm,"electricInput",cm,range.head.line)}}}function copyableRanges(cm){var text=[],ranges=[];for(var i=0;i<cm.doc.sel.ranges.length;i++){var line=cm.doc.sel.ranges[i].head.line;var lineRange={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(lineRange);text.push(cm.getRange(lineRange.anchor,lineRange.head))}return{text:text,ranges:ranges}}function disableBrowserMagic(field,spellcheck){field.setAttribute("autocorrect","off");field.setAttribute("autocapitalize","off");field.setAttribute("spellcheck",!!spellcheck)}function TextareaInput(cm){this.cm=cm;this.prevInput="";this.pollingFast=false;this.polling=new Delayed();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null}function hiddenTextarea(){var te=elt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var div=elt("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(webkit){te.style.width="1000px"}else{te.setAttribute("wrap","off")}if(ios){te.style.border="1px solid black"}disableBrowserMagic(te);return div}TextareaInput.prototype=copyObj({init:function(display){var input=this,cm=this.cm;var div=this.wrapper=hiddenTextarea();var te=this.textarea=div.firstChild;display.wrapper.insertBefore(div,display.wrapper.firstChild);if(ios){te.style.width="0px"}on(te,"input",function(){if(ie&&ie_version>=9&&input.hasSelection){input.hasSelection=null}input.poll()});on(te,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm)){return}cm.state.pasteIncoming=true;input.fastPoll()});function prepareCopyCut(e){if(signalDOMEvent(cm,e)){return}if(cm.somethingSelected()){lastCopied={lineWise:false,text:cm.getSelections()};if(input.inaccurateSelection){input.prevInput="";input.inaccurateSelection=false;te.value=lastCopied.text.join("\n");selectInput(te)}}else{if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);lastCopied={lineWise:true,text:ranges.text};if(e.type=="cut"){cm.setSelections(ranges.ranges,null,sel_dontScroll)}else{input.prevInput="";te.value=ranges.text.join("\n");selectInput(te)}}}if(e.type=="cut"){cm.state.cutIncoming=true}}on(te,"cut",prepareCopyCut);on(te,"copy",prepareCopyCut);on(display.scroller,"paste",function(e){if(eventInWidget(display,e)||signalDOMEvent(cm,e)){return}cm.state.pasteIncoming=true;input.focus()});on(display.lineSpace,"selectstart",function(e){if(!eventInWidget(display,e)){e_preventDefault(e)}});on(te,"compositionstart",function(){var start=cm.getCursor("from");if(input.composing){input.composing.range.clear()}input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});on(te,"compositionend",function(){if(input.composing){input.poll();input.composing.range.clear();input.composing=null}})},prepareSelection:function(){var cm=this.cm,display=cm.display,doc=cm.doc;var result=prepareSelection(cm);if(cm.options.moveInputWithCursor){var headPos=cursorCoords(cm,doc.sel.primary().head,"div");var wrapOff=display.wrapper.getBoundingClientRect(),lineOff=display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top));result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left))}return result},showSelection:function(drawn){var cm=this.cm,display=cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors);removeChildrenAndAdd(display.selectionDiv,drawn.selection);if(drawn.teTop!=null){this.wrapper.style.top=drawn.teTop+"px";this.wrapper.style.left=drawn.teLeft+"px"}},reset:function(typing){if(this.contextMenuPending){return}var minimal,selected,cm=this.cm,doc=cm.doc;if(cm.somethingSelected()){this.prevInput="";var range=doc.sel.primary();minimal=hasCopyEvent&&(range.to().line-range.from().line>100||(selected=cm.getSelection()).length>1000);var content=minimal?"-":selected||cm.getSelection();this.textarea.value=content;if(cm.state.focused){selectInput(this.textarea)}if(ie&&ie_version>=9){this.hasSelection=content}}else{if(!typing){this.prevInput=this.textarea.value="";if(ie&&ie_version>=9){this.hasSelection=null}}}this.inaccurateSelection=minimal},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!mobile||activeElt()!=this.textarea)){try{this.textarea.focus()}catch(e){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var input=this;if(input.pollingFast){return}input.polling.set(this.cm.options.pollInterval,function(){input.poll();if(input.cm.state.focused){input.slowPoll()}})},fastPoll:function(){var missed=false,input=this;input.pollingFast=true;function p(){var changed=input.poll();if(!changed&&!missed){missed=true;input.polling.set(60,p)}else{input.pollingFast=false;input.slowPoll()}}input.polling.set(20,p)},poll:function(){var cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||(hasSelection(input)&&!prevInput&&!this.composing)||cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq){return false}var text=input.value;if(text==prevInput&&!cm.somethingSelected()){return false}if(ie&&ie_version>=9&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text)){cm.display.input.reset();return false}if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);if(first==8203&&!prevInput){prevInput="\u200b"}if(first==8666){this.reset();return this.cm.execCommand("undo")}}var same=0,l=Math.min(prevInput.length,text.length);while(same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same)){++same}var self=this;runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,self.composing?"*compose":null);if(text.length>1000||text.indexOf("\n")>-1){input.value=self.prevInput=""}else{self.prevInput=text}if(self.composing){self.composing.range.clear();self.composing.range=cm.markText(self.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(ie&&ie_version>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(e){var input=this,cm=input.cm,display=cm.display,te=input.textarea;var pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(!pos||presto){return}var reset=cm.options.resetSelectionOnContextMenu;if(reset&&cm.doc.sel.contains(pos)==-1){operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll)}var oldCSS=te.style.cssText,oldWrapperCSS=input.wrapper.style.cssText;input.wrapper.style.cssText="position: absolute";var wrapperBox=input.wrapper.getBoundingClientRect();te.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-wrapperBox.top-5)+"px; left: "+(e.clientX-wrapperBox.left-5)+"px; z-index: 1000; background: "+(ie?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(webkit){var oldScrollY=window.scrollY}display.input.focus();if(webkit){window.scrollTo(null,oldScrollY)}display.input.reset();if(!cm.somethingSelected()){te.value=input.prevInput=" "}input.contextMenuPending=true;display.selForContextMenu=cm.doc.sel;clearTimeout(display.detectingSelectAll);function prepareSelectAllHack(){if(te.selectionStart!=null){var selected=cm.somethingSelected();var extval="\u200b"+(selected?te.value:"");te.value="\u21da";te.value=extval;input.prevInput=selected?"":"\u200b";te.selectionStart=1;te.selectionEnd=extval.length;display.selForContextMenu=cm.doc.sel}}function rehide(){input.contextMenuPending=false;input.wrapper.style.cssText=oldWrapperCSS;te.style.cssText=oldCSS;if(ie&&ie_version<9){display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos)}if(te.selectionStart!=null){if(!ie||(ie&&ie_version<9)){prepareSelectAllHack()}var i=0,poll=function(){if(display.selForContextMenu==cm.doc.sel&&te.selectionStart==0&&te.selectionEnd>0&&input.prevInput=="\u200b"){operation(cm,commands.selectAll)(cm)}else{if(i++<10){display.detectingSelectAll=setTimeout(poll,500)}else{display.input.reset()}}};display.detectingSelectAll=setTimeout(poll,200)}}if(ie&&ie_version>=9){prepareSelectAllHack()}if(captureRightClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup);setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else{setTimeout(rehide,50)}},readOnlyChanged:function(val){if(!val){this.reset()}},setUneditable:nothing,needsContentAttribute:false},TextareaInput.prototype);function ContentEditableInput(cm){this.cm=cm;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Delayed();this.gracePeriod=false}ContentEditableInput.prototype=copyObj({init:function(display){var input=this,cm=input.cm;var div=input.div=display.lineDiv;disableBrowserMagic(div,cm.options.spellcheck);on(div,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm)){return}if(ie_version<=11){setTimeout(operation(cm,function(){if(!input.pollContent()){regChange(cm)}}),20)}});on(div,"compositionstart",function(e){var data=e.data;input.composing={sel:cm.doc.sel,data:data,startData:data};if(!data){return}var prim=cm.doc.sel.primary();var line=cm.getLine(prim.head.line);var found=line.indexOf(data,Math.max(0,prim.head.ch-data.length));if(found>-1&&found<=prim.head.ch){input.composing.sel=simpleSelection(Pos(prim.head.line,found),Pos(prim.head.line,found+data.length))}});on(div,"compositionupdate",function(e){input.composing.data=e.data});on(div,"compositionend",function(e){var ours=input.composing;if(!ours){return}if(e.data!=ours.startData&&!/\u200b/.test(e.data)){ours.data=e.data}setTimeout(function(){if(!ours.handled){input.applyComposition(ours)}if(input.composing==ours){input.composing=null}},50)});on(div,"touchstart",function(){input.forceCompositionEnd()});on(div,"input",function(){if(input.composing){return}if(cm.isReadOnly()||!input.pollContent()){runInOp(input.cm,function(){regChange(cm)})}});function onCopyCut(e){if(signalDOMEvent(cm,e)){return}if(cm.somethingSelected()){lastCopied={lineWise:false,text:cm.getSelections()};if(e.type=="cut"){cm.replaceSelection("",null,"cut")}}else{if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);lastCopied={lineWise:true,text:ranges.text};if(e.type=="cut"){cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll);cm.replaceSelection("",null,"cut")})}}}if(e.clipboardData){e.clipboardData.clearData();var content=lastCopied.text.join("\n");e.clipboardData.setData("Text",content);if(e.clipboardData.getData("Text")==content){e.preventDefault();return}}var kludge=hiddenTextarea(),te=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild);te.value=lastCopied.text.join("\n");var hadFocus=document.activeElement;selectInput(te);setTimeout(function(){cm.display.lineSpace.removeChild(kludge);hadFocus.focus();if(hadFocus==div){input.showPrimarySelection()}},50)}on(div,"copy",onCopyCut);on(div,"cut",onCopyCut)},prepareSelection:function(){var result=prepareSelection(this.cm,false);result.focus=this.cm.state.focused;return result},showSelection:function(info,takeFocus){if(!info||!this.cm.display.view.length){return}if(info.focus||takeFocus){this.showPrimarySelection()}this.showMultipleSelections(info)},showPrimarySelection:function(){var sel=window.getSelection(),prim=this.cm.doc.sel.primary();var curAnchor=domToPos(this.cm,sel.anchorNode,sel.anchorOffset);var curFocus=domToPos(this.cm,sel.focusNode,sel.focusOffset);if(curAnchor&&!curAnchor.bad&&curFocus&&!curFocus.bad&&cmp(minPos(curAnchor,curFocus),prim.from())==0&&cmp(maxPos(curAnchor,curFocus),prim.to())==0){return}var start=posToDOM(this.cm,prim.from());var end=posToDOM(this.cm,prim.to());if(!start&&!end){return}var view=this.cm.display.view;var old=sel.rangeCount&&sel.getRangeAt(0);if(!start){start={node:view[0].measure.map[2],offset:0}}else{if(!end){var measure=view[view.length-1].measure;var map=measure.maps?measure.maps[measure.maps.length-1]:measure.map;end={node:map[map.length-1],offset:map[map.length-2]-map[map.length-3]}}}try{var rng=range(start.node,start.offset,end.offset,end.node)}catch(e){}if(rng){if(!gecko&&this.cm.state.focused){sel.collapse(start.node,start.offset);if(!rng.collapsed){sel.addRange(rng)}}else{sel.removeAllRanges();sel.addRange(rng)}if(old&&sel.anchorNode==null){sel.addRange(old)}else{if(gecko){this.startGracePeriod()}}}this.rememberSelection()},startGracePeriod:function(){var input=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){input.gracePeriod=false;if(input.selectionChanged()){input.cm.operation(function(){input.cm.curOp.selectionChanged=true})}},20)},showMultipleSelections:function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors);removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection)},rememberSelection:function(){var sel=window.getSelection();this.lastAnchorNode=sel.anchorNode;this.lastAnchorOffset=sel.anchorOffset;this.lastFocusNode=sel.focusNode;this.lastFocusOffset=sel.focusOffset},selectionInEditor:function(){var sel=window.getSelection();if(!sel.rangeCount){return false}var node=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,node)},focus:function(){if(this.cm.options.readOnly!="nocursor"){this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var input=this;if(this.selectionInEditor()){this.pollSelection()}else{runInOp(this.cm,function(){input.cm.curOp.selectionChanged=true})}function poll(){if(input.cm.state.focused){input.pollSelection();input.polling.set(input.cm.options.pollInterval,poll)}}this.polling.set(this.cm.options.pollInterval,poll)},selectionChanged:function(){var sel=window.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var sel=window.getSelection(),cm=this.cm;this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var head=domToPos(cm,sel.focusNode,sel.focusOffset);if(anchor&&head){runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll);if(anchor.bad||head.bad){cm.curOp.selectionChanged=true}})}}},pollContent:function(){var cm=this.cm,display=cm.display,sel=cm.doc.sel.primary();var from=sel.from(),to=sel.to();if(from.line<display.viewFrom||to.line>display.viewTo-1){return false}var fromIndex;if(from.line==display.viewFrom||(fromIndex=findViewIndex(cm,from.line))==0){var fromLine=lineNo(display.view[0].line);var fromNode=display.view[0].node}else{var fromLine=lineNo(display.view[fromIndex].line);var fromNode=display.view[fromIndex-1].node.nextSibling}var toIndex=findViewIndex(cm,to.line);if(toIndex==display.view.length-1){var toLine=display.viewTo-1;var toNode=display.lineDiv.lastChild}else{var toLine=lineNo(display.view[toIndex+1].line)-1;var toNode=display.view[toIndex+1].node.previousSibling}var newText=cm.doc.splitLines(domTextBetween(cm,fromNode,toNode,fromLine,toLine));var oldText=getBetween(cm.doc,Pos(fromLine,0),Pos(toLine,getLine(cm.doc,toLine).text.length));while(newText.length>1&&oldText.length>1){if(lst(newText)==lst(oldText)){newText.pop();oldText.pop();toLine--}else{if(newText[0]==oldText[0]){newText.shift();oldText.shift();fromLine++}else{break}}}var cutFront=0,cutEnd=0;var newTop=newText[0],oldTop=oldText[0],maxCutFront=Math.min(newTop.length,oldTop.length);while(cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront)){++cutFront}var newBot=lst(newText),oldBot=lst(oldText);var maxCutEnd=Math.min(newBot.length-(newText.length==1?cutFront:0),oldBot.length-(oldText.length==1?cutFront:0));while(cutEnd<maxCutEnd&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1)){++cutEnd}newText[newText.length-1]=newBot.slice(0,newBot.length-cutEnd);newText[0]=newText[0].slice(cutFront);var chFrom=Pos(fromLine,cutFront);var chTo=Pos(toLine,oldText.length?lst(oldText).length-cutEnd:0);if(newText.length>1||newText[0]||cmp(chFrom,chTo)){replaceRange(cm.doc,newText,chFrom,chTo,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled){return}this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()},applyComposition:function(composing){if(this.cm.isReadOnly()){operation(this.cm,regChange)(this.cm)}else{if(composing.data&&composing.data!=composing.startData){operation(this.cm,applyTextInput)(this.cm,composing.data,0,composing.sel)}}},setUneditable:function(node){node.contentEditable="false"},onKeyPress:function(e){e.preventDefault();if(!this.cm.isReadOnly()){operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)}},readOnlyChanged:function(val){this.div.contentEditable=String(val!="nocursor")},onContextMenu:nothing,resetPosition:nothing,needsContentAttribute:true},ContentEditableInput.prototype);function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden){return null}var line=getLine(cm.doc,pos.line);var info=mapFromLineView(view,line,pos.line);var order=getOrder(line),side="left";if(order){var partPos=getBidiPartAt(order,pos.ch);side=partPos%2?"right":"left"}var result=nodeAndOffsetInLineMap(info.map,pos.ch,side);result.offset=result.collapse=="right"?result.end:result.start;return result}function badPos(pos,bad){if(bad){pos.bad=true}return pos}function domToPos(cm,node,offset){var lineNode;if(node==cm.display.lineDiv){lineNode=cm.display.lineDiv.childNodes[offset];if(!lineNode){return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),true)}node=null;offset=0}else{for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv){return null}if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv){break}}}for(var i=0;i<cm.display.view.length;i++){var lineView=cm.display.view[i];if(lineView.node==lineNode){return locateNodeInLineView(lineView,node,offset)}}}function locateNodeInLineView(lineView,node,offset){var wrapper=lineView.text.firstChild,bad=false;if(!node||!contains(wrapper,node)){return badPos(Pos(lineNo(lineView.line),0),true)}if(node==wrapper){bad=true;node=wrapper.childNodes[offset];offset=0;if(!node){var line=lineView.rest?lst(lineView.rest):lineView.line;return badPos(Pos(lineNo(line),line.text.length),bad)}}var textNode=node.nodeType==3?node:null,topNode=node;if(!textNode&&node.childNodes.length==1&&node.firstChild.nodeType==3){textNode=node.firstChild;if(offset){offset=textNode.nodeValue.length}}while(topNode.parentNode!=wrapper){topNode=topNode.parentNode}var measure=lineView.measure,maps=measure.maps;function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i++){var map=i<0?measure.map:maps[i];for(var j=0;j<map.length;j+=3){var curNode=map[j+2];if(curNode==textNode||curNode==topNode){var line=lineNo(i<0?lineView.line:lineView.rest[i]);var ch=map[j]+offset;if(offset<0||curNode!=textNode){ch=map[j+(offset?1:0)]}return Pos(line,ch)}}}}var found=find(textNode,topNode,offset);if(found){return badPos(found,bad)}for(var after=topNode.nextSibling,dist=textNode?textNode.nodeValue.length-offset:0;after;after=after.nextSibling){found=find(after,after.firstChild,0);if(found){return badPos(Pos(found.line,found.ch-dist),bad)}else{dist+=after.textContent.length}}for(var before=topNode.previousSibling,dist=offset;before;before=before.previousSibling){found=find(before,before.firstChild,-1);if(found){return badPos(Pos(found.line,found.ch+dist),bad)}else{dist+=before.textContent.length}}}function domTextBetween(cm,from,to,fromLine,toLine){var text="",closing=false,lineSep=cm.doc.lineSeparator();function recognizeMarker(id){return function(marker){return marker.id==id}}function walk(node){if(node.nodeType==1){var cmText=node.getAttribute("cm-text");if(cmText!=null){if(cmText==""){cmText=node.textContent.replace(/\u200b/g,"")}text+=cmText;return}var markerID=node.getAttribute("cm-marker"),range;if(markerID){var found=cm.findMarks(Pos(fromLine,0),Pos(toLine+1,0),recognizeMarker(+markerID));if(found.length&&(range=found[0].find())){text+=getBetween(cm.doc,range.from,range.to).join(lineSep)}return}if(node.getAttribute("contenteditable")=="false"){return}for(var i=0;i<node.childNodes.length;i++){walk(node.childNodes[i])}if(/^(pre|div|p)$/i.test(node.nodeName)){closing=true}}else{if(node.nodeType==3){var val=node.nodeValue;if(!val){return}if(closing){text+=lineSep;closing=false}text+=val}}}for(;;){walk(from);if(from==to){break}from=from.nextSibling}return text}CodeMirror.inputStyles={textarea:TextareaInput,contenteditable:ContentEditableInput};function Selection(ranges,primIndex){this.ranges=ranges;this.primIndex=primIndex}Selection.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(other){if(other==this){return true}if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length){return false}for(var i=0;i<this.ranges.length;i++){var here=this.ranges[i],there=other.ranges[i];if(cmp(here.anchor,there.anchor)!=0||cmp(here.head,there.head)!=0){return false}}return true},deepCopy:function(){for(var out=[],i=0;i<this.ranges.length;i++){out[i]=new Range(copyPos(this.ranges[i].anchor),copyPos(this.ranges[i].head))}return new Selection(out,this.primIndex)},somethingSelected:function(){for(var i=0;i<this.ranges.length;i++){if(!this.ranges[i].empty()){return true}}return false},contains:function(pos,end){if(!end){end=pos}for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];if(cmp(end,range.from())>=0&&cmp(pos,range.to())<=0){return i}}return -1}};function Range(anchor,head){this.anchor=anchor;this.head=head}Range.prototype={from:function(){return minPos(this.anchor,this.head)},to:function(){return maxPos(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function normalizeSelection(ranges,primIndex){var prim=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from())});primIndex=indexOf(ranges,prim);for(var i=1;i<ranges.length;i++){var cur=ranges[i],prev=ranges[i-1];if(cmp(prev.to(),cur.from())>=0){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to());var inv=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;if(i<=primIndex){--primIndex}ranges.splice(--i,2,new Range(inv?to:from,inv?from:to))}}return new Selection(ranges,primIndex)}function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0)}function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1))}function clipPos(doc,pos){if(pos.line<doc.first){return Pos(doc.first,0)}var last=doc.first+doc.size-1;if(pos.line>last){return Pos(last,getLine(doc,last).text.length)}return clipToLen(pos,getLine(doc,pos.line).text.length)}function clipToLen(pos,linelen){var ch=pos.ch;if(ch==null||ch>linelen){return Pos(pos.line,linelen)}else{if(ch<0){return Pos(pos.line,0)}else{return pos}}}function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}function clipPosArray(doc,array){for(var out=[],i=0;i<array.length;i++){out[i]=clipPos(doc,array[i])}return out}function extendRange(doc,range,head,other){if(doc.cm&&doc.cm.display.shift||doc.extend){var anchor=range.anchor;if(other){var posBefore=cmp(head,anchor)<0;if(posBefore!=(cmp(other,anchor)<0)){anchor=head;head=other}else{if(posBefore!=(cmp(head,other)<0)){head=other}}}return new Range(anchor,head)}else{return new Range(other||head,head)}}function extendSelection(doc,head,other,options){setSelection(doc,new Selection([extendRange(doc,doc.sel.primary(),head,other)],0),options)}function extendSelections(doc,heads,options){for(var out=[],i=0;i<doc.sel.ranges.length;i++){out[i]=extendRange(doc,doc.sel.ranges[i],heads[i],null)}var newSel=normalizeSelection(out,doc.sel.primIndex);setSelection(doc,newSel,options)}function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range;setSelection(doc,normalizeSelection(ranges,doc.sel.primIndex),options)}function setSimpleSelection(doc,anchor,head,options){setSelection(doc,simpleSelection(anchor,head),options)}function filterSelectionChange(doc,sel,options){var obj={ranges:sel.ranges,update:function(ranges){this.ranges=[];for(var i=0;i<ranges.length;i++){this.ranges[i]=new Range(clipPos(doc,ranges[i].anchor),clipPos(doc,ranges[i].head))}},origin:options&&options.origin};signal(doc,"beforeSelectionChange",doc,obj);if(doc.cm){signal(doc.cm,"beforeSelectionChange",doc.cm,obj)}if(obj.ranges!=sel.ranges){return normalizeSelection(obj.ranges,obj.ranges.length-1)}else{return sel}}function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);if(last&&last.ranges){done[done.length-1]=sel;setSelectionNoUndo(doc,sel,options)}else{setSelection(doc,sel,options)}}function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options);addSelectionToHistory(doc,doc.sel,doc.cm?doc.cm.curOp.id:NaN,options)}function setSelectionNoUndo(doc,sel,options){if(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange")){sel=filterSelectionChange(doc,sel,options)}var bias=options&&options.bias||(cmp(sel.primary().head,doc.sel.primary().head)<0?-1:1);setSelectionInner(doc,skipAtomicInSelection(doc,sel,bias,true));if(!(options&&options.scroll===false)&&doc.cm){ensureCursorVisible(doc.cm)}}function setSelectionInner(doc,sel){if(sel.equals(doc.sel)){return}doc.sel=sel;if(doc.cm){doc.cm.curOp.updateInput=doc.cm.curOp.selectionChanged=true;signalCursorActivity(doc.cm)}signalLater(doc,"cursorActivity",doc)}function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,false),sel_dontScroll)}function skipAtomicInSelection(doc,sel,bias,mayClear){var out;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];var old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i];var newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear);var newHead=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);if(out||newAnchor!=range.anchor||newHead!=range.head){if(!out){out=sel.ranges.slice(0,i)}out[i]=new Range(newAnchor,newHead)}}return out?normalizeSelection(out,sel.primIndex):sel}function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=getLine(doc,pos.line);if(line.markedSpans){for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker;if((sp.from==null||(m.inclusiveLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(sp.to==null||(m.inclusiveRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear){signal(m,"beforeCursorEnter");if(m.explicitlyCleared){if(!line.markedSpans){break}else{--i;continue}}}if(!m.atomic){continue}if(oldPos){var near=m.find(dir<0?1:-1),diff;if(dir<0?m.inclusiveRight:m.inclusiveLeft){near=movePos(doc,near,-dir,near&&near.line==pos.line?line:null)}if(near&&near.line==pos.line&&(diff=cmp(near,oldPos))&&(dir<0?diff<0:diff>0)){return skipAtomicInner(doc,near,pos,dir,mayClear)}}var far=m.find(dir<0?-1:1);if(dir<0?m.inclusiveLeft:m.inclusiveRight){far=movePos(doc,far,dir,far.line==pos.line?line:null)}return far?skipAtomicInner(doc,far,pos,dir,mayClear):null}}}return pos}function skipAtomic(doc,pos,oldPos,bias,mayClear){var dir=bias||1;var found=skipAtomicInner(doc,pos,oldPos,dir,mayClear)||(!mayClear&&skipAtomicInner(doc,pos,oldPos,dir,true))||skipAtomicInner(doc,pos,oldPos,-dir,mayClear)||(!mayClear&&skipAtomicInner(doc,pos,oldPos,-dir,true));if(!found){doc.cantEdit=true;return Pos(doc.first,0)}return found}function movePos(doc,pos,dir,line){if(dir<0&&pos.ch==0){if(pos.line>doc.first){return clipPos(doc,Pos(pos.line-1))}else{return null}}else{if(dir>0&&pos.ch==(line||getLine(doc,pos.line)).text.length){if(pos.line<doc.first+doc.size-1){return Pos(pos.line+1,0)}else{return null}}else{return new Pos(pos.line,pos.ch+dir)}}}function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection())}function prepareSelection(cm,primary){var doc=cm.doc,result={};var curFragment=result.cursors=document.createDocumentFragment();var selFragment=result.selection=document.createDocumentFragment();for(var i=0;i<doc.sel.ranges.length;i++){if(primary===false&&i==doc.sel.primIndex){continue}var range=doc.sel.ranges[i];if(range.from().line>=cm.display.viewTo||range.to().line<cm.display.viewFrom){continue}var collapsed=range.empty();if(collapsed||cm.options.showCursorWhenSelecting){drawSelectionCursor(cm,range.head,curFragment)}if(!collapsed){drawSelectionRange(cm,range,selFragment)}}return result}function drawSelectionCursor(cm,head,output){var pos=cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine);var cursor=output.appendChild(elt("div","\u00a0","CodeMirror-cursor"));cursor.style.left=pos.left+"px";cursor.style.top=pos.top+"px";cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px";if(pos.other){var otherCursor=output.appendChild(elt("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));otherCursor.style.display="";otherCursor.style.left=pos.other.left+"px";otherCursor.style.top=pos.other.top+"px";otherCursor.style.height=(pos.other.bottom-pos.other.top)*0.85+"px"}}function drawSelectionRange(cm,range,output){var display=cm.display,doc=cm.doc;var fragment=document.createDocumentFragment();var padding=paddingH(cm.display),leftSide=padding.left;var rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-padding.right;function add(left,top,width,bottom){if(top<0){top=0}top=Math.round(top);bottom=Math.round(bottom);fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px; top: "+top+"px; width: "+(width==null?rightSide-left:width)+"px; height: "+(bottom-top)+"px"))}function drawForLine(line,fromArg,toArg){var lineObj=getLine(doc,line);var lineLen=lineObj.text.length;var start,end;function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias)}iterateBidiSections(getOrder(lineObj),fromArg||0,toArg==null?lineLen:toArg,function(from,to,dir){var leftPos=coords(from,"left"),rightPos,left,right;if(from==to){rightPos=leftPos;left=right=leftPos.left}else{rightPos=coords(to-1,"right");if(dir=="rtl"){var tmp=leftPos;leftPos=rightPos;rightPos=tmp}left=leftPos.left;right=rightPos.right}if(fromArg==null&&from==0){left=leftSide}if(rightPos.top-leftPos.top>3){add(left,leftPos.top,null,leftPos.bottom);left=leftSide;if(leftPos.bottom<rightPos.top){add(left,leftPos.bottom,null,rightPos.top)}}if(toArg==null&&to==lineLen){right=rightSide}if(!start||leftPos.top<start.top||leftPos.top==start.top&&leftPos.left<start.left){start=leftPos}if(!end||rightPos.bottom>end.bottom||rightPos.bottom==end.bottom&&rightPos.right>end.right){end=rightPos}if(left<leftSide+1){left=leftSide}add(left,rightPos.top,right-left,rightPos.bottom)});return{start:start,end:end}}var sFrom=range.from(),sTo=range.to();if(sFrom.line==sTo.line){drawForLine(sFrom.line,sFrom.ch,sTo.ch)}else{var fromLine=getLine(doc,sFrom.line),toLine=getLine(doc,sTo.line);var singleVLine=visualLine(fromLine)==visualLine(toLine);var leftEnd=drawForLine(sFrom.line,sFrom.ch,singleVLine?fromLine.text.length+1:null).end;var rightStart=drawForLine(sTo.line,singleVLine?0:null,sTo.ch).start;if(singleVLine){if(leftEnd.top<rightStart.top-2){add(leftEnd.right,leftEnd.top,null,leftEnd.bottom);add(leftSide,rightStart.top,rightStart.left,rightStart.bottom)}else{add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom)}}if(leftEnd.bottom<rightStart.top){add(leftSide,leftEnd.bottom,null,rightStart.top)}}output.appendChild(fragment)}function restartBlink(cm){if(!cm.state.focused){return}var display=cm.display;clearInterval(display.blinker);var on=true;display.cursorDiv.style.visibility="";if(cm.options.cursorBlinkRate>0){display.blinker=setInterval(function(){display.cursorDiv.style.visibility=(on=!on)?"":"hidden"},cm.options.cursorBlinkRate)}else{if(cm.options.cursorBlinkRate<0){display.cursorDiv.style.visibility="hidden"}}}function startWorker(cm,time){if(cm.doc.mode.startState&&cm.doc.frontier<cm.display.viewTo){cm.state.highlight.set(time,bind(highlightWorker,cm))}}function highlightWorker(cm){var doc=cm.doc;if(doc.frontier<doc.first){doc.frontier=doc.first}if(doc.frontier>=cm.display.viewTo){return}var end=+new Date+cm.options.workTime;var state=copyState(doc.mode,getStateBefore(cm,doc.frontier));var changedLines=[];doc.iter(doc.frontier,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(doc.frontier>=cm.display.viewFrom){var oldStyles=line.styles,tooLong=line.text.length>cm.options.maxHighlightLength;var highlighted=highlightLine(cm,line,tooLong?copyState(doc.mode,state):state,true);line.styles=highlighted.styles;var oldCls=line.styleClasses,newCls=highlighted.classes;if(newCls){line.styleClasses=newCls}else{if(oldCls){line.styleClasses=null}}var ischange=!oldStyles||oldStyles.length!=line.styles.length||oldCls!=newCls&&(!oldCls||!newCls||oldCls.bgClass!=newCls.bgClass||oldCls.textClass!=newCls.textClass);for(var i=0;!ischange&&i<oldStyles.length;++i){ischange=oldStyles[i]!=line.styles[i]}if(ischange){changedLines.push(doc.frontier)}line.stateAfter=tooLong?state:copyState(doc.mode,state)}else{if(line.text.length<=cm.options.maxHighlightLength){processLine(cm,line.text,state)}line.stateAfter=doc.frontier%5==0?copyState(doc.mode,state):null}++doc.frontier;if(+new Date>end){startWorker(cm,cm.options.workDelay);return true}});if(changedLines.length){runInOp(cm,function(){for(var i=0;i<changedLines.length;i++){regLineChange(cm,changedLines[i],"text")}})}}function findStartLine(cm,n,precise){var minindent,minline,doc=cm.doc;var lim=precise?-1:n-(cm.doc.mode.innerMode?1000:100);for(var search=n;search>lim;--search){if(search<=doc.first){return doc.first}var line=getLine(doc,search-1);if(line.stateAfter&&(!precise||search<=doc.frontier)){return search}var indented=countColumn(line.text,null,cm.options.tabSize);if(minline==null||minindent>indented){minline=search-1;minindent=indented}}return minline}function getStateBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState){return true}var pos=findStartLine(cm,n,precise),state=pos>doc.first&&getLine(doc,pos-1).stateAfter;if(!state){state=startState(doc.mode)}else{state=copyState(doc.mode,state)}doc.iter(pos,n,function(line){processLine(cm,line.text,state);var save=pos==n-1||pos%5==0||pos>=display.viewFrom&&pos<display.viewTo;line.stateAfter=save?copyState(doc.mode,state):null;++pos});if(precise){doc.frontier=pos}return state}function paddingTop(display){return display.lineSpace.offsetTop}function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}function paddingH(display){if(display.cachedPaddingH){return display.cachedPaddingH}var e=removeChildrenAndAdd(display.measure,elt("pre","x"));var style=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;var data={left:parseInt(style.paddingLeft),right:parseInt(style.paddingRight)};if(!isNaN(data.left)&&!isNaN(data.right)){display.cachedPaddingH=data}return data}function scrollGap(cm){return scrollerGap-cm.display.nativeBarWidth}function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth}function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight}function ensureLineHeights(cm,lineView,rect){var wrapping=cm.options.lineWrapping;var curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping){lineView.measure.width=curWidth;var rects=lineView.text.firstChild.getClientRects();for(var i=0;i<rects.length-1;i++){var cur=rects[i],next=rects[i+1];if(Math.abs(cur.bottom-next.bottom)>2){heights.push((cur.bottom+next.top)/2-rect.top)}}}heights.push(rect.bottom-rect.top)}}function mapFromLineView(lineView,line,lineN){if(lineView.line==line){return{map:lineView.measure.map,cache:lineView.measure.cache}}for(var i=0;i<lineView.rest.length;i++){if(lineView.rest[i]==line){return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]}}}for(var i=0;i<lineView.rest.length;i++){if(lineNo(lineView.rest[i])>lineN){return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i],before:true}}}}function updateExternalMeasurement(cm,line){line=visualLine(line);var lineN=lineNo(line);var view=cm.display.externalMeasured=new LineView(cm.doc,line,lineN);view.lineN=lineN;var built=view.built=buildLineContent(cm,view);view.text=built.pre;removeChildrenAndAdd(cm.display.lineMeasure,built.pre);return view}function measureChar(cm,line,ch,bias){return measureCharPrepared(cm,prepareMeasureForLine(cm,line),ch,bias)}function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo){return cm.display.view[findViewIndex(cm,lineN)]}var ext=cm.display.externalMeasured;if(ext&&lineN>=ext.lineN&&lineN<ext.lineN+ext.size){return ext}}function prepareMeasureForLine(cm,line){var lineN=lineNo(line);var view=findViewForLine(cm,lineN);if(view&&!view.text){view=null}else{if(view&&view.changes){updateLineForChanges(cm,view,lineN,getDimensions(cm));cm.curOp.forceUpdate=true}}if(!view){view=updateExternalMeasurement(cm,line)}var info=mapFromLineView(view,line,lineN);return{line:line,view:view,rect:null,map:info.map,cache:info.cache,before:info.before,hasHeights:false}}function measureCharPrepared(cm,prepared,ch,bias,varHeight){if(prepared.before){ch=-1}var key=ch+(bias||""),found;if(prepared.cache.hasOwnProperty(key)){found=prepared.cache[key]}else{if(!prepared.rect){prepared.rect=prepared.view.text.getBoundingClientRect()}if(!prepared.hasHeights){ensureLineHeights(cm,prepared.view,prepared.rect);prepared.hasHeights=true}found=measureCharInner(cm,prepared,ch,bias);if(!found.bogus){prepared.cache[key]=found}}return{left:found.left,right:found.right,top:varHeight?found.rtop:found.top,bottom:varHeight?found.rbottom:found.bottom}}var nullRect={left:0,right:0,top:0,bottom:0};function nodeAndOffsetInLineMap(map,ch,bias){var node,start,end,collapse;for(var i=0;i<map.length;i+=3){var mStart=map[i],mEnd=map[i+1];if(ch<mStart){start=0;end=1;collapse="left"}else{if(ch<mEnd){start=ch-mStart;end=start+1}else{if(i==map.length-3||ch==mEnd&&map[i+3]>ch){end=mEnd-mStart;start=end-1;if(ch>=mEnd){collapse="right"}}}}if(start!=null){node=map[i+2];if(mStart==mEnd&&bias==(node.insertLeft?"left":"right")){collapse=bias}if(bias=="left"&&start==0){while(i&&map[i-2]==map[i-3]&&map[i-1].insertLeft){node=map[(i-=3)+2];collapse="left"}}if(bias=="right"&&start==mEnd-mStart){while(i<map.length-3&&map[i+3]==map[i+4]&&!map[i+5].insertLeft){node=map[(i+=3)+2];collapse="right"}}break}}return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,coverEnd:mEnd}}function getUsefulRect(rects,bias){var rect=nullRect;if(bias=="left"){for(var i=0;i<rects.length;i++){if((rect=rects[i]).left!=rect.right){break}}}else{for(var i=rects.length-1;i>=0;i--){if((rect=rects[i]).left!=rect.right){break}}}return rect}function measureCharInner(cm,prepared,ch,bias){var place=nodeAndOffsetInLineMap(prepared.map,ch,bias);var node=place.node,start=place.start,end=place.end,collapse=place.collapse;var rect;if(node.nodeType==3){for(var i=0;i<4;i++){while(start&&isExtendingChar(prepared.line.text.charAt(place.coverStart+start))){--start}while(place.coverStart+end<place.coverEnd&&isExtendingChar(prepared.line.text.charAt(place.coverStart+end))){++end}if(ie&&ie_version<9&&start==0&&end==place.coverEnd-place.coverStart){rect=node.parentNode.getBoundingClientRect()}else{rect=getUsefulRect(range(node,start,end).getClientRects(),bias)}if(rect.left||rect.right||start==0){break}end=start;start=start-1;collapse="right"}if(ie&&ie_version<11){rect=maybeUpdateRectForZooming(cm.display.measure,rect)}}else{if(start>0){collapse=bias="right"}var rects;if(cm.options.lineWrapping&&(rects=node.getClientRects()).length>1){rect=rects[bias=="right"?rects.length-1:0]}else{rect=node.getBoundingClientRect()}}if(ie&&ie_version<9&&!start&&(!rect||!rect.left&&!rect.right)){var rSpan=node.parentNode.getClientRects()[0];if(rSpan){rect={left:rSpan.left,right:rSpan.left+charWidth(cm.display),top:rSpan.top,bottom:rSpan.bottom}}else{rect=nullRect}}var rtop=rect.top-prepared.rect.top,rbot=rect.bottom-prepared.rect.top;var mid=(rtop+rbot)/2;var heights=prepared.view.measure.heights;for(var i=0;i<heights.length-1;i++){if(mid<heights[i]){break}}var top=i?heights[i-1]:0,bot=heights[i];var result={left:(collapse=="right"?rect.right:rect.left)-prepared.rect.left,right:(collapse=="left"?rect.left:rect.right)-prepared.rect.left,top:top,bottom:bot};if(!rect.left&&!rect.right){result.bogus=true}if(!cm.options.singleCursorHeightPerLine){result.rtop=rtop;result.rbottom=rbot}return result}function maybeUpdateRectForZooming(measure,rect){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!hasBadZoomedRects(measure)){return rect}var scaleX=screen.logicalXDPI/screen.deviceXDPI;var scaleY=screen.logicalYDPI/screen.deviceYDPI;return{left:rect.left*scaleX,right:rect.right*scaleX,top:rect.top*scaleY,bottom:rect.bottom*scaleY}}function clearLineMeasurementCacheFor(lineView){if(lineView.measure){lineView.measure.cache={};lineView.measure.heights=null;if(lineView.rest){for(var i=0;i<lineView.rest.length;i++){lineView.measure.caches[i]={}}}}}function clearLineMeasurementCache(cm){cm.display.externalMeasure=null;removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i++){clearLineMeasurementCacheFor(cm.display.view[i])}}function clearCaches(cm){clearLineMeasurementCache(cm);cm.display.cachedCharWidth=cm.display.cachedTextHeight=cm.display.cachedPaddingH=null;if(!cm.options.lineWrapping){cm.display.maxLineChanged=true}cm.display.lineNumChars=null}function pageScrollX(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function intoCoordSystem(cm,lineObj,rect,context){if(lineObj.widgets){for(var i=0;i<lineObj.widgets.length;++i){if(lineObj.widgets[i].above){var size=widgetHeight(lineObj.widgets[i]);rect.top+=size;rect.bottom+=size}}}if(context=="line"){return rect}if(!context){context="local"}var yOff=heightAtLine(lineObj);if(context=="local"){yOff+=paddingTop(cm.display)}else{yOff-=cm.display.viewOffset}if(context=="page"||context=="window"){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+(context=="window"?0:pageScrollY());var xOff=lOff.left+(context=="window"?0:pageScrollX());rect.left+=xOff;rect.right+=xOff}rect.top+=yOff;rect.bottom+=yOff;return rect}function fromCoordSystem(cm,coords,context){if(context=="div"){return coords}var left=coords.left,top=coords.top;if(context=="page"){left-=pageScrollX();top-=pageScrollY()}else{if(context=="local"||!context){var localBox=cm.display.sizer.getBoundingClientRect();left+=localBox.left;top+=localBox.top}}var lineSpaceBox=cm.display.lineSpace.getBoundingClientRect();return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top}}function charCoords(cm,pos,context,lineObj,bias){if(!lineObj){lineObj=getLine(cm.doc,pos.line)}return intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,pos.ch,bias),context)}function cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){lineObj=lineObj||getLine(cm.doc,pos.line);if(!preparedMeasure){preparedMeasure=prepareMeasureForLine(cm,lineObj)}function get(ch,right){var m=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);if(right){m.left=m.right}else{m.right=m.left}return intoCoordSystem(cm,lineObj,m,context)}function getBidi(ch,partPos){var part=order[partPos],right=part.level%2;if(ch==bidiLeft(part)&&partPos&&part.level<order[partPos-1].level){part=order[--partPos];ch=bidiRight(part)-(part.level%2?0:1);right=true}else{if(ch==bidiRight(part)&&partPos<order.length-1&&part.level<order[partPos+1].level){part=order[++partPos];ch=bidiLeft(part)-part.level%2;right=false}}if(right&&ch==part.to&&ch>part.from){return get(ch-1)}return get(ch,right)}var order=getOrder(lineObj),ch=pos.ch;if(!order){return get(ch)}var partPos=getBidiPartAt(order,ch);var val=getBidi(ch,partPos);if(bidiOther!=null){val.other=getBidi(ch,bidiOther)}return val}function estimateCoords(cm,pos){var left=0,pos=clipPos(cm.doc,pos);if(!cm.options.lineWrapping){left=charWidth(cm.display)*pos.ch}var lineObj=getLine(cm.doc,pos.line);var top=heightAtLine(lineObj)+paddingTop(cm.display);return{left:left,right:left,top:top,bottom:top+lineObj.height}}function PosWithInfo(line,ch,outside,xRel){var pos=Pos(line,ch);pos.xRel=xRel;if(outside){pos.outside=true}return pos}function coordsChar(cm,x,y){var doc=cm.doc;y+=cm.display.viewOffset;if(y<0){return PosWithInfo(doc.first,0,true,-1)}var lineN=lineAtHeight(doc,y),last=doc.first+doc.size-1;if(lineN>last){return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,true,1)}if(x<0){x=0}var lineObj=getLine(doc,lineN);for(;;){var found=coordsCharInner(cm,lineObj,lineN,x,y);var merged=collapsedSpanAtEnd(lineObj);var mergedPos=merged&&merged.find(0,true);if(merged&&(found.ch>mergedPos.from.ch||found.ch==mergedPos.from.ch&&found.xRel>0)){lineN=lineNo(lineObj=mergedPos.to.line)}else{return found}}}function coordsCharInner(cm,lineObj,lineNo,x,y){var innerOff=y-heightAtLine(lineObj);var wrongLine=false,adjust=2*cm.display.wrapper.clientWidth;var preparedMeasure=prepareMeasureForLine(cm,lineObj);function getX(ch){var sp=cursorCoords(cm,Pos(lineNo,ch),"line",lineObj,preparedMeasure);wrongLine=true;if(innerOff>sp.bottom){return sp.left-adjust}else{if(innerOff<sp.top){return sp.left+adjust}else{wrongLine=false}}return sp.left}var bidi=getOrder(lineObj),dist=lineObj.text.length;var from=lineLeft(lineObj),to=lineRight(lineObj);var fromX=getX(from),fromOutside=wrongLine,toX=getX(to),toOutside=wrongLine;if(x>toX){return PosWithInfo(lineNo,to,toOutside,1)}for(;;){if(bidi?to==from||to==moveVisually(lineObj,from,1):to-from<=1){var ch=x<fromX||x-fromX<=toX-x?from:to;var outside=ch==from?fromOutside:toOutside;var xDiff=x-(ch==from?fromX:toX);if(toOutside&&!bidi&&!/\s/.test(lineObj.text.charAt(ch))&&xDiff>0&&ch<lineObj.text.length&&preparedMeasure.view.measure.heights.length>1){var charSize=measureCharPrepared(cm,preparedMeasure,ch,"right");if(innerOff<=charSize.bottom&&innerOff>=charSize.top&&Math.abs(x-charSize.right)<xDiff){outside=false;ch++;xDiff=x-charSize.right}}while(isExtendingChar(lineObj.text.charAt(ch))){++ch}var pos=PosWithInfo(lineNo,ch,outside,xDiff<-1?-1:xDiff>1?1:0);return pos}var step=Math.ceil(dist/2),middle=from+step;if(bidi){middle=from;for(var i=0;i<step;++i){middle=moveVisually(lineObj,middle,1)}}var middleX=getX(middle);if(middleX>x){to=middle;toX=middleX;if(toOutside=wrongLine){toX+=1000}dist=step}else{from=middle;fromX=middleX;fromOutside=wrongLine;dist-=step}}}var measureText;function textHeight(display){if(display.cachedTextHeight!=null){return display.cachedTextHeight}if(measureText==null){measureText=elt("pre");for(var i=0;i<49;++i){measureText.appendChild(document.createTextNode("x"));measureText.appendChild(elt("br"))}measureText.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;if(height>3){display.cachedTextHeight=height}removeChildren(display.measure);return height||1}function charWidth(display){if(display.cachedCharWidth!=null){return display.cachedCharWidth}var anchor=elt("span","xxxxxxxxxx");var pre=elt("pre",[anchor]);removeChildrenAndAdd(display.measure,pre);var rect=anchor.getBoundingClientRect(),width=(rect.right-rect.left)/10;if(width>2){display.cachedCharWidth=width}return width||10}var operationGroup=null;var nextOpId=0;function startOperation(cm){cm.curOp={cm:cm,viewChanged:false,startHeight:cm.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++nextOpId};if(operationGroup){operationGroup.ops.push(cm.curOp)}else{cm.curOp.ownsGroup=operationGroup={ops:[cm.curOp],delayedCallbacks:[]}}}function fireCallbacksForOps(group){var callbacks=group.delayedCallbacks,i=0;do{for(;i<callbacks.length;i++){callbacks[i].call(null)}for(var j=0;j<group.ops.length;j++){var op=group.ops[j];if(op.cursorActivityHandlers){while(op.cursorActivityCalled<op.cursorActivityHandlers.length){op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm)}}}}while(i<callbacks.length)}function endOperation(cm){var op=cm.curOp,group=op.ownsGroup;if(!group){return}try{fireCallbacksForOps(group)}finally{operationGroup=null;for(var i=0;i<group.ops.length;i++){group.ops[i].cm.curOp=null}endOperations(group)}}function endOperations(group){var ops=group.ops;for(var i=0;i<ops.length;i++){endOperation_R1(ops[i])}for(var i=0;i<ops.length;i++){endOperation_W1(ops[i])}for(var i=0;i<ops.length;i++){endOperation_R2(ops[i])}for(var i=0;i<ops.length;i++){endOperation_W2(ops[i])}for(var i=0;i<ops.length;i++){endOperation_finish(ops[i])}}function endOperation_R1(op){var cm=op.cm,display=cm.display;maybeClipScrollbars(cm);if(op.updateMaxLine){findMaxLine(cm)}op.mustUpdate=op.viewChanged||op.forceUpdate||op.scrollTop!=null||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping;op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate)}function endOperation_W1(op){op.updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,op.update)}function endOperation_R2(op){var cm=op.cm,display=cm.display;if(op.updatedDisplay){updateHeightsInViewport(cm)}op.barMeasure=measureForScrollbars(cm);if(display.maxLineChanged&&!cm.options.lineWrapping){op.adjustWidthTo=measureChar(cm,display.maxLine,display.maxLine.text.length).left+3;cm.display.sizerWidth=op.adjustWidthTo;op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth);op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm))}if(op.updatedDisplay||op.selectionChanged){op.preparedSelection=display.input.prepareSelection(op.focus)}}function endOperation_W2(op){var cm=op.cm;if(op.adjustWidthTo!=null){cm.display.sizer.style.minWidth=op.adjustWidthTo+"px";if(op.maxScrollLeft<cm.doc.scrollLeft){setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),true)}cm.display.maxLineChanged=false}var takeFocus=op.focus&&op.focus==activeElt()&&(!document.hasFocus||document.hasFocus());if(op.preparedSelection){cm.display.input.showSelection(op.preparedSelection,takeFocus)}if(op.updatedDisplay||op.startHeight!=cm.doc.height){updateScrollbars(cm,op.barMeasure)}if(op.updatedDisplay){setDocumentHeight(cm,op.barMeasure)}if(op.selectionChanged){restartBlink(cm)}if(cm.state.focused&&op.updateInput){cm.display.input.reset(op.typing)}if(takeFocus){ensureFocus(op.cm)}}function endOperation_finish(op){var cm=op.cm,display=cm.display,doc=cm.doc;if(op.updatedDisplay){postUpdateDisplay(cm,op.update)}if(display.wheelStartX!=null&&(op.scrollTop!=null||op.scrollLeft!=null||op.scrollToPos)){display.wheelStartX=display.wheelStartY=null}if(op.scrollTop!=null&&(display.scroller.scrollTop!=op.scrollTop||op.forceScroll)){doc.scrollTop=Math.max(0,Math.min(display.scroller.scrollHeight-display.scroller.clientHeight,op.scrollTop));display.scrollbars.setScrollTop(doc.scrollTop);display.scroller.scrollTop=doc.scrollTop}if(op.scrollLeft!=null&&(display.scroller.scrollLeft!=op.scrollLeft||op.forceScroll)){doc.scrollLeft=Math.max(0,Math.min(display.scroller.scrollWidth-display.scroller.clientWidth,op.scrollLeft));display.scrollbars.setScrollLeft(doc.scrollLeft);display.scroller.scrollLeft=doc.scrollLeft;alignHorizontally(cm)}if(op.scrollToPos){var coords=scrollPosIntoView(cm,clipPos(doc,op.scrollToPos.from),clipPos(doc,op.scrollToPos.to),op.scrollToPos.margin);if(op.scrollToPos.isCursor&&cm.state.focused){maybeScrollWindow(cm,coords)}}var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden){for(var i=0;i<hidden.length;++i){if(!hidden[i].lines.length){signal(hidden[i],"hide")}}}if(unhidden){for(var i=0;i<unhidden.length;++i){if(unhidden[i].lines.length){signal(unhidden[i],"unhide")}}}if(display.wrapper.offsetHeight){doc.scrollTop=cm.display.scroller.scrollTop}if(op.changeObjs){signal(cm,"changes",cm,op.changeObjs)}if(op.update){op.update.finish()}}function runInOp(cm,f){if(cm.curOp){return f()}startOperation(cm);try{return f()}finally{endOperation(cm)}}function operation(cm,f){return function(){if(cm.curOp){return f.apply(cm,arguments)}startOperation(cm);try{return f.apply(cm,arguments)}finally{endOperation(cm)}}}function methodOp(f){return function(){if(this.curOp){return f.apply(this,arguments)}startOperation(this);try{return f.apply(this,arguments)}finally{endOperation(this)}}}function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp){return f.apply(this,arguments)}startOperation(cm);try{return f.apply(this,arguments)}finally{endOperation(cm)}}}function LineView(doc,line,lineN){this.line=line;this.rest=visualLineContinued(line);this.size=this.rest?lineNo(lst(this.rest))-lineN+1:1;this.node=this.text=null;this.hidden=lineIsHidden(doc,line)}function buildViewArray(cm,from,to){var array=[],nextPos;for(var pos=from;pos<to;pos=nextPos){var view=new LineView(cm.doc,getLine(cm.doc,pos),pos);nextPos=pos+view.size;array.push(view)}return array}function regChange(cm,from,to,lendiff){if(from==null){from=cm.doc.first}if(to==null){to=cm.doc.first+cm.doc.size}if(!lendiff){lendiff=0}var display=cm.display;if(lendiff&&to<display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>from)){display.updateLineNumbers=from}cm.curOp.viewChanged=true;if(from>=display.viewTo){if(sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo){resetView(cm)}}else{if(to<=display.viewFrom){if(sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom){resetView(cm)}else{display.viewFrom+=lendiff;display.viewTo+=lendiff}}else{if(from<=display.viewFrom&&to>=display.viewTo){resetView(cm)}else{if(from<=display.viewFrom){var cut=viewCuttingPoint(cm,to,to+lendiff,1);if(cut){display.view=display.view.slice(cut.index);display.viewFrom=cut.lineN;display.viewTo+=lendiff}else{resetView(cm)}}else{if(to>=display.viewTo){var cut=viewCuttingPoint(cm,from,from,-1);if(cut){display.view=display.view.slice(0,cut.index);display.viewTo=cut.lineN}else{resetView(cm)}}else{var cutTop=viewCuttingPoint(cm,from,from,-1);var cutBot=viewCuttingPoint(cm,to,to+lendiff,1);if(cutTop&&cutBot){display.view=display.view.slice(0,cutTop.index).concat(buildViewArray(cm,cutTop.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index));display.viewTo+=lendiff}else{resetView(cm)}}}}}}var ext=display.externalMeasured;if(ext){if(to<ext.lineN){ext.lineN+=lendiff}else{if(from<ext.lineN+ext.size){display.externalMeasured=null}}}}function regLineChange(cm,line,type){cm.curOp.viewChanged=true;var display=cm.display,ext=cm.display.externalMeasured;if(ext&&line>=ext.lineN&&line<ext.lineN+ext.size){display.externalMeasured=null}if(line<display.viewFrom||line>=display.viewTo){return}var lineView=display.view[findViewIndex(cm,line)];if(lineView.node==null){return}var arr=lineView.changes||(lineView.changes=[]);if(indexOf(arr,type)==-1){arr.push(type)}}function resetView(cm){cm.display.viewFrom=cm.display.viewTo=cm.doc.first;cm.display.view=[];cm.display.viewOffset=0}function findViewIndex(cm,n){if(n>=cm.display.viewTo){return null}n-=cm.display.viewFrom;if(n<0){return null}var view=cm.display.view;for(var i=0;i<view.length;i++){n-=view[i].size;if(n<0){return i}}}function viewCuttingPoint(cm,oldN,newN,dir){var index=findViewIndex(cm,oldN),diff,view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size){return{index:index,lineN:newN}}for(var i=0,n=cm.display.viewFrom;i<index;i++){n+=view[i].size}if(n!=oldN){if(dir>0){if(index==view.length-1){return null}diff=(n+view[index].size)-oldN;index++}else{diff=n-oldN}oldN+=diff;newN+=diff}while(visualLineNo(cm.doc,newN)!=newN){if(index==(dir<0?0:view.length-1)){return null}newN+=dir*view[index-(dir<0?1:0)].size;index+=dir}return{index:index,lineN:newN}}function adjustView(cm,from,to){var display=cm.display,view=display.view;if(view.length==0||from>=display.viewTo||to<=display.viewFrom){display.view=buildViewArray(cm,from,to);display.viewFrom=from}else{if(display.viewFrom>from){display.view=buildViewArray(cm,from,display.viewFrom).concat(display.view)}else{if(display.viewFrom<from){display.view=display.view.slice(findViewIndex(cm,from))}}display.viewFrom=from;if(display.viewTo<to){display.view=display.view.concat(buildViewArray(cm,display.viewTo,to))}else{if(display.viewTo>to){display.view=display.view.slice(0,findViewIndex(cm,to))}}}display.viewTo=to}function countDirtyView(cm){var view=cm.display.view,dirty=0;for(var i=0;i<view.length;i++){var lineView=view[i];if(!lineView.hidden&&(!lineView.node||lineView.changes)){++dirty}}return dirty}function registerEventHandlers(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown));if(ie&&ie_version<11){on(d.scroller,"dblclick",operation(cm,function(e){if(signalDOMEvent(cm,e)){return}var pos=posFromMouse(cm,e);if(!pos||clickInGutter(cm,e)||eventInWidget(cm.display,e)){return}e_preventDefault(e);var word=cm.findWordAt(pos);extendSelection(cm.doc,word.anchor,word.head)}))}else{on(d.scroller,"dblclick",function(e){signalDOMEvent(cm,e)||e_preventDefault(e)})}if(!captureRightClick){on(d.scroller,"contextmenu",function(e){onContextMenu(cm,e)})}var touchFinished,prevTouch={end:0};function finishTouch(){if(d.activeTouch){touchFinished=setTimeout(function(){d.activeTouch=null},1000);prevTouch=d.activeTouch;prevTouch.end=+new Date}}function isMouseLikeTouchEvent(e){if(e.touches.length!=1){return false}var touch=e.touches[0];return touch.radiusX<=1&&touch.radiusY<=1}function farAway(touch,other){if(other.left==null){return true}var dx=other.left-touch.left,dy=other.top-touch.top;return dx*dx+dy*dy>20*20}on(d.scroller,"touchstart",function(e){if(!signalDOMEvent(cm,e)&&!isMouseLikeTouchEvent(e)){clearTimeout(touchFinished);var now=+new Date;d.activeTouch={start:now,moved:false,prev:now-prevTouch.end<=300?prevTouch:null};if(e.touches.length==1){d.activeTouch.left=e.touches[0].pageX;d.activeTouch.top=e.touches[0].pageY}}});on(d.scroller,"touchmove",function(){if(d.activeTouch){d.activeTouch.moved=true}});on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&touch.left!=null&&!touch.moved&&new Date-touch.start<300){var pos=cm.coordsChar(d.activeTouch,"page"),range;if(!touch.prev||farAway(touch,touch.prev)){range=new Range(pos,pos)}else{if(!touch.prev.prev||farAway(touch,touch.prev.prev)){range=cm.findWordAt(pos)}else{range=new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)))}}cm.setSelection(range.anchor,range.head);cm.focus();e_preventDefault(e)}finishTouch()});on(d.scroller,"touchcancel",finishTouch);on(d.scroller,"scroll",function(){if(d.scroller.clientHeight){setScrollTop(cm,d.scroller.scrollTop);setScrollLeft(cm,d.scroller.scrollLeft,true);signal(cm,"scroll",cm)}});on(d.scroller,"mousewheel",function(e){onScrollWheel(cm,e)});on(d.scroller,"DOMMouseScroll",function(e){onScrollWheel(cm,e)});on(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(e){if(!signalDOMEvent(cm,e)){e_stop(e)}},over:function(e){if(!signalDOMEvent(cm,e)){onDragOver(cm,e);e_stop(e)}},start:function(e){onDragStart(cm,e)},drop:operation(cm,onDrop),leave:function(e){if(!signalDOMEvent(cm,e)){clearDragCursor(cm)}}};var inp=d.input.getField();on(inp,"keyup",function(e){onKeyUp.call(cm,e)});on(inp,"keydown",operation(cm,onKeyDown));on(inp,"keypress",operation(cm,onKeyPress));on(inp,"focus",bind(onFocus,cm));on(inp,"blur",bind(onBlur,cm))}function dragDropChanged(cm,value,old){var wasOn=old&&old!=CodeMirror.Init;if(!value!=!wasOn){var funcs=cm.display.dragFunctions;var toggle=value?on:off;toggle(cm.display.scroller,"dragstart",funcs.start);toggle(cm.display.scroller,"dragenter",funcs.enter);toggle(cm.display.scroller,"dragover",funcs.over);toggle(cm.display.scroller,"dragleave",funcs.leave);toggle(cm.display.scroller,"drop",funcs.drop)}}function onResize(cm){var d=cm.display;if(d.lastWrapHeight==d.wrapper.clientHeight&&d.lastWrapWidth==d.wrapper.clientWidth){return}d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.scrollbarsClipped=false;cm.setSize()}function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode){if(!n||(n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true")||(n.parentNode==display.sizer&&n!=display.mover)){return true}}}function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&e_target(e).getAttribute("cm-not-content")=="true"){return null}var x,y,space=display.lineSpace.getBoundingClientRect();try{x=e.clientX-space.left;y=e.clientY-space.top}catch(e){return null}var coords=coordsChar(cm,x,y),line;if(forRect&&coords.xRel==1&&(line=getLine(cm.doc,coords.line).text).length==coords.ch){var colDiff=countColumn(line,line.length,cm.options.tabSize)-line.length;coords=Pos(coords.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-colDiff))}return coords}function onMouseDown(e){var cm=this,display=cm.display;if(signalDOMEvent(cm,e)||display.activeTouch&&display.input.supportsTouch()){return}display.shift=e.shiftKey;if(eventInWidget(display,e)){if(!webkit){display.scroller.draggable=false;setTimeout(function(){display.scroller.draggable=true},100)}return}if(clickInGutter(cm,e)){return}var start=posFromMouse(cm,e);window.focus();switch(e_button(e)){case 1:if(cm.state.selectingText){cm.state.selectingText(e)}else{if(start){leftButtonDown(cm,e,start)}else{if(e_target(e)==display.scroller){e_preventDefault(e)}}}break;case 2:if(webkit){cm.state.lastMiddleDown=+new Date}if(start){extendSelection(cm.doc,start)}setTimeout(function(){display.input.focus()},20);e_preventDefault(e);break;case 3:if(captureRightClick){onContextMenu(cm,e)}else{delayBlurEvent(cm)}break}}var lastClick,lastDoubleClick;function leftButtonDown(cm,e,start){if(ie){setTimeout(bind(ensureFocus,cm),0)}else{cm.curOp.focus=activeElt()}var now=+new Date,type;if(lastDoubleClick&&lastDoubleClick.time>now-400&&cmp(lastDoubleClick.pos,start)==0){type="triple"}else{if(lastClick&&lastClick.time>now-400&&cmp(lastClick.pos,start)==0){type="double";lastDoubleClick={time:now,pos:start}}else{type="single";lastClick={time:now,pos:start}}}var sel=cm.doc.sel,modifier=mac?e.metaKey:e.ctrlKey,contained;if(cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&type=="single"&&(contained=sel.contains(start))>-1&&(cmp((contained=sel.ranges[contained]).from(),start)<0||start.xRel>0)&&(cmp(contained.to(),start)>0||start.xRel<0)){leftButtonStartDrag(cm,e,start,modifier)}else{leftButtonSelect(cm,e,start,type,modifier)}}function leftButtonStartDrag(cm,e,start,modifier){var display=cm.display,startTime=+new Date;var dragEnd=operation(cm,function(e2){if(webkit){display.scroller.draggable=false}cm.state.draggingText=false;off(document,"mouseup",dragEnd);off(display.scroller,"drop",dragEnd);if(Math.abs(e.clientX-e2.clientX)+Math.abs(e.clientY-e2.clientY)<10){e_preventDefault(e2);if(!modifier&&+new Date-200<startTime){extendSelection(cm.doc,start)}if(webkit||ie&&ie_version==9){setTimeout(function(){document.body.focus();display.input.focus()},20)}else{display.input.focus()}}});if(webkit){display.scroller.draggable=true}cm.state.draggingText=dragEnd;dragEnd.copy=mac?e.altKey:e.ctrlKey;if(display.scroller.dragDrop){display.scroller.dragDrop()}on(document,"mouseup",dragEnd);on(display.scroller,"drop",dragEnd)}function leftButtonSelect(cm,e,start,type,addNew){var display=cm.display,doc=cm.doc;e_preventDefault(e);var ourRange,ourIndex,startSel=doc.sel,ranges=startSel.ranges;if(addNew&&!e.shiftKey){ourIndex=doc.sel.contains(start);if(ourIndex>-1){ourRange=ranges[ourIndex]}else{ourRange=new Range(start,start)}}else{ourRange=doc.sel.primary();ourIndex=doc.sel.primIndex}if(chromeOS?e.shiftKey&&e.metaKey:e.altKey){type="rect";if(!addNew){ourRange=new Range(start,start)}start=posFromMouse(cm,e,true,true);ourIndex=-1}else{if(type=="double"){var word=cm.findWordAt(start);if(cm.display.shift||doc.extend){ourRange=extendRange(doc,ourRange,word.anchor,word.head)}else{ourRange=word}}else{if(type=="triple"){var line=new Range(Pos(start.line,0),clipPos(doc,Pos(start.line+1,0)));if(cm.display.shift||doc.extend){ourRange=extendRange(doc,ourRange,line.anchor,line.head)}else{ourRange=line}}else{ourRange=extendRange(doc,ourRange,start)}}}if(!addNew){ourIndex=0;setSelection(doc,new Selection([ourRange],0),sel_mouse);startSel=doc.sel}else{if(ourIndex==-1){ourIndex=ranges.length;setSelection(doc,normalizeSelection(ranges.concat([ourRange]),ourIndex),{scroll:false,origin:"*mouse"})}else{if(ranges.length>1&&ranges[ourIndex].empty()&&type=="single"&&!e.shiftKey){setSelection(doc,normalizeSelection(ranges.slice(0,ourIndex).concat(ranges.slice(ourIndex+1)),0),{scroll:false,origin:"*mouse"});startSel=doc.sel}else{replaceOneSelection(doc,ourIndex,ourRange,sel_mouse)}}}var lastPos=start;function extendTo(pos){if(cmp(lastPos,pos)==0){return}lastPos=pos;if(type=="rect"){var ranges=[],tabSize=cm.options.tabSize;var startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize);var posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize);var left=Math.min(startCol,posCol),right=Math.max(startCol,posCol);for(var line=Math.min(start.line,pos.line),end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));line<=end;line++){var text=getLine(doc,line).text,leftPos=findColumn(text,left,tabSize);if(left==right){ranges.push(new Range(Pos(line,leftPos),Pos(line,leftPos)))}else{if(text.length>leftPos){ranges.push(new Range(Pos(line,leftPos),Pos(line,findColumn(text,right,tabSize))))}}}if(!ranges.length){ranges.push(new Range(start,start))}setSelection(doc,normalizeSelection(startSel.ranges.slice(0,ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:false});cm.scrollIntoView(pos)}else{var oldRange=ourRange;var anchor=oldRange.anchor,head=pos;if(type!="single"){if(type=="double"){var range=cm.findWordAt(pos)}else{var range=new Range(Pos(pos.line,0),clipPos(doc,Pos(pos.line+1,0)))}if(cmp(range.anchor,anchor)>0){head=range.head;anchor=minPos(oldRange.from(),range.anchor)}else{head=range.anchor;anchor=maxPos(oldRange.to(),range.head)}}var ranges=startSel.ranges.slice(0);ranges[ourIndex]=new Range(clipPos(doc,anchor),head);setSelection(doc,normalizeSelection(ranges,ourIndex),sel_mouse)}}var editorSize=display.wrapper.getBoundingClientRect();var counter=0;function extend(e){var curCount=++counter;var cur=posFromMouse(cm,e,true,type=="rect");if(!cur){return}if(cmp(cur,lastPos)!=0){cm.curOp.focus=activeElt();extendTo(cur);var visible=visibleLines(display,doc);if(cur.line>=visible.to||cur.line<visible.from){setTimeout(operation(cm,function(){if(counter==curCount){extend(e)}}),150)}}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;if(outside){setTimeout(operation(cm,function(){if(counter!=curCount){return}display.scroller.scrollTop+=outside;extend(e)}),50)}}}function done(e){cm.state.selectingText=false;counter=Infinity;e_preventDefault(e);display.input.focus();off(document,"mousemove",move);off(document,"mouseup",up);doc.history.lastSelOrigin=null}var move=operation(cm,function(e){if(!e_button(e)){done(e)}else{extend(e)}});var up=operation(cm,done);cm.state.selectingText=up;on(document,"mousemove",move);on(document,"mouseup",up)}function gutterEvent(cm,e,type,prevent){try{var mX=e.clientX,mY=e.clientY}catch(e){return false}if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right)){return false}if(prevent){e_preventDefault(e)}var display=cm.display;var lineBox=display.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type)){return e_defaultPrevented(e)}mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.options.gutters.length;++i){var g=display.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX){var line=lineAtHeight(cm.doc,mY);var gutter=cm.options.gutters[i];signal(cm,type,cm,line,gutter,e);return e_defaultPrevented(e)}}}function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",true)}var lastDrop=0;function onDrop(e){var cm=this;clearDragCursor(cm);if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e)){return}e_preventDefault(e);if(ie){lastDrop=+new Date}var pos=posFromMouse(cm,e,true),files=e.dataTransfer.files;if(!pos||cm.isReadOnly()){return}if(files&&files.length&&window.FileReader&&window.File){var n=files.length,text=Array(n),read=0;var loadFile=function(file,i){if(cm.options.allowDropFileTypes&&indexOf(cm.options.allowDropFileTypes,file.type)==-1){return}var reader=new FileReader;reader.onload=operation(cm,function(){var content=reader.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(content)){content=""}text[i]=content;if(++read==n){pos=clipPos(cm.doc,pos);var change={from:pos,to:pos,text:cm.doc.splitLines(text.join(cm.doc.lineSeparator())),origin:"paste"};makeChange(cm.doc,change);setSelectionReplaceHistory(cm.doc,simpleSelection(pos,changeEnd(change)))}});reader.readAsText(file)};for(var i=0;i<n;++i){loadFile(files[i],i)}}else{if(cm.state.draggingText&&cm.doc.sel.contains(pos)>-1){cm.state.draggingText(e);setTimeout(function(){cm.display.input.focus()},20);return}try{var text=e.dataTransfer.getData("Text");if(text){if(cm.state.draggingText&&!cm.state.draggingText.copy){var selected=cm.listSelections()}setSelectionNoUndo(cm.doc,simpleSelection(pos,pos));if(selected){for(var i=0;i<selected.length;++i){replaceRange(cm.doc,"",selected[i].anchor,selected[i].head,"drag")}}cm.replaceSelection(text,"around","paste");cm.display.input.focus()}}catch(e){}}}function onDragStart(cm,e){if(ie&&(!cm.state.draggingText||+new Date-lastDrop<100)){e_stop(e);return}if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e)){return}e.dataTransfer.setData("Text",cm.getSelection());e.dataTransfer.effectAllowed="copyMove";if(e.dataTransfer.setDragImage&&!safari){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(presto){img.width=img.height=1;cm.display.wrapper.appendChild(img);img._top=img.offsetTop}e.dataTransfer.setDragImage(img,0,0);if(presto){img.parentNode.removeChild(img)}}}function onDragOver(cm,e){var pos=posFromMouse(cm,e);if(!pos){return}var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag);if(!cm.display.dragCursor){cm.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors");cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv)}removeChildrenAndAdd(cm.display.dragCursor,frag)}function clearDragCursor(cm){if(cm.display.dragCursor){cm.display.lineSpace.removeChild(cm.display.dragCursor);cm.display.dragCursor=null}}function setScrollTop(cm,val){if(Math.abs(cm.doc.scrollTop-val)<2){return}cm.doc.scrollTop=val;if(!gecko){updateDisplaySimple(cm,{top:val})}if(cm.display.scroller.scrollTop!=val){cm.display.scroller.scrollTop=val}cm.display.scrollbars.setScrollTop(val);if(gecko){updateDisplaySimple(cm)}startWorker(cm,100)}function setScrollLeft(cm,val,isScroller){if(isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2){return}val=Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth);cm.doc.scrollLeft=val;alignHorizontally(cm);if(cm.display.scroller.scrollLeft!=val){cm.display.scroller.scrollLeft=val}cm.display.scrollbars.setScrollLeft(val)}var wheelSamples=0,wheelPixelsPerUnit=null;if(ie){wheelPixelsPerUnit=-0.53}else{if(gecko){wheelPixelsPerUnit=15}else{if(chrome){wheelPixelsPerUnit=-0.7}else{if(safari){wheelPixelsPerUnit=-1/3}}}}var wheelEventDelta=function(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;if(dx==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS){dx=e.detail}if(dy==null&&e.detail&&e.axis==e.VERTICAL_AXIS){dy=e.detail}else{if(dy==null){dy=e.wheelDelta}}return{x:dx,y:dy}};CodeMirror.wheelEventPixels=function(e){var delta=wheelEventDelta(e);delta.x*=wheelPixelsPerUnit;delta.y*=wheelPixelsPerUnit;return delta};function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x,dy=delta.y;var display=cm.display,scroll=display.scroller;var canScrollX=scroll.scrollWidth>scroll.clientWidth;var canScrollY=scroll.scrollHeight>scroll.clientHeight;if(!(dx&&canScrollX||dy&&canScrollY)){return}if(dy&&mac&&webkit){outer:for(var cur=e.target,view=display.view;cur!=scroll;cur=cur.parentNode){for(var i=0;i<view.length;i++){if(view[i].node==cur){cm.display.currentWheelTarget=cur;break outer}}}}if(dx&&!gecko&&!presto&&wheelPixelsPerUnit!=null){if(dy&&canScrollY){setScrollTop(cm,Math.max(0,Math.min(scroll.scrollTop+dy*wheelPixelsPerUnit,scroll.scrollHeight-scroll.clientHeight)))}setScrollLeft(cm,Math.max(0,Math.min(scroll.scrollLeft+dx*wheelPixelsPerUnit,scroll.scrollWidth-scroll.clientWidth)));if(!dy||(dy&&canScrollY)){e_preventDefault(e)}display.wheelStartX=null;return}if(dy&&wheelPixelsPerUnit!=null){var pixels=dy*wheelPixelsPerUnit;var top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;if(pixels<0){top=Math.max(0,top+pixels-50)}else{bot=Math.min(cm.doc.height,bot+pixels+50)}updateDisplaySimple(cm,{top:top,bottom:bot})}if(wheelSamples<20){if(display.wheelStartX==null){display.wheelStartX=scroll.scrollLeft;display.wheelStartY=scroll.scrollTop;display.wheelDX=dx;display.wheelDY=dy;setTimeout(function(){if(display.wheelStartX==null){return}var movedX=scroll.scrollLeft-display.wheelStartX;var movedY=scroll.scrollTop-display.wheelStartY;var sample=(movedY&&display.wheelDY&&movedY/display.wheelDY)||(movedX&&display.wheelDX&&movedX/display.wheelDX);display.wheelStartX=display.wheelStartY=null;if(!sample){return}wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+sample)/(wheelSamples+1);++wheelSamples},200)}else{display.wheelDX+=dx;display.wheelDY+=dy}}}function doHandleBinding(cm,bound,dropShift){if(typeof bound=="string"){bound=commands[bound];if(!bound){return false}}cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=false;try{if(cm.isReadOnly()){cm.state.suppressEdits=true}if(dropShift){cm.display.shift=false}done=bound(cm)!=Pass}finally{cm.display.shift=prevShift;cm.state.suppressEdits=false}return done}function lookupKeyForEditor(cm,name,handle){for(var i=0;i<cm.state.keyMaps.length;i++){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result){return result}}return(cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm))||lookupKey(name,cm.options.keyMap,handle,cm)}var stopSeq=new Delayed;function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name)){return"handled"}stopSeq.set(50,function(){if(cm.state.keySeq==seq){cm.state.keySeq=null;cm.display.input.reset()}});name=seq+" "+name}var result=lookupKeyForEditor(cm,name,handle);if(result=="multi"){cm.state.keySeq=name}if(result=="handled"){signalLater(cm,"keyHandled",cm,name,e)}if(result=="handled"||result=="multi"){e_preventDefault(e);restartBlink(cm)}if(seq&&!result&&/\'$/.test(name)){e_preventDefault(e);return true}return !!result}function handleKeyBinding(cm,e){var name=keyName(e,true);if(!name){return false}if(e.shiftKey&&!cm.state.keySeq){return dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,true)})||dispatchKey(cm,name,e,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion){return doHandleBinding(cm,b)}})}else{return dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b)})}}function handleCharBinding(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,true)})}var lastStoppedKey=null;function onKeyDown(e){var cm=this;cm.curOp.focus=activeElt();if(signalDOMEvent(cm,e)){return}if(ie&&ie_version<11&&e.keyCode==27){e.returnValue=false}var code=e.keyCode;cm.display.shift=code==16||e.shiftKey;var handled=handleKeyBinding(cm,e);if(presto){lastStoppedKey=handled?code:null;if(!handled&&code==88&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey)){cm.replaceSelection("",null,"cut")}}if(code==18&&!/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className)){showCrossHair(cm)}}function showCrossHair(cm){var lineDiv=cm.display.lineDiv;addClass(lineDiv,"CodeMirror-crosshair");function up(e){if(e.keyCode==18||!e.altKey){rmClass(lineDiv,"CodeMirror-crosshair");off(document,"keyup",up);off(document,"mouseover",up)}}on(document,"keyup",up);on(document,"mouseover",up)}function onKeyUp(e){if(e.keyCode==16){this.doc.sel.shift=false}signalDOMEvent(this,e)}function onKeyPress(e){var cm=this;if(eventInWidget(cm.display,e)||signalDOMEvent(cm,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey){return}var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey){lastStoppedKey=null;e_preventDefault(e);return}if((presto&&(!e.which||e.which<10))&&handleKeyBinding(cm,e)){return}var ch=String.fromCharCode(charCode==null?keyCode:charCode);if(handleCharBinding(cm,e,ch)){return}cm.display.input.onKeyPress(e)}function delayBlurEvent(cm){cm.state.delayingBlurEvent=true;setTimeout(function(){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=false;onBlur(cm)}},100)}function onFocus(cm){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=false}if(cm.options.readOnly=="nocursor"){return}if(!cm.state.focused){signal(cm,"focus",cm);cm.state.focused=true;addClass(cm.display.wrapper,"CodeMirror-focused");if(!cm.curOp&&cm.display.selForContextMenu!=cm.doc.sel){cm.display.input.reset();if(webkit){setTimeout(function(){cm.display.input.reset(true)},20)}}cm.display.input.receivedFocus()}restartBlink(cm)}function onBlur(cm){if(cm.state.delayingBlurEvent){return}if(cm.state.focused){signal(cm,"blur",cm);cm.state.focused=false;rmClass(cm.display.wrapper,"CodeMirror-focused")}clearInterval(cm.display.blinker);setTimeout(function(){if(!cm.state.focused){cm.display.shift=false}},150)}function onContextMenu(cm,e){if(eventInWidget(cm.display,e)||contextMenuInGutter(cm,e)){return}if(signalDOMEvent(cm,e,"contextmenu")){return}cm.display.input.onContextMenu(e)}function contextMenuInGutter(cm,e){if(!hasHandler(cm,"gutterContextMenu")){return false}return gutterEvent(cm,e,"gutterContextMenu",false)}var changeEnd=CodeMirror.changeEnd=function(change){if(!change.text){return change.to}return Pos(change.from.line+change.text.length-1,lst(change.text).length+(change.text.length==1?change.from.ch:0))};function adjustForChange(pos,change){if(cmp(pos,change.from)<0){return pos}if(cmp(pos,change.to)<=0){return changeEnd(change)}var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;if(pos.line==change.to.line){ch+=changeEnd(change).ch-change.to.ch}return Pos(line,ch)}function computeSelAfterChange(doc,change){var out=[];for(var i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)))}return normalizeSelection(out,doc.sel.primIndex)}function offsetPos(pos,old,nw){if(pos.line==old.line){return Pos(nw.line,pos.ch-old.ch+nw.ch)}else{return Pos(nw.line+(pos.line-old.line),pos.ch)}}function computeReplacedSel(doc,changes,hint){var out=[];var oldPrev=Pos(doc.first,0),newPrev=oldPrev;for(var i=0;i<changes.length;i++){var change=changes[i];var from=offsetPos(change.from,oldPrev,newPrev);var to=offsetPos(changeEnd(change),oldPrev,newPrev);oldPrev=change.to;newPrev=to;if(hint=="around"){var range=doc.sel.ranges[i],inv=cmp(range.head,range.anchor)<0;out[i]=new Range(inv?to:from,inv?from:to)}else{out[i]=new Range(from,from)}}return new Selection(out,doc.sel.primIndex)}function filterChange(doc,change,update){var obj={canceled:false,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function(){this.canceled=true}};if(update){obj.update=function(from,to,text,origin){if(from){this.from=clipPos(doc,from)}if(to){this.to=clipPos(doc,to)}if(text){this.text=text}if(origin!==undefined){this.origin=origin}}}signal(doc,"beforeChange",doc,obj);if(doc.cm){signal(doc.cm,"beforeChange",doc.cm,obj)}if(obj.canceled){return null}return{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}function makeChange(doc,change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp){return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly)}if(doc.cm.state.suppressEdits){return}}if(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange")){change=filterChange(doc,change,true);if(!change){return}}var split=sawReadOnlySpans&&!ignoreReadOnly&&removeReadOnlyRanges(doc,change.from,change.to);if(split){for(var i=split.length-1;i>=0;--i){makeChangeInner(doc,{from:split[i].from,to:split[i].to,text:i?[""]:change.text})}}else{makeChangeInner(doc,change)}}function makeChangeInner(doc,change){if(change.text.length==1&&change.text[0]==""&&cmp(change.from,change.to)==0){return}var selAfter=computeSelAfterChange(doc,change);addChangeToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN);makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}function makeChangeFromHistory(doc,type,allowSelectionOnly){if(doc.cm&&doc.cm.state.suppressEdits&&!allowSelectionOnly){return}var hist=doc.history,event,selAfter=doc.sel;var source=type=="undo"?hist.done:hist.undone,dest=type=="undo"?hist.undone:hist.done;for(var i=0;i<source.length;i++){event=source[i];if(allowSelectionOnly?event.ranges&&!event.equals(doc.sel):!event.ranges){break}}if(i==source.length){return}hist.lastOrigin=hist.lastSelOrigin=null;for(;;){event=source.pop();if(event.ranges){pushSelectionToHistory(event,dest);if(allowSelectionOnly&&!event.equals(doc.sel)){setSelection(doc,event,{clearRedo:false});return}selAfter=event}else{break}}var antiChanges=[];pushSelectionToHistory(selAfter,dest);dest.push({changes:antiChanges,generation:hist.generation});hist.generation=event.generation||++hist.maxGeneration;var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange");for(var i=event.changes.length-1;i>=0;--i){var change=event.changes[i];change.origin=type;if(filter&&!filterChange(doc,change,false)){source.length=0;return}antiChanges.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change):lst(source);makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change));if(!i&&doc.cm){doc.cm.scrollIntoView({from:change.from,to:changeEnd(change)})}var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})}}function shiftDoc(doc,distance){if(distance==0){return}doc.first+=distance;doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch))}),doc.sel.primIndex);if(doc.cm){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l++){regLineChange(doc.cm,l,"gutter")}}}function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp){return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans)}if(change.to.line<doc.first){shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));return}if(change.from.line>doc.lastLine()){return}if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift);change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}var last=doc.lastLine();if(change.to.line>last){change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin}}change.removed=getBetween(doc,change.from,change.to);if(!selAfter){selAfter=computeSelAfterChange(doc,change)}if(doc.cm){makeChangeSingleDocInEditor(doc.cm,change,spans)}else{updateDoc(doc,change,spans)}setSelectionNoUndo(doc,selAfter,sel_dontScroll)}function makeChangeSingleDocInEditor(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to;var recomputeMaxLength=false,checkWidthStart=from.line;if(!cm.options.lineWrapping){checkWidthStart=lineNo(visualLine(getLine(doc,from.line)));doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine){recomputeMaxLength=true;return true}})}if(doc.sel.contains(change.from,change.to)>-1){signalCursorActivity(cm)}updateDoc(doc,change,spans,estimateHeight(cm));if(!cm.options.lineWrapping){doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);if(len>display.maxLineLength){display.maxLine=line;display.maxLineLength=len;display.maxLineChanged=true;recomputeMaxLength=false}});if(recomputeMaxLength){cm.curOp.updateMaxLine=true}}doc.frontier=Math.min(doc.frontier,from.line);startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;if(change.full){regChange(cm)}else{if(from.line==to.line&&change.text.length==1&&!isWholeLineUpdate(cm.doc,change)){regLineChange(cm,from.line,"text")}else{regChange(cm,from.line,to.line+1,lendiff)}}var changesHandler=hasHandler(cm,"changes"),changeHandler=hasHandler(cm,"change");if(changeHandler||changesHandler){var obj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};if(changeHandler){signalLater(cm,"change",cm,obj)}if(changesHandler){(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(obj)}}cm.display.selForContextMenu=null}function replaceRange(doc,code,from,to,origin){if(!to){to=from}if(cmp(to,from)<0){var tmp=to;to=from;from=tmp}if(typeof code=="string"){code=doc.splitLines(code)}makeChange(doc,{from:from,to:to,text:code,origin:origin})}function maybeScrollWindow(cm,coords){if(signalDOMEvent(cm,"scrollCursorIntoView")){return}var display=cm.display,box=display.sizer.getBoundingClientRect(),doScroll=null;if(coords.top+box.top<0){doScroll=true}else{if(coords.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight)){doScroll=false}}if(doScroll!=null&&!phantom){var scrollNode=elt("div","\u200b",null,"position: absolute; top: "+(coords.top-display.viewOffset-paddingTop(cm.display))+"px; height: "+(coords.bottom-coords.top+scrollGap(cm)+display.barHeight)+"px; left: "+coords.left+"px; width: 2px;");cm.display.lineSpace.appendChild(scrollNode);scrollNode.scrollIntoView(doScroll);cm.display.lineSpace.removeChild(scrollNode)}}function scrollPosIntoView(cm,pos,end,margin){if(margin==null){margin=0}for(var limit=0;limit<5;limit++){var changed=false,coords=cursorCoords(cm,pos);var endCoords=!end||end==pos?coords:cursorCoords(cm,end);var scrollPos=calculateScrollPos(cm,Math.min(coords.left,endCoords.left),Math.min(coords.top,endCoords.top)-margin,Math.max(coords.left,endCoords.left),Math.max(coords.bottom,endCoords.bottom)+margin);var startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(scrollPos.scrollTop!=null){setScrollTop(cm,scrollPos.scrollTop);if(Math.abs(cm.doc.scrollTop-startTop)>1){changed=true}}if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft);if(Math.abs(cm.doc.scrollLeft-startLeft)>1){changed=true}}if(!changed){break}}return coords}function scrollIntoView(cm,x1,y1,x2,y2){var scrollPos=calculateScrollPos(cm,x1,y1,x2,y2);if(scrollPos.scrollTop!=null){setScrollTop(cm,scrollPos.scrollTop)}if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft)}}function calculateScrollPos(cm,x1,y1,x2,y2){var display=cm.display,snapMargin=textHeight(cm.display);if(y1<0){y1=0}var screentop=cm.curOp&&cm.curOp.scrollTop!=null?cm.curOp.scrollTop:display.scroller.scrollTop;var screen=displayHeight(cm),result={};if(y2-y1>screen){y2=y1+screen}var docBottom=cm.doc.height+paddingVert(display);var atTop=y1<snapMargin,atBottom=y2>docBottom-snapMargin;if(y1<screentop){result.scrollTop=atTop?0:y1}else{if(y2>screentop+screen){var newTop=Math.min(y1,(atBottom?docBottom:y2)-screen);if(newTop!=screentop){result.scrollTop=newTop}}}var screenleft=cm.curOp&&cm.curOp.scrollLeft!=null?cm.curOp.scrollLeft:display.scroller.scrollLeft;var screenw=displayWidth(cm)-(cm.options.fixedGutter?display.gutters.offsetWidth:0);var tooWide=x2-x1>screenw;if(tooWide){x2=x1+screenw}if(x1<10){result.scrollLeft=0}else{if(x1<screenleft){result.scrollLeft=Math.max(0,x1-(tooWide?0:10))}else{if(x2>screenw+screenleft-3){result.scrollLeft=x2+(tooWide?0:10)-screenw}}}return result}function addToScrollPos(cm,left,top){if(left!=null||top!=null){resolveScrollToPos(cm)}if(left!=null){cm.curOp.scrollLeft=(cm.curOp.scrollLeft==null?cm.doc.scrollLeft:cm.curOp.scrollLeft)+left}if(top!=null){cm.curOp.scrollTop=(cm.curOp.scrollTop==null?cm.doc.scrollTop:cm.curOp.scrollTop)+top}}function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor(),from=cur,to=cur;if(!cm.options.lineWrapping){from=cur.ch?Pos(cur.line,cur.ch-1):cur;to=Pos(cur.line,cur.ch+1)}cm.curOp.scrollToPos={from:from,to:to,margin:cm.options.cursorScrollMargin,isCursor:true}}function resolveScrollToPos(cm){var range=cm.curOp.scrollToPos;if(range){cm.curOp.scrollToPos=null;var from=estimateCoords(cm,range.from),to=estimateCoords(cm,range.to);var sPos=calculateScrollPos(cm,Math.min(from.left,to.left),Math.min(from.top,to.top)-range.margin,Math.max(from.right,to.right),Math.max(from.bottom,to.bottom)+range.margin);cm.scrollTo(sPos.scrollLeft,sPos.scrollTop)}}function indentLine(cm,n,how,aggressive){var doc=cm.doc,state;if(how==null){how="add"}if(how=="smart"){if(!doc.mode.indent){how="prev"}else{state=getStateBefore(cm,n)}}var tabSize=cm.options.tabSize;var line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);if(line.stateAfter){line.stateAfter=null}var curSpaceString=line.text.match(/^\s*/)[0],indentation;if(!aggressive&&!/\S/.test(line.text)){indentation=0;how="not"}else{if(how=="smart"){indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text);if(indentation==Pass||indentation>150){if(!aggressive){return}how="prev"}}}if(how=="prev"){if(n>doc.first){indentation=countColumn(getLine(doc,n-1).text,null,tabSize)}else{indentation=0}}else{if(how=="add"){indentation=curSpace+cm.options.indentUnit}else{if(how=="subtract"){indentation=curSpace-cm.options.indentUnit}else{if(typeof how=="number"){indentation=curSpace+how}}}}indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs){for(var i=Math.floor(indentation/tabSize);i;--i){pos+=tabSize;indentString+="\t"}}if(pos<indentation){indentString+=spaceStr(indentation-pos)}if(indentString!=curSpaceString){replaceRange(doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input");line.stateAfter=null;return true}else{for(var i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];if(range.head.line==n&&range.head.ch<curSpaceString.length){var pos=Pos(n,curSpaceString.length);replaceOneSelection(doc,i,new Range(pos,pos));break}}}}function changeLine(doc,handle,changeType,op){var no=handle,line=handle;if(typeof handle=="number"){line=getLine(doc,clipLine(doc,handle))}else{no=lineNo(handle)}if(no==null){return null}if(op(line,no)&&doc.cm){regLineChange(doc.cm,no,changeType)}return line}function deleteNearSelection(cm,compute){var ranges=cm.doc.sel.ranges,kill=[];for(var i=0;i<ranges.length;i++){var toKill=compute(ranges[i]);while(kill.length&&cmp(toKill.from,lst(kill).to)<=0){var replaced=kill.pop();if(cmp(replaced.from,toKill.from)<0){toKill.from=replaced.from;break}}kill.push(toKill)}runInOp(cm,function(){for(var i=kill.length-1;i>=0;i--){replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete")}ensureCursorVisible(cm)})}function findPosH(doc,pos,dir,unit,visually){var line=pos.line,ch=pos.ch,origDir=dir;var lineObj=getLine(doc,line);function findNextLine(){var l=line+dir;if(l<doc.first||l>=doc.first+doc.size){return false}line=l;return lineObj=getLine(doc,l)}function moveOnce(boundToLine){var next=(visually?moveVisually:moveLogically)(lineObj,ch,dir,true);if(next==null){if(!boundToLine&&findNextLine()){if(visually){ch=(dir<0?lineRight:lineLeft)(lineObj)}else{ch=dir<0?lineObj.text.length:0}}else{return false}}else{ch=next}return true}if(unit=="char"){moveOnce()}else{if(unit=="column"){moveOnce(true)}else{if(unit=="word"||unit=="group"){var sawType=null,group=unit=="group";var helper=doc.cm&&doc.cm.getHelper(pos,"wordChars");for(var first=true;;first=false){if(dir<0&&!moveOnce(!first)){break}var cur=lineObj.text.charAt(ch)||"\n";var type=isWordChar(cur,helper)?"w":group&&cur=="\n"?"n":!group||/\s/.test(cur)?null:"p";if(group&&!first&&!type){type="s"}if(sawType&&sawType!=type){if(dir<0){dir=1;moveOnce()}break}if(type){sawType=type}if(dir>0&&!moveOnce(!first)){break}}}}}var result=skipAtomic(doc,Pos(line,ch),pos,origDir,true);if(!cmp(pos,result)){result.hitSide=true}return result}function findPosV(cm,pos,dir,unit){var doc=cm.doc,x=pos.left,y;if(unit=="page"){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);y=pos.top+dir*(pageSize-(dir<0?1.5:0.5)*textHeight(cm.display))}else{if(unit=="line"){y=dir>0?pos.bottom+3:pos.top-3}}for(;;){var target=coordsChar(cm,x,y);if(!target.outside){break}if(dir<0?y<=0:y>=doc.height){target.hitSide=true;break}y+=dir*5}return target}CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus();this.display.input.focus()},setOption:function(option,value){var options=this.options,old=options[option];if(options[option]==value&&option!="mode"){return}options[option]=value;if(optionHandlers.hasOwnProperty(option)){operation(this,optionHandlers[option])(this,value,old)}},getOption:function(option){return this.options[option]},getDoc:function(){return this.doc},addKeyMap:function(map,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map))},removeKeyMap:function(map){var maps=this.state.keyMaps;for(var i=0;i<maps.length;++i){if(maps[i]==map||maps[i].name==map){maps.splice(i,1);return true}}},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState){throw new Error("Overlays may not be stateful.")}insertSorted(this.state.overlays,{mode:mode,modeSpec:spec,opaque:options&&options.opaque,priority:(options&&options.priority)||0},function(overlay){return overlay.priority});this.state.modeGen++;regChange(this)}),removeOverlay:methodOp(function(spec){var overlays=this.state.overlays;for(var i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||typeof spec=="string"&&cur.name==spec){overlays.splice(i,1);this.state.modeGen++;regChange(this);return}}}),indentLine:methodOp(function(n,dir,aggressive){if(typeof dir!="string"&&typeof dir!="number"){if(dir==null){dir=this.options.smartIndent?"smart":"prev"}else{dir=dir?"add":"subtract"}}if(isLine(this.doc,n)){indentLine(this,n,dir,aggressive)}}),indentSelection:methodOp(function(how){var ranges=this.doc.sel.ranges,end=-1;for(var i=0;i<ranges.length;i++){var range=ranges[i];if(!range.empty()){var from=range.from(),to=range.to();var start=Math.max(end,from.line);end=Math.min(this.lastLine(),to.line-(to.ch?0:1))+1;for(var j=start;j<end;++j){indentLine(this,j,how)}var newRanges=this.doc.sel.ranges;if(from.ch==0&&ranges.length==newRanges.length&&newRanges[i].from().ch>0){replaceOneSelection(this.doc,i,new Range(from,newRanges[i].to()),sel_dontScroll)}}else{if(range.head.line>end){indentLine(this,range.head.line,how,true);end=range.head.line;if(i==this.doc.sel.primIndex){ensureCursorVisible(this)}}}}}),getTokenAt:function(pos,precise){return takeToken(this,pos,precise)},getLineTokens:function(line,precise){return takeToken(this,Pos(line),precise,true)},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var styles=getLineStyles(this,getLine(this.doc,pos.line));var before=0,after=(styles.length-1)/2,ch=pos.ch;var type;if(ch==0){type=styles[2]}else{for(;;){var mid=(before+after)>>1;if((mid?styles[mid*2-1]:0)>=ch){after=mid}else{if(styles[mid*2+1]<ch){before=mid+1}else{type=styles[mid*2+2];break}}}}var cut=type?type.indexOf("cm-overlay "):-1;return cut<0?type:cut==0?null:type.slice(0,cut-1)},getModeAt:function(pos){var mode=this.doc.mode;if(!mode.innerMode){return mode}return CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode},getHelper:function(pos,type){return this.getHelpers(pos,type)[0]},getHelpers:function(pos,type){var found=[];if(!helpers.hasOwnProperty(type)){return found}var help=helpers[type],mode=this.getModeAt(pos);if(typeof mode[type]=="string"){if(help[mode[type]]){found.push(help[mode[type]])}}else{if(mode[type]){for(var i=0;i<mode[type].length;i++){var val=help[mode[type][i]];if(val){found.push(val)}}}else{if(mode.helperType&&help[mode.helperType]){found.push(help[mode.helperType])}else{if(help[mode.name]){found.push(help[mode.name])}}}}for(var i=0;i<help._global.length;i++){var cur=help._global[i];if(cur.pred(mode,this)&&indexOf(found,cur.val)==-1){found.push(cur.val)}}return found},getStateAfter:function(line,precise){var doc=this.doc;line=clipLine(doc,line==null?doc.first+doc.size-1:line);return getStateBefore(this,line+1,precise)},cursorCoords:function(start,mode){var pos,range=this.doc.sel.primary();if(start==null){pos=range.head}else{if(typeof start=="object"){pos=clipPos(this.doc,start)}else{pos=start?range.from():range.to()}}return cursorCoords(this,pos,mode||"page")},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page")},coordsChar:function(coords,mode){coords=fromCoordSystem(this,coords,mode||"page");return coordsChar(this,coords.left,coords.top)},lineAtHeight:function(height,mode){height=fromCoordSystem(this,{top:height,left:0},mode||"page").top;return lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function(line,mode){var end=false,lineObj;if(typeof line=="number"){var last=this.doc.first+this.doc.size-1;if(line<this.doc.first){line=this.doc.first}else{if(line>last){line=last;end=true}}lineObj=getLine(this.doc,line)}else{lineObj=line}return intoCoordSystem(this,lineObj,{top:0,left:0},mode||"page").top+(end?this.doc.height-heightAtLine(lineObj):0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},setGutterMarker:methodOp(function(line,gutterID,value){return changeLine(this.doc,line,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});markers[gutterID]=value;if(!value&&isEmpty(markers)){line.gutterMarkers=null}return true})}),clearGutter:methodOp(function(gutterID){var cm=this,doc=cm.doc,i=doc.first;doc.iter(function(line){if(line.gutterMarkers&&line.gutterMarkers[gutterID]){line.gutterMarkers[gutterID]=null;regLineChange(cm,i,"gutter");if(isEmpty(line.gutterMarkers)){line.gutterMarkers=null}}++i})}),lineInfo:function(line){if(typeof line=="number"){if(!isLine(this.doc,line)){return null}var n=line;line=getLine(this.doc,line);if(!line){return null}}else{var n=lineNo(line);if(n==null){return null}}return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(pos,node,scroll,vert,horiz){var display=this.display;pos=cursorCoords(this,clipPos(this.doc,pos));var top=pos.bottom,left=pos.left;node.style.position="absolute";node.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(node);display.sizer.appendChild(node);if(vert=="over"){top=pos.top}else{if(vert=="above"||vert=="near"){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);if((vert=="above"||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight){top=pos.top-node.offsetHeight}else{if(pos.bottom+node.offsetHeight<=vspace){top=pos.bottom}}if(left+node.offsetWidth>hspace){left=hspace-node.offsetWidth}}}node.style.top=top+"px";node.style.left=node.style.right="";if(horiz=="right"){left=display.sizer.clientWidth-node.offsetWidth;node.style.right="0px"}else{if(horiz=="left"){left=0}else{if(horiz=="middle"){left=(display.sizer.clientWidth-node.offsetWidth)/2}}node.style.left=left+"px"}if(scroll){scrollIntoView(this,left,top,left+node.offsetWidth,top+node.offsetHeight)}},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,execCommand:function(cmd){if(commands.hasOwnProperty(cmd)){return commands[cmd].call(null,this)}},triggerElectric:methodOp(function(text){triggerElectric(this,text)}),findPosH:function(from,amount,unit,visually){var dir=1;if(amount<0){dir=-1;amount=-amount}for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){cur=findPosH(this.doc,cur,dir,unit,visually);if(cur.hitSide){break}}return cur},moveH:methodOp(function(dir,unit){var cm=this;cm.extendSelectionsBy(function(range){if(cm.display.shift||cm.doc.extend||range.empty()){return findPosH(cm.doc,range.head,dir,unit,cm.options.rtlMoveVisually)}else{return dir<0?range.from():range.to()}},sel_move)}),deleteH:methodOp(function(dir,unit){var sel=this.doc.sel,doc=this.doc;if(sel.somethingSelected()){doc.replaceSelection("",null,"+delete")}else{deleteNearSelection(this,function(range){var other=findPosH(doc,range.head,dir,unit,false);return dir<0?{from:other,to:range.head}:{from:range.head,to:other}})}}),findPosV:function(from,amount,unit,goalColumn){var dir=1,x=goalColumn;if(amount<0){dir=-1;amount=-amount}for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){var coords=cursorCoords(this,cur,"div");if(x==null){x=coords.left}else{coords.left=x}cur=findPosV(this,coords,dir,unit);if(cur.hitSide){break}}return cur},moveV:methodOp(function(dir,unit){var cm=this,doc=this.doc,goals=[];var collapse=!cm.display.shift&&!doc.extend&&doc.sel.somethingSelected();doc.extendSelectionsBy(function(range){if(collapse){return dir<0?range.from():range.to()}var headPos=cursorCoords(cm,range.head,"div");if(range.goalColumn!=null){headPos.left=range.goalColumn}goals.push(headPos.left);var pos=findPosV(cm,headPos,dir,unit);if(unit=="page"&&range==doc.sel.primary()){addToScrollPos(cm,null,charCoords(cm,pos,"div").top-headPos.top)}return pos},sel_move);if(goals.length){for(var i=0;i<doc.sel.ranges.length;i++){doc.sel.ranges[i].goalColumn=goals[i]}}}),findWordAt:function(pos){var doc=this.doc,line=getLine(doc,pos.line).text;var start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");if((pos.xRel<0||end==line.length)&&start){--start}else{++end}var startChar=line.charAt(start);var check=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper)}:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return !/\s/.test(ch)&&!isWordChar(ch)};while(start>0&&check(line.charAt(start-1))){--start}while(end<line.length&&check(line.charAt(end))){++end}}return new Range(Pos(pos.line,start),Pos(pos.line,end))},toggleOverwrite:function(value){if(value!=null&&value==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){addClass(this.display.cursorDiv,"CodeMirror-overwrite")}else{rmClass(this.display.cursorDiv,"CodeMirror-overwrite")}signal(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==activeElt()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:methodOp(function(x,y){if(x!=null||y!=null){resolveScrollToPos(this)}if(x!=null){this.curOp.scrollLeft=x}if(y!=null){this.curOp.scrollTop=y}}),getScrollInfo:function(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(range,margin){if(range==null){range={from:this.doc.sel.primary().head,to:null};if(margin==null){margin=this.options.cursorScrollMargin}}else{if(typeof range=="number"){range={from:Pos(range,0),to:null}}else{if(range.from==null){range={from:range,to:null}}}}if(!range.to){range.to=range.from}range.margin=margin||0;if(range.from.line!=null){resolveScrollToPos(this);this.curOp.scrollToPos=range}else{var sPos=calculateScrollPos(this,Math.min(range.from.left,range.to.left),Math.min(range.from.top,range.to.top)-range.margin,Math.max(range.from.right,range.to.right),Math.max(range.from.bottom,range.to.bottom)+range.margin);this.scrollTo(sPos.scrollLeft,sPos.scrollTop)}}),setSize:methodOp(function(width,height){var cm=this;function interpret(val){return typeof val=="number"||/^\d+$/.test(String(val))?val+"px":val}if(width!=null){cm.display.wrapper.style.width=interpret(width)}if(height!=null){cm.display.wrapper.style.height=interpret(height)}if(cm.options.lineWrapping){clearLineMeasurementCache(this)}var lineNo=cm.display.viewFrom;cm.doc.iter(lineNo,cm.display.viewTo,function(line){if(line.widgets){for(var i=0;i<line.widgets.length;i++){if(line.widgets[i].noHScroll){regLineChange(cm,lineNo,"widget");break}}}++lineNo});cm.curOp.forceUpdate=true;signal(cm,"refresh",this)}),operation:function(f){return runInOp(this,f)},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this);this.curOp.forceUpdate=true;clearCaches(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);updateGutterSpace(this);if(oldHeight==null||Math.abs(oldHeight-textHeight(this.display))>0.5){estimateLineHeights(this)}signal(this,"refresh",this)}),swapDoc:methodOp(function(doc){var old=this.doc;old.cm=null;attachDoc(this,doc);clearCaches(this);this.display.input.reset();this.scrollTo(doc.scrollLeft,doc.scrollTop);this.curOp.forceScroll=true;signalLater(this,"swapDoc",this,old);return old}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};eventMixin(CodeMirror);var defaults=CodeMirror.defaults={};var optionHandlers=CodeMirror.optionHandlers={};function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt;if(handle){optionHandlers[name]=notOnInit?function(cm,val,old){if(old!=Init){handle(cm,val,old)}}:handle}}var Init=CodeMirror.Init={toString:function(){return"CodeMirror.Init"}};option("value","",function(cm,val){cm.setValue(val)},true);option("mode",null,function(cm,val){cm.doc.modeOption=val;loadMode(cm)},true);option("indentUnit",2,loadMode,true);option("indentWithTabs",false);option("smartIndent",true);option("tabSize",4,function(cm){resetModeState(cm);clearCaches(cm);regChange(cm)},true);option("lineSeparator",null,function(cm,val){cm.doc.lineSep=val;if(!val){return}var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(found==-1){break}pos=found+val.length;newBreaks.push(Pos(lineNo,found))}lineNo++});for(var i=newBreaks.length-1;i>=0;i--){replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))}});option("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("\t")?"":"|\t"),"g");if(old!=CodeMirror.Init){cm.refresh()}});option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(cm){cm.refresh()},true);option("electricChars",true);option("inputStyle",mobile?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);option("spellcheck",false,function(cm,val){cm.getInputField().spellcheck=val},true);option("rtlMoveVisually",!windows);option("wholeLineUpdateBefore",true);option("theme","default",function(cm){themeChanged(cm);guttersChanged(cm)},true);option("keyMap","default",function(cm,val,old){var next=getKeyMap(val);var prev=old!=CodeMirror.Init&&getKeyMap(old);if(prev&&prev.detach){prev.detach(cm,next)}if(next.attach){next.attach(cm,prev||null)}});option("extraKeys",null);option("lineWrapping",false,wrappingChanged,true);option("gutters",[],function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},true);option("fixedGutter",true,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0";cm.refresh()},true);option("coverGutterNextToScrollbar",false,function(cm){updateScrollbars(cm)},true);option("scrollbarStyle","native",function(cm){initScrollbars(cm);updateScrollbars(cm);cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)},true);option("lineNumbers",false,function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},true);option("firstLineNumber",1,guttersChanged,true);option("lineNumberFormatter",function(integer){return integer},guttersChanged,true);option("showCursorWhenSelecting",false,updateSelection,true);option("resetSelectionOnContextMenu",true);option("lineWiseCopyCut",true);option("readOnly",false,function(cm,val){if(val=="nocursor"){onBlur(cm);cm.display.input.blur();cm.display.disabled=true}else{cm.display.disabled=false}cm.display.input.readOnlyChanged(val)});option("disableInput",false,function(cm,val){if(!val){cm.display.input.reset()}},true);option("dragDrop",true,dragDropChanged);option("allowDropFileTypes",null);option("cursorBlinkRate",530);option("cursorScrollMargin",0);option("cursorHeight",1,updateSelection,true);option("singleCursorHeightPerLine",true,updateSelection,true);option("workTime",100);option("workDelay",100);option("flattenSpans",true,resetModeState,true);option("addModeClass",false,resetModeState,true);option("pollInterval",100);option("undoDepth",200,function(cm,val){cm.doc.history.undoDepth=val});option("historyEventDelay",1250);option("viewportMargin",10,function(cm){cm.refresh()},true);option("maxHighlightLength",10000,resetModeState,true);option("moveInputWithCursor",true,function(cm,val){if(!val){cm.display.input.resetPosition()}});option("tabindex",null,function(cm,val){cm.display.input.getField().tabIndex=val||""});option("autofocus",null);var modes=CodeMirror.modes={},mimeModes=CodeMirror.mimeModes={};CodeMirror.defineMode=function(name,mode){if(!CodeMirror.defaults.mode&&name!="null"){CodeMirror.defaults.mode=name}if(arguments.length>2){mode.dependencies=Array.prototype.slice.call(arguments,2)}modes[name]=mode};CodeMirror.defineMIME=function(mime,spec){mimeModes[mime]=spec};CodeMirror.resolveMode=function(spec){if(typeof spec=="string"&&mimeModes.hasOwnProperty(spec)){spec=mimeModes[spec]}else{if(spec&&typeof spec.name=="string"&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];if(typeof found=="string"){found={name:found}}spec=createObj(found,spec);spec.name=found.name}else{if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec)){return CodeMirror.resolveMode("application/xml")}else{if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(spec)){return CodeMirror.resolveMode("application/json")}}}}if(typeof spec=="string"){return{name:spec}}else{return spec||{name:"null"}}};CodeMirror.getMode=function(options,spec){var spec=CodeMirror.resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory){return CodeMirror.getMode(options,"text/plain")}var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=modeExtensions[spec.name];for(var prop in exts){if(!exts.hasOwnProperty(prop)){continue}if(modeObj.hasOwnProperty(prop)){modeObj["_"+prop]=modeObj[prop]}modeObj[prop]=exts[prop]}}modeObj.name=spec.name;if(spec.helperType){modeObj.helperType=spec.helperType}if(spec.modeProps){for(var prop in spec.modeProps){modeObj[prop]=spec.modeProps[prop]}}return modeObj};CodeMirror.defineMode("null",function(){return{token:function(stream){stream.skipToEnd()}}});CodeMirror.defineMIME("text/plain","null");var modeExtensions=CodeMirror.modeExtensions={};CodeMirror.extendMode=function(mode,properties){var exts=modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:(modeExtensions[mode]={});copyObj(properties,exts)};CodeMirror.defineExtension=function(name,func){CodeMirror.prototype[name]=func};CodeMirror.defineDocExtension=function(name,func){Doc.prototype[name]=func};CodeMirror.defineOption=option;var initHooks=[];CodeMirror.defineInitHook=function(f){initHooks.push(f)};var helpers=CodeMirror.helpers={};CodeMirror.registerHelper=function(type,name,value){if(!helpers.hasOwnProperty(type)){helpers[type]=CodeMirror[type]={_global:[]}}helpers[type][name]=value};CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value);helpers[type]._global.push({pred:predicate,val:value})};var copyState=CodeMirror.copyState=function(mode,state){if(state===true){return state}if(mode.copyState){return mode.copyState(state)}var nstate={};for(var n in state){var val=state[n];if(val instanceof Array){val=val.concat([])}nstate[n]=val}return nstate};var startState=CodeMirror.startState=function(mode,a1,a2){return mode.startState?mode.startState(a1,a2):true};CodeMirror.innerMode=function(mode,state){while(mode.innerMode){var info=mode.innerMode(state);if(!info||info.mode==mode){break}state=info.state;mode=info.mode}return info||{mode:mode,state:state}};var commands=CodeMirror.commands={selectAll:function(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll)},singleSelection:function(cm){cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll)},killLine:function(cm){deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;if(range.head.ch==len&&range.head.line<cm.lastLine()){return{from:range.head,to:Pos(range.head.line+1,0)}}else{return{from:range.head,to:Pos(range.head.line,len)}}}else{return{from:range.from(),to:range.to()}}})},deleteLine:function(cm){deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:clipPos(cm.doc,Pos(range.to().line+1,0))}})},delLineLeft:function(cm){deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()}})},delWrappedLineLeft:function(cm){deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var leftPos=cm.coordsChar({left:0,top:top},"div");return{from:leftPos,to:range.from()}})},delWrappedLineRight:function(cm){deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var rightPos=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:rightPos}})},undo:function(cm){cm.undo()},redo:function(cm){cm.redo()},undoSelection:function(cm){cm.undoSelection()},redoSelection:function(cm){cm.redoSelection()},goDocStart:function(cm){cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function(cm){cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function(cm){cm.extendSelectionsBy(function(range){return lineStart(cm,range.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(cm){cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head)},{origin:"+move",bias:1})},goLineEnd:function(cm){cm.extendSelectionsBy(function(range){return lineEnd(cm,range.head.line)},{origin:"+move",bias:-1})},goLineRight:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div")},sel_move)},goLineLeft:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:top},"div")},sel_move)},goLineLeftSmart:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;var pos=cm.coordsChar({left:0,top:top},"div");if(pos.ch<cm.getLine(pos.line).search(/\S/)){return lineStartSmart(cm,range.head)}return pos},sel_move)},goLineUp:function(cm){cm.moveV(-1,"line")},goLineDown:function(cm){cm.moveV(1,"line")},goPageUp:function(cm){cm.moveV(-1,"page")},goPageDown:function(cm){cm.moveV(1,"page")},goCharLeft:function(cm){cm.moveH(-1,"char")},goCharRight:function(cm){cm.moveH(1,"char")},goColumnLeft:function(cm){cm.moveH(-1,"column")},goColumnRight:function(cm){cm.moveH(1,"column")},goWordLeft:function(cm){cm.moveH(-1,"word")},goGroupRight:function(cm){cm.moveH(1,"group")},goGroupLeft:function(cm){cm.moveH(-1,"group")},goWordRight:function(cm){cm.moveH(1,"word")},delCharBefore:function(cm){cm.deleteH(-1,"char")},delCharAfter:function(cm){cm.deleteH(1,"char")},delWordBefore:function(cm){cm.deleteH(-1,"word")},delWordAfter:function(cm){cm.deleteH(1,"word")},delGroupBefore:function(cm){cm.deleteH(-1,"group")},delGroupAfter:function(cm){cm.deleteH(1,"group")},indentAuto:function(cm){cm.indentSelection("smart")},indentMore:function(cm){cm.indentSelection("add")},indentLess:function(cm){cm.indentSelection("subtract")},insertTab:function(cm){cm.replaceSelection("\t")},insertSoftTab:function(cm){var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize;for(var i=0;i<ranges.length;i++){var pos=ranges[i].from();var col=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(spaceStr(tabSize-col%tabSize))}cm.replaceSelections(spaces)},defaultTab:function(cm){if(cm.somethingSelected()){cm.indentSelection("add")}else{cm.execCommand("insertTab")}},transposeChars:function(cm){runInOp(cm,function(){var ranges=cm.listSelections(),newSel=[];for(var i=0;i<ranges.length;i++){var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line){if(cur.ch==line.length){cur=new Pos(cur.line,cur.ch-1)}if(cur.ch>0){cur=new Pos(cur.line,cur.ch+1);cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-2),Pos(cur.line,cur.ch-2),cur,"+transpose")}else{if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;if(prev){cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),Pos(cur.line,1),"+transpose")}}}}newSel.push(new Range(cur,cur))}cm.setSelections(newSel)})},newlineAndIndent:function(cm){runInOp(cm,function(){var len=cm.listSelections().length;for(var i=0;i<len;i++){var range=cm.listSelections()[i];cm.replaceRange(cm.doc.lineSeparator(),range.anchor,range.head,"+input");cm.indentLine(range.from().line+1,null,true)}ensureCursorVisible(cm)})},openLine:function(cm){cm.replaceSelection("\n","start")},toggleOverwrite:function(cm){cm.toggleOverwrite()}};var keyMap=CodeMirror.keyMap={};keyMap.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};keyMap["default"]=mac?keyMap.macDefault:keyMap.pcDefault;function normalizeKeyName(name){var parts=name.split(/-(?!$)/),name=parts[parts.length-1];var alt,ctrl,shift,cmd;for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod)){cmd=true}else{if(/^a(lt)?$/i.test(mod)){alt=true}else{if(/^(c|ctrl|control)$/i.test(mod)){ctrl=true}else{if(/^s(hift)$/i.test(mod)){shift=true}else{throw new Error("Unrecognized modifier name: "+mod)}}}}}if(alt){name="Alt-"+name}if(ctrl){name="Ctrl-"+name}if(cmd){name="Cmd-"+name}if(shift){name="Shift-"+name}return name}CodeMirror.normalizeKeyMap=function(keymap){var copy={};for(var keyname in keymap){if(keymap.hasOwnProperty(keyname)){var value=keymap[keyname];if(/^(name|fallthrough|(de|at)tach)$/.test(keyname)){continue}if(value=="..."){delete keymap[keyname];continue}var keys=map(keyname.split(" "),normalizeKeyName);for(var i=0;i<keys.length;i++){var val,name;if(i==keys.length-1){name=keys.join(" ");val=value}else{name=keys.slice(0,i+1).join(" ");val="..."}var prev=copy[name];if(!prev){copy[name]=val}else{if(prev!=val){throw new Error("Inconsistent bindings for "+name)}}}delete keymap[keyname]}}for(var prop in copy){keymap[prop]=copy[prop]}return keymap};var lookupKey=CodeMirror.lookupKey=function(key,map,handle,context){map=getKeyMap(map);var found=map.call?map.call(key,context):map[key];if(found===false){return"nothing"}if(found==="..."){return"multi"}if(found!=null&&handle(found)){return"handled"}if(map.fallthrough){if(Object.prototype.toString.call(map.fallthrough)!="[object Array]"){return lookupKey(key,map.fallthrough,handle,context)}for(var i=0;i<map.fallthrough.length;i++){var result=lookupKey(key,map.fallthrough[i],handle,context);if(result){return result}}}};var isModifierKey=CodeMirror.isModifierKey=function(value){var name=typeof value=="string"?value:keyNames[value.keyCode];return name=="Ctrl"||name=="Alt"||name=="Shift"||name=="Mod"};var keyName=CodeMirror.keyName=function(event,noShift){if(presto&&event.keyCode==34&&event["char"]){return false}var base=keyNames[event.keyCode],name=base;if(name==null||event.altGraphKey){return false}if(event.altKey&&base!="Alt"){name="Alt-"+name}if((flipCtrlCmd?event.metaKey:event.ctrlKey)&&base!="Ctrl"){name="Ctrl-"+name}if((flipCtrlCmd?event.ctrlKey:event.metaKey)&&base!="Cmd"){name="Cmd-"+name}if(!noShift&&event.shiftKey&&base!="Shift"){name="Shift-"+name}return name};function getKeyMap(val){return typeof val=="string"?keyMap[val]:val}CodeMirror.fromTextArea=function(textarea,options){options=options?copyObj(options):{};options.value=textarea.value;if(!options.tabindex&&textarea.tabIndex){options.tabindex=textarea.tabIndex}if(!options.placeholder&&textarea.placeholder){options.placeholder=textarea.placeholder}if(options.autofocus==null){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||textarea.getAttribute("autofocus")!=null&&hasFocus==document.body}function save(){textarea.value=cm.getValue()}if(textarea.form){on(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone){var form=textarea.form,realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save();form.submit=realSubmit;form.submit();form.submit=wrappedSubmit}}catch(e){}}}options.finishInit=function(cm){cm.save=save;cm.getTextArea=function(){return textarea};cm.toTextArea=function(){cm.toTextArea=isNaN;save();textarea.parentNode.removeChild(cm.getWrapperElement());textarea.style.display="";if(textarea.form){off(textarea.form,"submit",save);if(typeof textarea.form.submit=="function"){textarea.form.submit=realSubmit}}}};textarea.style.display="none";var cm=CodeMirror(function(node){textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return cm};var StringStream=CodeMirror.StringStream=function(string,tabSize){this.pos=this.start=0;this.string=string;this.tabSize=tabSize||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(match){var ch=this.string.charAt(this.pos);if(typeof match=="string"){var ok=ch==match}else{var ok=ch&&(match.test?match.test(ch):match(ch))}if(ok){++this.pos;return ch}},eatWhile:function(match){var start=this.pos;while(this.eat(match)){}return this.pos>start},eatSpace:function(){var start=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>start},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ch){var found=this.string.indexOf(ch,this.pos);if(found>-1){this.pos=found;return true}},backUp:function(n){this.pos-=n},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},match:function(pattern,consume,caseInsensitive){if(typeof pattern=="string"){var cased=function(str){return caseInsensitive?str.toLowerCase():str};var substr=this.string.substr(this.pos,pattern.length);if(cased(substr)==cased(pattern)){if(consume!==false){this.pos+=pattern.length}return true}}else{var match=this.string.slice(this.pos).match(pattern);if(match&&match.index>0){return null}if(match&&consume!==false){this.pos+=match[0].length}return match}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(n,inner){this.lineStart+=n;try{return inner()}finally{this.lineStart-=n}}};var nextMarkerId=0;var TextMarker=CodeMirror.TextMarker=function(doc,type){this.lines=[];this.type=type;this.doc=doc;this.id=++nextMarkerId};eventMixin(TextMarker);TextMarker.prototype.clear=function(){if(this.explicitlyCleared){return}var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp){startOperation(cm)}if(hasHandler(this,"clear")){var found=this.find();if(found){signalLater(this,"clear",found.from,found.to)}}var min=null,max=null;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(cm&&!this.collapsed){regLineChange(cm,lineNo(line),"text")}else{if(cm){if(span.to!=null){max=lineNo(line)}if(span.from!=null){min=lineNo(line)}}}line.markedSpans=removeMarkedSpan(line.markedSpans,span);if(span.from==null&&this.collapsed&&!lineIsHidden(this.doc,line)&&cm){updateLineHeight(line,textHeight(cm.display))}}if(cm&&this.collapsed&&!cm.options.lineWrapping){for(var i=0;i<this.lines.length;++i){var visual=visualLine(this.lines[i]),len=lineLength(visual);if(len>cm.display.maxLineLength){cm.display.maxLine=visual;cm.display.maxLineLength=len;cm.display.maxLineChanged=true}}}if(min!=null&&cm&&this.collapsed){regChange(cm,min,max+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(cm){reCheckSelection(cm.doc)}}if(cm){signalLater(cm,"markerCleared",cm,this)}if(withOp){endOperation(cm)}if(this.parent){this.parent.clear()}};TextMarker.prototype.find=function(side,lineObj){if(side==null&&this.type=="bookmark"){side=1}var from,to;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=getMarkedSpanFor(line.markedSpans,this);if(span.from!=null){from=Pos(lineObj?line:lineNo(line),span.from);if(side==-1){return from}}if(span.to!=null){to=Pos(lineObj?line:lineNo(line),span.to);if(side==1){return to}}}return from&&{from:from,to:to}};TextMarker.prototype.changed=function(){var pos=this.find(-1,true),widget=this,cm=this.doc.cm;if(!pos||!cm){return}runInOp(cm,function(){var line=pos.line,lineN=lineNo(pos.line);var view=findViewForLine(cm,lineN);if(view){clearLineMeasurementCacheFor(view);cm.curOp.selectionChanged=cm.curOp.forceUpdate=true}cm.curOp.updateMaxLine=true;if(!lineIsHidden(widget.doc,line)&&widget.height!=null){var oldHeight=widget.height;widget.height=null;var dHeight=widgetHeight(widget)-oldHeight;if(dHeight){updateLineHeight(line,line.height+dHeight)}}})};TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;if(!op.maybeHiddenMarkers||indexOf(op.maybeHiddenMarkers,this)==-1){(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(line)};TextMarker.prototype.detachLine=function(line){this.lines.splice(indexOf(this.lines,line),1);if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this)}};var nextMarkerId=0;function markText(doc,from,to,options,type){if(options&&options.shared){return markTextShared(doc,from,to,options,type)}if(doc.cm&&!doc.cm.curOp){return operation(doc.cm,markText)(doc,from,to,options,type)}var marker=new TextMarker(doc,type),diff=cmp(from,to);if(options){copyObj(options,marker,false)}if(diff>0||diff==0&&marker.clearWhenEmpty!==false){return marker}if(marker.replacedWith){marker.collapsed=true;marker.widgetNode=elt("span",[marker.replacedWith],"CodeMirror-widget");if(!options.handleMouseEvents){marker.widgetNode.setAttribute("cm-ignore-events","true")}if(options.insertLeft){marker.widgetNode.insertLeft=true}}if(marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}sawCollapsedSpans=true}if(marker.addToHistory){addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN)}var curLine=from.line,cm=doc.cm,updateMaxLine;doc.iter(curLine,to.line+1,function(line){if(cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine){updateMaxLine=true}if(marker.collapsed&&curLine!=from.line){updateLineHeight(line,0)}addMarkedSpan(line,new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null));++curLine});if(marker.collapsed){doc.iter(from.line,to.line+1,function(line){if(lineIsHidden(doc,line)){updateLineHeight(line,0)}})}if(marker.clearOnEnter){on(marker,"beforeCursorEnter",function(){marker.clear()})}if(marker.readOnly){sawReadOnlySpans=true;if(doc.history.done.length||doc.history.undone.length){doc.clearHistory()}}if(marker.collapsed){marker.id=++nextMarkerId;marker.atomic=true}if(cm){if(updateMaxLine){cm.curOp.updateMaxLine=true}if(marker.collapsed){regChange(cm,from.line,to.line+1)}else{if(marker.className||marker.title||marker.startStyle||marker.endStyle||marker.css){for(var i=from.line;i<=to.line;i++){regLineChange(cm,i,"text")}}}if(marker.atomic){reCheckSelection(cm.doc)}signalLater(cm,"markerAdded",cm,marker)}return marker}var SharedTextMarker=CodeMirror.SharedTextMarker=function(markers,primary){this.markers=markers;this.primary=primary;for(var i=0;i<markers.length;++i){markers[i].parent=this}};eventMixin(SharedTextMarker);SharedTextMarker.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var i=0;i<this.markers.length;++i){this.markers[i].clear()}signalLater(this,"clear")};SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj)};function markTextShared(doc,from,to,options,type){options=copyObj(options);options.shared=false;var markers=[markText(doc,from,to,options,type)],primary=markers[0];var widget=options.widgetNode;linkedDocs(doc,function(doc){if(widget){options.widgetNode=widget.cloneNode(true)}markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;++i){if(doc.linked[i].isParent){return}}primary=lst(markers)});return new SharedTextMarker(markers,primary)}function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent})}function copySharedMarkers(doc,markers){for(var i=0;i<markers.length;i++){var marker=markers[i],pos=marker.find();var mFrom=doc.clipPos(pos.from),mTo=doc.clipPos(pos.to);if(cmp(mFrom,mTo)){var subMark=markText(doc,mFrom,mTo,marker.primary,marker.primary.type);marker.markers.push(subMark);subMark.parent=marker}}}function detachSharedMarkers(markers){for(var i=0;i<markers.length;i++){var marker=markers[i],linked=[marker.primary.doc];linkedDocs(marker.primary.doc,function(d){linked.push(d)});for(var j=0;j<marker.markers.length;j++){var subMarker=marker.markers[j];if(indexOf(linked,subMarker.doc)==-1){subMarker.parent=null;marker.markers.splice(j--,1)}}}}function MarkedSpan(marker,from,to){this.marker=marker;this.from=from;this.to=to}function getMarkedSpanFor(spans,marker){if(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker){return span}}}}function removeMarkedSpan(spans,span){for(var r,i=0;i<spans.length;++i){if(spans[i]!=span){(r||(r=[])).push(spans[i])}}return r}function addMarkedSpan(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.attachLine(line)}function markedSpansBefore(old,startCh,isInsert){if(old){for(var i=0,nw;i<old.length;++i){var span=old[i],marker=span.marker;var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh);if(startsBefore||span.from==startCh&&marker.type=="bookmark"&&(!isInsert||!span.marker.insertLeft)){var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to))}}}return nw}function markedSpansAfter(old,endCh,isInsert){if(old){for(var i=0,nw;i<old.length;++i){var span=old[i],marker=span.marker;var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=endCh:span.to>endCh);if(endsAfter||span.from==endCh&&marker.type=="bookmark"&&(!isInsert||span.marker.insertLeft)){var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push(new MarkedSpan(marker,startsBefore?null:span.from-endCh,span.to==null?null:span.to-endCh))}}}return nw}function stretchSpansOverChange(doc,change){if(change.full){return null}var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans;var oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast){return null}var startCh=change.from.ch,endCh=change.to.ch,isInsert=cmp(change.from,change.to)==0;var first=markedSpansBefore(oldFirst,startCh,isInsert);var last=markedSpansAfter(oldLast,endCh,isInsert);var sameLine=change.text.length==1,offset=lst(change.text).length+(sameLine?startCh:0);if(first){for(var i=0;i<first.length;++i){var span=first[i];if(span.to==null){var found=getMarkedSpanFor(last,span.marker);if(!found){span.to=startCh}else{if(sameLine){span.to=found.to==null?null:found.to+offset}}}}}if(last){for(var i=0;i<last.length;++i){var span=last[i];if(span.to!=null){span.to+=offset}if(span.from==null){var found=getMarkedSpanFor(first,span.marker);if(!found){span.from=offset;if(sameLine){(first||(first=[])).push(span)}}}else{span.from+=offset;if(sameLine){(first||(first=[])).push(span)}}}}if(first){first=clearEmptySpans(first)}if(last&&last!=first){last=clearEmptySpans(last)}var newMarkers=[first];if(!sameLine){var gap=change.text.length-2,gapMarkers;if(gap>0&&first){for(var i=0;i<first.length;++i){if(first[i].to==null){(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(first[i].marker,null,null))}}}for(var i=0;i<gap;++i){newMarkers.push(gapMarkers)}newMarkers.push(last)}return newMarkers}function clearEmptySpans(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if(span.from!=null&&span.from==span.to&&span.marker.clearWhenEmpty!==false){spans.splice(i--,1)}}if(!spans.length){return null}return spans}function mergeOldSpans(doc,change){var old=getOldSpans(doc,change);var stretched=stretchSpansOverChange(doc,change);if(!old){return stretched}if(!stretched){return old}for(var i=0;i<old.length;++i){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur){spans:for(var j=0;j<stretchCur.length;++j){var span=stretchCur[j];for(var k=0;k<oldCur.length;++k){if(oldCur[k].marker==span.marker){continue spans}}oldCur.push(span)}}else{if(stretchCur){old[i]=stretchCur}}}return old}function removeReadOnlyRanges(doc,from,to){var markers=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans){for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;if(mark.readOnly&&(!markers||indexOf(markers,mark)==-1)){(markers||(markers=[])).push(mark)}}}});if(!markers){return null}var parts=[{from:from,to:to}];for(var i=0;i<markers.length;++i){var mk=markers[i],m=mk.find(0);for(var j=0;j<parts.length;++j){var p=parts[j];if(cmp(p.to,m.from)<0||cmp(p.from,m.to)>0){continue}var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);if(dfrom<0||!mk.inclusiveLeft&&!dfrom){newParts.push({from:p.from,to:m.from})}if(dto>0||!mk.inclusiveRight&&!dto){newParts.push({from:m.to,to:p.to})}parts.splice.apply(parts,newParts);j+=newParts.length-1}}return parts}function detachMarkedSpans(line){var spans=line.markedSpans;if(!spans){return}for(var i=0;i<spans.length;++i){spans[i].marker.detachLine(line)}line.markedSpans=null}function attachMarkedSpans(line,spans){if(!spans){return}for(var i=0;i<spans.length;++i){spans[i].marker.attachLine(line)}line.markedSpans=spans}function extraLeft(marker){return marker.inclusiveLeft?-1:0}function extraRight(marker){return marker.inclusiveRight?1:0}function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(lenDiff!=0){return lenDiff}var aPos=a.find(),bPos=b.find();var fromCmp=cmp(aPos.from,bPos.from)||extraLeft(a)-extraLeft(b);if(fromCmp){return -fromCmp}var toCmp=cmp(aPos.to,bPos.to)||extraRight(a)-extraRight(b);if(toCmp){return toCmp}return b.id-a.id}function collapsedSpanAtSide(line,start){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps){for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(sp.marker.collapsed&&(start?sp.from:sp.to)==null&&(!found||compareCollapsedMarkers(found,sp.marker)<0)){found=sp.marker}}}return found}function collapsedSpanAtStart(line){return collapsedSpanAtSide(line,true)}function collapsedSpanAtEnd(line){return collapsedSpanAtSide(line,false)}function conflictingCollapsedRange(doc,lineNo,from,to,marker){var line=getLine(doc,lineNo);var sps=sawCollapsedSpans&&line.markedSpans;if(sps){for(var i=0;i<sps.length;++i){var sp=sps[i];if(!sp.marker.collapsed){continue}var found=sp.marker.find(0);var fromCmp=cmp(found.from,from)||extraLeft(sp.marker)-extraLeft(marker);var toCmp=cmp(found.to,to)||extraRight(sp.marker)-extraRight(marker);if(fromCmp>=0&&toCmp<=0||fromCmp<=0&&toCmp>=0){continue}if(fromCmp<=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.to,from)>=0:cmp(found.to,from)>0)||fromCmp>=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.from,to)<=0:cmp(found.from,to)<0)){return true}}}}function visualLine(line){var merged;while(merged=collapsedSpanAtStart(line)){line=merged.find(-1,true).line}return line}function visualLineContinued(line){var merged,lines;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line;(lines||(lines=[])).push(line)}return lines}function visualLineNo(doc,lineN){var line=getLine(doc,lineN),vis=visualLine(line);if(line==vis){return lineN}return lineNo(vis)}function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine()){return lineN}var line=getLine(doc,lineN),merged;if(!lineIsHidden(doc,line)){return lineN}while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line}return lineNo(line)+1}function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps){for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed){continue}if(sp.from==null){return true}if(sp.marker.widgetNode){continue}if(sp.from==0&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp)){return true}}}}function lineIsHiddenInner(doc,line,span){if(span.to==null){var end=span.marker.find(1,true);return lineIsHiddenInner(doc,end.line,getMarkedSpanFor(end.line.markedSpans,span.marker))}if(span.marker.inclusiveRight&&span.to==line.text.length){return true}for(var sp,i=0;i<line.markedSpans.length;++i){sp=line.markedSpans[i];if(sp.marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(sp.to==null||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp)){return true}}}var LineWidget=CodeMirror.LineWidget=function(doc,node,options){if(options){for(var opt in options){if(options.hasOwnProperty(opt)){this[opt]=options[opt]}}}this.doc=doc;this.node=node};eventMixin(LineWidget);function adjustScrollWhenAboveVisible(cm,line,diff){if(heightAtLine(line)<((cm.curOp&&cm.curOp.scrollTop)||cm.doc.scrollTop)){addToScrollPos(cm,null,diff)}}LineWidget.prototype.clear=function(){var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(no==null||!ws){return}for(var i=0;i<ws.length;++i){if(ws[i]==this){ws.splice(i--,1)}}if(!ws.length){line.widgets=null}var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height));if(cm){runInOp(cm,function(){adjustScrollWhenAboveVisible(cm,line,-height);regLineChange(cm,no,"widget")})}};LineWidget.prototype.changed=function(){var oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;if(!diff){return}updateLineHeight(line,line.height+diff);if(cm){runInOp(cm,function(){cm.curOp.forceUpdate=true;adjustScrollWhenAboveVisible(cm,line,diff)})}};function widgetHeight(widget){if(widget.height!=null){return widget.height}var cm=widget.doc.cm;if(!cm){return 0}if(!contains(document.body,widget.node)){var parentStyle="position: relative;";if(widget.coverGutter){parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;"}if(widget.noHScroll){parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;"}removeChildrenAndAdd(cm.display.measure,elt("div",[widget.node],null,parentStyle))}return widget.height=widget.node.parentNode.offsetHeight}function addLineWidget(doc,handle,node,options){var widget=new LineWidget(doc,node,options);var cm=doc.cm;if(cm&&widget.noHScroll){cm.display.alignWidgets=true}changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);if(widget.insertAt==null){widgets.push(widget)}else{widgets.splice(Math.min(widgets.length-1,Math.max(0,widget.insertAt)),0,widget)}widget.line=line;if(cm&&!lineIsHidden(doc,line)){var aboveVisible=heightAtLine(line)<doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget));if(aboveVisible){addToScrollPos(cm,null,widget.height)}cm.curOp.forceUpdate=true}return true});return widget}var Line=CodeMirror.Line=function(text,markedSpans,estimateHeight){this.text=text;attachMarkedSpans(this,markedSpans);this.height=estimateHeight?estimateHeight(this):1};eventMixin(Line);Line.prototype.lineNo=function(){return lineNo(this)};function updateLine(line,text,markedSpans,estimateHeight){line.text=text;if(line.stateAfter){line.stateAfter=null}if(line.styles){line.styles=null}if(line.order!=null){line.order=null}detachMarkedSpans(line);attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?estimateHeight(line):1;if(estHeight!=line.height){updateLineHeight(line,estHeight)}}function cleanUpLine(line){line.parent=null;detachMarkedSpans(line)}function extractLineClasses(type,output){if(type){for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass){break}type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";if(output[prop]==null){output[prop]=lineClass[2]}else{if(!(new RegExp("(?:^|s)"+lineClass[2]+"(?:$|s)")).test(output[prop])){output[prop]+=" "+lineClass[2]}}}}return type}function callBlankLine(mode,state){if(mode.blankLine){return mode.blankLine(state)}if(!mode.innerMode){return}var inner=CodeMirror.innerMode(mode,state);if(inner.mode.blankLine){return inner.mode.blankLine(inner.state)}}function readToken(mode,stream,state,inner){for(var i=0;i<10;i++){if(inner){inner[0]=CodeMirror.innerMode(mode,state).mode}var style=mode.token(stream,state);if(stream.pos>stream.start){return style}}throw new Error("Mode "+mode.name+" failed to advance stream.")}function takeToken(cm,pos,precise,asArray){function getObj(copy){return{start:stream.start,end:stream.pos,string:stream.current(),type:style||null,state:copy?copyState(doc.mode,state):state}}var doc=cm.doc,mode=doc.mode,style;pos=clipPos(doc,pos);var line=getLine(doc,pos.line),state=getStateBefore(cm,pos.line,precise);var stream=new StringStream(line.text,cm.options.tabSize),tokens;if(asArray){tokens=[]}while((asArray||stream.pos<pos.ch)&&!stream.eol()){stream.start=stream.pos;style=readToken(mode,stream,state);if(asArray){tokens.push(getObj(true))}}return asArray?tokens:getObj()}function runMode(cm,text,mode,state,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;if(flattenSpans==null){flattenSpans=cm.options.flattenSpans}var curStart=0,curStyle=null;var stream=new StringStream(text,cm.options.tabSize),style;var inner=cm.options.addModeClass&&[null];if(text==""){extractLineClasses(callBlankLine(mode,state),lineClasses)}while(!stream.eol()){if(stream.pos>cm.options.maxHighlightLength){flattenSpans=false;if(forceToEnd){processLine(cm,text,state,stream.pos)}stream.pos=text.length;style=null}else{style=extractLineClasses(readToken(mode,stream,state,inner),lineClasses)}if(inner){var mName=inner[0].name;if(mName){style="m-"+(style?mName+" "+style:mName)}}if(!flattenSpans||curStyle!=style){while(curStart<stream.start){curStart=Math.min(stream.start,curStart+50000);f(curStart,curStyle)}curStyle=style}stream.start=stream.pos}while(curStart<stream.pos){var pos=Math.min(stream.pos,curStart+50000);f(pos,curStyle);curStart=pos}}function highlightLine(cm,line,state,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,state,function(end,style){st.push(end,style)},lineClasses,forceToEnd);for(var o=0;o<cm.state.overlays.length;++o){var overlay=cm.state.overlays[o],i=1,at=0;runMode(cm,line.text,overlay.mode,true,function(end,style){var start=i;while(at<end){var i_end=st[i];if(i_end>end){st.splice(i,1,end,st[i+1],i_end)}i+=2;at=Math.min(end,i_end)}if(!style){return}if(overlay.opaque){st.splice(start,i-start,end,"cm-overlay "+style);i=start+2}else{for(;start<i;start+=2){var cur=st[start+1];st[start+1]=(cur?cur+" ":"")+"cm-overlay "+style}}},lineClasses)}return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null}}function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var state=getStateBefore(cm,lineNo(line));var result=highlightLine(cm,line,line.text.length>cm.options.maxHighlightLength?copyState(cm.doc.mode,state):state);line.stateAfter=state;line.styles=result.styles;if(result.classes){line.styleClasses=result.classes}else{if(line.styleClasses){line.styleClasses=null}}if(updateFrontier===cm.doc.frontier){cm.doc.frontier++}}return line.styles}function processLine(cm,text,state,startAt){var mode=cm.doc.mode;var stream=new StringStream(text,cm.options.tabSize);stream.start=stream.pos=startAt||0;if(text==""){callBlankLine(mode,state)}while(!stream.eol()){readToken(mode,stream,state);stream.start=stream.pos}}var styleToClassCache={},styleToClassCacheWithMode={};function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style)){return null}var cache=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return cache[style]||(cache[style]=style.replace(/\S+/g,"cm-$&"))}function buildLineContent(cm,lineView){var content=elt("span",null,null,webkit?"padding-right: .1px":null);var builder={pre:elt("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,trailingSpace:false,splitSpaces:(ie||webkit)&&cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i++){var line=i?lineView.rest[i-1]:lineView.line,order;builder.pos=0;builder.addToken=buildToken;if(hasBadBidiRects(cm.display.measure)&&(order=getOrder(line))){builder.addToken=buildTokenBadBidi(builder.addToken,order)}builder.map=[];var allowFrontierUpdate=lineView!=cm.display.externalMeasured&&lineNo(line);insertLineContent(line,builder,getLineStyles(cm,line,allowFrontierUpdate));if(line.styleClasses){if(line.styleClasses.bgClass){builder.bgClass=joinClasses(line.styleClasses.bgClass,builder.bgClass||"")}if(line.styleClasses.textClass){builder.textClass=joinClasses(line.styleClasses.textClass,builder.textClass||"")}}if(builder.map.length==0){builder.map.push(0,0,builder.content.appendChild(zeroWidthElement(cm.display.measure)))}if(i==0){lineView.measure.map=builder.map;lineView.measure.cache={}}else{(lineView.measure.maps||(lineView.measure.maps=[])).push(builder.map);(lineView.measure.caches||(lineView.measure.caches=[])).push({})}}if(webkit){var last=builder.content.lastChild;if(/\bcm-tab\b/.test(last.className)||(last.querySelector&&last.querySelector(".cm-tab"))){builder.content.className="cm-tab-wrap-hack"}}signal(cm,"renderLine",cm,lineView.line,builder.pre);if(builder.pre.className){builder.textClass=joinClasses(builder.pre.className,builder.textClass||"")}return builder}function defaultSpecialCharPlaceholder(ch){var token=elt("span","\u2022","cm-invalidchar");token.title="\\u"+ch.charCodeAt(0).toString(16);token.setAttribute("aria-label",token.title);return token}function buildToken(builder,text,style,startStyle,endStyle,title,css){if(!text){return}var displayText=builder.splitSpaces?splitSpaces(text,builder.trailingSpace):text;var special=builder.cm.state.specialChars,mustWrap=false;if(!special.test(text)){builder.col+=text.length;var content=document.createTextNode(displayText);builder.map.push(builder.pos,builder.pos+text.length,content);if(ie&&ie_version<9){mustWrap=true}builder.pos+=text.length}else{var content=document.createDocumentFragment(),pos=0;while(true){special.lastIndex=pos;var m=special.exec(text);var skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(displayText.slice(pos,pos+skipped));if(ie&&ie_version<9){content.appendChild(elt("span",[txt]))}else{content.appendChild(txt)}builder.map.push(builder.pos,builder.pos+skipped,txt);builder.col+=skipped;builder.pos+=skipped}if(!m){break}pos+=skipped+1;if(m[0]=="\t"){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;var txt=content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"));txt.setAttribute("role","presentation");txt.setAttribute("cm-text","\t");builder.col+=tabWidth}else{if(m[0]=="\r"||m[0]=="\n"){var txt=content.appendChild(elt("span",m[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));txt.setAttribute("cm-text",m[0]);builder.col+=1}else{var txt=builder.cm.options.specialCharPlaceholder(m[0]);txt.setAttribute("cm-text",m[0]);if(ie&&ie_version<9){content.appendChild(elt("span",[txt]))}else{content.appendChild(txt)}builder.col+=1}}builder.map.push(builder.pos,builder.pos+1,txt);builder.pos++}}builder.trailingSpace=displayText.charCodeAt(text.length-1)==32;if(style||startStyle||endStyle||mustWrap||css){var fullStyle=style||"";if(startStyle){fullStyle+=startStyle}if(endStyle){fullStyle+=endStyle}var token=elt("span",[content],fullStyle,css);if(title){token.title=title}return builder.content.appendChild(token)}builder.content.appendChild(content)}function splitSpaces(text,trailingBefore){if(text.length>1&&!/  /.test(text)){return text}var spaceBefore=trailingBefore,result="";for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch==" "&&spaceBefore&&(i==text.length-1||text.charCodeAt(i+1)==32)){ch="\u00a0"}result+=ch;spaceBefore=ch==" "}return result}function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,title,css){style=style?style+" cm-force-border":"cm-force-border";var start=builder.pos,end=start+text.length;for(;;){for(var i=0;i<order.length;i++){var part=order[i];if(part.to>start&&part.from<=start){break}}if(part.to>=end){return inner(builder,text,style,startStyle,endStyle,title,css)}inner(builder,text.slice(0,part.to-start),style,startStyle,null,title,css);startStyle=null;text=text.slice(part.to-start);start=part.to}}}function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;if(widget){builder.map.push(builder.pos,builder.pos+size,widget)}if(!ignoreWidget&&builder.cm.display.input.needsContentAttribute){if(!widget){widget=builder.content.appendChild(document.createElement("span"))}widget.setAttribute("cm-marker",marker.id)}if(widget){builder.cm.display.input.setUneditable(widget);builder.content.appendChild(widget)}builder.pos+=size;builder.trailingSpace=false}function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(!spans){for(var i=1;i<styles.length;i+=2){builder.addToken(builder,allText.slice(at,at=styles[i]),interpretTokenStyle(styles[i+1],builder.cm.options))}return}var len=allText.length,pos=0,i=1,text="",style,css;var nextChange=0,spanStyle,spanEndStyle,spanStartStyle,title,collapsed;for(;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=title=css="";collapsed=null;nextChange=Infinity;var foundBookmarks=[],endStyles;for(var j=0;j<spans.length;++j){var sp=spans[j],m=sp.marker;if(m.type=="bookmark"&&sp.from==pos&&m.widgetNode){foundBookmarks.push(m)}else{if(sp.from<=pos&&(sp.to==null||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)){if(sp.to!=null&&sp.to!=pos&&nextChange>sp.to){nextChange=sp.to;spanEndStyle=""}if(m.className){spanStyle+=" "+m.className}if(m.css){css=(css?css+";":"")+m.css}if(m.startStyle&&sp.from==pos){spanStartStyle+=" "+m.startStyle}if(m.endStyle&&sp.to==nextChange){(endStyles||(endStyles=[])).push(m.endStyle,sp.to)}if(m.title&&!title){title=m.title}if(m.collapsed&&(!collapsed||compareCollapsedMarkers(collapsed.marker,m)<0)){collapsed=sp}}else{if(sp.from>pos&&nextChange>sp.from){nextChange=sp.from}}}}if(endStyles){for(var j=0;j<endStyles.length;j+=2){if(endStyles[j+1]==nextChange){spanEndStyle+=" "+endStyles[j]}}}if(!collapsed||collapsed.from==pos){for(var j=0;j<foundBookmarks.length;++j){buildCollapsedSpan(builder,0,foundBookmarks[j])}}if(collapsed&&(collapsed.from||0)==pos){buildCollapsedSpan(builder,(collapsed.to==null?len+1:collapsed.to)-pos,collapsed.marker,collapsed.from==null);if(collapsed.to==null){return}if(collapsed.to==pos){collapsed=false}}}if(pos>=len){break}var upto=Math.min(len,nextChange);while(true){if(text){var end=pos+text.length;if(!collapsed){var tokenText=end>upto?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",title,css)}if(end>=upto){text=text.slice(upto-pos);pos=upto;break}pos=end;spanStartStyle=""}text=allText.slice(at,at=styles[i++]);style=interpretTokenStyle(styles[i++],builder.cm.options)}}}function isWholeLineUpdate(doc,change){return change.from.ch==0&&change.to.ch==0&&lst(change.text)==""&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore)}function updateDoc(doc,change,markedSpans,estimateHeight){function spansFor(n){return markedSpans?markedSpans[n]:null}function update(line,text,spans){updateLine(line,text,spans,estimateHeight);signalLater(line,"change",line,change)}function linesFor(start,end){for(var i=start,result=[];i<end;++i){result.push(new Line(text[i],spansFor(i),estimateHeight))}return result}var from=change.from,to=change.to,text=change.text;var firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line);var lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(change.full){doc.insert(0,linesFor(0,text.length));doc.remove(text.length,doc.size-text.length)}else{if(isWholeLineUpdate(doc,change)){var added=linesFor(0,text.length-1);update(lastLine,lastLine.text,lastSpans);if(nlines){doc.remove(from.line,nlines)}if(added.length){doc.insert(from.line,added)}}else{if(firstLine==lastLine){if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans)}else{var added=linesFor(1,text.length-1);added.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight));update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));doc.insert(from.line+1,added)}}else{if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0));doc.remove(from.line+1,nlines)}else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);var added=linesFor(1,text.length-1);if(nlines>1){doc.remove(from.line+1,nlines-1)}doc.insert(from.line+1,added)}}}}signalLater(doc,"change",doc,change)}function LeafChunk(lines){this.lines=lines;this.parent=null;for(var i=0,height=0;i<lines.length;++i){lines[i].parent=this;height+=lines[i].height}this.height=height}LeafChunk.prototype={chunkSize:function(){return this.lines.length},removeInner:function(at,n){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];this.height-=line.height;cleanUpLine(line);signalLater(line,"delete")}this.lines.splice(at,n)},collapse:function(lines){lines.push.apply(lines,this.lines)},insertInner:function(at,lines,height){this.height+=height;this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0;i<lines.length;++i){lines[i].parent=this}},iterN:function(at,n,op){for(var e=at+n;at<e;++at){if(op(this.lines[at])){return true}}}};function BranchChunk(children){this.children=children;var size=0,height=0;for(var i=0;i<children.length;++i){var ch=children[i];size+=ch.chunkSize();height+=ch.height;ch.parent=this}this.size=size;this.height=height;this.parent=null}BranchChunk.prototype={chunkSize:function(){return this.size},removeInner:function(at,n){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;child.removeInner(at,rm);this.height-=oldHeight-child.height;if(sz==rm){this.children.splice(i--,1);child.parent=null}if((n-=rm)==0){break}at=0}else{at-=sz}}if(this.size-n<25&&(this.children.length>1||!(this.children[0] instanceof LeafChunk))){var lines=[];this.collapse(lines);this.children=[new LeafChunk(lines)];this.children[0].parent=this}},collapse:function(lines){for(var i=0;i<this.children.length;++i){this.children[i].collapse(lines)}},insertInner:function(at,lines,height){this.size+=lines.length;this.height+=height;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){child.insertInner(at,lines,height);if(child.lines&&child.lines.length>50){var remaining=child.lines.length%25+25;for(var pos=remaining;pos<child.lines.length;){var leaf=new LeafChunk(child.lines.slice(pos,pos+=25));child.height-=leaf.height;this.children.splice(++i,0,leaf);leaf.parent=this}child.lines=child.lines.slice(0,remaining);this.maybeSpill()}break}at-=sz}},maybeSpill:function(){if(this.children.length<=10){return}var me=this;do{var spilled=me.children.splice(me.children.length-5,5);var sibling=new BranchChunk(spilled);if(!me.parent){var copy=new BranchChunk(me.children);copy.parent=me;me.children=[copy,sibling];me=copy}else{me.size-=sibling.size;me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}sibling.parent=me.parent}while(me.children.length>10);me.parent.maybeSpill()},iterN:function(at,n,op){for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op)){return true}if((n-=used)==0){break}at=0}else{at-=sz}}}};var nextDocId=0;var Doc=CodeMirror.Doc=function(text,mode,firstLine,lineSep){if(!(this instanceof Doc)){return new Doc(text,mode,firstLine,lineSep)}if(firstLine==null){firstLine=0}BranchChunk.call(this,[new LeafChunk([new Line("",null)])]);this.first=firstLine;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=firstLine;var start=Pos(firstLine,0);this.sel=simpleSelection(start);this.history=new History(null);this.id=++nextDocId;this.modeOption=mode;this.lineSep=lineSep;this.extend=false;if(typeof text=="string"){text=this.splitLines(text)}updateDoc(this,{from:start,to:start,text:text});setSelection(this,simpleSelection(start),sel_dontScroll)};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){if(op){this.iterN(from-this.first,to-from,op)}else{this.iterN(this.first,this.first+this.size,from)}},insert:function(at,lines){var height=0;for(var i=0;i<lines.length;++i){height+=lines[i].height}this.insertInner(at-this.first,lines,height)},remove:function(at,n){this.removeInner(at-this.first,n)},getValue:function(lineSep){var lines=getLines(this,this.first,this.first+this.size);if(lineSep===false){return lines}return lines.join(lineSep||this.lineSeparator())},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:true},true);setSelection(this,simpleSelection(top))}),replaceRange:function(code,from,to,origin){from=clipPos(this,from);to=to?clipPos(this,to):from;replaceRange(this,code,from,to,origin)},getRange:function(from,to,lineSep){var lines=getBetween(this,clipPos(this,from),clipPos(this,to));if(lineSep===false){return lines}return lines.join(lineSep||this.lineSeparator())},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text},getLineHandle:function(line){if(isLine(this,line)){return getLine(this,line)}},getLineNumber:function(line){return lineNo(line)},getLineHandleVisualStart:function(line){if(typeof line=="number"){line=getLine(this,line)}return visualLine(line)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(pos){return clipPos(this,pos)},getCursor:function(start){var range=this.sel.primary(),pos;if(start==null||start=="head"){pos=range.head}else{if(start=="anchor"){pos=range.anchor}else{if(start=="end"||start=="to"||start===false){pos=range.to()}else{pos=range.from()}}}return pos},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(line,ch,options){setSimpleSelection(this,clipPos(this,typeof line=="number"?Pos(line,ch||0):line),null,options)}),setSelection:docMethodOp(function(anchor,head,options){setSimpleSelection(this,clipPos(this,anchor),clipPos(this,head||anchor),options)}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,clipPos(this,head),other&&clipPos(this,other),options)}),extendSelections:docMethodOp(function(heads,options){extendSelections(this,clipPosArray(this,heads),options)}),extendSelectionsBy:docMethodOp(function(f,options){var heads=map(this.sel.ranges,f);extendSelections(this,clipPosArray(this,heads),options)}),setSelections:docMethodOp(function(ranges,primary,options){if(!ranges.length){return}for(var i=0,out=[];i<ranges.length;i++){out[i]=new Range(clipPos(this,ranges[i].anchor),clipPos(this,ranges[i].head))}if(primary==null){primary=Math.min(ranges.length-1,this.sel.primIndex)}setSelection(this,normalizeSelection(out,primary),options)}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(clipPos(this,anchor),clipPos(this,head||anchor)));setSelection(this,normalizeSelection(ranges,ranges.length-1),options)}),getSelection:function(lineSep){var ranges=this.sel.ranges,lines;for(var i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel}if(lineSep===false){return lines}else{return lines.join(lineSep||this.lineSeparator())}},getSelections:function(lineSep){var parts=[],ranges=this.sel.ranges;for(var i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());if(lineSep!==false){sel=sel.join(lineSep||this.lineSeparator())}parts[i]=sel}return parts},replaceSelection:function(code,collapse,origin){var dup=[];for(var i=0;i<this.sel.ranges.length;i++){dup[i]=code}this.replaceSelections(dup,collapse,origin||"+input")},replaceSelections:docMethodOp(function(code,collapse,origin){var changes=[],sel=this.sel;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];changes[i]={from:range.from(),to:range.to(),text:this.splitLines(code[i]),origin:origin}}var newSel=collapse&&collapse!="end"&&computeReplacedSel(this,changes,collapse);for(var i=changes.length-1;i>=0;i--){makeChange(this,changes[i])}if(newSel){setSelectionReplaceHistory(this,newSel)}else{if(this.cm){ensureCursorVisible(this.cm)}}}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",true)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",true)}),setExtending:function(val){this.extend=val},getExtending:function(){return this.extend},historySize:function(){var hist=this.history,done=0,undone=0;for(var i=0;i<hist.done.length;i++){if(!hist.done[i].ranges){++done}}for(var i=0;i<hist.undone.length;i++){if(!hist.undone[i].ranges){++undone}}return{undo:done,redo:undone}},clearHistory:function(){this.history=new History(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(forceSplit){if(forceSplit){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function(histData){var hist=this.history=new History(this.history.maxGeneration);hist.done=copyHistoryArray(histData.done.slice(0),null,true);hist.undone=copyHistoryArray(histData.undone.slice(0),null,true)},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";if(!line[prop]){line[prop]=cls}else{if(classTest(cls).test(line[prop])){return false}else{line[prop]+=" "+cls}}return true})}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";var cur=line[prop];if(!cur){return false}else{if(cls==null){line[prop]=null}else{var found=cur.match(classTest(cls));if(!found){return false}var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(!found.index||end==cur.length?"":" ")+cur.slice(end)||null}}return true})}),addLineWidget:docMethodOp(function(handle,node,options){return addLineWidget(this,handle,node,options)}),removeLineWidget:function(widget){widget.clear()},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,options&&options.type||"range")},setBookmark:function(pos,options){var realOpts={replacedWith:options&&(options.nodeType==null?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:false,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};pos=clipPos(this,pos);return markText(this,pos,pos,realOpts,"bookmark")},findMarksAt:function(pos){pos=clipPos(this,pos);var markers=[],spans=getLine(this,pos.line).markedSpans;if(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if((span.from==null||span.from<=pos.ch)&&(span.to==null||span.to>=pos.ch)){markers.push(span.marker.parent||span.marker)}}}return markers},findMarks:function(from,to,filter){from=clipPos(this,from);to=clipPos(this,to);var found=[],lineNo=from.line;this.iter(from.line,to.line+1,function(line){var spans=line.markedSpans;if(spans){for(var i=0;i<spans.length;i++){var span=spans[i];if(!(span.to!=null&&lineNo==from.line&&from.ch>=span.to||span.from==null&&lineNo!=from.line||span.from!=null&&lineNo==to.line&&span.from>=to.ch)&&(!filter||filter(span.marker))){found.push(span.marker.parent||span.marker)}}}++lineNo});return found},getAllMarks:function(){var markers=[];this.iter(function(line){var sps=line.markedSpans;if(sps){for(var i=0;i<sps.length;++i){if(sps[i].from!=null){markers.push(sps[i].marker)}}}});return markers},posFromIndex:function(off){var ch,lineNo=this.first,sepSize=this.lineSeparator().length;this.iter(function(line){var sz=line.text.length+sepSize;if(sz>off){ch=off;return true}off-=sz;++lineNo});return clipPos(this,Pos(lineNo,ch))},indexFromPos:function(coords){coords=clipPos(this,coords);var index=coords.ch;if(coords.line<this.first||coords.ch<0){return 0}var sepSize=this.lineSeparator().length;this.iter(this.first,coords.line,function(line){index+=line.text.length+sepSize});return index},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);doc.scrollTop=this.scrollTop;doc.scrollLeft=this.scrollLeft;doc.sel=this.sel;doc.extend=false;if(copyHistory){doc.history.undoDepth=this.history.undoDepth;doc.setHistory(this.getHistory())}return doc},linkedDoc:function(options){if(!options){options={}}var from=this.first,to=this.first+this.size;if(options.from!=null&&options.from>from){from=options.from}if(options.to!=null&&options.to<to){to=options.to}var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep);if(options.sharedHist){copy.history=this.history}(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist});copy.linked=[{doc:this,isParent:true,sharedHist:options.sharedHist}];copySharedMarkers(copy,findSharedMarkers(this));return copy},unlinkDoc:function(other){if(other instanceof CodeMirror){other=other.doc}if(this.linked){for(var i=0;i<this.linked.length;++i){var link=this.linked[i];if(link.doc!=other){continue}this.linked.splice(i,1);other.unlinkDoc(this);detachSharedMarkers(findSharedMarkers(this));break}}if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){splitIds.push(doc.id)},true);other.history=new History(null);other.history.done=copyHistoryArray(this.history.done,splitIds);other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function(f){linkedDocs(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(str){if(this.lineSep){return str.split(this.lineSep)}return splitLinesAuto(str)},lineSeparator:function(){return this.lineSep||"\n"}});Doc.prototype.eachLine=Doc.prototype.iter;var dontDelegate="iter insert remove copy getEditor constructor".split(" ");for(var prop in Doc.prototype){if(Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0){CodeMirror.prototype[prop]=(function(method){return function(){return method.apply(this.doc,arguments)}})(Doc.prototype[prop])}}eventMixin(Doc);function linkedDocs(doc,f,sharedHistOnly){function propagate(doc,skip,sharedHist){if(doc.linked){for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc==skip){continue}var shared=sharedHist&&rel.sharedHist;if(sharedHistOnly&&!shared){continue}f(rel.doc,shared);propagate(rel.doc,doc,shared)}}}propagate(doc,null,true)}function attachDoc(cm,doc){if(doc.cm){throw new Error("This document is already in use.")}cm.doc=doc;doc.cm=cm;estimateLineHeights(cm);loadMode(cm);if(!cm.options.lineWrapping){findMaxLine(cm)}cm.options.mode=doc.modeOption;regChange(cm)}function getLine(doc,n){n-=doc.first;if(n<0||n>=doc.size){throw new Error("There is no line "+(n+doc.first)+" in the document.")}for(var chunk=doc;!chunk.lines;){for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}n-=sz}}return chunk.lines[n]}function getBetween(doc,start,end){var out=[],n=start.line;doc.iter(start.line,end.line+1,function(line){var text=line.text;if(n==end.line){text=text.slice(0,end.ch)}if(n==start.line){text=text.slice(start.ch)}out.push(text);++n});return out}function getLines(doc,from,to){var out=[];doc.iter(from,to,function(line){out.push(line.text)});return out}function updateLineHeight(line,height){var diff=height-line.height;if(diff){for(var n=line;n;n=n.parent){n.height+=diff}}}function lineNo(line){if(line.parent==null){return null}var cur=line.parent,no=indexOf(cur.lines,line);for(var chunk=cur.parent;chunk;cur=chunk,chunk=chunk.parent){for(var i=0;;++i){if(chunk.children[i]==cur){break}no+=chunk.children[i].chunkSize()}}return no+cur.first}function lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i=0;i<chunk.children.length;++i){var child=chunk.children[i],ch=child.height;if(h<ch){chunk=child;continue outer}h-=ch;n+=child.chunkSize()}return n}while(!chunk.lines);for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i],lh=line.height;if(h<lh){break}h-=lh}return n+i}function heightAtLine(lineObj){lineObj=visualLine(lineObj);var h=0,chunk=lineObj.parent;for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj){break}else{h+=line.height}}for(var p=chunk.parent;p;chunk=p,p=chunk.parent){for(var i=0;i<p.children.length;++i){var cur=p.children[i];if(cur==chunk){break}else{h+=cur.height}}}return h}function getOrder(line){var order=line.order;if(order==null){order=line.order=bidiOrdering(line.text)}return order}function History(startGen){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=startGen||1}function historyChangeFromChange(doc,change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc,change.from,change.to)};attachLocalSpans(doc,histChange,change.from.line,change.to.line+1);linkedDocs(doc,function(doc){attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},true);return histChange}function clearSelectionEvents(array){while(array.length){var last=lst(array);if(last.ranges){array.pop()}else{break}}}function lastChangeEvent(hist,force){if(force){clearSelectionEvents(hist.done);return lst(hist.done)}else{if(hist.done.length&&!lst(hist.done).ranges){return lst(hist.done)}else{if(hist.done.length>1&&!hist.done[hist.done.length-2].ranges){hist.done.pop();return lst(hist.done)}}}}function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var time=+new Date,cur;if((hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&((change.origin.charAt(0)=="+"&&doc.cm&&hist.lastModTime>time-doc.cm.options.historyEventDelay)||change.origin.charAt(0)=="*"))&&(cur=lastChangeEvent(hist,hist.lastOp==opId))){var last=lst(cur.changes);if(cmp(change.from,change.to)==0&&cmp(change.from,last.to)==0){last.to=changeEnd(change)}else{cur.changes.push(historyChangeFromChange(doc,change))}}else{var before=lst(hist.done);if(!before||!before.ranges){pushSelectionToHistory(doc.sel,hist.done)}cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation};hist.done.push(cur);while(hist.done.length>hist.undoDepth){hist.done.shift();if(!hist.done[0].ranges){hist.done.shift()}}}hist.done.push(selAfter);hist.generation=++hist.maxGeneration;hist.lastModTime=hist.lastSelTime=time;hist.lastOp=hist.lastSelOp=opId;hist.lastOrigin=hist.lastSelOrigin=change.origin;if(!last){signal(doc,"historyAdded")}}function selectionEventCanBeMerged(doc,origin,prev,sel){var ch=origin.charAt(0);return ch=="*"||ch=="+"&&prev.ranges.length==sel.ranges.length&&prev.somethingSelected()==sel.somethingSelected()&&new Date-doc.history.lastSelTime<=(doc.cm?doc.cm.options.historyEventDelay:500)}function addSelectionToHistory(doc,sel,opId,options){var hist=doc.history,origin=options&&options.origin;if(opId==hist.lastSelOp||(origin&&hist.lastSelOrigin==origin&&(hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin||selectionEventCanBeMerged(doc,origin,lst(hist.done),sel)))){hist.done[hist.done.length-1]=sel}else{pushSelectionToHistory(sel,hist.done)}hist.lastSelTime=+new Date;hist.lastSelOrigin=origin;hist.lastSelOp=opId;if(options&&options.clearRedo!==false){clearSelectionEvents(hist.undone)}}function pushSelectionToHistory(sel,dest){var top=lst(dest);if(!(top&&top.ranges&&top.equals(sel))){dest.push(sel)}}function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){if(line.markedSpans){(existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans}++n})}function removeClearedSpans(spans){if(!spans){return null}for(var i=0,out;i<spans.length;++i){if(spans[i].marker.explicitlyCleared){if(!out){out=spans.slice(0,i)}}else{if(out){out.push(spans[i])}}}return !out?spans:out.length?out:null}function getOldSpans(doc,change){var found=change["spans_"+doc.id];if(!found){return null}for(var i=0,nw=[];i<change.text.length;++i){nw.push(removeClearedSpans(found[i]))}return nw}function copyHistoryArray(events,newGroup,instantiateSel){for(var i=0,copy=[];i<events.length;++i){var event=events[i];if(event.ranges){copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);continue}var changes=event.changes,newChanges=[];copy.push({changes:newChanges});for(var j=0;j<changes.length;++j){var change=changes[j],m;newChanges.push({from:change.from,to:change.to,text:change.text});if(newGroup){for(var prop in change){if(m=prop.match(/^spans_(\d+)$/)){if(indexOf(newGroup,Number(m[1]))>-1){lst(newChanges)[prop]=change[prop];delete change[prop]}}}}}}return copy}function rebaseHistSelSingle(pos,from,to,diff){if(to<pos.line){pos.line+=diff}else{if(from<pos.line){pos.line=from;pos.ch=0}}}function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;++i){var sub=array[i],ok=true;if(sub.ranges){if(!sub.copied){sub=array[i]=sub.deepCopy();sub.copied=true}for(var j=0;j<sub.ranges.length;j++){rebaseHistSelSingle(sub.ranges[j].anchor,from,to,diff);rebaseHistSelSingle(sub.ranges[j].head,from,to,diff)}continue}for(var j=0;j<sub.changes.length;++j){var cur=sub.changes[j];if(to<cur.from.line){cur.from=Pos(cur.from.line+diff,cur.from.ch);cur.to=Pos(cur.to.line+diff,cur.to.ch)}else{if(from<=cur.to.line){ok=false;break}}}if(!ok){array.splice(0,i+1);i=0}}}function rebaseHist(hist,change){var from=change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff);rebaseHistArray(hist.undone,from,to,diff)}var e_preventDefault=CodeMirror.e_preventDefault=function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};var e_stopPropagation=CodeMirror.e_stopPropagation=function(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}};function e_defaultPrevented(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==false}var e_stop=CodeMirror.e_stop=function(e){e_preventDefault(e);e_stopPropagation(e)};function e_target(e){return e.target||e.srcElement}function e_button(e){var b=e.which;if(b==null){if(e.button&1){b=1}else{if(e.button&2){b=3}else{if(e.button&4){b=2}}}}if(mac&&e.ctrlKey&&b==1){b=3}return b}var on=CodeMirror.on=function(emitter,type,f){if(emitter.addEventListener){emitter.addEventListener(type,f,false)}else{if(emitter.attachEvent){emitter.attachEvent("on"+type,f)}else{var map=emitter._handlers||(emitter._handlers={});var arr=map[type]||(map[type]=[]);arr.push(f)}}};var noHandlers=[];function getHandlers(emitter,type,copy){var arr=emitter._handlers&&emitter._handlers[type];if(copy){return arr&&arr.length>0?arr.slice():noHandlers}else{return arr||noHandlers}}var off=CodeMirror.off=function(emitter,type,f){if(emitter.removeEventListener){emitter.removeEventListener(type,f,false)}else{if(emitter.detachEvent){emitter.detachEvent("on"+type,f)}else{var handlers=getHandlers(emitter,type,false);for(var i=0;i<handlers.length;++i){if(handlers[i]==f){handlers.splice(i,1);break}}}}};var signal=CodeMirror.signal=function(emitter,type){var handlers=getHandlers(emitter,type,true);if(!handlers.length){return}var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<handlers.length;++i){handlers[i].apply(null,args)}};var orphanDelayedCallbacks=null;function signalLater(emitter,type){var arr=getHandlers(emitter,type,false);if(!arr.length){return}var args=Array.prototype.slice.call(arguments,2),list;if(operationGroup){list=operationGroup.delayedCallbacks}else{if(orphanDelayedCallbacks){list=orphanDelayedCallbacks}else{list=orphanDelayedCallbacks=[];setTimeout(fireOrphanDelayed,0)}}function bnd(f){return function(){f.apply(null,args)}}for(var i=0;i<arr.length;++i){list.push(bnd(arr[i]))}}function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;++i){delayed[i]()}}function signalDOMEvent(cm,e,override){if(typeof e=="string"){e={type:e,preventDefault:function(){this.defaultPrevented=true}}}signal(cm,override||e.type,cm,e);return e_defaultPrevented(e)||e.codemirrorIgnore}function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(!arr){return}var set=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]);for(var i=0;i<arr.length;++i){if(indexOf(set,arr[i])==-1){set.push(arr[i])}}}function hasHandler(emitter,type){return getHandlers(emitter,type).length>0}function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f)};ctor.prototype.off=function(type,f){off(this,type,f)}}var scrollerGap=30;var Pass=CodeMirror.Pass={toString:function(){return"CodeMirror.Pass"}};var sel_dontScroll={scroll:false},sel_mouse={origin:"*mouse"},sel_move={origin:"+move"};function Delayed(){this.id=null}Delayed.prototype.set=function(ms,f){clearTimeout(this.id);this.id=setTimeout(f,ms)};var countColumn=CodeMirror.countColumn=function(string,end,tabSize,startIndex,startValue){if(end==null){end=string.search(/[^\s\u00a0]/);if(end==-1){end=string.length}}for(var i=startIndex||0,n=startValue||0;;){var nextTab=string.indexOf("\t",i);if(nextTab<0||nextTab>=end){return n+(end-i)}n+=nextTab-i;n+=tabSize-(n%tabSize);i=nextTab+1}};var findColumn=CodeMirror.findColumn=function(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("\t",pos);if(nextTab==-1){nextTab=string.length}var skipped=nextTab-pos;if(nextTab==string.length||col+skipped>=goal){return pos+Math.min(skipped,goal-col)}col+=nextTab-pos;col+=tabSize-(col%tabSize);pos=nextTab+1;if(col>=goal){return pos}}};var spaceStrs=[""];function spaceStr(n){while(spaceStrs.length<=n){spaceStrs.push(lst(spaceStrs)+" ")}return spaceStrs[n]}function lst(arr){return arr[arr.length-1]}var selectInput=function(node){node.select()};if(ios){selectInput=function(node){node.selectionStart=0;node.selectionEnd=node.value.length}}else{if(ie){selectInput=function(node){try{node.select()}catch(_e){}}}}function indexOf(array,elt){for(var i=0;i<array.length;++i){if(array[i]==elt){return i}}return -1}function map(array,f){var out=[];for(var i=0;i<array.length;i++){out[i]=f(array[i],i)}return out}function insertSorted(array,value,score){var pos=0,priority=score(value);while(pos<array.length&&score(array[pos])<=priority){pos++}array.splice(pos,0,value)}function nothing(){}function createObj(base,props){var inst;if(Object.create){inst=Object.create(base)}else{nothing.prototype=base;inst=new nothing()}if(props){copyObj(props,inst)}return inst}function copyObj(obj,target,overwrite){if(!target){target={}}for(var prop in obj){if(obj.hasOwnProperty(prop)&&(overwrite!==false||!target.hasOwnProperty(prop))){target[prop]=obj[prop]}}return target}function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var isWordCharBasic=CodeMirror.isWordChar=function(ch){return/\w/.test(ch)||ch>"\x80"&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))};function isWordChar(ch,helper){if(!helper){return isWordCharBasic(ch)}if(helper.source.indexOf("\\w")>-1&&isWordCharBasic(ch)){return true}return helper.test(ch)}function isEmpty(obj){for(var n in obj){if(obj.hasOwnProperty(n)&&obj[n]){return false}}return true}var extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isExtendingChar(ch){return ch.charCodeAt(0)>=768&&extendingChars.test(ch)}function elt(tag,content,className,style){var e=document.createElement(tag);if(className){e.className=className}if(style){e.style.cssText=style}if(typeof content=="string"){e.appendChild(document.createTextNode(content))}else{if(content){for(var i=0;i<content.length;++i){e.appendChild(content[i])}}}return e}var range;if(document.createRange){range=function(node,start,end,endNode){var r=document.createRange();r.setEnd(endNode||node,end);r.setStart(node,start);return r}}else{range=function(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode)}catch(e){return r}r.collapse(true);r.moveEnd("character",end);r.moveStart("character",start);return r}}function removeChildren(e){for(var count=e.childNodes.length;count>0;--count){e.removeChild(e.firstChild)}return e}function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}var contains=CodeMirror.contains=function(parent,child){if(child.nodeType==3){child=child.parentNode}if(parent.contains){return parent.contains(child)}do{if(child.nodeType==11){child=child.host}if(child==parent){return true}}while(child=child.parentNode)};function activeElt(){var activeElement=document.activeElement;while(activeElement&&activeElement.root&&activeElement.root.activeElement){activeElement=activeElement.root.activeElement}return activeElement}if(ie&&ie_version<11){activeElt=function(){try{return document.activeElement}catch(e){return document.body}}}function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*")}var rmClass=CodeMirror.rmClass=function(node,cls){var current=node.className;var match=classTest(cls).exec(current);if(match){var after=current.slice(match.index+match[0].length);node.className=current.slice(0,match.index)+(after?match[1]+after:"")}};var addClass=CodeMirror.addClass=function(node,cls){var current=node.className;if(!classTest(cls).test(current)){node.className+=(current?" ":"")+cls}};function joinClasses(a,b){var as=a.split(" ");for(var i=0;i<as.length;i++){if(as[i]&&!classTest(as[i]).test(b)){b+=" "+as[i]}}return b}function forEachCodeMirror(f){if(!document.body.getElementsByClassName){return}var byClass=document.body.getElementsByClassName("CodeMirror");for(var i=0;i<byClass.length;i++){var cm=byClass[i].CodeMirror;if(cm){f(cm)}}}var globalsRegistered=false;function ensureGlobalHandlers(){if(globalsRegistered){return}registerGlobalHandlers();globalsRegistered=true}function registerGlobalHandlers(){var resizeTimer;on(window,"resize",function(){if(resizeTimer==null){resizeTimer=setTimeout(function(){resizeTimer=null;forEachCodeMirror(onResize)},100)}});on(window,"blur",function(){forEachCodeMirror(onBlur)})}var dragAndDrop=function(){if(ie&&ie_version<9){return false}var div=elt("div");return"draggable" in div||"dragDrop" in div}();var zwspSupported;function zeroWidthElement(measure){if(zwspSupported==null){var test=elt("span","\u200b");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")]));if(measure.firstChild.offsetHeight!=0){zwspSupported=test.offsetWidth<=1&&test.offsetHeight>2&&!(ie&&ie_version<8)}}var node=zwspSupported?elt("span","\u200b"):elt("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");node.setAttribute("cm-text","");return node}var badBidiRects;function hasBadBidiRects(measure){if(badBidiRects!=null){return badBidiRects}var txt=removeChildrenAndAdd(measure,document.createTextNode("A\u062eA"));var r0=range(txt,0,1).getBoundingClientRect();var r1=range(txt,1,2).getBoundingClientRect();removeChildren(measure);if(!r0||r0.left==r0.right){return false}return badBidiRects=(r1.right-r0.right<3)}var splitLinesAuto=CodeMirror.splitLines="\n\nb".split(/\n/).length!=3?function(string){var pos=0,result=[],l=string.length;while(pos<=l){var nl=string.indexOf("\n",pos);if(nl==-1){nl=string.length}var line=string.slice(pos,string.charAt(nl-1)=="\r"?nl-1:nl);var rt=line.indexOf("\r");if(rt!=-1){result.push(line.slice(0,rt));pos+=rt+1}else{result.push(line);pos=nl+1}}return result}:function(string){return string.split(/\r\n?|\n/)};var hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return false}}:function(te){try{var range=te.ownerDocument.selection.createRange()}catch(e){}if(!range||range.parentElement()!=te){return false}return range.compareEndPoints("StartToEnd",range)!=0};var hasCopyEvent=(function(){var e=elt("div");if("oncopy" in e){return true}e.setAttribute("oncopy","return;");return typeof e.oncopy=="function"})();var badZoomedRects=null;function hasBadZoomedRects(measure){if(badZoomedRects!=null){return badZoomedRects}var node=removeChildrenAndAdd(measure,elt("span","x"));var normal=node.getBoundingClientRect();var fromRange=range(node,0,1).getBoundingClientRect();return badZoomedRects=Math.abs(normal.left-fromRange.left)>1}var keyNames=CodeMirror.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var i=0;i<10;i++){keyNames[i+48]=keyNames[i+96]=String(i)}for(var i=65;i<=90;i++){keyNames[i]=String.fromCharCode(i)}for(var i=1;i<=12;i++){keyNames[i+111]=keyNames[i+63235]="F"+i}})();function iterateBidiSections(order,from,to,f){if(!order){return f(from,to,"ltr")}var found=false;for(var i=0;i<order.length;++i){var part=order[i];if(part.from<to&&part.to>from||from==to&&part.to==from){f(Math.max(part.from,from),Math.min(part.to,to),part.level==1?"rtl":"ltr");found=true}}if(!found){f(from,to,"ltr")}}function bidiLeft(part){return part.level%2?part.to:part.from}function bidiRight(part){return part.level%2?part.from:part.to}function lineLeft(line){var order=getOrder(line);return order?bidiLeft(order[0]):0}function lineRight(line){var order=getOrder(line);if(!order){return line.text.length}return bidiRight(lst(order))}function lineStart(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLine(line);if(visual!=line){lineN=lineNo(visual)}var order=getOrder(visual);var ch=!order?0:order[0].level%2?lineRight(visual):lineLeft(visual);return Pos(lineN,ch)}function lineEnd(cm,lineN){var merged,line=getLine(cm.doc,lineN);while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line;lineN=null}var order=getOrder(line);var ch=!order?line.text.length:order[0].level%2?lineLeft(line):lineRight(line);return Pos(lineN==null?lineNo(line):lineN,ch)}function lineStartSmart(cm,pos){var start=lineStart(cm,pos.line);var line=getLine(cm.doc,start.line);var order=getOrder(line);if(!order||order[0].level==0){var firstNonWS=Math.max(0,line.text.search(/\S/));var inWS=pos.line==start.line&&pos.ch<=firstNonWS&&pos.ch;return Pos(start.line,inWS?0:firstNonWS)}return start}function compareBidiLevel(order,a,b){var linedir=order[0].level;if(a==linedir){return true}if(b==linedir){return false}return a<b}var bidiOther;function getBidiPartAt(order,pos){bidiOther=null;for(var i=0,found;i<order.length;++i){var cur=order[i];if(cur.from<pos&&cur.to>pos){return i}if((cur.from==pos||cur.to==pos)){if(found==null){found=i}else{if(compareBidiLevel(order,cur.level,order[found].level)){if(cur.from!=cur.to){bidiOther=found}return i}else{if(cur.from!=cur.to){bidiOther=i}return found}}}}return found}function moveInLine(line,pos,dir,byUnit){if(!byUnit){return pos+dir}do{pos+=dir}while(pos>0&&isExtendingChar(line.text.charAt(pos)));return pos}function moveVisually(line,start,dir,byUnit){var bidi=getOrder(line);if(!bidi){return moveLogically(line,start,dir,byUnit)}var pos=getBidiPartAt(bidi,start),part=bidi[pos];var target=moveInLine(line,start,part.level%2?-dir:dir,byUnit);for(;;){if(target>part.from&&target<part.to){return target}if(target==part.from||target==part.to){if(getBidiPartAt(bidi,target)==pos){return target}part=bidi[pos+=dir];return(dir>0)==part.level%2?part.to:part.from}else{part=bidi[pos+=dir];if(!part){return null}if((dir>0)==part.level%2){target=moveInLine(line,part.to,-1,byUnit)}else{target=moveInLine(line,part.from,1,byUnit)}}}}function moveLogically(line,start,dir,byUnit){var target=start+dir;if(byUnit){while(target>0&&isExtendingChar(line.text.charAt(target))){target+=dir}}return target<0||target>line.text.length?null:target}var bidiOrdering=(function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var arabicTypes="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function charType(code){if(code<=247){return lowTypes.charAt(code)}else{if(1424<=code&&code<=1524){return"R"}else{if(1536<=code&&code<=1773){return arabicTypes.charAt(code-1536)}else{if(1774<=code&&code<=2220){return"r"}else{if(8192<=code&&code<=8203){return"w"}else{if(code==8204){return"b"}else{return"L"}}}}}}}var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;var outerType="L";function BidiSpan(level,from,to){this.level=level;this.from=from;this.to=to}return function(str){if(!bidiRE.test(str)){return false}var len=str.length,types=[];for(var i=0,type;i<len;++i){types.push(type=charType(str.charCodeAt(i)))}for(var i=0,prev=outerType;i<len;++i){var type=types[i];if(type=="m"){types[i]=prev}else{prev=type}}for(var i=0,cur=outerType;i<len;++i){var type=types[i];if(type=="1"&&cur=="r"){types[i]="n"}else{if(isStrong.test(type)){cur=type;if(type=="r"){types[i]="R"}}}}for(var i=1,prev=types[0];i<len-1;++i){var type=types[i];if(type=="+"&&prev=="1"&&types[i+1]=="1"){types[i]="1"}else{if(type==","&&prev==types[i+1]&&(prev=="1"||prev=="n")){types[i]=prev}}prev=type}for(var i=0;i<len;++i){var type=types[i];if(type==","){types[i]="N"}else{if(type=="%"){for(var end=i+1;end<len&&types[end]=="%";++end){}var replace=(i&&types[i-1]=="!")||(end<len&&types[end]=="1")?"1":"N";for(var j=i;j<end;++j){types[j]=replace}i=end-1}}}for(var i=0,cur=outerType;i<len;++i){var type=types[i];if(cur=="L"&&type=="1"){types[i]="L"}else{if(isStrong.test(type)){cur=type}}}for(var i=0;i<len;++i){if(isNeutral.test(types[i])){for(var end=i+1;end<len&&isNeutral.test(types[end]);++end){}var before=(i?types[i-1]:outerType)=="L";var after=(end<len?types[end]:outerType)=="L";var replace=before||after?"L":"R";for(var j=i;j<end;++j){types[j]=replace}i=end-1}}var order=[],m;for(var i=0;i<len;){if(countsAsLeft.test(types[i])){var start=i;for(++i;i<len&&countsAsLeft.test(types[i]);++i){}order.push(new BidiSpan(0,start,i))}else{var pos=i,at=order.length;for(++i;i<len&&types[i]!="L";++i){}for(var j=pos;j<i;){if(countsAsNum.test(types[j])){if(pos<j){order.splice(at,0,new BidiSpan(1,pos,j))}var nstart=j;for(++j;j<i&&countsAsNum.test(types[j]);++j){}order.splice(at,0,new BidiSpan(2,nstart,j));pos=j}else{++j}}if(pos<i){order.splice(at,0,new BidiSpan(1,pos,i))}}}if(order[0].level==1&&(m=str.match(/^\s+/))){order[0].from=m[0].length;order.unshift(new BidiSpan(0,0,m[0].length))}if(lst(order).level==1&&(m=str.match(/\s+$/))){lst(order).to-=m[0].length;order.push(new BidiSpan(0,len-m[0].length,len))}if(order[0].level==2){order.unshift(new BidiSpan(1,order[0].to,order[0].to))}if(order[0].level!=lst(order).level){order.push(new BidiSpan(order[0].level,len,len))}return order}})();CodeMirror.version="5.18.2";return CodeMirror});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod)}else{mod(CodeMirror)}}})(function(CodeMirror){CodeMirror.defineMode("lua",function(config,parserConfig){var indentUnit=config.indentUnit;function prefixRE(words){return new RegExp("^(?:"+words.join("|")+")","i")}function wordRE(words){return new RegExp("^(?:"+words.join("|")+")$","i")}var specials=wordRE(parserConfig.specials||[]);var builtins=wordRE(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]);var keywords=wordRE(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]);var indentTokens=wordRE(["function","if","repeat","do","\\(","{"]);var dedentTokens=wordRE(["end","until","\\)","}"]);var dedentPartial=prefixRE(["end","until","\\)","}","else","elseif"]);function readBracket(stream){var level=0;while(stream.eat("=")){++level}stream.eat("[");return level}function normal(stream,state){var ch=stream.next();if(ch=="-"&&stream.eat("-")){if(stream.eat("[")&&stream.eat("[")){return(state.cur=bracketed(readBracket(stream),"comment"))(stream,state)}stream.skipToEnd();return"comment"}if(ch=='"'||ch=="'"){return(state.cur=string(ch))(stream,state)}if(ch=="["&&/[\[=]/.test(stream.peek())){return(state.cur=bracketed(readBracket(stream),"string"))(stream,state)}if(/\d/.test(ch)){stream.eatWhile(/[\w.%]/);return"number"}if(/[\w_]/.test(ch)){stream.eatWhile(/[\w\\\-_.]/);return"variable"}return null}function bracketed(level,style){return function(stream,state){var curlev=null,ch;while((ch=stream.next())!=null){if(curlev==null){if(ch=="]"){curlev=0}}else{if(ch=="="){++curlev}else{if(ch=="]"&&curlev==level){state.cur=normal;break}else{curlev=null}}}}return style}}function string(quote){return function(stream,state){var escaped=false,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){break}escaped=!escaped&&ch=="\\"}if(!escaped){state.cur=normal}return"string"}}return{startState:function(basecol){return{basecol:basecol||0,indentDepth:0,cur:normal}},token:function(stream,state){if(stream.eatSpace()){return null}var style=state.cur(stream,state);var word=stream.current();if(style=="variable"){if(keywords.test(word)){style="keyword"}else{if(builtins.test(word)){style="builtin"}else{if(specials.test(word)){style="variable-2"}}}}if((style!="comment")&&(style!="string")){if(indentTokens.test(word)){++state.indentDepth}else{if(dedentTokens.test(word)){--state.indentDepth}}}return style},indent:function(state,textAfter){var closing=dedentPartial.test(textAfter);return state.basecol+indentUnit*(state.indentDepth-(closing?1:0))},lineComment:"--",blockCommentStart:"--[[",blockCommentEnd:"]]"}});CodeMirror.defineMIME("text/x-lua","lua")});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod)}else{mod(CodeMirror)}}})(function(CodeMirror){var WRAP_CLASS="CodeMirror-activeline";var BACK_CLASS="CodeMirror-activeline-background";var GUTT_CLASS="CodeMirror-activeline-gutter";CodeMirror.defineOption("styleActiveLine",false,function(cm,val,old){var prev=old&&old!=CodeMirror.Init;if(val&&!prev){cm.state.activeLines=[];updateActiveLines(cm,cm.listSelections());cm.on("beforeSelectionChange",selectionChange)}else{if(!val&&prev){cm.off("beforeSelectionChange",selectionChange);clearActiveLines(cm);delete cm.state.activeLines}}});function clearActiveLines(cm){for(var i=0;i<cm.state.activeLines.length;i++){cm.removeLineClass(cm.state.activeLines[i],"wrap",WRAP_CLASS);cm.removeLineClass(cm.state.activeLines[i],"background",BACK_CLASS);cm.removeLineClass(cm.state.activeLines[i],"gutter",GUTT_CLASS)}}function sameArray(a,b){if(a.length!=b.length){return false}for(var i=0;i<a.length;i++){if(a[i]!=b[i]){return false}}return true}function updateActiveLines(cm,ranges){var active=[];for(var i=0;i<ranges.length;i++){var range=ranges[i];if(!range.empty()){continue}var line=cm.getLineHandleVisualStart(range.head.line);if(active[active.length-1]!=line){active.push(line)}}if(sameArray(cm.state.activeLines,active)){return}cm.operation(function(){clearActiveLines(cm);for(var i=0;i<active.length;i++){cm.addLineClass(active[i],"wrap",WRAP_CLASS);cm.addLineClass(active[i],"background",BACK_CLASS);cm.addLineClass(active[i],"gutter",GUTT_CLASS)}cm.state.activeLines=active})}function selectionChange(cm,sel){updateActiveLines(cm,sel.ranges)}});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod)}else{mod(CodeMirror)}}})(function(CodeMirror){var ie_lt8=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var Pos=CodeMirror.Pos;var matching={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function findMatchingBracket(cm,where,strict,config){var line=cm.getLineHandle(where.line),pos=where.ch-1;var match=(pos>=0&&matching[line.text.charAt(pos)])||matching[line.text.charAt(++pos)];if(!match){return null}var dir=match.charAt(1)==">"?1:-1;if(strict&&(dir>0)!=(pos==where.ch)){return null}var style=cm.getTokenTypeAt(Pos(where.line,pos+1));var found=scanForBracket(cm,Pos(where.line,pos+(dir>0?1:0)),dir,style||null,config);if(found==null){return null}return{from:Pos(where.line,pos),to:found&&found.pos,match:found&&found.ch==match.charAt(0),forward:dir>0}}function scanForBracket(cm,where,dir,style,config){var maxScanLen=(config&&config.maxScanLineLength)||10000;var maxScanLines=(config&&config.maxScanLines)||1000;var stack=[];var re=config&&config.bracketRegex?config.bracketRegex:/[(){}[\]]/;var lineEnd=dir>0?Math.min(where.line+maxScanLines,cm.lastLine()+1):Math.max(cm.firstLine()-1,where.line-maxScanLines);for(var lineNo=where.line;lineNo!=lineEnd;lineNo+=dir){var line=cm.getLine(lineNo);if(!line){continue}var pos=dir>0?0:line.length-1,end=dir>0?line.length:-1;if(line.length>maxScanLen){continue}if(lineNo==where.line){pos=where.ch-(dir<0?1:0)}for(;pos!=end;pos+=dir){var ch=line.charAt(pos);if(re.test(ch)&&(style===undefined||cm.getTokenTypeAt(Pos(lineNo,pos+1))==style)){var match=matching[ch];if((match.charAt(1)==">")==(dir>0)){stack.push(ch)}else{if(!stack.length){return{pos:Pos(lineNo,pos),ch:ch}}else{stack.pop()}}}}}return lineNo-dir==(dir>0?cm.lastLine():cm.firstLine())?false:null}function matchBrackets(cm,autoclear,config){var maxHighlightLen=cm.state.matchBrackets.maxHighlightLineLength||1000;var marks=[],ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){var match=ranges[i].empty()&&findMatchingBracket(cm,ranges[i].head,false,config);if(match&&cm.getLine(match.from.line).length<=maxHighlightLen){var style=match.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";marks.push(cm.markText(match.from,Pos(match.from.line,match.from.ch+1),{className:style}));if(match.to&&cm.getLine(match.to.line).length<=maxHighlightLen){marks.push(cm.markText(match.to,Pos(match.to.line,match.to.ch+1),{className:style}))}}}if(marks.length){if(ie_lt8&&cm.state.focused){cm.focus()}var clear=function(){cm.operation(function(){for(var i=0;i<marks.length;i++){marks[i].clear()}})};if(autoclear){setTimeout(clear,800)}else{return clear}}}var currentlyHighlighted=null;function doMatchBrackets(cm){cm.operation(function(){if(currentlyHighlighted){currentlyHighlighted();currentlyHighlighted=null}currentlyHighlighted=matchBrackets(cm,false,cm.state.matchBrackets)})}CodeMirror.defineOption("matchBrackets",false,function(cm,val,old){if(old&&old!=CodeMirror.Init){cm.off("cursorActivity",doMatchBrackets);if(currentlyHighlighted){currentlyHighlighted();currentlyHighlighted=null}}if(val){cm.state.matchBrackets=typeof val=="object"?val:{};cm.on("cursorActivity",doMatchBrackets)}});CodeMirror.defineExtension("matchBrackets",function(){matchBrackets(this,true)});CodeMirror.defineExtension("findMatchingBracket",function(pos,strict,config){return findMatchingBracket(this,pos,strict,config)});CodeMirror.defineExtension("scanForBracket",function(pos,dir,style,config){return scanForBracket(this,pos,dir,style,config)})});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod)}else{mod(CodeMirror)}}})(function(CodeMirror){var HINT_ELEMENT_CLASS="CodeMirror-hint";var ACTIVE_HINT_ELEMENT_CLASS="CodeMirror-hint-active";CodeMirror.showHint=function(cm,getHints,options){if(!getHints){return cm.showHint(options)}if(options&&options.async){getHints.async=true}var newOpts={hint:getHints};if(options){for(var prop in options){newOpts[prop]=options[prop]}}return cm.showHint(newOpts)};CodeMirror.defineExtension("showHint",function(options){options=parseOptions(this,this.getCursor("start"),options);var selections=this.listSelections();if(selections.length>1){return}if(this.somethingSelected()){if(!options.hint.supportsSelection){return}for(var i=0;i<selections.length;i++){if(selections[i].head.line!=selections[i].anchor.line){return}}}if(this.state.completionActive){this.state.completionActive.close()}var completion=this.state.completionActive=new Completion(this,options);if(!completion.options.hint){return}CodeMirror.signal(this,"startCompletion",this);completion.update(true)});function Completion(cm,options){this.cm=cm;this.options=options;this.widget=null;this.debounce=0;this.tick=0;this.startPos=this.cm.getCursor("start");this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var self=this;cm.on("cursorActivity",this.activityFunc=function(){self.cursorActivity()})}var requestAnimationFrame=window.requestAnimationFrame||function(fn){return setTimeout(fn,1000/60)};var cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout;Completion.prototype={close:function(){if(!this.active()){return}this.cm.state.completionActive=null;this.tick=null;this.cm.off("cursorActivity",this.activityFunc);if(this.widget&&this.data){CodeMirror.signal(this.data,"close")}if(this.widget){this.widget.close()}CodeMirror.signal(this.cm,"endCompletion",this.cm)},active:function(){return this.cm.state.completionActive==this},pick:function(data,i){var completion=data.list[i];if(completion.hint){completion.hint(this.cm,data,completion)}else{this.cm.replaceRange(getText(completion),completion.from||data.from,completion.to||data.to,"complete")}CodeMirror.signal(data,"pick",completion);this.close()},cursorActivity:function(){if(this.debounce){cancelAnimationFrame(this.debounce);this.debounce=0}var pos=this.cm.getCursor(),line=this.cm.getLine(pos.line);if(pos.line!=this.startPos.line||line.length-pos.ch!=this.startLen-this.startPos.ch||pos.ch<this.startPos.ch||this.cm.somethingSelected()||(pos.ch&&this.options.closeCharacters.test(line.charAt(pos.ch-1)))){this.close()}else{var self=this;this.debounce=requestAnimationFrame(function(){self.update()});if(this.widget){this.widget.disable()}}},update:function(first){if(this.tick==null){return}var self=this,myTick=++this.tick;fetchHints(this.options.hint,this.cm,this.options,function(data){if(self.tick==myTick){self.finishUpdate(data,first)}})},finishUpdate:function(data,first){if(this.data){CodeMirror.signal(this.data,"update")}var picked=(this.widget&&this.widget.picked)||(first&&this.options.completeSingle);if(this.widget){this.widget.close()}if(data&&this.data&&isNewCompletion(this.data,data)){return}this.data=data;if(data&&data.list.length){if(picked&&data.list.length==1){this.pick(data,0)}else{this.widget=new Widget(this,data);CodeMirror.signal(data,"shown")}}}};function isNewCompletion(old,nw){var moved=CodeMirror.cmpPos(nw.from,old.from);return moved>0&&old.to.ch-old.from.ch!=nw.to.ch-nw.from.ch}function parseOptions(cm,pos,options){var editor=cm.options.hintOptions;var out={};for(var prop in defaultOptions){out[prop]=defaultOptions[prop]}if(editor){for(var prop in editor){if(editor[prop]!==undefined){out[prop]=editor[prop]}}}if(options){for(var prop in options){if(options[prop]!==undefined){out[prop]=options[prop]}}}if(out.hint.resolve){out.hint=out.hint.resolve(cm,pos)}return out}function getText(completion){if(typeof completion=="string"){return completion}else{return completion.text}}function buildKeyMap(completion,handle){var baseMap={Up:function(){handle.moveFocus(-1)},Down:function(){handle.moveFocus(1)},PageUp:function(){handle.moveFocus(-handle.menuSize()+1,true)},PageDown:function(){handle.moveFocus(handle.menuSize()-1,true)},Home:function(){handle.setFocus(0)},End:function(){handle.setFocus(handle.length-1)},Enter:handle.pick,Tab:handle.pick,Esc:handle.close};var custom=completion.options.customKeys;var ourMap=custom?{}:baseMap;function addBinding(key,val){var bound;if(typeof val!="string"){bound=function(cm){return val(cm,handle)}}else{if(baseMap.hasOwnProperty(val)){bound=baseMap[val]}else{bound=val}}ourMap[key]=bound}if(custom){for(var key in custom){if(custom.hasOwnProperty(key)){addBinding(key,custom[key])}}}var extra=completion.options.extraKeys;if(extra){for(var key in extra){if(extra.hasOwnProperty(key)){addBinding(key,extra[key])}}}return ourMap}function getHintElement(hintsElement,el){while(el&&el!=hintsElement){if(el.nodeName.toUpperCase()==="LI"&&el.parentNode==hintsElement){return el}el=el.parentNode}}function Widget(completion,data){this.completion=completion;this.data=data;this.picked=false;var widget=this,cm=completion.cm;var hints=this.hints=document.createElement("ul");hints.className="CodeMirror-hints";this.selectedHint=data.selectedHint||0;var completions=data.list;for(var i=0;i<completions.length;++i){var elt=hints.appendChild(document.createElement("li")),cur=completions[i];var className=HINT_ELEMENT_CLASS+(i!=this.selectedHint?"":" "+ACTIVE_HINT_ELEMENT_CLASS);if(cur.className!=null){className=cur.className+" "+className}elt.className=className;if(cur.render){cur.render(elt,data,cur)}else{elt.appendChild(document.createTextNode(cur.displayText||getText(cur)))}elt.hintId=i}var pos=cm.cursorCoords(completion.options.alignWithWord?data.from:null);var left=pos.left,top=pos.bottom,below=true;hints.style.left=left+"px";hints.style.top=top+"px";hints.style.zIndex=999999;var winW=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);var winH=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(completion.options.container||document.body).appendChild(hints);var box=hints.getBoundingClientRect(),overlapY=box.bottom-winH;var scrolls=hints.scrollHeight>hints.clientHeight+1;var startScroll=cm.getScrollInfo();if(overlapY>0){var height=box.bottom-box.top,curTop=pos.top-(pos.bottom-box.top);if(curTop-height>0){hints.style.top=(top=pos.top-height)+"px";below=false}else{if(height>winH){hints.style.height=(winH-5)+"px";hints.style.top=(top=pos.bottom-box.top)+"px";var cursor=cm.getCursor();if(data.from.ch!=cursor.ch){pos=cm.cursorCoords(cursor);hints.style.left=(left=pos.left)+"px";box=hints.getBoundingClientRect()}}}}var overlapX=box.right-winW;if(overlapX>0){if(box.right-box.left>winW){hints.style.width=(winW-5)+"px";overlapX-=(box.right-box.left)-winW}hints.style.left=(left=pos.left-overlapX)+"px"}if(scrolls){for(var node=hints.firstChild;node;node=node.nextSibling){node.style.paddingRight=cm.display.nativeBarWidth+"px"}}cm.addKeyMap(this.keyMap=buildKeyMap(completion,{moveFocus:function(n,avoidWrap){widget.changeActive(widget.selectedHint+n,avoidWrap)},setFocus:function(n){widget.changeActive(n)},menuSize:function(){return widget.screenAmount()},length:completions.length,close:function(){completion.close()},pick:function(){widget.pick()},data:data}));if(completion.options.closeOnUnfocus){var closingOnBlur;cm.on("blur",this.onBlur=function(){closingOnBlur=setTimeout(function(){completion.close()},100)});cm.on("focus",this.onFocus=function(){clearTimeout(closingOnBlur)})}cm.on("scroll",this.onScroll=function(){var curScroll=cm.getScrollInfo(),editor=cm.getWrapperElement().getBoundingClientRect();var newTop=top+startScroll.top-curScroll.top;var point=newTop-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(!below){point+=hints.offsetHeight}if(point<=editor.top||point>=editor.bottom){return completion.close()}hints.style.top=newTop+"px";hints.style.left=(left+startScroll.left-curScroll.left)+"px"});CodeMirror.on(hints,"dblclick",function(e){var t=getHintElement(hints,e.target||e.srcElement);if(t&&t.hintId!=null){widget.changeActive(t.hintId);widget.pick()}});CodeMirror.on(hints,"click",function(e){var t=getHintElement(hints,e.target||e.srcElement);if(t&&t.hintId!=null){widget.changeActive(t.hintId);if(completion.options.completeOnSingleClick){widget.pick()}}});CodeMirror.on(hints,"mousedown",function(){setTimeout(function(){cm.focus()},20)});CodeMirror.signal(data,"select",completions[0],hints.firstChild);return true}Widget.prototype={close:function(){if(this.completion.widget!=this){return}this.completion.widget=null;this.hints.parentNode.removeChild(this.hints);this.completion.cm.removeKeyMap(this.keyMap);var cm=this.completion.cm;if(this.completion.options.closeOnUnfocus){cm.off("blur",this.onBlur);cm.off("focus",this.onFocus)}cm.off("scroll",this.onScroll)},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var widget=this;this.keyMap={Enter:function(){widget.picked=true}};this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(i,avoidWrap){if(i>=this.data.list.length){i=avoidWrap?this.data.list.length-1:0}else{if(i<0){i=avoidWrap?0:this.data.list.length-1}}if(this.selectedHint==i){return}var node=this.hints.childNodes[this.selectedHint];node.className=node.className.replace(" "+ACTIVE_HINT_ELEMENT_CLASS,"");node=this.hints.childNodes[this.selectedHint=i];node.className+=" "+ACTIVE_HINT_ELEMENT_CLASS;if(node.offsetTop<this.hints.scrollTop){this.hints.scrollTop=node.offsetTop-3}else{if(node.offsetTop+node.offsetHeight>this.hints.scrollTop+this.hints.clientHeight){this.hints.scrollTop=node.offsetTop+node.offsetHeight-this.hints.clientHeight+3}}CodeMirror.signal(this.data,"select",this.data.list[this.selectedHint],node)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}};function applicableHelpers(cm,helpers){if(!cm.somethingSelected()){return helpers}var result=[];for(var i=0;i<helpers.length;i++){if(helpers[i].supportsSelection){result.push(helpers[i])}}return result}function fetchHints(hint,cm,options,callback){if(hint.async){hint(cm,callback,options)}else{var result=hint(cm,options);if(result&&result.then){result.then(callback)}else{callback(result)}}}function resolveAutoHints(cm,pos){var helpers=cm.getHelpers(pos,"hint"),words;if(helpers.length){var resolved=function(cm,callback,options){var app=applicableHelpers(cm,helpers);function run(i){if(i==app.length){return callback(null)}fetchHints(app[i],cm,options,function(result){if(result&&result.list.length>0){callback(result)}else{run(i+1)}})}run(0)};resolved.async=true;resolved.supportsSelection=true;return resolved}else{if(words=cm.getHelper(cm.getCursor(),"hintWords")){return function(cm){return CodeMirror.hint.fromList(cm,{words:words})}}else{if(CodeMirror.hint.anyword){return function(cm,options){return CodeMirror.hint.anyword(cm,options)}}else{return function(){}}}}}CodeMirror.registerHelper("hint","auto",{resolve:resolveAutoHints});CodeMirror.registerHelper("hint","fromList",function(cm,options){var cur=cm.getCursor(),token=cm.getTokenAt(cur);var to=CodeMirror.Pos(cur.line,token.end);if(token.string&&/\w/.test(token.string[token.string.length-1])){var term=token.string,from=CodeMirror.Pos(cur.line,token.start)}else{var term="",from=to}var found=[];for(var i=0;i<options.words.length;i++){var word=options.words[i];if(word.slice(0,term.length)==term){found.push(word)}}if(found.length){return{list:found,from:from,to:to}}});CodeMirror.commands.autocomplete=CodeMirror.showHint;var defaultOptions={hint:CodeMirror.hint.auto,completeSingle:true,alignWithWord:true,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:true,completeOnSingleClick:true,container:null,customKeys:null,extraKeys:null};CodeMirror.defineOption("hintOptions",null)});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod)}else{mod(CodeMirror)}}})(function(CodeMirror){var WORD=/[.:\w$]+/,RANGE=500;var luaList=["math.abs()","math.acos()","math.asin()","math.atan()","math.ceil()","math.cos()","math.deg()","math.exp()","math.floor()","math.fmod()","math.huge()","math.log()","math.max()","math.maxinteger()","math.min()","math.mininteger()","math.modf()","math.pi()","math.rad()","math.random()","math.randomseed()","math.sin()","math.sqrt()","math.tan()","math.tointeger()","math.type()","math.ult()","os.clock()","os.date()","os.difftime()","os.execute()","os.exit()","os.getenv()","os.remove()","os.rename()","os.setlocale()","os.time()","os.tmpname()","data[]","global[]",":setValueNoCorrect()",":setNoPresent()",":setDeratingWarning()",":setDeratingAlarm()",":setNoScanned()",":setManual()",":setSlaveSend()",":setSubstitution()",":setSrcNoCorrect()",":setDevNoCorrect()",":isValueNoCorrect()",":isNoPresent()",":isDeratingWarning()",":isDeratingAlarm()",":isNoScanned()",":isManual()",":isSlaveSend()",":isSubstitution()",":isSrcNoCorrect()",":isDevNoCorrect()",":set()",":setStatus()",":setValue()",":update()",":setControl()",":getStatus()",":getValue()"].sort();CodeMirror.registerHelper("hint","lua",function(editor,options){var word=options&&options.word||WORD;var range=options&&options.range||RANGE;var cur=editor.getCursor(),curLine=editor.getLine(cur.line);var end=cur.ch,start=end;while(start&&word.test(curLine.charAt(start-1))){--start}var curWord=start!=end&&curLine.slice(start,end);var myList=[];if(curWord){for(var i in luaList){if(luaList[i].indexOf(curWord)===0){myList.push(luaList[i])}}}else{myList=luaList}return{list:myList,from:CodeMirror.Pos(cur.line,start),to:CodeMirror.Pos(cur.line,end)}})});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod)}else{mod(CodeMirror)}}})(function(CodeMirror){function expressionAllowed(stream,state,backUp){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(state.lastType)||(state.lastType=="quasi"&&/\{\s*$/.test(stream.string.slice(0,stream.pos-(backUp||0))))}CodeMirror.defineMode("javascript",function(config,parserConfig){var indentUnit=config.indentUnit;var statementIndent=parserConfig.statementIndent;var jsonldMode=parserConfig.jsonld;var jsonMode=parserConfig.json||jsonldMode;var isTS=parserConfig.typescript;var wordRE=parserConfig.wordCharacters||/[\w$\xa1-\uffff]/;var keywords=function(){function kw(type){return{type:type,style:"keyword"}}var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c");var operator=kw("operator"),atom={type:"atom",style:"atom"};var jsKeywords={"if":kw("if"),"while":A,"with":A,"else":B,"do":B,"try":B,"finally":B,"return":C,"break":C,"continue":C,"new":kw("new"),"delete":C,"throw":C,"debugger":C,"var":kw("var"),"const":kw("var"),let:kw("var"),"function":kw("function"),"catch":kw("catch"),"for":kw("for"),"switch":kw("switch"),"case":kw("case"),"default":kw("default"),"in":operator,"typeof":operator,"instanceof":operator,"true":atom,"false":atom,"null":atom,"undefined":atom,"NaN":atom,"Infinity":atom,"this":kw("this"),"class":kw("class"),"super":kw("atom"),yield:C,"export":kw("export"),"import":kw("import"),"extends":C,await:C,async:kw("async")};if(isTS){var type={type:"variable",style:"variable-3"};var tsKeywords={"interface":kw("class"),"implements":C,namespace:C,module:kw("module"),"enum":kw("module"),"public":kw("modifier"),"private":kw("modifier"),"protected":kw("modifier"),"abstract":kw("modifier"),as:operator,string:type,number:type,"boolean":type,any:type};for(var attr in tsKeywords){jsKeywords[attr]=tsKeywords[attr]}}return jsKeywords}();var isOperatorChar=/[+\-*&%=<>!?|~^]/;var isJsonldKeyword=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function readRegexp(stream){var escaped=false,next,inSet=false;while((next=stream.next())!=null){if(!escaped){if(next=="/"&&!inSet){return}if(next=="["){inSet=true}else{if(inSet&&next=="]"){inSet=false}}}escaped=!escaped&&next=="\\"}}var type,content;function ret(tp,style,cont){type=tp;content=cont;return style}function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else{if(ch=="."&&stream.match(/^\d+(?:[eE][+\-]?\d+)?/)){return ret("number","number")}else{if(ch=="."&&stream.match("..")){return ret("spread","meta")}else{if(/[\[\]{}\(\),;\:\.]/.test(ch)){return ret(ch)}else{if(ch=="="&&stream.eat(">")){return ret("=>","operator")}else{if(ch=="0"&&stream.eat(/x/i)){stream.eatWhile(/[\da-f]/i);return ret("number","number")}else{if(ch=="0"&&stream.eat(/o/i)){stream.eatWhile(/[0-7]/i);return ret("number","number")}else{if(ch=="0"&&stream.eat(/b/i)){stream.eatWhile(/[01]/i);return ret("number","number")}else{if(/\d/.test(ch)){stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return ret("number","number")}else{if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}else{if(stream.eat("/")){stream.skipToEnd();return ret("comment","comment")}else{if(expressionAllowed(stream,state,1)){readRegexp(stream);stream.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return ret("regexp","string-2")}else{stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current())}}}}else{if(ch=="`"){state.tokenize=tokenQuasi;return tokenQuasi(stream,state)}else{if(ch=="#"){stream.skipToEnd();return ret("error","error")}else{if(isOperatorChar.test(ch)){stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current())}else{if(wordRE.test(ch)){stream.eatWhile(wordRE);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return(known&&state.lastType!=".")?ret(known.type,known.style,word):ret("variable","variable",word)}}}}}}}}}}}}}}}function tokenString(quote){return function(stream,state){var escaped=false,next;if(jsonldMode&&stream.peek()=="@"&&stream.match(isJsonldKeyword)){state.tokenize=tokenBase;return ret("jsonld-keyword","meta")}while((next=stream.next())!=null){if(next==quote&&!escaped){break}escaped=!escaped&&next=="\\"}if(!escaped){state.tokenize=tokenBase}return ret("string","string")}}function tokenComment(stream,state){var maybeEnd=false,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}maybeEnd=(ch=="*")}return ret("comment","comment")}function tokenQuasi(stream,state){var escaped=false,next;while((next=stream.next())!=null){if(!escaped&&(next=="`"||next=="$"&&stream.eat("{"))){state.tokenize=tokenBase;break}escaped=!escaped&&next=="\\"}return ret("quasi","string-2",stream.current())}var brackets="([{}])";function findFatArrow(stream,state){if(state.fatArrowAt){state.fatArrowAt=null}var arrow=stream.string.indexOf("=>",stream.start);if(arrow<0){return}var depth=0,sawSomething=false;for(var pos=arrow-1;pos>=0;--pos){var ch=stream.string.charAt(pos);var bracket=brackets.indexOf(ch);if(bracket>=0&&bracket<3){if(!depth){++pos;break}if(--depth==0){if(ch=="("){sawSomething=true}break}}else{if(bracket>=3&&bracket<6){++depth}else{if(wordRE.test(ch)){sawSomething=true}else{if(/["'\/]/.test(ch)){return}else{if(sawSomething&&!depth){++pos;break}}}}}}if(sawSomething&&!depth){state.fatArrowAt=pos}}var atomicTypes={atom:true,number:true,variable:true,string:true,regexp:true,"this":true,"jsonld-keyword":true};function JSLexical(indented,column,type,align,prev,info){this.indented=indented;this.column=column;this.type=type;this.prev=prev;this.info=info;if(align!=null){this.align=align}}function inScope(state,varname){for(var v=state.localVars;v;v=v.next){if(v.name==varname){return true}}for(var cx=state.context;cx;cx=cx.prev){for(var v=cx.vars;v;v=v.next){if(v.name==varname){return true}}}}function parseJS(state,style,type,content,stream){var cc=state.cc;cx.state=state;cx.stream=stream;cx.marked=null,cx.cc=cc;cx.style=style;if(!state.lexical.hasOwnProperty("align")){state.lexical.align=true}while(true){var combinator=cc.length?cc.pop():jsonMode?expression:statement;if(combinator(type,content)){while(cc.length&&cc[cc.length-1].lex){cc.pop()()}if(cx.marked){return cx.marked}if(type=="variable"&&inScope(state,content)){return"variable-2"}return style}}}var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;i>=0;i--){cx.cc.push(arguments[i])}}function cont(){pass.apply(null,arguments);return true}function register(varname){function inList(list){for(var v=list;v;v=v.next){if(v.name==varname){return true}}return false}var state=cx.state;cx.marked="def";if(state.context){if(inList(state.localVars)){return}state.localVars={name:varname,next:state.localVars}}else{if(inList(state.globalVars)){return}if(parserConfig.globalVars){state.globalVars={name:varname,next:state.globalVars}}}}var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars};cx.state.localVars=defaultVars}function popcontext(){cx.state.localVars=cx.state.context.vars;cx.state.context=cx.state.context.prev}function pushlex(type,info){var result=function(){var state=cx.state,indent=state.indented;if(state.lexical.type=="stat"){indent=state.lexical.indented}else{for(var outer=state.lexical;outer&&outer.type==")"&&outer.align;outer=outer.prev){indent=outer.indented}}state.lexical=new JSLexical(indent,cx.stream.column(),type,null,state.lexical,info)};result.lex=true;return result}function poplex(){var state=cx.state;if(state.lexical.prev){if(state.lexical.type==")"){state.indented=state.lexical.indented}state.lexical=state.lexical.prev}}poplex.lex=true;function expect(wanted){function exp(type){if(type==wanted){return cont()}else{if(wanted==";"){return pass()}else{return cont(exp)}}}return exp}function statement(type,value){if(type=="var"){return cont(pushlex("vardef",value.length),vardef,expect(";"),poplex)}if(type=="keyword a"){return cont(pushlex("form"),expression,statement,poplex)}if(type=="keyword b"){return cont(pushlex("form"),statement,poplex)}if(type=="{"){return cont(pushlex("}"),block,poplex)}if(type==";"){return cont()}if(type=="if"){if(cx.state.lexical.info=="else"&&cx.state.cc[cx.state.cc.length-1]==poplex){cx.state.cc.pop()()}return cont(pushlex("form"),expression,statement,poplex,maybeelse)}if(type=="function"){return cont(functiondef)}if(type=="for"){return cont(pushlex("form"),forspec,statement,poplex)}if(type=="variable"){return cont(pushlex("stat"),maybelabel)}if(type=="switch"){return cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex)}if(type=="case"){return cont(expression,expect(":"))}if(type=="default"){return cont(expect(":"))}if(type=="catch"){return cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext)}if(type=="class"){return cont(pushlex("form"),className,poplex)}if(type=="export"){return cont(pushlex("stat"),afterExport,poplex)}if(type=="import"){return cont(pushlex("stat"),afterImport,poplex)}if(type=="module"){return cont(pushlex("form"),pattern,pushlex("}"),expect("{"),block,poplex,poplex)}if(type=="async"){return cont(statement)}return pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(type){return expressionInner(type,false)}function expressionNoComma(type){return expressionInner(type,true)}function expressionInner(type,noComma){if(cx.state.fatArrowAt==cx.stream.start){var body=noComma?arrowBodyNoComma:arrowBody;if(type=="("){return cont(pushcontext,pushlex(")"),commasep(pattern,")"),poplex,expect("=>"),body,popcontext)}else{if(type=="variable"){return pass(pushcontext,pattern,expect("=>"),body,popcontext)}}}var maybeop=noComma?maybeoperatorNoComma:maybeoperatorComma;if(atomicTypes.hasOwnProperty(type)){return cont(maybeop)}if(type=="function"){return cont(functiondef,maybeop)}if(type=="keyword c"||type=="async"){return cont(noComma?maybeexpressionNoComma:maybeexpression)}if(type=="("){return cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeop)}if(type=="operator"||type=="spread"){return cont(noComma?expressionNoComma:expression)}if(type=="["){return cont(pushlex("]"),arrayLiteral,poplex,maybeop)}if(type=="{"){return contCommasep(objprop,"}",null,maybeop)}if(type=="quasi"){return pass(quasi,maybeop)}if(type=="new"){return cont(maybeTarget(noComma))}return cont()}function maybeexpression(type){if(type.match(/[;\}\)\],]/)){return pass()}return pass(expression)}function maybeexpressionNoComma(type){if(type.match(/[;\}\)\],]/)){return pass()}return pass(expressionNoComma)}function maybeoperatorComma(type,value){if(type==","){return cont(expression)}return maybeoperatorNoComma(type,value,false)}function maybeoperatorNoComma(type,value,noComma){var me=noComma==false?maybeoperatorComma:maybeoperatorNoComma;var expr=noComma==false?expression:expressionNoComma;if(type=="=>"){return cont(pushcontext,noComma?arrowBodyNoComma:arrowBody,popcontext)}if(type=="operator"){if(/\+\+|--/.test(value)){return cont(me)}if(value=="?"){return cont(expression,expect(":"),expr)}return cont(expr)}if(type=="quasi"){return pass(quasi,me)}if(type==";"){return}if(type=="("){return contCommasep(expressionNoComma,")","call",me)}if(type=="."){return cont(property,me)}if(type=="["){return cont(pushlex("]"),maybeexpression,expect("]"),poplex,me)}}function quasi(type,value){if(type!="quasi"){return pass()}if(value.slice(value.length-2)!="${"){return cont(quasi)}return cont(expression,continueQuasi)}function continueQuasi(type){if(type=="}"){cx.marked="string-2";cx.state.tokenize=tokenQuasi;return cont(quasi)}}function arrowBody(type){findFatArrow(cx.stream,cx.state);return pass(type=="{"?statement:expression)}function arrowBodyNoComma(type){findFatArrow(cx.stream,cx.state);return pass(type=="{"?statement:expressionNoComma)}function maybeTarget(noComma){return function(type){if(type=="."){return cont(noComma?targetNoComma:target)}else{return pass(noComma?expressionNoComma:expression)}}}function target(_,value){if(value=="target"){cx.marked="keyword";return cont(maybeoperatorComma)}}function targetNoComma(_,value){if(value=="target"){cx.marked="keyword";return cont(maybeoperatorNoComma)}}function maybelabel(type){if(type==":"){return cont(poplex,statement)}return pass(maybeoperatorComma,expect(";"),poplex)}function property(type){if(type=="variable"){cx.marked="property";return cont()}}function objprop(type,value){if(type=="async"){cx.marked="property";return cont(objprop)}else{if(type=="variable"||cx.style=="keyword"){cx.marked="property";if(value=="get"||value=="set"){return cont(getterSetter)}return cont(afterprop)}else{if(type=="number"||type=="string"){cx.marked=jsonldMode?"property":(cx.style+" property");return cont(afterprop)}else{if(type=="jsonld-keyword"){return cont(afterprop)}else{if(type=="modifier"){return cont(objprop)}else{if(type=="["){return cont(expression,expect("]"),afterprop)}else{if(type=="spread"){return cont(expression)}else{if(type==":"){return pass(afterprop)}}}}}}}}}function getterSetter(type){if(type!="variable"){return pass(afterprop)}cx.marked="property";return cont(functiondef)}function afterprop(type){if(type==":"){return cont(expressionNoComma)}if(type=="("){return pass(functiondef)}}function commasep(what,end){function proceed(type,value){if(type==","){var lex=cx.state.lexical;if(lex.info=="call"){lex.pos=(lex.pos||0)+1}return cont(function(type,value){if(type==end||value==end){return pass()}return pass(what)},proceed)}if(type==end||value==end){return cont()}return cont(expect(end))}return function(type,value){if(type==end||value==end){return cont()}return pass(what,proceed)}}function contCommasep(what,end,info){for(var i=3;i<arguments.length;i++){cx.cc.push(arguments[i])}return cont(pushlex(end,info),commasep(what,end),poplex)}function block(type){if(type=="}"){return cont()}return pass(statement,block)}function maybetype(type){if(isTS&&type==":"){return cont(typeexpr)}}function maybedefault(_,value){if(value=="="){return cont(expressionNoComma)}}function typeexpr(type){if(type=="variable"){cx.marked="variable-3";return cont(afterType)}if(type=="{"){return cont(commasep(typeprop,"}"))}if(type=="("){return cont(commasep(typearg,")"),maybeReturnType)}}function maybeReturnType(type){if(type=="=>"){return cont(typeexpr)}}function typeprop(type){if(type=="variable"||cx.style=="keyword"){cx.marked="property";return cont(typeprop)}else{if(type==":"){return cont(typeexpr)}}}function typearg(type){if(type=="variable"){return cont(typearg)}else{if(type==":"){return cont(typeexpr)}}}function afterType(type,value){if(value=="<"){return cont(commasep(typeexpr,">"),afterType)}if(type=="["){return cont(expect("]"),afterType)}}function vardef(){return pass(pattern,maybetype,maybeAssign,vardefCont)}function pattern(type,value){if(type=="modifier"){return cont(pattern)}if(type=="variable"){register(value);return cont()}if(type=="spread"){return cont(pattern)}if(type=="["){return contCommasep(pattern,"]")}if(type=="{"){return contCommasep(proppattern,"}")}}function proppattern(type,value){if(type=="variable"&&!cx.stream.match(/^\s*:/,false)){register(value);return cont(maybeAssign)}if(type=="variable"){cx.marked="property"}if(type=="spread"){return cont(pattern)}if(type=="}"){return pass()}return cont(expect(":"),pattern,maybeAssign)}function maybeAssign(_type,value){if(value=="="){return cont(expressionNoComma)}}function vardefCont(type){if(type==","){return cont(vardef)}}function maybeelse(type,value){if(type=="keyword b"&&value=="else"){return cont(pushlex("form","else"),statement,poplex)}}function forspec(type){if(type=="("){return cont(pushlex(")"),forspec1,expect(")"),poplex)}}function forspec1(type){if(type=="var"){return cont(vardef,expect(";"),forspec2)}if(type==";"){return cont(forspec2)}if(type=="variable"){return cont(formaybeinof)}return pass(expression,expect(";"),forspec2)}function formaybeinof(_type,value){if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression)}return cont(maybeoperatorComma,forspec2)}function forspec2(type,value){if(type==";"){return cont(forspec3)}if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression)}return pass(expression,expect(";"),forspec3)}function forspec3(type){if(type!=")"){cont(expression)}}function functiondef(type,value){if(value=="*"){cx.marked="keyword";return cont(functiondef)}if(type=="variable"){register(value);return cont(functiondef)}if(type=="("){return cont(pushcontext,pushlex(")"),commasep(funarg,")"),poplex,maybetype,statement,popcontext)}}function funarg(type){if(type=="spread"){return cont(funarg)}return pass(pattern,maybetype,maybedefault)}function className(type,value){if(type=="variable"){register(value);return cont(classNameAfter)}}function classNameAfter(type,value){if(value=="extends"){return cont(isTS?typeexpr:expression,classNameAfter)}if(type=="{"){return cont(pushlex("}"),classBody,poplex)}}function classBody(type,value){if(type=="variable"||cx.style=="keyword"){if(value=="static"){cx.marked="keyword";return cont(classBody)}cx.marked="property";if(value=="get"||value=="set"){return cont(classGetterSetter,functiondef,classBody)}return cont(functiondef,classBody)}if(value=="*"){cx.marked="keyword";return cont(classBody)}if(type==";"){return cont(classBody)}if(type=="}"){return cont()}}function classGetterSetter(type){if(type!="variable"){return pass()}cx.marked="property";return cont()}function afterExport(_type,value){if(value=="*"){cx.marked="keyword";return cont(maybeFrom,expect(";"))}if(value=="default"){cx.marked="keyword";return cont(expression,expect(";"))}return pass(statement)}function afterImport(type){if(type=="string"){return cont()}return pass(importSpec,maybeFrom)}function importSpec(type,value){if(type=="{"){return contCommasep(importSpec,"}")}if(type=="variable"){register(value)}if(value=="*"){cx.marked="keyword"}return cont(maybeAs)}function maybeAs(_type,value){if(value=="as"){cx.marked="keyword";return cont(importSpec)}}function maybeFrom(_type,value){if(value=="from"){cx.marked="keyword";return cont(expression)}}function arrayLiteral(type){if(type=="]"){return cont()}return pass(commasep(expressionNoComma,"]"))}function isContinuedStatement(state,textAfter){return state.lastType=="operator"||state.lastType==","||isOperatorChar.test(textAfter.charAt(0))||/[,.]/.test(textAfter.charAt(0))}return{startState:function(basecolumn){var state={tokenize:tokenBase,lastType:"sof",cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",false),localVars:parserConfig.localVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:basecolumn||0};if(parserConfig.globalVars&&typeof parserConfig.globalVars=="object"){state.globalVars=parserConfig.globalVars}return state},token:function(stream,state){if(stream.sol()){if(!state.lexical.hasOwnProperty("align")){state.lexical.align=false}state.indented=stream.indentation();findFatArrow(stream,state)}if(state.tokenize!=tokenComment&&stream.eatSpace()){return null}var style=state.tokenize(stream,state);if(type=="comment"){return style}state.lastType=type=="operator"&&(content=="++"||content=="--")?"incdec":type;return parseJS(state,style,type,content,stream)},indent:function(state,textAfter){if(state.tokenize==tokenComment){return CodeMirror.Pass}if(state.tokenize!=tokenBase){return 0}var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical;if(!/^\s*else\b/.test(textAfter)){for(var i=state.cc.length-1;i>=0;--i){var c=state.cc[i];if(c==poplex){lexical=lexical.prev}else{if(c!=maybeelse){break}}}}if(lexical.type=="stat"&&firstChar=="}"){lexical=lexical.prev}if(statementIndent&&lexical.type==")"&&lexical.prev.type=="stat"){lexical=lexical.prev}var type=lexical.type,closing=firstChar==type;if(type=="vardef"){return lexical.indented+(state.lastType=="operator"||state.lastType==","?lexical.info+1:0)}else{if(type=="form"&&firstChar=="{"){return lexical.indented}else{if(type=="form"){return lexical.indented+indentUnit}else{if(type=="stat"){return lexical.indented+(isContinuedStatement(state,textAfter)?statementIndent||indentUnit:0)}else{if(lexical.info=="switch"&&!closing&&parserConfig.doubleIndentSwitch!=false){return lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit)}else{if(lexical.align){return lexical.column+(closing?0:1)}else{return lexical.indented+(closing?0:indentUnit)}}}}}}},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:jsonMode?null:"/*",blockCommentEnd:jsonMode?null:"*/",lineComment:jsonMode?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:jsonMode?"json":"javascript",jsonldMode:jsonldMode,jsonMode:jsonMode,expressionAllowed:expressionAllowed,skipExpression:function(state){var top=state.cc[state.cc.length-1];if(top==expression||top==expressionNoComma){state.cc.pop()}}}});CodeMirror.registerHelper("wordChars","javascript",/[\w$]/);CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/x-javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:true});CodeMirror.defineMIME("application/ld+json",{name:"javascript",jsonld:true});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:true});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:true})});Ext.define("Wasutp.logs.Viewer",{log:null,window:null,panel:null,timeoutInterval:3000,lastLineNumber:null,count:10,title:"Консоль ошибок",clearBtnText:"Очистить консоль",constructor:function(params){var me=this;me.log=params.log||null;if(params.count){me.count=parseInt(params.count)}if(params.title){me.title=params.title}},launch:function(){var me=this;me.createWindow()},getId:function(){return"isms-logs-viewer-"+this.log+"-win"},createWindow:function(){var me=this,desktop=wasutpApp.getDesktop(),winId=me.getId();me.window=desktop.getWindow(winId);if(!me.window){me.window=desktop.createWindow({id:winId,title:me.title,height:600,width:900,layout:"fit",iconCls:"isms-logs-viewer",items:[{html:"<pre></pre>",autoScroll:true,cls:"isms-logs-viewer",listeners:{afterrender:function(panel){me.panel=panel;me.updateData()},destroy:function(){me.window=null}}}],bbar:[{text:me.clearBtnText,handler:function(){me.clearConsoleData()}}]})}me.window.show()},updateData:function(){var me=this;Wasutp.Ajax.request({url:"/json/log/read",params:{log:me.log,count:me.count,lastLineNumber:me.lastLineNumber},success:function(response){if(response.data&&response.data.text!==""){me.addConsoleData(response.data.text);me.lastLineNumber=response.data.lastLineNumber}setTimeout(function(){if(me.window){me.updateData()}}.bind(me),me.timeoutInterval)},failure:function(){setTimeout(function(){if(me.window){me.updateData()}}.bind(me),me.timeoutInterval)}})},getConoleInnerTextElement:function(){var me=this,div=document.getElementById(me.panel.id+"-innerCt"),pre;if(div){pre=div.getElementsByTagName("pre")[0];return pre.innerHTML}return false},addConsoleData:function(text){var me=this,innerHTML=me.getConoleInnerTextElement();if(innerHTML===false){return false}if(text){innerHTML+=text}me.panel.update("<pre>"+innerHTML+"</pre>");if(text){var d=me.panel.body.dom;d.scrollTop=d.scrollHeight-d.offsetHeight}},clearConsoleData:function(){var me=this;me.panel.update("<pre></pre>")}});Ext.define("Wasutp.Configurations.calc.Calc",{id:"configurations-calc",windowId:"isms_calc_window",helpWindowId:"isms_calc_window_help",textAreaField:null,win:null,codeMirror:null,textAreaId:null,saveBtn:null,hash:null,init:function(){return false},getConfig:function(src){var me=this;me.createWindow(src)},createWindow:function(src){var me=this,desktop=wasutpApp.getDesktop();me.win=desktop.getWindow(me.windowId);if(!me.win){me.win=desktop.createWindow({id:me.windowId,title:"Дорасчет",height:600,width:900,layout:"fit",iconCls:"wasutp-configuration-calc",items:[me.getPanelCfg(),],bbar:[{xtype:"button",text:"Сохранить",disabled:true,handler:function(){me.save()},listeners:{afterrender:function(btn){me.saveBtn=btn}}},{xtype:"button",text:"Помощь",handler:function(){me.openHelpWindow()}},{xtype:"button",text:"Консоль ошибок",handler:function(){var logsViewer=Ext.create("Wasutp.logs.Viewer",{title:"Консоль ошибок модуля дорасчета",log:"calc"});logsViewer.launch()}}],listeners:{beforeclose:function(){if(!me.codeMirror){return}me.codeMirror.save();if(me.hash===me.getHash(me.codeMirror.getTextArea().value)){return true}else{Ext.Msg.show({title:"Закрытие окна",msg:"Сохранить изменения?",buttons:Ext.Msg.YESNOCANCEL,icon:Ext.Msg.QUESTION,fn:function(btn){if(btn==="yes"){me.save();me.win.close()}else{if(btn==="no"){me.win.destroy()}}}})}return false}}})}me.win.show()},getPanelCfg:function(){var me=this;return{xtype:"box",autoEl:{tag:"textarea"},listeners:{afterrender:function(field){me.textAreaField=field;me.fillContent(field)}}}},getPanel:function(){return this.textAreaField},fillContent:function(field){var me=this;Wasutp.Ajax.request({url:"/json/calc/read",params:{},success:function(response){if(typeof response.data.content!=="undefined"){me.hash=me.getHash(response.data.content);var content=response.data.content;field.update(content);CodeMirror.commands.autocomplete=function(cm){cm.showHint({hint:CodeMirror.hint.lua})};me.codeMirror=CodeMirror.fromTextArea(me.getTextarea(),{lineNumbers:true,styleActiveLine:true,matchBrackets:true,extraKeys:{"Ctrl-Space":"autocomplete"},theme:"panda-syntax"});me.codeMirror.on("change",function(){if(me.saveBtn&&me.saveBtn.isDisabled()){me.saveBtn.enable()}});var cm=document.getElementsByClassName("CodeMirror");Ext.create("Ext.util.KeyMap",cm[0],{key:Ext.EventObject.S,shift:false,ctrl:true,handler:function(i,e){e.stopEvent();me.save()}});Ext.EventManager.on(field.getEl(),"keydown",function(e,t){if(e.getKey()==e.S){e.stopPropagation()}if(e.getKey()==e.BACKSPACE){e.stopPropagation()}})}}})},getTextarea:function(){var me=this,textArea=me.textAreaField.el.dom;return textArea},save:function(){var me=this,text;me.codeMirror.save();text=me.codeMirror.getTextArea().value;me.hash=me.getHash(text);Wasutp.Ajax.request({url:"/json/calc/update",params:{content:JSON.stringify(text)},success:function(response){if(response.data.result){errorsHandler.addMessage("Сохранение дорасчёта","Файл дорасчета успешно сохранен",1,null,true);me.saveBtn.disable()}}})},getHash:function(str){var hash=0,i,chr,len;if(str.length===0){return hash}for(i=0,len=str.length;i<len;i++){chr=str.charCodeAt(i);hash=((hash<<5)-hash)+chr;hash|=0}return hash},openHelpWindow:function(){var me=this,desktop=wasutpApp.getDesktop(),win=desktop.getWindow(me.helpWindowId);if(!win){win=desktop.createWindow({id:me.helpWindowId,title:"Помощь",height:600,width:1150,layout:"fit",iconCls:"wasutp-configuration-calc-help-iconCls",items:[{html:"",cls:"wasutp-configuration-calc-help",listeners:{afterrender:function(panel){Wasutp.Ajax.request({url:"/json/calc/get-help-data",params:{},success:function(response){if(response.data&&response.data.content){panel.update(response.data.content)}}})}}}]})}win.show()}});
/*!
* @license EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},createjs.extend=function(a,b){function c(){this.constructor=a}return c.prototype=b.prototype,a.prototype=new c},this.createjs=this.createjs||{},createjs.promote=function(a,b){var c=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(d){c[(b+="_")+"constructor"]=d.constructor;for(var e in d){c.hasOwnProperty(e)&&"function"==typeof d[e]&&(c[b+e]=d[e])}}return a},this.createjs=this.createjs||{},createjs.indexOf=function(a,b){for(var c=0,d=a.length;d>c;c++){if(b===a[c]){return c}}return -1},this.createjs=this.createjs||{},function(){function a(a,b,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!b,this.cancelable=!!c,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var b=a.prototype;b.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.set=function(a){for(var b in a){this[b]=a[b]}return this},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){function a(){this._listeners=null,this._captureListeners=null}var b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e){for(var f=0,g=e.length;g>f;f++){if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a,b,c){if("string"==typeof a){var d=this._listeners;if(!(b||d&&d[a])){return !0}a=new createjs.Event(a,b,c)}else{a.target&&a.clone&&(a=a.clone())}try{a.target=this}catch(e){}if(a.bubbles&&this.parent){for(var f=this,g=[f];f.parent;){g.push(f=f.parent)}var h,i=g.length;for(h=i-1;h>=0&&!a.propagationStopped;h--){g[h]._dispatchEvent(a,1+(0==h))}for(h=1;i>h&&!a.propagationStopped;h++){g[h]._dispatchEvent(a,3)}}else{this._dispatchEvent(a,2)}return !a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return !!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a)){return !0}b=b.parent}return !1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length)){return}try{a.currentTarget=this}catch(f){}try{a.eventPhase=b}catch(f){}a.removed=!1,e=e.slice();for(var g=0;c>g&&!a.immediatePropagationStopped;g++){var h=e[g];h.handleEvent?h.handleEvent(a):h(a),a.removed&&(this.off(a.type,h,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){function a(){throw"Ticker cannot be instantiated."}a.RAF_SYNCHED="synched",a.RAF="raf",a.TIMEOUT="timeout",a.useRAF=!1,a.timingMode=null,a.maxDelta=0,a.paused=!1,a.removeEventListener=null,a.removeAllEventListeners=null,a.dispatchEvent=null,a.hasEventListener=null,a._listeners=null,createjs.EventDispatcher.initialize(a),a._addEventListener=a.addEventListener,a.addEventListener=function(){return !a._inited&&a.init(),a._addEventListener.apply(a,arguments)},a._inited=!1,a._startTime=0,a._pausedTime=0,a._ticks=0,a._pausedTicks=0,a._interval=50,a._lastTime=0,a._times=null,a._tickTimes=null,a._timerId=null,a._raf=!0,a.setInterval=function(b){a._interval=b,a._inited&&a._setupTick()},a.getInterval=function(){return a._interval},a.setFPS=function(b){a.setInterval(1000/b)},a.getFPS=function(){return 1000/a._interval};try{Object.defineProperties(a,{interval:{get:a.getInterval,set:a.setInterval},framerate:{get:a.getFPS,set:a.setFPS}})}catch(b){console.log(b)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)},a.reset=function(){if(a._raf){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;b&&b(a._timerId)}else{clearTimeout(a._timerId)}a.removeAllEventListeners("tick"),a._timerId=a._times=a._tickTimes=null,a._startTime=a._lastTime=a._ticks=0,a._inited=!1},a.getMeasuredTickTime=function(b){var c=0,d=a._tickTimes;if(!d||d.length<1){return -1}b=Math.min(d.length,b||0|a.getFPS());for(var e=0;b>e;e++){c+=d[e]}return c/b},a.getMeasuredFPS=function(b){var c=a._times;return !c||c.length<2?-1:(b=Math.min(c.length-1,b||0|a.getFPS()),1000/((c[0]-c[b])/b))},a.setPaused=function(b){a.paused=b},a.getPaused=function(){return a.paused},a.getTime=function(b){return a._startTime?a._getTime()-(b?a._pausedTime:0):-1},a.getEventTime=function(b){return a._startTime?(a._lastTime||a._startTime)-(b?a._pausedTime:0):-1},a.getTicks=function(b){return a._ticks-(b?a._pausedTicks:0)},a._handleSynch=function(){a._timerId=null,a._setupTick(),a._getTime()-a._lastTime>=0.97*(a._interval-1)&&a._tick()},a._handleRAF=function(){a._timerId=null,a._setupTick(),a._tick()},a._handleTimeout=function(){a._timerId=null,a._setupTick(),a._tick()},a._setupTick=function(){if(null==a._timerId){var b=a.timingMode||a.useRAF&&a.RAF_SYNCHED;if(b==a.RAF_SYNCHED||b==a.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c){return a._timerId=c(b==a.RAF?a._handleRAF:a._handleSynch),void (a._raf=!0)}}a._raf=!1,a._timerId=setTimeout(a._handleTimeout,a._interval)}},a._tick=function(){var b=a.paused,c=a._getTime(),d=c-a._lastTime;if(a._lastTime=c,a._ticks++,b&&(a._pausedTicks++,a._pausedTime+=d),a.hasEventListener("tick")){var e=new createjs.Event("tick"),f=a.maxDelta;e.delta=f&&d>f?f:d,e.paused=b,e.time=c,e.runTime=c-a._pausedTime,a.dispatchEvent(e)}for(a._tickTimes.unshift(a._getTime()-c);a._tickTimes.length>100;){a._tickTimes.pop()}for(a._times.unshift(c);a._times.length>100;){a._times.pop()}};var c=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);a._getTime=function(){return(c&&c.call(performance)||(new Date).getTime())-a._startTime},createjs.Ticker=a}(),this.createjs=this.createjs||{},function(){function a(){throw"UID cannot be instantiated"}a._nextID=0,a.get=function(){return a._nextID++},createjs.UID=a}(),this.createjs=this.createjs||{},function(){function a(a,b,c,d,e,f,g,h,i,j,k){this.Event_constructor(a,b,c),this.stageX=d,this.stageY=e,this.rawX=null==i?d:i,this.rawY=null==j?e:j,this.nativeEvent=f,this.pointerID=g,this.primary=!!h,this.relatedTarget=k}var b=createjs.extend(a,createjs.Event);b._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},b._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},b._get_isTouch=function(){return -1!==this.pointerID};try{Object.defineProperties(b,{localX:{get:b._get_localX},localY:{get:b._get_localY},isTouch:{get:b._get_isTouch}})}catch(c){}b.clone=function(){return new a(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},b.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(a,"Event")}(),this.createjs=this.createjs||{},function(){function a(a,b,c,d,e,f){this.setValues(a,b,c,d,e,f)}var b=a.prototype;a.DEG_TO_RAD=Math.PI/180,a.identity=null,b.setValues=function(a,b,c,d,e,f){return this.a=null==a?1:a,this.b=b||0,this.c=c||0,this.d=null==d?1:d,this.tx=e||0,this.ty=f||0,this},b.append=function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;return 1==a&&0==b&&0==c&&1==d||(this.a=g*a+i*b,this.b=h*a+j*b,this.c=g*c+i*d,this.d=h*c+j*d),this.tx=g*e+i*f+this.tx,this.ty=h*e+j*f+this.ty,this},b.prepend=function(a,b,c,d,e,f){var g=this.a,h=this.c,i=this.tx;return this.a=a*g+c*this.b,this.b=b*g+d*this.b,this.c=a*h+c*this.d,this.d=b*h+d*this.d,this.tx=a*i+c*this.ty+e,this.ty=b*i+d*this.ty+f,this},b.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty)},b.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty)},b.appendTransform=function(b,c,d,e,f,g,h,i,j){if(f%360){var k=f*a.DEG_TO_RAD,l=Math.cos(k),m=Math.sin(k)}else{l=1,m=0}return g||h?(g*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),b,c),this.append(l*d,m*d,-m*e,l*e,0,0)):this.append(l*d,m*d,-m*e,l*e,b,c),(i||j)&&(this.tx-=i*this.a+j*this.c,this.ty-=i*this.b+j*this.d),this},b.prependTransform=function(b,c,d,e,f,g,h,i,j){if(f%360){var k=f*a.DEG_TO_RAD,l=Math.cos(k),m=Math.sin(k)}else{l=1,m=0}return(i||j)&&(this.tx-=i,this.ty-=j),g||h?(g*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.prepend(l*d,m*d,-m*e,l*e,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),b,c)):this.prepend(l*d,m*d,-m*e,l*e,b,c),this},b.rotate=function(b){b*=a.DEG_TO_RAD;var c=Math.cos(b),d=Math.sin(b),e=this.a,f=this.b;return this.a=e*c+this.c*d,this.b=f*c+this.d*d,this.c=-e*d+this.c*c,this.d=-f*d+this.d*c,this},b.skew=function(b,c){return b*=a.DEG_TO_RAD,c*=a.DEG_TO_RAD,this.append(Math.cos(c),Math.sin(c),-Math.sin(b),Math.cos(b),0,0),this},b.scale=function(a,b){return this.a*=a,this.b*=a,this.c*=b,this.d*=b,this},b.translate=function(a,b){return this.tx+=this.a*a+this.c*b,this.ty+=this.b*a+this.d*b,this},b.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},b.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},b.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},b.equals=function(a){return this.tx===a.tx&&this.ty===a.ty&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d},b.transformPoint=function(a,b,c){return c=c||{},c.x=a*this.a+b*this.c+this.tx,c.y=a*this.b+b*this.d+this.ty,c},b.decompose=function(b){null==b&&(b={}),b.x=this.tx,b.y=this.ty,b.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),b.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var c=Math.atan2(-this.c,this.d),d=Math.atan2(this.b,this.a),e=Math.abs(1-c/d);return 0.00001>e?(b.rotation=d/a.DEG_TO_RAD,this.a<0&&this.d>=0&&(b.rotation+=b.rotation<=0?180:-180),b.skewX=b.skewY=0):(b.skewX=c/a.DEG_TO_RAD,b.skewY=d/a.DEG_TO_RAD),b},b.copy=function(a){return this.setValues(a.a,a.b,a.c,a.d,a.tx,a.ty)},b.clone=function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty)},b.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},a.identity=new a,createjs.Matrix2D=a}(),this.createjs=this.createjs||{},function(){function a(a,b,c,d,e){this.setValues(a,b,c,d,e)}var b=a.prototype;b.setValues=function(a,b,c,d,e){return this.visible=null==a?!0:!!a,this.alpha=null==b?1:b,this.shadow=c,this.compositeOperation=d,this.matrix=e||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},b.append=function(a,b,c,d,e){return this.alpha*=b,this.shadow=c||this.shadow,this.compositeOperation=d||this.compositeOperation,this.visible=this.visible&&a,e&&this.matrix.appendMatrix(e),this},b.prepend=function(a,b,c,d,e){return this.alpha*=b,this.shadow=this.shadow||c,this.compositeOperation=this.compositeOperation||d,this.visible=this.visible&&a,e&&this.matrix.prependMatrix(e),this},b.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},b.clone=function(){return new a(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=a}(),this.createjs=this.createjs||{},function(){function a(a,b){this.setValues(a,b)}var b=a.prototype;b.setValues=function(a,b){return this.x=a||0,this.y=b||0,this},b.copy=function(a){return this.x=a.x,this.y=a.y,this},b.clone=function(){return new a(this.x,this.y)},b.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=a}(),this.createjs=this.createjs||{},function(){function a(a,b,c,d){this.setValues(a,b,c,d)}var b=a.prototype;b.setValues=function(a,b,c,d){return this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this},b.extend=function(a,b,c,d){return c=c||0,d=d||0,a+c>this.x+this.width&&(this.width=a+c-this.x),b+d>this.y+this.height&&(this.height=b+d-this.y),a<this.x&&(this.width+=this.x-a,this.x=a),b<this.y&&(this.height+=this.y-b,this.y=b),this},b.pad=function(a,b,c,d){return this.x-=b,this.y-=a,this.width+=b+d,this.height+=a+c,this},b.copy=function(a){return this.setValues(a.x,a.y,a.width,a.height)},b.contains=function(a,b,c,d){return c=c||0,d=d||0,a>=this.x&&a+c<=this.x+this.width&&b>=this.y&&b+d<=this.y+this.height},b.union=function(a){return this.clone().extend(a.x,a.y,a.width,a.height)},b.intersection=function(b){var c=b.x,d=b.y,e=c+b.width,f=d+b.height;return this.x>c&&(c=this.x),this.y>d&&(d=this.y),this.x+this.width<e&&(e=this.x+this.width),this.y+this.height<f&&(f=this.y+this.height),c>=e||d>=f?null:new a(c,d,e-c,f-d)},b.intersects=function(a){return a.x<=this.x+this.width&&this.x<=a.x+a.width&&a.y<=this.y+this.height&&this.y<=a.y+a.height},b.isEmpty=function(){return this.width<=0||this.height<=0},b.clone=function(){return new a(this.x,this.y,this.width,this.height)},b.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=a}(),this.createjs=this.createjs||{},function(){function a(a,b,c,d,e,f,g){a.addEventListener&&(this.target=a,this.overLabel=null==c?"over":c,this.outLabel=null==b?"out":b,this.downLabel=null==d?"down":d,this.play=e,this._isPressed=!1,this._isOver=!1,this._enabled=!1,a.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),f&&(g&&(f.actionsEnabled=!1,f.gotoAndStop&&f.gotoAndStop(g)),a.hitArea=f))}var b=a.prototype;b.setEnabled=function(a){if(a!=this._enabled){var b=this.target;this._enabled=a,a?(b.cursor="pointer",b.addEventListener("rollover",this),b.addEventListener("rollout",this),b.addEventListener("mousedown",this),b.addEventListener("pressup",this),b._reset&&(b.__reset=b._reset,b._reset=this._reset)):(b.cursor=null,b.removeEventListener("rollover",this),b.removeEventListener("rollout",this),b.removeEventListener("mousedown",this),b.removeEventListener("pressup",this),b.__reset&&(b._reset=b.__reset,delete b.__reset))}},b.getEnabled=function(){return this._enabled};try{Object.defineProperties(b,{enabled:{get:b.getEnabled,set:b.setEnabled}})}catch(c){}b.toString=function(){return"[ButtonHelper]"},b.handleEvent=function(a){var b,c=this.target,d=a.type;"mousedown"==d?(this._isPressed=!0,b=this.downLabel):"pressup"==d?(this._isPressed=!1,b=this._isOver?this.overLabel:this.outLabel):"rollover"==d?(this._isOver=!0,b=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,b=this._isPressed?this.overLabel:this.outLabel),this.play?c.gotoAndPlay&&c.gotoAndPlay(b):c.gotoAndStop&&c.gotoAndStop(b)},b._reset=function(){var a=this.paused;this.__reset(),this.paused=a},createjs.ButtonHelper=a}(),this.createjs=this.createjs||{},function(){function a(a,b,c,d){this.color=a||"black",this.offsetX=b||0,this.offsetY=c||0,this.blur=d||0}var b=a.prototype;a.identity=new a("transparent",0,0,0),b.toString=function(){return"[Shadow]"},b.clone=function(){return new a(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=a}(),this.createjs=this.createjs||{},function(){function a(a){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(a)}var b=createjs.extend(a,createjs.EventDispatcher);b.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(b,{animations:{get:b.getAnimations}})}catch(c){}b.getNumFrames=function(a){if(null==a){return this._frames?this._frames.length:this._numFrames||0}var b=this._data[a];return null==b?0:b.frames.length},b.getAnimation=function(a){return this._data[a]},b.getFrame=function(a){var b;return this._frames&&(b=this._frames[a])?b:null},b.getFrameBounds=function(a,b){var c=this.getFrame(a);return c?(b||new createjs.Rectangle).setValues(-c.regX,-c.regY,c.rect.width,c.rect.height):null},b.toString=function(){return"[SpriteSheet]"},b.clone=function(){throw"SpriteSheet cannot be cloned."},b._parseData=function(a){var b,c,d,e;if(null!=a){if(this.framerate=a.framerate||0,a.images&&(c=a.images.length)>0){for(e=this._images=[],b=0;c>b;b++){var f=a.images[b];if("string"==typeof f){var g=f;f=document.createElement("img"),f.src=g}e.push(f),f.getContext||f.naturalWidth||(this._loadCount++,this.complete=!1,function(a,b){f.onload=function(){a._handleImageLoad(b)}}(this,g),function(a,b){f.onerror=function(){a._handleImageError(b)}}(this,g))}}if(null==a.frames){}else{if(Array.isArray(a.frames)){for(this._frames=[],e=a.frames,b=0,c=e.length;c>b;b++){var h=e[b];this._frames.push({image:this._images[h[4]?h[4]:0],rect:new createjs.Rectangle(h[0],h[1],h[2],h[3]),regX:h[5]||0,regY:h[6]||0})}}else{d=a.frames,this._frameWidth=d.width,this._frameHeight=d.height,this._regX=d.regX||0,this._regY=d.regY||0,this._spacing=d.spacing||0,this._margin=d.margin||0,this._numFrames=d.count,0==this._loadCount&&this._calculateFrames()}}if(this._animations=[],null!=(d=a.animations)){this._data={};var i;for(i in d){var j={name:i},k=d[i];if("number"==typeof k){e=j.frames=[k]}else{if(Array.isArray(k)){if(1==k.length){j.frames=[k[0]]}else{for(j.speed=k[3],j.next=k[2],e=j.frames=[],b=k[0];b<=k[1];b++){e.push(b)}}}else{j.speed=k.speed,j.next=k.next;var l=k.frames;e=j.frames="number"==typeof l?[l]:l.slice(0)}}j.next!==!0&&void 0!==j.next||(j.next=i),(j.next===!1||e.length<2&&j.next==i)&&(j.next=null),j.speed||(j.speed=1),this._animations.push(i),this._data[i]=j}}}},b._handleImageLoad=function(a){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},b._handleImageError=function(a){var b=new createjs.Event("error");b.src=a,this.dispatchEvent(b),0==--this._loadCount&&this.dispatchEvent("complete")},b._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var a=this._numFrames||100000,b=0,c=this._frameWidth,d=this._frameHeight,e=this._spacing,f=this._margin;a:for(var g=0,h=this._images;g<h.length;g++){for(var i=h[g],j=i.width,k=i.height,l=f;k-f-d>=l;){for(var m=f;j-f-c>=m;){if(b>=a){break a}b++,this._frames.push({image:i,rect:new createjs.Rectangle(m,l,c,d),regX:this._regX,regY:this._regY}),m+=c+e}l+=d+e}}this._numFrames=b}},createjs.SpriteSheet=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function a(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var b=a.prototype,c=a;a.getRGB=function(a,b,c,d){return null!=a&&null==c&&(d=b,c=255&a,b=a>>8&255,a=a>>16&255),null==d?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"},a.getHSL=function(a,b,c,d){return null==d?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"},a.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},a.STROKE_CAPS_MAP=["butt","round","square"],a.STROKE_JOINTS_MAP=["miter","round","bevel"];var d=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");d.getContext&&(a._ctx=d.getContext("2d"),d.width=d.height=1),b.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(b,{instructions:{get:b.getInstructions}})}catch(e){}b.isEmpty=function(){return !(this._instructions.length||this._activeInstructions.length)},b.draw=function(a,b){this._updateInstructions();for(var c=this._instructions,d=this._storeIndex,e=c.length;e>d;d++){c[d].exec(a,b)}},b.drawAsPath=function(a){this._updateInstructions();for(var b,c=this._instructions,d=this._storeIndex,e=c.length;e>d;d++){(b=c[d]).path!==!1&&b.exec(a)}},b.moveTo=function(a,b){return this.append(new c.MoveTo(a,b),!0)},b.lineTo=function(a,b){return this.append(new c.LineTo(a,b))},b.arcTo=function(a,b,d,e,f){return this.append(new c.ArcTo(a,b,d,e,f))},b.arc=function(a,b,d,e,f,g){return this.append(new c.Arc(a,b,d,e,f,g))},b.quadraticCurveTo=function(a,b,d,e){return this.append(new c.QuadraticCurveTo(a,b,d,e))},b.bezierCurveTo=function(a,b,d,e,f,g){return this.append(new c.BezierCurveTo(a,b,d,e,f,g))},b.rect=function(a,b,d,e){return this.append(new c.Rect(a,b,d,e))},b.closePath=function(){return this._activeInstructions.length?this.append(new c.ClosePath):this},b.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},b.beginFill=function(a){return this._setFill(a?new c.Fill(a):null)},b.beginLinearGradientFill=function(a,b,d,e,f,g){return this._setFill((new c.Fill).linearGradient(a,b,d,e,f,g))},b.beginRadialGradientFill=function(a,b,d,e,f,g,h,i){return this._setFill((new c.Fill).radialGradient(a,b,d,e,f,g,h,i))},b.beginBitmapFill=function(a,b,d){return this._setFill(new c.Fill(null,d).bitmap(a,b))},b.endFill=function(){return this.beginFill()},b.setStrokeStyle=function(a,b,d,e,f){return this._updateInstructions(!0),this._strokeStyle=this.command=new c.StrokeStyle(a,b,d,e,f),this._stroke&&(this._stroke.ignoreScale=f),this._strokeIgnoreScale=f,this},b.setStrokeDash=function(a,b){return this._updateInstructions(!0),this._strokeDash=this.command=new c.StrokeDash(a,b),this},b.beginStroke=function(a){return this._setStroke(a?new c.Stroke(a):null)},b.beginLinearGradientStroke=function(a,b,d,e,f,g){return this._setStroke((new c.Stroke).linearGradient(a,b,d,e,f,g))},b.beginRadialGradientStroke=function(a,b,d,e,f,g,h,i){return this._setStroke((new c.Stroke).radialGradient(a,b,d,e,f,g,h,i))},b.beginBitmapStroke=function(a,b){return this._setStroke((new c.Stroke).bitmap(a,b))},b.endStroke=function(){return this.beginStroke()},b.curveTo=b.quadraticCurveTo,b.drawRect=b.rect,b.drawRoundRect=function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e)},b.drawRoundRectComplex=function(a,b,d,e,f,g,h,i){return this.append(new c.RoundRect(a,b,d,e,f,g,h,i))},b.drawCircle=function(a,b,d){return this.append(new c.Circle(a,b,d))},b.drawEllipse=function(a,b,d,e){return this.append(new c.Ellipse(a,b,d,e))},b.drawPolyStar=function(a,b,d,e,f,g){return this.append(new c.PolyStar(a,b,d,e,f,g))},b.append=function(a,b){return this._activeInstructions.push(a),this.command=a,b||(this._dirty=!0),this},b.decodePath=function(b){for(var c=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],d=[2,2,4,6,0],e=0,f=b.length,g=[],h=0,i=0,j=a.BASE_64;f>e;){var k=b.charAt(e),l=j[k],m=l>>3,n=c[m];if(!n||3&l){throw"bad path data (@"+e+"): "+k}var o=d[m];m||(h=i=0),g.length=0,e++;for(var p=(l>>2&1)+2,q=0;o>q;q++){var r=j[b.charAt(e)],s=r>>5?-1:1;r=(31&r)<<6|j[b.charAt(e+1)],3==p&&(r=r<<6|j[b.charAt(e+2)]),r=s*r/10,q%2?h=r+=h:i=r+=i,g[q]=r,e+=p}n.apply(this,g)}return this},b.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},b.unstore=function(){return this._storeIndex=0,this},b.clone=function(){var b=new a;return b.command=this.command,b._stroke=this._stroke,b._strokeStyle=this._strokeStyle,b._strokeDash=this._strokeDash,b._strokeIgnoreScale=this._strokeIgnoreScale,b._fill=this._fill,b._instructions=this._instructions.slice(),b._commitIndex=this._commitIndex,b._activeInstructions=this._activeInstructions.slice(),b._dirty=this._dirty,b._storeIndex=this._storeIndex,b},b.toString=function(){return"[Graphics]"},b.mt=b.moveTo,b.lt=b.lineTo,b.at=b.arcTo,b.bt=b.bezierCurveTo,b.qt=b.quadraticCurveTo,b.a=b.arc,b.r=b.rect,b.cp=b.closePath,b.c=b.clear,b.f=b.beginFill,b.lf=b.beginLinearGradientFill,b.rf=b.beginRadialGradientFill,b.bf=b.beginBitmapFill,b.ef=b.endFill,b.ss=b.setStrokeStyle,b.sd=b.setStrokeDash,b.s=b.beginStroke,b.ls=b.beginLinearGradientStroke,b.rs=b.beginRadialGradientStroke,b.bs=b.beginBitmapStroke,b.es=b.endStroke,b.dr=b.drawRect,b.rr=b.drawRoundRect,b.rc=b.drawRoundRectComplex,b.dc=b.drawCircle,b.de=b.drawEllipse,b.dp=b.drawPolyStar,b.p=b.decodePath,b._updateInstructions=function(b){var c=this._instructions,d=this._activeInstructions,e=this._commitIndex;if(this._dirty&&d.length){c.length=e,c.push(a.beginCmd);var f=d.length,g=c.length;c.length=g+f;for(var h=0;f>h;h++){c[h+g]=d[h]}this._fill&&c.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,c.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,c.push(this._strokeStyle)),c.push(this._stroke)),this._dirty=!1}b&&(d.length=0,this._commitIndex=c.length)},b._setFill=function(a){return this._updateInstructions(!0),this.command=this._fill=a,this},b._setStroke=function(a){return this._updateInstructions(!0),(this.command=this._stroke=a)&&(a.ignoreScale=this._strokeIgnoreScale),this},(c.LineTo=function(a,b){this.x=a,this.y=b}).prototype.exec=function(a){a.lineTo(this.x,this.y)},(c.MoveTo=function(a,b){this.x=a,this.y=b}).prototype.exec=function(a){a.moveTo(this.x,this.y)},(c.ArcTo=function(a,b,c,d,e){this.x1=a,this.y1=b,this.x2=c,this.y2=d,this.radius=e}).prototype.exec=function(a){a.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(c.Arc=function(a,b,c,d,e,f){this.x=a,this.y=b,this.radius=c,this.startAngle=d,this.endAngle=e,this.anticlockwise=!!f}).prototype.exec=function(a){a.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(c.QuadraticCurveTo=function(a,b,c,d){this.cpx=a,this.cpy=b,this.x=c,this.y=d}).prototype.exec=function(a){a.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(c.BezierCurveTo=function(a,b,c,d,e,f){this.cp1x=a,this.cp1y=b,this.cp2x=c,this.cp2y=d,this.x=e,this.y=f}).prototype.exec=function(a){a.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(c.Rect=function(a,b,c,d){this.x=a,this.y=b,this.w=c,this.h=d}).prototype.exec=function(a){a.rect(this.x,this.y,this.w,this.h)},(c.ClosePath=function(){}).prototype.exec=function(a){a.closePath()},(c.BeginPath=function(){}).prototype.exec=function(a){a.beginPath()},b=(c.Fill=function(a,b){this.style=a,this.matrix=b}).prototype,b.exec=function(a){if(this.style){a.fillStyle=this.style;var b=this.matrix;b&&(a.save(),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty)),a.fill(),b&&a.restore()}},b.linearGradient=function(b,c,d,e,f,g){for(var h=this.style=a._ctx.createLinearGradient(d,e,f,g),i=0,j=b.length;j>i;i++){h.addColorStop(c[i],b[i])}return h.props={colors:b,ratios:c,x0:d,y0:e,x1:f,y1:g,type:"linear"},this},b.radialGradient=function(b,c,d,e,f,g,h,i){for(var j=this.style=a._ctx.createRadialGradient(d,e,f,g,h,i),k=0,l=b.length;l>k;k++){j.addColorStop(c[k],b[k])}return j.props={colors:b,ratios:c,x0:d,y0:e,r0:f,x1:g,y1:h,r1:i,type:"radial"},this},b.bitmap=function(b,c){if(b.naturalWidth||b.getContext||b.readyState>=2){var d=this.style=a._ctx.createPattern(b,c||"");d.props={image:b,repetition:c,type:"bitmap"}}return this},b.path=!1,b=(c.Stroke=function(a,b){this.style=a,this.ignoreScale=b}).prototype,b.exec=function(a){this.style&&(a.strokeStyle=this.style,this.ignoreScale&&(a.save(),a.setTransform(1,0,0,1,0,0)),a.stroke(),this.ignoreScale&&a.restore())},b.linearGradient=c.Fill.prototype.linearGradient,b.radialGradient=c.Fill.prototype.radialGradient,b.bitmap=c.Fill.prototype.bitmap,b.path=!1,b=(c.StrokeStyle=function(a,b,c,d,e){this.width=a,this.caps=b,this.joints=c,this.miterLimit=d,this.ignoreScale=e}).prototype,b.exec=function(b){b.lineWidth=null==this.width?"1":this.width,b.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:a.STROKE_CAPS_MAP[this.caps],b.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:a.STROKE_JOINTS_MAP[this.joints],b.miterLimit=null==this.miterLimit?"10":this.miterLimit,b.ignoreScale=null==this.ignoreScale?!1:this.ignoreScale},b.path=!1,(c.StrokeDash=function(a,b){this.segments=a,this.offset=b||0}).prototype.exec=function(a){a.setLineDash&&(a.setLineDash(this.segments||c.StrokeDash.EMPTY_SEGMENTS),a.lineDashOffset=this.offset||0)},c.StrokeDash.EMPTY_SEGMENTS=[],(c.RoundRect=function(a,b,c,d,e,f,g,h){this.x=a,this.y=b,this.w=c,this.h=d,this.radiusTL=e,this.radiusTR=f,this.radiusBR=g,this.radiusBL=h}).prototype.exec=function(a){var b=(j>i?i:j)/2,c=0,d=0,e=0,f=0,g=this.x,h=this.y,i=this.w,j=this.h,k=this.radiusTL,l=this.radiusTR,m=this.radiusBR,n=this.radiusBL;0>k&&(k*=c=-1),k>b&&(k=b),0>l&&(l*=d=-1),l>b&&(l=b),0>m&&(m*=e=-1),m>b&&(m=b),0>n&&(n*=f=-1),n>b&&(n=b),a.moveTo(g+i-l,h),a.arcTo(g+i+l*d,h-l*d,g+i,h+l,l),a.lineTo(g+i,h+j-m),a.arcTo(g+i+m*e,h+j+m*e,g+i-m,h+j,m),a.lineTo(g+n,h+j),a.arcTo(g-n*f,h+j+n*f,g,h+j-n,n),a.lineTo(g,h+k),a.arcTo(g-k*c,h-k*c,g+k,h,k),a.closePath()},(c.Circle=function(a,b,c){this.x=a,this.y=b,this.radius=c}).prototype.exec=function(a){a.arc(this.x,this.y,this.radius,0,2*Math.PI)},(c.Ellipse=function(a,b,c,d){this.x=a,this.y=b,this.w=c,this.h=d}).prototype.exec=function(a){var b=this.x,c=this.y,d=this.w,e=this.h,f=0.5522848,g=d/2*f,h=e/2*f,i=b+d,j=c+e,k=b+d/2,l=c+e/2;a.moveTo(b,l),a.bezierCurveTo(b,l-h,k-g,c,k,c),a.bezierCurveTo(k+g,c,i,l-h,i,l),a.bezierCurveTo(i,l+h,k+g,j,k,j),a.bezierCurveTo(k-g,j,b,l+h,b,l)},(c.PolyStar=function(a,b,c,d,e,f){this.x=a,this.y=b,this.radius=c,this.sides=d,this.pointSize=e,this.angle=f}).prototype.exec=function(a){var b=this.x,c=this.y,d=this.radius,e=(this.angle||0)/180*Math.PI,f=this.sides,g=1-(this.pointSize||0),h=Math.PI/f;a.moveTo(b+Math.cos(e)*d,c+Math.sin(e)*d);for(var i=0;f>i;i++){e+=h,1!=g&&a.lineTo(b+Math.cos(e)*d*g,c+Math.sin(e)*d*g),e+=h,a.lineTo(b+Math.cos(e)*d,c+Math.sin(e)*d)}a.closePath()},a.beginCmd=new c.BeginPath,createjs.Graphics=a}(),this.createjs=this.createjs||{},function(){function a(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var b=createjs.extend(a,createjs.EventDispatcher);a._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],a.suppressCrossDomainErrors=!1,a._snapToPixelEnabled=!1;var c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");c.getContext&&(a._hitTestCanvas=c,a._hitTestContext=c.getContext("2d"),c.width=c.height=1),a._nextCacheID=1,b.getStage=function(){for(var a=this,b=createjs.Stage;a.parent;){a=a.parent}return a instanceof b?a:null};try{Object.defineProperties(b,{stage:{get:b.getStage}})}catch(d){}b.isVisible=function(){return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},b.draw=function(a,b){var c=this.cacheCanvas;if(b||!c){return !1}var d=this._cacheScale;return a.drawImage(c,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,c.width/d,c.height/d),!0},b.updateContext=function(b){var c=this,d=c.mask,e=c._props.matrix;d&&d.graphics&&!d.graphics.isEmpty()&&(d.getMatrix(e),b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),d.graphics.drawAsPath(b),b.clip(),e.invert(),b.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),this.getMatrix(e);var f=e.tx,g=e.ty;a._snapToPixelEnabled&&c.snapToPixel&&(f=f+(0>f?-0.5:0.5)|0,g=g+(0>g?-0.5:0.5)|0),b.transform(e.a,e.b,e.c,e.d,f,g),b.globalAlpha*=c.alpha,c.compositeOperation&&(b.globalCompositeOperation=c.compositeOperation),c.shadow&&this._applyShadow(b,c.shadow)},b.cache=function(a,b,c,d,e){e=e||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=c,this._cacheHeight=d,this._cacheOffsetX=a,this._cacheOffsetY=b,this._cacheScale=e,this.updateCache()},b.updateCache=function(b){var c=this.cacheCanvas;if(!c){throw"cache() must be called before updateCache()"}var d=this._cacheScale,e=this._cacheOffsetX*d,f=this._cacheOffsetY*d,g=this._cacheWidth,h=this._cacheHeight,i=c.getContext("2d"),j=this._getFilterBounds();e+=this._filterOffsetX=j.x,f+=this._filterOffsetY=j.y,g=Math.ceil(g*d)+j.width,h=Math.ceil(h*d)+j.height,g!=c.width||h!=c.height?(c.width=g,c.height=h):b||i.clearRect(0,0,g+1,h+1),i.save(),i.globalCompositeOperation=b,i.setTransform(d,0,0,d,-e,-f),this.draw(i,!0),this._applyFilters(),i.restore(),this.cacheID=a._nextCacheID++},b.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},b.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},b.localToGlobal=function(a,b,c){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(a,b,c||new createjs.Point)},b.globalToLocal=function(a,b,c){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(a,b,c||new createjs.Point)},b.localToLocal=function(a,b,c,d){return d=this.localToGlobal(a,b,d),c.globalToLocal(d.x,d.y,d)},b.setTransform=function(a,b,c,d,e,f,g,h,i){return this.x=a||0,this.y=b||0,this.scaleX=null==c?1:c,this.scaleY=null==d?1:d,this.rotation=e||0,this.skewX=f||0,this.skewY=g||0,this.regX=h||0,this.regY=i||0,this},b.getMatrix=function(a){var b=this,c=a&&a.identity()||new createjs.Matrix2D;return b.transformMatrix?c.copy(b.transformMatrix):c.appendTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY)},b.getConcatenatedMatrix=function(a){for(var b=this,c=this.getMatrix(a);b=b.parent;){c.prependMatrix(b.getMatrix(b._props.matrix))}return c},b.getConcatenatedDisplayProps=function(a){a=a?a.identity():new createjs.DisplayProps;var b=this,c=b.getMatrix(a.matrix);do{a.prepend(b.visible,b.alpha,b.shadow,b.compositeOperation),b!=this&&c.prependMatrix(b.getMatrix(b._props.matrix))}while(b=b.parent);return a},b.hitTest=function(b,c){var d=a._hitTestContext;d.setTransform(1,0,0,1,-b,-c),this.draw(d);var e=this._testHit(d);return d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,2,2),e},b.set=function(a){for(var b in a){this[b]=a[b]}return this},b.getBounds=function(){if(this._bounds){return this._rectangle.copy(this._bounds)}var a=this.cacheCanvas;if(a){var b=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,a.width/b,a.height/b)}return null},b.getTransformedBounds=function(){return this._getBounds()},b.setBounds=function(a,b,c,d){null==a&&(this._bounds=a),this._bounds=(this._bounds||new createjs.Rectangle).setValues(a,b,c,d)},b.clone=function(){return this._cloneProps(new a)},b.toString=function(){return"[DisplayObject (name="+this.name+")]"},b._cloneProps=function(a){return a.alpha=this.alpha,a.mouseEnabled=this.mouseEnabled,a.tickEnabled=this.tickEnabled,a.name=this.name,a.regX=this.regX,a.regY=this.regY,a.rotation=this.rotation,a.scaleX=this.scaleX,a.scaleY=this.scaleY,a.shadow=this.shadow,a.skewX=this.skewX,a.skewY=this.skewY,a.visible=this.visible,a.x=this.x,a.y=this.y,a.compositeOperation=this.compositeOperation,a.snapToPixel=this.snapToPixel,a.filters=null==this.filters?null:this.filters.slice(0),a.mask=this.mask,a.hitArea=this.hitArea,a.cursor=this.cursor,a._bounds=this._bounds,a},b._applyShadow=function(a,b){b=b||Shadow.identity,a.shadowColor=b.color,a.shadowOffsetX=b.offsetX,a.shadowOffsetY=b.offsetY,a.shadowBlur=b.blur},b._tick=function(a){var b=this._listeners;b&&b.tick&&(a.target=null,a.propagationStopped=a.immediatePropagationStopped=!1,this.dispatchEvent(a))},b._testHit=function(b){try{var c=b.getImageData(0,0,1,1).data[3]>1}catch(d){if(!a.suppressCrossDomainErrors){throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}}return c},b._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas){for(var a=this.filters.length,b=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,d=this.cacheCanvas.height,e=0;a>e;e++){this.filters[e].applyFilter(b,0,0,c,d)}}},b._getFilterBounds=function(a){var b,c=this.filters,d=this._rectangle.setValues(0,0,0,0);if(!c||!(b=c.length)){return d}for(var e=0;b>e;e++){var f=this.filters[e];f.getBounds&&f.getBounds(d)}return d},b._getBounds=function(a,b){return this._transformBounds(this.getBounds(),a,b)},b._transformBounds=function(a,b,c){if(!a){return a}var d=a.x,e=a.y,f=a.width,g=a.height,h=this._props.matrix;h=c?h.identity():this.getMatrix(h),(d||e)&&h.appendTransform(0,0,1,1,0,0,0,-d,-e),b&&h.prependMatrix(b);var i=f*h.a,j=f*h.b,k=g*h.c,l=g*h.d,m=h.tx,n=h.ty,o=m,p=m,q=n,r=n;return(d=i+m)<o?o=d:d>p&&(p=d),(d=i+k+m)<o?o=d:d>p&&(p=d),(d=k+m)<o?o=d:d>p&&(p=d),(e=j+n)<q?q=e:e>r&&(r=e),(e=j+l+n)<q?q=e:e>r&&(r=e),(e=l+n)<q?q=e:e>r&&(r=e),a.setValues(o,q,p-o,r-q)},b._hasMouseEventListener=function(){for(var b=a._MOUSE_EVENTS,c=0,d=b.length;d>c;c++){if(this.hasEventListener(b[c])){return !0}}return !!this.cursor},createjs.DisplayObject=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function a(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var b=createjs.extend(a,createjs.DisplayObject);b.getNumChildren=function(){return this.children.length};try{Object.defineProperties(b,{numChildren:{get:b.getNumChildren}})}catch(c){}b.initialize=a,b.isVisible=function(){var a=this.cacheCanvas||this.children.length;return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b)){return !0}for(var c=this.children.slice(),d=0,e=c.length;e>d;d++){var f=c[d];f.isVisible()&&(a.save(),f.updateContext(a),f.draw(a),a.restore())}return !0},b.addChild=function(a){if(null==a){return a}var b=arguments.length;if(b>1){for(var c=0;b>c;c++){this.addChild(arguments[c])}return arguments[b-1]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),a.dispatchEvent("added"),a},b.addChildAt=function(a,b){var c=arguments.length,d=arguments[c-1];if(0>d||d>this.children.length){return arguments[c-2]}if(c>2){for(var e=0;c-1>e;e++){this.addChildAt(arguments[e],d+e)}return arguments[c-2]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),a.dispatchEvent("added"),a},b.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;b>d;d++){c=c&&this.removeChild(arguments[d])}return c}return this.removeChildAt(createjs.indexOf(this.children,a))},b.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],d=0;b>d;d++){c[d]=arguments[d]}c.sort(function(a,b){return b-a});for(var e=!0,d=0;b>d;d++){e=e&&this.removeChildAt(c[d])}return e}if(0>a||a>this.children.length-1){return !1}var f=this.children[a];return f&&(f.parent=null),this.children.splice(a,1),f.dispatchEvent("removed"),!0},b.removeAllChildren=function(){for(var a=this.children;a.length;){this.removeChildAt(0)}},b.getChildAt=function(a){return this.children[a]},b.getChildByName=function(a){for(var b=this.children,c=0,d=b.length;d>c;c++){if(b[c].name==a){return b[c]}}return null},b.sortChildren=function(a){this.children.sort(a)},b.getChildIndex=function(a){return createjs.indexOf(this.children,a)},b.swapChildrenAt=function(a,b){var c=this.children,d=c[a],e=c[b];d&&e&&(c[a]=e,c[b]=d)},b.swapChildren=function(a,b){for(var c,d,e=this.children,f=0,g=e.length;g>f&&(e[f]==a&&(c=f),e[f]==b&&(d=f),null==c||null==d);f++){}f!=g&&(e[c]=b,e[d]=a)},b.setChildIndex=function(a,b){var c=this.children,d=c.length;if(!(a.parent!=this||0>b||b>=d)){for(var e=0;d>e&&c[e]!=a;e++){}e!=d&&e!=b&&(c.splice(e,1),c.splice(b,0,a))}},b.contains=function(a){for(;a;){if(a==this){return !0}a=a.parent}return !1},b.hitTest=function(a,b){return null!=this.getObjectUnderPoint(a,b)},b.getObjectsUnderPoint=function(a,b,c){var d=[],e=this.localToGlobal(a,b);return this._getObjectsUnderPoint(e.x,e.y,d,c>0,1==c),d},b.getObjectUnderPoint=function(a,b,c){var d=this.localToGlobal(a,b);return this._getObjectsUnderPoint(d.x,d.y,null,c>0,1==c)},b.getBounds=function(){return this._getBounds(null,!0)},b.getTransformedBounds=function(){return this._getBounds()},b.clone=function(b){var c=this._cloneProps(new a);return b&&this._cloneChildren(c),c},b.toString=function(){return"[Container (name="+this.name+")]"},b._tick=function(a){if(this.tickChildren){for(var b=this.children.length-1;b>=0;b--){var c=this.children[b];c.tickEnabled&&c._tick&&c._tick(a)}}this.DisplayObject__tick(a)},b._cloneChildren=function(a){a.children.length&&a.removeAllChildren();for(var b=a.children,c=0,d=this.children.length;d>c;c++){var e=this.children[c].clone(!0);e.parent=a,b.push(e)}},b._getObjectsUnderPoint=function(b,c,d,e,f,g){if(g=g||0,!g&&!this._testMask(this,b,c)){return null}var h,i=createjs.DisplayObject._hitTestContext;f=f||e&&this._hasMouseEventListener();for(var j=this.children,k=j.length,l=k-1;l>=0;l--){var m=j[l],n=m.hitArea;if(m.visible&&(n||m.isVisible())&&(!e||m.mouseEnabled)&&(n||this._testMask(m,b,c))){if(!n&&m instanceof a){var o=m._getObjectsUnderPoint(b,c,d,e,f,g+1);if(!d&&o){return e&&!this.mouseChildren?this:o}}else{if(e&&!f&&!m._hasMouseEventListener()){continue}var p=m.getConcatenatedDisplayProps(m._props);if(h=p.matrix,n&&(h.appendMatrix(n.getMatrix(n._props.matrix)),p.alpha=n.alpha),i.globalAlpha=p.alpha,i.setTransform(h.a,h.b,h.c,h.d,h.tx-b,h.ty-c),(n||m).draw(i),!this._testHit(i)){continue}if(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,2,2),!d){return e&&!this.mouseChildren?this:m}d.push(m)}}}return null},b._testMask=function(a,b,c){var d=a.mask;if(!d||!d.graphics||d.graphics.isEmpty()){return !0}var e=this._props.matrix,f=a.parent;e=f?f.getConcatenatedMatrix(e):e.identity(),e=d.getMatrix(d._props.matrix).prependMatrix(e);var g=createjs.DisplayObject._hitTestContext;return g.setTransform(e.a,e.b,e.c,e.d,e.tx-b,e.ty-c),d.graphics.drawAsPath(g),g.fillStyle="#000",g.fill(),this._testHit(g)?(g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,2,2),!0):!1},b._getBounds=function(a,b){var c=this.DisplayObject_getBounds();if(c){return this._transformBounds(c,a,b)}var d=this._props.matrix;d=b?d.identity():this.getMatrix(d),a&&d.prependMatrix(a);for(var e=this.children.length,f=null,g=0;e>g;g++){var h=this.children[g];h.visible&&(c=h._getBounds(d))&&(f?f.extend(c.x,c.y,c.width,c.height):f=c.clone())}return f},createjs.Container=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(a){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof a?document.getElementById(a):a,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var b=createjs.extend(a,createjs.Container);b._get_nextStage=function(){return this._nextStage},b._set_nextStage=function(a){this._nextStage&&(this._nextStage._prevStage=null),a&&(a._prevStage=this),this._nextStage=a};try{Object.defineProperties(b,{nextStage:{get:b._get_nextStage,set:b._set_nextStage}})}catch(c){}b.update=function(a){if(this.canvas&&(this.tickOnUpdate&&this.tick(a),this.dispatchEvent("drawstart",!1,!0)!==!1)){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var b=this.drawRect,c=this.canvas.getContext("2d");c.setTransform(1,0,0,1,0,0),this.autoClear&&(b?c.clearRect(b.x,b.y,b.width,b.height):c.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),c.save(),this.drawRect&&(c.beginPath(),c.rect(b.x,b.y,b.width,b.height),c.clip()),this.updateContext(c),this.draw(c,!1),c.restore(),this.dispatchEvent("drawend")}},b.tick=function(a){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var b=new createjs.Event("tick");if(a){for(var c in a){a.hasOwnProperty(c)&&(b[c]=a[c])}}this._tick(b),this.dispatchEvent("tickend")}},b.handleEvent=function(a){"tick"==a.type&&this.update(a)},b.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},b.toDataURL=function(a,b){var c,d=this.canvas.getContext("2d"),e=this.canvas.width,f=this.canvas.height;if(a){c=d.getImageData(0,0,e,f);var g=d.globalCompositeOperation;d.globalCompositeOperation="destination-over",d.fillStyle=a,d.fillRect(0,0,e,f)}var h=this.canvas.toDataURL(b||"image/png");return a&&(d.putImageData(c,0,0),d.globalCompositeOperation=g),h},b.enableMouseOver=function(a){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==a&&this._testMouseOver(!0)),null==a){a=20}else{if(0>=a){return}}var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1000/Math.min(50,a))},b.enableDOMEvents=function(a){null==a&&(a=!0);var b,c,d=this._eventListeners;if(!a&&d){for(b in d){c=d[b],c.t.removeEventListener(b,c.f,!1)}this._eventListeners=null}else{if(a&&!d&&this.canvas){var e=window.addEventListener?window:document,f=this;d=this._eventListeners={},d.mouseup={t:e,f:function(a){f._handleMouseUp(a)}},d.mousemove={t:e,f:function(a){f._handleMouseMove(a)}},d.dblclick={t:this.canvas,f:function(a){f._handleDoubleClick(a)}},d.mousedown={t:this.canvas,f:function(a){f._handleMouseDown(a)}};for(b in d){c=d[b],c.t.addEventListener(b,c.f,!1)}}}},b.clone=function(){throw"Stage cannot be cloned."},b.toString=function(){return"[Stage (name="+this.name+")]"},b._getElementRect=function(a){var b;try{b=a.getBoundingClientRect()}catch(c){b={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var d=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),e=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),f=window.getComputedStyle?getComputedStyle(a,null):a.currentStyle,g=parseInt(f.paddingLeft)+parseInt(f.borderLeftWidth),h=parseInt(f.paddingTop)+parseInt(f.borderTopWidth),i=parseInt(f.paddingRight)+parseInt(f.borderRightWidth),j=parseInt(f.paddingBottom)+parseInt(f.borderBottomWidth);return{left:b.left+d+g,right:b.right+d-i,top:b.top+e+h,bottom:b.bottom+e-j}},b._getPointerData=function(a){var b=this._pointerData[a];return b||(b=this._pointerData[a]={x:0,y:0}),b},b._handleMouseMove=function(a){a||(a=window.event),this._handlePointerMove(-1,a,a.pageX,a.pageY)},b._handlePointerMove=function(a,b,c,d,e){if((!this._prevStage||void 0!==e)&&this.canvas){var f=this._nextStage,g=this._getPointerData(a),h=g.inBounds;this._updatePointerPosition(a,b,c,d),(h||g.inBounds||this.mouseMoveOutside)&&(-1===a&&g.inBounds==!h&&this._dispatchMouseEvent(this,h?"mouseleave":"mouseenter",!1,a,g,b),this._dispatchMouseEvent(this,"stagemousemove",!1,a,g,b),this._dispatchMouseEvent(g.target,"pressmove",!0,a,g,b)),f&&f._handlePointerMove(a,b,c,d,null)}},b._updatePointerPosition=function(a,b,c,d){var e=this._getElementRect(this.canvas);c-=e.left,d-=e.top;var f=this.canvas.width,g=this.canvas.height;c/=(e.right-e.left)/f,d/=(e.bottom-e.top)/g;var h=this._getPointerData(a);(h.inBounds=c>=0&&d>=0&&f-1>=c&&g-1>=d)?(h.x=c,h.y=d):this.mouseMoveOutside&&(h.x=0>c?0:c>f-1?f-1:c,h.y=0>d?0:d>g-1?g-1:d),h.posEvtObj=b,h.rawX=c,h.rawY=d,a!==this._primaryPointerID&&-1!==a||(this.mouseX=h.x,this.mouseY=h.y,this.mouseInBounds=h.inBounds)},b._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)},b._handlePointerUp=function(a,b,c,d){var e=this._nextStage,f=this._getPointerData(a);if(!this._prevStage||void 0!==d){var g=null,h=f.target;d||!h&&!e||(g=this._getObjectsUnderPoint(f.x,f.y,null,!0)),f.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,a,f,b,g),f.down=!1),g==h&&this._dispatchMouseEvent(h,"click",!0,a,f,b),this._dispatchMouseEvent(h,"pressup",!0,a,f,b),c?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):f.target=null,e&&e._handlePointerUp(a,b,c,d||g&&this)}},b._handleMouseDown=function(a){this._handlePointerDown(-1,a,a.pageX,a.pageY)},b._handlePointerDown=function(a,b,c,d,e){this.preventSelection&&b.preventDefault(),null!=this._primaryPointerID&&-1!==a||(this._primaryPointerID=a),null!=d&&this._updatePointerPosition(a,b,c,d);var f=null,g=this._nextStage,h=this._getPointerData(a);e||(f=h.target=this._getObjectsUnderPoint(h.x,h.y,null,!0)),h.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,a,h,b,f),h.down=!0),this._dispatchMouseEvent(f,"mousedown",!0,a,h,b),g&&g._handlePointerDown(a,b,c,d,e||f&&this)},b._testMouseOver=function(a,b,c){if(!this._prevStage||void 0!==b){var d=this._nextStage;if(!this._mouseOverIntervalID){return void (d&&d._testMouseOver(a,b,c))}var e=this._getPointerData(-1);if(e&&(a||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var f,g,h,i=e.posEvtObj,j=c||i&&i.target==this.canvas,k=null,l=-1,m="";!b&&(a||this.mouseInBounds&&j)&&(k=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var n=this._mouseOverTarget||[],o=n[n.length-1],p=this._mouseOverTarget=[];for(f=k;f;){p.unshift(f),m||(m=f.cursor),f=f.parent}for(this.canvas.style.cursor=m,!b&&c&&(c.canvas.style.cursor=m),g=0,h=p.length;h>g&&p[g]==n[g];g++){l=g}for(o!=k&&this._dispatchMouseEvent(o,"mouseout",!0,-1,e,i,k),g=n.length-1;g>l;g--){this._dispatchMouseEvent(n[g],"rollout",!1,-1,e,i,k)}for(g=p.length-1;g>l;g--){this._dispatchMouseEvent(p[g],"rollover",!1,-1,e,i,o)}o!=k&&this._dispatchMouseEvent(k,"mouseover",!0,-1,e,i,o),d&&d._testMouseOver(a,b||k&&this,c||j&&this)}}},b._handleDoubleClick=function(a,b){var c=null,d=this._nextStage,e=this._getPointerData(-1);b||(c=this._getObjectsUnderPoint(e.x,e.y,null,!0),this._dispatchMouseEvent(c,"dblclick",!0,-1,e,a)),d&&d._handleDoubleClick(a,b||c&&this)},b._dispatchMouseEvent=function(a,b,c,d,e,f,g){if(a&&(c||a.hasEventListener(b))){var h=new createjs.MouseEvent(b,c,!1,e.x,e.y,f,d,d===this._primaryPointerID||-1===d,e.rawX,e.rawY,g);a.dispatchEvent(h)}},createjs.Stage=createjs.promote(a,"Container")}(),this.createjs=this.createjs||{},function(){function a(a){this.DisplayObject_constructor(),"string"==typeof a?(this.image=document.createElement("img"),this.image.src=a):this.image=a,this.sourceRect=null}var b=createjs.extend(a,createjs.DisplayObject);b.initialize=a,b.isVisible=function(){var a=this.image,b=this.cacheCanvas||a&&(a.naturalWidth||a.getContext||a.readyState>=2);return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b)||!this.image){return !0}var c=this.image,d=this.sourceRect;if(d){var e=d.x,f=d.y,g=e+d.width,h=f+d.height,i=0,j=0,k=c.width,l=c.height;0>e&&(i-=e,e=0),g>k&&(g=k),0>f&&(j-=f,f=0),h>l&&(h=l),a.drawImage(c,e,f,g-e,h-f,i,j,g-e,h-f)}else{a.drawImage(c,0,0)}return !0},b.getBounds=function(){var a=this.DisplayObject_getBounds();if(a){return a}var b=this.image,c=this.sourceRect||b,d=b&&(b.naturalWidth||b.getContext||b.readyState>=2);return d?this._rectangle.setValues(0,0,c.width,c.height):null},b.clone=function(){var b=new a(this.image);return this.sourceRect&&(b.sourceRect=this.sourceRect.clone()),this._cloneProps(b),b},b.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(a,b){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=a,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=b&&this.gotoAndPlay(b)}var b=createjs.extend(a,createjs.DisplayObject);b.initialize=a,b.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet.complete;return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b)){return !0}this._normalizeFrame();var c=this.spriteSheet.getFrame(0|this._currentFrame);if(!c){return !1}var d=c.rect;return d.width&&d.height&&a.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height),!0},b.play=function(){this.paused=!1},b.stop=function(){this.paused=!0},b.gotoAndPlay=function(a){this.paused=!1,this._skipAdvance=!0,this._goto(a)},b.gotoAndStop=function(a){this.paused=!0,this._goto(a)},b.advance=function(a){var b=this.framerate||this.spriteSheet.framerate,c=b&&null!=a?a/(1000/b):1;this._normalizeFrame(c)},b.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},b.clone=function(){return this._cloneProps(new a(this.spriteSheet))},b.toString=function(){return"[Sprite (name="+this.name+")]"},b._cloneProps=function(a){return this.DisplayObject__cloneProps(a),a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.currentAnimationFrame=this.currentAnimationFrame,a.framerate=this.framerate,a._animation=this._animation,a._currentFrame=this._currentFrame,a._skipAdvance=this._skipAdvance,a},b._tick=function(a){this.paused||(this._skipAdvance||this.advance(a&&a.delta),this._skipAdvance=!1),this.DisplayObject__tick(a)},b._normalizeFrame=function(a){a=a||0;var b,c=this._animation,d=this.paused,e=this._currentFrame;if(c){var f=c.speed||1,g=this.currentAnimationFrame;if(b=c.frames.length,g+a*f>=b){var h=c.next;if(this._dispatchAnimationEnd(c,e,d,h,b-1)){return}if(h){return this._goto(h,a-(b-g)/f)}this.paused=!0,g=c.frames.length-1}else{g+=a*f}this.currentAnimationFrame=g,this._currentFrame=c.frames[0|g]}else{if(e=this._currentFrame+=a,b=this.spriteSheet.getNumFrames(),e>=b&&b>0&&!this._dispatchAnimationEnd(c,e,d,b-1)&&(this._currentFrame-=b)>=b){return this._normalizeFrame()}}e=0|this._currentFrame,this.currentFrame!=e&&(this.currentFrame=e,this.dispatchEvent("change"))},b._dispatchAnimationEnd=function(a,b,c,d,e){var f=a?a.name:null;if(this.hasEventListener("animationend")){var g=new createjs.Event("animationend");g.name=f,g.next=d,this.dispatchEvent(g)}var h=this._animation!=a||this._currentFrame!=b;return h||c||!this.paused||(this.currentAnimationFrame=e,h=!0),h},b._goto=function(a,b){if(this.currentAnimationFrame=0,isNaN(a)){var c=this.spriteSheet.getAnimation(a);c&&(this._animation=c,this.currentAnimation=a,this._normalizeFrame(b))}else{this.currentAnimation=this._animation=null,this._currentFrame=a,this._normalizeFrame()}},createjs.Sprite=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(a){this.DisplayObject_constructor(),this.graphics=a?a:new createjs.Graphics}var b=createjs.extend(a,createjs.DisplayObject);b.isVisible=function(){var a=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this.graphics.draw(a,this),!0)},b.clone=function(b){var c=b&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new a(c))},b.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(a,b,c){this.DisplayObject_constructor(),this.text=a,this.font=b,this.color=c,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var b=createjs.extend(a,createjs.DisplayObject),c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");c.getContext&&(a._workingContext=c.getContext("2d"),c.width=c.height=1),a.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1},a.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1},b.isVisible=function(){var a=this.cacheCanvas||null!=this.text&&""!==this.text;return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.draw=function(a,b){if(this.DisplayObject_draw(a,b)){return !0}var c=this.color||"#000";return this.outline?(a.strokeStyle=c,a.lineWidth=1*this.outline):a.fillStyle=c,this._drawText(this._prepContext(a)),!0},b.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},b.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},b.getMeasuredHeight=function(){return this._drawText(null,{}).height},b.getBounds=function(){var b=this.DisplayObject_getBounds();if(b){return b}if(null==this.text||""===this.text){return null}var c=this._drawText(null,{}),d=this.maxWidth&&this.maxWidth<c.width?this.maxWidth:c.width,e=d*a.H_OFFSETS[this.textAlign||"left"],f=this.lineHeight||this.getMeasuredLineHeight(),g=f*a.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(e,g,d,c.height)},b.getMetrics=function(){var b={lines:[]};return b.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),b.vOffset=b.lineHeight*a.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,b,b.lines)},b.clone=function(){return this._cloneProps(new a(this.text,this.font,this.color))},b.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},b._cloneProps=function(a){return this.DisplayObject__cloneProps(a),a.textAlign=this.textAlign,a.textBaseline=this.textBaseline,a.maxWidth=this.maxWidth,a.outline=this.outline,a.lineHeight=this.lineHeight,a.lineWidth=this.lineWidth,a},b._prepContext=function(a){return a.font=this.font||"10px sans-serif",a.textAlign=this.textAlign||"left",a.textBaseline=this.textBaseline||"top",a},b._drawText=function(b,c,d){var e=!!b;e||(b=a._workingContext,b.save(),this._prepContext(b));for(var f=this.lineHeight||this.getMeasuredLineHeight(),g=0,h=0,i=String(this.text).split(/(?:\r\n|\r|\n)/),j=0,k=i.length;k>j;j++){var l=i[j],m=null;if(null!=this.lineWidth&&(m=b.measureText(l).width)>this.lineWidth){var n=l.split(/(\s)/);l=n[0],m=b.measureText(l).width;for(var o=1,p=n.length;p>o;o+=2){var q=b.measureText(n[o]+n[o+1]).width;m+q>this.lineWidth?(e&&this._drawTextLine(b,l,h*f),d&&d.push(l),m>g&&(g=m),l=n[o+1],m=b.measureText(l).width,h++):(l+=n[o]+n[o+1],m+=q)}}e&&this._drawTextLine(b,l,h*f),d&&d.push(l),c&&null==m&&(m=b.measureText(l).width),m>g&&(g=m),h++}return c&&(c.width=g,c.height=h*f),e||b.restore(),c},b._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth||65535):a.fillText(b,0,c,this.maxWidth||65535)},b._getMeasuredWidth=function(b){var c=a._workingContext;c.save();var d=this._prepContext(c).measureText(b).width;return c.restore(),d},createjs.Text=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(a,b){this.Container_constructor(),this.text=a||"",this.spriteSheet=b,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var b=createjs.extend(a,createjs.Container);a.maxPoolSize=100,a._spritePool=[],b.draw=function(a,b){this.DisplayObject_draw(a,b)||(this._updateText(),this.Container_draw(a,b))},b.getBounds=function(){return this._updateText(),this.Container_getBounds()},b.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return !!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&a)},b.clone=function(){return this._cloneProps(new a(this.text,this.spriteSheet))},b.addChild=b.addChildAt=b.removeChild=b.removeChildAt=b.removeAllChildren=function(){},b._cloneProps=function(a){return this.Container__cloneProps(a),a.lineHeight=this.lineHeight,a.letterSpacing=this.letterSpacing,a.spaceWidth=this.spaceWidth,a},b._getFrameIndex=function(a,b){var c,d=b.getAnimation(a);return d||(a!=(c=a.toUpperCase())||a!=(c=a.toLowerCase())||(c=null),c&&(d=b.getAnimation(c))),d&&d.frames[0]},b._getFrame=function(a,b){var c=this._getFrameIndex(a,b);return null==c?c:b.getFrame(c)},b._getLineHeight=function(a){var b=this._getFrame("1",a)||this._getFrame("T",a)||this._getFrame("L",a)||a.getFrame(0);return b?b.rect.height:1},b._getSpaceWidth=function(a){var b=this._getFrame("1",a)||this._getFrame("l",a)||this._getFrame("e",a)||this._getFrame("a",a)||a.getFrame(0);return b?b.rect.width:1},b._updateText=function(){var b,c=0,d=0,e=this._oldProps,f=!1,g=this.spaceWidth,h=this.lineHeight,i=this.spriteSheet,j=a._spritePool,k=this.children,l=0,m=k.length;for(var n in e){e[n]!=this[n]&&(e[n]=this[n],f=!0)}if(f){var o=!!this._getFrame(" ",i);o||g||(g=this._getSpaceWidth(i)),h||(h=this._getLineHeight(i));for(var p=0,q=this.text.length;q>p;p++){var r=this.text.charAt(p);if(" "!=r||o){if("\n"!=r&&"\r"!=r){var s=this._getFrameIndex(r,i);null!=s&&(m>l?b=k[l]:(k.push(b=j.length?j.pop():new createjs.Sprite),b.parent=this,m++),b.spriteSheet=i,b.gotoAndStop(s),b.x=c,b.y=d,l++,c+=b.getBounds().width+this.letterSpacing)}else{"\r"==r&&"\n"==this.text.charAt(p+1)&&p++,c=0,d+=h}}else{c+=g}}for(;m>l;){j.push(b=k.pop()),b.parent=null,m--}j.length>a.maxPoolSize&&(j.length=a.maxPoolSize)}},createjs.BitmapText=createjs.promote(a,"Container")}(),this.createjs=this.createjs||{},function(){function a(b,c,d,e){this.Container_constructor(),!a.inited&&a.init(),this.mode=b||a.INDEPENDENT,this.startPosition=c||0,this.loop=d,this.currentFrame=0,this.timeline=new createjs.Timeline(null,e,{paused:!0,position:c,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function b(){throw"MovieClipPlugin cannot be instantiated."}var c=createjs.extend(a,createjs.Container);a.INDEPENDENT="independent",a.SINGLE_FRAME="single",a.SYNCHED="synched",a.inited=!1,a.init=function(){a.inited||(b.install(),a.inited=!0)},c.getLabels=function(){return this.timeline.getLabels()},c.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},c.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(c,{labels:{get:c.getLabels},currentLabel:{get:c.getCurrentLabel},totalFrames:{get:c.getDuration},duration:{get:c.getDuration}})}catch(d){}c.initialize=a,c.isVisible=function(){return !!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},c.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this._updateTimeline(),this.Container_draw(a,b),!0)},c.play=function(){this.paused=!1},c.stop=function(){this.paused=!0},c.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},c.gotoAndStop=function(a){this.paused=!0,this._goto(a)},c.advance=function(b){var c=a.INDEPENDENT;if(this.mode==c){for(var d=this,e=d.framerate;(d=d.parent)&&null==e;){d.mode==c&&(e=d._framerate)}this._framerate=e;var f=null!=e&&-1!=e&&null!=b?b/(1000/e)+this._t:1,g=0|f;for(this._t=f-g;!this.paused&&g--;){this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}}},c.clone=function(){throw"MovieClip cannot be cloned."},c.toString=function(){return"[MovieClip (name="+this.name+")]"},c._tick=function(a){this.advance(a&&a.delta),this.Container__tick(a)},c._goto=function(a){var b=this.timeline.resolve(a);null!=b&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=b,this._t=0,this._updateTimeline())},c._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},c._updateTimeline=function(){var b=this.timeline,c=this.mode!=a.INDEPENDENT;b.loop=null==this.loop?!0:this.loop;var d=c?this.startPosition+(this.mode==a.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,e=c||!this.actionsEnabled?createjs.Tween.NONE:null;if(this.currentFrame=b._calcPosition(d),b.setPosition(d,e),this._prevPosition=b._prevPosition,this._prevPos!=b._prevPos){this.currentFrame=this._prevPos=b._prevPos;for(var f in this._managed){this._managed[f]=1}for(var g=b._tweens,h=0,i=g.length;i>h;h++){var j=g[h],k=j._target;if(k!=this&&!j.passive){var l=j._stepPosition;k instanceof createjs.DisplayObject?this._addManagedChild(k,l):this._setState(k.state,l)}}var m=this.children;for(h=m.length-1;h>=0;h--){var n=m[h].id;1==this._managed[n]&&(this.removeChildAt(h),delete this._managed[n])}}},c._setState=function(a,b){if(a){for(var c=a.length-1;c>=0;c--){var d=a[c],e=d.t,f=d.p;for(var g in f){e[g]=f[g]}this._addManagedChild(e,b)}}},c._addManagedChild=function(b,c){b._off||(this.addChildAt(b,0),b instanceof a&&(b._synchOffset=c,b.mode==a.INDEPENDENT&&b.autoReset&&!this._managed[b.id]&&b._reset()),this._managed[b.id]=2)},c._getBounds=function(a,b){var c=this.DisplayObject_getBounds();return c||(this._updateTimeline(),this.frameBounds&&(c=this._rectangle.copy(this.frameBounds[this.currentFrame]))),c?this._transformBounds(c,a,b):this.Container__getBounds(a,b)},createjs.MovieClip=createjs.promote(a,"Container"),b.priority=100,b.install=function(){createjs.Tween.installPlugin(b,["startPosition"])},b.init=function(a,b,c){return c},b.step=function(){},b.tween=function(b,c,d,e,f,g,h,i){return b.target instanceof a?1==g?f[c]:e[c]:d}}(),this.createjs=this.createjs||{},function(){function a(){throw"SpriteSheetUtils cannot be instantiated"}var b=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");b.getContext&&(a._workingCanvas=b,a._workingContext=b.getContext("2d"),b.width=b.height=1),a.addFlippedFrames=function(b,c,d,e){if(c||d||e){var f=0;c&&a._flip(b,++f,!0,!1),d&&a._flip(b,++f,!1,!0),e&&a._flip(b,++f,!0,!0)}},a.extractFrame=function(b,c){isNaN(c)&&(c=b.getAnimation(c).frames[0]);var d=b.getFrame(c);if(!d){return null}var e=d.rect,f=a._workingCanvas;f.width=e.width,f.height=e.height,a._workingContext.drawImage(d.image,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var g=document.createElement("img");return g.src=f.toDataURL("image/png"),g},a.mergeAlpha=function(a,b,c){c||(c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),c.width=Math.max(b.width,a.width),c.height=Math.max(b.height,a.height);var d=c.getContext("2d");return d.save(),d.drawImage(a,0,0),d.globalCompositeOperation="destination-in",d.drawImage(b,0,0),d.restore(),c},a._flip=function(b,c,d,e){for(var f=b._images,g=a._workingCanvas,h=a._workingContext,i=f.length/c,j=0;i>j;j++){var k=f[j];k.__tmp=j,h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,g.width+1,g.height+1),g.width=k.width,g.height=k.height,h.setTransform(d?-1:1,0,0,e?-1:1,d?k.width:0,e?k.height:0),h.drawImage(k,0,0);var l=document.createElement("img");l.src=g.toDataURL("image/png"),l.width=k.width,l.height=k.height,f.push(l)}var m=b._frames,n=m.length/c;for(j=0;n>j;j++){k=m[j];var o=k.rect.clone();l=f[k.image.__tmp+i*c];var p={image:l,rect:o,regX:k.regX,regY:k.regY};d&&(o.x=l.width-o.x-o.width,p.regX=o.width-k.regX),e&&(o.y=l.height-o.y-o.height,p.regY=o.height-k.regY),m.push(p)}var q="_"+(d?"h":"")+(e?"v":""),r=b._animations,s=b._data,t=r.length/c;for(j=0;t>j;j++){var u=r[j];k=s[u];var v={name:u+q,speed:k.speed,next:k.next,frames:[]};k.next&&(v.next+=q),m=k.frames;for(var w=0,x=m.length;x>w;w++){v.frames.push(m[w]+n*c)}s[v.name]=v,r.push(v.name)}},createjs.SpriteSheetUtils=a}(),this.createjs=this.createjs||{},function(){function a(a){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=0.3,this.progress=-1,this.framerate=a||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var b=createjs.extend(a,createjs.EventDispatcher);a.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",a.ERR_RUNNING="a build is already running",b.addFrame=function(b,c,d,e,f){if(this._data){throw a.ERR_RUNNING}var g=c||b.bounds||b.nominalBounds;return !g&&b.getBounds&&(g=b.getBounds()),g?(d=d||1,this._frames.push({source:b,sourceRect:g,scale:d,funct:e,data:f,index:this._frames.length,height:g.height*d})-1):null},b.addAnimation=function(b,c,d,e){if(this._data){throw a.ERR_RUNNING}this._animations[b]={frames:c,next:d,speed:e}},b.addMovieClip=function(b,c,d,e,f,g){if(this._data){throw a.ERR_RUNNING}var h=b.frameBounds,i=c||b.bounds||b.nominalBounds;if(!i&&b.getBounds&&(i=b.getBounds()),i||h){var j,k,l=this._frames.length,m=b.timeline.duration;for(j=0;m>j;j++){var n=h&&h[j]?h[j]:i;this.addFrame(b,n,d,this._setupMovieClipFrame,{i:j,f:e,d:f})}var o=b.timeline._labels,p=[];for(var q in o){p.push({index:o[q],label:q})}if(p.length){for(p.sort(function(a,b){return a.index-b.index}),j=0,k=p.length;k>j;j++){for(var r=p[j].label,s=l+p[j].index,t=l+(j==k-1?m:p[j+1].index),u=[],v=s;t>v;v++){u.push(v)}g&&!(r=g(r,b,s,t))||this.addAnimation(r,u,!0)}}}},b.build=function(){if(this._data){throw a.ERR_RUNNING}for(this._startBuild();this._drawNext();){}return this._endBuild(),this.spriteSheet},b.buildAsync=function(b){if(this._data){throw a.ERR_RUNNING}this.timeSlice=b,this._startBuild();var c=this;this._timerID=setTimeout(function(){c._run()},50-50*Math.max(0.01,Math.min(0.99,this.timeSlice||0.3)))},b.stopAsync=function(){clearTimeout(this._timerID),this._data=null},b.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},b.toString=function(){return"[SpriteSheetBuilder]"},b._startBuild=function(){var b=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var c=[];this._data={images:[],frames:c,framerate:this.framerate,animations:this._animations};var d=this._frames.slice();if(d.sort(function(a,b){return a.height<=b.height?-1:1}),d[d.length-1].height+2*b>this.maxHeight){throw a.ERR_DIMENSIONS}for(var e=0,f=0,g=0;d.length;){var h=this._fillRow(d,e,g,c,b);if(h.w>f&&(f=h.w),e+=h.h,!h.h||!d.length){var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.width=this._getSize(f,this.maxWidth),i.height=this._getSize(e,this.maxHeight),this._data.images[g]=i,h.h||(f=e=0,g++)}}},b._setupMovieClipFrame=function(a,b){var c=a.actionsEnabled;a.actionsEnabled=!1,a.gotoAndStop(b.i),a.actionsEnabled=c,b.f&&b.f(a,b.d,b.i)},b._getSize=function(a,b){for(var c=4;Math.pow(2,++c)<a;){}return Math.min(b,Math.pow(2,c))},b._fillRow=function(b,c,d,e,f){var g=this.maxWidth,h=this.maxHeight;c+=f;for(var i=h-c,j=f,k=0,l=b.length-1;l>=0;l--){var m=b[l],n=this._scale*m.scale,o=m.sourceRect,p=m.source,q=Math.floor(n*o.x-f),r=Math.floor(n*o.y-f),s=Math.ceil(n*o.height+2*f),t=Math.ceil(n*o.width+2*f);if(t>g){throw a.ERR_DIMENSIONS}s>i||j+t>g||(m.img=d,m.rect=new createjs.Rectangle(j,c,t,s),k=k||s,b.splice(l,1),e[m.index]=[j,c,t,s,d,Math.round(-q+n*p.regX-f),Math.round(-r+n*p.regY-f)],j+=t)}return{w:j,h:k}},b._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},b._run=function(){for(var a=50*Math.max(0.01,Math.min(0.99,this.timeSlice||0.3)),b=(new Date).getTime()+a,c=!1;b>(new Date).getTime();){if(!this._drawNext()){c=!0;break}}if(c){this._endBuild()}else{var d=this;this._timerID=setTimeout(function(){d._run()},50-a)}var e=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var f=new createjs.Event("progress");f.progress=e,this.dispatchEvent(f)}},b._drawNext=function(){var a=this._frames[this._index],b=a.scale*this._scale,c=a.rect,d=a.sourceRect,e=this._data.images[a.img],f=e.getContext("2d");return a.funct&&a.funct(a.source,a.data),f.save(),f.beginPath(),f.rect(c.x,c.y,c.width,c.height),f.clip(),f.translate(Math.ceil(c.x-d.x*b),Math.ceil(c.y-d.y*b)),f.scale(b,b),a.source.draw(f),f.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function a(a){this.DisplayObject_constructor(),"string"==typeof a&&(a=document.getElementById(a)),this.mouseEnabled=!1;var b=a.style;b.position="absolute",b.transformOrigin=b.WebkitTransformOrigin=b.msTransformOrigin=b.MozTransformOrigin=b.OTransformOrigin="0% 0%",this.htmlElement=a,this._oldProps=null}var b=createjs.extend(a,createjs.DisplayObject);b.isVisible=function(){return null!=this.htmlElement},b.draw=function(a,b){return !0},b.cache=function(){},b.uncache=function(){},b.updateCache=function(){},b.hitTest=function(){},b.localToGlobal=function(){},b.globalToLocal=function(){},b.localToLocal=function(){},b.clone=function(){throw"DOMElement cannot be cloned."},b.toString=function(){return"[DOMElement (name="+this.name+")]"},b._tick=function(a){var b=this.getStage();b&&b.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(a)},b._handleDrawEnd=function(a){var b=this.htmlElement;if(b){var c=b.style,d=this.getConcatenatedDisplayProps(this._props),e=d.matrix,f=d.visible?"visible":"hidden";if(f!=c.visibility&&(c.visibility=f),d.visible){var g=this._oldProps,h=g&&g.matrix,i=10000;if(!h||!h.equals(e)){var j="matrix("+(e.a*i|0)/i+","+(e.b*i|0)/i+","+(e.c*i|0)/i+","+(e.d*i|0)/i+","+(e.tx+0.5|0);c.transform=c.WebkitTransform=c.OTransform=c.msTransform=j+","+(e.ty+0.5|0)+")",c.MozTransform=j+"px,"+(e.ty+0.5|0)+"px)",g||(g=this._oldProps=new createjs.DisplayProps(!0,NaN)),g.matrix.copy(e)}g.alpha!=d.alpha&&(c.opacity=""+(d.alpha*i|0)/i,g.alpha=d.alpha)}}},createjs.DOMElement=createjs.promote(a,"DisplayObject")}(),this.createjs=this.createjs||{},function(){function a(){}var b=a.prototype;b.getBounds=function(a){return a},b.applyFilter=function(a,b,c,d,e,f,g,h){f=f||a,null==g&&(g=b),null==h&&(h=c);try{var i=a.getImageData(b,c,d,e)}catch(j){return !1}return this._applyFilter(i)?(f.putImageData(i,g,h),!0):!1},b.toString=function(){return"[Filter]"},b.clone=function(){return new a},b._applyFilter=function(a){return !0},createjs.Filter=a}(),this.createjs=this.createjs||{},function(){function a(a,b,c){(isNaN(a)||0>a)&&(a=0),(isNaN(b)||0>b)&&(b=0),(isNaN(c)||1>c)&&(c=1),this.blurX=0|a,this.blurY=0|b,this.quality=0|c}var b=createjs.extend(a,createjs.Filter);a.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],a.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],b.getBounds=function(a){var b=0|this.blurX,c=0|this.blurY;if(0>=b&&0>=c){return a}var d=Math.pow(this.quality,0.2);return(a||new createjs.Rectangle).pad(b*d+1,c*d+1,b*d+1,c*d+1)},b.clone=function(){return new a(this.blurX,this.blurY,this.quality)},b.toString=function(){return"[BlurFilter]"},b._applyFilter=function(b){var c=this.blurX>>1;if(isNaN(c)||0>c){return !1}var d=this.blurY>>1;if(isNaN(d)||0>d){return !1}if(0==c&&0==d){return !1}var e=this.quality;(isNaN(e)||1>e)&&(e=1),e|=0,e>3&&(e=3),1>e&&(e=1);var f=b.data,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=c+c+1|0,w=d+d+1|0,x=0|b.width,y=0|b.height,z=x-1|0,A=y-1|0,B=c+1|0,C=d+1|0,D={r:0,b:0,g:0,a:0},E=D;for(i=1;v>i;i++){E=E.n={r:0,b:0,g:0,a:0}}E.n=D;var F={r:0,b:0,g:0,a:0},G=F;for(i=1;w>i;i++){G=G.n={r:0,b:0,g:0,a:0}}G.n=F;for(var H=null,I=0|a.MUL_TABLE[c],J=0|a.SHG_TABLE[c],K=0|a.MUL_TABLE[d],L=0|a.SHG_TABLE[d];e-->0;){m=l=0;var M=I,N=J;for(h=y;--h>-1;){for(n=B*(r=f[0|l]),o=B*(s=f[l+1|0]),p=B*(t=f[l+2|0]),q=B*(u=f[l+3|0]),E=D,i=B;--i>-1;){E.r=r,E.g=s,E.b=t,E.a=u,E=E.n}for(i=1;B>i;i++){j=l+((i>z?z:i)<<2)|0,n+=E.r=f[j],o+=E.g=f[j+1],p+=E.b=f[j+2],q+=E.a=f[j+3],E=E.n}for(H=D,g=0;x>g;g++){f[l++]=n*M>>>N,f[l++]=o*M>>>N,f[l++]=p*M>>>N,f[l++]=q*M>>>N,j=m+((j=g+c+1)<z?j:z)<<2,n-=H.r-(H.r=f[j]),o-=H.g-(H.g=f[j+1]),p-=H.b-(H.b=f[j+2]),q-=H.a-(H.a=f[j+3]),H=H.n}m+=x}for(M=K,N=L,g=0;x>g;g++){for(l=g<<2|0,n=C*(r=f[l])|0,o=C*(s=f[l+1|0])|0,p=C*(t=f[l+2|0])|0,q=C*(u=f[l+3|0])|0,G=F,i=0;C>i;i++){G.r=r,G.g=s,G.b=t,G.a=u,G=G.n}for(k=x,i=1;d>=i;i++){l=k+g<<2,n+=G.r=f[l],o+=G.g=f[l+1],p+=G.b=f[l+2],q+=G.a=f[l+3],G=G.n,A>i&&(k+=x)}if(l=g,H=F,e>0){for(h=0;y>h;h++){j=l<<2,f[j+3]=u=q*M>>>N,u>0?(f[j]=n*M>>>N,f[j+1]=o*M>>>N,f[j+2]=p*M>>>N):f[j]=f[j+1]=f[j+2]=0,j=g+((j=h+C)<A?j:A)*x<<2,n-=H.r-(H.r=f[j]),o-=H.g-(H.g=f[j+1]),p-=H.b-(H.b=f[j+2]),q-=H.a-(H.a=f[j+3]),H=H.n,l+=x}}else{for(h=0;y>h;h++){j=l<<2,f[j+3]=u=q*M>>>N,u>0?(u=255/u,f[j]=(n*M>>>N)*u,f[j+1]=(o*M>>>N)*u,f[j+2]=(p*M>>>N)*u):f[j]=f[j+1]=f[j+2]=0,j=g+((j=h+C)<A?j:A)*x<<2,n-=H.r-(H.r=f[j]),o-=H.g-(H.g=f[j+1]),p-=H.b-(H.b=f[j+2]),q-=H.a-(H.a=f[j+3]),H=H.n,l+=x}}}}return !0},createjs.BlurFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(a){this.alphaMap=a,this._alphaMap=null,this._mapData=null}var b=createjs.extend(a,createjs.Filter);b.clone=function(){var b=new a(this.alphaMap);return b._alphaMap=this._alphaMap,b._mapData=this._mapData,b},b.toString=function(){return"[AlphaMapFilter]"},b._applyFilter=function(a){if(!this.alphaMap){return !0}if(!this._prepAlphaMap()){return !1}for(var b=a.data,c=this._mapData,d=0,e=b.length;e>d;d+=4){b[d+3]=c[d]||0}return !0},b._prepAlphaMap=function(){if(!this.alphaMap){return !1}if(this.alphaMap==this._alphaMap&&this._mapData){return !0}this._mapData=null;var a,b=this._alphaMap=this.alphaMap,c=b;b instanceof HTMLCanvasElement?a=c.getContext("2d"):(c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),c.width=b.width,c.height=b.height,a=c.getContext("2d"),a.drawImage(b,0,0));try{var d=a.getImageData(0,0,b.width,b.height)}catch(e){return !1}return this._mapData=d.data,!0},createjs.AlphaMapFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(a){this.mask=a}var b=createjs.extend(a,createjs.Filter);b.applyFilter=function(a,b,c,d,e,f,g,h){return this.mask?(f=f||a,null==g&&(g=b),null==h&&(h=c),f.save(),a!=f?!1:(f.globalCompositeOperation="destination-in",f.drawImage(this.mask,g,h),f.restore(),!0)):!0},b.clone=function(){return new a(this.mask)},b.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(a,b,c,d,e,f,g,h){this.redMultiplier=null!=a?a:1,this.greenMultiplier=null!=b?b:1,this.blueMultiplier=null!=c?c:1,this.alphaMultiplier=null!=d?d:1,this.redOffset=e||0,this.greenOffset=f||0,this.blueOffset=g||0,this.alphaOffset=h||0}var b=createjs.extend(a,createjs.Filter);b.toString=function(){return"[ColorFilter]"},b.clone=function(){return new a(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},b._applyFilter=function(a){for(var b=a.data,c=b.length,d=0;c>d;d+=4){b[d]=b[d]*this.redMultiplier+this.redOffset,b[d+1]=b[d+1]*this.greenMultiplier+this.greenOffset,b[d+2]=b[d+2]*this.blueMultiplier+this.blueOffset,b[d+3]=b[d+3]*this.alphaMultiplier+this.alphaOffset}return !0},createjs.ColorFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(a,b,c,d){this.setColor(a,b,c,d)}var b=a.prototype;a.DELTA_INDEX=[0,0.01,0.02,0.04,0.05,0.06,0.07,0.08,0.1,0.11,0.12,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.25,0.27,0.28,0.3,0.32,0.34,0.36,0.38,0.4,0.42,0.44,0.46,0.48,0.5,0.53,0.56,0.59,0.62,0.65,0.68,0.71,0.74,0.77,0.8,0.83,0.86,0.89,0.92,0.95,0.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],a.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],a.LENGTH=a.IDENTITY_MATRIX.length,b.setColor=function(a,b,c,d){return this.reset().adjustColor(a,b,c,d)},b.reset=function(){return this.copy(a.IDENTITY_MATRIX)},b.adjustColor=function(a,b,c,d){return this.adjustHue(d),this.adjustContrast(b),this.adjustBrightness(a),this.adjustSaturation(c)},b.adjustBrightness=function(a){return 0==a||isNaN(a)?this:(a=this._cleanValue(a,255),this._multiplyMatrix([1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0,0,0,0,0,1]),this)},b.adjustContrast=function(b){if(0==b||isNaN(b)){return this}b=this._cleanValue(b,100);var c;return 0>b?c=127+b/100*127:(c=b%1,c=0==c?a.DELTA_INDEX[b]:a.DELTA_INDEX[b<<0]*(1-c)+a.DELTA_INDEX[(b<<0)+1]*c,c=127*c+127),this._multiplyMatrix([c/127,0,0,0,0.5*(127-c),0,c/127,0,0,0.5*(127-c),0,0,c/127,0,0.5*(127-c),0,0,0,1,0,0,0,0,0,1]),this},b.adjustSaturation=function(a){if(0==a||isNaN(a)){return this}a=this._cleanValue(a,100);var b=1+(a>0?3*a/100:a/100),c=0.3086,d=0.6094,e=0.082;return this._multiplyMatrix([c*(1-b)+b,d*(1-b),e*(1-b),0,0,c*(1-b),d*(1-b)+b,e*(1-b),0,0,c*(1-b),d*(1-b),e*(1-b)+b,0,0,0,0,0,1,0,0,0,0,0,1]),this},b.adjustHue=function(a){if(0==a||isNaN(a)){return this}a=this._cleanValue(a,180)/180*Math.PI;var b=Math.cos(a),c=Math.sin(a),d=0.213,e=0.715,f=0.072;return this._multiplyMatrix([d+b*(1-d)+c*-d,e+b*-e+c*-e,f+b*-f+c*(1-f),0,0,d+b*-d+0.143*c,e+b*(1-e)+0.14*c,f+b*-f+c*-0.283,0,0,d+b*-d+c*-(1-d),e+b*-e+c*e,f+b*(1-f)+c*f,0,0,0,0,0,1,0,0,0,0,0,1]),this},b.concat=function(b){return b=this._fixMatrix(b),b.length!=a.LENGTH?this:(this._multiplyMatrix(b),this)},b.clone=function(){return(new a).copy(this)},b.toArray=function(){for(var b=[],c=0,d=a.LENGTH;d>c;c++){b[c]=this[c]}return b},b.copy=function(b){for(var c=a.LENGTH,d=0;c>d;d++){this[d]=b[d]}return this},b.toString=function(){return"[ColorMatrix]"},b._multiplyMatrix=function(a){var b,c,d,e=[];for(b=0;5>b;b++){for(c=0;5>c;c++){e[c]=this[c+5*b]}for(c=0;5>c;c++){var f=0;for(d=0;5>d;d++){f+=a[c+5*d]*e[d]}this[c+5*b]=f}}},b._cleanValue=function(a,b){return Math.min(b,Math.max(-b,a))},b._fixMatrix=function(b){return b instanceof a&&(b=b.toArray()),b.length<a.LENGTH?b=b.slice(0,b.length).concat(a.IDENTITY_MATRIX.slice(b.length,a.LENGTH)):b.length>a.LENGTH&&(b=b.slice(0,a.LENGTH)),b},createjs.ColorMatrix=a}(),this.createjs=this.createjs||{},function(){function a(a){this.matrix=a}var b=createjs.extend(a,createjs.Filter);b.toString=function(){return"[ColorMatrixFilter]"},b.clone=function(){return new a(this.matrix)},b._applyFilter=function(a){for(var b,c,d,e,f=a.data,g=f.length,h=this.matrix,i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=h[5],o=h[6],p=h[7],q=h[8],r=h[9],s=h[10],t=h[11],u=h[12],v=h[13],w=h[14],x=h[15],y=h[16],z=h[17],A=h[18],B=h[19],C=0;g>C;C+=4){b=f[C],c=f[C+1],d=f[C+2],e=f[C+3],f[C]=b*i+c*j+d*k+e*l+m,f[C+1]=b*n+c*o+d*p+e*q+r,f[C+2]=b*s+c*t+d*u+e*v+w,f[C+3]=b*x+c*y+d*z+e*A+B}return !0},createjs.ColorMatrixFilter=createjs.promote(a,"Filter")}(),this.createjs=this.createjs||{},function(){function a(){throw"Touch cannot be instantiated"}a.isSupported=function(){return !!("ontouchstart" in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},a.enable=function(b,c,d){return b&&b.canvas&&a.isSupported()?b.__touch?!0:(b.__touch={pointers:{},multitouch:!c,preventDefault:!d,count:0},"ontouchstart" in window?a._IOS_enable(b):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&a._IE_enable(b),!0):!1},a.disable=function(b){b&&("ontouchstart" in window?a._IOS_disable(b):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&a._IE_disable(b),delete b.__touch)},a._IOS_enable=function(b){var c=b.canvas,d=b.__touch.f=function(c){a._IOS_handleEvent(b,c)};c.addEventListener("touchstart",d,!1),c.addEventListener("touchmove",d,!1),c.addEventListener("touchend",d,!1),c.addEventListener("touchcancel",d,!1)},a._IOS_disable=function(a){var b=a.canvas;if(b){var c=a.__touch.f;b.removeEventListener("touchstart",c,!1),b.removeEventListener("touchmove",c,!1),b.removeEventListener("touchend",c,!1),b.removeEventListener("touchcancel",c,!1)}},a._IOS_handleEvent=function(a,b){if(a){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();for(var c=b.changedTouches,d=b.type,e=0,f=c.length;f>e;e++){var g=c[e],h=g.identifier;g.target==a.canvas&&("touchstart"==d?this._handleStart(a,h,b,g.pageX,g.pageY):"touchmove"==d?this._handleMove(a,h,b,g.pageX,g.pageY):"touchend"!=d&&"touchcancel"!=d||this._handleEnd(a,h,b))}}},a._IE_enable=function(b){var c=b.canvas,d=b.__touch.f=function(c){a._IE_handleEvent(b,c)};void 0===window.navigator.pointerEnabled?(c.addEventListener("MSPointerDown",d,!1),window.addEventListener("MSPointerMove",d,!1),window.addEventListener("MSPointerUp",d,!1),window.addEventListener("MSPointerCancel",d,!1),b.__touch.preventDefault&&(c.style.msTouchAction="none")):(c.addEventListener("pointerdown",d,!1),window.addEventListener("pointermove",d,!1),window.addEventListener("pointerup",d,!1),window.addEventListener("pointercancel",d,!1),b.__touch.preventDefault&&(c.style.touchAction="none")),b.__touch.activeIDs={}},a._IE_disable=function(a){var b=a.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",b,!1),window.removeEventListener("MSPointerUp",b,!1),window.removeEventListener("MSPointerCancel",b,!1),a.canvas&&a.canvas.removeEventListener("MSPointerDown",b,!1)):(window.removeEventListener("pointermove",b,!1),window.removeEventListener("pointerup",b,!1),window.removeEventListener("pointercancel",b,!1),a.canvas&&a.canvas.removeEventListener("pointerdown",b,!1))},a._IE_handleEvent=function(a,b){if(a){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();var c=b.type,d=b.pointerId,e=a.__touch.activeIDs;if("MSPointerDown"==c||"pointerdown"==c){if(b.srcElement!=a.canvas){return}e[d]=!0,this._handleStart(a,d,b,b.pageX,b.pageY)}else{e[d]&&("MSPointerMove"==c||"pointermove"==c?this._handleMove(a,d,b,b.pageX,b.pageY):"MSPointerUp"!=c&&"MSPointerCancel"!=c&&"pointerup"!=c&&"pointercancel"!=c||(delete e[d],this._handleEnd(a,d,b)))}}},a._handleStart=function(a,b,c,d,e){var f=a.__touch;if(f.multitouch||!f.count){var g=f.pointers;g[b]||(g[b]=!0,f.count++,a._handlePointerDown(b,c,d,e))}},a._handleMove=function(a,b,c,d,e){a.__touch.pointers[b]&&a._handlePointerMove(b,c,d,e)},a._handleEnd=function(a,b,c){var d=a.__touch,e=d.pointers;e[b]&&(d.count--,a._handlePointerUp(b,c,!0),delete e[b])},createjs.Touch=a}(),this.createjs=this.createjs||{},function(){var a=createjs.EaselJS=createjs.EaselJS||{};a.version="0.8.2",a.buildDate="Wed, 09 Mar 2016 11:04:21 GMT"}();var RTree=function(width){var _Min_Width=3;var _Max_Width=6;if(!isNaN(width)){_Min_Width=Math.floor(width/2);_Max_Width=width}var _T={x:0,y:0,w:0,h:0,id:"root",nodes:[]};var isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"};var _name_to_id=(function(){var idCache={};return function(idPrefix){var idVal=0;if(idPrefix in idCache){idVal=idCache[idPrefix]++}else{idCache[idPrefix]=0}return idPrefix+"_"+idVal}})();RTree.Rectangle.squarified_ratio=function(l,w,fill){var lperi=(l+w)/2;var larea=l*w;var lgeo=larea/(lperi*lperi);return(larea*fill/lgeo)};var _remove_subtree=function(rect,obj,root){var hit_stack=[];var count_stack=[];var ret_array=[];var current_depth=1;if(!rect||!RTree.Rectangle.overlap_rectangle(rect,root)){return ret_array}var ret_obj={x:rect.x,y:rect.y,w:rect.w,h:rect.h,target:obj};count_stack.push(root.nodes.length);hit_stack.push(root);do{var tree=hit_stack.pop();var i=count_stack.pop()-1;if("target" in ret_obj){while(i>=0){var ltree=tree.nodes[i];if(RTree.Rectangle.overlap_rectangle(ret_obj,ltree)){if((ret_obj.target&&"leaf" in ltree&&ltree.leaf===ret_obj.target)||(!ret_obj.target&&("leaf" in ltree||RTree.Rectangle.contains_rectangle(ltree,ret_obj)))){if("nodes" in ltree){ret_array=_search_subtree(ltree,true,[],ltree);tree.nodes.splice(i,1)}else{ret_array=tree.nodes.splice(i,1)}RTree.Rectangle.make_MBR(tree.nodes,tree);delete ret_obj.target;if(tree.nodes.length<_Min_Width){ret_obj.nodes=_search_subtree(tree,true,[],tree)}break}else{if("nodes" in ltree){current_depth+=1;count_stack.push(i);hit_stack.push(tree);tree=ltree;i=ltree.nodes.length}}}i-=1}}else{if("nodes" in ret_obj){tree.nodes.splice(i+1,1);if(tree.nodes.length>0){RTree.Rectangle.make_MBR(tree.nodes,tree)}for(var t=0;t<ret_obj.nodes.length;t++){_insert_subtree(ret_obj.nodes[t],tree)}ret_obj.nodes.length=0;if(hit_stack.length==0&&tree.nodes.length<=1){ret_obj.nodes=_search_subtree(tree,true,ret_obj.nodes,tree);tree.nodes.length=0;hit_stack.push(tree);count_stack.push(1)}else{if(hit_stack.length>0&&tree.nodes.length<_Min_Width){ret_obj.nodes=_search_subtree(tree,true,ret_obj.nodes,tree);tree.nodes.length=0}else{delete ret_obj.nodes}}}else{RTree.Rectangle.make_MBR(tree.nodes,tree)}}current_depth-=1}while(hit_stack.length>0);return(ret_array)};var _choose_leaf_subtree=function(rect,root){var best_choice_index=-1;var best_choice_stack=[];var best_choice_area;var load_callback=function(local_tree,local_node){return(function(data){local_tree.attach_data(local_node,data)})};best_choice_stack.push(root);var nodes=root.nodes;do{if(best_choice_index!=-1){best_choice_stack.push(nodes[best_choice_index]);nodes=nodes[best_choice_index].nodes;best_choice_index=-1}for(var i=nodes.length-1;i>=0;i--){var ltree=nodes[i];if("leaf" in ltree){best_choice_index=-1;break}var old_lratio=RTree.Rectangle.squarified_ratio(ltree.w,ltree.h,ltree.nodes.length+1);var nw=Math.max(ltree.x+ltree.w,rect.x+rect.w)-Math.min(ltree.x,rect.x);var nh=Math.max(ltree.y+ltree.h,rect.y+rect.h)-Math.min(ltree.y,rect.y);var lratio=RTree.Rectangle.squarified_ratio(nw,nh,ltree.nodes.length+2);if(best_choice_index<0||Math.abs(lratio-old_lratio)<best_choice_area){best_choice_area=Math.abs(lratio-old_lratio);best_choice_index=i}}}while(best_choice_index!=-1);return(best_choice_stack)};var _linear_split=function(nodes){var n=_pick_linear(nodes);while(nodes.length>0){_pick_next(nodes,n[0],n[1])}return(n)};var _pick_next=function(nodes,a,b){var area_a=RTree.Rectangle.squarified_ratio(a.w,a.h,a.nodes.length+1);var area_b=RTree.Rectangle.squarified_ratio(b.w,b.h,b.nodes.length+1);var high_area_delta;var high_area_node;var lowest_growth_group;for(var i=nodes.length-1;i>=0;i--){var l=nodes[i];var new_area_a={};new_area_a.x=Math.min(a.x,l.x);new_area_a.y=Math.min(a.y,l.y);new_area_a.w=Math.max(a.x+a.w,l.x+l.w)-new_area_a.x;new_area_a.h=Math.max(a.y+a.h,l.y+l.h)-new_area_a.y;var change_new_area_a=Math.abs(RTree.Rectangle.squarified_ratio(new_area_a.w,new_area_a.h,a.nodes.length+2)-area_a);var new_area_b={};new_area_b.x=Math.min(b.x,l.x);new_area_b.y=Math.min(b.y,l.y);new_area_b.w=Math.max(b.x+b.w,l.x+l.w)-new_area_b.x;new_area_b.h=Math.max(b.y+b.h,l.y+l.h)-new_area_b.y;var change_new_area_b=Math.abs(RTree.Rectangle.squarified_ratio(new_area_b.w,new_area_b.h,b.nodes.length+2)-area_b);if(!high_area_node||!high_area_delta||Math.abs(change_new_area_b-change_new_area_a)<high_area_delta){high_area_node=i;high_area_delta=Math.abs(change_new_area_b-change_new_area_a);lowest_growth_group=change_new_area_b<change_new_area_a?b:a}}var temp_node=nodes.splice(high_area_node,1)[0];if(a.nodes.length+nodes.length+1<=_Min_Width){a.nodes.push(temp_node);RTree.Rectangle.expand_rectangle(a,temp_node)}else{if(b.nodes.length+nodes.length+1<=_Min_Width){b.nodes.push(temp_node);RTree.Rectangle.expand_rectangle(b,temp_node)}else{lowest_growth_group.nodes.push(temp_node);RTree.Rectangle.expand_rectangle(lowest_growth_group,temp_node)}}};var _pick_linear=function(nodes){var lowest_high_x=nodes.length-1;var highest_low_x=0;var lowest_high_y=nodes.length-1;var highest_low_y=0;var t1,t2;for(var i=nodes.length-2;i>=0;i--){var l=nodes[i];if(l.x>nodes[highest_low_x].x){highest_low_x=i}else{if(l.x+l.w<nodes[lowest_high_x].x+nodes[lowest_high_x].w){lowest_high_x=i}}if(l.y>nodes[highest_low_y].y){highest_low_y=i}else{if(l.y+l.h<nodes[lowest_high_y].y+nodes[lowest_high_y].h){lowest_high_y=i}}}var dx=Math.abs((nodes[lowest_high_x].x+nodes[lowest_high_x].w)-nodes[highest_low_x].x);var dy=Math.abs((nodes[lowest_high_y].y+nodes[lowest_high_y].h)-nodes[highest_low_y].y);if(dx>dy){if(lowest_high_x>highest_low_x){t1=nodes.splice(lowest_high_x,1)[0];t2=nodes.splice(highest_low_x,1)[0]}else{t2=nodes.splice(highest_low_x,1)[0];t1=nodes.splice(lowest_high_x,1)[0]}}else{if(lowest_high_y>highest_low_y){t1=nodes.splice(lowest_high_y,1)[0];t2=nodes.splice(highest_low_y,1)[0]}else{t2=nodes.splice(highest_low_y,1)[0];t1=nodes.splice(lowest_high_y,1)[0]}}return([{x:t1.x,y:t1.y,w:t1.w,h:t1.h,nodes:[t1]},{x:t2.x,y:t2.y,w:t2.w,h:t2.h,nodes:[t2]}])};var _attach_data=function(node,more_tree){node.nodes=more_tree.nodes;node.x=more_tree.x;node.y=more_tree.y;node.w=more_tree.w;node.h=more_tree.h;return(node)};var _search_subtree=function(rect,return_node,return_array,root){var hit_stack=[];if(!RTree.Rectangle.overlap_rectangle(rect,root)){return(return_array)}var load_callback=function(local_tree,local_node){return(function(data){local_tree.attach_data(local_node,data)})};hit_stack.push(root.nodes);do{var nodes=hit_stack.pop();for(var i=nodes.length-1;i>=0;i--){var ltree=nodes[i];if(RTree.Rectangle.overlap_rectangle(rect,ltree)){if("nodes" in ltree){hit_stack.push(ltree.nodes)}else{if("leaf" in ltree){if(!return_node){return_array.push(ltree.leaf)}else{return_array.push(ltree)}}}}}}while(hit_stack.length>0);return(return_array)};var _insert_subtree=function(node,root){var bc;if(root.nodes.length==0){root.x=node.x;root.y=node.y;root.w=node.w;root.h=node.h;root.nodes.push(node);return}var tree_stack=_choose_leaf_subtree(node,root);var ret_obj=node;do{if(bc&&"nodes" in bc&&bc.nodes.length==0){var pbc=bc;bc=tree_stack.pop();for(var t=0;t<bc.nodes.length;t++){if(bc.nodes[t]===pbc||bc.nodes[t].nodes.length==0){bc.nodes.splice(t,1);break}}}else{bc=tree_stack.pop()}if("leaf" in ret_obj||"nodes" in ret_obj||isArray(ret_obj)){if(isArray(ret_obj)){for(var ai=0;ai<ret_obj.length;ai++){RTree.Rectangle.expand_rectangle(bc,ret_obj[ai])}bc.nodes=bc.nodes.concat(ret_obj)}else{RTree.Rectangle.expand_rectangle(bc,ret_obj);bc.nodes.push(ret_obj)}if(bc.nodes.length<=_Max_Width){ret_obj={x:bc.x,y:bc.y,w:bc.w,h:bc.h}}else{var a=_linear_split(bc.nodes);ret_obj=a;if(tree_stack.length<1){bc.nodes.push(a[0]);tree_stack.push(bc);ret_obj=a[1]}}}else{RTree.Rectangle.expand_rectangle(bc,ret_obj);ret_obj={x:bc.x,y:bc.y,w:bc.w,h:bc.h}}}while(tree_stack.length>0)};this.get_tree=function(){return _T};this.set_tree=function(new_tree,where){if(!where){where=_T}return(_attach_data(where,new_tree))};this.search=function(rect,return_node,return_array){if(arguments.length<1){throw"Wrong number of arguments. RT.Search requires at least a bounding rectangle."}switch(arguments.length){case 1:arguments[1]=false;case 2:arguments[2]=[];case 3:arguments[3]=_T;default:arguments.length=4}return(_search_subtree.apply(this,arguments))};this.toJSON=function(rect,tree){var hit_stack=[];var count_stack=[];var return_stack={};var max_depth=3;var current_depth=1;var return_string="";if(rect&&!RTree.Rectangle.overlap_rectangle(rect,_T)){return""}if(!tree){count_stack.push(_T.nodes.length);hit_stack.push(_T.nodes);return_string+="var main_tree = {x:"+_T.x.toFixed()+",y:"+_T.y.toFixed()+",w:"+_T.w.toFixed()+",h:"+_T.h.toFixed()+",nodes:["}else{max_depth+=4;count_stack.push(tree.nodes.length);hit_stack.push(tree.nodes);return_string+="var main_tree = {x:"+tree.x.toFixed()+",y:"+tree.y.toFixed()+",w:"+tree.w.toFixed()+",h:"+tree.h.toFixed()+",nodes:["}do{var nodes=hit_stack.pop();var i=count_stack.pop()-1;if(i>=0&&i<nodes.length-1){return_string+=","}while(i>=0){var ltree=nodes[i];if(!rect||RTree.Rectangle.overlap_rectangle(rect,ltree)){if(ltree.nodes){if(current_depth>=max_depth){var len=return_stack.length;var nam=_name_to_id("saved_subtree");return_string+="{x:"+ltree.x.toFixed()+",y:"+ltree.y.toFixed()+",w:"+ltree.w.toFixed()+",h:"+ltree.h.toFixed()+",load:'"+nam+".js'}";return_stack[nam]=this.toJSON(rect,ltree);if(i>0){return_string+=","}}else{return_string+="{x:"+ltree.x.toFixed()+",y:"+ltree.y.toFixed()+",w:"+ltree.w.toFixed()+",h:"+ltree.h.toFixed()+",nodes:[";current_depth+=1;count_stack.push(i);hit_stack.push(nodes);nodes=ltree.nodes;i=ltree.nodes.length}}else{if(ltree.leaf){var data=ltree.leaf.toJSON?ltree.leaf.toJSON():JSON.stringify(ltree.leaf);return_string+="{x:"+ltree.x.toFixed()+",y:"+ltree.y.toFixed()+",w:"+ltree.w.toFixed()+",h:"+ltree.h.toFixed()+",leaf:"+data+"}";if(i>0){return_string+=","}}else{if(ltree.load){return_string+="{x:"+ltree.x.toFixed()+",y:"+ltree.y.toFixed()+",w:"+ltree.w.toFixed()+",h:"+ltree.h.toFixed()+",load:'"+ltree.load+"'}";if(i>0){return_string+=","}}}}}i-=1}if(i<0){return_string+="]}";current_depth-=1}}while(hit_stack.length>0);return_string+=";";for(var my_key in return_stack){return_string+="\nvar "+my_key+" = function(){"+return_stack[my_key]+" return(main_tree);};"}return(return_string)};this.remove=function(rect,obj){if(arguments.length<1){throw"Wrong number of arguments. RT.remove requires at least a bounding rectangle."}switch(arguments.length){case 1:if(typeof arguments[0]=="number"){var canvas=this.canvas;var el=canvas.elements[arguments[0]];var t=el.type;arguments[1]=arguments[0];arguments[0]=t.getRectangleRegion.call(el)}else{arguments[1]=false}case 2:arguments[2]=_T;default:arguments.length=3}if(arguments[1]===false){var numberdeleted=0;var ret_array=[];do{numberdeleted=ret_array.length;ret_array=ret_array.concat(_remove_subtree.apply(this,arguments))}while(numberdeleted!=ret_array.length);return ret_array}else{return(_remove_subtree.apply(this,arguments))}};this.insert=function(rect,obj){if(arguments.length<1){throw"Wrong number of arguments. RT.Insert requires at least a bounding rectangle and an object."}var o=obj;var r=rect;if(arguments.length==1){if(typeof this.canvas=="undefined"){throw"ERROR RTree.insert: this.canvas not defined"}var canvas=this.canvas;o=r;if(typeof o!="number"){console.warn("WARN: obj is not number")}var el=canvas.elements[o];var t=el.type;r=t.getRectangleRegion.call(el)}return(_insert_subtree({x:r.x,y:r.y,w:r.w,h:r.h,leaf:o},_T))};this.getPathToLeaf=function(leaf){if(arguments.length<1){throw"FATAL RTree.searchInLeafs: Wrong number of arguments. This method requires leaf for search."}function _searchInLeafs(node,leaf){var n,res;if("nodes" in node){for(var i in node.nodes){if(node.nodes.hasOwnProperty(i)){n=node.nodes[i];res=_searchInLeafs(n,leaf);if(typeof res=="boolean"&&res==true){return"/"+String(i)}if(typeof res=="string"&&res.length>0){return"/"+String(i)+res}}}}else{if("leaf" in node&&node.leaf==leaf){return true}else{return false}}}return _searchInLeafs(_T,leaf)}};RTree.Rectangle=function(ix,iy,iw,ih){var x,x2,y,y2,w,h;if(ix.x){x=ix.x;y=ix.y;if(ix.w!==0&&!ix.w&&ix.x2){w=ix.x2-ix.x;h=ix.y2-ix.y}else{w=ix.w;h=ix.h}x2=x+w;y2=y+h}else{x=ix;y=iy;w=iw;h=ih;x2=x+w;y2=y+h}this.x1=this.x=function(){return x};this.y1=this.y=function(){return y};this.x2=function(){return x2};this.y2=function(){return y2};this.w=function(){return w};this.h=function(){return h};this.toJSON=function(){return('{"x":'+x.toString()+', "y":'+y.toString()+', "w":'+w.toString()+', "h":'+h.toString()+"}")};this.overlap=function(a){return(this.x()<a.x2()&&this.x2()>a.x()&&this.y()<a.y2()&&this.y2()>a.y())};this.expand=function(a){var nx=Math.min(this.x(),a.x());var ny=Math.min(this.y(),a.y());w=Math.max(this.x2(),a.x2())-nx;h=Math.max(this.y2(),a.y2())-ny;x=nx;y=ny;return(this)};this.setRect=function(ix,iy,iw,ih){var x,x2,y,y2,w,h;if(ix.x){x=ix.x;y=ix.y;if(ix.w!==0&&!ix.w&&ix.x2){w=ix.x2-ix.x;h=ix.y2-ix.y}else{w=ix.w;h=ix.h}x2=x+w;y2=y+h}else{x=ix;y=iy;w=iw;h=ih;x2=x+w;y2=y+h}}};RTree.Rectangle.overlap_rectangle=function(a,b){return(a.x<=(b.x+b.w)&&(a.x+a.w)>=b.x&&a.y<=(b.y+b.h)&&(a.y+a.h)>=b.y)};RTree.Rectangle.contains_rectangle=function(a,b){return((a.x+a.w)<=(b.x+b.w)&&a.x>=b.x&&(a.y+a.h)<=(b.y+b.h)&&a.y>=b.y)};RTree.Rectangle.expand_rectangle=function(a,b){var nx=Math.min(a.x,b.x);var ny=Math.min(a.y,b.y);a.w=Math.max(a.x+a.w,b.x+b.w)-nx;a.h=Math.max(a.y+a.h,b.y+b.h)-ny;a.x=nx;a.y=ny;return(a)};RTree.Rectangle.make_MBR=function(nodes,rect){if(nodes.length<1){return({x:0,y:0,w:0,h:0})}if(!rect){rect={x:nodes[0].x,y:nodes[0].y,w:nodes[0].w,h:nodes[0].h}}else{rect.x=nodes[0].x}rect.y=nodes[0].y;rect.w=nodes[0].w;rect.h=nodes[0].h;for(var i=nodes.length-1;i>0;i--){RTree.Rectangle.expand_rectangle(rect,nodes[i])}return(rect)};var requirejs,require,define;(function(ba){function G(b){return"[object Function]"===K.call(b)}function H(b){return"[object Array]"===K.call(b)}function v(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1){}}}function T(b,c){if(b){var d;for(d=b.length-1;-1<d&&(!b[d]||!c(b[d],d,b));d-=1){}}}function t(b,c){return fa.call(b,c)}function m(b,c){return t(b,c)&&b[c]}function B(b,c){for(var d in b){if(t(b,d)&&c(b[d],d)){break}}}function U(b,c,d,e){c&&B(c,function(c,g){if(d||!t(b,g)){e&&"object"===typeof c&&c&&!H(c)&&!G(c)&&!(c instanceof RegExp)?(b[g]||(b[g]={}),U(b[g],c,d,e)):b[g]=c}});return b}function u(b,c){return function(){return c.apply(b,arguments)}}function ca(b){throw b}function da(b){if(!b){return b}var c=ba;v(b.split("."),function(b){c=c[b]});return c}function C(b,c,d,e){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b);c.requireType=b;c.requireModules=e;d&&(c.originalError=d);return c}function ga(b){function c(a,k,b){var f,l,c,d,e,g,i,p,k=k&&k.split("/"),h=j.map,n=h&&h["*"];if(a){a=a.split("/");l=a.length-1;j.nodeIdCompat&&Q.test(a[l])&&(a[l]=a[l].replace(Q,""));"."===a[0].charAt(0)&&k&&(l=k.slice(0,k.length-1),a=l.concat(a));l=a;for(c=0;c<l.length;c++){if(d=l[c],"."===d){l.splice(c,1),c-=1}else{if(".."===d&&!(0===c||1==c&&".."===l[2]||".."===l[c-1])&&0<c){l.splice(c-1,2),c-=2}}}a=a.join("/")}if(b&&h&&(k||n)){l=a.split("/");c=l.length;a:for(;0<c;c-=1){e=l.slice(0,c).join("/");if(k){for(d=k.length;0<d;d-=1){if(b=m(h,k.slice(0,d).join("/"))){if(b=m(b,e)){f=b;g=c;break a}}}}!i&&(n&&m(n,e))&&(i=m(n,e),p=c)}!f&&i&&(f=i,g=p);f&&(l.splice(0,g,f),a=l.join("/"))}return(f=m(j.pkgs,a))?f:a}function d(a){z&&v(document.getElementsByTagName("script"),function(k){if(k.getAttribute("data-requiremodule")===a&&k.getAttribute("data-requirecontext")===i.contextName){return k.parentNode.removeChild(k),!0}})}function e(a){var k=m(j.paths,a);if(k&&H(k)&&1<k.length){return k.shift(),i.require.undef(a),i.makeRequire(null,{skipMap:!0})([a]),!0}}function n(a){var k,c=a?a.indexOf("!"):-1;-1<c&&(k=a.substring(0,c),a=a.substring(c+1,a.length));return[k,a]}function p(a,k,b,f){var l,d,e=null,g=k?k.name:null,j=a,p=!0,h="";a||(p=!1,a="_@r"+(K+=1));a=n(a);e=a[0];a=a[1];e&&(e=c(e,g,f),d=m(r,e));a&&(e?h=d&&d.normalize?d.normalize(a,function(a){return c(a,g,f)}):c(a,g,f):(h=c(a,g,f),a=n(h),e=a[0],h=a[1],b=!0,l=i.nameToUrl(h)));b=e&&!d&&!b?"_unnormalized"+(O+=1):"";return{prefix:e,name:h,parentMap:k,unnormalized:!!b,url:l,originalName:j,isDefine:p,id:(e?e+"!"+h:h)+b}}function s(a){var k=a.id,b=m(h,k);b||(b=h[k]=new i.Module(a));return b}function q(a,k,b){var f=a.id,c=m(h,f);if(t(r,f)&&(!c||c.defineEmitComplete)){"defined"===k&&b(r[f])}else{if(c=s(a),c.error&&"error"===k){b(c.error)}else{c.on(k,b)}}}function w(a,b){var c=a.requireModules,f=!1;if(b){b(a)}else{if(v(c,function(b){if(b=m(h,b)){b.error=a,b.events.error&&(f=!0,b.emit("error",a))}}),!f){g.onError(a)}}}function x(){R.length&&(ha.apply(A,[A.length,0].concat(R)),R=[])}function y(a){delete h[a];delete V[a]}function F(a,b,c){var f=a.map.id;a.error?a.emit("error",a.error):(b[f]=!0,v(a.depMaps,function(f,d){var e=f.id,g=m(h,e);g&&(!a.depMatched[d]&&!c[e])&&(m(b,e)?(a.defineDep(d,r[e]),a.check()):F(g,b,c))}),c[f]=!0)}function D(){var a,b,c=(a=1000*j.waitSeconds)&&i.startTime+a<(new Date).getTime(),f=[],l=[],g=!1,h=!0;if(!W){W=!0;B(V,function(a){var i=a.map,j=i.id;if(a.enabled&&(i.isDefine||l.push(a),!a.error)){if(!a.inited&&c){e(j)?g=b=!0:(f.push(j),d(j))}else{if(!a.inited&&(a.fetched&&i.isDefine)&&(g=!0,!i.prefix)){return h=!1}}}});if(c&&f.length){return a=C("timeout","Load timeout for modules: "+f,null,f),a.contextName=i.contextName,w(a)}h&&v(l,function(a){F(a,{},{})});if((!c||b)&&g){if((z||ea)&&!X){X=setTimeout(function(){X=0;D()},50)}}W=!1}}function E(a){t(r,a[0])||s(p(a[0],null,!0)).init(a[1],a[2])}function I(a){var a=a.currentTarget||a.srcElement,b=i.onScriptLoad;a.detachEvent&&!Y?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1);b=i.onScriptError;(!a.detachEvent||Y)&&a.removeEventListener("error",b,!1);return{node:a,id:a&&a.getAttribute("data-requiremodule")}}function J(){var a;for(x();A.length;){a=A.shift();if(null===a[0]){return w(C("mismatch","Mismatched anonymous define() module: "+a[a.length-1]))}E(a)}}var W,Z,i,L,X,j={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},h={},V={},$={},A=[],r={},S={},aa={},K=1,O=1;L={require:function(a){return a.require?a.require:a.require=i.makeRequire(a.map)},exports:function(a){a.usingExports=!0;if(a.map.isDefine){return a.exports?r[a.map.id]=a.exports:a.exports=r[a.map.id]={}}},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return m(j.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}};Z=function(a){this.events=m($,a.id)||{};this.map=a;this.shim=m(j.shim,a.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Z.prototype={init:function(a,b,c,f){f=f||{};if(!this.inited){this.factory=b;if(c){this.on("error",c)}else{this.events.error&&(c=u(this,function(a){this.emit("error",a)}))}this.depMaps=a&&a.slice(0);this.errback=c;this.inited=!0;this.ignore=f.ignore;f.enabled||this.enabled?this.enable():this.check()}},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0;i.startTime=(new Date).getTime();var a=this.map;if(this.shim){i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}))}else{return a.prefix?this.callPlugin():this.load()}}},load:function(){var a=this.map.url;S[a]||(S[a]=!0,i.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var f=this.exports,l=this.factory;if(this.inited){if(this.error){this.emit("error",this.error)}else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(l)){if(this.events.error&&this.map.isDefine||g.onError!==ca){try{f=i.execCb(c,l,b,f)}catch(d){a=d}}else{f=i.execCb(c,l,b,f)}this.map.isDefine&&void 0===f&&((b=this.module)?f=b.exports:this.usingExports&&(f=this.exports));if(a){return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",w(this.error=a)}}else{f=l}this.exports=f;if(this.map.isDefine&&!this.ignore&&(r[c]=f,g.onResourceLoad)){g.onResourceLoad(i,this.map,this.depMaps)}y(c);this.defined=!0}this.defining=!1;this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}}else{this.fetch()}}},callPlugin:function(){var a=this.map,b=a.id,d=p(a.prefix);this.depMaps.push(d);q(d,"defined",u(this,function(f){var l,d;d=m(aa,this.map.id);var e=this.map.name,P=this.map.parentMap?this.map.parentMap.name:null,n=i.makeRequire(a.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(f.normalize&&(e=f.normalize(e,function(a){return c(a,P,!0)})||""),f=p(a.prefix+"!"+e,this.map.parentMap),q(f,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),d=m(h,f.id)){this.depMaps.push(f);if(this.events.error){d.on("error",u(this,function(a){this.emit("error",a)}))}d.enable()}}else{d?(this.map.url=i.nameToUrl(d),this.load()):(l=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),l.error=u(this,function(a){this.inited=!0;this.error=a;a.requireModules=[b];B(h,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&y(a.map.id)});w(a)}),l.fromText=u(this,function(f,c){var d=a.name,e=p(d),P=M;c&&(f=c);P&&(M=!1);s(e);t(j.config,b)&&(j.config[d]=j.config[b]);try{g.exec(f)}catch(h){return w(C("fromtexteval","fromText eval for "+b+" failed: "+h,h,[b]))}P&&(M=!0);this.depMaps.push(e);i.completeLoad(d);n([d],l)}),f.load(a.name,n,l,j))}}));i.enable(d,this);this.pluginMaps[d.id]=d},enable:function(){V[this.map.id]=this;this.enabling=this.enabled=!0;v(this.depMaps,u(this,function(a,b){var c,f;if("string"===typeof a){a=p(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap);this.depMaps[b]=a;if(c=m(L,a.id)){this.depExports[b]=c(this);return}this.depCount+=1;q(a,"defined",u(this,function(a){this.defineDep(b,a);this.check()}));this.errback&&q(a,"error",u(this,this.errback))}c=a.id;f=h[c];!t(L,c)&&(f&&!f.enabled)&&i.enable(a,this)}));B(this.pluginMaps,u(this,function(a){var b=m(h,a.id);b&&!b.enabled&&i.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){v(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};i={config:j,contextName:b,registry:h,defined:r,urlFetched:S,defQueue:A,Module:Z,makeModuleMap:p,nextTick:g.nextTick,onError:w,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=j.shim,c={paths:!0,bundles:!0,config:!0,map:!0};B(a,function(a,b){c[b]?(j[b]||(j[b]={}),U(j[b],a,!0,!0)):j[b]=a});a.bundles&&B(a.bundles,function(a,b){v(a,function(a){a!==b&&(aa[a]=b)})});a.shim&&(B(a.shim,function(a,c){H(a)&&(a={deps:a});if((a.exports||a.init)&&!a.exportsFn){a.exportsFn=i.makeShimExports(a)}b[c]=a}),j.shim=b);a.packages&&v(a.packages,function(a){var b,a="string"===typeof a?{name:a}:a;b=a.name;a.location&&(j.paths[b]=a.location);j.pkgs[b]=a.name+"/"+(a.main||"main").replace(ia,"").replace(Q,"")});B(h,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=p(b))});if(a.deps||a.callback){i.require(a.deps||[],a.callback)}},makeShimExports:function(a){return function(){var b;a.init&&(b=a.init.apply(ba,arguments));return b||a.exports&&da(a.exports)}},makeRequire:function(a,e){function j(c,d,m){var n,q;e.enableBuildCallback&&(d&&G(d))&&(d.__requireJsBuild=!0);if("string"===typeof c){if(G(d)){return w(C("requireargs","Invalid require call"),m)}if(a&&t(L,c)){return L[c](h[a.id])}if(g.get){return g.get(i,c,a,j)}n=p(c,a,!1,!0);n=n.id;return !t(r,n)?w(C("notloaded",'Module name "'+n+'" has not been loaded yet for context: '+b+(a?"":". Use require([])"))):r[n]}J();i.nextTick(function(){J();q=s(p(null,a));q.skipMap=e.skipMap;q.init(c,d,m,{enabled:!0});D()});return j}e=e||{};U(j,{isBrowser:z,toUrl:function(b){var d,e=b.lastIndexOf("."),k=b.split("/")[0];if(-1!==e&&(!("."===k||".."===k)||1<e)){d=b.substring(e,b.length),b=b.substring(0,e)}return i.nameToUrl(c(b,a&&a.id,!0),d,!0)},defined:function(b){return t(r,p(b,a,!1,!0).id)},specified:function(b){b=p(b,a,!1,!0).id;return t(r,b)||t(h,b)}});a||(j.undef=function(b){x();var c=p(b,a,!0),e=m(h,b);d(b);delete r[b];delete S[c.url];delete $[b];T(A,function(a,c){a[0]===b&&A.splice(c,1)});e&&(e.events.defined&&($[b]=e.events),y(b))});return j},enable:function(a){m(h,a.id)&&s(a).enable()},completeLoad:function(a){var b,c,d=m(j.shim,a)||{},g=d.exports;for(x();A.length;){c=A.shift();if(null===c[0]){c[0]=a;if(b){break}b=!0}else{c[0]===a&&(b=!0)}E(c)}c=m(h,a);if(!b&&!t(r,a)&&c&&!c.inited){if(j.enforceDefine&&(!g||!da(g))){return e(a)?void 0:w(C("nodefine","No define call for "+a,null,[a]))}E([a,d.deps||[],d.exportsFn])}D()},nameToUrl:function(a,b,c){var d,e,h;(d=m(j.pkgs,a))&&(a=d);if(d=m(aa,a)){return i.nameToUrl(d,b,c)}if(g.jsExtRegExp.test(a)){d=a+(b||"")}else{d=j.paths;a=a.split("/");for(e=a.length;0<e;e-=1){if(h=a.slice(0,e).join("/"),h=m(d,h)){H(h)&&(h=h[0]);a.splice(0,e,h);break}}d=a.join("/");d+=b||(/^data\:|\?/.test(d)||c?"":".js");d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":j.baseUrl)+d}return j.urlArgs?d+((-1===d.indexOf("?")?"?":"&")+j.urlArgs):d},load:function(a,b){g.load(i,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||ja.test((a.currentTarget||a.srcElement).readyState)){N=null,a=I(a),i.completeLoad(a.id)}},onScriptError:function(a){var b=I(a);if(!e(b.id)){return w(C("scripterror","Script error for: "+b.id,a,[b.id]))}}};i.require=i.makeRequire();return i}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!!("undefined"!==typeof window&&"undefined"!==typeof navigator&&window.document),ea=!z&&"undefined"!==typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(G(requirejs)){return}q=requirejs;requirejs=void 0}"undefined"!==typeof require&&!G(require)&&(q=require,require=void 0);g=requirejs=function(b,c,d,e){var n,p="_";!H(b)&&"string"!==typeof b&&(n=b,H(c)?(b=c,c=d,d=e):b=[]);n&&n.context&&(p=n.context);(e=m(F,p))||(e=F[p]=g.s.newContext(p));n&&e.configure(n);return e.require(b,c,d)};g.config=function(b){return g(b)};g.nextTick="undefined"!==typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()};require||(require=g);g.version="2.1.13";g.jsExtRegExp=/^\/|:|\?|\.js$/;g.isBrowser=z;x=g.s={contexts:F,newContext:ga};g({});v(["toUrl","undef","defined","specified"],function(b){g[b]=function(){var c=F._;return c.require[b].apply(c,arguments)}});if(z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])){y=x.head=D.parentNode}g.onError=ca;g.createNode=function(b){var c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");c.type=b.scriptType||"text/javascript";c.charset="utf-8";c.async=!0;return c};g.load=function(b,c,d){var e=b&&b.config||{};if(z){return e=g.createNode(e,c,d),e.setAttribute("data-requirecontext",b.contextName),e.setAttribute("data-requiremodule",c),e.attachEvent&&!(e.attachEvent.toString&&0>e.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,e.attachEvent("onreadystatechange",b.onScriptLoad)):(e.addEventListener("load",b.onScriptLoad,!1),e.addEventListener("error",b.onScriptError,!1)),e.src=d,J=e,D?y.insertBefore(e,D):y.appendChild(e),J=null,e}if(ea){try{importScripts(d),b.completeLoad(c)}catch(m){b.onError(C("importscripts","importScripts failed for "+c+" at "+d,m,[c]))}}};z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(b){y||(y=b.parentNode);if(I=b.getAttribute("data-main")){return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}});define=function(b,c,d){var e,g;"string"!==typeof b&&(d=c,c=b,b=null);H(c)||(d=c,c=null);!c&&G(d)&&(c=[],d.length&&(d.toString().replace(ka,"").replace(la,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c)));if(M){if(!(e=J)){N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState){return N=b}}),e=N}e&&(b||(b=e.getAttribute("data-requiremodule")),g=F[e.getAttribute("data-requirecontext")])}(g?g.defQueue:R).push([b,c,d])};define.amd={jQuery:!0};g.exec=function(b){return eval(b)};g(q)}})(this);(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=d(e,i,4);var o=!w(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=b(r,e);for(var u=null!=t&&t.length,i=n>0?0:u-1;i>=0&&u>i;i+=n){if(r(t[i],i,t)){return i}}return -1}}function r(n,t){var r=S.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||o,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;){i=S[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}}var e=this,u=e._,i=Array.prototype,o=Object.prototype,a=Function.prototype,c=i.push,l=i.slice,f=o.toString,s=o.hasOwnProperty,p=Array.isArray,h=Object.keys,v=a.bind,g=Object.create,y=function(){},m=function(n){return n instanceof m?n:this instanceof m?void (this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):e._=m,m.VERSION="1.8.2";var d=function(n,t,r){if(t===void 0){return n}switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},b=function(n,t,r){return null==n?m.identity:m.isFunction(n)?d(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return b(n,t,1/0)};var x=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r){return r}for(var u=1;e>u;u++){for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var l=o[c];t&&r[l]!==void 0||(r[l]=i[l])}}return r}},_=function(n){if(!m.isObject(n)){return{}}if(g){return g(n)}y.prototype=n;var t=new y;return y.prototype=null,t},j=Math.pow(2,53)-1,w=function(n){var t=n&&n.length;return"number"==typeof t&&t>=0&&j>=t};m.each=m.forEach=function(n,t,r){t=d(t,r);var e,u;if(w(n)){for(e=0,u=n.length;u>e;e++){t(n[e],e,n)}}else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++){t(n[i[e]],i[e],n)}}return n},m.map=m.collect=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=w(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=b(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(b(t)),r)},m.every=m.all=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n)){return !1}}return !0},m.some=m.any=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n)){return !0}}return !1},m.contains=m.includes=m.include=function(n,t,r){return w(n)||(n=m.values(n)),m.indexOf(n,t,"number"==typeof r&&r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=w(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++){e=n[a],e>i&&(i=e)}}else{t=b(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)})}return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=w(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++){e=n[a],i>e&&(i=e)}}else{t=b(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)})}return i},m.shuffle=function(n){for(var t,r=w(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++){t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i]}return u},m.sample=function(n,t,r){return null==t||r?(w(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=b(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0){return 1}if(e>r||e===void 0){return -1}}return n.index-t.index}),"value")};var A=function(n){return function(t,r,e){var u={};return r=b(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=A(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=A(function(n,t,r){n[r]=t}),m.countBy=A(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):w(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:w(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=b(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var k=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=n&&n.length;a>o;o++){var c=n[o];if(w(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=k(c,t,r));var l=0,f=c.length;for(u.length+=f;f>l;){u[i++]=c[l++]}}else{r||(u[i++]=c)}}return u};m.flatten=function(n,t){return k(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){if(null==n){return[]}m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=b(r,e));for(var u=[],i=[],o=0,a=n.length;a>o;o++){var c=n[o],l=r?r(c,o,n):c;t?(o&&i===l||u.push(c),i=l):r?m.contains(i,l)||(i.push(l),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(k(arguments,!0,!0))},m.intersection=function(n){if(null==n){return[]}for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++){}o===r&&t.push(i)}}return t},m.difference=function(n){var t=k(arguments,!0,!0,1);return m.filter(n,function(n){return !m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,"length").length||0,r=Array(t),e=0;t>e;e++){r[e]=m.pluck(n,e)}return r},m.object=function(n,t){for(var r={},e=0,u=n&&n.length;u>e;e++){t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1]}return r},m.indexOf=function(n,t,r){var e=0,u=n&&n.length;if("number"==typeof r){e=0>r?Math.max(0,u+r):r}else{if(r&&u){return e=m.sortedIndex(n,t),n[e]===t?e:-1}}if(t!==t){return m.findIndex(l.call(n,e),m.isNaN)}for(;u>e;e++){if(n[e]===t){return e}}return -1},m.lastIndexOf=function(n,t,r){var e=n?n.length:0;if("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1)),t!==t){return m.findLastIndex(l.call(n,0,e),m.isNaN)}for(;--e>=0;){if(n[e]===t){return e}}return -1},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=b(r,e,1);for(var u=r(t),i=0,o=n.length;o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r){u[i]=n}return u};var O=function(n,t,r,e,u){if(!(e instanceof t)){return n.apply(r,u)}var i=_(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(v&&n.bind===v){return v.apply(n,l.call(arguments,1))}if(!m.isFunction(n)){throw new TypeError("Bind must be called on a function")}var r=l.call(arguments,2),e=function(){return O(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++){i[o]=t[o]===m?arguments[e++]:t[o]}for(;e<arguments.length;){i.push(arguments[e++])}return O(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e){throw new Error("bindAll must be passed function names")}for(t=1;e>t;t++){r=arguments[t],n[r]=m.bind(n[r],n)}return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var l=m.now();a||r.leading!==!1||(a=l);var f=t-(l-a);return e=this,u=arguments,0>=f||f>t?(o&&(clearTimeout(o),o=null),a=l,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,f)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var l=m.now()-o;t>l&&l>=0?e=setTimeout(c,t-l):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return !n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;){e=n[r].call(this,e)}return e}},m.after=function(n,t){return function(){return --n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return --n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),S=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n)){return[]}if(h){return h(n)}var t=[];for(var e in n){m.has(n,e)&&t.push(e)}return F&&r(n,t),t},m.allKeys=function(n){if(!m.isObject(n)){return[]}var t=[];for(var e in n){t.push(e)}return F&&r(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++){e[u]=n[t[u]]}return e},m.mapObject=function(n,t,r){t=b(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++){e=u[a],o[e]=t(n[e],e,n)}return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++){e[u]=[t[u],n[t[u]]]}return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++){t[n[r[e]]]=r[e]}return t},m.functions=m.methods=function(n){var t=[];for(var r in n){m.isFunction(n[r])&&t.push(r)}return t.sort()},m.extend=x(m.allKeys),m.extendOwn=m.assign=x(m.keys),m.findKey=function(n,t,r){t=b(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++){if(e=u[i],t(n[e],e,n)){return e}}},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o){return i}m.isFunction(t)?(u=m.allKeys(o),e=d(t,r)):(u=k(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var l=u[a],f=o[l];e(f,l,o)&&(i[l]=f)}return i},m.omit=function(n,t,r){if(m.isFunction(t)){t=m.negate(t)}else{var e=m.map(k(arguments,!1,!1,1),String);t=function(n,t){return !m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=x(m.allKeys,!0),m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n){return !e}for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u)){return !1}}return !0};var E=function(n,t,r,e){if(n===t){return 0!==n||1/n===1/t}if(null==n||null==t){return n===t}n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=f.call(n);if(u!==f.call(t)){return !1}switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return +n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return +n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t){return !1}var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor" in n&&"constructor" in t){return !1}}r=r||[],e=e||[];for(var c=r.length;c--;){if(r[c]===n){return e[c]===t}}if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length){return !1}for(;c--;){if(!E(n[c],t[c],r,e)){return !1}}}else{var l,s=m.keys(n);if(c=s.length,m.keys(t).length!==c){return !1}for(;c--;){if(l=s[c],!m.has(t,l)||!E(n[l],t[l],r,e)){return !1}}}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return E(n,t)},m.isEmpty=function(n){return null==n?!0:w(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return !(!n||1!==n.nodeType)},m.isArray=p||function(n){return"[object Array]"===f.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return f.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===f.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&s.call(n,t)},m.noConflict=function(){return e._=u,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=function(n){return function(t){return null==t?void 0:t[n]}},m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=d(t,r,1);for(var u=0;n>u;u++){e[u]=t(u)}return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=m.invert(M),I=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=I(M),m.unescape=I(N),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var B=0;m.uniqueId=function(n){var t=++B+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,K=function(n){return"\\"+R[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||T).source,(t.interpolate||T).source,(t.evaluate||T).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(q,K),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},l=t.variable||"obj";return c.source="function("+l+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var z=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return c.apply(n,arguments),z(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=i[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],z(this,r)}}),m.each(["concat","join","slice"],function(n){var t=i[n];m.prototype[n]=function(){return z(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);define("core/sldiagram",["underscore"],function(Underscore){SLDiagram=function(config){if(!(createjs instanceof Object)){throw"Createjs unavailable. Please load EaselJS before use SLDiagram."}this.objectType="SLDiagram";this.id=null;this.getConfigProperty=SLDiagram.getConfigProperty;this._changedStateProperties=["scheme/backColor","drawSize/.*","figure/.*","voltageColors.*","grid/.*","selection/.*"];this._checkChangedStateProperty=function(path){var i,prop,re;if(!this._checkChangedStatePropertyCache){this._checkChangedStatePropertyCache={}}if(this._checkChangedStatePropertyCache.hasOwnProperty(path)){return this._checkChangedStatePropertyCache[path]}for(i=0;i<this._changedStateProperties.length;i++){prop=this._changedStateProperties[i];if(typeof prop==="string"){this._changedStateProperties[i]=new RegExp(prop);re=this._changedStateProperties[i]}else{re=prop}if(re.test(path)){this._checkChangedStatePropertyCache[path]=true;return true}}this._checkChangedStatePropertyCache[path]=false;return false};this.setConfigProperty=function(path,value){SLDiagram.setConfigProperty.call(this,path,value);this.events.fireEvent("onUpdateSchemeConfig",{path:path,value:value},"SLDiagram.setConfigProperty");if(path==="scheme/backColor"){this.clearElementsCache()}if(this._checkChangedStateProperty(path)){this.getSetterChangedState().execute(true)}};this.delConfigProperty=function(path){var res=SLDiagram.delConfigProperty.apply(this,arguments);if(this._checkChangedStateProperty(path)){this.getSetterChangedState().execute(true)}return res};this.config=config;this.sysConfig={};this.getSysConfigProperty=SLDiagram.getSysConfigProperty;this.setSysConfigProperty=SLDiagram.setSysConfigProperty;this.delSysConfigProperty=SLDiagram.delSysConfigProperty;this.setStage=function(canvas_id){this.sysConfig.canvas_id=canvas_id;if(this.beforeSetStage instanceof Function){this.beforeSetStage()}this.canvas=document.getElementById(this.sysConfig.canvas_id);if(typeof this.canvas!="object"){console.error("ERROR: this.canvas not object")}if(this.canvas===null){console.error("ERROR: this.canvas == null; canvas_id = "+this.sysConfig.canvas_id)}this.canvas.setAttribute("width",this.getConfigProperty("canvasSize/width"));this.canvas.setAttribute("height",this.getConfigProperty("canvasSize/height"));SLDiagram.extendEaselJS();this.stage=new createjs.Stage(this.sysConfig.canvas_id);this.stage.up=this;if(this.afterSetStage instanceof Function){this.afterSetStage()}if(typeof this.getTouchEvents==="function"){this.getTouchEvents().initCanvasTouchEvents()}this.canvas.sldiagram=this};if(this.sysConfig.canvas_id!==null&&typeof this.sysConfig.canvas_id!=="undefined"){this.setStage(this.sysConfig.canvas_id)}else{this.canvas=null;this.stage=null}this.visibleElements={};this.searchElementsInRegion=function(region){var res,ids,i;if(typeof this.rtree=="object"){try{ids=this.rtree.search({x:region.x,y:region.y,w:region.width,h:region.height});res=[];for(i in ids){if(ids.hasOwnProperty(i)){var id=ids[i];res.push(this.elements[id])}}}catch(ex){SLDiagram.Debug.addMessage("RTree","Ошибка при поиске элементов с помощью индекса rtree",SLDiagram.Debug.statuses.ERROR,{showPopUp:false});res=[]}}else{res=[];for(i in this.elements){if(this.elements.hasOwnProperty(i)){try{var el=this.elements[i];var t=el.type;var rect=t.getRectangleRegion.call(el);if(RTree.Rectangle.overlap_rectangle(rect,{x:region.x,y:region.y,w:region.width,h:region.height})){res.push(el)}}catch(ex){console.error('Ошибка при проверке нахождения элемента "'+t.description+'" в области '+JSON.stringify(region)+":",ex)}}}}return res};this.updateVisibleElements=function(){var el,i;var region=this.getVisibleRegion();var els=this.searchElementsInRegion(region);var diff={add:[],del:[]};for(i in this.visibleElements){if(this.visibleElements.hasOwnProperty(i)){el=this.visibleElements[i];if(els.indexOf(el)<0){el.clearDisplayObject();diff.del.push(el)}}}for(i in els){if(els.hasOwnProperty(i)){el=els[i];if(!this.visibleElements.hasOwnProperty(el.id)){diff.add.push(el)}}}for(i=0;i<diff.del.length;i++){el=diff.del[i];delete this.visibleElements[el.id]}for(i=0;i<diff.add.length;i++){el=diff.add[i];this.visibleElements[el.id]=el}this.events.fireEvent("onUpdateVisibleElements")};this.updateViewedElements=this.updateVisibleElements;this.selectedElements={};this.getSelectedElements=function(){var res=[];var selEls=this.selectedElements;for(var i in selEls){if(selEls.hasOwnProperty(i)&&SLDiagram.isNumber(i)){var el=selEls[i];if(SLDiagram.isElement(el)){res.push(el)}}}return res};this.getSelectedElement=function(n){var selEls=this.selectedElements;var j=0;var res=null;for(var i in selEls){if(selEls.hasOwnProperty(i)&&SLDiagram.isNumber(i)){var el=selEls[i];if(j==n){return el}j=j+1}}return null};this.isSelectedElement=function(id){return Boolean(typeof this.selectedElements[id]!=="undefined"&&this.selectedElements[id].id==this.elements[id].id)};this.selectionLayer=new createjs.Container();this.renderMinInterval=175;this.render=function(params){var i,el,j,container,background;params=params||{};if(params.updateVisibleElements){this.updateVisibleElements()}try{this.events.fireEvent("beforeRender");this.stage.clear();this.stage.removeAllChildren();if(!this.selectionLayer){this.selectionLayer=new createjs.Container()}this.selectionLayer.removeAllChildren();this.stage.update();this._offsetSnapToPixel();background=this.getBackground();background.getShape(true);container=background.getContainer();background.clear();this.stage.addChild(container);var layers={};var allLayers=[];var layer;for(i in this.visibleElements){if(this.visibleElements.hasOwnProperty(i)){el=this.visibleElements[i];if(SLDiagram.isElement(el)){layer=el.type.getLayerNumber.call(el);if(typeof layers[layer]==="undefined"||!SLDiagram.isArray(layers[layer])){layers[layer]=[];allLayers.push(layer)}layers[layer].push(el)}}}allLayers=allLayers.sort(SLDiagram.numberAscSorter);for(i=0;i<allLayers.length;i++){layer=allLayers[i];for(j in layers[layer]){if(layers[layer].hasOwnProperty(j)){el=layers[layer][j];if(SLDiagram.isElement(el)){if(params.clearCache){el.clearCache()}var shape=el.type.draw.call(el);container.addChild(shape)}}}}container.addChild(this.selectionLayer);this.stage.update()}catch(ex){console.error("Ошибка во время отрисовки схемы:",ex)}this.events.fireEvent("onRender")};if(this.renderMinInterval>0){this.render=SLDiagram.AsyncFunction.create(this.render,{scope:this,timeout:this.renderMinInterval,argumentsParser:function(newArgs,oldArgs,render){var newCfg=newArgs[0]||{};if(!oldArgs){oldArgs=[]}if(!oldArgs[0]){oldArgs.push({})}var oldCfg=oldArgs[0];if(newCfg.updateVisibleElements){oldCfg.updateVisibleElements=true}if(newCfg.clearCache){oldCfg.clearCache=true}if(typeof newCfg.delay==="number"){render.setTimeout(newCfg.delay)}return oldArgs}})}this.getBackground=function(){if(!this._background){this._background=new SLDiagram.Background({sldiagram:this})}return this._background};this.stageMouseMove=function(e){console.warn("WARN: Использование устаревшего метода SLDiagram.stageMouseMove")};this.stageMouseUp=function(e){console.warn("WARN: Использование устаревшего метода SLDiagram.stageMouseUp")};this.types={};this.addType=function(type){type.setSLDiagram(this);this.types[type.id]=type};this.getTypeByName=function(name){for(var i in this.types){if(this.types.hasOwnProperty(i)){var t=this.types[i];if(t.name==name){return t}}}return null};this.getTypeById=function(id){return this.types[id]};this.getType=function(arg){if(typeof arg=="number"){return this.getTypeById(arg)}else{if(typeof arg=="string"){return this.getTypeByName(arg)}else{return null}}};this.elements={};this.lastElementId=-1;this.activeElements={};this.addElement=function(cfg){var element;if(typeof cfg=="object"&&SLDiagram.isElement(cfg)){element=cfg}else{element=new SLDiagram.Element(cfg)}var t=element.type;var id=this.lastElementId+1;element.id=id;if(typeof this.elements[id]!=="undefined"&&this.elements[id]!==null){console.warn("WARN: element with id="+id+" replaced")}this.elements[id]=element;this.lastElementId=element.id;try{if(typeof this.rtree==="object"&&this.rtree!==null){this.rtree.insert(id)}}catch(ex){console.error("Error at execute this.rtree.insert")}if(t.isActive.call(element)){this.activeElements[id]=element}element.getSetterVoltageClass().execute(this.getDefaultVoltageClass());this.getSetterChangedState().execute(true)};this.clearSelection=function(){if(SLDiagram.debugMode){console.warn("WARN: Использование устаревшего метода SLDiagram.clearSelection")}};this.addSelection=function(el){if(SLDiagram.debugMode){console.warn("WARN: Использование устаревшего метода SLDiagram.addSelection")}};this.removeSelection=function(el){if(SLDiagram.debugMode){console.warn("WARN: Использование устаревшего метода SLDiagram.removeSelection")}};this.changeSelection=function(data){var sld=this;var act,el,j,i;var changes=false;if(data&&!data.disableEvent&&data.actions&&data.actions.length>0){this.events.fireEvent("beforeChangeSelection",true)}var add={};var remove={};var res={add:[],remove:[]};if(!(data&&data.actions)){if(SLDiagram.debugMode){console.warn("WARN: SLDiagram.changeSelection: Нет данных для изменения выделения")}return false}for(i=0;i<data.actions.length;i++){act=data.actions[i];switch(act.action){case"add":if(act.elements){for(j in act.elements){if(act.elements.hasOwnProperty(j)){el=act.elements[j];if(SLDiagram.isElement(el)&&!(sld.selectedElements[el.id])){sld.selectedElements[el.id]=el;add[el.id]=el;if(!(data.disableDraw)){el.type.draw.call(el)}changes=true}else{if(SLDiagram.debugMode){console.warn("WARN: попытка установки выделения на объект не соответствующий типу SLDiagram.Element")}}}}}else{if(SLDiagram.debugMode){console.warn("WARN: Не указаны элементы для установки выделения")}}break;case"remove":if(act.elements){for(j in act.elements){if(act.elements.hasOwnProperty(j)){el=act.elements[j];if(SLDiagram.isElement(el)&&sld.selectedElements[el.id]){delete sld.selectedElements[el.id];remove[el.id]=el;if(!(data.disableDraw)){el.type.draw.call(el)}changes=true}else{if(SLDiagram.debugMode){console.warn("WARN: попытка снятия выделения с объекта не соответствующего типу SLDiagram.Element")}}}}}else{if(SLDiagram.debugMode){console.warn("WARN: Не указаны элементы для снятия выделения")}}break;case"clear":for(j in sld.selectedElements){if(sld.selectedElements.hasOwnProperty(j)){el=sld.selectedElements[j];delete sld.selectedElements[j];remove[el.id]=el;if(!(data.disableDraw)){el.type.draw.call(el)}changes=true}}break;default:if(SLDiagram.debugMode){console.warn("WARN: Неизвестное действие")}}}if(changes){for(i in add){if(add.hasOwnProperty(i)&&remove.hasOwnProperty(i)&&add[i]&&remove[i]){delete add[i];delete remove[i]}}for(i in add){if(add.hasOwnProperty(i)){res.add.push(add[i])}}for(i in remove){if(remove.hasOwnProperty(i)){res.remove.push(remove[i])}}if(res.add.length===0&&res.remove.length===0){changes=false;res=null}}if(changes&&!data.disableEvent){sld.events.fireEvent("changeSelection",res)}return res};this.addActiveElement=function(el){this.activeElements[el.id]=el};this.removeActiveElement=function(el){if(typeof this.activeElements[el.id]!=="undefined"){delete this.activeElements[el.id]}};this.getScale=function(){var scale=this.getConfigProperty("scale");if(!SLDiagram.isNumber(scale)){scale=1;if(SLDiagram.debugMode){console.error("ERROR: Неверный параметр масштаба в настройках схемы")}}return Number(scale)};this.setScale=function(scale){var res=Boolean(0.01<=scale&&scale<=60);if(scale>60){scale=60}if(scale<0.01){scale=0.01}this.setConfigProperty("scale",scale);return res};this.getCurrentOffset=function(){return{x:this.getConfigProperty("currentOffset/x",0),y:this.getConfigProperty("currentOffset/y",0)}};this.setCurrentOffset=function(x,y){if(SLDiagram.isNumber(x)&&SLDiagram.isNumber(y)&&isFinite(x)&&isFinite(y)){this.setConfigProperty("currentOffset/x",Number(x));this.setConfigProperty("currentOffset/y",Number(y))}else{if(SLDiagram.debugMode){console.warn("WARN: Недопустимые значения аргументов x и y")}}};this.getVisibleRegion=function(){var scale=this.getScale();var region=new SLDiagram.Region({x:this.getConfigProperty("currentOffset/x",0,false),y:this.getConfigProperty("currentOffset/y",0,false),width:this.getConfigProperty("canvasSize/width",0,false)/scale,height:this.getConfigProperty("canvasSize/height",0,false)/scale});region.scale=scale;return region};this.getEditMode=function(){return this.getSysConfigProperty("modes/edit",false,false)};this.setEditMode=function(m){this.setSysConfigProperty("modes/edit",m);this.events.fireEvent("setEditMode",{editMode:m})};this.getResizeMode=function(){return this.getSysConfigProperty("modes/resize",true,false)};this.setResizeMode=function(m){if(m){this.setSysConfigProperty("modes/resize",true);this.setSysConfigProperty("modes/rotate",false)}else{this.setSysConfigProperty("modes/resize",false);this.setSysConfigProperty("modes/rotate",true)}};this.getRotateMode=function(){return this.getSysConfigProperty("modes/rotate",false,false)};this.setRotateMode=function(m){if(m){this.setSysConfigProperty("modes/rotate",true);this.setSysConfigProperty("modes/resize",false)}else{this.setSysConfigProperty("modes/rotate",false);this.setSysConfigProperty("modes/resize",true)}};this.getBlockEvenetsMode=function(){console.warn(this.USING_DEPRECATED_METHOD+" (SLDiagram.getBlockEvenetsMode)");return this.isDisabledEvents()};this.setBlockEvenetsMode=function(m){console.warn(this.USING_DEPRECATED_METHOD+" (SLDiagram.setBlockEvenetsMode)");if(m){return this.enableEvents()}else{return this.disableEvents()}};this.placedNewElement=null;this.getPlaceNewElementMode=function(){console.warn("WARN: Использование устаревшего метода SLDiagram.getPlaceNewElementMode");return false};this.setPlaceNewElementMode=function(m,el){console.warn("WARN: Использование устаревшего метода SLDiagram.setPlaceNewElementMode")};this.getMode=function(modeName){var res=null;switch(modeName){case"edit":res=this.getEditMode();break;case"resize":res=this.getResizeMode();break;case"rotate":res=this.getRotateMode();break;case"blockEvents":res=this.getBlockEvenetsMode();break;default:console.error("ERROR: Incorrect modeName");break}return res};this.setMode=function(modeName,value){switch(modeName){case"edit":this.setEditMode(value);break;case"resize":this.setResizeMode(value);break;case"rotate":this.setRotateMode(value);break;case"blockEvents":this.setBlockEvenetsMode(value);break;default:console.error("ERROR: Incorrect modeName");break}};this.searchByIdInArray=function(els,id){var res=[];for(var i in els){if(els.hasOwnProperty(i)){var el=els[i];if(el.type.getId.call(el)==id){res.push(el)}}}return res};this.searchByIdsInArray=function(els,ids){var res=[];var i,el;for(i in els){if(els.hasOwnProperty(i)){el=els[i];if(ids.indexOf(el.type.getId.call(el))>=0){res.push(el)}}}return res};this.searchElementsById=function(id){return this.searchByIdInArray(this.elements,id)};this.searchVisibleElementsById=function(id){return this.searchByIdInArray(this.visibleElements,id)};this.searchActiveElementsById=function(id){return this.searchByIdInArray(this.activeElements,id)};this.searchElementsByIds=function(ids){return this.searchByIdsInArray(this.elements,ids)};this.searchActiveElementsByIds=function(ids){return this.searchByIdsInArray(this.activeElements,ids)};this.getXMLHttpRequest=function(){if(window.XMLHttpRequest){return new window.XMLHttpRequest()}else{try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(ex){return null}}};this.createAjax=function(method,url,handler,params,scope){if(typeof scope==="undefined"||scope===null){scope=this}var ajax=this.getXMLHttpRequest();if(ajax!==null){ajax.scope=scope;ajax.open(method,url,true);ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded");ajax.onreadystatechange=handler;ajax.send(params)}else{console.error("AJAX not supported")}};this.applyData=(typeof config.applyData=="function")?config.applyData:function applyData(data){var blockMode=this.isDisabledEvents();if(blockMode){return null}var changes=new SLDiagram.DatasourceResponse({sldiagram:this});changes.applyData(data);this.render()};this.requests={getScheme:function(){console.warn("Request getScheme not replaced")},getData:function(){console.warn("Request getData not replaced")},getConfig:function(){console.warn("Request getConfig not replaced")},saveScheme:function(){console.warn("Request saveScheme not replaced")}};this.getStatusStyle=function(st){console.warn("WARN: Using deprecated method SLDiagram.getStatusStyle");if(typeof st==="undefined"||st===null){return this.getConfigProperty("scheme/statuses",null)}else{return this.getConfigProperty("scheme/statuses/"+st,null)}};this.getStatusStyle2=function(name){var styles=this.getStatusStyles();if(typeof name==="string"&&styles.hasOwnProperty(name)){return styles[name]}else{return null}};this._getDataSourceTmpl=function(){return{_getSelector:function(statusStyle){return".x-grid-cell."+statusStyle.getClassName()},_getCss:function(statusStyle){var selector=this._getSelector(statusStyle);return SLDiagram.Utils.getFirstCSSStyleDeclaration(selector)},getBorderColor:function(statusStyle){var css,borderColor;if(!this._borderColor){css=this._getCss(statusStyle);this._borderColor=css.getPropertyValue("border-color")}return this._borderColor},getBorderWidth:function(statusStyle){var css,width;if(!this._borderWidth){css=this._getCss(statusStyle);width=css.getPropertyValue("border-width");width=SLDiagram.Utils.anyStringToNumber(width)||1;this._borderWidth=width*2}return this._borderWidth}}};this._defaultsStatusStyles={OIC_DST_NOPRESENT:{className:"StatusStyle",defaults:{borderColor:"#00B000",borderWidth:2,padding:5}},OIC_DST_VALUENOCORRECT:{className:"StatusStyle",defaults:{borderColor:"#EDE613",borderWidth:2,padding:5}},OIC_DST_ADERATING:{className:"StatusStyle",defaults:{borderColor:"#FF0000",borderWidth:2,padding:5}},OIC_DST_WDERATING:{className:"StatusStyle",defaults:{borderColor:"#c43c35",borderWidth:2,padding:5}},OIC_DST_MANUAL:{className:"StatusStyleBottomRight",defaults:{borderColor:"#808080",borderWidth:1,padding:5,fillColor:"#0078FF"}},OIC_DST_SRCMANUAL:{className:"StatusStyleTopRight",defaults:{borderColor:"#808080",borderWidth:1,padding:5,fillColor:"#FF8C00"}},OIC_DST_SUBSTITUTION:{className:"StatusStyleTopRight",defaults:{borderColor:"#808080",borderWidth:1,padding:5,fillColor:"#FF8C00"}},OIC_DST_SLAVESEND:{className:"StatusStyleBottomRightInside",defaults:{borderColor:"#808080",borderWidth:1,fillColor:"#FF0000",padding:5}}};this.getStatusStyles=function(){var statuses,i,st,res={},cfg,styles,style;if(!this._statusStyles){this._statusStyles={};styles=this._defaultsStatusStyles;for(i in styles){if(styles.hasOwnProperty(i)){style=styles[i];if(SLDiagram[style.className]){this._statusStyles[i]=new SLDiagram[style.className](style)}}}}return this._statusStyles};this.setStatusStyle=function(st,style){this.setConfigProperty("statuses/"+st,style)};this.getCanvasSize=(typeof config.getCanvasSize=="function")?config.getCanvasSize:function(){return{width:this.getConfigProperty("canvasSize/width"),height:this.getConfigProperty("canvasSize/height")}};this.setCanvasSize=(typeof config.setCanvasSize=="function")?config.setCanvasSize:function setCanvasSize(w,h){this.setConfigProperty("canvasSize/width",w);this.setConfigProperty("canvasSize/height",h);var me=this;if(typeof this.canvas==="object"&&this.canvas!==null&&typeof this.canvas.setAttribute==="function"&&typeof this.canvas.width!=="undefined"&&typeof this.canvas.height!=="undefined"){this.render.once("beforeExecute",function(){me.canvas.setAttribute("width",w);me.canvas.setAttribute("height",h);me.canvas.width=w;me.canvas.height=h})}else{console.error("error")}this.render({updateVisibleElements:true})};this.toJSON=(typeof config.toJSON=="function")?config.toJSON:function(){var c=this.config;var els=[];for(var i in this.elements){if(this.elements.hasOwnProperty(i)&&SLDiagram.isNumber(i)){var el=this.elements[i];els.push(el)}}var res={elements:els,config:{scale:c.scale,drawSize:c.drawSize,currentOffset:c.currentOffset,selection:c.selection,figure:c.figure,voltageColors:c.voltageColors,scheme:{id:c.scheme.id,name:c.scheme.name,statuses:c.scheme.statuses,backColor:c.scheme.backColor},grid:c.grid}};if(typeof this.rtree!=="undefined"&&this.rtree!==null){res.rtree=this.rtree.get_tree()}else{console.log("Save without index")}return res};this.initIndex=function(){if(typeof this.rtree!=="undefined"&&this.rtree!==null){this.dropIndex()}this.rtree=new RTree(10);this.rtree.canvas=this;return this.rtree};this.createIndex=function(){var rt=this.initIndex();var _=SLDiagram.Underscore;var checkRect;var el;var rect;var i;for(i in this.elements){if(this.elements.hasOwnProperty(i)&&SLDiagram.isNumber(i)){el=this.elements[i];if(typeof el.id!="number"){el.id=Number(i)}rect=el.getRectangleRegion();checkRect=Boolean(_.isObject(rect)&&_.isNumber(rect.x)&&!_.isNaN(rect.x)&&_.isNumber(rect.y)&&!_.isNaN(rect.y)&&_.isNumber(rect.w)&&!_.isNaN(rect.w)&&_.isNumber(rect.h)&&!_.isNaN(rect.h));if(checkRect){rt.insert(rect,i)}}}};this.dropIndex=function(){delete this.rtree};this.getFormat=function(){return this.format};this.setFormat=function(format){this.format=new SLDiagram.Format(format);this.up=this.format;this.format.setSLDiagram(this)};this.clearFormat=function(){if(typeof this.format==="object"&&SLDiagram.isFormat(this.format)){if(SLDiagram.isFormat(this.format)){this.format.clearFormat()}delete this.format;delete this.up}this.delConfigProperty("scheme")};this.clearScheme=function(){this.dropIndex();this.elements={};this.activeElements={};this.visibleElements={};this.selectedElements={};this.lastElementId=-1;this.setDefaultVoltageClass(null);this.events.fireEvent("clearScheme",null)};this.removeElement=function(element){this.events.fireEvent("beforeRemoveElement",element);var el=element;var id=el.id;delete this.elements[id];if(this.activeElements.hasOwnProperty(id)){delete this.activeElements[id]}this.events.fireEvent("afterRemoveElement",id);this.getSetterChangedState().execute(true);return true};this.removeSelectedElements=function(){for(var i in this.selectedElements){if(this.selectedElements.hasOwnProperty(i)&&SLDiagram.isNumber(i)){var el=this.elements[i];el.type.removeElement.call(el)}}this.changeSelection({actions:[{action:"clear"}],disableDraw:true});this.render({updateVisibleElements:true})};this._componentRemover=null;this.getComponentRemover=function(){if(this._componentRemover){return this._componentRemover}this._componentRemover=new SLDiagram.ComponentRemover({sldiagram:this});return this._componentRemover};this.prepareDefaultConfig=function(){var sld=this;var bg=sld.getConfigProperty("scheme/backColor","#F8F8F8",false);var fg;if(SLDiagram.getColorBright(bg)==="light"){fg="#000000"}else{fg="#FFFFFF"}sld.setConfigProperty("figure/lineColor",fg);sld.setConfigProperty("figure/color",fg);sld.setConfigProperty("scheme/backColor",bg);sld.setConfigProperty("currentOffset",{x:0.5,y:0.5});if(typeof sld.config.scheme==="undefined"||typeof sld.config.scheme.statuses==="undefined"){sld.setConfigProperty("scheme/statuses",{OIC_DST_NOPRESENT:{line:{width:2,color:"#00B000"}},OIC_DST_VALUENOCORRECT:{line:{width:2,color:"#EDE613"}},OIC_DST_ADERATING:{line:{width:2,color:"#FF0000"}},OIC_DST_WDERATING:{line:{width:2,color:"#C43C35"}},OIC_DST_MANUAL:{line:{width:0.5,color:"#FFFFFF"},fill:{color:"#0000C0"}},OIC_DST_SRCMANUAL:{line:{width:2,color:"#808080"}},OIC_DST_SUBSTITUTION:{line:{width:2,color:"#A0A0A0"}}})}};this.formats={};this.format=null;this.up=this.format;this.addFormat=function(cfg){var sld=this;var format;if(SLDiagram.isFormat(cfg)){format=cfg}else{format=new SLDiagram.Format(cfg)}format.sldiagram=sld;format.canvas=format.sldiagram;if(typeof sld.formats[format.id]!=="undefined"&&sld.formats[format.id]!==null){console.warn("WARN: format with id="+format.id+" replaced")}sld.formats[format.id]=format};this.getFormatById=function(id){return this.formats[id]};this.getFormatByName=function(name){for(var i in this.formats){if(this.formats.hasOwnProperty(i)){var format=this.formats[i];if(format.name===name){return format}}}return null};this.setCurrentFormat=function(format){if(format!==null&&(typeof this.formats[format.id]==="undefined"||this.formats[format.id]===null)){console.warn("WARN: using not registred format")}if(SLDiagram.isFormat(format)){this.format=format;this.up=this.format}else{this.clearFormat()}};this.getCurrentFormat=function(){return((typeof this.format==="object"&&SLDiagram.isFormat(this.format))?this.format:null)};this.checkIds=function(els){if(typeof els==="undefined"||els===null){els=this.elements}console.group("checkIds");console.time("checkIds");var err={};err.failElements=0;err.notNumbersIndexes=0;err.notEqualsIndexes=0;err.notElements=0;var fail=false;console.groupCollapsed("checkIdsAllErrors");for(var i in els){if(els.hasOwnProperty(i)){var el=els[i];if(SLDiagram.isNumber(i)===false){fail=true;err.notNumbersIndexes++;console.warn("WARN: ============================================");console.warn("WARN: found not number index in SLDiagram.elements");console.warn("WARN: index = "+String(i))}if(Number(i)!==Number(el.id)){fail=true;err.notEqualsIndexes++;console.warn("WARN: ============================================");console.warn("WARN: wrong id in element");console.warn("WARN: element.id = "+String(el.id)+"; i = "+String(i));console.warn("WARN: element:",el)}if(SLDiagram.isElement(el)===false){fail=true;err.notElements++;console.warn("WARN: ============================================");console.warn("WARN: found not SLDiagram.Element in SLDiagram.elements");console.warn("WARN: index = "+String(i));console.warn("WARN: element:",el)}if(fail){err.failElements=err.failElements+1;fail=false}}}err.total=err.notNumbersIndexes+err.notEqualsIndexes+err.notElements;if(err.total>0){console.warn("WARN: ============================================")}console.groupEnd("checkIdsAllErrors");if(err.total>0){console.warn("Все ошибки: "+String(err.total));console.warn("Количество элементов с ошибками: "+String(err.failElements));console.warn("Не числовые индексы: "+String(err.notNumbersIndexes));console.warn("Не совпадающие идентификаторы элементов и индексы: "+String(err.notEqualsIndexes));console.warn("Неверные элементы: "+String(err.notElements))}else{console.log("Ошибки не обнаружены")}console.timeEnd("checkIds");console.groupEnd("checkIds")};this.checkSelectedElements=function(){console.group("checkSelectedElements");console.time("checkSelectedElements");var els=this.elements;var el,t,i,selState;var selEls=this.selectedElements;var err={};err.notSelectedElementsInStore=0;err.selectedElementsNotInStore=0;console.groupCollapsed("checkSelectedElementsAllErrors");for(i in selEls){if(selEls.hasOwnProperty(i)){el=selEls[i];t=el.type;if(t.getSelectedState.call(el)===false){err.notSelectedElementsInStore++;console.warn("WARN: ============================================");console.warn("WARN: found not selected element in store (element id = "+String(el.id)+")");console.warn("WARN: el:",el)}}}for(i in els){if(els.hasOwnProperty(i)){el=els[i];t=el.type;selState=t.getSelectedState.call(el);if(selState===true&&SLDiagram.isElement(selEls[i])===false){err.selectedElementsNotInStore++;console.warn("WARN: ============================================");console.warn("WARN: found selected element not in store (element id = "+String(el.id)+")");console.warn("WARN: el:",el)}}}err.total=err.notSelectedElementsInStore+err.selectedElementsNotInStore;if(err.total>0){console.warn("WARN: ============================================")}console.groupEnd("checkSelectedElementsAllErrors");if(err.total>0){console.warn("Все ошибки: "+String(err.total));console.warn("Не выделенные элементы в selectedElements: "+String(err.notSelectedElementsInStore));console.warn("Выделенные элементы не занесённые в selectedElements: "+String(err.selectedElementsNotInStore))}else{console.log("Ошибки не обнаружены")}console.timeEnd("checkSelectedElements");console.groupEnd("checkSelectedElements")};this.checkElementsExist=function(els){console.group("checkElementsExist");console.time("checkElementsExist");var allEls=this.elements;var err={};err.notExist=0;console.groupCollapsed("checkElementsExistAllErrors");for(var i in els){if(els.hasOwnProperty(i)){var el=els[i];if(SLDiagram.isElement(allEls[el.id])===false){err.notExist++;console.warn("WARN: =========================================");console.warn("WARN: Element with id="+String(el.id)+" not exist in SLDiagram.elements");console.warn("WARN: el:",el)}}}if(err.notExist>0){console.warn("WARN: =========================================")}console.groupEnd("checkElementsExistAllErrors");if(err.notExist>0){console.warn("Все ошибки: "+String(err.notExist));console.warn("Не существующие элементы: "+String(err.notExist))}else{console.log("Ошибки не обнаружены")}console.timeEnd("checkElementsExist");console.groupEnd("checkElementsExist")};this.getTypeImage=function(type){return type.getImage()};this.getFigureSnapStatus=function(){return Boolean(this.getSysConfigProperty("snapToFigure",false,false))};this.setFigureSnapStatus=function(s){this.setSysConfigProperty("snapToFigure",Boolean(s))};this.getNearestGridPoint=function(x,y,elementCaller){var tx,ty;var grid=this.getGridSettings();if(grid===null){return null}var currentOffset=this.getCurrentOffset();var res={};var nodes=[[{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0}]];var snapPoints;if(elementCaller&&elementCaller.type){snapPoints=elementCaller.type.getSnapPoints.call(elementCaller)}else{snapPoints=[];if(SLDiagram.debugMode){console.warn("WARN: SLDiagram.getNearestGridPoint: не задан аргумент elementCaller")}}res.y=((Math.round(y/grid.step.y))*grid.step.y+grid.offset.y);res.x=((Math.round(x/grid.step.x))*grid.step.x+grid.offset.x);for(ty=0,ry=-1;ty<3;ty++,ry++){if(!nodes[ty]){nodes[ty]=[]}for(tx=0,rx=-1;tx<3;tx++,rx++){nodes[ty][tx]={x:res.x+rx*grid.step.x,y:res.y+ry*grid.step.y};for(var i in snapPoints){if(snapPoints.hasOwnProperty(i)){var x1=Math.round(nodes[ty][tx].x*100)/100;var y1=Math.round(nodes[ty][tx].y*100)/100;var x2=Math.round(snapPoints[i].x*100)/100;var y2=Math.round(snapPoints[i].y*100)/100;if(x1===x2&&y1===y2){nodes[ty][tx].x=Infinity;nodes[ty][tx].y=Infinity}}}}}var allNodes=[];for(ty=0;ty<nodes.length;ty++){for(tx=0;tx<nodes[ty].length;tx++){allNodes.push(nodes[ty][tx])}}res=SLDiagram.calcMinRFromPoints(allNodes,{x:x,y:y});return res};this.getNearestFigures=function(x,y){var gridStep=this.getConfigProperty("grid/step",{x:20,y:20},false);var distance=(gridStep.x+gridStep.y)/2;var els=this.searchElementsInRegion({x:x-4*distance,y:y-4*distance,width:distance*8,height:distance*8});return els};this.getNearestFigureSnapPoints=function(x,y,elementCaller){var els=this.getNearestFigures(x,y);var points=[];var el,t,p,pp;for(var i in els){if(els.hasOwnProperty(i)){el=els[i];t=el.type;if(t.canvas.selectedElements.hasOwnProperty(el.id)===false&&el.id!==elementCaller.id){pp=t.getSnapPoints.call(el);for(var j in pp){if(pp.hasOwnProperty(j)){p=SLDiagram.recursCloneObject(pp[j]);p.owner=el;points.push(p)}}}}}return points};this.getNearestFigureSnapPoint=function(x,y,elementCaller){var points=this.getNearestFigureSnapPoints(x,y,elementCaller);var figurePoints=elementCaller.type.getSnapPoints.call(elementCaller);for(var i in figurePoints){if(figurePoints.hasOwnProperty(i)){var fp=figurePoints[i];for(var j in points){if(points.hasOwnProperty(j)){var p=points[j];var fpx=Math.round(fp.x*100)/100;var fpy=Math.round(fp.y*100)/100;var px=Math.round(p.x*100)/100;var py=Math.round(p.y*100)/100;if(fpx==px&&fpy==py){delete points[j]}}}}}var nearestPoint=null;var minR=Infinity;var gridStep=this.getConfigProperty("grid/step",{x:20,y:20},false);var distance=(gridStep.x+gridStep.y)/2;nearestPoint=SLDiagram.calcMinRFromPoints(points,{x:x,y:y});if(!nearestPoint){return null}nearestPoint=SLDiagram.calcR(nearestPoint,{x:x,y:y});if(nearestPoint.r>distance){return null}return nearestPoint};this.calcDeltaForSnap=function(args){return args.elementCaller.type.calcDeltaForSnap.call(args.elementCaller,args)};this.calcDeltaForSnapOnMove=function(args){if(SLDiagram.onMoveSnapAlgorithm==="one point"){return elementCaller.type.calcDeltaForSnapOnMove.call(elementCaller,args)}var x=args.x;var y=args.y;var elementCaller=args.elementCaller;var sld=this;var els;var id;if(SLDiagram.onMoveSnapAlgorithm==="all points from one"){id=elementCaller.id;els={id:elementCaller}}else{els=sld.selectedElements}var allDiffs=[];var minDiff;var diffs={grid:[],figure:[],none:[]};var diff;var el;for(var i in els){if(els.hasOwnProperty(i)){el=els[i];diff=el.type.calcDeltaForSnapOnMove.call(el,args);if(typeof diff.type==="string"&&diff.type.length>0){diffs[diff.type].push(diff)}else{if(SLDiagram.debugMode){console.warn("WARN: Обнаружена точка привязки без указания типа привязки")}}}}if(diffs.figure&&diffs.figure.length>0){minDiff=SLDiagram.calcMinRFromPoints(diffs.figure)}else{if(diffs.grid&&diffs.grid.length>0){minDiff=SLDiagram.calcMinRFromPoints(diffs.grid)}}if(!minDiff||(minDiff.x===Infinity&&minDiff.y===Infinity)){minDiff={x:0,y:0,type:"none"}}minDiff.dx=minDiff.x;minDiff.dy=minDiff.y;return minDiff};this.screenToScheme=function(x,y){var res={};var currentOffset=this.getCurrentOffset();var scale=this.getScale();res.x=currentOffset.x+x/scale;res.y=currentOffset.y+y/scale;return res};this.schemeToScreen=function(x,y){var res={};var currentOffset=this.getCurrentOffset();var scale=this.getScale();res.x=(x-currentOffset.x)*scale;res.y=(y-currentOffset.y)*scale;return res};this.getMousePosition=function(){var res;try{res=this.screenToScheme(this.stage.mouseX,this.stage.mouseY)}catch(ex){res={x:0,y:0}}return res};this.copyElementsToClipboard=function(){var sld=this;var els=sld.getSelectedElements();if(els.length>0){sld.clearClipboard();var buf=SLDiagram.Manager.clipboard;for(var i in els){if(els.hasOwnProperty(i)){var el=els[i];buf[i]={config:SLDiagram.recursCloneObject(el.config),type:el.type.id}}}var groupPosition=sld.calcCenterPositionForGroup(els);SLDiagram.Manager.setSysConfigProperty("clipboard/groupPosition",groupPosition);return true}else{return false}};this.pasteElementsFromClipboard=function(){var sld=this;var buf=SLDiagram.Manager.clipboard;var groupPosition=SLDiagram.Manager.getSysConfigProperty("clipboard/groupPosition",{x:0,y:0},false);var mouseInBounds=sld.stage.mouseInBounds;var screenMousePos;if(mouseInBounds){screenMousePos={x:sld.stage.mouseX,y:sld.stage.mouseY}}else{var canvasSize=sld.getCanvasSize();screenMousePos={x:canvasSize.width/2,y:canvasSize.height/2}}var schemeMousePos=sld.screenToScheme(screenMousePos.x,screenMousePos.y);var diff={x:schemeMousePos.x-groupPosition.x,y:schemeMousePos.y-groupPosition.y};var newEls=[];for(var i in buf){if(buf.hasOwnProperty(i)){var e=SLDiagram.recursCloneObject(buf[i]);var el=new SLDiagram.Element({config:e.config,type:sld.getTypeById(e.type)});if(el.type.isActive.call(el)){el.type.setId.call(el,null)}if(el.type.getValueType.call(el)==="number"){el.type.setValue.call(el,0)}el.setInvertState(false);el.setInvertPullState(false);el.getSetterVoltageClass().disable();sld.addElement(el);el.getSetterVoltageClass().enable();el.type.move.call(el,diff.x,diff.y);newEls.push(el)}}sld.changeSelection({actions:[{action:"clear"},{action:"add",elements:newEls}]});sld.render({updateVisibleElements:true});return true};this.clearClipboard=function(){return SLDiagram.Manager.clearClipboard()};this.calcCenterPositionForGroup=SLDiagram.calcCenterPositionForGroup;this.cloneElements=function(){var sld=this;var els=sld.getSelectedElements();for(var i in things){if(things.hasOwnProperty(i)){var thing=things[i]}}};this.initSchemeAndDatabaseIds=function(data){var store=this.getSchemeAndDatabaseIds();store.setData(data)};this.getSchemeAndDatabaseIds=function(){if(!this.schemeAndDatabaseIds){this.schemeAndDatabaseIds=new SLDiagram.SchemeAndDatabaseIds();this.schemeAndDatabaseIds.setSLDiagram(this)}return this.schemeAndDatabaseIds};this.debugPoints=[];this.addDebugPoint=function(point,opts){if(!(point&&typeof point.x==="number"&&typeof point.y==="number")){if(SLDiagram.debugMode){console.error("ERROR: SLDiagram.addDebugPoint не задан обязательный аргумент point")}return}var p={};p.x=point.x;p.y=point.y;if(opts&&opts.text){p.text=opts.text}if(opts&&opts.direction){if(["ne","se","sw","nw"].indexOf(opts.direction)===-1){if(SLDiagram.debugMode){console.warn("WARN: SLDiagram.addDebugPoint неверно указано направление надписи в параметре opts.direction")}}else{p.direction=opts.direction}}this.debugPoints.push(p);this.render()};this.removeDebugPoint=function(opts){if(!opts){if(SLDiagram.debugMode){console.error("ERROR: SLDiagram.removeDebugPoint не задан обязательный аргумент opts")}return}if(!((typeof opts.x==="number"&&typeof opts.y==="number")||typeof opts.text==="string")){if(SLDiagram.debugMode){console.error("ERROR: SLDiagram.removeDebugPoint не корректно заданы параметры аргумента opts")}return}for(var i=this.debugPoints.length-1;i>=0;i--){var dp=this.debugPoints[i];if((opts.x&&opts.y&&opts.x==dp.x&&opts.y==dp.y)||(opts.text&&opts.text==dp.text)){this.debugPoints.splice(i,1)}}this.render()};this.clearDebugPoints=function(){this.debugPoints=[];this.render()};this.drawDebugPoints=function(container){if(!SLDiagram.debugMode){return}var sld=this;var gridStatus=sld.getGridStatus();var editMode=sld.getEditMode();if(!(gridStatus&&editMode)){return}var gridSettings=sld.getGridSettings();if(gridSettings===null){return}for(var i in sld.debugPoints){if(sld.debugPoints.hasOwnProperty(i)){var dp=sld.debugPoints[i];sld.drawDebugPoint(container,dp)}}};this.getDebugPointSettings=function(debugPoint){var sld=this;var gridSettings=sld.getGridSettings();var scale=sld.getScale();var lineColor=this.getGridLineColor();var lineSettings={begin:{x:debugPoint.x,y:debugPoint.y},end:{},color:lineColor,width:1};lineSettings.begin=sld.schemeToScreen(lineSettings.begin.x,lineSettings.begin.y);var lineSize=7;lineSettings.end.x=(lineSettings.begin.x+((debugPoint.direction==="sw"||debugPoint.direction==="nw")?-1:1)*lineSize);lineSettings.end.y=(lineSettings.begin.y+((debugPoint.direction==="se"||debugPoint.direction==="sw")?1:-1)*lineSize);var fontSize=9;var textSettings={font:String(fontSize)+"px Arial",color:lineColor,align:((debugPoint.direction==="sw"||debugPoint.direction==="nw")?"right":"left"),valign:((debugPoint.direction==="se"||debugPoint.direction==="sw")?"top":"buttom"),text:((debugPoint.text)?debugPoint.text:String(debugPoint.x)+"x"+String(debugPoint.y)),x:lineSettings.end.x,y:lineSettings.end.y};return{line:lineSettings,text:textSettings}};this.drawDebugPoint=function(container,debugPoint){var sld=this;var cfg=sld.getDebugPointSettings(debugPoint);var shape=new createjs.Shape();(shape.graphics.beginStroke(cfg.line.color).setStrokeStyle(cfg.line.width).moveTo(cfg.line.begin.x,cfg.line.begin.y).lineTo(cfg.line.end.x,cfg.line.end.y));container.addChild(shape);var text=new createjs.Text(cfg.text.text,cfg.text.font,cfg.text.color);text.x=cfg.text.x;text.y=cfg.text.y;text.textAlign=cfg.text.align;text.textBaseline=cfg.text.valign;container.addChild(text)};this.getSchemeRegion=function(){var res;var sld=this;if(SLDiagram.Underscore.isEmpty(sld.elements)){return null}if(typeof sld.rtree==="object"){var tree=sld.rtree.get_tree();res={x:tree.x,y:tree.y,width:tree.w,height:tree.h}}else{var el,t,region;var minX=Infinity;var minY=Infinity;var maxX=-Infinity;var maxY=-Infinity;for(var i in sld.elements){if(sld.elements.hasOwnProperty(i)){el=sld.elements[i];t=el.type;region=t.getRectangleRegion.call(el);minX=Math.min(minX,region.x);minY=Math.min(minY,region.y);maxX=Math.max(maxX,region.x+region.width);maxY=Math.max(maxY,region.y+region.height)}}res={x:minX,y:minY,width:maxX-minX,height:maxY-minY}}if(typeof res.x==="number"&&isNaN(res.x)===false&&typeof res.y==="number"&&isNaN(res.y)===false&&typeof res.width==="number"&&isNaN(res.width)===false&&typeof res.height==="number"&&isNaN(res.height)===false){return res}else{return null}};this.createRandomElements=function(opts){var sld=this;var min=Boolean(opts&&opts.min&&typeof opts.min.x==="number"&&typeof opts.min.y==="number");var max=Boolean(opts&&opts.max&&typeof opts.max.x==="number"&&typeof opts.max.y==="number");var step=Boolean(opts&&opts.step&&typeof opts.step.x==="number"&&typeof opts.step.y==="number");var count=Boolean(opts&&typeof opts.count==="number");var rect=Boolean(min&&max&&step);var count2=Boolean(min&&max&&count);var types=[];for(var i in sld.types){if(sld.types.hasOwnProperty(i)){types.push(sld.types[i])}}var count3=0;var x,y;var createRandomElement=function(x,y){var random=SLDiagram.getRandomInt(0,types.length-1);var randomType=types[random];var el=new SLDiagram.Element({type:randomType});el.type.setPosition.call(el,x,y);sld.addElement(el)};if(rect){for(y=opts.min.y;y<opts.max.y;y=y+opts.step.y){for(x=opts.min.x;x<opts.max.x;x=x+opts.step.x){createRandomElement(x,y);count3++;if(count&&count3>opts.count){break}}if(count&&count3>opts.count){break}}}else{if(count2){for(count3=0;count3<=opts.count;count3++){x=SLDiagram.getRandomInt(opts.min.x,opts.max.x);y=SLDiagram.getRandomInt(opts.min.y,opts.max.y);createRandomElement(x,y)}}}sld.render({updateVisibleElements:true})};this.getConfigDescriptor=function(){if(this.configDescriptor&&SLDiagram.TreeStoreItem.isInstanceOf(this.configDescriptor)===false){this.configDescriptor=SLDiagram.createConfigDescriptor(this.config,this.configDescriptor,this)}else{if(!this.configDescriptor){this.configDescriptor=SLDiagram.getConfigDescriptor(this.config,this)}else{if(SLDiagram.TreeStoreItem.isInstanceOf(this.configDescriptor)===true){this.configDescriptor.setSLDiagram(this);return this.configDescriptor}else{console.error("ERROR: configDescriptor не был создан");return null}}}return this.configDescriptor};this.getPropertyDescriptor=function(path){return this.getConfigDescriptor().getValueByPath(path)};this.getGridLineColor=function(){var lineColor=SLDiagram.toColor(this.getConfigProperty("grid/lineColor",null,false));if(lineColor===null){return this.getGridLineColorAuto()}else{return lineColor}};this.getGridLineColorAuto=function(){var backColor=this.getConfigProperty("scheme/backColor","#F8F8F8");var lineColor;if(SLDiagram.getColorBright(backColor)==="light"){lineColor="#CCCCCC"}else{lineColor="#303030"}this.setConfigProperty("grid/lineColor",lineColor);return lineColor};this.getElementUnderPoint=function(x,y){var res;var stage=this.stage;if(typeof x==="undefined"){x=stage.mouseX}if(typeof y==="undefined"){y=stage.mouseY}var point=this.screenToScheme(x,y);var elements=this.searchElementsInRegion({x:point.x-1,y:point.y-1,width:3,height:3});elements.sort(function(a,b){aLayer=a.type.getLayerNumber.call(a);bLayer=b.type.getLayerNumber.call(b);if(aLayer!==bLayer){return parseInt(bLayer)-parseInt(aLayer)}return parseInt(b.id)-parseInt(a.id)});res=(elements[0])?elements[0]:null;return res};this.getBackgroundColor=function(){var color;color=this.getConfigProperty("scheme/backColor",null);color=SLDiagram.toColor(color)||"#F8F8F8";return color};this.setBackgroundColor=function(color){if(SLDiagram.isColor(color)){this.setConfigProperty("scheme/backColor",color);return true}else{return false}};this.getForegroundColor=function(){var bg=this.getBackgroundColor();var bright=SLDiagram.getColorBright(bg);if(bright==="dark"){return"#FFFFFF"}else{return"#000000"}};this.clearElementsCache=function(){var els,i,el,type;els=this.elements;for(i in els){if(els.hasOwnProperty(i)){el=els[i];el.getType().clearCache.call(el)}}return true};this.getMouseSimulator=function(){if(!this._mouseSimulator){this._mouseSimulator=new SLDiagram.MouseSimulator({sldiagram:this})}return this._mouseSimulator};this._clearDataAndStatusesOnLoad=function(events,type,data){if(type==="afterGetConfig"){this._clearDataAndStatusesOnLoadAfterGetConfig=true}else{if(type==="afterGetScheme"){this._clearDataAndStatusesOnLoadAfterGetScheme=true}}if(this._clearDataAndStatusesOnLoadAfterGetConfig&&this._clearDataAndStatusesOnLoadAfterGetScheme){this.applyData([])}};this._runner=null;this.getRunner=function(){if(this._runner){return this._runner}this._runner=new SLDiagram.Runner();return this._runner};this.getSchemeId=function(){return this.getConfigProperty("scheme/id",null,false)};this.setSchemeId=function(id){if(id===null){this.delConfigProperty("scheme/id");return true}else{if(typeof id==="number"){this.setConfigProperty("scheme/id",id);return true}else{return false}}};this.getSchemeName=function(){return this.getConfigProperty("scheme/name",null,false)};this.setSchemeName=function(name){if(name===null||name===""){this.delConfigProperty("scheme/name");return true}else{if(typeof name==="string"&&name.length>0){this.setConfigProperty("scheme/name",name);return true}else{return false}}};this.getNextSchemeId=function(){var idFromDs,i,el,id,elId;if(this.schemeAndDatabaseIds){idFromDs=this.schemeAndDatabaseIds.getNextSchemeId()-1}else{idFromDs=0}id=-Infinity;for(i in this.elements){if(this.elements.hasOwnProperty(i)){el=this.elements[i];elId=el.getId();if(SLDiagram.isNumber(elId)){elId=Number(elId)}else{elId=-Infinity}if(elId>id){id=elId}}}if(idFromDs>id){id=idFromDs}id=id+1;return id};this.clearComponents=function(){this.getComponentRemover().clearOnOpenScheme();return true};this.getSetterChangedState=function(){if(!this._setterChangedState){this._setterChangedState=SLDiagram.DisabledFunction.create(this.setChangedState,this)}return this._setterChangedState};this.setChangedState=function(state,force){if(this.getEditMode()===true||force){this._changedState=Boolean(state);return true}else{return false}};this.getChangedState=function(){if(typeof this._changedState!=="undefined"){return Boolean(this._changedState)}else{return false}};this.disableSetChangedState=function(){return this.getSetterChangedState().disable()};this.enableSetChangedState=function(){return this.getSetterChangedState().enable()};this.isNewScheme=function(){var id;id=this.getConfigProperty("scheme/id",null,false);return Boolean(id===null||!SLDiagram.isNumber(id))};this.getDefaultVoltageClass=function(){var value=this.getConfigProperty("defaultVoltageClass",null,false);return value};this.setDefaultVoltageClass=function(value){var voltage;if(value===null||value===""){this.delConfigProperty("defaultVoltageClass");return true}else{if((typeof value==="string"&&value.length>0)||(typeof value==="number")){value=String(value);voltage=this.getConfigProperty("voltageColors/"+value,null,false);if(voltage!==null){this.setConfigProperty("defaultVoltageClass",value);return true}else{return false}}else{return false}}};this._isEnabledSnapToPixel=true;this.getDataPeriodUpdate=function(){var cfg=this.getConfigProperty("scheme/period",null,false);return cfg};this.getFocusState=function(){return Boolean(this._focus)};this.setFocusState=function(state){this._focus=Boolean(state)};this.events=new SLDiagram.Observable();this.changeSelectionEvent=function(events,type,data){};var onRender=function(){};this.events.listen("onRender",onRender,null,this);var onUpdateVisibleElements=function(){};this.onElementMove=function(observable,type,data){if(typeof data==="undefined"&&(typeof data.element!=="object"||data.element===null)){throw new Error("FATAL: data.element not exist")}var dx;var dy;if(typeof data.dx!=="number"){dx=0;console.warn("WARN: data.dx not number")}else{dx=data.dx}if(typeof data.dy!=="number"){dy=0;console.warn("WARN: data.dy not number")}else{dy=data.dy}var el=data.element;var t=el.type;var elId=Number(el.id);var sld=this;var scale=sld.getScale();if(typeof sld.selectedElements[elId]==="undefined"){return true}var visibleRegion=this.getVisibleRegion();var elementRegion;var isCross,isVisible;var newShape;for(var i in sld.selectedElements){if(sld.selectedElements.hasOwnProperty(i)&&SLDiagram.isNumber(i)){if(Number(i)!==elId){var anotherEl=sld.selectedElements[i];var anotherT=anotherEl.type;var schemePos=anotherT.getSysConfigProperty.call(anotherEl,"move/position",null,false);var screenDiff={x:dx*scale,y:dy*scale};if(typeof anotherEl.current==="undefined"||typeof anotherEl.current.x!=="number"||typeof anotherEl.current.y!=="number"){var scrPos=anotherT.getScreenPosition.call(anotherEl);anotherEl.current={x:scrPos.x,y:scrPos.y}}if(schemePos===null){schemePos=anotherT.getPosition.call(anotherEl);anotherT.setSysConfigProperty.call(anotherEl,"move/position",schemePos)}if(anotherEl.id!==elId){elementRegion=anotherEl.getRectangleRegion();elementRegion=new SLDiagram.Region({x:SLDiagram.precisionNumber(elementRegion.x,4),y:SLDiagram.precisionNumber(elementRegion.y,4),width:SLDiagram.precisionNumber(elementRegion.width,4),height:SLDiagram.precisionNumber(elementRegion.height,4)});isCross=elementRegion.cross(visibleRegion);isVisible=this.visibleElements.hasOwnProperty(anotherEl.id);if(isCross&&!isVisible){this.visibleElements[anotherEl.id]=anotherEl;newShape=anotherEl.draw();this.getBackground().getContainer().addChild(newShape)}else{if(!isCross&&isVisible){delete this.visibleElements[anotherEl.id]}}anotherEl.displayObject.x=anotherEl.current.x+screenDiff.x;anotherEl.displayObject.y=anotherEl.current.y+screenDiff.y;anotherEl.displayObject.select.x=anotherEl.current.x+screenDiff.x;anotherEl.displayObject.select.y=anotherEl.current.y+screenDiff.y;anotherT.setPosition.call(anotherEl,schemePos.x+data.dx,schemePos.y+data.dy);sld.stage.update()}}}}};this.events.listen("onElementMove",this.onElementMove,{block:true},this);this.afterElementMove=function(events,type,data){if(typeof data==="undefined"&&(typeof data.element!=="object"||data.element===null)){throw new Error("FATAL: data.element not exist")}var dx;var dy;if(typeof data.dx!=="number"){dx=0;console.warn("WARN: data.dx not exist")}else{dx=data.dx}if(typeof data.dy!=="number"){dy=0;console.warn("WARN: data.dy not exist")}else{dy=data.dy}var el=data.element;var t=el.type;var elId=Number(el.id);var sld=this;if(typeof sld.selectedElements[elId]==="undefined"){return true}for(var i in sld.selectedElements){if(sld.selectedElements.hasOwnProperty(i)&&SLDiagram.isNumber(i)){if(Number(i)!==elId){var anotherEl=sld.selectedElements[i];var anotherT=anotherEl.type;if(anotherEl.id!==elId){anotherT.draw.call(anotherEl);delete anotherEl.current;anotherT.delSysConfigProperty.call(anotherEl,"move")}}}}sld.stage.update()};this.events.listen("afterElementMove",this.afterElementMove,{block:true},this);this.addSelectionEvent=function(events,type,data){if(SLDiagram.debugMode){console.info("INFO: Использование устаревшего события addSelectionEvent")}};this.events.listen("addSelectionEvent",this.addSelectionEvent,{block:true},this);this.removeSelectionEvent=function(events,type,data){if(SLDiagram.debugMode){console.info("INFO: Использование устаревшего события removeSelectionEvent")}};this.events.listen("removeSelectionEvent",this.removeSelectionEvent,{block:true},this);this.onUpdateSchemeConfig=function(events,type,data){};this.onUpdateElementConfig=function(events,type,data){};this.afterSaveScheme=function(events,type,data){};this.beforeSaveScheme=function(events,type,data){};this.events.listen("afterGetScheme",this._clearDataAndStatusesOnLoad,{anyContext:true},this);this.events.listen("afterGetConfig",this._clearDataAndStatusesOnLoad,{anyContext:true},this);this.beforeRemoveElement=function(events,type,element){var componentRemover=this.getComponentRemover();componentRemover.removeElement(element)};this.events.listen("beforeRemoveElement",this.beforeRemoveElement,{anyContext:true},this);this.events.listen("afterOpenScheme",this.clearComponents,{anyContext:true},this);if(typeof this._onUpdateGridSettings==="function"){this.events.listen("onUpdateSchemeConfig",this._onUpdateGridSettings,{anyContext:true},this)}if(typeof this._updateGridAfterOpenScheme==="function"){this.events.listen("afterOpenScheme",this._updateGridAfterOpenScheme,{anyContext:true},this)}else{console.warn("Не удалось привязать обработчик события SLDiagram._updateGridAfterOpenScheme к событию SLDiagram.afterOpenScheme")}this.getRectSelect().replaceBackgroundListeners()};SLDiagram.prototype.USING_DEPRECATED_METHOD="Использование устаревшего метода";return SLDiagram});!function(){function n(){}function t(n){return n}function e(n){return !!n}function r(n){return !n}function u(n){return function(){if(null===n){throw new Error("Callback was already called.")}n.apply(this,arguments),n=null}}function i(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}function o(n){return U(n)||"number"==typeof n.length&&n.length>=0&&n.length%1===0}function c(n,t){return o(n)?a(n,t):p(n,t)}function a(n,t){for(var e=-1,r=n.length;++e<r;){t(n[e],e,n)}}function f(n,t){for(var e=-1,r=n.length,u=Array(r);++e<r;){u[e]=t(n[e],e,n)}return u}function l(n){return f(Array(n),function(n,t){return t})}function s(n,t,e){return a(n,function(n,r,u){e=t(e,n,r,u)}),e}function p(n,t){a(B(n),function(e){t(n[e],e)})}function h(n,t){for(var e=0;e<n.length;e++){if(n[e]===t){return e}}return -1}function m(n){var t,e,r=-1;return o(n)?(t=n.length,function(){return r++,t>r?r:null}):(e=B(n),t=e.length,function(){return r++,t>r?e[r]:null})}function y(n,t){return t=null==t?n.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),r=Array(e),u=0;e>u;u++){r[u]=arguments[u+t]}switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r)}}}function v(n){return function(t,e,r){return n(t,r)}}function d(t){return function(e,r,o){o=i(o||n),e=e||[];var c=m(e);if(0>=t){return o(null)}var a=!1,f=0,l=!1;!function s(){if(a&&0>=f){return o(null)}for(;t>f&&!l;){var n=c();if(null===n){return a=!0,void (0>=f&&o(null))}f+=1,r(e[n],n,u(function(n){f-=1,n?(o(n),l=!0):s()}))}}()}}function g(n){return function(t,e,r){return n(P.eachOf,t,e,r)}}function k(n){return function(t,e,r,u){return n(d(e),t,r,u)}}function b(n){return function(t,e,r){return n(P.eachOfSeries,t,e,r)}}function w(t,e,r,u){u=i(u||n);var o=[];t(e,function(n,t,e){r(n,function(n,r){o[t]=r,e(n)})},function(n){u(n,o)})}function O(n,t,e,r){var u=[];n(t,function(n,t,r){e(n,function(e){e&&u.push({index:t,value:n}),r()})},function(){r(f(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function S(n,t,e,r){O(n,t,function(n,t){e(n,function(n){t(!n)})},r)}function E(n,t,e){return function(r,u,i,o){function c(){o&&o(e(!1,void 0))}function a(n,r,u){return o?void i(n,function(r){o&&t(r)&&(o(e(!0,n)),o=i=!1),u()}):u()}arguments.length>3?n(r,u,a,c):(o=i,i=u,n(r,a,c))}}function x(n,t){return t}function L(t,e,r){r=r||n;var u=o(e)?[]:{};t(e,function(n,t,e){n(y(function(n,r){r.length<=1&&(r=r[0]),u[t]=r,e(n)}))},function(n){r(n,u)})}function j(n,t,e,r){var u=[];n(t,function(n,t,r){e(n,function(n,t){u=u.concat(t||[]),r(n)})},function(n){r(n,u)})}function I(t,e,r){function i(t,e,r,u){if(null!=u&&"function"!=typeof u){throw new Error("task callback must be a function")}return t.started=!0,U(e)||(e=[e]),0===e.length&&t.idle()?P.setImmediate(function(){t.drain()}):(a(e,function(e){var i={data:e,callback:u||n};r?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),void P.setImmediate(t.process))}function o(n,t){return function(){c-=1;var e=arguments;a(t,function(n){n.callback.apply(n,e)}),n.tasks.length+c===0&&n.drain(),n.process()}}if(null==e){e=1}else{if(0===e){throw new Error("Concurrency must not be zero")}}var c=0,l={tasks:[],concurrency:e,payload:r,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(n,t){i(l,n,!1,t)},kill:function(){l.drain=n,l.tasks=[]},unshift:function(n,t){i(l,n,!0,t)},process:function(){if(!l.paused&&c<l.concurrency&&l.tasks.length){for(;c<l.concurrency&&l.tasks.length;){var n=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),e=f(n,function(n){return n.data});0===l.tasks.length&&l.empty(),c+=1;var r=u(o(l,n));t(e,r)}}},length:function(){return l.tasks.length},running:function(){return c},idle:function(){return l.tasks.length+c===0},pause:function(){l.paused=!0},resume:function(){if(l.paused!==!1){l.paused=!1;for(var n=Math.min(l.concurrency,l.tasks.length),t=1;n>=t;t++){P.setImmediate(l.process)}}}};return l}function T(n){return y(function(t,e){t.apply(null,e.concat([y(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&a(e,function(t){console[n](t)}))})]))})}function A(n){return function(t,e,r){n(l(t),e,r)}}function z(n){return y(function(t,e){var r=y(function(e){var r=this,u=e.pop();return n(t,function(n,t,u){n.apply(r,e.concat([u]))},u)});return e.length?r.apply(this,e):r})}function q(n){return y(function(t){var e=t.pop();t.push(function(){var n=arguments;r?P.setImmediate(function(){e.apply(null,n)}):e.apply(null,n)});var r=!0;n.apply(this,t),r=!1})}var C,P={},H="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=H&&(C=H.async),P.noConflict=function(){return H.async=C,P};var M=Object.prototype.toString,U=Array.isArray||function(n){return"[object Array]"===M.call(n)},W=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},B=Object.keys||function(n){var t=[];for(var e in n){n.hasOwnProperty(e)&&t.push(e)}return t},D="function"==typeof setImmediate&&setImmediate,F=D?function(n){D(n)}:function(n){setTimeout(n,0)};"object"==typeof process&&"function"==typeof process.nextTick?P.nextTick=process.nextTick:P.nextTick=F,P.setImmediate=D?F:P.nextTick,P.forEach=P.each=function(n,t,e){return P.eachOf(n,v(t),e)},P.forEachSeries=P.eachSeries=function(n,t,e){return P.eachOfSeries(n,v(t),e)},P.forEachLimit=P.eachLimit=function(n,t,e,r){return d(t)(n,v(e),r)},P.forEachOf=P.eachOf=function(t,e,r){function a(n){n?r(n):(l+=1,l>=f&&r(null))}r=i(r||n),t=t||[];var f=o(t)?t.length:B(t).length,l=0;return f?void c(t,function(n,r){e(t[r],r,u(a))}):r(null)},P.forEachOfSeries=P.eachOfSeries=function(t,e,r){function o(){var n=!0;return null===a?r(null):(e(t[a],a,u(function(t){if(t){r(t)}else{if(a=c(),null===a){return r(null)}n?P.nextTick(o):o()}})),void (n=!1))}r=i(r||n),t=t||[];var c=m(t),a=c();o()},P.forEachOfLimit=P.eachOfLimit=function(n,t,e,r){d(t)(n,e,r)},P.map=g(w),P.mapSeries=b(w),P.mapLimit=k(w),P.inject=P.foldl=P.reduce=function(n,t,e,r){P.eachOfSeries(n,function(n,r,u){e(t,n,function(n,e){t=e,u(n)})},function(n){r(n||null,t)})},P.foldr=P.reduceRight=function(n,e,r,u){var i=f(n,t).reverse();P.reduce(i,e,r,u)},P.select=P.filter=g(O),P.selectLimit=P.filterLimit=k(O),P.selectSeries=P.filterSeries=b(O),P.reject=g(S),P.rejectLimit=k(S),P.rejectSeries=b(S),P.any=P.some=E(P.eachOf,e,t),P.someLimit=E(P.eachOfLimit,e,t),P.all=P.every=E(P.eachOf,r,r),P.everyLimit=E(P.eachOfLimit,r,r),P.detect=E(P.eachOf,t,x),P.detectSeries=E(P.eachOfSeries,t,x),P.detectLimit=E(P.eachOfLimit,t,x),P.sortBy=function(n,t,e){function r(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0}P.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){return n?e(n):void e(null,f(t.sort(r),function(n){return n.value}))})},P.auto=function(t,e){function r(n){m.unshift(n)}function u(n){var t=h(m,n);t>=0&&m.splice(t,1)}function o(){f--,a(m.slice(0),function(n){n()})}e=i(e||n);var c=B(t),f=c.length;if(!f){return e(null)}var l={},m=[];r(function(){f||e(null,l)}),a(c,function(n){function i(){return s(v,function(n,t){return n&&l.hasOwnProperty(t)},!0)&&!l.hasOwnProperty(n)}function c(){i()&&(u(c),f[f.length-1](m,l))}for(var a,f=U(t[n])?t[n]:[t[n]],m=y(function(t,r){if(r.length<=1&&(r=r[0]),t){var u={};p(l,function(n,t){u[t]=n}),u[n]=r,e(t,u)}else{l[n]=r,P.setImmediate(o)}}),v=f.slice(0,f.length-1),d=v.length;d--;){if(!(a=t[v[d]])){throw new Error("Has inexistant dependency")}if(U(a)&&h(a,n)>=0){throw new Error("Has cyclic dependencies")}}i()?f[f.length-1](m,l):r(c)})},P.retry=function(n,t,e){function r(n,t){if("number"==typeof t){n.times=parseInt(t,10)||i}else{if("object"!=typeof t){throw new Error("Unsupported argument type for 'times': "+typeof t)}n.times=parseInt(t.times,10)||i,n.interval=parseInt(t.interval,10)||o}}function u(n,t){function e(n,e){return function(r){n(function(n,t){r(!n||e,{err:n,result:t})},t)}}function r(n){return function(t){setTimeout(function(){t(null)},n)}}for(;a.times;){var u=!(a.times-=1);c.push(e(a.task,u)),!u&&a.interval>0&&c.push(r(a.interval))}P.series(c,function(t,e){e=e[e.length-1],(n||a.callback)(e.err,e.result)})}var i=5,o=0,c=[],a={times:i,interval:o},f=arguments.length;if(1>f||f>3){throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)")}return 2>=f&&"function"==typeof n&&(e=t,t=n),"function"!=typeof n&&r(a,n),a.callback=e,a.task=t,a.callback?u():u},P.waterfall=function(t,e){function r(n){return y(function(t,u){if(t){e.apply(null,[t].concat(u))}else{var i=n.next();i?u.push(r(i)):u.push(e),q(n).apply(null,u)}})}if(e=i(e||n),!U(t)){var u=new Error("First argument to waterfall must be an array of functions");return e(u)}return t.length?void r(P.iterator(t))():e()},P.parallel=function(n,t){L(P.eachOf,n,t)},P.parallelLimit=function(n,t,e){L(d(t),n,e)},P.series=function(n,t){L(P.eachOfSeries,n,t)},P.iterator=function(n){function t(e){function r(){return n.length&&n[e].apply(null,arguments),r.next()}return r.next=function(){return e<n.length-1?t(e+1):null},r}return t(0)},P.apply=y(function(n,t){return y(function(e){return n.apply(null,t.concat(e))})}),P.concat=g(j),P.concatSeries=b(j),P.whilst=function(t,e,r){if(r=r||n,t()){var u=y(function(n,i){n?r(n):t.apply(this,i)?e(u):r(null)});e(u)}else{r(null)}},P.doWhilst=function(n,t,e){var r=0;return P.whilst(function(){return ++r<=1||t.apply(this,arguments)},n,e)},P.until=function(n,t,e){return P.whilst(function(){return !n.apply(this,arguments)},t,e)},P.doUntil=function(n,t,e){return P.doWhilst(n,function(){return !t.apply(this,arguments)},e)},P.during=function(t,e,r){r=r||n;var u=y(function(n,e){n?r(n):(e.push(i),t.apply(this,e))}),i=function(n,t){n?r(n):t?e(u):r(null)};t(i)},P.doDuring=function(n,t,e){var r=0;P.during(function(n){r++<1?n(null,!0):t.apply(this,arguments)},n,e)},P.queue=function(n,t){var e=I(function(t,e){n(t[0],e)},t,1);return e},P.priorityQueue=function(t,e){function r(n,t){return n.priority-t.priority}function u(n,t,e){for(var r=-1,u=n.length-1;u>r;){var i=r+(u-r+1>>>1);e(t,n[i])>=0?r=i:u=i-1}return r}function i(t,e,i,o){if(null!=o&&"function"!=typeof o){throw new Error("task callback must be a function")}return t.started=!0,U(e)||(e=[e]),0===e.length?P.setImmediate(function(){t.drain()}):void a(e,function(e){var c={data:e,priority:i,callback:"function"==typeof o?o:n};t.tasks.splice(u(t.tasks,c,r)+1,0,c),t.tasks.length===t.concurrency&&t.saturated(),P.setImmediate(t.process)})}var o=P.queue(t,e);return o.push=function(n,t,e){i(o,n,t,e)},delete o.unshift,o},P.cargo=function(n,t){return I(n,1,t)},P.log=T("log"),P.dir=T("dir"),P.memoize=function(n,e){var r={},u={};e=e||t;var i=y(function(t){var i=t.pop(),o=e.apply(null,t);o in r?P.nextTick(function(){i.apply(null,r[o])}):o in u?u[o].push(i):(u[o]=[i],n.apply(null,t.concat([y(function(n){r[o]=n;var t=u[o];delete u[o];for(var e=0,i=t.length;i>e;e++){t[e].apply(null,n)}})])))});return i.memo=r,i.unmemoized=n,i},P.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},P.times=A(P.map),P.timesSeries=A(P.mapSeries),P.timesLimit=function(n,t,e,r){return P.mapLimit(l(n),t,e,r)},P.seq=function(){var t=arguments;return y(function(e){var r=this,u=e[e.length-1];"function"==typeof u?e.pop():u=n,P.reduce(t,e,function(n,t,e){t.apply(r,n.concat([y(function(n,t){e(n,t)})]))},function(n,t){u.apply(r,[n].concat(t))})})},P.compose=function(){return P.seq.apply(null,Array.prototype.reverse.call(arguments))},P.applyEach=z(P.eachOf),P.applyEachSeries=z(P.eachOfSeries),P.forever=function(t,e){function r(n){return n?i(n):void o(r)}var i=u(e||n),o=q(t);r()},P.ensureAsync=q,P.constant=y(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),P.wrapSync=P.asyncify=function(n){return y(function(t){var e,r=t.pop();try{e=n.apply(this,t)}catch(u){return r(u)}W(e)&&"function"==typeof e.then?e.then(function(n){r(null,n)})["catch"](function(n){r(n.message?n:new Error(n))}):r(null,e)})},"object"==typeof module&&module.exports?module.exports=P:"function"==typeof define&&define.amd?define("async.min",[],function(){return P}):H.async=P}();define("core/Async",["core/sldiagram","async.min"],function(SLDiagram,Async){SLDiagram.Async=Async;return Async});(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else{if(typeof define==="function"&&define.amd){define("eventemitter2",[],f)}else{var g;if(typeof window!=="undefined"){g=window}else{if(typeof global!=="undefined"){g=global}else{if(typeof self!=="undefined"){g=self}else{g=this}}}g.eventemitter2=f()}}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0)}if(i){return i(o,!0)}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */
!function(undefined){var isArray=Array.isArray?Array.isArray:function _isArray(obj){return Object.prototype.toString.call(obj)==="[object Array]"};var defaultMaxListeners=10;function init(){this._events={};if(this._conf){configure.call(this,this._conf)}}function configure(conf){if(conf){this._conf=conf;conf.delimiter&&(this.delimiter=conf.delimiter);this._events.maxListeners=conf.maxListeners!==undefined?conf.maxListeners:defaultMaxListeners;conf.wildcard&&(this.wildcard=conf.wildcard);conf.newListener&&(this.newListener=conf.newListener);if(this.wildcard){this.listenerTree={}}}else{this._events.maxListeners=defaultMaxListeners}}function logPossibleMemoryLeak(count){console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",count);if(console.trace){console.trace()}}function EventEmitter(conf){this._events={};this.newListener=false;configure.call(this,conf)}EventEmitter.EventEmitter2=EventEmitter;function searchListenerTree(handlers,type,tree,i){if(!tree){return[]}var listeners=[],leaf,len,branch,xTree,xxTree,isolatedBranch,endReached,typeLength=type.length,currentType=type[i],nextType=type[i+1];if(i===typeLength&&tree._listeners){if(typeof tree._listeners==="function"){handlers&&handlers.push(tree._listeners);return[tree]}else{for(leaf=0,len=tree._listeners.length;leaf<len;leaf++){handlers&&handlers.push(tree._listeners[leaf])}return[tree]}}if((currentType==="*"||currentType==="**")||tree[currentType]){if(currentType==="*"){for(branch in tree){if(branch!=="_listeners"&&tree.hasOwnProperty(branch)){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+1))}}return listeners}else{if(currentType==="**"){endReached=(i+1===typeLength||(i+2===typeLength&&nextType==="*"));if(endReached&&tree._listeners){listeners=listeners.concat(searchListenerTree(handlers,type,tree,typeLength))}for(branch in tree){if(branch!=="_listeners"&&tree.hasOwnProperty(branch)){if(branch==="*"||branch==="**"){if(tree[branch]._listeners&&!endReached){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],typeLength))}listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))}else{if(branch===nextType){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+2))}else{listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))}}}}return listeners}}listeners=listeners.concat(searchListenerTree(handlers,type,tree[currentType],i+1))}xTree=tree["*"];if(xTree){searchListenerTree(handlers,type,xTree,i+1)}xxTree=tree["**"];if(xxTree){if(i<typeLength){if(xxTree._listeners){searchListenerTree(handlers,type,xxTree,typeLength)}for(branch in xxTree){if(branch!=="_listeners"&&xxTree.hasOwnProperty(branch)){if(branch===nextType){searchListenerTree(handlers,type,xxTree[branch],i+2)}else{if(branch===currentType){searchListenerTree(handlers,type,xxTree[branch],i+1)}else{isolatedBranch={};isolatedBranch[branch]=xxTree[branch];searchListenerTree(handlers,type,{"**":isolatedBranch},i+1)}}}}}else{if(xxTree._listeners){searchListenerTree(handlers,type,xxTree,typeLength)}else{if(xxTree["*"]&&xxTree["*"]._listeners){searchListenerTree(handlers,type,xxTree["*"],typeLength)}}}}return listeners}function growListenerTree(type,listener){type=typeof type==="string"?type.split(this.delimiter):type.slice();for(var i=0,len=type.length;i+1<len;i++){if(type[i]==="**"&&type[i+1]==="**"){return}}var tree=this.listenerTree;var name=type.shift();while(name!==undefined){if(!tree[name]){tree[name]={}}tree=tree[name];if(type.length===0){if(!tree._listeners){tree._listeners=listener}else{if(typeof tree._listeners==="function"){tree._listeners=[tree._listeners]}tree._listeners.push(listener);if(!tree._listeners.warned&&this._events.maxListeners>0&&tree._listeners.length>this._events.maxListeners){tree._listeners.warned=true;logPossibleMemoryLeak(tree._listeners.length)}}return true}name=type.shift()}return true}EventEmitter.prototype.delimiter=".";EventEmitter.prototype.setMaxListeners=function(n){if(n!==undefined){this._events||init.call(this);this._events.maxListeners=n;if(!this._conf){this._conf={}}this._conf.maxListeners=n}};EventEmitter.prototype.event="";EventEmitter.prototype.once=function(event,fn){this.many(event,1,fn);return this};EventEmitter.prototype.many=function(event,ttl,fn){var self=this;if(typeof fn!=="function"){throw new Error("many only accepts instances of Function")}function listener(){if(--ttl===0){self.off(event,listener)}fn.apply(this,arguments)}listener._origin=fn;this.on(event,listener);return self};EventEmitter.prototype.emit=function(){this._events||init.call(this);var type=arguments[0];if(type==="newListener"&&!this.newListener){if(!this._events.newListener){return false}}var al=arguments.length;var args,l,i,j;var handler;if(this._all&&this._all.length){handler=this._all.slice();if(al>3){args=new Array(al);for(j=0;j<al;j++){args[j]=arguments[j]}}for(i=0,l=handler.length;i<l;i++){this.event=type;switch(al){case 1:handler[i].call(this,type);break;case 2:handler[i].call(this,type,arguments[1]);break;case 3:handler[i].call(this,type,arguments[1],arguments[2]);break;default:handler[i].apply(this,args)}}}if(this.wildcard){handler=[];var ns=typeof type==="string"?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handler,ns,this.listenerTree,0)}else{handler=this._events[type];if(typeof handler==="function"){this.event=type;switch(al){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=new Array(al-1);for(j=1;j<al;j++){args[j-1]=arguments[j]}handler.apply(this,args)}return true}else{if(handler){handler=handler.slice()}}}if(handler&&handler.length){if(al>3){args=new Array(al-1);for(j=1;j<al;j++){args[j-1]=arguments[j]}}for(i=0,l=handler.length;i<l;i++){this.event=type;switch(al){case 1:handler[i].call(this);break;case 2:handler[i].call(this,arguments[1]);break;case 3:handler[i].call(this,arguments[1],arguments[2]);break;default:handler[i].apply(this,args)}}return true}else{if(!this._all&&type==="error"){if(arguments[1] instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}return !!this._all};EventEmitter.prototype.emitAsync=function(){this._events||init.call(this);var type=arguments[0];if(type==="newListener"&&!this.newListener){if(!this._events.newListener){return Promise.resolve([false])}}var promises=[];var al=arguments.length;var args,l,i,j;var handler;if(this._all){if(al>3){args=new Array(al);for(j=1;j<al;j++){args[j]=arguments[j]}}for(i=0,l=this._all.length;i<l;i++){this.event=type;switch(al){case 1:promises.push(this._all[i].call(this,type));break;case 2:promises.push(this._all[i].call(this,type,arguments[1]));break;case 3:promises.push(this._all[i].call(this,type,arguments[1],arguments[2]));break;default:promises.push(this._all[i].apply(this,args))}}}if(this.wildcard){handler=[];var ns=typeof type==="string"?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handler,ns,this.listenerTree,0)}else{handler=this._events[type]}if(typeof handler==="function"){this.event=type;switch(al){case 1:promises.push(handler.call(this));break;case 2:promises.push(handler.call(this,arguments[1]));break;case 3:promises.push(handler.call(this,arguments[1],arguments[2]));break;default:args=new Array(al-1);for(j=1;j<al;j++){args[j-1]=arguments[j]}promises.push(handler.apply(this,args))}}else{if(handler&&handler.length){if(al>3){args=new Array(al-1);for(j=1;j<al;j++){args[j-1]=arguments[j]}}for(i=0,l=handler.length;i<l;i++){this.event=type;switch(al){case 1:promises.push(handler[i].call(this));break;case 2:promises.push(handler[i].call(this,arguments[1]));break;case 3:promises.push(handler[i].call(this,arguments[1],arguments[2]));break;default:promises.push(handler[i].apply(this,args))}}}else{if(!this._all&&type==="error"){if(arguments[1] instanceof Error){return Promise.reject(arguments[1])}else{return Promise.reject("Uncaught, unspecified 'error' event.")}}}}return Promise.all(promises)};EventEmitter.prototype.on=function(type,listener){if(typeof type==="function"){this.onAny(type);return this}if(typeof listener!=="function"){throw new Error("on only accepts instances of Function")}this._events||init.call(this);this.emit("newListener",type,listener);if(this.wildcard){growListenerTree.call(this,type,listener);return this}if(!this._events[type]){this._events[type]=listener}else{if(typeof this._events[type]==="function"){this._events[type]=[this._events[type]]}this._events[type].push(listener);if(!this._events[type].warned&&this._events.maxListeners>0&&this._events[type].length>this._events.maxListeners){this._events[type].warned=true;logPossibleMemoryLeak(this._events[type].length)}}return this};EventEmitter.prototype.onAny=function(fn){if(typeof fn!=="function"){throw new Error("onAny only accepts instances of Function")}if(!this._all){this._all=[]}this._all.push(fn);return this};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.off=function(type,listener){if(typeof listener!=="function"){throw new Error("removeListener only takes instances of Function")}var handlers,leafs=[];if(this.wildcard){var ns=typeof type==="string"?type.split(this.delimiter):type.slice();leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0)}else{if(!this._events[type]){return this}handlers=this._events[type];leafs.push({_listeners:handlers})}for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];handlers=leaf._listeners;if(isArray(handlers)){var position=-1;for(var i=0,length=handlers.length;i<length;i++){if(handlers[i]===listener||(handlers[i].listener&&handlers[i].listener===listener)||(handlers[i]._origin&&handlers[i]._origin===listener)){position=i;break}}if(position<0){continue}if(this.wildcard){leaf._listeners.splice(position,1)}else{this._events[type].splice(position,1)}if(handlers.length===0){if(this.wildcard){delete leaf._listeners}else{delete this._events[type]}}this.emit("removeListener",type,listener);return this}else{if(handlers===listener||(handlers.listener&&handlers.listener===listener)||(handlers._origin&&handlers._origin===listener)){if(this.wildcard){delete leaf._listeners}else{delete this._events[type]}this.emit("removeListener",type,listener)}}}function recursivelyGarbageCollect(root){if(root===undefined){return}var keys=Object.keys(root);for(var i in keys){var key=keys[i];var obj=root[key];if((obj instanceof Function)||(typeof obj!=="object")||(obj===null)){continue}if(Object.keys(obj).length>0){recursivelyGarbageCollect(root[key])}if(Object.keys(obj).length===0){delete root[key]}}}recursivelyGarbageCollect(this.listenerTree);return this};EventEmitter.prototype.offAny=function(fn){var i=0,l=0,fns;if(fn&&this._all&&this._all.length>0){fns=this._all;for(i=0,l=fns.length;i<l;i++){if(fn===fns[i]){fns.splice(i,1);this.emit("removeListenerAny",fn);return this}}}else{fns=this._all;for(i=0,l=fns.length;i<l;i++){this.emit("removeListenerAny",fns[i])}this._all=[]}return this};EventEmitter.prototype.removeListener=EventEmitter.prototype.off;EventEmitter.prototype.removeAllListeners=function(type){if(arguments.length===0){!this._events||init.call(this);return this}if(this.wildcard){var ns=typeof type==="string"?type.split(this.delimiter):type.slice();var leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0);for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];leaf._listeners=null}}else{if(this._events){this._events[type]=null}}return this};EventEmitter.prototype.listeners=function(type){if(this.wildcard){var handlers=[];var ns=typeof type==="string"?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handlers,ns,this.listenerTree,0);return handlers}this._events||init.call(this);if(!this._events[type]){this._events[type]=[]}if(!isArray(this._events[type])){this._events[type]=[this._events[type]]}return this._events[type]};EventEmitter.prototype.listenerCount=function(type){return this.listeners(type).length};EventEmitter.prototype.listenersAny=function(){if(this._all){return this._all}else{return[]}};if(typeof define==="function"&&define.amd){define(function(){return EventEmitter})}else{if(typeof exports==="object"){module.exports=EventEmitter}else{window.EventEmitter2=EventEmitter}}}()},{}]},{},[1])(1)});define("utils/EventEmitter",["eventemitter2"],function(EventEmitter){return EventEmitter});define("utils/Disabler",["utils/EventEmitter"],function(EventEmitter){var Disabler=function(){};Disabler.prototype=Object.create(EventEmitter.prototype);var p=Disabler.prototype;p.disable=function(){if(typeof this.counter!=="number"){this.counter=0}this.counter++;if(this.counter===1){this.emitDisable()}return true};p.enable=function(){if(typeof this.counter!=="number"){return false}this.counter--;if(this.counter<=0){delete this.counter;this.emitEnable()}return true};p.isDisabled=function(){return Boolean(this.counter>0)};p.emitDisable=function(){this.emit("disable")};p.emitEnable=function(){this.emit("enable")};return Disabler});!function(t){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=t()}else{if("function"==typeof define&&define.amd){define("Bluebird",[],t)}else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}}(function(){var t,e,n;return function r(t,e,n){function i(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c){return c(s,!0)}if(o){return o(s,!0)}var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n?n:e)},u,u.exports,r,t,e,n)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++){i(n[s])}return i}({1:[function(t,e,n){e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(c){a=c}var l=t("./schedule"),u=t("./queue"),p=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout){setTimeout(function(){t(e)},0)}else{try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}}},p.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else{e._settlePromises()}}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),u=new t(e);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:l};p._then(e,s,void 0,u,h),l._then(a,c,void 0,u,h),u._setOnCancel(l)}else{u._resolveCallback(p)}return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),c=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n){e=o}else{if(c){var r=s(t);e=null!==r?r:i}else{e=i}}return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,c=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation()){return this._warn("cancellation is disabled")}for(var t=this,e=t;t.isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n.isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t)){for(var n=0;n<t.length;++n){this._doInvokeOnCancel(t[n],e)}}else{if(void 0!==t){if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else{t._resultCancelled(this)}}}},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){e.exports=function(e){function n(t,n,a){return function(c){var l=a._boundValue();t:for(var u=0;u<t.length;++u){var p=t[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(c instanceof p){return o(n).call(l,c)}}else{if("function"==typeof p){var h=o(p).call(l,c);if(h===s){return h}if(h){return o(n).call(l,c)}}else{if(r.isObject(c)){for(var f=i(p),_=0;_<f.length;++_){var d=f[_];if(p[d]!=c[d]){continue t}}return o(n).call(l,c)}}}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,e,n){e.exports=function(e,n){function r(t,e){return{promise:e}}function i(){return !1}function o(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t){throw new TypeError("onCancel must be a function, got: "+H.toString(t))}r._attachCancellationCallback(t)})}catch(i){return i}}function s(t){if(!this.isCancellable()){return this}var e=this._onCancel();void 0!==e?H.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function a(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function f(){this._trace=new S(this._peekContext())}function _(t,e){if(N(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n){n.attachExtraTrace(t)}else{if(!t.__stackCleaned__){var r=j(t);H.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),H.notEnumerableProp(t,"__stackCleaned__",!0)}}}}function d(t,e,n,r,i){if(void 0===t&&null!==e&&z){if(void 0!==i&&i._returnedNonUndefined()){return}if(0===(65535&r._bitField)){return}n&&(n+=" ");var o="a promise was created in a "+n+"handler but was not returned from it";r._warn(o,!0,e)}}function v(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),y(n)}function y(t,n,r){if(rt.warnings){var i,o=new L(t);if(n){r._attachExtraTrace(o)}else{if(rt.longStackTraces&&(i=e._peekContext())){i.attachExtraTrace(o)}else{var s=j(o);o.stack=s.message+"\n"+s.stack.join("\n")}}Y("warning",o)||k(o,"",!0)}}function m(t,e){for(var n=0;n<e.length-1;++n){e[n].push("From previous event:"),e[n]=e[n].join("\n")}return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function g(t){for(var e=0;e<t.length;++e){(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}}function b(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a){if(r[a]===o){s=a;break}}for(var a=s;a>=0;--a){var c=r[a];if(e[i]!==c){break}e.pop(),i--}e=r}}function w(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||B.test(r),o=i&&tt(r);i&&!o&&(q&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function C(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||B.test(r)){break}}return n>0&&(e=e.slice(n)),e}function j(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?C(t):["    (No stack trace)"],{message:n,stack:w(e)}}function k(t,e,n){if("undefined"!=typeof console){var r;if(H.isObject(t)){var i=t.stack;r=e+M(i,t)}else{r=e+String(t)}"function"==typeof D?D(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function E(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){I.throwLater(o)}"unhandledRejection"===t?Y(t,n,r)||i||k(n,"Unhandled rejection "):Y(t,r)}function F(t){var e;if("function"==typeof t){e="[function "+(t.name||"anonymous")+"]"}else{e=t&&"function"==typeof t.toString?t.toString():H.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e)){try{var r=JSON.stringify(t);e=r}catch(i){}}0===e.length&&(e="(empty array)")}return"(<"+x(e)+">, no stack trace)"}function x(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function T(){return"function"==typeof nt}function P(t){var e=t.match(et);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function R(t,e){if(T()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,c=0;c<i.length;++c){var l=P(i[c]);if(l){n=l.fileName,s=l.line;break}}for(var c=0;c<o.length;++c){var l=P(o[c]);if(l){r=l.fileName,a=l.line;break}}0>s||0>a||!n||!r||n!==r||s>=a||(tt=function(t){if(U.test(t)){return !0}var e=P(t);return e&&e.fileName===n&&s<=e.line&&e.line<=a?!0:!1})}}function S(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);nt(this,S),e>32&&this.uncycle()}var O,A,D,V=e._getDomain,I=e._async,L=t("./errors").Warning,H=t("./util"),N=H.canAttachTrace,U=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,B=null,M=null,q=!1,Q=!(0==H.env("BLUEBIRD_DEBUG")||!H.env("BLUEBIRD_DEBUG")&&"development"!==H.env("NODE_ENV")),$=!(0==H.env("BLUEBIRD_WARNINGS")||!Q&&!H.env("BLUEBIRD_WARNINGS")),G=!(0==H.env("BLUEBIRD_LONG_STACK_TRACES")||!Q&&!H.env("BLUEBIRD_LONG_STACK_TRACES")),z=0!=H.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&($||!!H.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),I.invokeLater(this._notifyUnhandledRejection,this,void 0))},e.prototype._notifyUnhandledRejectionIsHandled=function(){E("rejectionHandled",O,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),E("unhandledRejection",A,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return y(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=V();A="function"==typeof t?null===e?t:e.bind(t):void 0},e.onUnhandledRejectionHandled=function(t){var e=V();O="function"==typeof t?null===e?t:e.bind(t):void 0};var X=function(){};e.longStackTraces=function(){if(I.haveItemsQueued()&&!rt.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!rt.longStackTraces&&T()){var t=e.prototype._captureStackTrace,r=e.prototype._attachExtraTrace;rt.longStackTraces=!0,X=function(){if(I.haveItemsQueued()&&!rt.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=r,n.deactivateLongStackTraces(),I.enableTrampoline(),rt.longStackTraces=!1},e.prototype._captureStackTrace=f,e.prototype._attachExtraTrace=_,n.activateLongStackTraces(),I.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return rt.longStackTraces&&T()};var W=function(){try{var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),H.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!H.global.dispatchEvent(n)}}catch(e){}return function(){return !1}}(),K=function(){return H.isNode?function(){return process.emit.apply(process,arguments)}:H.global?function(t){var e="on"+t.toLowerCase(),n=H.global[e];return n?(n.apply(H.global,[].slice.call(arguments,1)),!0):!1}:function(){return !1}}(),J={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:r},Y=function(t){var e=!1;try{e=K.apply(null,arguments)}catch(n){I.throwLater(n),e=!0}var r=!1;try{r=W(t,J[t].apply(null,arguments))}catch(n){I.throwLater(n),r=!0}return r||e};e.config=function(t){if(t=Object(t),"longStackTraces" in t&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&X()),"warnings" in t){var n=t.warnings;rt.warnings=!!n,z=rt.warnings,H.isObject(n)&&"wForgottenReturn" in n&&(z=!!n.wForgottenReturn)}if("cancellation" in t&&t.cancellation&&!rt.cancellation){if(I.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}e.prototype._clearCancellationData=l,e.prototype._propagateFrom=u,e.prototype._onCancel=a,e.prototype._setOnCancel=c,e.prototype._attachCancellationCallback=s,e.prototype._execute=o,Z=u,rt.cancellation=!0}"monitoring" in t&&(t.monitoring&&!rt.monitoring?(rt.monitoring=!0,e.prototype._fireEvent=Y):!t.monitoring&&rt.monitoring&&(rt.monitoring=!1,e.prototype._fireEvent=i))},e.prototype._fireEvent=i,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var Z=p,tt=function(){return !1},et=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;H.inherits(S,Error),n.CapturedTrace=S,S.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r){e.push(i),i=i._parent}t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;t-1>a?(c._parent=e[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=r-2;u>=0;--u){e[u]._length=l,l++}return}}}},S.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=j(t),n=e.message,r=[e.stack],i=this;void 0!==i;){r.push(w(i.stack.split("\n"))),i=i._parent}b(r),g(r),H.notEnumerableProp(t,"stack",m(n,r)),H.notEnumerableProp(t,"__stackCleaned__",!0)}};var nt=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():F(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,B=t,M=e;var n=Error.captureStackTrace;return tt=function(t){return U.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0){return B=/@/,M=e,q=!0,function(t){t.stack=(new Error).stack}}var i;try{throw new Error}catch(o){i="stack" in o}return"stack" in r||!i||"number"!=typeof Error.stackTraceLimit?(M=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?F(e):e.toString()},null):(B=t,M=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(D=function(t){console.warn(t)},H.isNode&&process.stderr.isTTY?D=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:H.isNode||"string"!=typeof(new Error).stack||(D=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var rt={warnings:$,longStackTraces:!1,cancellation:!1,monitoring:!1};return G&&e.longStackTraces(),{longStackTraces:function(){return rt.longStackTraces},warnings:function(){return rt.warnings},cancellation:function(){return rt.cancellation},monitoring:function(){return rt.monitoring},propagateFromFunction:function(){return Z},boundValueFunction:function(){return h},checkForgottenReturns:d,setBounds:R,warn:y,deprecated:v,CapturedTrace:S,fireDomEvent:W,fireGlobalEvent:K}}},{"./errors":12,"./util":36}],10:[function(t,e,n){e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1){return this._then(void 0,n,void 0,{reason:t},void 0)}var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1){return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0)}var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return this.mapSeries(t)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,e){return r(t,e)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){function r(t,e){function n(r){return this instanceof n?(p(this,"message","string"==typeof r?r:e),p(this,"name",t),void (Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return u(n,Error),n}function i(t){return this instanceof i?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void (t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5"),c=a.freeze,l=t("./util"),u=l.inherits,p=l.notEnumerableProp,h=r("Warning","warning"),f=r("CancellationError","cancellation error"),_=r("TimeoutError","timeout error"),d=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(v){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m){"function"==typeof Array.prototype[y[m]]&&(d.prototype[y[m]]=Array.prototype[y[m]])}a.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var g=0;d.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o){i[o]=t+i[o]}r=i.join("\n"),e+=r+"\n"}return g--,e},u(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:f,TimeoutError:_,OperationalError:i,RejectionError:i,AggregateError:d}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){return void 0===this}();if(r){e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return !(n&&!n.writable&&!n.set)}}}else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t){i.call(t,n)&&e.push(n)}return e},c=function(t,e){return{value:t[e]}},l=function(t,e,n){return t[e]=n.value,t},u=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return !1}};e.exports={isArray:h,keys:a,names:a,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:p,isES5:r,propertyIsWritable:function(){return !0}}}},{}],14:[function(t,e,n){e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function s(){return c.call(this,this.promise._target()._settledValue())}function a(t){return o(this,t)?void 0:(p.e=t,p)}function c(t){var r=this.promise,c=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?c.call(r._boundValue()):c.call(r._boundValue(),t);if(void 0!==l){r._setReturnedNonUndefined();var h=n(l,r);if(h instanceof e){if(null!=this.cancelPromise){if(h.isCancelled()){var f=new u("late cancellation observer");return r._attachExtraTrace(f),p.e=f,p}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(s,a,void 0,this,void 0)}}}return r.isRejected()?(o(this),p.e=t,p):(o(this),t)}var l=t("./util"),u=e.CancellationError,p=l.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,c,c)},e.prototype.tap=function(t){return this._passThrough(t,1,c)},r}},{"./util":36}],16:[function(t,e,n){e.exports=function(e,n,r,i,o,s){function a(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=f(n[o])(t);if(r._popContext(),s===h){r._pushContext();var a=e.reject(h.e);return r._popContext(),a}var c=i(s,r);if(c instanceof e){return c}}return null}function c(t,n,i,o){if(s.cancellation()){var a=new e(r),c=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{var l=this._promise=new e(r);l._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(_):_,this._yieldedPromise=null,this._cancellationPhase=!1}var l=t("./errors"),u=l.TypeError,p=t("./util"),h=p.errorObj,f=p.tryCatch,_=[];p.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n){this._promise._pushContext(),t=f(this._generator["return"]).call(this._generator,void 0),this._promise._popContext()}else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=f(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},c.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(t){var n=this._promise;if(t===h){return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1)}var r=t.value;if(t.done===!0){return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r)}var o=i(r,this._promise);if(!(o instanceof e)&&(o=a(o,this._yieldHandlers,this._promise),null===o)){return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))}o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?this._promiseFulfilled(o._value()):0!==(16777216&s)?this._promiseRejected(o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t){throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t){throw new u("expecting a function but got "+p.classString(t))}_.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t){return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var r=new c(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){e.exports=function(e,n,r,i){var o=t("./util");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){e.exports=function(e,n,r,i,o,s){function a(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=l();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:f,this._init$(void 0,-2)}function c(t,n,i,o){if("function"!=typeof n){return r("expecting a function but got "+u.classString(n))}var s=0;if(void 0!==i){if("object"!=typeof i||null===i){return e.reject(new TypeError("options argument must be an object but it is "+u.classString(i)))}if("number"!=typeof i.concurrency){return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)))}s=i.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(t,n,s,o).promise()}var l=e._getDomain,u=t("./util"),p=u.tryCatch,h=u.errorObj,f=[];u.inherits(a,n),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved())){return !0}}else{if(c>=1&&this._inFlight>=c){return r[n]=t,this._queue.push(n),!1}null!==a&&(a[n]=t);var l=this._promise,u=this._callback,f=l._boundValue();l._pushContext();var _=p(u).call(f,t,n,o),d=l._popContext();if(s.checkForgottenReturns(_,d,null!==a?"Promise.filter":"Promise.map",l),_===h){return this._reject(_.e),!0}var v=i(_,this._promise);if(v instanceof e){v=v._target();var y=v._bitField;if(0===(50397184&y)){return c>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1}if(0===(33554432&y)){return 0!==(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0)}_=v._value()}r[n]=_}var m=++this._totalResolved;return m>=o?(null!==a?this._filter(r,a):this._resolve(r),!0):!1},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved()){return}var r=t.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o){t[o]&&(r[i++]=e[o])}r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return c(this,t,e,null)},e.map=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t){throw new e.TypeError("expecting a function but got "+s.classString(t))}return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t){return i("expecting a function but got "+s.classString(t))}var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=s.isArray(l)?a(t).apply(u,l):a(t).call(u,l)}else{c=a(t)()}var p=r._popContext();return o.checkForgottenReturns(c,p,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){function r(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=u.keys(t),i=0;i<n.length;++i){var o=n[i];p.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else{if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else{t._fulfill(r)}}t=null}}}var s=t("./util"),a=s.maybeWrapAsError,c=t("./errors"),l=c.OperationalError,u=t("./es5"),p=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t)){return r.call(n,t,e)}var i=a(e).apply(n._boundValue(),[null].concat(t));i===c&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===c&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=a(e).call(n._boundValue(),t);i===c&&s.throwLater(i.e)}var o=t("./util"),s=e._async,a=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){e.exports=function(){function n(){}function r(t,e){if("function"!=typeof e){throw new m("expecting a function but got "+f.classString(e))}if(t.constructor!==i){throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}}function i(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==b&&(r(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new i(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new i.PromiseInspection(this._target())},p=function(t){return i.reject(new m(t))},h={},f=t("./util");c=f.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},f.notEnumerableProp(i,"_getDomain",c);var _=t("./es5"),d=t("./async"),v=new d;_.defineProperty(i,"_async",{value:v});var y=t("./errors"),m=i.TypeError=y.TypeError;i.RangeError=y.RangeError;var g=i.CancellationError=y.CancellationError;i.TimeoutError=y.TimeoutError,i.OperationalError=y.OperationalError,i.RejectionError=y.OperationalError,i.AggregateError=y.AggregateError;var b=function(){},w={},C={},j=t("./thenables")(i,b),k=t("./promise_array")(i,b,j,p,n),E=t("./context")(i),F=E.create,x=t("./debuggability")(i,E),T=(x.CapturedTrace,t("./finally")(i,j)),P=t("./catch_filter")(C),R=t("./nodeback"),S=f.errorObj,O=f.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!f.isObject(o)){return p("expecting an object but got "+f.classString(o))}r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,P(r,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},i.prototype.then=function(t,e){if(x.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+f.classString(t);arguments.length>1&&(n+=", "+f.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?p("expecting a function but got "+f.classString(t)):this.all()._then(t,void 0,void 0,w,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new k(this).promise()},i.prototype.error=function(t){return this.caught(f.originatesFromRejection,t)},i.getNewLibraryCopy=e.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=O(t)(R(e,n));return r===S&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new k(t).promise()},i.cast=function(t){var e=j(t);return e instanceof i||(e=new i(b),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t){throw new m("expecting a function but got "+f.classString(t))}return v.setScheduler(t)},i.prototype._then=function(t,e,n,r,o){var s=void 0!==o,a=s?o:new i(b),l=this._target(),u=l._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var p=c();if(0!==(50397184&u)){var h,f,_=l._settlePromiseCtx;0!==(33554432&u)?(f=l._rejectionHandler0,h=t):0!==(16777216&u)?(f=l._fulfillmentHandler0,h=e,l._unsetRejectionIsUnhandled()):(_=l._settlePromiseLateCancellationObserver,f=new g("late cancellation observer"),l._attachExtraTrace(f),h=e),v.invoke(_,l,{handler:null===p?h:"function"==typeof h&&p.bind(h),promise:a,receiver:r,value:f})}else{l._addCallbacks(t,e,a,r,p)}return a},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===h?void 0:void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=h),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o){this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e))}else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[s+1]=null===i?e:i.bind(e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this){return this._rejectCallback(l(),!1)}var n=j(t,this);if(!(n instanceof i)){return this._fulfill(t)}e&&this._propagateFrom(n,2);var r=n._target();if(r===this){return void this._reject(l())}var o=r._bitField;if(0===(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;s>a;++a){r._migrateCallbackAt(this,a)}this._setFollowing(),this._setLength(0),this._setFollowee(r)}else{if(0!==(33554432&o)){this._fulfill(r._value())}else{if(0!==(16777216&o)){this._reject(r._reason())}else{var c=new g("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}}}},i.prototype._rejectCallback=function(t,e,n){var r=f.ensureErrorObject(t),i=r===t;if(!i&&!n&&x.warnings()){var o="a promise was rejected with a non-error: "+f.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},i.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===w?n&&"number"==typeof n.length?o=O(t).apply(this._boundValue(),n):(o=S,o.e=new m("cannot .spread() a non-array: "+f.classString(n))):o=O(t).call(e,n);var s=r._popContext();i=r._bitField,0===(65536&i)&&(o===C?r._reject(n):o===S?r._rejectCallback(o.e,!1):(x.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();){t=t._followee()}return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var s=t instanceof i,a=this._bitField,c=0!==(134217728&a);0!==(65536&a)?(s&&t._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=t,O(e).call(r,o)===S&&t._reject(S.e)):e===u?t._fulfill(u.call(r)):r instanceof n?r._promiseCancelled(t):s||t instanceof k?t._cancel():r.cancel()):"function"==typeof e?s?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&a)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):s&&(c&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():v.settlePromises(this))}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?v.fatalError(t,f.isNode):void ((65535&e)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled())}},i.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){x.deprecated("Promise.defer","new Promise");var t=new i(b);return{promise:t,resolve:o,reject:s}},f.notEnumerableProp(i,"_makeSelfResolutionError",l),t("./method")(i,b,j,p,x),t("./bind")(i,b,j,x),t("./cancel")(i,k,p,x),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,k,j,b,x),i.Promise=i,i.version="3.4.0",t("./map.js")(i,k,p,j,b,x),t("./call_get.js")(i),t("./using.js")(i,p,j,F,b,x),t("./timers.js")(i,b,x),t("./generators.js")(i,p,b,j,n,x),t("./nodeify.js")(i),t("./promisify.js")(i,b),t("./props.js")(i,k,j,p),t("./race.js")(i,b,j,p),t("./reduce.js")(i,k,p,j,b,x),t("./settle.js")(i,k,x),t("./some.js")(i,k,p),t("./filter.js")(i,b),t("./each.js")(i,b),t("./any.js")(i),f.toFastProperties(i),f.toFastProperties(i.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new i(b)),x.setBounds(d.firstLineError,f.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){e.exports=function(e,n,r,i,o){function s(t){switch(t){case -2:return[];case -3:return{}}}function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function l(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a)){return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,void 0,this,n)}if(0===(33554432&a)){return 0!==(16777216&a)?this._reject(o._reason()):this._cancel()}o=o._value()}if(o=c.asArray(o),null===o){var u=i("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(u,!1)}return 0===o.length?void (-5===n?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;n>a;++a){var c=r(t[a],i);c instanceof e?(c=c._target(),s=c._bitField):s=null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0===(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!==(33554432&s)?this._promiseFulfilled(c._value(),a):0!==(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e){t.cancel()}else{for(var n=0;n<t.length;++n){t[n] instanceof e&&t[n].cancel()}}}},a.prototype.shouldCopyValues=function(){return !0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){e.exports=function(e,n){function r(t){return !C.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return !1}}function o(t,e,n){var r=f.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i)){for(var o=i.replace(n,""),s=0;s<t.length;s+=2){if(t[s]===o){throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}}}}function a(t,e,n,r){for(var a=f.inheritedDataKeys(t),c=[],l=0;l<a.length;++l){var u=a[l],p=t[u],h=r===j?!0:j(u,p,t);"function"!=typeof p||i(p)||o(t,u,e)||!r(u,p,t,h)||c.push(u,p)}return s(c,e,n),c}function c(t,r,i,o,s,a){function c(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof u&&this!==l?this[u]:t,c=_(o,a);try{s.apply(i,d(arguments,c))}catch(p){o._rejectCallback(v(p),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var l=function(){return this}(),u=t;return"string"==typeof u&&(t=o),f.notEnumerableProp(c,"__isPromisified__",!0),c}function l(t,e,n,r,i){for(var o=new RegExp(k(e)+"$"),s=a(t,e,o,n),c=0,l=s.length;l>c;c+=2){var u=s[c],p=s[c+1],_=u+e;if(r===E){t[_]=E(u,h,u,p,e,i)}else{var d=r(p,function(){return E(u,h,u,p,e,i)});f.notEnumerableProp(d,"__isPromisified__",!0),t[_]=d}}return f.toFastProperties(t),t}function u(t,e,n){return E(t,e,void 0,t,null,n)}var p,h={},f=t("./util"),_=t("./nodeback"),d=f.withAppended,v=f.maybeWrapAsError,y=f.canEvaluate,m=t("./errors").TypeError,g="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],C=new RegExp("^(?:"+w.join("|")+")$"),j=function(t){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},k=function(t){return t.replace(/([$])/,"\\$")},E=y?p:c;e.promisify=function(t,e){if("function"!=typeof t){throw new m("expecting a function but got "+f.classString(t))}if(i(t)){return t}e=Object(e);var n=void 0===e.context?h:e.context,o=!!e.multiArgs,s=u(t,n,o);return f.copyDescriptors(t,s,r),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t){throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n")}e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=g);var i=e.filter;"function"!=typeof i&&(i=j);var o=e.promisifier;if("function"!=typeof o&&(o=E),!f.isIdentifier(r)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n")}for(var s=f.inheritedDataKeys(t),a=0;a<s.length;++a){var c=t[s[a]];"constructor"!==s[a]&&f.isClass(c)&&(l(c.prototype,r,i,o,n),l(c,r,i,o,n))}return l(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==a&&t instanceof a){e=p(t),n=!0}else{var r=u.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function s(t){var n,s=r(t);return l(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,c=t("./util"),l=c.isObject,u=t("./es5");"function"==typeof Map&&(a=Map);var p=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new a,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap){r=h(this._values)}else{r={};for(var i=this.length(),o=0,s=this.length();s>o;++o){r[this._values[o+i]]=this._values[o]}}return this._resolve(r),!0}return !1},o.prototype.shouldCopyValues=function(){return !1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){function r(t,e,n,r,i){for(var o=0;i>o;++o){n[o+r]=t[o+e],t[o+e]=void 0}}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r)){return this._pushOne(t),this._pushOne(e),void this._pushOne(n)}var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){e.exports=function(e,n,r,i){function o(t,o){var c=r(t);if(c instanceof e){return a(c)}if(t=s.asArray(t),null===t){return i("expecting an array or an iterable object but got "+s.classString(t))}var l=new e(n);void 0!==o&&l._propagateFrom(o,3);for(var u=l._fulfill,p=l._reject,h=0,f=t.length;f>h;++h){var _=t[h];(void 0!==_||h in t)&&e.cast(_)._then(u,p,void 0,l,null)}return l}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t);var s=h();this._fn=null===s?n:s.bind(n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function l(t,e,n,i){if("function"!=typeof e){return r("expecting a function but got "+f.classString(e))}var o=new a(t,e,n,i);return o.promise()}function u(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(t){var n=this.array,r=n._promise,i=_(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var h=e._getDomain,f=t("./util"),_=f.tryCatch;f.inherits(a,n),a.prototype._gotAccum=function(t){void 0!==this._eachValues&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return !1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void (this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected()){for(;i>r;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(u,void 0,void 0,o,void 0)}}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(t,e){return l(this,t,e,null)},e.reduce=function(t,e,n,r){return l(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,c=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){c.call(process,t)}}else{if("function"==typeof s){var l=s.resolve();r=function(t){l.then(t)}}else{r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}()}}e.exports=r},{"./util":36}],30:[function(t,e,n){e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,s=t("./util");s.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e){return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n")}var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,c=t("./errors").AggregateError,l=s.isArray,u={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany){return void this._resolve([])}this._init$(void 0,-5);var t=l(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e){this._values[e]!==u&&t.push(this._values[e])}return t.length>0?this._reject(t):this._cancel(),!0}return !1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=t.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype.isCancelled=function(){return this._target()._isCancelled()},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){e.exports=function(e,n){function r(t,r){if(u(t)){if(t instanceof e){return t}var i=o(t);if(i===l){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(s(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return l.e=e,l}}function s(t){try{return p.call(t,"_promise0")}catch(e){return !1}}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,p,!0),a=null)}var a=new e(n),u=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var p=!0,h=c.tryCatch(r).call(t,o,s);return p=!1,a&&h===l&&(a._rejectCallback(h.e,!0,!0),a=null),u}var c=t("./util"),l=c.errorObj,u=c.isObject,p={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,o){var s,a;return void 0!==o?(s=e.resolve(o)._then(l,null,null,t,void 0),r.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(n),a=setTimeout(function(){s._fulfill()},+t),r.cancellation()&&s._setOnCancel(new i(a))),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return u(t,this)};var p=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),a.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,a,c=new i(setTimeout(function(){n.isPending()&&p(n,e,a)},t));return r.cancellation()?(a=this.then(),n=a._then(o,s,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,s,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function l(t,n){function i(){if(s>=l){return u._fulfill()}var o=c(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(p){return a(p)}if(o instanceof e){return o._then(i,a,null,null,null)}}i()}var s=0,l=t.length,u=new e(o);return i(),u}function u(t,e,n){this._data=t,this._promise=e,this._context=n}function p(t,e,n){this.constructor$(t,e,n)}function h(t){return u.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function f(t){this.length=t,this.promise=null,this[t-1]=null}var _=t("./util"),d=t("./errors").TypeError,v=t("./util").inherits,y=_.errorObj,m=_.tryCatch,g={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},u.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==g?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},u.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(p,u),p.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},f.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t){return n("you must pass at least 2 arguments to Promise.using")}var i=arguments[t-1];if("function"!=typeof i){return n("expecting a function but got "+_.classString(i))}var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var c=new f(t),p=0;t>p;++p){var d=o[p];if(u.isDisposer(d)){var v=d;d=d.promise(),d._setDisposable(v)}else{var g=r(d);g instanceof e&&(d=g._then(h,null,null,{resources:c,index:p},void 0))}c[p]=d}for(var b=new Array(c.length),p=0;p<b.length;++p){b[p]=e.resolve(c[p]).reflect()}var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected()){return y.e=n.error(),y}if(!n.isFulfilled()){return void w.cancel()}t[e]=n.value()}C._pushContext(),i=m(i);var r=a?i.apply(void 0,t):i(t),o=C._popContext();return s.checkForgottenReturns(r,o,"Promise.using",C),r}),C=w.lastly(function(){var t=new e.PromiseInspection(w);return l(c,t)});return c.promise=C,C._setOnCancel(c),C},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t){return new p(t,this,i())}throw new d}}},{"./errors":12,"./util":36}],36:[function(t,e,n){function r(){try{var t=T;return T=null,t.apply(this,arguments)}catch(e){return x.e=e,x}}function i(t){return T=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return o(t)?new Error(v(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n){i[n]=t[n]}return i[n]=e,i}function l(t,e,n){if(!E.isES5){return{}.hasOwnProperty.call(t,e)?t[e]:void 0}var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function u(t,e,n){if(o(t)){return t}var r={value:n,configurable:!0,enumerable:!1,writable:!0};return E.defineProperty(t,e,r),t}function p(t){throw t}function h(t){try{if("function"==typeof t){var e=E.names(t.prototype),n=E.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=O.test(t+"")&&E.names(t).length>0;if(n||r||i){return !0}}return !1}catch(o){return !1}}function f(t){function e(){}e.prototype=t;for(var n=8;n--;){new e}return t}function _(t){return A.test(t)}function d(t,e,n){for(var r=new Array(t),i=0;t>i;++i){r[i]=e+i+n}return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function m(t){try{u(t,"isOperational",!0)}catch(e){}}function g(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function b(t){return y(t)&&E.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function C(t,e,n){for(var r=E.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o)){try{E.defineProperty(e,o,E.getDescriptor(t,o))}catch(s){}}}}function j(t,e){return L?process.env[t]:e}function k(){if("function"==typeof Promise){try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t)){return Promise}}catch(e){}}}var E=t("./es5"),F="undefined"==typeof navigator,x={e:{}},T,P="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,R=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype){r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},S=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n){if(t[n]===e){return !0}}return !1};if(E.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var l=Object.getOwnPropertyDescriptor(t,c);null!=l&&null==l.get&&null==l.set&&r.push(c)}}t=E.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n)){return[]}var i=[];t:for(var o in n){if(r.call(n,o)){i.push(o)}else{for(var s=0;s<t.length;++s){if(r.call(t[s],o)){continue t}}i.push(o)}}return i}}(),O=/this\s*\.\s*\S+\s*=/,A=/^[a-z$_][a-z$_0-9]*$/i,D=function(){return"stack" in new Error?function(t){return b(t)?t:new Error(v(t))}:function(t){if(b(t)){return t}try{throw new Error(v(t))}catch(e){return e}}}(),V=function(t){return E.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var I="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;){n.push(e.value)}return n};V=function(t){return E.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?I(t):null}}var L="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),H={isClass:h,isIdentifier:_,inheritedDataKeys:S,getDataPropertyOrDefault:l,thrower:p,isArray:E.isArray,asArray:V,notEnumerableProp:u,isPrimitive:o,isObject:s,isError:y,canEvaluate:F,errorObj:x,tryCatch:i,inherits:R,withAppended:c,maybeWrapAsError:a,toFastProperties:f,filledRange:d,toString:v,canAttachTrace:b,ensureErrorObject:D,originatesFromRejection:g,markAsOriginatingFromRejection:m,classString:w,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:L,env:j,global:P,getNativePromise:k};H.isRecentNode=H.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),H.isNode&&H.toFastProperties(process);try{throw new Error}catch(N){H.lastLineError=N}e.exports=H},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);define("utils/Bluebird",["Bluebird"],function(Bluebird){if(!window.Promise){window.Promise=Bluebird}return Bluebird});(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else{if(typeof define==="function"&&define.amd){define("text-encoding",[],f)}else{var g;if(typeof window!=="undefined"){g=window}else{if(typeof global!=="undefined"){g=global}else{if(typeof self!=="undefined"){g=self}else{g=this}}}g.textEncoding=f()}}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0)}if(i){return i(o,!0)}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){(function(global){global["encoding-indexes"]={big5:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,17392,19506,17923,17830,17784,160359,19831,17843,162993,19682,163013,15253,18230,18244,19527,19520,148159,144919,160594,159371,159954,19543,172881,18255,17882,19589,162924,19719,19108,18081,158499,29221,154196,137827,146950,147297,26189,22267,null,32149,22813,166841,15860,38708,162799,23515,138590,23204,13861,171696,23249,23479,23804,26478,34195,170309,29793,29853,14453,138579,145054,155681,16108,153822,15093,31484,40855,147809,166157,143850,133770,143966,17162,33924,40854,37935,18736,34323,22678,38730,37400,31184,31282,26208,27177,34973,29772,31685,26498,31276,21071,36934,13542,29636,155065,29894,40903,22451,18735,21580,16689,145038,22552,31346,162661,35727,18094,159368,16769,155033,31662,140476,40904,140481,140489,140492,40905,34052,144827,16564,40906,17633,175615,25281,28782,40907,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,12736,12737,12738,12739,12740,131340,12741,131281,131277,12742,12743,131275,139240,12744,131274,12745,12746,12747,12748,131342,12749,12750,256,193,461,192,274,201,282,200,332,211,465,210,null,7870,null,7872,202,257,225,462,224,593,275,233,283,232,299,237,464,236,333,243,466,242,363,250,468,249,470,472,474,476,252,null,7871,null,7873,234,609,9178,9179,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,172969,135493,null,25866,null,null,20029,28381,40270,37343,null,null,161589,25745,20250,20264,20392,20822,20852,20892,20964,21153,21160,21307,21326,21457,21464,22242,22768,22788,22791,22834,22836,23398,23454,23455,23706,24198,24635,25993,26622,26628,26725,27982,28860,30005,32420,32428,32442,32455,32463,32479,32518,32567,33402,33487,33647,35270,35774,35810,36710,36711,36718,29713,31996,32205,26950,31433,21031,null,null,null,null,37260,30904,37214,32956,null,36107,33014,133607,null,null,32927,40647,19661,40393,40460,19518,171510,159758,40458,172339,13761,null,28314,33342,29977,null,18705,39532,39567,40857,31111,164972,138698,132560,142054,20004,20097,20096,20103,20159,20203,20279,13388,20413,15944,20483,20616,13437,13459,13477,20870,22789,20955,20988,20997,20105,21113,21136,21287,13767,21417,13649,21424,13651,21442,21539,13677,13682,13953,21651,21667,21684,21689,21712,21743,21784,21795,21800,13720,21823,13733,13759,21975,13765,163204,21797,null,134210,134421,151851,21904,142534,14828,131905,36422,150968,169189,16467,164030,30586,142392,14900,18389,164189,158194,151018,25821,134524,135092,134357,135412,25741,36478,134806,134155,135012,142505,164438,148691,null,134470,170573,164073,18420,151207,142530,39602,14951,169460,16365,13574,152263,169940,161992,142660,40302,38933,null,17369,155813,25780,21731,142668,142282,135287,14843,135279,157402,157462,162208,25834,151634,134211,36456,139681,166732,132913,null,18443,131497,16378,22643,142733,null,148936,132348,155799,134988,134550,21881,16571,17338,null,19124,141926,135325,33194,39157,134556,25465,14846,141173,36288,22177,25724,15939,null,173569,134665,142031,142537,null,135368,145858,14738,14854,164507,13688,155209,139463,22098,134961,142514,169760,13500,27709,151099,null,null,161140,142987,139784,173659,167117,134778,134196,157724,32659,135375,141315,141625,13819,152035,134796,135053,134826,16275,134960,134471,135503,134732,null,134827,134057,134472,135360,135485,16377,140950,25650,135085,144372,161337,142286,134526,134527,142417,142421,14872,134808,135367,134958,173618,158544,167122,167321,167114,38314,21708,33476,21945,null,171715,39974,39606,161630,142830,28992,33133,33004,23580,157042,33076,14231,21343,164029,37302,134906,134671,134775,134907,13789,151019,13833,134358,22191,141237,135369,134672,134776,135288,135496,164359,136277,134777,151120,142756,23124,135197,135198,135413,135414,22428,134673,161428,164557,135093,134779,151934,14083,135094,135552,152280,172733,149978,137274,147831,164476,22681,21096,13850,153405,31666,23400,18432,19244,40743,18919,39967,39821,154484,143677,22011,13810,22153,20008,22786,138177,194680,38737,131206,20059,20155,13630,23587,24401,24516,14586,25164,25909,27514,27701,27706,28780,29227,20012,29357,149737,32594,31035,31993,32595,156266,13505,null,156491,32770,32896,157202,158033,21341,34916,35265,161970,35744,36125,38021,38264,38271,38376,167439,38886,39029,39118,39134,39267,170000,40060,40479,40644,27503,63751,20023,131207,38429,25143,38050,null,20539,28158,171123,40870,15817,34959,147790,28791,23797,19232,152013,13657,154928,24866,166450,36775,37366,29073,26393,29626,144001,172295,15499,137600,19216,30948,29698,20910,165647,16393,27235,172730,16931,34319,133743,31274,170311,166634,38741,28749,21284,139390,37876,30425,166371,40871,30685,20131,20464,20668,20015,20247,40872,21556,32139,22674,22736,138678,24210,24217,24514,141074,25995,144377,26905,27203,146531,27903,null,29184,148741,29580,16091,150035,23317,29881,35715,154788,153237,31379,31724,31939,32364,33528,34199,40873,34960,40874,36537,40875,36815,34143,39392,37409,40876,167353,136255,16497,17058,23066,null,null,null,39016,26475,17014,22333,null,34262,149883,33471,160013,19585,159092,23931,158485,159678,40877,40878,23446,40879,26343,32347,28247,31178,15752,17603,143958,141206,17306,17718,null,23765,146202,35577,23672,15634,144721,23928,40882,29015,17752,147692,138787,19575,14712,13386,131492,158785,35532,20404,131641,22975,33132,38998,170234,24379,134047,null,139713,166253,16642,18107,168057,16135,40883,172469,16632,14294,18167,158790,16764,165554,160767,17773,14548,152730,17761,17691,19849,19579,19830,17898,16328,150287,13921,17630,17597,16877,23870,23880,23894,15868,14351,23972,23993,14368,14392,24130,24253,24357,24451,14600,14612,14655,14669,24791,24893,23781,14729,25015,25017,25039,14776,25132,25232,25317,25368,14840,22193,14851,25570,25595,25607,25690,14923,25792,23829,22049,40863,14999,25990,15037,26111,26195,15090,26258,15138,26390,15170,26532,26624,15192,26698,26756,15218,15217,15227,26889,26947,29276,26980,27039,27013,15292,27094,15325,27237,27252,27249,27266,15340,27289,15346,27307,27317,27348,27382,27521,27585,27626,27765,27818,15563,27906,27910,27942,28033,15599,28068,28081,28181,28184,28201,28294,166336,28347,28386,28378,40831,28392,28393,28452,28468,15686,147265,28545,28606,15722,15733,29111,23705,15754,28716,15761,28752,28756,28783,28799,28809,131877,17345,13809,134872,147159,22462,159443,28990,153568,13902,27042,166889,23412,31305,153825,169177,31333,31357,154028,31419,31408,31426,31427,29137,156813,16842,31450,31453,31466,16879,21682,154625,31499,31573,31529,152334,154878,31650,31599,33692,154548,158847,31696,33825,31634,31672,154912,15789,154725,33938,31738,31750,31797,154817,31812,31875,149634,31910,26237,148856,31945,31943,31974,31860,31987,31989,31950,32359,17693,159300,32093,159446,29837,32137,32171,28981,32179,32210,147543,155689,32228,15635,32245,137209,32229,164717,32285,155937,155994,32366,32402,17195,37996,32295,32576,32577,32583,31030,156368,39393,32663,156497,32675,136801,131176,17756,145254,17667,164666,32762,156809,32773,32776,32797,32808,32815,172167,158915,32827,32828,32865,141076,18825,157222,146915,157416,26405,32935,166472,33031,33050,22704,141046,27775,156824,151480,25831,136330,33304,137310,27219,150117,150165,17530,33321,133901,158290,146814,20473,136445,34018,33634,158474,149927,144688,137075,146936,33450,26907,194964,16859,34123,33488,33562,134678,137140,14017,143741,144730,33403,33506,33560,147083,159139,158469,158615,144846,15807,33565,21996,33669,17675,159141,33708,33729,33747,13438,159444,27223,34138,13462,159298,143087,33880,154596,33905,15827,17636,27303,33866,146613,31064,33960,158614,159351,159299,34014,33807,33681,17568,33939,34020,154769,16960,154816,17731,34100,23282,159385,17703,34163,17686,26559,34326,165413,165435,34241,159880,34306,136578,159949,194994,17770,34344,13896,137378,21495,160666,34430,34673,172280,34798,142375,34737,34778,34831,22113,34412,26710,17935,34885,34886,161248,146873,161252,34910,34972,18011,34996,34997,25537,35013,30583,161551,35207,35210,35238,35241,35239,35260,166437,35303,162084,162493,35484,30611,37374,35472,162393,31465,162618,147343,18195,162616,29052,35596,35615,152624,152933,35647,35660,35661,35497,150138,35728,35739,35503,136927,17941,34895,35995,163156,163215,195028,14117,163155,36054,163224,163261,36114,36099,137488,36059,28764,36113,150729,16080,36215,36265,163842,135188,149898,15228,164284,160012,31463,36525,36534,36547,37588,36633,36653,164709,164882,36773,37635,172703,133712,36787,18730,166366,165181,146875,24312,143970,36857,172052,165564,165121,140069,14720,159447,36919,165180,162494,36961,165228,165387,37032,165651,37060,165606,37038,37117,37223,15088,37289,37316,31916,166195,138889,37390,27807,37441,37474,153017,37561,166598,146587,166668,153051,134449,37676,37739,166625,166891,28815,23235,166626,166629,18789,37444,166892,166969,166911,37747,37979,36540,38277,38310,37926,38304,28662,17081,140922,165592,135804,146990,18911,27676,38523,38550,16748,38563,159445,25050,38582,30965,166624,38589,21452,18849,158904,131700,156688,168111,168165,150225,137493,144138,38705,34370,38710,18959,17725,17797,150249,28789,23361,38683,38748,168405,38743,23370,168427,38751,37925,20688,143543,143548,38793,38815,38833,38846,38848,38866,38880,152684,38894,29724,169011,38911,38901,168989,162170,19153,38964,38963,38987,39014,15118,160117,15697,132656,147804,153350,39114,39095,39112,39111,19199,159015,136915,21936,39137,39142,39148,37752,39225,150057,19314,170071,170245,39413,39436,39483,39440,39512,153381,14020,168113,170965,39648,39650,170757,39668,19470,39700,39725,165376,20532,39732,158120,14531,143485,39760,39744,171326,23109,137315,39822,148043,39938,39935,39948,171624,40404,171959,172434,172459,172257,172323,172511,40318,40323,172340,40462,26760,40388,139611,172435,172576,137531,172595,40249,172217,172724,40592,40597,40606,40610,19764,40618,40623,148324,40641,15200,14821,15645,20274,14270,166955,40706,40712,19350,37924,159138,40727,40726,40761,22175,22154,40773,39352,168075,38898,33919,40802,40809,31452,40846,29206,19390,149877,149947,29047,150008,148296,150097,29598,166874,137466,31135,166270,167478,37737,37875,166468,37612,37761,37835,166252,148665,29207,16107,30578,31299,28880,148595,148472,29054,137199,28835,137406,144793,16071,137349,152623,137208,14114,136955,137273,14049,137076,137425,155467,14115,136896,22363,150053,136190,135848,136134,136374,34051,145062,34051,33877,149908,160101,146993,152924,147195,159826,17652,145134,170397,159526,26617,14131,15381,15847,22636,137506,26640,16471,145215,147681,147595,147727,158753,21707,22174,157361,22162,135135,134056,134669,37830,166675,37788,20216,20779,14361,148534,20156,132197,131967,20299,20362,153169,23144,131499,132043,14745,131850,132116,13365,20265,131776,167603,131701,35546,131596,20120,20685,20749,20386,20227,150030,147082,20290,20526,20588,20609,20428,20453,20568,20732,20825,20827,20829,20830,28278,144789,147001,147135,28018,137348,147081,20904,20931,132576,17629,132259,132242,132241,36218,166556,132878,21081,21156,133235,21217,37742,18042,29068,148364,134176,149932,135396,27089,134685,29817,16094,29849,29716,29782,29592,19342,150204,147597,21456,13700,29199,147657,21940,131909,21709,134086,22301,37469,38644,37734,22493,22413,22399,13886,22731,23193,166470,136954,137071,136976,23084,22968,37519,23166,23247,23058,153926,137715,137313,148117,14069,27909,29763,23073,155267,23169,166871,132115,37856,29836,135939,28933,18802,37896,166395,37821,14240,23582,23710,24158,24136,137622,137596,146158,24269,23375,137475,137476,14081,137376,14045,136958,14035,33066,166471,138682,144498,166312,24332,24334,137511,137131,23147,137019,23364,34324,161277,34912,24702,141408,140843,24539,16056,140719,140734,168072,159603,25024,131134,131142,140827,24985,24984,24693,142491,142599,149204,168269,25713,149093,142186,14889,142114,144464,170218,142968,25399,173147,25782,25393,25553,149987,142695,25252,142497,25659,25963,26994,15348,143502,144045,149897,144043,21773,144096,137433,169023,26318,144009,143795,15072,16784,152964,166690,152975,136956,152923,152613,30958,143619,137258,143924,13412,143887,143746,148169,26254,159012,26219,19347,26160,161904,138731,26211,144082,144097,26142,153714,14545,145466,145340,15257,145314,144382,29904,15254,26511,149034,26806,26654,15300,27326,14435,145365,148615,27187,27218,27337,27397,137490,25873,26776,27212,15319,27258,27479,147392,146586,37792,37618,166890,166603,37513,163870,166364,37991,28069,28427,149996,28007,147327,15759,28164,147516,23101,28170,22599,27940,30786,28987,148250,148086,28913,29264,29319,29332,149391,149285,20857,150180,132587,29818,147192,144991,150090,149783,155617,16134,16049,150239,166947,147253,24743,16115,29900,29756,37767,29751,17567,159210,17745,30083,16227,150745,150790,16216,30037,30323,173510,15129,29800,166604,149931,149902,15099,15821,150094,16127,149957,149747,37370,22322,37698,166627,137316,20703,152097,152039,30584,143922,30478,30479,30587,149143,145281,14942,149744,29752,29851,16063,150202,150215,16584,150166,156078,37639,152961,30750,30861,30856,30930,29648,31065,161601,153315,16654,31131,33942,31141,27181,147194,31290,31220,16750,136934,16690,37429,31217,134476,149900,131737,146874,137070,13719,21867,13680,13994,131540,134157,31458,23129,141045,154287,154268,23053,131675,30960,23082,154566,31486,16889,31837,31853,16913,154547,155324,155302,31949,150009,137136,31886,31868,31918,27314,32220,32263,32211,32590,156257,155996,162632,32151,155266,17002,158581,133398,26582,131150,144847,22468,156690,156664,149858,32733,31527,133164,154345,154947,31500,155150,39398,34373,39523,27164,144447,14818,150007,157101,39455,157088,33920,160039,158929,17642,33079,17410,32966,33033,33090,157620,39107,158274,33378,33381,158289,33875,159143,34320,160283,23174,16767,137280,23339,137377,23268,137432,34464,195004,146831,34861,160802,23042,34926,20293,34951,35007,35046,35173,35149,153219,35156,161669,161668,166901,166873,166812,166393,16045,33955,18165,18127,14322,35389,35356,169032,24397,37419,148100,26068,28969,28868,137285,40301,35999,36073,163292,22938,30659,23024,17262,14036,36394,36519,150537,36656,36682,17140,27736,28603,140065,18587,28537,28299,137178,39913,14005,149807,37051,37015,21873,18694,37307,37892,166475,16482,166652,37927,166941,166971,34021,35371,38297,38311,38295,38294,167220,29765,16066,149759,150082,148458,16103,143909,38543,167655,167526,167525,16076,149997,150136,147438,29714,29803,16124,38721,168112,26695,18973,168083,153567,38749,37736,166281,166950,166703,156606,37562,23313,35689,18748,29689,147995,38811,38769,39224,134950,24001,166853,150194,38943,169178,37622,169431,37349,17600,166736,150119,166756,39132,166469,16128,37418,18725,33812,39227,39245,162566,15869,39323,19311,39338,39516,166757,153800,27279,39457,23294,39471,170225,19344,170312,39356,19389,19351,37757,22642,135938,22562,149944,136424,30788,141087,146872,26821,15741,37976,14631,24912,141185,141675,24839,40015,40019,40059,39989,39952,39807,39887,171565,39839,172533,172286,40225,19630,147716,40472,19632,40204,172468,172269,172275,170287,40357,33981,159250,159711,158594,34300,17715,159140,159364,159216,33824,34286,159232,145367,155748,31202,144796,144960,18733,149982,15714,37851,37566,37704,131775,30905,37495,37965,20452,13376,36964,152925,30781,30804,30902,30795,137047,143817,149825,13978,20338,28634,28633,28702,28702,21524,147893,22459,22771,22410,40214,22487,28980,13487,147884,29163,158784,151447,23336,137141,166473,24844,23246,23051,17084,148616,14124,19323,166396,37819,37816,137430,134941,33906,158912,136211,148218,142374,148417,22932,146871,157505,32168,155995,155812,149945,149899,166394,37605,29666,16105,29876,166755,137375,16097,150195,27352,29683,29691,16086,150078,150164,137177,150118,132007,136228,149989,29768,149782,28837,149878,37508,29670,37727,132350,37681,166606,166422,37766,166887,153045,18741,166530,29035,149827,134399,22180,132634,134123,134328,21762,31172,137210,32254,136898,150096,137298,17710,37889,14090,166592,149933,22960,137407,137347,160900,23201,14050,146779,14000,37471,23161,166529,137314,37748,15565,133812,19094,14730,20724,15721,15692,136092,29045,17147,164376,28175,168164,17643,27991,163407,28775,27823,15574,147437,146989,28162,28428,15727,132085,30033,14012,13512,18048,16090,18545,22980,37486,18750,36673,166940,158656,22546,22472,14038,136274,28926,148322,150129,143331,135856,140221,26809,26983,136088,144613,162804,145119,166531,145366,144378,150687,27162,145069,158903,33854,17631,17614,159014,159057,158850,159710,28439,160009,33597,137018,33773,158848,159827,137179,22921,23170,137139,23137,23153,137477,147964,14125,23023,137020,14023,29070,37776,26266,148133,23150,23083,148115,27179,147193,161590,148571,148170,28957,148057,166369,20400,159016,23746,148686,163405,148413,27148,148054,135940,28838,28979,148457,15781,27871,194597,150095,32357,23019,23855,15859,24412,150109,137183,32164,33830,21637,146170,144128,131604,22398,133333,132633,16357,139166,172726,28675,168283,23920,29583,31955,166489,168992,20424,32743,29389,29456,162548,29496,29497,153334,29505,29512,16041,162584,36972,29173,149746,29665,33270,16074,30476,16081,27810,22269,29721,29726,29727,16098,16112,16116,16122,29907,16142,16211,30018,30061,30066,30093,16252,30152,30172,16320,30285,16343,30324,16348,30330,151388,29064,22051,35200,22633,16413,30531,16441,26465,16453,13787,30616,16490,16495,23646,30654,30667,22770,30744,28857,30748,16552,30777,30791,30801,30822,33864,152885,31027,26627,31026,16643,16649,31121,31129,36795,31238,36796,16743,31377,16818,31420,33401,16836,31439,31451,16847,20001,31586,31596,31611,31762,31771,16992,17018,31867,31900,17036,31928,17044,31981,36755,28864,134351,32207,32212,32208,32253,32686,32692,29343,17303,32800,32805,31545,32814,32817,32852,15820,22452,28832,32951,33001,17389,33036,29482,33038,33042,30048,33044,17409,15161,33110,33113,33114,17427,22586,33148,33156,17445,33171,17453,33189,22511,33217,33252,33364,17551,33446,33398,33482,33496,33535,17584,33623,38505,27018,33797,28917,33892,24803,33928,17668,33982,34017,34040,34064,34104,34130,17723,34159,34160,34272,17783,34418,34450,34482,34543,38469,34699,17926,17943,34990,35071,35108,35143,35217,162151,35369,35384,35476,35508,35921,36052,36082,36124,18328,22623,36291,18413,20206,36410,21976,22356,36465,22005,36528,18487,36558,36578,36580,36589,36594,36791,36801,36810,36812,36915,39364,18605,39136,37395,18718,37416,37464,37483,37553,37550,37567,37603,37611,37619,37620,37629,37699,37764,37805,18757,18769,40639,37911,21249,37917,37933,37950,18794,37972,38009,38189,38306,18855,38388,38451,18917,26528,18980,38720,18997,38834,38850,22100,19172,24808,39097,19225,39153,22596,39182,39193,20916,39196,39223,39234,39261,39266,19312,39365,19357,39484,39695,31363,39785,39809,39901,39921,39924,19565,39968,14191,138178,40265,39994,40702,22096,40339,40381,40384,40444,38134,36790,40571,40620,40625,40637,40646,38108,40674,40689,40696,31432,40772,131220,131767,132000,26906,38083,22956,132311,22592,38081,14265,132565,132629,132726,136890,22359,29043,133826,133837,134079,21610,194619,134091,21662,134139,134203,134227,134245,134268,24807,134285,22138,134325,134365,134381,134511,134578,134600,26965,39983,34725,134660,134670,134871,135056,134957,134771,23584,135100,24075,135260,135247,135286,26398,135291,135304,135318,13895,135359,135379,135471,135483,21348,33965,135907,136053,135990,35713,136567,136729,137155,137159,20088,28859,137261,137578,137773,137797,138282,138352,138412,138952,25283,138965,139029,29080,26709,139333,27113,14024,139900,140247,140282,141098,141425,141647,33533,141671,141715,142037,35237,142056,36768,142094,38840,142143,38983,39613,142412,null,142472,142519,154600,142600,142610,142775,142741,142914,143220,143308,143411,143462,144159,144350,24497,26184,26303,162425,144743,144883,29185,149946,30679,144922,145174,32391,131910,22709,26382,26904,146087,161367,155618,146961,147129,161278,139418,18640,19128,147737,166554,148206,148237,147515,148276,148374,150085,132554,20946,132625,22943,138920,15294,146687,148484,148694,22408,149108,14747,149295,165352,170441,14178,139715,35678,166734,39382,149522,149755,150037,29193,150208,134264,22885,151205,151430,132985,36570,151596,21135,22335,29041,152217,152601,147274,150183,21948,152646,152686,158546,37332,13427,152895,161330,152926,18200,152930,152934,153543,149823,153693,20582,13563,144332,24798,153859,18300,166216,154286,154505,154630,138640,22433,29009,28598,155906,162834,36950,156082,151450,35682,156674,156746,23899,158711,36662,156804,137500,35562,150006,156808,147439,156946,19392,157119,157365,141083,37989,153569,24981,23079,194765,20411,22201,148769,157436,20074,149812,38486,28047,158909,13848,35191,157593,157806,156689,157790,29151,157895,31554,168128,133649,157990,37124,158009,31301,40432,158202,39462,158253,13919,156777,131105,31107,158260,158555,23852,144665,33743,158621,18128,158884,30011,34917,159150,22710,14108,140685,159819,160205,15444,160384,160389,37505,139642,160395,37680,160486,149968,27705,38047,160848,134904,34855,35061,141606,164979,137137,28344,150058,137248,14756,14009,23568,31203,17727,26294,171181,170148,35139,161740,161880,22230,16607,136714,14753,145199,164072,136133,29101,33638,162269,168360,23143,19639,159919,166315,162301,162314,162571,163174,147834,31555,31102,163849,28597,172767,27139,164632,21410,159239,37823,26678,38749,164207,163875,158133,136173,143919,163912,23941,166960,163971,22293,38947,166217,23979,149896,26046,27093,21458,150181,147329,15377,26422,163984,164084,164142,139169,164175,164233,164271,164378,164614,164655,164746,13770,164968,165546,18682,25574,166230,30728,37461,166328,17394,166375,17375,166376,166726,166868,23032,166921,36619,167877,168172,31569,168208,168252,15863,168286,150218,36816,29327,22155,169191,169449,169392,169400,169778,170193,170313,170346,170435,170536,170766,171354,171419,32415,171768,171811,19620,38215,172691,29090,172799,19857,36882,173515,19868,134300,36798,21953,36794,140464,36793,150163,17673,32383,28502,27313,20202,13540,166700,161949,14138,36480,137205,163876,166764,166809,162366,157359,15851,161365,146615,153141,153942,20122,155265,156248,22207,134765,36366,23405,147080,150686,25566,25296,137206,137339,25904,22061,154698,21530,152337,15814,171416,19581,22050,22046,32585,155352,22901,146752,34672,19996,135146,134473,145082,33047,40286,36120,30267,40005,30286,30649,37701,21554,33096,33527,22053,33074,33816,32957,21994,31074,22083,21526,134813,13774,22021,22001,26353,164578,13869,30004,22000,21946,21655,21874,134209,134294,24272,151880,134774,142434,134818,40619,32090,21982,135285,25245,38765,21652,36045,29174,37238,25596,25529,25598,21865,142147,40050,143027,20890,13535,134567,20903,21581,21790,21779,30310,36397,157834,30129,32950,34820,34694,35015,33206,33820,135361,17644,29444,149254,23440,33547,157843,22139,141044,163119,147875,163187,159440,160438,37232,135641,37384,146684,173737,134828,134905,29286,138402,18254,151490,163833,135147,16634,40029,25887,142752,18675,149472,171388,135148,134666,24674,161187,135149,null,155720,135559,29091,32398,40272,19994,19972,13687,23309,27826,21351,13996,14812,21373,13989,149016,22682,150382,33325,21579,22442,154261,133497,null,14930,140389,29556,171692,19721,39917,146686,171824,19547,151465,169374,171998,33884,146870,160434,157619,145184,25390,32037,147191,146988,14890,36872,21196,15988,13946,17897,132238,30272,23280,134838,30842,163630,22695,16575,22140,39819,23924,30292,173108,40581,19681,30201,14331,24857,143578,148466,null,22109,135849,22439,149859,171526,21044,159918,13741,27722,40316,31830,39737,22494,137068,23635,25811,169168,156469,160100,34477,134440,159010,150242,134513,null,20990,139023,23950,38659,138705,40577,36940,31519,39682,23761,31651,25192,25397,39679,31695,39722,31870,39726,31810,31878,39957,31740,39689,40727,39963,149822,40794,21875,23491,20477,40600,20466,21088,15878,21201,22375,20566,22967,24082,38856,40363,36700,21609,38836,39232,38842,21292,24880,26924,21466,39946,40194,19515,38465,27008,20646,30022,137069,39386,21107,null,37209,38529,37212,null,37201,167575,25471,159011,27338,22033,37262,30074,25221,132092,29519,31856,154657,146685,null,149785,30422,39837,20010,134356,33726,34882,null,23626,27072,20717,22394,21023,24053,20174,27697,131570,20281,21660,21722,21146,36226,13822,24332,13811,null,27474,37244,40869,39831,38958,39092,39610,40616,40580,29050,31508,null,27642,34840,32632,null,22048,173642,36471,40787,null,36308,36431,40476,36353,25218,164733,36392,36469,31443,150135,31294,30936,27882,35431,30215,166490,40742,27854,34774,30147,172722,30803,194624,36108,29410,29553,35629,29442,29937,36075,150203,34351,24506,34976,17591,null,137275,159237,null,35454,140571,null,24829,30311,39639,40260,37742,39823,34805,null,34831,36087,29484,38689,39856,13782,29362,19463,31825,39242,155993,24921,19460,40598,24957,null,22367,24943,25254,25145,25294,14940,25058,21418,144373,25444,26626,13778,23895,166850,36826,167481,null,20697,138566,30982,21298,38456,134971,16485,null,30718,null,31938,155418,31962,31277,32870,32867,32077,29957,29938,35220,33306,26380,32866,160902,32859,29936,33027,30500,35209,157644,30035,159441,34729,34766,33224,34700,35401,36013,35651,30507,29944,34010,13877,27058,36262,null,35241,29800,28089,34753,147473,29927,15835,29046,24740,24988,15569,29026,24695,null,32625,166701,29264,24809,19326,21024,15384,146631,155351,161366,152881,137540,135934,170243,159196,159917,23745,156077,166415,145015,131310,157766,151310,17762,23327,156492,40784,40614,156267,12288,65292,12289,12290,65294,8231,65307,65306,65311,65281,65072,8230,8229,65104,65105,65106,183,65108,65109,65110,65111,65372,8211,65073,8212,65075,9588,65076,65103,65288,65289,65077,65078,65371,65373,65079,65080,12308,12309,65081,65082,12304,12305,65083,65084,12298,12299,65085,65086,12296,12297,65087,65088,12300,12301,65089,65090,12302,12303,65091,65092,65113,65114,65115,65116,65117,65118,8216,8217,8220,8221,12317,12318,8245,8242,65283,65286,65290,8251,167,12291,9675,9679,9651,9650,9678,9734,9733,9671,9670,9633,9632,9661,9660,12963,8453,175,65507,65343,717,65097,65098,65101,65102,65099,65100,65119,65120,65121,65291,65293,215,247,177,8730,65308,65310,65309,8806,8807,8800,8734,8786,8801,65122,65123,65124,65125,65126,65374,8745,8746,8869,8736,8735,8895,13266,13265,8747,8750,8757,8756,9792,9794,8853,8857,8593,8595,8592,8594,8598,8599,8601,8600,8741,8739,65295,65340,8725,65128,65284,65509,12306,65504,65505,65285,65312,8451,8457,65129,65130,65131,13269,13212,13213,13214,13262,13217,13198,13199,13252,176,20825,20827,20830,20829,20833,20835,21991,29929,31950,9601,9602,9603,9604,9605,9606,9607,9608,9615,9614,9613,9612,9611,9610,9609,9532,9524,9516,9508,9500,9620,9472,9474,9621,9484,9488,9492,9496,9581,9582,9584,9583,9552,9566,9578,9569,9698,9699,9701,9700,9585,9586,9587,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,12321,12322,12323,12324,12325,12326,12327,12328,12329,21313,21316,21317,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,12549,12550,12551,12552,12553,12554,12555,12556,12557,12558,12559,12560,12561,12562,12563,12564,12565,12566,12567,12568,12569,12570,12571,12572,12573,12574,12575,12576,12577,12578,12579,12580,12581,12582,12583,12584,12585,729,713,714,711,715,9216,9217,9218,9219,9220,9221,9222,9223,9224,9225,9226,9227,9228,9229,9230,9231,9232,9233,9234,9235,9236,9237,9238,9239,9240,9241,9242,9243,9244,9245,9246,9247,9249,8364,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19968,20057,19969,19971,20035,20061,20102,20108,20154,20799,20837,20843,20960,20992,20993,21147,21269,21313,21340,21448,19977,19979,19976,19978,20011,20024,20961,20037,20040,20063,20062,20110,20129,20800,20995,21242,21315,21449,21475,22303,22763,22805,22823,22899,23376,23377,23379,23544,23567,23586,23608,23665,24029,24037,24049,24050,24051,24062,24178,24318,24331,24339,25165,19985,19984,19981,20013,20016,20025,20043,23609,20104,20113,20117,20114,20116,20130,20161,20160,20163,20166,20167,20173,20170,20171,20164,20803,20801,20839,20845,20846,20844,20887,20982,20998,20999,21000,21243,21246,21247,21270,21305,21320,21319,21317,21342,21380,21451,21450,21453,22764,22825,22827,22826,22829,23380,23569,23588,23610,23663,24052,24187,24319,24340,24341,24515,25096,25142,25163,25166,25903,25991,26007,26020,26041,26085,26352,26376,26408,27424,27490,27513,27595,27604,27611,27663,27700,28779,29226,29238,29243,29255,29273,29275,29356,29579,19993,19990,19989,19988,19992,20027,20045,20047,20046,20197,20184,20180,20181,20182,20183,20195,20196,20185,20190,20805,20804,20873,20874,20908,20985,20986,20984,21002,21152,21151,21253,21254,21271,21277,20191,21322,21321,21345,21344,21359,21358,21435,21487,21476,21491,21484,21486,21481,21480,21500,21496,21493,21483,21478,21482,21490,21489,21488,21477,21485,21499,22235,22234,22806,22830,22833,22900,22902,23381,23427,23612,24040,24039,24038,24066,24067,24179,24188,24321,24344,24343,24517,25098,25171,25172,25170,25169,26021,26086,26414,26412,26410,26411,26413,27491,27597,27665,27664,27704,27713,27712,27710,29359,29572,29577,29916,29926,29976,29983,29992,29993,30000,30001,30002,30003,30091,30333,30382,30399,30446,30683,30690,30707,31034,31166,31348,31435,19998,19999,20050,20051,20073,20121,20132,20134,20133,20223,20233,20249,20234,20245,20237,20240,20241,20239,20210,20214,20219,20208,20211,20221,20225,20235,20809,20807,20806,20808,20840,20849,20877,20912,21015,21009,21010,21006,21014,21155,21256,21281,21280,21360,21361,21513,21519,21516,21514,21520,21505,21515,21508,21521,21517,21512,21507,21518,21510,21522,22240,22238,22237,22323,22320,22312,22317,22316,22319,22313,22809,22810,22839,22840,22916,22904,22915,22909,22905,22914,22913,23383,23384,23431,23432,23429,23433,23546,23574,23673,24030,24070,24182,24180,24335,24347,24537,24534,25102,25100,25101,25104,25187,25179,25176,25910,26089,26088,26092,26093,26354,26355,26377,26429,26420,26417,26421,27425,27492,27515,27670,27741,27735,27737,27743,27744,27728,27733,27745,27739,27725,27726,28784,29279,29277,30334,31481,31859,31992,32566,32650,32701,32769,32771,32780,32786,32819,32895,32905,32907,32908,33251,33258,33267,33276,33292,33307,33311,33390,33394,33406,34411,34880,34892,34915,35199,38433,20018,20136,20301,20303,20295,20311,20318,20276,20315,20309,20272,20304,20305,20285,20282,20280,20291,20308,20284,20294,20323,20316,20320,20271,20302,20278,20313,20317,20296,20314,20812,20811,20813,20853,20918,20919,21029,21028,21033,21034,21032,21163,21161,21162,21164,21283,21363,21365,21533,21549,21534,21566,21542,21582,21543,21574,21571,21555,21576,21570,21531,21545,21578,21561,21563,21560,21550,21557,21558,21536,21564,21568,21553,21547,21535,21548,22250,22256,22244,22251,22346,22353,22336,22349,22343,22350,22334,22352,22351,22331,22767,22846,22941,22930,22952,22942,22947,22937,22934,22925,22948,22931,22922,22949,23389,23388,23386,23387,23436,23435,23439,23596,23616,23617,23615,23614,23696,23697,23700,23692,24043,24076,24207,24199,24202,24311,24324,24351,24420,24418,24439,24441,24536,24524,24535,24525,24561,24555,24568,24554,25106,25105,25220,25239,25238,25216,25206,25225,25197,25226,25212,25214,25209,25203,25234,25199,25240,25198,25237,25235,25233,25222,25913,25915,25912,26097,26356,26463,26446,26447,26448,26449,26460,26454,26462,26441,26438,26464,26451,26455,27493,27599,27714,27742,27801,27777,27784,27785,27781,27803,27754,27770,27792,27760,27788,27752,27798,27794,27773,27779,27762,27774,27764,27782,27766,27789,27796,27800,27778,28790,28796,28797,28792,29282,29281,29280,29380,29378,29590,29996,29995,30007,30008,30338,30447,30691,31169,31168,31167,31350,31995,32597,32918,32915,32925,32920,32923,32922,32946,33391,33426,33419,33421,35211,35282,35328,35895,35910,35925,35997,36196,36208,36275,36523,36554,36763,36784,36802,36806,36805,36804,24033,37009,37026,37034,37030,37027,37193,37318,37324,38450,38446,38449,38442,38444,20006,20054,20083,20107,20123,20126,20139,20140,20335,20381,20365,20339,20351,20332,20379,20363,20358,20355,20336,20341,20360,20329,20347,20374,20350,20367,20369,20346,20820,20818,20821,20841,20855,20854,20856,20925,20989,21051,21048,21047,21050,21040,21038,21046,21057,21182,21179,21330,21332,21331,21329,21350,21367,21368,21369,21462,21460,21463,21619,21621,21654,21624,21653,21632,21627,21623,21636,21650,21638,21628,21648,21617,21622,21644,21658,21602,21608,21643,21629,21646,22266,22403,22391,22378,22377,22369,22374,22372,22396,22812,22857,22855,22856,22852,22868,22974,22971,22996,22969,22958,22993,22982,22992,22989,22987,22995,22986,22959,22963,22994,22981,23391,23396,23395,23447,23450,23448,23452,23449,23451,23578,23624,23621,23622,23735,23713,23736,23721,23723,23729,23731,24088,24090,24086,24085,24091,24081,24184,24218,24215,24220,24213,24214,24310,24358,24359,24361,24448,24449,24447,24444,24541,24544,24573,24565,24575,24591,24596,24623,24629,24598,24618,24597,24609,24615,24617,24619,24603,25110,25109,25151,25150,25152,25215,25289,25292,25284,25279,25282,25273,25298,25307,25259,25299,25300,25291,25288,25256,25277,25276,25296,25305,25287,25293,25269,25306,25265,25304,25302,25303,25286,25260,25294,25918,26023,26044,26106,26132,26131,26124,26118,26114,26126,26112,26127,26133,26122,26119,26381,26379,26477,26507,26517,26481,26524,26483,26487,26503,26525,26519,26479,26480,26495,26505,26494,26512,26485,26522,26515,26492,26474,26482,27427,27494,27495,27519,27667,27675,27875,27880,27891,27825,27852,27877,27827,27837,27838,27836,27874,27819,27861,27859,27832,27844,27833,27841,27822,27863,27845,27889,27839,27835,27873,27867,27850,27820,27887,27868,27862,27872,28821,28814,28818,28810,28825,29228,29229,29240,29256,29287,29289,29376,29390,29401,29399,29392,29609,29608,29599,29611,29605,30013,30109,30105,30106,30340,30402,30450,30452,30693,30717,31038,31040,31041,31177,31176,31354,31353,31482,31998,32596,32652,32651,32773,32954,32933,32930,32945,32929,32939,32937,32948,32938,32943,33253,33278,33293,33459,33437,33433,33453,33469,33439,33465,33457,33452,33445,33455,33464,33443,33456,33470,33463,34382,34417,21021,34920,36555,36814,36820,36817,37045,37048,37041,37046,37319,37329,38263,38272,38428,38464,38463,38459,38468,38466,38585,38632,38738,38750,20127,20141,20142,20449,20405,20399,20415,20448,20433,20431,20445,20419,20406,20440,20447,20426,20439,20398,20432,20420,20418,20442,20430,20446,20407,20823,20882,20881,20896,21070,21059,21066,21069,21068,21067,21063,21191,21193,21187,21185,21261,21335,21371,21402,21467,21676,21696,21672,21710,21705,21688,21670,21683,21703,21698,21693,21674,21697,21700,21704,21679,21675,21681,21691,21673,21671,21695,22271,22402,22411,22432,22435,22434,22478,22446,22419,22869,22865,22863,22862,22864,23004,23000,23039,23011,23016,23043,23013,23018,23002,23014,23041,23035,23401,23459,23462,23460,23458,23461,23553,23630,23631,23629,23627,23769,23762,24055,24093,24101,24095,24189,24224,24230,24314,24328,24365,24421,24456,24453,24458,24459,24455,24460,24457,24594,24605,24608,24613,24590,24616,24653,24688,24680,24674,24646,24643,24684,24683,24682,24676,25153,25308,25366,25353,25340,25325,25345,25326,25341,25351,25329,25335,25327,25324,25342,25332,25361,25346,25919,25925,26027,26045,26082,26149,26157,26144,26151,26159,26143,26152,26161,26148,26359,26623,26579,26609,26580,26576,26604,26550,26543,26613,26601,26607,26564,26577,26548,26586,26597,26552,26575,26590,26611,26544,26585,26594,26589,26578,27498,27523,27526,27573,27602,27607,27679,27849,27915,27954,27946,27969,27941,27916,27953,27934,27927,27963,27965,27966,27958,27931,27893,27961,27943,27960,27945,27950,27957,27918,27947,28843,28858,28851,28844,28847,28845,28856,28846,28836,29232,29298,29295,29300,29417,29408,29409,29623,29642,29627,29618,29645,29632,29619,29978,29997,30031,30028,30030,30027,30123,30116,30117,30114,30115,30328,30342,30343,30344,30408,30406,30403,30405,30465,30457,30456,30473,30475,30462,30460,30471,30684,30722,30740,30732,30733,31046,31049,31048,31047,31161,31162,31185,31186,31179,31359,31361,31487,31485,31869,32002,32005,32000,32009,32007,32004,32006,32568,32654,32703,32772,32784,32781,32785,32822,32982,32997,32986,32963,32964,32972,32993,32987,32974,32990,32996,32989,33268,33314,33511,33539,33541,33507,33499,33510,33540,33509,33538,33545,33490,33495,33521,33537,33500,33492,33489,33502,33491,33503,33519,33542,34384,34425,34427,34426,34893,34923,35201,35284,35336,35330,35331,35998,36000,36212,36211,36276,36557,36556,36848,36838,36834,36842,36837,36845,36843,36836,36840,37066,37070,37057,37059,37195,37194,37325,38274,38480,38475,38476,38477,38754,38761,38859,38893,38899,38913,39080,39131,39135,39318,39321,20056,20147,20492,20493,20515,20463,20518,20517,20472,20521,20502,20486,20540,20511,20506,20498,20497,20474,20480,20500,20520,20465,20513,20491,20505,20504,20467,20462,20525,20522,20478,20523,20489,20860,20900,20901,20898,20941,20940,20934,20939,21078,21084,21076,21083,21085,21290,21375,21407,21405,21471,21736,21776,21761,21815,21756,21733,21746,21766,21754,21780,21737,21741,21729,21769,21742,21738,21734,21799,21767,21757,21775,22275,22276,22466,22484,22475,22467,22537,22799,22871,22872,22874,23057,23064,23068,23071,23067,23059,23020,23072,23075,23081,23077,23052,23049,23403,23640,23472,23475,23478,23476,23470,23477,23481,23480,23556,23633,23637,23632,23789,23805,23803,23786,23784,23792,23798,23809,23796,24046,24109,24107,24235,24237,24231,24369,24466,24465,24464,24665,24675,24677,24656,24661,24685,24681,24687,24708,24735,24730,24717,24724,24716,24709,24726,25159,25331,25352,25343,25422,25406,25391,25429,25410,25414,25423,25417,25402,25424,25405,25386,25387,25384,25421,25420,25928,25929,26009,26049,26053,26178,26185,26191,26179,26194,26188,26181,26177,26360,26388,26389,26391,26657,26680,26696,26694,26707,26681,26690,26708,26665,26803,26647,26700,26705,26685,26612,26704,26688,26684,26691,26666,26693,26643,26648,26689,27530,27529,27575,27683,27687,27688,27686,27684,27888,28010,28053,28040,28039,28006,28024,28023,27993,28051,28012,28041,28014,27994,28020,28009,28044,28042,28025,28037,28005,28052,28874,28888,28900,28889,28872,28879,29241,29305,29436,29433,29437,29432,29431,29574,29677,29705,29678,29664,29674,29662,30036,30045,30044,30042,30041,30142,30149,30151,30130,30131,30141,30140,30137,30146,30136,30347,30384,30410,30413,30414,30505,30495,30496,30504,30697,30768,30759,30776,30749,30772,30775,30757,30765,30752,30751,30770,31061,31056,31072,31071,31062,31070,31069,31063,31066,31204,31203,31207,31199,31206,31209,31192,31364,31368,31449,31494,31505,31881,32033,32023,32011,32010,32032,32034,32020,32016,32021,32026,32028,32013,32025,32027,32570,32607,32660,32709,32705,32774,32792,32789,32793,32791,32829,32831,33009,33026,33008,33029,33005,33012,33030,33016,33011,33032,33021,33034,33020,33007,33261,33260,33280,33296,33322,33323,33320,33324,33467,33579,33618,33620,33610,33592,33616,33609,33589,33588,33615,33586,33593,33590,33559,33600,33585,33576,33603,34388,34442,34474,34451,34468,34473,34444,34467,34460,34928,34935,34945,34946,34941,34937,35352,35344,35342,35340,35349,35338,35351,35347,35350,35343,35345,35912,35962,35961,36001,36002,36215,36524,36562,36564,36559,36785,36865,36870,36855,36864,36858,36852,36867,36861,36869,36856,37013,37089,37085,37090,37202,37197,37196,37336,37341,37335,37340,37337,38275,38498,38499,38497,38491,38493,38500,38488,38494,38587,39138,39340,39592,39640,39717,39730,39740,20094,20602,20605,20572,20551,20547,20556,20570,20553,20581,20598,20558,20565,20597,20596,20599,20559,20495,20591,20589,20828,20885,20976,21098,21103,21202,21209,21208,21205,21264,21263,21273,21311,21312,21310,21443,26364,21830,21866,21862,21828,21854,21857,21827,21834,21809,21846,21839,21845,21807,21860,21816,21806,21852,21804,21859,21811,21825,21847,22280,22283,22281,22495,22533,22538,22534,22496,22500,22522,22530,22581,22519,22521,22816,22882,23094,23105,23113,23142,23146,23104,23100,23138,23130,23110,23114,23408,23495,23493,23492,23490,23487,23494,23561,23560,23559,23648,23644,23645,23815,23814,23822,23835,23830,23842,23825,23849,23828,23833,23844,23847,23831,24034,24120,24118,24115,24119,24247,24248,24246,24245,24254,24373,24375,24407,24428,24425,24427,24471,24473,24478,24472,24481,24480,24476,24703,24739,24713,24736,24744,24779,24756,24806,24765,24773,24763,24757,24796,24764,24792,24789,24774,24799,24760,24794,24775,25114,25115,25160,25504,25511,25458,25494,25506,25509,25463,25447,25496,25514,25457,25513,25481,25475,25499,25451,25512,25476,25480,25497,25505,25516,25490,25487,25472,25467,25449,25448,25466,25949,25942,25937,25945,25943,21855,25935,25944,25941,25940,26012,26011,26028,26063,26059,26060,26062,26205,26202,26212,26216,26214,26206,26361,21207,26395,26753,26799,26786,26771,26805,26751,26742,26801,26791,26775,26800,26755,26820,26797,26758,26757,26772,26781,26792,26783,26785,26754,27442,27578,27627,27628,27691,28046,28092,28147,28121,28082,28129,28108,28132,28155,28154,28165,28103,28107,28079,28113,28078,28126,28153,28088,28151,28149,28101,28114,28186,28085,28122,28139,28120,28138,28145,28142,28136,28102,28100,28074,28140,28095,28134,28921,28937,28938,28925,28911,29245,29309,29313,29468,29467,29462,29459,29465,29575,29701,29706,29699,29702,29694,29709,29920,29942,29943,29980,29986,30053,30054,30050,30064,30095,30164,30165,30133,30154,30157,30350,30420,30418,30427,30519,30526,30524,30518,30520,30522,30827,30787,30798,31077,31080,31085,31227,31378,31381,31520,31528,31515,31532,31526,31513,31518,31534,31890,31895,31893,32070,32067,32113,32046,32057,32060,32064,32048,32051,32068,32047,32066,32050,32049,32573,32670,32666,32716,32718,32722,32796,32842,32838,33071,33046,33059,33067,33065,33072,33060,33282,33333,33335,33334,33337,33678,33694,33688,33656,33698,33686,33725,33707,33682,33674,33683,33673,33696,33655,33659,33660,33670,33703,34389,24426,34503,34496,34486,34500,34485,34502,34507,34481,34479,34505,34899,34974,34952,34987,34962,34966,34957,34955,35219,35215,35370,35357,35363,35365,35377,35373,35359,35355,35362,35913,35930,36009,36012,36011,36008,36010,36007,36199,36198,36286,36282,36571,36575,36889,36877,36890,36887,36899,36895,36893,36880,36885,36894,36896,36879,36898,36886,36891,36884,37096,37101,37117,37207,37326,37365,37350,37347,37351,37357,37353,38281,38506,38517,38515,38520,38512,38516,38518,38519,38508,38592,38634,38633,31456,31455,38914,38915,39770,40165,40565,40575,40613,40635,20642,20621,20613,20633,20625,20608,20630,20632,20634,26368,20977,21106,21108,21109,21097,21214,21213,21211,21338,21413,21883,21888,21927,21884,21898,21917,21912,21890,21916,21930,21908,21895,21899,21891,21939,21934,21919,21822,21938,21914,21947,21932,21937,21886,21897,21931,21913,22285,22575,22570,22580,22564,22576,22577,22561,22557,22560,22777,22778,22880,23159,23194,23167,23186,23195,23207,23411,23409,23506,23500,23507,23504,23562,23563,23601,23884,23888,23860,23879,24061,24133,24125,24128,24131,24190,24266,24257,24258,24260,24380,24429,24489,24490,24488,24785,24801,24754,24758,24800,24860,24867,24826,24853,24816,24827,24820,24936,24817,24846,24822,24841,24832,24850,25119,25161,25507,25484,25551,25536,25577,25545,25542,25549,25554,25571,25552,25569,25558,25581,25582,25462,25588,25578,25563,25682,25562,25593,25950,25958,25954,25955,26001,26000,26031,26222,26224,26228,26230,26223,26257,26234,26238,26231,26366,26367,26399,26397,26874,26837,26848,26840,26839,26885,26847,26869,26862,26855,26873,26834,26866,26851,26827,26829,26893,26898,26894,26825,26842,26990,26875,27454,27450,27453,27544,27542,27580,27631,27694,27695,27692,28207,28216,28244,28193,28210,28263,28234,28192,28197,28195,28187,28251,28248,28196,28246,28270,28205,28198,28271,28212,28237,28218,28204,28227,28189,28222,28363,28297,28185,28238,28259,28228,28274,28265,28255,28953,28954,28966,28976,28961,28982,29038,28956,29260,29316,29312,29494,29477,29492,29481,29754,29738,29747,29730,29733,29749,29750,29748,29743,29723,29734,29736,29989,29990,30059,30058,30178,30171,30179,30169,30168,30174,30176,30331,30332,30358,30355,30388,30428,30543,30701,30813,30828,30831,31245,31240,31243,31237,31232,31384,31383,31382,31461,31459,31561,31574,31558,31568,31570,31572,31565,31563,31567,31569,31903,31909,32094,32080,32104,32085,32043,32110,32114,32097,32102,32098,32112,32115,21892,32724,32725,32779,32850,32901,33109,33108,33099,33105,33102,33081,33094,33086,33100,33107,33140,33298,33308,33769,33795,33784,33805,33760,33733,33803,33729,33775,33777,33780,33879,33802,33776,33804,33740,33789,33778,33738,33848,33806,33796,33756,33799,33748,33759,34395,34527,34521,34541,34516,34523,34532,34512,34526,34903,35009,35010,34993,35203,35222,35387,35424,35413,35422,35388,35393,35412,35419,35408,35398,35380,35386,35382,35414,35937,35970,36015,36028,36019,36029,36033,36027,36032,36020,36023,36022,36031,36024,36234,36229,36225,36302,36317,36299,36314,36305,36300,36315,36294,36603,36600,36604,36764,36910,36917,36913,36920,36914,36918,37122,37109,37129,37118,37219,37221,37327,37396,37397,37411,37385,37406,37389,37392,37383,37393,38292,38287,38283,38289,38291,38290,38286,38538,38542,38539,38525,38533,38534,38541,38514,38532,38593,38597,38596,38598,38599,38639,38642,38860,38917,38918,38920,39143,39146,39151,39145,39154,39149,39342,39341,40643,40653,40657,20098,20653,20661,20658,20659,20677,20670,20652,20663,20667,20655,20679,21119,21111,21117,21215,21222,21220,21218,21219,21295,21983,21992,21971,21990,21966,21980,21959,21969,21987,21988,21999,21978,21985,21957,21958,21989,21961,22290,22291,22622,22609,22616,22615,22618,22612,22635,22604,22637,22602,22626,22610,22603,22887,23233,23241,23244,23230,23229,23228,23219,23234,23218,23913,23919,24140,24185,24265,24264,24338,24409,24492,24494,24858,24847,24904,24863,24819,24859,24825,24833,24840,24910,24908,24900,24909,24894,24884,24871,24845,24838,24887,25121,25122,25619,25662,25630,25642,25645,25661,25644,25615,25628,25620,25613,25654,25622,25623,25606,25964,26015,26032,26263,26249,26247,26248,26262,26244,26264,26253,26371,27028,26989,26970,26999,26976,26964,26997,26928,27010,26954,26984,26987,26974,26963,27001,27014,26973,26979,26971,27463,27506,27584,27583,27603,27645,28322,28335,28371,28342,28354,28304,28317,28359,28357,28325,28312,28348,28346,28331,28369,28310,28316,28356,28372,28330,28327,28340,29006,29017,29033,29028,29001,29031,29020,29036,29030,29004,29029,29022,28998,29032,29014,29242,29266,29495,29509,29503,29502,29807,29786,29781,29791,29790,29761,29759,29785,29787,29788,30070,30072,30208,30192,30209,30194,30193,30202,30207,30196,30195,30430,30431,30555,30571,30566,30558,30563,30585,30570,30572,30556,30565,30568,30562,30702,30862,30896,30871,30872,30860,30857,30844,30865,30867,30847,31098,31103,31105,33836,31165,31260,31258,31264,31252,31263,31262,31391,31392,31607,31680,31584,31598,31591,31921,31923,31925,32147,32121,32145,32129,32143,32091,32622,32617,32618,32626,32681,32680,32676,32854,32856,32902,32900,33137,33136,33144,33125,33134,33139,33131,33145,33146,33126,33285,33351,33922,33911,33853,33841,33909,33894,33899,33865,33900,33883,33852,33845,33889,33891,33897,33901,33862,34398,34396,34399,34553,34579,34568,34567,34560,34558,34555,34562,34563,34566,34570,34905,35039,35028,35033,35036,35032,35037,35041,35018,35029,35026,35228,35299,35435,35442,35443,35430,35433,35440,35463,35452,35427,35488,35441,35461,35437,35426,35438,35436,35449,35451,35390,35432,35938,35978,35977,36042,36039,36040,36036,36018,36035,36034,36037,36321,36319,36328,36335,36339,36346,36330,36324,36326,36530,36611,36617,36606,36618,36767,36786,36939,36938,36947,36930,36948,36924,36949,36944,36935,36943,36942,36941,36945,36926,36929,37138,37143,37228,37226,37225,37321,37431,37463,37432,37437,37440,37438,37467,37451,37476,37457,37428,37449,37453,37445,37433,37439,37466,38296,38552,38548,38549,38605,38603,38601,38602,38647,38651,38649,38646,38742,38772,38774,38928,38929,38931,38922,38930,38924,39164,39156,39165,39166,39347,39345,39348,39649,40169,40578,40718,40723,40736,20711,20718,20709,20694,20717,20698,20693,20687,20689,20721,20686,20713,20834,20979,21123,21122,21297,21421,22014,22016,22043,22039,22013,22036,22022,22025,22029,22030,22007,22038,22047,22024,22032,22006,22296,22294,22645,22654,22659,22675,22666,22649,22661,22653,22781,22821,22818,22820,22890,22889,23265,23270,23273,23255,23254,23256,23267,23413,23518,23527,23521,23525,23526,23528,23522,23524,23519,23565,23650,23940,23943,24155,24163,24149,24151,24148,24275,24278,24330,24390,24432,24505,24903,24895,24907,24951,24930,24931,24927,24922,24920,24949,25130,25735,25688,25684,25764,25720,25695,25722,25681,25703,25652,25709,25723,25970,26017,26071,26070,26274,26280,26269,27036,27048,27029,27073,27054,27091,27083,27035,27063,27067,27051,27060,27088,27085,27053,27084,27046,27075,27043,27465,27468,27699,28467,28436,28414,28435,28404,28457,28478,28448,28460,28431,28418,28450,28415,28399,28422,28465,28472,28466,28451,28437,28459,28463,28552,28458,28396,28417,28402,28364,28407,29076,29081,29053,29066,29060,29074,29246,29330,29334,29508,29520,29796,29795,29802,29808,29805,29956,30097,30247,30221,30219,30217,30227,30433,30435,30596,30589,30591,30561,30913,30879,30887,30899,30889,30883,31118,31119,31117,31278,31281,31402,31401,31469,31471,31649,31637,31627,31605,31639,31645,31636,31631,31672,31623,31620,31929,31933,31934,32187,32176,32156,32189,32190,32160,32202,32180,32178,32177,32186,32162,32191,32181,32184,32173,32210,32199,32172,32624,32736,32737,32735,32862,32858,32903,33104,33152,33167,33160,33162,33151,33154,33255,33274,33287,33300,33310,33355,33993,33983,33990,33988,33945,33950,33970,33948,33995,33976,33984,34003,33936,33980,34001,33994,34623,34588,34619,34594,34597,34612,34584,34645,34615,34601,35059,35074,35060,35065,35064,35069,35048,35098,35055,35494,35468,35486,35491,35469,35489,35475,35492,35498,35493,35496,35480,35473,35482,35495,35946,35981,35980,36051,36049,36050,36203,36249,36245,36348,36628,36626,36629,36627,36771,36960,36952,36956,36963,36953,36958,36962,36957,36955,37145,37144,37150,37237,37240,37239,37236,37496,37504,37509,37528,37526,37499,37523,37532,37544,37500,37521,38305,38312,38313,38307,38309,38308,38553,38556,38555,38604,38610,38656,38780,38789,38902,38935,38936,39087,39089,39171,39173,39180,39177,39361,39599,39600,39654,39745,39746,40180,40182,40179,40636,40763,40778,20740,20736,20731,20725,20729,20738,20744,20745,20741,20956,21127,21128,21129,21133,21130,21232,21426,22062,22075,22073,22066,22079,22068,22057,22099,22094,22103,22132,22070,22063,22064,22656,22687,22686,22707,22684,22702,22697,22694,22893,23305,23291,23307,23285,23308,23304,23534,23532,23529,23531,23652,23653,23965,23956,24162,24159,24161,24290,24282,24287,24285,24291,24288,24392,24433,24503,24501,24950,24935,24942,24925,24917,24962,24956,24944,24939,24958,24999,24976,25003,24974,25004,24986,24996,24980,25006,25134,25705,25711,25721,25758,25778,25736,25744,25776,25765,25747,25749,25769,25746,25774,25773,25771,25754,25772,25753,25762,25779,25973,25975,25976,26286,26283,26292,26289,27171,27167,27112,27137,27166,27161,27133,27169,27155,27146,27123,27138,27141,27117,27153,27472,27470,27556,27589,27590,28479,28540,28548,28497,28518,28500,28550,28525,28507,28536,28526,28558,28538,28528,28516,28567,28504,28373,28527,28512,28511,29087,29100,29105,29096,29270,29339,29518,29527,29801,29835,29827,29822,29824,30079,30240,30249,30239,30244,30246,30241,30242,30362,30394,30436,30606,30599,30604,30609,30603,30923,30917,30906,30922,30910,30933,30908,30928,31295,31292,31296,31293,31287,31291,31407,31406,31661,31665,31684,31668,31686,31687,31681,31648,31692,31946,32224,32244,32239,32251,32216,32236,32221,32232,32227,32218,32222,32233,32158,32217,32242,32249,32629,32631,32687,32745,32806,33179,33180,33181,33184,33178,33176,34071,34109,34074,34030,34092,34093,34067,34065,34083,34081,34068,34028,34085,34047,34054,34690,34676,34678,34656,34662,34680,34664,34649,34647,34636,34643,34907,34909,35088,35079,35090,35091,35093,35082,35516,35538,35527,35524,35477,35531,35576,35506,35529,35522,35519,35504,35542,35533,35510,35513,35547,35916,35918,35948,36064,36062,36070,36068,36076,36077,36066,36067,36060,36074,36065,36205,36255,36259,36395,36368,36381,36386,36367,36393,36383,36385,36382,36538,36637,36635,36639,36649,36646,36650,36636,36638,36645,36969,36974,36968,36973,36983,37168,37165,37159,37169,37255,37257,37259,37251,37573,37563,37559,37610,37548,37604,37569,37555,37564,37586,37575,37616,37554,38317,38321,38660,38662,38663,38665,38752,38797,38795,38799,38945,38955,38940,39091,39178,39187,39186,39192,39389,39376,39391,39387,39377,39381,39378,39385,39607,39662,39663,39719,39749,39748,39799,39791,40198,40201,40195,40617,40638,40654,22696,40786,20754,20760,20756,20752,20757,20864,20906,20957,21137,21139,21235,22105,22123,22137,22121,22116,22136,22122,22120,22117,22129,22127,22124,22114,22134,22721,22718,22727,22725,22894,23325,23348,23416,23536,23566,24394,25010,24977,25001,24970,25037,25014,25022,25034,25032,25136,25797,25793,25803,25787,25788,25818,25796,25799,25794,25805,25791,25810,25812,25790,25972,26310,26313,26297,26308,26311,26296,27197,27192,27194,27225,27243,27224,27193,27204,27234,27233,27211,27207,27189,27231,27208,27481,27511,27653,28610,28593,28577,28611,28580,28609,28583,28595,28608,28601,28598,28582,28576,28596,29118,29129,29136,29138,29128,29141,29113,29134,29145,29148,29123,29124,29544,29852,29859,29848,29855,29854,29922,29964,29965,30260,30264,30266,30439,30437,30624,30622,30623,30629,30952,30938,30956,30951,31142,31309,31310,31302,31308,31307,31418,31705,31761,31689,31716,31707,31713,31721,31718,31957,31958,32266,32273,32264,32283,32291,32286,32285,32265,32272,32633,32690,32752,32753,32750,32808,33203,33193,33192,33275,33288,33368,33369,34122,34137,34120,34152,34153,34115,34121,34157,34154,34142,34691,34719,34718,34722,34701,34913,35114,35122,35109,35115,35105,35242,35238,35558,35578,35563,35569,35584,35548,35559,35566,35582,35585,35586,35575,35565,35571,35574,35580,35947,35949,35987,36084,36420,36401,36404,36418,36409,36405,36667,36655,36664,36659,36776,36774,36981,36980,36984,36978,36988,36986,37172,37266,37664,37686,37624,37683,37679,37666,37628,37675,37636,37658,37648,37670,37665,37653,37678,37657,38331,38567,38568,38570,38613,38670,38673,38678,38669,38675,38671,38747,38748,38758,38808,38960,38968,38971,38967,38957,38969,38948,39184,39208,39198,39195,39201,39194,39405,39394,39409,39608,39612,39675,39661,39720,39825,40213,40227,40230,40232,40210,40219,40664,40660,40845,40860,20778,20767,20769,20786,21237,22158,22144,22160,22149,22151,22159,22741,22739,22737,22734,23344,23338,23332,23418,23607,23656,23996,23994,23997,23992,24171,24396,24509,25033,25026,25031,25062,25035,25138,25140,25806,25802,25816,25824,25840,25830,25836,25841,25826,25837,25986,25987,26329,26326,27264,27284,27268,27298,27292,27355,27299,27262,27287,27280,27296,27484,27566,27610,27656,28632,28657,28639,28640,28635,28644,28651,28655,28544,28652,28641,28649,28629,28654,28656,29159,29151,29166,29158,29157,29165,29164,29172,29152,29237,29254,29552,29554,29865,29872,29862,29864,30278,30274,30284,30442,30643,30634,30640,30636,30631,30637,30703,30967,30970,30964,30959,30977,31143,31146,31319,31423,31751,31757,31742,31735,31756,31712,31968,31964,31966,31970,31967,31961,31965,32302,32318,32326,32311,32306,32323,32299,32317,32305,32325,32321,32308,32313,32328,32309,32319,32303,32580,32755,32764,32881,32882,32880,32879,32883,33222,33219,33210,33218,33216,33215,33213,33225,33214,33256,33289,33393,34218,34180,34174,34204,34193,34196,34223,34203,34183,34216,34186,34407,34752,34769,34739,34770,34758,34731,34747,34746,34760,34763,35131,35126,35140,35128,35133,35244,35598,35607,35609,35611,35594,35616,35613,35588,35600,35905,35903,35955,36090,36093,36092,36088,36091,36264,36425,36427,36424,36426,36676,36670,36674,36677,36671,36991,36989,36996,36993,36994,36992,37177,37283,37278,37276,37709,37762,37672,37749,37706,37733,37707,37656,37758,37740,37723,37744,37722,37716,38346,38347,38348,38344,38342,38577,38584,38614,38684,38686,38816,38867,38982,39094,39221,39425,39423,39854,39851,39850,39853,40251,40255,40587,40655,40670,40668,40669,40667,40766,40779,21474,22165,22190,22745,22744,23352,24413,25059,25139,25844,25842,25854,25862,25850,25851,25847,26039,26332,26406,27315,27308,27331,27323,27320,27330,27310,27311,27487,27512,27567,28681,28683,28670,28678,28666,28689,28687,29179,29180,29182,29176,29559,29557,29863,29887,29973,30294,30296,30290,30653,30655,30651,30652,30990,31150,31329,31330,31328,31428,31429,31787,31783,31786,31774,31779,31777,31975,32340,32341,32350,32346,32353,32338,32345,32584,32761,32763,32887,32886,33229,33231,33290,34255,34217,34253,34256,34249,34224,34234,34233,34214,34799,34796,34802,34784,35206,35250,35316,35624,35641,35628,35627,35920,36101,36441,36451,36454,36452,36447,36437,36544,36681,36685,36999,36995,37000,37291,37292,37328,37780,37770,37782,37794,37811,37806,37804,37808,37784,37786,37783,38356,38358,38352,38357,38626,38620,38617,38619,38622,38692,38819,38822,38829,38905,38989,38991,38988,38990,38995,39098,39230,39231,39229,39214,39333,39438,39617,39683,39686,39759,39758,39757,39882,39881,39933,39880,39872,40273,40285,40288,40672,40725,40748,20787,22181,22750,22751,22754,23541,40848,24300,25074,25079,25078,25077,25856,25871,26336,26333,27365,27357,27354,27347,28699,28703,28712,28698,28701,28693,28696,29190,29197,29272,29346,29560,29562,29885,29898,29923,30087,30086,30303,30305,30663,31001,31153,31339,31337,31806,31807,31800,31805,31799,31808,32363,32365,32377,32361,32362,32645,32371,32694,32697,32696,33240,34281,34269,34282,34261,34276,34277,34295,34811,34821,34829,34809,34814,35168,35167,35158,35166,35649,35676,35672,35657,35674,35662,35663,35654,35673,36104,36106,36476,36466,36487,36470,36460,36474,36468,36692,36686,36781,37002,37003,37297,37294,37857,37841,37855,37827,37832,37852,37853,37846,37858,37837,37848,37860,37847,37864,38364,38580,38627,38698,38695,38753,38876,38907,39006,39000,39003,39100,39237,39241,39446,39449,39693,39912,39911,39894,39899,40329,40289,40306,40298,40300,40594,40599,40595,40628,21240,22184,22199,22198,22196,22204,22756,23360,23363,23421,23542,24009,25080,25082,25880,25876,25881,26342,26407,27372,28734,28720,28722,29200,29563,29903,30306,30309,31014,31018,31020,31019,31431,31478,31820,31811,31821,31983,31984,36782,32381,32380,32386,32588,32768,33242,33382,34299,34297,34321,34298,34310,34315,34311,34314,34836,34837,35172,35258,35320,35696,35692,35686,35695,35679,35691,36111,36109,36489,36481,36485,36482,37300,37323,37912,37891,37885,38369,38704,39108,39250,39249,39336,39467,39472,39479,39477,39955,39949,40569,40629,40680,40751,40799,40803,40801,20791,20792,22209,22208,22210,22804,23660,24013,25084,25086,25885,25884,26005,26345,27387,27396,27386,27570,28748,29211,29351,29910,29908,30313,30675,31824,32399,32396,32700,34327,34349,34330,34851,34850,34849,34847,35178,35180,35261,35700,35703,35709,36115,36490,36493,36491,36703,36783,37306,37934,37939,37941,37946,37944,37938,37931,38370,38712,38713,38706,38911,39015,39013,39255,39493,39491,39488,39486,39631,39764,39761,39981,39973,40367,40372,40386,40376,40605,40687,40729,40796,40806,40807,20796,20795,22216,22218,22217,23423,24020,24018,24398,25087,25892,27402,27489,28753,28760,29568,29924,30090,30318,30316,31155,31840,31839,32894,32893,33247,35186,35183,35324,35712,36118,36119,36497,36499,36705,37192,37956,37969,37970,38717,38718,38851,38849,39019,39253,39509,39501,39634,39706,40009,39985,39998,39995,40403,40407,40756,40812,40810,40852,22220,24022,25088,25891,25899,25898,26348,27408,29914,31434,31844,31843,31845,32403,32406,32404,33250,34360,34367,34865,35722,37008,37007,37987,37984,37988,38760,39023,39260,39514,39515,39511,39635,39636,39633,40020,40023,40022,40421,40607,40692,22225,22761,25900,28766,30321,30322,30679,32592,32648,34870,34873,34914,35731,35730,35734,33399,36123,37312,37994,38722,38728,38724,38854,39024,39519,39714,39768,40031,40441,40442,40572,40573,40711,40823,40818,24307,27414,28771,31852,31854,34875,35264,36513,37313,38002,38000,39025,39262,39638,39715,40652,28772,30682,35738,38007,38857,39522,39525,32412,35740,36522,37317,38013,38014,38012,40055,40056,40695,35924,38015,40474,29224,39530,39729,40475,40478,31858,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,20022,20031,20101,20128,20866,20886,20907,21241,21304,21353,21430,22794,23424,24027,12083,24191,24308,24400,24417,25908,26080,30098,30326,36789,38582,168,710,12541,12542,12445,12446,12291,20189,12293,12294,12295,12540,65339,65341,10045,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,8679,8632,8633,12751,131276,20058,131210,20994,17553,40880,20872,40881,161287,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,65506,65508,65287,65282,12849,8470,8481,12443,12444,11904,11908,11910,11911,11912,11914,11916,11917,11925,11932,11933,11941,11943,11946,11948,11950,11958,11964,11966,11974,11978,11980,11981,11983,11990,11991,11998,12003,null,null,null,643,592,603,596,629,339,248,331,650,618,20034,20060,20981,21274,21378,19975,19980,20039,20109,22231,64012,23662,24435,19983,20871,19982,20014,20115,20162,20169,20168,20888,21244,21356,21433,22304,22787,22828,23568,24063,26081,27571,27596,27668,29247,20017,20028,20200,20188,20201,20193,20189,20186,21004,21276,21324,22306,22307,22807,22831,23425,23428,23570,23611,23668,23667,24068,24192,24194,24521,25097,25168,27669,27702,27715,27711,27707,29358,29360,29578,31160,32906,38430,20238,20248,20268,20213,20244,20209,20224,20215,20232,20253,20226,20229,20258,20243,20228,20212,20242,20913,21011,21001,21008,21158,21282,21279,21325,21386,21511,22241,22239,22318,22314,22324,22844,22912,22908,22917,22907,22910,22903,22911,23382,23573,23589,23676,23674,23675,23678,24031,24181,24196,24322,24346,24436,24533,24532,24527,25180,25182,25188,25185,25190,25186,25177,25184,25178,25189,26095,26094,26430,26425,26424,26427,26426,26431,26428,26419,27672,27718,27730,27740,27727,27722,27732,27723,27724,28785,29278,29364,29365,29582,29994,30335,31349,32593,33400,33404,33408,33405,33407,34381,35198,37017,37015,37016,37019,37012,38434,38436,38432,38435,20310,20283,20322,20297,20307,20324,20286,20327,20306,20319,20289,20312,20269,20275,20287,20321,20879,20921,21020,21022,21025,21165,21166,21257,21347,21362,21390,21391,21552,21559,21546,21588,21573,21529,21532,21541,21528,21565,21583,21569,21544,21540,21575,22254,22247,22245,22337,22341,22348,22345,22347,22354,22790,22848,22950,22936,22944,22935,22926,22946,22928,22927,22951,22945,23438,23442,23592,23594,23693,23695,23688,23691,23689,23698,23690,23686,23699,23701,24032,24074,24078,24203,24201,24204,24200,24205,24325,24349,24440,24438,24530,24529,24528,24557,24552,24558,24563,24545,24548,24547,24570,24559,24567,24571,24576,24564,25146,25219,25228,25230,25231,25236,25223,25201,25211,25210,25200,25217,25224,25207,25213,25202,25204,25911,26096,26100,26099,26098,26101,26437,26439,26457,26453,26444,26440,26461,26445,26458,26443,27600,27673,27674,27768,27751,27755,27780,27787,27791,27761,27759,27753,27802,27757,27783,27797,27804,27750,27763,27749,27771,27790,28788,28794,29283,29375,29373,29379,29382,29377,29370,29381,29589,29591,29587,29588,29586,30010,30009,30100,30101,30337,31037,32820,32917,32921,32912,32914,32924,33424,33423,33413,33422,33425,33427,33418,33411,33412,35960,36809,36799,37023,37025,37029,37022,37031,37024,38448,38440,38447,38445,20019,20376,20348,20357,20349,20352,20359,20342,20340,20361,20356,20343,20300,20375,20330,20378,20345,20353,20344,20368,20380,20372,20382,20370,20354,20373,20331,20334,20894,20924,20926,21045,21042,21043,21062,21041,21180,21258,21259,21308,21394,21396,21639,21631,21633,21649,21634,21640,21611,21626,21630,21605,21612,21620,21606,21645,21615,21601,21600,21656,21603,21607,21604,22263,22265,22383,22386,22381,22379,22385,22384,22390,22400,22389,22395,22387,22388,22370,22376,22397,22796,22853,22965,22970,22991,22990,22962,22988,22977,22966,22972,22979,22998,22961,22973,22976,22984,22964,22983,23394,23397,23443,23445,23620,23623,23726,23716,23712,23733,23727,23720,23724,23711,23715,23725,23714,23722,23719,23709,23717,23734,23728,23718,24087,24084,24089,24360,24354,24355,24356,24404,24450,24446,24445,24542,24549,24621,24614,24601,24626,24587,24628,24586,24599,24627,24602,24606,24620,24610,24589,24592,24622,24595,24593,24588,24585,24604,25108,25149,25261,25268,25297,25278,25258,25270,25290,25262,25267,25263,25275,25257,25264,25272,25917,26024,26043,26121,26108,26116,26130,26120,26107,26115,26123,26125,26117,26109,26129,26128,26358,26378,26501,26476,26510,26514,26486,26491,26520,26502,26500,26484,26509,26508,26490,26527,26513,26521,26499,26493,26497,26488,26489,26516,27429,27520,27518,27614,27677,27795,27884,27883,27886,27865,27830,27860,27821,27879,27831,27856,27842,27834,27843,27846,27885,27890,27858,27869,27828,27786,27805,27776,27870,27840,27952,27853,27847,27824,27897,27855,27881,27857,28820,28824,28805,28819,28806,28804,28817,28822,28802,28826,28803,29290,29398,29387,29400,29385,29404,29394,29396,29402,29388,29393,29604,29601,29613,29606,29602,29600,29612,29597,29917,29928,30015,30016,30014,30092,30104,30383,30451,30449,30448,30453,30712,30716,30713,30715,30714,30711,31042,31039,31173,31352,31355,31483,31861,31997,32821,32911,32942,32931,32952,32949,32941,33312,33440,33472,33451,33434,33432,33435,33461,33447,33454,33468,33438,33466,33460,33448,33441,33449,33474,33444,33475,33462,33442,34416,34415,34413,34414,35926,36818,36811,36819,36813,36822,36821,36823,37042,37044,37039,37043,37040,38457,38461,38460,38458,38467,20429,20421,20435,20402,20425,20427,20417,20436,20444,20441,20411,20403,20443,20423,20438,20410,20416,20409,20460,21060,21065,21184,21186,21309,21372,21399,21398,21401,21400,21690,21665,21677,21669,21711,21699,33549,21687,21678,21718,21686,21701,21702,21664,21616,21692,21666,21694,21618,21726,21680,22453,22430,22431,22436,22412,22423,22429,22427,22420,22424,22415,22425,22437,22426,22421,22772,22797,22867,23009,23006,23022,23040,23025,23005,23034,23037,23036,23030,23012,23026,23031,23003,23017,23027,23029,23008,23038,23028,23021,23464,23628,23760,23768,23756,23767,23755,23771,23774,23770,23753,23751,23754,23766,23763,23764,23759,23752,23750,23758,23775,23800,24057,24097,24098,24099,24096,24100,24240,24228,24226,24219,24227,24229,24327,24366,24406,24454,24631,24633,24660,24690,24670,24645,24659,24647,24649,24667,24652,24640,24642,24671,24612,24644,24664,24678,24686,25154,25155,25295,25357,25355,25333,25358,25347,25323,25337,25359,25356,25336,25334,25344,25363,25364,25338,25365,25339,25328,25921,25923,26026,26047,26166,26145,26162,26165,26140,26150,26146,26163,26155,26170,26141,26164,26169,26158,26383,26384,26561,26610,26568,26554,26588,26555,26616,26584,26560,26551,26565,26603,26596,26591,26549,26573,26547,26615,26614,26606,26595,26562,26553,26574,26599,26608,26546,26620,26566,26605,26572,26542,26598,26587,26618,26569,26570,26563,26602,26571,27432,27522,27524,27574,27606,27608,27616,27680,27681,27944,27956,27949,27935,27964,27967,27922,27914,27866,27955,27908,27929,27962,27930,27921,27904,27933,27970,27905,27928,27959,27907,27919,27968,27911,27936,27948,27912,27938,27913,27920,28855,28831,28862,28849,28848,28833,28852,28853,28841,29249,29257,29258,29292,29296,29299,29294,29386,29412,29416,29419,29407,29418,29414,29411,29573,29644,29634,29640,29637,29625,29622,29621,29620,29675,29631,29639,29630,29635,29638,29624,29643,29932,29934,29998,30023,30024,30119,30122,30329,30404,30472,30467,30468,30469,30474,30455,30459,30458,30695,30696,30726,30737,30738,30725,30736,30735,30734,30729,30723,30739,31050,31052,31051,31045,31044,31189,31181,31183,31190,31182,31360,31358,31441,31488,31489,31866,31864,31865,31871,31872,31873,32003,32008,32001,32600,32657,32653,32702,32775,32782,32783,32788,32823,32984,32967,32992,32977,32968,32962,32976,32965,32995,32985,32988,32970,32981,32969,32975,32983,32998,32973,33279,33313,33428,33497,33534,33529,33543,33512,33536,33493,33594,33515,33494,33524,33516,33505,33522,33525,33548,33531,33526,33520,33514,33508,33504,33530,33523,33517,34423,34420,34428,34419,34881,34894,34919,34922,34921,35283,35332,35335,36210,36835,36833,36846,36832,37105,37053,37055,37077,37061,37054,37063,37067,37064,37332,37331,38484,38479,38481,38483,38474,38478,20510,20485,20487,20499,20514,20528,20507,20469,20468,20531,20535,20524,20470,20471,20503,20508,20512,20519,20533,20527,20529,20494,20826,20884,20883,20938,20932,20933,20936,20942,21089,21082,21074,21086,21087,21077,21090,21197,21262,21406,21798,21730,21783,21778,21735,21747,21732,21786,21759,21764,21768,21739,21777,21765,21745,21770,21755,21751,21752,21728,21774,21763,21771,22273,22274,22476,22578,22485,22482,22458,22470,22461,22460,22456,22454,22463,22471,22480,22457,22465,22798,22858,23065,23062,23085,23086,23061,23055,23063,23050,23070,23091,23404,23463,23469,23468,23555,23638,23636,23788,23807,23790,23793,23799,23808,23801,24105,24104,24232,24238,24234,24236,24371,24368,24423,24669,24666,24679,24641,24738,24712,24704,24722,24705,24733,24707,24725,24731,24727,24711,24732,24718,25113,25158,25330,25360,25430,25388,25412,25413,25398,25411,25572,25401,25419,25418,25404,25385,25409,25396,25432,25428,25433,25389,25415,25395,25434,25425,25400,25431,25408,25416,25930,25926,26054,26051,26052,26050,26186,26207,26183,26193,26386,26387,26655,26650,26697,26674,26675,26683,26699,26703,26646,26673,26652,26677,26667,26669,26671,26702,26692,26676,26653,26642,26644,26662,26664,26670,26701,26682,26661,26656,27436,27439,27437,27441,27444,27501,32898,27528,27622,27620,27624,27619,27618,27623,27685,28026,28003,28004,28022,27917,28001,28050,27992,28002,28013,28015,28049,28045,28143,28031,28038,27998,28007,28000,28055,28016,28028,27999,28034,28056,27951,28008,28043,28030,28032,28036,27926,28035,28027,28029,28021,28048,28892,28883,28881,28893,28875,32569,28898,28887,28882,28894,28896,28884,28877,28869,28870,28871,28890,28878,28897,29250,29304,29303,29302,29440,29434,29428,29438,29430,29427,29435,29441,29651,29657,29669,29654,29628,29671,29667,29673,29660,29650,29659,29652,29661,29658,29655,29656,29672,29918,29919,29940,29941,29985,30043,30047,30128,30145,30139,30148,30144,30143,30134,30138,30346,30409,30493,30491,30480,30483,30482,30499,30481,30485,30489,30490,30498,30503,30755,30764,30754,30773,30767,30760,30766,30763,30753,30761,30771,30762,30769,31060,31067,31055,31068,31059,31058,31057,31211,31212,31200,31214,31213,31210,31196,31198,31197,31366,31369,31365,31371,31372,31370,31367,31448,31504,31492,31507,31493,31503,31496,31498,31502,31497,31506,31876,31889,31882,31884,31880,31885,31877,32030,32029,32017,32014,32024,32022,32019,32031,32018,32015,32012,32604,32609,32606,32608,32605,32603,32662,32658,32707,32706,32704,32790,32830,32825,33018,33010,33017,33013,33025,33019,33024,33281,33327,33317,33587,33581,33604,33561,33617,33573,33622,33599,33601,33574,33564,33570,33602,33614,33563,33578,33544,33596,33613,33558,33572,33568,33591,33583,33577,33607,33605,33612,33619,33566,33580,33611,33575,33608,34387,34386,34466,34472,34454,34445,34449,34462,34439,34455,34438,34443,34458,34437,34469,34457,34465,34471,34453,34456,34446,34461,34448,34452,34883,34884,34925,34933,34934,34930,34944,34929,34943,34927,34947,34942,34932,34940,35346,35911,35927,35963,36004,36003,36214,36216,36277,36279,36278,36561,36563,36862,36853,36866,36863,36859,36868,36860,36854,37078,37088,37081,37082,37091,37087,37093,37080,37083,37079,37084,37092,37200,37198,37199,37333,37346,37338,38492,38495,38588,39139,39647,39727,20095,20592,20586,20577,20574,20576,20563,20555,20573,20594,20552,20557,20545,20571,20554,20578,20501,20549,20575,20585,20587,20579,20580,20550,20544,20590,20595,20567,20561,20944,21099,21101,21100,21102,21206,21203,21293,21404,21877,21878,21820,21837,21840,21812,21802,21841,21858,21814,21813,21808,21842,21829,21772,21810,21861,21838,21817,21832,21805,21819,21824,21835,22282,22279,22523,22548,22498,22518,22492,22516,22528,22509,22525,22536,22520,22539,22515,22479,22535,22510,22499,22514,22501,22508,22497,22542,22524,22544,22503,22529,22540,22513,22505,22512,22541,22532,22876,23136,23128,23125,23143,23134,23096,23093,23149,23120,23135,23141,23148,23123,23140,23127,23107,23133,23122,23108,23131,23112,23182,23102,23117,23097,23116,23152,23145,23111,23121,23126,23106,23132,23410,23406,23489,23488,23641,23838,23819,23837,23834,23840,23820,23848,23821,23846,23845,23823,23856,23826,23843,23839,23854,24126,24116,24241,24244,24249,24242,24243,24374,24376,24475,24470,24479,24714,24720,24710,24766,24752,24762,24787,24788,24783,24804,24793,24797,24776,24753,24795,24759,24778,24767,24771,24781,24768,25394,25445,25482,25474,25469,25533,25502,25517,25501,25495,25515,25486,25455,25479,25488,25454,25519,25461,25500,25453,25518,25468,25508,25403,25503,25464,25477,25473,25489,25485,25456,25939,26061,26213,26209,26203,26201,26204,26210,26392,26745,26759,26768,26780,26733,26734,26798,26795,26966,26735,26787,26796,26793,26741,26740,26802,26767,26743,26770,26748,26731,26738,26794,26752,26737,26750,26779,26774,26763,26784,26761,26788,26744,26747,26769,26764,26762,26749,27446,27443,27447,27448,27537,27535,27533,27534,27532,27690,28096,28075,28084,28083,28276,28076,28137,28130,28087,28150,28116,28160,28104,28128,28127,28118,28094,28133,28124,28125,28123,28148,28106,28093,28141,28144,28090,28117,28098,28111,28105,28112,28146,28115,28157,28119,28109,28131,28091,28922,28941,28919,28951,28916,28940,28912,28932,28915,28944,28924,28927,28934,28947,28928,28920,28918,28939,28930,28942,29310,29307,29308,29311,29469,29463,29447,29457,29464,29450,29448,29439,29455,29470,29576,29686,29688,29685,29700,29697,29693,29703,29696,29690,29692,29695,29708,29707,29684,29704,30052,30051,30158,30162,30159,30155,30156,30161,30160,30351,30345,30419,30521,30511,30509,30513,30514,30516,30515,30525,30501,30523,30517,30792,30802,30793,30797,30794,30796,30758,30789,30800,31076,31079,31081,31082,31075,31083,31073,31163,31226,31224,31222,31223,31375,31380,31376,31541,31559,31540,31525,31536,31522,31524,31539,31512,31530,31517,31537,31531,31533,31535,31538,31544,31514,31523,31892,31896,31894,31907,32053,32061,32056,32054,32058,32069,32044,32041,32065,32071,32062,32063,32074,32059,32040,32611,32661,32668,32669,32667,32714,32715,32717,32720,32721,32711,32719,32713,32799,32798,32795,32839,32835,32840,33048,33061,33049,33051,33069,33055,33068,33054,33057,33045,33063,33053,33058,33297,33336,33331,33338,33332,33330,33396,33680,33699,33704,33677,33658,33651,33700,33652,33679,33665,33685,33689,33653,33684,33705,33661,33667,33676,33693,33691,33706,33675,33662,33701,33711,33672,33687,33712,33663,33702,33671,33710,33654,33690,34393,34390,34495,34487,34498,34497,34501,34490,34480,34504,34489,34483,34488,34508,34484,34491,34492,34499,34493,34494,34898,34953,34965,34984,34978,34986,34970,34961,34977,34975,34968,34983,34969,34971,34967,34980,34988,34956,34963,34958,35202,35286,35289,35285,35376,35367,35372,35358,35897,35899,35932,35933,35965,36005,36221,36219,36217,36284,36290,36281,36287,36289,36568,36574,36573,36572,36567,36576,36577,36900,36875,36881,36892,36876,36897,37103,37098,37104,37108,37106,37107,37076,37099,37100,37097,37206,37208,37210,37203,37205,37356,37364,37361,37363,37368,37348,37369,37354,37355,37367,37352,37358,38266,38278,38280,38524,38509,38507,38513,38511,38591,38762,38916,39141,39319,20635,20629,20628,20638,20619,20643,20611,20620,20622,20637,20584,20636,20626,20610,20615,20831,20948,21266,21265,21412,21415,21905,21928,21925,21933,21879,22085,21922,21907,21896,21903,21941,21889,21923,21906,21924,21885,21900,21926,21887,21909,21921,21902,22284,22569,22583,22553,22558,22567,22563,22568,22517,22600,22565,22556,22555,22579,22591,22582,22574,22585,22584,22573,22572,22587,22881,23215,23188,23199,23162,23202,23198,23160,23206,23164,23205,23212,23189,23214,23095,23172,23178,23191,23171,23179,23209,23163,23165,23180,23196,23183,23187,23197,23530,23501,23499,23508,23505,23498,23502,23564,23600,23863,23875,23915,23873,23883,23871,23861,23889,23886,23893,23859,23866,23890,23869,23857,23897,23874,23865,23881,23864,23868,23858,23862,23872,23877,24132,24129,24408,24486,24485,24491,24777,24761,24780,24802,24782,24772,24852,24818,24842,24854,24837,24821,24851,24824,24828,24830,24769,24835,24856,24861,24848,24831,24836,24843,25162,25492,25521,25520,25550,25573,25576,25583,25539,25757,25587,25546,25568,25590,25557,25586,25589,25697,25567,25534,25565,25564,25540,25560,25555,25538,25543,25548,25547,25544,25584,25559,25561,25906,25959,25962,25956,25948,25960,25957,25996,26013,26014,26030,26064,26066,26236,26220,26235,26240,26225,26233,26218,26226,26369,26892,26835,26884,26844,26922,26860,26858,26865,26895,26838,26871,26859,26852,26870,26899,26896,26867,26849,26887,26828,26888,26992,26804,26897,26863,26822,26900,26872,26832,26877,26876,26856,26891,26890,26903,26830,26824,26845,26846,26854,26868,26833,26886,26836,26857,26901,26917,26823,27449,27451,27455,27452,27540,27543,27545,27541,27581,27632,27634,27635,27696,28156,28230,28231,28191,28233,28296,28220,28221,28229,28258,28203,28223,28225,28253,28275,28188,28211,28235,28224,28241,28219,28163,28206,28254,28264,28252,28257,28209,28200,28256,28273,28267,28217,28194,28208,28243,28261,28199,28280,28260,28279,28245,28281,28242,28262,28213,28214,28250,28960,28958,28975,28923,28974,28977,28963,28965,28962,28978,28959,28968,28986,28955,29259,29274,29320,29321,29318,29317,29323,29458,29451,29488,29474,29489,29491,29479,29490,29485,29478,29475,29493,29452,29742,29740,29744,29739,29718,29722,29729,29741,29745,29732,29731,29725,29737,29728,29746,29947,29999,30063,30060,30183,30170,30177,30182,30173,30175,30180,30167,30357,30354,30426,30534,30535,30532,30541,30533,30538,30542,30539,30540,30686,30700,30816,30820,30821,30812,30829,30833,30826,30830,30832,30825,30824,30814,30818,31092,31091,31090,31088,31234,31242,31235,31244,31236,31385,31462,31460,31562,31547,31556,31560,31564,31566,31552,31576,31557,31906,31902,31912,31905,32088,32111,32099,32083,32086,32103,32106,32079,32109,32092,32107,32082,32084,32105,32081,32095,32078,32574,32575,32613,32614,32674,32672,32673,32727,32849,32847,32848,33022,32980,33091,33098,33106,33103,33095,33085,33101,33082,33254,33262,33271,33272,33273,33284,33340,33341,33343,33397,33595,33743,33785,33827,33728,33768,33810,33767,33764,33788,33782,33808,33734,33736,33771,33763,33727,33793,33757,33765,33752,33791,33761,33739,33742,33750,33781,33737,33801,33807,33758,33809,33798,33730,33779,33749,33786,33735,33745,33770,33811,33731,33772,33774,33732,33787,33751,33762,33819,33755,33790,34520,34530,34534,34515,34531,34522,34538,34525,34539,34524,34540,34537,34519,34536,34513,34888,34902,34901,35002,35031,35001,35000,35008,35006,34998,35004,34999,35005,34994,35073,35017,35221,35224,35223,35293,35290,35291,35406,35405,35385,35417,35392,35415,35416,35396,35397,35410,35400,35409,35402,35404,35407,35935,35969,35968,36026,36030,36016,36025,36021,36228,36224,36233,36312,36307,36301,36295,36310,36316,36303,36309,36313,36296,36311,36293,36591,36599,36602,36601,36582,36590,36581,36597,36583,36584,36598,36587,36593,36588,36596,36585,36909,36916,36911,37126,37164,37124,37119,37116,37128,37113,37115,37121,37120,37127,37125,37123,37217,37220,37215,37218,37216,37377,37386,37413,37379,37402,37414,37391,37388,37376,37394,37375,37373,37382,37380,37415,37378,37404,37412,37401,37399,37381,37398,38267,38285,38284,38288,38535,38526,38536,38537,38531,38528,38594,38600,38595,38641,38640,38764,38768,38766,38919,39081,39147,40166,40697,20099,20100,20150,20669,20671,20678,20654,20676,20682,20660,20680,20674,20656,20673,20666,20657,20683,20681,20662,20664,20951,21114,21112,21115,21116,21955,21979,21964,21968,21963,21962,21981,21952,21972,21956,21993,21951,21970,21901,21967,21973,21986,21974,21960,22002,21965,21977,21954,22292,22611,22632,22628,22607,22605,22601,22639,22613,22606,22621,22617,22629,22619,22589,22627,22641,22780,23239,23236,23243,23226,23224,23217,23221,23216,23231,23240,23227,23238,23223,23232,23242,23220,23222,23245,23225,23184,23510,23512,23513,23583,23603,23921,23907,23882,23909,23922,23916,23902,23912,23911,23906,24048,24143,24142,24138,24141,24139,24261,24268,24262,24267,24263,24384,24495,24493,24823,24905,24906,24875,24901,24886,24882,24878,24902,24879,24911,24873,24896,25120,37224,25123,25125,25124,25541,25585,25579,25616,25618,25609,25632,25636,25651,25667,25631,25621,25624,25657,25655,25634,25635,25612,25638,25648,25640,25665,25653,25647,25610,25626,25664,25637,25639,25611,25575,25627,25646,25633,25614,25967,26002,26067,26246,26252,26261,26256,26251,26250,26265,26260,26232,26400,26982,26975,26936,26958,26978,26993,26943,26949,26986,26937,26946,26967,26969,27002,26952,26953,26933,26988,26931,26941,26981,26864,27000,26932,26985,26944,26991,26948,26998,26968,26945,26996,26956,26939,26955,26935,26972,26959,26961,26930,26962,26927,27003,26940,27462,27461,27459,27458,27464,27457,27547,64013,27643,27644,27641,27639,27640,28315,28374,28360,28303,28352,28319,28307,28308,28320,28337,28345,28358,28370,28349,28353,28318,28361,28343,28336,28365,28326,28367,28338,28350,28355,28380,28376,28313,28306,28302,28301,28324,28321,28351,28339,28368,28362,28311,28334,28323,28999,29012,29010,29027,29024,28993,29021,29026,29042,29048,29034,29025,28994,29016,28995,29003,29040,29023,29008,29011,28996,29005,29018,29263,29325,29324,29329,29328,29326,29500,29506,29499,29498,29504,29514,29513,29764,29770,29771,29778,29777,29783,29760,29775,29776,29774,29762,29766,29773,29780,29921,29951,29950,29949,29981,30073,30071,27011,30191,30223,30211,30199,30206,30204,30201,30200,30224,30203,30198,30189,30197,30205,30361,30389,30429,30549,30559,30560,30546,30550,30554,30569,30567,30548,30553,30573,30688,30855,30874,30868,30863,30852,30869,30853,30854,30881,30851,30841,30873,30848,30870,30843,31100,31106,31101,31097,31249,31256,31257,31250,31255,31253,31266,31251,31259,31248,31395,31394,31390,31467,31590,31588,31597,31604,31593,31602,31589,31603,31601,31600,31585,31608,31606,31587,31922,31924,31919,32136,32134,32128,32141,32127,32133,32122,32142,32123,32131,32124,32140,32148,32132,32125,32146,32621,32619,32615,32616,32620,32678,32677,32679,32731,32732,32801,33124,33120,33143,33116,33129,33115,33122,33138,26401,33118,33142,33127,33135,33092,33121,33309,33353,33348,33344,33346,33349,34033,33855,33878,33910,33913,33935,33933,33893,33873,33856,33926,33895,33840,33869,33917,33882,33881,33908,33907,33885,34055,33886,33847,33850,33844,33914,33859,33912,33842,33861,33833,33753,33867,33839,33858,33837,33887,33904,33849,33870,33868,33874,33903,33989,33934,33851,33863,33846,33843,33896,33918,33860,33835,33888,33876,33902,33872,34571,34564,34551,34572,34554,34518,34549,34637,34552,34574,34569,34561,34550,34573,34565,35030,35019,35021,35022,35038,35035,35034,35020,35024,35205,35227,35295,35301,35300,35297,35296,35298,35292,35302,35446,35462,35455,35425,35391,35447,35458,35460,35445,35459,35457,35444,35450,35900,35915,35914,35941,35940,35942,35974,35972,35973,36044,36200,36201,36241,36236,36238,36239,36237,36243,36244,36240,36242,36336,36320,36332,36337,36334,36304,36329,36323,36322,36327,36338,36331,36340,36614,36607,36609,36608,36613,36615,36616,36610,36619,36946,36927,36932,36937,36925,37136,37133,37135,37137,37142,37140,37131,37134,37230,37231,37448,37458,37424,37434,37478,37427,37477,37470,37507,37422,37450,37446,37485,37484,37455,37472,37479,37487,37430,37473,37488,37425,37460,37475,37456,37490,37454,37459,37452,37462,37426,38303,38300,38302,38299,38546,38547,38545,38551,38606,38650,38653,38648,38645,38771,38775,38776,38770,38927,38925,38926,39084,39158,39161,39343,39346,39344,39349,39597,39595,39771,40170,40173,40167,40576,40701,20710,20692,20695,20712,20723,20699,20714,20701,20708,20691,20716,20720,20719,20707,20704,20952,21120,21121,21225,21227,21296,21420,22055,22037,22028,22034,22012,22031,22044,22017,22035,22018,22010,22045,22020,22015,22009,22665,22652,22672,22680,22662,22657,22655,22644,22667,22650,22663,22673,22670,22646,22658,22664,22651,22676,22671,22782,22891,23260,23278,23269,23253,23274,23258,23277,23275,23283,23266,23264,23259,23276,23262,23261,23257,23272,23263,23415,23520,23523,23651,23938,23936,23933,23942,23930,23937,23927,23946,23945,23944,23934,23932,23949,23929,23935,24152,24153,24147,24280,24273,24279,24270,24284,24277,24281,24274,24276,24388,24387,24431,24502,24876,24872,24897,24926,24945,24947,24914,24915,24946,24940,24960,24948,24916,24954,24923,24933,24891,24938,24929,24918,25129,25127,25131,25643,25677,25691,25693,25716,25718,25714,25715,25725,25717,25702,25766,25678,25730,25694,25692,25675,25683,25696,25680,25727,25663,25708,25707,25689,25701,25719,25971,26016,26273,26272,26271,26373,26372,26402,27057,27062,27081,27040,27086,27030,27056,27052,27068,27025,27033,27022,27047,27021,27049,27070,27055,27071,27076,27069,27044,27092,27065,27082,27034,27087,27059,27027,27050,27041,27038,27097,27031,27024,27074,27061,27045,27078,27466,27469,27467,27550,27551,27552,27587,27588,27646,28366,28405,28401,28419,28453,28408,28471,28411,28462,28425,28494,28441,28442,28455,28440,28475,28434,28397,28426,28470,28531,28409,28398,28461,28480,28464,28476,28469,28395,28423,28430,28483,28421,28413,28406,28473,28444,28412,28474,28447,28429,28446,28424,28449,29063,29072,29065,29056,29061,29058,29071,29051,29062,29057,29079,29252,29267,29335,29333,29331,29507,29517,29521,29516,29794,29811,29809,29813,29810,29799,29806,29952,29954,29955,30077,30096,30230,30216,30220,30229,30225,30218,30228,30392,30593,30588,30597,30594,30574,30592,30575,30590,30595,30898,30890,30900,30893,30888,30846,30891,30878,30885,30880,30892,30882,30884,31128,31114,31115,31126,31125,31124,31123,31127,31112,31122,31120,31275,31306,31280,31279,31272,31270,31400,31403,31404,31470,31624,31644,31626,31633,31632,31638,31629,31628,31643,31630,31621,31640,21124,31641,31652,31618,31931,31935,31932,31930,32167,32183,32194,32163,32170,32193,32192,32197,32157,32206,32196,32198,32203,32204,32175,32185,32150,32188,32159,32166,32174,32169,32161,32201,32627,32738,32739,32741,32734,32804,32861,32860,33161,33158,33155,33159,33165,33164,33163,33301,33943,33956,33953,33951,33978,33998,33986,33964,33966,33963,33977,33972,33985,33997,33962,33946,33969,34000,33949,33959,33979,33954,33940,33991,33996,33947,33961,33967,33960,34006,33944,33974,33999,33952,34007,34004,34002,34011,33968,33937,34401,34611,34595,34600,34667,34624,34606,34590,34593,34585,34587,34627,34604,34625,34622,34630,34592,34610,34602,34605,34620,34578,34618,34609,34613,34626,34598,34599,34616,34596,34586,34608,34577,35063,35047,35057,35058,35066,35070,35054,35068,35062,35067,35056,35052,35051,35229,35233,35231,35230,35305,35307,35304,35499,35481,35467,35474,35471,35478,35901,35944,35945,36053,36047,36055,36246,36361,36354,36351,36365,36349,36362,36355,36359,36358,36357,36350,36352,36356,36624,36625,36622,36621,37155,37148,37152,37154,37151,37149,37146,37156,37153,37147,37242,37234,37241,37235,37541,37540,37494,37531,37498,37536,37524,37546,37517,37542,37530,37547,37497,37527,37503,37539,37614,37518,37506,37525,37538,37501,37512,37537,37514,37510,37516,37529,37543,37502,37511,37545,37533,37515,37421,38558,38561,38655,38744,38781,38778,38782,38787,38784,38786,38779,38788,38785,38783,38862,38861,38934,39085,39086,39170,39168,39175,39325,39324,39363,39353,39355,39354,39362,39357,39367,39601,39651,39655,39742,39743,39776,39777,39775,40177,40178,40181,40615,20735,20739,20784,20728,20742,20743,20726,20734,20747,20748,20733,20746,21131,21132,21233,21231,22088,22082,22092,22069,22081,22090,22089,22086,22104,22106,22080,22067,22077,22060,22078,22072,22058,22074,22298,22699,22685,22705,22688,22691,22703,22700,22693,22689,22783,23295,23284,23293,23287,23286,23299,23288,23298,23289,23297,23303,23301,23311,23655,23961,23959,23967,23954,23970,23955,23957,23968,23964,23969,23962,23966,24169,24157,24160,24156,32243,24283,24286,24289,24393,24498,24971,24963,24953,25009,25008,24994,24969,24987,24979,25007,25005,24991,24978,25002,24993,24973,24934,25011,25133,25710,25712,25750,25760,25733,25751,25756,25743,25739,25738,25740,25763,25759,25704,25777,25752,25974,25978,25977,25979,26034,26035,26293,26288,26281,26290,26295,26282,26287,27136,27142,27159,27109,27128,27157,27121,27108,27168,27135,27116,27106,27163,27165,27134,27175,27122,27118,27156,27127,27111,27200,27144,27110,27131,27149,27132,27115,27145,27140,27160,27173,27151,27126,27174,27143,27124,27158,27473,27557,27555,27554,27558,27649,27648,27647,27650,28481,28454,28542,28551,28614,28562,28557,28553,28556,28514,28495,28549,28506,28566,28534,28524,28546,28501,28530,28498,28496,28503,28564,28563,28509,28416,28513,28523,28541,28519,28560,28499,28555,28521,28543,28565,28515,28535,28522,28539,29106,29103,29083,29104,29088,29082,29097,29109,29085,29093,29086,29092,29089,29098,29084,29095,29107,29336,29338,29528,29522,29534,29535,29536,29533,29531,29537,29530,29529,29538,29831,29833,29834,29830,29825,29821,29829,29832,29820,29817,29960,29959,30078,30245,30238,30233,30237,30236,30243,30234,30248,30235,30364,30365,30366,30363,30605,30607,30601,30600,30925,30907,30927,30924,30929,30926,30932,30920,30915,30916,30921,31130,31137,31136,31132,31138,31131,27510,31289,31410,31412,31411,31671,31691,31678,31660,31694,31663,31673,31690,31669,31941,31944,31948,31947,32247,32219,32234,32231,32215,32225,32259,32250,32230,32246,32241,32240,32238,32223,32630,32684,32688,32685,32749,32747,32746,32748,32742,32744,32868,32871,33187,33183,33182,33173,33186,33177,33175,33302,33359,33363,33362,33360,33358,33361,34084,34107,34063,34048,34089,34062,34057,34061,34079,34058,34087,34076,34043,34091,34042,34056,34060,34036,34090,34034,34069,34039,34027,34035,34044,34066,34026,34025,34070,34046,34088,34077,34094,34050,34045,34078,34038,34097,34086,34023,34024,34032,34031,34041,34072,34080,34096,34059,34073,34095,34402,34646,34659,34660,34679,34785,34675,34648,34644,34651,34642,34657,34650,34641,34654,34669,34666,34640,34638,34655,34653,34671,34668,34682,34670,34652,34661,34639,34683,34677,34658,34663,34665,34906,35077,35084,35092,35083,35095,35096,35097,35078,35094,35089,35086,35081,35234,35236,35235,35309,35312,35308,35535,35526,35512,35539,35537,35540,35541,35515,35543,35518,35520,35525,35544,35523,35514,35517,35545,35902,35917,35983,36069,36063,36057,36072,36058,36061,36071,36256,36252,36257,36251,36384,36387,36389,36388,36398,36373,36379,36374,36369,36377,36390,36391,36372,36370,36376,36371,36380,36375,36378,36652,36644,36632,36634,36640,36643,36630,36631,36979,36976,36975,36967,36971,37167,37163,37161,37162,37170,37158,37166,37253,37254,37258,37249,37250,37252,37248,37584,37571,37572,37568,37593,37558,37583,37617,37599,37592,37609,37591,37597,37580,37615,37570,37608,37578,37576,37582,37606,37581,37589,37577,37600,37598,37607,37585,37587,37557,37601,37574,37556,38268,38316,38315,38318,38320,38564,38562,38611,38661,38664,38658,38746,38794,38798,38792,38864,38863,38942,38941,38950,38953,38952,38944,38939,38951,39090,39176,39162,39185,39188,39190,39191,39189,39388,39373,39375,39379,39380,39374,39369,39382,39384,39371,39383,39372,39603,39660,39659,39667,39666,39665,39750,39747,39783,39796,39793,39782,39798,39797,39792,39784,39780,39788,40188,40186,40189,40191,40183,40199,40192,40185,40187,40200,40197,40196,40579,40659,40719,40720,20764,20755,20759,20762,20753,20958,21300,21473,22128,22112,22126,22131,22118,22115,22125,22130,22110,22135,22300,22299,22728,22717,22729,22719,22714,22722,22716,22726,23319,23321,23323,23329,23316,23315,23312,23318,23336,23322,23328,23326,23535,23980,23985,23977,23975,23989,23984,23982,23978,23976,23986,23981,23983,23988,24167,24168,24166,24175,24297,24295,24294,24296,24293,24395,24508,24989,25000,24982,25029,25012,25030,25025,25036,25018,25023,25016,24972,25815,25814,25808,25807,25801,25789,25737,25795,25819,25843,25817,25907,25983,25980,26018,26312,26302,26304,26314,26315,26319,26301,26299,26298,26316,26403,27188,27238,27209,27239,27186,27240,27198,27229,27245,27254,27227,27217,27176,27226,27195,27199,27201,27242,27236,27216,27215,27220,27247,27241,27232,27196,27230,27222,27221,27213,27214,27206,27477,27476,27478,27559,27562,27563,27592,27591,27652,27651,27654,28589,28619,28579,28615,28604,28622,28616,28510,28612,28605,28574,28618,28584,28676,28581,28590,28602,28588,28586,28623,28607,28600,28578,28617,28587,28621,28591,28594,28592,29125,29122,29119,29112,29142,29120,29121,29131,29140,29130,29127,29135,29117,29144,29116,29126,29146,29147,29341,29342,29545,29542,29543,29548,29541,29547,29546,29823,29850,29856,29844,29842,29845,29857,29963,30080,30255,30253,30257,30269,30259,30268,30261,30258,30256,30395,30438,30618,30621,30625,30620,30619,30626,30627,30613,30617,30615,30941,30953,30949,30954,30942,30947,30939,30945,30946,30957,30943,30944,31140,31300,31304,31303,31414,31416,31413,31409,31415,31710,31715,31719,31709,31701,31717,31706,31720,31737,31700,31722,31714,31708,31723,31704,31711,31954,31956,31959,31952,31953,32274,32289,32279,32268,32287,32288,32275,32270,32284,32277,32282,32290,32267,32271,32278,32269,32276,32293,32292,32579,32635,32636,32634,32689,32751,32810,32809,32876,33201,33190,33198,33209,33205,33195,33200,33196,33204,33202,33207,33191,33266,33365,33366,33367,34134,34117,34155,34125,34131,34145,34136,34112,34118,34148,34113,34146,34116,34129,34119,34147,34110,34139,34161,34126,34158,34165,34133,34151,34144,34188,34150,34141,34132,34149,34156,34403,34405,34404,34715,34703,34711,34707,34706,34696,34689,34710,34712,34681,34695,34723,34693,34704,34705,34717,34692,34708,34716,34714,34697,35102,35110,35120,35117,35118,35111,35121,35106,35113,35107,35119,35116,35103,35313,35552,35554,35570,35572,35573,35549,35604,35556,35551,35568,35528,35550,35553,35560,35583,35567,35579,35985,35986,35984,36085,36078,36081,36080,36083,36204,36206,36261,36263,36403,36414,36408,36416,36421,36406,36412,36413,36417,36400,36415,36541,36662,36654,36661,36658,36665,36663,36660,36982,36985,36987,36998,37114,37171,37173,37174,37267,37264,37265,37261,37263,37671,37662,37640,37663,37638,37647,37754,37688,37692,37659,37667,37650,37633,37702,37677,37646,37645,37579,37661,37626,37669,37651,37625,37623,37684,37634,37668,37631,37673,37689,37685,37674,37652,37644,37643,37630,37641,37632,37627,37654,38332,38349,38334,38329,38330,38326,38335,38325,38333,38569,38612,38667,38674,38672,38809,38807,38804,38896,38904,38965,38959,38962,39204,39199,39207,39209,39326,39406,39404,39397,39396,39408,39395,39402,39401,39399,39609,39615,39604,39611,39670,39674,39673,39671,39731,39808,39813,39815,39804,39806,39803,39810,39827,39826,39824,39802,39829,39805,39816,40229,40215,40224,40222,40212,40233,40221,40216,40226,40208,40217,40223,40584,40582,40583,40622,40621,40661,40662,40698,40722,40765,20774,20773,20770,20772,20768,20777,21236,22163,22156,22157,22150,22148,22147,22142,22146,22143,22145,22742,22740,22735,22738,23341,23333,23346,23331,23340,23335,23334,23343,23342,23419,23537,23538,23991,24172,24170,24510,24507,25027,25013,25020,25063,25056,25061,25060,25064,25054,25839,25833,25827,25835,25828,25832,25985,25984,26038,26074,26322,27277,27286,27265,27301,27273,27295,27291,27297,27294,27271,27283,27278,27285,27267,27304,27300,27281,27263,27302,27290,27269,27276,27282,27483,27565,27657,28620,28585,28660,28628,28643,28636,28653,28647,28646,28638,28658,28637,28642,28648,29153,29169,29160,29170,29156,29168,29154,29555,29550,29551,29847,29874,29867,29840,29866,29869,29873,29861,29871,29968,29969,29970,29967,30084,30275,30280,30281,30279,30372,30441,30645,30635,30642,30647,30646,30644,30641,30632,30704,30963,30973,30978,30971,30972,30962,30981,30969,30974,30980,31147,31144,31324,31323,31318,31320,31316,31322,31422,31424,31425,31749,31759,31730,31744,31743,31739,31758,31732,31755,31731,31746,31753,31747,31745,31736,31741,31750,31728,31729,31760,31754,31976,32301,32316,32322,32307,38984,32312,32298,32329,32320,32327,32297,32332,32304,32315,32310,32324,32314,32581,32639,32638,32637,32756,32754,32812,33211,33220,33228,33226,33221,33223,33212,33257,33371,33370,33372,34179,34176,34191,34215,34197,34208,34187,34211,34171,34212,34202,34206,34167,34172,34185,34209,34170,34168,34135,34190,34198,34182,34189,34201,34205,34177,34210,34178,34184,34181,34169,34166,34200,34192,34207,34408,34750,34730,34733,34757,34736,34732,34745,34741,34748,34734,34761,34755,34754,34764,34743,34735,34756,34762,34740,34742,34751,34744,34749,34782,34738,35125,35123,35132,35134,35137,35154,35127,35138,35245,35247,35246,35314,35315,35614,35608,35606,35601,35589,35595,35618,35599,35602,35605,35591,35597,35592,35590,35612,35603,35610,35919,35952,35954,35953,35951,35989,35988,36089,36207,36430,36429,36435,36432,36428,36423,36675,36672,36997,36990,37176,37274,37282,37275,37273,37279,37281,37277,37280,37793,37763,37807,37732,37718,37703,37756,37720,37724,37750,37705,37712,37713,37728,37741,37775,37708,37738,37753,37719,37717,37714,37711,37745,37751,37755,37729,37726,37731,37735,37760,37710,37721,38343,38336,38345,38339,38341,38327,38574,38576,38572,38688,38687,38680,38685,38681,38810,38817,38812,38814,38813,38869,38868,38897,38977,38980,38986,38985,38981,38979,39205,39211,39212,39210,39219,39218,39215,39213,39217,39216,39320,39331,39329,39426,39418,39412,39415,39417,39416,39414,39419,39421,39422,39420,39427,39614,39678,39677,39681,39676,39752,39834,39848,39838,39835,39846,39841,39845,39844,39814,39842,39840,39855,40243,40257,40295,40246,40238,40239,40241,40248,40240,40261,40258,40259,40254,40247,40256,40253,32757,40237,40586,40585,40589,40624,40648,40666,40699,40703,40740,40739,40738,40788,40864,20785,20781,20782,22168,22172,22167,22170,22173,22169,22896,23356,23657,23658,24000,24173,24174,25048,25055,25069,25070,25073,25066,25072,25067,25046,25065,25855,25860,25853,25848,25857,25859,25852,26004,26075,26330,26331,26328,27333,27321,27325,27361,27334,27322,27318,27319,27335,27316,27309,27486,27593,27659,28679,28684,28685,28673,28677,28692,28686,28671,28672,28667,28710,28668,28663,28682,29185,29183,29177,29187,29181,29558,29880,29888,29877,29889,29886,29878,29883,29890,29972,29971,30300,30308,30297,30288,30291,30295,30298,30374,30397,30444,30658,30650,30975,30988,30995,30996,30985,30992,30994,30993,31149,31148,31327,31772,31785,31769,31776,31775,31789,31773,31782,31784,31778,31781,31792,32348,32336,32342,32355,32344,32354,32351,32337,32352,32343,32339,32693,32691,32759,32760,32885,33233,33234,33232,33375,33374,34228,34246,34240,34243,34242,34227,34229,34237,34247,34244,34239,34251,34254,34248,34245,34225,34230,34258,34340,34232,34231,34238,34409,34791,34790,34786,34779,34795,34794,34789,34783,34803,34788,34772,34780,34771,34797,34776,34787,34724,34775,34777,34817,34804,34792,34781,35155,35147,35151,35148,35142,35152,35153,35145,35626,35623,35619,35635,35632,35637,35655,35631,35644,35646,35633,35621,35639,35622,35638,35630,35620,35643,35645,35642,35906,35957,35993,35992,35991,36094,36100,36098,36096,36444,36450,36448,36439,36438,36446,36453,36455,36443,36442,36449,36445,36457,36436,36678,36679,36680,36683,37160,37178,37179,37182,37288,37285,37287,37295,37290,37813,37772,37778,37815,37787,37789,37769,37799,37774,37802,37790,37798,37781,37768,37785,37791,37773,37809,37777,37810,37796,37800,37812,37795,37797,38354,38355,38353,38579,38615,38618,24002,38623,38616,38621,38691,38690,38693,38828,38830,38824,38827,38820,38826,38818,38821,38871,38873,38870,38872,38906,38992,38993,38994,39096,39233,39228,39226,39439,39435,39433,39437,39428,39441,39434,39429,39431,39430,39616,39644,39688,39684,39685,39721,39733,39754,39756,39755,39879,39878,39875,39871,39873,39861,39864,39891,39862,39876,39865,39869,40284,40275,40271,40266,40283,40267,40281,40278,40268,40279,40274,40276,40287,40280,40282,40590,40588,40671,40705,40704,40726,40741,40747,40746,40745,40744,40780,40789,20788,20789,21142,21239,21428,22187,22189,22182,22183,22186,22188,22746,22749,22747,22802,23357,23358,23359,24003,24176,24511,25083,25863,25872,25869,25865,25868,25870,25988,26078,26077,26334,27367,27360,27340,27345,27353,27339,27359,27356,27344,27371,27343,27341,27358,27488,27568,27660,28697,28711,28704,28694,28715,28705,28706,28707,28713,28695,28708,28700,28714,29196,29194,29191,29186,29189,29349,29350,29348,29347,29345,29899,29893,29879,29891,29974,30304,30665,30666,30660,30705,31005,31003,31009,31004,30999,31006,31152,31335,31336,31795,31804,31801,31788,31803,31980,31978,32374,32373,32376,32368,32375,32367,32378,32370,32372,32360,32587,32586,32643,32646,32695,32765,32766,32888,33239,33237,33380,33377,33379,34283,34289,34285,34265,34273,34280,34266,34263,34284,34290,34296,34264,34271,34275,34268,34257,34288,34278,34287,34270,34274,34816,34810,34819,34806,34807,34825,34828,34827,34822,34812,34824,34815,34826,34818,35170,35162,35163,35159,35169,35164,35160,35165,35161,35208,35255,35254,35318,35664,35656,35658,35648,35667,35670,35668,35659,35669,35665,35650,35666,35671,35907,35959,35958,35994,36102,36103,36105,36268,36266,36269,36267,36461,36472,36467,36458,36463,36475,36546,36690,36689,36687,36688,36691,36788,37184,37183,37296,37293,37854,37831,37839,37826,37850,37840,37881,37868,37836,37849,37801,37862,37834,37844,37870,37859,37845,37828,37838,37824,37842,37863,38269,38362,38363,38625,38697,38699,38700,38696,38694,38835,38839,38838,38877,38878,38879,39004,39001,39005,38999,39103,39101,39099,39102,39240,39239,39235,39334,39335,39450,39445,39461,39453,39460,39451,39458,39456,39463,39459,39454,39452,39444,39618,39691,39690,39694,39692,39735,39914,39915,39904,39902,39908,39910,39906,39920,39892,39895,39916,39900,39897,39909,39893,39905,39898,40311,40321,40330,40324,40328,40305,40320,40312,40326,40331,40332,40317,40299,40308,40309,40304,40297,40325,40307,40315,40322,40303,40313,40319,40327,40296,40596,40593,40640,40700,40749,40768,40769,40781,40790,40791,40792,21303,22194,22197,22195,22755,23365,24006,24007,24302,24303,24512,24513,25081,25879,25878,25877,25875,26079,26344,26339,26340,27379,27376,27370,27368,27385,27377,27374,27375,28732,28725,28719,28727,28724,28721,28738,28728,28735,28730,28729,28736,28731,28723,28737,29203,29204,29352,29565,29564,29882,30379,30378,30398,30445,30668,30670,30671,30669,30706,31013,31011,31015,31016,31012,31017,31154,31342,31340,31341,31479,31817,31816,31818,31815,31813,31982,32379,32382,32385,32384,32698,32767,32889,33243,33241,33291,33384,33385,34338,34303,34305,34302,34331,34304,34294,34308,34313,34309,34316,34301,34841,34832,34833,34839,34835,34838,35171,35174,35257,35319,35680,35690,35677,35688,35683,35685,35687,35693,36270,36486,36488,36484,36697,36694,36695,36693,36696,36698,37005,37187,37185,37303,37301,37298,37299,37899,37907,37883,37920,37903,37908,37886,37909,37904,37928,37913,37901,37877,37888,37879,37895,37902,37910,37906,37882,37897,37880,37898,37887,37884,37900,37878,37905,37894,38366,38368,38367,38702,38703,38841,38843,38909,38910,39008,39010,39011,39007,39105,39106,39248,39246,39257,39244,39243,39251,39474,39476,39473,39468,39466,39478,39465,39470,39480,39469,39623,39626,39622,39696,39698,39697,39947,39944,39927,39941,39954,39928,40000,39943,39950,39942,39959,39956,39945,40351,40345,40356,40349,40338,40344,40336,40347,40352,40340,40348,40362,40343,40353,40346,40354,40360,40350,40355,40383,40361,40342,40358,40359,40601,40603,40602,40677,40676,40679,40678,40752,40750,40795,40800,40798,40797,40793,40849,20794,20793,21144,21143,22211,22205,22206,23368,23367,24011,24015,24305,25085,25883,27394,27388,27395,27384,27392,28739,28740,28746,28744,28745,28741,28742,29213,29210,29209,29566,29975,30314,30672,31021,31025,31023,31828,31827,31986,32394,32391,32392,32395,32390,32397,32589,32699,32816,33245,34328,34346,34342,34335,34339,34332,34329,34343,34350,34337,34336,34345,34334,34341,34857,34845,34843,34848,34852,34844,34859,34890,35181,35177,35182,35179,35322,35705,35704,35653,35706,35707,36112,36116,36271,36494,36492,36702,36699,36701,37190,37188,37189,37305,37951,37947,37942,37929,37949,37948,37936,37945,37930,37943,37932,37952,37937,38373,38372,38371,38709,38714,38847,38881,39012,39113,39110,39104,39256,39254,39481,39485,39494,39492,39490,39489,39482,39487,39629,39701,39703,39704,39702,39738,39762,39979,39965,39964,39980,39971,39976,39977,39972,39969,40375,40374,40380,40385,40391,40394,40399,40382,40389,40387,40379,40373,40398,40377,40378,40364,40392,40369,40365,40396,40371,40397,40370,40570,40604,40683,40686,40685,40731,40728,40730,40753,40782,40805,40804,40850,20153,22214,22213,22219,22897,23371,23372,24021,24017,24306,25889,25888,25894,25890,27403,27400,27401,27661,28757,28758,28759,28754,29214,29215,29353,29567,29912,29909,29913,29911,30317,30381,31029,31156,31344,31345,31831,31836,31833,31835,31834,31988,31985,32401,32591,32647,33246,33387,34356,34357,34355,34348,34354,34358,34860,34856,34854,34858,34853,35185,35263,35262,35323,35710,35716,35714,35718,35717,35711,36117,36501,36500,36506,36498,36496,36502,36503,36704,36706,37191,37964,37968,37962,37963,37967,37959,37957,37960,37961,37958,38719,38883,39018,39017,39115,39252,39259,39502,39507,39508,39500,39503,39496,39498,39497,39506,39504,39632,39705,39723,39739,39766,39765,40006,40008,39999,40004,39993,39987,40001,39996,39991,39988,39986,39997,39990,40411,40402,40414,40410,40395,40400,40412,40401,40415,40425,40409,40408,40406,40437,40405,40413,40630,40688,40757,40755,40754,40770,40811,40853,40866,20797,21145,22760,22759,22898,23373,24024,34863,24399,25089,25091,25092,25897,25893,26006,26347,27409,27410,27407,27594,28763,28762,29218,29570,29569,29571,30320,30676,31847,31846,32405,33388,34362,34368,34361,34364,34353,34363,34366,34864,34866,34862,34867,35190,35188,35187,35326,35724,35726,35723,35720,35909,36121,36504,36708,36707,37308,37986,37973,37981,37975,37982,38852,38853,38912,39510,39513,39710,39711,39712,40018,40024,40016,40010,40013,40011,40021,40025,40012,40014,40443,40439,40431,40419,40427,40440,40420,40438,40417,40430,40422,40434,40432,40418,40428,40436,40435,40424,40429,40642,40656,40690,40691,40710,40732,40760,40759,40758,40771,40783,40817,40816,40814,40815,22227,22221,23374,23661,25901,26349,26350,27411,28767,28769,28765,28768,29219,29915,29925,30677,31032,31159,31158,31850,32407,32649,33389,34371,34872,34871,34869,34891,35732,35733,36510,36511,36512,36509,37310,37309,37314,37995,37992,37993,38629,38726,38723,38727,38855,38885,39518,39637,39769,40035,40039,40038,40034,40030,40032,40450,40446,40455,40451,40454,40453,40448,40449,40457,40447,40445,40452,40608,40734,40774,40820,40821,40822,22228,25902,26040,27416,27417,27415,27418,28770,29222,29354,30680,30681,31033,31849,31851,31990,32410,32408,32411,32409,33248,33249,34374,34375,34376,35193,35194,35196,35195,35327,35736,35737,36517,36516,36515,37998,37997,37999,38001,38003,38729,39026,39263,40040,40046,40045,40459,40461,40464,40463,40466,40465,40609,40693,40713,40775,40824,40827,40826,40825,22302,28774,31855,34876,36274,36518,37315,38004,38008,38006,38005,39520,40052,40051,40049,40053,40468,40467,40694,40714,40868,28776,28773,31991,34410,34878,34877,34879,35742,35996,36521,36553,38731,39027,39028,39116,39265,39339,39524,39526,39527,39716,40469,40471,40776,25095,27422,29223,34380,36520,38018,38016,38017,39529,39528,39726,40473,29225,34379,35743,38019,40057,40631,30325,39531,40058,40477,28777,28778,40612,40830,40777,40856,30849,37561,35023,22715,24658,31911,23290,9556,9574,9559,9568,9580,9571,9562,9577,9565,9554,9572,9557,9566,9578,9569,9560,9575,9563,9555,9573,9558,9567,9579,9570,9561,9576,9564,9553,9552,9581,9582,9584,9583,65517,132423,37595,132575,147397,34124,17077,29679,20917,13897,149826,166372,37700,137691,33518,146632,30780,26436,25311,149811,166314,131744,158643,135941,20395,140525,20488,159017,162436,144896,150193,140563,20521,131966,24484,131968,131911,28379,132127,20605,20737,13434,20750,39020,14147,33814,149924,132231,20832,144308,20842,134143,139516,131813,140592,132494,143923,137603,23426,34685,132531,146585,20914,20920,40244,20937,20943,20945,15580,20947,150182,20915,20962,21314,20973,33741,26942,145197,24443,21003,21030,21052,21173,21079,21140,21177,21189,31765,34114,21216,34317,158483,21253,166622,21833,28377,147328,133460,147436,21299,21316,134114,27851,136998,26651,29653,24650,16042,14540,136936,29149,17570,21357,21364,165547,21374,21375,136598,136723,30694,21395,166555,21408,21419,21422,29607,153458,16217,29596,21441,21445,27721,20041,22526,21465,15019,134031,21472,147435,142755,21494,134263,21523,28793,21803,26199,27995,21613,158547,134516,21853,21647,21668,18342,136973,134877,15796,134477,166332,140952,21831,19693,21551,29719,21894,21929,22021,137431,147514,17746,148533,26291,135348,22071,26317,144010,26276,26285,22093,22095,30961,22257,38791,21502,22272,22255,22253,166758,13859,135759,22342,147877,27758,28811,22338,14001,158846,22502,136214,22531,136276,148323,22566,150517,22620,22698,13665,22752,22748,135740,22779,23551,22339,172368,148088,37843,13729,22815,26790,14019,28249,136766,23076,21843,136850,34053,22985,134478,158849,159018,137180,23001,137211,137138,159142,28017,137256,136917,23033,159301,23211,23139,14054,149929,23159,14088,23190,29797,23251,159649,140628,15749,137489,14130,136888,24195,21200,23414,25992,23420,162318,16388,18525,131588,23509,24928,137780,154060,132517,23539,23453,19728,23557,138052,23571,29646,23572,138405,158504,23625,18653,23685,23785,23791,23947,138745,138807,23824,23832,23878,138916,23738,24023,33532,14381,149761,139337,139635,33415,14390,15298,24110,27274,24181,24186,148668,134355,21414,20151,24272,21416,137073,24073,24308,164994,24313,24315,14496,24316,26686,37915,24333,131521,194708,15070,18606,135994,24378,157832,140240,24408,140401,24419,38845,159342,24434,37696,166454,24487,23990,15711,152144,139114,159992,140904,37334,131742,166441,24625,26245,137335,14691,15815,13881,22416,141236,31089,15936,24734,24740,24755,149890,149903,162387,29860,20705,23200,24932,33828,24898,194726,159442,24961,20980,132694,24967,23466,147383,141407,25043,166813,170333,25040,14642,141696,141505,24611,24924,25886,25483,131352,25285,137072,25301,142861,25452,149983,14871,25656,25592,136078,137212,25744,28554,142902,38932,147596,153373,25825,25829,38011,14950,25658,14935,25933,28438,150056,150051,25989,25965,25951,143486,26037,149824,19255,26065,16600,137257,26080,26083,24543,144384,26136,143863,143864,26180,143780,143781,26187,134773,26215,152038,26227,26228,138813,143921,165364,143816,152339,30661,141559,39332,26370,148380,150049,15147,27130,145346,26462,26471,26466,147917,168173,26583,17641,26658,28240,37436,26625,144358,159136,26717,144495,27105,27147,166623,26995,26819,144845,26881,26880,15666,14849,144956,15232,26540,26977,166474,17148,26934,27032,15265,132041,33635,20624,27129,144985,139562,27205,145155,27293,15347,26545,27336,168348,15373,27421,133411,24798,27445,27508,141261,28341,146139,132021,137560,14144,21537,146266,27617,147196,27612,27703,140427,149745,158545,27738,33318,27769,146876,17605,146877,147876,149772,149760,146633,14053,15595,134450,39811,143865,140433,32655,26679,159013,159137,159211,28054,27996,28284,28420,149887,147589,159346,34099,159604,20935,27804,28189,33838,166689,28207,146991,29779,147330,31180,28239,23185,143435,28664,14093,28573,146992,28410,136343,147517,17749,37872,28484,28508,15694,28532,168304,15675,28575,147780,28627,147601,147797,147513,147440,147380,147775,20959,147798,147799,147776,156125,28747,28798,28839,28801,28876,28885,28886,28895,16644,15848,29108,29078,148087,28971,28997,23176,29002,29038,23708,148325,29007,37730,148161,28972,148570,150055,150050,29114,166888,28861,29198,37954,29205,22801,37955,29220,37697,153093,29230,29248,149876,26813,29269,29271,15957,143428,26637,28477,29314,29482,29483,149539,165931,18669,165892,29480,29486,29647,29610,134202,158254,29641,29769,147938,136935,150052,26147,14021,149943,149901,150011,29687,29717,26883,150054,29753,132547,16087,29788,141485,29792,167602,29767,29668,29814,33721,29804,14128,29812,37873,27180,29826,18771,150156,147807,150137,166799,23366,166915,137374,29896,137608,29966,29929,29982,167641,137803,23511,167596,37765,30029,30026,30055,30062,151426,16132,150803,30094,29789,30110,30132,30210,30252,30289,30287,30319,30326,156661,30352,33263,14328,157969,157966,30369,30373,30391,30412,159647,33890,151709,151933,138780,30494,30502,30528,25775,152096,30552,144044,30639,166244,166248,136897,30708,30729,136054,150034,26826,30895,30919,30931,38565,31022,153056,30935,31028,30897,161292,36792,34948,166699,155779,140828,31110,35072,26882,31104,153687,31133,162617,31036,31145,28202,160038,16040,31174,168205,31188],"euc-kr":[44034,44035,44037,44038,44043,44044,44045,44046,44047,44056,44062,44063,44065,44066,44067,44069,44070,44071,44072,44073,44074,44075,44078,44082,44083,44084,null,null,null,null,null,null,44085,44086,44087,44090,44091,44093,44094,44095,44097,44098,44099,44100,44101,44102,44103,44104,44105,44106,44108,44110,44111,44112,44113,44114,44115,44117,null,null,null,null,null,null,44118,44119,44121,44122,44123,44125,44126,44127,44128,44129,44130,44131,44132,44133,44134,44135,44136,44137,44138,44139,44140,44141,44142,44143,44146,44147,44149,44150,44153,44155,44156,44157,44158,44159,44162,44167,44168,44173,44174,44175,44177,44178,44179,44181,44182,44183,44184,44185,44186,44187,44190,44194,44195,44196,44197,44198,44199,44203,44205,44206,44209,44210,44211,44212,44213,44214,44215,44218,44222,44223,44224,44226,44227,44229,44230,44231,44233,44234,44235,44237,44238,44239,44240,44241,44242,44243,44244,44246,44248,44249,44250,44251,44252,44253,44254,44255,44258,44259,44261,44262,44265,44267,44269,44270,44274,44276,44279,44280,44281,44282,44283,44286,44287,44289,44290,44291,44293,44295,44296,44297,44298,44299,44302,44304,44306,44307,44308,44309,44310,44311,44313,44314,44315,44317,44318,44319,44321,44322,44323,44324,44325,44326,44327,44328,44330,44331,44334,44335,44336,44337,44338,44339,null,null,null,null,null,null,44342,44343,44345,44346,44347,44349,44350,44351,44352,44353,44354,44355,44358,44360,44362,44363,44364,44365,44366,44367,44369,44370,44371,44373,44374,44375,null,null,null,null,null,null,44377,44378,44379,44380,44381,44382,44383,44384,44386,44388,44389,44390,44391,44392,44393,44394,44395,44398,44399,44401,44402,44407,44408,44409,44410,44414,44416,44419,44420,44421,44422,44423,44426,44427,44429,44430,44431,44433,44434,44435,44436,44437,44438,44439,44440,44441,44442,44443,44446,44447,44448,44449,44450,44451,44453,44454,44455,44456,44457,44458,44459,44460,44461,44462,44463,44464,44465,44466,44467,44468,44469,44470,44472,44473,44474,44475,44476,44477,44478,44479,44482,44483,44485,44486,44487,44489,44490,44491,44492,44493,44494,44495,44498,44500,44501,44502,44503,44504,44505,44506,44507,44509,44510,44511,44513,44514,44515,44517,44518,44519,44520,44521,44522,44523,44524,44525,44526,44527,44528,44529,44530,44531,44532,44533,44534,44535,44538,44539,44541,44542,44546,44547,44548,44549,44550,44551,44554,44556,44558,44559,44560,44561,44562,44563,44565,44566,44567,44568,44569,44570,44571,44572,null,null,null,null,null,null,44573,44574,44575,44576,44577,44578,44579,44580,44581,44582,44583,44584,44585,44586,44587,44588,44589,44590,44591,44594,44595,44597,44598,44601,44603,44604,null,null,null,null,null,null,44605,44606,44607,44610,44612,44615,44616,44617,44619,44623,44625,44626,44627,44629,44631,44632,44633,44634,44635,44638,44642,44643,44644,44646,44647,44650,44651,44653,44654,44655,44657,44658,44659,44660,44661,44662,44663,44666,44670,44671,44672,44673,44674,44675,44678,44679,44680,44681,44682,44683,44685,44686,44687,44688,44689,44690,44691,44692,44693,44694,44695,44696,44697,44698,44699,44700,44701,44702,44703,44704,44705,44706,44707,44708,44709,44710,44711,44712,44713,44714,44715,44716,44717,44718,44719,44720,44721,44722,44723,44724,44725,44726,44727,44728,44729,44730,44731,44735,44737,44738,44739,44741,44742,44743,44744,44745,44746,44747,44750,44754,44755,44756,44757,44758,44759,44762,44763,44765,44766,44767,44768,44769,44770,44771,44772,44773,44774,44775,44777,44778,44780,44782,44783,44784,44785,44786,44787,44789,44790,44791,44793,44794,44795,44797,44798,44799,44800,44801,44802,44803,44804,44805,null,null,null,null,null,null,44806,44809,44810,44811,44812,44814,44815,44817,44818,44819,44820,44821,44822,44823,44824,44825,44826,44827,44828,44829,44830,44831,44832,44833,44834,44835,null,null,null,null,null,null,44836,44837,44838,44839,44840,44841,44842,44843,44846,44847,44849,44851,44853,44854,44855,44856,44857,44858,44859,44862,44864,44868,44869,44870,44871,44874,44875,44876,44877,44878,44879,44881,44882,44883,44884,44885,44886,44887,44888,44889,44890,44891,44894,44895,44896,44897,44898,44899,44902,44903,44904,44905,44906,44907,44908,44909,44910,44911,44912,44913,44914,44915,44916,44917,44918,44919,44920,44922,44923,44924,44925,44926,44927,44929,44930,44931,44933,44934,44935,44937,44938,44939,44940,44941,44942,44943,44946,44947,44948,44950,44951,44952,44953,44954,44955,44957,44958,44959,44960,44961,44962,44963,44964,44965,44966,44967,44968,44969,44970,44971,44972,44973,44974,44975,44976,44977,44978,44979,44980,44981,44982,44983,44986,44987,44989,44990,44991,44993,44994,44995,44996,44997,44998,45002,45004,45007,45008,45009,45010,45011,45013,45014,45015,45016,45017,45018,45019,45021,45022,45023,45024,45025,null,null,null,null,null,null,45026,45027,45028,45029,45030,45031,45034,45035,45036,45037,45038,45039,45042,45043,45045,45046,45047,45049,45050,45051,45052,45053,45054,45055,45058,45059,null,null,null,null,null,null,45061,45062,45063,45064,45065,45066,45067,45069,45070,45071,45073,45074,45075,45077,45078,45079,45080,45081,45082,45083,45086,45087,45088,45089,45090,45091,45092,45093,45094,45095,45097,45098,45099,45100,45101,45102,45103,45104,45105,45106,45107,45108,45109,45110,45111,45112,45113,45114,45115,45116,45117,45118,45119,45120,45121,45122,45123,45126,45127,45129,45131,45133,45135,45136,45137,45138,45142,45144,45146,45147,45148,45150,45151,45152,45153,45154,45155,45156,45157,45158,45159,45160,45161,45162,45163,45164,45165,45166,45167,45168,45169,45170,45171,45172,45173,45174,45175,45176,45177,45178,45179,45182,45183,45185,45186,45187,45189,45190,45191,45192,45193,45194,45195,45198,45200,45202,45203,45204,45205,45206,45207,45211,45213,45214,45219,45220,45221,45222,45223,45226,45232,45234,45238,45239,45241,45242,45243,45245,45246,45247,45248,45249,45250,45251,45254,45258,45259,45260,45261,45262,45263,45266,null,null,null,null,null,null,45267,45269,45270,45271,45273,45274,45275,45276,45277,45278,45279,45281,45282,45283,45284,45286,45287,45288,45289,45290,45291,45292,45293,45294,45295,45296,null,null,null,null,null,null,45297,45298,45299,45300,45301,45302,45303,45304,45305,45306,45307,45308,45309,45310,45311,45312,45313,45314,45315,45316,45317,45318,45319,45322,45325,45326,45327,45329,45332,45333,45334,45335,45338,45342,45343,45344,45345,45346,45350,45351,45353,45354,45355,45357,45358,45359,45360,45361,45362,45363,45366,45370,45371,45372,45373,45374,45375,45378,45379,45381,45382,45383,45385,45386,45387,45388,45389,45390,45391,45394,45395,45398,45399,45401,45402,45403,45405,45406,45407,45409,45410,45411,45412,45413,45414,45415,45416,45417,45418,45419,45420,45421,45422,45423,45424,45425,45426,45427,45428,45429,45430,45431,45434,45435,45437,45438,45439,45441,45443,45444,45445,45446,45447,45450,45452,45454,45455,45456,45457,45461,45462,45463,45465,45466,45467,45469,45470,45471,45472,45473,45474,45475,45476,45477,45478,45479,45481,45482,45483,45484,45485,45486,45487,45488,45489,45490,45491,45492,45493,45494,45495,45496,null,null,null,null,null,null,45497,45498,45499,45500,45501,45502,45503,45504,45505,45506,45507,45508,45509,45510,45511,45512,45513,45514,45515,45517,45518,45519,45521,45522,45523,45525,null,null,null,null,null,null,45526,45527,45528,45529,45530,45531,45534,45536,45537,45538,45539,45540,45541,45542,45543,45546,45547,45549,45550,45551,45553,45554,45555,45556,45557,45558,45559,45560,45562,45564,45566,45567,45568,45569,45570,45571,45574,45575,45577,45578,45581,45582,45583,45584,45585,45586,45587,45590,45592,45594,45595,45596,45597,45598,45599,45601,45602,45603,45604,45605,45606,45607,45608,45609,45610,45611,45612,45613,45614,45615,45616,45617,45618,45619,45621,45622,45623,45624,45625,45626,45627,45629,45630,45631,45632,45633,45634,45635,45636,45637,45638,45639,45640,45641,45642,45643,45644,45645,45646,45647,45648,45649,45650,45651,45652,45653,45654,45655,45657,45658,45659,45661,45662,45663,45665,45666,45667,45668,45669,45670,45671,45674,45675,45676,45677,45678,45679,45680,45681,45682,45683,45686,45687,45688,45689,45690,45691,45693,45694,45695,45696,45697,45698,45699,45702,45703,45704,45706,45707,45708,45709,45710,null,null,null,null,null,null,45711,45714,45715,45717,45718,45719,45723,45724,45725,45726,45727,45730,45732,45735,45736,45737,45739,45741,45742,45743,45745,45746,45747,45749,45750,45751,null,null,null,null,null,null,45752,45753,45754,45755,45756,45757,45758,45759,45760,45761,45762,45763,45764,45765,45766,45767,45770,45771,45773,45774,45775,45777,45779,45780,45781,45782,45783,45786,45788,45790,45791,45792,45793,45795,45799,45801,45802,45808,45809,45810,45814,45820,45821,45822,45826,45827,45829,45830,45831,45833,45834,45835,45836,45837,45838,45839,45842,45846,45847,45848,45849,45850,45851,45853,45854,45855,45856,45857,45858,45859,45860,45861,45862,45863,45864,45865,45866,45867,45868,45869,45870,45871,45872,45873,45874,45875,45876,45877,45878,45879,45880,45881,45882,45883,45884,45885,45886,45887,45888,45889,45890,45891,45892,45893,45894,45895,45896,45897,45898,45899,45900,45901,45902,45903,45904,45905,45906,45907,45911,45913,45914,45917,45920,45921,45922,45923,45926,45928,45930,45932,45933,45935,45938,45939,45941,45942,45943,45945,45946,45947,45948,45949,45950,45951,45954,45958,45959,45960,45961,45962,45963,45965,null,null,null,null,null,null,45966,45967,45969,45970,45971,45973,45974,45975,45976,45977,45978,45979,45980,45981,45982,45983,45986,45987,45988,45989,45990,45991,45993,45994,45995,45997,null,null,null,null,null,null,45998,45999,46000,46001,46002,46003,46004,46005,46006,46007,46008,46009,46010,46011,46012,46013,46014,46015,46016,46017,46018,46019,46022,46023,46025,46026,46029,46031,46033,46034,46035,46038,46040,46042,46044,46046,46047,46049,46050,46051,46053,46054,46055,46057,46058,46059,46060,46061,46062,46063,46064,46065,46066,46067,46068,46069,46070,46071,46072,46073,46074,46075,46077,46078,46079,46080,46081,46082,46083,46084,46085,46086,46087,46088,46089,46090,46091,46092,46093,46094,46095,46097,46098,46099,46100,46101,46102,46103,46105,46106,46107,46109,46110,46111,46113,46114,46115,46116,46117,46118,46119,46122,46124,46125,46126,46127,46128,46129,46130,46131,46133,46134,46135,46136,46137,46138,46139,46140,46141,46142,46143,46144,46145,46146,46147,46148,46149,46150,46151,46152,46153,46154,46155,46156,46157,46158,46159,46162,46163,46165,46166,46167,46169,46170,46171,46172,46173,46174,46175,46178,46180,46182,null,null,null,null,null,null,46183,46184,46185,46186,46187,46189,46190,46191,46192,46193,46194,46195,46196,46197,46198,46199,46200,46201,46202,46203,46204,46205,46206,46207,46209,46210,null,null,null,null,null,null,46211,46212,46213,46214,46215,46217,46218,46219,46220,46221,46222,46223,46224,46225,46226,46227,46228,46229,46230,46231,46232,46233,46234,46235,46236,46238,46239,46240,46241,46242,46243,46245,46246,46247,46249,46250,46251,46253,46254,46255,46256,46257,46258,46259,46260,46262,46264,46266,46267,46268,46269,46270,46271,46273,46274,46275,46277,46278,46279,46281,46282,46283,46284,46285,46286,46287,46289,46290,46291,46292,46294,46295,46296,46297,46298,46299,46302,46303,46305,46306,46309,46311,46312,46313,46314,46315,46318,46320,46322,46323,46324,46325,46326,46327,46329,46330,46331,46332,46333,46334,46335,46336,46337,46338,46339,46340,46341,46342,46343,46344,46345,46346,46347,46348,46349,46350,46351,46352,46353,46354,46355,46358,46359,46361,46362,46365,46366,46367,46368,46369,46370,46371,46374,46379,46380,46381,46382,46383,46386,46387,46389,46390,46391,46393,46394,46395,46396,46397,46398,46399,46402,46406,null,null,null,null,null,null,46407,46408,46409,46410,46414,46415,46417,46418,46419,46421,46422,46423,46424,46425,46426,46427,46430,46434,46435,46436,46437,46438,46439,46440,46441,46442,null,null,null,null,null,null,46443,46444,46445,46446,46447,46448,46449,46450,46451,46452,46453,46454,46455,46456,46457,46458,46459,46460,46461,46462,46463,46464,46465,46466,46467,46468,46469,46470,46471,46472,46473,46474,46475,46476,46477,46478,46479,46480,46481,46482,46483,46484,46485,46486,46487,46488,46489,46490,46491,46492,46493,46494,46495,46498,46499,46501,46502,46503,46505,46508,46509,46510,46511,46514,46518,46519,46520,46521,46522,46526,46527,46529,46530,46531,46533,46534,46535,46536,46537,46538,46539,46542,46546,46547,46548,46549,46550,46551,46553,46554,46555,46556,46557,46558,46559,46560,46561,46562,46563,46564,46565,46566,46567,46568,46569,46570,46571,46573,46574,46575,46576,46577,46578,46579,46580,46581,46582,46583,46584,46585,46586,46587,46588,46589,46590,46591,46592,46593,46594,46595,46596,46597,46598,46599,46600,46601,46602,46603,46604,46605,46606,46607,46610,46611,46613,46614,46615,46617,46618,46619,46620,46621,null,null,null,null,null,null,46622,46623,46624,46625,46626,46627,46628,46630,46631,46632,46633,46634,46635,46637,46638,46639,46640,46641,46642,46643,46645,46646,46647,46648,46649,46650,null,null,null,null,null,null,46651,46652,46653,46654,46655,46656,46657,46658,46659,46660,46661,46662,46663,46665,46666,46667,46668,46669,46670,46671,46672,46673,46674,46675,46676,46677,46678,46679,46680,46681,46682,46683,46684,46685,46686,46687,46688,46689,46690,46691,46693,46694,46695,46697,46698,46699,46700,46701,46702,46703,46704,46705,46706,46707,46708,46709,46710,46711,46712,46713,46714,46715,46716,46717,46718,46719,46720,46721,46722,46723,46724,46725,46726,46727,46728,46729,46730,46731,46732,46733,46734,46735,46736,46737,46738,46739,46740,46741,46742,46743,46744,46745,46746,46747,46750,46751,46753,46754,46755,46757,46758,46759,46760,46761,46762,46765,46766,46767,46768,46770,46771,46772,46773,46774,46775,46776,46777,46778,46779,46780,46781,46782,46783,46784,46785,46786,46787,46788,46789,46790,46791,46792,46793,46794,46795,46796,46797,46798,46799,46800,46801,46802,46803,46805,46806,46807,46808,46809,46810,46811,46812,46813,null,null,null,null,null,null,46814,46815,46816,46817,46818,46819,46820,46821,46822,46823,46824,46825,46826,46827,46828,46829,46830,46831,46833,46834,46835,46837,46838,46839,46841,46842,null,null,null,null,null,null,46843,46844,46845,46846,46847,46850,46851,46852,46854,46855,46856,46857,46858,46859,46860,46861,46862,46863,46864,46865,46866,46867,46868,46869,46870,46871,46872,46873,46874,46875,46876,46877,46878,46879,46880,46881,46882,46883,46884,46885,46886,46887,46890,46891,46893,46894,46897,46898,46899,46900,46901,46902,46903,46906,46908,46909,46910,46911,46912,46913,46914,46915,46917,46918,46919,46921,46922,46923,46925,46926,46927,46928,46929,46930,46931,46934,46935,46936,46937,46938,46939,46940,46941,46942,46943,46945,46946,46947,46949,46950,46951,46953,46954,46955,46956,46957,46958,46959,46962,46964,46966,46967,46968,46969,46970,46971,46974,46975,46977,46978,46979,46981,46982,46983,46984,46985,46986,46987,46990,46995,46996,46997,47002,47003,47005,47006,47007,47009,47010,47011,47012,47013,47014,47015,47018,47022,47023,47024,47025,47026,47027,47030,47031,47033,47034,47035,47036,47037,47038,47039,47040,47041,null,null,null,null,null,null,47042,47043,47044,47045,47046,47048,47050,47051,47052,47053,47054,47055,47056,47057,47058,47059,47060,47061,47062,47063,47064,47065,47066,47067,47068,47069,null,null,null,null,null,null,47070,47071,47072,47073,47074,47075,47076,47077,47078,47079,47080,47081,47082,47083,47086,47087,47089,47090,47091,47093,47094,47095,47096,47097,47098,47099,47102,47106,47107,47108,47109,47110,47114,47115,47117,47118,47119,47121,47122,47123,47124,47125,47126,47127,47130,47132,47134,47135,47136,47137,47138,47139,47142,47143,47145,47146,47147,47149,47150,47151,47152,47153,47154,47155,47158,47162,47163,47164,47165,47166,47167,47169,47170,47171,47173,47174,47175,47176,47177,47178,47179,47180,47181,47182,47183,47184,47186,47188,47189,47190,47191,47192,47193,47194,47195,47198,47199,47201,47202,47203,47205,47206,47207,47208,47209,47210,47211,47214,47216,47218,47219,47220,47221,47222,47223,47225,47226,47227,47229,47230,47231,47232,47233,47234,47235,47236,47237,47238,47239,47240,47241,47242,47243,47244,47246,47247,47248,47249,47250,47251,47252,47253,47254,47255,47256,47257,47258,47259,47260,47261,47262,47263,null,null,null,null,null,null,47264,47265,47266,47267,47268,47269,47270,47271,47273,47274,47275,47276,47277,47278,47279,47281,47282,47283,47285,47286,47287,47289,47290,47291,47292,47293,null,null,null,null,null,null,47294,47295,47298,47300,47302,47303,47304,47305,47306,47307,47309,47310,47311,47313,47314,47315,47317,47318,47319,47320,47321,47322,47323,47324,47326,47328,47330,47331,47332,47333,47334,47335,47338,47339,47341,47342,47343,47345,47346,47347,47348,47349,47350,47351,47354,47356,47358,47359,47360,47361,47362,47363,47365,47366,47367,47368,47369,47370,47371,47372,47373,47374,47375,47376,47377,47378,47379,47380,47381,47382,47383,47385,47386,47387,47388,47389,47390,47391,47393,47394,47395,47396,47397,47398,47399,47400,47401,47402,47403,47404,47405,47406,47407,47408,47409,47410,47411,47412,47413,47414,47415,47416,47417,47418,47419,47422,47423,47425,47426,47427,47429,47430,47431,47432,47433,47434,47435,47437,47438,47440,47442,47443,47444,47445,47446,47447,47450,47451,47453,47454,47455,47457,47458,47459,47460,47461,47462,47463,47466,47468,47470,47471,47472,47473,47474,47475,47478,47479,47481,47482,47483,47485,null,null,null,null,null,null,47486,47487,47488,47489,47490,47491,47494,47496,47499,47500,47503,47504,47505,47506,47507,47508,47509,47510,47511,47512,47513,47514,47515,47516,47517,47518,null,null,null,null,null,null,47519,47520,47521,47522,47523,47524,47525,47526,47527,47528,47529,47530,47531,47534,47535,47537,47538,47539,47541,47542,47543,47544,47545,47546,47547,47550,47552,47554,47555,47556,47557,47558,47559,47562,47563,47565,47571,47572,47573,47574,47575,47578,47580,47583,47584,47586,47590,47591,47593,47594,47595,47597,47598,47599,47600,47601,47602,47603,47606,47611,47612,47613,47614,47615,47618,47619,47620,47621,47622,47623,47625,47626,47627,47628,47629,47630,47631,47632,47633,47634,47635,47636,47638,47639,47640,47641,47642,47643,47644,47645,47646,47647,47648,47649,47650,47651,47652,47653,47654,47655,47656,47657,47658,47659,47660,47661,47662,47663,47664,47665,47666,47667,47668,47669,47670,47671,47674,47675,47677,47678,47679,47681,47683,47684,47685,47686,47687,47690,47692,47695,47696,47697,47698,47702,47703,47705,47706,47707,47709,47710,47711,47712,47713,47714,47715,47718,47722,47723,47724,47725,47726,47727,null,null,null,null,null,null,47730,47731,47733,47734,47735,47737,47738,47739,47740,47741,47742,47743,47744,47745,47746,47750,47752,47753,47754,47755,47757,47758,47759,47760,47761,47762,null,null,null,null,null,null,47763,47764,47765,47766,47767,47768,47769,47770,47771,47772,47773,47774,47775,47776,47777,47778,47779,47780,47781,47782,47783,47786,47789,47790,47791,47793,47795,47796,47797,47798,47799,47802,47804,47806,47807,47808,47809,47810,47811,47813,47814,47815,47817,47818,47819,47820,47821,47822,47823,47824,47825,47826,47827,47828,47829,47830,47831,47834,47835,47836,47837,47838,47839,47840,47841,47842,47843,47844,47845,47846,47847,47848,47849,47850,47851,47852,47853,47854,47855,47856,47857,47858,47859,47860,47861,47862,47863,47864,47865,47866,47867,47869,47870,47871,47873,47874,47875,47877,47878,47879,47880,47881,47882,47883,47884,47886,47888,47890,47891,47892,47893,47894,47895,47897,47898,47899,47901,47902,47903,47905,47906,47907,47908,47909,47910,47911,47912,47914,47916,47917,47918,47919,47920,47921,47922,47923,47927,47929,47930,47935,47936,47937,47938,47939,47942,47944,47946,47947,47948,47950,47953,47954,null,null,null,null,null,null,47955,47957,47958,47959,47961,47962,47963,47964,47965,47966,47967,47968,47970,47972,47973,47974,47975,47976,47977,47978,47979,47981,47982,47983,47984,47985,null,null,null,null,null,null,47986,47987,47988,47989,47990,47991,47992,47993,47994,47995,47996,47997,47998,47999,48000,48001,48002,48003,48004,48005,48006,48007,48009,48010,48011,48013,48014,48015,48017,48018,48019,48020,48021,48022,48023,48024,48025,48026,48027,48028,48029,48030,48031,48032,48033,48034,48035,48037,48038,48039,48041,48042,48043,48045,48046,48047,48048,48049,48050,48051,48053,48054,48056,48057,48058,48059,48060,48061,48062,48063,48065,48066,48067,48069,48070,48071,48073,48074,48075,48076,48077,48078,48079,48081,48082,48084,48085,48086,48087,48088,48089,48090,48091,48092,48093,48094,48095,48096,48097,48098,48099,48100,48101,48102,48103,48104,48105,48106,48107,48108,48109,48110,48111,48112,48113,48114,48115,48116,48117,48118,48119,48122,48123,48125,48126,48129,48131,48132,48133,48134,48135,48138,48142,48144,48146,48147,48153,48154,48160,48161,48162,48163,48166,48168,48170,48171,48172,48174,48175,48178,48179,48181,null,null,null,null,null,null,48182,48183,48185,48186,48187,48188,48189,48190,48191,48194,48198,48199,48200,48202,48203,48206,48207,48209,48210,48211,48212,48213,48214,48215,48216,48217,null,null,null,null,null,null,48218,48219,48220,48222,48223,48224,48225,48226,48227,48228,48229,48230,48231,48232,48233,48234,48235,48236,48237,48238,48239,48240,48241,48242,48243,48244,48245,48246,48247,48248,48249,48250,48251,48252,48253,48254,48255,48256,48257,48258,48259,48262,48263,48265,48266,48269,48271,48272,48273,48274,48275,48278,48280,48283,48284,48285,48286,48287,48290,48291,48293,48294,48297,48298,48299,48300,48301,48302,48303,48306,48310,48311,48312,48313,48314,48315,48318,48319,48321,48322,48323,48325,48326,48327,48328,48329,48330,48331,48332,48334,48338,48339,48340,48342,48343,48345,48346,48347,48349,48350,48351,48352,48353,48354,48355,48356,48357,48358,48359,48360,48361,48362,48363,48364,48365,48366,48367,48368,48369,48370,48371,48375,48377,48378,48379,48381,48382,48383,48384,48385,48386,48387,48390,48392,48394,48395,48396,48397,48398,48399,48401,48402,48403,48405,48406,48407,48408,48409,48410,48411,48412,48413,null,null,null,null,null,null,48414,48415,48416,48417,48418,48419,48421,48422,48423,48424,48425,48426,48427,48429,48430,48431,48432,48433,48434,48435,48436,48437,48438,48439,48440,48441,null,null,null,null,null,null,48442,48443,48444,48445,48446,48447,48449,48450,48451,48452,48453,48454,48455,48458,48459,48461,48462,48463,48465,48466,48467,48468,48469,48470,48471,48474,48475,48476,48477,48478,48479,48480,48481,48482,48483,48485,48486,48487,48489,48490,48491,48492,48493,48494,48495,48496,48497,48498,48499,48500,48501,48502,48503,48504,48505,48506,48507,48508,48509,48510,48511,48514,48515,48517,48518,48523,48524,48525,48526,48527,48530,48532,48534,48535,48536,48539,48541,48542,48543,48544,48545,48546,48547,48549,48550,48551,48552,48553,48554,48555,48556,48557,48558,48559,48561,48562,48563,48564,48565,48566,48567,48569,48570,48571,48572,48573,48574,48575,48576,48577,48578,48579,48580,48581,48582,48583,48584,48585,48586,48587,48588,48589,48590,48591,48592,48593,48594,48595,48598,48599,48601,48602,48603,48605,48606,48607,48608,48609,48610,48611,48612,48613,48614,48615,48616,48618,48619,48620,48621,48622,48623,48625,null,null,null,null,null,null,48626,48627,48629,48630,48631,48633,48634,48635,48636,48637,48638,48639,48641,48642,48644,48646,48647,48648,48649,48650,48651,48654,48655,48657,48658,48659,null,null,null,null,null,null,48661,48662,48663,48664,48665,48666,48667,48670,48672,48673,48674,48675,48676,48677,48678,48679,48680,48681,48682,48683,48684,48685,48686,48687,48688,48689,48690,48691,48692,48693,48694,48695,48696,48697,48698,48699,48700,48701,48702,48703,48704,48705,48706,48707,48710,48711,48713,48714,48715,48717,48719,48720,48721,48722,48723,48726,48728,48732,48733,48734,48735,48738,48739,48741,48742,48743,48745,48747,48748,48749,48750,48751,48754,48758,48759,48760,48761,48762,48766,48767,48769,48770,48771,48773,48774,48775,48776,48777,48778,48779,48782,48786,48787,48788,48789,48790,48791,48794,48795,48796,48797,48798,48799,48800,48801,48802,48803,48804,48805,48806,48807,48809,48810,48811,48812,48813,48814,48815,48816,48817,48818,48819,48820,48821,48822,48823,48824,48825,48826,48827,48828,48829,48830,48831,48832,48833,48834,48835,48836,48837,48838,48839,48840,48841,48842,48843,48844,48845,48846,48847,48850,48851,null,null,null,null,null,null,48853,48854,48857,48858,48859,48860,48861,48862,48863,48865,48866,48870,48871,48872,48873,48874,48875,48877,48878,48879,48880,48881,48882,48883,48884,48885,null,null,null,null,null,null,48886,48887,48888,48889,48890,48891,48892,48893,48894,48895,48896,48898,48899,48900,48901,48902,48903,48906,48907,48908,48909,48910,48911,48912,48913,48914,48915,48916,48917,48918,48919,48922,48926,48927,48928,48929,48930,48931,48932,48933,48934,48935,48936,48937,48938,48939,48940,48941,48942,48943,48944,48945,48946,48947,48948,48949,48950,48951,48952,48953,48954,48955,48956,48957,48958,48959,48962,48963,48965,48966,48967,48969,48970,48971,48972,48973,48974,48975,48978,48979,48980,48982,48983,48984,48985,48986,48987,48988,48989,48990,48991,48992,48993,48994,48995,48996,48997,48998,48999,49000,49001,49002,49003,49004,49005,49006,49007,49008,49009,49010,49011,49012,49013,49014,49015,49016,49017,49018,49019,49020,49021,49022,49023,49024,49025,49026,49027,49028,49029,49030,49031,49032,49033,49034,49035,49036,49037,49038,49039,49040,49041,49042,49043,49045,49046,49047,49048,49049,49050,49051,49052,49053,null,null,null,null,null,null,49054,49055,49056,49057,49058,49059,49060,49061,49062,49063,49064,49065,49066,49067,49068,49069,49070,49071,49073,49074,49075,49076,49077,49078,49079,49080,null,null,null,null,null,null,49081,49082,49083,49084,49085,49086,49087,49088,49089,49090,49091,49092,49094,49095,49096,49097,49098,49099,49102,49103,49105,49106,49107,49109,49110,49111,49112,49113,49114,49115,49117,49118,49120,49122,49123,49124,49125,49126,49127,49128,49129,49130,49131,49132,49133,49134,49135,49136,49137,49138,49139,49140,49141,49142,49143,49144,49145,49146,49147,49148,49149,49150,49151,49152,49153,49154,49155,49156,49157,49158,49159,49160,49161,49162,49163,49164,49165,49166,49167,49168,49169,49170,49171,49172,49173,49174,49175,49176,49177,49178,49179,49180,49181,49182,49183,49184,49185,49186,49187,49188,49189,49190,49191,49192,49193,49194,49195,49196,49197,49198,49199,49200,49201,49202,49203,49204,49205,49206,49207,49208,49209,49210,49211,49213,49214,49215,49216,49217,49218,49219,49220,49221,49222,49223,49224,49225,49226,49227,49228,49229,49230,49231,49232,49234,49235,49236,49237,49238,49239,49241,49242,49243,null,null,null,null,null,null,49245,49246,49247,49249,49250,49251,49252,49253,49254,49255,49258,49259,49260,49261,49262,49263,49264,49265,49266,49267,49268,49269,49270,49271,49272,49273,null,null,null,null,null,null,49274,49275,49276,49277,49278,49279,49280,49281,49282,49283,49284,49285,49286,49287,49288,49289,49290,49291,49292,49293,49294,49295,49298,49299,49301,49302,49303,49305,49306,49307,49308,49309,49310,49311,49314,49316,49318,49319,49320,49321,49322,49323,49326,49329,49330,49335,49336,49337,49338,49339,49342,49346,49347,49348,49350,49351,49354,49355,49357,49358,49359,49361,49362,49363,49364,49365,49366,49367,49370,49374,49375,49376,49377,49378,49379,49382,49383,49385,49386,49387,49389,49390,49391,49392,49393,49394,49395,49398,49400,49402,49403,49404,49405,49406,49407,49409,49410,49411,49413,49414,49415,49417,49418,49419,49420,49421,49422,49423,49425,49426,49427,49428,49430,49431,49432,49433,49434,49435,49441,49442,49445,49448,49449,49450,49451,49454,49458,49459,49460,49461,49463,49466,49467,49469,49470,49471,49473,49474,49475,49476,49477,49478,49479,49482,49486,49487,49488,49489,49490,49491,49494,49495,null,null,null,null,null,null,49497,49498,49499,49501,49502,49503,49504,49505,49506,49507,49510,49514,49515,49516,49517,49518,49519,49521,49522,49523,49525,49526,49527,49529,49530,49531,null,null,null,null,null,null,49532,49533,49534,49535,49536,49537,49538,49539,49540,49542,49543,49544,49545,49546,49547,49551,49553,49554,49555,49557,49559,49560,49561,49562,49563,49566,49568,49570,49571,49572,49574,49575,49578,49579,49581,49582,49583,49585,49586,49587,49588,49589,49590,49591,49592,49593,49594,49595,49596,49598,49599,49600,49601,49602,49603,49605,49606,49607,49609,49610,49611,49613,49614,49615,49616,49617,49618,49619,49621,49622,49625,49626,49627,49628,49629,49630,49631,49633,49634,49635,49637,49638,49639,49641,49642,49643,49644,49645,49646,49647,49650,49652,49653,49654,49655,49656,49657,49658,49659,49662,49663,49665,49666,49667,49669,49670,49671,49672,49673,49674,49675,49678,49680,49682,49683,49684,49685,49686,49687,49690,49691,49693,49694,49697,49698,49699,49700,49701,49702,49703,49706,49708,49710,49712,49715,49717,49718,49719,49720,49721,49722,49723,49724,49725,49726,49727,49728,49729,49730,49731,49732,49733,null,null,null,null,null,null,49734,49735,49737,49738,49739,49740,49741,49742,49743,49746,49747,49749,49750,49751,49753,49754,49755,49756,49757,49758,49759,49761,49762,49763,49764,49766,null,null,null,null,null,null,49767,49768,49769,49770,49771,49774,49775,49777,49778,49779,49781,49782,49783,49784,49785,49786,49787,49790,49792,49794,49795,49796,49797,49798,49799,49802,49803,49804,49805,49806,49807,49809,49810,49811,49812,49813,49814,49815,49817,49818,49820,49822,49823,49824,49825,49826,49827,49830,49831,49833,49834,49835,49838,49839,49840,49841,49842,49843,49846,49848,49850,49851,49852,49853,49854,49855,49856,49857,49858,49859,49860,49861,49862,49863,49864,49865,49866,49867,49868,49869,49870,49871,49872,49873,49874,49875,49876,49877,49878,49879,49880,49881,49882,49883,49886,49887,49889,49890,49893,49894,49895,49896,49897,49898,49902,49904,49906,49907,49908,49909,49911,49914,49917,49918,49919,49921,49922,49923,49924,49925,49926,49927,49930,49931,49934,49935,49936,49937,49938,49942,49943,49945,49946,49947,49949,49950,49951,49952,49953,49954,49955,49958,49959,49962,49963,49964,49965,49966,49967,49968,49969,49970,null,null,null,null,null,null,49971,49972,49973,49974,49975,49976,49977,49978,49979,49980,49981,49982,49983,49984,49985,49986,49987,49988,49990,49991,49992,49993,49994,49995,49996,49997,null,null,null,null,null,null,49998,49999,50000,50001,50002,50003,50004,50005,50006,50007,50008,50009,50010,50011,50012,50013,50014,50015,50016,50017,50018,50019,50020,50021,50022,50023,50026,50027,50029,50030,50031,50033,50035,50036,50037,50038,50039,50042,50043,50046,50047,50048,50049,50050,50051,50053,50054,50055,50057,50058,50059,50061,50062,50063,50064,50065,50066,50067,50068,50069,50070,50071,50072,50073,50074,50075,50076,50077,50078,50079,50080,50081,50082,50083,50084,50085,50086,50087,50088,50089,50090,50091,50092,50093,50094,50095,50096,50097,50098,50099,50100,50101,50102,50103,50104,50105,50106,50107,50108,50109,50110,50111,50113,50114,50115,50116,50117,50118,50119,50120,50121,50122,50123,50124,50125,50126,50127,50128,50129,50130,50131,50132,50133,50134,50135,50138,50139,50141,50142,50145,50147,50148,50149,50150,50151,50154,50155,50156,50158,50159,50160,50161,50162,50163,50166,50167,50169,50170,50171,50172,50173,50174,null,null,null,null,null,null,50175,50176,50177,50178,50179,50180,50181,50182,50183,50185,50186,50187,50188,50189,50190,50191,50193,50194,50195,50196,50197,50198,50199,50200,50201,50202,null,null,null,null,null,null,50203,50204,50205,50206,50207,50208,50209,50210,50211,50213,50214,50215,50216,50217,50218,50219,50221,50222,50223,50225,50226,50227,50229,50230,50231,50232,50233,50234,50235,50238,50239,50240,50241,50242,50243,50244,50245,50246,50247,50249,50250,50251,50252,50253,50254,50255,50256,50257,50258,50259,50260,50261,50262,50263,50264,50265,50266,50267,50268,50269,50270,50271,50272,50273,50274,50275,50278,50279,50281,50282,50283,50285,50286,50287,50288,50289,50290,50291,50294,50295,50296,50298,50299,50300,50301,50302,50303,50305,50306,50307,50308,50309,50310,50311,50312,50313,50314,50315,50316,50317,50318,50319,50320,50321,50322,50323,50325,50326,50327,50328,50329,50330,50331,50333,50334,50335,50336,50337,50338,50339,50340,50341,50342,50343,50344,50345,50346,50347,50348,50349,50350,50351,50352,50353,50354,50355,50356,50357,50358,50359,50361,50362,50363,50365,50366,50367,50368,50369,50370,50371,50372,50373,null,null,null,null,null,null,50374,50375,50376,50377,50378,50379,50380,50381,50382,50383,50384,50385,50386,50387,50388,50389,50390,50391,50392,50393,50394,50395,50396,50397,50398,50399,null,null,null,null,null,null,50400,50401,50402,50403,50404,50405,50406,50407,50408,50410,50411,50412,50413,50414,50415,50418,50419,50421,50422,50423,50425,50427,50428,50429,50430,50434,50435,50436,50437,50438,50439,50440,50441,50442,50443,50445,50446,50447,50449,50450,50451,50453,50454,50455,50456,50457,50458,50459,50461,50462,50463,50464,50465,50466,50467,50468,50469,50470,50471,50474,50475,50477,50478,50479,50481,50482,50483,50484,50485,50486,50487,50490,50492,50494,50495,50496,50497,50498,50499,50502,50503,50507,50511,50512,50513,50514,50518,50522,50523,50524,50527,50530,50531,50533,50534,50535,50537,50538,50539,50540,50541,50542,50543,50546,50550,50551,50552,50553,50554,50555,50558,50559,50561,50562,50563,50565,50566,50568,50569,50570,50571,50574,50576,50578,50579,50580,50582,50585,50586,50587,50589,50590,50591,50593,50594,50595,50596,50597,50598,50599,50600,50602,50603,50604,50605,50606,50607,50608,50609,50610,50611,50614,null,null,null,null,null,null,50615,50618,50623,50624,50625,50626,50627,50635,50637,50639,50642,50643,50645,50646,50647,50649,50650,50651,50652,50653,50654,50655,50658,50660,50662,50663,null,null,null,null,null,null,50664,50665,50666,50667,50671,50673,50674,50675,50677,50680,50681,50682,50683,50690,50691,50692,50697,50698,50699,50701,50702,50703,50705,50706,50707,50708,50709,50710,50711,50714,50717,50718,50719,50720,50721,50722,50723,50726,50727,50729,50730,50731,50735,50737,50738,50742,50744,50746,50748,50749,50750,50751,50754,50755,50757,50758,50759,50761,50762,50763,50764,50765,50766,50767,50770,50774,50775,50776,50777,50778,50779,50782,50783,50785,50786,50787,50788,50789,50790,50791,50792,50793,50794,50795,50797,50798,50800,50802,50803,50804,50805,50806,50807,50810,50811,50813,50814,50815,50817,50818,50819,50820,50821,50822,50823,50826,50828,50830,50831,50832,50833,50834,50835,50838,50839,50841,50842,50843,50845,50846,50847,50848,50849,50850,50851,50854,50856,50858,50859,50860,50861,50862,50863,50866,50867,50869,50870,50871,50875,50876,50877,50878,50879,50882,50884,50886,50887,50888,50889,50890,50891,50894,null,null,null,null,null,null,50895,50897,50898,50899,50901,50902,50903,50904,50905,50906,50907,50910,50911,50914,50915,50916,50917,50918,50919,50922,50923,50925,50926,50927,50929,50930,null,null,null,null,null,null,50931,50932,50933,50934,50935,50938,50939,50940,50942,50943,50944,50945,50946,50947,50950,50951,50953,50954,50955,50957,50958,50959,50960,50961,50962,50963,50966,50968,50970,50971,50972,50973,50974,50975,50978,50979,50981,50982,50983,50985,50986,50987,50988,50989,50990,50991,50994,50996,50998,51000,51001,51002,51003,51006,51007,51009,51010,51011,51013,51014,51015,51016,51017,51019,51022,51024,51033,51034,51035,51037,51038,51039,51041,51042,51043,51044,51045,51046,51047,51049,51050,51052,51053,51054,51055,51056,51057,51058,51059,51062,51063,51065,51066,51067,51071,51072,51073,51074,51078,51083,51084,51085,51087,51090,51091,51093,51097,51099,51100,51101,51102,51103,51106,51111,51112,51113,51114,51115,51118,51119,51121,51122,51123,51125,51126,51127,51128,51129,51130,51131,51134,51138,51139,51140,51141,51142,51143,51146,51147,51149,51151,51153,51154,51155,51156,51157,51158,51159,51161,51162,51163,51164,null,null,null,null,null,null,51166,51167,51168,51169,51170,51171,51173,51174,51175,51177,51178,51179,51181,51182,51183,51184,51185,51186,51187,51188,51189,51190,51191,51192,51193,51194,null,null,null,null,null,null,51195,51196,51197,51198,51199,51202,51203,51205,51206,51207,51209,51211,51212,51213,51214,51215,51218,51220,51223,51224,51225,51226,51227,51230,51231,51233,51234,51235,51237,51238,51239,51240,51241,51242,51243,51246,51248,51250,51251,51252,51253,51254,51255,51257,51258,51259,51261,51262,51263,51265,51266,51267,51268,51269,51270,51271,51274,51275,51278,51279,51280,51281,51282,51283,51285,51286,51287,51288,51289,51290,51291,51292,51293,51294,51295,51296,51297,51298,51299,51300,51301,51302,51303,51304,51305,51306,51307,51308,51309,51310,51311,51314,51315,51317,51318,51319,51321,51323,51324,51325,51326,51327,51330,51332,51336,51337,51338,51342,51343,51344,51345,51346,51347,51349,51350,51351,51352,51353,51354,51355,51356,51358,51360,51362,51363,51364,51365,51366,51367,51369,51370,51371,51372,51373,51374,51375,51376,51377,51378,51379,51380,51381,51382,51383,51384,51385,51386,51387,51390,51391,51392,51393,null,null,null,null,null,null,51394,51395,51397,51398,51399,51401,51402,51403,51405,51406,51407,51408,51409,51410,51411,51414,51416,51418,51419,51420,51421,51422,51423,51426,51427,51429,null,null,null,null,null,null,51430,51431,51432,51433,51434,51435,51436,51437,51438,51439,51440,51441,51442,51443,51444,51446,51447,51448,51449,51450,51451,51454,51455,51457,51458,51459,51463,51464,51465,51466,51467,51470,12288,12289,12290,183,8229,8230,168,12291,173,8213,8741,65340,8764,8216,8217,8220,8221,12308,12309,12296,12297,12298,12299,12300,12301,12302,12303,12304,12305,177,215,247,8800,8804,8805,8734,8756,176,8242,8243,8451,8491,65504,65505,65509,9794,9792,8736,8869,8978,8706,8711,8801,8786,167,8251,9734,9733,9675,9679,9678,9671,9670,9633,9632,9651,9650,9661,9660,8594,8592,8593,8595,8596,12307,8810,8811,8730,8765,8733,8757,8747,8748,8712,8715,8838,8839,8834,8835,8746,8745,8743,8744,65506,51472,51474,51475,51476,51477,51478,51479,51481,51482,51483,51484,51485,51486,51487,51488,51489,51490,51491,51492,51493,51494,51495,51496,51497,51498,51499,null,null,null,null,null,null,51501,51502,51503,51504,51505,51506,51507,51509,51510,51511,51512,51513,51514,51515,51516,51517,51518,51519,51520,51521,51522,51523,51524,51525,51526,51527,null,null,null,null,null,null,51528,51529,51530,51531,51532,51533,51534,51535,51538,51539,51541,51542,51543,51545,51546,51547,51548,51549,51550,51551,51554,51556,51557,51558,51559,51560,51561,51562,51563,51565,51566,51567,8658,8660,8704,8707,180,65374,711,728,733,730,729,184,731,161,191,720,8750,8721,8719,164,8457,8240,9665,9664,9655,9654,9828,9824,9825,9829,9831,9827,8857,9672,9635,9680,9681,9618,9636,9637,9640,9639,9638,9641,9832,9743,9742,9756,9758,182,8224,8225,8597,8599,8601,8598,8600,9837,9833,9834,9836,12927,12828,8470,13255,8482,13250,13272,8481,8364,174,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,51569,51570,51571,51573,51574,51575,51576,51577,51578,51579,51581,51582,51583,51584,51585,51586,51587,51588,51589,51590,51591,51594,51595,51597,51598,51599,null,null,null,null,null,null,51601,51602,51603,51604,51605,51606,51607,51610,51612,51614,51615,51616,51617,51618,51619,51620,51621,51622,51623,51624,51625,51626,51627,51628,51629,51630,null,null,null,null,null,null,51631,51632,51633,51634,51635,51636,51637,51638,51639,51640,51641,51642,51643,51644,51645,51646,51647,51650,51651,51653,51654,51657,51659,51660,51661,51662,51663,51666,51668,51671,51672,51675,65281,65282,65283,65284,65285,65286,65287,65288,65289,65290,65291,65292,65293,65294,65295,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,65306,65307,65308,65309,65310,65311,65312,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65339,65510,65341,65342,65343,65344,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,65371,65372,65373,65507,51678,51679,51681,51683,51685,51686,51688,51689,51690,51691,51694,51698,51699,51700,51701,51702,51703,51706,51707,51709,51710,51711,51713,51714,51715,51716,null,null,null,null,null,null,51717,51718,51719,51722,51726,51727,51728,51729,51730,51731,51733,51734,51735,51737,51738,51739,51740,51741,51742,51743,51744,51745,51746,51747,51748,51749,null,null,null,null,null,null,51750,51751,51752,51754,51755,51756,51757,51758,51759,51760,51761,51762,51763,51764,51765,51766,51767,51768,51769,51770,51771,51772,51773,51774,51775,51776,51777,51778,51779,51780,51781,51782,12593,12594,12595,12596,12597,12598,12599,12600,12601,12602,12603,12604,12605,12606,12607,12608,12609,12610,12611,12612,12613,12614,12615,12616,12617,12618,12619,12620,12621,12622,12623,12624,12625,12626,12627,12628,12629,12630,12631,12632,12633,12634,12635,12636,12637,12638,12639,12640,12641,12642,12643,12644,12645,12646,12647,12648,12649,12650,12651,12652,12653,12654,12655,12656,12657,12658,12659,12660,12661,12662,12663,12664,12665,12666,12667,12668,12669,12670,12671,12672,12673,12674,12675,12676,12677,12678,12679,12680,12681,12682,12683,12684,12685,12686,51783,51784,51785,51786,51787,51790,51791,51793,51794,51795,51797,51798,51799,51800,51801,51802,51803,51806,51810,51811,51812,51813,51814,51815,51817,51818,null,null,null,null,null,null,51819,51820,51821,51822,51823,51824,51825,51826,51827,51828,51829,51830,51831,51832,51833,51834,51835,51836,51838,51839,51840,51841,51842,51843,51845,51846,null,null,null,null,null,null,51847,51848,51849,51850,51851,51852,51853,51854,51855,51856,51857,51858,51859,51860,51861,51862,51863,51865,51866,51867,51868,51869,51870,51871,51872,51873,51874,51875,51876,51877,51878,51879,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,null,null,null,null,null,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,null,null,null,null,null,null,null,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,null,null,null,null,null,null,null,null,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,null,null,null,null,null,null,51880,51881,51882,51883,51884,51885,51886,51887,51888,51889,51890,51891,51892,51893,51894,51895,51896,51897,51898,51899,51902,51903,51905,51906,51907,51909,null,null,null,null,null,null,51910,51911,51912,51913,51914,51915,51918,51920,51922,51924,51925,51926,51927,51930,51931,51932,51933,51934,51935,51937,51938,51939,51940,51941,51942,51943,null,null,null,null,null,null,51944,51945,51946,51947,51949,51950,51951,51952,51953,51954,51955,51957,51958,51959,51960,51961,51962,51963,51964,51965,51966,51967,51968,51969,51970,51971,51972,51973,51974,51975,51977,51978,9472,9474,9484,9488,9496,9492,9500,9516,9508,9524,9532,9473,9475,9487,9491,9499,9495,9507,9523,9515,9531,9547,9504,9519,9512,9527,9535,9501,9520,9509,9528,9538,9490,9489,9498,9497,9494,9493,9486,9485,9502,9503,9505,9506,9510,9511,9513,9514,9517,9518,9521,9522,9525,9526,9529,9530,9533,9534,9536,9537,9539,9540,9541,9542,9543,9544,9545,9546,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,51979,51980,51981,51982,51983,51985,51986,51987,51989,51990,51991,51993,51994,51995,51996,51997,51998,51999,52002,52003,52004,52005,52006,52007,52008,52009,null,null,null,null,null,null,52010,52011,52012,52013,52014,52015,52016,52017,52018,52019,52020,52021,52022,52023,52024,52025,52026,52027,52028,52029,52030,52031,52032,52034,52035,52036,null,null,null,null,null,null,52037,52038,52039,52042,52043,52045,52046,52047,52049,52050,52051,52052,52053,52054,52055,52058,52059,52060,52062,52063,52064,52065,52066,52067,52069,52070,52071,52072,52073,52074,52075,52076,13205,13206,13207,8467,13208,13252,13219,13220,13221,13222,13209,13210,13211,13212,13213,13214,13215,13216,13217,13218,13258,13197,13198,13199,13263,13192,13193,13256,13223,13224,13232,13233,13234,13235,13236,13237,13238,13239,13240,13241,13184,13185,13186,13187,13188,13242,13243,13244,13245,13246,13247,13200,13201,13202,13203,13204,8486,13248,13249,13194,13195,13196,13270,13253,13229,13230,13231,13275,13225,13226,13227,13228,13277,13264,13267,13251,13257,13276,13254,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,52077,52078,52079,52080,52081,52082,52083,52084,52085,52086,52087,52090,52091,52092,52093,52094,52095,52096,52097,52098,52099,52100,52101,52102,52103,52104,null,null,null,null,null,null,52105,52106,52107,52108,52109,52110,52111,52112,52113,52114,52115,52116,52117,52118,52119,52120,52121,52122,52123,52125,52126,52127,52128,52129,52130,52131,null,null,null,null,null,null,52132,52133,52134,52135,52136,52137,52138,52139,52140,52141,52142,52143,52144,52145,52146,52147,52148,52149,52150,52151,52153,52154,52155,52156,52157,52158,52159,52160,52161,52162,52163,52164,198,208,170,294,null,306,null,319,321,216,338,186,222,358,330,null,12896,12897,12898,12899,12900,12901,12902,12903,12904,12905,12906,12907,12908,12909,12910,12911,12912,12913,12914,12915,12916,12917,12918,12919,12920,12921,12922,12923,9424,9425,9426,9427,9428,9429,9430,9431,9432,9433,9434,9435,9436,9437,9438,9439,9440,9441,9442,9443,9444,9445,9446,9447,9448,9449,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9322,9323,9324,9325,9326,189,8531,8532,188,190,8539,8540,8541,8542,52165,52166,52167,52168,52169,52170,52171,52172,52173,52174,52175,52176,52177,52178,52179,52181,52182,52183,52184,52185,52186,52187,52188,52189,52190,52191,null,null,null,null,null,null,52192,52193,52194,52195,52197,52198,52200,52202,52203,52204,52205,52206,52207,52208,52209,52210,52211,52212,52213,52214,52215,52216,52217,52218,52219,52220,null,null,null,null,null,null,52221,52222,52223,52224,52225,52226,52227,52228,52229,52230,52231,52232,52233,52234,52235,52238,52239,52241,52242,52243,52245,52246,52247,52248,52249,52250,52251,52254,52255,52256,52259,52260,230,273,240,295,305,307,312,320,322,248,339,223,254,359,331,329,12800,12801,12802,12803,12804,12805,12806,12807,12808,12809,12810,12811,12812,12813,12814,12815,12816,12817,12818,12819,12820,12821,12822,12823,12824,12825,12826,12827,9372,9373,9374,9375,9376,9377,9378,9379,9380,9381,9382,9383,9384,9385,9386,9387,9388,9389,9390,9391,9392,9393,9394,9395,9396,9397,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,9342,9343,9344,9345,9346,185,178,179,8308,8319,8321,8322,8323,8324,52261,52262,52266,52267,52269,52271,52273,52274,52275,52276,52277,52278,52279,52282,52287,52288,52289,52290,52291,52294,52295,52297,52298,52299,52301,52302,null,null,null,null,null,null,52303,52304,52305,52306,52307,52310,52314,52315,52316,52317,52318,52319,52321,52322,52323,52325,52327,52329,52330,52331,52332,52333,52334,52335,52337,52338,null,null,null,null,null,null,52339,52340,52342,52343,52344,52345,52346,52347,52348,52349,52350,52351,52352,52353,52354,52355,52356,52357,52358,52359,52360,52361,52362,52363,52364,52365,52366,52367,52368,52369,52370,52371,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,null,null,null,null,null,null,null,null,null,null,null,52372,52373,52374,52375,52378,52379,52381,52382,52383,52385,52386,52387,52388,52389,52390,52391,52394,52398,52399,52400,52401,52402,52403,52406,52407,52409,null,null,null,null,null,null,52410,52411,52413,52414,52415,52416,52417,52418,52419,52422,52424,52426,52427,52428,52429,52430,52431,52433,52434,52435,52437,52438,52439,52440,52441,52442,null,null,null,null,null,null,52443,52444,52445,52446,52447,52448,52449,52450,52451,52453,52454,52455,52456,52457,52458,52459,52461,52462,52463,52465,52466,52467,52468,52469,52470,52471,52472,52473,52474,52475,52476,52477,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,null,null,null,null,null,null,null,null,52478,52479,52480,52482,52483,52484,52485,52486,52487,52490,52491,52493,52494,52495,52497,52498,52499,52500,52501,52502,52503,52506,52508,52510,52511,52512,null,null,null,null,null,null,52513,52514,52515,52517,52518,52519,52521,52522,52523,52525,52526,52527,52528,52529,52530,52531,52532,52533,52534,52535,52536,52538,52539,52540,52541,52542,null,null,null,null,null,null,52543,52544,52545,52546,52547,52548,52549,52550,52551,52552,52553,52554,52555,52556,52557,52558,52559,52560,52561,52562,52563,52564,52565,52566,52567,52568,52569,52570,52571,52573,52574,52575,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,null,null,null,null,null,null,null,null,null,null,null,null,null,52577,52578,52579,52581,52582,52583,52584,52585,52586,52587,52590,52592,52594,52595,52596,52597,52598,52599,52601,52602,52603,52604,52605,52606,52607,52608,null,null,null,null,null,null,52609,52610,52611,52612,52613,52614,52615,52617,52618,52619,52620,52621,52622,52623,52624,52625,52626,52627,52630,52631,52633,52634,52635,52637,52638,52639,null,null,null,null,null,null,52640,52641,52642,52643,52646,52648,52650,52651,52652,52653,52654,52655,52657,52658,52659,52660,52661,52662,52663,52664,52665,52666,52667,52668,52669,52670,52671,52672,52673,52674,52675,52677,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,52678,52679,52680,52681,52682,52683,52685,52686,52687,52689,52690,52691,52692,52693,52694,52695,52696,52697,52698,52699,52700,52701,52702,52703,52704,52705,null,null,null,null,null,null,52706,52707,52708,52709,52710,52711,52713,52714,52715,52717,52718,52719,52721,52722,52723,52724,52725,52726,52727,52730,52732,52734,52735,52736,52737,52738,null,null,null,null,null,null,52739,52741,52742,52743,52745,52746,52747,52749,52750,52751,52752,52753,52754,52755,52757,52758,52759,52760,52762,52763,52764,52765,52766,52767,52770,52771,52773,52774,52775,52777,52778,52779,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,52780,52781,52782,52783,52786,52788,52790,52791,52792,52793,52794,52795,52796,52797,52798,52799,52800,52801,52802,52803,52804,52805,52806,52807,52808,52809,null,null,null,null,null,null,52810,52811,52812,52813,52814,52815,52816,52817,52818,52819,52820,52821,52822,52823,52826,52827,52829,52830,52834,52835,52836,52837,52838,52839,52842,52844,null,null,null,null,null,null,52846,52847,52848,52849,52850,52851,52854,52855,52857,52858,52859,52861,52862,52863,52864,52865,52866,52867,52870,52872,52874,52875,52876,52877,52878,52879,52882,52883,52885,52886,52887,52889,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,52890,52891,52892,52893,52894,52895,52898,52902,52903,52904,52905,52906,52907,52910,52911,52912,52913,52914,52915,52916,52917,52918,52919,52920,52921,52922,null,null,null,null,null,null,52923,52924,52925,52926,52927,52928,52930,52931,52932,52933,52934,52935,52936,52937,52938,52939,52940,52941,52942,52943,52944,52945,52946,52947,52948,52949,null,null,null,null,null,null,52950,52951,52952,52953,52954,52955,52956,52957,52958,52959,52960,52961,52962,52963,52966,52967,52969,52970,52973,52974,52975,52976,52977,52978,52979,52982,52986,52987,52988,52989,52990,52991,44032,44033,44036,44039,44040,44041,44042,44048,44049,44050,44051,44052,44053,44054,44055,44057,44058,44059,44060,44061,44064,44068,44076,44077,44079,44080,44081,44088,44089,44092,44096,44107,44109,44116,44120,44124,44144,44145,44148,44151,44152,44154,44160,44161,44163,44164,44165,44166,44169,44170,44171,44172,44176,44180,44188,44189,44191,44192,44193,44200,44201,44202,44204,44207,44208,44216,44217,44219,44220,44221,44225,44228,44232,44236,44245,44247,44256,44257,44260,44263,44264,44266,44268,44271,44272,44273,44275,44277,44278,44284,44285,44288,44292,44294,52994,52995,52997,52998,52999,53001,53002,53003,53004,53005,53006,53007,53010,53012,53014,53015,53016,53017,53018,53019,53021,53022,53023,53025,53026,53027,null,null,null,null,null,null,53029,53030,53031,53032,53033,53034,53035,53038,53042,53043,53044,53045,53046,53047,53049,53050,53051,53052,53053,53054,53055,53056,53057,53058,53059,53060,null,null,null,null,null,null,53061,53062,53063,53064,53065,53066,53067,53068,53069,53070,53071,53072,53073,53074,53075,53078,53079,53081,53082,53083,53085,53086,53087,53088,53089,53090,53091,53094,53096,53098,53099,53100,44300,44301,44303,44305,44312,44316,44320,44329,44332,44333,44340,44341,44344,44348,44356,44357,44359,44361,44368,44372,44376,44385,44387,44396,44397,44400,44403,44404,44405,44406,44411,44412,44413,44415,44417,44418,44424,44425,44428,44432,44444,44445,44452,44471,44480,44481,44484,44488,44496,44497,44499,44508,44512,44516,44536,44537,44540,44543,44544,44545,44552,44553,44555,44557,44564,44592,44593,44596,44599,44600,44602,44608,44609,44611,44613,44614,44618,44620,44621,44622,44624,44628,44630,44636,44637,44639,44640,44641,44645,44648,44649,44652,44656,44664,53101,53102,53103,53106,53107,53109,53110,53111,53113,53114,53115,53116,53117,53118,53119,53121,53122,53123,53124,53126,53127,53128,53129,53130,53131,53133,null,null,null,null,null,null,53134,53135,53136,53137,53138,53139,53140,53141,53142,53143,53144,53145,53146,53147,53148,53149,53150,53151,53152,53154,53155,53156,53157,53158,53159,53161,null,null,null,null,null,null,53162,53163,53164,53165,53166,53167,53169,53170,53171,53172,53173,53174,53175,53176,53177,53178,53179,53180,53181,53182,53183,53184,53185,53186,53187,53189,53190,53191,53192,53193,53194,53195,44665,44667,44668,44669,44676,44677,44684,44732,44733,44734,44736,44740,44748,44749,44751,44752,44753,44760,44761,44764,44776,44779,44781,44788,44792,44796,44807,44808,44813,44816,44844,44845,44848,44850,44852,44860,44861,44863,44865,44866,44867,44872,44873,44880,44892,44893,44900,44901,44921,44928,44932,44936,44944,44945,44949,44956,44984,44985,44988,44992,44999,45000,45001,45003,45005,45006,45012,45020,45032,45033,45040,45041,45044,45048,45056,45057,45060,45068,45072,45076,45084,45085,45096,45124,45125,45128,45130,45132,45134,45139,45140,45141,45143,45145,53196,53197,53198,53199,53200,53201,53202,53203,53204,53205,53206,53207,53208,53209,53210,53211,53212,53213,53214,53215,53218,53219,53221,53222,53223,53225,null,null,null,null,null,null,53226,53227,53228,53229,53230,53231,53234,53236,53238,53239,53240,53241,53242,53243,53245,53246,53247,53249,53250,53251,53253,53254,53255,53256,53257,53258,null,null,null,null,null,null,53259,53260,53261,53262,53263,53264,53266,53267,53268,53269,53270,53271,53273,53274,53275,53276,53277,53278,53279,53280,53281,53282,53283,53284,53285,53286,53287,53288,53289,53290,53291,53292,45149,45180,45181,45184,45188,45196,45197,45199,45201,45208,45209,45210,45212,45215,45216,45217,45218,45224,45225,45227,45228,45229,45230,45231,45233,45235,45236,45237,45240,45244,45252,45253,45255,45256,45257,45264,45265,45268,45272,45280,45285,45320,45321,45323,45324,45328,45330,45331,45336,45337,45339,45340,45341,45347,45348,45349,45352,45356,45364,45365,45367,45368,45369,45376,45377,45380,45384,45392,45393,45396,45397,45400,45404,45408,45432,45433,45436,45440,45442,45448,45449,45451,45453,45458,45459,45460,45464,45468,45480,45516,45520,45524,45532,45533,53294,53295,53296,53297,53298,53299,53302,53303,53305,53306,53307,53309,53310,53311,53312,53313,53314,53315,53318,53320,53322,53323,53324,53325,53326,53327,null,null,null,null,null,null,53329,53330,53331,53333,53334,53335,53337,53338,53339,53340,53341,53342,53343,53345,53346,53347,53348,53349,53350,53351,53352,53353,53354,53355,53358,53359,null,null,null,null,null,null,53361,53362,53363,53365,53366,53367,53368,53369,53370,53371,53374,53375,53376,53378,53379,53380,53381,53382,53383,53384,53385,53386,53387,53388,53389,53390,53391,53392,53393,53394,53395,53396,45535,45544,45545,45548,45552,45561,45563,45565,45572,45573,45576,45579,45580,45588,45589,45591,45593,45600,45620,45628,45656,45660,45664,45672,45673,45684,45685,45692,45700,45701,45705,45712,45713,45716,45720,45721,45722,45728,45729,45731,45733,45734,45738,45740,45744,45748,45768,45769,45772,45776,45778,45784,45785,45787,45789,45794,45796,45797,45798,45800,45803,45804,45805,45806,45807,45811,45812,45813,45815,45816,45817,45818,45819,45823,45824,45825,45828,45832,45840,45841,45843,45844,45845,45852,45908,45909,45910,45912,45915,45916,45918,45919,45924,45925,53397,53398,53399,53400,53401,53402,53403,53404,53405,53406,53407,53408,53409,53410,53411,53414,53415,53417,53418,53419,53421,53422,53423,53424,53425,53426,null,null,null,null,null,null,53427,53430,53432,53434,53435,53436,53437,53438,53439,53442,53443,53445,53446,53447,53450,53451,53452,53453,53454,53455,53458,53462,53463,53464,53465,53466,null,null,null,null,null,null,53467,53470,53471,53473,53474,53475,53477,53478,53479,53480,53481,53482,53483,53486,53490,53491,53492,53493,53494,53495,53497,53498,53499,53500,53501,53502,53503,53504,53505,53506,53507,53508,45927,45929,45931,45934,45936,45937,45940,45944,45952,45953,45955,45956,45957,45964,45968,45972,45984,45985,45992,45996,46020,46021,46024,46027,46028,46030,46032,46036,46037,46039,46041,46043,46045,46048,46052,46056,46076,46096,46104,46108,46112,46120,46121,46123,46132,46160,46161,46164,46168,46176,46177,46179,46181,46188,46208,46216,46237,46244,46248,46252,46261,46263,46265,46272,46276,46280,46288,46293,46300,46301,46304,46307,46308,46310,46316,46317,46319,46321,46328,46356,46357,46360,46363,46364,46372,46373,46375,46376,46377,46378,46384,46385,46388,46392,53509,53510,53511,53512,53513,53514,53515,53516,53518,53519,53520,53521,53522,53523,53524,53525,53526,53527,53528,53529,53530,53531,53532,53533,53534,53535,null,null,null,null,null,null,53536,53537,53538,53539,53540,53541,53542,53543,53544,53545,53546,53547,53548,53549,53550,53551,53554,53555,53557,53558,53559,53561,53563,53564,53565,53566,null,null,null,null,null,null,53567,53570,53574,53575,53576,53577,53578,53579,53582,53583,53585,53586,53587,53589,53590,53591,53592,53593,53594,53595,53598,53600,53602,53603,53604,53605,53606,53607,53609,53610,53611,53613,46400,46401,46403,46404,46405,46411,46412,46413,46416,46420,46428,46429,46431,46432,46433,46496,46497,46500,46504,46506,46507,46512,46513,46515,46516,46517,46523,46524,46525,46528,46532,46540,46541,46543,46544,46545,46552,46572,46608,46609,46612,46616,46629,46636,46644,46664,46692,46696,46748,46749,46752,46756,46763,46764,46769,46804,46832,46836,46840,46848,46849,46853,46888,46889,46892,46895,46896,46904,46905,46907,46916,46920,46924,46932,46933,46944,46948,46952,46960,46961,46963,46965,46972,46973,46976,46980,46988,46989,46991,46992,46993,46994,46998,46999,53614,53615,53616,53617,53618,53619,53620,53621,53622,53623,53624,53625,53626,53627,53629,53630,53631,53632,53633,53634,53635,53637,53638,53639,53641,53642,null,null,null,null,null,null,53643,53644,53645,53646,53647,53648,53649,53650,53651,53652,53653,53654,53655,53656,53657,53658,53659,53660,53661,53662,53663,53666,53667,53669,53670,53671,null,null,null,null,null,null,53673,53674,53675,53676,53677,53678,53679,53682,53684,53686,53687,53688,53689,53691,53693,53694,53695,53697,53698,53699,53700,53701,53702,53703,53704,53705,53706,53707,53708,53709,53710,53711,47000,47001,47004,47008,47016,47017,47019,47020,47021,47028,47029,47032,47047,47049,47084,47085,47088,47092,47100,47101,47103,47104,47105,47111,47112,47113,47116,47120,47128,47129,47131,47133,47140,47141,47144,47148,47156,47157,47159,47160,47161,47168,47172,47185,47187,47196,47197,47200,47204,47212,47213,47215,47217,47224,47228,47245,47272,47280,47284,47288,47296,47297,47299,47301,47308,47312,47316,47325,47327,47329,47336,47337,47340,47344,47352,47353,47355,47357,47364,47384,47392,47420,47421,47424,47428,47436,47439,47441,47448,47449,47452,47456,47464,47465,53712,53713,53714,53715,53716,53717,53718,53719,53721,53722,53723,53724,53725,53726,53727,53728,53729,53730,53731,53732,53733,53734,53735,53736,53737,53738,null,null,null,null,null,null,53739,53740,53741,53742,53743,53744,53745,53746,53747,53749,53750,53751,53753,53754,53755,53756,53757,53758,53759,53760,53761,53762,53763,53764,53765,53766,null,null,null,null,null,null,53768,53770,53771,53772,53773,53774,53775,53777,53778,53779,53780,53781,53782,53783,53784,53785,53786,53787,53788,53789,53790,53791,53792,53793,53794,53795,53796,53797,53798,53799,53800,53801,47467,47469,47476,47477,47480,47484,47492,47493,47495,47497,47498,47501,47502,47532,47533,47536,47540,47548,47549,47551,47553,47560,47561,47564,47566,47567,47568,47569,47570,47576,47577,47579,47581,47582,47585,47587,47588,47589,47592,47596,47604,47605,47607,47608,47609,47610,47616,47617,47624,47637,47672,47673,47676,47680,47682,47688,47689,47691,47693,47694,47699,47700,47701,47704,47708,47716,47717,47719,47720,47721,47728,47729,47732,47736,47747,47748,47749,47751,47756,47784,47785,47787,47788,47792,47794,47800,47801,47803,47805,47812,47816,47832,47833,47868,53802,53803,53806,53807,53809,53810,53811,53813,53814,53815,53816,53817,53818,53819,53822,53824,53826,53827,53828,53829,53830,53831,53833,53834,53835,53836,null,null,null,null,null,null,53837,53838,53839,53840,53841,53842,53843,53844,53845,53846,53847,53848,53849,53850,53851,53853,53854,53855,53856,53857,53858,53859,53861,53862,53863,53864,null,null,null,null,null,null,53865,53866,53867,53868,53869,53870,53871,53872,53873,53874,53875,53876,53877,53878,53879,53880,53881,53882,53883,53884,53885,53886,53887,53890,53891,53893,53894,53895,53897,53898,53899,53900,47872,47876,47885,47887,47889,47896,47900,47904,47913,47915,47924,47925,47926,47928,47931,47932,47933,47934,47940,47941,47943,47945,47949,47951,47952,47956,47960,47969,47971,47980,48008,48012,48016,48036,48040,48044,48052,48055,48064,48068,48072,48080,48083,48120,48121,48124,48127,48128,48130,48136,48137,48139,48140,48141,48143,48145,48148,48149,48150,48151,48152,48155,48156,48157,48158,48159,48164,48165,48167,48169,48173,48176,48177,48180,48184,48192,48193,48195,48196,48197,48201,48204,48205,48208,48221,48260,48261,48264,48267,48268,48270,48276,48277,48279,53901,53902,53903,53906,53907,53908,53910,53911,53912,53913,53914,53915,53917,53918,53919,53921,53922,53923,53925,53926,53927,53928,53929,53930,53931,53933,null,null,null,null,null,null,53934,53935,53936,53938,53939,53940,53941,53942,53943,53946,53947,53949,53950,53953,53955,53956,53957,53958,53959,53962,53964,53965,53966,53967,53968,53969,null,null,null,null,null,null,53970,53971,53973,53974,53975,53977,53978,53979,53981,53982,53983,53984,53985,53986,53987,53990,53991,53992,53993,53994,53995,53996,53997,53998,53999,54002,54003,54005,54006,54007,54009,54010,48281,48282,48288,48289,48292,48295,48296,48304,48305,48307,48308,48309,48316,48317,48320,48324,48333,48335,48336,48337,48341,48344,48348,48372,48373,48374,48376,48380,48388,48389,48391,48393,48400,48404,48420,48428,48448,48456,48457,48460,48464,48472,48473,48484,48488,48512,48513,48516,48519,48520,48521,48522,48528,48529,48531,48533,48537,48538,48540,48548,48560,48568,48596,48597,48600,48604,48617,48624,48628,48632,48640,48643,48645,48652,48653,48656,48660,48668,48669,48671,48708,48709,48712,48716,48718,48724,48725,48727,48729,48730,48731,48736,48737,48740,54011,54012,54013,54014,54015,54018,54020,54022,54023,54024,54025,54026,54027,54031,54033,54034,54035,54037,54039,54040,54041,54042,54043,54046,54050,54051,null,null,null,null,null,null,54052,54054,54055,54058,54059,54061,54062,54063,54065,54066,54067,54068,54069,54070,54071,54074,54078,54079,54080,54081,54082,54083,54086,54087,54088,54089,null,null,null,null,null,null,54090,54091,54092,54093,54094,54095,54096,54097,54098,54099,54100,54101,54102,54103,54104,54105,54106,54107,54108,54109,54110,54111,54112,54113,54114,54115,54116,54117,54118,54119,54120,54121,48744,48746,48752,48753,48755,48756,48757,48763,48764,48765,48768,48772,48780,48781,48783,48784,48785,48792,48793,48808,48848,48849,48852,48855,48856,48864,48867,48868,48869,48876,48897,48904,48905,48920,48921,48923,48924,48925,48960,48961,48964,48968,48976,48977,48981,49044,49072,49093,49100,49101,49104,49108,49116,49119,49121,49212,49233,49240,49244,49248,49256,49257,49296,49297,49300,49304,49312,49313,49315,49317,49324,49325,49327,49328,49331,49332,49333,49334,49340,49341,49343,49344,49345,49349,49352,49353,49356,49360,49368,49369,49371,49372,49373,49380,54122,54123,54124,54125,54126,54127,54128,54129,54130,54131,54132,54133,54134,54135,54136,54137,54138,54139,54142,54143,54145,54146,54147,54149,54150,54151,null,null,null,null,null,null,54152,54153,54154,54155,54158,54162,54163,54164,54165,54166,54167,54170,54171,54173,54174,54175,54177,54178,54179,54180,54181,54182,54183,54186,54188,54190,null,null,null,null,null,null,54191,54192,54193,54194,54195,54197,54198,54199,54201,54202,54203,54205,54206,54207,54208,54209,54210,54211,54214,54215,54218,54219,54220,54221,54222,54223,54225,54226,54227,54228,54229,54230,49381,49384,49388,49396,49397,49399,49401,49408,49412,49416,49424,49429,49436,49437,49438,49439,49440,49443,49444,49446,49447,49452,49453,49455,49456,49457,49462,49464,49465,49468,49472,49480,49481,49483,49484,49485,49492,49493,49496,49500,49508,49509,49511,49512,49513,49520,49524,49528,49541,49548,49549,49550,49552,49556,49558,49564,49565,49567,49569,49573,49576,49577,49580,49584,49597,49604,49608,49612,49620,49623,49624,49632,49636,49640,49648,49649,49651,49660,49661,49664,49668,49676,49677,49679,49681,49688,49689,49692,49695,49696,49704,49705,49707,49709,54231,54233,54234,54235,54236,54237,54238,54239,54240,54242,54244,54245,54246,54247,54248,54249,54250,54251,54254,54255,54257,54258,54259,54261,54262,54263,null,null,null,null,null,null,54264,54265,54266,54267,54270,54272,54274,54275,54276,54277,54278,54279,54281,54282,54283,54284,54285,54286,54287,54288,54289,54290,54291,54292,54293,54294,null,null,null,null,null,null,54295,54296,54297,54298,54299,54300,54302,54303,54304,54305,54306,54307,54308,54309,54310,54311,54312,54313,54314,54315,54316,54317,54318,54319,54320,54321,54322,54323,54324,54325,54326,54327,49711,49713,49714,49716,49736,49744,49745,49748,49752,49760,49765,49772,49773,49776,49780,49788,49789,49791,49793,49800,49801,49808,49816,49819,49821,49828,49829,49832,49836,49837,49844,49845,49847,49849,49884,49885,49888,49891,49892,49899,49900,49901,49903,49905,49910,49912,49913,49915,49916,49920,49928,49929,49932,49933,49939,49940,49941,49944,49948,49956,49957,49960,49961,49989,50024,50025,50028,50032,50034,50040,50041,50044,50045,50052,50056,50060,50112,50136,50137,50140,50143,50144,50146,50152,50153,50157,50164,50165,50168,50184,50192,50212,50220,50224,54328,54329,54330,54331,54332,54333,54334,54335,54337,54338,54339,54341,54342,54343,54344,54345,54346,54347,54348,54349,54350,54351,54352,54353,54354,54355,null,null,null,null,null,null,54356,54357,54358,54359,54360,54361,54362,54363,54365,54366,54367,54369,54370,54371,54373,54374,54375,54376,54377,54378,54379,54380,54382,54384,54385,54386,null,null,null,null,null,null,54387,54388,54389,54390,54391,54394,54395,54397,54398,54401,54403,54404,54405,54406,54407,54410,54412,54414,54415,54416,54417,54418,54419,54421,54422,54423,54424,54425,54426,54427,54428,54429,50228,50236,50237,50248,50276,50277,50280,50284,50292,50293,50297,50304,50324,50332,50360,50364,50409,50416,50417,50420,50424,50426,50431,50432,50433,50444,50448,50452,50460,50472,50473,50476,50480,50488,50489,50491,50493,50500,50501,50504,50505,50506,50508,50509,50510,50515,50516,50517,50519,50520,50521,50525,50526,50528,50529,50532,50536,50544,50545,50547,50548,50549,50556,50557,50560,50564,50567,50572,50573,50575,50577,50581,50583,50584,50588,50592,50601,50612,50613,50616,50617,50619,50620,50621,50622,50628,50629,50630,50631,50632,50633,50634,50636,50638,54430,54431,54432,54433,54434,54435,54436,54437,54438,54439,54440,54442,54443,54444,54445,54446,54447,54448,54449,54450,54451,54452,54453,54454,54455,54456,null,null,null,null,null,null,54457,54458,54459,54460,54461,54462,54463,54464,54465,54466,54467,54468,54469,54470,54471,54472,54473,54474,54475,54477,54478,54479,54481,54482,54483,54485,null,null,null,null,null,null,54486,54487,54488,54489,54490,54491,54493,54494,54496,54497,54498,54499,54500,54501,54502,54503,54505,54506,54507,54509,54510,54511,54513,54514,54515,54516,54517,54518,54519,54521,54522,54524,50640,50641,50644,50648,50656,50657,50659,50661,50668,50669,50670,50672,50676,50678,50679,50684,50685,50686,50687,50688,50689,50693,50694,50695,50696,50700,50704,50712,50713,50715,50716,50724,50725,50728,50732,50733,50734,50736,50739,50740,50741,50743,50745,50747,50752,50753,50756,50760,50768,50769,50771,50772,50773,50780,50781,50784,50796,50799,50801,50808,50809,50812,50816,50824,50825,50827,50829,50836,50837,50840,50844,50852,50853,50855,50857,50864,50865,50868,50872,50873,50874,50880,50881,50883,50885,50892,50893,50896,50900,50908,50909,50912,50913,50920,54526,54527,54528,54529,54530,54531,54533,54534,54535,54537,54538,54539,54541,54542,54543,54544,54545,54546,54547,54550,54552,54553,54554,54555,54556,54557,null,null,null,null,null,null,54558,54559,54560,54561,54562,54563,54564,54565,54566,54567,54568,54569,54570,54571,54572,54573,54574,54575,54576,54577,54578,54579,54580,54581,54582,54583,null,null,null,null,null,null,54584,54585,54586,54587,54590,54591,54593,54594,54595,54597,54598,54599,54600,54601,54602,54603,54606,54608,54610,54611,54612,54613,54614,54615,54618,54619,54621,54622,54623,54625,54626,54627,50921,50924,50928,50936,50937,50941,50948,50949,50952,50956,50964,50965,50967,50969,50976,50977,50980,50984,50992,50993,50995,50997,50999,51004,51005,51008,51012,51018,51020,51021,51023,51025,51026,51027,51028,51029,51030,51031,51032,51036,51040,51048,51051,51060,51061,51064,51068,51069,51070,51075,51076,51077,51079,51080,51081,51082,51086,51088,51089,51092,51094,51095,51096,51098,51104,51105,51107,51108,51109,51110,51116,51117,51120,51124,51132,51133,51135,51136,51137,51144,51145,51148,51150,51152,51160,51165,51172,51176,51180,51200,51201,51204,51208,51210,54628,54630,54631,54634,54636,54638,54639,54640,54641,54642,54643,54646,54647,54649,54650,54651,54653,54654,54655,54656,54657,54658,54659,54662,54666,54667,null,null,null,null,null,null,54668,54669,54670,54671,54673,54674,54675,54676,54677,54678,54679,54680,54681,54682,54683,54684,54685,54686,54687,54688,54689,54690,54691,54692,54694,54695,null,null,null,null,null,null,54696,54697,54698,54699,54700,54701,54702,54703,54704,54705,54706,54707,54708,54709,54710,54711,54712,54713,54714,54715,54716,54717,54718,54719,54720,54721,54722,54723,54724,54725,54726,54727,51216,51217,51219,51221,51222,51228,51229,51232,51236,51244,51245,51247,51249,51256,51260,51264,51272,51273,51276,51277,51284,51312,51313,51316,51320,51322,51328,51329,51331,51333,51334,51335,51339,51340,51341,51348,51357,51359,51361,51368,51388,51389,51396,51400,51404,51412,51413,51415,51417,51424,51425,51428,51445,51452,51453,51456,51460,51461,51462,51468,51469,51471,51473,51480,51500,51508,51536,51537,51540,51544,51552,51553,51555,51564,51568,51572,51580,51592,51593,51596,51600,51608,51609,51611,51613,51648,51649,51652,51655,51656,51658,51664,51665,51667,54730,54731,54733,54734,54735,54737,54739,54740,54741,54742,54743,54746,54748,54750,54751,54752,54753,54754,54755,54758,54759,54761,54762,54763,54765,54766,null,null,null,null,null,null,54767,54768,54769,54770,54771,54774,54776,54778,54779,54780,54781,54782,54783,54786,54787,54789,54790,54791,54793,54794,54795,54796,54797,54798,54799,54802,null,null,null,null,null,null,54806,54807,54808,54809,54810,54811,54813,54814,54815,54817,54818,54819,54821,54822,54823,54824,54825,54826,54827,54828,54830,54831,54832,54833,54834,54835,54836,54837,54838,54839,54842,54843,51669,51670,51673,51674,51676,51677,51680,51682,51684,51687,51692,51693,51695,51696,51697,51704,51705,51708,51712,51720,51721,51723,51724,51725,51732,51736,51753,51788,51789,51792,51796,51804,51805,51807,51808,51809,51816,51837,51844,51864,51900,51901,51904,51908,51916,51917,51919,51921,51923,51928,51929,51936,51948,51956,51976,51984,51988,51992,52000,52001,52033,52040,52041,52044,52048,52056,52057,52061,52068,52088,52089,52124,52152,52180,52196,52199,52201,52236,52237,52240,52244,52252,52253,52257,52258,52263,52264,52265,52268,52270,52272,52280,52281,52283,54845,54846,54847,54849,54850,54851,54852,54854,54855,54858,54860,54862,54863,54864,54866,54867,54870,54871,54873,54874,54875,54877,54878,54879,54880,54881,null,null,null,null,null,null,54882,54883,54884,54885,54886,54888,54890,54891,54892,54893,54894,54895,54898,54899,54901,54902,54903,54904,54905,54906,54907,54908,54909,54910,54911,54912,null,null,null,null,null,null,54913,54914,54916,54918,54919,54920,54921,54922,54923,54926,54927,54929,54930,54931,54933,54934,54935,54936,54937,54938,54939,54940,54942,54944,54946,54947,54948,54949,54950,54951,54953,54954,52284,52285,52286,52292,52293,52296,52300,52308,52309,52311,52312,52313,52320,52324,52326,52328,52336,52341,52376,52377,52380,52384,52392,52393,52395,52396,52397,52404,52405,52408,52412,52420,52421,52423,52425,52432,52436,52452,52460,52464,52481,52488,52489,52492,52496,52504,52505,52507,52509,52516,52520,52524,52537,52572,52576,52580,52588,52589,52591,52593,52600,52616,52628,52629,52632,52636,52644,52645,52647,52649,52656,52676,52684,52688,52712,52716,52720,52728,52729,52731,52733,52740,52744,52748,52756,52761,52768,52769,52772,52776,52784,52785,52787,52789,54955,54957,54958,54959,54961,54962,54963,54964,54965,54966,54967,54968,54970,54972,54973,54974,54975,54976,54977,54978,54979,54982,54983,54985,54986,54987,null,null,null,null,null,null,54989,54990,54991,54992,54994,54995,54997,54998,55000,55002,55003,55004,55005,55006,55007,55009,55010,55011,55013,55014,55015,55017,55018,55019,55020,55021,null,null,null,null,null,null,55022,55023,55025,55026,55027,55028,55030,55031,55032,55033,55034,55035,55038,55039,55041,55042,55043,55045,55046,55047,55048,55049,55050,55051,55052,55053,55054,55055,55056,55058,55059,55060,52824,52825,52828,52831,52832,52833,52840,52841,52843,52845,52852,52853,52856,52860,52868,52869,52871,52873,52880,52881,52884,52888,52896,52897,52899,52900,52901,52908,52909,52929,52964,52965,52968,52971,52972,52980,52981,52983,52984,52985,52992,52993,52996,53000,53008,53009,53011,53013,53020,53024,53028,53036,53037,53039,53040,53041,53048,53076,53077,53080,53084,53092,53093,53095,53097,53104,53105,53108,53112,53120,53125,53132,53153,53160,53168,53188,53216,53217,53220,53224,53232,53233,53235,53237,53244,53248,53252,53265,53272,53293,53300,53301,53304,53308,55061,55062,55063,55066,55067,55069,55070,55071,55073,55074,55075,55076,55077,55078,55079,55082,55084,55086,55087,55088,55089,55090,55091,55094,55095,55097,null,null,null,null,null,null,55098,55099,55101,55102,55103,55104,55105,55106,55107,55109,55110,55112,55114,55115,55116,55117,55118,55119,55122,55123,55125,55130,55131,55132,55133,55134,null,null,null,null,null,null,55135,55138,55140,55142,55143,55144,55146,55147,55149,55150,55151,55153,55154,55155,55157,55158,55159,55160,55161,55162,55163,55166,55167,55168,55170,55171,55172,55173,55174,55175,55178,55179,53316,53317,53319,53321,53328,53332,53336,53344,53356,53357,53360,53364,53372,53373,53377,53412,53413,53416,53420,53428,53429,53431,53433,53440,53441,53444,53448,53449,53456,53457,53459,53460,53461,53468,53469,53472,53476,53484,53485,53487,53488,53489,53496,53517,53552,53553,53556,53560,53562,53568,53569,53571,53572,53573,53580,53581,53584,53588,53596,53597,53599,53601,53608,53612,53628,53636,53640,53664,53665,53668,53672,53680,53681,53683,53685,53690,53692,53696,53720,53748,53752,53767,53769,53776,53804,53805,53808,53812,53820,53821,53823,53825,53832,53852,55181,55182,55183,55185,55186,55187,55188,55189,55190,55191,55194,55196,55198,55199,55200,55201,55202,55203,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,53860,53888,53889,53892,53896,53904,53905,53909,53916,53920,53924,53932,53937,53944,53945,53948,53951,53952,53954,53960,53961,53963,53972,53976,53980,53988,53989,54000,54001,54004,54008,54016,54017,54019,54021,54028,54029,54030,54032,54036,54038,54044,54045,54047,54048,54049,54053,54056,54057,54060,54064,54072,54073,54075,54076,54077,54084,54085,54140,54141,54144,54148,54156,54157,54159,54160,54161,54168,54169,54172,54176,54184,54185,54187,54189,54196,54200,54204,54212,54213,54216,54217,54224,54232,54241,54243,54252,54253,54256,54260,54268,54269,54271,54273,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,54280,54301,54336,54340,54364,54368,54372,54381,54383,54392,54393,54396,54399,54400,54402,54408,54409,54411,54413,54420,54441,54476,54480,54484,54492,54495,54504,54508,54512,54520,54523,54525,54532,54536,54540,54548,54549,54551,54588,54589,54592,54596,54604,54605,54607,54609,54616,54617,54620,54624,54629,54632,54633,54635,54637,54644,54645,54648,54652,54660,54661,54663,54664,54665,54672,54693,54728,54729,54732,54736,54738,54744,54745,54747,54749,54756,54757,54760,54764,54772,54773,54775,54777,54784,54785,54788,54792,54800,54801,54803,54804,54805,54812,54816,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,54820,54829,54840,54841,54844,54848,54853,54856,54857,54859,54861,54865,54868,54869,54872,54876,54887,54889,54896,54897,54900,54915,54917,54924,54925,54928,54932,54941,54943,54945,54952,54956,54960,54969,54971,54980,54981,54984,54988,54993,54996,54999,55001,55008,55012,55016,55024,55029,55036,55037,55040,55044,55057,55064,55065,55068,55072,55080,55081,55083,55085,55092,55093,55096,55100,55108,55111,55113,55120,55121,55124,55126,55127,55128,55129,55136,55137,55139,55141,55145,55148,55152,55156,55164,55165,55169,55176,55177,55180,55184,55192,55193,55195,55197,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20285,20339,20551,20729,21152,21487,21621,21733,22025,23233,23478,26247,26550,26551,26607,27468,29634,30146,31292,33499,33540,34903,34952,35382,36040,36303,36603,36838,39381,21051,21364,21508,24682,24932,27580,29647,33050,35258,35282,38307,20355,21002,22718,22904,23014,24178,24185,25031,25536,26438,26604,26751,28567,30286,30475,30965,31240,31487,31777,32925,33390,33393,35563,38291,20075,21917,26359,28212,30883,31469,33883,35088,34638,38824,21208,22350,22570,23884,24863,25022,25121,25954,26577,27204,28187,29976,30131,30435,30640,32058,37039,37969,37970,40853,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21283,23724,30002,32987,37440,38296,21083,22536,23004,23713,23831,24247,24378,24394,24951,27743,30074,30086,31968,32115,32177,32652,33108,33313,34193,35137,35611,37628,38477,40007,20171,20215,20491,20977,22607,24887,24894,24936,25913,27114,28433,30117,30342,30422,31623,33445,33995,63744,37799,38283,21888,23458,22353,63745,31923,32697,37301,20520,21435,23621,24040,25298,25454,25818,25831,28192,28844,31067,36317,36382,63746,36989,37445,37624,20094,20214,20581,24062,24314,24838,26967,33137,34388,36423,37749,39467,20062,20625,26480,26688,20745,21133,21138,27298,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,30652,37392,40660,21163,24623,36850,20552,25001,25581,25802,26684,27268,28608,33160,35233,38548,22533,29309,29356,29956,32121,32365,32937,35211,35700,36963,40273,25225,27770,28500,32080,32570,35363,20860,24906,31645,35609,37463,37772,20140,20435,20510,20670,20742,21185,21197,21375,22384,22659,24218,24465,24950,25004,25806,25964,26223,26299,26356,26775,28039,28805,28913,29855,29861,29898,30169,30828,30956,31455,31478,32069,32147,32789,32831,33051,33686,35686,36629,36885,37857,38915,38968,39514,39912,20418,21843,22586,22865,23395,23622,24760,25106,26690,26800,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26856,28330,30028,30328,30926,31293,31995,32363,32380,35336,35489,35903,38542,40388,21476,21481,21578,21617,22266,22993,23396,23611,24235,25335,25911,25925,25970,26272,26543,27073,27837,30204,30352,30590,31295,32660,32771,32929,33167,33510,33533,33776,34241,34865,34996,35493,63747,36764,37678,38599,39015,39640,40723,21741,26011,26354,26767,31296,35895,40288,22256,22372,23825,26118,26801,26829,28414,29736,34974,39908,27752,63748,39592,20379,20844,20849,21151,23380,24037,24656,24685,25329,25511,25915,29657,31354,34467,36002,38799,20018,23521,25096,26524,29916,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,31185,33747,35463,35506,36328,36942,37707,38982,24275,27112,34303,37101,63749,20896,23448,23532,24931,26874,27454,28748,29743,29912,31649,32592,33733,35264,36011,38364,39208,21038,24669,25324,36866,20362,20809,21281,22745,24291,26336,27960,28826,29378,29654,31568,33009,37979,21350,25499,32619,20054,20608,22602,22750,24618,24871,25296,27088,39745,23439,32024,32945,36703,20132,20689,21676,21932,23308,23968,24039,25898,25934,26657,27211,29409,30350,30703,32094,32761,33184,34126,34527,36611,36686,37066,39171,39509,39851,19992,20037,20061,20167,20465,20855,21246,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21312,21475,21477,21646,22036,22389,22434,23495,23943,24272,25084,25304,25937,26552,26601,27083,27472,27590,27628,27714,28317,28792,29399,29590,29699,30655,30697,31350,32127,32777,33276,33285,33290,33503,34914,35635,36092,36544,36881,37041,37476,37558,39378,39493,40169,40407,40860,22283,23616,33738,38816,38827,40628,21531,31384,32676,35033,36557,37089,22528,23624,25496,31391,23470,24339,31353,31406,33422,36524,20518,21048,21240,21367,22280,25331,25458,27402,28099,30519,21413,29527,34152,36470,38357,26426,27331,28528,35437,36556,39243,63750,26231,27512,36020,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,39740,63751,21483,22317,22862,25542,27131,29674,30789,31418,31429,31998,33909,35215,36211,36917,38312,21243,22343,30023,31584,33740,37406,63752,27224,20811,21067,21127,25119,26840,26997,38553,20677,21156,21220,25027,26020,26681,27135,29822,31563,33465,33771,35250,35641,36817,39241,63753,20170,22935,25810,26129,27278,29748,31105,31165,33449,34942,34943,35167,63754,37670,20235,21450,24613,25201,27762,32026,32102,20120,20834,30684,32943,20225,20238,20854,20864,21980,22120,22331,22522,22524,22804,22855,22931,23492,23696,23822,24049,24190,24524,25216,26071,26083,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26398,26399,26462,26827,26820,27231,27450,27683,27773,27778,28103,29592,29734,29738,29826,29859,30072,30079,30849,30959,31041,31047,31048,31098,31637,32000,32186,32648,32774,32813,32908,35352,35663,35912,36215,37665,37668,39138,39249,39438,39439,39525,40594,32202,20342,21513,25326,26708,37329,21931,20794,63755,63756,23068,25062,63757,25295,25343,63758,63759,63760,63761,63762,63763,37027,63764,63765,63766,63767,63768,35582,63769,63770,63771,63772,26262,63773,29014,63774,63775,38627,63776,25423,25466,21335,63777,26511,26976,28275,63778,30007,63779,63780,63781,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,32013,63782,63783,34930,22218,23064,63784,63785,63786,63787,63788,20035,63789,20839,22856,26608,32784,63790,22899,24180,25754,31178,24565,24684,25288,25467,23527,23511,21162,63791,22900,24361,24594,63792,63793,63794,29785,63795,63796,63797,63798,63799,63800,39377,63801,63802,63803,63804,63805,63806,63807,63808,63809,63810,63811,28611,63812,63813,33215,36786,24817,63814,63815,33126,63816,63817,23615,63818,63819,63820,63821,63822,63823,63824,63825,23273,35365,26491,32016,63826,63827,63828,63829,63830,63831,33021,63832,63833,23612,27877,21311,28346,22810,33590,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20025,20150,20294,21934,22296,22727,24406,26039,26086,27264,27573,28237,30701,31471,31774,32222,34507,34962,37170,37723,25787,28606,29562,30136,36948,21846,22349,25018,25812,26311,28129,28251,28525,28601,30192,32835,33213,34113,35203,35527,35674,37663,27795,30035,31572,36367,36957,21776,22530,22616,24162,25095,25758,26848,30070,31958,34739,40680,20195,22408,22382,22823,23565,23729,24118,24453,25140,25825,29619,33274,34955,36024,38538,40667,23429,24503,24755,20498,20992,21040,22294,22581,22615,23566,23648,23798,23947,24230,24466,24764,25361,25481,25623,26691,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26873,27330,28120,28193,28372,28644,29182,30428,30585,31153,31291,33796,35241,36077,36339,36424,36867,36884,36947,37117,37709,38518,38876,27602,28678,29272,29346,29544,30563,31167,31716,32411,35712,22697,24775,25958,26109,26302,27788,28958,29129,35930,38931,20077,31361,20189,20908,20941,21205,21516,24999,26481,26704,26847,27934,28540,30140,30643,31461,33012,33891,37509,20828,26007,26460,26515,30168,31431,33651,63834,35910,36887,38957,23663,33216,33434,36929,36975,37389,24471,23965,27225,29128,30331,31561,34276,35588,37159,39472,21895,25078,63835,30313,32645,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,34367,34746,35064,37007,63836,27931,28889,29662,32097,33853,63837,37226,39409,63838,20098,21365,27396,27410,28734,29211,34349,40478,21068,36771,23888,25829,25900,27414,28651,31811,32412,34253,35172,35261,25289,33240,34847,24266,26391,28010,29436,29701,29807,34690,37086,20358,23821,24480,33802,20919,25504,30053,20142,20486,20841,20937,26753,27153,31918,31921,31975,33391,35538,36635,37327,20406,20791,21237,21570,24300,24942,25150,26053,27354,28670,31018,34268,34851,38317,39522,39530,40599,40654,21147,26310,27511,28701,31019,36706,38722,24976,25088,25891,28451,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,29001,29833,32244,32879,34030,36646,36899,37706,20925,21015,21155,27916,28872,35010,24265,25986,27566,28610,31806,29557,20196,20278,22265,63839,23738,23994,24604,29618,31533,32666,32718,32838,36894,37428,38646,38728,38936,40801,20363,28583,31150,37300,38583,21214,63840,25736,25796,27347,28510,28696,29200,30439,32769,34310,34396,36335,36613,38706,39791,40442,40565,30860,31103,32160,33737,37636,40575,40595,35542,22751,24324,26407,28711,29903,31840,32894,20769,28712,29282,30922,36034,36058,36084,38647,20102,20698,23534,24278,26009,29134,30274,30637,32842,34044,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36988,39719,40845,22744,23105,23650,27155,28122,28431,30267,32047,32311,34078,35128,37860,38475,21129,26066,26611,27060,27969,28316,28687,29705,29792,30041,30244,30827,35628,39006,20845,25134,38520,20374,20523,23833,28138,32184,36650,24459,24900,26647,63841,38534,21202,32907,20956,20940,26974,31260,32190,33777,38517,20442,21033,21400,21519,21774,23653,24743,26446,26792,28012,29313,29432,29702,29827,63842,30178,31852,32633,32696,33673,35023,35041,37324,37328,38626,39881,21533,28542,29136,29848,34298,36522,38563,40023,40607,26519,28107,29747,33256,38678,30764,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,31435,31520,31890,25705,29802,30194,30908,30952,39340,39764,40635,23518,24149,28448,33180,33707,37000,19975,21325,23081,24018,24398,24930,25405,26217,26364,28415,28459,28771,30622,33836,34067,34875,36627,39237,39995,21788,25273,26411,27819,33545,35178,38778,20129,22916,24536,24537,26395,32178,32596,33426,33579,33725,36638,37017,22475,22969,23186,23504,26151,26522,26757,27599,29028,32629,36023,36067,36993,39749,33032,35978,38476,39488,40613,23391,27667,29467,30450,30431,33804,20906,35219,20813,20885,21193,26825,27796,30468,30496,32191,32236,38754,40629,28357,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,34065,20901,21517,21629,26126,26269,26919,28319,30399,30609,33559,33986,34719,37225,37528,40180,34946,20398,20882,21215,22982,24125,24917,25720,25721,26286,26576,27169,27597,27611,29279,29281,29761,30520,30683,32791,33468,33541,35584,35624,35980,26408,27792,29287,30446,30566,31302,40361,27519,27794,22818,26406,33945,21359,22675,22937,24287,25551,26164,26483,28218,29483,31447,33495,37672,21209,24043,25006,25035,25098,25287,25771,26080,26969,27494,27595,28961,29687,30045,32326,33310,33538,34154,35491,36031,38695,40289,22696,40664,20497,21006,21563,21839,25991,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,27766,32010,32011,32862,34442,38272,38639,21247,27797,29289,21619,23194,23614,23883,24396,24494,26410,26806,26979,28220,28228,30473,31859,32654,34183,35598,36855,38753,40692,23735,24758,24845,25003,25935,26107,26108,27665,27887,29599,29641,32225,38292,23494,34588,35600,21085,21338,25293,25615,25778,26420,27192,27850,29632,29854,31636,31893,32283,33162,33334,34180,36843,38649,39361,20276,21322,21453,21467,25292,25644,25856,26001,27075,27886,28504,29677,30036,30242,30436,30460,30928,30971,31020,32070,33324,34784,36820,38930,39151,21187,25300,25765,28196,28497,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,30332,36299,37297,37474,39662,39747,20515,20621,22346,22952,23592,24135,24439,25151,25918,26041,26049,26121,26507,27036,28354,30917,32033,32938,33152,33323,33459,33953,34444,35370,35607,37030,38450,40848,20493,20467,63843,22521,24472,25308,25490,26479,28227,28953,30403,32972,32986,35060,35061,35097,36064,36649,37197,38506,20271,20336,24091,26575,26658,30333,30334,39748,24161,27146,29033,29140,30058,63844,32321,34115,34281,39132,20240,31567,32624,38309,20961,24070,26805,27710,27726,27867,29359,31684,33539,27861,29754,20731,21128,22721,25816,27287,29863,30294,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,30887,34327,38370,38713,63845,21342,24321,35722,36776,36783,37002,21029,30629,40009,40712,19993,20482,20853,23643,24183,26142,26170,26564,26821,28851,29953,30149,31177,31453,36647,39200,39432,20445,22561,22577,23542,26222,27493,27921,28282,28541,29668,29995,33769,35036,35091,35676,36628,20239,20693,21264,21340,23443,24489,26381,31119,33145,33583,34068,35079,35206,36665,36667,39333,39954,26412,20086,20472,22857,23553,23791,23792,25447,26834,28925,29090,29739,32299,34028,34562,36898,37586,40179,19981,20184,20463,20613,21078,21103,21542,21648,22496,22827,23142,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,23386,23413,23500,24220,63846,25206,25975,26023,28014,28325,29238,31526,31807,32566,33104,33105,33178,33344,33433,33705,35331,36000,36070,36091,36212,36282,37096,37340,38428,38468,39385,40167,21271,20998,21545,22132,22707,22868,22894,24575,24996,25198,26128,27774,28954,30406,31881,31966,32027,33452,36033,38640,63847,20315,24343,24447,25282,23849,26379,26842,30844,32323,40300,19989,20633,21269,21290,21329,22915,23138,24199,24754,24970,25161,25209,26000,26503,27047,27604,27606,27607,27608,27832,63848,29749,30202,30738,30865,31189,31192,31875,32203,32737,32933,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,33086,33218,33778,34586,35048,35513,35692,36027,37145,38750,39131,40763,22188,23338,24428,25996,27315,27567,27996,28657,28693,29277,29613,36007,36051,38971,24977,27703,32856,39425,20045,20107,20123,20181,20282,20284,20351,20447,20735,21490,21496,21766,21987,22235,22763,22882,23057,23531,23546,23556,24051,24107,24473,24605,25448,26012,26031,26614,26619,26797,27515,27801,27863,28195,28681,29509,30722,31038,31040,31072,31169,31721,32023,32114,32902,33293,33678,34001,34503,35039,35408,35422,35613,36060,36198,36781,37034,39164,39391,40605,21066,63849,26388,63850,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20632,21034,23665,25955,27733,29642,29987,30109,31639,33948,37240,38704,20087,25746,27578,29022,34217,19977,63851,26441,26862,28183,33439,34072,34923,25591,28545,37394,39087,19978,20663,20687,20767,21830,21930,22039,23360,23577,23776,24120,24202,24224,24258,24819,26705,27233,28248,29245,29248,29376,30456,31077,31665,32724,35059,35316,35443,35937,36062,38684,22622,29885,36093,21959,63852,31329,32034,33394,29298,29983,29989,63853,31513,22661,22779,23996,24207,24246,24464,24661,25234,25471,25933,26257,26329,26360,26646,26866,29312,29790,31598,32110,32214,32626,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,32997,33298,34223,35199,35475,36893,37604,40653,40736,22805,22893,24109,24796,26132,26227,26512,27728,28101,28511,30707,30889,33990,37323,37675,20185,20682,20808,21892,23307,23459,25159,25982,26059,28210,29053,29697,29764,29831,29887,30316,31146,32218,32341,32680,33146,33203,33337,34330,34796,35445,36323,36984,37521,37925,39245,39854,21352,23633,26964,27844,27945,28203,33292,34203,35131,35373,35498,38634,40807,21089,26297,27570,32406,34814,36109,38275,38493,25885,28041,29166,63854,22478,22995,23468,24615,24826,25104,26143,26207,29481,29689,30427,30465,31596,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,32854,32882,33125,35488,37266,19990,21218,27506,27927,31237,31545,32048,63855,36016,21484,22063,22609,23477,23567,23569,24034,25152,25475,25620,26157,26803,27836,28040,28335,28703,28836,29138,29990,30095,30094,30233,31505,31712,31787,32032,32057,34092,34157,34311,35380,36877,36961,37045,37559,38902,39479,20439,23660,26463,28049,31903,32396,35606,36118,36895,23403,24061,25613,33984,36956,39137,29575,23435,24730,26494,28126,35359,35494,36865,38924,21047,63856,28753,30862,37782,34928,37335,20462,21463,22013,22234,22402,22781,23234,23432,23723,23744,24101,24833,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,25101,25163,25480,25628,25910,25976,27193,27530,27700,27929,28465,29159,29417,29560,29703,29874,30246,30561,31168,31319,31466,31929,32143,32172,32353,32670,33065,33585,33936,34010,34282,34966,35504,35728,36664,36930,36995,37228,37526,37561,38539,38567,38568,38614,38656,38920,39318,39635,39706,21460,22654,22809,23408,23487,28113,28506,29087,29729,29881,32901,33789,24033,24455,24490,24642,26092,26642,26991,27219,27529,27957,28147,29667,30462,30636,31565,32020,33059,33308,33600,34036,34147,35426,35524,37255,37662,38918,39348,25100,34899,36848,37477,23815,23847,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,23913,29791,33181,34664,28629,25342,32722,35126,35186,19998,20056,20711,21213,21319,25215,26119,32361,34821,38494,20365,21273,22070,22987,23204,23608,23630,23629,24066,24337,24643,26045,26159,26178,26558,26612,29468,30690,31034,32709,33940,33997,35222,35430,35433,35553,35925,35962,22516,23508,24335,24687,25325,26893,27542,28252,29060,31698,34645,35672,36606,39135,39166,20280,20353,20449,21627,23072,23480,24892,26032,26216,29180,30003,31070,32051,33102,33251,33688,34218,34254,34563,35338,36523,36763,63857,36805,22833,23460,23526,24713,23529,23563,24515,27777,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,63858,28145,28683,29978,33455,35574,20160,21313,63859,38617,27663,20126,20420,20818,21854,23077,23784,25105,29273,33469,33706,34558,34905,35357,38463,38597,39187,40201,40285,22538,23731,23997,24132,24801,24853,25569,27138,28197,37122,37716,38990,39952,40823,23433,23736,25353,26191,26696,30524,38593,38797,38996,39839,26017,35585,36555,38332,21813,23721,24022,24245,26263,30284,33780,38343,22739,25276,29390,40232,20208,22830,24591,26171,27523,31207,40230,21395,21696,22467,23830,24859,26326,28079,30861,33406,38552,38724,21380,25212,25494,28082,32266,33099,38989,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,27387,32588,40367,40474,20063,20539,20918,22812,24825,25590,26928,29242,32822,63860,37326,24369,63861,63862,32004,33509,33903,33979,34277,36493,63863,20335,63864,63865,22756,23363,24665,25562,25880,25965,26264,63866,26954,27171,27915,28673,29036,30162,30221,31155,31344,63867,32650,63868,35140,63869,35731,37312,38525,63870,39178,22276,24481,26044,28417,30208,31142,35486,39341,39770,40812,20740,25014,25233,27277,33222,20547,22576,24422,28937,35328,35578,23420,34326,20474,20796,22196,22852,25513,28153,23978,26989,20870,20104,20313,63871,63872,63873,22914,63874,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,63875,27487,27741,63876,29877,30998,63877,33287,33349,33593,36671,36701,63878,39192,63879,63880,63881,20134,63882,22495,24441,26131,63883,63884,30123,32377,35695,63885,36870,39515,22181,22567,23032,23071,23476,63886,24310,63887,63888,25424,25403,63889,26941,27783,27839,28046,28051,28149,28436,63890,28895,28982,29017,63891,29123,29141,63892,30799,30831,63893,31605,32227,63894,32303,63895,34893,36575,63896,63897,63898,37467,63899,40182,63900,63901,63902,24709,28037,63903,29105,63904,63905,38321,21421,63906,63907,63908,26579,63909,28814,28976,29744,33398,33490,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,63910,38331,39653,40573,26308,63911,29121,33865,63912,63913,22603,63914,63915,23992,24433,63916,26144,26254,27001,27054,27704,27891,28214,28481,28634,28699,28719,29008,29151,29552,63917,29787,63918,29908,30408,31310,32403,63919,63920,33521,35424,36814,63921,37704,63922,38681,63923,63924,20034,20522,63925,21000,21473,26355,27757,28618,29450,30591,31330,33454,34269,34306,63926,35028,35427,35709,35947,63927,37555,63928,38675,38928,20116,20237,20425,20658,21320,21566,21555,21978,22626,22714,22887,23067,23524,24735,63929,25034,25942,26111,26212,26791,27738,28595,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,28879,29100,29522,31613,34568,35492,39986,40711,23627,27779,29508,29577,37434,28331,29797,30239,31337,32277,34314,20800,22725,25793,29934,29973,30320,32705,37013,38605,39252,28198,29926,31401,31402,33253,34521,34680,35355,23113,23436,23451,26785,26880,28003,29609,29715,29740,30871,32233,32747,33048,33109,33694,35916,38446,38929,26352,24448,26106,26505,27754,29579,20525,23043,27498,30702,22806,23916,24013,29477,30031,63930,63931,20709,20985,22575,22829,22934,23002,23525,63932,63933,23970,25303,25622,25747,25854,63934,26332,63935,27208,63936,29183,29796,63937,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,31368,31407,32327,32350,32768,33136,63938,34799,35201,35616,36953,63939,36992,39250,24958,27442,28020,32287,35109,36785,20433,20653,20887,21191,22471,22665,23481,24248,24898,27029,28044,28263,28342,29076,29794,29992,29996,32883,33592,33993,36362,37780,37854,63940,20110,20305,20598,20778,21448,21451,21491,23431,23507,23588,24858,24962,26100,29275,29591,29760,30402,31056,31121,31161,32006,32701,33419,34261,34398,36802,36935,37109,37354,38533,38632,38633,21206,24423,26093,26161,26671,29020,31286,37057,38922,20113,63941,27218,27550,28560,29065,32792,33464,34131,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36939,38549,38642,38907,34074,39729,20112,29066,38596,20803,21407,21729,22291,22290,22435,23195,23236,23491,24616,24895,25588,27781,27961,28274,28304,29232,29503,29783,33489,34945,36677,36960,63942,38498,39000,40219,26376,36234,37470,20301,20553,20702,21361,22285,22996,23041,23561,24944,26256,28205,29234,29771,32239,32963,33806,33894,34111,34655,34907,35096,35586,36949,38859,39759,20083,20369,20754,20842,63943,21807,21929,23418,23461,24188,24189,24254,24736,24799,24840,24841,25540,25912,26377,63944,26580,26586,63945,26977,26978,27833,27943,63946,28216,63947,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,28641,29494,29495,63948,29788,30001,63949,30290,63950,63951,32173,33278,33848,35029,35480,35547,35565,36400,36418,36938,36926,36986,37193,37321,37742,63952,63953,22537,63954,27603,32905,32946,63955,63956,20801,22891,23609,63957,63958,28516,29607,32996,36103,63959,37399,38287,63960,63961,63962,63963,32895,25102,28700,32104,34701,63964,22432,24681,24903,27575,35518,37504,38577,20057,21535,28139,34093,38512,38899,39150,25558,27875,37009,20957,25033,33210,40441,20381,20506,20736,23452,24847,25087,25836,26885,27589,30097,30691,32681,33380,34191,34811,34915,35516,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,35696,37291,20108,20197,20234,63965,63966,22839,23016,63967,24050,24347,24411,24609,63968,63969,63970,63971,29246,29669,63972,30064,30157,63973,31227,63974,32780,32819,32900,33505,33617,63975,63976,36029,36019,36999,63977,63978,39156,39180,63979,63980,28727,30410,32714,32716,32764,35610,20154,20161,20995,21360,63981,21693,22240,23035,23493,24341,24525,28270,63982,63983,32106,33589,63984,34451,35469,63985,38765,38775,63986,63987,19968,20314,20350,22777,26085,28322,36920,37808,39353,20219,22764,22922,23001,24641,63988,63989,31252,63990,33615,36035,20837,21316,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,63991,63992,63993,20173,21097,23381,33471,20180,21050,21672,22985,23039,23376,23383,23388,24675,24904,28363,28825,29038,29574,29943,30133,30913,32043,32773,33258,33576,34071,34249,35566,36039,38604,20316,21242,22204,26027,26152,28796,28856,29237,32189,33421,37196,38592,40306,23409,26855,27544,28538,30430,23697,26283,28507,31668,31786,34870,38620,19976,20183,21280,22580,22715,22767,22892,23559,24115,24196,24373,25484,26290,26454,27167,27299,27404,28479,29254,63994,29520,29835,31456,31911,33144,33247,33255,33674,33900,34083,34196,34255,35037,36115,37292,38263,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,38556,20877,21705,22312,23472,25165,26448,26685,26771,28221,28371,28797,32289,35009,36001,36617,40779,40782,29229,31631,35533,37658,20295,20302,20786,21632,22992,24213,25269,26485,26990,27159,27822,28186,29401,29482,30141,31672,32053,33511,33785,33879,34295,35419,36015,36487,36889,37048,38606,40799,21219,21514,23265,23490,25688,25973,28404,29380,63995,30340,31309,31515,31821,32318,32735,33659,35627,36042,36196,36321,36447,36842,36857,36969,37841,20291,20346,20659,20840,20856,21069,21098,22625,22652,22880,23560,23637,24283,24731,25136,26643,27583,27656,28593,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,29006,29728,30000,30008,30033,30322,31564,31627,31661,31686,32399,35438,36670,36681,37439,37523,37666,37931,38651,39002,39019,39198,20999,25130,25240,27993,30308,31434,31680,32118,21344,23742,24215,28472,28857,31896,38673,39822,40670,25509,25722,34678,19969,20117,20141,20572,20597,21576,22979,23450,24128,24237,24311,24449,24773,25402,25919,25972,26060,26230,26232,26622,26984,27273,27491,27712,28096,28136,28191,28254,28702,28833,29582,29693,30010,30555,30855,31118,31243,31357,31934,32142,33351,35330,35562,35998,37165,37194,37336,37478,37580,37664,38662,38742,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,38748,38914,40718,21046,21137,21884,22564,24093,24351,24716,25552,26799,28639,31085,31532,33229,34234,35069,35576,36420,37261,38500,38555,38717,38988,40778,20430,20806,20939,21161,22066,24340,24427,25514,25805,26089,26177,26362,26361,26397,26781,26839,27133,28437,28526,29031,29157,29226,29866,30522,31062,31066,31199,31264,31381,31895,31967,32068,32368,32903,34299,34468,35412,35519,36249,36481,36896,36973,37347,38459,38613,40165,26063,31751,36275,37827,23384,23562,21330,25305,29469,20519,23447,24478,24752,24939,26837,28121,29742,31278,32066,32156,32305,33131,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36394,36405,37758,37912,20304,22352,24038,24231,25387,32618,20027,20303,20367,20570,23005,32964,21610,21608,22014,22863,23449,24030,24282,26205,26417,26609,26666,27880,27954,28234,28557,28855,29664,30087,31820,32002,32044,32162,33311,34523,35387,35461,36208,36490,36659,36913,37198,37202,37956,39376,31481,31909,20426,20737,20934,22472,23535,23803,26201,27197,27994,28310,28652,28940,30063,31459,34850,36897,36981,38603,39423,33537,20013,20210,34886,37325,21373,27355,26987,27713,33914,22686,24974,26366,25327,28893,29969,30151,32338,33976,35657,36104,20043,21482,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21675,22320,22336,24535,25345,25351,25711,25903,26088,26234,26525,26547,27490,27744,27802,28460,30693,30757,31049,31063,32025,32930,33026,33267,33437,33463,34584,35468,63996,36100,36286,36978,30452,31257,31287,32340,32887,21767,21972,22645,25391,25634,26185,26187,26733,27035,27524,27941,28337,29645,29800,29857,30043,30137,30433,30494,30603,31206,32265,32285,33275,34095,34967,35386,36049,36587,36784,36914,37805,38499,38515,38663,20356,21489,23018,23241,24089,26702,29894,30142,31209,31378,33187,34541,36074,36300,36845,26015,26389,63997,22519,28503,32221,36655,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,37878,38598,24501,25074,28548,19988,20376,20511,21449,21983,23919,24046,27425,27492,30923,31642,63998,36425,36554,36974,25417,25662,30528,31364,37679,38015,40810,25776,28591,29158,29864,29914,31428,31762,32386,31922,32408,35738,36106,38013,39184,39244,21049,23519,25830,26413,32046,20717,21443,22649,24920,24921,25082,26028,31449,35730,35734,20489,20513,21109,21809,23100,24288,24432,24884,25950,26124,26166,26274,27085,28356,28466,29462,30241,31379,33081,33369,33750,33980,20661,22512,23488,23528,24425,25505,30758,32181,33756,34081,37319,37365,20874,26613,31574,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36012,20932,22971,24765,34389,20508,63999,21076,23610,24957,25114,25299,25842,26021,28364,30240,33034,36448,38495,38587,20191,21315,21912,22825,24029,25797,27849,28154,29588,31359,33307,34214,36068,36368,36983,37351,38369,38433,38854,20984,21746,21894,24505,25764,28552,32180,36639,36685,37941,20681,23574,27838,28155,29979,30651,31805,31844,35449,35522,22558,22974,24086,25463,29266,30090,30571,35548,36028,36626,24307,26228,28152,32893,33729,35531,38737,39894,64000,21059,26367,28053,28399,32224,35558,36910,36958,39636,21021,21119,21736,24980,25220,25307,26786,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26898,26970,27189,28818,28966,30813,30977,30990,31186,31245,32918,33400,33493,33609,34121,35970,36229,37218,37259,37294,20419,22225,29165,30679,34560,35320,23544,24534,26449,37032,21474,22618,23541,24740,24961,25696,32317,32880,34085,37507,25774,20652,23828,26368,22684,25277,25512,26894,27000,27166,28267,30394,31179,33467,33833,35535,36264,36861,37138,37195,37276,37648,37656,37786,38619,39478,39949,19985,30044,31069,31482,31569,31689,32302,33988,36441,36468,36600,36880,26149,26943,29763,20986,26414,40668,20805,24544,27798,34802,34909,34935,24756,33205,33795,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36101,21462,21561,22068,23094,23601,28810,32736,32858,33030,33261,36259,37257,39519,40434,20596,20164,21408,24827,28204,23652,20360,20516,21988,23769,24159,24677,26772,27835,28100,29118,30164,30196,30305,31258,31305,32199,32251,32622,33268,34473,36636,38601,39347,40786,21063,21189,39149,35242,19971,26578,28422,20405,23522,26517,27784,28024,29723,30759,37341,37756,34756,31204,31281,24555,20182,21668,21822,22702,22949,24816,25171,25302,26422,26965,33333,38464,39345,39389,20524,21331,21828,22396,64001,25176,64002,25826,26219,26589,28609,28655,29730,29752,35351,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,37944,21585,22022,22374,24392,24986,27470,28760,28845,32187,35477,22890,33067,25506,30472,32829,36010,22612,25645,27067,23445,24081,28271,64003,34153,20812,21488,22826,24608,24907,27526,27760,27888,31518,32974,33492,36294,37040,39089,64004,25799,28580,25745,25860,20814,21520,22303,35342,24927,26742,64005,30171,31570,32113,36890,22534,27084,33151,35114,36864,38969,20600,22871,22956,25237,36879,39722,24925,29305,38358,22369,23110,24052,25226,25773,25850,26487,27874,27966,29228,29750,30772,32631,33453,36315,38935,21028,22338,26495,29256,29923,36009,36774,37393,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,38442,20843,21485,25420,20329,21764,24726,25943,27803,28031,29260,29437,31255,35207,35997,24429,28558,28921,33192,24846,20415,20559,25153,29255,31687,32232,32745,36941,38829,39449,36022,22378,24179,26544,33805,35413,21536,23318,24163,24290,24330,25987,32954,34109,38281,38491,20296,21253,21261,21263,21638,21754,22275,24067,24598,25243,25265,25429,64006,27873,28006,30129,30770,32990,33071,33502,33889,33970,34957,35090,36875,37610,39165,39825,24133,26292,26333,28689,29190,64007,20469,21117,24426,24915,26451,27161,28418,29922,31080,34920,35961,39111,39108,39491,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21697,31263,26963,35575,35914,39080,39342,24444,25259,30130,30382,34987,36991,38466,21305,24380,24517,27852,29644,30050,30091,31558,33534,39325,20047,36924,19979,20309,21414,22799,24264,26160,27827,29781,33655,34662,36032,36944,38686,39957,22737,23416,34384,35604,40372,23506,24680,24717,26097,27735,28450,28579,28698,32597,32752,38289,38290,38480,38867,21106,36676,20989,21547,21688,21859,21898,27323,28085,32216,33382,37532,38519,40569,21512,21704,30418,34532,38308,38356,38492,20130,20233,23022,23270,24055,24658,25239,26477,26689,27782,28207,32568,32923,33322,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,64008,64009,38917,20133,20565,21683,22419,22874,23401,23475,25032,26999,28023,28707,34809,35299,35442,35559,36994,39405,39608,21182,26680,20502,24184,26447,33607,34892,20139,21521,22190,29670,37141,38911,39177,39255,39321,22099,22687,34395,35377,25010,27382,29563,36562,27463,38570,39511,22869,29184,36203,38761,20436,23796,24358,25080,26203,27883,28843,29572,29625,29694,30505,30541,32067,32098,32291,33335,34898,64010,36066,37449,39023,23377,31348,34880,38913,23244,20448,21332,22846,23805,25406,28025,29433,33029,33031,33698,37583,38960,20136,20804,21009,22411,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,24418,27842,28366,28677,28752,28847,29074,29673,29801,33610,34722,34913,36872,37026,37795,39336,20846,24407,24800,24935,26291,34137,36426,37295,38795,20046,20114,21628,22741,22778,22909,23733,24359,25142,25160,26122,26215,27627,28009,28111,28246,28408,28564,28640,28649,28765,29392,29733,29786,29920,30355,31068,31946,32286,32993,33446,33899,33983,34382,34399,34676,35703,35946,37804,38912,39013,24785,25110,37239,23130,26127,28151,28222,29759,39746,24573,24794,31503,21700,24344,27742,27859,27946,28888,32005,34425,35340,40251,21270,21644,23301,27194,28779,30069,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,31117,31166,33457,33775,35441,35649,36008,38772,64011,25844,25899,30906,30907,31339,20024,21914,22864,23462,24187,24739,25563,27489,26213,26707,28185,29029,29872,32008,36996,39529,39973,27963,28369,29502,35905,38346,20976,24140,24488,24653,24822,24880,24908,26179,26180,27045,27841,28255,28361,28514,29004,29852,30343,31681,31783,33618,34647,36945,38541,40643,21295,22238,24315,24458,24674,24724,25079,26214,26371,27292,28142,28590,28784,29546,32362,33214,33588,34516,35496,36036,21123,29554,23446,27243,37892,21742,22150,23389,25928,25989,26313,26783,28045,28102,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,29243,32948,37237,39501,20399,20505,21402,21518,21564,21897,21957,24127,24460,26429,29030,29661,36869,21211,21235,22628,22734,28932,29071,29179,34224,35347,26248,34216,21927,26244,29002,33841,21321,21913,27585,24409,24509,25582,26249,28999,35569,36637,40638,20241,25658,28875,30054,34407,24676,35662,40440,20807,20982,21256,27958,33016,40657,26133,27427,28824,30165,21507,23673,32007,35350,27424,27453,27462,21560,24688,27965,32725,33288,20694,20958,21916,22123,22221,23020,23305,24076,24985,24984,25137,26206,26342,29081,29113,29114,29351,31143,31232,32690,35440,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],gb18030:[19970,19972,19973,19974,19983,19986,19991,19999,20000,20001,20003,20006,20009,20014,20015,20017,20019,20021,20023,20028,20032,20033,20034,20036,20038,20042,20049,20053,20055,20058,20059,20066,20067,20068,20069,20071,20072,20074,20075,20076,20077,20078,20079,20082,20084,20085,20086,20087,20088,20089,20090,20091,20092,20093,20095,20096,20097,20098,20099,20100,20101,20103,20106,20112,20118,20119,20121,20124,20125,20126,20131,20138,20143,20144,20145,20148,20150,20151,20152,20153,20156,20157,20158,20168,20172,20175,20176,20178,20186,20187,20188,20192,20194,20198,20199,20201,20205,20206,20207,20209,20212,20216,20217,20218,20220,20222,20224,20226,20227,20228,20229,20230,20231,20232,20235,20236,20242,20243,20244,20245,20246,20252,20253,20257,20259,20264,20265,20268,20269,20270,20273,20275,20277,20279,20281,20283,20286,20287,20288,20289,20290,20292,20293,20295,20296,20297,20298,20299,20300,20306,20308,20310,20321,20322,20326,20328,20330,20331,20333,20334,20337,20338,20341,20343,20344,20345,20346,20349,20352,20353,20354,20357,20358,20359,20362,20364,20366,20368,20370,20371,20373,20374,20376,20377,20378,20380,20382,20383,20385,20386,20388,20395,20397,20400,20401,20402,20403,20404,20406,20407,20408,20409,20410,20411,20412,20413,20414,20416,20417,20418,20422,20423,20424,20425,20427,20428,20429,20434,20435,20436,20437,20438,20441,20443,20448,20450,20452,20453,20455,20459,20460,20464,20466,20468,20469,20470,20471,20473,20475,20476,20477,20479,20480,20481,20482,20483,20484,20485,20486,20487,20488,20489,20490,20491,20494,20496,20497,20499,20501,20502,20503,20507,20509,20510,20512,20514,20515,20516,20519,20523,20527,20528,20529,20530,20531,20532,20533,20534,20535,20536,20537,20539,20541,20543,20544,20545,20546,20548,20549,20550,20553,20554,20555,20557,20560,20561,20562,20563,20564,20566,20567,20568,20569,20571,20573,20574,20575,20576,20577,20578,20579,20580,20582,20583,20584,20585,20586,20587,20589,20590,20591,20592,20593,20594,20595,20596,20597,20600,20601,20602,20604,20605,20609,20610,20611,20612,20614,20615,20617,20618,20619,20620,20622,20623,20624,20625,20626,20627,20628,20629,20630,20631,20632,20633,20634,20635,20636,20637,20638,20639,20640,20641,20642,20644,20646,20650,20651,20653,20654,20655,20656,20657,20659,20660,20661,20662,20663,20664,20665,20668,20669,20670,20671,20672,20673,20674,20675,20676,20677,20678,20679,20680,20681,20682,20683,20684,20685,20686,20688,20689,20690,20691,20692,20693,20695,20696,20697,20699,20700,20701,20702,20703,20704,20705,20706,20707,20708,20709,20712,20713,20714,20715,20719,20720,20721,20722,20724,20726,20727,20728,20729,20730,20732,20733,20734,20735,20736,20737,20738,20739,20740,20741,20744,20745,20746,20748,20749,20750,20751,20752,20753,20755,20756,20757,20758,20759,20760,20761,20762,20763,20764,20765,20766,20767,20768,20770,20771,20772,20773,20774,20775,20776,20777,20778,20779,20780,20781,20782,20783,20784,20785,20786,20787,20788,20789,20790,20791,20792,20793,20794,20795,20796,20797,20798,20802,20807,20810,20812,20814,20815,20816,20818,20819,20823,20824,20825,20827,20829,20830,20831,20832,20833,20835,20836,20838,20839,20841,20842,20847,20850,20858,20862,20863,20867,20868,20870,20871,20874,20875,20878,20879,20880,20881,20883,20884,20888,20890,20893,20894,20895,20897,20899,20902,20903,20904,20905,20906,20909,20910,20916,20920,20921,20922,20926,20927,20929,20930,20931,20933,20936,20938,20941,20942,20944,20946,20947,20948,20949,20950,20951,20952,20953,20954,20956,20958,20959,20962,20963,20965,20966,20967,20968,20969,20970,20972,20974,20977,20978,20980,20983,20990,20996,20997,21001,21003,21004,21007,21008,21011,21012,21013,21020,21022,21023,21025,21026,21027,21029,21030,21031,21034,21036,21039,21041,21042,21044,21045,21052,21054,21060,21061,21062,21063,21064,21065,21067,21070,21071,21074,21075,21077,21079,21080,21081,21082,21083,21085,21087,21088,21090,21091,21092,21094,21096,21099,21100,21101,21102,21104,21105,21107,21108,21109,21110,21111,21112,21113,21114,21115,21116,21118,21120,21123,21124,21125,21126,21127,21129,21130,21131,21132,21133,21134,21135,21137,21138,21140,21141,21142,21143,21144,21145,21146,21148,21156,21157,21158,21159,21166,21167,21168,21172,21173,21174,21175,21176,21177,21178,21179,21180,21181,21184,21185,21186,21188,21189,21190,21192,21194,21196,21197,21198,21199,21201,21203,21204,21205,21207,21209,21210,21211,21212,21213,21214,21216,21217,21218,21219,21221,21222,21223,21224,21225,21226,21227,21228,21229,21230,21231,21233,21234,21235,21236,21237,21238,21239,21240,21243,21244,21245,21249,21250,21251,21252,21255,21257,21258,21259,21260,21262,21265,21266,21267,21268,21272,21275,21276,21278,21279,21282,21284,21285,21287,21288,21289,21291,21292,21293,21295,21296,21297,21298,21299,21300,21301,21302,21303,21304,21308,21309,21312,21314,21316,21318,21323,21324,21325,21328,21332,21336,21337,21339,21341,21349,21352,21354,21356,21357,21362,21366,21369,21371,21372,21373,21374,21376,21377,21379,21383,21384,21386,21390,21391,21392,21393,21394,21395,21396,21398,21399,21401,21403,21404,21406,21408,21409,21412,21415,21418,21419,21420,21421,21423,21424,21425,21426,21427,21428,21429,21431,21432,21433,21434,21436,21437,21438,21440,21443,21444,21445,21446,21447,21454,21455,21456,21458,21459,21461,21466,21468,21469,21470,21473,21474,21479,21492,21498,21502,21503,21504,21506,21509,21511,21515,21524,21528,21529,21530,21532,21538,21540,21541,21546,21552,21555,21558,21559,21562,21565,21567,21569,21570,21572,21573,21575,21577,21580,21581,21582,21583,21585,21594,21597,21598,21599,21600,21601,21603,21605,21607,21609,21610,21611,21612,21613,21614,21615,21616,21620,21625,21626,21630,21631,21633,21635,21637,21639,21640,21641,21642,21645,21649,21651,21655,21656,21660,21662,21663,21664,21665,21666,21669,21678,21680,21682,21685,21686,21687,21689,21690,21692,21694,21699,21701,21706,21707,21718,21720,21723,21728,21729,21730,21731,21732,21739,21740,21743,21744,21745,21748,21749,21750,21751,21752,21753,21755,21758,21760,21762,21763,21764,21765,21768,21770,21771,21772,21773,21774,21778,21779,21781,21782,21783,21784,21785,21786,21788,21789,21790,21791,21793,21797,21798,21800,21801,21803,21805,21810,21812,21813,21814,21816,21817,21818,21819,21821,21824,21826,21829,21831,21832,21835,21836,21837,21838,21839,21841,21842,21843,21844,21847,21848,21849,21850,21851,21853,21854,21855,21856,21858,21859,21864,21865,21867,21871,21872,21873,21874,21875,21876,21881,21882,21885,21887,21893,21894,21900,21901,21902,21904,21906,21907,21909,21910,21911,21914,21915,21918,21920,21921,21922,21923,21924,21925,21926,21928,21929,21930,21931,21932,21933,21934,21935,21936,21938,21940,21942,21944,21946,21948,21951,21952,21953,21954,21955,21958,21959,21960,21962,21963,21966,21967,21968,21973,21975,21976,21977,21978,21979,21982,21984,21986,21991,21993,21997,21998,22000,22001,22004,22006,22008,22009,22010,22011,22012,22015,22018,22019,22020,22021,22022,22023,22026,22027,22029,22032,22033,22034,22035,22036,22037,22038,22039,22041,22042,22044,22045,22048,22049,22050,22053,22054,22056,22057,22058,22059,22062,22063,22064,22067,22069,22071,22072,22074,22076,22077,22078,22080,22081,22082,22083,22084,22085,22086,22087,22088,22089,22090,22091,22095,22096,22097,22098,22099,22101,22102,22106,22107,22109,22110,22111,22112,22113,22115,22117,22118,22119,22125,22126,22127,22128,22130,22131,22132,22133,22135,22136,22137,22138,22141,22142,22143,22144,22145,22146,22147,22148,22151,22152,22153,22154,22155,22156,22157,22160,22161,22162,22164,22165,22166,22167,22168,22169,22170,22171,22172,22173,22174,22175,22176,22177,22178,22180,22181,22182,22183,22184,22185,22186,22187,22188,22189,22190,22192,22193,22194,22195,22196,22197,22198,22200,22201,22202,22203,22205,22206,22207,22208,22209,22210,22211,22212,22213,22214,22215,22216,22217,22219,22220,22221,22222,22223,22224,22225,22226,22227,22229,22230,22232,22233,22236,22243,22245,22246,22247,22248,22249,22250,22252,22254,22255,22258,22259,22262,22263,22264,22267,22268,22272,22273,22274,22277,22279,22283,22284,22285,22286,22287,22288,22289,22290,22291,22292,22293,22294,22295,22296,22297,22298,22299,22301,22302,22304,22305,22306,22308,22309,22310,22311,22315,22321,22322,22324,22325,22326,22327,22328,22332,22333,22335,22337,22339,22340,22341,22342,22344,22345,22347,22354,22355,22356,22357,22358,22360,22361,22370,22371,22373,22375,22380,22382,22384,22385,22386,22388,22389,22392,22393,22394,22397,22398,22399,22400,22401,22407,22408,22409,22410,22413,22414,22415,22416,22417,22420,22421,22422,22423,22424,22425,22426,22428,22429,22430,22431,22437,22440,22442,22444,22447,22448,22449,22451,22453,22454,22455,22457,22458,22459,22460,22461,22462,22463,22464,22465,22468,22469,22470,22471,22472,22473,22474,22476,22477,22480,22481,22483,22486,22487,22491,22492,22494,22497,22498,22499,22501,22502,22503,22504,22505,22506,22507,22508,22510,22512,22513,22514,22515,22517,22518,22519,22523,22524,22526,22527,22529,22531,22532,22533,22536,22537,22538,22540,22542,22543,22544,22546,22547,22548,22550,22551,22552,22554,22555,22556,22557,22559,22562,22563,22565,22566,22567,22568,22569,22571,22572,22573,22574,22575,22577,22578,22579,22580,22582,22583,22584,22585,22586,22587,22588,22589,22590,22591,22592,22593,22594,22595,22597,22598,22599,22600,22601,22602,22603,22606,22607,22608,22610,22611,22613,22614,22615,22617,22618,22619,22620,22621,22623,22624,22625,22626,22627,22628,22630,22631,22632,22633,22634,22637,22638,22639,22640,22641,22642,22643,22644,22645,22646,22647,22648,22649,22650,22651,22652,22653,22655,22658,22660,22662,22663,22664,22666,22667,22668,22669,22670,22671,22672,22673,22676,22677,22678,22679,22680,22683,22684,22685,22688,22689,22690,22691,22692,22693,22694,22695,22698,22699,22700,22701,22702,22703,22704,22705,22706,22707,22708,22709,22710,22711,22712,22713,22714,22715,22717,22718,22719,22720,22722,22723,22724,22726,22727,22728,22729,22730,22731,22732,22733,22734,22735,22736,22738,22739,22740,22742,22743,22744,22745,22746,22747,22748,22749,22750,22751,22752,22753,22754,22755,22757,22758,22759,22760,22761,22762,22765,22767,22769,22770,22772,22773,22775,22776,22778,22779,22780,22781,22782,22783,22784,22785,22787,22789,22790,22792,22793,22794,22795,22796,22798,22800,22801,22802,22803,22807,22808,22811,22813,22814,22816,22817,22818,22819,22822,22824,22828,22832,22834,22835,22837,22838,22843,22845,22846,22847,22848,22851,22853,22854,22858,22860,22861,22864,22866,22867,22873,22875,22876,22877,22878,22879,22881,22883,22884,22886,22887,22888,22889,22890,22891,22892,22893,22894,22895,22896,22897,22898,22901,22903,22906,22907,22908,22910,22911,22912,22917,22921,22923,22924,22926,22927,22928,22929,22932,22933,22936,22938,22939,22940,22941,22943,22944,22945,22946,22950,22951,22956,22957,22960,22961,22963,22964,22965,22966,22967,22968,22970,22972,22973,22975,22976,22977,22978,22979,22980,22981,22983,22984,22985,22988,22989,22990,22991,22997,22998,23001,23003,23006,23007,23008,23009,23010,23012,23014,23015,23017,23018,23019,23021,23022,23023,23024,23025,23026,23027,23028,23029,23030,23031,23032,23034,23036,23037,23038,23040,23042,23050,23051,23053,23054,23055,23056,23058,23060,23061,23062,23063,23065,23066,23067,23069,23070,23073,23074,23076,23078,23079,23080,23082,23083,23084,23085,23086,23087,23088,23091,23093,23095,23096,23097,23098,23099,23101,23102,23103,23105,23106,23107,23108,23109,23111,23112,23115,23116,23117,23118,23119,23120,23121,23122,23123,23124,23126,23127,23128,23129,23131,23132,23133,23134,23135,23136,23137,23139,23140,23141,23142,23144,23145,23147,23148,23149,23150,23151,23152,23153,23154,23155,23160,23161,23163,23164,23165,23166,23168,23169,23170,23171,23172,23173,23174,23175,23176,23177,23178,23179,23180,23181,23182,23183,23184,23185,23187,23188,23189,23190,23191,23192,23193,23196,23197,23198,23199,23200,23201,23202,23203,23204,23205,23206,23207,23208,23209,23211,23212,23213,23214,23215,23216,23217,23220,23222,23223,23225,23226,23227,23228,23229,23231,23232,23235,23236,23237,23238,23239,23240,23242,23243,23245,23246,23247,23248,23249,23251,23253,23255,23257,23258,23259,23261,23262,23263,23266,23268,23269,23271,23272,23274,23276,23277,23278,23279,23280,23282,23283,23284,23285,23286,23287,23288,23289,23290,23291,23292,23293,23294,23295,23296,23297,23298,23299,23300,23301,23302,23303,23304,23306,23307,23308,23309,23310,23311,23312,23313,23314,23315,23316,23317,23320,23321,23322,23323,23324,23325,23326,23327,23328,23329,23330,23331,23332,23333,23334,23335,23336,23337,23338,23339,23340,23341,23342,23343,23344,23345,23347,23349,23350,23352,23353,23354,23355,23356,23357,23358,23359,23361,23362,23363,23364,23365,23366,23367,23368,23369,23370,23371,23372,23373,23374,23375,23378,23382,23390,23392,23393,23399,23400,23403,23405,23406,23407,23410,23412,23414,23415,23416,23417,23419,23420,23422,23423,23426,23430,23434,23437,23438,23440,23441,23442,23444,23446,23455,23463,23464,23465,23468,23469,23470,23471,23473,23474,23479,23482,23483,23484,23488,23489,23491,23496,23497,23498,23499,23501,23502,23503,23505,23508,23509,23510,23511,23512,23513,23514,23515,23516,23520,23522,23523,23526,23527,23529,23530,23531,23532,23533,23535,23537,23538,23539,23540,23541,23542,23543,23549,23550,23552,23554,23555,23557,23559,23560,23563,23564,23565,23566,23568,23570,23571,23575,23577,23579,23582,23583,23584,23585,23587,23590,23592,23593,23594,23595,23597,23598,23599,23600,23602,23603,23605,23606,23607,23619,23620,23622,23623,23628,23629,23634,23635,23636,23638,23639,23640,23642,23643,23644,23645,23647,23650,23652,23655,23656,23657,23658,23659,23660,23661,23664,23666,23667,23668,23669,23670,23671,23672,23675,23676,23677,23678,23680,23683,23684,23685,23686,23687,23689,23690,23691,23694,23695,23698,23699,23701,23709,23710,23711,23712,23713,23716,23717,23718,23719,23720,23722,23726,23727,23728,23730,23732,23734,23737,23738,23739,23740,23742,23744,23746,23747,23749,23750,23751,23752,23753,23754,23756,23757,23758,23759,23760,23761,23763,23764,23765,23766,23767,23768,23770,23771,23772,23773,23774,23775,23776,23778,23779,23783,23785,23787,23788,23790,23791,23793,23794,23795,23796,23797,23798,23799,23800,23801,23802,23804,23805,23806,23807,23808,23809,23812,23813,23816,23817,23818,23819,23820,23821,23823,23824,23825,23826,23827,23829,23831,23832,23833,23834,23836,23837,23839,23840,23841,23842,23843,23845,23848,23850,23851,23852,23855,23856,23857,23858,23859,23861,23862,23863,23864,23865,23866,23867,23868,23871,23872,23873,23874,23875,23876,23877,23878,23880,23881,23885,23886,23887,23888,23889,23890,23891,23892,23893,23894,23895,23897,23898,23900,23902,23903,23904,23905,23906,23907,23908,23909,23910,23911,23912,23914,23917,23918,23920,23921,23922,23923,23925,23926,23927,23928,23929,23930,23931,23932,23933,23934,23935,23936,23937,23939,23940,23941,23942,23943,23944,23945,23946,23947,23948,23949,23950,23951,23952,23953,23954,23955,23956,23957,23958,23959,23960,23962,23963,23964,23966,23967,23968,23969,23970,23971,23972,23973,23974,23975,23976,23977,23978,23979,23980,23981,23982,23983,23984,23985,23986,23987,23988,23989,23990,23992,23993,23994,23995,23996,23997,23998,23999,24000,24001,24002,24003,24004,24006,24007,24008,24009,24010,24011,24012,24014,24015,24016,24017,24018,24019,24020,24021,24022,24023,24024,24025,24026,24028,24031,24032,24035,24036,24042,24044,24045,24048,24053,24054,24056,24057,24058,24059,24060,24063,24064,24068,24071,24073,24074,24075,24077,24078,24082,24083,24087,24094,24095,24096,24097,24098,24099,24100,24101,24104,24105,24106,24107,24108,24111,24112,24114,24115,24116,24117,24118,24121,24122,24126,24127,24128,24129,24131,24134,24135,24136,24137,24138,24139,24141,24142,24143,24144,24145,24146,24147,24150,24151,24152,24153,24154,24156,24157,24159,24160,24163,24164,24165,24166,24167,24168,24169,24170,24171,24172,24173,24174,24175,24176,24177,24181,24183,24185,24190,24193,24194,24195,24197,24200,24201,24204,24205,24206,24210,24216,24219,24221,24225,24226,24227,24228,24232,24233,24234,24235,24236,24238,24239,24240,24241,24242,24244,24250,24251,24252,24253,24255,24256,24257,24258,24259,24260,24261,24262,24263,24264,24267,24268,24269,24270,24271,24272,24276,24277,24279,24280,24281,24282,24284,24285,24286,24287,24288,24289,24290,24291,24292,24293,24294,24295,24297,24299,24300,24301,24302,24303,24304,24305,24306,24307,24309,24312,24313,24315,24316,24317,24325,24326,24327,24329,24332,24333,24334,24336,24338,24340,24342,24345,24346,24348,24349,24350,24353,24354,24355,24356,24360,24363,24364,24366,24368,24370,24371,24372,24373,24374,24375,24376,24379,24381,24382,24383,24385,24386,24387,24388,24389,24390,24391,24392,24393,24394,24395,24396,24397,24398,24399,24401,24404,24409,24410,24411,24412,24414,24415,24416,24419,24421,24423,24424,24427,24430,24431,24434,24436,24437,24438,24440,24442,24445,24446,24447,24451,24454,24461,24462,24463,24465,24467,24468,24470,24474,24475,24477,24478,24479,24480,24482,24483,24484,24485,24486,24487,24489,24491,24492,24495,24496,24497,24498,24499,24500,24502,24504,24505,24506,24507,24510,24511,24512,24513,24514,24519,24520,24522,24523,24526,24531,24532,24533,24538,24539,24540,24542,24543,24546,24547,24549,24550,24552,24553,24556,24559,24560,24562,24563,24564,24566,24567,24569,24570,24572,24583,24584,24585,24587,24588,24592,24593,24595,24599,24600,24602,24606,24607,24610,24611,24612,24620,24621,24622,24624,24625,24626,24627,24628,24630,24631,24632,24633,24634,24637,24638,24640,24644,24645,24646,24647,24648,24649,24650,24652,24654,24655,24657,24659,24660,24662,24663,24664,24667,24668,24670,24671,24672,24673,24677,24678,24686,24689,24690,24692,24693,24695,24702,24704,24705,24706,24709,24710,24711,24712,24714,24715,24718,24719,24720,24721,24723,24725,24727,24728,24729,24732,24734,24737,24738,24740,24741,24743,24745,24746,24750,24752,24755,24757,24758,24759,24761,24762,24765,24766,24767,24768,24769,24770,24771,24772,24775,24776,24777,24780,24781,24782,24783,24784,24786,24787,24788,24790,24791,24793,24795,24798,24801,24802,24803,24804,24805,24810,24817,24818,24821,24823,24824,24827,24828,24829,24830,24831,24834,24835,24836,24837,24839,24842,24843,24844,24848,24849,24850,24851,24852,24854,24855,24856,24857,24859,24860,24861,24862,24865,24866,24869,24872,24873,24874,24876,24877,24878,24879,24880,24881,24882,24883,24884,24885,24886,24887,24888,24889,24890,24891,24892,24893,24894,24896,24897,24898,24899,24900,24901,24902,24903,24905,24907,24909,24911,24912,24914,24915,24916,24918,24919,24920,24921,24922,24923,24924,24926,24927,24928,24929,24931,24932,24933,24934,24937,24938,24939,24940,24941,24942,24943,24945,24946,24947,24948,24950,24952,24953,24954,24955,24956,24957,24958,24959,24960,24961,24962,24963,24964,24965,24966,24967,24968,24969,24970,24972,24973,24975,24976,24977,24978,24979,24981,24982,24983,24984,24985,24986,24987,24988,24990,24991,24992,24993,24994,24995,24996,24997,24998,25002,25003,25005,25006,25007,25008,25009,25010,25011,25012,25013,25014,25016,25017,25018,25019,25020,25021,25023,25024,25025,25027,25028,25029,25030,25031,25033,25036,25037,25038,25039,25040,25043,25045,25046,25047,25048,25049,25050,25051,25052,25053,25054,25055,25056,25057,25058,25059,25060,25061,25063,25064,25065,25066,25067,25068,25069,25070,25071,25072,25073,25074,25075,25076,25078,25079,25080,25081,25082,25083,25084,25085,25086,25088,25089,25090,25091,25092,25093,25095,25097,25107,25108,25113,25116,25117,25118,25120,25123,25126,25127,25128,25129,25131,25133,25135,25136,25137,25138,25141,25142,25144,25145,25146,25147,25148,25154,25156,25157,25158,25162,25167,25168,25173,25174,25175,25177,25178,25180,25181,25182,25183,25184,25185,25186,25188,25189,25192,25201,25202,25204,25205,25207,25208,25210,25211,25213,25217,25218,25219,25221,25222,25223,25224,25227,25228,25229,25230,25231,25232,25236,25241,25244,25245,25246,25251,25254,25255,25257,25258,25261,25262,25263,25264,25266,25267,25268,25270,25271,25272,25274,25278,25280,25281,25283,25291,25295,25297,25301,25309,25310,25312,25313,25316,25322,25323,25328,25330,25333,25336,25337,25338,25339,25344,25347,25348,25349,25350,25354,25355,25356,25357,25359,25360,25362,25363,25364,25365,25367,25368,25369,25372,25382,25383,25385,25388,25389,25390,25392,25393,25395,25396,25397,25398,25399,25400,25403,25404,25406,25407,25408,25409,25412,25415,25416,25418,25425,25426,25427,25428,25430,25431,25432,25433,25434,25435,25436,25437,25440,25444,25445,25446,25448,25450,25451,25452,25455,25456,25458,25459,25460,25461,25464,25465,25468,25469,25470,25471,25473,25475,25476,25477,25478,25483,25485,25489,25491,25492,25493,25495,25497,25498,25499,25500,25501,25502,25503,25505,25508,25510,25515,25519,25521,25522,25525,25526,25529,25531,25533,25535,25536,25537,25538,25539,25541,25543,25544,25546,25547,25548,25553,25555,25556,25557,25559,25560,25561,25562,25563,25564,25565,25567,25570,25572,25573,25574,25575,25576,25579,25580,25582,25583,25584,25585,25587,25589,25591,25593,25594,25595,25596,25598,25603,25604,25606,25607,25608,25609,25610,25613,25614,25617,25618,25621,25622,25623,25624,25625,25626,25629,25631,25634,25635,25636,25637,25639,25640,25641,25643,25646,25647,25648,25649,25650,25651,25653,25654,25655,25656,25657,25659,25660,25662,25664,25666,25667,25673,25675,25676,25677,25678,25679,25680,25681,25683,25685,25686,25687,25689,25690,25691,25692,25693,25695,25696,25697,25698,25699,25700,25701,25702,25704,25706,25707,25708,25710,25711,25712,25713,25714,25715,25716,25717,25718,25719,25723,25724,25725,25726,25727,25728,25729,25731,25734,25736,25737,25738,25739,25740,25741,25742,25743,25744,25747,25748,25751,25752,25754,25755,25756,25757,25759,25760,25761,25762,25763,25765,25766,25767,25768,25770,25771,25775,25777,25778,25779,25780,25782,25785,25787,25789,25790,25791,25793,25795,25796,25798,25799,25800,25801,25802,25803,25804,25807,25809,25811,25812,25813,25814,25817,25818,25819,25820,25821,25823,25824,25825,25827,25829,25831,25832,25833,25834,25835,25836,25837,25838,25839,25840,25841,25842,25843,25844,25845,25846,25847,25848,25849,25850,25851,25852,25853,25854,25855,25857,25858,25859,25860,25861,25862,25863,25864,25866,25867,25868,25869,25870,25871,25872,25873,25875,25876,25877,25878,25879,25881,25882,25883,25884,25885,25886,25887,25888,25889,25890,25891,25892,25894,25895,25896,25897,25898,25900,25901,25904,25905,25906,25907,25911,25914,25916,25917,25920,25921,25922,25923,25924,25926,25927,25930,25931,25933,25934,25936,25938,25939,25940,25943,25944,25946,25948,25951,25952,25953,25956,25957,25959,25960,25961,25962,25965,25966,25967,25969,25971,25973,25974,25976,25977,25978,25979,25980,25981,25982,25983,25984,25985,25986,25987,25988,25989,25990,25992,25993,25994,25997,25998,25999,26002,26004,26005,26006,26008,26010,26013,26014,26016,26018,26019,26022,26024,26026,26028,26030,26033,26034,26035,26036,26037,26038,26039,26040,26042,26043,26046,26047,26048,26050,26055,26056,26057,26058,26061,26064,26065,26067,26068,26069,26072,26073,26074,26075,26076,26077,26078,26079,26081,26083,26084,26090,26091,26098,26099,26100,26101,26104,26105,26107,26108,26109,26110,26111,26113,26116,26117,26119,26120,26121,26123,26125,26128,26129,26130,26134,26135,26136,26138,26139,26140,26142,26145,26146,26147,26148,26150,26153,26154,26155,26156,26158,26160,26162,26163,26167,26168,26169,26170,26171,26173,26175,26176,26178,26180,26181,26182,26183,26184,26185,26186,26189,26190,26192,26193,26200,26201,26203,26204,26205,26206,26208,26210,26211,26213,26215,26217,26218,26219,26220,26221,26225,26226,26227,26229,26232,26233,26235,26236,26237,26239,26240,26241,26243,26245,26246,26248,26249,26250,26251,26253,26254,26255,26256,26258,26259,26260,26261,26264,26265,26266,26267,26268,26270,26271,26272,26273,26274,26275,26276,26277,26278,26281,26282,26283,26284,26285,26287,26288,26289,26290,26291,26293,26294,26295,26296,26298,26299,26300,26301,26303,26304,26305,26306,26307,26308,26309,26310,26311,26312,26313,26314,26315,26316,26317,26318,26319,26320,26321,26322,26323,26324,26325,26326,26327,26328,26330,26334,26335,26336,26337,26338,26339,26340,26341,26343,26344,26346,26347,26348,26349,26350,26351,26353,26357,26358,26360,26362,26363,26365,26369,26370,26371,26372,26373,26374,26375,26380,26382,26383,26385,26386,26387,26390,26392,26393,26394,26396,26398,26400,26401,26402,26403,26404,26405,26407,26409,26414,26416,26418,26419,26422,26423,26424,26425,26427,26428,26430,26431,26433,26436,26437,26439,26442,26443,26445,26450,26452,26453,26455,26456,26457,26458,26459,26461,26466,26467,26468,26470,26471,26475,26476,26478,26481,26484,26486,26488,26489,26490,26491,26493,26496,26498,26499,26501,26502,26504,26506,26508,26509,26510,26511,26513,26514,26515,26516,26518,26521,26523,26527,26528,26529,26532,26534,26537,26540,26542,26545,26546,26548,26553,26554,26555,26556,26557,26558,26559,26560,26562,26565,26566,26567,26568,26569,26570,26571,26572,26573,26574,26581,26582,26583,26587,26591,26593,26595,26596,26598,26599,26600,26602,26603,26605,26606,26610,26613,26614,26615,26616,26617,26618,26619,26620,26622,26625,26626,26627,26628,26630,26637,26640,26642,26644,26645,26648,26649,26650,26651,26652,26654,26655,26656,26658,26659,26660,26661,26662,26663,26664,26667,26668,26669,26670,26671,26672,26673,26676,26677,26678,26682,26683,26687,26695,26699,26701,26703,26706,26710,26711,26712,26713,26714,26715,26716,26717,26718,26719,26730,26732,26733,26734,26735,26736,26737,26738,26739,26741,26744,26745,26746,26747,26748,26749,26750,26751,26752,26754,26756,26759,26760,26761,26762,26763,26764,26765,26766,26768,26769,26770,26772,26773,26774,26776,26777,26778,26779,26780,26781,26782,26783,26784,26785,26787,26788,26789,26793,26794,26795,26796,26798,26801,26802,26804,26806,26807,26808,26809,26810,26811,26812,26813,26814,26815,26817,26819,26820,26821,26822,26823,26824,26826,26828,26830,26831,26832,26833,26835,26836,26838,26839,26841,26843,26844,26845,26846,26847,26849,26850,26852,26853,26854,26855,26856,26857,26858,26859,26860,26861,26863,26866,26867,26868,26870,26871,26872,26875,26877,26878,26879,26880,26882,26883,26884,26886,26887,26888,26889,26890,26892,26895,26897,26899,26900,26901,26902,26903,26904,26905,26906,26907,26908,26909,26910,26913,26914,26915,26917,26918,26919,26920,26921,26922,26923,26924,26926,26927,26929,26930,26931,26933,26934,26935,26936,26938,26939,26940,26942,26944,26945,26947,26948,26949,26950,26951,26952,26953,26954,26955,26956,26957,26958,26959,26960,26961,26962,26963,26965,26966,26968,26969,26971,26972,26975,26977,26978,26980,26981,26983,26984,26985,26986,26988,26989,26991,26992,26994,26995,26996,26997,26998,27002,27003,27005,27006,27007,27009,27011,27013,27018,27019,27020,27022,27023,27024,27025,27026,27027,27030,27031,27033,27034,27037,27038,27039,27040,27041,27042,27043,27044,27045,27046,27049,27050,27052,27054,27055,27056,27058,27059,27061,27062,27064,27065,27066,27068,27069,27070,27071,27072,27074,27075,27076,27077,27078,27079,27080,27081,27083,27085,27087,27089,27090,27091,27093,27094,27095,27096,27097,27098,27100,27101,27102,27105,27106,27107,27108,27109,27110,27111,27112,27113,27114,27115,27116,27118,27119,27120,27121,27123,27124,27125,27126,27127,27128,27129,27130,27131,27132,27134,27136,27137,27138,27139,27140,27141,27142,27143,27144,27145,27147,27148,27149,27150,27151,27152,27153,27154,27155,27156,27157,27158,27161,27162,27163,27164,27165,27166,27168,27170,27171,27172,27173,27174,27175,27177,27179,27180,27181,27182,27184,27186,27187,27188,27190,27191,27192,27193,27194,27195,27196,27199,27200,27201,27202,27203,27205,27206,27208,27209,27210,27211,27212,27213,27214,27215,27217,27218,27219,27220,27221,27222,27223,27226,27228,27229,27230,27231,27232,27234,27235,27236,27238,27239,27240,27241,27242,27243,27244,27245,27246,27247,27248,27250,27251,27252,27253,27254,27255,27256,27258,27259,27261,27262,27263,27265,27266,27267,27269,27270,27271,27272,27273,27274,27275,27276,27277,27279,27282,27283,27284,27285,27286,27288,27289,27290,27291,27292,27293,27294,27295,27297,27298,27299,27300,27301,27302,27303,27304,27306,27309,27310,27311,27312,27313,27314,27315,27316,27317,27318,27319,27320,27321,27322,27323,27324,27325,27326,27327,27328,27329,27330,27331,27332,27333,27334,27335,27336,27337,27338,27339,27340,27341,27342,27343,27344,27345,27346,27347,27348,27349,27350,27351,27352,27353,27354,27355,27356,27357,27358,27359,27360,27361,27362,27363,27364,27365,27366,27367,27368,27369,27370,27371,27372,27373,27374,27375,27376,27377,27378,27379,27380,27381,27382,27383,27384,27385,27386,27387,27388,27389,27390,27391,27392,27393,27394,27395,27396,27397,27398,27399,27400,27401,27402,27403,27404,27405,27406,27407,27408,27409,27410,27411,27412,27413,27414,27415,27416,27417,27418,27419,27420,27421,27422,27423,27429,27430,27432,27433,27434,27435,27436,27437,27438,27439,27440,27441,27443,27444,27445,27446,27448,27451,27452,27453,27455,27456,27457,27458,27460,27461,27464,27466,27467,27469,27470,27471,27472,27473,27474,27475,27476,27477,27478,27479,27480,27482,27483,27484,27485,27486,27487,27488,27489,27496,27497,27499,27500,27501,27502,27503,27504,27505,27506,27507,27508,27509,27510,27511,27512,27514,27517,27518,27519,27520,27525,27528,27532,27534,27535,27536,27537,27540,27541,27543,27544,27545,27548,27549,27550,27551,27552,27554,27555,27556,27557,27558,27559,27560,27561,27563,27564,27565,27566,27567,27568,27569,27570,27574,27576,27577,27578,27579,27580,27581,27582,27584,27587,27588,27590,27591,27592,27593,27594,27596,27598,27600,27601,27608,27610,27612,27613,27614,27615,27616,27618,27619,27620,27621,27622,27623,27624,27625,27628,27629,27630,27632,27633,27634,27636,27638,27639,27640,27642,27643,27644,27646,27647,27648,27649,27650,27651,27652,27656,27657,27658,27659,27660,27662,27666,27671,27676,27677,27678,27680,27683,27685,27691,27692,27693,27697,27699,27702,27703,27705,27706,27707,27708,27710,27711,27715,27716,27717,27720,27723,27724,27725,27726,27727,27729,27730,27731,27734,27736,27737,27738,27746,27747,27749,27750,27751,27755,27756,27757,27758,27759,27761,27763,27765,27767,27768,27770,27771,27772,27775,27776,27780,27783,27786,27787,27789,27790,27793,27794,27797,27798,27799,27800,27802,27804,27805,27806,27808,27810,27816,27820,27823,27824,27828,27829,27830,27831,27834,27840,27841,27842,27843,27846,27847,27848,27851,27853,27854,27855,27857,27858,27864,27865,27866,27868,27869,27871,27876,27878,27879,27881,27884,27885,27890,27892,27897,27903,27904,27906,27907,27909,27910,27912,27913,27914,27917,27919,27920,27921,27923,27924,27925,27926,27928,27932,27933,27935,27936,27937,27938,27939,27940,27942,27944,27945,27948,27949,27951,27952,27956,27958,27959,27960,27962,27967,27968,27970,27972,27977,27980,27984,27989,27990,27991,27992,27995,27997,27999,28001,28002,28004,28005,28007,28008,28011,28012,28013,28016,28017,28018,28019,28021,28022,28025,28026,28027,28029,28030,28031,28032,28033,28035,28036,28038,28039,28042,28043,28045,28047,28048,28050,28054,28055,28056,28057,28058,28060,28066,28069,28076,28077,28080,28081,28083,28084,28086,28087,28089,28090,28091,28092,28093,28094,28097,28098,28099,28104,28105,28106,28109,28110,28111,28112,28114,28115,28116,28117,28119,28122,28123,28124,28127,28130,28131,28133,28135,28136,28137,28138,28141,28143,28144,28146,28148,28149,28150,28152,28154,28157,28158,28159,28160,28161,28162,28163,28164,28166,28167,28168,28169,28171,28175,28178,28179,28181,28184,28185,28187,28188,28190,28191,28194,28198,28199,28200,28202,28204,28206,28208,28209,28211,28213,28214,28215,28217,28219,28220,28221,28222,28223,28224,28225,28226,28229,28230,28231,28232,28233,28234,28235,28236,28239,28240,28241,28242,28245,28247,28249,28250,28252,28253,28254,28256,28257,28258,28259,28260,28261,28262,28263,28264,28265,28266,28268,28269,28271,28272,28273,28274,28275,28276,28277,28278,28279,28280,28281,28282,28283,28284,28285,28288,28289,28290,28292,28295,28296,28298,28299,28300,28301,28302,28305,28306,28307,28308,28309,28310,28311,28313,28314,28315,28317,28318,28320,28321,28323,28324,28326,28328,28329,28331,28332,28333,28334,28336,28339,28341,28344,28345,28348,28350,28351,28352,28355,28356,28357,28358,28360,28361,28362,28364,28365,28366,28368,28370,28374,28376,28377,28379,28380,28381,28387,28391,28394,28395,28396,28397,28398,28399,28400,28401,28402,28403,28405,28406,28407,28408,28410,28411,28412,28413,28414,28415,28416,28417,28419,28420,28421,28423,28424,28426,28427,28428,28429,28430,28432,28433,28434,28438,28439,28440,28441,28442,28443,28444,28445,28446,28447,28449,28450,28451,28453,28454,28455,28456,28460,28462,28464,28466,28468,28469,28471,28472,28473,28474,28475,28476,28477,28479,28480,28481,28482,28483,28484,28485,28488,28489,28490,28492,28494,28495,28496,28497,28498,28499,28500,28501,28502,28503,28505,28506,28507,28509,28511,28512,28513,28515,28516,28517,28519,28520,28521,28522,28523,28524,28527,28528,28529,28531,28533,28534,28535,28537,28539,28541,28542,28543,28544,28545,28546,28547,28549,28550,28551,28554,28555,28559,28560,28561,28562,28563,28564,28565,28566,28567,28568,28569,28570,28571,28573,28574,28575,28576,28578,28579,28580,28581,28582,28584,28585,28586,28587,28588,28589,28590,28591,28592,28593,28594,28596,28597,28599,28600,28602,28603,28604,28605,28606,28607,28609,28611,28612,28613,28614,28615,28616,28618,28619,28620,28621,28622,28623,28624,28627,28628,28629,28630,28631,28632,28633,28634,28635,28636,28637,28639,28642,28643,28644,28645,28646,28647,28648,28649,28650,28651,28652,28653,28656,28657,28658,28659,28660,28661,28662,28663,28664,28665,28666,28667,28668,28669,28670,28671,28672,28673,28674,28675,28676,28677,28678,28679,28680,28681,28682,28683,28684,28685,28686,28687,28688,28690,28691,28692,28693,28694,28695,28696,28697,28700,28701,28702,28703,28704,28705,28706,28708,28709,28710,28711,28712,28713,28714,28715,28716,28717,28718,28719,28720,28721,28722,28723,28724,28726,28727,28728,28730,28731,28732,28733,28734,28735,28736,28737,28738,28739,28740,28741,28742,28743,28744,28745,28746,28747,28749,28750,28752,28753,28754,28755,28756,28757,28758,28759,28760,28761,28762,28763,28764,28765,28767,28768,28769,28770,28771,28772,28773,28774,28775,28776,28777,28778,28782,28785,28786,28787,28788,28791,28793,28794,28795,28797,28801,28802,28803,28804,28806,28807,28808,28811,28812,28813,28815,28816,28817,28819,28823,28824,28826,28827,28830,28831,28832,28833,28834,28835,28836,28837,28838,28839,28840,28841,28842,28848,28850,28852,28853,28854,28858,28862,28863,28868,28869,28870,28871,28873,28875,28876,28877,28878,28879,28880,28881,28882,28883,28884,28885,28886,28887,28890,28892,28893,28894,28896,28897,28898,28899,28901,28906,28910,28912,28913,28914,28915,28916,28917,28918,28920,28922,28923,28924,28926,28927,28928,28929,28930,28931,28932,28933,28934,28935,28936,28939,28940,28941,28942,28943,28945,28946,28948,28951,28955,28956,28957,28958,28959,28960,28961,28962,28963,28964,28965,28967,28968,28969,28970,28971,28972,28973,28974,28978,28979,28980,28981,28983,28984,28985,28986,28987,28988,28989,28990,28991,28992,28993,28994,28995,28996,28998,28999,29000,29001,29003,29005,29007,29008,29009,29010,29011,29012,29013,29014,29015,29016,29017,29018,29019,29021,29023,29024,29025,29026,29027,29029,29033,29034,29035,29036,29037,29039,29040,29041,29044,29045,29046,29047,29049,29051,29052,29054,29055,29056,29057,29058,29059,29061,29062,29063,29064,29065,29067,29068,29069,29070,29072,29073,29074,29075,29077,29078,29079,29082,29083,29084,29085,29086,29089,29090,29091,29092,29093,29094,29095,29097,29098,29099,29101,29102,29103,29104,29105,29106,29108,29110,29111,29112,29114,29115,29116,29117,29118,29119,29120,29121,29122,29124,29125,29126,29127,29128,29129,29130,29131,29132,29133,29135,29136,29137,29138,29139,29142,29143,29144,29145,29146,29147,29148,29149,29150,29151,29153,29154,29155,29156,29158,29160,29161,29162,29163,29164,29165,29167,29168,29169,29170,29171,29172,29173,29174,29175,29176,29178,29179,29180,29181,29182,29183,29184,29185,29186,29187,29188,29189,29191,29192,29193,29194,29195,29196,29197,29198,29199,29200,29201,29202,29203,29204,29205,29206,29207,29208,29209,29210,29211,29212,29214,29215,29216,29217,29218,29219,29220,29221,29222,29223,29225,29227,29229,29230,29231,29234,29235,29236,29242,29244,29246,29248,29249,29250,29251,29252,29253,29254,29257,29258,29259,29262,29263,29264,29265,29267,29268,29269,29271,29272,29274,29276,29278,29280,29283,29284,29285,29288,29290,29291,29292,29293,29296,29297,29299,29300,29302,29303,29304,29307,29308,29309,29314,29315,29317,29318,29319,29320,29321,29324,29326,29328,29329,29331,29332,29333,29334,29335,29336,29337,29338,29339,29340,29341,29342,29344,29345,29346,29347,29348,29349,29350,29351,29352,29353,29354,29355,29358,29361,29362,29363,29365,29370,29371,29372,29373,29374,29375,29376,29381,29382,29383,29385,29386,29387,29388,29391,29393,29395,29396,29397,29398,29400,29402,29403,58566,58567,58568,58569,58570,58571,58572,58573,58574,58575,58576,58577,58578,58579,58580,58581,58582,58583,58584,58585,58586,58587,58588,58589,58590,58591,58592,58593,58594,58595,58596,58597,58598,58599,58600,58601,58602,58603,58604,58605,58606,58607,58608,58609,58610,58611,58612,58613,58614,58615,58616,58617,58618,58619,58620,58621,58622,58623,58624,58625,58626,58627,58628,58629,58630,58631,58632,58633,58634,58635,58636,58637,58638,58639,58640,58641,58642,58643,58644,58645,58646,58647,58648,58649,58650,58651,58652,58653,58654,58655,58656,58657,58658,58659,58660,58661,12288,12289,12290,183,713,711,168,12291,12293,8212,65374,8214,8230,8216,8217,8220,8221,12308,12309,12296,12297,12298,12299,12300,12301,12302,12303,12310,12311,12304,12305,177,215,247,8758,8743,8744,8721,8719,8746,8745,8712,8759,8730,8869,8741,8736,8978,8857,8747,8750,8801,8780,8776,8765,8733,8800,8814,8815,8804,8805,8734,8757,8756,9794,9792,176,8242,8243,8451,65284,164,65504,65505,8240,167,8470,9734,9733,9675,9679,9678,9671,9670,9633,9632,9651,9650,8251,8594,8592,8593,8595,12307,58662,58663,58664,58665,58666,58667,58668,58669,58670,58671,58672,58673,58674,58675,58676,58677,58678,58679,58680,58681,58682,58683,58684,58685,58686,58687,58688,58689,58690,58691,58692,58693,58694,58695,58696,58697,58698,58699,58700,58701,58702,58703,58704,58705,58706,58707,58708,58709,58710,58711,58712,58713,58714,58715,58716,58717,58718,58719,58720,58721,58722,58723,58724,58725,58726,58727,58728,58729,58730,58731,58732,58733,58734,58735,58736,58737,58738,58739,58740,58741,58742,58743,58744,58745,58746,58747,58748,58749,58750,58751,58752,58753,58754,58755,58756,58757,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,59238,59239,59240,59241,59242,59243,9352,9353,9354,9355,9356,9357,9358,9359,9360,9361,9362,9363,9364,9365,9366,9367,9368,9369,9370,9371,9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,9342,9343,9344,9345,9346,9347,9348,9349,9350,9351,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,8364,59245,12832,12833,12834,12835,12836,12837,12838,12839,12840,12841,59246,59247,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,8554,8555,59248,59249,58758,58759,58760,58761,58762,58763,58764,58765,58766,58767,58768,58769,58770,58771,58772,58773,58774,58775,58776,58777,58778,58779,58780,58781,58782,58783,58784,58785,58786,58787,58788,58789,58790,58791,58792,58793,58794,58795,58796,58797,58798,58799,58800,58801,58802,58803,58804,58805,58806,58807,58808,58809,58810,58811,58812,58813,58814,58815,58816,58817,58818,58819,58820,58821,58822,58823,58824,58825,58826,58827,58828,58829,58830,58831,58832,58833,58834,58835,58836,58837,58838,58839,58840,58841,58842,58843,58844,58845,58846,58847,58848,58849,58850,58851,58852,12288,65281,65282,65283,65509,65285,65286,65287,65288,65289,65290,65291,65292,65293,65294,65295,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,65306,65307,65308,65309,65310,65311,65312,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65339,65340,65341,65342,65343,65344,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,65371,65372,65373,65507,58854,58855,58856,58857,58858,58859,58860,58861,58862,58863,58864,58865,58866,58867,58868,58869,58870,58871,58872,58873,58874,58875,58876,58877,58878,58879,58880,58881,58882,58883,58884,58885,58886,58887,58888,58889,58890,58891,58892,58893,58894,58895,58896,58897,58898,58899,58900,58901,58902,58903,58904,58905,58906,58907,58908,58909,58910,58911,58912,58913,58914,58915,58916,58917,58918,58919,58920,58921,58922,58923,58924,58925,58926,58927,58928,58929,58930,58931,58932,58933,58934,58935,58936,58937,58938,58939,58940,58941,58942,58943,58944,58945,58946,58947,58948,58949,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,59250,59251,59252,59253,59254,59255,59256,59257,59258,59259,59260,58950,58951,58952,58953,58954,58955,58956,58957,58958,58959,58960,58961,58962,58963,58964,58965,58966,58967,58968,58969,58970,58971,58972,58973,58974,58975,58976,58977,58978,58979,58980,58981,58982,58983,58984,58985,58986,58987,58988,58989,58990,58991,58992,58993,58994,58995,58996,58997,58998,58999,59000,59001,59002,59003,59004,59005,59006,59007,59008,59009,59010,59011,59012,59013,59014,59015,59016,59017,59018,59019,59020,59021,59022,59023,59024,59025,59026,59027,59028,59029,59030,59031,59032,59033,59034,59035,59036,59037,59038,59039,59040,59041,59042,59043,59044,59045,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,59261,59262,59263,59264,59265,59266,59267,59268,59046,59047,59048,59049,59050,59051,59052,59053,59054,59055,59056,59057,59058,59059,59060,59061,59062,59063,59064,59065,59066,59067,59068,59069,59070,59071,59072,59073,59074,59075,59076,59077,59078,59079,59080,59081,59082,59083,59084,59085,59086,59087,59088,59089,59090,59091,59092,59093,59094,59095,59096,59097,59098,59099,59100,59101,59102,59103,59104,59105,59106,59107,59108,59109,59110,59111,59112,59113,59114,59115,59116,59117,59118,59119,59120,59121,59122,59123,59124,59125,59126,59127,59128,59129,59130,59131,59132,59133,59134,59135,59136,59137,59138,59139,59140,59141,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,59269,59270,59271,59272,59273,59274,59275,59276,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,59277,59278,59279,59280,59281,59282,59283,65077,65078,65081,65082,65087,65088,65085,65086,65089,65090,65091,65092,59284,59285,65083,65084,65079,65080,65073,59286,65075,65076,59287,59288,59289,59290,59291,59292,59293,59294,59295,59142,59143,59144,59145,59146,59147,59148,59149,59150,59151,59152,59153,59154,59155,59156,59157,59158,59159,59160,59161,59162,59163,59164,59165,59166,59167,59168,59169,59170,59171,59172,59173,59174,59175,59176,59177,59178,59179,59180,59181,59182,59183,59184,59185,59186,59187,59188,59189,59190,59191,59192,59193,59194,59195,59196,59197,59198,59199,59200,59201,59202,59203,59204,59205,59206,59207,59208,59209,59210,59211,59212,59213,59214,59215,59216,59217,59218,59219,59220,59221,59222,59223,59224,59225,59226,59227,59228,59229,59230,59231,59232,59233,59234,59235,59236,59237,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,59296,59297,59298,59299,59300,59301,59302,59303,59304,59305,59306,59307,59308,59309,59310,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,59311,59312,59313,59314,59315,59316,59317,59318,59319,59320,59321,59322,59323,714,715,729,8211,8213,8229,8245,8453,8457,8598,8599,8600,8601,8725,8735,8739,8786,8806,8807,8895,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9581,9582,9583,9584,9585,9586,9587,9601,9602,9603,9604,9605,9606,9607,9608,9609,9610,9611,9612,9613,9614,9615,9619,9620,9621,9660,9661,9698,9699,9700,9701,9737,8853,12306,12317,12318,59324,59325,59326,59327,59328,59329,59330,59331,59332,59333,59334,257,225,462,224,275,233,283,232,299,237,464,236,333,243,466,242,363,250,468,249,470,472,474,476,252,234,593,7743,324,328,505,609,59337,59338,59339,59340,12549,12550,12551,12552,12553,12554,12555,12556,12557,12558,12559,12560,12561,12562,12563,12564,12565,12566,12567,12568,12569,12570,12571,12572,12573,12574,12575,12576,12577,12578,12579,12580,12581,12582,12583,12584,12585,59341,59342,59343,59344,59345,59346,59347,59348,59349,59350,59351,59352,59353,59354,59355,59356,59357,59358,59359,59360,59361,12321,12322,12323,12324,12325,12326,12327,12328,12329,12963,13198,13199,13212,13213,13214,13217,13252,13262,13265,13266,13269,65072,65506,65508,59362,8481,12849,59363,8208,59364,59365,59366,12540,12443,12444,12541,12542,12294,12445,12446,65097,65098,65099,65100,65101,65102,65103,65104,65105,65106,65108,65109,65110,65111,65113,65114,65115,65116,65117,65118,65119,65120,65121,65122,65123,65124,65125,65126,65128,65129,65130,65131,12350,12272,12273,12274,12275,12276,12277,12278,12279,12280,12281,12282,12283,12295,59380,59381,59382,59383,59384,59385,59386,59387,59388,59389,59390,59391,59392,9472,9473,9474,9475,9476,9477,9478,9479,9480,9481,9482,9483,9484,9485,9486,9487,9488,9489,9490,9491,9492,9493,9494,9495,9496,9497,9498,9499,9500,9501,9502,9503,9504,9505,9506,9507,9508,9509,9510,9511,9512,9513,9514,9515,9516,9517,9518,9519,9520,9521,9522,9523,9524,9525,9526,9527,9528,9529,9530,9531,9532,9533,9534,9535,9536,9537,9538,9539,9540,9541,9542,9543,9544,9545,9546,9547,59393,59394,59395,59396,59397,59398,59399,59400,59401,59402,59403,59404,59405,59406,59407,29404,29405,29407,29410,29411,29412,29413,29414,29415,29418,29419,29429,29430,29433,29437,29438,29439,29440,29442,29444,29445,29446,29447,29448,29449,29451,29452,29453,29455,29456,29457,29458,29460,29464,29465,29466,29471,29472,29475,29476,29478,29479,29480,29485,29487,29488,29490,29491,29493,29494,29498,29499,29500,29501,29504,29505,29506,29507,29508,29509,29510,29511,29512,29513,29514,29515,29516,29518,29519,29521,29523,29524,29525,29526,29528,29529,29530,29531,29532,29533,29534,29535,29537,29538,29539,29540,29541,29542,29543,29544,29545,29546,29547,29550,29552,29553,57344,57345,57346,57347,57348,57349,57350,57351,57352,57353,57354,57355,57356,57357,57358,57359,57360,57361,57362,57363,57364,57365,57366,57367,57368,57369,57370,57371,57372,57373,57374,57375,57376,57377,57378,57379,57380,57381,57382,57383,57384,57385,57386,57387,57388,57389,57390,57391,57392,57393,57394,57395,57396,57397,57398,57399,57400,57401,57402,57403,57404,57405,57406,57407,57408,57409,57410,57411,57412,57413,57414,57415,57416,57417,57418,57419,57420,57421,57422,57423,57424,57425,57426,57427,57428,57429,57430,57431,57432,57433,57434,57435,57436,57437,29554,29555,29556,29557,29558,29559,29560,29561,29562,29563,29564,29565,29567,29568,29569,29570,29571,29573,29574,29576,29578,29580,29581,29583,29584,29586,29587,29588,29589,29591,29592,29593,29594,29596,29597,29598,29600,29601,29603,29604,29605,29606,29607,29608,29610,29612,29613,29617,29620,29621,29622,29624,29625,29628,29629,29630,29631,29633,29635,29636,29637,29638,29639,29643,29644,29646,29650,29651,29652,29653,29654,29655,29656,29658,29659,29660,29661,29663,29665,29666,29667,29668,29670,29672,29674,29675,29676,29678,29679,29680,29681,29683,29684,29685,29686,29687,57438,57439,57440,57441,57442,57443,57444,57445,57446,57447,57448,57449,57450,57451,57452,57453,57454,57455,57456,57457,57458,57459,57460,57461,57462,57463,57464,57465,57466,57467,57468,57469,57470,57471,57472,57473,57474,57475,57476,57477,57478,57479,57480,57481,57482,57483,57484,57485,57486,57487,57488,57489,57490,57491,57492,57493,57494,57495,57496,57497,57498,57499,57500,57501,57502,57503,57504,57505,57506,57507,57508,57509,57510,57511,57512,57513,57514,57515,57516,57517,57518,57519,57520,57521,57522,57523,57524,57525,57526,57527,57528,57529,57530,57531,29688,29689,29690,29691,29692,29693,29694,29695,29696,29697,29698,29700,29703,29704,29707,29708,29709,29710,29713,29714,29715,29716,29717,29718,29719,29720,29721,29724,29725,29726,29727,29728,29729,29731,29732,29735,29737,29739,29741,29743,29745,29746,29751,29752,29753,29754,29755,29757,29758,29759,29760,29762,29763,29764,29765,29766,29767,29768,29769,29770,29771,29772,29773,29774,29775,29776,29777,29778,29779,29780,29782,29784,29789,29792,29793,29794,29795,29796,29797,29798,29799,29800,29801,29802,29803,29804,29806,29807,29809,29810,29811,29812,29813,29816,29817,29818,57532,57533,57534,57535,57536,57537,57538,57539,57540,57541,57542,57543,57544,57545,57546,57547,57548,57549,57550,57551,57552,57553,57554,57555,57556,57557,57558,57559,57560,57561,57562,57563,57564,57565,57566,57567,57568,57569,57570,57571,57572,57573,57574,57575,57576,57577,57578,57579,57580,57581,57582,57583,57584,57585,57586,57587,57588,57589,57590,57591,57592,57593,57594,57595,57596,57597,57598,57599,57600,57601,57602,57603,57604,57605,57606,57607,57608,57609,57610,57611,57612,57613,57614,57615,57616,57617,57618,57619,57620,57621,57622,57623,57624,57625,29819,29820,29821,29823,29826,29828,29829,29830,29832,29833,29834,29836,29837,29839,29841,29842,29843,29844,29845,29846,29847,29848,29849,29850,29851,29853,29855,29856,29857,29858,29859,29860,29861,29862,29866,29867,29868,29869,29870,29871,29872,29873,29874,29875,29876,29877,29878,29879,29880,29881,29883,29884,29885,29886,29887,29888,29889,29890,29891,29892,29893,29894,29895,29896,29897,29898,29899,29900,29901,29902,29903,29904,29905,29907,29908,29909,29910,29911,29912,29913,29914,29915,29917,29919,29921,29925,29927,29928,29929,29930,29931,29932,29933,29936,29937,29938,57626,57627,57628,57629,57630,57631,57632,57633,57634,57635,57636,57637,57638,57639,57640,57641,57642,57643,57644,57645,57646,57647,57648,57649,57650,57651,57652,57653,57654,57655,57656,57657,57658,57659,57660,57661,57662,57663,57664,57665,57666,57667,57668,57669,57670,57671,57672,57673,57674,57675,57676,57677,57678,57679,57680,57681,57682,57683,57684,57685,57686,57687,57688,57689,57690,57691,57692,57693,57694,57695,57696,57697,57698,57699,57700,57701,57702,57703,57704,57705,57706,57707,57708,57709,57710,57711,57712,57713,57714,57715,57716,57717,57718,57719,29939,29941,29944,29945,29946,29947,29948,29949,29950,29952,29953,29954,29955,29957,29958,29959,29960,29961,29962,29963,29964,29966,29968,29970,29972,29973,29974,29975,29979,29981,29982,29984,29985,29986,29987,29988,29990,29991,29994,29998,30004,30006,30009,30012,30013,30015,30017,30018,30019,30020,30022,30023,30025,30026,30029,30032,30033,30034,30035,30037,30038,30039,30040,30045,30046,30047,30048,30049,30050,30051,30052,30055,30056,30057,30059,30060,30061,30062,30063,30064,30065,30067,30069,30070,30071,30074,30075,30076,30077,30078,30080,30081,30082,30084,30085,30087,57720,57721,57722,57723,57724,57725,57726,57727,57728,57729,57730,57731,57732,57733,57734,57735,57736,57737,57738,57739,57740,57741,57742,57743,57744,57745,57746,57747,57748,57749,57750,57751,57752,57753,57754,57755,57756,57757,57758,57759,57760,57761,57762,57763,57764,57765,57766,57767,57768,57769,57770,57771,57772,57773,57774,57775,57776,57777,57778,57779,57780,57781,57782,57783,57784,57785,57786,57787,57788,57789,57790,57791,57792,57793,57794,57795,57796,57797,57798,57799,57800,57801,57802,57803,57804,57805,57806,57807,57808,57809,57810,57811,57812,57813,30088,30089,30090,30092,30093,30094,30096,30099,30101,30104,30107,30108,30110,30114,30118,30119,30120,30121,30122,30125,30134,30135,30138,30139,30143,30144,30145,30150,30155,30156,30158,30159,30160,30161,30163,30167,30169,30170,30172,30173,30175,30176,30177,30181,30185,30188,30189,30190,30191,30194,30195,30197,30198,30199,30200,30202,30203,30205,30206,30210,30212,30214,30215,30216,30217,30219,30221,30222,30223,30225,30226,30227,30228,30230,30234,30236,30237,30238,30241,30243,30247,30248,30252,30254,30255,30257,30258,30262,30263,30265,30266,30267,30269,30273,30274,30276,57814,57815,57816,57817,57818,57819,57820,57821,57822,57823,57824,57825,57826,57827,57828,57829,57830,57831,57832,57833,57834,57835,57836,57837,57838,57839,57840,57841,57842,57843,57844,57845,57846,57847,57848,57849,57850,57851,57852,57853,57854,57855,57856,57857,57858,57859,57860,57861,57862,57863,57864,57865,57866,57867,57868,57869,57870,57871,57872,57873,57874,57875,57876,57877,57878,57879,57880,57881,57882,57883,57884,57885,57886,57887,57888,57889,57890,57891,57892,57893,57894,57895,57896,57897,57898,57899,57900,57901,57902,57903,57904,57905,57906,57907,30277,30278,30279,30280,30281,30282,30283,30286,30287,30288,30289,30290,30291,30293,30295,30296,30297,30298,30299,30301,30303,30304,30305,30306,30308,30309,30310,30311,30312,30313,30314,30316,30317,30318,30320,30321,30322,30323,30324,30325,30326,30327,30329,30330,30332,30335,30336,30337,30339,30341,30345,30346,30348,30349,30351,30352,30354,30356,30357,30359,30360,30362,30363,30364,30365,30366,30367,30368,30369,30370,30371,30373,30374,30375,30376,30377,30378,30379,30380,30381,30383,30384,30387,30389,30390,30391,30392,30393,30394,30395,30396,30397,30398,30400,30401,30403,21834,38463,22467,25384,21710,21769,21696,30353,30284,34108,30702,33406,30861,29233,38552,38797,27688,23433,20474,25353,26263,23736,33018,26696,32942,26114,30414,20985,25942,29100,32753,34948,20658,22885,25034,28595,33453,25420,25170,21485,21543,31494,20843,30116,24052,25300,36299,38774,25226,32793,22365,38712,32610,29240,30333,26575,30334,25670,20336,36133,25308,31255,26001,29677,25644,25203,33324,39041,26495,29256,25198,25292,20276,29923,21322,21150,32458,37030,24110,26758,27036,33152,32465,26834,30917,34444,38225,20621,35876,33502,32990,21253,35090,21093,30404,30407,30409,30411,30412,30419,30421,30425,30426,30428,30429,30430,30432,30433,30434,30435,30436,30438,30439,30440,30441,30442,30443,30444,30445,30448,30451,30453,30454,30455,30458,30459,30461,30463,30464,30466,30467,30469,30470,30474,30476,30478,30479,30480,30481,30482,30483,30484,30485,30486,30487,30488,30491,30492,30493,30494,30497,30499,30500,30501,30503,30506,30507,30508,30510,30512,30513,30514,30515,30516,30521,30523,30525,30526,30527,30530,30532,30533,30534,30536,30537,30538,30539,30540,30541,30542,30543,30546,30547,30548,30549,30550,30551,30552,30553,30556,34180,38649,20445,22561,39281,23453,25265,25253,26292,35961,40077,29190,26479,30865,24754,21329,21271,36744,32972,36125,38049,20493,29384,22791,24811,28953,34987,22868,33519,26412,31528,23849,32503,29997,27893,36454,36856,36924,40763,27604,37145,31508,24444,30887,34006,34109,27605,27609,27606,24065,24199,30201,38381,25949,24330,24517,36767,22721,33218,36991,38491,38829,36793,32534,36140,25153,20415,21464,21342,36776,36777,36779,36941,26631,24426,33176,34920,40150,24971,21035,30250,24428,25996,28626,28392,23486,25672,20853,20912,26564,19993,31177,39292,28851,30557,30558,30559,30560,30564,30567,30569,30570,30573,30574,30575,30576,30577,30578,30579,30580,30581,30582,30583,30584,30586,30587,30588,30593,30594,30595,30598,30599,30600,30601,30602,30603,30607,30608,30611,30612,30613,30614,30615,30616,30617,30618,30619,30620,30621,30622,30625,30627,30628,30630,30632,30635,30637,30638,30639,30641,30642,30644,30646,30647,30648,30649,30650,30652,30654,30656,30657,30658,30659,30660,30661,30662,30663,30664,30665,30666,30667,30668,30670,30671,30672,30673,30674,30675,30676,30677,30678,30680,30681,30682,30685,30686,30687,30688,30689,30692,30149,24182,29627,33760,25773,25320,38069,27874,21338,21187,25615,38082,31636,20271,24091,33334,33046,33162,28196,27850,39539,25429,21340,21754,34917,22496,19981,24067,27493,31807,37096,24598,25830,29468,35009,26448,25165,36130,30572,36393,37319,24425,33756,34081,39184,21442,34453,27531,24813,24808,28799,33485,33329,20179,27815,34255,25805,31961,27133,26361,33609,21397,31574,20391,20876,27979,23618,36461,25554,21449,33580,33590,26597,30900,25661,23519,23700,24046,35815,25286,26612,35962,25600,25530,34633,39307,35863,32544,38130,20135,38416,39076,26124,29462,30694,30696,30698,30703,30704,30705,30706,30708,30709,30711,30713,30714,30715,30716,30723,30724,30725,30726,30727,30728,30730,30731,30734,30735,30736,30739,30741,30745,30747,30750,30752,30753,30754,30756,30760,30762,30763,30766,30767,30769,30770,30771,30773,30774,30781,30783,30785,30786,30787,30788,30790,30792,30793,30794,30795,30797,30799,30801,30803,30804,30808,30809,30810,30811,30812,30814,30815,30816,30817,30818,30819,30820,30821,30822,30823,30824,30825,30831,30832,30833,30834,30835,30836,30837,30838,30840,30841,30842,30843,30845,30846,30847,30848,30849,30850,30851,22330,23581,24120,38271,20607,32928,21378,25950,30021,21809,20513,36229,25220,38046,26397,22066,28526,24034,21557,28818,36710,25199,25764,25507,24443,28552,37108,33251,36784,23576,26216,24561,27785,38472,36225,34924,25745,31216,22478,27225,25104,21576,20056,31243,24809,28548,35802,25215,36894,39563,31204,21507,30196,25345,21273,27744,36831,24347,39536,32827,40831,20360,23610,36196,32709,26021,28861,20805,20914,34411,23815,23456,25277,37228,30068,36364,31264,24833,31609,20167,32504,30597,19985,33261,21021,20986,27249,21416,36487,38148,38607,28353,38500,26970,30852,30853,30854,30856,30858,30859,30863,30864,30866,30868,30869,30870,30873,30877,30878,30880,30882,30884,30886,30888,30889,30890,30891,30892,30893,30894,30895,30901,30902,30903,30904,30906,30907,30908,30909,30911,30912,30914,30915,30916,30918,30919,30920,30924,30925,30926,30927,30929,30930,30931,30934,30935,30936,30938,30939,30940,30941,30942,30943,30944,30945,30946,30947,30948,30949,30950,30951,30953,30954,30955,30957,30958,30959,30960,30961,30963,30965,30966,30968,30969,30971,30972,30973,30974,30975,30976,30978,30979,30980,30982,30983,30984,30985,30986,30987,30988,30784,20648,30679,25616,35302,22788,25571,24029,31359,26941,20256,33337,21912,20018,30126,31383,24162,24202,38383,21019,21561,28810,25462,38180,22402,26149,26943,37255,21767,28147,32431,34850,25139,32496,30133,33576,30913,38604,36766,24904,29943,35789,27492,21050,36176,27425,32874,33905,22257,21254,20174,19995,20945,31895,37259,31751,20419,36479,31713,31388,25703,23828,20652,33030,30209,31929,28140,32736,26449,23384,23544,30923,25774,25619,25514,25387,38169,25645,36798,31572,30249,25171,22823,21574,27513,20643,25140,24102,27526,20195,36151,34955,24453,36910,30989,30990,30991,30992,30993,30994,30996,30997,30998,30999,31000,31001,31002,31003,31004,31005,31007,31008,31009,31010,31011,31013,31014,31015,31016,31017,31018,31019,31020,31021,31022,31023,31024,31025,31026,31027,31029,31030,31031,31032,31033,31037,31039,31042,31043,31044,31045,31047,31050,31051,31052,31053,31054,31055,31056,31057,31058,31060,31061,31064,31065,31073,31075,31076,31078,31081,31082,31083,31084,31086,31088,31089,31090,31091,31092,31093,31094,31097,31099,31100,31101,31102,31103,31106,31107,31110,31111,31112,31113,31115,31116,31117,31118,31120,31121,31122,24608,32829,25285,20025,21333,37112,25528,32966,26086,27694,20294,24814,28129,35806,24377,34507,24403,25377,20826,33633,26723,20992,25443,36424,20498,23707,31095,23548,21040,31291,24764,36947,30423,24503,24471,30340,36460,28783,30331,31561,30634,20979,37011,22564,20302,28404,36842,25932,31515,29380,28068,32735,23265,25269,24213,22320,33922,31532,24093,24351,36882,32532,39072,25474,28359,30872,28857,20856,38747,22443,30005,20291,30008,24215,24806,22880,28096,27583,30857,21500,38613,20939,20993,25481,21514,38035,35843,36300,29241,30879,34678,36845,35853,21472,31123,31124,31125,31126,31127,31128,31129,31131,31132,31133,31134,31135,31136,31137,31138,31139,31140,31141,31142,31144,31145,31146,31147,31148,31149,31150,31151,31152,31153,31154,31156,31157,31158,31159,31160,31164,31167,31170,31172,31173,31175,31176,31178,31180,31182,31183,31184,31187,31188,31190,31191,31193,31194,31195,31196,31197,31198,31200,31201,31202,31205,31208,31210,31212,31214,31217,31218,31219,31220,31221,31222,31223,31225,31226,31228,31230,31231,31233,31236,31237,31239,31240,31241,31242,31244,31247,31248,31249,31250,31251,31253,31254,31256,31257,31259,31260,19969,30447,21486,38025,39030,40718,38189,23450,35746,20002,19996,20908,33891,25026,21160,26635,20375,24683,20923,27934,20828,25238,26007,38497,35910,36887,30168,37117,30563,27602,29322,29420,35835,22581,30585,36172,26460,38208,32922,24230,28193,22930,31471,30701,38203,27573,26029,32526,22534,20817,38431,23545,22697,21544,36466,25958,39039,22244,38045,30462,36929,25479,21702,22810,22842,22427,36530,26421,36346,33333,21057,24816,22549,34558,23784,40517,20420,39069,35769,23077,24694,21380,25212,36943,37122,39295,24681,32780,20799,32819,23572,39285,27953,20108,31261,31263,31265,31266,31268,31269,31270,31271,31272,31273,31274,31275,31276,31277,31278,31279,31280,31281,31282,31284,31285,31286,31288,31290,31294,31296,31297,31298,31299,31300,31301,31303,31304,31305,31306,31307,31308,31309,31310,31311,31312,31314,31315,31316,31317,31318,31320,31321,31322,31323,31324,31325,31326,31327,31328,31329,31330,31331,31332,31333,31334,31335,31336,31337,31338,31339,31340,31341,31342,31343,31345,31346,31347,31349,31355,31356,31357,31358,31362,31365,31367,31369,31370,31371,31372,31374,31375,31376,31379,31380,31385,31386,31387,31390,31393,31394,36144,21457,32602,31567,20240,20047,38400,27861,29648,34281,24070,30058,32763,27146,30718,38034,32321,20961,28902,21453,36820,33539,36137,29359,39277,27867,22346,33459,26041,32938,25151,38450,22952,20223,35775,32442,25918,33778,38750,21857,39134,32933,21290,35837,21536,32954,24223,27832,36153,33452,37210,21545,27675,20998,32439,22367,28954,27774,31881,22859,20221,24575,24868,31914,20016,23553,26539,34562,23792,38155,39118,30127,28925,36898,20911,32541,35773,22857,20964,20315,21542,22827,25975,32932,23413,25206,25282,36752,24133,27679,31526,20239,20440,26381,31395,31396,31399,31401,31402,31403,31406,31407,31408,31409,31410,31412,31413,31414,31415,31416,31417,31418,31419,31420,31421,31422,31424,31425,31426,31427,31428,31429,31430,31431,31432,31433,31434,31436,31437,31438,31439,31440,31441,31442,31443,31444,31445,31447,31448,31450,31451,31452,31453,31457,31458,31460,31463,31464,31465,31466,31467,31468,31470,31472,31473,31474,31475,31476,31477,31478,31479,31480,31483,31484,31486,31488,31489,31490,31493,31495,31497,31500,31501,31502,31504,31506,31507,31510,31511,31512,31514,31516,31517,31519,31521,31522,31523,31527,31529,31533,28014,28074,31119,34993,24343,29995,25242,36741,20463,37340,26023,33071,33105,24220,33104,36212,21103,35206,36171,22797,20613,20184,38428,29238,33145,36127,23500,35747,38468,22919,32538,21648,22134,22030,35813,25913,27010,38041,30422,28297,24178,29976,26438,26577,31487,32925,36214,24863,31174,25954,36195,20872,21018,38050,32568,32923,32434,23703,28207,26464,31705,30347,39640,33167,32660,31957,25630,38224,31295,21578,21733,27468,25601,25096,40509,33011,30105,21106,38761,33883,26684,34532,38401,38548,38124,20010,21508,32473,26681,36319,32789,26356,24218,32697,31535,31536,31538,31540,31541,31542,31543,31545,31547,31549,31551,31552,31553,31554,31555,31556,31558,31560,31562,31565,31566,31571,31573,31575,31577,31580,31582,31583,31585,31587,31588,31589,31590,31591,31592,31593,31594,31595,31596,31597,31599,31600,31603,31604,31606,31608,31610,31612,31613,31615,31617,31618,31619,31620,31622,31623,31624,31625,31626,31627,31628,31630,31631,31633,31634,31635,31638,31640,31641,31642,31643,31646,31647,31648,31651,31652,31653,31662,31663,31664,31666,31667,31669,31670,31671,31673,31674,31675,31676,31677,31678,31679,31680,31682,31683,31684,22466,32831,26775,24037,25915,21151,24685,40858,20379,36524,20844,23467,24339,24041,27742,25329,36129,20849,38057,21246,27807,33503,29399,22434,26500,36141,22815,36764,33735,21653,31629,20272,27837,23396,22993,40723,21476,34506,39592,35895,32929,25925,39038,22266,38599,21038,29916,21072,23521,25346,35074,20054,25296,24618,26874,20851,23448,20896,35266,31649,39302,32592,24815,28748,36143,20809,24191,36891,29808,35268,22317,30789,24402,40863,38394,36712,39740,35809,30328,26690,26588,36330,36149,21053,36746,28378,26829,38149,37101,22269,26524,35065,36807,21704,31685,31688,31689,31690,31691,31693,31694,31695,31696,31698,31700,31701,31702,31703,31704,31707,31708,31710,31711,31712,31714,31715,31716,31719,31720,31721,31723,31724,31725,31727,31728,31730,31731,31732,31733,31734,31736,31737,31738,31739,31741,31743,31744,31745,31746,31747,31748,31749,31750,31752,31753,31754,31757,31758,31760,31761,31762,31763,31764,31765,31767,31768,31769,31770,31771,31772,31773,31774,31776,31777,31778,31779,31780,31781,31784,31785,31787,31788,31789,31790,31791,31792,31793,31794,31795,31796,31797,31798,31799,31801,31802,31803,31804,31805,31806,31810,39608,23401,28023,27686,20133,23475,39559,37219,25000,37039,38889,21547,28085,23506,20989,21898,32597,32752,25788,25421,26097,25022,24717,28938,27735,27721,22831,26477,33322,22741,22158,35946,27627,37085,22909,32791,21495,28009,21621,21917,33655,33743,26680,31166,21644,20309,21512,30418,35977,38402,27827,28088,36203,35088,40548,36154,22079,40657,30165,24456,29408,24680,21756,20136,27178,34913,24658,36720,21700,28888,34425,40511,27946,23439,24344,32418,21897,20399,29492,21564,21402,20505,21518,21628,20046,24573,29786,22774,33899,32993,34676,29392,31946,28246,31811,31812,31813,31814,31815,31816,31817,31818,31819,31820,31822,31823,31824,31825,31826,31827,31828,31829,31830,31831,31832,31833,31834,31835,31836,31837,31838,31839,31840,31841,31842,31843,31844,31845,31846,31847,31848,31849,31850,31851,31852,31853,31854,31855,31856,31857,31858,31861,31862,31863,31864,31865,31866,31870,31871,31872,31873,31874,31875,31876,31877,31878,31879,31880,31882,31883,31884,31885,31886,31887,31888,31891,31892,31894,31897,31898,31899,31904,31905,31907,31910,31911,31912,31913,31915,31916,31917,31919,31920,31924,31925,31926,31927,31928,31930,31931,24359,34382,21804,25252,20114,27818,25143,33457,21719,21326,29502,28369,30011,21010,21270,35805,27088,24458,24576,28142,22351,27426,29615,26707,36824,32531,25442,24739,21796,30186,35938,28949,28067,23462,24187,33618,24908,40644,30970,34647,31783,30343,20976,24822,29004,26179,24140,24653,35854,28784,25381,36745,24509,24674,34516,22238,27585,24724,24935,21321,24800,26214,36159,31229,20250,28905,27719,35763,35826,32472,33636,26127,23130,39746,27985,28151,35905,27963,20249,28779,33719,25110,24785,38669,36135,31096,20987,22334,22522,26426,30072,31293,31215,31637,31935,31936,31938,31939,31940,31942,31945,31947,31950,31951,31952,31953,31954,31955,31956,31960,31962,31963,31965,31966,31969,31970,31971,31972,31973,31974,31975,31977,31978,31979,31980,31981,31982,31984,31985,31986,31987,31988,31989,31990,31991,31993,31994,31996,31997,31998,31999,32000,32001,32002,32003,32004,32005,32006,32007,32008,32009,32011,32012,32013,32014,32015,32016,32017,32018,32019,32020,32021,32022,32023,32024,32025,32026,32027,32028,32029,32030,32031,32033,32035,32036,32037,32038,32040,32041,32042,32044,32045,32046,32048,32049,32050,32051,32052,32053,32054,32908,39269,36857,28608,35749,40481,23020,32489,32521,21513,26497,26840,36753,31821,38598,21450,24613,30142,27762,21363,23241,32423,25380,20960,33034,24049,34015,25216,20864,23395,20238,31085,21058,24760,27982,23492,23490,35745,35760,26082,24524,38469,22931,32487,32426,22025,26551,22841,20339,23478,21152,33626,39050,36158,30002,38078,20551,31292,20215,26550,39550,23233,27516,30417,22362,23574,31546,38388,29006,20860,32937,33392,22904,32516,33575,26816,26604,30897,30839,25315,25441,31616,20461,21098,20943,33616,27099,37492,36341,36145,35265,38190,31661,20214,32055,32056,32057,32058,32059,32060,32061,32062,32063,32064,32065,32066,32067,32068,32069,32070,32071,32072,32073,32074,32075,32076,32077,32078,32079,32080,32081,32082,32083,32084,32085,32086,32087,32088,32089,32090,32091,32092,32093,32094,32095,32096,32097,32098,32099,32100,32101,32102,32103,32104,32105,32106,32107,32108,32109,32111,32112,32113,32114,32115,32116,32117,32118,32120,32121,32122,32123,32124,32125,32126,32127,32128,32129,32130,32131,32132,32133,32134,32135,32136,32137,32138,32139,32140,32141,32142,32143,32144,32145,32146,32147,32148,32149,32150,32151,32152,20581,33328,21073,39279,28176,28293,28071,24314,20725,23004,23558,27974,27743,30086,33931,26728,22870,35762,21280,37233,38477,34121,26898,30977,28966,33014,20132,37066,27975,39556,23047,22204,25605,38128,30699,20389,33050,29409,35282,39290,32564,32478,21119,25945,37237,36735,36739,21483,31382,25581,25509,30342,31224,34903,38454,25130,21163,33410,26708,26480,25463,30571,31469,27905,32467,35299,22992,25106,34249,33445,30028,20511,20171,30117,35819,23626,24062,31563,26020,37329,20170,27941,35167,32039,38182,20165,35880,36827,38771,26187,31105,36817,28908,28024,32153,32154,32155,32156,32157,32158,32159,32160,32161,32162,32163,32164,32165,32167,32168,32169,32170,32171,32172,32173,32175,32176,32177,32178,32179,32180,32181,32182,32183,32184,32185,32186,32187,32188,32189,32190,32191,32192,32193,32194,32195,32196,32197,32198,32199,32200,32201,32202,32203,32204,32205,32206,32207,32208,32209,32210,32211,32212,32213,32214,32215,32216,32217,32218,32219,32220,32221,32222,32223,32224,32225,32226,32227,32228,32229,32230,32231,32232,32233,32234,32235,32236,32237,32238,32239,32240,32241,32242,32243,32244,32245,32246,32247,32248,32249,32250,23613,21170,33606,20834,33550,30555,26230,40120,20140,24778,31934,31923,32463,20117,35686,26223,39048,38745,22659,25964,38236,24452,30153,38742,31455,31454,20928,28847,31384,25578,31350,32416,29590,38893,20037,28792,20061,37202,21417,25937,26087,33276,33285,21646,23601,30106,38816,25304,29401,30141,23621,39545,33738,23616,21632,30697,20030,27822,32858,25298,25454,24040,20855,36317,36382,38191,20465,21477,24807,28844,21095,25424,40515,23071,20518,30519,21367,32482,25733,25899,25225,25496,20500,29237,35273,20915,35776,32477,22343,33740,38055,20891,21531,23803,32251,32252,32253,32254,32255,32256,32257,32258,32259,32260,32261,32262,32263,32264,32265,32266,32267,32268,32269,32270,32271,32272,32273,32274,32275,32276,32277,32278,32279,32280,32281,32282,32283,32284,32285,32286,32287,32288,32289,32290,32291,32292,32293,32294,32295,32296,32297,32298,32299,32300,32301,32302,32303,32304,32305,32306,32307,32308,32309,32310,32311,32312,32313,32314,32316,32317,32318,32319,32320,32322,32323,32324,32325,32326,32328,32329,32330,32331,32332,32333,32334,32335,32336,32337,32338,32339,32340,32341,32342,32343,32344,32345,32346,32347,32348,32349,20426,31459,27994,37089,39567,21888,21654,21345,21679,24320,25577,26999,20975,24936,21002,22570,21208,22350,30733,30475,24247,24951,31968,25179,25239,20130,28821,32771,25335,28900,38752,22391,33499,26607,26869,30933,39063,31185,22771,21683,21487,28212,20811,21051,23458,35838,32943,21827,22438,24691,22353,21549,31354,24656,23380,25511,25248,21475,25187,23495,26543,21741,31391,33510,37239,24211,35044,22840,22446,25358,36328,33007,22359,31607,20393,24555,23485,27454,21281,31568,29378,26694,30719,30518,26103,20917,20111,30420,23743,31397,33909,22862,39745,20608,32350,32351,32352,32353,32354,32355,32356,32357,32358,32359,32360,32361,32362,32363,32364,32365,32366,32367,32368,32369,32370,32371,32372,32373,32374,32375,32376,32377,32378,32379,32380,32381,32382,32383,32384,32385,32387,32388,32389,32390,32391,32392,32393,32394,32395,32396,32397,32398,32399,32400,32401,32402,32403,32404,32405,32406,32407,32408,32409,32410,32412,32413,32414,32430,32436,32443,32444,32470,32484,32492,32505,32522,32528,32542,32567,32569,32571,32572,32573,32574,32575,32576,32577,32579,32582,32583,32584,32585,32586,32587,32588,32589,32590,32591,32594,32595,39304,24871,28291,22372,26118,25414,22256,25324,25193,24275,38420,22403,25289,21895,34593,33098,36771,21862,33713,26469,36182,34013,23146,26639,25318,31726,38417,20848,28572,35888,25597,35272,25042,32518,28866,28389,29701,27028,29436,24266,37070,26391,28010,25438,21171,29282,32769,20332,23013,37226,28889,28061,21202,20048,38647,38253,34174,30922,32047,20769,22418,25794,32907,31867,27882,26865,26974,20919,21400,26792,29313,40654,31729,29432,31163,28435,29702,26446,37324,40100,31036,33673,33620,21519,26647,20029,21385,21169,30782,21382,21033,20616,20363,20432,32598,32601,32603,32604,32605,32606,32608,32611,32612,32613,32614,32615,32619,32620,32621,32623,32624,32627,32629,32630,32631,32632,32634,32635,32636,32637,32639,32640,32642,32643,32644,32645,32646,32647,32648,32649,32651,32653,32655,32656,32657,32658,32659,32661,32662,32663,32664,32665,32667,32668,32672,32674,32675,32677,32678,32680,32681,32682,32683,32684,32685,32686,32689,32691,32692,32693,32694,32695,32698,32699,32702,32704,32706,32707,32708,32710,32711,32712,32713,32715,32717,32719,32720,32721,32722,32723,32726,32727,32729,32730,32731,32732,32733,32734,32738,32739,30178,31435,31890,27813,38582,21147,29827,21737,20457,32852,33714,36830,38256,24265,24604,28063,24088,25947,33080,38142,24651,28860,32451,31918,20937,26753,31921,33391,20004,36742,37327,26238,20142,35845,25769,32842,20698,30103,29134,23525,36797,28518,20102,25730,38243,24278,26009,21015,35010,28872,21155,29454,29747,26519,30967,38678,20020,37051,40158,28107,20955,36161,21533,25294,29618,33777,38646,40836,38083,20278,32666,20940,28789,38517,23725,39046,21478,20196,28316,29705,27060,30827,39311,30041,21016,30244,27969,26611,20845,40857,32843,21657,31548,31423,32740,32743,32744,32746,32747,32748,32749,32751,32754,32756,32757,32758,32759,32760,32761,32762,32765,32766,32767,32770,32775,32776,32777,32778,32782,32783,32785,32787,32794,32795,32797,32798,32799,32801,32803,32804,32811,32812,32813,32814,32815,32816,32818,32820,32825,32826,32828,32830,32832,32833,32836,32837,32839,32840,32841,32846,32847,32848,32849,32851,32853,32854,32855,32857,32859,32860,32861,32862,32863,32864,32865,32866,32867,32868,32869,32870,32871,32872,32875,32876,32877,32878,32879,32880,32882,32883,32884,32885,32886,32887,32888,32889,32890,32891,32892,32893,38534,22404,25314,38471,27004,23044,25602,31699,28431,38475,33446,21346,39045,24208,28809,25523,21348,34383,40065,40595,30860,38706,36335,36162,40575,28510,31108,24405,38470,25134,39540,21525,38109,20387,26053,23653,23649,32533,34385,27695,24459,29575,28388,32511,23782,25371,23402,28390,21365,20081,25504,30053,25249,36718,20262,20177,27814,32438,35770,33821,34746,32599,36923,38179,31657,39585,35064,33853,27931,39558,32476,22920,40635,29595,30721,34434,39532,39554,22043,21527,22475,20080,40614,21334,36808,33033,30610,39314,34542,28385,34067,26364,24930,28459,32894,32897,32898,32901,32904,32906,32909,32910,32911,32912,32913,32914,32916,32917,32919,32921,32926,32931,32934,32935,32936,32940,32944,32947,32949,32950,32952,32953,32955,32965,32967,32968,32969,32970,32971,32975,32976,32977,32978,32979,32980,32981,32984,32991,32992,32994,32995,32998,33006,33013,33015,33017,33019,33022,33023,33024,33025,33027,33028,33029,33031,33032,33035,33036,33045,33047,33049,33051,33052,33053,33055,33056,33057,33058,33059,33060,33061,33062,33063,33064,33065,33066,33067,33069,33070,33072,33075,33076,33077,33079,33081,33082,33083,33084,33085,33087,35881,33426,33579,30450,27667,24537,33725,29483,33541,38170,27611,30683,38086,21359,33538,20882,24125,35980,36152,20040,29611,26522,26757,37238,38665,29028,27809,30473,23186,38209,27599,32654,26151,23504,22969,23194,38376,38391,20204,33804,33945,27308,30431,38192,29467,26790,23391,30511,37274,38753,31964,36855,35868,24357,31859,31192,35269,27852,34588,23494,24130,26825,30496,32501,20885,20813,21193,23081,32517,38754,33495,25551,30596,34256,31186,28218,24217,22937,34065,28781,27665,25279,30399,25935,24751,38397,26126,34719,40483,38125,21517,21629,35884,25720,33088,33089,33090,33091,33092,33093,33095,33097,33101,33102,33103,33106,33110,33111,33112,33115,33116,33117,33118,33119,33121,33122,33123,33124,33126,33128,33130,33131,33132,33135,33138,33139,33141,33142,33143,33144,33153,33155,33156,33157,33158,33159,33161,33163,33164,33165,33166,33168,33170,33171,33172,33173,33174,33175,33177,33178,33182,33183,33184,33185,33186,33188,33189,33191,33193,33195,33196,33197,33198,33199,33200,33201,33202,33204,33205,33206,33207,33208,33209,33212,33213,33214,33215,33220,33221,33223,33224,33225,33227,33229,33230,33231,33232,33233,33234,33235,25721,34321,27169,33180,30952,25705,39764,25273,26411,33707,22696,40664,27819,28448,23518,38476,35851,29279,26576,25287,29281,20137,22982,27597,22675,26286,24149,21215,24917,26408,30446,30566,29287,31302,25343,21738,21584,38048,37027,23068,32435,27670,20035,22902,32784,22856,21335,30007,38590,22218,25376,33041,24700,38393,28118,21602,39297,20869,23273,33021,22958,38675,20522,27877,23612,25311,20320,21311,33147,36870,28346,34091,25288,24180,30910,25781,25467,24565,23064,37247,40479,23615,25423,32834,23421,21870,38218,38221,28037,24744,26592,29406,20957,23425,33236,33237,33238,33239,33240,33241,33242,33243,33244,33245,33246,33247,33248,33249,33250,33252,33253,33254,33256,33257,33259,33262,33263,33264,33265,33266,33269,33270,33271,33272,33273,33274,33277,33279,33283,33287,33288,33289,33290,33291,33294,33295,33297,33299,33301,33302,33303,33304,33305,33306,33309,33312,33316,33317,33318,33319,33321,33326,33330,33338,33340,33341,33343,33344,33345,33346,33347,33349,33350,33352,33354,33356,33357,33358,33360,33361,33362,33363,33364,33365,33366,33367,33369,33371,33372,33373,33374,33376,33377,33378,33379,33380,33381,33382,33383,33385,25319,27870,29275,25197,38062,32445,33043,27987,20892,24324,22900,21162,24594,22899,26262,34384,30111,25386,25062,31983,35834,21734,27431,40485,27572,34261,21589,20598,27812,21866,36276,29228,24085,24597,29750,25293,25490,29260,24472,28227,27966,25856,28504,30424,30928,30460,30036,21028,21467,20051,24222,26049,32810,32982,25243,21638,21032,28846,34957,36305,27873,21624,32986,22521,35060,36180,38506,37197,20329,27803,21943,30406,30768,25256,28921,28558,24429,34028,26842,30844,31735,33192,26379,40527,25447,30896,22383,30738,38713,25209,25259,21128,29749,27607,33386,33387,33388,33389,33393,33397,33398,33399,33400,33403,33404,33408,33409,33411,33413,33414,33415,33417,33420,33424,33427,33428,33429,33430,33434,33435,33438,33440,33442,33443,33447,33458,33461,33462,33466,33467,33468,33471,33472,33474,33475,33477,33478,33481,33488,33494,33497,33498,33501,33506,33511,33512,33513,33514,33516,33517,33518,33520,33522,33523,33525,33526,33528,33530,33532,33533,33534,33535,33536,33546,33547,33549,33552,33554,33555,33558,33560,33561,33565,33566,33567,33568,33569,33570,33571,33572,33573,33574,33577,33578,33582,33584,33586,33591,33595,33597,21860,33086,30130,30382,21305,30174,20731,23617,35692,31687,20559,29255,39575,39128,28418,29922,31080,25735,30629,25340,39057,36139,21697,32856,20050,22378,33529,33805,24179,20973,29942,35780,23631,22369,27900,39047,23110,30772,39748,36843,31893,21078,25169,38138,20166,33670,33889,33769,33970,22484,26420,22275,26222,28006,35889,26333,28689,26399,27450,26646,25114,22971,19971,20932,28422,26578,27791,20854,26827,22855,27495,30054,23822,33040,40784,26071,31048,31041,39569,36215,23682,20062,20225,21551,22865,30732,22120,27668,36804,24323,27773,27875,35755,25488,33598,33599,33601,33602,33604,33605,33608,33610,33611,33612,33613,33614,33619,33621,33622,33623,33624,33625,33629,33634,33648,33649,33650,33651,33652,33653,33654,33657,33658,33662,33663,33664,33665,33666,33667,33668,33671,33672,33674,33675,33676,33677,33679,33680,33681,33684,33685,33686,33687,33689,33690,33693,33695,33697,33698,33699,33700,33701,33702,33703,33708,33709,33710,33711,33717,33723,33726,33727,33730,33731,33732,33734,33736,33737,33739,33741,33742,33744,33745,33746,33747,33749,33751,33753,33754,33755,33758,33762,33763,33764,33766,33767,33768,33771,33772,33773,24688,27965,29301,25190,38030,38085,21315,36801,31614,20191,35878,20094,40660,38065,38067,21069,28508,36963,27973,35892,22545,23884,27424,27465,26538,21595,33108,32652,22681,34103,24378,25250,27207,38201,25970,24708,26725,30631,20052,20392,24039,38808,25772,32728,23789,20431,31373,20999,33540,19988,24623,31363,38054,20405,20146,31206,29748,21220,33465,25810,31165,23517,27777,38738,36731,27682,20542,21375,28165,25806,26228,27696,24773,39031,35831,24198,29756,31351,31179,19992,37041,29699,27714,22234,37195,27845,36235,21306,34502,26354,36527,23624,39537,28192,33774,33775,33779,33780,33781,33782,33783,33786,33787,33788,33790,33791,33792,33794,33797,33799,33800,33801,33802,33808,33810,33811,33812,33813,33814,33815,33817,33818,33819,33822,33823,33824,33825,33826,33827,33833,33834,33835,33836,33837,33838,33839,33840,33842,33843,33844,33845,33846,33847,33849,33850,33851,33854,33855,33856,33857,33858,33859,33860,33861,33863,33864,33865,33866,33867,33868,33869,33870,33871,33872,33874,33875,33876,33877,33878,33880,33885,33886,33887,33888,33890,33892,33893,33894,33895,33896,33898,33902,33903,33904,33906,33908,33911,33913,33915,33916,21462,23094,40843,36259,21435,22280,39079,26435,37275,27849,20840,30154,25331,29356,21048,21149,32570,28820,30264,21364,40522,27063,30830,38592,35033,32676,28982,29123,20873,26579,29924,22756,25880,22199,35753,39286,25200,32469,24825,28909,22764,20161,20154,24525,38887,20219,35748,20995,22922,32427,25172,20173,26085,25102,33592,33993,33635,34701,29076,28342,23481,32466,20887,25545,26580,32905,33593,34837,20754,23418,22914,36785,20083,27741,20837,35109,36719,38446,34122,29790,38160,38384,28070,33509,24369,25746,27922,33832,33134,40131,22622,36187,19977,21441,33917,33918,33919,33920,33921,33923,33924,33925,33926,33930,33933,33935,33936,33937,33938,33939,33940,33941,33942,33944,33946,33947,33949,33950,33951,33952,33954,33955,33956,33957,33958,33959,33960,33961,33962,33963,33964,33965,33966,33968,33969,33971,33973,33974,33975,33979,33980,33982,33984,33986,33987,33989,33990,33991,33992,33995,33996,33998,33999,34002,34004,34005,34007,34008,34009,34010,34011,34012,34014,34017,34018,34020,34023,34024,34025,34026,34027,34029,34030,34031,34033,34034,34035,34036,34037,34038,34039,34040,34041,34042,34043,34045,34046,34048,34049,34050,20254,25955,26705,21971,20007,25620,39578,25195,23234,29791,33394,28073,26862,20711,33678,30722,26432,21049,27801,32433,20667,21861,29022,31579,26194,29642,33515,26441,23665,21024,29053,34923,38378,38485,25797,36193,33203,21892,27733,25159,32558,22674,20260,21830,36175,26188,19978,23578,35059,26786,25422,31245,28903,33421,21242,38902,23569,21736,37045,32461,22882,36170,34503,33292,33293,36198,25668,23556,24913,28041,31038,35774,30775,30003,21627,20280,36523,28145,23072,32453,31070,27784,23457,23158,29978,32958,24910,28183,22768,29983,29989,29298,21319,32499,34051,34052,34053,34054,34055,34056,34057,34058,34059,34061,34062,34063,34064,34066,34068,34069,34070,34072,34073,34075,34076,34077,34078,34080,34082,34083,34084,34085,34086,34087,34088,34089,34090,34093,34094,34095,34096,34097,34098,34099,34100,34101,34102,34110,34111,34112,34113,34114,34116,34117,34118,34119,34123,34124,34125,34126,34127,34128,34129,34130,34131,34132,34133,34135,34136,34138,34139,34140,34141,34143,34144,34145,34146,34147,34149,34150,34151,34153,34154,34155,34156,34157,34158,34159,34160,34161,34163,34165,34166,34167,34168,34172,34173,34175,34176,34177,30465,30427,21097,32988,22307,24072,22833,29422,26045,28287,35799,23608,34417,21313,30707,25342,26102,20160,39135,34432,23454,35782,21490,30690,20351,23630,39542,22987,24335,31034,22763,19990,26623,20107,25325,35475,36893,21183,26159,21980,22124,36866,20181,20365,37322,39280,27663,24066,24643,23460,35270,35797,25910,25163,39318,23432,23551,25480,21806,21463,30246,20861,34092,26530,26803,27530,25234,36755,21460,33298,28113,30095,20070,36174,23408,29087,34223,26257,26329,32626,34560,40653,40736,23646,26415,36848,26641,26463,25101,31446,22661,24246,25968,28465,34178,34179,34182,34184,34185,34186,34187,34188,34189,34190,34192,34193,34194,34195,34196,34197,34198,34199,34200,34201,34202,34205,34206,34207,34208,34209,34210,34211,34213,34214,34215,34217,34219,34220,34221,34225,34226,34227,34228,34229,34230,34232,34234,34235,34236,34237,34238,34239,34240,34242,34243,34244,34245,34246,34247,34248,34250,34251,34252,34253,34254,34257,34258,34260,34262,34263,34264,34265,34266,34267,34269,34270,34271,34272,34273,34274,34275,34277,34278,34279,34280,34282,34283,34284,34285,34286,34287,34288,34289,34290,34291,34292,34293,34294,34295,34296,24661,21047,32781,25684,34928,29993,24069,26643,25332,38684,21452,29245,35841,27700,30561,31246,21550,30636,39034,33308,35828,30805,26388,28865,26031,25749,22070,24605,31169,21496,19997,27515,32902,23546,21987,22235,20282,20284,39282,24051,26494,32824,24578,39042,36865,23435,35772,35829,25628,33368,25822,22013,33487,37221,20439,32032,36895,31903,20723,22609,28335,23487,35785,32899,37240,33948,31639,34429,38539,38543,32485,39635,30862,23681,31319,36930,38567,31071,23385,25439,31499,34001,26797,21766,32553,29712,32034,38145,25152,22604,20182,23427,22905,22612,34297,34298,34300,34301,34302,34304,34305,34306,34307,34308,34310,34311,34312,34313,34314,34315,34316,34317,34318,34319,34320,34322,34323,34324,34325,34327,34328,34329,34330,34331,34332,34333,34334,34335,34336,34337,34338,34339,34340,34341,34342,34344,34346,34347,34348,34349,34350,34351,34352,34353,34354,34355,34356,34357,34358,34359,34361,34362,34363,34365,34366,34367,34368,34369,34370,34371,34372,34373,34374,34375,34376,34377,34378,34379,34380,34386,34387,34389,34390,34391,34392,34393,34395,34396,34397,34399,34400,34401,34403,34404,34405,34406,34407,34408,34409,34410,29549,25374,36427,36367,32974,33492,25260,21488,27888,37214,22826,24577,27760,22349,25674,36138,30251,28393,22363,27264,30192,28525,35885,35848,22374,27631,34962,30899,25506,21497,28845,27748,22616,25642,22530,26848,33179,21776,31958,20504,36538,28108,36255,28907,25487,28059,28372,32486,33796,26691,36867,28120,38518,35752,22871,29305,34276,33150,30140,35466,26799,21076,36386,38161,25552,39064,36420,21884,20307,26367,22159,24789,28053,21059,23625,22825,28155,22635,30000,29980,24684,33300,33094,25361,26465,36834,30522,36339,36148,38081,24086,21381,21548,28867,34413,34415,34416,34418,34419,34420,34421,34422,34423,34424,34435,34436,34437,34438,34439,34440,34441,34446,34447,34448,34449,34450,34452,34454,34455,34456,34457,34458,34459,34462,34463,34464,34465,34466,34469,34470,34475,34477,34478,34482,34483,34487,34488,34489,34491,34492,34493,34494,34495,34497,34498,34499,34501,34504,34508,34509,34514,34515,34517,34518,34519,34522,34524,34525,34528,34529,34530,34531,34533,34534,34535,34536,34538,34539,34540,34543,34549,34550,34551,34554,34555,34556,34557,34559,34561,34564,34565,34566,34571,34572,34574,34575,34576,34577,34580,34582,27712,24311,20572,20141,24237,25402,33351,36890,26704,37230,30643,21516,38108,24420,31461,26742,25413,31570,32479,30171,20599,25237,22836,36879,20984,31171,31361,22270,24466,36884,28034,23648,22303,21520,20820,28237,22242,25512,39059,33151,34581,35114,36864,21534,23663,33216,25302,25176,33073,40501,38464,39534,39548,26925,22949,25299,21822,25366,21703,34521,27964,23043,29926,34972,27498,22806,35916,24367,28286,29609,39037,20024,28919,23436,30871,25405,26202,30358,24779,23451,23113,19975,33109,27754,29579,20129,26505,32593,24448,26106,26395,24536,22916,23041,34585,34587,34589,34591,34592,34596,34598,34599,34600,34602,34603,34604,34605,34607,34608,34610,34611,34613,34614,34616,34617,34618,34620,34621,34624,34625,34626,34627,34628,34629,34630,34634,34635,34637,34639,34640,34641,34642,34644,34645,34646,34648,34650,34651,34652,34653,34654,34655,34657,34658,34662,34663,34664,34665,34666,34667,34668,34669,34671,34673,34674,34675,34677,34679,34680,34681,34682,34687,34688,34689,34692,34694,34695,34697,34698,34700,34702,34703,34704,34705,34706,34708,34709,34710,34712,34713,34714,34715,34716,34717,34718,34720,34721,34722,34723,34724,24013,24494,21361,38886,36829,26693,22260,21807,24799,20026,28493,32500,33479,33806,22996,20255,20266,23614,32428,26410,34074,21619,30031,32963,21890,39759,20301,28205,35859,23561,24944,21355,30239,28201,34442,25991,38395,32441,21563,31283,32010,38382,21985,32705,29934,25373,34583,28065,31389,25105,26017,21351,25569,27779,24043,21596,38056,20044,27745,35820,23627,26080,33436,26791,21566,21556,27595,27494,20116,25410,21320,33310,20237,20398,22366,25098,38654,26212,29289,21247,21153,24735,35823,26132,29081,26512,35199,30802,30717,26224,22075,21560,38177,29306,34725,34726,34727,34729,34730,34734,34736,34737,34738,34740,34742,34743,34744,34745,34747,34748,34750,34751,34753,34754,34755,34756,34757,34759,34760,34761,34764,34765,34766,34767,34768,34772,34773,34774,34775,34776,34777,34778,34780,34781,34782,34783,34785,34786,34787,34788,34790,34791,34792,34793,34795,34796,34797,34799,34800,34801,34802,34803,34804,34805,34806,34807,34808,34810,34811,34812,34813,34815,34816,34817,34818,34820,34821,34822,34823,34824,34825,34827,34828,34829,34830,34831,34832,34833,34834,34836,34839,34840,34841,34842,34844,34845,34846,34847,34848,34851,31232,24687,24076,24713,33181,22805,24796,29060,28911,28330,27728,29312,27268,34989,24109,20064,23219,21916,38115,27927,31995,38553,25103,32454,30606,34430,21283,38686,36758,26247,23777,20384,29421,19979,21414,22799,21523,25472,38184,20808,20185,40092,32420,21688,36132,34900,33335,38386,28046,24358,23244,26174,38505,29616,29486,21439,33146,39301,32673,23466,38519,38480,32447,30456,21410,38262,39321,31665,35140,28248,20065,32724,31077,35814,24819,21709,20139,39033,24055,27233,20687,21521,35937,33831,30813,38660,21066,21742,22179,38144,28040,23477,28102,26195,34852,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34867,34868,34869,34870,34871,34872,34874,34875,34877,34878,34879,34881,34882,34883,34886,34887,34888,34889,34890,34891,34894,34895,34896,34897,34898,34899,34901,34902,34904,34906,34907,34908,34909,34910,34911,34912,34918,34919,34922,34925,34927,34929,34931,34932,34933,34934,34936,34937,34938,34939,34940,34944,34947,34950,34951,34953,34954,34956,34958,34959,34960,34961,34963,34964,34965,34967,34968,34969,34970,34971,34973,34974,34975,34976,34977,34979,34981,34982,34983,34984,34985,34986,23567,23389,26657,32918,21880,31505,25928,26964,20123,27463,34638,38795,21327,25375,25658,37034,26012,32961,35856,20889,26800,21368,34809,25032,27844,27899,35874,23633,34218,33455,38156,27427,36763,26032,24571,24515,20449,34885,26143,33125,29481,24826,20852,21009,22411,24418,37026,34892,37266,24184,26447,24615,22995,20804,20982,33016,21256,27769,38596,29066,20241,20462,32670,26429,21957,38152,31168,34966,32483,22687,25100,38656,34394,22040,39035,24464,35768,33988,37207,21465,26093,24207,30044,24676,32110,23167,32490,32493,36713,21927,23459,24748,26059,29572,34988,34990,34991,34992,34994,34995,34996,34997,34998,35000,35001,35002,35003,35005,35006,35007,35008,35011,35012,35015,35016,35018,35019,35020,35021,35023,35024,35025,35027,35030,35031,35034,35035,35036,35037,35038,35040,35041,35046,35047,35049,35050,35051,35052,35053,35054,35055,35058,35061,35062,35063,35066,35067,35069,35071,35072,35073,35075,35076,35077,35078,35079,35080,35081,35083,35084,35085,35086,35087,35089,35092,35093,35094,35095,35096,35100,35101,35102,35103,35104,35106,35107,35108,35110,35111,35112,35113,35116,35117,35118,35119,35121,35122,35123,35125,35127,36873,30307,30505,32474,38772,34203,23398,31348,38634,34880,21195,29071,24490,26092,35810,23547,39535,24033,27529,27739,35757,35759,36874,36805,21387,25276,40486,40493,21568,20011,33469,29273,34460,23830,34905,28079,38597,21713,20122,35766,28937,21693,38409,28895,28153,30416,20005,30740,34578,23721,24310,35328,39068,38414,28814,27839,22852,25513,30524,34893,28436,33395,22576,29141,21388,30746,38593,21761,24422,28976,23476,35866,39564,27523,22830,40495,31207,26472,25196,20335,30113,32650,27915,38451,27687,20208,30162,20859,26679,28478,36992,33136,22934,29814,35128,35129,35130,35131,35132,35133,35134,35135,35136,35138,35139,35141,35142,35143,35144,35145,35146,35147,35148,35149,35150,35151,35152,35153,35154,35155,35156,35157,35158,35159,35160,35161,35162,35163,35164,35165,35168,35169,35170,35171,35172,35173,35175,35176,35177,35178,35179,35180,35181,35182,35183,35184,35185,35186,35187,35188,35189,35190,35191,35192,35193,35194,35196,35197,35198,35200,35202,35204,35205,35207,35208,35209,35210,35211,35212,35213,35214,35215,35216,35217,35218,35219,35220,35221,35222,35223,35224,35225,35226,35227,35228,35229,35230,35231,35232,35233,25671,23591,36965,31377,35875,23002,21676,33280,33647,35201,32768,26928,22094,32822,29239,37326,20918,20063,39029,25494,19994,21494,26355,33099,22812,28082,19968,22777,21307,25558,38129,20381,20234,34915,39056,22839,36951,31227,20202,33008,30097,27778,23452,23016,24413,26885,34433,20506,24050,20057,30691,20197,33402,25233,26131,37009,23673,20159,24441,33222,36920,32900,30123,20134,35028,24847,27589,24518,20041,30410,28322,35811,35758,35850,35793,24322,32764,32716,32462,33589,33643,22240,27575,38899,38452,23035,21535,38134,28139,23493,39278,23609,24341,38544,35234,35235,35236,35237,35238,35239,35240,35241,35242,35243,35244,35245,35246,35247,35248,35249,35250,35251,35252,35253,35254,35255,35256,35257,35258,35259,35260,35261,35262,35263,35264,35267,35277,35283,35284,35285,35287,35288,35289,35291,35293,35295,35296,35297,35298,35300,35303,35304,35305,35306,35308,35309,35310,35312,35313,35314,35316,35317,35318,35319,35320,35321,35322,35323,35324,35325,35326,35327,35329,35330,35331,35332,35333,35334,35336,35337,35338,35339,35340,35341,35342,35343,35344,35345,35346,35347,35348,35349,35350,35351,35352,35353,35354,35355,35356,35357,21360,33521,27185,23156,40560,24212,32552,33721,33828,33829,33639,34631,36814,36194,30408,24433,39062,30828,26144,21727,25317,20323,33219,30152,24248,38605,36362,34553,21647,27891,28044,27704,24703,21191,29992,24189,20248,24736,24551,23588,30001,37038,38080,29369,27833,28216,37193,26377,21451,21491,20305,37321,35825,21448,24188,36802,28132,20110,30402,27014,34398,24858,33286,20313,20446,36926,40060,24841,28189,28180,38533,20104,23089,38632,19982,23679,31161,23431,35821,32701,29577,22495,33419,37057,21505,36935,21947,23786,24481,24840,27442,29425,32946,35465,35358,35359,35360,35361,35362,35363,35364,35365,35366,35367,35368,35369,35370,35371,35372,35373,35374,35375,35376,35377,35378,35379,35380,35381,35382,35383,35384,35385,35386,35387,35388,35389,35391,35392,35393,35394,35395,35396,35397,35398,35399,35401,35402,35403,35404,35405,35406,35407,35408,35409,35410,35411,35412,35413,35414,35415,35416,35417,35418,35419,35420,35421,35422,35423,35424,35425,35426,35427,35428,35429,35430,35431,35432,35433,35434,35435,35436,35437,35438,35439,35440,35441,35442,35443,35444,35445,35446,35447,35448,35450,35451,35452,35453,35454,35455,35456,28020,23507,35029,39044,35947,39533,40499,28170,20900,20803,22435,34945,21407,25588,36757,22253,21592,22278,29503,28304,32536,36828,33489,24895,24616,38498,26352,32422,36234,36291,38053,23731,31908,26376,24742,38405,32792,20113,37095,21248,38504,20801,36816,34164,37213,26197,38901,23381,21277,30776,26434,26685,21705,28798,23472,36733,20877,22312,21681,25874,26242,36190,36163,33039,33900,36973,31967,20991,34299,26531,26089,28577,34468,36481,22122,36896,30338,28790,29157,36131,25321,21017,27901,36156,24590,22686,24974,26366,36192,25166,21939,28195,26413,36711,35457,35458,35459,35460,35461,35462,35463,35464,35467,35468,35469,35470,35471,35472,35473,35474,35476,35477,35478,35479,35480,35481,35482,35483,35484,35485,35486,35487,35488,35489,35490,35491,35492,35493,35494,35495,35496,35497,35498,35499,35500,35501,35502,35503,35504,35505,35506,35507,35508,35509,35510,35511,35512,35513,35514,35515,35516,35517,35518,35519,35520,35521,35522,35523,35524,35525,35526,35527,35528,35529,35530,35531,35532,35533,35534,35535,35536,35537,35538,35539,35540,35541,35542,35543,35544,35545,35546,35547,35548,35549,35550,35551,35552,35553,35554,35555,38113,38392,30504,26629,27048,21643,20045,28856,35784,25688,25995,23429,31364,20538,23528,30651,27617,35449,31896,27838,30415,26025,36759,23853,23637,34360,26632,21344,25112,31449,28251,32509,27167,31456,24432,28467,24352,25484,28072,26454,19976,24080,36134,20183,32960,30260,38556,25307,26157,25214,27836,36213,29031,32617,20806,32903,21484,36974,25240,21746,34544,36761,32773,38167,34071,36825,27993,29645,26015,30495,29956,30759,33275,36126,38024,20390,26517,30137,35786,38663,25391,38215,38453,33976,25379,30529,24449,29424,20105,24596,25972,25327,27491,25919,35556,35557,35558,35559,35560,35561,35562,35563,35564,35565,35566,35567,35568,35569,35570,35571,35572,35573,35574,35575,35576,35577,35578,35579,35580,35581,35582,35583,35584,35585,35586,35587,35588,35589,35590,35592,35593,35594,35595,35596,35597,35598,35599,35600,35601,35602,35603,35604,35605,35606,35607,35608,35609,35610,35611,35612,35613,35614,35615,35616,35617,35618,35619,35620,35621,35623,35624,35625,35626,35627,35628,35629,35630,35631,35632,35633,35634,35635,35636,35637,35638,35639,35640,35641,35642,35643,35644,35645,35646,35647,35648,35649,35650,35651,35652,35653,24103,30151,37073,35777,33437,26525,25903,21553,34584,30693,32930,33026,27713,20043,32455,32844,30452,26893,27542,25191,20540,20356,22336,25351,27490,36286,21482,26088,32440,24535,25370,25527,33267,33268,32622,24092,23769,21046,26234,31209,31258,36136,28825,30164,28382,27835,31378,20013,30405,24544,38047,34935,32456,31181,32959,37325,20210,20247,33311,21608,24030,27954,35788,31909,36724,32920,24090,21650,30385,23449,26172,39588,29664,26666,34523,26417,29482,35832,35803,36880,31481,28891,29038,25284,30633,22065,20027,33879,26609,21161,34496,36142,38136,31569,35654,35655,35656,35657,35658,35659,35660,35661,35662,35663,35664,35665,35666,35667,35668,35669,35670,35671,35672,35673,35674,35675,35676,35677,35678,35679,35680,35681,35682,35683,35684,35685,35687,35688,35689,35690,35691,35693,35694,35695,35696,35697,35698,35699,35700,35701,35702,35703,35704,35705,35706,35707,35708,35709,35710,35711,35712,35713,35714,35715,35716,35717,35718,35719,35720,35721,35722,35723,35724,35725,35726,35727,35728,35729,35730,35731,35732,35733,35734,35735,35736,35737,35738,35739,35740,35741,35742,35743,35756,35761,35771,35783,35792,35818,35849,35870,20303,27880,31069,39547,25235,29226,25341,19987,30742,36716,25776,36186,31686,26729,24196,35013,22918,25758,22766,29366,26894,38181,36861,36184,22368,32512,35846,20934,25417,25305,21331,26700,29730,33537,37196,21828,30528,28796,27978,20857,21672,36164,23039,28363,28100,23388,32043,20180,31869,28371,23376,33258,28173,23383,39683,26837,36394,23447,32508,24635,32437,37049,36208,22863,25549,31199,36275,21330,26063,31062,35781,38459,32452,38075,32386,22068,37257,26368,32618,23562,36981,26152,24038,20304,26590,20570,20316,22352,24231,59408,59409,59410,59411,59412,35896,35897,35898,35899,35900,35901,35902,35903,35904,35906,35907,35908,35909,35912,35914,35915,35917,35918,35919,35920,35921,35922,35923,35924,35926,35927,35928,35929,35931,35932,35933,35934,35935,35936,35939,35940,35941,35942,35943,35944,35945,35948,35949,35950,35951,35952,35953,35954,35956,35957,35958,35959,35963,35964,35965,35966,35967,35968,35969,35971,35972,35974,35975,35976,35979,35981,35982,35983,35984,35985,35986,35987,35989,35990,35991,35993,35994,35995,35996,35997,35998,35999,36000,36001,36002,36003,36004,36005,36006,36007,36008,36009,36010,36011,36012,36013,20109,19980,20800,19984,24319,21317,19989,20120,19998,39730,23404,22121,20008,31162,20031,21269,20039,22829,29243,21358,27664,22239,32996,39319,27603,30590,40727,20022,20127,40720,20060,20073,20115,33416,23387,21868,22031,20164,21389,21405,21411,21413,21422,38757,36189,21274,21493,21286,21294,21310,36188,21350,21347,20994,21000,21006,21037,21043,21055,21056,21068,21086,21089,21084,33967,21117,21122,21121,21136,21139,20866,32596,20155,20163,20169,20162,20200,20193,20203,20190,20251,20211,20258,20324,20213,20261,20263,20233,20267,20318,20327,25912,20314,20317,36014,36015,36016,36017,36018,36019,36020,36021,36022,36023,36024,36025,36026,36027,36028,36029,36030,36031,36032,36033,36034,36035,36036,36037,36038,36039,36040,36041,36042,36043,36044,36045,36046,36047,36048,36049,36050,36051,36052,36053,36054,36055,36056,36057,36058,36059,36060,36061,36062,36063,36064,36065,36066,36067,36068,36069,36070,36071,36072,36073,36074,36075,36076,36077,36078,36079,36080,36081,36082,36083,36084,36085,36086,36087,36088,36089,36090,36091,36092,36093,36094,36095,36096,36097,36098,36099,36100,36101,36102,36103,36104,36105,36106,36107,36108,36109,20319,20311,20274,20285,20342,20340,20369,20361,20355,20367,20350,20347,20394,20348,20396,20372,20454,20456,20458,20421,20442,20451,20444,20433,20447,20472,20521,20556,20467,20524,20495,20526,20525,20478,20508,20492,20517,20520,20606,20547,20565,20552,20558,20588,20603,20645,20647,20649,20666,20694,20742,20717,20716,20710,20718,20743,20747,20189,27709,20312,20325,20430,40864,27718,31860,20846,24061,40649,39320,20865,22804,21241,21261,35335,21264,20971,22809,20821,20128,20822,20147,34926,34980,20149,33044,35026,31104,23348,34819,32696,20907,20913,20925,20924,36110,36111,36112,36113,36114,36115,36116,36117,36118,36119,36120,36121,36122,36123,36124,36128,36177,36178,36183,36191,36197,36200,36201,36202,36204,36206,36207,36209,36210,36216,36217,36218,36219,36220,36221,36222,36223,36224,36226,36227,36230,36231,36232,36233,36236,36237,36238,36239,36240,36242,36243,36245,36246,36247,36248,36249,36250,36251,36252,36253,36254,36256,36257,36258,36260,36261,36262,36263,36264,36265,36266,36267,36268,36269,36270,36271,36272,36274,36278,36279,36281,36283,36285,36288,36289,36290,36293,36295,36296,36297,36298,36301,36304,36306,36307,36308,20935,20886,20898,20901,35744,35750,35751,35754,35764,35765,35767,35778,35779,35787,35791,35790,35794,35795,35796,35798,35800,35801,35804,35807,35808,35812,35816,35817,35822,35824,35827,35830,35833,35836,35839,35840,35842,35844,35847,35852,35855,35857,35858,35860,35861,35862,35865,35867,35864,35869,35871,35872,35873,35877,35879,35882,35883,35886,35887,35890,35891,35893,35894,21353,21370,38429,38434,38433,38449,38442,38461,38460,38466,38473,38484,38495,38503,38508,38514,38516,38536,38541,38551,38576,37015,37019,37021,37017,37036,37025,37044,37043,37046,37050,36309,36312,36313,36316,36320,36321,36322,36325,36326,36327,36329,36333,36334,36336,36337,36338,36340,36342,36348,36350,36351,36352,36353,36354,36355,36356,36358,36359,36360,36363,36365,36366,36368,36369,36370,36371,36373,36374,36375,36376,36377,36378,36379,36380,36384,36385,36388,36389,36390,36391,36392,36395,36397,36400,36402,36403,36404,36406,36407,36408,36411,36412,36414,36415,36419,36421,36422,36428,36429,36430,36431,36432,36435,36436,36437,36438,36439,36440,36442,36443,36444,36445,36446,36447,36448,36449,36450,36451,36452,36453,36455,36456,36458,36459,36462,36465,37048,37040,37071,37061,37054,37072,37060,37063,37075,37094,37090,37084,37079,37083,37099,37103,37118,37124,37154,37150,37155,37169,37167,37177,37187,37190,21005,22850,21154,21164,21165,21182,21759,21200,21206,21232,21471,29166,30669,24308,20981,20988,39727,21430,24321,30042,24047,22348,22441,22433,22654,22716,22725,22737,22313,22316,22314,22323,22329,22318,22319,22364,22331,22338,22377,22405,22379,22406,22396,22395,22376,22381,22390,22387,22445,22436,22412,22450,22479,22439,22452,22419,22432,22485,22488,22490,22489,22482,22456,22516,22511,22520,22500,22493,36467,36469,36471,36472,36473,36474,36475,36477,36478,36480,36482,36483,36484,36486,36488,36489,36490,36491,36492,36493,36494,36497,36498,36499,36501,36502,36503,36504,36505,36506,36507,36509,36511,36512,36513,36514,36515,36516,36517,36518,36519,36520,36521,36522,36525,36526,36528,36529,36531,36532,36533,36534,36535,36536,36537,36539,36540,36541,36542,36543,36544,36545,36546,36547,36548,36549,36550,36551,36552,36553,36554,36555,36556,36557,36559,36560,36561,36562,36563,36564,36565,36566,36567,36568,36569,36570,36571,36572,36573,36574,36575,36576,36577,36578,36579,36580,22539,22541,22525,22509,22528,22558,22553,22596,22560,22629,22636,22657,22665,22682,22656,39336,40729,25087,33401,33405,33407,33423,33418,33448,33412,33422,33425,33431,33433,33451,33464,33470,33456,33480,33482,33507,33432,33463,33454,33483,33484,33473,33449,33460,33441,33450,33439,33476,33486,33444,33505,33545,33527,33508,33551,33543,33500,33524,33490,33496,33548,33531,33491,33553,33562,33542,33556,33557,33504,33493,33564,33617,33627,33628,33544,33682,33596,33588,33585,33691,33630,33583,33615,33607,33603,33631,33600,33559,33632,33581,33594,33587,33638,33637,36581,36582,36583,36584,36585,36586,36587,36588,36589,36590,36591,36592,36593,36594,36595,36596,36597,36598,36599,36600,36601,36602,36603,36604,36605,36606,36607,36608,36609,36610,36611,36612,36613,36614,36615,36616,36617,36618,36619,36620,36621,36622,36623,36624,36625,36626,36627,36628,36629,36630,36631,36632,36633,36634,36635,36636,36637,36638,36639,36640,36641,36642,36643,36644,36645,36646,36647,36648,36649,36650,36651,36652,36653,36654,36655,36656,36657,36658,36659,36660,36661,36662,36663,36664,36665,36666,36667,36668,36669,36670,36671,36672,36673,36674,36675,36676,33640,33563,33641,33644,33642,33645,33646,33712,33656,33715,33716,33696,33706,33683,33692,33669,33660,33718,33705,33661,33720,33659,33688,33694,33704,33722,33724,33729,33793,33765,33752,22535,33816,33803,33757,33789,33750,33820,33848,33809,33798,33748,33759,33807,33795,33784,33785,33770,33733,33728,33830,33776,33761,33884,33873,33882,33881,33907,33927,33928,33914,33929,33912,33852,33862,33897,33910,33932,33934,33841,33901,33985,33997,34000,34022,33981,34003,33994,33983,33978,34016,33953,33977,33972,33943,34021,34019,34060,29965,34104,34032,34105,34079,34106,36677,36678,36679,36680,36681,36682,36683,36684,36685,36686,36687,36688,36689,36690,36691,36692,36693,36694,36695,36696,36697,36698,36699,36700,36701,36702,36703,36704,36705,36706,36707,36708,36709,36714,36736,36748,36754,36765,36768,36769,36770,36772,36773,36774,36775,36778,36780,36781,36782,36783,36786,36787,36788,36789,36791,36792,36794,36795,36796,36799,36800,36803,36806,36809,36810,36811,36812,36813,36815,36818,36822,36823,36826,36832,36833,36835,36839,36844,36847,36849,36850,36852,36853,36854,36858,36859,36860,36862,36863,36871,36872,36876,36878,36883,36885,36888,34134,34107,34047,34044,34137,34120,34152,34148,34142,34170,30626,34115,34162,34171,34212,34216,34183,34191,34169,34222,34204,34181,34233,34231,34224,34259,34241,34268,34303,34343,34309,34345,34326,34364,24318,24328,22844,22849,32823,22869,22874,22872,21263,23586,23589,23596,23604,25164,25194,25247,25275,25290,25306,25303,25326,25378,25334,25401,25419,25411,25517,25590,25457,25466,25486,25524,25453,25516,25482,25449,25518,25532,25586,25592,25568,25599,25540,25566,25550,25682,25542,25534,25669,25665,25611,25627,25632,25612,25638,25633,25694,25732,25709,25750,36889,36892,36899,36900,36901,36903,36904,36905,36906,36907,36908,36912,36913,36914,36915,36916,36919,36921,36922,36925,36927,36928,36931,36933,36934,36936,36937,36938,36939,36940,36942,36948,36949,36950,36953,36954,36956,36957,36958,36959,36960,36961,36964,36966,36967,36969,36970,36971,36972,36975,36976,36977,36978,36979,36982,36983,36984,36985,36986,36987,36988,36990,36993,36996,36997,36998,36999,37001,37002,37004,37005,37006,37007,37008,37010,37012,37014,37016,37018,37020,37022,37023,37024,37028,37029,37031,37032,37033,37035,37037,37042,37047,37052,37053,37055,37056,25722,25783,25784,25753,25786,25792,25808,25815,25828,25826,25865,25893,25902,24331,24530,29977,24337,21343,21489,21501,21481,21480,21499,21522,21526,21510,21579,21586,21587,21588,21590,21571,21537,21591,21593,21539,21554,21634,21652,21623,21617,21604,21658,21659,21636,21622,21606,21661,21712,21677,21698,21684,21714,21671,21670,21715,21716,21618,21667,21717,21691,21695,21708,21721,21722,21724,21673,21674,21668,21725,21711,21726,21787,21735,21792,21757,21780,21747,21794,21795,21775,21777,21799,21802,21863,21903,21941,21833,21869,21825,21845,21823,21840,21820,37058,37059,37062,37064,37065,37067,37068,37069,37074,37076,37077,37078,37080,37081,37082,37086,37087,37088,37091,37092,37093,37097,37098,37100,37102,37104,37105,37106,37107,37109,37110,37111,37113,37114,37115,37116,37119,37120,37121,37123,37125,37126,37127,37128,37129,37130,37131,37132,37133,37134,37135,37136,37137,37138,37139,37140,37141,37142,37143,37144,37146,37147,37148,37149,37151,37152,37153,37156,37157,37158,37159,37160,37161,37162,37163,37164,37165,37166,37168,37170,37171,37172,37173,37174,37175,37176,37178,37179,37180,37181,37182,37183,37184,37185,37186,37188,21815,21846,21877,21878,21879,21811,21808,21852,21899,21970,21891,21937,21945,21896,21889,21919,21886,21974,21905,21883,21983,21949,21950,21908,21913,21994,22007,21961,22047,21969,21995,21996,21972,21990,21981,21956,21999,21989,22002,22003,21964,21965,21992,22005,21988,36756,22046,22024,22028,22017,22052,22051,22014,22016,22055,22061,22104,22073,22103,22060,22093,22114,22105,22108,22092,22100,22150,22116,22129,22123,22139,22140,22149,22163,22191,22228,22231,22237,22241,22261,22251,22265,22271,22276,22282,22281,22300,24079,24089,24084,24081,24113,24123,24124,37189,37191,37192,37201,37203,37204,37205,37206,37208,37209,37211,37212,37215,37216,37222,37223,37224,37227,37229,37235,37242,37243,37244,37248,37249,37250,37251,37252,37254,37256,37258,37262,37263,37267,37268,37269,37270,37271,37272,37273,37276,37277,37278,37279,37280,37281,37284,37285,37286,37287,37288,37289,37291,37292,37296,37297,37298,37299,37302,37303,37304,37305,37307,37308,37309,37310,37311,37312,37313,37314,37315,37316,37317,37318,37320,37323,37328,37330,37331,37332,37333,37334,37335,37336,37337,37338,37339,37341,37342,37343,37344,37345,37346,37347,37348,37349,24119,24132,24148,24155,24158,24161,23692,23674,23693,23696,23702,23688,23704,23705,23697,23706,23708,23733,23714,23741,23724,23723,23729,23715,23745,23735,23748,23762,23780,23755,23781,23810,23811,23847,23846,23854,23844,23838,23814,23835,23896,23870,23860,23869,23916,23899,23919,23901,23915,23883,23882,23913,23924,23938,23961,23965,35955,23991,24005,24435,24439,24450,24455,24457,24460,24469,24473,24476,24488,24493,24501,24508,34914,24417,29357,29360,29364,29367,29368,29379,29377,29390,29389,29394,29416,29423,29417,29426,29428,29431,29441,29427,29443,29434,37350,37351,37352,37353,37354,37355,37356,37357,37358,37359,37360,37361,37362,37363,37364,37365,37366,37367,37368,37369,37370,37371,37372,37373,37374,37375,37376,37377,37378,37379,37380,37381,37382,37383,37384,37385,37386,37387,37388,37389,37390,37391,37392,37393,37394,37395,37396,37397,37398,37399,37400,37401,37402,37403,37404,37405,37406,37407,37408,37409,37410,37411,37412,37413,37414,37415,37416,37417,37418,37419,37420,37421,37422,37423,37424,37425,37426,37427,37428,37429,37430,37431,37432,37433,37434,37435,37436,37437,37438,37439,37440,37441,37442,37443,37444,37445,29435,29463,29459,29473,29450,29470,29469,29461,29474,29497,29477,29484,29496,29489,29520,29517,29527,29536,29548,29551,29566,33307,22821,39143,22820,22786,39267,39271,39272,39273,39274,39275,39276,39284,39287,39293,39296,39300,39303,39306,39309,39312,39313,39315,39316,39317,24192,24209,24203,24214,24229,24224,24249,24245,24254,24243,36179,24274,24273,24283,24296,24298,33210,24516,24521,24534,24527,24579,24558,24580,24545,24548,24574,24581,24582,24554,24557,24568,24601,24629,24614,24603,24591,24589,24617,24619,24586,24639,24609,24696,24697,24699,24698,24642,37446,37447,37448,37449,37450,37451,37452,37453,37454,37455,37456,37457,37458,37459,37460,37461,37462,37463,37464,37465,37466,37467,37468,37469,37470,37471,37472,37473,37474,37475,37476,37477,37478,37479,37480,37481,37482,37483,37484,37485,37486,37487,37488,37489,37490,37491,37493,37494,37495,37496,37497,37498,37499,37500,37501,37502,37503,37504,37505,37506,37507,37508,37509,37510,37511,37512,37513,37514,37515,37516,37517,37519,37520,37521,37522,37523,37524,37525,37526,37527,37528,37529,37530,37531,37532,37533,37534,37535,37536,37537,37538,37539,37540,37541,37542,37543,24682,24701,24726,24730,24749,24733,24707,24722,24716,24731,24812,24763,24753,24797,24792,24774,24794,24756,24864,24870,24853,24867,24820,24832,24846,24875,24906,24949,25004,24980,24999,25015,25044,25077,24541,38579,38377,38379,38385,38387,38389,38390,38396,38398,38403,38404,38406,38408,38410,38411,38412,38413,38415,38418,38421,38422,38423,38425,38426,20012,29247,25109,27701,27732,27740,27722,27811,27781,27792,27796,27788,27752,27753,27764,27766,27782,27817,27856,27860,27821,27895,27896,27889,27863,27826,27872,27862,27898,27883,27886,27825,27859,27887,27902,37544,37545,37546,37547,37548,37549,37551,37552,37553,37554,37555,37556,37557,37558,37559,37560,37561,37562,37563,37564,37565,37566,37567,37568,37569,37570,37571,37572,37573,37574,37575,37577,37578,37579,37580,37581,37582,37583,37584,37585,37586,37587,37588,37589,37590,37591,37592,37593,37594,37595,37596,37597,37598,37599,37600,37601,37602,37603,37604,37605,37606,37607,37608,37609,37610,37611,37612,37613,37614,37615,37616,37617,37618,37619,37620,37621,37622,37623,37624,37625,37626,37627,37628,37629,37630,37631,37632,37633,37634,37635,37636,37637,37638,37639,37640,37641,27961,27943,27916,27971,27976,27911,27908,27929,27918,27947,27981,27950,27957,27930,27983,27986,27988,27955,28049,28015,28062,28064,27998,28051,28052,27996,28000,28028,28003,28186,28103,28101,28126,28174,28095,28128,28177,28134,28125,28121,28182,28075,28172,28078,28203,28270,28238,28267,28338,28255,28294,28243,28244,28210,28197,28228,28383,28337,28312,28384,28461,28386,28325,28327,28349,28347,28343,28375,28340,28367,28303,28354,28319,28514,28486,28487,28452,28437,28409,28463,28470,28491,28532,28458,28425,28457,28553,28557,28556,28536,28530,28540,28538,28625,37642,37643,37644,37645,37646,37647,37648,37649,37650,37651,37652,37653,37654,37655,37656,37657,37658,37659,37660,37661,37662,37663,37664,37665,37666,37667,37668,37669,37670,37671,37672,37673,37674,37675,37676,37677,37678,37679,37680,37681,37682,37683,37684,37685,37686,37687,37688,37689,37690,37691,37692,37693,37695,37696,37697,37698,37699,37700,37701,37702,37703,37704,37705,37706,37707,37708,37709,37710,37711,37712,37713,37714,37715,37716,37717,37718,37719,37720,37721,37722,37723,37724,37725,37726,37727,37728,37729,37730,37731,37732,37733,37734,37735,37736,37737,37739,28617,28583,28601,28598,28610,28641,28654,28638,28640,28655,28698,28707,28699,28729,28725,28751,28766,23424,23428,23445,23443,23461,23480,29999,39582,25652,23524,23534,35120,23536,36423,35591,36790,36819,36821,36837,36846,36836,36841,36838,36851,36840,36869,36868,36875,36902,36881,36877,36886,36897,36917,36918,36909,36911,36932,36945,36946,36944,36968,36952,36962,36955,26297,36980,36989,36994,37000,36995,37003,24400,24407,24406,24408,23611,21675,23632,23641,23409,23651,23654,32700,24362,24361,24365,33396,24380,39739,23662,22913,22915,22925,22953,22954,22947,37740,37741,37742,37743,37744,37745,37746,37747,37748,37749,37750,37751,37752,37753,37754,37755,37756,37757,37758,37759,37760,37761,37762,37763,37764,37765,37766,37767,37768,37769,37770,37771,37772,37773,37774,37776,37777,37778,37779,37780,37781,37782,37783,37784,37785,37786,37787,37788,37789,37790,37791,37792,37793,37794,37795,37796,37797,37798,37799,37800,37801,37802,37803,37804,37805,37806,37807,37808,37809,37810,37811,37812,37813,37814,37815,37816,37817,37818,37819,37820,37821,37822,37823,37824,37825,37826,37827,37828,37829,37830,37831,37832,37833,37835,37836,37837,22935,22986,22955,22942,22948,22994,22962,22959,22999,22974,23045,23046,23005,23048,23011,23000,23033,23052,23049,23090,23092,23057,23075,23059,23104,23143,23114,23125,23100,23138,23157,33004,23210,23195,23159,23162,23230,23275,23218,23250,23252,23224,23264,23267,23281,23254,23270,23256,23260,23305,23319,23318,23346,23351,23360,23573,23580,23386,23397,23411,23377,23379,23394,39541,39543,39544,39546,39551,39549,39552,39553,39557,39560,39562,39568,39570,39571,39574,39576,39579,39580,39581,39583,39584,39586,39587,39589,39591,32415,32417,32419,32421,32424,32425,37838,37839,37840,37841,37842,37843,37844,37845,37847,37848,37849,37850,37851,37852,37853,37854,37855,37856,37857,37858,37859,37860,37861,37862,37863,37864,37865,37866,37867,37868,37869,37870,37871,37872,37873,37874,37875,37876,37877,37878,37879,37880,37881,37882,37883,37884,37885,37886,37887,37888,37889,37890,37891,37892,37893,37894,37895,37896,37897,37898,37899,37900,37901,37902,37903,37904,37905,37906,37907,37908,37909,37910,37911,37912,37913,37914,37915,37916,37917,37918,37919,37920,37921,37922,37923,37924,37925,37926,37927,37928,37929,37930,37931,37932,37933,37934,32429,32432,32446,32448,32449,32450,32457,32459,32460,32464,32468,32471,32475,32480,32481,32488,32491,32494,32495,32497,32498,32525,32502,32506,32507,32510,32513,32514,32515,32519,32520,32523,32524,32527,32529,32530,32535,32537,32540,32539,32543,32545,32546,32547,32548,32549,32550,32551,32554,32555,32556,32557,32559,32560,32561,32562,32563,32565,24186,30079,24027,30014,37013,29582,29585,29614,29602,29599,29647,29634,29649,29623,29619,29632,29641,29640,29669,29657,39036,29706,29673,29671,29662,29626,29682,29711,29738,29787,29734,29733,29736,29744,29742,29740,37935,37936,37937,37938,37939,37940,37941,37942,37943,37944,37945,37946,37947,37948,37949,37951,37952,37953,37954,37955,37956,37957,37958,37959,37960,37961,37962,37963,37964,37965,37966,37967,37968,37969,37970,37971,37972,37973,37974,37975,37976,37977,37978,37979,37980,37981,37982,37983,37984,37985,37986,37987,37988,37989,37990,37991,37992,37993,37994,37996,37997,37998,37999,38000,38001,38002,38003,38004,38005,38006,38007,38008,38009,38010,38011,38012,38013,38014,38015,38016,38017,38018,38019,38020,38033,38038,38040,38087,38095,38099,38100,38106,38118,38139,38172,38176,29723,29722,29761,29788,29783,29781,29785,29815,29805,29822,29852,29838,29824,29825,29831,29835,29854,29864,29865,29840,29863,29906,29882,38890,38891,38892,26444,26451,26462,26440,26473,26533,26503,26474,26483,26520,26535,26485,26536,26526,26541,26507,26487,26492,26608,26633,26584,26634,26601,26544,26636,26585,26549,26586,26547,26589,26624,26563,26552,26594,26638,26561,26621,26674,26675,26720,26721,26702,26722,26692,26724,26755,26653,26709,26726,26689,26727,26688,26686,26698,26697,26665,26805,26767,26740,26743,26771,26731,26818,26990,26876,26911,26912,26873,38183,38195,38205,38211,38216,38219,38229,38234,38240,38254,38260,38261,38263,38264,38265,38266,38267,38268,38269,38270,38272,38273,38274,38275,38276,38277,38278,38279,38280,38281,38282,38283,38284,38285,38286,38287,38288,38289,38290,38291,38292,38293,38294,38295,38296,38297,38298,38299,38300,38301,38302,38303,38304,38305,38306,38307,38308,38309,38310,38311,38312,38313,38314,38315,38316,38317,38318,38319,38320,38321,38322,38323,38324,38325,38326,38327,38328,38329,38330,38331,38332,38333,38334,38335,38336,38337,38338,38339,38340,38341,38342,38343,38344,38345,38346,38347,26916,26864,26891,26881,26967,26851,26896,26993,26937,26976,26946,26973,27012,26987,27008,27032,27000,26932,27084,27015,27016,27086,27017,26982,26979,27001,27035,27047,27067,27051,27053,27092,27057,27073,27082,27103,27029,27104,27021,27135,27183,27117,27159,27160,27237,27122,27204,27198,27296,27216,27227,27189,27278,27257,27197,27176,27224,27260,27281,27280,27305,27287,27307,29495,29522,27521,27522,27527,27524,27538,27539,27533,27546,27547,27553,27562,36715,36717,36721,36722,36723,36725,36726,36728,36727,36729,36730,36732,36734,36737,36738,36740,36743,36747,38348,38349,38350,38351,38352,38353,38354,38355,38356,38357,38358,38359,38360,38361,38362,38363,38364,38365,38366,38367,38368,38369,38370,38371,38372,38373,38374,38375,38380,38399,38407,38419,38424,38427,38430,38432,38435,38436,38437,38438,38439,38440,38441,38443,38444,38445,38447,38448,38455,38456,38457,38458,38462,38465,38467,38474,38478,38479,38481,38482,38483,38486,38487,38488,38489,38490,38492,38493,38494,38496,38499,38501,38502,38507,38509,38510,38511,38512,38513,38515,38520,38521,38522,38523,38524,38525,38526,38527,38528,38529,38530,38531,38532,38535,38537,38538,36749,36750,36751,36760,36762,36558,25099,25111,25115,25119,25122,25121,25125,25124,25132,33255,29935,29940,29951,29967,29969,29971,25908,26094,26095,26096,26122,26137,26482,26115,26133,26112,28805,26359,26141,26164,26161,26166,26165,32774,26207,26196,26177,26191,26198,26209,26199,26231,26244,26252,26279,26269,26302,26331,26332,26342,26345,36146,36147,36150,36155,36157,36160,36165,36166,36168,36169,36167,36173,36181,36185,35271,35274,35275,35276,35278,35279,35280,35281,29294,29343,29277,29286,29295,29310,29311,29316,29323,29325,29327,29330,25352,25394,25520,38540,38542,38545,38546,38547,38549,38550,38554,38555,38557,38558,38559,38560,38561,38562,38563,38564,38565,38566,38568,38569,38570,38571,38572,38573,38574,38575,38577,38578,38580,38581,38583,38584,38586,38587,38591,38594,38595,38600,38602,38603,38608,38609,38611,38612,38614,38615,38616,38617,38618,38619,38620,38621,38622,38623,38625,38626,38627,38628,38629,38630,38631,38635,38636,38637,38638,38640,38641,38642,38644,38645,38648,38650,38651,38652,38653,38655,38658,38659,38661,38666,38667,38668,38672,38673,38674,38676,38677,38679,38680,38681,38682,38683,38685,38687,38688,25663,25816,32772,27626,27635,27645,27637,27641,27653,27655,27654,27661,27669,27672,27673,27674,27681,27689,27684,27690,27698,25909,25941,25963,29261,29266,29270,29232,34402,21014,32927,32924,32915,32956,26378,32957,32945,32939,32941,32948,32951,32999,33000,33001,33002,32987,32962,32964,32985,32973,32983,26384,32989,33003,33009,33012,33005,33037,33038,33010,33020,26389,33042,35930,33078,33054,33068,33048,33074,33096,33100,33107,33140,33113,33114,33137,33120,33129,33148,33149,33133,33127,22605,23221,33160,33154,33169,28373,33187,33194,33228,26406,33226,33211,38689,38690,38691,38692,38693,38694,38695,38696,38697,38699,38700,38702,38703,38705,38707,38708,38709,38710,38711,38714,38715,38716,38717,38719,38720,38721,38722,38723,38724,38725,38726,38727,38728,38729,38730,38731,38732,38733,38734,38735,38736,38737,38740,38741,38743,38744,38746,38748,38749,38751,38755,38756,38758,38759,38760,38762,38763,38764,38765,38766,38767,38768,38769,38770,38773,38775,38776,38777,38778,38779,38781,38782,38783,38784,38785,38786,38787,38788,38790,38791,38792,38793,38794,38796,38798,38799,38800,38803,38805,38806,38807,38809,38810,38811,38812,38813,33217,33190,27428,27447,27449,27459,27462,27481,39121,39122,39123,39125,39129,39130,27571,24384,27586,35315,26000,40785,26003,26044,26054,26052,26051,26060,26062,26066,26070,28800,28828,28822,28829,28859,28864,28855,28843,28849,28904,28874,28944,28947,28950,28975,28977,29043,29020,29032,28997,29042,29002,29048,29050,29080,29107,29109,29096,29088,29152,29140,29159,29177,29213,29224,28780,28952,29030,29113,25150,25149,25155,25160,25161,31035,31040,31046,31049,31067,31068,31059,31066,31074,31063,31072,31087,31079,31098,31109,31114,31130,31143,31155,24529,24528,38814,38815,38817,38818,38820,38821,38822,38823,38824,38825,38826,38828,38830,38832,38833,38835,38837,38838,38839,38840,38841,38842,38843,38844,38845,38846,38847,38848,38849,38850,38851,38852,38853,38854,38855,38856,38857,38858,38859,38860,38861,38862,38863,38864,38865,38866,38867,38868,38869,38870,38871,38872,38873,38874,38875,38876,38877,38878,38879,38880,38881,38882,38883,38884,38885,38888,38894,38895,38896,38897,38898,38900,38903,38904,38905,38906,38907,38908,38909,38910,38911,38912,38913,38914,38915,38916,38917,38918,38919,38920,38921,38922,38923,38924,38925,38926,24636,24669,24666,24679,24641,24665,24675,24747,24838,24845,24925,25001,24989,25035,25041,25094,32896,32895,27795,27894,28156,30710,30712,30720,30729,30743,30744,30737,26027,30765,30748,30749,30777,30778,30779,30751,30780,30757,30764,30755,30761,30798,30829,30806,30807,30758,30800,30791,30796,30826,30875,30867,30874,30855,30876,30881,30883,30898,30905,30885,30932,30937,30921,30956,30962,30981,30964,30995,31012,31006,31028,40859,40697,40699,40700,30449,30468,30477,30457,30471,30472,30490,30498,30489,30509,30502,30517,30520,30544,30545,30535,30531,30554,30568,38927,38928,38929,38930,38931,38932,38933,38934,38935,38936,38937,38938,38939,38940,38941,38942,38943,38944,38945,38946,38947,38948,38949,38950,38951,38952,38953,38954,38955,38956,38957,38958,38959,38960,38961,38962,38963,38964,38965,38966,38967,38968,38969,38970,38971,38972,38973,38974,38975,38976,38977,38978,38979,38980,38981,38982,38983,38984,38985,38986,38987,38988,38989,38990,38991,38992,38993,38994,38995,38996,38997,38998,38999,39000,39001,39002,39003,39004,39005,39006,39007,39008,39009,39010,39011,39012,39013,39014,39015,39016,39017,39018,39019,39020,39021,39022,30562,30565,30591,30605,30589,30592,30604,30609,30623,30624,30640,30645,30653,30010,30016,30030,30027,30024,30043,30066,30073,30083,32600,32609,32607,35400,32616,32628,32625,32633,32641,32638,30413,30437,34866,38021,38022,38023,38027,38026,38028,38029,38031,38032,38036,38039,38037,38042,38043,38044,38051,38052,38059,38058,38061,38060,38063,38064,38066,38068,38070,38071,38072,38073,38074,38076,38077,38079,38084,38088,38089,38090,38091,38092,38093,38094,38096,38097,38098,38101,38102,38103,38105,38104,38107,38110,38111,38112,38114,38116,38117,38119,38120,38122,39023,39024,39025,39026,39027,39028,39051,39054,39058,39061,39065,39075,39080,39081,39082,39083,39084,39085,39086,39087,39088,39089,39090,39091,39092,39093,39094,39095,39096,39097,39098,39099,39100,39101,39102,39103,39104,39105,39106,39107,39108,39109,39110,39111,39112,39113,39114,39115,39116,39117,39119,39120,39124,39126,39127,39131,39132,39133,39136,39137,39138,39139,39140,39141,39142,39145,39146,39147,39148,39149,39150,39151,39152,39153,39154,39155,39156,39157,39158,39159,39160,39161,39162,39163,39164,39165,39166,39167,39168,39169,39170,39171,39172,39173,39174,39175,38121,38123,38126,38127,38131,38132,38133,38135,38137,38140,38141,38143,38147,38146,38150,38151,38153,38154,38157,38158,38159,38162,38163,38164,38165,38166,38168,38171,38173,38174,38175,38178,38186,38187,38185,38188,38193,38194,38196,38198,38199,38200,38204,38206,38207,38210,38197,38212,38213,38214,38217,38220,38222,38223,38226,38227,38228,38230,38231,38232,38233,38235,38238,38239,38237,38241,38242,38244,38245,38246,38247,38248,38249,38250,38251,38252,38255,38257,38258,38259,38202,30695,30700,38601,31189,31213,31203,31211,31238,23879,31235,31234,31262,31252,39176,39177,39178,39179,39180,39182,39183,39185,39186,39187,39188,39189,39190,39191,39192,39193,39194,39195,39196,39197,39198,39199,39200,39201,39202,39203,39204,39205,39206,39207,39208,39209,39210,39211,39212,39213,39215,39216,39217,39218,39219,39220,39221,39222,39223,39224,39225,39226,39227,39228,39229,39230,39231,39232,39233,39234,39235,39236,39237,39238,39239,39240,39241,39242,39243,39244,39245,39246,39247,39248,39249,39250,39251,39254,39255,39256,39257,39258,39259,39260,39261,39262,39263,39264,39265,39266,39268,39270,39283,39288,39289,39291,39294,39298,39299,39305,31289,31287,31313,40655,39333,31344,30344,30350,30355,30361,30372,29918,29920,29996,40480,40482,40488,40489,40490,40491,40492,40498,40497,40502,40504,40503,40505,40506,40510,40513,40514,40516,40518,40519,40520,40521,40523,40524,40526,40529,40533,40535,40538,40539,40540,40542,40547,40550,40551,40552,40553,40554,40555,40556,40561,40557,40563,30098,30100,30102,30112,30109,30124,30115,30131,30132,30136,30148,30129,30128,30147,30146,30166,30157,30179,30184,30182,30180,30187,30183,30211,30193,30204,30207,30224,30208,30213,30220,30231,30218,30245,30232,30229,30233,39308,39310,39322,39323,39324,39325,39326,39327,39328,39329,39330,39331,39332,39334,39335,39337,39338,39339,39340,39341,39342,39343,39344,39345,39346,39347,39348,39349,39350,39351,39352,39353,39354,39355,39356,39357,39358,39359,39360,39361,39362,39363,39364,39365,39366,39367,39368,39369,39370,39371,39372,39373,39374,39375,39376,39377,39378,39379,39380,39381,39382,39383,39384,39385,39386,39387,39388,39389,39390,39391,39392,39393,39394,39395,39396,39397,39398,39399,39400,39401,39402,39403,39404,39405,39406,39407,39408,39409,39410,39411,39412,39413,39414,39415,39416,39417,30235,30268,30242,30240,30272,30253,30256,30271,30261,30275,30270,30259,30285,30302,30292,30300,30294,30315,30319,32714,31462,31352,31353,31360,31366,31368,31381,31398,31392,31404,31400,31405,31411,34916,34921,34930,34941,34943,34946,34978,35014,34999,35004,35017,35042,35022,35043,35045,35057,35098,35068,35048,35070,35056,35105,35097,35091,35099,35082,35124,35115,35126,35137,35174,35195,30091,32997,30386,30388,30684,32786,32788,32790,32796,32800,32802,32805,32806,32807,32809,32808,32817,32779,32821,32835,32838,32845,32850,32873,32881,35203,39032,39040,39043,39418,39419,39420,39421,39422,39423,39424,39425,39426,39427,39428,39429,39430,39431,39432,39433,39434,39435,39436,39437,39438,39439,39440,39441,39442,39443,39444,39445,39446,39447,39448,39449,39450,39451,39452,39453,39454,39455,39456,39457,39458,39459,39460,39461,39462,39463,39464,39465,39466,39467,39468,39469,39470,39471,39472,39473,39474,39475,39476,39477,39478,39479,39480,39481,39482,39483,39484,39485,39486,39487,39488,39489,39490,39491,39492,39493,39494,39495,39496,39497,39498,39499,39500,39501,39502,39503,39504,39505,39506,39507,39508,39509,39510,39511,39512,39513,39049,39052,39053,39055,39060,39066,39067,39070,39071,39073,39074,39077,39078,34381,34388,34412,34414,34431,34426,34428,34427,34472,34445,34443,34476,34461,34471,34467,34474,34451,34473,34486,34500,34485,34510,34480,34490,34481,34479,34505,34511,34484,34537,34545,34546,34541,34547,34512,34579,34526,34548,34527,34520,34513,34563,34567,34552,34568,34570,34573,34569,34595,34619,34590,34597,34606,34586,34622,34632,34612,34609,34601,34615,34623,34690,34594,34685,34686,34683,34656,34672,34636,34670,34699,34643,34659,34684,34660,34649,34661,34707,34735,34728,34770,39514,39515,39516,39517,39518,39519,39520,39521,39522,39523,39524,39525,39526,39527,39528,39529,39530,39531,39538,39555,39561,39565,39566,39572,39573,39577,39590,39593,39594,39595,39596,39597,39598,39599,39602,39603,39604,39605,39609,39611,39613,39614,39615,39619,39620,39622,39623,39624,39625,39626,39629,39630,39631,39632,39634,39636,39637,39638,39639,39641,39642,39643,39644,39645,39646,39648,39650,39651,39652,39653,39655,39656,39657,39658,39660,39662,39664,39665,39666,39667,39668,39669,39670,39671,39672,39674,39676,39677,39678,39679,39680,39681,39682,39684,39685,39686,34758,34696,34693,34733,34711,34691,34731,34789,34732,34741,34739,34763,34771,34749,34769,34752,34762,34779,34794,34784,34798,34838,34835,34814,34826,34843,34849,34873,34876,32566,32578,32580,32581,33296,31482,31485,31496,31491,31492,31509,31498,31531,31503,31559,31544,31530,31513,31534,31537,31520,31525,31524,31539,31550,31518,31576,31578,31557,31605,31564,31581,31584,31598,31611,31586,31602,31601,31632,31654,31655,31672,31660,31645,31656,31621,31658,31644,31650,31659,31668,31697,31681,31692,31709,31706,31717,31718,31722,31756,31742,31740,31759,31766,31755,39687,39689,39690,39691,39692,39693,39694,39696,39697,39698,39700,39701,39702,39703,39704,39705,39706,39707,39708,39709,39710,39712,39713,39714,39716,39717,39718,39719,39720,39721,39722,39723,39724,39725,39726,39728,39729,39731,39732,39733,39734,39735,39736,39737,39738,39741,39742,39743,39744,39750,39754,39755,39756,39758,39760,39762,39763,39765,39766,39767,39768,39769,39770,39771,39772,39773,39774,39775,39776,39777,39778,39779,39780,39781,39782,39783,39784,39785,39786,39787,39788,39789,39790,39791,39792,39793,39794,39795,39796,39797,39798,39799,39800,39801,39802,39803,31775,31786,31782,31800,31809,31808,33278,33281,33282,33284,33260,34884,33313,33314,33315,33325,33327,33320,33323,33336,33339,33331,33332,33342,33348,33353,33355,33359,33370,33375,33384,34942,34949,34952,35032,35039,35166,32669,32671,32679,32687,32688,32690,31868,25929,31889,31901,31900,31902,31906,31922,31932,31933,31937,31943,31948,31949,31944,31941,31959,31976,33390,26280,32703,32718,32725,32741,32737,32742,32745,32750,32755,31992,32119,32166,32174,32327,32411,40632,40628,36211,36228,36244,36241,36273,36199,36205,35911,35913,37194,37200,37198,37199,37220,39804,39805,39806,39807,39808,39809,39810,39811,39812,39813,39814,39815,39816,39817,39818,39819,39820,39821,39822,39823,39824,39825,39826,39827,39828,39829,39830,39831,39832,39833,39834,39835,39836,39837,39838,39839,39840,39841,39842,39843,39844,39845,39846,39847,39848,39849,39850,39851,39852,39853,39854,39855,39856,39857,39858,39859,39860,39861,39862,39863,39864,39865,39866,39867,39868,39869,39870,39871,39872,39873,39874,39875,39876,39877,39878,39879,39880,39881,39882,39883,39884,39885,39886,39887,39888,39889,39890,39891,39892,39893,39894,39895,39896,39897,39898,39899,37218,37217,37232,37225,37231,37245,37246,37234,37236,37241,37260,37253,37264,37261,37265,37282,37283,37290,37293,37294,37295,37301,37300,37306,35925,40574,36280,36331,36357,36441,36457,36277,36287,36284,36282,36292,36310,36311,36314,36318,36302,36303,36315,36294,36332,36343,36344,36323,36345,36347,36324,36361,36349,36372,36381,36383,36396,36398,36387,36399,36410,36416,36409,36405,36413,36401,36425,36417,36418,36433,36434,36426,36464,36470,36476,36463,36468,36485,36495,36500,36496,36508,36510,35960,35970,35978,35973,35992,35988,26011,35286,35294,35290,35292,39900,39901,39902,39903,39904,39905,39906,39907,39908,39909,39910,39911,39912,39913,39914,39915,39916,39917,39918,39919,39920,39921,39922,39923,39924,39925,39926,39927,39928,39929,39930,39931,39932,39933,39934,39935,39936,39937,39938,39939,39940,39941,39942,39943,39944,39945,39946,39947,39948,39949,39950,39951,39952,39953,39954,39955,39956,39957,39958,39959,39960,39961,39962,39963,39964,39965,39966,39967,39968,39969,39970,39971,39972,39973,39974,39975,39976,39977,39978,39979,39980,39981,39982,39983,39984,39985,39986,39987,39988,39989,39990,39991,39992,39993,39994,39995,35301,35307,35311,35390,35622,38739,38633,38643,38639,38662,38657,38664,38671,38670,38698,38701,38704,38718,40832,40835,40837,40838,40839,40840,40841,40842,40844,40702,40715,40717,38585,38588,38589,38606,38610,30655,38624,37518,37550,37576,37694,37738,37834,37775,37950,37995,40063,40066,40069,40070,40071,40072,31267,40075,40078,40080,40081,40082,40084,40085,40090,40091,40094,40095,40096,40097,40098,40099,40101,40102,40103,40104,40105,40107,40109,40110,40112,40113,40114,40115,40116,40117,40118,40119,40122,40123,40124,40125,40132,40133,40134,40135,40138,40139,39996,39997,39998,39999,40000,40001,40002,40003,40004,40005,40006,40007,40008,40009,40010,40011,40012,40013,40014,40015,40016,40017,40018,40019,40020,40021,40022,40023,40024,40025,40026,40027,40028,40029,40030,40031,40032,40033,40034,40035,40036,40037,40038,40039,40040,40041,40042,40043,40044,40045,40046,40047,40048,40049,40050,40051,40052,40053,40054,40055,40056,40057,40058,40059,40061,40062,40064,40067,40068,40073,40074,40076,40079,40083,40086,40087,40088,40089,40093,40106,40108,40111,40121,40126,40127,40128,40129,40130,40136,40137,40145,40146,40154,40155,40160,40161,40140,40141,40142,40143,40144,40147,40148,40149,40151,40152,40153,40156,40157,40159,40162,38780,38789,38801,38802,38804,38831,38827,38819,38834,38836,39601,39600,39607,40536,39606,39610,39612,39617,39616,39621,39618,39627,39628,39633,39749,39747,39751,39753,39752,39757,39761,39144,39181,39214,39253,39252,39647,39649,39654,39663,39659,39675,39661,39673,39688,39695,39699,39711,39715,40637,40638,32315,40578,40583,40584,40587,40594,37846,40605,40607,40667,40668,40669,40672,40671,40674,40681,40679,40677,40682,40687,40738,40748,40751,40761,40759,40765,40766,40772,40163,40164,40165,40166,40167,40168,40169,40170,40171,40172,40173,40174,40175,40176,40177,40178,40179,40180,40181,40182,40183,40184,40185,40186,40187,40188,40189,40190,40191,40192,40193,40194,40195,40196,40197,40198,40199,40200,40201,40202,40203,40204,40205,40206,40207,40208,40209,40210,40211,40212,40213,40214,40215,40216,40217,40218,40219,40220,40221,40222,40223,40224,40225,40226,40227,40228,40229,40230,40231,40232,40233,40234,40235,40236,40237,40238,40239,40240,40241,40242,40243,40244,40245,40246,40247,40248,40249,40250,40251,40252,40253,40254,40255,40256,40257,40258,57908,57909,57910,57911,57912,57913,57914,57915,57916,57917,57918,57919,57920,57921,57922,57923,57924,57925,57926,57927,57928,57929,57930,57931,57932,57933,57934,57935,57936,57937,57938,57939,57940,57941,57942,57943,57944,57945,57946,57947,57948,57949,57950,57951,57952,57953,57954,57955,57956,57957,57958,57959,57960,57961,57962,57963,57964,57965,57966,57967,57968,57969,57970,57971,57972,57973,57974,57975,57976,57977,57978,57979,57980,57981,57982,57983,57984,57985,57986,57987,57988,57989,57990,57991,57992,57993,57994,57995,57996,57997,57998,57999,58000,58001,40259,40260,40261,40262,40263,40264,40265,40266,40267,40268,40269,40270,40271,40272,40273,40274,40275,40276,40277,40278,40279,40280,40281,40282,40283,40284,40285,40286,40287,40288,40289,40290,40291,40292,40293,40294,40295,40296,40297,40298,40299,40300,40301,40302,40303,40304,40305,40306,40307,40308,40309,40310,40311,40312,40313,40314,40315,40316,40317,40318,40319,40320,40321,40322,40323,40324,40325,40326,40327,40328,40329,40330,40331,40332,40333,40334,40335,40336,40337,40338,40339,40340,40341,40342,40343,40344,40345,40346,40347,40348,40349,40350,40351,40352,40353,40354,58002,58003,58004,58005,58006,58007,58008,58009,58010,58011,58012,58013,58014,58015,58016,58017,58018,58019,58020,58021,58022,58023,58024,58025,58026,58027,58028,58029,58030,58031,58032,58033,58034,58035,58036,58037,58038,58039,58040,58041,58042,58043,58044,58045,58046,58047,58048,58049,58050,58051,58052,58053,58054,58055,58056,58057,58058,58059,58060,58061,58062,58063,58064,58065,58066,58067,58068,58069,58070,58071,58072,58073,58074,58075,58076,58077,58078,58079,58080,58081,58082,58083,58084,58085,58086,58087,58088,58089,58090,58091,58092,58093,58094,58095,40355,40356,40357,40358,40359,40360,40361,40362,40363,40364,40365,40366,40367,40368,40369,40370,40371,40372,40373,40374,40375,40376,40377,40378,40379,40380,40381,40382,40383,40384,40385,40386,40387,40388,40389,40390,40391,40392,40393,40394,40395,40396,40397,40398,40399,40400,40401,40402,40403,40404,40405,40406,40407,40408,40409,40410,40411,40412,40413,40414,40415,40416,40417,40418,40419,40420,40421,40422,40423,40424,40425,40426,40427,40428,40429,40430,40431,40432,40433,40434,40435,40436,40437,40438,40439,40440,40441,40442,40443,40444,40445,40446,40447,40448,40449,40450,58096,58097,58098,58099,58100,58101,58102,58103,58104,58105,58106,58107,58108,58109,58110,58111,58112,58113,58114,58115,58116,58117,58118,58119,58120,58121,58122,58123,58124,58125,58126,58127,58128,58129,58130,58131,58132,58133,58134,58135,58136,58137,58138,58139,58140,58141,58142,58143,58144,58145,58146,58147,58148,58149,58150,58151,58152,58153,58154,58155,58156,58157,58158,58159,58160,58161,58162,58163,58164,58165,58166,58167,58168,58169,58170,58171,58172,58173,58174,58175,58176,58177,58178,58179,58180,58181,58182,58183,58184,58185,58186,58187,58188,58189,40451,40452,40453,40454,40455,40456,40457,40458,40459,40460,40461,40462,40463,40464,40465,40466,40467,40468,40469,40470,40471,40472,40473,40474,40475,40476,40477,40478,40484,40487,40494,40496,40500,40507,40508,40512,40525,40528,40530,40531,40532,40534,40537,40541,40543,40544,40545,40546,40549,40558,40559,40562,40564,40565,40566,40567,40568,40569,40570,40571,40572,40573,40576,40577,40579,40580,40581,40582,40585,40586,40588,40589,40590,40591,40592,40593,40596,40597,40598,40599,40600,40601,40602,40603,40604,40606,40608,40609,40610,40611,40612,40613,40615,40616,40617,40618,58190,58191,58192,58193,58194,58195,58196,58197,58198,58199,58200,58201,58202,58203,58204,58205,58206,58207,58208,58209,58210,58211,58212,58213,58214,58215,58216,58217,58218,58219,58220,58221,58222,58223,58224,58225,58226,58227,58228,58229,58230,58231,58232,58233,58234,58235,58236,58237,58238,58239,58240,58241,58242,58243,58244,58245,58246,58247,58248,58249,58250,58251,58252,58253,58254,58255,58256,58257,58258,58259,58260,58261,58262,58263,58264,58265,58266,58267,58268,58269,58270,58271,58272,58273,58274,58275,58276,58277,58278,58279,58280,58281,58282,58283,40619,40620,40621,40622,40623,40624,40625,40626,40627,40629,40630,40631,40633,40634,40636,40639,40640,40641,40642,40643,40645,40646,40647,40648,40650,40651,40652,40656,40658,40659,40661,40662,40663,40665,40666,40670,40673,40675,40676,40678,40680,40683,40684,40685,40686,40688,40689,40690,40691,40692,40693,40694,40695,40696,40698,40701,40703,40704,40705,40706,40707,40708,40709,40710,40711,40712,40713,40714,40716,40719,40721,40722,40724,40725,40726,40728,40730,40731,40732,40733,40734,40735,40737,40739,40740,40741,40742,40743,40744,40745,40746,40747,40749,40750,40752,40753,58284,58285,58286,58287,58288,58289,58290,58291,58292,58293,58294,58295,58296,58297,58298,58299,58300,58301,58302,58303,58304,58305,58306,58307,58308,58309,58310,58311,58312,58313,58314,58315,58316,58317,58318,58319,58320,58321,58322,58323,58324,58325,58326,58327,58328,58329,58330,58331,58332,58333,58334,58335,58336,58337,58338,58339,58340,58341,58342,58343,58344,58345,58346,58347,58348,58349,58350,58351,58352,58353,58354,58355,58356,58357,58358,58359,58360,58361,58362,58363,58364,58365,58366,58367,58368,58369,58370,58371,58372,58373,58374,58375,58376,58377,40754,40755,40756,40757,40758,40760,40762,40764,40767,40768,40769,40770,40771,40773,40774,40775,40776,40777,40778,40779,40780,40781,40782,40783,40786,40787,40788,40789,40790,40791,40792,40793,40794,40795,40796,40797,40798,40799,40800,40801,40802,40803,40804,40805,40806,40807,40808,40809,40810,40811,40812,40813,40814,40815,40816,40817,40818,40819,40820,40821,40822,40823,40824,40825,40826,40827,40828,40829,40830,40833,40834,40845,40846,40847,40848,40849,40850,40851,40852,40853,40854,40855,40856,40860,40861,40862,40865,40866,40867,40868,40869,63788,63865,63893,63975,63985,58378,58379,58380,58381,58382,58383,58384,58385,58386,58387,58388,58389,58390,58391,58392,58393,58394,58395,58396,58397,58398,58399,58400,58401,58402,58403,58404,58405,58406,58407,58408,58409,58410,58411,58412,58413,58414,58415,58416,58417,58418,58419,58420,58421,58422,58423,58424,58425,58426,58427,58428,58429,58430,58431,58432,58433,58434,58435,58436,58437,58438,58439,58440,58441,58442,58443,58444,58445,58446,58447,58448,58449,58450,58451,58452,58453,58454,58455,58456,58457,58458,58459,58460,58461,58462,58463,58464,58465,58466,58467,58468,58469,58470,58471,64012,64013,64014,64015,64017,64019,64020,64024,64031,64032,64033,64035,64036,64039,64040,64041,11905,59414,59415,59416,11908,13427,13383,11912,11915,59422,13726,13850,13838,11916,11927,14702,14616,59430,14799,14815,14963,14800,59435,59436,15182,15470,15584,11943,59441,59442,11946,16470,16735,11950,17207,11955,11958,11959,59451,17329,17324,11963,17373,17622,18017,17996,59459,18211,18217,18300,18317,11978,18759,18810,18813,18818,18819,18821,18822,18847,18843,18871,18870,59476,59477,19619,19615,19616,19617,19575,19618,19731,19732,19733,19734,19735,19736,19737,19886,59492,58472,58473,58474,58475,58476,58477,58478,58479,58480,58481,58482,58483,58484,58485,58486,58487,58488,58489,58490,58491,58492,58493,58494,58495,58496,58497,58498,58499,58500,58501,58502,58503,58504,58505,58506,58507,58508,58509,58510,58511,58512,58513,58514,58515,58516,58517,58518,58519,58520,58521,58522,58523,58524,58525,58526,58527,58528,58529,58530,58531,58532,58533,58534,58535,58536,58537,58538,58539,58540,58541,58542,58543,58544,58545,58546,58547,58548,58549,58550,58551,58552,58553,58554,58555,58556,58557,58558,58559,58560,58561,58562,58563,58564,58565],"gb18030-ranges":[[0,128],[36,165],[38,169],[45,178],[50,184],[81,216],[89,226],[95,235],[96,238],[100,244],[103,248],[104,251],[105,253],[109,258],[126,276],[133,284],[148,300],[172,325],[175,329],[179,334],[208,364],[306,463],[307,465],[308,467],[309,469],[310,471],[311,473],[312,475],[313,477],[341,506],[428,594],[443,610],[544,712],[545,716],[558,730],[741,930],[742,938],[749,962],[750,970],[805,1026],[819,1104],[820,1106],[7922,8209],[7924,8215],[7925,8218],[7927,8222],[7934,8231],[7943,8241],[7944,8244],[7945,8246],[7950,8252],[8062,8365],[8148,8452],[8149,8454],[8152,8458],[8164,8471],[8174,8482],[8236,8556],[8240,8570],[8262,8596],[8264,8602],[8374,8713],[8380,8720],[8381,8722],[8384,8726],[8388,8731],[8390,8737],[8392,8740],[8393,8742],[8394,8748],[8396,8751],[8401,8760],[8406,8766],[8416,8777],[8419,8781],[8424,8787],[8437,8802],[8439,8808],[8445,8816],[8482,8854],[8485,8858],[8496,8870],[8521,8896],[8603,8979],[8936,9322],[8946,9372],[9046,9548],[9050,9588],[9063,9616],[9066,9622],[9076,9634],[9092,9652],[9100,9662],[9108,9672],[9111,9676],[9113,9680],[9131,9702],[9162,9735],[9164,9738],[9218,9793],[9219,9795],[11329,11906],[11331,11909],[11334,11913],[11336,11917],[11346,11928],[11361,11944],[11363,11947],[11366,11951],[11370,11956],[11372,11960],[11375,11964],[11389,11979],[11682,12284],[11686,12292],[11687,12312],[11692,12319],[11694,12330],[11714,12351],[11716,12436],[11723,12447],[11725,12535],[11730,12543],[11736,12586],[11982,12842],[11989,12850],[12102,12964],[12336,13200],[12348,13215],[12350,13218],[12384,13253],[12393,13263],[12395,13267],[12397,13270],[12510,13384],[12553,13428],[12851,13727],[12962,13839],[12973,13851],[13738,14617],[13823,14703],[13919,14801],[13933,14816],[14080,14964],[14298,15183],[14585,15471],[14698,15585],[15583,16471],[15847,16736],[16318,17208],[16434,17325],[16438,17330],[16481,17374],[16729,17623],[17102,17997],[17122,18018],[17315,18212],[17320,18218],[17402,18301],[17418,18318],[17859,18760],[17909,18811],[17911,18814],[17915,18820],[17916,18823],[17936,18844],[17939,18848],[17961,18872],[18664,19576],[18703,19620],[18814,19738],[18962,19887],[19043,40870],[33469,59244],[33470,59336],[33471,59367],[33484,59413],[33485,59417],[33490,59423],[33497,59431],[33501,59437],[33505,59443],[33513,59452],[33520,59460],[33536,59478],[33550,59493],[37845,63789],[37921,63866],[37948,63894],[38029,63976],[38038,63986],[38064,64016],[38065,64018],[38066,64021],[38069,64025],[38075,64034],[38076,64037],[38078,64042],[39108,65074],[39109,65093],[39113,65107],[39114,65112],[39115,65127],[39116,65132],[39265,65375],[39394,65510],[189000,65536]],jis0208:[12288,12289,12290,65292,65294,12539,65306,65307,65311,65281,12443,12444,180,65344,168,65342,65507,65343,12541,12542,12445,12446,12291,20189,12293,12294,12295,12540,8213,8208,65295,65340,65374,8741,65372,8230,8229,8216,8217,8220,8221,65288,65289,12308,12309,65339,65341,65371,65373,12296,12297,12298,12299,12300,12301,12302,12303,12304,12305,65291,65293,177,215,247,65309,8800,65308,65310,8806,8807,8734,8756,9794,9792,176,8242,8243,8451,65509,65284,65504,65505,65285,65283,65286,65290,65312,167,9734,9733,9675,9679,9678,9671,9670,9633,9632,9651,9650,9661,9660,8251,12306,8594,8592,8593,8595,12307,null,null,null,null,null,null,null,null,null,null,null,8712,8715,8838,8839,8834,8835,8746,8745,null,null,null,null,null,null,null,null,8743,8744,65506,8658,8660,8704,8707,null,null,null,null,null,null,null,null,null,null,null,8736,8869,8978,8706,8711,8801,8786,8810,8811,8730,8765,8733,8757,8747,8748,null,null,null,null,null,null,null,8491,8240,9839,9837,9834,8224,8225,182,null,null,null,null,9711,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,65296,65297,65298,65299,65300,65301,65302,65303,65304,65305,null,null,null,null,null,null,null,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,null,null,null,null,null,null,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,null,null,null,null,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,12417,12418,12419,12420,12421,12422,12423,12424,12425,12426,12427,12428,12429,12430,12431,12432,12433,12434,12435,null,null,null,null,null,null,null,null,null,null,null,12449,12450,12451,12452,12453,12454,12455,12456,12457,12458,12459,12460,12461,12462,12463,12464,12465,12466,12467,12468,12469,12470,12471,12472,12473,12474,12475,12476,12477,12478,12479,12480,12481,12482,12483,12484,12485,12486,12487,12488,12489,12490,12491,12492,12493,12494,12495,12496,12497,12498,12499,12500,12501,12502,12503,12504,12505,12506,12507,12508,12509,12510,12511,12512,12513,12514,12515,12516,12517,12518,12519,12520,12521,12522,12523,12524,12525,12526,12527,12528,12529,12530,12531,12532,12533,12534,null,null,null,null,null,null,null,null,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,null,null,null,null,null,null,null,null,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1040,1041,1042,1043,1044,1045,1025,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1072,1073,1074,1075,1076,1077,1105,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,null,null,null,null,null,null,null,null,null,null,null,null,null,9472,9474,9484,9488,9496,9492,9500,9516,9508,9524,9532,9473,9475,9487,9491,9499,9495,9507,9523,9515,9531,9547,9504,9519,9512,9527,9535,9501,9520,9509,9528,9538,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9322,9323,9324,9325,9326,9327,9328,9329,9330,9331,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,null,13129,13076,13090,13133,13080,13095,13059,13110,13137,13143,13069,13094,13091,13099,13130,13115,13212,13213,13214,13198,13199,13252,13217,null,null,null,null,null,null,null,null,13179,12317,12319,8470,13261,8481,12964,12965,12966,12967,12968,12849,12850,12857,13182,13181,13180,8786,8801,8747,8750,8721,8730,8869,8736,8735,8895,8757,8745,8746,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,20124,21782,23043,38463,21696,24859,25384,23030,36898,33909,33564,31312,24746,25569,28197,26093,33894,33446,39925,26771,22311,26017,25201,23451,22992,34427,39156,32098,32190,39822,25110,31903,34999,23433,24245,25353,26263,26696,38343,38797,26447,20197,20234,20301,20381,20553,22258,22839,22996,23041,23561,24799,24847,24944,26131,26885,28858,30031,30064,31227,32173,32239,32963,33806,34915,35586,36949,36986,21307,20117,20133,22495,32946,37057,30959,19968,22769,28322,36920,31282,33576,33419,39983,20801,21360,21693,21729,22240,23035,24341,39154,28139,32996,34093,38498,38512,38560,38907,21515,21491,23431,28879,32701,36802,38632,21359,40284,31418,19985,30867,33276,28198,22040,21764,27421,34074,39995,23013,21417,28006,29916,38287,22082,20113,36939,38642,33615,39180,21473,21942,23344,24433,26144,26355,26628,27704,27891,27945,29787,30408,31310,38964,33521,34907,35424,37613,28082,30123,30410,39365,24742,35585,36234,38322,27022,21421,20870,22290,22576,22852,23476,24310,24616,25513,25588,27839,28436,28814,28948,29017,29141,29503,32257,33398,33489,34199,36960,37467,40219,22633,26044,27738,29989,20985,22830,22885,24448,24540,25276,26106,27178,27431,27572,29579,32705,35158,40236,40206,40644,23713,27798,33659,20740,23627,25014,33222,26742,29281,20057,20474,21368,24681,28201,31311,38899,19979,21270,20206,20309,20285,20385,20339,21152,21487,22025,22799,23233,23478,23521,31185,26247,26524,26550,27468,27827,28779,29634,31117,31166,31292,31623,33457,33499,33540,33655,33775,33747,34662,35506,22057,36008,36838,36942,38686,34442,20420,23784,25105,29273,30011,33253,33469,34558,36032,38597,39187,39381,20171,20250,35299,22238,22602,22730,24315,24555,24618,24724,24674,25040,25106,25296,25913,39745,26214,26800,28023,28784,30028,30342,32117,33445,34809,38283,38542,35997,20977,21182,22806,21683,23475,23830,24936,27010,28079,30861,33995,34903,35442,37799,39608,28012,39336,34521,22435,26623,34510,37390,21123,22151,21508,24275,25313,25785,26684,26680,27579,29554,30906,31339,35226,35282,36203,36611,37101,38307,38548,38761,23398,23731,27005,38989,38990,25499,31520,27179,27263,26806,39949,28511,21106,21917,24688,25324,27963,28167,28369,33883,35088,36676,19988,39993,21494,26907,27194,38788,26666,20828,31427,33970,37340,37772,22107,40232,26658,33541,33841,31909,21000,33477,29926,20094,20355,20896,23506,21002,21208,21223,24059,21914,22570,23014,23436,23448,23515,24178,24185,24739,24863,24931,25022,25563,25954,26577,26707,26874,27454,27475,27735,28450,28567,28485,29872,29976,30435,30475,31487,31649,31777,32233,32566,32752,32925,33382,33694,35251,35532,36011,36996,37969,38291,38289,38306,38501,38867,39208,33304,20024,21547,23736,24012,29609,30284,30524,23721,32747,36107,38593,38929,38996,39000,20225,20238,21361,21916,22120,22522,22855,23305,23492,23696,24076,24190,24524,25582,26426,26071,26082,26399,26827,26820,27231,24112,27589,27671,27773,30079,31048,23395,31232,32000,24509,35215,35352,36020,36215,36556,36637,39138,39438,39740,20096,20605,20736,22931,23452,25135,25216,25836,27450,29344,30097,31047,32681,34811,35516,35696,25516,33738,38816,21513,21507,21931,26708,27224,35440,30759,26485,40653,21364,23458,33050,34384,36870,19992,20037,20167,20241,21450,21560,23470,24339,24613,25937,26429,27714,27762,27875,28792,29699,31350,31406,31496,32026,31998,32102,26087,29275,21435,23621,24040,25298,25312,25369,28192,34394,35377,36317,37624,28417,31142,39770,20136,20139,20140,20379,20384,20689,20807,31478,20849,20982,21332,21281,21375,21483,21932,22659,23777,24375,24394,24623,24656,24685,25375,25945,27211,27841,29378,29421,30703,33016,33029,33288,34126,37111,37857,38911,39255,39514,20208,20957,23597,26241,26989,23616,26354,26997,29577,26704,31873,20677,21220,22343,24062,37670,26020,27427,27453,29748,31105,31165,31563,32202,33465,33740,34943,35167,35641,36817,37329,21535,37504,20061,20534,21477,21306,29399,29590,30697,33510,36527,39366,39368,39378,20855,24858,34398,21936,31354,20598,23507,36935,38533,20018,27355,37351,23633,23624,25496,31391,27795,38772,36705,31402,29066,38536,31874,26647,32368,26705,37740,21234,21531,34219,35347,32676,36557,37089,21350,34952,31041,20418,20670,21009,20804,21843,22317,29674,22411,22865,24418,24452,24693,24950,24935,25001,25522,25658,25964,26223,26690,28179,30054,31293,31995,32076,32153,32331,32619,33550,33610,34509,35336,35427,35686,36605,38938,40335,33464,36814,39912,21127,25119,25731,28608,38553,26689,20625,27424,27770,28500,31348,32080,34880,35363,26376,20214,20537,20518,20581,20860,21048,21091,21927,22287,22533,23244,24314,25010,25080,25331,25458,26908,27177,29309,29356,29486,30740,30831,32121,30476,32937,35211,35609,36066,36562,36963,37749,38522,38997,39443,40568,20803,21407,21427,24187,24358,28187,28304,29572,29694,32067,33335,35328,35578,38480,20046,20491,21476,21628,22266,22993,23396,24049,24235,24359,25144,25925,26543,28246,29392,31946,34996,32929,32993,33776,34382,35463,36328,37431,38599,39015,40723,20116,20114,20237,21320,21577,21566,23087,24460,24481,24735,26791,27278,29786,30849,35486,35492,35703,37264,20062,39881,20132,20348,20399,20505,20502,20809,20844,21151,21177,21246,21402,21475,21521,21518,21897,22353,22434,22909,23380,23389,23439,24037,24039,24055,24184,24195,24218,24247,24344,24658,24908,25239,25304,25511,25915,26114,26179,26356,26477,26657,26775,27083,27743,27946,28009,28207,28317,30002,30343,30828,31295,31968,32005,32024,32094,32177,32789,32771,32943,32945,33108,33167,33322,33618,34892,34913,35611,36002,36092,37066,37237,37489,30783,37628,38308,38477,38917,39321,39640,40251,21083,21163,21495,21512,22741,25335,28640,35946,36703,40633,20811,21051,21578,22269,31296,37239,40288,40658,29508,28425,33136,29969,24573,24794,39592,29403,36796,27492,38915,20170,22256,22372,22718,23130,24680,25031,26127,26118,26681,26801,28151,30165,32058,33390,39746,20123,20304,21449,21766,23919,24038,24046,26619,27801,29811,30722,35408,37782,35039,22352,24231,25387,20661,20652,20877,26368,21705,22622,22971,23472,24425,25165,25505,26685,27507,28168,28797,37319,29312,30741,30758,31085,25998,32048,33756,35009,36617,38555,21092,22312,26448,32618,36001,20916,22338,38442,22586,27018,32948,21682,23822,22524,30869,40442,20316,21066,21643,25662,26152,26388,26613,31364,31574,32034,37679,26716,39853,31545,21273,20874,21047,23519,25334,25774,25830,26413,27578,34217,38609,30352,39894,25420,37638,39851,30399,26194,19977,20632,21442,23665,24808,25746,25955,26719,29158,29642,29987,31639,32386,34453,35715,36059,37240,39184,26028,26283,27531,20181,20180,20282,20351,21050,21496,21490,21987,22235,22763,22987,22985,23039,23376,23629,24066,24107,24535,24605,25351,25903,23388,26031,26045,26088,26525,27490,27515,27663,29509,31049,31169,31992,32025,32043,32930,33026,33267,35222,35422,35433,35430,35468,35566,36039,36060,38604,39164,27503,20107,20284,20365,20816,23383,23546,24904,25345,26178,27425,28363,27835,29246,29885,30164,30913,31034,32780,32819,33258,33940,36766,27728,40575,24335,35672,40235,31482,36600,23437,38635,19971,21489,22519,22833,23241,23460,24713,28287,28422,30142,36074,23455,34048,31712,20594,26612,33437,23649,34122,32286,33294,20889,23556,25448,36198,26012,29038,31038,32023,32773,35613,36554,36974,34503,37034,20511,21242,23610,26451,28796,29237,37196,37320,37675,33509,23490,24369,24825,20027,21462,23432,25163,26417,27530,29417,29664,31278,33131,36259,37202,39318,20754,21463,21610,23551,25480,27193,32172,38656,22234,21454,21608,23447,23601,24030,20462,24833,25342,27954,31168,31179,32066,32333,32722,33261,33311,33936,34886,35186,35728,36468,36655,36913,37195,37228,38598,37276,20160,20303,20805,21313,24467,25102,26580,27713,28171,29539,32294,37325,37507,21460,22809,23487,28113,31069,32302,31899,22654,29087,20986,34899,36848,20426,23803,26149,30636,31459,33308,39423,20934,24490,26092,26991,27529,28147,28310,28516,30462,32020,24033,36981,37255,38918,20966,21021,25152,26257,26329,28186,24246,32210,32626,26360,34223,34295,35576,21161,21465,22899,24207,24464,24661,37604,38500,20663,20767,21213,21280,21319,21484,21736,21830,21809,22039,22888,22974,23100,23477,23558,23567,23569,23578,24196,24202,24288,24432,25215,25220,25307,25484,25463,26119,26124,26157,26230,26494,26786,27167,27189,27836,28040,28169,28248,28988,28966,29031,30151,30465,30813,30977,31077,31216,31456,31505,31911,32057,32918,33750,33931,34121,34909,35059,35359,35388,35412,35443,35937,36062,37284,37478,37758,37912,38556,38808,19978,19976,19998,20055,20887,21104,22478,22580,22732,23330,24120,24773,25854,26465,26454,27972,29366,30067,31331,33976,35698,37304,37664,22065,22516,39166,25325,26893,27542,29165,32340,32887,33394,35302,39135,34645,36785,23611,20280,20449,20405,21767,23072,23517,23529,24515,24910,25391,26032,26187,26862,27035,28024,28145,30003,30137,30495,31070,31206,32051,33251,33455,34218,35242,35386,36523,36763,36914,37341,38663,20154,20161,20995,22645,22764,23563,29978,23613,33102,35338,36805,38499,38765,31525,35535,38920,37218,22259,21416,36887,21561,22402,24101,25512,27700,28810,30561,31883,32736,34928,36930,37204,37648,37656,38543,29790,39620,23815,23913,25968,26530,36264,38619,25454,26441,26905,33733,38935,38592,35070,28548,25722,23544,19990,28716,30045,26159,20932,21046,21218,22995,24449,24615,25104,25919,25972,26143,26228,26866,26646,27491,28165,29298,29983,30427,31934,32854,22768,35069,35199,35488,35475,35531,36893,37266,38738,38745,25993,31246,33030,38587,24109,24796,25114,26021,26132,26512,30707,31309,31821,32318,33034,36012,36196,36321,36447,30889,20999,25305,25509,25666,25240,35373,31363,31680,35500,38634,32118,33292,34633,20185,20808,21315,21344,23459,23554,23574,24029,25126,25159,25776,26643,26676,27849,27973,27927,26579,28508,29006,29053,26059,31359,31661,32218,32330,32680,33146,33307,33337,34214,35438,36046,36341,36984,36983,37549,37521,38275,39854,21069,21892,28472,28982,20840,31109,32341,33203,31950,22092,22609,23720,25514,26366,26365,26970,29401,30095,30094,30990,31062,31199,31895,32032,32068,34311,35380,38459,36961,40736,20711,21109,21452,21474,20489,21930,22766,22863,29245,23435,23652,21277,24803,24819,25436,25475,25407,25531,25805,26089,26361,24035,27085,27133,28437,29157,20105,30185,30456,31379,31967,32207,32156,32865,33609,33624,33900,33980,34299,35013,36208,36865,36973,37783,38684,39442,20687,22679,24974,33235,34101,36104,36896,20419,20596,21063,21363,24687,25417,26463,28204,36275,36895,20439,23646,36042,26063,32154,21330,34966,20854,25539,23384,23403,23562,25613,26449,36956,20182,22810,22826,27760,35409,21822,22549,22949,24816,25171,26561,33333,26965,38464,39364,39464,20307,22534,23550,32784,23729,24111,24453,24608,24907,25140,26367,27888,28382,32974,33151,33492,34955,36024,36864,36910,38538,40667,39899,20195,21488,22823,31532,37261,38988,40441,28381,28711,21331,21828,23429,25176,25246,25299,27810,28655,29730,35351,37944,28609,35582,33592,20967,34552,21482,21481,20294,36948,36784,22890,33073,24061,31466,36799,26842,35895,29432,40008,27197,35504,20025,21336,22022,22374,25285,25506,26086,27470,28129,28251,28845,30701,31471,31658,32187,32829,32966,34507,35477,37723,22243,22727,24382,26029,26262,27264,27573,30007,35527,20516,30693,22320,24347,24677,26234,27744,30196,31258,32622,33268,34584,36933,39347,31689,30044,31481,31569,33988,36880,31209,31378,33590,23265,30528,20013,20210,23449,24544,25277,26172,26609,27880,34411,34935,35387,37198,37619,39376,27159,28710,29482,33511,33879,36015,19969,20806,20939,21899,23541,24086,24115,24193,24340,24373,24427,24500,25074,25361,26274,26397,28526,29266,30010,30522,32884,33081,33144,34678,35519,35548,36229,36339,37530,38263,38914,40165,21189,25431,30452,26389,27784,29645,36035,37806,38515,27941,22684,26894,27084,36861,37786,30171,36890,22618,26626,25524,27131,20291,28460,26584,36795,34086,32180,37716,26943,28528,22378,22775,23340,32044,29226,21514,37347,40372,20141,20302,20572,20597,21059,35998,21576,22564,23450,24093,24213,24237,24311,24351,24716,25269,25402,25552,26799,27712,30855,31118,31243,32224,33351,35330,35558,36420,36883,37048,37165,37336,40718,27877,25688,25826,25973,28404,30340,31515,36969,37841,28346,21746,24505,25764,36685,36845,37444,20856,22635,22825,23637,24215,28155,32399,29980,36028,36578,39003,28857,20253,27583,28593,30000,38651,20814,21520,22581,22615,22956,23648,24466,26007,26460,28193,30331,33759,36077,36884,37117,37709,30757,30778,21162,24230,22303,22900,24594,20498,20826,20908,20941,20992,21776,22612,22616,22871,23445,23798,23947,24764,25237,25645,26481,26691,26812,26847,30423,28120,28271,28059,28783,29128,24403,30168,31095,31561,31572,31570,31958,32113,21040,33891,34153,34276,35342,35588,35910,36367,36867,36879,37913,38518,38957,39472,38360,20685,21205,21516,22530,23566,24999,25758,27934,30643,31461,33012,33796,36947,37509,23776,40199,21311,24471,24499,28060,29305,30563,31167,31716,27602,29420,35501,26627,27233,20984,31361,26932,23626,40182,33515,23493,37193,28702,22136,23663,24775,25958,27788,35930,36929,38931,21585,26311,37389,22856,37027,20869,20045,20970,34201,35598,28760,25466,37707,26978,39348,32260,30071,21335,26976,36575,38627,27741,20108,23612,24336,36841,21250,36049,32905,34425,24319,26085,20083,20837,22914,23615,38894,20219,22922,24525,35469,28641,31152,31074,23527,33905,29483,29105,24180,24565,25467,25754,29123,31896,20035,24316,20043,22492,22178,24745,28611,32013,33021,33075,33215,36786,35223,34468,24052,25226,25773,35207,26487,27874,27966,29750,30772,23110,32629,33453,39340,20467,24259,25309,25490,25943,26479,30403,29260,32972,32954,36649,37197,20493,22521,23186,26757,26995,29028,29437,36023,22770,36064,38506,36889,34687,31204,30695,33833,20271,21093,21338,25293,26575,27850,30333,31636,31893,33334,34180,36843,26333,28448,29190,32283,33707,39361,40614,20989,31665,30834,31672,32903,31560,27368,24161,32908,30033,30048,20843,37474,28300,30330,37271,39658,20240,32624,25244,31567,38309,40169,22138,22617,34532,38588,20276,21028,21322,21453,21467,24070,25644,26001,26495,27710,27726,29256,29359,29677,30036,32321,33324,34281,36009,31684,37318,29033,38930,39151,25405,26217,30058,30436,30928,34115,34542,21290,21329,21542,22915,24199,24444,24754,25161,25209,25259,26000,27604,27852,30130,30382,30865,31192,32203,32631,32933,34987,35513,36027,36991,38750,39131,27147,31800,20633,23614,24494,26503,27608,29749,30473,32654,40763,26570,31255,21305,30091,39661,24422,33181,33777,32920,24380,24517,30050,31558,36924,26727,23019,23195,32016,30334,35628,20469,24426,27161,27703,28418,29922,31080,34920,35413,35961,24287,25551,30149,31186,33495,37672,37618,33948,34541,39981,21697,24428,25996,27996,28693,36007,36051,38971,25935,29942,19981,20184,22496,22827,23142,23500,20904,24067,24220,24598,25206,25975,26023,26222,28014,29238,31526,33104,33178,33433,35676,36000,36070,36212,38428,38468,20398,25771,27494,33310,33889,34154,37096,23553,26963,39080,33914,34135,20239,21103,24489,24133,26381,31119,33145,35079,35206,28149,24343,25173,27832,20175,29289,39826,20998,21563,22132,22707,24996,25198,28954,22894,31881,31966,32027,38640,25991,32862,19993,20341,20853,22592,24163,24179,24330,26564,20006,34109,38281,38491,31859,38913,20731,22721,30294,30887,21029,30629,34065,31622,20559,22793,29255,31687,32232,36794,36820,36941,20415,21193,23081,24321,38829,20445,33303,37610,22275,25429,27497,29995,35036,36628,31298,21215,22675,24917,25098,26286,27597,31807,33769,20515,20472,21253,21574,22577,22857,23453,23792,23791,23849,24214,25265,25447,25918,26041,26379,27861,27873,28921,30770,32299,32990,33459,33804,34028,34562,35090,35370,35914,37030,37586,39165,40179,40300,20047,20129,20621,21078,22346,22952,24125,24536,24537,25151,26292,26395,26576,26834,20882,32033,32938,33192,35584,35980,36031,37502,38450,21536,38956,21271,20693,21340,22696,25778,26420,29287,30566,31302,37350,21187,27809,27526,22528,24140,22868,26412,32763,20961,30406,25705,30952,39764,40635,22475,22969,26151,26522,27598,21737,27097,24149,33180,26517,39850,26622,40018,26717,20134,20451,21448,25273,26411,27819,36804,20397,32365,40639,19975,24930,28288,28459,34067,21619,26410,39749,24051,31637,23724,23494,34588,28234,34001,31252,33032,22937,31885,27665,30496,21209,22818,28961,29279,30683,38695,40289,26891,23167,23064,20901,21517,21629,26126,30431,36855,37528,40180,23018,29277,28357,20813,26825,32191,32236,38754,40634,25720,27169,33538,22916,23391,27611,29467,30450,32178,32791,33945,20786,26408,40665,30446,26466,21247,39173,23588,25147,31870,36016,21839,24758,32011,38272,21249,20063,20918,22812,29242,32822,37326,24357,30690,21380,24441,32004,34220,35379,36493,38742,26611,34222,37971,24841,24840,27833,30290,35565,36664,21807,20305,20778,21191,21451,23461,24189,24736,24962,25558,26377,26586,28263,28044,29494,29495,30001,31056,35029,35480,36938,37009,37109,38596,34701,22805,20104,20313,19982,35465,36671,38928,20653,24188,22934,23481,24248,25562,25594,25793,26332,26954,27096,27915,28342,29076,29992,31407,32650,32768,33865,33993,35201,35617,36362,36965,38525,39178,24958,25233,27442,27779,28020,32716,32764,28096,32645,34746,35064,26469,33713,38972,38647,27931,32097,33853,37226,20081,21365,23888,27396,28651,34253,34349,35239,21033,21519,23653,26446,26792,29702,29827,30178,35023,35041,37324,38626,38520,24459,29575,31435,33870,25504,30053,21129,27969,28316,29705,30041,30827,31890,38534,31452,40845,20406,24942,26053,34396,20102,20142,20698,20001,20940,23534,26009,26753,28092,29471,30274,30637,31260,31975,33391,35538,36988,37327,38517,38936,21147,32209,20523,21400,26519,28107,29136,29747,33256,36650,38563,40023,40607,29792,22593,28057,32047,39006,20196,20278,20363,20919,21169,23994,24604,29618,31036,33491,37428,38583,38646,38666,40599,40802,26278,27508,21015,21155,28872,35010,24265,24651,24976,28451,29001,31806,32244,32879,34030,36899,37676,21570,39791,27347,28809,36034,36335,38706,21172,23105,24266,24324,26391,27004,27028,28010,28431,29282,29436,31725,32769,32894,34635,37070,20845,40595,31108,32907,37682,35542,20525,21644,35441,27498,36036,33031,24785,26528,40434,20121,20120,39952,35435,34241,34152,26880,28286,30871,33109,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,24332,19984,19989,20010,20017,20022,20028,20031,20034,20054,20056,20098,20101,35947,20106,33298,24333,20110,20126,20127,20128,20130,20144,20147,20150,20174,20173,20164,20166,20162,20183,20190,20205,20191,20215,20233,20314,20272,20315,20317,20311,20295,20342,20360,20367,20376,20347,20329,20336,20369,20335,20358,20374,20760,20436,20447,20430,20440,20443,20433,20442,20432,20452,20453,20506,20520,20500,20522,20517,20485,20252,20470,20513,20521,20524,20478,20463,20497,20486,20547,20551,26371,20565,20560,20552,20570,20566,20588,20600,20608,20634,20613,20660,20658,20681,20682,20659,20674,20694,20702,20709,20717,20707,20718,20729,20725,20745,20737,20738,20758,20757,20756,20762,20769,20794,20791,20796,20795,20799,20800,20818,20812,20820,20834,31480,20841,20842,20846,20864,20866,22232,20876,20873,20879,20881,20883,20885,20886,20900,20902,20898,20905,20906,20907,20915,20913,20914,20912,20917,20925,20933,20937,20955,20960,34389,20969,20973,20976,20981,20990,20996,21003,21012,21006,21031,21034,21038,21043,21049,21071,21060,21067,21068,21086,21076,21098,21108,21097,21107,21119,21117,21133,21140,21138,21105,21128,21137,36776,36775,21164,21165,21180,21173,21185,21197,21207,21214,21219,21222,39149,21216,21235,21237,21240,21241,21254,21256,30008,21261,21264,21263,21269,21274,21283,21295,21297,21299,21304,21312,21318,21317,19991,21321,21325,20950,21342,21353,21358,22808,21371,21367,21378,21398,21408,21414,21413,21422,21424,21430,21443,31762,38617,21471,26364,29166,21486,21480,21485,21498,21505,21565,21568,21548,21549,21564,21550,21558,21545,21533,21582,21647,21621,21646,21599,21617,21623,21616,21650,21627,21632,21622,21636,21648,21638,21703,21666,21688,21669,21676,21700,21704,21672,21675,21698,21668,21694,21692,21720,21733,21734,21775,21780,21757,21742,21741,21754,21730,21817,21824,21859,21836,21806,21852,21829,21846,21847,21816,21811,21853,21913,21888,21679,21898,21919,21883,21886,21912,21918,21934,21884,21891,21929,21895,21928,21978,21957,21983,21956,21980,21988,21972,22036,22007,22038,22014,22013,22043,22009,22094,22096,29151,22068,22070,22066,22072,22123,22116,22063,22124,22122,22150,22144,22154,22176,22164,22159,22181,22190,22198,22196,22210,22204,22209,22211,22208,22216,22222,22225,22227,22231,22254,22265,22272,22271,22276,22281,22280,22283,22285,22291,22296,22294,21959,22300,22310,22327,22328,22350,22331,22336,22351,22377,22464,22408,22369,22399,22409,22419,22432,22451,22436,22442,22448,22467,22470,22484,22482,22483,22538,22486,22499,22539,22553,22557,22642,22561,22626,22603,22640,27584,22610,22589,22649,22661,22713,22687,22699,22714,22750,22715,22712,22702,22725,22739,22737,22743,22745,22744,22757,22748,22756,22751,22767,22778,22777,22779,22780,22781,22786,22794,22800,22811,26790,22821,22828,22829,22834,22840,22846,31442,22869,22864,22862,22874,22872,22882,22880,22887,22892,22889,22904,22913,22941,20318,20395,22947,22962,22982,23016,23004,22925,23001,23002,23077,23071,23057,23068,23049,23066,23104,23148,23113,23093,23094,23138,23146,23194,23228,23230,23243,23234,23229,23267,23255,23270,23273,23254,23290,23291,23308,23307,23318,23346,23248,23338,23350,23358,23363,23365,23360,23377,23381,23386,23387,23397,23401,23408,23411,23413,23416,25992,23418,23424,23427,23462,23480,23491,23495,23497,23508,23504,23524,23526,23522,23518,23525,23531,23536,23542,23539,23557,23559,23560,23565,23571,23584,23586,23592,23608,23609,23617,23622,23630,23635,23632,23631,23409,23660,23662,20066,23670,23673,23692,23697,23700,22939,23723,23739,23734,23740,23735,23749,23742,23751,23769,23785,23805,23802,23789,23948,23786,23819,23829,23831,23900,23839,23835,23825,23828,23842,23834,23833,23832,23884,23890,23886,23883,23916,23923,23926,23943,23940,23938,23970,23965,23980,23982,23997,23952,23991,23996,24009,24013,24019,24018,24022,24027,24043,24050,24053,24075,24090,24089,24081,24091,24118,24119,24132,24131,24128,24142,24151,24148,24159,24162,24164,24135,24181,24182,24186,40636,24191,24224,24257,24258,24264,24272,24271,24278,24291,24285,24282,24283,24290,24289,24296,24297,24300,24305,24307,24304,24308,24312,24318,24323,24329,24413,24412,24331,24337,24342,24361,24365,24376,24385,24392,24396,24398,24367,24401,24406,24407,24409,24417,24429,24435,24439,24451,24450,24447,24458,24456,24465,24455,24478,24473,24472,24480,24488,24493,24508,24534,24571,24548,24568,24561,24541,24755,24575,24609,24672,24601,24592,24617,24590,24625,24603,24597,24619,24614,24591,24634,24666,24641,24682,24695,24671,24650,24646,24653,24675,24643,24676,24642,24684,24683,24665,24705,24717,24807,24707,24730,24708,24731,24726,24727,24722,24743,24715,24801,24760,24800,24787,24756,24560,24765,24774,24757,24792,24909,24853,24838,24822,24823,24832,24820,24826,24835,24865,24827,24817,24845,24846,24903,24894,24872,24871,24906,24895,24892,24876,24884,24893,24898,24900,24947,24951,24920,24921,24922,24939,24948,24943,24933,24945,24927,24925,24915,24949,24985,24982,24967,25004,24980,24986,24970,24977,25003,25006,25036,25034,25033,25079,25032,25027,25030,25018,25035,32633,25037,25062,25059,25078,25082,25076,25087,25085,25084,25086,25088,25096,25097,25101,25100,25108,25115,25118,25121,25130,25134,25136,25138,25139,25153,25166,25182,25187,25179,25184,25192,25212,25218,25225,25214,25234,25235,25238,25300,25219,25236,25303,25297,25275,25295,25343,25286,25812,25288,25308,25292,25290,25282,25287,25243,25289,25356,25326,25329,25383,25346,25352,25327,25333,25424,25406,25421,25628,25423,25494,25486,25472,25515,25462,25507,25487,25481,25503,25525,25451,25449,25534,25577,25536,25542,25571,25545,25554,25590,25540,25622,25652,25606,25619,25638,25654,25885,25623,25640,25615,25703,25711,25718,25678,25898,25749,25747,25765,25769,25736,25788,25818,25810,25797,25799,25787,25816,25794,25841,25831,33289,25824,25825,25260,25827,25839,25900,25846,25844,25842,25850,25856,25853,25880,25884,25861,25892,25891,25899,25908,25909,25911,25910,25912,30027,25928,25942,25941,25933,25944,25950,25949,25970,25976,25986,25987,35722,26011,26015,26027,26039,26051,26054,26049,26052,26060,26066,26075,26073,26080,26081,26097,26482,26122,26115,26107,26483,26165,26166,26164,26140,26191,26180,26185,26177,26206,26205,26212,26215,26216,26207,26210,26224,26243,26248,26254,26249,26244,26264,26269,26305,26297,26313,26302,26300,26308,26296,26326,26330,26336,26175,26342,26345,26352,26357,26359,26383,26390,26398,26406,26407,38712,26414,26431,26422,26433,26424,26423,26438,26462,26464,26457,26467,26468,26505,26480,26537,26492,26474,26508,26507,26534,26529,26501,26551,26607,26548,26604,26547,26601,26552,26596,26590,26589,26594,26606,26553,26574,26566,26599,27292,26654,26694,26665,26688,26701,26674,26702,26803,26667,26713,26723,26743,26751,26783,26767,26797,26772,26781,26779,26755,27310,26809,26740,26805,26784,26810,26895,26765,26750,26881,26826,26888,26840,26914,26918,26849,26892,26829,26836,26855,26837,26934,26898,26884,26839,26851,26917,26873,26848,26863,26920,26922,26906,26915,26913,26822,27001,26999,26972,27000,26987,26964,27006,26990,26937,26996,26941,26969,26928,26977,26974,26973,27009,26986,27058,27054,27088,27071,27073,27091,27070,27086,23528,27082,27101,27067,27075,27047,27182,27025,27040,27036,27029,27060,27102,27112,27138,27163,27135,27402,27129,27122,27111,27141,27057,27166,27117,27156,27115,27146,27154,27329,27171,27155,27204,27148,27250,27190,27256,27207,27234,27225,27238,27208,27192,27170,27280,27277,27296,27268,27298,27299,27287,34327,27323,27331,27330,27320,27315,27308,27358,27345,27359,27306,27354,27370,27387,27397,34326,27386,27410,27414,39729,27423,27448,27447,30428,27449,39150,27463,27459,27465,27472,27481,27476,27483,27487,27489,27512,27513,27519,27520,27524,27523,27533,27544,27541,27550,27556,27562,27563,27567,27570,27569,27571,27575,27580,27590,27595,27603,27615,27628,27627,27635,27631,40638,27656,27667,27668,27675,27684,27683,27742,27733,27746,27754,27778,27789,27802,27777,27803,27774,27752,27763,27794,27792,27844,27889,27859,27837,27863,27845,27869,27822,27825,27838,27834,27867,27887,27865,27882,27935,34893,27958,27947,27965,27960,27929,27957,27955,27922,27916,28003,28051,28004,27994,28025,27993,28046,28053,28644,28037,28153,28181,28170,28085,28103,28134,28088,28102,28140,28126,28108,28136,28114,28101,28154,28121,28132,28117,28138,28142,28205,28270,28206,28185,28274,28255,28222,28195,28267,28203,28278,28237,28191,28227,28218,28238,28196,28415,28189,28216,28290,28330,28312,28361,28343,28371,28349,28335,28356,28338,28372,28373,28303,28325,28354,28319,28481,28433,28748,28396,28408,28414,28479,28402,28465,28399,28466,28364,28478,28435,28407,28550,28538,28536,28545,28544,28527,28507,28659,28525,28546,28540,28504,28558,28561,28610,28518,28595,28579,28577,28580,28601,28614,28586,28639,28629,28652,28628,28632,28657,28654,28635,28681,28683,28666,28689,28673,28687,28670,28699,28698,28532,28701,28696,28703,28720,28734,28722,28753,28771,28825,28818,28847,28913,28844,28856,28851,28846,28895,28875,28893,28889,28937,28925,28956,28953,29029,29013,29064,29030,29026,29004,29014,29036,29071,29179,29060,29077,29096,29100,29143,29113,29118,29138,29129,29140,29134,29152,29164,29159,29173,29180,29177,29183,29197,29200,29211,29224,29229,29228,29232,29234,29243,29244,29247,29248,29254,29259,29272,29300,29310,29314,29313,29319,29330,29334,29346,29351,29369,29362,29379,29382,29380,29390,29394,29410,29408,29409,29433,29431,20495,29463,29450,29468,29462,29469,29492,29487,29481,29477,29502,29518,29519,40664,29527,29546,29544,29552,29560,29557,29563,29562,29640,29619,29646,29627,29632,29669,29678,29662,29858,29701,29807,29733,29688,29746,29754,29781,29759,29791,29785,29761,29788,29801,29808,29795,29802,29814,29822,29835,29854,29863,29898,29903,29908,29681,29920,29923,29927,29929,29934,29938,29936,29937,29944,29943,29956,29955,29957,29964,29966,29965,29973,29971,29982,29990,29996,30012,30020,30029,30026,30025,30043,30022,30042,30057,30052,30055,30059,30061,30072,30070,30086,30087,30068,30090,30089,30082,30100,30106,30109,30117,30115,30146,30131,30147,30133,30141,30136,30140,30129,30157,30154,30162,30169,30179,30174,30206,30207,30204,30209,30192,30202,30194,30195,30219,30221,30217,30239,30247,30240,30241,30242,30244,30260,30256,30267,30279,30280,30278,30300,30296,30305,30306,30312,30313,30314,30311,30316,30320,30322,30326,30328,30332,30336,30339,30344,30347,30350,30358,30355,30361,30362,30384,30388,30392,30393,30394,30402,30413,30422,30418,30430,30433,30437,30439,30442,34351,30459,30472,30471,30468,30505,30500,30494,30501,30502,30491,30519,30520,30535,30554,30568,30571,30555,30565,30591,30590,30585,30606,30603,30609,30624,30622,30640,30646,30649,30655,30652,30653,30651,30663,30669,30679,30682,30684,30691,30702,30716,30732,30738,31014,30752,31018,30789,30862,30836,30854,30844,30874,30860,30883,30901,30890,30895,30929,30918,30923,30932,30910,30908,30917,30922,30956,30951,30938,30973,30964,30983,30994,30993,31001,31020,31019,31040,31072,31063,31071,31066,31061,31059,31098,31103,31114,31133,31143,40779,31146,31150,31155,31161,31162,31177,31189,31207,31212,31201,31203,31240,31245,31256,31257,31264,31263,31104,31281,31291,31294,31287,31299,31319,31305,31329,31330,31337,40861,31344,31353,31357,31368,31383,31381,31384,31382,31401,31432,31408,31414,31429,31428,31423,36995,31431,31434,31437,31439,31445,31443,31449,31450,31453,31457,31458,31462,31469,31472,31490,31503,31498,31494,31539,31512,31513,31518,31541,31528,31542,31568,31610,31492,31565,31499,31564,31557,31605,31589,31604,31591,31600,31601,31596,31598,31645,31640,31647,31629,31644,31642,31627,31634,31631,31581,31641,31691,31681,31692,31695,31668,31686,31709,31721,31761,31764,31718,31717,31840,31744,31751,31763,31731,31735,31767,31757,31734,31779,31783,31786,31775,31799,31787,31805,31820,31811,31828,31823,31808,31824,31832,31839,31844,31830,31845,31852,31861,31875,31888,31908,31917,31906,31915,31905,31912,31923,31922,31921,31918,31929,31933,31936,31941,31938,31960,31954,31964,31970,39739,31983,31986,31988,31990,31994,32006,32002,32028,32021,32010,32069,32075,32046,32050,32063,32053,32070,32115,32086,32078,32114,32104,32110,32079,32099,32147,32137,32091,32143,32125,32155,32186,32174,32163,32181,32199,32189,32171,32317,32162,32175,32220,32184,32159,32176,32216,32221,32228,32222,32251,32242,32225,32261,32266,32291,32289,32274,32305,32287,32265,32267,32290,32326,32358,32315,32309,32313,32323,32311,32306,32314,32359,32349,32342,32350,32345,32346,32377,32362,32361,32380,32379,32387,32213,32381,36782,32383,32392,32393,32396,32402,32400,32403,32404,32406,32398,32411,32412,32568,32570,32581,32588,32589,32590,32592,32593,32597,32596,32600,32607,32608,32616,32617,32615,32632,32642,32646,32643,32648,32647,32652,32660,32670,32669,32666,32675,32687,32690,32697,32686,32694,32696,35697,32709,32710,32714,32725,32724,32737,32742,32745,32755,32761,39132,32774,32772,32779,32786,32792,32793,32796,32801,32808,32831,32827,32842,32838,32850,32856,32858,32863,32866,32872,32883,32882,32880,32886,32889,32893,32895,32900,32902,32901,32923,32915,32922,32941,20880,32940,32987,32997,32985,32989,32964,32986,32982,33033,33007,33009,33051,33065,33059,33071,33099,38539,33094,33086,33107,33105,33020,33137,33134,33125,33126,33140,33155,33160,33162,33152,33154,33184,33173,33188,33187,33119,33171,33193,33200,33205,33214,33208,33213,33216,33218,33210,33225,33229,33233,33241,33240,33224,33242,33247,33248,33255,33274,33275,33278,33281,33282,33285,33287,33290,33293,33296,33302,33321,33323,33336,33331,33344,33369,33368,33373,33370,33375,33380,33378,33384,33386,33387,33326,33393,33399,33400,33406,33421,33426,33451,33439,33467,33452,33505,33507,33503,33490,33524,33523,33530,33683,33539,33531,33529,33502,33542,33500,33545,33497,33589,33588,33558,33586,33585,33600,33593,33616,33605,33583,33579,33559,33560,33669,33690,33706,33695,33698,33686,33571,33678,33671,33674,33660,33717,33651,33653,33696,33673,33704,33780,33811,33771,33742,33789,33795,33752,33803,33729,33783,33799,33760,33778,33805,33826,33824,33725,33848,34054,33787,33901,33834,33852,34138,33924,33911,33899,33965,33902,33922,33897,33862,33836,33903,33913,33845,33994,33890,33977,33983,33951,34009,33997,33979,34010,34000,33985,33990,34006,33953,34081,34047,34036,34071,34072,34092,34079,34069,34068,34044,34112,34147,34136,34120,34113,34306,34123,34133,34176,34212,34184,34193,34186,34216,34157,34196,34203,34282,34183,34204,34167,34174,34192,34249,34234,34255,34233,34256,34261,34269,34277,34268,34297,34314,34323,34315,34302,34298,34310,34338,34330,34352,34367,34381,20053,34388,34399,34407,34417,34451,34467,34473,34474,34443,34444,34486,34479,34500,34502,34480,34505,34851,34475,34516,34526,34537,34540,34527,34523,34543,34578,34566,34568,34560,34563,34555,34577,34569,34573,34553,34570,34612,34623,34615,34619,34597,34601,34586,34656,34655,34680,34636,34638,34676,34647,34664,34670,34649,34643,34659,34666,34821,34722,34719,34690,34735,34763,34749,34752,34768,38614,34731,34756,34739,34759,34758,34747,34799,34802,34784,34831,34829,34814,34806,34807,34830,34770,34833,34838,34837,34850,34849,34865,34870,34873,34855,34875,34884,34882,34898,34905,34910,34914,34923,34945,34942,34974,34933,34941,34997,34930,34946,34967,34962,34990,34969,34978,34957,34980,34992,35007,34993,35011,35012,35028,35032,35033,35037,35065,35074,35068,35060,35048,35058,35076,35084,35082,35091,35139,35102,35109,35114,35115,35137,35140,35131,35126,35128,35148,35101,35168,35166,35174,35172,35181,35178,35183,35188,35191,35198,35203,35208,35210,35219,35224,35233,35241,35238,35244,35247,35250,35258,35261,35263,35264,35290,35292,35293,35303,35316,35320,35331,35350,35344,35340,35355,35357,35365,35382,35393,35419,35410,35398,35400,35452,35437,35436,35426,35461,35458,35460,35496,35489,35473,35493,35494,35482,35491,35524,35533,35522,35546,35563,35571,35559,35556,35569,35604,35552,35554,35575,35550,35547,35596,35591,35610,35553,35606,35600,35607,35616,35635,38827,35622,35627,35646,35624,35649,35660,35663,35662,35657,35670,35675,35674,35691,35679,35692,35695,35700,35709,35712,35724,35726,35730,35731,35734,35737,35738,35898,35905,35903,35912,35916,35918,35920,35925,35938,35948,35960,35962,35970,35977,35973,35978,35981,35982,35988,35964,35992,25117,36013,36010,36029,36018,36019,36014,36022,36040,36033,36068,36067,36058,36093,36090,36091,36100,36101,36106,36103,36111,36109,36112,40782,36115,36045,36116,36118,36199,36205,36209,36211,36225,36249,36290,36286,36282,36303,36314,36310,36300,36315,36299,36330,36331,36319,36323,36348,36360,36361,36351,36381,36382,36368,36383,36418,36405,36400,36404,36426,36423,36425,36428,36432,36424,36441,36452,36448,36394,36451,36437,36470,36466,36476,36481,36487,36485,36484,36491,36490,36499,36497,36500,36505,36522,36513,36524,36528,36550,36529,36542,36549,36552,36555,36571,36579,36604,36603,36587,36606,36618,36613,36629,36626,36633,36627,36636,36639,36635,36620,36646,36659,36667,36665,36677,36674,36670,36684,36681,36678,36686,36695,36700,36706,36707,36708,36764,36767,36771,36781,36783,36791,36826,36837,36834,36842,36847,36999,36852,36869,36857,36858,36881,36885,36897,36877,36894,36886,36875,36903,36918,36917,36921,36856,36943,36944,36945,36946,36878,36937,36926,36950,36952,36958,36968,36975,36982,38568,36978,36994,36989,36993,36992,37002,37001,37007,37032,37039,37041,37045,37090,37092,25160,37083,37122,37138,37145,37170,37168,37194,37206,37208,37219,37221,37225,37235,37234,37259,37257,37250,37282,37291,37295,37290,37301,37300,37306,37312,37313,37321,37323,37328,37334,37343,37345,37339,37372,37365,37366,37406,37375,37396,37420,37397,37393,37470,37463,37445,37449,37476,37448,37525,37439,37451,37456,37532,37526,37523,37531,37466,37583,37561,37559,37609,37647,37626,37700,37678,37657,37666,37658,37667,37690,37685,37691,37724,37728,37756,37742,37718,37808,37804,37805,37780,37817,37846,37847,37864,37861,37848,37827,37853,37840,37832,37860,37914,37908,37907,37891,37895,37904,37942,37931,37941,37921,37946,37953,37970,37956,37979,37984,37986,37982,37994,37417,38000,38005,38007,38013,37978,38012,38014,38017,38015,38274,38279,38282,38292,38294,38296,38297,38304,38312,38311,38317,38332,38331,38329,38334,38346,28662,38339,38349,38348,38357,38356,38358,38364,38369,38373,38370,38433,38440,38446,38447,38466,38476,38479,38475,38519,38492,38494,38493,38495,38502,38514,38508,38541,38552,38549,38551,38570,38567,38577,38578,38576,38580,38582,38584,38585,38606,38603,38601,38605,35149,38620,38669,38613,38649,38660,38662,38664,38675,38670,38673,38671,38678,38681,38692,38698,38704,38713,38717,38718,38724,38726,38728,38722,38729,38748,38752,38756,38758,38760,21202,38763,38769,38777,38789,38780,38785,38778,38790,38795,38799,38800,38812,38824,38822,38819,38835,38836,38851,38854,38856,38859,38876,38893,40783,38898,31455,38902,38901,38927,38924,38968,38948,38945,38967,38973,38982,38991,38987,39019,39023,39024,39025,39028,39027,39082,39087,39089,39094,39108,39107,39110,39145,39147,39171,39177,39186,39188,39192,39201,39197,39198,39204,39200,39212,39214,39229,39230,39234,39241,39237,39248,39243,39249,39250,39244,39253,39319,39320,39333,39341,39342,39356,39391,39387,39389,39384,39377,39405,39406,39409,39410,39419,39416,39425,39439,39429,39394,39449,39467,39479,39493,39490,39488,39491,39486,39509,39501,39515,39511,39519,39522,39525,39524,39529,39531,39530,39597,39600,39612,39616,39631,39633,39635,39636,39646,39647,39650,39651,39654,39663,39659,39662,39668,39665,39671,39675,39686,39704,39706,39711,39714,39715,39717,39719,39720,39721,39722,39726,39727,39730,39748,39747,39759,39757,39758,39761,39768,39796,39827,39811,39825,39830,39831,39839,39840,39848,39860,39872,39882,39865,39878,39887,39889,39890,39907,39906,39908,39892,39905,39994,39922,39921,39920,39957,39956,39945,39955,39948,39942,39944,39954,39946,39940,39982,39963,39973,39972,39969,39984,40007,39986,40006,39998,40026,40032,40039,40054,40056,40167,40172,40176,40201,40200,40171,40195,40198,40234,40230,40367,40227,40223,40260,40213,40210,40257,40255,40254,40262,40264,40285,40286,40292,40273,40272,40281,40306,40329,40327,40363,40303,40314,40346,40356,40361,40370,40388,40385,40379,40376,40378,40390,40399,40386,40409,40403,40440,40422,40429,40431,40445,40474,40475,40478,40565,40569,40573,40577,40584,40587,40588,40594,40597,40593,40605,40613,40617,40632,40618,40621,38753,40652,40654,40655,40656,40660,40668,40670,40669,40672,40677,40680,40687,40692,40694,40695,40697,40699,40700,40701,40711,40712,30391,40725,40737,40748,40766,40778,40786,40788,40803,40799,40800,40801,40806,40807,40812,40810,40823,40818,40822,40853,40860,40864,22575,27079,36953,29796,20956,29081,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,32394,35100,37704,37512,34012,20425,28859,26161,26824,37625,26363,24389,20008,20193,20220,20224,20227,20281,20310,20370,20362,20378,20372,20429,20544,20514,20479,20510,20550,20592,20546,20628,20724,20696,20810,20836,20893,20926,20972,21013,21148,21158,21184,21211,21248,21255,21284,21362,21395,21426,21469,64014,21660,21642,21673,21759,21894,22361,22373,22444,22472,22471,64015,64016,22686,22706,22795,22867,22875,22877,22883,22948,22970,23382,23488,29999,23512,23532,23582,23718,23738,23797,23847,23891,64017,23874,23917,23992,23993,24016,24353,24372,24423,24503,24542,24669,24709,24714,24798,24789,24864,24818,24849,24887,24880,24984,25107,25254,25589,25696,25757,25806,25934,26112,26133,26171,26121,26158,26142,26148,26213,26199,26201,64018,26227,26265,26272,26290,26303,26362,26382,63785,26470,26555,26706,26560,26625,26692,26831,64019,26984,64020,27032,27106,27184,27243,27206,27251,27262,27362,27364,27606,27711,27740,27782,27759,27866,27908,28039,28015,28054,28076,28111,28152,28146,28156,28217,28252,28199,28220,28351,28552,28597,28661,28677,28679,28712,28805,28843,28943,28932,29020,28998,28999,64021,29121,29182,29361,29374,29476,64022,29559,29629,29641,29654,29667,29650,29703,29685,29734,29738,29737,29742,29794,29833,29855,29953,30063,30338,30364,30366,30363,30374,64023,30534,21167,30753,30798,30820,30842,31024,64024,64025,64026,31124,64027,31131,31441,31463,64028,31467,31646,64029,32072,32092,32183,32160,32214,32338,32583,32673,64030,33537,33634,33663,33735,33782,33864,33972,34131,34137,34155,64031,34224,64032,64033,34823,35061,35346,35383,35449,35495,35518,35551,64034,35574,35667,35711,36080,36084,36114,36214,64035,36559,64036,64037,36967,37086,64038,37141,37159,37338,37335,37342,37357,37358,37348,37349,37382,37392,37386,37434,37440,37436,37454,37465,37457,37433,37479,37543,37495,37496,37607,37591,37593,37584,64039,37589,37600,37587,37669,37665,37627,64040,37662,37631,37661,37634,37744,37719,37796,37830,37854,37880,37937,37957,37960,38290,63964,64041,38557,38575,38707,38715,38723,38733,38735,38737,38741,38999,39013,64042,64043,39207,64044,39326,39502,39641,39644,39797,39794,39823,39857,39867,39936,40304,40299,64045,40473,40657,null,null,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,65506,65508,65287,65282,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569,8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,65506,65508,65287,65282,12849,8470,8481,8757,32394,35100,37704,37512,34012,20425,28859,26161,26824,37625,26363,24389,20008,20193,20220,20224,20227,20281,20310,20370,20362,20378,20372,20429,20544,20514,20479,20510,20550,20592,20546,20628,20724,20696,20810,20836,20893,20926,20972,21013,21148,21158,21184,21211,21248,21255,21284,21362,21395,21426,21469,64014,21660,21642,21673,21759,21894,22361,22373,22444,22472,22471,64015,64016,22686,22706,22795,22867,22875,22877,22883,22948,22970,23382,23488,29999,23512,23532,23582,23718,23738,23797,23847,23891,64017,23874,23917,23992,23993,24016,24353,24372,24423,24503,24542,24669,24709,24714,24798,24789,24864,24818,24849,24887,24880,24984,25107,25254,25589,25696,25757,25806,25934,26112,26133,26171,26121,26158,26142,26148,26213,26199,26201,64018,26227,26265,26272,26290,26303,26362,26382,63785,26470,26555,26706,26560,26625,26692,26831,64019,26984,64020,27032,27106,27184,27243,27206,27251,27262,27362,27364,27606,27711,27740,27782,27759,27866,27908,28039,28015,28054,28076,28111,28152,28146,28156,28217,28252,28199,28220,28351,28552,28597,28661,28677,28679,28712,28805,28843,28943,28932,29020,28998,28999,64021,29121,29182,29361,29374,29476,64022,29559,29629,29641,29654,29667,29650,29703,29685,29734,29738,29737,29742,29794,29833,29855,29953,30063,30338,30364,30366,30363,30374,64023,30534,21167,30753,30798,30820,30842,31024,64024,64025,64026,31124,64027,31131,31441,31463,64028,31467,31646,64029,32072,32092,32183,32160,32214,32338,32583,32673,64030,33537,33634,33663,33735,33782,33864,33972,34131,34137,34155,64031,34224,64032,64033,34823,35061,35346,35383,35449,35495,35518,35551,64034,35574,35667,35711,36080,36084,36114,36214,64035,36559,64036,64037,36967,37086,64038,37141,37159,37338,37335,37342,37357,37358,37348,37349,37382,37392,37386,37434,37440,37436,37454,37465,37457,37433,37479,37543,37495,37496,37607,37591,37593,37584,64039,37589,37600,37587,37669,37665,37627,64040,37662,37631,37661,37634,37744,37719,37796,37830,37854,37880,37937,37957,37960,38290,63964,64041,38557,38575,38707,38715,38723,38733,38735,38737,38741,38999,39013,64042,64043,39207,64044,39326,39502,39641,39644,39797,39794,39823,39857,39867,39936,40304,40299,64045,40473,40657,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],jis0212:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,728,711,184,729,733,175,731,730,65374,900,901,null,null,null,null,null,null,null,null,161,166,191,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,186,170,169,174,8482,164,8470,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,902,904,905,906,938,null,908,null,910,939,null,911,null,null,null,null,940,941,942,943,970,912,972,962,973,971,944,974,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1038,1039,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1118,1119,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,198,272,null,294,null,306,null,321,319,null,330,216,338,null,358,222,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,230,273,240,295,305,307,312,322,320,329,331,248,339,223,359,254,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,193,192,196,194,258,461,256,260,197,195,262,264,268,199,266,270,201,200,203,202,282,278,274,280,null,284,286,290,288,292,205,204,207,206,463,304,298,302,296,308,310,313,317,315,323,327,325,209,211,210,214,212,465,336,332,213,340,344,342,346,348,352,350,356,354,218,217,220,219,364,467,368,362,370,366,360,471,475,473,469,372,221,376,374,377,381,379,null,null,null,null,null,null,null,225,224,228,226,259,462,257,261,229,227,263,265,269,231,267,271,233,232,235,234,283,279,275,281,501,285,287,null,289,293,237,236,239,238,464,null,299,303,297,309,311,314,318,316,324,328,326,241,243,242,246,244,466,337,333,245,341,345,343,347,349,353,351,357,355,250,249,252,251,365,468,369,363,371,367,361,472,476,474,470,373,253,255,375,378,382,380,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,19970,19972,19973,19980,19986,19999,20003,20004,20008,20011,20014,20015,20016,20021,20032,20033,20036,20039,20049,20058,20060,20067,20072,20073,20084,20085,20089,20095,20109,20118,20119,20125,20143,20153,20163,20176,20186,20187,20192,20193,20194,20200,20207,20209,20211,20213,20221,20222,20223,20224,20226,20227,20232,20235,20236,20242,20245,20246,20247,20249,20270,20273,20320,20275,20277,20279,20281,20283,20286,20288,20290,20296,20297,20299,20300,20306,20308,20310,20312,20319,20323,20330,20332,20334,20337,20343,20344,20345,20346,20349,20350,20353,20354,20356,20357,20361,20362,20364,20366,20368,20370,20371,20372,20375,20377,20378,20382,20383,20402,20407,20409,20411,20412,20413,20414,20416,20417,20421,20422,20424,20425,20427,20428,20429,20431,20434,20444,20448,20450,20464,20466,20476,20477,20479,20480,20481,20484,20487,20490,20492,20494,20496,20499,20503,20504,20507,20508,20509,20510,20514,20519,20526,20528,20530,20531,20533,20544,20545,20546,20549,20550,20554,20556,20558,20561,20562,20563,20567,20569,20575,20576,20578,20579,20582,20583,20586,20589,20592,20593,20539,20609,20611,20612,20614,20618,20622,20623,20624,20626,20627,20628,20630,20635,20636,20638,20639,20640,20641,20642,20650,20655,20656,20665,20666,20669,20672,20675,20676,20679,20684,20686,20688,20691,20692,20696,20700,20701,20703,20706,20708,20710,20712,20713,20719,20721,20726,20730,20734,20739,20742,20743,20744,20747,20748,20749,20750,20722,20752,20759,20761,20763,20764,20765,20766,20771,20775,20776,20780,20781,20783,20785,20787,20788,20789,20792,20793,20802,20810,20815,20819,20821,20823,20824,20831,20836,20838,20862,20867,20868,20875,20878,20888,20893,20897,20899,20909,20920,20922,20924,20926,20927,20930,20936,20943,20945,20946,20947,20949,20952,20958,20962,20965,20974,20978,20979,20980,20983,20993,20994,20997,21010,21011,21013,21014,21016,21026,21032,21041,21042,21045,21052,21061,21065,21077,21079,21080,21082,21084,21087,21088,21089,21094,21102,21111,21112,21113,21120,21122,21125,21130,21132,21139,21141,21142,21143,21144,21146,21148,21156,21157,21158,21159,21167,21168,21174,21175,21176,21178,21179,21181,21184,21188,21190,21192,21196,21199,21201,21204,21206,21211,21212,21217,21221,21224,21225,21226,21228,21232,21233,21236,21238,21239,21248,21251,21258,21259,21260,21265,21267,21272,21275,21276,21278,21279,21285,21287,21288,21289,21291,21292,21293,21296,21298,21301,21308,21309,21310,21314,21324,21323,21337,21339,21345,21347,21349,21356,21357,21362,21369,21374,21379,21383,21384,21390,21395,21396,21401,21405,21409,21412,21418,21419,21423,21426,21428,21429,21431,21432,21434,21437,21440,21445,21455,21458,21459,21461,21466,21469,21470,21472,21478,21479,21493,21506,21523,21530,21537,21543,21544,21546,21551,21553,21556,21557,21571,21572,21575,21581,21583,21598,21602,21604,21606,21607,21609,21611,21613,21614,21620,21631,21633,21635,21637,21640,21641,21645,21649,21653,21654,21660,21663,21665,21670,21671,21673,21674,21677,21678,21681,21687,21689,21690,21691,21695,21702,21706,21709,21710,21728,21738,21740,21743,21750,21756,21758,21759,21760,21761,21765,21768,21769,21772,21773,21774,21781,21802,21803,21810,21813,21814,21819,21820,21821,21825,21831,21833,21834,21837,21840,21841,21848,21850,21851,21854,21856,21857,21860,21862,21887,21889,21890,21894,21896,21902,21903,21905,21906,21907,21908,21911,21923,21924,21933,21938,21951,21953,21955,21958,21961,21963,21964,21966,21969,21970,21971,21975,21976,21979,21982,21986,21993,22006,22015,22021,22024,22026,22029,22030,22031,22032,22033,22034,22041,22060,22064,22067,22069,22071,22073,22075,22076,22077,22079,22080,22081,22083,22084,22086,22089,22091,22093,22095,22100,22110,22112,22113,22114,22115,22118,22121,22125,22127,22129,22130,22133,22148,22149,22152,22155,22156,22165,22169,22170,22173,22174,22175,22182,22183,22184,22185,22187,22188,22189,22193,22195,22199,22206,22213,22217,22218,22219,22223,22224,22220,22221,22233,22236,22237,22239,22241,22244,22245,22246,22247,22248,22257,22251,22253,22262,22263,22273,22274,22279,22282,22284,22289,22293,22298,22299,22301,22304,22306,22307,22308,22309,22313,22314,22316,22318,22319,22323,22324,22333,22334,22335,22341,22342,22348,22349,22354,22370,22373,22375,22376,22379,22381,22382,22383,22384,22385,22387,22388,22389,22391,22393,22394,22395,22396,22398,22401,22403,22412,22420,22423,22425,22426,22428,22429,22430,22431,22433,22421,22439,22440,22441,22444,22456,22461,22471,22472,22476,22479,22485,22493,22494,22500,22502,22503,22505,22509,22512,22517,22518,22520,22525,22526,22527,22531,22532,22536,22537,22497,22540,22541,22555,22558,22559,22560,22566,22567,22573,22578,22585,22591,22601,22604,22605,22607,22608,22613,22623,22625,22628,22631,22632,22648,22652,22655,22656,22657,22663,22664,22665,22666,22668,22669,22671,22672,22676,22678,22685,22688,22689,22690,22694,22697,22705,22706,22724,22716,22722,22728,22733,22734,22736,22738,22740,22742,22746,22749,22753,22754,22761,22771,22789,22790,22795,22796,22802,22803,22804,34369,22813,22817,22819,22820,22824,22831,22832,22835,22837,22838,22847,22851,22854,22866,22867,22873,22875,22877,22878,22879,22881,22883,22891,22893,22895,22898,22901,22902,22905,22907,22908,22923,22924,22926,22930,22933,22935,22943,22948,22951,22957,22958,22959,22960,22963,22967,22970,22972,22977,22979,22980,22984,22986,22989,22994,23005,23006,23007,23011,23012,23015,23022,23023,23025,23026,23028,23031,23040,23044,23052,23053,23054,23058,23059,23070,23075,23076,23079,23080,23082,23085,23088,23108,23109,23111,23112,23116,23120,23125,23134,23139,23141,23143,23149,23159,23162,23163,23166,23179,23184,23187,23190,23193,23196,23198,23199,23200,23202,23207,23212,23217,23218,23219,23221,23224,23226,23227,23231,23236,23238,23240,23247,23258,23260,23264,23269,23274,23278,23285,23286,23293,23296,23297,23304,23319,23348,23321,23323,23325,23329,23333,23341,23352,23361,23371,23372,23378,23382,23390,23400,23406,23407,23420,23421,23422,23423,23425,23428,23430,23434,23438,23440,23441,23443,23444,23446,23464,23465,23468,23469,23471,23473,23474,23479,23482,23484,23488,23489,23501,23503,23510,23511,23512,23513,23514,23520,23535,23537,23540,23549,23564,23575,23582,23583,23587,23590,23593,23595,23596,23598,23600,23602,23605,23606,23641,23642,23644,23650,23651,23655,23656,23657,23661,23664,23668,23669,23674,23675,23676,23677,23687,23688,23690,23695,23698,23709,23711,23712,23714,23715,23718,23722,23730,23732,23733,23738,23753,23755,23762,23773,23767,23790,23793,23794,23796,23809,23814,23821,23826,23851,23843,23844,23846,23847,23857,23860,23865,23869,23871,23874,23875,23878,23880,23893,23889,23897,23882,23903,23904,23905,23906,23908,23914,23917,23920,23929,23930,23934,23935,23937,23939,23944,23946,23954,23955,23956,23957,23961,23963,23967,23968,23975,23979,23984,23988,23992,23993,24003,24007,24011,24016,24014,24024,24025,24032,24036,24041,24056,24057,24064,24071,24077,24082,24084,24085,24088,24095,24096,24110,24104,24114,24117,24126,24139,24144,24137,24145,24150,24152,24155,24156,24158,24168,24170,24171,24172,24173,24174,24176,24192,24203,24206,24226,24228,24229,24232,24234,24236,24241,24243,24253,24254,24255,24262,24268,24267,24270,24273,24274,24276,24277,24284,24286,24293,24299,24322,24326,24327,24328,24334,24345,24348,24349,24353,24354,24355,24356,24360,24363,24364,24366,24368,24372,24374,24379,24381,24383,24384,24388,24389,24391,24397,24400,24404,24408,24411,24416,24419,24420,24423,24431,24434,24436,24437,24440,24442,24445,24446,24457,24461,24463,24470,24476,24477,24482,24487,24491,24484,24492,24495,24496,24497,24504,24516,24519,24520,24521,24523,24528,24529,24530,24531,24532,24542,24545,24546,24552,24553,24554,24556,24557,24558,24559,24562,24563,24566,24570,24572,24583,24586,24589,24595,24596,24599,24600,24602,24607,24612,24621,24627,24629,24640,24647,24648,24649,24652,24657,24660,24662,24663,24669,24673,24679,24689,24702,24703,24706,24710,24712,24714,24718,24721,24723,24725,24728,24733,24734,24738,24740,24741,24744,24752,24753,24759,24763,24766,24770,24772,24776,24777,24778,24779,24782,24783,24788,24789,24793,24795,24797,24798,24802,24805,24818,24821,24824,24828,24829,24834,24839,24842,24844,24848,24849,24850,24851,24852,24854,24855,24857,24860,24862,24866,24874,24875,24880,24881,24885,24886,24887,24889,24897,24901,24902,24905,24926,24928,24940,24946,24952,24955,24956,24959,24960,24961,24963,24964,24971,24973,24978,24979,24983,24984,24988,24989,24991,24992,24997,25000,25002,25005,25016,25017,25020,25024,25025,25026,25038,25039,25045,25052,25053,25054,25055,25057,25058,25063,25065,25061,25068,25069,25071,25089,25091,25092,25095,25107,25109,25116,25120,25122,25123,25127,25129,25131,25145,25149,25154,25155,25156,25158,25164,25168,25169,25170,25172,25174,25178,25180,25188,25197,25199,25203,25210,25213,25229,25230,25231,25232,25254,25256,25267,25270,25271,25274,25278,25279,25284,25294,25301,25302,25306,25322,25330,25332,25340,25341,25347,25348,25354,25355,25357,25360,25363,25366,25368,25385,25386,25389,25397,25398,25401,25404,25409,25410,25411,25412,25414,25418,25419,25422,25426,25427,25428,25432,25435,25445,25446,25452,25453,25457,25460,25461,25464,25468,25469,25471,25474,25476,25479,25482,25488,25492,25493,25497,25498,25502,25508,25510,25517,25518,25519,25533,25537,25541,25544,25550,25553,25555,25556,25557,25564,25568,25573,25578,25580,25586,25587,25589,25592,25593,25609,25610,25616,25618,25620,25624,25630,25632,25634,25636,25637,25641,25642,25647,25648,25653,25661,25663,25675,25679,25681,25682,25683,25684,25690,25691,25692,25693,25695,25696,25697,25699,25709,25715,25716,25723,25725,25733,25735,25743,25744,25745,25752,25753,25755,25757,25759,25761,25763,25766,25768,25772,25779,25789,25790,25791,25796,25801,25802,25803,25804,25806,25808,25809,25813,25815,25828,25829,25833,25834,25837,25840,25845,25847,25851,25855,25857,25860,25864,25865,25866,25871,25875,25876,25878,25881,25883,25886,25887,25890,25894,25897,25902,25905,25914,25916,25917,25923,25927,25929,25936,25938,25940,25951,25952,25959,25963,25978,25981,25985,25989,25994,26002,26005,26008,26013,26016,26019,26022,26030,26034,26035,26036,26047,26050,26056,26057,26062,26064,26068,26070,26072,26079,26096,26098,26100,26101,26105,26110,26111,26112,26116,26120,26121,26125,26129,26130,26133,26134,26141,26142,26145,26146,26147,26148,26150,26153,26154,26155,26156,26158,26160,26161,26163,26169,26167,26176,26181,26182,26186,26188,26193,26190,26199,26200,26201,26203,26204,26208,26209,26363,26218,26219,26220,26238,26227,26229,26239,26231,26232,26233,26235,26240,26236,26251,26252,26253,26256,26258,26265,26266,26267,26268,26271,26272,26276,26285,26289,26290,26293,26299,26303,26304,26306,26307,26312,26316,26318,26319,26324,26331,26335,26344,26347,26348,26350,26362,26373,26375,26382,26387,26393,26396,26400,26402,26419,26430,26437,26439,26440,26444,26452,26453,26461,26470,26476,26478,26484,26486,26491,26497,26500,26510,26511,26513,26515,26518,26520,26521,26523,26544,26545,26546,26549,26555,26556,26557,26617,26560,26562,26563,26565,26568,26569,26578,26583,26585,26588,26593,26598,26608,26610,26614,26615,26706,26644,26649,26653,26655,26664,26663,26668,26669,26671,26672,26673,26675,26683,26687,26692,26693,26698,26700,26709,26711,26712,26715,26731,26734,26735,26736,26737,26738,26741,26745,26746,26747,26748,26754,26756,26758,26760,26774,26776,26778,26780,26785,26787,26789,26793,26794,26798,26802,26811,26821,26824,26828,26831,26832,26833,26835,26838,26841,26844,26845,26853,26856,26858,26859,26860,26861,26864,26865,26869,26870,26875,26876,26877,26886,26889,26890,26896,26897,26899,26902,26903,26929,26931,26933,26936,26939,26946,26949,26953,26958,26967,26971,26979,26980,26981,26982,26984,26985,26988,26992,26993,26994,27002,27003,27007,27008,27021,27026,27030,27032,27041,27045,27046,27048,27051,27053,27055,27063,27064,27066,27068,27077,27080,27089,27094,27095,27106,27109,27118,27119,27121,27123,27125,27134,27136,27137,27139,27151,27153,27157,27162,27165,27168,27172,27176,27184,27186,27188,27191,27195,27198,27199,27205,27206,27209,27210,27214,27216,27217,27218,27221,27222,27227,27236,27239,27242,27249,27251,27262,27265,27267,27270,27271,27273,27275,27281,27291,27293,27294,27295,27301,27307,27311,27312,27313,27316,27325,27326,27327,27334,27337,27336,27340,27344,27348,27349,27350,27356,27357,27364,27367,27372,27376,27377,27378,27388,27389,27394,27395,27398,27399,27401,27407,27408,27409,27415,27419,27422,27428,27432,27435,27436,27439,27445,27446,27451,27455,27462,27466,27469,27474,27478,27480,27485,27488,27495,27499,27502,27504,27509,27517,27518,27522,27525,27543,27547,27551,27552,27554,27555,27560,27561,27564,27565,27566,27568,27576,27577,27581,27582,27587,27588,27593,27596,27606,27610,27617,27619,27622,27623,27630,27633,27639,27641,27647,27650,27652,27653,27657,27661,27662,27664,27666,27673,27679,27686,27687,27688,27692,27694,27699,27701,27702,27706,27707,27711,27722,27723,27725,27727,27730,27732,27737,27739,27740,27755,27757,27759,27764,27766,27768,27769,27771,27781,27782,27783,27785,27796,27797,27799,27800,27804,27807,27824,27826,27828,27842,27846,27853,27855,27856,27857,27858,27860,27862,27866,27868,27872,27879,27881,27883,27884,27886,27890,27892,27908,27911,27914,27918,27919,27921,27923,27930,27942,27943,27944,27751,27950,27951,27953,27961,27964,27967,27991,27998,27999,28001,28005,28007,28015,28016,28028,28034,28039,28049,28050,28052,28054,28055,28056,28074,28076,28084,28087,28089,28093,28095,28100,28104,28106,28110,28111,28118,28123,28125,28127,28128,28130,28133,28137,28143,28144,28148,28150,28156,28160,28164,28190,28194,28199,28210,28214,28217,28219,28220,28228,28229,28232,28233,28235,28239,28241,28242,28243,28244,28247,28252,28253,28254,28258,28259,28264,28275,28283,28285,28301,28307,28313,28320,28327,28333,28334,28337,28339,28347,28351,28352,28353,28355,28359,28360,28362,28365,28366,28367,28395,28397,28398,28409,28411,28413,28420,28424,28426,28428,28429,28438,28440,28442,28443,28454,28457,28458,28463,28464,28467,28470,28475,28476,28461,28495,28497,28498,28499,28503,28505,28506,28509,28510,28513,28514,28520,28524,28541,28542,28547,28551,28552,28555,28556,28557,28560,28562,28563,28564,28566,28570,28575,28576,28581,28582,28583,28584,28590,28591,28592,28597,28598,28604,28613,28615,28616,28618,28634,28638,28648,28649,28656,28661,28665,28668,28669,28672,28677,28678,28679,28685,28695,28704,28707,28719,28724,28727,28729,28732,28739,28740,28744,28745,28746,28747,28756,28757,28765,28766,28750,28772,28773,28780,28782,28789,28790,28798,28801,28805,28806,28820,28821,28822,28823,28824,28827,28836,28843,28848,28849,28852,28855,28874,28881,28883,28884,28885,28886,28888,28892,28900,28922,28931,28932,28933,28934,28935,28939,28940,28943,28958,28960,28971,28973,28975,28976,28977,28984,28993,28997,28998,28999,29002,29003,29008,29010,29015,29018,29020,29022,29024,29032,29049,29056,29061,29063,29068,29074,29082,29083,29088,29090,29103,29104,29106,29107,29114,29119,29120,29121,29124,29131,29132,29139,29142,29145,29146,29148,29176,29182,29184,29191,29192,29193,29203,29207,29210,29213,29215,29220,29227,29231,29236,29240,29241,29249,29250,29251,29253,29262,29263,29264,29267,29269,29270,29274,29276,29278,29280,29283,29288,29291,29294,29295,29297,29303,29304,29307,29308,29311,29316,29321,29325,29326,29331,29339,29352,29357,29358,29361,29364,29374,29377,29383,29385,29388,29397,29398,29400,29407,29413,29427,29428,29434,29435,29438,29442,29444,29445,29447,29451,29453,29458,29459,29464,29465,29470,29474,29476,29479,29480,29484,29489,29490,29493,29498,29499,29501,29507,29517,29520,29522,29526,29528,29533,29534,29535,29536,29542,29543,29545,29547,29548,29550,29551,29553,29559,29561,29564,29568,29569,29571,29573,29574,29582,29584,29587,29589,29591,29592,29596,29598,29599,29600,29602,29605,29606,29610,29611,29613,29621,29623,29625,29628,29629,29631,29637,29638,29641,29643,29644,29647,29650,29651,29654,29657,29661,29665,29667,29670,29671,29673,29684,29685,29687,29689,29690,29691,29693,29695,29696,29697,29700,29703,29706,29713,29722,29723,29732,29734,29736,29737,29738,29739,29740,29741,29742,29743,29744,29745,29753,29760,29763,29764,29766,29767,29771,29773,29777,29778,29783,29789,29794,29798,29799,29800,29803,29805,29806,29809,29810,29824,29825,29829,29830,29831,29833,29839,29840,29841,29842,29848,29849,29850,29852,29855,29856,29857,29859,29862,29864,29865,29866,29867,29870,29871,29873,29874,29877,29881,29883,29887,29896,29897,29900,29904,29907,29912,29914,29915,29918,29919,29924,29928,29930,29931,29935,29940,29946,29947,29948,29951,29958,29970,29974,29975,29984,29985,29988,29991,29993,29994,29999,30006,30009,30013,30014,30015,30016,30019,30023,30024,30030,30032,30034,30039,30046,30047,30049,30063,30065,30073,30074,30075,30076,30077,30078,30081,30085,30096,30098,30099,30101,30105,30108,30114,30116,30132,30138,30143,30144,30145,30148,30150,30156,30158,30159,30167,30172,30175,30176,30177,30180,30183,30188,30190,30191,30193,30201,30208,30210,30211,30212,30215,30216,30218,30220,30223,30226,30227,30229,30230,30233,30235,30236,30237,30238,30243,30245,30246,30249,30253,30258,30259,30261,30264,30265,30266,30268,30282,30272,30273,30275,30276,30277,30281,30283,30293,30297,30303,30308,30309,30317,30318,30319,30321,30324,30337,30341,30348,30349,30357,30363,30364,30365,30367,30368,30370,30371,30372,30373,30374,30375,30376,30378,30381,30397,30401,30405,30409,30411,30412,30414,30420,30425,30432,30438,30440,30444,30448,30449,30454,30457,30460,30464,30470,30474,30478,30482,30484,30485,30487,30489,30490,30492,30498,30504,30509,30510,30511,30516,30517,30518,30521,30525,30526,30530,30533,30534,30538,30541,30542,30543,30546,30550,30551,30556,30558,30559,30560,30562,30564,30567,30570,30572,30576,30578,30579,30580,30586,30589,30592,30596,30604,30605,30612,30613,30614,30618,30623,30626,30631,30634,30638,30639,30641,30645,30654,30659,30665,30673,30674,30677,30681,30686,30687,30688,30692,30694,30698,30700,30704,30705,30708,30712,30715,30725,30726,30729,30733,30734,30737,30749,30753,30754,30755,30765,30766,30768,30773,30775,30787,30788,30791,30792,30796,30798,30802,30812,30814,30816,30817,30819,30820,30824,30826,30830,30842,30846,30858,30863,30868,30872,30881,30877,30878,30879,30884,30888,30892,30893,30896,30897,30898,30899,30907,30909,30911,30919,30920,30921,30924,30926,30930,30931,30933,30934,30948,30939,30943,30944,30945,30950,30954,30962,30963,30976,30966,30967,30970,30971,30975,30982,30988,30992,31002,31004,31006,31007,31008,31013,31015,31017,31021,31025,31028,31029,31035,31037,31039,31044,31045,31046,31050,31051,31055,31057,31060,31064,31067,31068,31079,31081,31083,31090,31097,31099,31100,31102,31115,31116,31121,31123,31124,31125,31126,31128,31131,31132,31137,31144,31145,31147,31151,31153,31156,31160,31163,31170,31172,31175,31176,31178,31183,31188,31190,31194,31197,31198,31200,31202,31205,31210,31211,31213,31217,31224,31228,31234,31235,31239,31241,31242,31244,31249,31253,31259,31262,31265,31271,31275,31277,31279,31280,31284,31285,31288,31289,31290,31300,31301,31303,31304,31308,31317,31318,31321,31324,31325,31327,31328,31333,31335,31338,31341,31349,31352,31358,31360,31362,31365,31366,31370,31371,31376,31377,31380,31390,31392,31395,31404,31411,31413,31417,31419,31420,31430,31433,31436,31438,31441,31451,31464,31465,31467,31468,31473,31476,31483,31485,31486,31495,31508,31519,31523,31527,31529,31530,31531,31533,31534,31535,31536,31537,31540,31549,31551,31552,31553,31559,31566,31573,31584,31588,31590,31593,31594,31597,31599,31602,31603,31607,31620,31625,31630,31632,31633,31638,31643,31646,31648,31653,31660,31663,31664,31666,31669,31670,31674,31675,31676,31677,31682,31685,31688,31690,31700,31702,31703,31705,31706,31707,31720,31722,31730,31732,31733,31736,31737,31738,31740,31742,31745,31746,31747,31748,31750,31753,31755,31756,31758,31759,31769,31771,31776,31781,31782,31784,31788,31793,31795,31796,31798,31801,31802,31814,31818,31829,31825,31826,31827,31833,31834,31835,31836,31837,31838,31841,31843,31847,31849,31853,31854,31856,31858,31865,31868,31869,31878,31879,31887,31892,31902,31904,31910,31920,31926,31927,31930,31931,31932,31935,31940,31943,31944,31945,31949,31951,31955,31956,31957,31959,31961,31962,31965,31974,31977,31979,31989,32003,32007,32008,32009,32015,32017,32018,32019,32022,32029,32030,32035,32038,32042,32045,32049,32060,32061,32062,32064,32065,32071,32072,32077,32081,32083,32087,32089,32090,32092,32093,32101,32103,32106,32112,32120,32122,32123,32127,32129,32130,32131,32133,32134,32136,32139,32140,32141,32145,32150,32151,32157,32158,32166,32167,32170,32179,32182,32183,32185,32194,32195,32196,32197,32198,32204,32205,32206,32215,32217,32256,32226,32229,32230,32234,32235,32237,32241,32245,32246,32249,32250,32264,32272,32273,32277,32279,32284,32285,32288,32295,32296,32300,32301,32303,32307,32310,32319,32324,32325,32327,32334,32336,32338,32344,32351,32353,32354,32357,32363,32366,32367,32371,32376,32382,32385,32390,32391,32394,32397,32401,32405,32408,32410,32413,32414,32572,32571,32573,32574,32575,32579,32580,32583,32591,32594,32595,32603,32604,32605,32609,32611,32612,32613,32614,32621,32625,32637,32638,32639,32640,32651,32653,32655,32656,32657,32662,32663,32668,32673,32674,32678,32682,32685,32692,32700,32703,32704,32707,32712,32718,32719,32731,32735,32739,32741,32744,32748,32750,32751,32754,32762,32765,32766,32767,32775,32776,32778,32781,32782,32783,32785,32787,32788,32790,32797,32798,32799,32800,32804,32806,32812,32814,32816,32820,32821,32823,32825,32826,32828,32830,32832,32836,32864,32868,32870,32877,32881,32885,32897,32904,32910,32924,32926,32934,32935,32939,32952,32953,32968,32973,32975,32978,32980,32981,32983,32984,32992,33005,33006,33008,33010,33011,33014,33017,33018,33022,33027,33035,33046,33047,33048,33052,33054,33056,33060,33063,33068,33072,33077,33082,33084,33093,33095,33098,33100,33106,33111,33120,33121,33127,33128,33129,33133,33135,33143,33153,33168,33156,33157,33158,33163,33166,33174,33176,33179,33182,33186,33198,33202,33204,33211,33227,33219,33221,33226,33230,33231,33237,33239,33243,33245,33246,33249,33252,33259,33260,33264,33265,33266,33269,33270,33272,33273,33277,33279,33280,33283,33295,33299,33300,33305,33306,33309,33313,33314,33320,33330,33332,33338,33347,33348,33349,33350,33355,33358,33359,33361,33366,33372,33376,33379,33383,33389,33396,33403,33405,33407,33408,33409,33411,33412,33415,33417,33418,33422,33425,33428,33430,33432,33434,33435,33440,33441,33443,33444,33447,33448,33449,33450,33454,33456,33458,33460,33463,33466,33468,33470,33471,33478,33488,33493,33498,33504,33506,33508,33512,33514,33517,33519,33526,33527,33533,33534,33536,33537,33543,33544,33546,33547,33620,33563,33565,33566,33567,33569,33570,33580,33581,33582,33584,33587,33591,33594,33596,33597,33602,33603,33604,33607,33613,33614,33617,33621,33622,33623,33648,33656,33661,33663,33664,33666,33668,33670,33677,33682,33684,33685,33688,33689,33691,33692,33693,33702,33703,33705,33708,33726,33727,33728,33735,33737,33743,33744,33745,33748,33757,33619,33768,33770,33782,33784,33785,33788,33793,33798,33802,33807,33809,33813,33817,33709,33839,33849,33861,33863,33864,33866,33869,33871,33873,33874,33878,33880,33881,33882,33884,33888,33892,33893,33895,33898,33904,33907,33908,33910,33912,33916,33917,33921,33925,33938,33939,33941,33950,33958,33960,33961,33962,33967,33969,33972,33978,33981,33982,33984,33986,33991,33992,33996,33999,34003,34012,34023,34026,34031,34032,34033,34034,34039,34098,34042,34043,34045,34050,34051,34055,34060,34062,34064,34076,34078,34082,34083,34084,34085,34087,34090,34091,34095,34099,34100,34102,34111,34118,34127,34128,34129,34130,34131,34134,34137,34140,34141,34142,34143,34144,34145,34146,34148,34155,34159,34169,34170,34171,34173,34175,34177,34181,34182,34185,34187,34188,34191,34195,34200,34205,34207,34208,34210,34213,34215,34228,34230,34231,34232,34236,34237,34238,34239,34242,34247,34250,34251,34254,34221,34264,34266,34271,34272,34278,34280,34285,34291,34294,34300,34303,34304,34308,34309,34317,34318,34320,34321,34322,34328,34329,34331,34334,34337,34343,34345,34358,34360,34362,34364,34365,34368,34370,34374,34386,34387,34390,34391,34392,34393,34397,34400,34401,34402,34403,34404,34409,34412,34415,34421,34422,34423,34426,34445,34449,34454,34456,34458,34460,34465,34470,34471,34472,34477,34481,34483,34484,34485,34487,34488,34489,34495,34496,34497,34499,34501,34513,34514,34517,34519,34522,34524,34528,34531,34533,34535,34440,34554,34556,34557,34564,34565,34567,34571,34574,34575,34576,34579,34580,34585,34590,34591,34593,34595,34600,34606,34607,34609,34610,34617,34618,34620,34621,34622,34624,34627,34629,34637,34648,34653,34657,34660,34661,34671,34673,34674,34683,34691,34692,34693,34694,34695,34696,34697,34699,34700,34704,34707,34709,34711,34712,34713,34718,34720,34723,34727,34732,34733,34734,34737,34741,34750,34751,34753,34760,34761,34762,34766,34773,34774,34777,34778,34780,34783,34786,34787,34788,34794,34795,34797,34801,34803,34808,34810,34815,34817,34819,34822,34825,34826,34827,34832,34841,34834,34835,34836,34840,34842,34843,34844,34846,34847,34856,34861,34862,34864,34866,34869,34874,34876,34881,34883,34885,34888,34889,34890,34891,34894,34897,34901,34902,34904,34906,34908,34911,34912,34916,34921,34929,34937,34939,34944,34968,34970,34971,34972,34975,34976,34984,34986,35002,35005,35006,35008,35018,35019,35020,35021,35022,35025,35026,35027,35035,35038,35047,35055,35056,35057,35061,35063,35073,35078,35085,35086,35087,35093,35094,35096,35097,35098,35100,35104,35110,35111,35112,35120,35121,35122,35125,35129,35130,35134,35136,35138,35141,35142,35145,35151,35154,35159,35162,35163,35164,35169,35170,35171,35179,35182,35184,35187,35189,35194,35195,35196,35197,35209,35213,35216,35220,35221,35227,35228,35231,35232,35237,35248,35252,35253,35254,35255,35260,35284,35285,35286,35287,35288,35301,35305,35307,35309,35313,35315,35318,35321,35325,35327,35332,35333,35335,35343,35345,35346,35348,35349,35358,35360,35362,35364,35366,35371,35372,35375,35381,35383,35389,35390,35392,35395,35397,35399,35401,35405,35406,35411,35414,35415,35416,35420,35421,35425,35429,35431,35445,35446,35447,35449,35450,35451,35454,35455,35456,35459,35462,35467,35471,35472,35474,35478,35479,35481,35487,35495,35497,35502,35503,35507,35510,35511,35515,35518,35523,35526,35528,35529,35530,35537,35539,35540,35541,35543,35549,35551,35564,35568,35572,35573,35574,35580,35583,35589,35590,35595,35601,35612,35614,35615,35594,35629,35632,35639,35644,35650,35651,35652,35653,35654,35656,35666,35667,35668,35673,35661,35678,35683,35693,35702,35704,35705,35708,35710,35713,35716,35717,35723,35725,35727,35732,35733,35740,35742,35743,35896,35897,35901,35902,35909,35911,35913,35915,35919,35921,35923,35924,35927,35928,35931,35933,35929,35939,35940,35942,35944,35945,35949,35955,35957,35958,35963,35966,35974,35975,35979,35984,35986,35987,35993,35995,35996,36004,36025,36026,36037,36038,36041,36043,36047,36054,36053,36057,36061,36065,36072,36076,36079,36080,36082,36085,36087,36088,36094,36095,36097,36099,36105,36114,36119,36123,36197,36201,36204,36206,36223,36226,36228,36232,36237,36240,36241,36245,36254,36255,36256,36262,36267,36268,36271,36274,36277,36279,36281,36283,36288,36293,36294,36295,36296,36298,36302,36305,36308,36309,36311,36313,36324,36325,36327,36332,36336,36284,36337,36338,36340,36349,36353,36356,36357,36358,36363,36369,36372,36374,36384,36385,36386,36387,36390,36391,36401,36403,36406,36407,36408,36409,36413,36416,36417,36427,36429,36430,36431,36436,36443,36444,36445,36446,36449,36450,36457,36460,36461,36463,36464,36465,36473,36474,36475,36482,36483,36489,36496,36498,36501,36506,36507,36509,36510,36514,36519,36521,36525,36526,36531,36533,36538,36539,36544,36545,36547,36548,36551,36559,36561,36564,36572,36584,36590,36592,36593,36599,36601,36602,36589,36608,36610,36615,36616,36623,36624,36630,36631,36632,36638,36640,36641,36643,36645,36647,36648,36652,36653,36654,36660,36661,36662,36663,36666,36672,36673,36675,36679,36687,36689,36690,36691,36692,36693,36696,36701,36702,36709,36765,36768,36769,36772,36773,36774,36789,36790,36792,36798,36800,36801,36806,36810,36811,36813,36816,36818,36819,36821,36832,36835,36836,36840,36846,36849,36853,36854,36859,36862,36866,36868,36872,36876,36888,36891,36904,36905,36911,36906,36908,36909,36915,36916,36919,36927,36931,36932,36940,36955,36957,36962,36966,36967,36972,36976,36980,36985,36997,37000,37003,37004,37006,37008,37013,37015,37016,37017,37019,37024,37025,37026,37029,37040,37042,37043,37044,37046,37053,37068,37054,37059,37060,37061,37063,37064,37077,37079,37080,37081,37084,37085,37087,37093,37074,37110,37099,37103,37104,37108,37118,37119,37120,37124,37125,37126,37128,37133,37136,37140,37142,37143,37144,37146,37148,37150,37152,37157,37154,37155,37159,37161,37166,37167,37169,37172,37174,37175,37177,37178,37180,37181,37187,37191,37192,37199,37203,37207,37209,37210,37211,37217,37220,37223,37229,37236,37241,37242,37243,37249,37251,37253,37254,37258,37262,37265,37267,37268,37269,37272,37278,37281,37286,37288,37292,37293,37294,37296,37297,37298,37299,37302,37307,37308,37309,37311,37314,37315,37317,37331,37332,37335,37337,37338,37342,37348,37349,37353,37354,37356,37357,37358,37359,37360,37361,37367,37369,37371,37373,37376,37377,37380,37381,37382,37383,37385,37386,37388,37392,37394,37395,37398,37400,37404,37405,37411,37412,37413,37414,37416,37422,37423,37424,37427,37429,37430,37432,37433,37434,37436,37438,37440,37442,37443,37446,37447,37450,37453,37454,37455,37457,37464,37465,37468,37469,37472,37473,37477,37479,37480,37481,37486,37487,37488,37493,37494,37495,37496,37497,37499,37500,37501,37503,37512,37513,37514,37517,37518,37522,37527,37529,37535,37536,37540,37541,37543,37544,37547,37551,37554,37558,37560,37562,37563,37564,37565,37567,37568,37569,37570,37571,37573,37574,37575,37576,37579,37580,37581,37582,37584,37587,37589,37591,37592,37593,37596,37597,37599,37600,37601,37603,37605,37607,37608,37612,37614,37616,37625,37627,37631,37632,37634,37640,37645,37649,37652,37653,37660,37661,37662,37663,37665,37668,37669,37671,37673,37674,37683,37684,37686,37687,37703,37704,37705,37712,37713,37714,37717,37719,37720,37722,37726,37732,37733,37735,37737,37738,37741,37743,37744,37745,37747,37748,37750,37754,37757,37759,37760,37761,37762,37768,37770,37771,37773,37775,37778,37781,37784,37787,37790,37793,37795,37796,37798,37800,37803,37812,37813,37814,37818,37801,37825,37828,37829,37830,37831,37833,37834,37835,37836,37837,37843,37849,37852,37854,37855,37858,37862,37863,37881,37879,37880,37882,37883,37885,37889,37890,37892,37896,37897,37901,37902,37903,37909,37910,37911,37919,37934,37935,37937,37938,37939,37940,37947,37951,37949,37955,37957,37960,37962,37964,37973,37977,37980,37983,37985,37987,37992,37995,37997,37998,37999,38001,38002,38020,38019,38264,38265,38270,38276,38280,38284,38285,38286,38301,38302,38303,38305,38310,38313,38315,38316,38324,38326,38330,38333,38335,38342,38344,38345,38347,38352,38353,38354,38355,38361,38362,38365,38366,38367,38368,38372,38374,38429,38430,38434,38436,38437,38438,38444,38449,38451,38455,38456,38457,38458,38460,38461,38465,38482,38484,38486,38487,38488,38497,38510,38516,38523,38524,38526,38527,38529,38530,38531,38532,38537,38545,38550,38554,38557,38559,38564,38565,38566,38569,38574,38575,38579,38586,38602,38610,23986,38616,38618,38621,38622,38623,38633,38639,38641,38650,38658,38659,38661,38665,38682,38683,38685,38689,38690,38691,38696,38705,38707,38721,38723,38730,38734,38735,38741,38743,38744,38746,38747,38755,38759,38762,38766,38771,38774,38775,38776,38779,38781,38783,38784,38793,38805,38806,38807,38809,38810,38814,38815,38818,38828,38830,38833,38834,38837,38838,38840,38841,38842,38844,38846,38847,38849,38852,38853,38855,38857,38858,38860,38861,38862,38864,38865,38868,38871,38872,38873,38877,38878,38880,38875,38881,38884,38895,38897,38900,38903,38904,38906,38919,38922,38937,38925,38926,38932,38934,38940,38942,38944,38947,38950,38955,38958,38959,38960,38962,38963,38965,38949,38974,38980,38983,38986,38993,38994,38995,38998,38999,39001,39002,39010,39011,39013,39014,39018,39020,39083,39085,39086,39088,39092,39095,39096,39098,39099,39103,39106,39109,39112,39116,39137,39139,39141,39142,39143,39146,39155,39158,39170,39175,39176,39185,39189,39190,39191,39194,39195,39196,39199,39202,39206,39207,39211,39217,39218,39219,39220,39221,39225,39226,39227,39228,39232,39233,39238,39239,39240,39245,39246,39252,39256,39257,39259,39260,39262,39263,39264,39323,39325,39327,39334,39344,39345,39346,39349,39353,39354,39357,39359,39363,39369,39379,39380,39385,39386,39388,39390,39399,39402,39403,39404,39408,39412,39413,39417,39421,39422,39426,39427,39428,39435,39436,39440,39441,39446,39454,39456,39458,39459,39460,39463,39469,39470,39475,39477,39478,39480,39495,39489,39492,39498,39499,39500,39502,39505,39508,39510,39517,39594,39596,39598,39599,39602,39604,39605,39606,39609,39611,39614,39615,39617,39619,39622,39624,39630,39632,39634,39637,39638,39639,39643,39644,39648,39652,39653,39655,39657,39660,39666,39667,39669,39673,39674,39677,39679,39680,39681,39682,39683,39684,39685,39688,39689,39691,39692,39693,39694,39696,39698,39702,39705,39707,39708,39712,39718,39723,39725,39731,39732,39733,39735,39737,39738,39741,39752,39755,39756,39765,39766,39767,39771,39774,39777,39779,39781,39782,39784,39786,39787,39788,39789,39790,39795,39797,39799,39800,39801,39807,39808,39812,39813,39814,39815,39817,39818,39819,39821,39823,39824,39828,39834,39837,39838,39846,39847,39849,39852,39856,39857,39858,39863,39864,39867,39868,39870,39871,39873,39879,39880,39886,39888,39895,39896,39901,39903,39909,39911,39914,39915,39919,39923,39927,39928,39929,39930,39933,39935,39936,39938,39947,39951,39953,39958,39960,39961,39962,39964,39966,39970,39971,39974,39975,39976,39977,39978,39985,39989,39990,39991,39997,40001,40003,40004,40005,40009,40010,40014,40015,40016,40019,40020,40022,40024,40027,40029,40030,40031,40035,40041,40042,40028,40043,40040,40046,40048,40050,40053,40055,40059,40166,40178,40183,40185,40203,40194,40209,40215,40216,40220,40221,40222,40239,40240,40242,40243,40244,40250,40252,40261,40253,40258,40259,40263,40266,40275,40276,40287,40291,40290,40293,40297,40298,40299,40304,40310,40311,40315,40316,40318,40323,40324,40326,40330,40333,40334,40338,40339,40341,40342,40343,40344,40353,40362,40364,40366,40369,40373,40377,40380,40383,40387,40391,40393,40394,40404,40405,40406,40407,40410,40414,40415,40416,40421,40423,40425,40427,40430,40432,40435,40436,40446,40458,40450,40455,40462,40464,40465,40466,40469,40470,40473,40476,40477,40570,40571,40572,40576,40578,40579,40580,40581,40583,40590,40591,40598,40600,40603,40606,40612,40616,40620,40622,40623,40624,40627,40628,40629,40646,40648,40651,40661,40671,40676,40679,40684,40685,40686,40688,40689,40690,40693,40696,40703,40706,40707,40713,40719,40720,40721,40722,40724,40726,40727,40729,40730,40731,40735,40738,40742,40746,40747,40751,40753,40754,40756,40759,40761,40762,40764,40765,40767,40769,40771,40772,40773,40774,40775,40787,40789,40790,40791,40792,40794,40797,40798,40808,40809,40813,40814,40815,40816,40817,40819,40821,40826,40829,40847,40848,40849,40850,40852,40854,40855,40862,40865,40866,40867,40869,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],ibm866:[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488,9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575,9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1025,1105,1028,1108,1031,1111,1038,1118,176,8729,183,8730,8470,164,9632,160],"iso-8859-2":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,728,321,164,317,346,167,168,352,350,356,377,173,381,379,176,261,731,322,180,318,347,711,184,353,351,357,378,733,382,380,340,193,194,258,196,313,262,199,268,201,280,203,282,205,206,270,272,323,327,211,212,336,214,215,344,366,218,368,220,221,354,223,341,225,226,259,228,314,263,231,269,233,281,235,283,237,238,271,273,324,328,243,244,337,246,247,345,367,250,369,252,253,355,729],"iso-8859-3":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,294,728,163,164,null,292,167,168,304,350,286,308,173,null,379,176,295,178,179,180,181,293,183,184,305,351,287,309,189,null,380,192,193,194,null,196,266,264,199,200,201,202,203,204,205,206,207,null,209,210,211,212,288,214,215,284,217,218,219,220,364,348,223,224,225,226,null,228,267,265,231,232,233,234,235,236,237,238,239,null,241,242,243,244,289,246,247,285,249,250,251,252,365,349,729],"iso-8859-4":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,312,342,164,296,315,167,168,352,274,290,358,173,381,175,176,261,731,343,180,297,316,711,184,353,275,291,359,330,382,331,256,193,194,195,196,197,198,302,268,201,280,203,278,205,206,298,272,325,332,310,212,213,214,215,216,370,218,219,220,360,362,223,257,225,226,227,228,229,230,303,269,233,281,235,279,237,238,299,273,326,333,311,244,245,246,247,248,371,250,251,252,361,363,729],"iso-8859-5":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,173,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,8470,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,167,1118,1119],"iso-8859-6":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,null,null,null,164,null,null,null,null,null,null,null,1548,173,null,null,null,null,null,null,null,null,null,null,null,null,null,1563,null,null,null,1567,null,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,null,null,null,null,null,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1611,1612,1613,1614,1615,1616,1617,1618,null,null,null,null,null,null,null,null,null,null,null,null,null],"iso-8859-7":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,8216,8217,163,8364,8367,166,167,168,169,890,171,172,173,null,8213,176,177,178,179,900,901,902,183,904,905,906,187,908,189,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,null,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,null],"iso-8859-8":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,null,162,163,164,165,166,167,168,169,215,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,247,187,188,189,190,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,8215,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,null,null,8206,8207,null],"iso-8859-10":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,274,290,298,296,310,167,315,272,352,358,381,173,362,330,176,261,275,291,299,297,311,183,316,273,353,359,382,8213,363,331,256,193,194,195,196,197,198,302,268,201,280,203,278,205,206,207,208,325,332,211,212,213,214,360,216,370,218,219,220,221,222,223,257,225,226,227,228,229,230,303,269,233,281,235,279,237,238,239,240,326,333,243,244,245,246,361,248,371,250,251,252,253,254,312],"iso-8859-13":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,8221,162,163,164,8222,166,167,216,169,342,171,172,173,174,198,176,177,178,179,8220,181,182,183,248,185,343,187,188,189,190,230,260,302,256,262,196,197,280,274,268,201,377,278,290,310,298,315,352,323,325,211,332,213,214,215,370,321,346,362,220,379,381,223,261,303,257,263,228,229,281,275,269,233,378,279,291,311,299,316,353,324,326,243,333,245,246,247,371,322,347,363,252,380,382,8217],"iso-8859-14":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,7682,7683,163,266,267,7690,167,7808,169,7810,7691,7922,173,174,376,7710,7711,288,289,7744,7745,182,7766,7809,7767,7811,7776,7923,7812,7813,7777,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,372,209,210,211,212,213,214,7786,216,217,218,219,220,221,374,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,373,241,242,243,244,245,246,7787,248,249,250,251,252,253,375,255],"iso-8859-15":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,8364,165,352,167,353,169,170,171,172,173,174,175,176,177,178,179,381,181,182,183,382,185,186,187,338,339,376,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],"iso-8859-16":[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,260,261,321,8364,8222,352,167,353,169,536,171,377,173,378,379,176,177,268,322,381,8221,182,183,382,269,537,187,338,339,376,380,192,193,194,258,196,262,198,199,200,201,202,203,204,205,206,207,272,323,210,211,212,336,214,346,368,217,218,219,220,280,538,223,224,225,226,259,228,263,230,231,232,233,234,235,236,237,238,239,273,324,242,243,244,337,246,347,369,249,250,251,252,281,539,255],"koi8-r":[9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9600,9604,9608,9612,9616,9617,9618,9619,8992,9632,8729,8730,8776,8804,8805,160,8993,176,178,183,247,9552,9553,9554,1105,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,1025,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,169,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,1066],"koi8-u":[9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9600,9604,9608,9612,9616,9617,9618,9619,8992,9632,8729,8730,8776,8804,8805,160,8993,176,178,183,247,9552,9553,9554,1105,1108,9556,1110,1111,9559,9560,9561,9562,9563,1169,1118,9566,9567,9568,9569,1025,1028,9571,1030,1031,9574,9575,9576,9577,9578,1168,1038,169,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,1066],macintosh:[196,197,199,201,209,214,220,225,224,226,228,227,229,231,233,232,234,235,237,236,238,239,241,243,242,244,246,245,250,249,251,252,8224,176,162,163,167,8226,182,223,174,169,8482,180,168,8800,198,216,8734,177,8804,8805,165,181,8706,8721,8719,960,8747,170,186,937,230,248,191,161,172,8730,402,8776,8710,171,187,8230,160,192,195,213,338,339,8211,8212,8220,8221,8216,8217,247,9674,255,376,8260,8364,8249,8250,64257,64258,8225,183,8218,8222,8240,194,202,193,203,200,205,206,207,204,211,212,63743,210,218,219,217,305,710,732,175,728,729,730,184,733,731,711],"windows-874":[8364,129,130,131,132,8230,134,135,136,137,138,139,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,152,153,154,155,156,157,158,159,160,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,null,null,null,null,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,null,null,null,null],"windows-1250":[8364,129,8218,131,8222,8230,8224,8225,136,8240,352,8249,346,356,381,377,144,8216,8217,8220,8221,8226,8211,8212,152,8482,353,8250,347,357,382,378,160,711,728,321,164,260,166,167,168,169,350,171,172,173,174,379,176,177,731,322,180,181,182,183,184,261,351,187,317,733,318,380,340,193,194,258,196,313,262,199,268,201,280,203,282,205,206,270,272,323,327,211,212,336,214,215,344,366,218,368,220,221,354,223,341,225,226,259,228,314,263,231,269,233,281,235,283,237,238,271,273,324,328,243,244,337,246,247,345,367,250,369,252,253,355,729],"windows-1251":[1026,1027,8218,1107,8222,8230,8224,8225,8364,8240,1033,8249,1034,1036,1035,1039,1106,8216,8217,8220,8221,8226,8211,8212,152,8482,1113,8250,1114,1116,1115,1119,160,1038,1118,1032,164,1168,166,167,1025,169,1028,171,172,173,174,1031,176,177,1030,1110,1169,181,182,183,1105,8470,1108,187,1112,1029,1109,1111,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],"windows-1252":[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],"windows-1253":[8364,129,8218,402,8222,8230,8224,8225,136,8240,138,8249,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,152,8482,154,8250,156,157,158,159,160,901,902,163,164,165,166,167,168,169,null,171,172,173,174,8213,176,177,178,179,900,181,182,183,904,905,906,187,908,189,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,null,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,null],"windows-1254":[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,158,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,286,209,210,211,212,213,214,215,216,217,218,219,220,304,350,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,287,241,242,243,244,245,246,247,248,249,250,251,252,305,351,255],"windows-1255":[8364,129,8218,402,8222,8230,8224,8225,710,8240,138,8249,140,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,154,8250,156,157,158,159,160,161,162,163,8362,165,166,167,168,169,215,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,247,187,188,189,190,191,1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,null,1467,1468,1469,1470,1471,1472,1473,1474,1475,1520,1521,1522,1523,1524,null,null,null,null,null,null,null,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,null,null,8206,8207,null],"windows-1256":[8364,1662,8218,402,8222,8230,8224,8225,710,8240,1657,8249,338,1670,1688,1672,1711,8216,8217,8220,8221,8226,8211,8212,1705,8482,1681,8250,339,8204,8205,1722,160,1548,162,163,164,165,166,167,168,169,1726,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,1563,187,188,189,190,1567,1729,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,215,1591,1592,1593,1594,1600,1601,1602,1603,224,1604,226,1605,1606,1607,1608,231,232,233,234,235,1609,1610,238,239,1611,1612,1613,1614,244,1615,1616,247,1617,249,1618,251,252,8206,8207,1746],"windows-1257":[8364,129,8218,131,8222,8230,8224,8225,136,8240,138,8249,140,168,711,184,144,8216,8217,8220,8221,8226,8211,8212,152,8482,154,8250,156,175,731,159,160,null,162,163,164,null,166,167,216,169,342,171,172,173,174,198,176,177,178,179,180,181,182,183,248,185,343,187,188,189,190,230,260,302,256,262,196,197,280,274,268,201,377,278,290,310,298,315,352,323,325,211,332,213,214,215,370,321,346,362,220,379,381,223,261,303,257,263,228,229,281,275,269,233,378,279,291,311,299,316,353,324,326,243,333,245,246,247,371,322,347,363,252,380,382,729],"windows-1258":[8364,129,8218,402,8222,8230,8224,8225,710,8240,138,8249,338,141,142,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,154,8250,339,157,158,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,258,196,197,198,199,200,201,202,203,768,205,206,207,272,209,777,211,212,416,214,215,216,217,218,219,220,431,771,223,224,225,226,259,228,229,230,231,232,233,234,235,769,237,238,239,273,241,803,243,244,417,246,247,248,249,250,251,252,432,8363,255],"x-mac-cyrillic":[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,8224,176,1168,163,167,8226,182,1030,174,169,8482,1026,1106,8800,1027,1107,8734,177,8804,8805,1110,181,1169,1032,1028,1108,1031,1111,1033,1113,1034,1114,1112,1029,172,8730,402,8776,8710,171,187,8230,160,1035,1115,1036,1116,1109,8211,8212,8220,8221,8216,8217,247,8222,1038,1118,1039,1119,8470,1025,1105,1103,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,8364]}}(this))},{}],2:[function(require,module,exports){if(typeof module!=="undefined"&&module.exports){this["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]}(function(global){function inRange(a,min,max){return min<=a&&a<=max}function includes(array,item){return array.indexOf(item)!==-1}var floor=Math.floor;function ToDictionary(o){if(o===undefined){return{}}if(o===Object(o)){return o}throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(string){var s=String(string);var n=s.length;var i=0;var u=[];while(i<n){var c=s.charCodeAt(i);if(c<55296||c>57343){u.push(c)}else{if(56320<=c&&c<=57343){u.push(65533)}else{if(55296<=c&&c<=56319){if(i===n-1){u.push(65533)}else{var d=s.charCodeAt(i+1);if(56320<=d&&d<=57343){var a=c&1023;var b=d&1023;u.push(65536+(a<<10)+b);i+=1}else{u.push(65533)}}}}}i+=1}return u}function codePointsToString(code_points){var s="";for(var i=0;i<code_points.length;++i){var cp=code_points[i];if(cp<=65535){s+=String.fromCharCode(cp)}else{cp-=65536;s+=String.fromCharCode((cp>>10)+55296,(cp&1023)+56320)}}return s}function isASCIIByte(a){return 0<=a&&a<=127}var isASCIICodePoint=isASCIIByte;var end_of_stream=-1;function Stream(tokens){this.tokens=[].slice.call(tokens);this.tokens.reverse()}Stream.prototype={endOfStream:function(){return !this.tokens.length},read:function(){if(!this.tokens.length){return end_of_stream}return this.tokens.pop()},prepend:function(token){if(Array.isArray(token)){var tokens=(token);while(tokens.length){this.tokens.push(tokens.pop())}}else{this.tokens.push(token)}},push:function(token){if(Array.isArray(token)){var tokens=(token);while(tokens.length){this.tokens.unshift(tokens.shift())}}else{this.tokens.unshift(token)}}};var finished=-1;function decoderError(fatal,opt_code_point){if(fatal){throw TypeError("Decoder error")}return opt_code_point||65533}function encoderError(code_point){throw TypeError("The code point "+code_point+" could not be encoded.")}function Decoder(){}Decoder.prototype={handler:function(stream,bite){}};function Encoder(){}Encoder.prototype={handler:function(stream,code_point){}};function getEncoding(label){label=String(label).trim().toLowerCase();if(Object.prototype.hasOwnProperty.call(label_to_encoding,label)){return label_to_encoding[label]}return null}var encodings=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}];var label_to_encoding={};encodings.forEach(function(category){category.encodings.forEach(function(encoding){encoding.labels.forEach(function(label){label_to_encoding[label]=encoding})})});var encoders={};var decoders={};function indexCodePointFor(pointer,index){if(!index){return null}return index[pointer]||null}function indexPointerFor(code_point,index){var pointer=index.indexOf(code_point);return pointer===-1?null:pointer}function index(name){if(!("encoding-indexes" in global)){throw Error("Indexes missing. Did you forget to include encoding-indexes.js?")}return global["encoding-indexes"][name]}function indexGB18030RangesCodePointFor(pointer){if((pointer>39419&&pointer<189000)||(pointer>1237575)){return null}if(pointer===7457){return 59335}var offset=0;var code_point_offset=0;var idx=index("gb18030-ranges");var i;for(i=0;i<idx.length;++i){var entry=idx[i];if(entry[0]<=pointer){offset=entry[0];code_point_offset=entry[1]}else{break}}return code_point_offset+pointer-offset}function indexGB18030RangesPointerFor(code_point){if(code_point===59335){return 7457}var offset=0;var pointer_offset=0;var idx=index("gb18030-ranges");var i;for(i=0;i<idx.length;++i){var entry=idx[i];if(entry[1]<=code_point){offset=entry[1];pointer_offset=entry[0]}else{break}}return pointer_offset+code_point-offset}function indexShiftJISPointerFor(code_point){shift_jis_index=shift_jis_index||index("jis0208").map(function(code_point,pointer){return inRange(pointer,8272,8835)?null:code_point});var index_=shift_jis_index;return index_.indexOf(code_point)}var shift_jis_index;function indexBig5PointerFor(code_point){big5_index_no_hkscs=big5_index_no_hkscs||index("big5").map(function(code_point,pointer){return(pointer<(161-129)*157)?null:code_point});var index_=big5_index_no_hkscs;if(code_point===9552||code_point===9566||code_point===9569||code_point===9578||code_point===21313||code_point===21317){return index_.lastIndexOf(code_point)}return indexPointerFor(code_point,index_)}var big5_index_no_hkscs;var DEFAULT_ENCODING="utf-8";function TextDecoder(label,options){if(!(this instanceof TextDecoder)){throw TypeError("Called as a function. Did you forget 'new'?")}label=label!==undefined?String(label):DEFAULT_ENCODING;options=ToDictionary(options);this._encoding=null;this._decoder=null;this._ignoreBOM=false;this._BOMseen=false;this._error_mode="replacement";this._do_not_flush=false;var encoding=getEncoding(label);if(encoding===null||encoding.name==="replacement"){throw RangeError("Unknown encoding: "+label)}if(!decoders[encoding.name]){throw Error("Decoder not present. Did you forget to include encoding-indexes.js?")}var dec=this;dec._encoding=encoding;if(Boolean(options.fatal)){dec._error_mode="fatal"}if(Boolean(options.ignoreBOM)){dec._ignoreBOM=true}if(!Object.defineProperty){this.encoding=dec._encoding.name.toLowerCase();this.fatal=dec._error_mode==="fatal";this.ignoreBOM=dec._ignoreBOM}return dec}if(Object.defineProperty){Object.defineProperty(TextDecoder.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}});Object.defineProperty(TextDecoder.prototype,"fatal",{get:function(){return this._error_mode==="fatal"}});Object.defineProperty(TextDecoder.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})}TextDecoder.prototype.decode=function decode(input,options){var bytes;if(typeof input==="object"&&input instanceof ArrayBuffer){bytes=new Uint8Array(input)}else{if(typeof input==="object"&&"buffer" in input&&input.buffer instanceof ArrayBuffer){bytes=new Uint8Array(input.buffer,input.byteOffset,input.byteLength)}else{bytes=new Uint8Array(0)}}options=ToDictionary(options);if(!this._do_not_flush){this._decoder=decoders[this._encoding.name]({fatal:this._error_mode==="fatal"});this._BOMseen=false}this._do_not_flush=Boolean(options.stream);var input_stream=new Stream(bytes);var output=[];var result;while(true){var token=input_stream.read();if(token===end_of_stream){break}result=this._decoder.handler(input_stream,token);if(result===finished){break}if(result!==null){if(Array.isArray(result)){output.push.apply(output,(result))}else{output.push(result)}}}if(!this._do_not_flush){do{result=this._decoder.handler(input_stream,input_stream.read());if(result===finished){break}if(result===null){continue}if(Array.isArray(result)){output.push.apply(output,(result))}else{output.push(result)}}while(!input_stream.endOfStream());this._decoder=null}function serializeStream(stream){if(includes(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)&&!this._ignoreBOM&&!this._BOMseen){if(stream.length>0&&stream[0]===65279){this._BOMseen=true;stream.shift()}else{if(stream.length>0){this._BOMseen=true}else{}}}return codePointsToString(stream)}return serializeStream.call(this,output)};function TextEncoder(label,options){if(!(this instanceof TextEncoder)){throw TypeError("Called as a function. Did you forget 'new'?")}options=ToDictionary(options);this._encoding=null;this._encoder=null;this._do_not_flush=false;this._fatal=Boolean(options.fatal)?"fatal":"replacement";var enc=this;if(Boolean(options.NONSTANDARD_allowLegacyEncoding)){label=label!==undefined?String(label):DEFAULT_ENCODING;var encoding=getEncoding(label);if(encoding===null||encoding.name==="replacement"){throw RangeError("Unknown encoding: "+label)}if(!encoders[encoding.name]){throw Error("Encoder not present. Did you forget to include encoding-indexes.js?")}enc._encoding=encoding}else{enc._encoding=getEncoding("utf-8");if(label!==undefined&&"console" in global){console.warn("TextEncoder constructor called with encoding label, which is ignored.")}}if(!Object.defineProperty){this.encoding=enc._encoding.name.toLowerCase()}return enc}if(Object.defineProperty){Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}})}TextEncoder.prototype.encode=function encode(opt_string,options){opt_string=opt_string?String(opt_string):"";options=ToDictionary(options);if(!this._do_not_flush){this._encoder=encoders[this._encoding.name]({fatal:this._fatal==="fatal"})}this._do_not_flush=Boolean(options.stream);var input=new Stream(stringToCodePoints(opt_string));var output=[];var result;while(true){var token=input.read();if(token===end_of_stream){break}result=this._encoder.handler(input,token);if(result===finished){break}if(Array.isArray(result)){output.push.apply(output,(result))}else{output.push(result)}}if(!this._do_not_flush){while(true){result=this._encoder.handler(input,input.read());if(result===finished){break}if(Array.isArray(result)){output.push.apply(output,(result))}else{output.push(result)}}this._encoder=null}return new Uint8Array(output)};function UTF8Decoder(options){var fatal=options.fatal;var utf8_code_point=0,utf8_bytes_seen=0,utf8_bytes_needed=0,utf8_lower_boundary=128,utf8_upper_boundary=191;this.handler=function(stream,bite){if(bite===end_of_stream&&utf8_bytes_needed!==0){utf8_bytes_needed=0;return decoderError(fatal)}if(bite===end_of_stream){return finished}if(utf8_bytes_needed===0){if(inRange(bite,0,127)){return bite}else{if(inRange(bite,194,223)){utf8_bytes_needed=1;utf8_code_point=bite&31}else{if(inRange(bite,224,239)){if(bite===224){utf8_lower_boundary=160}if(bite===237){utf8_upper_boundary=159}utf8_bytes_needed=2;utf8_code_point=bite&15}else{if(inRange(bite,240,244)){if(bite===240){utf8_lower_boundary=144}if(bite===244){utf8_upper_boundary=143}utf8_bytes_needed=3;utf8_code_point=bite&7}else{return decoderError(fatal)}}}}return null}if(!inRange(bite,utf8_lower_boundary,utf8_upper_boundary)){utf8_code_point=utf8_bytes_needed=utf8_bytes_seen=0;utf8_lower_boundary=128;utf8_upper_boundary=191;stream.prepend(bite);return decoderError(fatal)}utf8_lower_boundary=128;utf8_upper_boundary=191;utf8_code_point=(utf8_code_point<<6)|(bite&63);utf8_bytes_seen+=1;if(utf8_bytes_seen!==utf8_bytes_needed){return null}var code_point=utf8_code_point;utf8_code_point=utf8_bytes_needed=utf8_bytes_seen=0;return code_point}}function UTF8Encoder(options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(isASCIICodePoint(code_point)){return code_point}var count,offset;if(inRange(code_point,128,2047)){count=1;offset=192}else{if(inRange(code_point,2048,65535)){count=2;offset=224}else{if(inRange(code_point,65536,1114111)){count=3;offset=240}}}var bytes=[(code_point>>(6*count))+offset];while(count>0){var temp=code_point>>(6*(count-1));bytes.push(128|(temp&63));count-=1}return bytes}}encoders["UTF-8"]=function(options){return new UTF8Encoder(options)};decoders["UTF-8"]=function(options){return new UTF8Decoder(options)};function SingleByteDecoder(index,options){var fatal=options.fatal;this.handler=function(stream,bite){if(bite===end_of_stream){return finished}if(isASCIIByte(bite)){return bite}var code_point=index[bite-128];if(code_point===null){return decoderError(fatal)}return code_point}}function SingleByteEncoder(index,options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(isASCIICodePoint(code_point)){return code_point}var pointer=indexPointerFor(code_point,index);if(pointer===null){encoderError(code_point)}return pointer+128}}(function(){if(!("encoding-indexes" in global)){return}encodings.forEach(function(category){if(category.heading!=="Legacy single-byte encodings"){return}category.encodings.forEach(function(encoding){var name=encoding.name;var idx=index(name.toLowerCase());decoders[name]=function(options){return new SingleByteDecoder(idx,options)};encoders[name]=function(options){return new SingleByteEncoder(idx,options)}})})}());decoders.GBK=function(options){return new GB18030Decoder(options)};encoders.GBK=function(options){return new GB18030Encoder(options,true)};function GB18030Decoder(options){var fatal=options.fatal;var gb18030_first=0,gb18030_second=0,gb18030_third=0;this.handler=function(stream,bite){if(bite===end_of_stream&&gb18030_first===0&&gb18030_second===0&&gb18030_third===0){return finished}if(bite===end_of_stream&&(gb18030_first!==0||gb18030_second!==0||gb18030_third!==0)){gb18030_first=0;gb18030_second=0;gb18030_third=0;decoderError(fatal)}var code_point;if(gb18030_third!==0){code_point=null;if(inRange(bite,48,57)){code_point=indexGB18030RangesCodePointFor((((gb18030_first-129)*10+gb18030_second-48)*126+gb18030_third-129)*10+bite-48)}var buffer=[gb18030_second,gb18030_third,bite];gb18030_first=0;gb18030_second=0;gb18030_third=0;if(code_point===null){stream.prepend(buffer);return decoderError(fatal)}return code_point}if(gb18030_second!==0){if(inRange(bite,129,254)){gb18030_third=bite;return null}stream.prepend([gb18030_second,bite]);gb18030_first=0;gb18030_second=0;return decoderError(fatal)}if(gb18030_first!==0){if(inRange(bite,48,57)){gb18030_second=bite;return null}var lead=gb18030_first;var pointer=null;gb18030_first=0;var offset=bite<127?64:65;if(inRange(bite,64,126)||inRange(bite,128,254)){pointer=(lead-129)*190+(bite-offset)}code_point=pointer===null?null:indexCodePointFor(pointer,index("gb18030"));if(code_point===null&&isASCIIByte(bite)){stream.prepend(bite)}if(code_point===null){return decoderError(fatal)}return code_point}if(isASCIIByte(bite)){return bite}if(bite===128){return 8364}if(inRange(bite,129,254)){gb18030_first=bite;return null}return decoderError(fatal)}}function GB18030Encoder(options,gbk_flag){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(isASCIICodePoint(code_point)){return code_point}if(code_point===58853){return encoderError(code_point)}if(gbk_flag&&code_point===8364){return 128}var pointer=indexPointerFor(code_point,index("gb18030"));if(pointer!==null){var lead=floor(pointer/190)+129;var trail=pointer%190;var offset=trail<63?64:65;return[lead,trail+offset]}if(gbk_flag){return encoderError(code_point)}pointer=indexGB18030RangesPointerFor(code_point);var byte1=floor(pointer/10/126/10);pointer=pointer-byte1*10*126*10;var byte2=floor(pointer/10/126);pointer=pointer-byte2*10*126;var byte3=floor(pointer/10);var byte4=pointer-byte3*10;return[byte1+129,byte2+48,byte3+129,byte4+48]}}encoders.gb18030=function(options){return new GB18030Encoder(options)};decoders.gb18030=function(options){return new GB18030Decoder(options)};function Big5Decoder(options){var fatal=options.fatal;var Big5_lead=0;this.handler=function(stream,bite){if(bite===end_of_stream&&Big5_lead!==0){Big5_lead=0;return decoderError(fatal)}if(bite===end_of_stream&&Big5_lead===0){return finished}if(Big5_lead!==0){var lead=Big5_lead;var pointer=null;Big5_lead=0;var offset=bite<127?64:98;if(inRange(bite,64,126)||inRange(bite,161,254)){pointer=(lead-129)*157+(bite-offset)}switch(pointer){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var code_point=(pointer===null)?null:indexCodePointFor(pointer,index("big5"));if(code_point===null&&isASCIIByte(bite)){stream.prepend(bite)}if(code_point===null){return decoderError(fatal)}return code_point}if(isASCIIByte(bite)){return bite}if(inRange(bite,129,254)){Big5_lead=bite;return null}return decoderError(fatal)}}function Big5Encoder(options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(isASCIICodePoint(code_point)){return code_point}var pointer=indexBig5PointerFor(code_point);if(pointer===null){return encoderError(code_point)}var lead=floor(pointer/157)+129;if(lead<161){return encoderError(code_point)}var trail=pointer%157;var offset=trail<63?64:98;return[lead,trail+offset]}}encoders.Big5=function(options){return new Big5Encoder(options)};decoders.Big5=function(options){return new Big5Decoder(options)};function EUCJPDecoder(options){var fatal=options.fatal;var eucjp_jis0212_flag=false,eucjp_lead=0;this.handler=function(stream,bite){if(bite===end_of_stream&&eucjp_lead!==0){eucjp_lead=0;return decoderError(fatal)}if(bite===end_of_stream&&eucjp_lead===0){return finished}if(eucjp_lead===142&&inRange(bite,161,223)){eucjp_lead=0;return 65377-161+bite}if(eucjp_lead===143&&inRange(bite,161,254)){eucjp_jis0212_flag=true;eucjp_lead=bite;return null}if(eucjp_lead!==0){var lead=eucjp_lead;eucjp_lead=0;var code_point=null;if(inRange(lead,161,254)&&inRange(bite,161,254)){code_point=indexCodePointFor((lead-161)*94+(bite-161),index(!eucjp_jis0212_flag?"jis0208":"jis0212"))}eucjp_jis0212_flag=false;if(!inRange(bite,161,254)){stream.prepend(bite)}if(code_point===null){return decoderError(fatal)}return code_point}if(isASCIIByte(bite)){return bite}if(bite===142||bite===143||inRange(bite,161,254)){eucjp_lead=bite;return null}return decoderError(fatal)}}function EUCJPEncoder(options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(isASCIICodePoint(code_point)){return code_point}if(code_point===165){return 92}if(code_point===8254){return 126}if(inRange(code_point,65377,65439)){return[142,code_point-65377+161]}if(code_point===8722){code_point=65293}var pointer=indexPointerFor(code_point,index("jis0208"));if(pointer===null){return encoderError(code_point)}var lead=floor(pointer/94)+161;var trail=pointer%94+161;return[lead,trail]}}encoders["EUC-JP"]=function(options){return new EUCJPEncoder(options)};decoders["EUC-JP"]=function(options){return new EUCJPDecoder(options)};function ISO2022JPDecoder(options){var fatal=options.fatal;var states={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6};var iso2022jp_decoder_state=states.ASCII,iso2022jp_decoder_output_state=states.ASCII,iso2022jp_lead=0,iso2022jp_output_flag=false;this.handler=function(stream,bite){switch(iso2022jp_decoder_state){default:case states.ASCII:if(bite===27){iso2022jp_decoder_state=states.EscapeStart;return null}if(inRange(bite,0,127)&&bite!==14&&bite!==15&&bite!==27){iso2022jp_output_flag=false;return bite}if(bite===end_of_stream){return finished}iso2022jp_output_flag=false;return decoderError(fatal);case states.Roman:if(bite===27){iso2022jp_decoder_state=states.EscapeStart;return null}if(bite===92){iso2022jp_output_flag=false;return 165}if(bite===126){iso2022jp_output_flag=false;return 8254}if(inRange(bite,0,127)&&bite!==14&&bite!==15&&bite!==27&&bite!==92&&bite!==126){iso2022jp_output_flag=false;return bite}if(bite===end_of_stream){return finished}iso2022jp_output_flag=false;return decoderError(fatal);case states.Katakana:if(bite===27){iso2022jp_decoder_state=states.EscapeStart;return null}if(inRange(bite,33,95)){iso2022jp_output_flag=false;return 65377-33+bite}if(bite===end_of_stream){return finished}iso2022jp_output_flag=false;return decoderError(fatal);case states.LeadByte:if(bite===27){iso2022jp_decoder_state=states.EscapeStart;return null}if(inRange(bite,33,126)){iso2022jp_output_flag=false;iso2022jp_lead=bite;iso2022jp_decoder_state=states.TrailByte;return null}if(bite===end_of_stream){return finished}iso2022jp_output_flag=false;return decoderError(fatal);case states.TrailByte:if(bite===27){iso2022jp_decoder_state=states.EscapeStart;return decoderError(fatal)}if(inRange(bite,33,126)){iso2022jp_decoder_state=states.LeadByte;var pointer=(iso2022jp_lead-33)*94+bite-33;var code_point=indexCodePointFor(pointer,index("jis0208"));if(code_point===null){return decoderError(fatal)}return code_point}if(bite===end_of_stream){iso2022jp_decoder_state=states.LeadByte;stream.prepend(bite);return decoderError(fatal)}iso2022jp_decoder_state=states.LeadByte;return decoderError(fatal);case states.EscapeStart:if(bite===36||bite===40){iso2022jp_lead=bite;iso2022jp_decoder_state=states.Escape;return null}stream.prepend(bite);iso2022jp_output_flag=false;iso2022jp_decoder_state=iso2022jp_decoder_output_state;return decoderError(fatal);case states.Escape:var lead=iso2022jp_lead;iso2022jp_lead=0;var state=null;if(lead===40&&bite===66){state=states.ASCII}if(lead===40&&bite===74){state=states.Roman}if(lead===40&&bite===73){state=states.Katakana}if(lead===36&&(bite===64||bite===66)){state=states.LeadByte}if(state!==null){iso2022jp_decoder_state=iso2022jp_decoder_state=state;var output_flag=iso2022jp_output_flag;iso2022jp_output_flag=true;return !output_flag?null:decoderError(fatal)}stream.prepend([lead,bite]);iso2022jp_output_flag=false;iso2022jp_decoder_state=iso2022jp_decoder_output_state;return decoderError(fatal)}}}function ISO2022JPEncoder(options){var fatal=options.fatal;var states={ASCII:0,Roman:1,jis0208:2};var iso2022jp_state=states.ASCII;this.handler=function(stream,code_point){if(code_point===end_of_stream&&iso2022jp_state!==states.ASCII){stream.prepend(code_point);iso2022jp_state=states.ASCII;return[27,40,66]}if(code_point===end_of_stream&&iso2022jp_state===states.ASCII){return finished}if((iso2022jp_state===states.ASCII||iso2022jp_state===states.Roman)&&(code_point===14||code_point===15||code_point===27)){return encoderError(65533)}if(iso2022jp_state===states.ASCII&&isASCIICodePoint(code_point)){return code_point}if(iso2022jp_state===states.Roman&&((isASCIICodePoint(code_point)&&code_point!==92&&code_point!==126)||(code_point==165||code_point==8254))){if(isASCIICodePoint(code_point)){return code_point}if(code_point===165){return 92}if(code_point===8254){return 126}}if(isASCIICodePoint(code_point)&&iso2022jp_state!==states.ASCII){stream.prepend(code_point);iso2022jp_state=states.ASCII;return[27,40,66]}if((code_point===165||code_point===8254)&&iso2022jp_state!==states.Roman){stream.prepend(code_point);iso2022jp_state=states.Roman;return[27,40,74]}if(code_point===8722){code_point=65293}var pointer=indexPointerFor(code_point,index("jis0208"));if(pointer===null){return encoderError(code_point)}if(iso2022jp_state!==states.jis0208){stream.prepend(code_point);iso2022jp_state=states.jis0208;return[27,36,66]}var lead=floor(pointer/94)+33;var trail=pointer%94+33;return[lead,trail]}}encoders["ISO-2022-JP"]=function(options){return new ISO2022JPEncoder(options)};decoders["ISO-2022-JP"]=function(options){return new ISO2022JPDecoder(options)};function ShiftJISDecoder(options){var fatal=options.fatal;var Shift_JIS_lead=0;this.handler=function(stream,bite){if(bite===end_of_stream&&Shift_JIS_lead!==0){Shift_JIS_lead=0;return decoderError(fatal)}if(bite===end_of_stream&&Shift_JIS_lead===0){return finished}if(Shift_JIS_lead!==0){var lead=Shift_JIS_lead;var pointer=null;Shift_JIS_lead=0;var offset=(bite<127)?64:65;var lead_offset=(lead<160)?129:193;if(inRange(bite,64,126)||inRange(bite,128,252)){pointer=(lead-lead_offset)*188+bite-offset}if(inRange(pointer,8836,10715)){return 57344-8836+pointer}var code_point=(pointer===null)?null:indexCodePointFor(pointer,index("jis0208"));if(code_point===null&&isASCIIByte(bite)){stream.prepend(bite)}if(code_point===null){return decoderError(fatal)}return code_point}if(isASCIIByte(bite)||bite===128){return bite}if(inRange(bite,161,223)){return 65377-161+bite}if(inRange(bite,129,159)||inRange(bite,224,252)){Shift_JIS_lead=bite;return null}return decoderError(fatal)}}function ShiftJISEncoder(options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(isASCIICodePoint(code_point)||code_point===128){return code_point}if(code_point===165){return 92}if(code_point===8254){return 126}if(inRange(code_point,65377,65439)){return code_point-65377+161}if(code_point===8722){code_point=65293}var pointer=indexShiftJISPointerFor(code_point);if(pointer===null){return encoderError(code_point)}var lead=floor(pointer/188);var lead_offset=(lead<31)?129:193;var trail=pointer%188;var offset=(trail<63)?64:65;return[lead+lead_offset,trail+offset]}}encoders.Shift_JIS=function(options){return new ShiftJISEncoder(options)};decoders.Shift_JIS=function(options){return new ShiftJISDecoder(options)};function EUCKRDecoder(options){var fatal=options.fatal;var euckr_lead=0;this.handler=function(stream,bite){if(bite===end_of_stream&&euckr_lead!==0){euckr_lead=0;return decoderError(fatal)}if(bite===end_of_stream&&euckr_lead===0){return finished}if(euckr_lead!==0){var lead=euckr_lead;var pointer=null;euckr_lead=0;if(inRange(bite,65,254)){pointer=(lead-129)*190+(bite-65)}var code_point=(pointer===null)?null:indexCodePointFor(pointer,index("euc-kr"));if(pointer===null&&isASCIIByte(bite)){stream.prepend(bite)}if(code_point===null){return decoderError(fatal)}return code_point}if(isASCIIByte(bite)){return bite}if(inRange(bite,129,254)){euckr_lead=bite;return null}return decoderError(fatal)}}function EUCKREncoder(options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(isASCIICodePoint(code_point)){return code_point}var pointer=indexPointerFor(code_point,index("euc-kr"));if(pointer===null){return encoderError(code_point)}var lead=floor(pointer/190)+129;var trail=(pointer%190)+65;return[lead,trail]}}encoders["EUC-KR"]=function(options){return new EUCKREncoder(options)};decoders["EUC-KR"]=function(options){return new EUCKRDecoder(options)};function convertCodeUnitToBytes(code_unit,utf16be){var byte1=code_unit>>8;var byte2=code_unit&255;if(utf16be){return[byte1,byte2]}return[byte2,byte1]}function UTF16Decoder(utf16_be,options){var fatal=options.fatal;var utf16_lead_byte=null,utf16_lead_surrogate=null;this.handler=function(stream,bite){if(bite===end_of_stream&&(utf16_lead_byte!==null||utf16_lead_surrogate!==null)){return decoderError(fatal)}if(bite===end_of_stream&&utf16_lead_byte===null&&utf16_lead_surrogate===null){return finished}if(utf16_lead_byte===null){utf16_lead_byte=bite;return null}var code_unit;if(utf16_be){code_unit=(utf16_lead_byte<<8)+bite}else{code_unit=(bite<<8)+utf16_lead_byte}utf16_lead_byte=null;if(utf16_lead_surrogate!==null){var lead_surrogate=utf16_lead_surrogate;utf16_lead_surrogate=null;if(inRange(code_unit,56320,57343)){return 65536+(lead_surrogate-55296)*1024+(code_unit-56320)}stream.prepend(convertCodeUnitToBytes(code_unit,utf16_be));return decoderError(fatal)}if(inRange(code_unit,55296,56319)){utf16_lead_surrogate=code_unit;return null}if(inRange(code_unit,56320,57343)){return decoderError(fatal)}return code_unit}}function UTF16Encoder(utf16_be,options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(inRange(code_point,0,65535)){return convertCodeUnitToBytes(code_point,utf16_be)}var lead=convertCodeUnitToBytes(((code_point-65536)>>10)+55296,utf16_be);var trail=convertCodeUnitToBytes(((code_point-65536)&1023)+56320,utf16_be);return lead.concat(trail)}}encoders["UTF-16BE"]=function(options){return new UTF16Encoder(true,options)};decoders["UTF-16BE"]=function(options){return new UTF16Decoder(true,options)};encoders["UTF-16LE"]=function(options){return new UTF16Encoder(false,options)};decoders["UTF-16LE"]=function(options){return new UTF16Decoder(false,options)};function XUserDefinedDecoder(options){var fatal=options.fatal;this.handler=function(stream,bite){if(bite===end_of_stream){return finished}if(isASCIIByte(bite)){return bite}return 63360+bite-128}}function XUserDefinedEncoder(options){var fatal=options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream){return finished}if(isASCIICodePoint(code_point)){return code_point}if(inRange(code_point,63360,63487)){return code_point-63360+128}return encoderError(code_point)}}encoders["x-user-defined"]=function(options){return new XUserDefinedEncoder(options)};decoders["x-user-defined"]=function(options){return new XUserDefinedDecoder(options)};if(!global.TextEncoder){global.TextEncoder=TextEncoder}if(!global.TextDecoder){global.TextDecoder=TextDecoder}if(typeof module!=="undefined"&&module.exports){module.exports={TextEncoder:global.TextEncoder,TextDecoder:global.TextDecoder,EncodingIndexes:global["encoding-indexes"]}}}(this))},{"./encoding-indexes.js":1}],3:[function(require,module,exports){var encoding=require("./lib/encoding.js");module.exports={TextEncoder:encoding.TextEncoder,TextDecoder:encoding.TextDecoder,}},{"./lib/encoding.js":2}]},{},[3])(3)});define("utils/TextEncoding",["text-encoding"],function(TextEncoding){return TextEncoding});(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else{if(typeof define==="function"&&define.amd){define("deep-for-each",[],f)}else{var g;if(typeof window!=="undefined"){g=window}else{if(typeof global!=="undefined"){g=global}else{if(typeof self!=="undefined"){g=self}else{g=this}}}g.deepForEach=f()}}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0)}if(i){return i(o,!0)}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){var isPlainObject=require("is-plain-object");function forEach(value,fn,path){path=path||"";if(Array.isArray(value)){forEachArray(value,fn,path)}else{if(isPlainObject(value)){forEachObject(value,fn,path)}}}function forEachObject(obj,fn,path){var key;var deepPath;for(key in obj){deepPath=path?path+"."+key:key;fn.call(obj,obj[key],key,obj,deepPath);forEach(obj[key],fn,deepPath)}}function forEachArray(array,fn,path){var deepPath="";array.forEach(function(value,index,arr){deepPath=path+"["+index+"]";fn.call(arr,value,index,arr,deepPath);forEach(arr[index],fn,deepPath)})}module.exports=forEach},{"is-plain-object":2}],2:[function(require,module,exports){
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
var isObject=require("isobject");function isObjectObject(o){return isObject(o)===true&&Object.prototype.toString.call(o)==="[object Object]"}module.exports=function isPlainObject(o){var ctor,prot;if(isObjectObject(o)===false){return false}ctor=o.constructor;if(typeof ctor!=="function"){return false}prot=ctor.prototype;if(isObjectObject(prot)===false){return false}if(prot.hasOwnProperty("isPrototypeOf")===false){return false}return true}},{isobject:3}],3:[function(require,module,exports){
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
module.exports=function isObject(val){return val!=null&&typeof val==="object"&&!Array.isArray(val)}},{}]},{},[1])(1)});define("utils/DeepForEach",["deep-for-each"],function(DeepForEach){return DeepForEach});(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else{if(typeof define==="function"&&define.amd){define("lodash-get",[],f)}else{var g;if(typeof window!=="undefined"){g=window}else{if(typeof global!=="undefined"){g=global}else{if(typeof self!=="undefined"){g=self}else{g=this}}}(g.lodash||(g.lodash={})).get=f()}}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0)}if(i){return i(o,!0)}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){(function(global){var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var INFINITY=1/0;var funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]";var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();function getValue(object,key){return object==null?undefined:object[key]}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=(function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?("Symbol(src)_1."+uid):""}());var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Symbol=root.Symbol,splice=arrayProto.splice;var Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=(nativeCreate&&value===undefined)?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new (Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return -1}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return(index&&index==length)?object:undefined}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=(isFunction(value)||isHostObject(value))?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseToString(value){if(typeof value=="string"){return value}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=(value+"");return(result=="0"&&(1/value)==-INFINITY)?"-0":result}function castPath(value){return isArray(value)?value:stringToPath(value)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||(object!=null&&value in Object(object))}function isKeyable(value){var type=typeof value;return(type=="string"||type=="number"||type=="symbol"||type=="boolean")?(value!=="__proto__"):(value===null)}function isMasked(func){return !!maskSrcKey&&(maskSrcKey in func)}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):(number||match))});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=(value+"");return(result=="0"&&(1/value)==-INFINITY)?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return(func+"")}catch(e){}}return""}function memoize(func,resolver){if(typeof func!="function"||(resolver&&typeof resolver!="function")){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new (memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function eq(value,other){return value===other||(value!==value&&other!==other)}var isArray=Array.isArray;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return !!value&&(type=="object"||type=="function")}function isObjectLike(value){return !!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||(isObjectLike(value)&&objectToString.call(value)==symbolTag)}function toString(value){return value==null?"":baseToString(value)}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}module.exports=get}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1])(1)});define("utils/Get",["lodash-get"],function(LodashGet){return LodashGet});(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else{if(typeof define==="function"&&define.amd){define("lodash-set",[],f)}else{var g;if(typeof window!=="undefined"){g=window}else{if(typeof global!=="undefined"){g=global}else{if(typeof self!=="undefined"){g=self}else{g=this}}}(g.lodash||(g.lodash={})).set=f()}}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0)}if(i){return i(o,!0)}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){(function(global){var FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991;var funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]";var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reEscapeChar=/\\(\\)?/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();function getValue(object,key){return object==null?undefined:object[key]}function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var maskSrcKey=(function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?("Symbol(src)_1."+uid):""}());var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Symbol=root.Symbol,splice=arrayProto.splice;var Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function Hash(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;data[key]=(nativeCreate&&value===undefined)?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries?entries.length:0;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new (Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){getMapData(this,key).set(key,value);return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||(value===undefined&&!(key in object))){object[key]=value}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return -1}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=(isFunction(value)||isHostObject(value))?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=isKey(path,object)?[path]:castPath(path);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:(isIndex(path[index+1])?[]:{})}}assignValue(nested,key,newValue);nested=nested[key]}return object}function baseToString(value){if(typeof value=="string"){return value}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=(value+"");return(result=="0"&&(1/value)==-INFINITY)?"-0":result}function castPath(value){return isArray(value)?value:stringToPath(value)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return !!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||(object!=null&&value in Object(object))}function isKeyable(value){var type=typeof value;return(type=="string"||type=="number"||type=="symbol"||type=="boolean")?(value!=="__proto__"):(value===null)}function isMasked(func){return !!maskSrcKey&&(maskSrcKey in func)}var stringToPath=memoize(function(string){string=toString(string);var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):(number||match))});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=(value+"");return(result=="0"&&(1/value)==-INFINITY)?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return(func+"")}catch(e){}}return""}function memoize(func,resolver){if(typeof func!="function"||(resolver&&typeof resolver!="function")){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new (memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function eq(value,other){return value===other||(value!==value&&other!==other)}var isArray=Array.isArray;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return !!value&&(type=="object"||type=="function")}function isObjectLike(value){return !!value&&typeof value=="object"}function isSymbol(value){return typeof value=="symbol"||(isObjectLike(value)&&objectToString.call(value)==symbolTag)}function toString(value){return value==null?"":baseToString(value)}function set(object,path,value){return object==null?object:baseSet(object,path,value)}module.exports=set}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1])(1)});define("utils/Set",["lodash-set"],function(Set){return Set});define("utils/Sleep",[],function(){function Sleep(time){var start=new Date().getTime();var end=start+time;while(new Date().getTime()<end){}}return Sleep});define("utils/Utils",["core/sldiagram","utils/Disabler","utils/EventEmitter","utils/Bluebird","utils/TextEncoding","utils/DeepForEach","utils/Get","utils/Set","utils/Sleep"],function(SLD,Disabler,EventEmitter,Bluebird,TextEncoding,DeepForEach,Get,Set,Sleep){SLD.Utils={extend:function(){if(arguments.length<2){console.error("ERROR: Wrong count of arguments");return((arguments.length===1)?arguments[0]:null)}var full=false;if(typeof arguments[arguments.length-1]==="boolean"){full=arguments[arguments.length-1]}var res=arguments[0];var i,obj;for(i=1;i<arguments.length;i++){obj=arguments[i];if(typeof obj==="object"&&obj!==null){var j;for(j in obj){if(full||obj.hasOwnProperty(j)){res[j]=obj[j]}}}}return res},merge:function(obj1,obj2){var res={};var i;for(i in obj1){if(obj1.hasOwnProperty(i)){res[i]=obj1[i]}}for(i in obj2){if(obj2.hasOwnProperty(i)){res[i]=obj2[i]}}return res},fnExtend:function(origfn,extfn){extfn.orig=origfn;return extfn},booleanStringFormats:{"0/1":{"0":"0","1":"1"},"-/+":{"0":"-","1":"+"},"f/t":{"0":"f","1":"t"},"false/true":{"0":"false","1":"true"},"n/y":{"0":"n","1":"y"},"no/yes":{"0":"no","1":"yes"},"н/д":{"0":"н","1":"д"},"нет/да":{"0":"нет","1":"да"},"off/on":{"0":"off","1":"on"},"выкл/вкл":{"0":"выкл","1":"вкл"}},getFormats:function(value){if(typeof value!=="boolean"){value=false}var varName=((value)?"true":"false")+"Formats";var keyName=((value)?"1":"0");var i,format;if(!this[varName]){this[varName]=[];for(i in this.booleanStringFormats){if(this.booleanStringFormats.hasOwnProperty(i)){format=this.booleanStringFormats[i];this[varName].push(format[keyName])}}}return this[varName]},string2boolean:function(str){var format="false/true";var falseStr,trueStr;var falseFormats,trueFormats,formatIndex;str=str.toLowerCase();switch(arguments.length){case 0:return false;case 1:falseFormats=this.getFormats(false);trueFormats=this.getFormats(true);formatIndex=falseFormats.indexOf(str);if(formatIndex<0){formatIndex=trueFormats.indexOf(str)}if(formatIndex<0){return Boolean(str)}trueStr=trueFormats[formatIndex];break;case 2:format=arguments[1];trueStr=this.booleanStringFormats[format]["1"];break;default:trueStr=arguments[2]}if(str===trueStr){return true}else{return false}},boolean2string:function(bool){var format,formatName,falseStr,trueStr;switch(arguments.length){case 0:return"0";case 1:case 2:if(arguments.length===1){formatName="0/1"}else{formatName=arguments[1]}if(this.booleanStringFormats[formatName]){format=this.booleanStringFormats[formatName]}else{format=this.booleanStringFormats["0/1"]}falseStr=format["0"];trueStr=format["1"];break;default:falseStr=arguments[1];trueStr=arguments[2]}if(bool){return trueStr}else{return falseStr}},getFirstCSSStyleRule:function(selector){if(!(typeof selector==="string"&&selector.length>0)){return null}var i,sheet;var j,rule;for(i in document.styleSheets){if(document.styleSheets.hasOwnProperty(i)){sheet=document.styleSheets[i];for(j in sheet.cssRules){if(sheet.cssRules.hasOwnProperty(j)){rule=sheet.cssRules[j];if(rule.selectorText===selector){return rule}}}}}return null},getFirstCSSStyleDeclaration:function(selector){var rule=this.getFirstCSSStyleRule(selector);if(rule!==null){return rule.style}else{return null}},_numberRegexp:new RegExp("(\\d+\\.\\d+|\\d+)"),anyStringToNumber:function(str){var re,nums,num;str=String(str);re=this._numberRegexp;nums=str.match(re);if(nums&&nums.length>0){num=nums[0];return Number(num)}else{return null}},objectToArray:function(obj){var r=[];var i,o;for(i in obj){if(obj.hasOwnProperty(i)){o=obj[i];r.push(o)}}return r},arrayFilter:function(arr,filter){var res=[];var i,a;for(i=0;i<arr.length;i++){a=arr[i];if(filter(a)){res.push(a)}}return res},objectFilter:function(obj,filter){var res={};var i,v;for(i in obj){if(obj.hasOwnProperty(i)){v=obj[i];if(filter(i,v)){res[i]=v}}}return res},printTrace:function(){var stack;stack=SLDiagram.Utils.getTrace();console.log(stack);return true},getTrace:function(){var e;e=new Error();return e.stack},clearEmptyItems:function(items){var i;for(i=items.length-1;i>=0;i=i-1){if(items[i].length===0){items.splice(i,1)}}return items},getPath:function(fullPath){var items=fullPath.split("/");var res;this.clearEmptyItems(items);if(items.length<=1){return""}else{items.splice(items.length-1,1);return items.join("/")}},getName:function(fullPath){var items=fullPath.split("/");this.clearEmptyItems(items);if(items.length>=1){return items[items.length-1]}else{return""}},series:function(funcs,result){var i,func;var exec;var results=[];exec=function(i){if(typeof funcs[i]==="function"){funcs[i](function(err,res){results.push(res);if(err){result(err,results)}else{exec(i+1)}})}else{result(null,results)}};exec(0)},createCallbackFn:function(callback,params){if(typeof callback==="function"&&!params){return callback}else{return function(err){var res;if(err&&((params&&params.printError)||typeof callback!=="function")){console.error(err)}if(params&&params.printResults){if(arguments.length>2){res=Array.prototype.slice.call(arguments,1)}else{if(arguments.length===2){res=arguments[1]}}if(res!==undefined){console.log(res)}}if(typeof callback==="function"){callback.apply(this,arguments)}}}},rotatePointByAngle:function(point,angle){var cos=Math.cos(angle);var sin=Math.sin(angle);return this.rotatePointBySinAndCos(point,sin,cos)},rotatePointBySinAndCos:function(point,sin,cos){return{x:point.x*cos-point.y*sin,y:point.x*sin+point.y*cos}},fixVoltageName:function(voltageName){var num,re,matches;if(typeof voltageName==="number"){return String(voltageName)}if(typeof voltageName==="string"&&isFinite(voltageName)){return voltageName}if(typeof voltageName==="string"){re=new RegExp("(\\d*(\\.|,)\\d+|\\d+)");matches=voltageName.match(re);if(!matches||matches.length===0){return null}num=Number(matches[0].replace(",","."));return String(num)}return null},Disabler:Disabler,simplifyDegreeAngle:function(angle){var res;if(angle<-180){res=-angle+(angle+(angle%360));if(res<-180){res+=360}return res}else{if(angle>=180){res=angle-(angle-(angle%360));if(res>=180){res-=360}return res}else{return angle}}},Bluebird:Bluebird,clone:function(obj){var res;var i;if(typeof obj==="object"&&obj!==null){if(Object.prototype.toString.call(obj)==="[object Array]"){res=[];for(i=0;i<obj.length;i++){res.push(obj[i])}}else{res={};for(i in obj){if(obj.hasOwnProperty(i)){res[i]=obj[i]}}}return res}else{return obj}},cloneDeep:function(obj){var res;var i;if(typeof obj==="object"&&obj!==null){if(Object.prototype.toString.call(obj)==="[object Array]"){res=[];for(i=0;i<obj.length;i++){res.push(this.cloneDeep(obj[i]))}}else{res={};for(i in obj){if(obj.hasOwnProperty(i)){res[i]=this.cloneDeep(obj[i])}}}return res}else{return obj}},createBindedMethod:function(obj,methodName,context){if(!context){context=obj}return function(){return obj[methodName].apply(context,arguments)}},TextEncoding:TextEncoding,EventEmitter:EventEmitter,deepForEach:DeepForEach,get:Get,set:Set,sleep:Sleep};return SLD.Utils});define("core/properties/deps",["core/sldiagram","core/sldiagram-statics","utils/Utils"],function(SLD,SLDs,Utils){SLD.properties={};return SLD});define("core/Class",["core/sldiagram","utils/Utils"],function(SLDiagram){var Class=function(){this._init.apply(this,arguments)};Class.prototype={_type:["SLDiagram.Class"],_typeClass:"SLDiagram.Class",_init:function(cfg){this._initDefaults();if(cfg){this._initValues(cfg)}if((!cfg||(cfg&&!cfg._disableCheck))&&!this._selfCheck()){throw new Error("FATAL: New "+this._getTypeName()+" init incorrectly")}},_initDefaults:function(){return true},_initValues:function(cfg){return true},_selfCheck:function(){return true},_getTypeName:function(lastPart){return this.getTypeName(lastPart)},getTypeName:function(lastPart){var name,names;name=this._type[this._type.length-1];if(lastPart){names=name.split(".");return names[names.length-1]}else{return name}}};Class.isClass=function(cl){return Boolean(typeof cl==="function"&&cl.prototype._typeClass===Class.prototype._typeClass)};Class.isClassInstance=function(obj){return Boolean(typeof obj==="object"&&obj!==null&&obj._typeClass===Class.prototype._typeClass&&obj._selfCheck())};Class.getClassName=function(cl,lastPart){var name;lastPart=((typeof lastPart!=="undefined")?Boolean(lastPart):false);if(Class.isClass(cl)){name=cl.prototype._getTypeName()}else{if(Class.isClassInstance(cl)){name=cl._getTypeName()}else{return null}}if(lastPart){name=name.split(".").pop()}return name};Class.define=function(prnt,cfg){var cl,orig,i,origType;if(!cfg){cfg={}}cl=function(){this._init.apply(this,arguments)};if(Class.isClass(prnt)){orig=new prnt({_disableCheck:true})}else{if(Class.isClassInstance(prnt)){orig=prnt}else{if(prnt!==null){console.error("ERROR: Inheritance only from "+Class.prototype._getTypeName())}orig=new Class({_disableCheck:true})}}origType=orig._type.slice(0);for(i in cfg){if(cfg.hasOwnProperty(i)&&["_type","_statics"].indexOf(i)<0){orig[i]=cfg[i]}}cl.prototype=orig;cl.prototype._type=origType.slice(0);if(typeof cfg._type==="string"){cl.prototype._type.push(cfg._type)}else{if(typeof cfg._type==="object"&&cfg._type!==null&&cfg._type.length>0){for(i=0;i<cfg._type.length;i++){cl.prototype._type.push(cfg._type[i])}}}if(cfg._clonable||(!cfg._clonable&&orig._clonable)){cl.prototype.clone=function(){return cl.create(this)}}cl.is=function(obj){return Boolean(Class.isClassInstance(obj)&&obj._getTypeName()===cl.prototype._getTypeName())};cl.isInstanceOf=function(obj){return Boolean(Class.isClassInstance(obj)&&obj._type.indexOf(cl.prototype._getTypeName())>=0)};cl.create=function(cfg){return new cl(cfg)};for(i in cfg._statics){if(cfg._statics.hasOwnProperty(i)){cl[i]=cfg._statics[i]}}return cl};Class.create=function(cls,cfg){if(Class.isClass(cls)){return new cls(cfg)}else{return null}};SLDiagram.Class=Class;return Class});define("core/TreeStoreItem",["core/sldiagram","core/sldiagram-statics","core/Class"],function(SLD,SLDs,Class){SLDiagram.TreeStoreItem=Class.define(null,{_type:"SLDiagram.TreeStoreItem",_initDefaults:function(){this.name="";this.children=[];this.data=null;this.up=null;return true},_initValues:function(cfg){this.setName(cfg.name);this.setValue(cfg.value);this.setChildren(cfg.children);return true},_selfCheck:function(){return Boolean(typeof this.name==="string"&&this.name.length>0)},checkNode:function(node){return Boolean(node&&SLDiagram.TreeStoreItem.isInstanceOf(node))},checkObject:function(obj){return Boolean(obj&&obj.name)},setName:function(name){if(name&&name.length>0){this.name=String(name);return true}else{return false}},getName:function(){return String(this.name)},setParent:function(node){if(this.checkNode(node)||node===null){this.up=node;return true}else{console.error("ERROR: Неверный тип узла");return false}},getParent:function(){return this.up},setValue:function(value){if(typeof value!=="undefined"){this.data=value;return true}else{return false}},getValue:function(){return this.data},hasValue:function(){return Boolean(this.data!==null)},addChild:function(node){var newNode;if(typeof this.children==="function"){return false}if(this.checkNode(node)){this.children.push(node);node.setParent(this);return true}else{if(this.checkObject(node)){newNode=new SLDiagram.TreeStoreItem({name:node.name});this.children.push(newNode);newNode.setValue(node.value);newNode.setParent(this);newNode.setChildren(node.children);return true}else{return false}}},setChildAtPath:function(path,node){var items=path.split("/");var i,item,child,current;SLDiagram.Utils.clearEmptyItems(items);current=this;for(i=0;i<items.length;i++){item=items[i];child=current.getChildByName(item);if(!child){child=new SLDiagram.TreeStoreItem({name:item});current.addChild(child)}current=child}return current.addChild(node)},setChildren:function(children){var res=false;var res2=false;var nodes;var i;var _=SLDiagram.Underscore;if(typeof children==="object"&&!_.isEmpty(children)){nodes=children;for(i in nodes){if(nodes.hasOwnProperty(i)){res=this.addChild(nodes[i]);if(res){res2=true}}}return res2}else{if(typeof children==="function"){this.children=children;return true}else{return false}}},getChildren:function(){if(typeof this.children==="object"&&typeof this.children.length==="number"){return this.children}else{if(typeof this.children==="function"){return this.children(this)}}},delAllChildren:function(){if(typeof this.children==="function"){return false}this.children.length=0;this.children=[];return true},delChildById:function(id){if(typeof this.children==="function"){return false}if(0<=id&&id<this.children.length){this.children.splice(id,1);return true}else{return false}},delChildByName:function(name){if(typeof this.children==="function"){return false}var children=this.getChildren();for(var i in children){if(children.hasOwnProperty(i)){if(children[i].name===name){children.splice(i,1);return true}}}return false},del:function(){var p=this.getParent();if(p!==null){p.delChildByName(this.getName());return true}else{return false}},hasChildren:function(){return Boolean(this.children.length>0||typeof this.children==="function")},getChildByName:function(name){var children=this.getChildren();for(var i in children){if(children.hasOwnProperty(i)){var child=children[i];if(child.getName()===name){return child}}}return null},searchChildByName:function(name){var selfName=this.getName();if(selfName===name){return this}else{var children=this.getChildren();var res;for(var i in children){if(children.hasOwnProperty(i)){res=children[i].searchChildByName(name);if(res!==null){return res}}}}return null},getChildByPath:function(path){path=String(path);if(path){var items=path.split("/");var item;var node=this;var k=0;for(var i in items){if(items.hasOwnProperty(i)){item=items[i];node=node.getChildByName(item);if(node===null){return null}else{if(k>=items.length-1){return node}}k++}}}else{return null}return null},getPath:function(full){var path="";var up=this.getParent();if(up!==null){path=up.getPath(true)}if(full){path=path+((path.length>0)?"/":"")+this.getName()}return path},exportToObject:function(){if(this.hasChildren()===true){var children=this.getChildren();var child;var obj={};for(var i in children){if(children.hasOwnProperty(i)){child=children[i];obj[child.getName()]=child.exportToObject()}}return obj}else{return this.getValue()}},importFromObject:function(obj){if(typeof obj==="object"&&obj!==null){for(var i in obj){if(obj.hasOwnProperty(i)){var item=new SLDiagram.TreeStoreItem({name:i});item.importFromObject(obj[i]);this.addChild(item)}}}else{this.setValue(obj)}return true},getRoot:function(){var p=this.getParent();if(p===null){return this}else{return p.getRoot()}},forEach:function(fn){fn(this);var children=this.getChildren();var child;for(var i in children){if(children.hasOwnProperty(i)){child=children[i];child.forEach(fn)}}return true}});return SLDiagram.TreeStoreItem});define("core/properties/Prototype",["core/properties/deps","core/Class","core/TreeStoreItem"],function(SLD,Class,TreeStoreItem){var Prototype=Class.define(null,{_type:"SLDiagram.properties.Prototype",_clonable:true,_initDefaults:function(){this.menu=[];this.prepareChildCfg=null;return true},_initValues:function(cfg){var i;this.setTreeStoreItem(cfg.item);this.setConfig(cfg.config);var parent;if(this.item){parent=this.item.getParent();if(parent&&parent.prepareChildCfg){cfg=parent.prepareChildCfg(cfg)}}this.setDesc(cfg.desc);this.setNativeType(cfg.nativeType);this.setHidden(cfg.hidden);this.setRequired(cfg.required);this.setExpanded(cfg.expanded);this.setRememberExpanded(cfg.rememberExpanded);if(cfg.hasOwnProperty("setValue")){this._setSetter(cfg.setValue)}if(cfg.hasOwnProperty("getValue")){this._setGetter(cfg.getValue)}if(typeof cfg.decimalPrecision==="number"){this.decimalPrecision=cfg.decimalPrecision}if(typeof cfg.getDecimalPrecision==="function"){this.getDecimalPrecision=cfg.getDecimalPrecision}for(i in cfg){if(cfg.hasOwnProperty(i)){if(typeof this[i]==="undefined"){this[i]=cfg[i]}}}this.setMenu(cfg.menu);if(typeof cfg.prepareChildCfg==="function"){this.prepareChildCfg=cfg.prepareChildCfg}this.hideTrigger=Boolean(cfg.hideTrigger);return true},_selfCheck:function(){return Boolean(SLDiagram.TreeStoreItem.isInstanceOf(this.item)&&typeof this.config==="object"&&this.config!==null)},getDesc:function(){return this.desc},setDesc:function(desc){if(typeof desc==="string"&&desc.length>0){this.desc=desc;return true}else{return false}},check:function(value){var type=this.getNativeType();return Boolean(typeof value===type)},setTreeStoreItem:function(item){if(SLD.TreeStoreItem.isInstanceOf(item)){this.item=item;return true}else{return false}},getTreeStoreItem:function(){return this.item},setConfig:function(config){if(typeof config==="object"&&config!==null){this.config=config;return true}else{return false}},getConfig:function(){return this.config},getPath:function(){if(!this.path){this.path=this.getTreeStoreItem().getPath(true)}return this.path},getValue:function(el){var config;var path=this.getPath();if(el&&typeof el.getConfigProperty==="function"){return el.getConfigProperty.call(el,path)}else{if(el&&el.type&&typeof el.type.getConfigProperty==="function"){return el.type.getConfigProperty.call(el,path)}else{config=this.getConfig();return SLD.getProperty(config,path)}}},getValueFromElements:function(els){var values=[];var i,el,equals,propDesc;equals=function(values){if(values.length===1){return values[0]}else{if(values.length===0){return null}}var i,currentValue,firstValue;firstValue=values[0];for(i=1;i<values.length;i++){currentValue=values[i];if(currentValue!==firstValue){return null}}return firstValue};for(i=0;i<els.length;i++){el=els[i];propDesc=el.getConfigDescriptor().getChildByPath(this.getPath());if(propDesc){values.push(this.getValue(el))}}return equals(values)},setValue:function(el,value){var v=this.convert(value);var path,config;if(v===null&&value!==null){return false}else{path=this.getPath();if(el&&typeof el.setConfigProperty==="function"){el.setConfigProperty(path,v);return true}else{if(el&&el.type&&typeof el.type.setConfigProperty==="function"){el.type.setConfigProperty.call(el,path,v);return true}else{return false}}}},convert:function(value){if(!this.converter){var type=this.getNativeType();var fn;switch(type){case"string":fn=function(value){return String(value)};break;case"number":fn=function(value){if(isNaN(value)){return null}return Number(value)};break;case"boolean":fn=function(value){var yes=["1","+","t","true","y","yes","д","да"];var s=String(value);return((yes.indexOf(s)>=0||(!isNaN(s)&&Number(s)>0))?true:false)};break;default:fn=function(value){return value}}this.converter=fn}return((value===null)?null:this.converter(value))},format:function(value){return value},getEditorConfig:function(els){var res;res={};if(typeof this.min==="number"){res.minValue=this.min}if(typeof this.max==="number"){res.maxValue=this.max}res.allowBlank=((this.getRequired())?false:true);res.readOnly=this.getReadonly();res.enableKeyEvents=true;res.listeners={keydown:function(editor,e,eOpts){if(e.keyCode===e.BACKSPACE&&(editor.readOnly||editor.getValue()==="")){e.preventDefault()}}};var type=this.getNativeType();if(type==="number"){res.decimalPrecision=this.getDecimalPrecision(els);res.decimalSeparator=".";res.submitLocaleSeparator=false;res.hideTrigger=Boolean(this.hideTrigger)}return res},getEditor:function(els){if(SLD.checkExtJS()===false){console.error("ERROR: ExtJS не загружен");return null}if(this.getReadonly()){return null}var type=this.getNativeType();var field=null;var cfg=this.getEditorConfig(els);switch(type){case"number":field=Ext.create("Ext.form.field.Number",cfg);break;case"boolean":field=Ext.create("Ext.form.field.Checkbox",cfg);break;default:field=Ext.create("Ext.form.field.Text",cfg)}return Ext.create("Wasutp.Schemes.extends.CellEditor",{field:field})},setNativeType:function(type){if(this.checkNativeType(type)){this.nativeType=type;return true}else{return false}},getNativeType:function(){if(!this.nativeType){var type=typeof this.getValue();if(this.checkNativeType(type)){return type}else{return"string"}}else{return this.nativeType}},checkNativeType:function(type){return Boolean(type==="string"||type==="number"||type==="boolean")},convertToNativeType:function(value){var type=this.getNativeType();switch(type){case"number":return Number(value);case"boolean":return SLD.Utils.string2boolean(String(value));default:return String(value)}},toJSON:function(){return{desc:this.getDesc(),type:"Base",nativeType:this.getNativeType(),item:this.getTreeStoreItem().getPath(true)}},getDefaultNativeValue:function(){return this.getValue()},getDefaultFormatedValue:function(){var value=this.getDefaultNativeValue();var formatted=this.format(value);return formatted},setHidden:function(hidden){this.hidden=Boolean(hidden);return true},getHidden:function(){return Boolean(this.hidden)},_setSetter:function(setter){if(typeof setter==="function"){this.setValue=setter;return true}else{return false}},_setGetter:function(getter){if(typeof getter==="function"){this.getValue=getter;return true}else{return false}},setRequired:function(value){this.required=Boolean(value);return true},getRequired:function(){return Boolean(this.required)},setReadonly:function(value){this.readonly=Boolean(value);return true},getReadonly:function(){return Boolean(this.readonly)},appendMenu:function(item){var checkItem=Boolean(item&&typeof item.text==="string"&&item.text.length>0&&typeof item.handler==="function");if(checkItem){this.menu.push(item)}return checkItem},setMenu:function(items){if(!(typeof items==="object"&&items.length>0)){return[]}var i,item;if(!this.menu){this.menu=[]}this.menu.length=0;for(i=0;i<items.length;i++){item=items[i];this.appendMenu(item)}return this.getMenu()},getMenu:function(){return this.menu},setExpanded:function(value){this.expanded=Boolean(value);return true},getExpanded:function(){return Boolean(this.expanded)},setRememberExpanded:function(value){this.rememberExpanded=Boolean(value);return true},getRememberExpanded:function(){return Boolean(this.rememberExpanded)},getDecimalPrecision:function(els){if(this.getNativeType()!=="number"){return null}if(typeof this.decimalPrecision==="number"&&isFinite(this.decimalPrecision)){return this.decimalPrecision}else{return 10}},createChild:function(cfg){if(typeof this.prepareChildCfg==="function"){cfg=this.prepareChildCfg(cfg)}return cfg}});SLD.properties.Prototype=Prototype;return Prototype});define("core/properties/Base",["core/properties/deps","core/properties/Prototype","core/Class"],function(SLD,Prototype,Class){var Base=Class.define(Prototype,{_type:"SLDiagram.properties.Base",format:function(value){if(!this.formatter){var type=this.getNativeType();var fn;switch(type){case"string":fn=function(value){return String(value)};break;case"number":fn=function(value){if(isNaN(value)){return null}return Number(value)};break;case"boolean":fn=function(value){return((Boolean(value))?"true":"false")};break;default:fn=function(value){return value}}this.formatter=fn}return((value===null)?null:this.formatter(value))}});SLD.properties.Base=Base;return Base});define("core/sldiagram-statics",["core/sldiagram","core/properties/Base"],function(SLD,BaseType){SLDiagram.isNumber=function(arg){var type=typeof arg;var checkNumber=Boolean(type==="number"&&!isNaN(arg)&&isFinite(arg));var checkString=Boolean(type==="string"&&!isNaN(arg)&&isFinite(arg)&&arg.length>0);return Boolean(checkNumber||checkString)};SLDiagram.toNumber=function(value){if(SLDiagram.isNumber(value)){return Number(value)}else{return null}};SLDiagram.checkProperty=function(obj,path){var keys=path.split("/");var o=obj;for(var i=0;i<keys.length;i=i+1){var field=keys[i];if(i<keys.length-1&&typeof o[field]==="object"&&o[field]!==null){o=o[field]}else{if(i===keys.length-1&&typeof o[field]!=="undefined"){return true}else{if(i>keys.length-1){return false}}}}return false};SLDiagram.getProperty=function(obj,path){var keys=path.split("/");var o=obj;if(typeof o!=="object"||o===null){return null}for(var i=0;i<keys.length;i=i+1){var field=keys[i];if(i<keys.length-1&&typeof o[field]==="object"&&o[field]!==null){o=o[field]}else{if(i===keys.length-1&&typeof o[field]!=="undefined"){return o[field]}}}return null};SLDiagram.getConfigProperty=function(path,defaultValue,recurs){var keys=path.split("/");var obj=this.config;for(var i=0;i<keys.length;i=i+1){var field=keys[i];if(i<keys.length-1&&typeof obj[field]=="object"&&obj[field]!=null){obj=obj[field]}else{if(i==keys.length-1&&!(typeof obj[field]=="undefined")){return obj[field]}else{if(typeof this.up=="object"&&this.up!=null&&((typeof recurs!="boolean")?true:recurs)){return this.up.getConfigProperty(path,defaultValue,true)}}}}var dv=((typeof defaultValue!="undefined")?defaultValue:null);return dv};SLDiagram.setProperty=function(obj,path,value){var keys=path.split("/");var o=obj;function applyConfigProperties(config,value){if(typeof value=="object"&&value!=null){for(var key in value){if(value.hasOwnProperty(key)){if(typeof config=="undefined"){config=new Object()}config[key]=applyConfigProperties(config[key],value[key])}}}else{if(typeof value!="object"){config=value}}return config}for(var i=0;i<keys.length;i=i+1){var field=keys[i];if(i<keys.length-1&&typeof o[field]=="object"&&o[field]!=null){o=o[field]}else{if(i<keys.length-1&&(typeof o[field]!="object"||o[field]==null)){o[field]=new Object();o=o[field]}else{if(i==keys.length-1&&(typeof value!="object"||value==null)){o[field]=value}else{if(i==keys.length-1&&typeof value=="object"&&value!=null){if(field!==""){o[field]=applyConfigProperties(o[field],value)}else{o=applyConfigProperties(o,value)}}}}}}};SLDiagram.setConfigProperty=function(path,value){var keys=path.split("/");var obj=this.config;function applyConfigProperties(config,value){if(typeof value=="object"&&value!=null){for(var key in value){if(value.hasOwnProperty(key)){if(typeof config=="undefined"){config=new Object()}config[key]=applyConfigProperties(config[key],value[key])}}}else{if(typeof value!="object"){config=value}}return config}for(var i=0;i<keys.length;i=i+1){var field=keys[i];if(i<keys.length-1&&typeof obj[field]=="object"&&obj[field]!=null){obj=obj[field]}else{if(i<keys.length-1&&(typeof obj[field]!="object"||obj[field]==null)){obj[field]=new Object();obj=obj[field]}else{if(i==keys.length-1&&(typeof value!="object"||value==null)){obj[field]=value}else{if(i==keys.length-1&&typeof value=="object"&&value!=null){if(field!==""){obj[field]=applyConfigProperties(obj[field],value)}else{obj=applyConfigProperties(obj,value)}}}}}}};SLDiagram.delProperty=function(obj,path){var keys=path.split("/");var o=obj;for(var i=0;i<keys.length;i=i+1){var field=(SLDiagram.isNumber(keys[i]))?Number(keys[i]):String(keys[i]);if(typeof o[field]!="object"&&i<keys.length-1){return false}else{if(typeof o[field]=="object"&&o[field]!=null&&i<keys.length-1){o=o[field]}else{if(i==keys.length-1){delete o[field]}}}}return true};SLDiagram.delConfigProperty=function(path){var keys=path.split("/");var obj=this.config;for(var i=0;i<keys.length;i=i+1){var field=(SLDiagram.isNumber(keys[i]))?Number(keys[i]):String(keys[i]);if(typeof obj[field]!="object"&&i<keys.length-1){return false}else{if(typeof obj[field]=="object"&&obj[field]!=null&&i<keys.length-1){obj=obj[field]}else{if(i==keys.length-1){delete obj[field]}}}}return true};SLDiagram.getSysConfigProperty=function(path,defaultValue,recurs){var v;v=SLDiagram.getProperty(this.sysConfig,path);if(v===null&&recurs&&this.up){v=this.up.getSysConfigProperty(path,defaultValue,recurs)}if(v===null&&defaultValue){v=defaultValue}return v};SLDiagram.setSysConfigProperty=function(path,value){SLDiagram.setProperty(this.sysConfig,path,value)};SLDiagram.delSysConfigProperty=function(path){SLDiagram.delProperty(this.sysConfig,path)};SLDiagram.forEach=function(obj,fn){for(var key in obj){if(obj.hasOwnProperty(key)){var value=obj[key];fn.call(this,key,value)}}};SLDiagram.recursForEach=function(obj,fn){function foreach(obj,prefix,fn){for(var i in obj){if(obj.hasOwnProperty(i)){var o=obj[i];if(typeof o!=="object"||o===null){fn.call(this,prefix,i,o)}else{foreach.call(this,o,String(((prefix.length>0)?prefix+"/":"")+i),fn)}}}}foreach.call(this,obj,"",fn)};SLDiagram.cloneObject=function(obj){var res=new Object();for(var key in obj){if(obj.hasOwnProperty(key)){res[key]=obj[key]}}return res};SLDiagram.recursCloneObject=function(obj){var res;if(typeof obj==="object"){res={};for(var key in obj){if(obj.hasOwnProperty(key)){var prop=obj[key];if(typeof prop==="object"&&prop!==null){res[key]=SLDiagram.recursCloneObject(prop)}else{res[key]=prop}}}}else{res=obj}return res};SLDiagram.isEmptyObject=function(obj){if(typeof obj==="undefined"||obj===null){return true}if(typeof obj!=="object"){return false}var res=true;for(var i in obj){if(obj.hasOwnProperty(i)){res=false;break}}return res};SLDiagram.clearObject=function(obj){for(var k in obj){if(obj.hasOwnProperty(k)){var v=obj[k];if(SLDiagram.isEmptyObject(v)){delete obj[k];SLDiagram.clearObject(obj)}else{if(typeof v==="object"){SLDiagram.clearObject(v);if(SLDiagram.isEmptyObject(v)){delete obj[k];SLDiagram.clearObject(obj)}}}}}};SLDiagram.SchemeAndDatabaseIds=function(data){this.data=[];this.searchBySchemeId=function(schemeId){var res=[];for(var i in this.data){if(this.data.hasOwnProperty(i)){var d=this.data[i];if(d.ID_SCHEME==schemeId){res.push(d)}}}if(res.length>0){return res}else{return null}};this.searchByDatabaseId=function(dbId){var res=[];for(var i in this.data){if(this.data.hasOwnProperty(i)){var d=this.data[i];if(d.ID_DATABASE==dbId){res.push(d)}}}if(res.length>0){return res}else{return null}};this.getDatabaseIdBySchemeId=function(schemeId){var ids=this.searchBySchemeId(schemeId);var res=[];for(var i in ids){if(ids.hasOwnProperty(i)){var id=ids[i];res.push(id.ID_DATABASE)}}return res};this.getSchemeIdByDatabaseId=function(dbId){var ids=this.searchByDatabaseId(dbId);var res=[];for(var i in ids){if(ids.hasOwnProperty(i)){var id=ids[i];res.push(id.ID_SCHEME)}}return res};this.getNextSchemeId=function(){var maxId=-Infinity;var i;for(i in this.data){if(this.data.hasOwnProperty(i)){var d=this.data[i];if(SLDiagram.isNumber(d.ID_SCHEME)){if(Number(d.ID_SCHEME)>maxId){maxId=Number(d.ID_SCHEME)}}}}if(maxId===-Infinity){maxId=0}return maxId+1};this.add=function(data){var sld;this.data.push({GTYPE:((SLDiagram.isNumber(data.GTYPE))?Number(data.GTYPE):null),ID_SCHEME:Number(data.ID_SCHEME),ID_DATABASE:Number(data.ID_DATABASE),ID_TABLE:Number(data.ID_TABLE),regim:Number(data.regim),da_sys_gtopt_define_alias:data.da_sys_gtopt_define_alias,meas_val_id_param:data.meas_val_id_param,source_id:data.source_id,scale:data.scale});sld=this.getSLDiagram();if(sld){sld.getSetterChangedState().execute(true)}return true};this.checkData=function(data){return true};this.setData=function(data,replace){var i;if(typeof replace==="undefined"||replace){this.clearData()}for(i in data){if(data.hasOwnProperty(i)){this.add(data[i])}}return true};this.clearData=function(){var sld;if(this.data.length===0){return false}else{this.data.length=0;sld=this.getSLDiagram();if(sld){sld.getSetterChangedState().execute(true)}return true}};this.getAllDatabaseIds=function(){var i,d,all={},data,res=[];data=this.data;for(i in data){if(data.hasOwnProperty(i)){d=data[i];all[d.ID_DATABASE]=null}}for(i in all){if(all.hasOwnProperty(i)){res.push(Number(i))}}return res};this.getAllSchemeIds=function(){var data,d,i,all={},res=[];data=this.data;for(i in data){if(data.hasOwnProperty(i)){d=data[i];all[d.ID_SCHEME]=null}}for(i in all){if(all.hasOwnProperty(i)){res.push(Number(i))}}return res};this.deleteBySchemeId=function(id){var i,d,sld;sld=this.getSLDiagram();for(i=this.data.length-1;i>=0;i--){d=this.data[i];if(d.ID_SCHEME==id){this.data.splice(i,1);if(sld){sld.getSetterChangedState().execute(true)}return true}}return false};this.deleteBySchemeIdAndRegim=function(id,regim){var i,d,sld,res=false;if(!SLDiagram.isNumber(id)){throw new Error("Wrong type of id")}if(!SLDiagram.isNumber(regim)){throw new Error("Wrong type of regim")}id=Number(id);regim=Number(regim);sld=this.getSLDiagram();for(i=this.data.length-1;i>=0;i--){d=this.data[i];if(d.ID_SCHEME===id&&d.regim===regim){this.data.splice(i,1);if(sld){sld.getSetterChangedState().execute(true)}res=true}}return res};this.getSLDiagram=function(){return((this._sldiagram)?this._sldiagram:null)};this.setSLDiagram=function(sld){if(sld){this._sldiagram=sld;return true}else{return false}};this.setData(data)};SLDiagram.toString=function(arg){return(Object.prototype.toString.call(arg))};SLDiagram.isObject=function(arg){return Boolean(typeof arg==="object"&&arg!==null)};SLDiagram.isArray=function(arg){return Boolean(SLDiagram.toString(arg)==="[object Array]")};SLDiagram.isSLDiagram=function(arg){return Boolean(typeof arg==="object"&&arg!==null&&arg.objectType==="SLDiagram")};SLDiagram.isType=function(arg){return Boolean(typeof arg==="object"&&arg!==null&&arg.objectType==="Type")};SLDiagram.isElement=function(arg){return Boolean(typeof arg==="object"&&arg!==null&&arg.objectType==="Element")};SLDiagram.isFormat=function(arg){return Boolean(typeof arg==="object"&&arg!==null&&arg.objectType==="Format")};SLDiagram.calcRandA=function(p,center){var c;if(typeof center=="undefined"){c={x:0,y:0}}else{if(typeof center.x!="number"||typeof center.y!="number"){c={x:0,y:0}}else{c=center}}if(typeof p=="undefined"||typeof p.x!="number"||typeof p.y!="number"){console.log("p = ",p);throw new Error('ERROR: p - required argument. Must include properties "x" and "y"')}var dx=p.x-c.x;var dy=p.y-c.y;p.r=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2));var aa;if(p.r!==0){if(dx<0){if(dy>0){aa=-180}else{aa=180}}else{aa=0}p.a=SLDiagram.simplifyAngle(Math.atan(dy/dx)*180/Math.PI-aa)}else{p.a=0}return p};SLDiagram.calcXandY=function(p,center){var c;if(typeof center=="undefined"){c={x:0,y:0}}else{if(typeof center.x!="number"||typeof center.x!="number"){c={x:0,y:0}}else{c=center}}if(typeof p=="undefined"||typeof p.a!="number"||typeof p.r!="number"){console.log("p = ",p);throw'ERROR: p - required argument. Must include properties "a" and "r"'}p.x=Math.cos(p.a*Math.PI/180)*p.r+c.x;p.y=Math.sin(p.a*Math.PI/180)*p.r+c.y;return p};SLDiagram.calcR=function(p,center){var c;if(typeof center=="undefined"){c={x:0,y:0}}else{if(typeof center.x!="number"||typeof center.y!="number"){console.warn('WARN: center must have properties "x" and "y". Using default values = 0.');c={x:0,y:0}}else{c=center}}var dx=p.x-c.x;var dy=p.y-c.y;p.r=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2));return p};SLDiagram.isColor=function(color){var res;if(color.charAt(0)==="#"&&color.length===7){res=true}else{res=false}return res};SLDiagram.toColor=function(color){if(typeof color!=="string"){try{color=String(color)}catch(ex){console.error("Error at convert to string:",ex);return null}}var c="";var length=c.length;var code,symbol;var code0="0".charCodeAt(0);var code9="9".charCodeAt(0);var codea="a".charCodeAt(0);var codef="f".charCodeAt(0);var codeA="A".charCodeAt(0);var codeF="F".charCodeAt(0);for(var j=0;j<color.length;j++){symbol=color.charAt(j);code=color.charCodeAt(j);if((code0<=code&&code<=code9)||(codea<=code&&code<=codef)||(codeA<=code&&code<=codeF)){c=c+symbol}if(c.length>=6){break}}if(c.length<6){return null}c=c.toUpperCase();return"#"+c};SLDiagram.getColorBright=function(color){if(SLDiagram.isColor(color)===false){return null}var colorNumber=0;var j=1;var sum=0;var avg=0;for(var i=0;i<3;i=i+1){colorNumber=parseInt(color.substring(j,j+2),16);j=j+2;sum=sum+colorNumber}avg=sum/3;if(avg<=127){return"dark"}else{return"light"}};SLDiagram.checkRequiredProperties=function(obj,props){if(SLDiagram.isObject(obj)===false){return null}for(var i in props){if(props.hasOwnProperty(i)){var prop=props[i];if(typeof obj[prop]==="undefined"){return false}}}return true};SLDiagram.diffObjects=function(left,right,opts){var res={};if(SLDiagram.isObject(left)==false||SLDiagram.isObject(right)==false){return res}var l,r;var strong=function(l,r){return Boolean(l!==r)};var notStrong=function(l,r){return Boolean(l!=r)};var check;if(typeof opts==="object"&&opts!==null&&opts.check==="notstrong"){check=notStrong}else{check=strong}for(var i in left){if(left.hasOwnProperty(i)){l=left[i];r=right[i];if(typeof opts!=="undefined"&&opts.recurs==true&&SLDiagram.isObject(l)){res[i]=SLDiagram.diffObjects(l,r,opts);res[i].type="object"}else{if(check(l,r)){res[i]={left:l,right:r,type:"diff"}}}}}for(var i in right){if(right.hasOwnProperty(i)){r=right[i];l=left[i];if(typeof opts!=="undefined"&&opts.recurs==true&&SLDiagram.isObject(r)){res[i]=SLDiagram.diffObjects(l,r,opts);res[i].type="object"}else{if(check(l,r)){res[i]={left:l,right:r,type:"diff"}}}}}return res};SLDiagram.applyObject=function(obj1,obj2){for(var i in obj2){if(obj2.hasOwnProperty(i)){obj1[i]=obj2[i]}}return obj1};SLDiagram.calcCenterPositionForGroup=function(elements){var min={x:Infinity,y:Infinity};var max={x:-Infinity,y:-Infinity};var el,t,pos;for(var i in elements){if(elements.hasOwnProperty(i)){el=elements[i];t=el.type;pos=t.getPosition.call(el);if(pos.x>max.x){max.x=pos.x}if(pos.y>max.y){max.y=pos.y}if(pos.x<min.x){min.x=pos.x}if(pos.y<min.y){min.y=pos.y}}}return{x:min.x+(max.x-min.x)/2,y:min.y+(max.y-min.y)/2}};SLDiagram.simplifyAngle=function(a){if(a>=360){a=a-Math.floor(a/360)*360}else{if(a<0){a=a-Math.floor(a/360)*360}}return a};SLDiagram.numberAscSorter=function(a,b){return Number(a)-Number(b)};SLDiagram.setTimeout=function(fn,interval,scope,opts){var r=function(){fn.call(scope,opts)};return setTimeout(r,interval)};SLDiagram.setInterval=function(fn,interval,scope,opts){var r=function(){fn.call(scope,opts)};return setInterval(r,interval)};SLDiagram.degreeToRadian=function(a){return a/180*Math.PI};SLDiagram.radianToDegree=function(a){return a/Math.PI*180};SLDiagram.calcMinRFromPoints=function(points,center){if(!(points&&SLDiagram.isArray(points)&&points.length>0)){if(SLDiagram.debugMode){console.warn("WARN: SLDiagram.calcMinRFromPoints: Не указан массив точек или он пустой")}return null}if(!(center)){center={x:0,y:0}}var p;var min={x:Infinity,y:Infinity};min=SLDiagram.calcR(min,center);for(var i in points){if(points.hasOwnProperty(i)){p=points[i];p=SLDiagram.calcR(p,center);if(p.r<min.r){min=p}}}if(min.x===Infinity&&min.y===Infinity){return null}else{return min}};SLDiagram.precisionNumber=function(number,precision){if(typeof number==="number"&&typeof precision==="number"){var p=Math.pow(10,precision);return Number(Math.round(number*p)/p)}else{console.error("ERROR: SLDiagram.precisionNumber: Переданы нечисловые параметры");return null}};SLDiagram.isEqualObjects=function(obj1,obj2){for(var name in obj1){if(obj1.hasOwnProperty(name)){if(obj2.hasOwnProperty(name)==false||(obj2.hasOwnProperty(name)==true&&obj1[name]!==obj2[name])){return false}}}for(var name in obj2){if(obj2.hasOwnProperty(name)){if(obj1.hasOwnProperty(name)==false||(obj1.hasOwnProperty(name)==true&&obj2[name]!==obj1[name])){return false}}}return true};SLDiagram.persentStringToNumber=function(persent){var testRe=new RegExp("\\d+\\.\\d+%|\\d+%");if(!(typeof persent==="string"&&testRe.test(persent))){console.warn("WARN: Аргумент persent не является процентом")}var extrRe=new RegExp("\\d+\\.\\d+|\\d+");var res=Number(extrRe.exec(persent))/100;return res};SLDiagram.numberToPersentString=function(num,precision){if(typeof precision==="number"){num=SLDiagram.precisionNumber(num*100,precision)}else{num=num*100}return String(num)+"%"};SLDiagram.getRandomInt=function(min,max){return Math.floor(Math.random()*(max-min+1))+min};SLDiagram.arrayOfObjectsSearchByField=function(array,field,value){for(var i in array){if(array.hasOwnProperty(i)){var a=array[i];if(a[field]===value){return a}}}return null};SLDiagram.pushIntoArrayOfObjects=function(array,field1,value1,constructor,field2,value2){var a=SLDiagram.arrayOfObjectsSearchByField(array,field1,value1);if(a===null){a=constructor();a[field1]=value1;a[field2]=[];array.push(a)}a[field2].push(value2)};SLDiagram.extend=function(obj1,obj2){var newObj=SLDiagram.cloneObject(obj1);for(var i in obj2){if(obj2.hasOwnProperty(i)){newObj[i]=obj2[i]}}return newObj};SLDiagram.vectorRotate=function(v,a){a=SLDiagram.degreeToRadian(a);var cos=Math.cos;var sin=Math.sin;return{x:cos(a)*v.x+sin(a)*v.y,y:-sin(a)*v.x+cos(a)*v.y}};SLDiagram.getConfigDescriptor=function(config,sldiagram){var cd=new SLDiagram.properties.Store({sldiagram:sldiagram});var cfg={config:config};cd.importFromObject(config);cd.forEach(function(item){if(item.getParent()!==null){cfg.item=item;cfg.desc=item.getName();item.setValue(new SLD.properties.Base(cfg))}});return cd};SLDiagram.createConfigDescriptor=function(config,desc,sldiagram){var store=new SLDiagram.properties.Store({sldiagram:sldiagram});var cfg={config:config};store.setChildren(desc);store.forEach(function(item){var value,desc,Type,type,cfg2={},finalCfg;if(item.getParent()!==null){value=item.getValue();cfg2.item=item;if(value){if(typeof value==="string"){cfg2.desc=value}else{if(typeof value==="object"){if(typeof value.desc==="string"){cfg2.desc=value.desc}if(typeof value.type==="string"){Type=SLD.properties[value.type]}}}}if(!Type){Type=BaseType}if(!cfg2.desc){cfg2.desc=item.getName()}finalCfg=SLD.extend(cfg,cfg2);finalCfg=SLD.extend(finalCfg,value);delete finalCfg.type;type=new Type(finalCfg);item.setValue(type)}});return store};SLDiagram.stringTrim=function(str,symbols){if(!symbols){symbols="\\s"}return str.replace(new RegExp("^["+symbols+"]+|["+symbols+"]+$","g"),"")};SLDiagram.getNameFromPath=function(path){path=String(path);var names=path.split("/");return names[names.length-1]};SLDiagram.checkExtJS=function(){if(typeof Ext==="object"&&Ext!==null&&typeof Ext.getVersion==="function"){var ver=Ext.getVersion();if(ver.isGreaterThan("4.1")){if(ver.isGreaterThan("5.0")){console.warn("WARN: Доступна непроверенная версия ExtJS")}return true}else{return false}}else{return false}};SLDiagram.isConfigProperty=function(arg){return Boolean(arg&&arg.objectType==="ConfigProperty")};SLDiagram.default16Colors=["#000000","#808080","#C0C0C0","#FFFFFF","#800080","#000080","#008080","#008000","#808000","#800000","#FF00FF","#0000FF","#00FFFF","#00FF00","#FFFF00","#FF0000"];SLDiagram.default40Colors=["#000000","#993300","#333300","#003300","#003366","#000080","#333399","#333333","#800000","#FF6600","#808000","#008000","#008080","#0000FF","#666699","#808080","#FF0000","#FF9900","#99CC00","#339966","#33CCCC","#3366FF","#800080","#969696","#FF00FF","#FFCC00","#FFFF00","#00FF00","#00FFFF","#00CCFF","#993366","#C0C0C0","#FF99CC","#FFCC99","#FFFF99","#CCFFCC","#CCFFFF","#99CCFF","#CC99FF","#FFFFFF"];SLDiagram.newSchemeName="Новая ...";return SLDiagram});define("core/Ajax",["core/sldiagram","core/sldiagram-statics"],function(){SLDiagram.Ajax={};SLDiagram.Ajax.getXMLHttpRequest=function(){if(window.XMLHttpRequest){return new window.XMLHttpRequest()}else{try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(ex){return null}}};SLDiagram.Ajax.request=function(rawParams){var convertParams=function(params){if(typeof params==="string"){return params}else{if(SLDiagram.isObject(params)!==true){return""}}var res="";for(var p in params){if(params.hasOwnProperty(p)){if(res.length>0){res=res+"&"}var v=params[p];res=res+p+"="+String(v)}}return res};var req=this;if(typeof rawParams==="undefined"){console.error("ERROR: rawParams not exist");return}if(SLDiagram.checkRequiredProperties(rawParams,["url"])!==true){console.error("ERROR: rawParams not include all required properties");return}var params={url:rawParams.url,params:convertParams(rawParams.params),method:((typeof rawParams.method!=="undefined")?rawParams.method:"POST"),timeout:((typeof rawParams.timeout!=="undefined")?rawParams.timeout:120000),success:((typeof rawParams.success==="function")?rawParams.success:function(){}),unsuccess:((typeof rawParams.unsuccess==="function")?rawParams.unsuccess:function(){}),failure:((typeof rawParams.failure==="function")?rawParams.failure:function(){}),scope:((typeof rawParams.scope!=="undefined")?rawParams.scope:window)};var ajax=SLDiagram.Ajax.getXMLHttpRequest();if(ajax==null){console.error("ERROR: Ajax not supported");return}var handler=function(){var ajax=this;if(ajax.readyState===4){if(ajax.status===200){var response;try{if(ajax.responseText){response=JSON.parse(ajax.responseText)}else{response={}}}catch(ex){console.warn("Ошибка на стороне сервера",ex);ajax.params.unsuccess.call(ajax.params.scope,ajax.responseText);return}if(typeof response.errors!=="undefined"){SLDiagram.Debug.addErrors(response.errors)}if(typeof response.messages!=="undefined"){SLDiagram.Debug.addMessages(response.messages)}ajax.params.success.call(ajax.params.scope,response)}else{ajax.failure()}}};ajax.failure=function(){var ajax=this;var title="Сервер недоступен";var message;if(ajax.responseText!=="undefined"&&ajax.responseText){message=ajax.responseText}else{message=""}SLDiagram.Debug.addMessage(title,message,SLDiagram.Debug.statuses.ERROR);ajax.params.failure.call(ajax.params.scope)};if(params.method==="GET"){params.url=params.url+"?"+params.params}ajax.open(params.method,params.url);ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded");ajax.onreadystatechange=handler;ajax.params=params;try{if(params.method!=="GET"){ajax.send(params.params)}else{ajax.send()}}catch(ex){ajax.failure()}};return SLDiagram.Ajax});define("core/Debug",["core/sldiagram"],function(){SLDiagram.Debug={messages:[],wasutpErrorsHandler:null,statuses:{ERROR:0,INFO:1},addMessage:function(title,message,status,opts){var showPopUp;if(typeof message!=="string"){message=""}if(typeof status!=="number"||(typeof status==="string"&&isFinite(status))){status=this.statuses.ERROR}if(typeof opts!=="object"||opts===null){opts={}}if(status===this.statuses.ERROR){showPopUp=Boolean((typeof opts.showPopUp==="undefined")?true:opts.showPopUp)}else{showPopUp=Boolean((typeof opts.showPopUp==="undefined")?false:opts.showPopUp)}if(this.wasutpErrorsHandler){this.wasutpErrorsHandler.addMessage(title,message,status,null,showPopUp)}else{this.pushMessageWasutpErrorsHandler();if(status===this.statuses.ERROR){console.error(title+": "+message)}else{console.log(title+": "+message)}}},addMessages:function(data){var message;if(data.length>0){for(var i in data){if(data.hasOwnProperty(i)){var d=data[i];message=((d.message)?String(d.message):"");this.addMessage(d.title,message,this.statuses.INFO)}}}},addErrors:function(data){var message;if(data.length>0){for(var i in data){if(data.hasOwnProperty(i)){var d=data[i];message=((d.message)?String(d.message):"");this.addMessage(d.title,message,this.statuses.ERROR)}}}},wasutpErrorsHandlerMessage:"Не настроен обработчик всплывающих сообщений iSMS для использования из схем SLDiagram. Сообщения будут выводиться в консоль разработчика.",pushMessageWasutpErrorsHandler:function(){if(!this._messageWasutpErrorsHandlerState){console.warn(this.wasutpErrorsHandlerMessage);this._messageWasutpErrorsHandlerState=true}}};return SLDiagram.Debug});define("core/Console",["core/sldiagram","core/sldiagram-statics"],function(){SLDiagram.Console=function(cfg){SLDiagram.applyObject(this,cfg);var funcs=["debug","warn","log","info","error","time","timeEnd","group","groupCollapsed","groupEnd"];var createFunc=function(fn){return function(){if(SLDiagram.debugMode){console[fn].apply(console,arguments)}}};for(var i in funcs){if(funcs.hasOwnProperty(i)){var fn=funcs[i];this[fn]=createFunc(fn)}}this.getCallStack=function(){var callstack=new Array();try{i.dont.exist+=0}catch(e){if(e.stack){var lines=e.stack.split("\n");for(var i=0,len=lines.length;i<len;i++){callstack.push(lines[i])}callstack.shift()}}return callstack}};SLDiagram.console=new SLDiagram.Console();return SLDiagram.console});define("core/Element",["core/sldiagram","core/sldiagram-statics"],function(){SLDiagram.Element=function(cfg){this.objectType="Element";this.config=(typeof cfg.config=="object")?cfg.config:new Object();this.sysConfig=new Object();this.type=(typeof cfg.type=="object")?cfg.type:(function(){console.trace();throw'Field "type" not defined in new element';return null})();this.up=this.type;this.displayObject=null;this.toJSON=(typeof cfg.toJSON=="function")?cfg.toJSON:this.type.toJSON};SLDiagram.Element.prototype={};return SLDiagram.Element});define("core/Format",["core/sldiagram","core/sldiagram-statics"],function(){SLDiagram.Format=function(cfg){var i;this.sldiagram=((SLDiagram.isSLDiagram(cfg.sldiagram))?cfg.sldiagram:null);this.canvas=this.sldiagram;this.setSLDiagram=function(sld){var s;if(typeof sld==="undefined"||sld==null){this.clearFormat()}else{this.sldiagram=sld;this.canvas=this.sldiagram;this.afterSetSLDiagram()}};this.getSLDiagram=function(){return((this.sldiagram)?this.sldiagram:null)};this.clearFormat=function(){this.beforeClearFormat();this.sldiagram=null;this.canvas=null};this.config=((SLDiagram.isObject(cfg.config))?cfg.config:{scheme:{format:{name:"empty"}}});this.id=((typeof cfg.id==="number")?cfg.id:(function(){throw new Error("FATAL: cfg.id not exist");return null})());this.name=((typeof cfg.name==="string")?cfg.name:(function(){throw new Error("FATAL: cfg.name not exist");return null})());this.objectType="Format";this.saveScheme=((typeof cfg.saveScheme==="function")?cfg.saveScheme:function(){console.warn("WARN: method saveScheme not defined")});this.openScheme=((typeof cfg.openScheme==="function")?cfg.openScheme:function(callback){console.warn("WARN: method openScheme not defined")});this.applyData=((typeof cfg.applyData==="function")?cfg.applyData:function(data){var sld=this.sldiagram;sld.applyData(data)});this.requests=new Object();if(SLDiagram.isObject(cfg.requests)){for(i in cfg.requests){if(cfg.requests.hasOwnProperty(i)){this.requests[i]=cfg.requests[i]}}}this.execRequest=function(requestName){var args=Array.prototype.splice.call(arguments,1);if(typeof this.requests[requestName]==="function"){this.requests[requestName].apply(this,args)}else{console.warn('WARN: request "'+requestName+'" not defined')}};this.getConfigProperty=((typeof cfg.getConfigProperty==="function")?cfg.getConfigProperty:SLDiagram.getConfigProperty);this.setConfigProperty=((typeof cfg.setConfigProperty==="function")?cfg.setConfigProperty:SLDiagram.setConfigProperty);this.delConfigProperty=((typeof cfg.delConfigProperty==="function")?cfg.delConfigProperty:SLDiagram.delConfigProperty);this.runner=new SLDiagram.Runner();this.afterSetSLDiagram=((typeof cfg.afterSetSLDiagram==="function")?cfg.afterSetSLDiagram:function(){});this.beforeClearFormat=((typeof cfg.beforeClearFormat==="function")?cfg.beforeClearFormat:function(){});this.deleteComponent=((typeof cfg.deleteComponent==="function")?cfg.deleteComponent:function deleteComponent(callback){if(typeof callback!=="function"){callback=function(){}}callback()});for(i in cfg){if(cfg.hasOwnProperty(i)&&typeof this[i]==="undefined"){this[i]=cfg[i]}}};return SLDiagram.Format});define("core/Observable",["core/sldiagram"],function(){SLDiagram.Observable=function(){this.listen=function(type,method,opts,scope,context){var listeners,handlers;if(!(listeners=this.listeners)){listeners=this.listeners={}}if(!(handlers=listeners[type])){handlers=listeners[type]=[]}scope=(scope?scope:window);var handler={method:method,scope:scope,context:(context?context:scope)};if(typeof opts!=="undefined"&&opts!==null){if(opts.once===true){handler.once=true}if(opts.block===true){handler.block=true}if(opts.anyContext===true){handler.anyContext=true}}handlers.push(handler)};this.addEvent=this.listen;this.on=this.listen;this.fireEvent=function(type,data,context){var listeners,handlers,i,n,handler,scope;if(!(listeners=this.listeners)){return}if(!(handlers=listeners[type])){return}for(i=0,n=handlers.length;i<n;i++){handler=handlers[i];if(typeof context!=="undefined"&&context!==handler.context&&handler.anyContext!==true){continue}if(handler.running===true){continue}if(handler.block===true&&(typeof handler.running==="undefined"||handler.running===false)){handler.running=true}if(handler.method.call(handler.scope,this,type,data)===false){delete handler.running;return false}else{delete handler.running}if(handler.once===true){handlers.splice(i,1)}}return true};this.fire=this.fireEvent;this.removeEvent=function(type,context){var listeners;var handlers;var i;var n;var res=false;if(!(listeners=this.listeners)){return}if(!(handlers=listeners[type])){return}for(i=0,n=handlers.length;i<n;i++){if(typeof context!=="undefined"&&context!==handlers[i].context){continue}handlers.splice(i,1);i=i-1;n=handlers.length;res=true}return res};this.off=this.removeEvent};return SLDiagram.Observable});define("core/Runner",["core/sldiagram"],function(){SLDiagram.Runner=function(){this.functions=new Object();this.add=function(cfg){if(typeof cfg==="undefined"){console.warn("WARN: cfg is undefined");return false}if(SLDiagram.checkRequiredProperties(cfg,["name","fn","period","scope"])==false){console.warn("WARN: cfg not include all required properties");return false}if(typeof this.functions[cfg.name]!=="undefined"){console.warn('WARN: function "'+cfg.name+'" is exist');return false}var timeout=((cfg.timeout===true)?true:false);this.functions[cfg.name]={fn:cfg.fn,period:cfg.period,scope:cfg.scope,timeout:timeout,state:"stop"};return true};this.start=function(name,arg){var state=this.state(name);switch(state){case"pause":case"stop":var r=this.functions[name];r.state="run";if(r.timeout===false){r.run=setInterval(function(){try{r.fn.call(r.scope,arg)}catch(ex){console.error("ERROR at execute period function",ex)}},r.period)}else{r.run=setTimeout(function(){clearTimeout(r.run);delete r.run;try{r.fn.call(r.scope,arg);r.state="pause"}catch(ex){console.error("ERROR at execute period function",ex)}},r.period)}return true;case"run":console.warn('WARN: function "'+name+'" is already running');default:return false}};this.restart=function(name){var state=this.state(name);switch(state){case"pause":return this.start(name);break;case"run":case"stop":console.warn('WARN: function "'+name+'" was not paused');return false;default:return false}};this.stop=function(name){var state=this.state(name);switch(state){case"pause":case"run":var r=this.functions[name];r.state="stop";if(r.timeout===false){clearInterval(r.run)}else{clearTimeout(r.run)}delete r.run;return true;case"stop":console.warn('WARN: function "'+name+'" is not running');default:return false}};this.toggle=function(name){var state=this.state(name);switch(state){case"run":return this.stop(name);case"stop":case"pause":return this.start(name);default:return false}};this.state=function(name){var r=this.functions[name];if(typeof r==="undefined"){console.warn('WARN: function "'+name+'" not exist');return"not exist"}else{return r.state}};this.states=function(){var res=[];for(var i in this.functions){if(this.functions.hasOwnProperty(i)){res.push({name:i,state:this.state(i)})}}return res};this.remove=function(name){var r=this.functions[name];var state=this.state(name);switch(state){case"not exist":return false;case"pause":case"run":this.stop(name);default:delete this.functions[name];return true}};this.startAll=function(){for(var name in this.functions){if(this.functions.hasOwnProperty(name)){var state=this.state(name);if(state!=="run"){this.start(name)}}}};this.stopAll=function(){for(var name in this.functions){if(this.functions.hasOwnProperty(name)){var state=this.state(name);if(state!=="stop"){this.stop(name)}}}}};return SLDiagram.Runner});define("core/Queue",["core/sldiagram"],function(){SLDiagram.Queue=function(cfg){this.functions=new Array();this.index=-1;this.data=null;this.aborted=false;this.finished=false;this.scope=window;this.add=function(fn,scope){var f=new Object();f.fn=fn;if(typeof scope!=="undefined"){f.scope=scope}this.functions.push(f);return this};this.start=function(data){var t=this;t.index=-1;t.aborted=false;t.finished=false;if(data){t.data=data}else{t.data=null}if(typeof t.onStart==="function"){this.onStart()}t.next()};this.end=function(){if(typeof this.onEnd==="function"){this.onEnd()}this.index=-1;this.finished=true};this.next=function(){if(this.aborted){return}this.index++;if(this.index===this.functions.length){return this.end()}var fn=this.functions[this.index]["fn"];var scope=((this.functions[this.index]["scope"])?this.functions[this.index]["scope"]:this.scope);if(typeof fn==="function"){fn.call(scope,this)}};this.abort=function(){this.index=-1;this.aborted=true;if(typeof this.onAbort==="function"){this.onAbort()}};SLDiagram.applyObject(this,cfg)};return SLDiagram.Queue});define("core/Queue2",["core/sldiagram"],function(){SLDiagram.Queue2=function(cfg){this.functions={};this.currentStep="start";this.add=function(cfg){if(cfg&&cfg.name&&cfg.fn){if(!(cfg.scope)){cfg.scope=this}this.functions[cfg.name]=cfg}else{if(SLDiagram.debugMode){console.warn("WARN: Попытка добавления некорректной функции в цепочку","cfg:",cfg)}}return this};this.start=function(){this.currentStep="start";var fn=this.functions[this.currentStep];if(!this.functions.start){console.error('ERROR: Невозможно запустить цепочку без функции "start"');return}fn.fn.call(fn.scope,this)};this.next=function(result){var prevFn=this.functions[this.currentStep];var nextFnName=((prevFn.results&&prevFn.results[result])?prevFn.results[result]:null);var nextFn;if(nextFnName){this.currentStep=nextFnName;nextFn=this.functions[this.currentStep];nextFn.fn.call(nextFn.scope,this)}}};return SLDiagram.Queue2});define("core/easeljs-extend",["core/sldiagram"],function(){SLDiagram.extendEaselJS=function(){createjs.Graphics.prototype.dashedLineTo=function(x1,y1,x2,y2,dashLen){this.moveTo(x1,y1);var dX=x2-x1;var dY=y2-y1;var dashes=Math.floor(Math.sqrt(dX*dX+dY*dY)/dashLen);var dashX=dX/dashes;var dashY=dY/dashes;var q=0;while(q++<dashes){x1+=dashX;y1+=dashY;this[q%2==0?"moveTo":"lineTo"](x1,y1)}this[q%2==0?"moveTo":"lineTo"](x2,y2);return this}};return SLDiagram.extendEaselJS});define("core/Triggers",["core/sldiagram"],function(){SLDiagram.Triggers=function(){this.triggers=[];this.getTrigger=function(triggerName){var res=Boolean(this.triggers[triggerName]);this.triggers[triggerName]=false;return res};this.setTrigger=function(triggerName){this.triggers[triggerName]=true}};return SLDiagram.Triggers});define("core/CornRect",["core/sldiagram"],function(){SLDiagram.CornRect=function(cfg){this.element=null;this.type="";this.create=function(){var cr=this;var shape=cr.draw();shape.cornRect=cr;shape.addEventListener("click",cr.onClick);shape.addEventListener("mousedown",cr.beforeMove);shape.addEventListener("pressmove",cr.onMove);shape.addEventListener("pressup",cr.afterMove);return shape};this.draw=function(){var cr=this;var el=cr.element;var t=el.type;var shape=new createjs.Shape();var relativePos=cr.getRelativePoint();var cornSize=t.getConfigProperty.call(el,"selection/rect/size",5);var fillColor=t.getConfigProperty.call(el,"selection/rect/color","#FFFF00");shape.graphics.beginFill(fillColor).drawRect(-cornSize/2,-cornSize/2,cornSize,cornSize);return shape};this.getRelativePoint=function(){return{x:0,y:0}};this.beforeMove=function(e){};this.onMove=function(e){};this.afterMove=function(e){};this.onClick=function(e){};var checkProps=SLDiagram.checkRequiredProperties(cfg,["type","element"]);if(checkProps!==true){throw new Error("cfg не содежрит требующихся параметров")}SLDiagram.applyObject(this,cfg)};return SLDiagram.CornRect});define("core/Cursors",["core/sldiagram"],function(SLDiagram){var Cursors={rules:{hand_finger:"url('/shared/cursors/hand.png') 8 4, default",hand:"url('/shared/cursors/hand1.png') 12 12, default",hand_fist:"url('/shared/cursors/hand2.png') 12 12, default","default":"default",crosshair:"crosshair","ew-resize":"ew-resize","nwse-resize":"nwse-resize","ns-resize":"ns-resize","nesw-resize":"nesw-resize",scheme_viewmode:"default",scheme_viewmode_drag:"hand_fist",scheme_editmode:"crosshair",scheme_editmode_drag:"hand_fist",element_viewmode:"hand_finger",element_viewmode_drag:"scheme_viewmode_drag",element_editmode:"hand_finger",element_editmode_drag:"hand_finger"},arrows:{"-180":"ew-resize","-135":"nwse-resize","-90":"ns-resize","-45":"nesw-resize","0":"ew-resize","45":"nwse-resize","90":"ns-resize","135":"nesw-resize","180":"ew-resize"},get2:function(name){var cursor;var rules=((this.isIe())?this.rulesIe:this.rules);if(rules[name]){cursor=rules[name]}if(rules[cursor]&&rules[cursor]!==cursor){cursor=this.get2(cursor)}return cursor},get:function(name){return this.get2(name)||"default"},roundAngle:function(angle){angle=Math.round(angle);angle=SLDiagram.Utils.simplifyDegreeAngle(angle);return Math.round(Math.round(angle/45)*45-0.5)},arrow:function(direction){direction=this.roundAngle(direction);if(this.arrows[direction]){return this.get2(this.arrows[direction])||"default"}else{return"default"}},isIe:function(){if(typeof this._isIe==="boolean"){return this._isIe}else{if(typeof window.Ext==="object"&&window.Ext!==null){this._isIe=Boolean(window.Ext.isIE)}else{this._isIe=false}return this._isIe}}};Cursors.rulesIe={};var ruleName;for(ruleName in Cursors.rules){if(Cursors.rules.hasOwnProperty(ruleName)){Cursors.rulesIe[ruleName]=Cursors.rules[ruleName]}}Cursors.rulesIe.hand_finger="url('/shared/cursors/hand.cur'), default";Cursors.rulesIe.hand="url('/shared/cursors/hand1.cur'), default";Cursors.rulesIe.hand_fist="url('/shared/cursors/hand2.cur'), default";SLDiagram.Cursors=Cursors;return Cursors});define("core/Type",["core/Cursors","core/sldiagram","core/sldiagram-statics","core/Element"],function(Cursors){SLDiagram.Type=function(cfg){if(cfg.parentType){this.extend(cfg.parentType)}for(var i in cfg){if(cfg.hasOwnProperty(i)){this[i]=cfg[i]}}this.init(cfg);SLDiagram.Type.updateElementMethods(this)};SLDiagram.Type.prototype={init:function(cfg){this.id=(typeof cfg.id=="number")?cfg.id:(function(){console.trace();throw'Field "id" not defined in new type';return null})();this.name=(typeof cfg.name=="string")?cfg.name:(function(){console.trace();throw'Field "name" not defined in new type';return null})();this.description=((typeof cfg.description!="undefined")?cfg.description:null);this.objectType="Type";this.canvas=(typeof cfg.canvas=="object")?cfg.canvas:null;this.up=this.canvas;this.type=this;this.config=SLDiagram.recursCloneObject(cfg.config);this.sysConfig=new Object()},extend:function(type){for(var i in type){this[i]=type[i]}},drawSelectRect:function(){var res=[];var size=this.type.getScreenSize.call(this);var pos=this.type.getScreenTopLeftPosition.call(this);var color=this.type.getConfigProperty.call(this,"selection/lineColor");var shape=new createjs.Shape();(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(pos.x,pos.y,pos.x+size.width,pos.y,4).dashedLineTo(pos.x+size.width,pos.y,pos.x+size.width,pos.y+size.height,4).dashedLineTo(pos.x+size.width,pos.y+size.height,pos.x,pos.y+size.height,4).dashedLineTo(pos.x,pos.y+size.height,pos.x,pos.y,4));res.push(shape);return res},drawSnapPoints:function(){var res=[];var el=this;var t=el.type;var sld=this.getSLDiagram();var snapPoints=t.getRelativeSnapPoints.call(el);var scale=sld.getScale();var crossSize=6;var lineColor=t.getConfigProperty.call(el,"snap/lineColor","#FF0000",true);for(var i in snapPoints){if(snapPoints.hasOwnProperty(i)){var snapPoint=SLDiagram.recursCloneObject(snapPoints[i]);var shape=new createjs.Shape();(shape.graphics.setStrokeStyle(1).beginStroke(lineColor).moveTo(snapPoint.x*scale-crossSize/2,snapPoint.y*scale-crossSize/2).lineTo(snapPoint.x*scale+crossSize/2,snapPoint.y*scale+crossSize/2).moveTo(snapPoint.x*scale-crossSize/2,snapPoint.y*scale+crossSize/2).lineTo(snapPoint.x*scale+crossSize/2,snapPoint.y*scale-crossSize/2));res.push(shape)}}return res},getCornRects:function(){var el=this;var t=el.type;var draw=function(){var cr=this;var el=cr.element;var t=el.type;var shape=new createjs.Shape();var size=t.getSize.call(el);var pos=cr.getRelativePoint();var topLeftPos=t.getTopLeftPosition.call(el);var crSize=t.getConfigProperty.call(el,"selection/rect/size",5);var crFillColor=t.getConfigProperty.call(el,"selection/rect/color","#FFFF00");var crLineColor=t.getConfigProperty.call(el,"selection/rect/line","#00FF00");var selectionColor=t.getConfigProperty.call(el,"selection/lineColor","#00FF00");var scale=el.getSLDiagram().getScale();var angle=t.getRotation.call(el);var dmzCorns=SLDiagram.cursorCollections.dmzCorns;shape.graphics.beginFill(crFillColor).setStrokeStyle(1).beginStroke(selectionColor);switch(cr.type){case"TopLeft":shape.graphics.drawRect(pos.x*scale-crSize,pos.y*scale-crSize,crSize,crSize);shape.cursor=Cursors.arrow(angle-135);break;case"TopRight":shape.graphics.drawRect(pos.x*scale,pos.y*scale-crSize,crSize,crSize);shape.cursor=Cursors.arrow(angle-45);break;case"BottomLeft":shape.graphics.drawRect(pos.x*scale-crSize,pos.y*scale,crSize,crSize);shape.cursor=Cursors.arrow(angle+135);break;case"BottomRight":shape.graphics.drawRect(pos.x*scale,pos.y*scale,crSize,crSize);shape.cursor=Cursors.arrow(angle+45);break;case"Rotate":default:(shape.graphics.beginFill(null).setStrokeStyle(1).beginStroke(selectionColor).dashedLineTo(pos.x*scale,topLeftPos.y*scale,pos.x*scale,pos.y*scale-crSize/2,4).beginFill(crFillColor).drawCircle(pos.x*scale,pos.y*scale,crSize/2))}return shape};var getRelativePoint=function(){var cr=this;var res=new Object();var el=cr.element;var t=el.type;var size=t.getSize.call(el);var tlPos=t.getTopLeftPosition.call(el);switch(cr.type){case"TopLeft":res={x:tlPos.x,y:tlPos.y};break;case"TopRight":res={x:tlPos.x+size.width,y:tlPos.y};break;case"BottomLeft":res={x:tlPos.x,y:tlPos.y+size.height};break;case"BottomRight":res={x:tlPos.x+size.width,y:tlPos.y+size.height};break;case"Rotate":default:res={x:0,y:tlPos.y-20}}return res};var beforeMove=function(e){var r=e.target;var cr=r.cornRect;var el=cr.element;var t=el.type;var mouseScreenPos={x:e.stageX,y:e.stageY};var screenPos=t.getScreenPosition.call(el);t.setSysConfigProperty.call(el,"move",{position:t.getPosition.call(el),screenPos:screenPos,size:t.getSize.call(el),topLeftPos:t.getTopLeftPosition.call(el),mouseScreenPos:mouseScreenPos,offset:{x:e.x-e.stageX,y:e.y-e.stageY}});mouseScreenPos=SLDiagram.calcRandA(mouseScreenPos,screenPos);var angle1=mouseScreenPos.a;t.setSysConfigProperty.call(el,"move",{angle0:t.getRotation.call(el),angle1:angle1})};var onResizerMove=function(e){var r=e.target;var cr=r.cornRect;var el=cr.element;var d=el.displayObject;var dos=d.select;var t=el.type;var sld=el.getSLDiagram();var mouseScreenPos=t.getSysConfigProperty.call(el,"move/mouseScreenPos",{x:0,y:0},false);var diff={x:e.stageX-mouseScreenPos.x,y:e.stageY-mouseScreenPos.y};var scale=sld.getScale();var dx=diff.x/scale;var dy=diff.y/scale;var size=t.getSysConfigProperty.call(el,"move/size",{width:0,height:0},false);var screenPos=t.getSysConfigProperty.call(el,"move/screenPos",{x:0,y:0},false);var schemePos=t.getSysConfigProperty.call(el,"move/position",{x:0,y:0},false);var tlPos=t.getSysConfigProperty.call(el,"move/topLeftPos",{x:0,y:0},false);if(e.type==="mouseup"){var realPos=t.getPosition.call(el);if(realPos.x===0&&realPos.y===0){console.warn("WARN: using default value for realPos")}var cornPos=cr.getRelativePoint();var deltaForSnap=sld.calcDeltaForSnap(realPos.x+cornPos.x,realPos.y+cornPos.y,el);dx=dx+deltaForSnap.dx;dy=dy+deltaForSnap.dy}t.setPosition.call(el,schemePos.x+dx*((-tlPos.x)/size.width),schemePos.y+dy*((-tlPos.y)/size.height));if(cr.type=="TopLeft"||cr.type=="BottomLeft"){dx=-dx}if(cr.type=="TopLeft"||cr.type=="TopRight"){dy=-dy}t.setSize.call(el,size.width+dx,size.height+dy);t.draw.call(el);sld.stage.update()};var afterResizerMove=function(e){var r=e.target;var cr=r.cornRect;var el=cr.element;var t=el.type;cr.onMove(e);t.delSysConfigProperty.call(el,"move")};var onRotaterMove=function(e){var r=e.target;var cr=r.cornRect;var el=cr.element;var t=el.type;var rPos={x:e.stageX,y:e.stageY};var screenPos=t.getSysConfigProperty.call(el,"move/screenPos",{x:0,y:0},false);var dx=rPos.x-screenPos.x;var dy=rPos.y-screenPos.y;var angle2=(Math.atan(dy/dx)*180/Math.PI+((dy>0&&dx<0)?180:(dy<0&&dx<0)?-180:0));var angle0=t.getSysConfigProperty.call(el,"move/angle0",0,false);var angle1=t.getSysConfigProperty.call(el,"move/angle1",0,false);t.setRotation.call(el,angle0+(angle2-angle1));t.draw.call(el);el.getSLDiagram().stage.update()};var afterRotaterMove=function(e){var r=e.target;var cr=r.cornRect;var el=cr.element;var t=el.type;cr.onMove(e);t.delSysConfigProperty.call(el,"move")};var res=[new SLDiagram.CornRect({type:"TopLeft",element:el,onMove:onResizerMove,afterMove:afterResizerMove}),new SLDiagram.CornRect({type:"TopRight",element:el,onMove:onResizerMove,afterMove:afterResizerMove}),new SLDiagram.CornRect({type:"BottomLeft",element:el,onMove:onResizerMove,afterMove:afterResizerMove}),new SLDiagram.CornRect({type:"BottomRight",element:el,onMove:onResizerMove,afterMove:afterResizerMove}),new SLDiagram.CornRect({type:"Rotate",element:el,onMove:onRotaterMove,afterMove:afterRotaterMove})];for(var i in res){if(res.hasOwnProperty(i)){SLDiagram.applyObject(res[i],{draw:draw,getRelativePoint:getRelativePoint,beforeMove:beforeMove})}}return res},createCornRects:function(){return this.type.drawCornRects.call(this)},drawCornRects:function(){var res=[];var el=this;var t=el.type;var corns=t.getCornRects.call(el);for(var i in corns){if(corns.hasOwnProperty(i)){var corn=corns[i];res.push(corn.create())}}return res},getConfigProperty:function(path,defaultValue,recurs){var el=this;var t=el.type;return SLDiagram.getConfigProperty.call(el,path,defaultValue,recurs)},setConfigProperty:function(path,value){var el=this;var t=el.type;var origValue=SLDiagram.getConfigProperty.call(el,path,null,false);var res=SLDiagram.setConfigProperty.call(el,path,value);if(SLDiagram.isElement(this)&&value!=origValue){this.getSLDiagram().getSetterChangedState().execute(true)}return res},delConfigProperty:function(){var res=SLDiagram.delConfigProperty.apply(this,arguments);this.getSLDiagram().getSetterChangedState().execute(true);return res},getSysConfigProperty:SLDiagram.getSysConfigProperty,setSysConfigProperty:SLDiagram.setSysConfigProperty,delSysConfigProperty:SLDiagram.delSysConfigProperty,missingDependenciesMessage:"Отсутствуют необходимые зависимости",onDrag:function(e){var sld=this.getSLDiagram(),scale=sld.getScale(),d=this.displayObject,diff,oldPosition,schemeDiff,editMode=sld.getEditMode(),bgrect;if(e.nativeEvent.button!==0){return}var cursor=Cursors.get((sld.getEditMode())?"element_editmode_drag":"element_viewmode_drag");if(!editMode){bgrect=sld.getBackground().getShape();bgrect.dispatchEvent(e);d.cursor=cursor;sld.setCursorDirect(cursor);return}d.cursor=cursor;sld.setCursorDirect(cursor);if(!this.displayObject||!this.current||!this.offset){if(SLDiagram.debugMode){console.warn(this.getType().missingDependenciesMessage)}return}diff={x:e.stageX-this.current.x,y:e.stageY-this.current.y};if(editMode&&e.nativeEvent.button===0){d.x=e.stageX+this.offset.x;d.y=e.stageY+this.offset.y;d.select.x=d.x;d.select.y=d.y;oldPosition=this.getSysConfigProperty("move/position",null,false);if(oldPosition===null){if(SLDiagram.debugMode){console.error("ERROR: SLDiagram.Type.onDrag не удалось получить все данные для корректного выполнения перемещения")}return}schemeDiff={x:diff.x/scale,y:diff.y/scale};this.setPosition(oldPosition.x+schemeDiff.x,oldPosition.y+schemeDiff.y);sld.events.fireEvent("onElementMove",{element:this,dx:schemeDiff.x,dy:schemeDiff.y});e.target.getStage().update()}},onDrop:function(e){var sld=this.getSLDiagram(),d=this.displayObject,deltaForSnap,diff,targetPos,scale,dx,dy,oldPosition,mouseDownCoords,pos,selState,editMode=sld.getEditMode(),bgrect;if(e.nativeEvent.button!==0){sld.enableEvents();return}var cursor=Cursors.get((sld.getEditMode())?"element_editmode":"element_viewmode");if(!editMode){bgrect=sld.getBackground().getShape();bgrect.dispatchEvent(e);this.displayObject.cursor=cursor;sld.setCursorDirect(cursor);return}this.displayObject.cursor=cursor;sld.setCursorDirect(cursor);if(!this.current||!this.offset){if(SLDiagram.debugMode){console.warn(this.getType().missingDependenciesMessage)}sld.enableEvents();return}diff={x:e.stageX-this.current.x,y:e.stageY-this.current.y};if(editMode&&e.nativeEvent.button===0){scale=sld.getConfigProperty("scale");dx=diff.x/scale;dy=diff.y/scale;dx=SLDiagram.precisionNumber(dx,4);dy=SLDiagram.precisionNumber(dy,4);if(dx!==0||dy!==0){oldPosition=this.getSysConfigProperty("move/position",null,false);if(oldPosition===null){if(SLDiagram.debugMode){console.error("ERROR: SLDiagram.Type.onDrop не удалось получить все данные для корректного выполнения перемещения")}sld.enableEvents();return}this.setPosition(oldPosition.x+dx,oldPosition.y+dy);mouseDownCoords=sld.screenToScheme(this.current.x,this.current.y);pos=this.getSnapPoint(mouseDownCoords.x,mouseDownCoords.y);if(pos){deltaForSnap=sld.calcDeltaForSnapOnMove({x:pos.x+dx,y:pos.y+dy,elementCaller:this,diff:{x:dx,y:dy}});deltaForSnap.x=deltaForSnap.dx=SLDiagram.precisionNumber(deltaForSnap.dx,4);deltaForSnap.y=deltaForSnap.dy=SLDiagram.precisionNumber(deltaForSnap.dy,4);dx=SLDiagram.precisionNumber(dx+deltaForSnap.dx,4);dy=SLDiagram.precisionNumber(dy+deltaForSnap.dy,4)}targetPos={x:oldPosition.x+dx,y:oldPosition.y+dy};targetPos.x=SLDiagram.precisionNumber(targetPos.x,4);targetPos.y=SLDiagram.precisionNumber(targetPos.y,4);this.setPosition(targetPos.x,targetPos.y);sld.events.fireEvent("onElementMove",{element:this,dx:dx,dy:dy});sld.events.fireEvent("afterElementMove",{element:this,dx:dx,dy:dy})}selState=this.getSelectedState()}e.target.getStage().update();delete this.offset;delete this.current;this.delSysConfigProperty("move");this.draw();sld.stage.update();sld.enableEvents()},onMouseDown:function(e){var sld=this.getSLDiagram(),editMode=sld.getEditMode(),bgrect,blockMode=false,selState,sels;if(e.nativeEvent.button!==0){return}var cursor=Cursors.get((sld.getEditMode())?"element_editmode_drag":"element_viewmode_drag");this.displayObject.cursor=cursor;sld.setCursorDirect(cursor);if(!editMode){bgrect=sld.getBackground().getShape();sld.changeSelection({actions:[{action:"clear"},{action:"add",elements:[this]}],disableEvent:true});bgrect.dispatchEvent(e);return}this.current={x:e.stageX,y:e.stageY};blockMode=sld.isDisabledEvents();if(blockMode){return}sld.disableEvents();if(e.nativeEvent.button===0){this.offset={x:this.displayObject.x-e.stageX,y:this.displayObject.y-e.stageY}}this.setSysConfigProperty("move/screen/position",{x:e.stageX,y:e.stageY});this.setSysConfigProperty("move/position",this.getPosition());selState=this.getSelectedState();sels=null;if(e.nativeEvent.shiftKey===false&&e.nativeEvent.ctrlKey===false&&selState!==true){sels={actions:[{action:"clear"},{action:"add",elements:[this]}]}}if(e.nativeEvent.shiftKey===true||e.nativeEvent.ctrlKey===true){if(selState){sels={actions:[{action:"remove",elements:[this]}]}}else{sels={actions:[{action:"add",elements:[this]}]}}}if(sels!==null){sld.changeSelection(sels)}sld.stage.update()},onPressMove:function(e){return this.onDrag(e)},onPressUp:function(e){return this.onDrop(e)},setEventListeners:function(){if(!this.displayObject){return false}var displayObject=this.displayObject;if(!this._eventListeners){this._eventListeners={mousedown:this.onMouseDown.bind(this),pressmove:this.onPressMove.bind(this),pressup:this.onPressUp.bind(this),dblclick:this.onDblClick.bind(this)}}displayObject.addEventListener("mousedown",this._eventListeners.mousedown);displayObject.addEventListener("pressmove",this._eventListeners.pressmove);displayObject.addEventListener("pressup",this._eventListeners.pressup);displayObject.addEventListener("dblclick",this._eventListeners.dblclick);return true},cancelEventListeners:function(){if(!this._eventListeners||!this.displayObject||!this.displayObject.hitArea){return false}var displayObject=this.displayObject.hitArea;displayObject.removeEventListener("mousedown",this._eventListeners.mousedown);displayObject.removeEventListener("pressmove",this._eventListeners.pressmove);displayObject.removeEventListener("pressup",this._eventListeners.pressup);displayObject.removeEventListener("dblclick",this._eventListeners.dblclick);delete this._eventListeners;return true},drawFigure:function(){console.trace();throw'Method "drawFigure" not defined in new type '+this.name;return null},createDisplayObject:function(){var d;if(!this.displayObject){this.displayObject=new createjs.Container();this.displayObject.up=this}d=this.displayObject;if(!d.figure){d.figure=new createjs.Container();d.figure.up=this}if(!d.select){d.select=new createjs.Container();d.select.up=this}if(!d.state){d.state=new createjs.Container();d.state.up=this}if(!d.snap){d.snap=new createjs.Container();d.snap.up=this}if(!d.hitAreaContainer){d.hitAreaContainer=new createjs.Container();d.hitAreaContainer.up=this}d.addChild(d.figure,d.state,d.snap,d.hitAreaContainer)},clearDisplayObject:function(){if(!this.displayObject){return false}else{this.cancelEventListeners();delete this.displayObject;return true}},draw:function(){var figures,figure,pos,sld=this.getSLDiagram(),scale,angle,editMode,d,selects,i,dos,statuses,hitArea;this.createDisplayObject();d=this.displayObject;figure=d.figure;figure.removeAllChildren();d.select.removeAllChildren();d.state.removeAllChildren();d.snap.removeAllChildren();d.hitAreaContainer.removeAllChildren();figures=this.drawFigure();hitArea=this.getHitArea();if(!hitArea){hitArea=figures[0]}this.displayObject.hitAreaContainer.hitArea=hitArea.clone();this.displayObject.figure.hitArea=hitArea.clone();figure.addChild.apply(figure,figures);if(sld.getEditMode()){this.displayObject.cursor=Cursors.get("element_editmode")}else{this.displayObject.cursor=Cursors.get("element_viewmode")}pos=this.getScreenPosition();scale=sld.getScale();angle=this.getRotation();editMode=sld.getEditMode();d.x=pos.x;d.y=pos.y;d.rotation=angle;dos=d.select;if(this.getSelectedState()){selects=this.drawSelectRect();if(editMode){selects=selects.concat(this.createCornRects(),this.drawSnapPoints())}for(i=0;i<selects.length;i++){dos.addChild(selects[i])}}dos.x=pos.x;dos.y=pos.y;dos.rotation=angle;sld.selectionLayer.addChild(dos);if(this._hasStatus2()&&!editMode){statuses=this.drawStatusRect();for(i=0;i<statuses.length;i++){d.state.addChild(statuses[i])}}this.setEventListeners();return this.displayObject},setSelectedState:function(state){var sld=this.getSLDiagram();if(state){sld.changeSelection({actions:[{action:"add",elements:[this]}]})}else{sld.changeSelection({actions:[{action:"remove",elements:[this]}]})}},getSelectedState:function(){var el=this;var sld=el.getSLDiagram();return sld.isSelectedElement(el.id)},move:function(dx,dy){var sld=this.getSLDiagram();var rt=sld.rtree;var pos=this.type.getPosition.call(this);if(typeof rt!="undefined"&&rt!=null){rt.remove(this.id)}this.type.setPosition.call(this,pos.x+dx,pos.y+dy);if(typeof rt!="undefined"&&rt!=null){rt.insert(this.id)}},getPosition:function(){var x,y;try{x=this.config.figure.position.x;y=this.config.figure.position.y}catch(ex){console.error("ERROR: getPosition: not exist this.config.figure.position: "+ex.name);x=0;y=0}return{x:x,y:y}},setPosition:function(x,y){this.type.setConfigProperty.call(this,"figure/position/x",x);this.type.setConfigProperty.call(this,"figure/position/y",y)},getRotation:function(){return this.type.getConfigProperty.call(this,"figure/rotation")},setRotation:function(rotation){var r=rotation;var sld=this.getSLDiagram();var rt=sld.rtree;if(typeof this.id!="undefined"&&typeof rt!="undefined"&&rt!=null){rt.remove(this.id)}r=SLDiagram.simplifyAngle(r);this.type.setConfigProperty.call(this,"figure/rotation",r);if(typeof this.id!="undefined"&&typeof rt!="undefined"&&rt!=null){rt.insert(this.id)}},getHitArea:function(){return null},getWidth:function(){return this.type.getConfigProperty.call(this,"figure/size/width")},getHeight:function(){return this.type.getConfigProperty.call(this,"figure/size/height")},setWidth:function(w){this.type.setConfigProperty.call(this,"figure/size/width",w)},setHeigth:function(h){this.type.setConfigProperty.call(this,"figure/size/height",h)},getSize:function(){return{width:this.type.getWidth.call(this),height:this.type.getHeight.call(this)}},setSize:function(w,h){this.type.setWidth.call(this,w);this.type.setHeigth.call(this,h)},resize:function(dw,dh){var sld=this.getSLDiagram();var rt=sld.rtree;if(typeof this.id!="undefined"&&typeof rt!="undefined"&&rt!=null){rt.remove(this.id)}var sizes=this.type.getSize.call(this);this.type.setSize.call(this,sizes.width+dw,sizes.height+dh);if(typeof this.id!="undefined"&&typeof rt!="undefined"&&rt!=null){rt.insert(this.id)}},getTopLeftPosition:function(){var size=this.type.getSize.call(this);return{x:-size.width/2,y:-size.height/2}},getScreenPosition:function(){var sld=this.getSLDiagram();var scale=sld.getScale();var offset=sld.getCurrentOffset();var pos=this.type.getPosition.call(this);return{x:(pos.x-offset.x)*scale,y:(pos.y-offset.y)*scale}},getScreenWidth:function(){return this.getSLDiagram().getScale()*this.type.getWidth.call(this)},getScreenHeigth:function(){return this.getSLDiagram().getScale()*this.type.getHeight.call(this)},getScreenSize:function(){return{width:this.type.getScreenWidth.call(this),height:this.type.getScreenHeigth.call(this)}},getScreenTopLeftPosition:function(){var pos=this.type.getTopLeftPosition.call(this);var scale=this.getSLDiagram().getScale();return{x:pos.x*scale,y:pos.y*scale}},getScale:function(){return 1},calcRandA:SLDiagram.calcRandA,calcXandY:SLDiagram.calcXandY,minimizeRectangleRegion:function(r){if(typeof r.x=="undefined"){r.x=r.points[0].x}if(typeof r.y=="undefined"){r.y=r.points[0].y}if(typeof r.w=="undefined"){r.w=r.points[3].x-r.points[0].x}if(typeof r.h=="undefined"){r.h=r.points[3].y-r.points[0].y}return{x:r.x,y:r.y,w:r.w,h:r.h}},getRectangleRegion:function(){var rect,minX,minY,maxX,maxY,i,p;var getRectangleWithoutRotate,getRectangleWithRotate;getRectangleWithoutRotate=function(){var pos,tlPos,size,res,i;pos=this.getPosition();tlPos=this.getRealRelativeTopLeftPosition();size=this.getRealSchemeSize();res={x:pos.x+tlPos.x,y:pos.y+tlPos.y,w:size.width,h:size.height,points:[{x:pos.x+tlPos.x,y:pos.y+tlPos.y},{x:pos.x+tlPos.x+size.width,y:pos.y+tlPos.y},{x:pos.x+tlPos.x,y:pos.y+tlPos.y+size.height},{x:pos.x+tlPos.x+size.width,y:pos.y+tlPos.y+size.height}],center:{x:pos.x,y:pos.y}};for(i in res.points){if(res.points.hasOwnProperty(i)){res.points[i]=this.calcRandA(res.points[i],res.center)}}return res};getRectangleWithRotate=function(){var rect,rotate,i,p;rect=getRectangleWithoutRotate.call(this);rotate=this.getRotation();for(i in rect.points){if(rect.points.hasOwnProperty(i)){p=rect.points[i];p.a=p.a+rotate;p=this.calcXandY(p,rect.center)}}return rect};rect=getRectangleWithRotate.call(this);minX=Infinity;minY=Infinity;maxX=-Infinity;maxY=-Infinity;for(i in rect.points){if(rect.points.hasOwnProperty(i)){p=rect.points[i];minX=Math.min(minX,p.x);minY=Math.min(minY,p.y);maxX=Math.max(maxX,p.x);maxY=Math.max(maxY,p.y)}}rect.points[0]={x:minX,y:minY};rect.points[1]={x:maxX,y:minY};rect.points[2]={x:minX,y:maxY};rect.points[3]={x:maxX,y:maxY};for(i in rect.points){if(rect.points.hasOwnProperty(i)){this.calcRandA(rect.points[i],rect.center)}}rect.w=maxX-minX;rect.h=maxY-minY;rect.x=minX;rect.y=minY;rect.width=rect.w;rect.height=rect.h;return rect},getValueType:function(){return null},changeValue:function(){},onClick:function(e){this.type.changeValue.call(this);this.type.draw.call(this)},onDblClick:function(e){},clear:function(){delete this.displayObject},getId:function(){return this.type.getConfigProperty.call(this,"figure/id")},setId:function(id){if(id===null){this.type.delConfigProperty.call(this,"figure/id")}else{this.type.setConfigProperty.call(this,"figure/id",id)}},isActive:function(){return false},isMaybeActive:function(){return false},getDatasourcesNames:function(){if(this.datasourcesNames){return this.datasourcesNames}else{return[]}},getStatus:function(){console.warn("WARN: Using deprecated method SLDiagram.Type.getStatus");return null},getStatuses:function(){return null},_getStatus2:function(){return null},_hasStatus2:function(){return false},_getSimpleStatus2:function(){return null},setStatus:function(st){},drawStatusRect:function(){},toJSON:function(){return{type:this.type.id,config:{figure:this.config.figure}}},removeElement:function(){var el=this;if(SLDiagram.isElement(el)===false){console.error('Execute method "removeElement" as "element.type.removeElement.call(element)"');return}var sldiagram=this.getSLDiagram();sldiagram.removeElement(el)},getImage:function(){SLDiagram.extendEaselJS();var type=this;var container=new createjs.Container();var el=new SLDiagram.Element({type:type});var pos=type.getScreenTopLeftPosition.call(el);var size=type.getScreenSize.call(el);var figures=el.type.drawFigure.call(el);for(var i in figures){if(figures.hasOwnProperty(i)){var figure=figures[i];container.addChild(figure)}}container.setTransform(-pos.x,-pos.y);var canvas=document.createElement("canvas");canvas.width=size.width;canvas.height=size.height;var stage=new createjs.Stage(canvas);stage.addChild(container);stage.update();return canvas.toDataURL("image/png")},getImageForCursor:function(){this.getSLDiagram().disableSetChangedState();var res=new Object();SLDiagram.extendEaselJS();var type=this;var container=new createjs.Container();var el=new SLDiagram.Element({type:type});var scale=type.canvas.getScale();type.setPosition.call(el,0,0);var pos=type.getRealRelativeTopLeftPosition.call(el);pos.x=pos.x*scale;pos.y=pos.y*scale;var size=type.getRealScreenSize.call(el);var figures=el.type.drawFigure.call(el);var selects=el.drawSelectRect();var i,shape;for(i in figures){if(figures.hasOwnProperty(i)){shape=figures[i];container.addChild(shape)}}for(i in selects){if(selects.hasOwnProperty(i)){shape=selects[i];container.addChild(shape)}}container.setTransform(-pos.x+3,-pos.y+3);var canvas=document.createElement("canvas");canvas.width=size.width+6;canvas.height=size.height+6;var stage=new createjs.Stage(canvas);stage.addChild(container);stage.update();res.url=canvas.toDataURL("image/png");res.x=-pos.x+3;res.y=-pos.y+3;res.width=size.width+6;res.height=size.height+6;res.toString=function(){var res='url("'+this.url+'")';if(typeof this.x==="number"&&typeof this.y==="number"){res=res+" "+String(this.x)+" "+String(this.y)}res=res+", auto";return res};this.getSLDiagram().enableSetChangedState();return res},getImageForPalette:function(){SLDiagram.extendEaselJS();var type=this;var sld=this.getSLDiagram();sld.disableSetChangedState();type.canvas=type.up=new SLDiagram({figure:{size:{width:40,height:40},lineColor:"#000000"},scheme:{backColor:"#FFFFFF"},scale:1});type.canvas.disableSetChangedState();var origConfig;if(typeof type.beforeGetImageForPalette==="function"){origConfig=type.beforeGetImageForPalette()}var max={width:40,height:40};var container=new createjs.Container();var el=new SLDiagram.Element({type:type});el.type.setPosition.call(el,0,0);var pos=el.type.getRealScreenTopLeftPosition.call(el);var center=el.type.getRelativeCenterPosition.call(el);var size=el.type.getRealScreenSize.call(el);var angle=type.getRotation.call(el);var figures=el.type.drawFigure.call(el);type.canvas=type.up=sld;for(var i in figures){if(figures.hasOwnProperty(i)){var figure=figures[i];container.addChild(figure)}}var scale=1;var diffScale={width:max.width/size.width,height:max.height/size.height};if(diffScale.width<1||diffScale.height<1){scale=Math.min(diffScale.width,diffScale.height)}center=SLDiagram.vectorRotate(center,angle);var x=max.width/2-center.x*scale;var y=max.height/2-center.y*scale;x=Math.floor(x)-0.5;y=Math.floor(y)-0.5;container.setTransform(x,y,scale,scale,angle);var canvas=document.createElement("canvas");canvas.width=max.width;canvas.height=max.height;var stage=new createjs.Stage(canvas);stage.addChild(container);stage.clear();stage.update();if(typeof type.afterGetImageForPalette==="function"){type.afterGetImageForPalette(origConfig)}sld.enableSetChangedState();return canvas.toDataURL("image/png")},getRelativeSnapPoints:function(){return[{x:0,y:0}]},getSnapPoints:function(){var pos=this.type.getPosition.call(this);var points=SLDiagram.recursCloneObject(this.type.getRelativeSnapPoints.call(this));var angle=this.type.getRotation.call(this);var res=new Array();for(var i in points){if(points.hasOwnProperty(i)){var point=points[i];point=SLDiagram.calcRandA(point,{x:0,y:0});point.a=point.a+angle;point=SLDiagram.calcXandY(point,{x:0,y:0});delete point.a;delete point.r;res.push({x:point.x+pos.x,y:point.y+pos.y})}}return res},getSnapPoint:function(x,y){var el=this;var t=el.type;var sld=this.getSLDiagram();var mousePos;if(typeof x==="undefined"||typeof y==="undefined"){mousePos=sld.getMousePosition()}else{mousePos=new Object();mousePos.x=x;mousePos.y=y}var points=t.getSnapPoints.call(el);var nearestPoint=null;for(var i in points){if(points.hasOwnProperty(i)){var point=points[i];point=SLDiagram.calcRandA(point,mousePos);if(nearestPoint===null||(nearestPoint!==null&&point.r<nearestPoint.r)){nearestPoint=point}}}return nearestPoint},drawSnapPoint:function(){var el=this;if(SLDiagram.isElement(el)!==true){console.error("ERROR: call drawSnapPoint not for SLDiagram.Element. Please, call method as: element.type.drawSnapPoint.call(element)");return false}var t=el.type;var d=this.displayObject},getLayerNumber:function(){return Number(this.type.getConfigProperty.call(this,"figure/sub",0,false))},setLayerNumber:function(n){this.type.setConfigProperty.call(this,"figure/sub",Number(n))},getRealSchemeSize:function(){var el=this;var t=el.type;return t.getSize.call(el)},getRealScreenSize:function(){var el=this;var t=el.type;var size=t.getRealSchemeSize.call(el);var scale=this.getSLDiagram().getScale();return{width:size.width*scale,height:size.height*scale}},getRealRelativeTopLeftPosition:function(){var el=this;var t=el.type;return t.getTopLeftPosition.call(el)},getRealScreenTopLeftPosition:function(){var el=this;var t=el.type;var tlPos=t.getRealRelativeTopLeftPosition.call(el);var pos=t.getPosition.call(el);return this.getSLDiagram().schemeToScreen(tlPos.x+pos.x,tlPos.y+pos.y)},calcDeltaForSnap:function(args){var el=this;var t=el.type;var sld=this.getSLDiagram();var res={dx:0,dy:0,x:0,y:0};var snapToFigure=sld.getFigureSnapStatus();var gridStatus=sld.getGridStatus();var gridSnapStatus=sld.getGridSnapStatus();var nearestFigureSnapPoint=null;if(snapToFigure){nearestFigureSnapPoint=sld.getNearestFigureSnapPoint(args.x,args.y,el);if(nearestFigureSnapPoint!==null){res.x=nearestFigureSnapPoint.x-args.x;res.y=nearestFigureSnapPoint.y-args.y;res.type="figure"}}if(gridSnapStatus&&nearestFigureSnapPoint===null){var gridSnapPoint=sld.getNearestGridPoint(args.x,args.y,el);res.x=gridSnapPoint.x-args.x;res.y=gridSnapPoint.y-args.y;res.type="grid"}if(typeof res.type==="undefined"){res.type="none"}res.dx=res.x;res.dy=res.y;return res},calcDeltaForSnapOnMove:function(args){if(SLDiagram.onMoveSnapAlgorithm==="one point"){return this.type.calcDeltaForSnap.call(this,args)}var el=this;var t=el.type;var snapPoints=t.getSnapPoints.call(el);var snapPoint;var diffs={grid:new Array(),figure:new Array(),none:new Array()};var diff;var minDiff={x:Infinity,y:Infinity};for(var i in snapPoints){if(snapPoints.hasOwnProperty(i)){snapPoint=snapPoints[i];diff=t.calcDeltaForSnap.call(el,{x:snapPoint.x,y:snapPoint.y,elementCaller:el,diff:args.diff});diff=SLDiagram.calcR(diff);if(typeof diff.type==="string"&&diff.type.length>0){diffs[diff.type].push(diff)}else{if(SLDiagram.debugMode){console.warn("WARN: Обнаружена точка привязки без указания типа привязки")}}}}if(diffs.figure&&diffs.figure.length>0){minDiff=SLDiagram.calcMinRFromPoints(diffs.figure)}else{if(diffs.grid&&diffs.grid.length>0){minDiff=SLDiagram.calcMinRFromPoints(diffs.grid)}}if(!minDiff||(minDiff.x===Infinity&&minDiff.y===Infinity)){minDiff={x:0,y:0,type:"none"}}minDiff.dx=minDiff.x;minDiff.dy=minDiff.y;return minDiff},figureToScheme:function(x,y){var pos=this.type.getPosition.call(this);return{x:pos.x+x,y:pos.y+y}},schemeToFigure:function(x,y){var pos=this.type.getPosition.call(this);return{x:x-pos.x,y:y-pos.y}},getRelativeCenterPosition:function(){var el=this;var t=el.type;var size=t.getSize.call(el);var tlPos=t.getTopLeftPosition.call(el);return{x:tlPos.x+size.width/2,y:tlPos.y+size.height/2}},getConfigDescriptor:function(){if(this.type.configDescriptor&&SLDiagram.TreeStoreItem.isInstanceOf(this.type.configDescriptor)===false){this.type.configDescriptor=SLDiagram.createConfigDescriptor(this.config,this.type.configDescriptor,this.getSLDiagram())}else{if(!this.type.configDescriptor){this.type.configDescriptor=SLDiagram.getConfigDescriptor(this.config,this.getSLDiagram())}else{if(SLDiagram.TreeStoreItem.isInstanceOf(this.type.configDescriptor)===true){this.type.configDescriptor.setSLDiagram(this.getSLDiagram());return this.type.configDescriptor}else{console.error("ERROR: configDescriptor не был создан");return null}}}this.type.configDescriptor.setSLDiagram(this.getSLDiagram());return this.type.configDescriptor},getPropertyDescriptor:function(path){return this.getConfigDescriptor().getValueByPath(path)},setSLDiagram:function(sld){if(SLDiagram.isSLDiagram(sld)){this.type.canvas=sld;this.type.up=sld;if(typeof this.afterSetSLDiagram==="function"){this.afterSetSLDiagram(sld)}return true}else{return false}},getSLDiagram:function(){if(this.type&&this.type.canvas&&this.type.canvas!==null){return this.type.canvas}else{return null}},getType:function(){return this.type},getItemsForContextMenu:function(){var res=[];return res},clearCache:function(){return true},getGtype:function(){var sld,ds,t,el,res;sld=this.getSLDiagram();el=this;t=el.getType();if(sld.schemeAndDatabaseIds){ds=sld.schemeAndDatabaseIds.searchBySchemeId(t.getId.call(el));res=SLDiagram.getProperty(ds,"0/GTYPE",null);res=((res!==null)?Number(res):null);return res}return null},getVoltage:function(){var voltage,color,sld;voltage=this.getConfigProperty("figure/U",null,false);if(voltage!==null&&SLDiagram.isNumber(voltage)){voltage=Number(voltage);sld=this.getSLDiagram();color=sld.getConfigProperty("voltageColors/"+String(voltage),null,false);if(color===null){return null}else{return{voltage:voltage,color:SLDiagram.toColor(color)}}}else{return null}},getBackgroundColor:function(){return null},setBackgroundColor:function(color){return false},getLineColor:function(){return null},setLineColor:function(color){return false},getSetterVoltageClass:function(){if(!this._setterVoltageClass){this._setterVoltageClass=SLDiagram.DisabledFunction.create(this.setVoltageClass,this)}return this._setterVoltageClass},setVoltageClass:function(value){return false},getVoltageClass:function(){return null},getXMirror:function(){return false},getYMirror:function(){return false},setXMirror:function(value){return false},setYMirror:function(value){return false},toggleXMirror:function(){return this.setXMirror(!this.getXMirror())},toggleYMirror:function(){return this.setYMirror(!this.getYMirror())}};SLDiagram.Type.createElementMethod=function(name){SLDiagram.Element.prototype[name]=function(){return this.type[name].apply(this,arguments)};return true};SLDiagram.Type.updateElementMethods=function(obj){var i;for(i in obj){if(obj.hasOwnProperty(i)){if(typeof SLDiagram.Element.prototype[i]==="undefined"&&typeof obj[i]==="function"){SLDiagram.Type.createElementMethod(i)}}}return true};SLDiagram.Type.updateElementMethods(SLDiagram.Type.prototype);return SLDiagram.Type});define("core/Manager",["core/sldiagram","core/sldiagram-statics"],function(){SLDiagram.ManagerClass=function(){this.lastSLDiagramId=-1;this.getSLDiagramId=function(){this.lastSLDiagramId=this.lastSLDiagramId+1;return this.lastSLDiagramId};this.clipboard=new Object();this.clearClipboard=function(){for(var i in this.clipboard){if(this.clipboard.hasOwnProperty(i)){delete this.clipboard[i]}}};this.sldiagrams=new Object();this.registerSLDiagram=function(sldiagram){var id;if(sldiagram.id>=0&&this.sldiagrams[sldiagram.id]&&this.sldiagrams[sldiagram.id].id==sldiagram.id){id=sldiagram.id}else{id=this.getSLDiagramId();sldiagram.id=id;this.sldiagrams[id]=sldiagram}return id};this.sysConfig=new Object();this.setSysConfigProperty=SLDiagram.setSysConfigProperty;this.getSysConfigProperty=SLDiagram.getSysConfigProperty;this.delSysConfigProperty=SLDiagram.delSysConfigProperty};SLDiagram.Manager=new SLDiagram.ManagerClass();return SLDiagram.Manager});define("core/TreeStore",["core/sldiagram","core/sldiagram-statics","core/TreeStoreItem","core/Class"],function(SLD,SLDs,Item,Class){SLDiagram.TreeStore=Class.define(Item,{_type:"SLDiagram.TreeStore",_initDefaults:function(){Item.prototype._initDefaults.apply(this,arguments);this.setName();return true},setName:function(name){this.name="root"},getName:function(){return"root"},getPath:function(){return""},getValueByPath:function(path){var node=this.getChildByPath(path);return((node===null)?null:node.getValue())}});return SLDiagram.TreeStore});define("core/properties/ListPrototype",["core/properties/deps","core/properties/Prototype","core/Class"],function(SLD,Prototype,Class){var ListPrototype=Class.define(Prototype,{_type:"SLDiagram.properties.ListPrototype",_initDefaults:function(){Prototype.prototype._initDefaults.apply(this,arguments);this.list=null;return true},_initValues:function(cfg){Prototype.prototype._initValues.apply(this,arguments);this.setList(cfg.list);return true},setList:function(list){if(typeof list==="object"&&list!==null){this.list=list}else{if(!this.list){this.list={}}}return true},getList:function(){return this.list},getRevertList:function(){var list=this.getList();var res={};var i;for(i in list){if(list.hasOwnProperty(i)){res[list[i]]=i}}return res},convert:function(value){var list,prop;if(this.getNativeType()==="boolean"&&typeof value==="boolean"){prop=SLD.Utils.boolean2string(value,"0/1")}else{prop=value}if(list=this.getList(),list.hasOwnProperty(prop)){return this.convertToNativeType(value)}else{if(list=this.getRevertList(),list.hasOwnProperty(prop)){return this.convertToNativeType(list[prop])}else{return null}}},format:function(key){var list,prop;if(this.getNativeType()==="boolean"&&typeof key==="boolean"){prop=SLD.Utils.boolean2string(key,"0/1")}else{prop=String(key)}if(list=this.getList(),list.hasOwnProperty(prop)){return String(list[prop])}else{if(list=this.getRevertList(),list.hasOwnProperty(prop)){return prop}else{return""}}},getStore:function(){var list=this.getList();var store=[];var i;for(i in list){if(list.hasOwnProperty(i)){store.push([list[i],list[i]])}}return store},getEditorConfig:function(){var store=this.getStore();return{editable:false,store:store,readOnly:this.getReadonly(),enableKeyEvents:true,listeners:{select:function(){var editor;editor=SLDiagram.getProperty(this,"editor");if(editor){editor.completeEdit()}},keydown:function(editor,e,eOpts){if(e.keyCode===e.BACKSPACE&&(editor.readOnly||!editor.editable||editor.getValue()==="")){e.preventDefault()}}}}},getEditor:function(){if(SLD.checkExtJS()===false){console.error("ERROR: ExtJS не загружен");return null}if(this.getReadonly()){return null}var editor=Ext.create("Wasutp.Schemes.extends.CellEditor",{field:Ext.create("Ext.form.field.ComboBox",this.getEditorConfig())});editor.field.editor=editor;return editor},toJSON:function(){var res=Prototype.prototype.toJSON.call(this);res.list=this.getList();res.type="List";return res}});SLD.properties.ListPrototype=ListPrototype;return ListPrototype});define("core/properties/Color",["core/sldiagram","core/properties/Prototype","core/Class"],function(SLD,Prototype,Class){var Color=Class.define(Prototype,{_type:"SLDiagram.properties.Color",convert:function(value){return SLDiagram.toColor(String(value))},getEditorConfig:function(){return{pickerAlign:"bl",triggerTip:"Select color",cellEditor:this,readOnly:this.getReadonly(),onTriggerClick:function(){var picker=Ext.create("Ext.picker.Color",{trigger:this,renderTo:Ext.getBody(),floating:true,hidden:true,focusOnShow:true,style:{backgroundColor:"#FFFFFF"},listeners:{show:function(picker,eOpts){var trigger=picker.trigger;picker.alignTo(trigger,"bl")},select:function(picker,color,eOpts){var trigger=picker.trigger;trigger.setValue("#"+color);trigger.focus();picker.hide()}}});picker.show()}}},getEditor:function(){if(SLDiagram.checkExtJS()===false){console.error("ERROR: ExtJS не загружен");return null}var editor=Ext.create("Wasutp.Schemes.extends.CellEditor",{field:Ext.create("Ext.form.field.Picker",this.getEditorConfig())});return editor}});SLDiagram.properties.Color=Color;return Color});define("core/properties/Color2",["core/properties/deps","core/TreeStoreItem","core/properties/Prototype","core/properties/ListPrototype","core/Class"],function(SLD,Item,Prototype,ListPrototype,Class){var Color2=Class.define(ListPrototype,{_type:"SLDiagram.properties.Color2",setNativeType:function(type){this.nativeType="string";return false},getNativeType:function(){return"string"},setList:function(list){if(SLD.isArray(list)){this.list=list;return true}else{return false}},getList:function(){if(!this.list){this.list=[]}var res={};var i;for(i=0;i<this.list.length;i++){res[this.list[i]]=this.list[i]}return res},convert:function(value){return SLD.toColor(value)},format:function(value){return SLD.toColor(value)},getRevertList:function(){return this.getList()},getEditorConfig:function(){var colors=[],list,i;list=this.getList();for(i in list){if(list.hasOwnProperty(i)){color=list[i];if(color.charAt(0)==="#"){colors.push(color.slice(1,7))}else{colors.push(color.slice(0,6))}}}return{editable:true,colors:colors,readOnly:this.getReadonly(),enableKeyEvents:true,listeners:{select:function(){var editor;editor=SLDiagram.getProperty(this,"editor");if(editor){editor.completeEdit()}},keydown:function(editor,e,eOpts){if(e.keyCode===e.BACKSPACE&&(editor.readOnly||!editor.editable||editor.getValue()==="")){e.preventDefault()}}}}},getEditor:function(){if(SLD.checkExtJS()===false){console.error("ERROR: ExtJS не загружен");return null}var editor=Ext.create("Wasutp.Schemes.extends.CellEditor",{field:Ext.create("Wasutp.ColorCombobox",this.getEditorConfig())});editor.field.editor=editor;return editor}});SLD.properties.Color2=Color2;return Color2});define("core/properties/List",["core/properties/deps","core/properties/ListPrototype","core/Class"],function(SLD,ListPrototype,Class){var List=Class.define(ListPrototype,{_type:"SLDiagram.properties.List"});SLD.properties.List=List;return List});define("core/properties/ListVoltageClass",["core/sldiagram","core/properties/Prototype","core/properties/ListPrototype","core/Class"],function(SLD,Prototype,ListPrototype,Class){var List=Class.define(ListPrototype,{_type:"SLDiagram.properties.ListVoltageClass",_initDefaults:function(){return Prototype.prototype._initDefaults.apply(this,arguments)},_initValues:function(cfg){return Prototype.prototype._initValues.apply(this,arguments)},_selfCheck:function(){return Prototype.prototype._selfCheck.apply(this,arguments)},setList:function(){console.warn("WARN: Неизменяемый вручную список");return false},getList:function(){var res;var sld=this.getSLDiagram();if(sld){var voltages=sld.getConfigProperty("voltageColors",{},true);res={};res[""]="нет";var i,v;for(i in voltages){if(voltages.hasOwnProperty(i)){v=voltages[i];res[i]=i}}return res}else{console.warn("WARN: Невозможно предоставить список классов напряжений без указателя на экземпляр SLDiagram");res={"":"нет"};return{}}},getStore:function(){var list=this.getList();var store=[];var i;var sld=this.getSLDiagram();for(i in list){if(list.hasOwnProperty(i)){if(i===""){store.push([sld.getEmptyVoltageColor(),list[i]])}else{store.push([sld.getVoltageColor(list[i]),i])}}}return store},setNativeType:function(type){this.nativeType="string";return false},getNativeType:function(){return"string"},getEditor:function(){if(!SLDiagram.checkExtJS()){console.error("ExtJS не загружен");return null}if(this.getReadonly()){return null}var editor=Ext.create("Wasutp.Schemes.extends.CellEditor",{field:Ext.create("Wasutp.ColorComboboxList",this.getEditorConfig())});editor.field.editor=editor;return editor},getEditorConfig:function(){var editorConfig=ListPrototype.prototype.getEditorConfig.call(this);editorConfig.store.sort(function(item1,item2){var v1,v2;v1=item1[1];v2=item2[1];if(v1==="нет"){v1=-Infinity}else{if(SLDiagram.isNumber(v1)){v1=Number(v1)}else{throw new Error("Неверный тип аргумента item1")}}if(v2==="нет"){v2=-Infinity}else{if(SLDiagram.isNumber(v2)){v2=Number(v2)}else{throw new Error("Неверный тип аргумента item2")}}if(v1===v2){return 0}else{if(v1>v2){return 1}else{return -1}}});return editorConfig},getSLDiagram:function(){var item=this.getTreeStoreItem();var sld=item.getRoot().getSLDiagram();return sld},toJSON:function(){var res=Prototype.prototype.toJSON.call(this);res.type="ListVoltageClass";return res},getValueFromElements:function(els){var values=[];var value;var i,el,equals,propDesc;equals=function(values){if(values.length===1){return values[0]}else{if(values.length===0){return null}}var i,currentValue,firstValue;firstValue=values[0];for(i=1;i<values.length;i++){currentValue=values[i];if(currentValue!==firstValue){return""}}return firstValue};for(i=0;i<els.length;i++){el=els[i];propDesc=el.getConfigDescriptor().getChildByPath(this.getPath());if(propDesc){value=this.getValue(el);values.push(value)}}return equals(values)},getValue:function(el){var voltage=el.getVoltage();voltage=((voltage)?voltage.voltage:null);return voltage},format:function(key){var list;if(key===null){return"нет"}else{if(key===""){return""}else{if(list=this.getList(),list.hasOwnProperty(String(key))){return String(list[key])}else{if(list=this.getRevertList(),list.hasOwnProperty(key)){return String(key)}else{return""}}}}}});SLD.properties.ListVoltageClass=List;return List});define("core/properties/Store",["core/properties/deps","core/TreeStore","core/TreeStoreItem","core/Class"],function(SLD,TreeStore,TreeStoreItem,Class){var Store=Class.define(TreeStore,{_type:"SLDiagram.properties.Store",_initValues:function(cfg){TreeStoreItem.prototype._initValues.apply(this,arguments);this.setSLDiagram(cfg.sldiagram);return true},_selfCheck:function(){return Boolean(TreeStoreItem.prototype._selfCheck.call(this)&&SLDiagram.isSLDiagram(this.sldiagram))},setSLDiagram:function(sldiagram){if(SLD.isSLDiagram(sldiagram)===true){this.sldiagram=sldiagram;return true}else{return false}},getSLDiagram:function(){return((this.sldiagram)?this.sldiagram:null)}});SLD.properties.Store=Store;return Store});define("core/properties/MergedStore",["core/properties/deps","core/Class","core/properties/Store"],function(SLDiagram,Class,Store){var MergedStore=Class.define(Store,{_type:"SLDiagram.properties.MergedStore",_initDefaults:function(){var res=Store.prototype._initDefaults.apply(this,arguments);this.stores=[];return res},_initValues:function(cfg){var res=Store.prototype._initValues.apply(this,arguments);this.setStores(cfg.stores);return true},_selfCheck:function(){return Boolean(Store.prototype._selfCheck.apply(this,arguments)&&SLDiagram.Underscore.isArray(this.stores))},setStores:function(stores){var i,store;this.stores.length=0;for(i=0;i<stores.length;i++){store=stores[i];if(SLDiagram.properties.Store.isInstanceOf(store)){this.stores.push(store)}}this._updateData();return true},_updateData:function(){var i,store,me=this;var storeForEach=function(storeItem){me._updateItem(storeItem)};this.delAllChildren();for(i=0;i<this.stores.length;i++){store=this.stores[i];store.forEach(storeForEach)}this._deleteSelfItems(this.getChildren());return true},_setItem:function(fullPath,propDesc){var propDesc2=propDesc.clone();var path=SLDiagram.Utils.getPath(fullPath);var name=SLDiagram.Utils.getName(fullPath);var item=new SLDiagram.TreeStoreItem({name:name});propDesc2.setTreeStoreItem(item);item.setValue(propDesc2);return this.setChildAtPath(path,item)},_updateItem:function(storeItem){var selfItem,selfPropDesc,storePropDesc;selfItem=this.getChildByPath(storeItem.getPath(true));selfPropDesc=((selfItem)?selfItem.getValue():null);storePropDesc=((storeItem)?storeItem.getValue():null);if(storePropDesc&&!selfItem){this._setItem(storeItem.getPath(true),storeItem.getValue())}},_deleteSelfItems:function(items){var item,i,checkSelfItemInAllStores;for(i=items.length-1;i>=0;i--){item=items[i];if(item.getPath(true)===""){continue}checkSelfItemInAllStores=this._checkSelfItemInAllStores(item);if(!checkSelfItemInAllStores){item.del()}else{if(item.hasChildren()){this._deleteSelfItems(item.getChildren())}}}},_checkSelfItemInAllStores:function(selfItem){var selfItemPath=selfItem.getPath(true);var i,store,storeItem;for(i=0;i<this.stores.length;i++){store=this.stores[i];storeItem=store.getChildByPath(selfItemPath);if(!storeItem){return false}}return true}});SLDiagram.properties.MergedStore=MergedStore;return MergedStore});define("core/properties/properties",["core/properties/Prototype","core/properties/ListPrototype","core/properties/Base","core/properties/Color","core/properties/Color2","core/properties/List","core/properties/ListVoltageClass","core/properties/Store","core/properties/MergedStore"],function(SLD){return SLD.properties});define("core/DebugTimer",["core/sldiagram"],function(SLD){var DebugTimer=function(){this.init.apply(this,arguments)};DebugTimer.prototype={init:function(){this.time=0},start:function(){if(this.hasOwnProperty("startTime")){this.stop()}this.startTime=new Date()},stop:function(){var stopTime=new Date();var delta=stopTime.getTime()-this.startTime.getTime();this.time=this.time+delta;delete this.startTime},getSeconds:function(){return this.time/1000},getString:function(){return""}};SLD.DebugTimer=DebugTimer;return DebugTimer});define("core/Color",["core/sldiagram"],function(SLD){var Color=function(){this._init.apply(this,arguments)};Color.prototype={_init:function(color){this.r=null;this.g=null;this.b=null;this.set(color)},_checkRGB:function(r,g,b){return Boolean(SLDiagram.isNumber(r)&&0<=Number(r)&&Number(r)<=255&&SLDiagram.isNumber(g)&&0<=Number(g)&&Number(g)<=255&&SLDiagram.isNumber(b)&&0<=Number(b)&&Number(b)<=255)},_setRGB:function(r,g,b){if(this._checkRGB(r,g,b)){this.r=Number(r);this.g=Number(g);this.b=Number(b);return true}else{return false}},_checkValue:function(){return Boolean(typeof this.r==="number"&&typeof this.g==="number"&&typeof this.b==="number")},fromRgbArray:function(rgb){var r,g,b;if(rgb&&SLDiagram.isNumber(rgb[0])){r=Number(rgb[0])}if(rgb&&SLDiagram.isNumber(rgb[1])){g=Number(rgb[1])}if(rgb&&SLDiagram.isNumber(rgb[2])){b=Number(rgb[2])}return this._setRGB(r,g,b)},fromRgbObject:function(rgb){var r,g,b;if(rgb&&SLDiagram.isNumber(rgb.red)){r=Number(rgb.red)}if(rgb&&SLDiagram.isNumber(rgb.r)){r=Number(rgb.r)}if(rgb&&SLDiagram.isNumber(rgb.green)){g=Number(rgb.green)}if(rgb&&SLDiagram.isNumber(rgb.g)){g=Number(rgb.g)}if(rgb&&SLDiagram.isNumber(rgb.blue)){b=Number(rgb.blue)}if(rgb&&SLDiagram.isNumber(rgb.b)){b=Number(rgb.b)}return this._setRGB(r,g,b)},fromHexString:function(hex){var regs=Color._regexps.hex,r,g,b,nums;if(Color.isColorHex(hex)===0){return false}if(hex.match(regs.numbers6)){nums=hex.match(new RegExp("[0-9a-f]{2}","ig"));r=Color._hexStringToNumber(nums[0]);g=Color._hexStringToNumber(nums[1]);b=Color._hexStringToNumber(nums[2])}else{if(hex.match(regs.numbers3)){nums=hex.match(new RegExp("[0-9a-f]","ig"));r=Color._hexStringToNumber(nums[0]+nums[0]);g=Color._hexStringToNumber(nums[1]+nums[1]);b=Color._hexStringToNumber(nums[2]+nums[2])}}return this._setRGB(r,g,b)},fromRgbString:function(rgb){var regs=Color._regexps.rgb,r,g,b,nums,isRgb=Color.isColorRgb(rgb);if(isRgb===0){return false}if(isRgb===1){nums=rgb.match(regs.partial)[0]}else{if(isRgb===2){nums=rgb.match(regs.full)[0]}}if(isRgb===1||isRgb===2){nums=nums.match(regs.numbers);return this._setRGB(nums[0],nums[1],nums[2])}return false},set:function(color){var hex,rgb;if(typeof color!=="undefined"){if(color===null){this.r=null;this.g=null;this.b=null;return true}hex=SLDiagram.Color.isColorHex(color);rgb=SLDiagram.Color.isColorRgb(color);if(hex===2){this.fromHexString(color);return true}if(rgb===2){this.fromRgbString(color);return true}if(this.fromHexString(color)){return true}if(this.fromRgbString(color)){return true}if(this.fromRgbArray(color)){return true}if(this.fromRgbObject(color)){return true}}return false},clone:function(){var c=new Color();c.fromRgbObject(this);return c},toHexString:function(){if(this._checkValue()===false){return null}var r=Color._numberToHexString(this.r);var g=Color._numberToHexString(this.g);var b=Color._numberToHexString(this.b);if(r.length===1){r="0"+r}if(g.length===1){g="0"+g}if(b.length===1){b="0"+b}return"#"+r+g+b},toRgbString:function(){if(this._checkValue()===false){return null}return"rgb("+this.r+","+this.g+","+this.b+")"},toRgbArray:function(){if(this._checkValue()===false){return null}return[this.r,this.g,this.b]},toRgbObject:function(){if(this._checkValue()===false){return null}return{r:this.r,g:this.g,b:this.b}}};Color._regexps={hexnum:new RegExp("[0-9a-f]+","i"),hex:{numbers6:new RegExp("[0-9a-f]{6}","i"),numbers3:new RegExp("[0-9a-f]{3}","i"),full:new RegExp("#[0-9a-f]{6}","i")},rgb:{numbers:new RegExp("\\d+","g"),full:new RegExp("rgb\\(\\s*\\d{1,3}\\s*,\\s*\\d{1,3}\\s*,\\s*\\d{1,3}\\s*\\)","i"),partial:new RegExp("\\d{1,3}\\s*,\\s*\\d{1,3}\\s*,\\s*\\d{1,3}")}};Color.isColorHex=function(color){if(typeof color!=="string"){return 0}var c=String(color);var regs=Color._regexps.hex;var checkFull=Boolean(c.match(regs.full));if(checkFull){return 2}var checkNumbers3=Boolean(c.match(regs.numbers3));var checkNumbers6=Boolean(c.match(regs.numbers6));if(checkNumbers3||checkNumbers6){return 1}return 0};Color.isColorRgb=function(color){var c,regs,checkFull,part,numbers;if(typeof color!=="string"){return 0}c=String(color);regs=Color._regexps.rgb;checkFull=Boolean(c.match(regs.full));if(checkFull){return 2}part=c.match(regs.partial);if(part&&part.length>=1){part=part[0];numbers=part.match(regs.numbers);if(numbers&&numbers.length>=3){return 1}else{return 0}}else{return 0}};Color._hexStringToNumber=function(hex){return parseInt(String(hex),16)};Color._numberToHexString=function(num){return num.toString(16).toUpperCase()};SLD.Color=Color;return Color});define("core/StatusStyle",["core/sldiagram"],function(SLD){var StatusStyle=function(){this._init.apply(this,arguments)};StatusStyle.prototype={_init:function(obj){this._className="";this._defaults={};this._dataSources=[];if(obj&&obj!==null){if(typeof obj.className!=="undefined"){this.setClassName(obj.className)}if(obj.defaults&&obj.defaults!==null){this._defaults=obj.defaults}if(obj.dataSources){this.setDataSources(obj.dataSources)}if(typeof obj.getRelativeRegion==="function"){this.getRelativeRegion=obj.getRelativeRegion}}},setClassName:function(className){if(typeof className==="string"){this._className=String(className);return true}else{return false}},getClassName:function(){return this._className},_checkDataSource:function(ds){return Boolean(typeof ds==="object"&&ds!==null)},pushDataSource:function(ds){if(this._checkDataSource(ds)){this._dataSources.push(ds);return true}else{return false}},setDataSources:function(dataSources){if(SLDiagram.isArray(dataSources)===false){return false}this._dataSources=[];var i,ds;for(i in dataSources){if(dataSources.hasOwnProperty(i)){this.pushDataSource(dataSources[i])}}return true},getDataSources:function(){return this._dataSources},_execDataSourceMethod:function(ds,methodName){if(typeof ds[methodName]==="function"){return ds[methodName](this)}else{return null}},_getFromDataSources:function(methodName){var dataSources=this.getDataSources(),i,ds,value=null;for(i=0;i<dataSources.length&&value===null;i++){ds=dataSources[i];value=this._execDataSourceMethod(ds,methodName)}return value},_getFromDefaults:function(fieldName,value){var v;if(value===null){v=SLDiagram.getProperty(this._defaults,fieldName);if(typeof v==="function"){v=v.call(this)}return v}else{return value}},getBorderColor:function(){var color;color=this._getFromDataSources("getBorderColor");color=this._getFromDefaults("borderColor",color);return new SLDiagram.Color(color)},getBorderWidth:function(){var width;width=this._getFromDataSources("getBorderWidth");width=this._getFromDefaults("borderWidth",width);if(width===null){width=2}return this._convertStrToNumber(width)},getFillColor:function(){var color;color=this._getFromDataSources("getFillColor");color=this._getFromDefaults("fillColor",color);return new SLDiagram.Color(color)},getPadding:function(){var padding;padding=this._getFromDataSources("getPadding");padding=this._getFromDefaults("padding",padding);return this._convertStrToNumber(padding)},_convertStrToNumber:function(str){if(typeof str==="number"||str===null){return str}var nums,re;re=new RegExp("\\d+");nums=str.match(re);if(nums.length>0){return Number(nums[0])}else{return null}},getRelativeRegion:function(el){var type,schemeScale,tl,size,padding,res;type=el.getType();schemeScale=el.getSLDiagram().getScale();tl=type.getRealRelativeTopLeftPosition.call(el);size=type.getRealSchemeSize.call(el);padding=this.getPadding()*schemeScale;res={x:tl.x*schemeScale-padding,y:tl.y*schemeScale-padding,width:size.width*schemeScale+2*padding,height:size.height*schemeScale+2*padding};return res}};SLD.StatusStyle=StatusStyle;return StatusStyle});define("core/StatusStyleBottomRight",["core/sldiagram","utils/Utils","core/StatusStyle"],function(SLDiagram){var StatusStyleBottomRight=function(){this._init.apply(this,arguments)};StatusStyleBottomRight.prototype=SLDiagram.Utils.extend(new SLDiagram.StatusStyle(),{getRelativeRegion:function(el){var type,schemeScale,tl,size,padding,res,statusSize;type=el.getType();schemeScale=el.getSLDiagram().getScale();tl=type.getRealRelativeTopLeftPosition.call(el);size=type.getRealSchemeSize.call(el);padding=this.getPadding();statusSize=7;res={x:(tl.x+size.width)*schemeScale+padding*schemeScale-statusSize*schemeScale,y:(tl.y+size.height)*schemeScale+padding*schemeScale-statusSize*schemeScale,width:statusSize*schemeScale,height:statusSize*schemeScale};return res}});SLDiagram.StatusStyleBottomRight=StatusStyleBottomRight;return StatusStyleBottomRight});define("core/StatusStyleTopRight",["core/sldiagram","utils/Utils","core/StatusStyleBottomRight"],function(SLDiagram){var StatusStyleTopRight=function(){this._init.apply(this,arguments)};StatusStyleTopRight.prototype=SLDiagram.Utils.extend(new SLDiagram.StatusStyleBottomRight(),{getRelativeRegion:function(el){var type=el.getType();var schemeScale=el.getSLDiagram().getScale();var tl=type.getRealRelativeTopLeftPosition.call(el);var size=type.getRealSchemeSize.call(el);var padding=this.getPadding();var statusSize=7;var res={x:tl.x*schemeScale+size.width*schemeScale+padding*schemeScale-statusSize*schemeScale,y:tl.y*schemeScale-padding*schemeScale,width:statusSize*schemeScale,height:statusSize*schemeScale};return res}});SLDiagram.StatusStyleTopRight=StatusStyleTopRight;return StatusStyleTopRight});define("core/StatusStyleBottomRightInside",["core/sldiagram","utils/Utils","core/StatusStyle"],function(SLDiagram){var StatusStyleBottomRightInside=function(){this._init.apply(this,arguments)};StatusStyleBottomRightInside.prototype=Object.create(SLDiagram.StatusStyle.prototype);StatusStyleBottomRightInside.prototype.getRelativeRegion=function(el){var schemeScale=el.getSLDiagram().getScale(),size=el.getRealSchemeSize(),tl=el.getRealRelativeTopLeftPosition(),padding=this.getPadding(),statusSize=5,res;res={x:(tl.x+size.width)*schemeScale+padding*schemeScale-statusSize*schemeScale-2*schemeScale,y:(tl.y+size.height)*schemeScale+padding*schemeScale-statusSize*schemeScale,width:statusSize*schemeScale,height:statusSize*schemeScale};return res};SLDiagram.StatusStyleBottomRightInside=StatusStyleBottomRightInside;return StatusStyleBottomRightInside});define("core/Status",["core/sldiagram","utils/Utils"],function(SLD){var Status=function(){this._init.apply(this,arguments)};Status.prototype={_init:function(cfg){this._statusStyle=null;this._element=null;if(cfg){this._setStatusStyle(cfg.statusStyle);this._setElement(cfg.element);if(typeof cfg.getGraphics==="function"){this.getGraphics=cfg.getGraphics}if(typeof cfg.getRelativeRegion==="function"){this.getRelativeRegion=cfg.getRelativeRegion}}if(this._selfCheck()===false){throw new Error("FATAL: New SLDiagram.Status init incorrectly")}},_selfCheck:function(){return Boolean(typeof this._statusStyle==="object"&&this._statusStyle!==null&&SLDiagram.isElement(this._element))},_setStatusStyle:function(ss){if(typeof ss==="object"&&ss!==null){this._statusStyle=ss;return true}else{return false}},getStatusStyle:function(){return this._statusStyle},_setElement:function(el){if(SLDiagram.isElement(el)){this._element=el;return true}else{return false}},getElement:function(){return this._element},getType:function(){return this.getElement().getType()},getSLDiagram:function(){return this.getElement().getSLDiagram()},setClassName:function(className){return this.getStatusStyle().setClassName(className)},getClassName:function(){return this.getStatusStyle().getClassName()},_checkRegion:function(region){return Boolean(typeof region==="object"&&region!==null&SLDiagram.isNumber(region.x)&&SLDiagram.isNumber(region.y)&&SLDiagram.isNumber(region.width)&&SLDiagram.isNumber(region.height))},getGraphics:function(region){var figure,style,el,type,schemeScale,figureScale,borderColor;if(!this._checkRegion(region)){region=this.getRelativeRegion()}el=this.getElement();type=el.getType();figure=new createjs.Graphics();style=this.getStatusStyle();borderColor=style.getBorderColor();(figure.setStrokeStyle(style.getBorderWidth(),"round","round").beginStroke(style.getBorderColor().toHexString()).beginFill(style.getFillColor().toHexString()).drawRect(region.x,region.y,region.width,region.height));return figure},getRelativeRegion:function(){return this.getStatusStyle().getRelativeRegion(this.getElement())},getSchemeRegion:function(){var relativeRegion=this.getRelativeRegion(),pos=this.getType().getPosition.call(this.getElement());return{x:relativeRegion.x+pos.x,y:relativeRegion.y+pos.y,width:relativeRegion.width,height:relativeRegion.height}},getScreenRegion:function(){var schemeRegion=this.getSchemeRegion(),schemeScale=this.getSLDiagram().getScale(),currentOffset=this.getSLDiagram().getCurrentOffset();return{x:(schemeRegion.x-currentOffset.x)*schemeScale,y:(schemeRegion.y-currentOffset.y)*schemeScale,width:schemeRegion.width*schemeScale,height:schemeRegion.height*schemeScale}},getShape:function(region){var figure=this.getGraphics(region);if(figure){return new createjs.Shape(figure)}else{return null}}};SLD.Status=Status;return Status});define("core/MouseSimulator",["core/sldiagram","core/Class"],function(SLDiagram,Class){var MouseSimulator=Class.define(null,{_type:"SLDiagram.MouseSimulator",_initDefaults:function(){this.sldiagram=null},_initValues:function(cfg){if(cfg.sldiagram){this.sldiagram=cfg.sldiagram}},_selfCheck:function(){return Boolean(typeof this.sldiagram==="object"&&this.sldiagram!==null)},getSLDiagram:function(){return this.sldiagram},getCanvas:function(){return this.getStage().canvas},getStage:function(){return this.getSLDiagram().stage},_simulateGetCanvasXY:function(){var canvas=this.getCanvas();var rect=canvas.getBoundingClientRect();return{x:rect.left,y:rect.top}},_simulateGetXY:function(p){var ScreenPoint,p0;ScreenPoint=SLDiagram.getProperty(SLDiagram,"point/ScreenPoint");if(ScreenPoint&&ScreenPoint.is(p)){p0=p.toObject()}else{p0=p}return{x:p0.x,y:p0.y}},_simulateGetClientXY:function(p){var p0,cp,res;cp=this._simulateGetCanvasXY();p0=this._simulateGetXY(p);res={clientX:cp.x+p0.x,clientY:cp.y+p0.y};return res},simulateMouseDown:function(p){var stage,cfg,mousedown,mousemove;stage=this.getStage();cfg=this._simulateGetClientXY(p);mousemove=new MouseEvent("mousemove",cfg);mousedown=new MouseEvent("mousedown",cfg);stage._handleMouseMove(mousemove);stage._handleMouseDown(mousedown)},simulateMouseMove:function(p){var stage,cfg,mousemove;stage=this.getStage();cfg=this._simulateGetClientXY(p);mousemove=new MouseEvent("mousemove",cfg);stage._handleMouseMove(mousemove)},simulateMouseUp:function(p){var stage,cfg,mouseup;stage=this.getStage();cfg=this._simulateGetClientXY(p);mouseup=new MouseEvent("mouseup",cfg);stage._handleMouseUp(mouseup)},simulateClick:function(p){this.simulateMouseDown(p);this.simulateMouseUp(p)},simulateDragAndDrop:function(from,to){this.simulateMouseDown(from);this.simulateMouseMove(to);this.simulateMouseUp(to)},simulateDragAndDropSmooth:function(from,to,iterations,delay,done){var steps,step,delta,abs,f,t,i,j,mouseup,sld,run;if(typeof iterations!=="number"){iterations=1}if(typeof delay!=="number"){delay=0}if(typeof done!=="function"){done=function(){}}sld=this;abs=Math.abs;delay=delay/iterations;steps=[];from=this._simulateGetXY(from);to=this._simulateGetXY(to);delta={x:(to.x-from.x)/iterations,y:(to.y-from.y)/iterations};steps.push(from);step={x:from.x,y:from.y};j=0;while(j<iterations){step={x:step.x+delta.x,y:step.y+delta.y};steps.push(step);j++}mouseup=function(){var step=steps[steps.length-1];sld.simulateMouseUp(step);done(sld)};i=0;run=function(){var t=steps[i];sld.simulateMouseMove(t);if(i<steps.length-1){i++;setTimeout(function(){run()},delay)}else{mouseup()}};this.simulateMouseDown(steps[0]);run()}});SLDiagram.MouseSimulator=MouseSimulator;return MouseSimulator});define("core/DatasourceResponse",["core/sldiagram","core/Class"],function(SLDiagram,Class){var DatasourceResponse=Class.define(null,{_type:"SLDiagram.DatasourceResponse",_initDefaults:function(){this.data=null;this.fullData=null;this.sldiagram=null;return true},_initValues:function(cfg){this._setSLDiagram(cfg.sldiagram);return true},_selfCheck:function(){return Boolean((SLDiagram.Underscore.isArray(this.data)||this.data===null)&&(SLDiagram.Underscore.isArray(this.fullData)||this.fullData===null)&&SLDiagram.isSLDiagram(this.sldiagram))},_setSLDiagram:function(sld){if(typeof sld==="object"&&sld!==null){this.sldiagram=sld;return true}else{return false}},getSLDiagram:function(){return this.sldiagram},getSchemeAndDatabaseIds:function(){var sld=this.getSLDiagram();if(sld.schemeAndDatabaseIds){return sld.schemeAndDatabaseIds}else{return null}},getSchemeAndDatabaseIdsData:function(){var _=SLDiagram.Underscore;var res=[];var sad=this.getSchemeAndDatabaseIds();if(sad===null){return res}_.each(sad.data,function(s){res.push(_.clone(s))});res=_.uniq(res,false,function(d){return d.GTYPE+":"+d.ID_DATABASE+":"+d.ID_SCHEME+":"+d.ID_TABLE+":"+d.da_sys_gtopt_define_alias+":"+d.meas_val_id_param+":"+d.regim+":"+d.source_id+":"+d.scale});return res},_cloneProperties:function(srcObj,srcProps,dstObj){var i,srcProp;for(i=0;i<srcProps.length;i++){srcProp=srcProps[i];dstObj[srcProp]=srcObj[srcProp]}return dstObj},_responseProperties:["ID1","SOURCE1","STATE1","STATUSES","TYPE1","VALUE1"],_schemeAndDatabaseProperties:["GTYPE","ID_SCHEME","ID_DATABASE","ID_TABLE","regim","da_sys_gtopt_define_alias","meas_val_id_param","source_id"],_getFullData:function(){if(this.fullData){return this.fullData}var sad=this.getSchemeAndDatabaseIdsData(),all=[],i,sadItem,respItems,j,respItem,allItem;for(i=0;i<sad.length;i++){sadItem=sad[i];respItems=this._getResponseData({ID1:sadItem.ID_DATABASE,SOURCE1:sadItem.source_id,TYPE1:sadItem.GTYPE});for(j=0;j<respItems.length;j++){respItem=respItems[j];allItem={ID1:null,SOURCE1:null,STATE1:null,STATUSES:["OIC_DST_NOPRESENT"],TYPE1:null,VALUE1:0};this._cloneProperties(respItem,this._responseProperties,allItem);this._cloneProperties(sadItem,this._schemeAndDatabaseProperties,allItem);all.push(allItem)}}this.fullData=all;return all},_getFullDataGroupedBySchemeId:function(){if(this.fullDataGroupedBySchemeId){return this.fullDataGroupedBySchemeId}var all=this._getFullData();var res={};var i,item,idScheme;for(i=0;i<all.length;i++){item=all[i];idScheme=item.ID_SCHEME;if(typeof res[idScheme]==="undefined"){res[idScheme]=[]}res[idScheme].push(item)}this.fullDataGroupedBySchemeId=res;return res},_getActiveElementsBySchemeId:function(){if(this.activeElements){return this.activeElements}var data=this._getFullDataGroupedBySchemeId(),els,res={},sld=this.getSLDiagram(),i,el,elDesc;var schemeId,items;for(schemeId in data){if(data.hasOwnProperty(schemeId)){items=data[schemeId];schemeId=Number(schemeId);els=sld.searchActiveElementsById(schemeId);for(i=0;i<els.length;i++){el=els[i];elDesc={inside_id:el.id,scheme_id:schemeId,element:el,data:items};if(!res[schemeId]){res[schemeId]=[]}res[schemeId].push(elDesc)}}}this.activeElements=res;return res},_statusToNumber:function(name){return SLDiagram.Utils.Statuses.statusToNumber(name)},_createDatasource:function(name,value,status){return{name:name,value:value,status:status}},_getDatasourceDescByName:function(name){switch(name){case"main":return"Состояние КА";case"pullState":return"Положение тележки";default:return null}},_createChange:function(element,datasources){var _=SLDiagram.Underscore;var res;var check=Boolean(SLDiagram.isElement(element)&&_.isObject(datasources)&&(_.has(datasources,"main")||_.has(datasources,"pullState")));var schemeId=element.type.getId.call(element);if(!check){throw new Error("Неверные типы аргументов DatasourceResponse._createChange")}res={id:schemeId,el:element,datasources:datasources};return res},MESSAGE_DATAITEM_STATUSES_WRONG_TYPE:"dataItem.STATUSES не является массивом",MESSAGE_ERROR_VALUE:"Устанавливаемое значение отлично от установленного ранее",MESSAGE_ERROR_MAIN_DATASOURCE_EXISTS:"Основной источник данных уже существует",MESSAGE_ERROR_PULLSTATE_DATASOURCE_EXISTS:"Источник данных для выкатной тележки уже существует",_getChanges:function(){if(this.changes){return this.changes}var elsBySchemeId=this._getActiveElementsBySchemeId(),schemeId,els,changes={},change,datasources,i,elDesc,dataKey,dataRec,value,status,errMsg,errInfo,_=SLDiagram.Underscore;for(schemeId in elsBySchemeId){if(elsBySchemeId.hasOwnProperty(schemeId)){els=elsBySchemeId[schemeId];changes[schemeId]=[];for(i=0;i<els.length;i++){elDesc=els[i];datasources={};for(dataKey in elDesc.data){if(elDesc.data.hasOwnProperty(dataKey)){dataRec=elDesc.data[dataKey];if(!dataRec.STATUSES||typeof dataRec.STATUSES.length!=="number"){throw new Error(this.MESSAGE_DATAITEM_STATUSES_WRONG_TYPE)}if(dataRec.GTYPE===3){value=((dataRec.VALUE1===0)?false:true)}else{value=Number(dataRec.VALUE1)}status=dataRec.STATUSES;if(dataRec.regim===2){if(datasources.main){if(datasources.main.value!=value){errMsg=this.MESSAGE_ERROR_MAIN_DATASOURCE_EXISTS;errInfo=this._getValueConflictErrorInfo(datasources.main,dataRec,value);console.error(errMsg+". "+this.MESSAGE_ERROR_VALUE+"\n"+errInfo);this._sendDuplicateError()}}else{datasources.main=this._createDatasource("main",value,status)}}else{if(dataRec.regim===3){if(datasources.pullState){if(datasources.pullState.value!=value){errMsg=this.MESSAGE_ERROR_PULLSTATE_DATASOURCE_EXISTS;errInfo=this._getValueConflictErrorInfo(datasources.pullState,dataRec,value);console.error(errMsg+". "+this.MESSAGE_ERROR_VALUE+"\n"+errInfo);this._sendDuplicateError()}}else{datasources.pullState=this._createDatasource("pullState",value,status)}}}}}if(!_.isEmpty(datasources)){change=this._createChange(elDesc.element,datasources);changes[schemeId].push(change)}}}}this.changes=changes;return changes},_sendDuplicateError:function(){var sld=this.getSLDiagram(),errorMsg="Получены несколько различных значений на один источник данных",timeout=90;if(!sld._duplicateError){SLDiagram.Debug.addMessage("Ошибка в полученых данных",errorMsg,SLDiagram.Debug.statuses.ERROR,{showPopUp:false});sld._duplicateError=true;setTimeout(timeout*1000,function(){delete sld._duplicateError});return true}else{return false}},_checkData:function(d){return Boolean(typeof d==="object"&&d!==null&&SLDiagram.isNumber(d.ID1)&&SLDiagram.isNumber(d.SOURCE1)&&SLDiagram.isNumber(d.STATE1)&&SLDiagram.Underscore.isArray(d.STATUSES)&&SLDiagram.isNumber(d.TIME1)&&SLDiagram.isNumber(d.TYPE1)&&SLDiagram.isNumber(d.VALUE1))},_prepareData:function(d){if(this._checkData(d)){return{ID1:Number(d.ID1),SOURCE1:Number(d.SOURCE1),STATE1:Number(d.STATE1),STATUSES:d.STATUSES,TIME1:Number(d.TIME1),TYPE1:Number(d.TYPE1),VALUE1:Number(d.VALUE1)}}else{return null}},setData:function(data){var i,d;if(this.data){this.data.length=0}else{this.data=[]}for(i in data){if(data.hasOwnProperty(i)){d=this._prepareData(data[i]);if(d){this.data.push(d)}}}return true},_getResponseData:function(filter){if(!this.data){throw new Error("Обращение к данным до их получения")}var res,i,item;if(!filter){return this.data}else{res=[];for(i=0;i<this.data.length;i++){item=this.data[i];if(item.ID1===filter.ID1&&item.SOURCE1===filter.SOURCE1&&item.TYPE1===filter.TYPE1){res.push(item)}}return res}},MESSAGE_NOT_DEFINED_DATASOURCES_FOR_ELEMENT:"Не обнаружены источники данных для элемента с id=",_applyData:function(){var changes=this._getChanges(),changeRec,changeKey,el,key,change,status,main,pullState,_=SLDiagram.Underscore;for(changeKey in changes){if(changes.hasOwnProperty(changeKey)){changeRec=changes[changeKey];for(key in changeRec){if(changeRec.hasOwnProperty(key)){change=changeRec[key];el=change.el;main=SLDiagram.getProperty(change,"datasources/main");pullState=SLDiagram.getProperty(change,"datasources/pullState");if(main&&pullState){status=_.union(main.status,pullState.status)}else{if(main&&!pullState){status=main.status}else{if(!main&&pullState){status=pullState.status}else{throw new Error(this.MESSAGE_NOT_DEFINED_DATASOURCES_FOR_ELEMENT+change.id)}}}if(main){el.setValue(main.value)}if(pullState){el.setPullState(pullState.value)}el.setStatus(status)}}}}return true},applyData:function(data){var res;try{this._clearProperties();this.clearData();this.setData(data);res=this._applyData();this._clearProperties()}catch(ex){console.error("Ошибка обработки данных:",ex);SLDiagram.Debug.addMessage("Ошибка обработки данных",ex.message,SLDiagram.Debug.statuses.ERROR,{showPopUp:false});res=false}return res},_getSchemeIds:function(){if(this._schemeIds){return this._schemeIds}var sadIds,data,res=[],i,item;sadIds=this.getSchemeAndDatabaseIds();if(!sadIds){this._schemeIds=res;return res}data=sadIds.data;if(!data){this._schemeIds=res;return res}for(i=0;i<data.length;i++){item=data[i];if(res.indexOf(item.ID_SCHEME)<0){res.push(item.ID_SCHEME)}}this._schemeIds=res;return res},_getActiveElements:function(){if(this._activeElements){return this._activeElements}var ids=this._getSchemeIds(),sld=this.getSLDiagram(),els=sld.searchActiveElementsByIds(ids);this._activeElements=els;return els},getActiveElements:function(){return this._getActiveElements()},clearData:function(){var els=this._getActiveElements(),i,el;for(i=0;i<els.length;i++){el=els[i];if(el.getValueType()==="number"){el.setValue(0)}el.setStatus(undefined)}return true},_clearProperties:function(){delete this._schemeIds;delete this._activeElements;delete this.fullData;delete this.fullDataGroupedBySchemeId;delete this.activeElements;delete this.changes;return true},_getValueConflictErrorInfo:function(datasource,dataRec,value){var idScheme=SLDiagram.getProperty(dataRec,"ID_SCHEME"),idDatabase=SLDiagram.getProperty(dataRec,"ID_DATABASE"),datasourceName=SLDiagram.getProperty(datasource,"name"),datasourceDesc=this._getDatasourceDescByName(datasourceName),value0=SLDiagram.getProperty(datasource,"value");return"Идентификатор элемента на схеме: "+JSON.stringify(idScheme)+"\nИдентификатор параметра в базе: "+JSON.stringify(idDatabase)+"\nТип источника данных: "+JSON.stringify(datasourceDesc)+"\nПринятое значение: "+JSON.stringify(value0)+"\nДругое значение: "+JSON.stringify(value)+"\ndataRec: "+JSON.stringify(dataRec)+"\ndatasource: "+JSON.stringify(datasource)}});SLDiagram.DatasourceResponse=DatasourceResponse;return DatasourceResponse});define("core/Result",["core/sldiagram","core/Class"],function(SLDiagram,Class){var Result=Class.define(null,{_type:"SLDiagram.Result",_init:function(){this._initDefaults();this._initValues.apply(this,arguments);var cfg=arguments[0];if((!cfg||(cfg&&!cfg._disableCheck))&&!this._selfCheck()){throw new Error("FATAL: New "+this._getTypeName()+" init incorrectly")}},_initDefaults:function(){this.success=false;this.data=null;return true},_initValues:function(cfg){if(typeof arguments[0]==="object"&&arguments[0]!==null&&typeof arguments[0].success==="boolean"&&typeof arguments[0].data!=="undefined"){this.setState(arguments[0].success);this.setData(arguments[0].data);return true}else{if(typeof arguments[0]==="boolean"&&typeof arguments[1]!=="undefined"){this.setState(arguments[0]);this.setData(arguments[1]);return true}else{return false}}},_selfCheck:function(){return Boolean(typeof this.success==="boolean"&&typeof this.data!=="undefined")},setState:function(s){this.success=Boolean(s);return true},getState:function(attribute){return Boolean(this.success)},setData:function(d){if(typeof d!=="undefined"){this.data=d;return true}else{return false}},getData:function(attribute){return this.data}});SLDiagram.Result=Result;return Result});define("core/ComponentRemover",["core/sldiagram","core/Class"],function(SLDiagram,Class){SLDiagram.ComponentRemover=Class.define(null,{_type:"SLDiagram.ComponentRemover",_initDefaults:function(){this._ids=[];this._sldiagram=null;return true},_initValues:function(cfg){this._setSLDiagram(cfg.sldiagram);return true},_selfCheck:function(){return Boolean(SLDiagram.isSLDiagram(this._sldiagram)&&SLDiagram.Underscore.isArray(this._ids))},_setSLDiagram:function(sld){if(SLDiagram.isSLDiagram(sld)){this._sldiagram=sld;return true}else{return false}},getSLDiagram:function(){return this._sldiagram},_clear:function(){this._ids.length=0;return true},_clearDatasources:function(ids){var sld=this.getSLDiagram();var i,id;if(sld.schemeAndDatabaseIds){for(i=0;i<ids.length;i++){id=ids[i];sld.schemeAndDatabaseIds.deleteBySchemeId(id)}return true}else{return false}},_send:function(){var sld=this.getSLDiagram();var me=this;if(sld.format){sld.format.deleteComponent(this._ids,function(err,results){var ids=[];var i;if(results&&results.length>0){for(i=0;i<results.length;i++){if(results[i]){ids.push(me._ids[i])}}me._clearDatasources(ids)}me._clear()})}else{me._clear()}},removeElement:function(el){var me=this;var sld=this.getSLDiagram();var schemeId;var checkDs;schemeId=el.type.getId.call(el);checkDs=Boolean(sld.schemeAndDatabaseIds&&sld.schemeAndDatabaseIds.searchBySchemeId(schemeId)!==null);if(checkDs){if(this._ids.length===0){setTimeout(function(){me._send()},100)}this._ids.push(schemeId);return true}else{return false}},clearOnOpenScheme:function(){var sld=this.getSLDiagram();var _=SLDiagram.Underscore;var idsFromDatasoruces;var idsFromElements=[];var i,el,diffIds,id;if(!sld.schemeAndDatabaseIds){return false}idsFromDatasoruces=_.pluck(sld.schemeAndDatabaseIds.data,"ID_SCHEME");for(i in sld.activeElements){if(sld.activeElements.hasOwnProperty(i)){el=sld.activeElements[i];id=el.type.getId.call(el);if(id!==null){idsFromElements.push(id)}}}diffIds=_.difference(idsFromDatasoruces,idsFromElements);if(diffIds.length>0){this._ids=diffIds;this._send();return true}else{return false}}});return SLDiagram.ComponentRemover});define("core/SaveDatasoursesRequest",["core/sldiagram","core/Class"],function(SLDiagram,Class){var SaveDatasoursesRequest=Class.define(null,{_type:"SLDiagram.SaveDatasoursesRequest",_initDefaults:function(cfg){this.sldiagram=null},_initValues:function(cfg){this._setSLDiagram(cfg.sldiagram)},_selfCheck:function(){return Boolean(SLDiagram.isSLDiagram(this.sldiagram))},_setSLDiagram:function(sld){if(typeof sld==="object"&&sld!==null){this.sldiagram=sld;return true}else{return false}},getSLDiagram:function(){return this.sldiagram},datasources:{MAIN:2,PULLSTATE:3,TELECONTROL:5},getRequestData:function(){var sld=this.getSLDiagram();var db=sld.getSchemeAndDatabaseIds();var data=db.data;var i,d;var res=[];var els;var j,el;var scale;for(i=0;i<data.length;i++){d=data[i];els=sld.searchActiveElementsById(d.ID_SCHEME);for(j=0;j<els.length;j++){el=els[j];if(d.regim===this.datasources.MAIN){scale=el.getMainDatasourceScale()}else{if(d.regim===this.datasources.PULLSTATE){scale=el.getPullstateDatasourceScale()}else{if(d.regim===this.datasources.TELECONTROL){scale=el.getTelecontrolDatasourceScale()}else{scale=1}}}res.push({comp_name:d.ID_SCHEME,id_regim:d.regim,id_table:d.ID_TABLE,element_type:el.getType().id,id_param:d.ID_DATABASE,scale:scale})}}return res},getSchemeId:function(){var sld=this.getSLDiagram();var id=sld.getConfigProperty("scheme/id",null,false);if(SLDiagram.isNumber(id)){id=Number(id)}else{id=null}return id},getSchemeName:function(){var sld=this.getSLDiagram();var name=sld.getConfigProperty("scheme/name",null,false);if(typeof name==="string"&&name.length>0){return name}else{return null}},save:function(callback){try{if(typeof callback!=="function"){callback=function(){}}callback=SLDiagram.Underscore.once(callback);var sld=this.getSLDiagram();var schemeId=this.getSchemeId();var dataSources;var actions;if(schemeId===null){throw new Error("Не задан идентификатор схемы в параметрах")}dataSources=this.getRequestData();actions=[{action:"clear"},{action:"set",data_sources:dataSources}];SLDiagram.Ajax.request({url:"/json/newschemes/update-data-source",params:{scheme_id:String(schemeId),actions:JSON.stringify(actions)},scope:this,success:function(resp){return callback(null,true)},failure:function(){return callback(null,false)},unsuccess:function(){return callback(null,false)},acl:{success:function(){},failure:function(){return callback(null,false)}}})}catch(ex){return callback(ex,null)}}});SLDiagram.SaveDatasoursesRequest=SaveDatasoursesRequest;return SaveDatasoursesRequest});define("core/AsyncFunction",["core/sldiagram"],function(SLDiagram){var AsyncFunction={};AsyncFunction.create=function(fn,params){params=params||{};if(!params.argumentsParser){params.argumentsParser=function(newArgs){return newArgs}}var f2=function(){if(f2.isDisabled()===false){f2._args=params.argumentsParser(Array.prototype.slice.call(arguments),f2._args,f2);if(f2.isRunning()===false){f2.setTimeout(f2.timeout)}}};f2.events=new SLDiagram.Utils.EventEmitter();f2.on=f2.events.on.bind(f2.events);f2.off=f2.events.off.bind(f2.events);f2.once=f2.events.once.bind(f2.events);f2.timeout=params.timeout;f2.scope=params.scope;f2._disableCounter=0;f2._timerId=null;f2._timeStart=null;f2._args=[];f2.disable=function(){if(this.isRunning()){this._clear()}this._disableCounter++;if(this._disableCounter===1){this.events.emit("disabled")}};f2.enable=function(){if(this._disableCounter>0){this._disableCounter--;if(this._disableCounter===0){this.events.emit("enabled")}}};f2.forceEnable=function(){var counter=this._disableCounter;this._disableCounter=0;if(counter>0){this.events.emit("enabled")}};f2.isRunning=function(){return Boolean(this._timerId!==null)};f2.isDisabled=function(){return Boolean(this._disableCounter>0)};f2.cancel=function(silent){if(this._timerId){clearTimeout(this._timerId);this._timerId=null;if(!silent){this.events.emit("canceled")}}this._timeStart=null};f2._clear=function(){this._args=[];this.cancel(true)};f2.force=function(){if(this.isRunning()){this.cancel(true)}this.events.emit("beforeExecute");if(typeof arguments[0]!=="undefined"){this._args=params.argumentsParser(Array.prototype.slice.call(arguments),f2._args,f2)}var result=fn.apply(this.scope,this._args);this.events.emit("afterExecute",result);this._clear()};f2.addCallback=function(callback){this.events.on("afterExecute",callback)};f2.setTimeout=function(timeout){var now=new Date();var timeStart=this._timeStart||now;var delta=now.getTime()-timeStart.getTime();if(timeout-delta<0){return false}if(this._timerId!==null){clearTimeout(this._timerId);this._timerId=null}var byTimer=function(){f2.events.emit("beforeExecute");var result=fn.apply(f2.scope,f2._args);f2.events.emit("afterExecute",result);f2._clear()};if(!this._timeStart){this._timeStart=timeStart}this._timerId=setTimeout(byTimer,timeout-delta);return true};return f2};SLDiagram.AsyncFunction=AsyncFunction;return AsyncFunction});define("core/DisabledFunction",["core/sldiagram"],function(SLDiagram){var DisabledFunction={create:function(baseFn,scope){var fn;fn=function(){return fn.execute.apply(this,arguments)};fn.execute=function(){if(fn.isEnabled()){return fn._baseFn.apply(fn.scope,arguments)}else{return}};fn.scope=((scope)?scope:window);fn._baseFn=baseFn;fn._disabledCount=0;fn.disable=function(){fn._disabledCount++;return true};fn.enable=function(){if(fn._disabledCount>0){fn._disabledCount--;return true}else{return false}};fn.isEnabled=function(){return Boolean(fn._disabledCount<=0)};return fn}};SLDiagram.DisabledFunction=DisabledFunction;return DisabledFunction});define("core/Grid",["core/sldiagram"],function(SLDiagram){SLDiagram.prototype._createEmptyGridSettings=function(){this._grid={offset:{x:0,y:0},step:{x:1,y:1},lineColor:"#CCCCCC"}};SLDiagram.prototype.getGridSettings=function(){if(!this._grid){this._createEmptyGridSettings()}return this._grid};SLDiagram.prototype.setGridSettingsFromConfig=function(){var grid=this.getGridSettings();var ox,oy,sx,sy,c;ox=this.getConfigProperty("grid/offset/x",null,false);oy=this.getConfigProperty("grid/offset/y",null,false);sx=this.getConfigProperty("grid/step/x",null,false);sy=this.getConfigProperty("grid/step/y",null,false);c=this.getConfigProperty("grid/lineColor",null,false);if(!isNaN(ox)){grid.offset.x=Number(ox)}if(!isNaN(oy)){grid.offset.y=Number(oy)}if(!isNaN(sx)){grid.step.x=Number(sx)}if(!isNaN(sy)){grid.step.y=Number(sy)}if(SLDiagram.isColor(c)){grid.lineColor=SLDiagram.toColor(c)}this.setGridStatus(true);this.setGridSnapStatus(true);return Boolean(!isNaN(ox)||!isNaN(oy)||!isNaN(sx)||!isNaN(sy)||SLDiagram.isColor(c))};SLDiagram.prototype.setGridSettings=function(cfg,save){var grid=this.getGridSettings();var ox,oy,sx,sy,c;ox=this.getProperty(cfg,"grid/offset/x");oy=this.getProperty(cfg,"grid/offset/y");sx=this.getProperty(cfg,"grid/step/x");sy=this.getProperty(cfg,"grid/step/y");c=this.getProperty(cfg,"grid/lineColor");if(!isNaN(ox)){grid.offset.x=Number(ox);if(save){this.setConfigProperty("grid/offset/x",Number(ox))}}if(!isNaN(oy)){grid.offset.y=Number(oy);if(save){this.setConfigProperty("grid/offset/y",Number(oy))}}if(!isNaN(sx)){grid.step.x=Number(sx);if(save){this.setConfigProperty("grid/step/x",Number(sx))}}if(!isNaN(sy)){grid.step.y=Number(sy);if(save){this.setConfigProperty("grid/step/y",Number(sy))}}if(SLDiagram.isColor(c)){grid.lineColor=SLDiagram.toColor(c);if(save){this.setConfigProperty("grid/lineColor",SLDiagram.toColor(c))}}return Boolean(!isNaN(ox)||!isNaN(oy)||!isNaN(sx)||!isNaN(sy)||SLDiagram.isColor(c))};SLDiagram.prototype.clearGridSettings=function(){this.delConfigProperty("grid");return true};SLDiagram.prototype.getGridStatus=function(){return Boolean(this.getSysConfigProperty("grid/status",false,false))};SLDiagram.prototype.setGridStatus=function(s){this.setSysConfigProperty("grid/status",Boolean(s))};SLDiagram.prototype.getGridSnapStatus=function(){return Boolean(this.getSysConfigProperty("grid/snap",false,false))};SLDiagram.prototype.setGridSnapStatus=function(s){this.setSysConfigProperty("grid/snap",Boolean(s))};SLDiagram.prototype._onUpdateGridSettings=function(events,eventName,data){var paths=["grid/step/x","grid/step/y","grid/lineColor"];if(!data){return}if(paths.indexOf(data.path)>=0&&this.getGridStatus()){this.setGridSettingsFromConfig()}};SLDiagram.prototype._updateGridAfterOpenScheme=function(events,eventName,data){if(this.getGridStatus()){this.setGridSettingsFromConfig();this.render()}};return SLDiagram});define("core/SnapToPixel",["core/sldiagram"],function(SLDiagram){SLDiagram.prototype.isEnabledSnapToPixel=function(){return Boolean(this._isEnabledSnapToPixel)};SLDiagram.prototype.setEnabledSnapToPixel=function(value){this._isEnabledSnapToPixel=Boolean(value);return true};SLDiagram.prototype._offsetSnapToPixel=function(){var offset,scale,pixel;if(this.isEnabledSnapToPixel()){scale=this.getScale();if(scale<=0){throw new Error("Масштаб должен быть положительным числом")}pixel=1/scale;offset=this.config.currentOffset;offset.x=Math.floor(offset.x/pixel)*pixel;offset.y=Math.floor(offset.y/pixel)*pixel;offset.x+=pixel/2;offset.y+=pixel/2;return true}else{return false}};SLDiagram.prototype.offsetSnapToPixel=SLDiagram.prototype._offsetSnapToPixel;SLDiagram.prototype.setGridSettingsForPixelSnap=function(){var grid=this.getGridSettings();grid.offset.x=0;grid.offset.y=0;grid.step.x=1;grid.step.y=1;this.setGridStatus(false);this.setGridSnapStatus(true);return true};return SLDiagram});define("core/sldiagram-default-config-descriptor",["core/sldiagram"],function(SLDiagram){var getCfgDesc=function(){return[{name:"scheme",value:{desc:"Схема",expanded:true},children:[{name:"id",value:{desc:"Идентификатор",nativeType:"number",readonly:true}},{name:"name",value:{desc:"Название",nativeType:"string",readonly:true}},{name:"filename",value:{desc:"Имя файла",nativeType:"string",hidden:true}},{name:"period",value:{desc:"Период обновления",nativeType:"number",hidden:true}},{name:"backColor",value:{type:"Color2",desc:"Цвет фона",list:SLDiagram.default40Colors,nativeType:"string",setValue:function(sld,value){return sld.setBackgroundColor(value)},getValue:function(sld){return sld.getBackgroundColor()}}},{name:"statuses",value:{desc:"Статусы",hidden:true}}]},{name:"grid",value:{desc:"Сетка",expanded:true},children:[{name:"offset",value:{desc:"Смещение",hidden:true},children:[{name:"x",value:{desc:"X",type:"Base",nativeType:"number"}},{name:"y",value:{desc:"Y",type:"Base",nativeType:"number"}}]},{name:"step",value:"Шаг",children:[{name:"x",value:{desc:"X",type:"Base",nativeType:"number",min:1,max:1000}},{name:"y",value:{desc:"Y",type:"Base",nativeType:"number",min:1,max:1000}}]},{name:"lineColor",value:{desc:"Цвет линии",type:"Color2",list:SLDiagram.default40Colors}}]},{name:"selection",value:{desc:"Стиль выделения",expanded:true},children:[{name:"rect",value:"Стиль рукоятки",children:[{name:"line",value:{desc:"Линия",nativeType:"string",hidden:true}},{name:"color",value:{type:"Color2",desc:"Цвет",list:SLDiagram.default40Colors}},{name:"size",value:{desc:"Размер",nativeType:"number",min:5,max:15}}]},{name:"lineColor",value:{type:"Color2",desc:"Цвет линий",list:SLDiagram.default40Colors}}]},{name:"figure",value:{desc:"Фигуры",expanded:true},children:[{name:"size",value:{desc:"Размер",hidden:true},children:[{name:"width",value:{desc:"Ширина",nativeType:"number",hidden:true}},{name:"height",value:{desc:"Высота",nativeType:"number",hidden:true}}]},{name:"statusPadding",value:{desc:"Отступ рамки от фигуры",nativeType:"number",hidden:true}},{name:"switcher",value:{desc:"Выключатель"},children:[{name:"onColor",value:{type:"Color2",desc:'Цвет "Включено"',list:SLDiagram.default40Colors,getValue:function(sld){return sld.getConfigProperty("figure/onColor","#FF0000",false)},setValue:function(sld,value){var v=SLDiagram.toColor(value)||"#FF0000";sld.setConfigProperty("figure/onColor",v);return true}}},{name:"offColor",value:{type:"Color2",desc:'Цвет "Отключено"',list:SLDiagram.default40Colors,getValue:function(sld){return sld.getConfigProperty("figure/offColor","#FF0000",false)},setValue:function(sld,value){var v=SLDiagram.toColor(value)||"#FF0000";sld.setConfigProperty("figure/offColor",v);return true}}}]},{name:"lamp",value:{desc:"Лампа"},children:[{name:"on",value:{type:"Color2",desc:'Цвет "Включено"',list:SLDiagram.default40Colors,getValue:function(sld){return SLDiagram.Utils.get(sld,"config.figure.lamp.on","#FF0000")},setValue:function(sld,value){value=SLDiagram.toColor(value);if(value!==null){SLDiagram.Utils.set(sld,"config.figure.lamp.on",value);return true}else{return false}}}},{name:"off",value:{type:"Color2",desc:'Цвет "Отключено"',list:SLDiagram.default40Colors,getValue:function(sld){return SLDiagram.Utils.get(sld,"config.figure.lamp.off","#A0A0A0")},setValue:function(sld,value){value=SLDiagram.toColor(value);if(value!==null){SLDiagram.Utils.set(sld,"config.figure.lamp.off",value);return true}else{return false}}}}]}]},{name:"scale",value:{desc:"Масштаб",nativeType:"number",hidden:true}},{name:"canvasSize",value:{desc:"Размер области",hidden:true},children:[{name:"width",value:{desc:"Ширина",nativeType:"number",hidden:true}},{name:"height",value:{desc:"Высота",nativeType:"number",hidden:true}}]},{name:"drawSize",value:{desc:"Размер схемы",hidden:true},children:[{name:"width",value:{desc:"Ширина",nativeType:"number"}},{name:"height",value:{desc:"Высота",nativeType:"number"}}]},{name:"currentOffset",value:{desc:"Текущее смещение",hidden:true},children:[{name:"x",value:{desc:"X",nativeType:"number",hidden:true}},{name:"y",value:{desc:"Y",nativeType:"number",hidden:true}}]},{name:"defaultVoltageClass",value:{desc:"Класс напряжения",nativeType:"string",hidden:true}},{name:"voltageColors",value:{desc:"Классы напряжения, кВ",hidden:false,readonly:true,rememberExpanded:true,expanded:true,menu:[{text:"Добавить",handler:function(propDesc){var node=propDesc.getTreeStoreItem();if(!node){return}var root=node.getRoot();if(!root){return}var sld=root.getSLDiagram();if(!sld){return}var editor=Ext.create("Wasutp.Schemes.extends.VoltageRowEditor",{});editor.show();editor.setCallback(function(err,data){var child;if(!err&&data){child=SLDiagram.Utils.createVoltageTreeItem(sld,data.name,data.color).toTreeItem();sld.getConfigDescriptor().setChildAtPath("voltageColors",child);sld.setConfigProperty("voltageColors/"+data.name,data.color);sld.events.fireEvent("changeSelection",null)}})}}],prepareChildCfg:function(cfg){cfg=cfg||{};cfg.type="Color2";return cfg}},children:function(node){var root=node.getRoot();var sld;if(root){sld=root.getSLDiagram()}var props;var i,prop;var res;if(!sld){return[]}else{props=SLDiagram.Utils.getVoltageClassesProperties(sld);res=[];for(i=0;i<props.length;i++){prop=props[i].toTreeItem();prop.setParent(node);res.push(prop)}return res}}}]};SLDiagram.getSldiagramDefaultConfigDescriptor=getCfgDesc;return getCfgDesc});define("core/sldiagram-default-config",["core/sldiagram"],function(SLDiagram){var getSldiagramDefaultConfig=function(){return{scale:1,canvasSize:{width:600,height:400},drawSize:{width:100000,height:100000},currentOffset:{x:0.5,y:0.5},selection:{lineColor:"#FF00FF",rect:{line:null,color:"#FFFF00",size:10}},figure:{size:{width:40,height:40},statusPadding:5,onColor:"#FF0000",offColor:"#00FF00",lamp:{on:"#FF0000",off:"#A0A0A0"}},scheme:{id:null,name:SLDiagram.newSchemeName,filename:null,period:null,backColor:"#F8F8F8"},voltageColors:{"0.4":"#800000","6":"#FF6600","10":"#808000","35":"#008000","110":"#008080","220":"#0000FF","330":"#666699","500":"#FF0000","750":"#99CC00","1150":"#3366FF"},grid:{offset:{x:0,y:0},step:{x:20,y:20},lineColor:"#CCCCCC"},defaultVoltageClass:null}};SLDiagram.getSldiagramDefaultConfig=getSldiagramDefaultConfig;return getSldiagramDefaultConfig});define("core/blink-bug-fix",[],function(){createjs.Text.prototype.draw=function(ctx,ignoreCache){var font=this.font+" ";if(this.DisplayObject_draw(ctx,ignoreCache)){return true}if(this.outline){ctx.strokeStyle=this.color}else{ctx.fillStyle=this.color}ctx.font=font;ctx.textAlign=this.textAlign||"start";ctx.textBaseline=this.textBaseline||"alphabetic";this._drawText(ctx);return true};return createjs});define("core/TouchEvents",["core/sldiagram"],function(SLDiagram){SLDiagram.prototype.getTouchEvents=function(){if(this._touchEvents){return this._touchEvents}this._touchEvents=new SLDiagram.TouchEvents({sldiagram:this});return this._touchEvents};var TouchEvents=function(cfg){this.init(cfg)};TouchEvents.prototype={};TouchEvents.prototype.init=function(cfg){if(!cfg.sldiagram){throw new Error("Не задан обязательный параметр sldiagram")}else{this.sldiagram=cfg.sldiagram}this._state=this.stateConstants.UNDEFINED;this._touchState=this.stateConstants.UNDEFINED;return this};TouchEvents.prototype.getSLDiagram=function(){return this.sldiagram};TouchEvents.prototype.stateConstants={UNDEFINED:0,WAIT:1,CLICK:2,RIGHT_CLICK:3,MOVE:4,CANCEL:5,RESIZE:6,TOUCHSTART:7,TOUCHMOVE:8,TOUCHEND:9,TOUCHCANCEL:10};TouchEvents.prototype.stateToString=function(state){var stateName,stateNum;for(stateName in this.stateConstants){if(this.stateConstants.hasOwnProperty(stateName)){stateNum=this.stateConstants[stateName];if(stateNum===state){return stateName}}}return null};TouchEvents.prototype.initCanvasTouchEvents=function(){var sld=this.getSLDiagram();var canvas=sld.canvas;canvas.addEventListener("touchstart",this.onTouchstart.bind(this));canvas.addEventListener("touchstart",this.onDoubleTouchstart.bind(this));canvas.addEventListener("touchmove",this.onTouchmove.bind(this));canvas.addEventListener("touchmove",this.onDoubleTouchmove.bind(this));canvas.addEventListener("touchend",this.onTouchend.bind(this));canvas.addEventListener("touchcancel",this.onTouchcancel.bind(this))};TouchEvents.prototype.getMouseSimulator=function(){return this.getSLDiagram().getMouseSimulator()};TouchEvents.prototype.getCanvasPosition=function(){var rect=this.getSLDiagram().canvas.getBoundingClientRect();return{x:rect.left,y:rect.top}};TouchEvents.prototype.clientXYToScreenPos=function(pos){var canvasPos=this.getCanvasPosition();return{x:pos.clientX-canvasPos.x,y:pos.clientY-canvasPos.y}};TouchEvents.prototype.isFarOffset=function(){var startPos,currentPos,w,h,offset;if(!this._touchStartPos||!this._touchMovePos){return false}startPos=this._touchStartPos;currentPos=this._touchMovePos;w=currentPos.x-startPos.x;h=currentPos.y-startPos.y;offset=Math.sqrt(Math.pow(w,2)+Math.pow(h,2));return Boolean(offset>10)};TouchEvents.prototype.isLongTime=function(){var time=this.getInterval();return Boolean(time>1500)};TouchEvents.prototype.getInterval=function(){var now;if(!this._touchStartTimestamp){return -1}now=new Date();return now.getTime()-this._touchStartTimestamp.getTime()};TouchEvents.prototype.onTouchstart=function(e){if(e.touches.length!==1){return}this.clearTempProps();var sld=this.getSLDiagram(),mouseSimulator=sld.getMouseSimulator();this._state=this.stateConstants.WAIT;this._touchState=this.stateConstants.TOUCHSTART;this._touchStartPos=this.clientXYToScreenPos(e.touches[0]);this._touchMovePos=this.clientXYToScreenPos(e.touches[0]);this._touchStartTimestamp=new Date();e.preventDefault()};TouchEvents.prototype.onDoubleTouchstart=function(e){if(e.touches.length<2){return}this.clearTempProps();var sld=this.getSLDiagram();this._state=this.stateConstants.RESIZE;this._touchState=this.stateConstants.TOUCHSTART;this._touch1StartPos=this.clientXYToScreenPos(e.touches[0]);this._touch2StartPos=this.clientXYToScreenPos(e.touches[1]);this._touch1MovePos=this.clientXYToScreenPos(e.touches[0]);this._touch2MovePos=this.clientXYToScreenPos(e.touches[1]);this._touchStartPos=this.getCenterBetweenTwoPoints(this._touch1StartPos,this._touch2StartPos);this._touchMovePos={x:this._touchStartPos.x,y:this._touchStartPos.y};this._touchStartTimestamp=new Date();this._startDistance=this.getDistanceBetweenTwoPoints(this._touch1StartPos,this._touch2StartPos);this._moveDistance=this._startDistance;sld.getMouseSimulator().simulateMouseDown(this._touchStartPos);this._startSchemeScale=sld.getScale();e.preventDefault()};TouchEvents.prototype.onTouchmove=function(e){if(e.touches.length!==1){return}var screenpos=this.clientXYToScreenPos(e.touches[0]),S=this.stateConstants;this._touchState=S.TOUCHMOVE;if(!this._touchMovePos){this._touchMovePos={}}this._touchMovePos.x=screenpos.x;this._touchMovePos.y=screenpos.y;if(this.isFarOffset()){if(this._state===S.WAIT){this.getMouseSimulator().simulateMouseDown(this._touchStartPos)}this._state=S.MOVE;this.getMouseSimulator().simulateMouseMove(this._touchMovePos)}e.preventDefault()};TouchEvents.prototype.onDoubleTouchmove=function(e){if(e.touches.length<2){return}var p1=this.clientXYToScreenPos(e.touches[0]),p2=this.clientXYToScreenPos(e.touches[1]),c=this.getCenterBetweenTwoPoints(p1,p2),sld=this.getSLDiagram(),ratio,scale,stopPoint;this._touchState=this.stateConstants.TOUCHMOVE;sld.getMouseSimulator().simulateMouseMove(c);this._touch1MovePos.x=p1.x;this._touch1MovePos.y=p1.y;this._touch2MovePos.x=p2.x;this._touch2MovePos.y=p2.y;this._touchMovePos.x=c.x;this._touchMovePos.y=c.y;this._moveDistance=this.getDistanceBetweenTwoPoints(p1,p2);ratio=this._moveDistance/this._startDistance;if(ratio===1){return}scale=this._startSchemeScale*ratio;scale=SLDiagram.precisionNumber(scale,4);stopPoint=this.getStopPoint();this.setScale(stopPoint,scale);e.preventDefault()};TouchEvents.prototype.onTouchend=function(e){var C=this.stateConstants;this._touchState=C.TOUCHEND;if(this._touchMovePos){this.getMouseSimulator().simulateMouseUp(this._touchMovePos)}if(this._state===C.MOVE||this._state===C.RESIZE){this.getMouseSimulator().simulateMouseUp(this._touchMovePos)}else{if(this._state===C.WAIT){this.getMouseSimulator().simulateMouseDown(this._touchStartPos)}if(this.isFarOffset()){this._state=C.MOVE;this.getMouseSimulator().simulateMouseUp(this._touchMovePos)}else{if(this.isLongTime()){this._state=C.RIGHT_CLICK;this.getMouseSimulator().simulateMouseUp(this._touchStartPos)}else{this._state=C.CLICK;this.getMouseSimulator().simulateMouseUp(this._touchStartPos)}}}this.getSchemeUpdater()();this.execListeners();this.clearTempProps();e.preventDefault()};TouchEvents.prototype.onTouchcancel=function(e){this._state=this.stateConstants.CANCEL;this._touchState=this.stateConstants.TOUCHCANCEL;this.execListeners();this.clearTempProps();e.preventDefault()};TouchEvents.prototype.clearTempProps=function(){var i,prop;var props=["_touchMovePos","_touchStartPos","_touchStartTimestamp","_touch1StartPos","_touch2StartPos","_touch1MovePos","_touch2MovePos","_startDistance","_moveDistance"];for(i=0;i<props.length;i++){prop=props[i];if(this.hasOwnProperty(prop)){delete this[prop]}}};TouchEvents.prototype.addListener=function(fn,scope){if(!this.listeners){this.listeners=[]}if(typeof fn!=="function"){return false}if(typeof scope!=="object"||scope===null){return false}this.listeners.push({fn:fn,scope:scope});return true};TouchEvents.prototype.execListeners=function(){if(!this.listeners){return}var res={},i,listener;res.state=this._state;res.stateName=this.stateToString(res.state);res.startPos={x:this._touchStartPos.x,y:this._touchStartPos.y};if(this._state===this.stateConstants.MOVE){res.endPos={x:this._touchMovePos.x,y:this._touchMovePos.y}}for(i=0;i<this.listeners.length;i++){listener=this.listeners[i];listener.fn.call(listener.scope,res)}};TouchEvents.prototype.getCenterBetweenTwoTouches=function(touch1,touch2){return this.getCenterBetweenTwoPoints(this.clientXYToScreenPos(touch1),this.clientXYToScreenPos(touch2))};TouchEvents.prototype.getCenterBetweenTwoPoints=function(point1,point2){return{x:(point2.x-point1.x)/2+point1.x,y:(point2.y-point1.y)/2+point1.y}};TouchEvents.prototype.getDistanceBetweenTwoPoints=function(p1,p2){return Math.sqrt(Math.pow(p2.x-p1.x,2)+Math.pow(p2.y-p1.y,2))};TouchEvents.prototype.setScale=function(point,scale){var sld=this.getSLDiagram(),oldScale=sld.getScale(),newScale,oldRegion=sld.getVisibleRegion(),newRegion,res,oldSchemePoint=sld.screenToScheme(point.x,point.y),newSchemePoint;res=sld.setScale(scale);newScale=sld.getScale();newRegion=sld.getVisibleRegion();newSchemePoint=sld.screenToScheme(point.x,point.y);sld.setCurrentOffset(oldRegion.x+(oldSchemePoint.x-newSchemePoint.x),oldRegion.y+(oldSchemePoint.y-newSchemePoint.y));sld.render();return res};TouchEvents.prototype.getScaleSetter=function(){if(!this._scaleSetter){this._scaleSetter=SLDiagram.AsyncFunction.create(this.setScale,{timeout:250,scope:this})}return this._scaleSetter};TouchEvents.prototype.render=function(){var sld=this.getSLDiagram();sld.render({updateVisibleElements:true})};TouchEvents.prototype.getSchemeUpdater=function(){if(!this._schemeUpdater){this._schemeUpdater=SLDiagram.AsyncFunction.create(this.render,{timeout:100,scope:this})}return this._schemeUpdater};TouchEvents.prototype.screenToScheme=function(point){return this.getSLDiagram().screenToScheme(point.x,point.y)};TouchEvents.prototype.schemeToScreen=function(point){return this.getSLDiagram().schemeToScreen(point.x,point.y)};TouchEvents.prototype.getStopPoint=function(){var sld=this.getSLDiagram(),sp1=this.screenToScheme(this._touch1StartPos),sp2=this.screenToScheme(this._touch2StartPos),spt=null,mp1=this.screenToScheme(this._touch1MovePos),mp2=this.screenToScheme(this._touch2MovePos),mpt=null,d1=this.getDistanceBetweenTwoPoints(sp1,mp1),d2=this.getDistanceBetweenTwoPoints(sp2,mp2),dt=null,ratio,delta,stopPoint;if(d1!==0&&d2===0){spt=sp2;sp2=sp1;sp1=spt;spt=null;dt=d2;d2=d1;d1=d2;dt=null;mpt=mp2;mp2=mp1;mp1=mpt;mpt=null}else{if(d1===0&&d2===0){console.warn("Не должно быть такого!");stopPoint=this.getCenterBetweenTwoPoints(mp1,mp2);stopPoint.x=SLDiagram.precisionNumber(stopPoint.x,4);stopPoint.y=SLDiagram.precisionNumber(stopPoint.y,4);return this.schemeToScreen(stopPoint)}}ratio=d1/d2;delta={x:mp2.x-mp1.x,y:mp2.y-mp1.y};delta.x*=ratio/2;delta.y*=ratio/2;stopPoint={x:mp1.x+delta.x,y:mp1.y+delta.y};stopPoint.x=SLDiagram.precisionNumber(stopPoint.x,4);stopPoint.y=SLDiagram.precisionNumber(stopPoint.y,4);return this.schemeToScreen(stopPoint)};SLDiagram.TouchEvents=TouchEvents;return TouchEvents});define("core/TouchSimulator",["core/sldiagram"],function(SLDiagram){var TouchSimulator=function(cfg){this.init(cfg)};TouchSimulator.prototype={};TouchSimulator.prototype.init=function(cfg){if(!this.setSLDiagram(cfg.sldiagram)){throw new Error("Не указан обязательный параметр sldiagram")}return this};TouchSimulator.prototype.setSLDiagram=function(sld){if(sld){this.sldiagram=sld;return true}else{return false}};TouchSimulator.prototype.getSLDiagram=function(){return this.sldiagram};TouchSimulator.prototype.getCanvas=function(){return this.getSLDiagram().canvas};TouchSimulator.prototype._getCanvasXY=function(){var canvas=this.getCanvas();var rect=canvas.getBoundingClientRect();return{x:rect.left,y:rect.top}};TouchSimulator.prototype._pointToClientXY=function(point){var canvasPos=this._getCanvasXY();return{clientX:canvasPos.x+point.x,clientY:canvasPos.y+point.y}};TouchSimulator.prototype.simulateClick=function(point){var canvas=this.getCanvas();var touch=this._pointToClientXY(point);touch.identifier=0;touch.target=canvas;var touchStart=new Event("touchstart");touchStart.touches=[touch];var touchEnd=new Event("touchend");touchEnd.touches=[touch];canvas.dispatchEvent(touchStart);canvas.dispatchEvent(touchEnd)};TouchSimulator.prototype.simulateTouchMove=function(from,to){var canvas=this.getCanvas();var touchfrom=this._pointToClientXY(from);touchfrom.identifier=0;touchfrom.target=canvas;var touchto=this._pointToClientXY(to);touchto.identifier=0;touchto.target=canvas;var touchstart=new Event("touchstart");touchstart.touches=[touchfrom];var touchmove=new Event("touchmove");touchmove.touches=[touchto];var touchend=new Event("touchend");touchend.touches=[touchto];canvas.dispatchEvent(touchstart);canvas.dispatchEvent(touchmove);canvas.dispatchEvent(touchend)};TouchSimulator.prototype._getMoveTasks=function(from,to,iterations){var tasks=[],step={x:SLDiagram.precisionNumber((to.x-from.x)/iterations,4),y:SLDiagram.precisionNumber((to.y-from.y)/iterations,4)},point={x:from.x,y:from.y},i,task;for(i=0;i<iterations;i++){task={};task.from={x:point.x,y:point.y};if(i===iterations-1){task.to={x:to.x,y:to.y}}else{task.to={x:point.x+step.x,y:point.y+step.y}}tasks.push(task);point.x+=step.x;point.y+=step.y}return tasks};TouchSimulator.prototype.simulateTouchMoveSmooth=function(from,to,iterations,time,done){if(typeof iterations!=="number"||iterations<1){iterations=1}if(typeof time!=="number"||time<0){time=0}if(typeof done!=="function"){done=function(){}}var me=this,sld=this.getSLDiagram(),tasks=this._getMoveTasks(from,to,iterations),i,touchstartcfg,touchstart,touchmovecfg,touchmove,touchendcfg,touchend,canvas=this.getCanvas(),pause=time/iterations;touchstartcfg=this._pointToClientXY(from);touchstartcfg.identifier=0;touchstartcfg.target=canvas;touchstart=new Event("touchstart");touchstart.touches=[touchstartcfg];canvas.dispatchEvent(touchstart);i=-1;return SLDiagram.Async.whilst(function(){i++;return Boolean(i<tasks.length)},function(callback){var task=tasks[i];return setTimeout(function(){touchmovecfg=me._pointToClientXY(task.to);touchmovecfg.identifier=0;touchmovecfg.target=canvas;touchmove=new Event("touchmove");touchmove.touches=[touchmovecfg];canvas.dispatchEvent(touchmove);return callback()},pause)},function(err){if(err){console.error(err)}touchendcfg=me._pointToClientXY(to);touchendcfg.identifier=0;touchendcfg.target=canvas;touchend=new Event("touchend");touchend.touches=[touchendcfg];canvas.dispatchEvent(touchend);return done(err)})};TouchSimulator.prototype.simulateMultitouchMove=function(){};TouchSimulator.prototype._createTouches=function(points){var i,point,touch,touches=[],canvas=this.getCanvas();for(i=0;i<points.length;i++){point=points[i];touch=this._pointToClientXY(point);touch.identifier=i;touch.target=canvas;touches.push(touch)}return touches};TouchSimulator.prototype.simulateMultitouchMoveSmooth=function(touches,iterations,time,done){if(typeof iterations!=="number"||iterations<1){iterations=1}if(typeof time!=="number"||time<0){time=0}if(typeof done!=="function"){done=function(err){}}var me=this,canvas=this.getCanvas(),touch,touchesTasks=[],tasks,touchstart,startPoints,startTouches,touchmove,movePoints,moveTouches,touchend,endPoints,endTouches,i,pause=time/iterations;var createTouches=function(tasks){};for(i=0;i<touches.length;i++){touch=touches[i];touchesTasks.push(this._getMoveTasks(touch.from,touch.to,iterations))}tasks=SLDiagram.Underscore.zip.apply(SLDiagram.Underscore,touchesTasks);startPoints=SLDiagram.Underscore.pluck(tasks[0],"from");startTouches=this._createTouches(startPoints);touchstart=new Event("touchstart");touchstart.touches=startTouches;canvas.dispatchEvent(touchstart);i=-1;return SLDiagram.Async.whilst(function(){i++;return Boolean(i<tasks.length)},function(callback){return setTimeout(function(){var task=tasks[i];movePoints=SLDiagram.Underscore.pluck(tasks[i],"to");moveTouches=me._createTouches(movePoints);touchmove=new Event("touchmove");touchmove.touches=moveTouches;canvas.dispatchEvent(touchmove);return callback()},pause)},function(err){if(err){console.error(err)}endPoints=SLDiagram.Underscore.pluck(tasks[tasks.length-1],"to");endTouches=me._createTouches(endPoints);touchend=new Event("touchend");touchend.touches=endTouches;canvas.dispatchEvent(touchend);return done(err)})};SLDiagram.TouchSimulator=TouchSimulator;return TouchSimulator});define("core/DomEvents",["core/sldiagram"],function(SLDiagram){var DomEvents=function(){this.init.apply(this,arguments)};DomEvents.prototype={init:function(){return this},enable:function(){if(!this._events){this._events={keydown:this._onKeydown.bind(this),keyup:this._onKeyup.bind(this),mouseup:this._onMouseup.bind(this)};document.addEventListener("keydown",this._events.keydown);document.addEventListener("keyup",this._events.keyup);document.addEventListener("mouseup",this._events.mouseup);return true}else{return false}},disable:function(){if(this._events){document.removeEventListener("keydown",this._events.keydown);document.removeEventListener("keyup",this._events.keyup);document.removeEventListener("mouseup",this._events.mouseup);delete this._events;return true}else{return false}},getFocusedSldiagram:function(){if(this._focused){return this._focused}else{return null}},_onMouseup:function(e){if(e.target instanceof HTMLCanvasElement&&e.target.sldiagram){this._setFocusState(e.target.sldiagram)}else{if(this._focused){this._cancelFocusState()}}this.fire("mouseup",null)},_setFocusState:function(sld){var oldFocused=null;if(sld){if(this._focused){if(this._focused!==sld){oldFocused=this._focused;this._focused.setFocusState(false)}else{return false}}this.fire("beforechangefocus",{old:oldFocused,"new":sld});this._focused=sld;this._focused.setFocusState(true);this.fire("changefocus",{old:oldFocused,"new":this._focused});return true}else{return false}},_cancelFocusState:function(){var oldFocused=null;if(this._focused){oldFocused=this._focused;this._focused.setFocusState(false);delete this._focused;this.fire("changefocus",{old:oldFocused,"new":null});return true}else{return false}},_onKeydown:function(e){if(!this._focused){return}this._keydown=e;switch(this._keydown.keyCode){case 37:this._onLeftPress();break;case 38:this._onUpPress();break;case 39:this._onRightPress();break;case 40:this._onDownPress();break;default:}},_onKeyup:function(e){if(!this._focused||!this._keydown){return}switch(this._keydown.keyCode){case 46:this._onDeletePress();break;case 67:if(this._keydown.ctrlKey){this._onCtrlCPress()}break;case 86:if(this._keydown.ctrlKey){this._onCtrlVPress()}break;default:}delete this._keydown},_onLeftPress:function(){if(this.getFocusedSldiagram().getEditMode()){this.fire("left",null)}},_onRightPress:function(){if(this.getFocusedSldiagram().getEditMode()){this.fire("right",null)}},_onUpPress:function(){if(this.getFocusedSldiagram().getEditMode()){this.fire("up",null)}},_onDownPress:function(){if(this.getFocusedSldiagram().getEditMode()){this.fire("down",null)}},_onDeletePress:function(){this.fire("delete",null)},_onCtrlCPress:function(){this.fire("copy",null)},_onCtrlVPress:function(){var sld=this.getFocusedSldiagram();if(sld.getEditMode()){this.fire("paste",null)}},getEvents:function(){if(!this._eventManager){this._eventManager=new SLDiagram.Observable()}return this._eventManager},on:function(eventName,fn,scope,context){var events=this.getEvents();if(context){events.listen(eventName,fn,null,scope,context)}else{events.listen(eventName,fn,{anyContext:true},scope,null)}return true},fire:function(eventName,data){var events=this.getEvents();var sld=this.getFocusedSldiagram();events.fireEvent(eventName,data,sld);return true}};DomEvents.getInstance=function(){if(!DomEvents._instance){DomEvents._instance=new DomEvents()}return DomEvents._instance};SLDiagram.DomEvents=DomEvents;return DomEvents});define("core/Background",["core/sldiagram","core/Cursors"],function(SLDiagram,Cursors){var Background=function(){this.init.apply(this,arguments)};Background.prototype={};var p=Background.prototype;p.constants={DEPENDENCIES_NOT_EXISTS:"Не удалось обнаружить зависимости createjs.Shape и createjs.Container",SLDIAGRAM_OPT_EMPTY:"Не задан обязательный параметр sldiagram",ERROR_AT_MOUSE_EVENT:"Ошибка во время обработки события мышки на фоне схеме"};p.init=function(cfg){if(!createjs||!createjs.Shape||!createjs.Container){throw new Error(this.constants.DEPENDENCIES_NOT_EXISTS)}if(!cfg||!cfg.sldiagram){throw new Error(this.constants.SLDIAGRAM_OPT_EMPTY)}else{this.setSLDiagram(cfg.sldiagram)}this.gridLabels=[];return this};p.setSLDiagram=function(sld){if(sld){this.sldiagram=sld;return true}else{return false}};p.getSLDiagram=function(){if(this.sldiagram){return this.sldiagram}else{throw new Error(this.constants.SLDIAGRAM_OPT_EMPTY)}};p.getContainer=function(force){if(force&&this.container){this.deleteContainer()}if(!this.container){this.createContainer()}return this.container};p.createContainer=function(){this.container=new createjs.Container();this.container.addChildAt(this.getShape(),0);return this.container};p.deleteContainer=function(){if(this.container){this.deleteShape();this.clearGridLabels();delete this.container;return true}else{return false}};p.getShape=function(force){if(force&&this.shape){this.deleteShape()}if(!this.shape){this.createShape()}return this.shape};p.createShape=function(){var bgShape,bgColor,width,height,sld=this.getSLDiagram();this.shape=new createjs.Shape();bgColor=sld.getConfigProperty("scheme/backColor","#F8F8F8",false);width=sld.config.canvasSize.width;height=sld.config.canvasSize.height;this.shape.graphics.beginFill(bgColor).drawRect(0,0,width,height);var cursor=Cursors.get((sld.getEditMode())?"scheme_editmode":"scheme_viewmode");this.shape.cursor=cursor;this.shape.sldiagram=sld;this.setEventSubscriptions();this.drawGrid();if(this.container){this.container.addChildAt(this.shape,0)}return this.shape};p.deleteShape=function(){if(this.shape){this.cancelEventSubscriptions();this.container.removeChild(this.shape);delete this.shape;return true}else{return false}};p.drawGrid=function(){var sld=this.getSLDiagram(),gridStatus=sld.getGridStatus(),grid=sld.getGridSettings(),editMode=sld.getEditMode(),scale,canvasSize,currentOffset,lineColor,x,y,shape=this.shape;this.clearGridLabels();if(!gridStatus||!editMode){return false}if(grid===null){return false}if(shape.gridDrawing){return false}scale=sld.getScale();if((grid.step.x+grid.step.y)/2*scale<2){return false}canvasSize=sld.getConfigProperty("canvasSize",{width:600,height:400},false);currentOffset=sld.getConfigProperty("currentOffset",{x:0.5,y:0.5},false);lineColor=sld.getGridLineColor();(shape.graphics.setStrokeStyle(((grid.lineWidth)?grid.lineWidth:0.5)).beginStroke(lineColor));y=((Math.floor(currentOffset.y/grid.step.y))*grid.step.y+grid.offset.y-currentOffset.y);y=y*scale;for(;y<canvasSize.height;y=y+grid.step.y*scale){if(y>0){shape.graphics.moveTo(0,y).lineTo(canvasSize.width,y)}}x=((Math.floor(currentOffset.x/grid.step.x))*grid.step.x+grid.offset.x-currentOffset.x);x=x*scale;for(;x<canvasSize.width;x=x+grid.step.x*scale){if(x>0){shape.graphics.moveTo(x,0).lineTo(x,canvasSize.height)}}shape.gridDrawing=true;this.drawGridText();return true};p.drawGridText=function(){var c=this.container,sld=this.getSLDiagram(),gridStatus=sld.getGridStatus(),editMode=sld.getEditMode(),grid=sld.getGridSettings(),canvasSize,currentOffset,scale,lineColor,fontSize,font,x,y,i,schemePos,textY,textYScheme,textX,textXScheme;if(!gridStatus||!editMode||!grid||this.gridLabels.length>0){return false}canvasSize=sld.getConfigProperty("canvasSize",{width:600,height:400},false);currentOffset=sld.getConfigProperty("currentOffset",{x:0.5,y:0.5},false);scale=sld.getScale();lineColor=sld.getGridLineColor();fontSize=9;font=String(fontSize)+"px Arial";y=((Math.floor(currentOffset.y/grid.step.y))*grid.step.y+grid.offset.y-currentOffset.y);y=y*scale;for(i=0;y<canvasSize.height;y=y+grid.step.y*scale,i++){if(y>0&&(scale>=2||i%2===0)){textY=new createjs.Text(String(SLDiagram.precisionNumber(y,2)),font,lineColor);textY.x=2;textY.y=y+2;c.addChild(textY);this.gridLabels.push(textY);schemePos=sld.screenToScheme(0,y);textYScheme=new createjs.Text(String(SLDiagram.precisionNumber(schemePos.y,2)),font,lineColor);textYScheme.x=2;textYScheme.y=y+2+fontSize;c.addChild(textYScheme);this.gridLabels.push(textYScheme)}}x=((Math.floor(currentOffset.x/grid.step.x))*grid.step.x+grid.offset.x-currentOffset.x);x=x*scale;for(i=0;x<canvasSize.width;x=x+grid.step.x*scale,i++){if(x>0&&(scale>=2||i%2===0)){textX=new createjs.Text(String(SLDiagram.precisionNumber(x,2)),font,lineColor);textX.x=x+2;textX.y=2;c.addChild(textX);this.gridLabels.push(textX);schemePos=sld.screenToScheme(x,0);textXScheme=new createjs.Text(String(SLDiagram.precisionNumber(schemePos.x,2)),font,lineColor);textXScheme.x=x+2;textXScheme.y=2+fontSize;c.addChild(textXScheme);this.gridLabels.push(textXScheme)}}return true};p.clearGridLabels=function(){if(!this.gridLabels||this.gridLabels.length===0){return false}if(this.container){this.container.removeChild.apply(this.container,this.gridLabels)}this.gridLabels.length=0;return true};p.onMouseDown=function(e){var sld=this.getSLDiagram(),blockMode=sld.isDisabledEvents(),container=this.container;if(blockMode){return}var cursor=Cursors.get((sld.getEditMode())?"scheme_editmode_drag":"scheme_viewmode_drag");this.shape.cursor=cursor;sld.setCursorDirect(cursor);this.current={x:e.stageX,y:e.stageY};this.offset={x:container.x-e.stageX,y:container.y-e.stageY};sld.disableEvents()};p.onPressMove=function(e){if(!this.offset){return}var container=this.container,stage=this.getSLDiagram().stage;container.x=e.stageX+this.offset.x;container.y=e.stageY+this.offset.y;stage.update()};p.getElementUnderPoint=function(){var sld=this.getSLDiagram(),el;try{el=sld.getElementUnderPoint()}catch(ex){console.error("Ошибка во время поиска элемента под курсором:",ex);el=null}return el};p.onPressUp=function(e){var sld=this.getSLDiagram(),diff,editMode=sld.getEditMode(),disableEvent=!editMode,elementUnderPoint,disableClear=false;if(!this.current){sld.enableEvents();return}var cursor=Cursors.get((sld.getEditMode())?"scheme_editmode":"scheme_viewmode");this.shape.cursor=cursor;sld.setCursorDirect(cursor);diff={x:e.stageX-this.current.x,y:e.stageY-this.current.y};sld.config.currentOffset.x=sld.config.currentOffset.x-diff.x/sld.config.scale;sld.config.currentOffset.y=sld.config.currentOffset.y-diff.y/sld.config.scale;sld._offsetSnapToPixel();elementUnderPoint=this.getElementUnderPoint();if((!editMode&&!elementUnderPoint)||(editMode&&!elementUnderPoint&&diff.x===0&&diff.y===0)){if(!disableClear){sld.changeSelection({actions:[{action:"clear"}],disableEvent:disableEvent})}}this.container.x=0;this.container.y=0;if(diff.x!==0||diff.y!==0){sld.render({updateVisibleElements:true})}else{sld.stage.clear();sld.stage.update()}if(this.current){delete this.current}if(this.offset){delete this.offset}sld.enableEvents()};p.onClick=function(e){this.getSLDiagram().enableEvents()};p.onDomMouseUp=function(e){this.getSLDiagram().enableEvents()};p.setEventSubscriptions=function(){if(!this.shape||this.events){return false}var me=this;var createBindedMethod=SLDiagram.Utils.createBindedMethod;this.events={onMouseDown:createBindedMethod(this,"onMouseDown"),onPressMove:createBindedMethod(this,"onPressMove"),onPressUp:createBindedMethod(this,"onPressUp"),onClick:createBindedMethod(this,"onClick")};if(!this.domEvents){this.domEvents={onDomMouseUp:createBindedMethod(this,"onDomMouseUp")};SLDiagram.DomEvents.getInstance().on("mouseup",this.domEvents.onDomMouseUp,this)}this.shape.addEventListener("mousedown",this.events.onMouseDown);this.shape.addEventListener("pressmove",this.events.onPressMove);this.shape.addEventListener("pressup",this.events.onPressUp);this.shape.addEventListener("click",this.events.onClick);return true};p.cancelEventSubscriptions=function(){if(!this.events){return false}if(this.shape){this.shape.removeEventListener("mousedown",this.events.onMouseDown);this.shape.removeEventListener("pressmove",this.events.onPressMove);this.shape.removeEventListener("pressup",this.events.onPressUp);this.shape.removeEventListener("click",this.events.onClick)}delete this.events;return true};p.MESSAGE_NOT_COMPLETED_REQUIRED_PROPERTY="Не заполнено обязательное свойство";p.clear=function(){if(!this.container){console.error(this.MESSAGE_NOT_COMPLETED_REQUIRED_PROPERTY+" (container)");return false}this.container.removeAllChildren();if(this.shape){this.container.addChild(this.shape)}else{console.warn(this.MESSAGE_NOT_COMPLETED_REQUIRED_PROPERTY+" (shape)")}return true};SLDiagram.Background=Background;return Background});define("core/DisableChangeSelection",["core/sldiagram"],function(SLDiagram){var DisableChangeSelection={disableChangeSelection:function(){if(typeof this._disableChangeSelection!=="number"){this._disableChangeSelection=0}this._disableChangeSelection++;return true},enableChangeSelection:function(){if(typeof this._disableChangeSelection==="number"&&this._disableChangeSelection>0){this._disableChangeSelection--;if(this._disableChangeSelection===0){delete this._disableChangeSelection}return true}else{return false}},isDisabledChangeSelection:function(){return Boolean(this._disableChangeSelection)},disableClearSelection:function(){if(typeof this._disableClearSelection!=="number"){this._disableClearSelection=0}this._disableClearSelection++;return true},enableClearSelection:function(){if(typeof this._disableClearSelection==="number"&&this._disableClearSelection>0){this._disableClearSelection--;if(this._disableClearSelection===0){delete this._disableClearSelection}return true}else{return false}},isDisabledClearSelection:function(){return Boolean(this._disableClearSelection)}};SLDiagram.prototype.disableChangeSelection=DisableChangeSelection.disableChangeSelection;SLDiagram.prototype.enableChangeSelection=DisableChangeSelection.enableChangeSelection;SLDiagram.prototype.isDisabledChangeSelection=DisableChangeSelection.isDisabledChangeSelection;SLDiagram.prototype.disableClearSelection=DisableChangeSelection.disableClearSelection;SLDiagram.prototype.enableClearSelection=DisableChangeSelection.enableClearSelection;SLDiagram.prototype.isDisabledClearSelection=DisableChangeSelection.isDisabledClearSelection;return DisableChangeSelection});define("core/DisableEvents",["core/sldiagram"],function(SLDiagram){SLDiagram.prototype.getDisablerEvents=function(){if(!this._disablerEvents){this._disablerEvents=new SLDiagram.Utils.Disabler()}return this._disablerEvents};SLDiagram.prototype.disableEvents=function(){return this.getDisablerEvents().disable()};SLDiagram.prototype.enableEvents=function(){return this.getDisablerEvents().enable()};SLDiagram.prototype.isDisabledEvents=function(){return this.getDisablerEvents().isDisabled()};return SLDiagram});define("core/Handler",["core/sldiagram"],function(SLDiagram){var Handler=function(){this.init.apply(this,arguments)};Handler.prototype={init:function(cfg){var i;if(typeof cfg==="object"&&cfg!==null){for(i in cfg){if(cfg.hasOwnProperty(i)&&typeof this[i]==="undefined"){this[i]=cfg[i]}}}return this},SHOULD_DEFINED_A_METHOD:"Необходимо определить метод",draw:function(){throw new Error(this.SHOULD_DEFINED_A_METHOD+" draw")},getDisplayObject:function(force){if(force){this.cancelEventListeners();delete this.displayObject}if(!this.displayObject){this.displayObject=this.draw();this.setEventListeners()}return this.displayObject},onMousedown:function(){},onPressmove:function(){},onPressup:function(){},onClick:function(){},setEventListeners:function(){var d,e;if(!this.displayObject||this.events){return false}d=this.displayObject;e={mousedown:this.onMousedown.bind(this),pressmove:this.onPressmove.bind(this),pressup:this.onPressup.bind(this),click:this.onClick.bind(this)};this.events=e;d.addEventListener("mousedown",e.mousedown);d.addEventListener("pressmove",e.pressmove);d.addEventListener("pressup",e.pressup);d.addEventListener("click",e.click);return true},cancelEventListeners:function(){if(!this.events){return false}var d,e;e=this.events;if(this.displayObject){d=this.displayObject;d.removeEventListener("mousedown",e.mousedown);d.removeEventListener("pressmove",e.pressmove);d.removeEventListener("pressup",e.pressup);d.removeEventListener("click",e.click)}delete this.events;return true},getElement:function(){throw new Error(this.SHOULD_DEFINED_A_METHOD+" getElement")}};SLDiagram.Handler=Handler;return Handler});define("core/handlers/deps",["core/sldiagram","core/Handler"],function(SLDiagram){SLDiagram.handlers={};return SLDiagram});define("core/handlers/all",["core/handlers/deps"],function(SLDiagram){return SLDiagram.handlers});define("core/Type-value",["core/sldiagram","core/Type"],function(SLDiagram,Type){var proto=Type.prototype;proto.getRawValue=function(){return null};proto.setRawValue=function(value){return false};proto.getValue=function(){return null};proto.setValue=function(value){return this.setRawValue(value)};proto.getPullState=function(){return this.getRawPullState()};proto.setPullState=function(value){return this.setRawPullState(value)};proto.getRawPullState=function(){return false};proto.setRawPullState=function(value){return false};proto.getRenderedValue=function(){return this.getRawValue()};proto.getRenderedPullState=function(){return this.getRawPullState()};return Type});define("core/Type-invert",["core/sldiagram","core/Type"],function(SLDiagram,Type){var proto=Type.prototype;proto.getInvertState=function(){return false};proto.setInvertState=function(value){return false};proto.getInvertPullState=function(){return false};proto.setInvertPullState=function(value){return false};return SLDiagram.Type});define("core/IsNumber",[],function(){var types=["string","number"];return function(value){return Boolean(isFinite(value)&&types.indexOf(typeof value)>=0)}});define("core/SetData",["core/sldiagram","core/IsNumber"],function(SLDiagram,IsNumber){var SetData=function(){this.init.apply(this,arguments)};SetData.prototype={init:function(){this.dataForElements={};this.dataForDatasources={};return this},MESSAGE_UNDEFINED_SLD:"Незадан или некорректно задан аргумент sld",checkDatasourceItem:function(item){var res=Boolean(typeof item==="object"&&item!==null&&(IsNumber(item.GTYPE)||item.GTYPE===null)&&IsNumber(item.ID_SCHEME)&&IsNumber(item.ID_DATABASE)&&IsNumber(item.ID_TABLE)&&IsNumber(item.regim)&&(typeof item.da_sys_gtopt_define_alias==="string"||item.da_sys_gtopt_define_alias===null)&&(typeof item.meas_val_id_param==="number"||item.meas_val_id_param===null)&&(typeof item.source_id==="number"||item.source_id===null));if(res&&typeof item.scale!=="number"){console.warn("Запись без свойства scale:",item)}return res},datasourceProperties:["GTYPE","ID_SCHEME","ID_DATABASE","ID_TABLE","regim","da_sys_gtopt_define_alias","meas_val_id_param","scale"],isEqualDatasourceItems:function(item1,item2){var i,property;for(i=0;i<this.datasourceProperties.length;i++){property=this.datasourceProperties[i];if(item1[property]!==item2[property]){return false}}return true},getDatasourceItemKey:function(item){return String(item.ID_SCHEME)+":"+String(item.regim)},checkElementItem:function(item){return Boolean(typeof item==="object"&&item!==null&&IsNumber(item.ID_SCHEME))},elementProperties:["ID_SCHEME"],isEqualElementItems:function(item1,item2){var i,property,v1,v2;for(i=0;i<this.elementProperties.length;i++){property=this.elementProperties[i];v1=SLDiagram.getProperty(item1,property);v2=SLDiagram.getProperty(item2,property);if(v1!==v2){return false}}return true},getElementItemKey:function(item){return String(item.ID_SCHEME)},MESSAGE_SEVERAL_RECORDS_DATASOURCES:"Обнаружено несколько различных записей источников данных",MESSAGE_SEVERAL_RECORDS_ELEMENTS:"Обнаружено несколько различных записей параметров элементов",setData:function(data){var i,item,dsKey,key,errorInfo;for(i=0;i<data.length;i++){item=data[i];if(this.checkDatasourceItem(item)){key=this.getDatasourceItemKey(item);if(this.dataForDatasources.hasOwnProperty(key)){if(!this.isEqualDatasourceItems(item,this.dataForDatasources[key])){errorInfo=JSON.stringify({appendedItem:item,existsItem:this.dataForDatasources[key],key:key});errorInfo=this.MESSAGE_SEVERAL_RECORDS_DATASOURCES+": "+errorInfo;console.warn(errorInfo)}}else{this.dataForDatasources[key]=item}}if(this.checkElementItem(item)){key=this.getElementItemKey(item);if(this.dataForElements.hasOwnProperty(key)){if(!this.isEqualElementItems(item,this.dataForElements[key])){errorInfo=JSON.stringify({appendedItem:item,existsItem:this.dataForElements[key],key:key});errorInfo=this.MESSAGE_SEVERAL_RECORDS_ELEMENTS+": "+errorInfo;console.warn(errorInfo)}}else{this.dataForElements[key]=item}}}},MESSAGE_UNKNOWN_DATASOURCE_TYPE:"Неизвестный тип источника данных",datasources:{MAIN:2,PULLSTATE:3,TELECONTROL:5},applyData:function(sld){if(!sld){throw new Error(this.MESSAGE_UNDEFINED_SLD)}var store=sld.getSchemeAndDatabaseIds();var i,item;var elementId;var elements;var j,element;store.clearData();for(i in this.dataForDatasources){if(this.dataForDatasources.hasOwnProperty(i)){item=this.dataForDatasources[i];elementId=Number(item.ID_SCHEME);elements=sld.searchActiveElementsById(elementId);store.setData([item],false);for(j=0;j<elements.length;j++){element=elements[j];if(item.regim===this.datasources.MAIN){element.setMainDatasourceScale(item.scale)}else{if(item.regim===this.datasources.PULLSTATE){element.setPullstateDatasourceScale(item.scale)}else{if(item.regim===this.datasources.TELECONTROL){element.setTelecontrolDatasourceScale(item.scale)}else{console.warn(this.MESSAGE_UNKNOWN_DATASOURCE_TYPE)}}}}}}},clearData:function(){this.dataForDatasources={};this.dataForElements={}}};SLDiagram.SetData=SetData;return SetData});define("core/Type-direction",["core/Type"],function(Type){Type.prototype.getDirection=function(){return null};return Type});define("core/Type-scale",["core/sldiagram","core/Type"],function(SLDiagram,Type){var proto=Type.prototype;proto.getMainDatasourceScale=function(){return 1};proto.setMainDatasourceScale=function(value){return false};proto.getPullstateDatasourceScale=function(){return 1};proto.setPullstateDatasourceScale=function(value){return false};proto.getTelecontrolDatasourceScale=function(){return 1};proto.setTelecontrolDatasourceScale=function(value){return false};return Type});define("core/sldiagram-voltage",["core/sldiagram"],function(SLDiagram){var proto=SLDiagram.prototype;proto.getVoltageColor=function(voltageClass){if(!SLDiagram.isNumber(voltageClass)){return null}voltageClass=String(voltageClass);var color=this.getConfigProperty("voltageColors/"+voltageClass,null);if(color===null){return null}return SLDiagram.toColor(color)};proto.getEmptyVoltageColor=function(){var color=this.getForegroundColor();color=SLDiagram.toColor(color);return color};return SLDiagram});(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else{if(typeof define==="function"&&define.amd){define("color",[],f)}else{var g;if(typeof window!=="undefined"){g=window}else{if(typeof global!=="undefined"){g=global}else{if(typeof self!=="undefined"){g=self}else{g=this}}}g.color=f()}}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a){return a(o,!0)}if(i){return i(o,!0)}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){module.exports={rgb2hsl:rgb2hsl,rgb2hsv:rgb2hsv,rgb2hwb:rgb2hwb,rgb2cmyk:rgb2cmyk,rgb2keyword:rgb2keyword,rgb2xyz:rgb2xyz,rgb2lab:rgb2lab,rgb2lch:rgb2lch,hsl2rgb:hsl2rgb,hsl2hsv:hsl2hsv,hsl2hwb:hsl2hwb,hsl2cmyk:hsl2cmyk,hsl2keyword:hsl2keyword,hsv2rgb:hsv2rgb,hsv2hsl:hsv2hsl,hsv2hwb:hsv2hwb,hsv2cmyk:hsv2cmyk,hsv2keyword:hsv2keyword,hwb2rgb:hwb2rgb,hwb2hsl:hwb2hsl,hwb2hsv:hwb2hsv,hwb2cmyk:hwb2cmyk,hwb2keyword:hwb2keyword,cmyk2rgb:cmyk2rgb,cmyk2hsl:cmyk2hsl,cmyk2hsv:cmyk2hsv,cmyk2hwb:cmyk2hwb,cmyk2keyword:cmyk2keyword,keyword2rgb:keyword2rgb,keyword2hsl:keyword2hsl,keyword2hsv:keyword2hsv,keyword2hwb:keyword2hwb,keyword2cmyk:keyword2cmyk,keyword2lab:keyword2lab,keyword2xyz:keyword2xyz,xyz2rgb:xyz2rgb,xyz2lab:xyz2lab,xyz2lch:xyz2lch,lab2xyz:lab2xyz,lab2rgb:lab2rgb,lab2lch:lab2lch,lch2lab:lch2lab,lch2xyz:lch2xyz,lch2rgb:lch2rgb};function rgb2hsl(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min,h,s,l;if(max==min){h=0}else{if(r==max){h=(g-b)/delta}else{if(g==max){h=2+(b-r)/delta}else{if(b==max){h=4+(r-g)/delta}}}}h=Math.min(h*60,360);if(h<0){h+=360}l=(min+max)/2;if(max==min){s=0}else{if(l<=0.5){s=delta/(max+min)}else{s=delta/(2-max-min)}}return[h,s*100,l*100]}function rgb2hsv(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min,h,s,v;if(max==0){s=0}else{s=(delta/max*1000)/10}if(max==min){h=0}else{if(r==max){h=(g-b)/delta}else{if(g==max){h=2+(b-r)/delta}else{if(b==max){h=4+(r-g)/delta}}}}h=Math.min(h*60,360);if(h<0){h+=360}v=((max/255)*1000)/10;return[h,s,v]}function rgb2hwb(rgb){var r=rgb[0],g=rgb[1],b=rgb[2],h=rgb2hsl(rgb)[0],w=1/255*Math.min(r,Math.min(g,b)),b=1-1/255*Math.max(r,Math.max(g,b));return[h,w*100,b*100]}function rgb2cmyk(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,c,m,y,k;k=Math.min(1-r,1-g,1-b);c=(1-r-k)/(1-k)||0;m=(1-g-k)/(1-k)||0;y=(1-b-k)/(1-k)||0;return[c*100,m*100,y*100,k*100]}function rgb2keyword(rgb){return reverseKeywords[JSON.stringify(rgb)]}function rgb2xyz(rgb){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;r=r>0.04045?Math.pow(((r+0.055)/1.055),2.4):(r/12.92);g=g>0.04045?Math.pow(((g+0.055)/1.055),2.4):(g/12.92);b=b>0.04045?Math.pow(((b+0.055)/1.055),2.4):(b/12.92);var x=(r*0.4124)+(g*0.3576)+(b*0.1805);var y=(r*0.2126)+(g*0.7152)+(b*0.0722);var z=(r*0.0193)+(g*0.1192)+(b*0.9505);return[x*100,y*100,z*100]}function rgb2lab(rgb){var xyz=rgb2xyz(rgb),x=xyz[0],y=xyz[1],z=xyz[2],l,a,b;x/=95.047;y/=100;z/=108.883;x=x>0.008856?Math.pow(x,1/3):(7.787*x)+(16/116);y=y>0.008856?Math.pow(y,1/3):(7.787*y)+(16/116);z=z>0.008856?Math.pow(z,1/3):(7.787*z)+(16/116);l=(116*y)-16;a=500*(x-y);b=200*(y-z);return[l,a,b]}function rgb2lch(args){return lab2lch(rgb2lab(args))}function hsl2rgb(hsl){var h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100,t1,t2,t3,rgb,val;if(s==0){val=l*255;return[val,val,val]}if(l<0.5){t2=l*(1+s)}else{t2=l+s-l*s}t1=2*l-t2;rgb=[0,0,0];for(var i=0;i<3;i++){t3=h+1/3*-(i-1);t3<0&&t3++;t3>1&&t3--;if(6*t3<1){val=t1+(t2-t1)*6*t3}else{if(2*t3<1){val=t2}else{if(3*t3<2){val=t1+(t2-t1)*(2/3-t3)*6}else{val=t1}}}rgb[i]=val*255}return rgb}function hsl2hsv(hsl){var h=hsl[0],s=hsl[1]/100,l=hsl[2]/100,sv,v;if(l===0){return[0,0,0]}l*=2;s*=(l<=1)?l:2-l;v=(l+s)/2;sv=(2*s)/(l+s);return[h,sv*100,v*100]}function hsl2hwb(args){return rgb2hwb(hsl2rgb(args))}function hsl2cmyk(args){return rgb2cmyk(hsl2rgb(args))}function hsl2keyword(args){return rgb2keyword(hsl2rgb(args))}function hsv2rgb(hsv){var h=hsv[0]/60,s=hsv[1]/100,v=hsv[2]/100,hi=Math.floor(h)%6;var f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-(s*f)),t=255*v*(1-(s*(1-f))),v=255*v;switch(hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q]}}function hsv2hsl(hsv){var h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,sl,l;l=(2-s)*v;sl=s*v;sl/=(l<=1)?l:2-l;sl=sl||0;l/=2;return[h,sl*100,l*100]}function hsv2hwb(args){return rgb2hwb(hsv2rgb(args))}function hsv2cmyk(args){return rgb2cmyk(hsv2rgb(args))}function hsv2keyword(args){return rgb2keyword(hsv2rgb(args))}function hwb2rgb(hwb){var h=hwb[0]/360,wh=hwb[1]/100,bl=hwb[2]/100,ratio=wh+bl,i,v,f,n;if(ratio>1){wh/=ratio;bl/=ratio}i=Math.floor(6*h);v=1-bl;f=6*h-i;if((i&1)!=0){f=1-f}n=wh+f*(v-wh);switch(i){default:case 6:case 0:r=v;g=n;b=wh;break;case 1:r=n;g=v;b=wh;break;case 2:r=wh;g=v;b=n;break;case 3:r=wh;g=n;b=v;break;case 4:r=n;g=wh;b=v;break;case 5:r=v;g=wh;b=n;break}return[r*255,g*255,b*255]}function hwb2hsl(args){return rgb2hsl(hwb2rgb(args))}function hwb2hsv(args){return rgb2hsv(hwb2rgb(args))}function hwb2cmyk(args){return rgb2cmyk(hwb2rgb(args))}function hwb2keyword(args){return rgb2keyword(hwb2rgb(args))}function cmyk2rgb(cmyk){var c=cmyk[0]/100,m=cmyk[1]/100,y=cmyk[2]/100,k=cmyk[3]/100,r,g,b;r=1-Math.min(1,c*(1-k)+k);g=1-Math.min(1,m*(1-k)+k);b=1-Math.min(1,y*(1-k)+k);return[r*255,g*255,b*255]}function cmyk2hsl(args){return rgb2hsl(cmyk2rgb(args))}function cmyk2hsv(args){return rgb2hsv(cmyk2rgb(args))}function cmyk2hwb(args){return rgb2hwb(cmyk2rgb(args))}function cmyk2keyword(args){return rgb2keyword(cmyk2rgb(args))}function xyz2rgb(xyz){var x=xyz[0]/100,y=xyz[1]/100,z=xyz[2]/100,r,g,b;r=(x*3.2406)+(y*-1.5372)+(z*-0.4986);g=(x*-0.9689)+(y*1.8758)+(z*0.0415);b=(x*0.0557)+(y*-0.204)+(z*1.057);r=r>0.0031308?((1.055*Math.pow(r,1/2.4))-0.055):r=(r*12.92);g=g>0.0031308?((1.055*Math.pow(g,1/2.4))-0.055):g=(g*12.92);b=b>0.0031308?((1.055*Math.pow(b,1/2.4))-0.055):b=(b*12.92);r=Math.min(Math.max(0,r),1);g=Math.min(Math.max(0,g),1);b=Math.min(Math.max(0,b),1);return[r*255,g*255,b*255]}function xyz2lab(xyz){var x=xyz[0],y=xyz[1],z=xyz[2],l,a,b;x/=95.047;y/=100;z/=108.883;x=x>0.008856?Math.pow(x,1/3):(7.787*x)+(16/116);y=y>0.008856?Math.pow(y,1/3):(7.787*y)+(16/116);z=z>0.008856?Math.pow(z,1/3):(7.787*z)+(16/116);l=(116*y)-16;a=500*(x-y);b=200*(y-z);return[l,a,b]}function xyz2lch(args){return lab2lch(xyz2lab(args))}function lab2xyz(lab){var l=lab[0],a=lab[1],b=lab[2],x,y,z,y2;if(l<=8){y=(l*100)/903.3;y2=(7.787*(y/100))+(16/116)}else{y=100*Math.pow((l+16)/116,3);y2=Math.pow(y/100,1/3)}x=x/95.047<=0.008856?x=(95.047*((a/500)+y2-(16/116)))/7.787:95.047*Math.pow((a/500)+y2,3);z=z/108.883<=0.008859?z=(108.883*(y2-(b/200)-(16/116)))/7.787:108.883*Math.pow(y2-(b/200),3);return[x,y,z]}function lab2lch(lab){var l=lab[0],a=lab[1],b=lab[2],hr,h,c;hr=Math.atan2(b,a);h=hr*360/2/Math.PI;if(h<0){h+=360}c=Math.sqrt(a*a+b*b);return[l,c,h]}function lab2rgb(args){return xyz2rgb(lab2xyz(args))}function lch2lab(lch){var l=lch[0],c=lch[1],h=lch[2],a,b,hr;hr=h/360*2*Math.PI;a=c*Math.cos(hr);b=c*Math.sin(hr);return[l,a,b]}function lch2xyz(args){return lab2xyz(lch2lab(args))}function lch2rgb(args){return lab2rgb(lch2lab(args))}function keyword2rgb(keyword){return cssKeywords[keyword]}function keyword2hsl(args){return rgb2hsl(keyword2rgb(args))}function keyword2hsv(args){return rgb2hsv(keyword2rgb(args))}function keyword2hwb(args){return rgb2hwb(keyword2rgb(args))}function keyword2cmyk(args){return rgb2cmyk(keyword2rgb(args))}function keyword2lab(args){return rgb2lab(keyword2rgb(args))}function keyword2xyz(args){return rgb2xyz(keyword2rgb(args))}var cssKeywords={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var reverseKeywords={};for(var key in cssKeywords){reverseKeywords[JSON.stringify(cssKeywords[key])]=key}},{}],2:[function(require,module,exports){var conversions=require("./conversions");var convert=function(){return new Converter()};for(var func in conversions){convert[func+"Raw"]=(function(func){return function(arg){if(typeof arg=="number"){arg=Array.prototype.slice.call(arguments)}return conversions[func](arg)}})(func);var pair=/(\w+)2(\w+)/.exec(func),from=pair[1],to=pair[2];convert[from]=convert[from]||{};convert[from][to]=convert[func]=(function(func){return function(arg){if(typeof arg=="number"){arg=Array.prototype.slice.call(arguments)}var val=conversions[func](arg);if(typeof val=="string"||val===undefined){return val}for(var i=0;i<val.length;i++){val[i]=Math.round(val[i])}return val}})(func)}var Converter=function(){this.convs={}};Converter.prototype.routeSpace=function(space,args){var values=args[0];if(values===undefined){return this.getValues(space)}if(typeof values=="number"){values=Array.prototype.slice.call(args)}return this.setValues(space,values)};Converter.prototype.setValues=function(space,values){this.space=space;this.convs={};this.convs[space]=values;return this};Converter.prototype.getValues=function(space){var vals=this.convs[space];if(!vals){var fspace=this.space,from=this.convs[fspace];vals=convert[fspace][space](from);this.convs[space]=vals}return vals};["rgb","hsl","hsv","cmyk","keyword"].forEach(function(space){Converter.prototype[space]=function(vals){return this.routeSpace(space,arguments)}});module.exports=convert},{"./conversions":1}],3:[function(require,module,exports){module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],4:[function(require,module,exports){var colorNames=require("color-name");module.exports={getRgba:getRgba,getHsla:getHsla,getRgb:getRgb,getHsl:getHsl,getHwb:getHwb,getAlpha:getAlpha,hexString:hexString,rgbString:rgbString,rgbaString:rgbaString,percentString:percentString,percentaString:percentaString,hslString:hslString,hslaString:hslaString,hwbString:hwbString,keyword:keyword};function getRgba(string){if(!string){return}var abbr=/^#([a-fA-F0-9]{3})$/,hex=/^#([a-fA-F0-9]{6})$/,rgba=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,per=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,keyword=/(\D+)/;var rgb=[0,0,0],a=1,match=string.match(abbr);if(match){match=match[1];for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match[i]+match[i],16)}}else{if(match=string.match(hex)){match=match[1];for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match.slice(i*2,i*2+2),16)}}else{if(match=string.match(rgba)){for(var i=0;i<rgb.length;i++){rgb[i]=parseInt(match[i+1])}a=parseFloat(match[4])}else{if(match=string.match(per)){for(var i=0;i<rgb.length;i++){rgb[i]=Math.round(parseFloat(match[i+1])*2.55)}a=parseFloat(match[4])}else{if(match=string.match(keyword)){if(match[1]=="transparent"){return[0,0,0,0]}rgb=colorNames[match[1]];if(!rgb){return}}}}}}for(var i=0;i<rgb.length;i++){rgb[i]=scale(rgb[i],0,255)}if(!a&&a!=0){a=1}else{a=scale(a,0,1)}rgb[3]=a;return rgb}function getHsla(string){if(!string){return}var hsl=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var match=string.match(hsl);if(match){var alpha=parseFloat(match[4]);var h=scale(parseInt(match[1]),0,360),s=scale(parseFloat(match[2]),0,100),l=scale(parseFloat(match[3]),0,100),a=scale(isNaN(alpha)?1:alpha,0,1);return[h,s,l,a]}}function getHwb(string){if(!string){return}var hwb=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/;var match=string.match(hwb);if(match){var alpha=parseFloat(match[4]);var h=scale(parseInt(match[1]),0,360),w=scale(parseFloat(match[2]),0,100),b=scale(parseFloat(match[3]),0,100),a=scale(isNaN(alpha)?1:alpha,0,1);return[h,w,b,a]}}function getRgb(string){var rgba=getRgba(string);return rgba&&rgba.slice(0,3)}function getHsl(string){var hsla=getHsla(string);return hsla&&hsla.slice(0,3)}function getAlpha(string){var vals=getRgba(string);if(vals){return vals[3]}else{if(vals=getHsla(string)){return vals[3]}else{if(vals=getHwb(string)){return vals[3]}}}}function hexString(rgb){return"#"+hexDouble(rgb[0])+hexDouble(rgb[1])+hexDouble(rgb[2])}function rgbString(rgba,alpha){if(alpha<1||(rgba[3]&&rgba[3]<1)){return rgbaString(rgba,alpha)}return"rgb("+rgba[0]+", "+rgba[1]+", "+rgba[2]+")"}function rgbaString(rgba,alpha){if(alpha===undefined){alpha=(rgba[3]!==undefined?rgba[3]:1)}return"rgba("+rgba[0]+", "+rgba[1]+", "+rgba[2]+", "+alpha+")"}function percentString(rgba,alpha){if(alpha<1||(rgba[3]&&rgba[3]<1)){return percentaString(rgba,alpha)}var r=Math.round(rgba[0]/255*100),g=Math.round(rgba[1]/255*100),b=Math.round(rgba[2]/255*100);return"rgb("+r+"%, "+g+"%, "+b+"%)"}function percentaString(rgba,alpha){var r=Math.round(rgba[0]/255*100),g=Math.round(rgba[1]/255*100),b=Math.round(rgba[2]/255*100);return"rgba("+r+"%, "+g+"%, "+b+"%, "+(alpha||rgba[3]||1)+")"}function hslString(hsla,alpha){if(alpha<1||(hsla[3]&&hsla[3]<1)){return hslaString(hsla,alpha)}return"hsl("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%)"}function hslaString(hsla,alpha){if(alpha===undefined){alpha=(hsla[3]!==undefined?hsla[3]:1)}return"hsla("+hsla[0]+", "+hsla[1]+"%, "+hsla[2]+"%, "+alpha+")"}function hwbString(hwb,alpha){if(alpha===undefined){alpha=(hwb[3]!==undefined?hwb[3]:1)}return"hwb("+hwb[0]+", "+hwb[1]+"%, "+hwb[2]+"%"+(alpha!==undefined&&alpha!==1?", "+alpha:"")+")"}function keyword(rgb){return reverseNames[rgb.slice(0,3)]}function scale(num,min,max){return Math.min(Math.max(min,num),max)}function hexDouble(num){var str=num.toString(16).toUpperCase();return(str.length<2)?"0"+str:str}var reverseNames={};for(var name in colorNames){reverseNames[colorNames[name]]=name}},{"color-name":3}],5:[function(require,module,exports){var convert=require("color-convert");var string=require("color-string");var Color=function(obj){if(obj instanceof Color){return obj}if(!(this instanceof Color)){return new Color(obj)}this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var vals;if(typeof obj==="string"){vals=string.getRgba(obj);if(vals){this.setValues("rgb",vals)}else{if(vals=string.getHsla(obj)){this.setValues("hsl",vals)}else{if(vals=string.getHwb(obj)){this.setValues("hwb",vals)}else{throw new Error('Unable to parse color from string "'+obj+'"')}}}}else{if(typeof obj==="object"){vals=obj;if(vals.r!==undefined||vals.red!==undefined){this.setValues("rgb",vals)}else{if(vals.l!==undefined||vals.lightness!==undefined){this.setValues("hsl",vals)}else{if(vals.v!==undefined||vals.value!==undefined){this.setValues("hsv",vals)}else{if(vals.w!==undefined||vals.whiteness!==undefined){this.setValues("hwb",vals)}else{if(vals.c!==undefined||vals.cyan!==undefined){this.setValues("cmyk",vals)}else{throw new Error("Unable to parse color from object "+JSON.stringify(obj))}}}}}}}};Color.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){if(this.values.alpha!==1){return this.values.hwb.concat([this.values.alpha])}return this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var rgb=this.values.rgb;return rgb.concat([this.values.alpha])},hslaArray:function(){var hsl=this.values.hsl;return hsl.concat([this.values.alpha])},alpha:function(val){if(val===undefined){return this.values.alpha}this.setValues("alpha",val);return this},red:function(val){return this.setChannel("rgb",0,val)},green:function(val){return this.setChannel("rgb",1,val)},blue:function(val){return this.setChannel("rgb",2,val)},hue:function(val){if(val){val%=360;val=val<0?360+val:val}return this.setChannel("hsl",0,val)},saturation:function(val){return this.setChannel("hsl",1,val)},lightness:function(val){return this.setChannel("hsl",2,val)},saturationv:function(val){return this.setChannel("hsv",1,val)},whiteness:function(val){return this.setChannel("hwb",1,val)},blackness:function(val){return this.setChannel("hwb",2,val)},value:function(val){return this.setChannel("hsv",2,val)},cyan:function(val){return this.setChannel("cmyk",0,val)},magenta:function(val){return this.setChannel("cmyk",1,val)},yellow:function(val){return this.setChannel("cmyk",2,val)},black:function(val){return this.setChannel("cmyk",3,val)},hexString:function(){return string.hexString(this.values.rgb)},rgbString:function(){return string.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return string.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return string.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return string.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return string.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return string.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return string.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return(this.values.rgb[0]<<16)|(this.values.rgb[1]<<8)|this.values.rgb[2]},luminosity:function(){var rgb=this.values.rgb;var lum=[];for(var i=0;i<rgb.length;i++){var chan=rgb[i]/255;lum[i]=(chan<=0.03928)?chan/12.92:Math.pow(((chan+0.055)/1.055),2.4)}return 0.2126*lum[0]+0.7152*lum[1]+0.0722*lum[2]},contrast:function(color2){var lum1=this.luminosity();var lum2=color2.luminosity();if(lum1>lum2){return(lum1+0.05)/(lum2+0.05)}return(lum2+0.05)/(lum1+0.05)},level:function(color2){var contrastRatio=this.contrast(color2);if(contrastRatio>=7.1){return"AAA"}return(contrastRatio>=4.5)?"AA":""},dark:function(){var rgb=this.values.rgb;var yiq=(rgb[0]*299+rgb[1]*587+rgb[2]*114)/1000;return yiq<128},light:function(){return !this.dark()},negate:function(){var rgb=[];for(var i=0;i<3;i++){rgb[i]=255-this.values.rgb[i]}this.setValues("rgb",rgb);return this},lighten:function(ratio){this.values.hsl[2]+=this.values.hsl[2]*ratio;this.setValues("hsl",this.values.hsl);return this},darken:function(ratio){this.values.hsl[2]-=this.values.hsl[2]*ratio;this.setValues("hsl",this.values.hsl);return this},saturate:function(ratio){this.values.hsl[1]+=this.values.hsl[1]*ratio;this.setValues("hsl",this.values.hsl);return this},desaturate:function(ratio){this.values.hsl[1]-=this.values.hsl[1]*ratio;this.setValues("hsl",this.values.hsl);return this},whiten:function(ratio){this.values.hwb[1]+=this.values.hwb[1]*ratio;this.setValues("hwb",this.values.hwb);return this},blacken:function(ratio){this.values.hwb[2]+=this.values.hwb[2]*ratio;this.setValues("hwb",this.values.hwb);return this},greyscale:function(){var rgb=this.values.rgb;var val=rgb[0]*0.3+rgb[1]*0.59+rgb[2]*0.11;this.setValues("rgb",[val,val,val]);return this},clearer:function(ratio){this.setValues("alpha",this.values.alpha-(this.values.alpha*ratio));return this},opaquer:function(ratio){this.setValues("alpha",this.values.alpha+(this.values.alpha*ratio));return this},rotate:function(degrees){var hue=this.values.hsl[0];hue=(hue+degrees)%360;hue=hue<0?360+hue:hue;this.values.hsl[0]=hue;this.setValues("hsl",this.values.hsl);return this},mix:function(mixinColor,weight){var color1=this;var color2=mixinColor;var p=weight===undefined?0.5:weight;var w=2*p-1;var a=color1.alpha()-color2.alpha();var w1=(((w*a===-1)?w:(w+a)/(1+w*a))+1)/2;var w2=1-w1;return this.rgb(w1*color1.red()+w2*color2.red(),w1*color1.green()+w2*color2.green(),w1*color1.blue()+w2*color2.blue()).alpha(color1.alpha()*p+color2.alpha()*(1-p))},toJSON:function(){return this.rgb()},clone:function(){return new Color(this.rgb())}};Color.prototype.getValues=function(space){var vals={};for(var i=0;i<space.length;i++){vals[space.charAt(i)]=this.values[space][i]}if(this.values.alpha!==1){vals.a=this.values.alpha}return vals};Color.prototype.setValues=function(space,vals){var spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]};var maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]};var i;var alpha=1;if(space==="alpha"){alpha=vals}else{if(vals.length){this.values[space]=vals.slice(0,space.length);alpha=vals[space.length]}else{if(vals[space.charAt(0)]!==undefined){for(i=0;i<space.length;i++){this.values[space][i]=vals[space.charAt(i)]}alpha=vals.a}else{if(vals[spaces[space][0]]!==undefined){var chans=spaces[space];for(i=0;i<space.length;i++){this.values[space][i]=vals[chans[i]]}alpha=vals.alpha}}}}this.values.alpha=Math.max(0,Math.min(1,(alpha===undefined?this.values.alpha:alpha)));if(space==="alpha"){return false}var capped;for(i=0;i<space.length;i++){capped=Math.max(0,Math.min(maxes[space][i],this.values[space][i]));this.values[space][i]=Math.round(capped)}for(var sname in spaces){if(sname!==space){this.values[sname]=convert[space][sname](this.values[space])}for(i=0;i<sname.length;i++){capped=Math.max(0,Math.min(maxes[sname][i],this.values[sname][i]));this.values[sname][i]=Math.round(capped)}}return true};Color.prototype.setSpace=function(space,args){var vals=args[0];if(vals===undefined){return this.getValues(space)}if(typeof vals==="number"){vals=Array.prototype.slice.call(args)}this.setValues(space,vals);return this};Color.prototype.setChannel=function(space,index,val){if(val===undefined){return this.values[space][index]}else{if(val===this.values[space][index]){return this}}this.values[space][index]=val;this.setValues(space,this.values[space]);return this};module.exports=Color},{"color-convert":2,"color-string":4}]},{},[5])(5)});define("core/CoordHint",["core/sldiagram","color"],function(SLDiagram,Color){var CoordHint=function(cfg){if(cfg){this.init(cfg)}};CoordHint.prototype={init:function(cfg){if(!this.setSLDiagram(cfg.sldiagram)){throw new Error("sldiagram is required")}return true},setSLDiagram:function(sld){if(sld){this.sldiagram=sld;return true}else{return false}},getSLDiagram:function(){return this.sldiagram},createCross:function(size,color){if(typeof color!=="string"||color.length<7){color="#FF0000"}if(typeof size!=="number"){size=20}else{if(size<0){size=Math.abs(size)}}var shape=new createjs.Shape();var g=shape.graphics;g.setStrokeStyle(1,"round","round");g.beginStroke(color);g.moveTo(-size/2,-size/2).lineTo(size/2,size/2);g.moveTo(-size/2,size/2).lineTo(size/2,-size/2);return shape},MESSAGE_ERROR_WRONG_TYPE_OF_PARAMS_POINT:"Неверный тип параметра params.point",getShowPointParams:function(params){var defaults={point:{x:0,y:0},duration:1500,color:"#FF0000",callback:function(){},size:20};if(typeof params==="object"&&params!==null){if(typeof params.point==="function"){defaults.point=params.point}else{if(typeof params.point==="object"&&params.point!==null&&typeof params.point.x==="number"&&typeof params.point.y==="number"){defaults.point=function(){return{x:params.point.x,y:params.point.y}}}else{throw new Error(this.MESSAGE_ERROR_WRONG_TYPE_OF_PARAMS_POINT)}}if(typeof params.duration==="number"){defaults.duration=params.duration}if(typeof params.color==="string"&&params.color.length>=7){defaults.color=params.color}if(typeof params.callback==="function"){defaults.callback=params.callback}if(typeof params.size==="number"){defaults.size=params.size}}return defaults},showScreenPoint:function(params){params=this.getShowPointParams(params);var sld=this.getSLDiagram();var stage=((sld&&sld.stage)?sld.stage:null);if(!stage){return}var count=Math.floor(params.duration/100)+1;var sleep=100;var i=0;var shape=null;var me=this;var color=Color(params.color);return SLDiagram.Async.whilst(function(){return Boolean(i<count)},function(callback){i++;if(shape){stage.removeChild(shape)}shape=me.createCross(params.size,color.rgbaString());var p=params.point();shape.x=p.x;shape.y=p.y;color.alpha(color.alpha()-1/count);stage.addChild(shape);stage.update();return setTimeout(function(){return callback(null,i)},sleep)},function(err){if(err){console.error(err)}if(shape){stage.removeChild(shape)}stage.update();return params.callback.apply(me,err)})},showSchemePoint:function(params){var params2=this.getShowPointParams(params);var getPoint=params2.point;var sld=this.getSLDiagram();params2.point=function(){var p=getPoint();return sld.schemeToScreen(p.x,p.y)};return this.showScreenPoint(params2)},install:function(){},uninstall:function(){}};SLDiagram.prototype.getCoordHint=function(){if(!this._coordHint){this._coordHint=new SLDiagram.CoordHint({sldiagram:this})}return this._coordHint};SLDiagram.CoordHint=CoordHint;return CoordHint});define("core/sldiagram-direct-set-cursor",["core/sldiagram","core/Cursors"],function(SLDiagram,Cursors){var p=SLDiagram.prototype;p.setCursorDirect=function(cursor){if(this._oldCursors&&this._oldCursors.length>0){this._oldCursors.length=0}var stage=((this.stage)?this.stage:null);var canvas=((stage&&stage.canvas)?stage.canvas:null);var c=cursor;if(canvas){canvas.style.cursor=c;return true}else{return false}};return SLDiagram});define("core/sldiagram-focus",["core/sldiagram"],function(SLDiagram){SLDiagram.prototype.initControlFocusState=function(){if(this._installedControlFocusState){return false}if(!SLDiagram.DomEvents){return false}var domEvents=SLDiagram.DomEvents.getInstance();var me=this;domEvents.on("changefocus",function(events,type,data){setTimeout(function(){if(data&&data["new"]){me.cancelInputFocusState()}},10)},this,this);this._installedControlFocusState=true;return true};SLDiagram.prototype.cancelInputFocusState=function(){if(document.activeElement!==document.body){document.activeElement.blur();return true}else{return false}};return SLDiagram});define("core/RectSelect",["core/sldiagram"],function(SLDiagram){var RectSelect=function(){this.init.apply(this,arguments)};var p=RectSelect.prototype;p.MESSAGE_UNDEFINED_SLDIAGRAM="Не определён обязательный параметр sldiagram";p.init=function(cfg){if(typeof cfg!=="object"||cfg===null){cfg={}}if(!cfg.sldiagram){throw new Error(this.MESSAGE_UNDEFINED_SLDIAGRAM)}this.sldiagram=cfg.sldiagram;return this};p.getBackground=function(){return this.sldiagram.getBackground()};p.replaceBackgroundListeners=function(){if(this.originalMethods){return false}var background=this.getBackground();this.originalMethods={onMouseDown:background.onMouseDown,onPressMove:background.onPressMove,onPressUp:background.onPressUp,onClick:background.onClick};var createBindedMethod=SLDiagram.Utils.createBindedMethod;if(!this.newMethods){this.newMethods={onMouseDown:createBindedMethod(this,"onMouseDown"),onPressMove:createBindedMethod(this,"onPressMove"),onPressUp:createBindedMethod(this,"onPressUp"),onClick:createBindedMethod(this,"onClick")}}background.onMouseDown=this.newMethods.onMouseDown;background.onPressMove=this.newMethods.onPressMove;background.onPressUp=this.newMethods.onPressUp;background.onClick=this.newMethods.onClick;return true};p.restoreBackgroundListeners=function(){if(!this.originalMethods){return false}var background=this.getBackground();background.onMouseDown=this.originalMethods.onMouseDown;background.onPressMove=this.originalMethods.onPressMove;background.onPressUp=this.originalMethods.onPressUp;background.onClick=this.originalMethods.onClick;delete this.originalMethods;return true};p.onMouseDown=function(e){var back=this.getBackground();var editMode=this.sldiagram.getEditMode();if(!e.nativeEvent.ctrlKey||!editMode){return this.originalMethods.onMouseDown.apply(back,arguments)}this.state="select_region";this.start={time:new Date(),x:e.stageX,y:e.stageY};this.current={x:e.stageX,y:e.stageY};this.drawSelectRect()};p.onPressMove=function(e){var back=this.getBackground();var editMode=this.sldiagram.getEditMode();if((!e.nativeEvent.ctrlKey&&this.state!=="select_region")||!editMode){return this.originalMethods.onPressMove.apply(back,arguments)}if(!this.current){this.current={}}this.current.x=e.stageX;this.current.y=e.stageY;this.drawSelectRect()};p.onPressUp=function(e){var back=this.getBackground();var editMode=this.sldiagram.getEditMode();if((!e.nativeEvent.ctrlKey&&this.state!=="select_region")||!editMode){return this.originalMethods.onPressUp.apply(back,arguments)}this.selectElements();this.clearSelectRect();if(this.start){delete this.start}if(this.current){delete this.current}if(this.state){delete this.state}};p.onClick=function(e){var back=this.getBackground();if(!e.nativeEvent.ctrlKey){return this.originalMethods.onClick.apply(back,arguments)}};p.drawSelectRect=function(){var size;if(!this.rect){this.rect=document.createElement("div");this.rect.style.zIndex=99999;this.rect.style.background="none";this.rect.style.border="1px dashed #0000FF";this.rect.style.display="inline";this.rect.style.position="absolute";document.body.appendChild(this.rect)}size=this.getSelectRectSize();this.rect.style.left=size.x+"px";this.rect.style.top=size.y+"px";this.rect.style.width=size.width+"px";this.rect.style.height=size.height+"px"};p.clearSelectRect=function(){if(this.rect){document.body.removeChild(this.rect);delete this.rect}};p.getSelectRectSize=function(){var canvas={};canvas.el=this.sldiagram.canvas;canvas.rect=canvas.el.getBoundingClientRect();var min={x:Math.min(this.start.x,this.current.x),y:Math.min(this.start.y,this.current.y)};var max={x:Math.max(this.start.x,this.current.x),y:Math.max(this.start.y,this.current.y)};var size={width:max.x-min.x,height:max.y-min.y};return{x:min.x+canvas.rect.left,y:min.y+canvas.rect.top,width:size.width,height:size.height}};p.getSchemeRectSize=function(){var min={x:Math.min(this.start.x,this.current.x),y:Math.min(this.start.y,this.current.y)};var max={x:Math.max(this.start.x,this.current.x),y:Math.max(this.start.y,this.current.y)};var sld=this.sldiagram;max=sld.screenToScheme(max.x,max.y);min=sld.screenToScheme(min.x,min.y);var size={width:max.x-min.x,height:max.y-min.y};return{x:min.x,y:min.y,width:size.width,height:size.height}};p.selectElements=function(){var sld=this.sldiagram;var region=this.getSchemeRectSize();var els=sld.searchElementsInRegion(region);var i,el;for(i=0;i<els.length;i++){el=els[i]}sld.changeSelection({actions:[{action:"clear"},{action:"add",elements:els}],disableDraw:true});sld.render({delay:100,updateVisibleElements:true})};SLDiagram.RectSelect=RectSelect;return RectSelect});define("core/sldiagram-rect-select",["core/sldiagram"],function(SLDiagram){var proto={getRectSelect:function(){if(!this._rectSelect){this._rectSelect=new SLDiagram.RectSelect({sldiagram:this})}return this._rectSelect}};var i;for(i in proto){if(proto.hasOwnProperty(i)){SLDiagram.prototype[i]=proto[i]}}return SLDiagram});define("core/FormatAliases",["core/sldiagram"],function(SLDiagram){var FormatAliases={sldiagramFormatNames:{OTYP_RTREE_SLDIAGRAM:"rtree",OTYP_MODUS_SCHEME:"modus"},getSldiagramFormatName:function(ismsFormatName){if(this.sldiagramFormatNames.hasOwnProperty(ismsFormatName)){return this.sldiagramFormatNames[ismsFormatName]}else{return null}},getDefineAlias:function(name){var i;for(i in this.sldiagramFormatNames){if(this.sldiagramFormatNames.hasOwnProperty(i)){if(this.sldiagramFormatNames[i]===name){return i}}}return null}};SLDiagram.FormatAliases=FormatAliases;return FormatAliases});define("core/Region",["core/sldiagram"],function(SLDiagram){var Region=function(params){return this.init.call(this,params)};Region.prototype={};var p=Region.prototype;p.init=function(params){this.initMagicProps();var width,height;if(typeof params.width==="number"){width=params.width}else{if(typeof params.w==="number"){width=params.w}else{throw new Error(this.MESSAGE_INCORRECT_TYPE+" width/w")}}if(typeof params.height==="number"){height=params.height}else{if(typeof params.h==="number"){height=params.h}else{throw new Error(this.MESSAGE_INCORRECT_TYPE+" height/h")}}var min={x:Math.min(params.x,params.x+width),y:Math.min(params.y,params.y+height)};this.x=min.x;this.y=min.y;this.width=Math.abs(width);this.height=Math.abs(height)};p.MESSAGE_INCORRECT_TYPE="Неправильный тип";p.initMagicProps=function(){var me;if(typeof Object.defineProperty==="function"){me=this;Object.defineProperty(this,"w",{get:function(){return me.width},set:function(value){me.width=Number(value)},enumerable:false,configurable:false});Object.defineProperty(this,"h",{get:function(){return me.height},set:function(value){me.height=Number(value)},enumerable:false,configurable:false});return true}else{return false}};p.cross=function(region){var r;if(typeof region.getCorners!=="function"||typeof region.isInsidePoint!=="function"){r=new Region(region)}else{r=region}var points=this.getCorners();var i,point;for(i=0;i<points.length;i++){point=points[i];if(region.isInsidePoint(point)){return true}}return false};p.isInsidePoint=function(point){return Boolean(this.x<=point.x&&point.x<=this.x+this.width&&this.y<=point.y&&point.y<=this.y+this.height)};p.getCorners=function(){var res=[];res.topLeft={x:this.x,y:this.y};res.topRight={x:this.x+this.width,y:this.y};res.bottomRight={x:this.x+this.width,y:this.y+this.height};res.bottomLeft={x:this.x,y:this.y+this.height};res.push(res.topLeft);res.push(res.topRight);res.push(res.bottomRight);res.push(res.bottomLeft);return res};p.points=p.getCorners;p.getCenter=function(){return{x:this.x+this.width/2,y:this.y+this.height/2}};p.center=p.getCenter;p.toObject=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}};p.getMin=function(){return{x:this.x,y:this.y}};p.min=p.getMin;p.getMax=function(){return{x:this.x+this.width,y:this.y+this.height}};p.max=p.getMax;p.size=function(){return{width:this.width,height:this.height}};p.cross2=function(region){if(!this.cross(region)){return null}var _=SLDiagram.Underscore;var all=[this.min(),this.max()].concat([region.min(),region.max()]);var x=_.sortBy(_.map(all,"x"));var y=_.sortBy(_.map(all,"y"));var res={min:{x:x[1],y:y[1]},max:{x:x[2],y:y[2]}};return SLDiagram.Region.createByPoints([res.min,res.max])};p.square=function(){return this.width*this.height};Region.createByPoints=function(points){var min={x:Infinity,y:Infinity};var max={x:-Infinity,y:-Infinity};var i,point;for(i=0;i<points.length;i++){point=points[i];if(point.x>max.x){max.x=point.x}if(point.y>max.y){max.y=point.y}if(point.x<min.x){min.x=point.x}if(point.y<min.y){min.y=point.y}}if(Number.isFinite(min.x)&&Number.isFinite(min.y)&&Number.isFinite(max.x)&&Number.isFinite(max.y)){return new Region({x:min.x,y:min.y,width:max.x-min.x,height:max.y-min.y})}else{return null}};SLDiagram.Region=Region;return Region});define("core/transformer/ConnDirections",[],function(){var directs={UP:1,RIGHT:2,DOWN:3,LEFT:4};var res={getName:function(id){var name;for(name in directs){if(directs.hasOwnProperty(name)){if(directs[name]===id){return name}}}return null},getId:function(name){name=name.toUpperCase();if(directs.hasOwnProperty(name)){return directs[name]}else{return null}}};var name;for(name in directs){if(directs.hasOwnProperty(name)){res[name]=directs[name]}}return res});define("core/transformer/Circle",[],function(){var Circle=function(cfg){this.init(cfg)};Circle.prototype={};var p=Circle.prototype;p.init=function(cfg){cfg=cfg||{};this.x=null;this.y=null;this.radius=null;var i;for(i in cfg){if(cfg.hasOwnProperty(i)){this[i]=cfg[i]}}return this};p.getX=function(){return this.x};p.setX=function(value){if(typeof value==="number"||value===null){this.x=value;return true}else{return false}};p.getY=function(){return this.y};p.setY=function(value){if(typeof value==="number"||value===null){this.y=value;return true}else{return false}};p.getRadius=function(){return this.radius};p.setRadius=function(value){if(typeof value==="number"||value===null){this.radius=value;return true}else{return false}};p.min=function(){var radius=this.getRadius();return{x:this.getX()-radius,y:this.getY()-radius}};p.max=function(){var radius=this.getRadius();return{x:this.getX()+radius,y:this.getY()+radius}};p.toObject=function(){return{x:this.getX(),y:this.getY(),radius:this.getRadius()}};p.size=function(){var r=this.getRadius();return{width:r,height:r}};return Circle});define("core/transformer/Connection",["core/transformer/ConnDirections"],function(ConnDirections){var Connection=function(cfg){this.init(cfg)};Connection.prototype={};var p=Connection.prototype;p.ERROR_CIRCLE_UNDEFINED="Не задано обязательное свойство circle";p.DEFAULT_LENGTH=5;p.init=function(cfg){cfg=cfg||{};this.direction=null;this.circle=null;this.length=5;var i;for(i in cfg){if(cfg.hasOwnProperty(i)){this[i]=cfg[i]}}if(!this.getCircle()){throw new Error(this.ERROR_CIRCLE_UNDEFINED)}return this};p.getCircle=function(){return this.circle};p.setCircle=function(circle){if(typeof circle==="object"&&circle!==null){this.circle=circle;return true}else{return false}};p.getDirection=function(){return this.direction};p.setDirection=function(direction){if(ConnDirections.getName(direction)!==null||direction===null){this.direction=direction;return true}else{return false}};p.getLength=function(){return typeof this.length==="number"?this.length:this.DEFAULT_LENGTH};p.setLength=function(length){if(typeof length==="number"||length===null){this.length=length;return true}else{return false}};p.toVector=function(){var dir=this.getDirection();if(dir===null){return null}var circle=this.getCircle().toObject();var vector={begin:{},end:{}};var length=this.getLength();switch(dir){case ConnDirections.UP:vector.begin.x=circle.x;vector.begin.y=circle.y-circle.radius;vector.end.x=circle.x;vector.end.y=vector.begin.y-length;break;case ConnDirections.RIGHT:vector.begin.x=circle.x+circle.radius;vector.begin.y=circle.y;vector.end.x=vector.begin.x+length;vector.end.y=circle.y;break;case ConnDirections.DOWN:vector.begin.x=circle.x;vector.begin.y=circle.y+circle.radius;vector.end.x=circle.x;vector.end.y=vector.begin.y+length;break;case ConnDirections.LEFT:vector.begin.x=circle.x-circle.radius;vector.begin.y=circle.y;vector.end.x=vector.begin.x-length;vector.end.y=circle.y;break;default:return null}return vector};p.vector=p.toVector;p.points=p.toVector;p.min=function(){var vector=this.toVector();if(!vector){return null}else{return{x:Math.min(vector.begin.x,vector.end.x),y:Math.min(vector.begin.y,vector.end.y)}}};p.max=function(){var vector=this.toVector();if(!vector){return null}else{return{x:Math.max(vector.begin.x,vector.end.x),y:Math.max(vector.begin.y,vector.end.y)}}};return Connection});define("core/transformer/Winding",["core/transformer/Circle","core/transformer/Connection"],function(Circle,Connection){var Winding=function(cfg){this.init(cfg)};Winding.prototype={};var p=Winding.prototype;p.ERROR_CIRCLE_UNDEFINED="Не задано обязательное свойство circle";p.init=function(cfg){cfg=cfg||{};if(!this.setCircle(cfg.circle)&&!this.setCircle(cfg)){throw new Error(this.ERROR_CIRCLE_UNDEFINED)}var direction=typeof cfg.connection==="number"?cfg.connection:null;this.setConnection(direction);var props=["circle","connection","x","y","radius"];var i;for(i in cfg){if(cfg.hasOwnProperty(i)&&props.indexOf(i)<0){this[i]=cfg[i]}}return this};p.getCircle=function(){return this.circle};p.checkCircleObject=function(circle){return Boolean(typeof circle==="object"&&circle!==null&&typeof circle.x==="number"&&typeof circle.y==="number"&&typeof circle.radius==="number")};p.setCircle=function(circle){var obj;var c;if(typeof circle==="object"&&circle!==null){if(typeof circle.toObject==="function"&&this.checkCircleObject(circle.toObject())){c=circle}else{if(this.checkCircleObject(circle)){c=new Circle(circle)}}if(c){this.circle=c;return true}else{return false}}else{return false}};p.getConnection=function(){return this.connection};p.setConnection=function(conn){if(typeof conn==="number"||conn===null){if(this.connection){return this.connection.setDirection(conn)}else{this.connection=new Connection({circle:this.circle,direction:conn});return true}}else{return false}};p.min=function(){var circle=this.getCircle().min();var conn=this.getConnection().min();if(conn){return{x:Math.min(conn.x,circle.x),y:Math.min(conn.y,circle.y)}}else{return circle}};p.max=function(){var circle=this.getCircle().max();var conn=this.getConnection().max();if(conn){return{x:Math.max(conn.x,circle.x),y:Math.max(conn.y,circle.y)}}else{return circle}};p.DEFAULT_COLOR="#000000";p.getColor=function(){if(typeof this.color==="string"&&SLDiagram.isColor(this.color)){return this.color}else{return this.DEFAULT_COLOR}};p.DEFAULT_LINE_WEIGHT=1;p.getLineWeight=function(){if(typeof this.lineWeight==="number"){return this.lineWeight}else{return this.DEFAULT_LINE_WEIGHT}};p.createDefaultFigure=function(){return(new createjs.Graphics()).setStrokeStyle(this.getLineWeight(),"round","round").beginStroke(this.getColor())};p.drawFigure=function(figure,scale){figure=figure||this.createDefaultFigure();if(typeof scale!=="number"){scale=1}var circle=this.getCircle().toObject();figure.moveTo((circle.x+circle.radius)*scale,circle.y*scale).drawCircle(circle.x*scale,circle.y*scale,circle.radius*scale);var connection=this.getConnection().toVector();if(connection){figure.moveTo(connection.begin.x*scale,connection.begin.y*scale).lineTo(connection.end.x*scale,connection.end.y*scale)}};p.size=function(){var min=this.min();var max=this.max();return{width:max.x-min.x,height:max.y-min.y}};return Winding});define("core/transformer/WindingStore",["core/sldiagram"],function(SLDiagram){var WindingStore=function(cfg){this.init(cfg)};WindingStore.prototype={};var p=WindingStore.prototype;p.init=function(cfg){this.data=[];var i;if(SLDiagram.Underscore.isArray(cfg)){for(i=0;i<cfg.length;i++){this.data.push(cfg[i])}}return this};p.push=function(){return this.data.push.apply(this.data,arguments)};p.each=function(fn){return SLDiagram.Underscore.each(this.data,fn)};p.map=function(fn){return SLDiagram.Underscore.map(this.data,fn)};p.min=function(){var min={x:Infinity,y:Infinity};var i,winding;for(i=0;i<this.data.length;i++){winding=this.data[i].min();min.x=Math.min(winding.x,min.x);min.y=Math.min(winding.y,min.y)}if(isFinite(min.x)&&isFinite(min.y)){return min}else{return null}};p.max=function(){var max={x:-Infinity,y:-Infinity};var i,winding;for(i=0;i<this.data.length;i++){winding=this.data[i].max();max.x=Math.max(winding.x,max.x);max.y=Math.max(winding.y,max.y)}if(isFinite(max.x)&&isFinite(max.y)){return max}else{return null}};p.size=function(){var min=this.min();var max=this.max();if(!min||!max){return null}else{return{width:max.x-min.x,height:max.y-min.y}}};p.offset=function(delta){this.each(function(winding){var c=winding.getCircle();c.setX(c.getX()+delta.x);c.setY(c.getY()+delta.y)})};return WindingStore});define("core/transformer/all",["core/sldiagram","core/transformer/ConnDirections","core/transformer/Circle","core/transformer/Connection","core/transformer/Winding","core/transformer/WindingStore"],function(SLDiagram,ConnDirections,Circle,Connection,Winding,WindingStore){SLDiagram.transformer={ConnDirections:ConnDirections,Circle:Circle,Connection:Connection,Winding:Winding,WindingStore:WindingStore};return SLDiagram.transformer});define("core/core",["core/sldiagram","underscore","core/Async","core/sldiagram-statics","core/Class","core/Ajax","core/Debug","core/Console","core/Element","core/Format","core/Observable","core/Runner","core/Queue","core/Queue2","core/easeljs-extend","core/Triggers","core/CornRect","core/Type","core/Manager","core/TreeStoreItem","core/TreeStore","core/properties/properties","core/DebugTimer","core/Color","core/StatusStyle","core/StatusStyleBottomRight","core/StatusStyleTopRight","core/StatusStyleBottomRightInside","core/Status","core/MouseSimulator","core/DatasourceResponse","core/Result","core/ComponentRemover","core/SaveDatasoursesRequest","core/AsyncFunction","core/DisabledFunction","core/Grid","core/SnapToPixel","core/sldiagram-default-config-descriptor","core/sldiagram-default-config","core/blink-bug-fix","core/TouchEvents","core/TouchSimulator","core/DomEvents","core/Background","core/DisableChangeSelection","core/DisableEvents","core/Handler","core/handlers/all","core/Type-value","core/Type-invert","core/SetData","core/Cursors","core/Type-direction","core/Type-scale","core/sldiagram-voltage","core/CoordHint","core/sldiagram-direct-set-cursor","core/sldiagram-focus","core/RectSelect","core/sldiagram-rect-select","core/FormatAliases","core/sldiagram-rect-select","core/Region","core/transformer/all"],function(SLDiagram,_){SLDiagram.Underscore=_;SLDiagram._=_;return SLDiagram});define("modus/deps",["core/sldiagram"],function(SLDiagram){return SLDiagram});define("modus/funcs/to-color",[],function(){function ToColor(value){if(typeof value!=="string"||value.length<=0){return null}var colors={black:"#000000","черный":"#000000","коричневый":"#993200",brown:"#993200","оливковый":"#333200",olive:"#333200","темно_зеленый":"#003300",dark_green:"#003300","темно_сизый":"#003366",dark_blue_grey:"#003366","темно_синий":"#000280",navy:"#000280","индиго":"#333499",indigo:"#333499","серый_80%":"#333333",dark_gray:"#333333","темно_красный":"#800000",dark_red:"#800000","оранжевый":"#FF6600",orange:"#FF6600","коричнево_зеленый":"#807E00",brown_green:"#807E00","зеленый":"#018000",green:"#018000","сине_зеленый":"#008080",cyan:"#008080","синий":"#0004FF",blue:"#0004FF","сизый":"#666699",blue_grey:"#666699","серый_50%":"#808080",gray:"#808080","красный":"#FF0000",red:"#FF0000","светло_оранжевый":"#FF9500",light_orange:"#FF9500","травяной":"#9ACC00",lawngreen:"#9ACC00","изумрудный":"#339964",emerald:"#339964","темно_бирюзовый":"#33CCCC",dark_turquoise:"#33CCCC","темно_голубой":"#3366FF",deep_sky_blue:"#3366FF","фиолетовый":"#7F0080",violet:"#7F0080","серый_40%":"#989898",light_gray:"#989898","лиловый":"#FD00FF",magenta:"#FD00FF","золотистый":"#FFCB00",gold:"#FFCB00","желтый":"#FFFB00",yellow:"#FFFB00","ярко_зеленый":"#02FF00",lime:"#02FF00","бирюзовый":"#00FFFF",turquoise:"#00FFFF","голубой":"#00CFFF",sky_blue:"#00CFFF","вишневый":"#993367",cherry:"#993367","серый_25%":"#C0C0C0",silver:"#C0C0C0","розовый":"#FF99CD",pink:"#FF99CD","светло_коричневый":"#FFCB99",light_brown:"#FFCB99","светло_желтый":"#FFFD99",light_yellow:"#FFFD99","бледно_зеленый":"#CCFFCC",light_green:"#CCFFCC","светло_бирюзовый":"#CCFFFF",light_turquoise:"#CCFFFF","бледно_голубой":"#99CCFF",light_sky_blue:"#99CCFF","сиреневый":"#CC99FF",lilac:"#CC99FF","белый":"#FFFFFF",white:"#FFFFFF"};if(colors.hasOwnProperty(value)){return colors[value]}var i,c;var items={r:"",g:"",b:""};var index=0;for(i=0;i<value.length;i++){c=value[i].toUpperCase().charCodeAt(0);if(("0".charCodeAt(0)<=c&&c<="9".charCodeAt(0))||("A".charCodeAt(0)<=c&&c<="F".charCodeAt(0))){if(0<=index&&index<=1){items.b=items.b+value[i].toUpperCase()}else{if(2<=index&&index<=3){items.g=items.g+value[i].toUpperCase()}else{if(4<=index&&index<=5){items.r=items.r+value[i].toUpperCase()}}}if(index===5){break}index++}}if(items.r.length===2&&items.g.length===2&&items.b.length===2){return"#"+items.r+items.g+items.b}else{return null}}return ToColor});define("modus/funcs/get-voltage-colors",["modus/funcs/to-color"],function(ToColor){function GetVoltageColors(doc){var colors=doc.querySelector("Colors");if(!colors){return null}var res={};var items=colors.querySelectorAll('[parentName="КЛАСС_НАПР"]');var i,item;var name;var color;for(i=0;i<items.length;i++){item=items[i];name=SLDiagram.Utils.fixVoltageName(item.getAttribute("name"));if(!name){continue}color=ToColor(item.getAttribute("value"));if(color&&!res.hasOwnProperty(name)){res[name]=color}}return res}return GetVoltageColors});define("modus/funcs/get-on-and-off-colors",["modus/funcs/to-color"],function(ToColor){function GetColorsFrom(tableka,parentName){var res={on:null,off:null};var items=tableka.querySelectorAll('KA[parentName="'+parentName+'"]');var onRegexp=new RegExp("ВКЛ.*","i");var onCheck;var offRegexp=new RegExp("ОТКЛ.*","i");var offCheck;var i,ka;var name;var colorFill;for(i=0;i<items.length;i++){ka=items[i];name=ka.getAttribute("name");onCheck=Boolean(name.match(onRegexp));offCheck=Boolean(name.match(offRegexp));if(onCheck||offCheck){colorFill=ka.getAttribute("colorFill");if(onCheck&&!res.on){res.on=colorFill}else{if(offCheck&&!res.off){res.off=colorFill}}}if(res.on&&res.off){break}}return res}function GetOnAndOffColors(doc){var res={on:null,off:null};var styles=doc.querySelector("Styles");var colors=styles.querySelector("Colors");if(!colors){return res}colors=colors.querySelectorAll('Color[parentName="СОСТОЯНИЕ"]');if(!colors||colors.length<=0){return res}var i,color,name;var on,off;var c={};for(i=0;i<colors.length;i++){color=colors[i];name=color.getAttribute("name");if(name==="ВКЛЮЧЕНО"||name==="ОТКЛЮЧЕНО"){c[name]=ToColor(color.getAttribute("value"))}}var tableka=doc.querySelector("TableKA");if(!tableka){return res}var switcherStyles=GetColorsFrom(tableka,"ВЫКЛЮЧАТЕЛЬ");var switcherStyle;for(i in switcherStyles){if(switcherStyles.hasOwnProperty(i)){switcherStyle=switcherStyles[i];if(c[switcherStyle]){res[i]=c[switcherStyle]}}}return res}return GetOnAndOffColors});define("modus/funcs/create-inside-text",[],function(){function CreateInsideText(modusEl,sldiagram){var cfg;var textType;var el;if(typeof modusEl.config.text==="object"&&modusEl.config.text!==null){cfg=SLDiagram.Utils.cloneDeep(modusEl.config.text);cfg.align="center";textType=sldiagram.getTypeByName("text");el=new SLDiagram.Element({type:textType,config:{figure:cfg}});delete modusEl.config.text;return el}else{return null}}return CreateInsideText});define("modus/funcs/get-root",[],function(){function GetRoot(node){var n=node;while(n.parentNode){n=n.parentNode}return n}return GetRoot});define("modus/funcs/all",["modus/funcs/get-voltage-colors","modus/funcs/to-color","modus/funcs/get-on-and-off-colors","modus/funcs/create-inside-text","modus/funcs/get-root"],function(){var modules=["getVoltageColors","toColor","getOnAndOffColors","createInsideText","getRoot"];var funcs={};var i,module;for(i=0;i<modules.length;i++){module=modules[i];funcs[module]=arguments[i]}return funcs});define("modus/Modus",["modus/deps","modus/funcs/all"],function(SLDiagram,Funcs){var Modus=function(cfg){this.init(cfg)};Modus.prototype={init:function(cfg){if(typeof cfg!=="object"||cfg===null){cfg={}}this._initTypeAndSdeStore();return this},_parseWithDomParser:function(str){if(typeof window.DOMParser!=="undefined"){return(new window.DOMParser()).parseFromString(str,"text/xml")}else{return null}},_parseWithActiveXObjectXmlDom:function(str){var parser;if(typeof window.ActiveXObject!=="undefined"&&new window.ActiveXObject("Microsoft.XMLDOM")){parser=new window.ActiveXObject("Microsoft.XMLDOM");parser.async="false";parser.loadXML(str);return parser}else{return null}},_parse:function(str){var xml=null;if(typeof str==="string"&&str.length>0){xml=this._parseWithDomParser(str)||this._parseWithActiveXObjectXmlDom(str);if(xml===null){throw new Error("Не удалось распарсить XML")}else{return xml}}else{throw new Error("Аргумент str должен содержать строку")}},setDocument:function(doc){var parser;if(doc===null&&this._document){delete this._document;return true}else{if(typeof doc==="string"&&doc.length>0){this._document=this._parse(doc);return true}else{if(this.checkDocumentInstance(doc)||this.checkActiveXObjectInstance(doc)){this._document=doc;return true}else{return false}}}},checkDocumentInstance:function(doc){if(window.Document){return Boolean(doc instanceof window.Document)}else{return null}},checkActiveXObjectInstance:function(doc){if(window.ActiveXObject){return Boolean(doc instanceof window.ActiveXObject)}else{return null}},checkArrayBufferInstance:function(doc){if(window.ArrayBuffer){return Boolean(doc instanceof window.ArrayBuffer)}else{return null}},getDocument:function(){if(this._document){return this._document}else{return null}},loadFromFile:function(url){var me=this;return new SLDiagram.Utils.Bluebird(function(resolve,reject){var ajax=new XMLHttpRequest();ajax.onreadystatechange=function(){var resp,res=false;if(ajax.readyState===4){if(ajax.status===200){try{resp=ajax.responseText;res=me.setDocument(resp)}catch(ex){return reject(ex)}return resolve(res)}}};ajax.open("GET",url);ajax.send()})},_scaleCofficient:8,getParsers:function(){if(!this._parsers){this._parsers=[]}return this._parsers},setParsers:function(parsers){var i,parser;if(!this._parsers){this._parsers=[]}else{this._parsers.length=0}for(i=0;i<parsers.length;i++){parser=parsers[i];this.appendParser(parser)}return this.getParsers()},appendParser:function(parser){if(!this._parsers){this._parsers=[]}if(parser){this._parsers.push(new parser());return true}else{return false}},_getSDEDocument:function(doc){var sdedocument;if(doc&&doc.children&&doc.children.length>=0){sdedocument=doc.children[0];if(sdedocument.tagName.toLowerCase()==="sdedocument"){return sdedocument}else{return null}}else{return null}},_getPages:function(sdedocument){var i,child;if(sdedocument&&sdedocument.children&&sdedocument.children.length>=0){for(i=0;i<sdedocument.children.length;i++){child=sdedocument.children[i];if(child.tagName.toLowerCase()==="pages"){return child}}return null}else{return null}},_forEachPage:function(pages,fn){var i,child;if(pages&&pages.children&&pages.children.length>=1){for(i=0;i<pages.children.length;i++){child=pages.children[i];if(child.tagName.toLowerCase()==="page"){fn(child)}}}},_forEachSdeobjects:function(page,fn){var i,child;if(page&&page.children&&page.children.length>=1){for(i=0;i<page.children.length;i++){child=page.children[i];if(child.tagName.toLowerCase()==="sdeobjects"){fn(child)}}}},_forEachType:function(sdeobjects,fn){var i,child;if(sdeobjects&&sdeobjects.children&&sdeobjects.children.length>=1){for(i=0;i<sdeobjects.children.length;i++){child=sdeobjects.children[i];if(child.tagName.toLowerCase()==="type"){fn(child)}}}},_forEachSde:function(type,fn){var i,child;if(type&&type.children&&type.children.length>=1){for(i=0;i<type.children.length;i++){child=type.children[i];if(child.tagName.toLowerCase()==="sde"){fn(type,child)}}}},forEachModusElement:function(fn){var doc,sdedocument,pages,me=this;doc=this.getDocument();sdedocument=this._getSDEDocument(doc);pages=this._getPages(sdedocument);if(pages){this._forEachPage(pages,function(page){me._forEachSdeobjects(page,function(sdeobjects){me._forEachType(sdeobjects,function(type){me._forEachSde(type,function(type,sde){fn(type,sde)})})})})}},_initTypeAndSdeStore:function(){if(!this._typeAndSdeStore){this._typeAndSdeStore=[]}},getTypeAndSdeStore:function(){return this._typeAndSdeStore},clearTypeAndSdeStore:function(){this._typeAndSdeStore.length=0},appendTypeAndSde:function(typeAndSde){if(typeof typeAndSde==="object"&&typeAndSde!==null){this._typeAndSdeStore.push(typeAndSde);return true}else{return false}},parseModusElement:function(typeAndSde){var parsers=this.getParsers(),i,parser,res=false;for(i=0;i<parsers.length;i++){parser=parsers[i];if(parser.parse(typeAndSde)){res=true}}return res},parseModusElements:function(){var me=this;this.forEachModusElement(function(type,sde){var typeAndSde=new SLDiagram.Modus.TypeAndSde({type:type,sde:sde});if(me.parseModusElement(typeAndSde)){me.appendTypeAndSde(typeAndSde)}});return this.getTypeAndSdeStore()},convertModusElements:function(sld){var store=this.getTypeAndSdeStore();var i,item;var el;var converters=this.getConverters();var j,converter;var k;var els;for(i=0;i<store.length;i++){item=store[i];for(j=0;j<converters.length;j++){converter=converters[j];els=converter.convert(item,sld);if(els&&els.length>0){for(k=0;k<els.length;k++){el=els[k];el.getSetterVoltageClass().disable();sld.addElement(el);el.getSetterVoltageClass().enable()}break}}}return true},loadAndConvert:function(url,sldiagram){var me=this;return this.loadFromFile(url).then(function(res){if(res){me.parseModusElements();me.convertModusElements(sldiagram);me.convertSchemeParams(sldiagram);me.renderSldiagram(sldiagram);return true}else{return false}})},createConvertersStore:function(){if(!this.converters){this.converters=[]}},appendConverter:function(converter){this.createConvertersStore();if(typeof converter==="function"){this.converters.push(new converter());return true}else{if(typeof converter==="object"&&converter!==null){this.converters.push(converter);return true}else{return false}}},setConverters:function(converters){this.createConvertersStore();this.converters.length=0;var i,converter;var res=false;for(i=0;i<converters.length;i++){converter=converters[i];if(this.appendConverter(converter)){res=true}}return res},getConverters:function(){this.createConvertersStore();return this.converters},convertSchemeParams:function(sldiagram){if(!sldiagram.config){sldiagram.config={}}var i;var doc=this.getDocument();var voltageColors=Funcs.getVoltageColors(doc);if(voltageColors&&voltageColors.length>0&&!sldiagram.config.voltageColors){sldiagram.config.voltageColors={}}for(i in voltageColors){if(voltageColors.hasOwnProperty(i)){sldiagram.config.voltageColors[i]=voltageColors[i]}}var switcherColors=Funcs.getOnAndOffColors(doc);if(switcherColors.on||switcherColors.off){if(!sldiagram.config.figure){sldiagram.config.figure={}}if(switcherColors.on){sldiagram.config.figure.onColor=switcherColors.on}if(switcherColors.off){sldiagram.config.figure.offColor=switcherColors.off}}var page=doc.querySelector("Page");var pageColor=Funcs.toColor(page.getAttribute("color"));if(pageColor!==null){sldiagram.setConfigProperty("scheme/backColor",pageColor)}SLDiagram.Utils.set(sldiagram,"config.figure.lamp",{on:"#00A000",off:"#FF0000"});return true},renderSldiagram:function(sld){sld.events.listen("beforeRender",function(){var changes=new SLDiagram.DatasourceResponse({sldiagram:this});changes.applyData([])},{once:true,anyContext:true},sld,null);sld.render({updateVisibleElements:true})}};Modus.MESSAGE_UNDEFINED_REQUIRED_PARAM="Не указан обязательный параметр";Modus.simpleConvert=function(params){var Bluebird=SLDiagram.Utils.Bluebird;var modus;return Bluebird.attempt(function(resolve,reject){modus=new Modus();modus.setParsers(Modus.parsers);modus.setConverters(Modus.converters)}).then(function(){if(params.text){return modus.setDocument(params.text)}else{if(params.url){return modus.loadFromFile(params.url)}else{return Bluebird.reject(new Error(Modus.MESSAGE_UNDEFINED_REQUIRED_PARAM))}}}).then(function(){modus.parseModusElements();params.sldiagram.clearScheme();modus.convertModusElements(params.sldiagram);modus.convertSchemeParams(params.sldiagram);modus.renderSldiagram(params.sldiagram);return true})};SLDiagram.Modus=Modus;return Modus});define("modus/Parser",["core/sldiagram","modus/Modus"],function(SLDiagram,Modus){var Parser=function(cfg){this.init(cfg)};Parser.prototype={init:function(cfg){return this},parse:function(typeAndSde){return this.accept(typeAndSde)}};Parser.define=function(cfg){var NewParser=function(){this.init.apply(this,arguments)};NewParser.prototype=Object.create(Parser.prototype);var p=NewParser.prototype;var i;for(i in cfg){if(cfg.hasOwnProperty(i)){p[i]=cfg[i]}}return NewParser};Modus.Parser=Parser;return Parser});define("modus/TypeAndSde",["core/sldiagram","modus/Modus"],function(SLDiagram,Modus){var TypeAndSde=function(cfg){this.init(cfg)};TypeAndSde.prototype={init:function(cfg){this.config={};this.typeId=null;this.type=null;this.sde=null;if(cfg){if(typeof cfg.config==="object"&&cfg.config!==null){this.config=SLDiagram.Utils.cloneDeep(cfg.config)}if(typeof cfg.typeId!=="undefined"){this.setTypeId(cfg.typeId)}if(cfg.type){this.setType(cfg.type)}if(cfg.sde){this.setSde(cfg.sde)}}return this},setConfigProperty:function(path,value){SLDiagram.setProperty(this.config,path,value);return true},getConfigProperty:function(path){return SLDiagram.getProperty(this.config,path)},delConfigProperty:function(path){SLDiagram.delProperty(this.config,path);return true},setTypeId:function(id){if(!isNaN(id)&&isFinite(id)){this.typeId=Number(id);return true}else{if(id===null){this.typeId=null;return true}else{return false}}},getTypeId:function(){return this.typeId},setType:function(type){if(type){this.type=type;return true}else{if(type===null){this.type=null;return true}else{return false}}},getType:function(){return this.type},setSde:function(sde){if(sde){this.sde=sde;return true}else{if(sde===null){this.sde=null;return true}else{return false}}},getSde:function(){return this.sde}};Modus.TypeAndSde=TypeAndSde;return TypeAndSde});define("modus/DragAndDropContainer",["modus/Modus","utils/EventEmitter"],function(Modus,EventEmitter){var DragAndDropContainer=function(){this.init.apply(this,arguments)};DragAndDropContainer.prototype=Object.create(EventEmitter.prototype);var p=DragAndDropContainer.prototype;p.init=function(cfg){if(typeof cfg!=="object"||cfg===null){cfg={}}if(!this.checkAvailableApi()){console.warn("Недоступны необходимые возможности в вашем браузере");return this}if(!this.setSLDiagram(cfg.sldiagram)){throw new Error("Не указан обязательный параметр sldiagram")}this.onDrop=this.onDrop.bind(this);this.onDragOver=this.onDragOver.bind(this);this.onBeforeConvert=this.onBeforeConvert.bind(this);this.on("beforeconvert",this.onBeforeConvert);return this};p.setSLDiagram=function(sld){if(sld){this.sldiagram=sld;return true}else{return false}};p.getSLDiagram=function(){if(this.sldiagram){return this.sldiagram}else{return null}};p.getCanvas=function(){var sld=this.getSLDiagram();if(!sld||!sld.stage||!sld.stage.canvas){return null}return sld.stage.canvas};p.checkAvailableApi=function(){return Boolean(typeof window.FileReader!=="undefined"&&typeof window.Uint8Array!=="undefined")};p.enableEventListeners=function(){var canvas=this.getCanvas();if(!canvas){return false}canvas.addEventListener("drop",this.onDrop);canvas.addEventListener("dragover",this.onDragOver);this.emit("enableeventlisteners");return true};p.disableEventListeners=function(){var canvas=this.getCanvas();if(!canvas){return false}canvas.removeEventListener("drop",this.onDrop,false);canvas.removeEventListener("dragover",this.onDragOver,false);this.emit("disableeventlisteners");return true};p.onDrop=function(e){e.stopPropagation();e.preventDefault();var file=e.dataTransfer.files[0];var fileReader=new FileReader();var me=this;fileReader.onload=function(e){me.convert(me.decode(e.target.result))};p.file_name=file.name.substr(0,file.name.lastIndexOf("."));fileReader.readAsArrayBuffer(file)};p.onDragOver=function(e){e.stopPropagation();e.preventDefault()};p.ERROR_TITLE="Ошибка во время конвертации xsde схемы";p.MESSAGE_IMPORT_INCORRECT_FILE_TYPE="Невозможно распознать импортируемый файл. Убедитесь в том, что вы перетаскиваете корректный файл.";p.convert=function(text){var me=this;return this.emitAsync("beforeconvert").then(function(res){var modus;var sld=me.getSLDiagram();var res2=true;var i;sld.setConfigProperty("scheme/name",p.file_name);for(i=0;i<res.length;i++){if(!res[i]){res2=false;break}}if(res2){return SLDiagram.Modus.simpleConvert({sldiagram:sld,text:text})}else{return SLDiagram.Utils.Bluebird.resolve(false)}})["catch"](function(ex){console.error(me.ERROR_TITLE+": "+ex.message,ex);SLDiagram.Debug.addMessage(me.ERROR_TITLE,me.MESSAGE_IMPORT_INCORRECT_FILE_TYPE,0)})};p.getEncoding=function(data){var uint8array=new Uint8Array(data,0,200);var str=new SLDiagram.Utils.TextEncoding.TextDecoder("utf8").decode(uint8array);var defEncoding="utf8";var regs={};regs.decl=new RegExp("(?:<\\?xml)(.*)(?:\\?>)");regs.encoding=new RegExp('(?:encoding=")(.*)(?:")');var matches={};matches.decl=str.match(regs.decl);if(!matches.decl||matches.decl.length<=1){return defEncoding}matches.encoding=matches.decl[1].match(regs.encoding);if(!matches.encoding||matches.encoding.length<=1){return defEncoding}else{return matches.encoding[1].toLowerCase()}};p.decode=function(res){var uint8array=new Uint8Array(res);var encoding=this.getEncoding(res);var str=new SLDiagram.Utils.TextEncoding.TextDecoder(encoding).decode(uint8array);return str};p.onBeforeConvert=function(){return true};Modus.DragAndDropContainer=DragAndDropContainer;return DragAndDropContainer});define("modus/Converter",["modus/Modus"],function(Modus){var Converter=function(){this.init.apply(this,arguments)};var p=Converter.prototype;p.init=function(){return this};p.convert=function(modusEl,sldiagram){return null};Converter.define=function(cfg){var NewConverter=function(){this.init.apply(this,arguments)};NewConverter.prototype=Object.create(Converter.prototype);var proto=NewConverter.prototype;var i;for(i in cfg){if(cfg.hasOwnProperty(i)){proto[i]=cfg[i]}}return NewConverter};Modus.Converter=Converter;return Converter});define("modus/parsers/funcs/get-artful-number",[],function(){function GetNumber(num){var type=typeof num;var re;var parts;switch(type){case"number":if(!isNaN(num)&&isFinite(num)){return num}else{return null}break;case"string":if(!isNaN(num)&&isFinite(num)){return Number(num)}else{re=new RegExp("-(\\d+)[,.]-(\\d+)");parts=num.match(re);if(parts&&typeof parts[1]==="string"&&typeof parts[2]==="string"){return Number("-"+parts[1]+"."+parts[2])}else{return null}}break;default:return null}}return GetNumber});define("modus/parsers/funcs/getter-coords",["modus/parsers/funcs/get-artful-number"],function(GetArtfulNumber){var GetterCoords=function(data){var value=data.sde.getAttribute("origin");if(typeof value!=="string"){return null}var values=value.split(" ");if(values.length<2){return null}var x=GetArtfulNumber(values[0]);if(x===null){return null}var y=GetArtfulNumber(values[1]);if(y===null){return null}return{x:x*8,y:y*8}};return GetterCoords});define("modus/parsers/funcs/getter-coords2",["modus/parsers/funcs/get-artful-number"],function(GetArtfulNumber){var GetterCoords2=function(el){var points=el.sde.getAttribute("points");if(typeof points!=="string"||points.length<=0){return null}points=points.split(",");if(points.length<2){return null}var p1=points[0].split(" ");var x1=GetArtfulNumber(p1[0]);if(x1===null){return null}var y1=GetArtfulNumber(p1[1]);if(y1===null){return null}var p2=points[1].split(" ");var x2=GetArtfulNumber(p2[0]);if(x2===null){return null}var y2=GetArtfulNumber(p2[1]);if(y2===null){return null}return{x1:x1*8,y1:y1*8,x2:x2*8,y2:y2*8}};return GetterCoords2});define("modus/parsers/funcs/getter-element-id",[],function(){var GetterElementId=function(typeAndSde){var value=typeAndSde.sde.getAttribute("sTag");if(typeof value==="number"){return value}if(typeof value==="string"&&!isNaN(value)&&isFinite(value)){return Number(value)}return null};return GetterElementId});define("modus/parsers/funcs/getter-type-id",[],function(){var GetterTypeId=function(typeAndSde){var value=typeAndSde.type.getAttribute("typ");if(typeof value==="string"&&!isNaN(value)&&isFinite(value)){return Number(value)}else{if(typeof value==="number"){return value}else{return null}}};return GetterTypeId});define("modus/parsers/funcs/getter-voltage",[],function(){var GetterVoltage=function(data){var tech=data.sde.querySelector("Tech");if(tech===null){return null}var value=tech.getAttribute("voltage");if(typeof value==="number"){return value}else{if(typeof value==="string"&&!isNaN(value)&&isFinite(value)){return Number(value)}else{if(typeof value==="string"){value=SLDiagram.Utils.fixVoltageName(value);if(value===null){return null}else{return Number(value)}}else{return null}}}};return GetterVoltage});define("modus/parsers/funcs/parse-coords",["modus/parsers/funcs/getter-coords"],function(GetCoords){var ParseCoords=function(el){var coords=GetCoords(el);if(coords===null){return false}else{el.setConfigProperty("figure/x",coords.x);el.setConfigProperty("figure/y",coords.y);return true}};return ParseCoords});define("modus/parsers/funcs/parse-coords2",["modus/parsers/funcs/getter-coords2"],function(GetCoords2){var ParseCoords2=function(el){var coords=GetCoords2(el);if(coords===null){return false}else{el.setConfigProperty("figure/x1",coords.x1);el.setConfigProperty("figure/y1",coords.y1);el.setConfigProperty("figure/x2",coords.x2);el.setConfigProperty("figure/y2",coords.y2);return true}};return ParseCoords2});define("modus/parsers/funcs/parse-element-id-boolean",["modus/parsers/funcs/getter-element-id"],function(GetElementId){var ParseElementIdBoolean=function(el){var elId=GetElementId(el);if(elId===null){return false}else{el.setConfigProperty("figure/ts","1.3."+elId);return true}};return ParseElementIdBoolean});define("modus/parsers/funcs/parse-element-id-number",["modus/parsers/funcs/getter-element-id"],function(GetElementId){var ParseElementIdNumber=function(el){var elId=GetElementId(el);if(elId===null){return false}else{el.setConfigProperty("figure/ti","1.1."+elId);return true}};return ParseElementIdNumber});define("modus/parsers/funcs/parse-voltage",["modus/parsers/funcs/getter-voltage"],function(GetVoltage){var ParseVoltage=function(el){var voltage=GetVoltage(el);if(voltage===null){return false}else{el.setConfigProperty("figure/U",voltage);return true}};return ParseVoltage});define("modus/parsers/funcs/get-number",[],function(){function GetNumber(value){var type=typeof value;if(type==="string"||type==="number"){if(!isNaN(value)&&isFinite(value)){return Number(value)}else{return null}}else{return null}}return GetNumber});define("modus/parsers/funcs/orient/get-angle-from-sde",["modus/parsers/funcs/get-number"],function(GetNumber){function GetAngleFromSde(modusEl){return GetNumber(modusEl.sde.getAttribute("angle"))}return GetAngleFromSde});define("modus/parsers/funcs/getter-angle",["modus/parsers/funcs/orient/get-angle-from-sde"],function(GetAngleFromSde){function GetterAngle(modusEl){return GetAngleFromSde(modusEl)}return GetterAngle});define("modus/parsers/funcs/parse-angle",["modus/parsers/funcs/getter-angle","utils/Utils"],function(GetterAngle,Utils){function ParseAngle(modusEl){var angle=GetterAngle(modusEl);if(angle!==null){if(!modusEl.config.figure){modusEl.config.figure={}}modusEl.config.figure.rotate=Utils.simplifyDegreeAngle(-angle);return true}else{return false}}return ParseAngle});define("modus/parsers/funcs/orient2/get-angle-from-sde",["modus/parsers/funcs/get-number"],function(GetNumber){function GetAngleFromSde(modusEl){return GetNumber(modusEl.sde.getAttribute("angle"))}return GetAngleFromSde});define("modus/parsers/funcs/orient2/get-orient-from-sde",[],function(){function GetOrientFromSde(modusEl){return modusEl.sde.getAttribute("orient")}return GetOrientFromSde});define("modus/parsers/funcs/orient2/get-orient-from-type",[],function(){function GetOrientFromType(modusEl){return modusEl.type.getAttribute("orient")}return GetOrientFromType});define("modus/parsers/funcs/orient2/get-x-mirror-from-sde",[],function(){function GetXMirrorFromSde(modusEl){var mirror=modusEl.sde.getAttribute("xMirror");if(typeof mirror==="string"){if(mirror==="0"){return false}else{return true}}else{return null}}return GetXMirrorFromSde});define("modus/parsers/funcs/orient2/get-x-mirror-from-type",[],function(){function GetXMirrorFromSde(modusEl){var mirror=modusEl.type.getAttribute("xMirror");if(typeof mirror==="string"){if(mirror==="0"){return false}else{return true}}else{return null}}return GetXMirrorFromSde});define("modus/parsers/funcs/orient2/orient-to-angle",[],function(){function OrientToAngle(orient){var angle;switch(orient){case"NORMAL":angle=0;break;case"VERTDOWN":angle=90;break;case"REVERSED":angle=180;break;case"VERTUP":angle=-90;break;default:angle=0}return angle}return OrientToAngle});define("modus/parsers/funcs/orient2/get-x-mirror",["modus/parsers/funcs/orient2/get-x-mirror-from-sde","modus/parsers/funcs/orient2/get-x-mirror-from-type"],function(GetXMirrorFromSde,GetXMirrorFromType){function GetXMirror(el){var mirror={};mirror.sde=GetXMirrorFromSde(el);mirror.type=GetXMirrorFromType(el);var res;if(mirror.type===null){res=mirror.sde}else{if(mirror.sde===null){res=mirror.type}else{res=mirror.sde}}return res?1:0}return GetXMirror});define("modus/parsers/funcs/orient2/get-orient",["modus/parsers/funcs/orient2/get-orient-from-sde","modus/parsers/funcs/orient2/get-orient-from-type","modus/parsers/funcs/orient2/orient-to-angle"],function(GetOrientFromSde,GetOrientFromType,OrientToAngle){function GetOrient(el){var orient={};orient.sde=GetOrientFromSde(el);orient.type=GetOrientFromType(el);var res;if(orient.type===null){res=orient.sde}else{if(orient.sde===null){res=orient.type}else{res=orient.sde}}return res}return GetOrient});define("modus/parsers/funcs/orient2/all",["modus/parsers/funcs/orient2/get-angle-from-sde","modus/parsers/funcs/orient2/get-orient-from-sde","modus/parsers/funcs/orient2/get-orient-from-type","modus/parsers/funcs/orient2/get-x-mirror-from-sde","modus/parsers/funcs/orient2/get-x-mirror-from-type","modus/parsers/funcs/orient2/orient-to-angle","modus/parsers/funcs/orient2/get-x-mirror","modus/parsers/funcs/orient2/get-orient"],function(){var modules=["getAngleFromSde","getOrientFromSde","getOrientFromType","getXMirrorFromSde","getXMirrorFromType","orientToAngle","getXMirror","getOrient"];var funcs={};var i,module;for(i=0;i<modules.length;i++){module=modules[i];funcs[module]=arguments[i]}return funcs});define("modus/parsers/funcs/getter-angle-with-orient",["modus/parsers/funcs/orient2/all"],function(Orient2){function GetterAngle(el){var angle=(-Orient2.getAngleFromSde(el)||0)+Orient2.orientToAngle(Orient2.getOrient(el));return SLDiagram.Utils.simplifyDegreeAngle(angle)}return GetterAngle});define("modus/parsers/funcs/parse-angle-with-orient",["modus/parsers/funcs/getter-angle-with-orient"],function(GetterAngle){function ParseAngle(el){var angle=GetterAngle(el);if(angle===null){return false}else{el.setConfigProperty("figure/rotate",angle);return true}}return ParseAngle});define("modus/parsers/funcs/getter-all-points",["modus/parsers/funcs/get-artful-number"],function(GetArtfulNumber){function GetterAllPoints(el){var points=el.sde.getAttribute("points");if(typeof points!=="string"||points.length<=0){return null}points=points.split(",");var res=[];var i,p;var x,y;for(i in points){if(points.hasOwnProperty(i)){p=points[i].split(" ");x=GetArtfulNumber(p[0]);y=GetArtfulNumber(p[1]);if(x===null&&y===null){return null}res.push({x:x*8,y:y*8})}}return res}return GetterAllPoints});define("modus/parsers/funcs/parse-all-points",["modus/parsers/funcs/getter-all-points"],function(GetAllPoints){function ParseAllPoints(el){var points=GetAllPoints(el);if(points===null){return false}if(!el.config.figure){el.config.figure={}}el.config.figure.points=points;return true}return ParseAllPoints});define("modus/parsers/funcs/getter-coords-poly",["modus/parsers/funcs/get-artful-number"],function(GetArtfulNumber){var GetterCoordsPoly=function(el){var points=el.sde.getAttribute("points");var i;var x,y,p;if(typeof points!=="string"||points.length<=0){return null}points=points.split(",");if(points.length<2){return null}var p1=points[0].split(" ");var x1=GetArtfulNumber(p1[0]);if(x1===null){return null}var y1=GetArtfulNumber(p1[1]);if(y1===null){return null}var p2=points[1].split(" ");var x2=GetArtfulNumber(p2[0]);if(x2===null){return null}var y2=GetArtfulNumber(p2[1]);if(y2===null){return null}for(i=0;i<points.length;i++){p=points[i].split(" ");x=GetArtfulNumber(p[0]);if(x!=null){if(x<x1){x1=x}if(x>x2){x2=x}}y=GetArtfulNumber(p[1]);if(y!=null){if(y<y1){y1=y}if(y>y2){y2=y}}}return{x1:x1*8,y1:y1*8,x2:x2*8,y2:y2*8}};return GetterCoordsPoly});define("modus/parsers/funcs/getter-inside-text",["modus/parsers/funcs/getter-coords","modus/parsers/funcs/getter-coords2","modus/parsers/funcs/getter-coords-poly"],function(GetterCoords,GetterCoords2,GetterCoordsPoly){function GetterInsideText(modusEl){var paramText=modusEl.sde.querySelector("ParamText");if(!paramText){return null}var color=paramText.getAttribute("color");if(color==="прозрачный"){return null}var tech=modusEl.sde.querySelector("Tech");if(!tech){return null}var dispName=tech.getAttribute("DispName");if(typeof dispName!=="string"||dispName.length<=0){return null}var res={x:null,y:null,text:dispName};var pos;if(modusEl.config.figure){if(typeof modusEl.config.figure.x==="number"){res.x=modusEl.config.figure.x}if(typeof modusEl.config.figure.y==="number"){res.y=modusEl.config.figure.y}if(res.x===null||res.y===null){pos=GetterCoords(modusEl);if(pos){res.x=pos.x;res.y=pos.y}else{pos=GetterCoordsPoly(modusEl);if(pos){res.x=(pos.x1+pos.x2)/2;res.y=(pos.y1+pos.y2)/2}else{return null}}}}var fPosition=paramText.getAttribute("fPosition")||"TOP";switch(fPosition){case"TOP":res.y-=12;break;case"BOTTOM":res.y+=12;break;case"RIGHT":res.x+=25;break;case"LEFT":res.x-=25;break}return res}return GetterInsideText});define("modus/parsers/funcs/parse-inside-text",["modus/parsers/funcs/getter-inside-text"],function(GetterInsideText){function ParseInsideText(modusEl){var pointText=GetterInsideText(modusEl);if(pointText){modusEl.config.text=pointText;return true}else{return false}}return ParseInsideText});define("modus/parsers/funcs/getter-point-f-make-type",[],function(){function GetterPointFMakeType(modusEl){return modusEl.sde.getAttribute("fMakeType")}return GetterPointFMakeType});define("modus/parsers/funcs/parse-point-f-make-type",["modus/parsers/funcs/getter-point-f-make-type"],function(GetterPointFMakeType){function ParsePointFMakeType(modusEl){var fMakeType=GetterPointFMakeType(modusEl);if(fMakeType===null){return false}var f;if(!modusEl.config.figure){modusEl.config.figure={}}f=modusEl.config.figure;if(fMakeType==="bussed_link"){f.type=1;f.sub=((typeof f.sub==="number")?f.sub:0)+2;return true}else{return false}}return ParsePointFMakeType});define("modus/parsers/funcs/create-figure",[],function(){function CreateFigure(modusEl){if(!modusEl.config.figure){modusEl.config.figure={}}}return CreateFigure});define("modus/parsers/funcs/orient/get-orient-from-sde",[],function(){function GetOrientFromSde(modusEl){return modusEl.sde.getAttribute("orient")}return GetOrientFromSde});define("modus/parsers/funcs/getter-orient",["modus/parsers/funcs/orient/get-orient-from-sde"],function(GetOrientFromSde){function GetterOrient(modusEl){return GetOrientFromSde(modusEl)}return GetterOrient});define("modus/parsers/funcs/getter-mirror",[],function(){function GetterMirror(modusEl){var xMirror=modusEl.sde.getAttribute("xMirror");if(xMirror==="0"){return"y"}else{if(xMirror==="1"){return"x"}else{return null}}}return GetterMirror});define("modus/parsers/funcs/orient/get-orient-from-type",[],function(){function GetOrientFromType(modusEl){return modusEl.type.getAttribute("orient")}return GetOrientFromType});define("modus/parsers/funcs/orient/get-x-mirror-from-sde",[],function(){function GetXMirrorFromSde(modusEl){var mirror=modusEl.sde.getAttribute("xMirror");if(mirror==="0"){return"y"}else{if(mirror==="1"){return"x"}else{return null}}}return GetXMirrorFromSde});define("modus/parsers/funcs/orient/get-x-mirror-from-type",[],function(){function GetXMirrorFromType(modusEl){var mirror=modusEl.type.getAttribute("xMirror");if(mirror==="0"){return"y"}else{if(mirror==="1"){return"x"}else{return null}}}return GetXMirrorFromType});define("modus/parsers/funcs/orient/orient-to-angle",[],function(){function OrientToAngle(orient){var angle;switch(orient){case"NORMAL":angle=180;break;case"VERTDOWN":angle=90;break;case"REVERSED":angle=0;break;case"VERTUP":angle=-90;break;default:angle=0}return angle}return OrientToAngle});define("modus/parsers/funcs/orient/all",["modus/parsers/funcs/orient/get-angle-from-sde","modus/parsers/funcs/orient/get-orient-from-sde","modus/parsers/funcs/orient/get-orient-from-type","modus/parsers/funcs/orient/get-x-mirror-from-sde","modus/parsers/funcs/orient/get-x-mirror-from-type","modus/parsers/funcs/orient/orient-to-angle"],function(){var modules=["getAngleFromSde","getOrientFromSde","getOrientFromType","getXMirrorFromSde","getXMirrorFromType","orientToAngle"];var funcs={};var i,module;for(i=0;i<modules.length;i++){module=modules[i];funcs[module]=arguments[i]}return funcs});define("modus/parsers/funcs/text/parse-text",["modus/parsers/funcs/create-figure"],function(CreateFigure){var ParseText=function(el){var text=el.sde.getAttribute("inText");if(text===null||(typeof text==="string"&&text.length<=0)){return false}text=text.replace(/#x9/g,"\n");CreateFigure(el);el.config.figure.text=text;return true};return ParseText});define("modus/parsers/funcs/text/get-align",[],function(){function GetAlign(modusEl){var paramText=modusEl.sde.querySelector("ParamText");if(!paramText){return null}var alignText=paramText.getAttribute("fAlignText");if(alignText){return alignText}else{return null}}return GetAlign});define("modus/parsers/funcs/text/get-font-color",[],function(){function GetFontColor(modusEl){var fontColor=modusEl.sde.getAttribute("fontColor");if(!fontColor){return null}return fontColor}return GetFontColor});define("modus/parsers/funcs/text/get-font-name",[],function(){function GetFontName(modusEl){var paramText=modusEl.sde.querySelector("ParamText");if(!paramText){return null}var fontFace=paramText.getAttribute("fontFace");if(fontFace){return fontFace}else{return null}}return GetFontName});define("modus/parsers/funcs/text/get-font-size",["modus/parsers/funcs/get-number"],function(GetNumber){function GetFontSize(modusEl){var paramText=modusEl.sde.querySelector("ParamText");if(!paramText){return null}var font=paramText.querySelector("Font");if(!font){return null}var size=GetNumber(font.getAttribute("size"));return size}return GetFontSize});define("modus/parsers/funcs/text/font-size-to-scale",[],function(){function FontSizeToScale(fontSize){var scale=1;var res=Math.log(((fontSize/2*scale)-1)/4)/Math.log(1.5);return SLDiagram.precisionNumber(res,2)}return FontSizeToScale});define("modus/parsers/funcs/text/parse-font-size",["modus/parsers/funcs/text/get-font-size"],function(GetFontSize){function ParseFontSize(modusEl){var size=GetFontSize(modusEl);if(size===null){return false}modusEl.config.figure.fontSize=size;return true}return ParseFontSize});define("modus/parsers/funcs/text/get-font-scale",["modus/parsers/funcs/get-number"],function(GetNumber){function GetFontScale(modusEl){return GetNumber(modusEl.sde.getAttribute("scale"))}return GetFontScale});define("modus/parsers/funcs/text/parse-font-scale",["modus/parsers/funcs/text/get-font-scale"],function(GetFontScale){function ParseFontScale(modusEl){var scale=GetFontScale(modusEl);if(scale===null){return false}modusEl.config.figure.scale=scale;return true}return ParseFontScale});define("modus/parsers/funcs/text/get-font-style",[],function(){function GetFontStyle(modusEl){var paramText=modusEl.sde.querySelector("ParamText");if(!paramText){return null}var fontStyle=paramText.getAttribute("fontStyle");if(!fontStyle){return null}return fontStyle}return GetFontStyle});define("modus/parsers/funcs/text/parse-font-style",["modus/parsers/funcs/text/get-font-style"],function(GetFontStyle){function ParseFontStyle(modusEl){var fontStyle=GetFontStyle(modusEl);if(!fontStyle){return false}var boldRegExp=new RegExp("bold","i");var bold=Boolean(fontStyle.match(boldRegExp));if(bold){modusEl.config.figure.stB=1}return bold}return ParseFontStyle});define("modus/parsers/funcs/text/parse-font-color",["modus/parsers/funcs/text/get-font-color","modus/funcs/to-color"],function(GetFontColor,ToColor){function ParseFontColor(modusEl){var fontColor=ToColor(GetFontColor(modusEl));if(!fontColor){return false}modusEl.config.figure.color=fontColor;return true}return ParseFontColor});define("modus/parsers/funcs/text/parse-align",["modus/parsers/funcs/text/get-align"],function(GetAlign){function ParseAlign(modusEl){var align=GetAlign(modusEl);var regs;if(align!==null){regs={center:new RegExp("center","i"),right:new RegExp("right","i")};if(align.match(regs.center)){align="center"}else{if(align.match(regs.right)){align="right"}else{align="left"}}}else{align="left"}modusEl.config.figure.align=align;return true}return ParseAlign});define("modus/parsers/funcs/text/get-valign",[],function(){function GetVAlign(el){var align=el.sde.getAttribute("alignVert");switch(align){case"1":return"middle";case"2":return"bottom";default:return"top"}}return GetVAlign});define("modus/parsers/funcs/text/parse-valign",["modus/parsers/funcs/text/get-valign"],function(GetVAlign){function ParseVAlign(el){var align=GetVAlign(el);el.config.figure.valign=align;return true}return ParseVAlign});define("modus/parsers/funcs/text/get-scale-text",["modus/parsers/funcs/get-number"],function(GetNumber){function GetScaleText(modusEl){var scaleText=modusEl.sde.getAttribute("scaleText");if(scaleText){return GetNumber(modusEl.sde.getAttribute("scaleText"))}else{return GetNumber(modusEl.type.getAttribute("scaleText"))}}return GetScaleText});define("modus/parsers/funcs/text/parse-scale-text",["modus/parsers/funcs/text/get-scale-text"],function(GetScaleText){function ParseScaleText(modusEl){var scale=GetScaleText(modusEl);if(scale===null){return false}modusEl.config.figure.font=scale;return true}return ParseScaleText});define("modus/parsers/funcs/text/all",["modus/parsers/funcs/text/parse-text","modus/parsers/funcs/text/get-align","modus/parsers/funcs/text/get-font-color","modus/parsers/funcs/text/get-font-name","modus/parsers/funcs/text/get-font-size","modus/parsers/funcs/text/font-size-to-scale","modus/parsers/funcs/text/parse-font-size","modus/parsers/funcs/text/get-font-scale","modus/parsers/funcs/text/parse-font-scale","modus/parsers/funcs/text/get-font-style","modus/parsers/funcs/text/parse-font-style","modus/parsers/funcs/text/parse-font-color","modus/parsers/funcs/text/parse-align","modus/parsers/funcs/text/get-valign","modus/parsers/funcs/text/parse-valign","modus/parsers/funcs/text/get-scale-text","modus/parsers/funcs/text/parse-scale-text"],function(){var funcs={};var modules=["parseText","getAlign","getFontColor","getFontName","getFontSize","fontSizeToScale","parseFontSize","getFontScale","parseFontScale","getFontStyle","parseFontStyle","parseFontColor","parseAlign","getVAlign","parseVAlign","getScaleText","parseScaleText"];var i,module;for(i=0;i<modules.length;i++){module=modules[i];funcs[module]=arguments[i]}return funcs});define("modus/parsers/funcs/getter-bgcolor",["modus/funcs/to-color"],function(ToColor){function GetterBgcolor(modusEl){return ToColor(modusEl.sde.getAttribute("bgColor"))}return GetterBgcolor});define("modus/parsers/funcs/parse-bgcolor",["modus/parsers/funcs/getter-bgcolor"],function(GetterBgcolor){function ParseBgcolor(modusEl){var color=GetterBgcolor(modusEl);if(color!==null){modusEl.config.figure.backColor=color;return true}else{return false}}return ParseBgcolor});define("modus/parsers/funcs/transformer/base",[],function(){var BaseTransformer={};var p=BaseTransformer;p.getWinding=function(){};p.getMirror=function(){};p.getAngle=function(){};p.getWindings=function(){};p.getIsN=function(){};p.TYPE_ID=47;BaseTransformer.define=function(cfg){var NewTrans=Object.create(BaseTransformer);var i;for(i in cfg){if(cfg.hasOwnProperty(i)){NewTrans[i]=cfg[i]}}return NewTrans};return BaseTransformer});define("modus/parsers/funcs/transformer/get-winding-no",[],function(){function GetterWindingNo(modusEl){var value=modusEl.sde.getAttribute("windingNo");var type=typeof value;if(type!=="string"&&type!=="number"){return null}if(isNaN(value)||!isFinite(value)){return null}else{return Number(value)}}return GetterWindingNo});define("types/transformer-helper/conn-directions",["core/transformer/ConnDirections"],function(ConnDirections){return ConnDirections});define("modus/parsers/funcs/transformer/conn-directs",["types/transformer-helper/conn-directions"],function(ConnDirections){return ConnDirections});define("modus/parsers/funcs/transformer/winding-schemes",[],function(){var schemes={delta:2,"ЗВЕЗДА_С_НУЛЕМ":1,wye:1,"default":0};var WindingSchemes={schemes:schemes,getId:function(label){var i;for(i in schemes){if(schemes.hasOwnProperty(i)){if(label===i){return schemes[i]}}}return schemes["default"]}};return WindingSchemes});define("modus/parsers/funcs/transformer/get-auto-transformer",[],function(){function GetterAutoTransformer(modusEl){var tech=modusEl.sde.querySelector("Tech");if(!tech){return false}var mode=tech.getAttribute("mode");if(!mode){return false}var re=new RegExp("@tmAuto@","i");return Boolean(mode.search(re)>=0)}return GetterAutoTransformer});define("modus/parsers/funcs/transformer/get-splitted-transformer",[],function(){function GetterSplittedTransformer(modusEl){var tech=modusEl.sde.querySelector("Tech");if(!tech){return false}var mode=tech.getAttribute("mode");if(!mode){return false}var re=new RegExp("@tmSplitted@","i");return Boolean(mode.search(re)>=0)}return GetterSplittedTransformer});define("modus/parsers/funcs/transformer/get-winding",["modus/parsers/funcs/transformer/get-winding-no","modus/parsers/funcs/transformer/conn-directs","modus/parsers/funcs/transformer/winding-schemes","modus/parsers/funcs/transformer/get-auto-transformer","modus/parsers/funcs/transformer/get-splitted-transformer"],function(GetWindingNo,ConnDirects,WindingSchemes,GetAutoTransformer,GetSplittedTransformer){var versions={"2":{chassis:{"default":{"0":{conn:ConnDirects.RIGHT},"1":{conn:ConnDirects.LEFT}},"1":{"0":{conn:ConnDirects.RIGHT},"1":{conn:ConnDirects.DOWN}},"2":{"0":{conn:ConnDirects.DOWN},"1":{conn:ConnDirects.UP}},"3":{"0":{conn:ConnDirects.DOWN},"1":{conn:ConnDirects.DOWN}}}},"3":{chassis:{"default":{"0":{conn:ConnDirects.UP},"1":{conn:ConnDirects.RIGHT},"2":{conn:ConnDirects.LEFT}},"1":{"0":{conn:ConnDirects.UP},"1":{conn:ConnDirects.RIGHT},"2":{conn:ConnDirects.DOWN}},"2":{"0":{conn:ConnDirects.UP},"1":{conn:ConnDirects.DOWN},"2":{conn:ConnDirects.DOWN}},"3":{"0":{conn:ConnDirects.UP},"1":{conn:ConnDirects.DOWN},"2":{conn:ConnDirects.DOWN}}}}};var autoVersions={"3":versions["2"],"4":versions["3"]};function GetterWinding(modusEl,index){var res={U:"",conn:0,scheme:0};var tech=modusEl.sde.querySelector("Tech");if(!tech){return null}var windings=tech.querySelectorAll("TransformerWinding");if(!windings||typeof windings.length!=="number"||!windings[index]){return null}var winding=windings[index];var u=winding.getAttribute("voltage");u=SLDiagram.Utils.fixVoltageName(u);if(u!==null){res.U=u}res.scheme=WindingSchemes.getId(winding.getAttribute("windingType"));var chassis=modusEl.sde.getAttribute("chassis");var windingNo=GetWindingNo(modusEl);var auto=GetAutoTransformer(modusEl);var splitted=GetSplittedTransformer(modusEl);var allChassis;var conn=null;if(splitted&&(windingNo==3)&&(index>0)){conn=ConnDirects.DOWN}else{if(!auto&&versions[windingNo]){allChassis=versions[windingNo].chassis;switch(chassis){case"1":case"2":case"3":conn=allChassis[chassis][index]["conn"];break;default:conn=allChassis["default"][index]["conn"]}}else{if(auto&&autoVersions[windingNo]){allChassis=autoVersions[windingNo].chassis;index=index-1;if(index<0){index=0}switch(chassis){case"1":case"2":case"3":conn=allChassis[chassis][index]["conn"];break;default:conn=allChassis["default"][index]["conn"]}}}}res.conn=conn;return res}GetterWinding.versions=versions;return GetterWinding});define("modus/parsers/funcs/transformer/get-windings",["modus/parsers/funcs/transformer/get-winding"],function(GetWinding){function GetterWindings(modusEl){var res;var tech=modusEl.sde.querySelector("Tech");if(!tech){return null}var windings=tech.querySelectorAll("TransformerWinding");if(!windings){return null}var i,winding;if(windings&&windings.length>=2){res=[];for(i=0;i<windings.length;i++){winding=GetWinding(modusEl,i);if(winding){res.push(winding)}}if(res.length>0){return res}else{return null}}else{return null}}return GetterWindings});define("modus/parsers/funcs/transformer/get-angle",[],function(){function GetAngle(modusEl){var angle=modusEl.sde.getAttribute("angle");if(["string","number"].indexOf(typeof angle)<0||isNaN(angle)||!isFinite(angle)){angle=0}return -Number(angle)}return GetAngle});define("modus/parsers/funcs/transformer/get-angle-with-orient",["modus/parsers/funcs/transformer/get-angle","modus/parsers/funcs/orient2/orient-to-angle","modus/parsers/funcs/orient2/get-orient"],function(GetAngle,OrientToAngle,GetOrient){function GetAngleWithOrient(modusEl){var angle=GetAngle(modusEl)+OrientToAngle(GetOrient(modusEl));return SLDiagram.Utils.simplifyDegreeAngle(angle)}return GetAngleWithOrient});define("modus/parsers/funcs/transformer/get-x-mirror",["modus/parsers/funcs/orient2/all"],function(Orient2){function GetXMirror(el){return Orient2.getXMirror(el)}return GetXMirror});define("modus/parsers/funcs/transformer/2x",["modus/parsers/funcs/transformer/base","modus/parsers/funcs/transformer/get-winding","modus/parsers/funcs/transformer/get-windings","modus/parsers/funcs/transformer/get-angle-with-orient","modus/parsers/funcs/transformer/get-x-mirror"],function(BaseTransformer,GetWindingBase,GetWindingsBase,GetAngle,GetXMirror){var Transformer2x=BaseTransformer.define({getAngle:function(modusEl){return GetAngle(modusEl)},getMirror:function(modusEl){return GetXMirror(modusEl)},getWinding:function(modusEl,index){return GetWindingBase(modusEl,index)},getWindings:function(modusEl){return GetWindingsBase(modusEl)},getIsN:function(){return false},TYPE_ID:47});return Transformer2x});define("modus/parsers/funcs/transformer/3x",["modus/parsers/funcs/transformer/base","modus/parsers/funcs/transformer/get-winding","modus/parsers/funcs/transformer/get-windings","modus/parsers/funcs/transformer/get-angle-with-orient","modus/parsers/funcs/transformer/get-x-mirror"],function(BaseTransformer,GetWindingBase,GetWindingsBase,GetAngle,GetXMirror){var Transformer3x=BaseTransformer.define({getAngle:function(modusEl){return GetAngle(modusEl)},getMirror:function(modusEl){return GetXMirror(modusEl)},getWinding:function(modusEl,index){return GetWindingBase(modusEl,index)},getWindings:function(modusEl){return GetWindingsBase(modusEl)},getIsN:function(){return false},TYPE_ID:48});return Transformer3x});define("modus/parsers/funcs/transformer/get-auto-transformer-direct",[],function(){function GetAutoTransformerDirect(modusEl){var tech=modusEl.sde.querySelector("Tech");if(!tech){return false}var mode=tech.getAttribute("mode");if(!mode){return false}var re=new RegExp("@tmAutoN@","i");return Boolean(mode.search(re)>=0)}return GetAutoTransformerDirect});define("modus/parsers/funcs/transformer/auto-1x",["modus/parsers/funcs/transformer/2x","modus/parsers/funcs/transformer/get-angle-with-orient","modus/parsers/funcs/transformer/get-auto-transformer-direct","modus/parsers/funcs/transformer/conn-directs","modus/parsers/funcs/transformer/winding-schemes"],function(Transformer2x,GetAngle,GetAutoTransformerDirect,ConnDirects,WindingSchemes){var AutoTransformer1x=Object.create(Transformer2x);AutoTransformer1x.getAngle=function(modusEl){return GetAngle(modusEl)};AutoTransformer1x.getIsN=function(modusEl){return GetAutoTransformerDirect(modusEl)};AutoTransformer1x.getWindings=function(modusEl){var res;var tech=modusEl.sde.querySelector("Tech");if(!tech){return null}var windings=tech.querySelectorAll("TransformerWinding");if(!windings){return null}var i,winding;if(windings&&windings.length>=2){res=[];for(i=0;i<windings.length;i++){winding=this.getWinding(modusEl,i);if(winding){res.push(winding)}}if(res.length>0){return res}else{return null}}else{return null}};AutoTransformer1x.chassisConn={"default":{"0":{conn:null},"1":{conn:ConnDirects.DOWN}},"1":{"0":{conn:null},"1":{conn:ConnDirects.LEFT}}};AutoTransformer1x.getWinding=function(modusEl,index){var res={U:"",conn:0,scheme:0};var tech=modusEl.sde.querySelector("Tech");if(!tech){return null}var windings=tech.querySelectorAll("TransformerWinding");if(!windings||typeof windings.length!=="number"||!windings[index]){return null}var winding=windings[index];var u=winding.getAttribute("voltage");u=SLDiagram.Utils.fixVoltageName(u);if(u!==null){res.U=u}res.scheme=WindingSchemes.getId(winding.getAttribute("windingType"));var chassis;var chassisCfg;var conn;chassis=modusEl.sde.getAttribute("chassis");if(this.chassisConn.hasOwnProperty(chassis)){chassisCfg=this.chassisConn[chassis]}else{chassisCfg=this.chassisConn["default"]}conn=chassisCfg[index].conn;if(typeof conn==="number"){res.conn=conn}return res};AutoTransformer1x.TYPE_ID=3001;return AutoTransformer1x});define("modus/parsers/funcs/transformer/auto-2x",["modus/parsers/funcs/transformer/2x","modus/parsers/funcs/transformer/get-angle-with-orient","modus/parsers/funcs/transformer/get-auto-transformer-direct","modus/parsers/funcs/transformer/conn-directs","modus/parsers/funcs/transformer/winding-schemes"],function(Transformer2x,GetAngle,GetAutoTransformerDirect,ConnDirects,WindingSchemes){var AutoTransformer2x=Object.create(Transformer2x);AutoTransformer2x.getAngle=function(modusEl){return GetAngle(modusEl)};AutoTransformer2x.getIsN=function(modusEl){return GetAutoTransformerDirect(modusEl)};AutoTransformer2x.getWindings=function(modusEl){var res;var tech=modusEl.sde.querySelector("Tech");if(!tech){return null}var windings=tech.querySelectorAll("TransformerWinding");if(!windings){return null}var i,winding;if(windings&&windings.length>=2){res=[];for(i=0;i<windings.length;i++){winding=this.getWinding(modusEl,i);if(winding){res.push(winding)}}if(res.length>0){return res}else{return null}}else{return null}};AutoTransformer2x.chassisVertical={"default":{"0":{conn:null},"1":{conn:ConnDirects.LEFT},"2":{conn:ConnDirects.DOWN}},"1":{"0":{conn:null},"1":{conn:ConnDirects.LEFT},"2":{conn:ConnDirects.LEFT}},"2":{"0":{conn:null},"1":{conn:ConnDirects.LEFT},"2":{conn:ConnDirects.RIGHT}},"4":{"0":{conn:null},"1":{conn:ConnDirects.RIGHT},"2":{conn:ConnDirects.DOWN}},"5":{"0":{conn:null},"1":{conn:ConnDirects.RIGHT},"2":{conn:ConnDirects.LEFT}},"6":{"0":{conn:null},"1":{conn:ConnDirects.RIGHT},"2":{conn:ConnDirects.RIGHT}}};AutoTransformer2x.chassisHorizontal={"default":{"0":{conn:null},"1":{conn:ConnDirects.LEFT},"2":{conn:ConnDirects.DOWN}},"1":{"0":{conn:null},"1":{conn:ConnDirects.DOWN},"2":{conn:ConnDirects.DOWN}}};AutoTransformer2x.getWinding=function(modusEl,index){var res={U:"",conn:0,scheme:0};var tech=modusEl.sde.querySelector("Tech");if(!tech){return null}var windings=tech.querySelectorAll("TransformerWinding");if(!windings||typeof windings.length!=="number"||!windings[index]){return null}var winding=windings[index];var u=winding.getAttribute("voltage");u=SLDiagram.Utils.fixVoltageName(u);if(u!==null){res.U=u}res.scheme=WindingSchemes.getId(winding.getAttribute("windingType"));var chassis;var chassisCfg;var conn;var isVertical=GetAutoTransformerDirect(modusEl);chassis=modusEl.sde.getAttribute("chassis");if(isVertical){if(this.chassisVertical.hasOwnProperty(chassis)){chassisCfg=this.chassisVertical[chassis]}else{chassisCfg=this.chassisVertical["default"]}}else{if(this.chassisHorizontal.hasOwnProperty(chassis)){chassisCfg=this.chassisHorizontal[chassis]}else{chassisCfg=this.chassisHorizontal["default"]}}conn=chassisCfg[index].conn;if(typeof conn==="number"){res.conn=conn}return res};AutoTransformer2x.TYPE_ID=3002;return AutoTransformer2x});define("modus/parsers/funcs/get-tech",[],function(){function GetTech(modusEl){var tech=modusEl.sde.querySelector("Tech");if(!tech){return null}else{return tech}}return GetTech});define("modus/parsers/funcs/transformer/get-transformer-winding-tags",["modus/parsers/funcs/get-tech"],function(GetTech){function GetTransformerWindingTags(modusEl){var tech=GetTech(modusEl);if(!tech){return null}var windings=tech.querySelectorAll("TransformerWinding");if(!windings||typeof windings.length!=="number"||windings.length<=0){return null}else{return windings}}return GetTransformerWindingTags});define("modus/parsers/funcs/transformer/get-transformer-winding-tag",["modus/parsers/funcs/transformer/get-transformer-winding-tags"],function(GetTransformerWindingTags){function GetTransformerWindingTag(modusEl,index){var windings=GetTransformerWindingTags(modusEl);if(!windings||!windings.hasOwnProperty(index)){return null}else{return windings[index]}}return GetTransformerWindingTag});define("modus/parsers/funcs/transformer/auto-3x",["modus/parsers/funcs/transformer/3x","modus/parsers/funcs/transformer/auto-2x","modus/parsers/funcs/transformer/get-angle-with-orient","modus/parsers/funcs/transformer/get-transformer-winding-tag","modus/parsers/funcs/transformer/winding-schemes","modus/parsers/funcs/transformer/conn-directs"],function(Transformer3x,AutoTransformer2x,GetAngle,GetTransformerWindingTag,WindingSchemes,ConnDirects){var AutoTransformer3x=Object.create(Transformer3x);AutoTransformer3x.getIsN=function(modusEl){return false};AutoTransformer3x.getAngle=function(modusEl){return GetAngle(modusEl)};AutoTransformer3x.getWindings=function(modusEl){var res=AutoTransformer2x.getWindings.apply(this,arguments);var winding={};winding.scheme=res[1].scheme;winding.U=res[1].U;res[1].scheme=res[3].scheme;res[1].U=res[3].U;res[3].scheme=winding.scheme;res[3].U=winding.U;return res};AutoTransformer3x.chassis={"default":{"0":{conn:null},"1":{conn:ConnDirects.LEFT},"2":{conn:ConnDirects.RIGHT},"3":{conn:ConnDirects.LEFT}},"1":{"0":{conn:null},"1":{conn:ConnDirects.DOWN},"2":{conn:ConnDirects.RIGHT},"3":{conn:ConnDirects.LEFT}},"2":{"0":{conn:null},"1":{conn:ConnDirects.LEFT},"2":{conn:ConnDirects.DOWN},"3":{conn:ConnDirects.LEFT}},"3":{"0":{conn:null},"1":{conn:ConnDirects.DOWN},"2":{conn:ConnDirects.DOWN},"3":{conn:ConnDirects.LEFT}},"4":{"0":{conn:null},"1":{conn:ConnDirects.LEFT},"2":{conn:ConnDirects.RIGHT},"3":{conn:ConnDirects.RIGHT}},"5":{"0":{conn:null},"1":{conn:ConnDirects.DOWN},"2":{conn:ConnDirects.RIGHT},"3":{conn:ConnDirects.RIGHT}},"6":{"0":{conn:null},"1":{conn:ConnDirects.LEFT},"2":{conn:ConnDirects.DOWN},"3":{conn:ConnDirects.RIGHT}},"7":{"0":{conn:null},"1":{conn:ConnDirects.DOWN},"2":{conn:ConnDirects.DOWN},"3":{conn:ConnDirects.RIGHT}}};AutoTransformer3x.getWinding=function(modusEl,index){var res={U:"",conn:0,scheme:0};var winding=GetTransformerWindingTag(modusEl,index);if(!winding){return null}var u=winding.getAttribute("voltage");u=SLDiagram.Utils.fixVoltageName(u);if(u!==null){res.U=u}res.scheme=WindingSchemes.getId(winding.getAttribute("windingType"));var chassis=modusEl.sde.getAttribute("chassis");var chassisCfg;if(this.chassis.hasOwnProperty(chassis)){chassisCfg=this.chassis[chassis]}else{chassisCfg=this.chassis["default"]}var conn=chassisCfg[index].conn;if(typeof conn==="number"){res.conn=conn}return res};AutoTransformer3x.TYPE_ID=3003;return AutoTransformer3x});define("modus/parsers/funcs/transformer/get-transformer-small-size",[],function(){function GetterTransformerSmallSize(modusEl){var tech=modusEl.sde.querySelector("Tech");var mode=tech.getAttribute("mode");return Boolean(mode)}return GetterTransformerSmallSize});define("modus/parsers/funcs/transformer/parse-transformer-small-size",["modus/parsers/funcs/transformer/get-transformer-small-size","modus/parsers/funcs/transformer/get-splitted-transformer"],function(GetTransformerSmallSize,GetSplittedTransformer){function ParseTransformerSmallSize(modusEl){var sn=GetTransformerSmallSize(modusEl);var splitted=GetSplittedTransformer(modusEl);if(!modusEl.config.figure){modusEl.config.figure={}}if(splitted==1){modusEl.config.figure.sn=0}else{modusEl.config.figure.sn=((sn)?1:0)}return true}return ParseTransformerSmallSize});define("modus/parsers/funcs/transformer/parse-winding-no",["modus/parsers/funcs/transformer/get-winding-no"],function(GetWindingNo){function ParseWindingNo(modusEl){var value=GetWindingNo(modusEl);if(value!==null){if(!modusEl.config.figure){modusEl.config.figure={}}modusEl.config.figure.windingsCount=value;return true}else{return false}}return ParseWindingNo});define("modus/parsers/funcs/transformer/parse-windings",["modus/parsers/funcs/transformer/get-windings"],function(GetWindings){function ParseWindings(modusEl){var windings=GetWindings(modusEl);var i;if(windings){if(!modusEl.config.figure){modusEl.config.figure={}}modusEl.config.figure.windings={};for(i=0;i<windings.length;i++){modusEl.config.figure.windings[i]=windings[i]}return true}else{return false}}return ParseWindings});define("modus/parsers/funcs/transformer/parse-splitted-transformer",["modus/parsers/funcs/transformer/get-splitted-transformer"],function(GetSplittedTransformer){function ParseSplittedTransformer(modusEl){var sn=GetSplittedTransformer(modusEl);if(!modusEl.config.figure){modusEl.config.figure={}}modusEl.config.figure.splitted=((splitted)?1:0);return true}return ParseSplittedTransformer});define("modus/parsers/funcs/transformer/get-sn-transformer",[],function(){function GetterSnTransformer(modusEl){var tech=modusEl.sde.querySelector("Tech");if(!tech){return false}var mode=tech.getAttribute("mode");if(!mode){return false}var re=new RegExp("@tmSN@","i");return Boolean(mode.search(re)>=0)}return GetterSnTransformer});define("modus/parsers/funcs/transformer/all",["modus/parsers/funcs/transformer/2x","modus/parsers/funcs/transformer/3x","modus/parsers/funcs/transformer/auto-1x","modus/parsers/funcs/transformer/auto-2x","modus/parsers/funcs/transformer/auto-3x","modus/parsers/funcs/transformer/base","modus/parsers/funcs/transformer/get-auto-transformer","modus/parsers/funcs/transformer/get-transformer-small-size","modus/parsers/funcs/transformer/parse-transformer-small-size","modus/parsers/funcs/transformer/conn-directs","modus/parsers/funcs/transformer/winding-schemes","modus/parsers/funcs/transformer/get-winding-no","modus/parsers/funcs/transformer/get-winding","modus/parsers/funcs/transformer/parse-winding-no","modus/parsers/funcs/transformer/get-windings","modus/parsers/funcs/transformer/parse-windings","modus/parsers/funcs/transformer/get-angle","modus/parsers/funcs/transformer/get-auto-transformer-direct","modus/parsers/funcs/transformer/get-transformer-winding-tags","modus/parsers/funcs/transformer/get-transformer-winding-tag","modus/parsers/funcs/transformer/get-x-mirror","modus/parsers/funcs/transformer/get-angle-with-orient","modus/parsers/funcs/transformer/get-splitted-transformer","modus/parsers/funcs/transformer/parse-splitted-transformer","modus/parsers/funcs/transformer/get-sn-transformer"],function(){var funcs={};var modules=["2x","3x","Auto1x","Auto2x","Auto3x","Base","getAutoTransformer","getTransformerSmallSize","parseTransformerSmallSize","ConnDirects","WindingSchemes","getWindingNo","getWinding","parseWindingNo","getWindings","parseWindings","getAngle","getAutoTransformerDirect","getTransformerWindingTags","getTransformerWindingTag","getXMirror","getAngleWithOrient","getSplittedTransformer","parseSplittedTransformer","getSnTransformer"];var i,module;for(i=0;i<modules.length;i++){module=modules[i];funcs[module]=arguments[i]}return funcs});define("modus/parsers/funcs/get-reactor-double",["modus/parsers/funcs/get-number"],function(GetNumber){function GetReactorDouble(modusEl){var value=GetNumber(modusEl.sde.getAttribute("double"));return Boolean(value!==null&&value>0)}return GetReactorDouble});define("modus/parsers/funcs/get-line-style-color",["modus/funcs/to-color"],function(ToColor){function GetLineStyleColor(modusEl){var lineStyle=modusEl.sde.querySelector("LineStyle");if(!lineStyle){return null}return ToColor(lineStyle.getAttribute("color"))}return GetLineStyleColor});define("modus/parsers/funcs/get-flow-direction",[],function(){function GetFlowDirection(modusEl){return modusEl.sde.getAttribute("flowDirection")}return GetFlowDirection});define("modus/parsers/funcs/getter-state",[],function(){function GetterState(modusEl){var closed_sde=modusEl.sde.getAttribute("closed");if(closed_sde===null){var tech=modusEl.sde.querySelector("Tech");if(!tech){return true}var closed=tech.getAttribute("closed");if(closed=="0"){return false}else{return true}}else{if(closed_sde=="0"){return false}else{return true}}}return GetterState});define("modus/parsers/funcs/parse-state",["modus/parsers/funcs/getter-state"],function(GetState){function ParseState(modusEl){modusEl.config.figure.state=GetState(modusEl);return true}return ParseState});define("modus/parsers/funcs/getter-pull-state",[],function(){function GetterPullState(modusEl){var tech=modusEl.sde.querySelector("Tech");if(!tech){return true}var trolley=tech.querySelector("Trolley");if(!trolley){return true}var state=trolley.getAttribute("fTrolleyState");if(state==="Service"){return false}else{return true}}return GetterPullState});define("modus/parsers/funcs/parse-pull-state",["modus/parsers/funcs/getter-pull-state"],function(GetPullState){function ParsePullState(modusEl){var TYPE_ID_CHASSIS_MAIN_SOURCE=1111;if(modusEl.typeId===TYPE_ID_CHASSIS_MAIN_SOURCE){modusEl.config.figure.state=GetPullState(modusEl)}else{modusEl.config.figure.pullState=GetPullState(modusEl)}return true}return ParsePullState});define("modus/parsers/funcs/getter-object-type",[],function(){function GetterObjectType(el){var objectType=el.type.getAttribute("ObjectType");if(typeof objectType==="string"&&objectType.length>0){return objectType}else{return null}}return GetterObjectType});define("modus/parsers/funcs/getter-disch-typ",[],function(){function GetterDischTyp(el){var dischTyp=el.sde.getAttribute("dischTyp");if(typeof dischTyp==="string"&&dischTyp.length>0){return dischTyp}else{return null}}return GetterDischTyp});define("modus/parsers/funcs/getter-x-mirror",["modus/parsers/funcs/orient2/all"],function(Orient2){function GetterXMirror(el){var fromType=Orient2.getXMirrorFromType(el);var fromSde=Orient2.getXMirrorFromSde(el);if(fromType===null){return fromSde}else{if(fromSde===null){return fromType}else{return fromSde}}}return GetterXMirror});define("modus/parsers/funcs/parse-x-mirror",["modus/parsers/funcs/getter-x-mirror"],function(GetterXMirror){function ParseXMirror(el){var mirror;mirror=GetterXMirror(el);if(mirror){el.config.figure.xMirror=mirror;return true}else{return false}}return ParseXMirror});define("modus/parsers/funcs/getter-scale",["modus/parsers/funcs/get-number"],function(GetNumber){function GetterScale(el){var scale={};scale.sde=GetNumber(el.sde.getAttribute("scale"));scale.type=GetNumber(el.type.getAttribute("scale"));var res;if(scale.type===null){res=scale.sde}else{if(scale.sde===null){res=scale.type}else{res=scale.sde}}return res||null}return GetterScale});define("modus/parsers/funcs/parse-scale",["modus/parsers/funcs/getter-scale"],function(GetterScale){function ParseScale(el){var scale=GetterScale(el)||0;el.config.figure.scale=Math.pow(2,scale/2);return true}return ParseScale});define("modus/parsers/funcs/lamp/get-off-color",["modus/funcs/to-color"],function(ToColor){function GetOffColor(el){var value=el.sde.getAttribute("colorOff");return ToColor(value)}return GetOffColor});define("modus/parsers/funcs/lamp/get-on-color",["modus/funcs/to-color"],function(ToColor){function GetOnColor(el){var value=el.sde.getAttribute("colorOn");return ToColor(value)}return GetOnColor});define("modus/parsers/funcs/lamp/parse-off-color",["modus/parsers/funcs/lamp/get-off-color"],function(GetOffColor){function ParseOffColor(el){var color=GetOffColor(el);if(color!==null){el.config.figure.offColor=color;return true}else{return false}}return ParseOffColor});define("modus/parsers/funcs/lamp/parse-on-color",["modus/parsers/funcs/lamp/get-on-color"],function(GetOnColor){function ParseOnColor(el){var color=GetOnColor(el);if(color!==null){el.config.figure.uColor=color;return true}else{return false}}return ParseOnColor});define("modus/parsers/funcs/lamp/all",["modus/parsers/funcs/lamp/get-off-color","modus/parsers/funcs/lamp/get-on-color","modus/parsers/funcs/lamp/parse-off-color","modus/parsers/funcs/lamp/parse-on-color"],function(){return{getOffColor:arguments[0],getOnColor:arguments[1],parseOffColor:arguments[2],parseOnColor:arguments[3]}});define("modus/parsers/funcs/getter-dashed",["modus/parsers/funcs/get-number"],function(GetNumber){function GetterDashed(el){var tech=el.sde.querySelector("Tech");if(!tech){return false}var alive=GetNumber(tech.getAttribute("alive")||"1");return Boolean(alive===null||alive===0)}return GetterDashed});define("modus/parsers/funcs/parse-dashed",["modus/parsers/funcs/getter-dashed","lodash-set"],function(GetterDashed,Set){function ParseDashed(el){Set(el,"config.figure.dashed",GetterDashed(el));return true}return ParseDashed});define("modus/parsers/funcs/getter-razriadnik-type",[],function(){var getRazriadnikType=function(modusEl){var tech=modusEl.sde.querySelector("Tech");if(tech===null){return null}var value=tech.getAttribute("fRazriadnikType");if(typeof value==="string"&&value.length>0){return value}else{return null}};return getRazriadnikType});define("modus/parsers/funcs/parse-coords-poly",["modus/parsers/funcs/getter-coords-poly"],function(GetCoordsPoly){var ParseCoordsPoly=function(el){var coords=GetCoordsPoly(el);if(coords===null){return false}else{el.setConfigProperty("figure/x1",coords.x1);el.setConfigProperty("figure/y1",coords.y1);el.setConfigProperty("figure/x2",coords.x2);el.setConfigProperty("figure/y2",coords.y2);return true}};return ParseCoordsPoly});define("modus/parsers/funcs/getter-accuracy",[],function(){function GetterAccuracy(modusEl){return modusEl.sde.getAttribute("accuracy")}return GetterAccuracy});define("modus/parsers/funcs/parse-accuracy",["modus/parsers/funcs/getter-accuracy"],function(GetterAccuracy){function ParseAccuracy(modusEl){var accuracy=GetterAccuracy(modusEl);if(accuracy!=null){modusEl.config.figure.countDigits=accuracy;return true}else{modusEl.config.figure.countDigits=0;return true}}return ParseAccuracy});define("modus/parsers/funcs/getter-dvigatel-typ",[],function(){function GetterDvigatelTyp(el){var tech=el.sde.querySelector("Tech");if(!tech){return null}var dvigTyp=tech.getAttribute("fDvigatelType");if(typeof dvigTyp==="string"&&dvigTyp.length>0){return dvigTyp}else{return null}}return GetterDvigatelTyp});define("modus/parsers/funcs/get-color-from-type",["modus/funcs/to-color"],function(ToColor){function GetColorFromType(modusEl){var color=modusEl.type.getAttribute("color");if(color){return ToColor(modusEl.type.getAttribute("color"))}else{return null}}return GetColorFromType});define("modus/parsers/funcs/getter-size",["modus/parsers/funcs/get-number"],function(GetNumber){function GetterSize(el){var size=GetNumber(el.sde.getAttribute("size"));return size}return GetterSize});define("modus/parsers/funcs/get-line-style-width",["modus/parsers/funcs/get-number"],function(GetNumber){function GetLineStyleWidth(el){var lineStyle=el.sde.querySelector("LineStyle");if(!lineStyle){return null}return GetNumber(lineStyle.getAttribute("width"))}return GetLineStyleWidth});define("modus/parsers/funcs/all",["modus/parsers/funcs/getter-coords","modus/parsers/funcs/getter-coords2","modus/parsers/funcs/getter-element-id","modus/parsers/funcs/getter-type-id","modus/parsers/funcs/getter-voltage","modus/parsers/funcs/parse-coords","modus/parsers/funcs/parse-coords2","modus/parsers/funcs/parse-element-id-boolean","modus/parsers/funcs/parse-element-id-number","modus/parsers/funcs/parse-voltage","modus/parsers/funcs/get-artful-number","modus/parsers/funcs/getter-angle","modus/parsers/funcs/parse-angle","modus/parsers/funcs/getter-angle-with-orient","modus/parsers/funcs/parse-angle-with-orient","modus/parsers/funcs/getter-all-points","modus/parsers/funcs/parse-all-points","modus/parsers/funcs/getter-inside-text","modus/parsers/funcs/parse-inside-text","modus/parsers/funcs/getter-point-f-make-type","modus/parsers/funcs/parse-point-f-make-type","modus/parsers/funcs/create-figure","modus/parsers/funcs/getter-orient","modus/parsers/funcs/getter-mirror","modus/parsers/funcs/get-number","modus/parsers/funcs/orient/all","modus/parsers/funcs/orient2/all","modus/parsers/funcs/text/all","modus/parsers/funcs/getter-bgcolor","modus/parsers/funcs/parse-bgcolor","modus/parsers/funcs/transformer/all","modus/parsers/funcs/get-tech","modus/parsers/funcs/get-reactor-double","modus/parsers/funcs/get-line-style-color","modus/parsers/funcs/get-flow-direction","modus/parsers/funcs/getter-state","modus/parsers/funcs/parse-state","modus/parsers/funcs/getter-pull-state","modus/parsers/funcs/parse-pull-state","modus/parsers/funcs/getter-object-type","modus/parsers/funcs/getter-disch-typ","modus/parsers/funcs/getter-x-mirror","modus/parsers/funcs/parse-x-mirror","modus/parsers/funcs/getter-scale","modus/parsers/funcs/parse-scale","modus/parsers/funcs/lamp/all","modus/parsers/funcs/getter-dashed","modus/parsers/funcs/parse-dashed","modus/parsers/funcs/getter-razriadnik-type","modus/parsers/funcs/getter-coords-poly","modus/parsers/funcs/parse-coords-poly","modus/parsers/funcs/getter-accuracy","modus/parsers/funcs/parse-accuracy","modus/parsers/funcs/getter-dvigatel-typ","modus/parsers/funcs/get-color-from-type","modus/parsers/funcs/getter-size","modus/parsers/funcs/get-line-style-width"],function(){var modules=["getCoords","getCoords2","getElementId","getTypeId","getVoltage","parseCoords","parseCoords2","parseElementIdBoolean","parseElementIdNumber","parseVoltage","getArtfulNumber","getAngle","parseAngle","getAngleWithOrient","parseAngleWithOrient","getAllPoints","parseAllPoints","getInsideText","parseInsideText","getPointFMakeType","parsePointFMakeType","createFigure","getOrient","getMirror","getNumber","Orient","Orient2","Text","getBgcolor","parseBgcolor","Transformer","getTech","getReactorDouble","getLineStyleColor","getFlowDirection","getState","parseState","getPullState","parsePullState","getObjectType","getDischTyp","getXMirror","parseXMirror","getScale","parseScale","Lamp","getDashed","parseDashed","getRazriadnikType","getCoordsPoly","parseCoordsPoly","getAccuracy","parseAccuracy","getDvigatelTyp","getColorFromType","getSize","getLineStyleWidth"];var funcs={};var i,module;for(i=0;i<modules.length;i++){module=modules[i];funcs[module]=arguments[i]}return funcs});define("modus/parsers/breaker164",["modus/Parser","modus/parsers/funcs/all"],function(){var Parser=arguments[0];var Funcs=arguments[1];var GetterTypeId=Funcs.getTypeId;var Breaker164=function(){this.init.apply(this,arguments)};Breaker164.prototype=Object.create(Parser.prototype);var p=Breaker164.prototype;p.parse=function(el){if(GetterTypeId(el)!==164){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(164);Funcs.parseVoltage(el);Funcs.parseElementIdBoolean(el);Funcs.parseAngleWithOrient(el);Funcs.parseState(el);Funcs.parseInsideText(el);return true};return Breaker164});define("modus/parsers/breaker162",["modus/Parser","modus/parsers/funcs/all"],function(){var Parser=arguments[0];var Funcs=arguments[1];var Breaker162=function(){this.init.apply(this,arguments)};Breaker162.prototype=Object.create(Parser.prototype);var p=Breaker162.prototype;p.parse=function(el){if(Funcs.getTypeId(el)!==162){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(162);Funcs.parseVoltage(el);Funcs.parseElementIdBoolean(el);Funcs.parseAngleWithOrient(el);Funcs.parseState(el);Funcs.parseScale(el);Funcs.parseInsideText(el);return true};return Breaker162});define("modus/parsers/digital-device",["modus/Parser","modus/parsers/funcs/all"],function(){var Parser=arguments[0];var Funcs=arguments[1];var DigitalDevice=function(){this.init.apply(this,arguments)};DigitalDevice.prototype=Object.create(Parser.prototype);var p=DigitalDevice.prototype;p.parse=function(el){var TYPE_ID=134;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords2(el)){return false}if(Funcs.getFlowDirection(el)!==null){return false}el.setTypeId(TYPE_ID);Funcs.parseElementIdNumber(el);Funcs.parseInsideText(el);Funcs.Text.parseScaleText(el);Funcs.parseAccuracy(el);if(el.config.figure.font>36){el.config.figure.font=36}if(el.config.figure.font<6){el.config.figure.font=6}SLDiagram.Utils.set(el,"config.figure.align","right");return true};return DigitalDevice});define("modus/parsers/text",["modus/Parser","modus/parsers/funcs/all"],function(){var Parser=arguments[0];var Funcs=arguments[1];var Text=function(){this.init.apply(this,arguments)};Text.prototype=Object.create(Parser.prototype);var p=Text.prototype;p.parse=function(el){var TYPE_ID=5;var typeId=Funcs.getTypeId(el);if(typeId!==TYPE_ID){return false}if(!Funcs.Text.parseText(el)){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.Text.parseFontScale(el);Funcs.Text.parseFontSize(el);Funcs.Text.parseFontStyle(el);Funcs.Text.parseFontColor(el);Funcs.Text.parseAlign(el);Funcs.parseAngleWithOrient(el);Funcs.Text.parseVAlign(el);return true};return Text});define("modus/parsers/busway",["modus/Parser","modus/parsers/funcs/all"],function(){var Parser=arguments[0];var Funcs=arguments[1];var Busway=function(){this.init.apply(this,arguments)};Busway.prototype=Object.create(Parser.prototype);var p=Busway.prototype;p.parse=function(el){var TYPE_ID=21;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseAllPoints(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseInsideText(el);Funcs.parseDashed(el);return true};return Busway});define("modus/parsers/overhead-line",["modus/Parser","modus/parsers/funcs/all"],function(){var Parser=arguments[0];var Funcs=arguments[1];var OverheadLine=function(){this.init.apply(this,arguments)};OverheadLine.prototype=Object.create(Parser.prototype);var p=OverheadLine.prototype;p.parse=function(el){var TYPE_ID=22;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseAllPoints(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseInsideText(el);Funcs.parseDashed(el);return true};return OverheadLine});define("modus/parsers/dashed-line",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var DashedLine=Parser.define({parse:function(el){var TYPE_ID=23;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseAllPoints(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseInsideText(el);return true}});return DashedLine});define("modus/parsers/arrow-line",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var ArrowLine=Parser.define({parse:function(el){var TYPE_ID=28;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseAllPoints(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseInsideText(el);return true}});return ArrowLine});define("modus/parsers/ground-breaker",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var GroundBreaker=Parser.define({parse:function(el){var TYPE_ID=54;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.createFigure(el);var O=Funcs.Orient;var angle=(O.getAngleFromSde(el)||0);var orient=O.getOrientFromSde(el);if(!orient){orient=O.getOrientFromType(el)}orient=O.orientToAngle(orient);angle=-angle-orient;el.config.figure.rotate=angle;Funcs.parseVoltage(el);Funcs.parseElementIdBoolean(el);Funcs.parseState(el);Funcs.parseInsideText(el);return true}});return GroundBreaker});define("modus/parsers/point",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Point=Parser.define({parse:function(el){var TYPE_ID=7;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseInsideText(el);Funcs.parsePointFMakeType(el);return true}});return Point});define("modus/parsers/bus",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Bus=Parser.define({parse:function(el){var TYPE_ID=24;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseAllPoints(el)){return false}el.setTypeId(TYPE_ID);var lineWidth=Funcs.getLineStyleWidth(el);if(lineWidth){el.setConfigProperty("figure/weight",lineWidth)}Funcs.parseVoltage(el);Funcs.parseInsideText(el);Funcs.parseDashed(el);return true}});return Bus});define("modus/parsers/switcher43",["modus/Parser","modus/parsers/funcs/all"],function(Parser,F){var Switcher43=Parser.define({parse:function(el){var TYPE_ID=43;if(F.getTypeId(el)!==TYPE_ID){return false}if(!F.parseCoords(el)){return false}el.setTypeId(TYPE_ID);var angle=F.getAngleWithOrient(el);var xMirror=F.Orient2.getXMirror(el);if(xMirror>0){angle+=180}el.config.figure.rotate=SLDiagram.Utils.simplifyDegreeAngle(angle);F.parseVoltage(el);F.parseElementIdBoolean(el);F.parseState(el);F.parsePullState(el);F.parseScale(el);F.parseInsideText(el);return true}});return Switcher43});define("modus/parsers/ground-breaker-398",["modus/Parser","modus/parsers/funcs/all"],function(Parser,F){var GroundBreaker398=Parser.define({parse:function(el){var TYPE_ID=398;if(F.getTypeId(el)!==TYPE_ID){return false}if(!F.parseCoords(el)){return false}el.setTypeId(54);F.parseVoltage(el);var angle=F.getAngleWithOrient(el);if(angle===null){angle=0}angle+=90;el.setConfigProperty("figure/rotate",angle);F.parseElementIdBoolean(el);F.parseInsideText(el);return true}});return GroundBreaker398});define("modus/parsers/varistor",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Varistor=Parser.define({parse:function(el){var MODUS_TYPE_ID=168;var OPN_TYPE_ID=168;var RVP_TYPE_ID=1103;var RT_TYPE_ID=1108;if(Funcs.getTypeId(el)!==MODUS_TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}var dischTyp=Funcs.getDischTyp(el);if(dischTyp==="voltage_suppressor1"){el.setTypeId(OPN_TYPE_ID)}else{if(dischTyp==="pipe_discharger"){el.setTypeId(RT_TYPE_ID)}else{el.setTypeId(RVP_TYPE_ID)}}Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseXMirror(el);Funcs.parseInsideText(el);return true}});return Varistor});define("modus/parsers/fuse154",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Fuse154=Parser.define({parse:function(el){var TYPE_ID=154;var typeId=Funcs.getTypeId(el);if(typeId!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseElementIdBoolean(el);Funcs.parsePullState(el);Funcs.parseInsideText(el);return true}});return Fuse154});define("modus/parsers/fuse203",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Fuse203=Parser.define({parse:function(el){var TYPE_ID=203;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseInsideText(el);return true}});return Fuse203});define("modus/parsers/type52",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Type52=Parser.define({parse:function(el){var TYPE_ID=52;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);var angle=Funcs.getAngleWithOrient(el)||0;el.setConfigProperty("figure/rotate",angle);Funcs.parseInsideText(el);return true}});return Type52});define("modus/parsers/chassis",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Chassis=Parser.define({parse:function(el){var TYPE_ID=51;var TYPE_ID_CHASSIS_MAIN_SOURCE=1111;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID_CHASSIS_MAIN_SOURCE);Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseElementIdBoolean(el);Funcs.parsePullState(el);Funcs.parseInsideText(el);Funcs.parseXMirror(el);return true}});return Chassis});define("modus/parsers/ground",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Ground=Parser.define({parse:function(el){var TYPE_ID=31;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.createFigure(el);Funcs.parseVoltage(el);Funcs.parseInsideText(el);Funcs.parseAngleWithOrient(el);return true}});return Ground});define("modus/parsers/spark-gap",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var SparkGap=Parser.define({parse:function(el){var TYPE_ID=35;var ARRESTER_VALVE_TYPE=1110;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}var RazriadnikTyp=Funcs.getRazriadnikType(el);if(RazriadnikTyp==="ValveTypeArrester"){el.setTypeId(ARRESTER_VALVE_TYPE)}else{el.setTypeId(TYPE_ID)}Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseInsideText(el);return true}});return SparkGap});define("modus/parsers/transformer",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Transformer=Parser.define({parse:function(el){var TYPE_ID=47;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}var wc=el.config.figure.windingsCount=Funcs.Transformer.getWindingNo(el);var auto=Funcs.Transformer.getAutoTransformer(el);var sn=Funcs.Transformer.getSnTransformer(el);var TrFuncs;if(auto){if(wc===2){TrFuncs=Funcs.Transformer.Auto1x}else{if(wc===3){TrFuncs=Funcs.Transformer.Auto2x}else{if(wc===4){TrFuncs=Funcs.Transformer.Auto3x}else{return false}}}}else{if(wc===2){TrFuncs=Funcs.Transformer["2x"]}else{if(wc===3){TrFuncs=Funcs.Transformer["3x"]}else{return false}}}el.setTypeId(TrFuncs.TYPE_ID);Funcs.createFigure(el);var f=el.config.figure;f.auto=auto;f.rotate=TrFuncs.getAngle(el);f.windings=TrFuncs.getWindings(el);var mirror=TrFuncs.getMirror(el);if(mirror>0){f.xMirror=mirror}f.isN=TrFuncs.getIsN(el);var size=Funcs.getSize(el);if(((size===null)&&(sn===false))||(size>17)){el.config.figure.sn=0}else{el.config.figure.sn=1}Funcs.parseInsideText(el);Funcs.Transformer.parseSplittedTransformer;return true}});return Transformer});define("modus/parsers/coupling",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Coupling=Parser.define({parse:function(modusEl){var TYPE_ID=32;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);return true}});return Coupling});define("modus/parsers/breaker399",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Breaker399=Parser.define({parse:function(modusEl){var ORIG_TYPE_ID=399;var NEW_TYPE_ID=164;if(Funcs.getTypeId(modusEl)!==ORIG_TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(NEW_TYPE_ID);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseElementIdBoolean(modusEl);Funcs.parseState(modusEl);Funcs.parseScale(modusEl);Funcs.parseInsideText(modusEl);return true}});return Breaker399});define("modus/parsers/wire-round",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var WireRound=Parser.define({parse:function(modusEl){var TYPE_ID=14;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);var angle=Funcs.getAngleWithOrient(modusEl);modusEl.config.figure.rotate=angle;Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);Funcs.parseScale(modusEl);return true}});return WireRound});define("modus/parsers/motor",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Motor=Parser.define({parse:function(modusEl){var TYPE_ID=39;var TYPE_ID_ASYNC=39;var TYPE_ID_DIRECT=1112;var TYPE_ID_MOTOR=1113;var TYPE_ID_SYNC=1114;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}var dvigTyp=Funcs.getDvigatelTyp(modusEl);if(dvigTyp==="asynchronous_motor"){modusEl.setTypeId(TYPE_ID_ASYNC)}else{if(dvigTyp==="synchronous_motor"){modusEl.setTypeId(TYPE_ID_SYNC)}else{if(dvigTyp==="motor"){modusEl.setTypeId(TYPE_ID_MOTOR)}else{modusEl.setTypeId(TYPE_ID_DIRECT)}}}Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);Funcs.parseAngleWithOrient(modusEl);return true}});return Motor});define("modus/parsers/capacitor",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Capacitor=Parser.define({parse:function(modusEl){var TYPE_ID=388;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);return true}});return Capacitor});define("modus/parsers/inductor",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Inductor=Parser.define({parse:function(modusEl){var TYPE_ID=33;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);Funcs.parseXMirror(modusEl);Funcs.parseAngleWithOrient(modusEl);return true}});return Inductor});define("modus/parsers/fill-rect",["modus/Parser","modus/parsers/funcs/all","modus/funcs/get-root","modus/funcs/to-color"],function(Parser,Funcs,GetRoot,ToColor){var FillRect=Parser.define({getPageColor:function(modusEl){var doc=GetRoot(modusEl.type);var page=doc.querySelector("Page");return ToColor(page.getAttribute("color"))},parse:function(modusEl){var TYPE_ID=3;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords2(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseInsideText(modusEl);var bgColor=Funcs.getBgcolor(modusEl)||this.getPageColor(modusEl);if(bgColor){modusEl.config.figure.backColor=bgColor}else{modusEl.config.figure.backColor=""}var lineColor=Funcs.getLineStyleColor(modusEl);if(lineColor){modusEl.config.figure.color=lineColor}else{var lineColorFromType=Funcs.getColorFromType(modusEl);if(lineColorFromType){modusEl.config.figure.color=lineColorFromType}}return true}});return FillRect});define("modus/parsers/switcher41",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Switcher41=Parser.define({parse:function(modusEl){var TYPE_ID=41;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseElementIdBoolean(modusEl);Funcs.parseState(modusEl);Funcs.parseScale(modusEl);Funcs.parseInsideText(modusEl);return true}});return Switcher41});define("modus/parsers/transformer-i",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var TransformerI=Parser.define({parse:function(modusEl){var TYPE_ID=34;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);return true}});return TransformerI});define("modus/parsers/breaker49",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Breaker49=Parser.define({parse:function(modusEl){var TYPE_ID=49;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseXMirror(modusEl);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseElementIdBoolean(modusEl);Funcs.parseState(modusEl);Funcs.parsePullState(modusEl);Funcs.parseInsideText(modusEl);return true}});return Breaker49});define("modus/parsers/electricity-pylon",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var ElectricityPylon=Parser.define({parse:function(modusEl){var ORIG_TYPE_ID=146;var NEW_TYPE_ID=1101;if(Funcs.getTypeId(modusEl)!==ORIG_TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(NEW_TYPE_ID);Funcs.parseVoltage(modusEl);Funcs.parseAngle(modusEl);Funcs.parseInsideText(modusEl);return true}});return ElectricityPylon});define("modus/parsers/switcher-v",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var SwitcherV=Parser.define({parse:function(modusEl){var TYPE_ID=42;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseElementIdBoolean(modusEl);Funcs.parseState(modusEl);Funcs.parseInsideText(modusEl);return true}});return SwitcherV});define("modus/parsers/breaker50",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Breaker50=Parser.define({parse:function(modusEl){var TYPE_ID=50;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseAngle(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseElementIdBoolean(modusEl);Funcs.parseState(modusEl);Funcs.parsePullState(modusEl);Funcs.parseInsideText(modusEl);return true}});return Breaker50});define("modus/parsers/switcher76",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Switcher76=Parser.define({parse:function(modusEl){var ORIG_TYPE_ID=76;var NEW_TYPE_ID=162;if(Funcs.getTypeId(modusEl)!==ORIG_TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(NEW_TYPE_ID);Funcs.parseAngle(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseElementIdBoolean(modusEl);Funcs.parseState(modusEl);Funcs.parseInsideText(modusEl);return true}});return Switcher76});define("modus/parsers/switcher44",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Switcher44=Parser.define({parse:function(modusEl){var ORIG_TYPE_ID=44;var NEW_TYPE_ID=1106;if(Funcs.getTypeId(modusEl)!==ORIG_TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(NEW_TYPE_ID);Funcs.parseAngle(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseElementIdBoolean(modusEl);Funcs.parseState(modusEl);Funcs.parseInsideText(modusEl);return true}});return Switcher44});define("modus/parsers/breaker163",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Breaker163=Parser.define({parse:function(modusEl){var TYPE_ID=163;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseElementIdBoolean(modusEl);Funcs.parseInsideText(modusEl);return true}});return Breaker163});define("modus/parsers/transformer-v",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var TransformerV=Parser.define({parse:function(modusEl){var TYPE_ID=55;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}var count=Funcs.Transformer.getWindingNo(modusEl);if(count<2||count>3){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.createFigure(modusEl);modusEl.config.figure.rotate=Funcs.Transformer.getAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);modusEl.config.figure.windingsCount=count;var winding=Funcs.Transformer.getTransformerWindingTag(modusEl,0);var u;if(winding!==null){u=winding.getAttribute("voltage");u=SLDiagram.Utils.fixVoltageName(u);modusEl.config.figure.U=u}var size=Funcs.getSize(modusEl);if((size!==null)||(size>17)){modusEl.config.figure.sn=0}else{modusEl.config.figure.sn=1}var mirror=Funcs.Transformer.getXMirror(modusEl);if(mirror>0){modusEl.config.figure.xMirror=mirror}Funcs.parseInsideText(modusEl);return true}});return TransformerV});define("modus/parsers/reactor",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Reactor=Parser.define({parse:function(modusEl){var TYPE_ID=37;var DOUBLE_TYPE_ID=37;var SIMPLE_TYPE_ID=1107;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}var isDouble=Funcs.getReactorDouble(modusEl);if(isDouble){modusEl.setTypeId(DOUBLE_TYPE_ID)}else{modusEl.setTypeId(SIMPLE_TYPE_ID)}modusEl.config.figure.rotate=Funcs.getAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);Funcs.parseXMirror(modusEl);return true}});return Reactor});define("modus/parsers/reactor-with-ground",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var ReactorWithGround=Parser.define({parse:function(el){var TYPE_ID=397;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseInsideText(el);Funcs.parseXMirror(el);return true}});return ReactorWithGround});define("modus/parsers/generator",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Generator=Parser.define({parse:function(modusEl){var ORIG_TYPE_ID=173;var NEW_TYPE_ID=1104;if(Funcs.getTypeId(modusEl)!==ORIG_TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(NEW_TYPE_ID);Funcs.parseAngle(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);return true}});return Generator});define("modus/parsers/lamp",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Lamp=Parser.define({parse:function(modusEl){var TYPE_ID=106;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseElementIdBoolean(modusEl);Funcs.parseInsideText(modusEl);Funcs.parseState(modusEl);Funcs.Lamp.parseOnColor(modusEl);Funcs.Lamp.parseOffColor(modusEl);return true}});return Lamp});define("modus/parsers/line",["modus/Parser","modus/parsers/funcs/all","modus/funcs/to-color"],function(Parser,Funcs,ToColor){var Line=Parser.define({parse:function(modusEl){var ORIG_TYPE_ID=1;var NEW_TYPE_ID=1;if(Funcs.getTypeId(modusEl)!==ORIG_TYPE_ID){return false}if(!Funcs.parseAllPoints(modusEl)){return false}modusEl.setTypeId(NEW_TYPE_ID);Funcs.parseVoltage(modusEl);var color=Funcs.getLineStyleColor(modusEl);if(color!==null){modusEl.config.figure.color=color}Funcs.parseInsideText(modusEl);Funcs.parseDashed(modusEl);return true}});return Line});define("modus/parsers/fuse-breaker",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var FuseBreaker=Parser.define({parse:function(modusEl){var ORIG_TYPE_ID=166;var NEW_TYPE_ID=1105;var DEFAULT_SCALE=0.5;if(Funcs.getTypeId(modusEl)!==ORIG_TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(NEW_TYPE_ID);Funcs.parseState(modusEl);Funcs.parseVoltage(modusEl);var angle=Funcs.getAngle(modusEl)||0;modusEl.config.figure.rotate=angle;modusEl.config.figure.scale=DEFAULT_SCALE;Funcs.parseInsideText(modusEl);return true}});return FuseBreaker});define("modus/parsers/flow-direction",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var FlowDirection=Parser.define({getCenter:function(el){var point={};var f;try{f=el.config.figure;point.x=SLDiagram.precisionNumber(f.x1+(f.x2-f.x1)/2,4);point.y=SLDiagram.precisionNumber(f.y1+(f.y2-f.y1)/2,4);return point}catch(ex){return null}},parse:function(modusEl){var TYPE_ID_ORIG=134;var TYPE_ID_NEW=28;if(Funcs.getTypeId(modusEl)!==TYPE_ID_ORIG){return false}if(!Funcs.parseCoords2(modusEl)){return false}var flowDirection=Funcs.getFlowDirection(modusEl);var points={begin:{},end:{}};if(flowDirection===null){return false}var center=this.getCenter(modusEl);var delta=10;var f=modusEl.config.figure;if(flowDirection==="up"){f.x1=center.x;f.x2=center.x;f.y1=center.y+delta;f.y2=center.y-delta}else{if(flowDirection==="down"){f.x1=center.x;f.x2=center.x;f.y1=center.y-delta;f.y2=center.y+delta}else{if(flowDirection==="left"){f.x1=center.x+delta;f.x2=center.x-delta;f.y1=center.y;f.y2=center.y}else{if(flowDirection==="right"){f.x1=center.x-delta;f.x2=center.x+delta;f.y1=center.y;f.y2=center.y}else{return false}}}}modusEl.setTypeId(TYPE_ID_NEW);Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);return true}});return FlowDirection});define("modus/parsers/transformer-v-4x",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var TransformerV4x=Parser.define({parse:function(el){var ORIG_TYPE_ID=55;var NEW_TYPE_ID=1109;if(Funcs.getTypeId(el)!==ORIG_TYPE_ID){return false}var count=Funcs.Transformer.getWindingNo(el);if(count!==4){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(NEW_TYPE_ID);Funcs.createFigure(el);Funcs.parseAngleWithOrient(el);Funcs.parseVoltage(el);el.config.figure.windingsCount=count;var winding=Funcs.Transformer.getTransformerWindingTag(el,0);var u;if(winding!==null){u=winding.getAttribute("voltage");u=SLDiagram.Utils.fixVoltageName(u);el.config.figure.U=u}var mirror=Funcs.getMirror(el);if(mirror==="x"){el.config.figure.xMirror=1}else{if(mirror==="y"){el.config.figure.yMirror=1}}Funcs.parseInsideText(el);return true}});return TransformerV4x});define("modus/parsers/arrow",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var Arrow=Parser.define({parse:function(el){var ORIG_TYPE_ID=2;var NEW_TYPE_ID=28;if(Funcs.getTypeId(el)!==ORIG_TYPE_ID){return false}if(!Funcs.parseCoords2(el)){return false}el.setTypeId(NEW_TYPE_ID);var lineStyle=el.sde.querySelector("LineStyle");var color;if(lineStyle){color=lineStyle.getAttribute("color");if(color){color=SLDiagram.Utils.fixVoltageName(color);SLDiagram.Utils.set(el,"config.figure.U",color)}}return true}});return Arrow});define("modus/parsers/varistor-without-ground",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var VaristorWithoutGround=Parser.define({parse:function(el){var TYPE_ID=29;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseXMirror(el);Funcs.parseInsideText(el);return true}});return VaristorWithoutGround});define("modus/parsers/bandstop-filter",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var BandstopFilter=Parser.define({parse:function(el){var TYPE_ID=389;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseInsideText(el);Funcs.parseXMirror(el);return true}});return BandstopFilter});define("modus/parsers/compensator-sync",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var CompensatorSync=Parser.define({parse:function(modusEl){var TYPE_ID=174;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoords(modusEl)){return false}modusEl.setTypeId(TYPE_ID);Funcs.parseAngleWithOrient(modusEl);Funcs.parseVoltage(modusEl);Funcs.parseInsideText(modusEl);return true}});return CompensatorSync});define("modus/parsers/contact-arcing",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var ContactArcing=Parser.define({parse:function(el){var TYPE_ID=320;if(Funcs.getTypeId(el)!==TYPE_ID){return false}if(Funcs.getObjectType(el)!=="(Контакт замык.дугогасит.)"){return false}if(!Funcs.parseCoords(el)){return false}el.setTypeId(TYPE_ID);Funcs.parseVoltage(el);Funcs.parseAngleWithOrient(el);Funcs.parseInsideText(el);Funcs.parseXMirror(el);return true}});return ContactArcing});define("modus/parsers/container",["modus/Parser","modus/parsers/funcs/all","modus/funcs/get-root","modus/funcs/to-color"],function(Parser,Funcs,GetRoot,ToColor){var Container=Parser.define({parse:function(modusEl){var TYPE_ID=310;var TYPE_RECT_ID=3;if(Funcs.getTypeId(modusEl)!==TYPE_ID){return false}if(!Funcs.parseCoordsPoly(modusEl)){return false}modusEl.setTypeId(TYPE_RECT_ID);Funcs.parseInsideText(modusEl);var bgColor=Funcs.getBgcolor(modusEl);if(bgColor){modusEl.config.figure.backColor=bgColor}else{modusEl.config.figure.backColor=""}modusEl.config.figure.dashedLine="true";var lineColor=Funcs.getLineStyleColor(modusEl);if(lineColor){modusEl.config.figure.color=lineColor}else{var lineColorFromType=Funcs.getColorFromType(modusEl);if(lineColorFromType){modusEl.config.figure.color=lineColorFromType}}return true}});return Container});define("modus/parsers/text-cap",["modus/Parser","modus/parsers/funcs/all"],function(Parser,Funcs){var TextCap=Parser.define({getCoords:function(el){var coords;var i;var min,max;var point;coords=Funcs.getAllPoints(el);if(coords){min={x:Infinity,y:Infinity};max={x:-Infinity,y:-Infinity};for(i=0;i<coords.length;i++){point=coords[i];min.x=Math.min(point.x,min.x);min.y=Math.min(point.y,min.y);max.x=Math.max(point.x,max.x);max.y=Math.max(point.y,max.y)}if(isFinite(min.x)&&isFinite(min.y)&&isFinite(max.x)&&isFinite(max.y)){return{x:SLDiagram.precisionNumber(min.x+(max.x-min.x)/2,4),y:SLDiagram.precisionNumber(min.y+(max.y-min.y)/2,4)}}else{return null}}coords=Funcs.getCoords2(el);if(coords){return{x:SLDiagram.precisionNumber(coords.x1+(coords.x2-coords.x1)/2,4),y:SLDiagram.precisionNumber(coords.y1+(coords.y2-coords.y1)/2,4)}}coords=Funcs.getCoords(el);if(coords){return coords}return null},parse:function(el){var TYPE_ID_TABLICA=313;var TYPE_ID=5;if(el.getTypeId()!==null){return false}if(el.getTypeId()!==TYPE_ID_TABLICA){return false}var coords=this.getCoords(el);if(!coords){return false}el.setTypeId(TYPE_ID);Funcs.createFigure(el);el.config.figure.x=coords.x;el.config.figure.y=coords.y;var objectType=Funcs.getObjectType(el);var modusTypeId=Funcs.getTypeId(el);if(modusTypeId===5){return false}if(objectType!==null){el.config.figure.text=objectType;return true}else{if(modusTypeId!==null){el.config.figure.text="id="+String(modusTypeId);return true}}return false}});return TextCap});define("modus/parsers/all",["modus/Modus","modus/parsers/breaker164","modus/parsers/breaker162","modus/parsers/digital-device","modus/parsers/text","modus/parsers/busway","modus/parsers/overhead-line","modus/parsers/dashed-line","modus/parsers/arrow-line","modus/parsers/ground-breaker","modus/parsers/point","modus/parsers/bus","modus/parsers/switcher43","modus/parsers/ground-breaker-398","modus/parsers/varistor","modus/parsers/fuse154","modus/parsers/fuse203","modus/parsers/type52","modus/parsers/chassis","modus/parsers/ground","modus/parsers/spark-gap","modus/parsers/transformer","modus/parsers/coupling","modus/parsers/breaker399","modus/parsers/wire-round","modus/parsers/motor","modus/parsers/capacitor","modus/parsers/inductor","modus/parsers/fill-rect","modus/parsers/switcher41","modus/parsers/transformer-i","modus/parsers/breaker49","modus/parsers/electricity-pylon","modus/parsers/switcher-v","modus/parsers/breaker50","modus/parsers/switcher76","modus/parsers/switcher44","modus/parsers/breaker163","modus/parsers/transformer-v","modus/parsers/reactor","modus/parsers/reactor-with-ground","modus/parsers/generator","modus/parsers/lamp","modus/parsers/line","modus/parsers/fuse-breaker","modus/parsers/flow-direction","modus/parsers/transformer-v-4x","modus/parsers/arrow","modus/parsers/varistor-without-ground","modus/parsers/bandstop-filter","modus/parsers/compensator-sync","modus/parsers/contact-arcing","modus/parsers/container","modus/parsers/text-cap"],function(Modus){var firstIndex=1;var parsers=[];var modules=[null,"Breaker164","Breaker162","DigitalDevice","Text","Busway","OverheadLine","DashedLine","ArrowLine","GroundBreaker","Point","Bus","Switcher43","GroundBreaker398","Varistor","Fuse154","Fuse203","Type52","Chassis","Ground","SparkGap","Transformer","Coupling","Breaker399","WireRound","Motor","Capacitor","Inductor","FillRect","Switcher41","TransformerI","Breaker49","ElectricityPylon","SwitcherV","Breaker50","Switcher76","Switcher44","Breaker163","TransformerV","Reactor","ReactorWithGround","Generator","Lamp","Line","FuseBreaker","FlowDirection","TransformerV4x","Arrow","VaristorWithoutGround","BandstopFilter","ReactorWithGround","CompensatorSync","ContactArcing","Container","TextCap"];var i,module;for(i=firstIndex;i<modules.length;i++){module=modules[i];parsers.push(arguments[i]);parsers[module]=arguments[i]}Modus.parsers=parsers;return parsers});define("modus/converters/funcs/create-line",[],function(){function CreateLine(params){params=params||{};var modusEl=params.el;var p1=params.begin;var p2=params.end;var sldiagram=params.sldiagram;var typeId=params.type||modusEl.getTypeId();var cfg=SLDiagram.Utils.cloneDeep(modusEl.config);delete cfg.figure.points;cfg.figure.x1=p1.x;cfg.figure.y1=p1.y;cfg.figure.x2=p2.x;cfg.figure.y2=p2.y;var type=sldiagram.getTypeById(typeId);if(!type){return null}var el=new SLDiagram.Element({type:type,config:cfg});return el}return CreateLine});define("modus/converters/funcs/all",["modus/converters/funcs/create-line"],function(){var CreateLine=arguments[0];return{createLine:CreateLine}});define("modus/converters/arrow-line",["modus/Converter","modus/converters/funcs/all"],function(Converter,ConvFuncs){var ArrowLine=Converter.define({ARROW_LINE_TYPE_ID:28,SIMPLE_LINE_TYPE_ID:1002,convert:function(modusEl,sldiagram){if(modusEl.getTypeId()!==this.ARROW_LINE_TYPE_ID){return null}var res=[];var points=SLDiagram.Utils.get(modusEl,"config.figure.points");if(!points){return null}var i,point,nextPoint;var el;for(i=0;i<points.length-1;i++){point=points[i];nextPoint=points[i+1];el=ConvFuncs.createLine({el:modusEl,begin:point,end:nextPoint,sldiagram:sldiagram,type:(i<points.length-2)?this.SIMPLE_LINE_TYPE_ID:this.ARROW_LINE_TYPE_ID});if(el){res.push(el);el=null}}return res}});return ArrowLine});define("modus/converters/multipoints-line",["modus/Converter","modus/converters/funcs/all"],function(Converter,ConvFuncs){var MultipointsLine=Converter.define({isMultipointsLine:function(modusEl){var points=modusEl.getConfigProperty("figure/points");return Boolean(points&&points.length>=2)},createElement:function(modusEl,p1,p2,sldiagram){return ConvFuncs.createLine({el:modusEl,begin:p1,end:p2,sldiagram:sldiagram})},convert:function(modusEl,sldiagram){if(!this.isMultipointsLine(modusEl)){return null}var res=[];var points=modusEl.getConfigProperty("figure/points");var i,point,nextPoint;var el;for(i=0;i<points.length-1;i++){point=points[i];nextPoint=points[i+1];el=this.createElement(modusEl,point,nextPoint,sldiagram);if(!el){continue}res.push(el)}return res}});return MultipointsLine});define("modus/converters/point",["modus/Converter"],function(Converter){var Point=Converter.define({createText:function(modusEl,sldiagram){var cfg=modusEl.config.text;var type=sldiagram.getTypeByName("text");return new SLDiagram.Element({type:type,config:{figure:cfg}})},createPoint:function(modusEl,sldiagram){var cfg=SLDiagram.Utils.cloneDeep(modusEl.config);delete cfg.text;var type=sldiagram.getTypeByName("point");return new SLDiagram.Element({type:type,config:cfg})},convert:function(modusEl,sldiagram){if(modusEl.getTypeId()!==7){return null}var res=[];if(modusEl.config.text){res.push(this.createText(modusEl,sldiagram))}res.push(this.createPoint(modusEl,sldiagram));return res}});return Point});define("modus/converters/default",["modus/Converter","modus/funcs/create-inside-text"],function(Converter,CreateInsideText){var Default=Converter.define({convert:function(modusEl,sldiagram){var textEl=CreateInsideText(modusEl,sldiagram);var type=sldiagram.getTypeById(modusEl.getTypeId());if(!type){return null}var el=new SLDiagram.Element({type:type,config:modusEl.config});var res=[el];if(textEl){res.push(textEl)}return res}});return Default});define("modus/converters/all",["modus/Modus","modus/converters/arrow-line","modus/converters/multipoints-line","modus/converters/point","modus/converters/default"],function(Modus){var modules=[null,"ArrowLine","MultipointsLine","Point","Default"];var converters=[];var firstIndex=1;var i,module;for(i=firstIndex;i<modules.length;i++){module=modules[i];converters.push(arguments[i]);converters[module]=arguments[i]}Modus.converters=converters;return converters});define("modus/all",["modus/Modus","modus/Parser","modus/TypeAndSde","modus/DragAndDropContainer","modus/Converter","modus/parsers/all","modus/converters/all"],function(Modus){return Modus});define("utils/ComponentTypes",["core/sldiagram","utils/Utils"],function(SLDiagram){var ComponentTypes={componentTypes:null,createComponentTypes:function(data){this.componentTypes=data;this.componentTypes.getByTypeId=function(id){var i,type;for(i=0;i<this.length;i++){type=this[i];if(type.type_id===id){return type}}return null}},load:function(callback){if(typeof callback!=="function"){callback=function(err){if(err){console.error(err)}}}if(this.componentTypes!==null){return callback(null,this.componentTypes)}var errorMsg="Не удалось загрузить данные о компонентах схемы с сервера";var me=this;return SLDiagram.Ajax.request({url:"/json/newschemes/component-types",method:"GET",success:function(resp){if(SLDiagram.getProperty(resp,"data/last_res")!==true){return callback(new Error(errorMsg),null)}me.createComponentTypes(resp.data.component_types);return callback(null,me.componentTypes)},unsuccess:function(){return callback(new Error(errorMsg),null)},failure:function(){return callback(new Error(errorMsg),null)}})},getTypesInfo:function(types){var i,type,res=[];for(i in types){if(types.hasOwnProperty(i)){type=types[i];res.push({id:type.id,name:type.name,description:type.description,valueType:type.getValueType()})}}res.getById=function(id){var i,type;for(i=0;i<this.length;i++){type=this[i];if(type.id===id){return type}}return null};return res},getComponentTypes:function(types,callback){var me=this;if(typeof callback!=="function"){callback=function(err){if(err){console.error(err)}}}return this.load(function(err,componentTypes){var i,componentType,schemeTypes,schemeType,data=[],item;if(err){return callback(err,null)}schemeTypes=me.getTypesInfo(types);for(i=0;i<schemeTypes.length;i++){schemeType=schemeTypes[i];item={id:schemeType.id,name:schemeType.name,description:schemeType.description,required_type:schemeType.valueType};componentType=componentTypes.getByTypeId(schemeType.id);if(componentType){item.type_id=componentType.type_id;item.type_from_config=componentType.type_from_config;item.type_from_vs_tcomp=componentType.type_from_vs_tcomp;item.vs_tcomp_id=componentType.vs_tcomp_id}else{item.type_id=null;item.type_from_config=null;item.type_from_vs_tcomp=null;item.vs_tcomp_id=null}data.push(item)}return callback(null,data)})}};SLDiagram.Utils.ComponentTypes=ComponentTypes;return ComponentTypes});define("utils/Statuses",["core/core","utils/Utils"],function(SLDiagram){var Statuses={_statuses:{OIC_DST_NOPRESENT:99,OIC_DST_VALUENOCORRECT:98,OIC_DST_ADERATING:97,OIC_DST_WDERATING:96,OIC_DST_SLAVESEND:89,OIC_DST_MANUAL:79,OIC_DST_SRCMANUAL:69,OIC_DST_SUBSTITUTION:68},_groups:{OIC_DST_NOPRESENT:"border",OIC_DST_VALUENOCORRECT:"border",OIC_DST_ADERATING:"border",OIC_DST_WDERATING:"border",OIC_DST_SRCMANUAL:"topRightSquare",OIC_DST_SUBSTITUTION:"topRightSquare",OIC_DST_MANUAL:"bottomRightSquare",OIC_DST_SLAVESEND:"bottomRightSquareInside"},_groupWeight:{border:4,topRightSquare:3,bottomRightSquareInside:2,bottomRightSquare:1},statusToNumber:function(status){if(this._statuses.hasOwnProperty(status)){return this._statuses[status]}else{return 0}},statusToGroup:function(status){if(this._groups.hasOwnProperty(status)){return this._groups[status]}else{return"other"}},groupToNumber:function(group){if(this._groupWeight.hasOwnProperty(group)){return this._groupWeight[group]}else{return 0}},sortAsc:function(statuses){return SLDiagram.Underscore.sortBy(statuses,this.statusToNumber.bind(this))},sortDesc:function(statuses){var me=this;var sortFn=function(status){return -me.statusToNumber(status)};return SLDiagram.Underscore.sortBy(statuses,sortFn)},groupSortAsc:function(groups){return SLDiagram.Underscore.sortBy(groups,this.groupToNumber.bind(this))},groupSortDesc:function(groups){var me=this;return SLDiagram.Underscore.sortBy(groups,function(group){return -me.groupToNumber(group)})},max:function(statuses){return SLDiagram.Underscore.max(statuses,this.statusToNumber.bind(this))},min:function(statuses){return SLDiagram.Underscore.min(statuses,this.statusToNumber.bind(this))},group:function(statuses,action){var groups,groupName,actionFn;groups=SLDiagram.Underscore.groupBy(statuses,this.statusToGroup.bind(this));switch(action){case"asc":actionFn=this.sortAsc.bind(this);break;case"desc":actionFn=this.sortDesc.bind(this);break;case"max":actionFn=this.max.bind(this);break;case"min":actionFn=this.min.bind(this);break;default:actionFn=null}if(typeof actionFn==="function"){for(groupName in groups){if(groups.hasOwnProperty(groupName)){groups[groupName]=actionFn(groups[groupName])}}}return groups},groupAndOrder:function(statuses,action,dir){var res=[],sortFn,grouped,groups,name,i;switch(dir){case"desc":dir="desc";sortFn=this.groupSortDesc.bind(this);break;default:dir="asc";sortFn=this.groupSortAsc.bind(this)}grouped=this.group(statuses,action);groups=[];for(name in grouped){if(grouped.hasOwnProperty(name)){groups.push(name)}}groups=sortFn(groups);for(i=0;i<groups.length;i++){name=groups[i];res.push({groupName:name,status:grouped[name]})}return res}};SLDiagram.Utils.Statuses=Statuses;return Statuses});define("utils/CreateVoltageTreeItem",["utils/Utils"],function(Utils){var CreateVoltageTreeItem=function(sld,name,color){return{name:String(name),value:{type:"Color2",desc:String(name),list:SLDiagram.default40Colors,menu:[{text:"Удалить",handler:function(propDesc){var item=propDesc.getTreeStoreItem();if(!item){return}var root=item.getRoot();if(!root){return}var sld=root.getSLDiagram();if(!sld){return}var cfgDesc=sld.getConfigDescriptor();var parent=cfgDesc.getChildByPath("voltageColors");var voltage=item.getName();if(SLDiagram.isNumber(voltage)){voltage=Number(voltage)}else{return}var TITLE="Удаление класса напряжения";var MSG="Невозможно удалить используемый в схеме класс напряжения";if(SLDiagram.Utils.checkUsingVoltage(sld,voltage)){SLDiagram.Debug.addMessage(TITLE,MSG+" "+String(voltage)+"кВ",SLDiagram.Debug.statuses.INFO,{showPopUp:true});return}parent.delChildByName(item.getName());sld.delConfigProperty("voltageColors/"+item.getName());sld.events.fireEvent("changeSelection",null)}}]},toTreeItem:function(){var item=new SLDiagram.TreeStoreItem({name:this.name});var color2=new SLDiagram.properties.Color2({config:sld.config,desc:this.value.desc,list:this.value.list,menu:this.value.menu,item:item});item.setValue(color2);return item}}};Utils.createVoltageTreeItem=CreateVoltageTreeItem;return CreateVoltageTreeItem});define("utils/GetVoltageClassesProperties",["utils/Utils","utils/CreateVoltageTreeItem"],function(Utils,CreateVoltageTreeItem){function GetVoltageClassesProperties(sld){var voltageColors=sld.getConfigProperty("voltageColors",null,false);var voltage;var color;var res=[];var _=SLDiagram.Underscore;for(voltage in voltageColors){if(voltageColors.hasOwnProperty(voltage)){color=voltageColors[voltage];res.push(CreateVoltageTreeItem(sld,voltage,color))}}res=_.sortBy(res,function(item){if(SLDiagram.isNumber(item.name)){return Number(item.name)}else{return item.name}});return res}Utils.getVoltageClassesProperties=GetVoltageClassesProperties;return GetVoltageClassesProperties});define("utils/CheckUsingVoltage",["utils/Utils"],function(Utils){function CheckUsingVoltage(sldiagram,voltage){var i,el,voltageEl,_=SLDiagram.Underscore;for(i in sldiagram.elements){if(sldiagram.elements.hasOwnProperty(i)){el=sldiagram.elements[i];voltageEl=el.getVoltageClass();if(voltageEl&&(voltageEl==voltage||(_.isArray(voltageEl)&&voltageEl.indexOf(String(voltage))>=0))){return true}}}return false}Utils.checkUsingVoltage=CheckUsingVoltage;return CheckUsingVoltage});define("utils/all",["utils/Utils","utils/ComponentTypes","utils/Statuses","utils/GetVoltageClassesProperties","utils/CreateVoltageTreeItem","utils/CheckUsingVoltage"],function(Utils){return Utils});define("types/fillCircle",["core/core"],function(){var fillCircle=new SLDiagram.Type({name:"fillCircle",id:1001,description:"Закрашенный круг",groupName:"Debug",config:{figure:{position:{x:0,y:0},radius:20,color:"#CCCCCC",sub:0}},drawFigure:function(){var res=[];var radius=this.type.getConfigProperty.call(this,"figure/radius");var color=this.type.getConfigProperty.call(this,"figure/color");var scale=this.type.getConfigProperty.call(this,"scale");var group=new createjs.Container();var figure=new createjs.Graphics().beginFill(color).drawCircle(0,0,radius*scale);var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){return this.type.getConfigProperty.call(this,"figure/radius",20)*2},getHeight:function(){return this.type.getConfigProperty.call(this,"figure/radius",20)*2},setSize:function(w,h){var t=this.type;var r=(w+h)/4;t.setConfigProperty.call(this,"figure/radius",r)},setWidth:function(w){var t=this.type;var r=w/2;t.setConfigProperty.call(this,"figure/radius",r)},setHeight:function(h){var t=this.type;var r=h/2;t.setConfigProperty.call(this,"figure/radius",r)}});return fillCircle});define("types/fillRect",["core/core"],function(){var fillRect=new SLDiagram.Type({name:"fillRect",id:1000,description:"Закрашенный прямоугольник",groupName:"Debug",config:{figure:{position:{x:0,y:0},size:{width:40,height:40},color:"#CCCCCC",rotation:0,sub:0,bool:true}},configDescriptor:[{name:"figure",value:{desc:"Фигура",expanded:true},children:[{name:"position",value:"Позиция",children:[{name:"x",value:"X"},{name:"y",value:"Y"}]},{name:"size",value:"Размер",children:[{name:"width",value:"Ширина"},{name:"height",value:"Высота"}]},{name:"color",value:{type:"Color2",desc:"Цвет2",list:["#000000","#FFFFFF"]}},{name:"rotation",value:"Угол"},{name:"sub",value:{type:"List",desc:"Слой",list:{0:"низ",1:"середина",2:"верх"}}},{name:"bool",value:"Вкл/Выкл"}]}],drawFigure:function(){var res=[];var width=this.type.getConfigProperty.call(this,"figure/size/width");var height=this.type.getConfigProperty.call(this,"figure/size/height");var color=this.type.getConfigProperty.call(this,"figure/color");var scale=this.type.getConfigProperty.call(this,"scale");var figure=new createjs.Graphics().beginFill(color).drawRect(-width/2*scale,-height/2*scale,width*scale,height*scale);var shape=new createjs.Shape(figure);res.push(shape);return res}});return fillRect});define("types/emptyFigure",["core/core"],function(){var emptyFigure=new SLDiagram.Type({name:"emptyFigure",id:999,description:"Пустая фигура",groupName:"Debug",drawFigure:function(){}});return emptyFigure});define("types/properties/properties",["core/sldiagram","core/properties/properties","utils/Utils"],function(SLD){var f=function(propName,params){var res;switch(propName){case"x":res={name:"x",value:{type:"Base",nativeType:"number",desc:"X",required:true}};break;case"y":res={name:"y",value:{type:"Base",nativeType:"number",desc:"Y",required:true}};break;case"x1":res={name:"x1",value:{type:"Base",nativeType:"number",desc:"X1",required:true}};break;case"y1":res={name:"y1",value:{type:"Base",nativeType:"number",desc:"Y1",required:true}};break;case"x2":res={name:"x2",value:{type:"Base",nativeType:"number",desc:"X2",required:true}};break;case"y2":res={name:"y2",value:{type:"Base",nativeType:"number",desc:"Y2",required:true}};break;case"U":res={name:"U",value:{type:"ListVoltageClass",desc:"Класс напряжения, кВ",setValue:function(el,value){if(value==="нет"){value=null}var res=el.getSetterVoltageClass().execute(value);return res},getValue:function(el){var res=el.getVoltageClass();return res}}};break;case"U-transformer":res={name:"U",value:{type:"ListVoltageClass",desc:"Класс напряжения, кВ",setValue:function(el,value){var num,res;if(!(this instanceof SLDiagram.properties.Prototype)){throw new Error("Неверный контекст выполнения")}num=this.getTreeStoreItem().getParent().getName();if(!SLDiagram.isNumber(num)){throw new Error("Не удалось определить номер обмотки")}if(value==="нет"){value=null}res=el.setWindingVoltageClass(Number(num),value);return res},getValue:function(el){var num,res;if(!(this instanceof SLDiagram.properties.Prototype)){throw new Error("Неверный контекст выполнения")}num=this.getTreeStoreItem().getParent().getName();if(!SLDiagram.isNumber(num)){throw new Error("Не удалось определить номер обмотки")}res=el.getWindingVoltageClass(Number(num));return res}}};break;case"conn":res={name:"conn",value:{type:"List",desc:"Направление вывода",nativeType:"number",list:{0:"Отсутствует",1:"Вверх",2:"Вправо",3:"Вниз",4:"Влево"}}};break;case"scheme":res={name:"scheme",value:{type:"List",desc:"Схема соединения",nativeType:"number",list:{0:"Отсутствует",1:"Звезда",2:"Треугольник"}}};break;case"windings":res={name:"windings",value:"Обмотки"};break;case"windings_hidden":res={name:"windings",value:{desc:"Обмотки",hidden:true}};break;case"windingsCount":res={name:"windingsCount",value:{type:"List",desc:"Кол-во обмоток",nativeType:"number",list:{2:"2 шт",3:"3 шт"},hidden:true}};break;case"sn":res={name:"sn",value:{type:"List",desc:"Размер фигуры",nativeType:"number",list:{0:"Большая",1:"Маленькая"}}};break;case"tn":res={name:"tn",value:{type:"Base",desc:"tn",nativeType:"number",hidden:true}};break;case"rotate":res={name:"rotate",value:{type:"Base",nativeType:"number",desc:"Угол",required:true,setValue:function(el,value){value=SLDiagram.toNumber(value);if(value===null){return null}value=SLDiagram.Utils.simplifyDegreeAngle(value);el.setConfigProperty("figure/rotate",value);return true},getValue:function(el){return SLDiagram.toNumber(el.getConfigProperty("figure/rotate"))}}};break;case"sub":res={name:"sub",value:{type:"Base",nativeType:"number",desc:"Номер слоя",required:true}};break;case"state":res={name:"state",value:{type:"List",nativeType:"boolean",desc:"Состояние КА",list:{0:"Отключено",1:"Включено"},setValue:function(el,value){if(value==="Отключено"||value=="0"){value=false;return el.setRawValue(value)}else{if(value==="Включено"||value=="1"){value=true;return el.setRawValue(value)}else{return false}}},getValue:function(el){return el.getValue()}}};break;case"scale":res={name:"scale",value:{type:"Base",nativeType:"number",desc:"Размер",min:1,max:10,required:true}};break;case"identifier":res={name:"identifier",value:{type:"Base",nativeType:"number",desc:"Идентификатор",min:1,readonly:true,getValue:function(el){var id=el.getId();return id},setValue:function(el,value){return false}}};break;case"figure":res={name:"figure",value:"Фигура"};break;case"uColor":res={name:"uColor",value:{type:"Color2",desc:"Цвет фона",list:SLD.default40Colors}};break;case"onColor":res={name:"uColor",value:{type:"Color2",desc:'Цвет "Включено"',list:SLD.default40Colors}};break;case"lamp_onColor":res={name:"uColor",value:{type:"Color2",desc:'Цвет "Включено"',list:SLD.default40Colors,setValue:function(el,value){return el.setOnColor(value)},getValue:function(el){return el.getOnColor()}}};break;case"offColor":res={name:"offColor",value:{type:"Color2",desc:'Цвет "Отключено"',list:SLD.default40Colors}};break;case"lamp_offColor":res={name:"offColor",value:{type:"Color2",desc:'Цвет "Отключено"',list:SLD.default40Colors,setValue:function(el,value){return el.setOffColor(value)},getValue:function(el){return el.getOffColor()}}};break;case"text_color":res={name:"color",value:{type:"Color2",desc:"Цвет текста",list:SLD.default40Colors}};break;case"textColor2":res={name:"textColor",value:{type:"Color2",desc:"Цвет текста",list:SLD.default40Colors,setValue:function(el,value){var color=SLDiagram.toColor(value);return el.setConfigProperty("figure/textColor",color)},getValue:function(el){var value=el.getConfigProperty("figure/textColor");return SLDiagram.toColor(value)}}};break;case"font":res={name:"font",value:{type:"Base",desc:"Размер шрифта",nativeType:"number",min:6,max:36,required:true}};break;case"fontScaleForText":res={name:"scale",value:{type:"Base",desc:"Масштаб шрифта",nativeType:"number",min:-7,max:7,required:true,getValue:function(el){var value=el.getRawFontSize();return value},setValue:function(el,value){if(!isNaN(value)){el.setConfigProperty("figure/scale",Number(value));return true}else{return false}}}};break;case"fontSizeForText":res={name:"fontSize",value:{type:"Base",desc:"Размер шрифта",nativeType:"number",min:6,max:24,required:true,getValue:function(el){var value=SLDiagram.toNumber(el.getConfigProperty("figure/fontSize"))||8;return value},setValue:function(el,value){value=SLDiagram.toNumber(value);if(value===null){return false}el.setConfigProperty("figure/fontSize",value);return true}}};break;case"value":res={name:"value",value:{type:"Base",nativeType:"number",desc:"Значение",setValue:function(el,value){return el.setRawValue(value)},getValue:function(el){return el.getValue()},decimalPrecision:10}};break;case"countDigits":res={name:"countDigits",value:{type:"Base",nativeType:"number",desc:"Число знаков",required:true,min:0,max:10}};break;case"width":res={name:"width",value:{type:"Base",desc:"Ширина",nativeType:"number",min:1}};break;case"height":res={name:"height",value:{type:"Base",desc:"Высота",nativeType:"number",min:1}};break;case"radius":res={name:"radius",value:{type:"Base",desc:"Радиус",nativeType:"number",min:1,hidden:true}};break;case"size":res={name:"size",value:{type:"Base",desc:"Размер",nativeType:"number",min:1,max:10,required:true}};break;case"text":res={name:"text",value:{type:"Base",nativeType:"string",desc:"Текст",required:true}};break;case"unit":res={name:"unit",value:{type:"Base",desc:"Единицы измерения",nativeType:"string",hidden:true}};break;case"acc":res={name:"acc",value:{type:"Base",desc:"acc",nativeType:"number",hidden:true}};break;case"statusPadding":res={name:"statusPadding",value:{type:"Base",desc:"Внешний отступ",nativeType:"number",hidden:true}};break;case"dashLen":res={name:"dashLen",value:{type:"Base",desc:"Длина пунктира",nativeType:"number",min:1,max:20,required:true}};break;case"weight":res={name:"weight",value:{type:"Base",desc:"Толщина",nativeType:"number",min:1,max:10,required:true}};break;case"pullState":res={name:"pullState",value:{type:"List",nativeType:"boolean",desc:"Положение тележки",list:{"0":"Ремонтное","1":"Рабочее"},setValue:function(el,value){if(value==="Рабочее"){value=1}else{if(value==="Ремонтное"){value=0}}return el.setRawPullState(value)},getValue:function(el){return el.getPullState()}}};break;case"backColor":res={name:"backColor",value:{type:"Color2",desc:"Цвет фона",list:SLD.default40Colors,getValue:function(el){return el.getBackgroundColor()},setValue:function(el,value){return el.setBackgroundColor(value)}}};break;case"color":res={name:"color",value:{type:"Color2",desc:"Цвет границы",list:SLD.default40Colors}};break;case"colorLine":res={name:"colorLine",value:{type:"Color2",desc:"Цвет линии",list:SLD.default40Colors,setValue:function(el,value){return el.setLineColor(value)},getValue:function(el){return el.getLineColor()}}};break;case"st":res={name:"st",value:{type:"Base",nativeType:"number",desc:"st",hidden:true}};break;case"dl":res={name:"dl",value:{type:"Base",nativeType:"number",desc:"dl",hidden:true}};break;case"textAlign":res={name:"textAlign",value:{type:"List",nativeType:"string",desc:"Выравнивание",list:{left:"По левому краю",center:"По центру",right:"По правому краю"},getValue:function(el){return el.getTextAlign()},setValue:function(el,value){var align;switch(value){case"По левому краю":align="left";break;case"По центру":align="center";break;case"По правому краю":align="right";break;default:align=value}return el.setTextAlign(align)}}};break;case"transparent":res={name:"transparent",value:{type:"List",nativeType:"boolean",desc:"Прозрачный фон",list:{"0":"Отключено","1":"Включено"},getValue:function(el){var value,v;value=el.getConfigProperty("figure/transparent",false,true);if(value){v="1"}else{v="0"}return v},setValue:function(el,value){var v;if(value==="1"||value.toLowerCase()==="включено"||value===true){v=true}else{v=false}el.setConfigProperty("figure/transparent",v);return true}}};break;case"invert_state":res={name:"invert_state",value:{type:"List",nativeType:"boolean",desc:"Инверсия состояния",list:{"0":"Отключено","1":"Включено"},getValue:function(el){var v=el.getInvertState();return((v)?true:false)},setValue:function(el,value){var v;switch(value){case"Отключено":case"0":v=false;break;case"Включено":case"1":v=true;break;default:v=Boolean(value)}return el.setInvertState(v)}}};break;case"valign":res={name:"valign",value:{type:"List",nativeType:"string",desc:"Вертикальное выравнивание",list:{top:"Сверху",middle:"Посередине",bottom:"Снизу"},getValue:function(el){return el.getTextVAlign()},setValue:function(el,value){switch(value){case"top":case"Сверху":value="top";break;case"middle":case"Посередине":value="middle";break;case"bottom":case"Снизу":value="bottom";break;default:return false}return el.setTextVAlign(value)}}};break;case"dashed":res={name:"dashed",value:{type:"List",nativeType:"boolean",desc:"Стиль",list:{"0":"Сплошная","1":"Пунктирная"},getValue:function(el){var dashed=el.getConfigProperty("figure/dashed");return dashed?"1":"0"},setValue:function(el,value){switch(value){case"Пунктирная":case"1":el.setConfigProperty("figure/dashed",true);break;case"Сплошная":case"0":el.setConfigProperty("figure/dashed",false);break;default:return false}return true}}};break;default:res={name:propName,value:{desc:propName,hidden:true}}}return((typeof params==="object"&&params!==null)?SLD.Utils.merge(res,params):res)};SLD.configPropertyGenerator=f;var batch=function(arr){var i,a;var res=[];for(i in arr){if(arr.hasOwnProperty(i)){a=arr[i];if(typeof a==="string"){res.push(SLD.configPropertyGenerator(a))}else{if(typeof a==="object"&&a!==null){res.push(SLD.configPropertyGenerator.apply(this,a))}}}}return res};SLD.batchConfigPropertyGenerator=batch;return SLD});define("types/traits/angle-handler",["core/sldiagram"],function(SLDiagram){var AngleHandler=function(cfg){this.init(cfg)};AngleHandler.prototype={init:function(cfg){var i,func,funcs=["onClick","beforeMove","onMove","afterMove"];if(!cfg){throw new Error("Невозможно получить необходимые параметры для создания экземпляра SLDiagram.AngleHandler")}if(!this.setElement(cfg.element)){throw new Error("Не удалось установить свойство SLDiagram.AngleHandler.element")}for(i=0;i<funcs.length;i++){func=funcs[i];if(typeof cfg[func]==="function"){this[func]=cfg[func]}}return this},create:function(){var shape,me=this;shape=this.draw();shape.cornRect=this;shape.addEventListener("click",function(e){return me.onClick(e,shape)});shape.addEventListener("mousedown",function(e){return me.beforeMove(e,shape)});shape.addEventListener("pressmove",function(e){return me.onMove(e,shape)});shape.addEventListener("pressup",function(e){return me.afterMove(e,shape)});return shape},setElement:function(el){if(el){this.element=el;return true}else{return false}},getElement:function(){return this.element},onClick:function(e,shape){var el=this.getElement(),angle=el.getRotation();angle+=90;angle=Math.round(angle/90)*90;el.setRotation(angle);el.draw();el.getSLDiagram().stage.update()},beforeMove:function(e,shape){},onMove:function(e,shape){},afterMove:function(e,shape){},draw:function(){var el=this.getElement(),shape=new createjs.Shape(),fillColor=el.getConfigProperty("selection/rect/color","#FFFF00"),size=el.getConfigProperty("selection/rect/size",5),pos=this.getRelativePoint(),schemeScale=el.getSLDiagram().getScale(),selectionColor=el.getConfigProperty("selection/lineColor","#00FF00"),drawShape,hitArea;drawShape=function(style){shape.graphics.beginFill(null).setStrokeStyle(style.width,"round",null).beginStroke(style.color).arc(pos.x*schemeScale+size/2,pos.y*schemeScale-size/2,size/2,SLDiagram.degreeToRadian(-150),SLDiagram.degreeToRadian(90)).moveTo(pos.x*schemeScale+size/2,pos.y*schemeScale).lineTo(pos.x*schemeScale,pos.y*schemeScale).moveTo(pos.x*schemeScale+2,pos.y*schemeScale-2).lineTo(pos.x*schemeScale,pos.y*schemeScale).lineTo(pos.x*schemeScale+2,pos.y*schemeScale+2)};drawShape({width:3,color:selectionColor});drawShape({width:1.5,color:fillColor});hitArea=new createjs.Shape();hitArea.graphics.beginFill("#000000").setStrokeStyle(null).beginStroke(null).drawCircle(pos.x*schemeScale+size/2,pos.y*schemeScale-size/2,size/2);shape.hitArea=hitArea;return shape},getRelativePoint:function(){var el=this.getElement(),tlpos=el.getRealRelativeTopLeftPosition(),size=el.getRealSchemeSize();return{x:tlpos.x+size.width,y:tlpos.y}}};AngleHandler.getSimpleGetter=function(){return function(){if(!this._angleHandler){this._angleHandler=new AngleHandler({element:this})}if(!this._handlers){this._handlers=[this._angleHandler]}else{this._handlers.push(this._angleHandler)}return this._handlers}};SLDiagram.AngleHandler=AngleHandler;return AngleHandler});define("types/flatType",["core/core","types/properties/properties","types/traits/angle-handler"],function(SLDiagram){var flatType=new SLDiagram.Type({name:"flatType",id:1003,description:"Плоская фигура",groupName:"Debug",drawFigure:function(){},getVoltageColor:function(u){var sld=this.getSLDiagram();var color=SLDiagram.toColor(sld.getConfigProperty("voltageColors/"+u));if(!(typeof color==="string"&&color.length>0&&SLDiagram.isColor(color))){color=this.getLineColor();if(!(typeof color==="string"&&color.length>0&&SLDiagram.isColor(color))){color=sld.getForegroundColor()}}return color},getPosition:function(){var x,y;try{x=this.config.figure.x;y=this.config.figure.y}catch(ex){console.error("ERROR: getPosition: not exist x and y in this.config.figure: "+ex.name);x=0;y=0}return{x:x,y:y}},setPosition:function(x,y){this.type.setConfigProperty.call(this,"figure/x",x);this.type.setConfigProperty.call(this,"figure/y",y)},getRotation:function(){return this.type.getConfigProperty.call(this,"figure/rotate")},setRotation:function(rotation){var r=rotation;var rt=this.type.canvas.rtree;if(typeof this.id!="undefined"&&typeof rt!="undefined"&&rt!=null){rt.remove(this.id)}while(!(r>-180&&r<=180)){if(r<=-180){r=r+360}else{if(r>180){r=r-360}}}this.type.setConfigProperty.call(this,"figure/rotate",r);if(typeof this.id!="undefined"&&typeof rt!="undefined"&&rt!=null){rt.insert(this.id)}},getCornRects:SLDiagram.AngleHandler.getSimpleGetter(),getRelativeSnapPoints:function(){var points=SLDiagram.recursCloneObject(this.type.snapPoints);return points},snapPoints:[{x:0,y:0}],setVoltageClass:function(value){var sld=this.getSLDiagram(),voltage;if(value===null||value===""){this.delConfigProperty("figure/U");sld.setDefaultVoltageClass(null);return true}else{if((typeof value==="string"&&value.length>0)||(typeof value==="number")){value=String(value);voltage=sld.getConfigProperty("voltageColors/"+value,null,false);if(voltage===null){return false}else{this.setConfigProperty("figure/U",value);sld.setDefaultVoltageClass(value);return true}}else{return false}}},getVoltageClass:function(){var u,sld,voltage;u=this.getConfigProperty("figure/U",null,false);sld=this.getSLDiagram();voltage=sld.getConfigProperty("voltageColors/"+String(u),null,false);if(voltage===null){return null}else{return u}}});return flatType});define("types/traits/direction",[],function(){var Direction={functions:{getDirection:function(){var size=this.getSize();if(size.height===0&&size.width!==0){return"horizontal"}else{if(size.height!==0&&size.width===0){return"vertical"}else{return null}}}},extend:function(proto){var name;for(name in this.functions){if(this.functions.hasOwnProperty(name)){proto[name]=this.functions[name]}}}};return Direction});define("types/traits/create-dashed-line",[],function(){function CreateDashedLine(points,width,color){var dashLen=4*width;var figure=new createjs.Graphics().setStrokeStyle(width,"round","round").beginStroke(color).dashedLineTo(points.begin.x-points.center.x,points.begin.y-points.center.y,points.end.x-points.center.x,points.end.y-points.center.y,dashLen);return figure}return CreateDashedLine});define("types/line",["core/core","types/emptyFigure","types/flatType","types/traits/direction","core/Cursors","types/traits/create-dashed-line"],function(core,emptyFigure,flatType,Direction,Cursors,CreateDashedLine){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var line=new SLDiagram.Type({name:"line",id:1002,description:"Прямой отрезок",groupName:"Линии, шины, соединительные элементы",parentType:flatType,config:{figure:{U:"",x1:-20,x2:20,y1:0,y2:0,sub:0,dashed:false}},configDescriptor:[{name:"figure",value:{desc:"Прямой отрезок",expanded:true},children:bgen(["U","x1","x2","y1","y2","sub","dashed"])}],drawFigure:function(){var res=[];var u=this.type.getConfigProperty.call(this,"figure/U");var color=this.type.getVoltageColor.call(this,u);var scale=this.type.canvas.getScale();var p=this.type.getPoints.call(this,scale);var figure=this.type.createLineFigure.call(this,p,scale,color);var shape=new createjs.Shape(figure);res.push(shape);return res},getOutsidePoints:function(scale){var sld=this.getSLDiagram(),pointsScale=1,offset=2,p=this.getPoints(pointsScale),width=p.end.x-p.begin.x,height=p.end.y-p.begin.y,length=Math.sqrt(Math.pow(width,2)+Math.pow(height,2)),sin=height/length,cos=width/length,weight=this.getWeight(),p2;if(SLDiagram.isNumber(scale)){scale=Number(scale)}if(typeof scale==="undefined"||scale===null||typeof scale!=="number"){scale=sld.getScale()}p2={TopLeft:{x:-(length/2*scale)-(weight/2*scale+offset),y:-(weight/2*scale+offset)},TopRight:{x:+(length/2*scale)+(weight/2*scale+offset),y:-(weight/2*scale+offset)},BottomRight:{x:+(length/2*scale)+(weight/2*scale+offset),y:+(weight/2*scale+offset)},BottomLeft:{x:-(length/2*scale)-(weight/2*scale+offset),y:+(weight/2*scale+offset)}};p2.TopLeft=SLDiagram.Utils.rotatePointBySinAndCos(p2.TopLeft,sin,cos);p2.TopRight=SLDiagram.Utils.rotatePointBySinAndCos(p2.TopRight,sin,cos);p2.BottomRight=SLDiagram.Utils.rotatePointBySinAndCos(p2.BottomRight,sin,cos);p2.BottomLeft=SLDiagram.Utils.rotatePointBySinAndCos(p2.BottomLeft,sin,cos);return p2},drawSelectRect:function(){var sld=this.getSLDiagram(),p2=this.getOutsidePoints(),shape,lineColor=sld.getConfigProperty("selection/lineColor","#00FF00");shape=new createjs.Shape();(shape.graphics.setStrokeStyle(1,"round","round").beginStroke(lineColor).dashedLineTo(p2.TopLeft.x,p2.TopLeft.y,p2.TopRight.x,p2.TopRight.y,4).dashedLineTo(p2.TopRight.x,p2.TopRight.y,p2.BottomRight.x,p2.BottomRight.y,4).dashedLineTo(p2.BottomRight.x,p2.BottomRight.y,p2.BottomLeft.x,p2.BottomLeft.y,4).dashedLineTo(p2.BottomLeft.x,p2.BottomLeft.y,p2.TopLeft.x,p2.TopLeft.y,4));return[shape]},getPosition:function(){var p=this.type.getPoints.call(this,1);return{x:p.center.x,y:p.center.y}},move:function(dx,dy){var sld=this.type.canvas;var rt=sld.rtree;if(typeof this.id!=="undefined"&&typeof rt!=="undefined"&&rt!==null){rt.remove(this.id)}var p=this.type.getPoints.call(this,1);p.begin.x=p.begin.x+dx;p.end.x=p.end.x+dx;p.begin.y=p.begin.y+dy;p.end.y=p.end.y+dy;this.type.setConfigProperty.call(this,"figure/x1",SLDiagram.precisionNumber(p.begin.x,4));this.type.setConfigProperty.call(this,"figure/y1",SLDiagram.precisionNumber(p.begin.y,4));this.type.setConfigProperty.call(this,"figure/x2",SLDiagram.precisionNumber(p.end.x,4));this.type.setConfigProperty.call(this,"figure/y2",SLDiagram.precisionNumber(p.end.y,4));if(typeof this.id!=="undefined"&&typeof rt!=="undefined"&&rt!==null){rt.insert(this.id)}},setPosition:function(x,y){var pos=this.type.getPosition.call(this);var dx=x-pos.x;var dy=y-pos.y;this.type.move.call(this,dx,dy)},getRotation:function(){return 0},setRotation:function(r){},getHitArea:function(){var p2=this.getOutsidePoints(),fillColor="#000000",graphics,shape;graphics=new createjs.Graphics();graphics.beginStroke(null).beginFill(fillColor).moveTo(p2.TopLeft.x,p2.TopLeft.y).lineTo(p2.TopRight.x,p2.TopRight.y).lineTo(p2.BottomRight.x,p2.BottomRight.y).lineTo(p2.BottomLeft.x,p2.BottomLeft.y).lineTo(p2.TopLeft.x,p2.TopLeft.y);shape=new createjs.Shape(graphics);return shape},getWidth:function(){var x1=this.type.getConfigProperty.call(this,"figure/x1");var x2=this.type.getConfigProperty.call(this,"figure/x2");return x2-x1},getHeight:function(){var y1=this.type.getConfigProperty.call(this,"figure/y1");var y2=this.type.getConfigProperty.call(this,"figure/y2");return y2-y1},setWidth:function(w){var t=this.type;var x1=t.getConfigProperty.call(this,"figure/x1");var x2=t.getConfigProperty.call(this,"figure/x2");x1=x1-w/2;x2=x2+w/2;t.setConfigProperty.call(this,"figure/x1",x1);t.setConfigProperty.call(this,"figure/x2",x2)},setHeigth:function(h){var t=this.type;var y1=t.getConfigProperty.call(this,"figure/y1");var y2=t.getConfigProperty.call(this,"figure/y2");y1=y1-h/2;y2=y2+h/2;t.setConfigProperty.call(this,"figure/y1",y1);t.setConfigProperty.call(this,"figure/y2",y2)},getTopLeftPosition:function(){var x1=this.type.getConfigProperty.call(this,"figure/x1");var y1=this.type.getConfigProperty.call(this,"figure/y1");return{x:x1,y:y1}},getRectangleRegion:function(){var el=this;var t=el.type;var p=t.getPoints.call(el,1);var points={begin:{x:Math.min(p.begin.x,p.end.x),y:Math.min(p.begin.y,p.end.y)},center:{x:p.center.x,y:p.center.y},end:{x:Math.max(p.begin.x,p.end.x),y:Math.max(p.begin.y,p.end.y)}};var res={x:points.begin.x,y:points.begin.y,w:points.end.x-points.begin.x,h:points.end.y-points.begin.y,points:[{x:points.begin.x,y:points.begin.y},{x:points.end.x,y:points.begin.y},{x:points.begin.x,y:points.end.y},{x:points.end.x,y:points.end.y}],center:{x:points.center.x,y:points.center.y}};for(var i in res.points){if(res.points.hasOwnProperty(i)){res.points[i]=t.calcRandA(res.points[i],res.center)}}res.width=res.w;res.height=res.h;return res},getCornRects:function(){var el=this;var t=el.type;var points=["begin","end"];var res=[];for(var i in points){if(points.hasOwnProperty(i)){var point=points[i];res.push(new SLDiagram.CornRect({type:point,element:el,draw:function(){return this.element.type.corns.draw.call(this)},getRelativePoint:function(){return this.element.type.corns.getRelativePoint.call(this)},beforeMove:function(e){return e.target.cornRect.element.type.corns.beforeMove.call(e.target.cornRect,e)},onMove:function(e){return e.target.cornRect.element.type.corns.onMove.call(e.target.cornRect,e)},afterMove:function(e){return e.target.cornRect.element.type.corns.afterMove.call(e.target.cornRect,e)}}))}}return res},getRelativeSnapPoints:function(){var p=this.type.getPoints.call(this,1);var res=[{x:p.begin.x-p.center.x,y:p.begin.y-p.center.y},{x:p.end.x-p.center.x,y:p.end.y-p.center.y}];return res},getRealSchemeSize:function(){var el=this;var t=el.type;var size=t.getSize.call(el);return{width:size.width+2,height:size.height+2}},getRealRelativeTopLeftPosition:function(){var el=this;var t=el.type;var tlPos=t.getTopLeftPosition.call(el);return{x:tlPos.x-1,y:tlPos.y-1}},calcDeltaForSnap:function(args){var res={x:0,y:0};var el=this;var t=el.type;var sld=t.canvas;var snapToFigure=sld.getFigureSnapStatus();var gridStatus=sld.getGridStatus();var gridSnapStatus=sld.getGridSnapStatus();var gridStep;var distance;var p;var points=[];var nearestFigureSnapPoint=null;if(snapToFigure){nearestFigureSnapPoint=sld.getNearestFigureSnapPoint(args.x,args.y,args.elementCaller);if(nearestFigureSnapPoint!==null){res.x=nearestFigureSnapPoint.x-args.x;res.y=nearestFigureSnapPoint.y-args.y;res.type="figure"}}var gridSnapPoint,oldPos,anotherPos,newPos;if(gridSnapStatus&&nearestFigureSnapPoint===null){gridSnapPoint=sld.getNearestGridPoint(args.x,args.y,el);oldPos=t.getSysConfigProperty.call(el,"move/position",{x:0,y:0},false);anotherPos=t.getSysConfigProperty.call(el,"move/anotherPosition",{x:0,y:0},false);newPos={x:args.x,y:args.y};newPos=SLDiagram.calcRandA(newPos,anotherPos);if((315<=newPos.a&&newPos.a<360)||(0<=newPos.a&&newPos.a<45)||(135<=newPos.a&&newPos.a<225)){res.x=gridSnapPoint.x-args.x}else{res.y=gridSnapPoint.y-args.y}res.type="grid"}if(typeof res.type==="undefined"){res.type="none"}res.dx=res.x;res.dy=res.y;return res},calcDeltaForSnapOnMove:function(args){if(SLDiagram.onMoveSnapAlgorithm==="one point"){return this.type.calcDeltaForSnap2.call(this,args)}var el=this;var t=el.type;var snapPoints=t.getSnapPoints.call(el);var snapPoint;var diffs={grid:new Array(),figure:new Array(),none:new Array()};var diff;var minDiff={x:Infinity,y:Infinity};for(var i in snapPoints){if(snapPoints.hasOwnProperty(i)){snapPoint=snapPoints[i];diff=t.calcDeltaForSnap2.call(el,{x:snapPoint.x,y:snapPoint.y,elementCaller:el,diff:args.diff});diff=SLDiagram.calcR(diff);if(typeof diff.type==="string"&&diff.type.length>0){diffs[diff.type].push(diff)}else{if(SLDiagram.debugMode){console.warn("WARN: Обнаружена точка привязки без указания типа привязки")}}}}if(diffs.figure&&diffs.figure.length>0){minDiff=SLDiagram.calcMinRFromPoints(diffs.figure)}else{if(diffs.grid&&diffs.grid.length>0){minDiff=SLDiagram.calcMinRFromPoints(diffs.grid)}}if(!minDiff||(minDiff.x===Infinity&&minDiff.y===Infinity)){minDiff={x:0,y:0,type:"none"}}minDiff.dx=minDiff.x;minDiff.dy=minDiff.y;return minDiff},getRelativePoints:function(){var type,res,schemePoints;type=this.getType();schemePoints=type.getPoints.call(this,1);res={begin:{x:schemePoints.begin.x-schemePoints.center.x,y:schemePoints.begin.y-schemePoints.center.y},end:{x:schemePoints.end.x-schemePoints.center.x,y:schemePoints.end.y-schemePoints.center.y},center:{x:0,y:0}};return res},getPoints:function(scale){if(typeof scale=="undefined"||scale==null){scale=this.type.canvas.getScale()}var p={begin:{x:this.type.getConfigProperty.call(this,"figure/x1")*scale,y:this.type.getConfigProperty.call(this,"figure/y1")*scale},end:{x:this.type.getConfigProperty.call(this,"figure/x2")*scale,y:this.type.getConfigProperty.call(this,"figure/y2")*scale}};p.center={x:(p.begin.x+(p.end.x-p.begin.x)/2),y:(p.begin.y+(p.end.y-p.begin.y)/2)};return p},createLineFigure:function(points,width,color){var dashed=this.getConfigProperty("figure/dashed",false);if(dashed){return CreateDashedLine(points,width,color)}var figure=new createjs.Graphics().setStrokeStyle(width,"round","round").beginStroke(color).moveTo(points.begin.x-points.center.x,points.begin.y-points.center.y).lineTo(points.end.x-points.center.x,points.end.y-points.center.y);return figure},corns:{draw:function(){var cr=this;var el=cr.element;var t=el.type;var shape=new createjs.Shape();var pos=cr.getRelativePoint();var crSize=t.getConfigProperty.call(el,"selection/rect/size",5);var crFillColor=t.getConfigProperty.call(el,"selection/rect/color","#FFFF00");var selectionColor=t.getConfigProperty.call(el,"selection/lineColor","#00FF00");var scale=t.canvas.getScale();var direction=el.getDirection();(shape.graphics.beginFill(crFillColor).setStrokeStyle(1,"round","round").beginStroke(selectionColor).drawRect(pos.x*scale-crSize/2,pos.y*scale-crSize/2,crSize,crSize));if(direction==="horizontal"){shape.cursor=Cursors.arrow(0)}else{if(direction==="vertical"){shape.cursor=Cursors.arrow(90)}else{shape.cursor=Cursors.get("crosshair")}}return shape},getRelativePoint:function(){var cr=this;var res=new Object();var el=cr.element;var t=el.type;var points=t.getPoints.call(el,1);return{x:points[cr.type].x-points.center.x,y:points[cr.type].y-points.center.y}},beforeMove:function(e){var r=e.target;var cr=r.cornRect;var el=cr.element;var t=el.type;var mouseScreenPos={x:e.stageX,y:e.stageY};var screenPos=t.getScreenPosition.call(el);var id=((cr.type=="end")?"2":"1");var anotherId=((cr.type==="end")?"1":"2");var position={x:t.getConfigProperty.call(el,"figure/x"+id,0),y:t.getConfigProperty.call(el,"figure/y"+id,0)};var anotherPosition={x:t.getConfigProperty.call(el,"figure/x"+anotherId,0),y:t.getConfigProperty.call(el,"figure/y"+anotherId,0)};t.setSysConfigProperty.call(el,"move",{position:position,anotherPosition:anotherPosition,mouseScreenPos:mouseScreenPos,offset:{x:e.x-e.stageX,y:e.y-e.stageY}})},onMove:function(e){var r=e.target;var cr=r.cornRect;var el=cr.element;var t=el.type;var pos=t.getSysConfigProperty.call(el,"move/position",{x:0,y:0},false);var screenPos=t.getSysConfigProperty.call(el,"move/mouseScreenPos",{x:0,y:0},false);var diff={x:e.stageX-screenPos.x,y:e.stageY-screenPos.y};var scale=t.canvas.getScale();var id=((cr.type=="end")?"2":"1");var anotherPos=t.getSysConfigProperty.call(el,"move/anotherPosition",{x:0,y:0},false);var newPos={x:pos.x+diff.x/scale,y:pos.y+diff.y/scale};t.setConfigProperty.call(el,"figure/x"+id,newPos.x);t.setConfigProperty.call(el,"figure/y"+id,newPos.y);var schemeSize=t.getSize.call(el);if(Math.abs(schemeSize.width)>Math.abs(schemeSize.height)){t.setConfigProperty.call(el,"figure/y"+id,anotherPos.y)}else{t.setConfigProperty.call(el,"figure/x"+id,anotherPos.x)}t.draw.call(el);t.canvas.stage.update()},afterMove:function(e){var r=e.target;var cr=r.cornRect;var el=cr.element;var t=el.type;var sld=t.canvas;cr.onMove.call(cr,e);var id=((cr.type=="end")?"2":"1");var anotherPos=t.getSysConfigProperty.call(el,"move/anotherPosition",{x:0,y:0},false);var oldPos=t.getSysConfigProperty.call(el,"move/position",{x:0,y:0},false);var points=t.getPoints.call(el,1);var pos=SLDiagram.cloneObject(points[cr.type]);pos=SLDiagram.calcRandA(pos,anotherPos);var diff=sld.calcDeltaForSnap({x:pos.x,y:pos.y,elementCaller:el});var newPos={x:pos.x+diff.dx,y:pos.y+diff.dy};if(Math.abs(newPos.x-anotherPos.x)>Math.abs(newPos.y-anotherPos.y)){newPos.y=anotherPos.y}else{newPos.x=anotherPos.x}newPos=SLDiagram.calcRandA(newPos,anotherPos);if(newPos.r<t.minLength){newPos.r=t.minLength;newPos=SLDiagram.calcXandY(newPos,anotherPos);newPos.x=Math.round(newPos.x*100)/100;newPos.y=Math.round(newPos.y*100)/100}t.setConfigProperty.call(el,"figure/x"+id,newPos.x);t.setConfigProperty.call(el,"figure/y"+id,newPos.y);el.delSysConfigProperty("move");t.draw.call(el);t.canvas.stage.update()}},getWeight:function(){return 1},minLength:3,calcDeltaForSnap2:emptyFigure.calcDeltaForSnap});Direction.extend(line);return line});define("types/simpleTransformer",["core/core","core/Type","types/flatType","types/line"],function(core,SLDiagram_Type,flatType,line){var simpleTransformer=new SLDiagram.Type({name:"simpleTransformer",id:1047,description:"Трансформатор простой",groupName:"Debug",parentType:flatType,config:{figure:{x:0,y:0,windings:{0:{U:"",conn:2},1:{U:"",conn:4}},windingsCount:2,rotate:0,sub:0}},drawFigure:function(){var res=[];var circles=this.type.getConfigProperty.call(this,"figure/windings");var windingsCount=this.type.getConfigProperty.call(this,"figure/windingsCount");var rotate=this.type.getRotation.call(this);var scale=this.type.getConfigProperty.call(this,"scale");var u1=this.type.getConfigProperty.call(this,"figure/windings/0/U");var u2=this.type.getConfigProperty.call(this,"figure/windings/1/U");var color2=this.type.getVoltageColor.call(this,u1);var color1=this.type.getVoltageColor.call(this,u2);var figure=new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color1).drawCircle(-15*scale,0,19*scale).moveTo((-15-19)*scale,0).lineTo((-15-19-10)*scale,0).beginStroke(color2).drawCircle(15*scale,0,19*scale).moveTo((15+19)*scale,0).lineTo((15+19+10)*scale,0);var shape=new createjs.Shape(figure);res.push(shape);return res},getPosition:function(){var x,y;try{x=this.config.figure.x;y=this.config.figure.y}catch(ex){console.error("ERROR: getPosition: not exist x and y in this.config.figure: "+ex.name);x=0;y=0}return{x:x,y:y}},setPosition:function(x,y){this.type.setConfigProperty.call(this,"figure/x",x);this.type.setConfigProperty.call(this,"figure/y",y)},getRotation:function(){return this.type.getConfigProperty.call(this,"figure/rotate")},setRotation:function(rotation){var r=rotation;var rt=this.type.canvas.rtree;if(typeof this.id!="undefined"&&typeof rt!="undefined"&&rt!=null){rt.remove(this.id)}while(!(r>-180&&r<=180)){if(r<=-180){r=r+360}else{if(r>180){r=r-360}}}this.type.setConfigProperty.call(this,"figure/rotate",r);if(typeof this.id!="undefined"&&typeof rt!="undefined"&&rt!=null){rt.insert(this.id)}},getHitArea:function(){var scale=this.type.getConfigProperty.call(this,"scale");return new createjs.Shape(new createjs.Graphics().beginFill("#000000").drawCircle(-15*scale,0,19*scale).drawCircle(15*scale,0,19*scale))},getWidth:function(){return(10+15+19)*2},getHeight:function(){return 19*2},setWidth:function(w){},setHeigth:function(h){},getCornRects:function(){var el=this;var t=el.type;var res=[new SLDiagram.CornRect({type:"Rotate",element:el,draw:function(){return this.element.type.corns.draw.call(this)},getRelativePoint:function(){return this.element.type.corns.getRelativePoint.call(this)},onClick:function(e){return e.target.cornRect.element.type.corns.onRotaterClick.call(this,e)}})];return res},getRelativeSnapPoints:function(){var points=SLDiagram.recursCloneObject(this.type.snapPoints);return points},getRealSchemeSize:line.getRealSchemeSize,getRealRelativeTopLeftPosition:line.getRealRelativeTopLeftPosition,snapPoints:[{x:-10-15-19,y:0},{x:10+15+19,y:0}]});return simpleTransformer});define("types/traits/real-generator",["core/sldiagram"],function(SLDiagram){var RealGenerator=function(cfg){var cfg2={};cfg2.offset=SLDiagram.getProperty(cfg,"offset")||0;return{getRealRelativeTopLeftPosition:function(){var tl=this.getTopLeftPosition();var res={x:tl.x-cfg2.offset,y:tl.y-cfg2.offset};return res},getRealSchemeSize:function(){var size=this.getSize();var res={width:size.width+cfg2.offset*2,height:size.height+cfg2.offset*2};return res},drawSelectRect:function(){var res=[];var size=this.getRealScreenSize();var pos=this.getRealRelativeTopLeftPosition();var schemeScale=this.getSLDiagram().getScale();pos.x*=schemeScale;pos.y*=schemeScale;var color=this.getConfigProperty("selection/lineColor");var shape=new createjs.Shape();var x,y,w,h;x=pos.x;y=pos.y;w=size.width;h=size.height;(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(x,y,x+w,y,4).dashedLineTo(x+w,y,x+w,y+h,4).dashedLineTo(x+w,y+h,x,y+h,4).dashedLineTo(x,y+h,x,y,4));res.push(shape);return res},getHitArea:function(){var size=this.getRealScreenSize();var tl=this.getRealRelativeTopLeftPosition();var schemeScale=this.getSLDiagram().getScale();tl.x*=schemeScale;tl.y*=schemeScale;var figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x,tl.y,size.width,size.height);return new createjs.Shape(figure)}}};SLDiagram.realGenerator=RealGenerator;return RealGenerator});define("types/traits/invert-state-and-pullstate",[],function(){var MESSAGE_WRONG_VALUE_ARG_TYPE="Аргумент value - не число";var Invert={functions:{getInvertState:function(){var res=this.getConfigProperty("figure/invertState",false,true);return Boolean(res)},setInvertState:function(value){this.setConfigProperty("figure/invertState",Boolean(value));return true},getMainDatasourceScale:function(){var invertState=this.getInvertState();if(invertState){return -1}else{return 1}},setMainDatasourceScale:function(value){if(typeof value!=="number"){throw new Error(MESSAGE_WRONG_VALUE_ARG_TYPE)}if(value>0){return this.setInvertState(false)}else{if(value<0){return this.setInvertState(true)}else{return false}}},getInvertPullState:function(){var res=this.getConfigProperty("figure/invertPullState",false,true);return Boolean(res)},setInvertPullState:function(value){this.setConfigProperty("figure/invertPullState",Boolean(value));return true},getPullstateDatasourceScale:function(){var invertState=this.getInvertPullState();if(invertState){return -1}else{return 1}},setPullstateDatasourceScale:function(value){if(typeof value!=="number"){throw new Error(MESSAGE_WRONG_VALUE_ARG_TYPE)}if(value>0){return this.setInvertPullState(false)}else{if(value<0){return this.setInvertPullState(true)}else{return false}}},getRawValue:function(){var value=this.getConfigProperty("figure/state",false,false);value=Boolean(value);return value},setRawValue:function(value){var v;if(typeof value==="boolean"){this.setConfigProperty("figure/state",value);return true}else{if(typeof value==="number"){v=Boolean(v>0);this.setConfigProperty("figure/state",v);return true}else{if(typeof value==="string"&&isFinite(value)){v=Boolean(Number(value)>0);this.setConfigProperty("figure/state",v);return true}else{return false}}}},getValue:function(){return this.getRawValue()},getRenderedValue:function(){return this.getValue()},setValue:function(value){if(typeof value==="string"&&isFinite(value)){value=Number(value)}if(typeof value==="number"){if(value>0){value=true}else{value=false}}if(typeof value!=="boolean"){return false}var invert=this.getInvertState();if(invert){value=!value}return this.setRawValue(value)},getRawPullState:function(){var value=this.getConfigProperty("figure/pullState",false,true);value=Boolean(value);return value},setRawPullState:function(value){var v;if(typeof value==="boolean"){this.setConfigProperty("figure/pullState",value);return true}else{if(typeof value==="number"){v=Boolean(value>0);this.setConfigProperty("figure/pullState",v);return true}else{if(typeof value==="string"&&isFinite(value)){v=Boolean(Number(value)>0);this.setConfigProperty("figure/pullState",v);return true}else{return false}}}},getPullState:function(){return this.getRawPullState()},getRenderedPullState:function(){return this.getPullState()},setPullState:function(value){if(typeof value==="string"&&isFinite(value)){value=Number(value)}if(typeof value==="number"){if(value>0){value=true}else{value=false}}if(typeof value!=="boolean"){return false}var invert=this.getInvertPullState();if(invert){value=!value}return this.setRawPullState(value)},setTelecontrolDatasourceScale:function(value){return false},getTelecontrolDatasourceScale:function(){return 1}},extend:function(proto){var fnName;for(fnName in this.functions){if(this.functions.hasOwnProperty(fnName)){proto[fnName]=this.functions[fnName]}}return true}};return Invert});define("types/traits/invert",["types/traits/invert-state-and-pullstate"],function(InvertStateAndPullstate){var Invert={functions:{getInvertState:function(){var res=this.getConfigProperty("figure/invertState",false,true);return Boolean(res)},setInvertState:function(value){this.setConfigProperty("figure/invertState",Boolean(value));return true},getMainDatasourceScale:InvertStateAndPullstate.functions.getMainDatasourceScale,setMainDatasourceScale:InvertStateAndPullstate.functions.setMainDatasourceScale,getInvertPullState:function(){return false},setInvertPullState:function(value){return false},getPullstateDatasourceScale:InvertStateAndPullstate.functions.getPullstateDatasourceScale,setPullstateDatasourceScale:InvertStateAndPullstate.functions.setPullstateDatasourceScale,getRawValue:InvertStateAndPullstate.functions.getRawValue,setRawValue:InvertStateAndPullstate.functions.setRawValue,getValue:InvertStateAndPullstate.functions.getValue,setValue:InvertStateAndPullstate.functions.setValue,getRenderedValue:InvertStateAndPullstate.functions.getRenderedValue,getRawPullState:InvertStateAndPullstate.functions.getRawPullState,setRawPullState:InvertStateAndPullstate.functions.setRawPullState,getPullState:InvertStateAndPullstate.functions.getPullState,setPullState:InvertStateAndPullstate.functions.setPullState,getRenderedPullState:InvertStateAndPullstate.functions.getRenderedPullState,getTelecontrolDatasourceScale:InvertStateAndPullstate.functions.getTelecontrolDatasourceScale,setTelecontrolDatasourceScale:InvertStateAndPullstate.functions.setTelecontrolDatasourceScale},extend:function(proto){var fnName;for(fnName in this.functions){if(this.functions.hasOwnProperty(fnName)){proto[fnName]=this.functions[fnName]}}return true}};return Invert});define("types/breaker164",["types/flatType","types/traits/real-generator","types/traits/invert"],function(flatType,RealGenerator,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var breaker164=new SLDiagram.Type({name:"breaker164",id:164,description:"Автомат силовой",groupName:"Автоматы силовые",parentType:flatType,config:{figure:{U:"",rotate:0,state:false,ts:null,x:0,y:0,statusPadding:5,sub:0,scale:1}},configDescriptor:[{name:"figure",value:{desc:"Автомат силовой",expanded:true},children:bgen(["U","rotate","state","identifier","x","y","statusPadding","sub","scale"])}],drawFigure:function(){var res=[];var scale=this.type.canvas.getScale();var fs=this.type.getScale.call(this);var s=fs*scale;var u=this.type.getConfigProperty.call(this,"figure/U");var color=this.type.getVoltageColor.call(this,u);var state=this.getRenderedValue();var figure=new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(-3*s,-8*s).lineTo(3*s,-8*s).moveTo(-3*s,8*s).lineTo(3*s,8*s);var shape=new createjs.Shape(figure);if(state===false){shape.graphics.moveTo(-5*s,0).lineTo(5*s,0).beginFill(color).drawRect(-2*s,0,4*s,2*s)}else{shape.graphics.moveTo(0,-5*s).lineTo(0,5*s).beginFill(color).drawRect(0,-2*s,2*s,4*s)}res.push(shape);return res},setPosition:function(x,y){this.type.setConfigProperty.call(this,"figure/x",x);this.type.setConfigProperty.call(this,"figure/y",y)},getRotation:function(){return this.type.getConfigProperty.call(this,"figure/rotate")},getHitArea:function(){var size=this.type.getScreenSize.call(this);var figure=new createjs.Graphics().beginFill("#000000").drawRect(-size.width/2,-size.height/2,size.width,size.height);return new createjs.Shape(figure)},getWidth:function(){var s=this.getType().getScale.call(this);return 10*s},getHeight:function(){var s=this.getType().getScale.call(this);return 16*s},setWidth:function(w){},setHeigth:function(h){},getValue:function(){return(this.type.getConfigProperty.call(this,"figure/state")>0)?true:false},setValue:function(v){this.type.setConfigProperty.call(this,"figure/state",(v===true||v>0)?1:0)},changeValue:function(){var v=this.type.getValue.call(this);this.type.setValue.call(this,!v)},onDblClick:function(){},getId:function(){var el=this;var t=el.type;var ts=t.getConfigProperty.call(el,"figure/ts",null,false);if(ts===null){return null}var a;try{a=ts.split(".")}catch(ex){return null}if(a.length!=3&&!(SLDiagram.isNumber(a[2]))){return null}else{return Number(a[2])}},setId:function(id){var el=this;var t=el.type;if(id===null){t.delConfigProperty.call(el,"figure/ts")}else{t.setConfigProperty.call(el,"figure/ts","1.3."+id)}var isActive=t.isActive.call(el);if(isActive){t.canvas.addActiveElement(this)}else{t.canvas.removeActiveElement(this)}},getStatuses:function(){var sld,styles,res,i,style,type;type=this.type;if(!this._statuses){sld=this.getSLDiagram();styles=sld.getStatusStyles();res={};for(i in styles){if(styles.hasOwnProperty(i)){style=styles[i];res[i]=new SLDiagram.Status({element:this,statusStyle:style})}}this._statuses=res}return this._statuses},getStatus:function(){console.warn("WARN: Using deprecated method SLDiagram.Type.getStatus");if(typeof this.sysConfig!="undefined"&&typeof this.sysConfig.figure!="undefined"&&typeof this.sysConfig.figure.statuses!="undefined"){var res=[];var statuses=this.sysConfig.figure.statuses;for(var i in statuses){if(statuses.hasOwnProperty(i)){var st=statuses[i];res.push(st)}}return res}else{return null}},_getStatus2:function(){var st,statuses,type,res=[],groupName,i;type=this.getType();st=type._getSimpleStatus2.call(this);statuses=type.getStatuses.call(this);if(st===null){return null}for(i=0;i<st.length;i++){if(statuses.hasOwnProperty(st[i].status)){res.push({groupName:st[i].groupName,status:st[i].status,style:statuses[st[i].status]})}else{console.error('Не найден стиль для статуса "'+st[i].status+'"')}}return res},_hasStatus2:function(){var st,type,active;type=this.getType();st=type._getSimpleStatus2.call(this);if(st===null){return false}else{return true}},_getSimpleStatus2:function(){var type,st,active,count,i,hasNopresent,hasNocorrect,firstSt,noPresentSt="OIC_DST_NOPRESENT",noCorrectSt="OIC_DST_VALUENOCORRECT",res,grouped;type=this.getType();st=SLDiagram.getProperty(this.sysConfig,"figure/statuses");active=type.isActive.call(this);grouped=SLDiagram.Utils.Statuses.groupAndOrder(st,"max","asc");return grouped},setStatus:function(st){if(typeof st==="undefined"){st=["OIC_DST_NOPRESENT"]}this.type.delSysConfigProperty.call(this,"figure/statuses");this.type.setSysConfigProperty.call(this,"figure/statuses",st)},drawStatusRect:function(){var res=[],type,st,groupName,statusStyle,i;type=this.getType();st=type._getStatus2.call(this);for(i=0;i<st.length;i++){res.push(st[i].style.getShape())}return res},isActive:function(){var id=this.type.getId.call(this);if(id!==null){return true}else{return false}},isMaybeActive:function(){return true},getParsedId:function(){return this.type.getId.call(this)},getRelativeSnapPoints:function(){var s=this.getType().getScale.call(this);return[{x:0,y:-8*s},{x:0,y:8*s}]},getAllDatasources:function(){var idInScheme=this.getId();var sld=this.getSLDiagram();var _=SLDiagram.Underscore;var sadIds,dss;if(sld.schemeAndDatabaseIds){sadIds=sld.schemeAndDatabaseIds;dss=sadIds.searchBySchemeId(idInScheme);if(_.isArray(dss)&&!_.isEmpty(dss)){return dss}else{return[]}}else{return[]}},getDatasourceByRegim:function(regim){if(typeof regim!=="number"){throw new Error("Неверный тип аргумента regim")}var dss=this.getAllDatasources();var _=SLDiagram.Underscore;var ds;if(_.isEmpty(dss)){return null}else{ds=_.findWhere(dss,{regim:regim});if(typeof ds==="undefined"){return null}else{return ds}}},getTelecontrolDatasource:function(){return this.getDatasourceByRegim(5)},getMainDatasource:function(){return this.getDatasourceByRegim(2)},getPullstateDatasource:function(){return this.getDatasourceByRegim(3)},getTelecontrolMenuItem:function(){if(this.getSLDiagram().getEditMode()){return null}var tc,m,ps;var TUManager,tuHelper;var tcCheck=false,mDcsCheck=false,mPswtCheck=false;tc=this.getTelecontrolDatasource();m=this.getMainDatasource();ps=this.getPullstateDatasource();TUManager=SLDiagram.getProperty(window,"Wasutp/TU/Manager");if(!TUManager){return null}tuHelper=null;tcCheck=Boolean(tc!==null&&m!==null&&(TUManager.isTUOptDcs(tc.da_sys_gtopt_define_alias)||TUManager.isTUOptPswt(tc.meas_val_id_param)));mDcsCheck=Boolean(m!==null&&TUManager.isTUOptDcs(m.da_sys_gtopt_define_alias));mPswtCheck=Boolean(m!==null&&TUManager.isTUOptPswt(m.meas_val_id_param));if(tcCheck){tuHelper=Ext.create("Wasutp.TU.Manager",{system:"telecontrol",id_table:tc.ID_TABLE,id:tc.ID_DATABASE})}else{if(mDcsCheck){tuHelper=Ext.create("Wasutp.TU.Manager",{system:"dcs",id:m.ID_DATABASE})}else{if(mPswtCheck){tuHelper=Ext.create("Wasutp.TU.Manager",{system:"pswt",id:m.ID_DATABASE})}}}if(tuHelper){return tuHelper.getMenuAction()}else{return null}},getItemsForContextMenu:function(){var telecontrolMenuItem=this.getTelecontrolMenuItem();var res=[];if(telecontrolMenuItem){res.push({xtype:"menuseparator"});res.push(telecontrolMenuItem)}return res},getScale:function(){return this.getType().getConfigProperty.call(this,"figure/scale",1)},datasourcesNames:["main","telecontrol"],getValueType:function(){return"boolean"},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});Invert.extend(breaker164);return breaker164});define("types/lamp",["types/breaker164","types/traits/invert"],function(breaker164,Invert){var bgen=SLDiagram.batchConfigPropertyGenerator;var lamp=new SLDiagram.Type({name:"lamp",id:106,description:"Лампа сигнальная",groupName:"Устройства индикации",parentType:breaker164,config:{figure:{scale:1,state:false,ts:"",x:0,y:0,sub:0,uColor:"#FF0000",offColor:"#A0A0A0"}},configDescriptor:[{name:"figure",value:{desc:"Лампа сигнальная",expanded:true},children:bgen(["scale","state","identifier","x","y","sub","radius","lamp_onColor","lamp_offColor"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var lineColor="#F0F0F0";var value=this.getRenderedValue();var fillColor=((value===true)?this.getOnColor():this.getOffColor());var s=t.getScreenSize.call(el);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(lineColor).beginFill(fillColor).drawCircle(0,0,s.width/2).beginFill(null));var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){var scale=this.getType().getConfigProperty.call(this,"figure/scale",1);scale=Math.abs(scale);return scale*20},getHeight:function(){return this.getType().getWidth.call(this)},setWidth:function(w){},setHeight:function(h){},getValue:function(){return((this.type.getConfigProperty.call(this,"figure/state",0)>0))},setValue:function(v){this.type.setConfigProperty.call(this,"figure/state",((v===true||v>0)?1:0))},changeValue:function(){var v=this.type.getValue.call(this);this.type.setValue.call(this,!v)},getTopLeftPosition:function(){var scale=this.getType().getConfigProperty.call(this,"figure/scale",1);scale=Math.abs(scale);return{x:-scale*10,y:-scale*10}},getRealSchemeSize:function(){var el=this;var t=el.type;var size=t.getSize.call(el);return{width:size.width+1,height:size.height+1}},getRealRelativeTopLeftPosition:function(){var el=this;var t=el.type;var tlPos=t.getTopLeftPosition.call(el);return{x:tlPos.x-0.5,y:tlPos.y-0.5}},getRelativeSnapPoints:function(){return[{x:0,y:0}]},getCornRects:function(){return[]},getOnColor:function(){var Get=SLDiagram.Utils.get;var color=Get(this,"config.figure.uColor");if(color){return color}var sld=this.getSLDiagram();return Get(sld,"config.figure.lamp.on","#FF0000")},getOffColor:function(){var Get=SLDiagram.Utils.get;var color=Get(this,"config.figure.offColor");if(color){return color}var sld=this.getSLDiagram();return Get(sld,"config.figure.lamp.off","#A0A0A0")},setOnColor:function(color){if(SLDiagram.isColor(color)){SLDiagram.Utils.set(this,"config.figure.uColor",color);return true}else{return false}},setOffColor:function(color){if(SLDiagram.isColor(color)){SLDiagram.Utils.set(this,"config.figure.offColor",color);return true}else{return false}}});Invert.extend(lamp);return lamp});define("types/breaker49",["types/breaker164","types/traits/invert-state-and-pullstate"],function(breaker164,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var breaker49=new SLDiagram.Type({name:"breaker49",id:49,description:"Разъединитель выдвижной",groupName:"Разъединители, отделители",parentType:breaker164,config:{figure:{U:"",dl:0,rotate:0,ts:"",x:0,y:0,sub:0,state:false,pullState:true}},configDescriptor:[{name:"figure",value:{desc:"Разъединитель выдвижной",expanded:true},children:bgen(["U","dl","rotate","identifier","x","y","sub","state","pullState"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var lineColor=t.getVoltageColor.call(el,u);var state=this.getRenderedValue();var dx=t.getPullDx.call(el);var backColor=sld.getBackgroundColor();dx=dx*scale;var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(lineColor).moveTo(-3*scale+dx,-8*scale).lineTo(3*scale+dx,-8*scale).moveTo(0+dx,19*scale).lineTo(0+dx,8*scale).moveTo(0+dx,19*scale).lineTo(-4*scale+dx,15*scale).moveTo(0+dx,19*scale).lineTo(4*scale+dx,15*scale).moveTo(0,24*scale).lineTo(-4*scale,20*scale).moveTo(0,24*scale).lineTo(4*scale,20*scale).moveTo(0+dx,-19*scale).lineTo(0+dx,-8*scale).moveTo(0+dx,-19*scale).lineTo(-4*scale+dx,-15*scale).moveTo(0+dx,-19*scale).lineTo(4*scale+dx,-15*scale).moveTo(0,-24*scale).lineTo(-4*scale,-20*scale).moveTo(0,-24*scale).lineTo(4*scale,-20*scale));var xMirror=this.getConfigProperty("figure/xMirror",0,false);var shape=new createjs.Shape(figure);if(state===false){if(xMirror===true){shape.graphics.moveTo(0+dx,8*scale).lineTo(8*scale+dx,-4*scale).beginFill(backColor).drawCircle(0+dx,8*scale,2*scale).beginFill(lineColor).drawRect(8*scale+dx,-3*scale,2*scale,3*scale)}else{shape.graphics.moveTo(0+dx,8*scale).lineTo(-8*scale+dx,-4*scale).beginFill(backColor).drawCircle(0+dx,8*scale,2*scale).beginFill(lineColor).drawRect(-10*scale+dx,-3*scale,2*scale,3*scale)}}else{if(xMirror===true){shape.graphics.moveTo(0+dx,-5*scale).lineTo(0+dx,5*scale).moveTo(-3*scale+dx,8*scale).lineTo(3*scale+dx,8*scale).beginFill(lineColor).drawRect(1*scale+dx,-4*scale,2*scale,3*scale)}else{shape.graphics.moveTo(0+dx,-5*scale).lineTo(0+dx,5*scale).moveTo(-3*scale+dx,8*scale).lineTo(3*scale+dx,8*scale).beginFill(lineColor).drawRect(-3*scale+dx,-4*scale,2*scale,3*scale)}}res.push(shape);return res},drawSelectRect:function(){var res,type,size,tlPos,scale,color,shape;res=[];type=this.getType();size=type.getRealScreenSize.call(this);tlPos=type.getRealRelativeTopLeftPosition.call(this);scale=this.getSLDiagram().getScale();tlPos.x*=scale;tlPos.y*=scale;color=SLDiagram.toColor(type.getConfigProperty.call(this,"selection/lineColor"));if(!color){color="#00FF00"}shape=new createjs.Shape();var x,y,w,h;x=tlPos.x;y=tlPos.y;w=size.width;h=size.height;(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(x,y,x+w,y,4).dashedLineTo(x+w,y,x+w,y+h,4).dashedLineTo(x+w,y+h,x,y+h,4).dashedLineTo(x,y+h,x,y,4));res.push(shape);return res},getHitArea:function(){var size=this.getRealSchemeSize();var tlpos=this.getRealRelativeTopLeftPosition();var scale=this.getSLDiagram().getScale();var figure=new createjs.Graphics().beginFill("#000000").drawRect(tlpos.x*scale,tlpos.y*scale,size.width*scale,size.height*scale);return new createjs.Shape(figure)},getWidth:function(){var dx=this.getPullDx();return 14+dx},getHeight:function(){return 48},setWidth:function(w){},setHeight:function(h){},getRealSchemeSize:function(){var s=this.type.getSize.call(this);var res={width:s.width+1.5,height:s.height+1.5};return res},getRelativeSnapPoints:function(){return[{x:0,y:-24},{x:0,y:24}]},setPullState:function(state){var value=((state)?1:0);this.type.setConfigProperty.call(this,"figure/pullState",value)},getPullState:function(){var def=this.type.getConfigProperty("figure/pullState",false,false);var value=this.type.getConfigProperty.call(this,"figure/pullState",def,false);return Boolean(value)},getPullDx:function(){var pullState=this.getRenderedPullState();return((pullState)?0:15)},getTopLeftPosition:function(){var dx=this.type.getPullDx.call(this);var size=this.type.getSize.call(this);var res={x:-(size.width-dx)/2,y:-size.height/2};return res},getRealRelativeTopLeftPosition:function(){var tl=this.getTopLeftPosition();var res={x:tl.x-0.75,y:tl.y-0.75};return res},datasourcesNames:["main","pullState","telecontrol"]});Invert.extend(breaker49);return breaker49});define("types/traits/invert-pullstate",["types/traits/invert-state-and-pullstate"],function(InvertStateAndPullstate){var Invert={functions:{getInvertState:function(){return false},setInvertState:function(value){return false},getMainDatasourceScale:InvertStateAndPullstate.functions.getMainDatasourceScale,setMainDatasourceScale:InvertStateAndPullstate.functions.setMainDatasourceScale,getInvertPullState:function(){var res=this.getConfigProperty("figure/invertPullState",false,true);return Boolean(res)},setInvertPullState:function(value){this.setConfigProperty("figure/invertPullState",Boolean(value));return true},getPullstateDatasourceScale:InvertStateAndPullstate.functions.getPullstateDatasourceScale,setPullstateDatasourceScale:InvertStateAndPullstate.functions.setPullstateDatasourceScale,getRawValue:InvertStateAndPullstate.functions.getRawValue,setRawValue:InvertStateAndPullstate.functions.setRawValue,getValue:InvertStateAndPullstate.functions.getValue,setValue:InvertStateAndPullstate.functions.setValue,getRenderedValue:InvertStateAndPullstate.functions.getRenderedValue,getRawPullState:InvertStateAndPullstate.functions.getRawPullState,setRawPullState:InvertStateAndPullstate.functions.setRawPullState,getPullState:InvertStateAndPullstate.functions.getPullState,setPullState:InvertStateAndPullstate.functions.setPullState,getRenderedPullState:InvertStateAndPullstate.functions.getRenderedPullState,getTelecontrolDatasourceScale:InvertStateAndPullstate.functions.getTelecontrolDatasourceScale,setTelecontrolDatasourceScale:InvertStateAndPullstate.functions.setTelecontrolDatasourceScale},extend:function(proto){var fnName;for(fnName in this.functions){if(this.functions.hasOwnProperty(fnName)){proto[fnName]=this.functions[fnName]}}return true}};return Invert});define("types/chassis",["types/breaker49","types/traits/invert-pullstate"],function(breaker49,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var chassis=new SLDiagram.Type({name:"chassis",id:51,description:"Шасси",groupName:"Выключатели",parentType:breaker49,config:{figure:{U:"",x:0,y:0,rotate:0,sub:0,pullState:true,ts:null,scale:1}},configDescriptor:[{name:"figure",value:{desc:"Шасси",expanded:true},children:bgen(["U","x","y","scale","rotate","sub","pullState","identifier"])}],drawFigure:function(){var res=[];var sld=this.getSLDiagram();var schemeScale=sld.getScale();var selfScale=this.getConfigProperty("figure/scale",1);var u=this.getConfigProperty("figure/U");var color=this.getVoltageColor(u);var dx=this.getPullDx()/selfScale;var i,line;var lines=[{from:{x:0+dx,y:-24},to:{x:0+dx,y:24}},{from:{x:0+dx,y:-24},to:{x:0+dx-4,y:-24+4}},{from:{x:0+dx,y:-24},to:{x:0+dx+4,y:-24+4}},{from:{x:0+dx,y:24},to:{x:0+dx-4,y:24-4}},{from:{x:0+dx,y:24},to:{x:0+dx+4,y:24-4}},{from:{x:0,y:-32},to:{x:0-4,y:-32+4}},{from:{x:0,y:-32},to:{x:0+4,y:-32+4}},{from:{x:0,y:32},to:{x:0-4,y:32-4}},{from:{x:0,y:32},to:{x:0+4,y:32-4}}];for(i=0;i<lines.length;i++){line=lines[i];line.from.x*=schemeScale*selfScale;line.from.y*=schemeScale*selfScale;line.to.x*=schemeScale*selfScale;line.to.y*=schemeScale*selfScale}var figure=(new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(color));for(i=0;i<lines.length;i++){line=lines[i];figure.moveTo(line.from.x,line.from.y).lineTo(line.to.x,line.to.y)}var shape=new createjs.Shape(figure);res.push(shape);return res},drawSelectRect:function(){var res=[],shape,size,tlPos,scale=this.getSLDiagram().getScale(),color;size=this.getRealScreenSize();tlPos=this.getRealRelativeTopLeftPosition();tlPos.x*=scale;tlPos.y*=scale;color=SLDiagram.toColor(this.getConfigProperty("selection/lineColor"));if(!color){color="#00FF00"}shape=new createjs.Shape();(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(tlPos.x,tlPos.y,tlPos.x+size.width,tlPos.y,4).dashedLineTo(tlPos.x+size.width,tlPos.y,tlPos.x+size.width,tlPos.y+size.height,4).dashedLineTo(tlPos.x+size.width,tlPos.y+size.height,tlPos.x,tlPos.y+size.height,4).dashedLineTo(tlPos.x,tlPos.y+size.height,tlPos.x,tlPos.y,4));res=res.concat([shape]);return res},getWidth:function(){var scale=this.getScale();var dx=this.getPullDx();return 8*scale+dx},getHeight:function(){var scale=this.getScale();return 64*scale},setWidth:function(w){},setHeight:function(h){},getHitArea:function(){var size=this.getSize(),tlpos=this.getTopLeftPosition(),schemeScale=this.getSLDiagram().getScale(),figure;figure=new createjs.Graphics().beginFill("#000000").drawRect(tlpos.x*schemeScale,tlpos.y*schemeScale,size.width*schemeScale,size.height*schemeScale);return new createjs.Shape(figure)},setPullState:function(state){var value=((state)?1:0);this.setConfigProperty("figure/pullState",value)},getPullState:function(){var def=this.type.getConfigProperty("figure/pullState",false,false);var value=this.getConfigProperty("figure/pullState",def,false);return Boolean(value)},getPullDx:function(){var state=this.getRenderedPullState();var scale=this.getConfigProperty("figure/scale",1);return((state)?0:15*scale)},getTopLeftPosition:function(){var scale=this.getScale();return{x:-4*scale,y:-32*scale}},getRealSchemeSize:function(){var size=this.getSize();return{width:size.width+1.5,height:size.height+1.5}},getRealRelativeTopLeftPosition:function(){var tlpos=this.getTopLeftPosition();return{x:tlpos.x-0.75,y:tlpos.y-0.75}},getRelativeSnapPoints:function(){var scale=this.getScale();return[{x:0,y:-32*scale},{x:0,y:32*scale}]},datasourcesNames:["pullState"]});Invert.extend(chassis);return chassis});define("types/transformerI",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var transformerI=new SLDiagram.Type({name:"transformerI",id:34,description:"Трансформатор тока",groupName:"Трансформаторы",parentType:flatType,config:{figure:{U:"",dl:0,x:0,y:0,rotate:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Трансформатор тока",expanded:true},children:bgen(["U","x","y","rotate","sub","dl"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).drawCircle(0,0,4*scale).moveTo(4*scale,2*scale).lineTo(7*scale,2*scale).moveTo(4*scale,-2*scale).lineTo(7*scale,-2*scale).moveTo(0,-4*scale).lineTo(0,-8*scale).moveTo(0,4*scale).lineTo(0,8*scale));var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){return 11},getHeight:function(){return 16},setWidth:function(w){},setHeight:function(h){},getHitArea:function(){var size=this.type.getScreenSize.call(this);var tlPos=this.type.getScreenTopLeftPosition.call(this);var figure=(new createjs.Graphics().beginFill("#000000").drawRect(tlPos.x,tlPos.y,size.width,size.height));return new createjs.Shape(figure)},getTopLeftPosition:function(){return{x:-4,y:-8}},snapPoints:[{x:0,y:-8},{x:0,y:8}],getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return transformerI});define("types/transformer-helper/auto",["core/sldiagram","types/properties/properties"],function(SLDiagram){var Auto=function(cfg){if(typeof cfg!=="undefined"){this.init(cfg)}};Auto.isAutotransformer=function(trans){var auto,checkAuto;if(typeof trans.getConfigProperty==="function"){auto=trans.getConfigProperty("figure/auto",0)}else{if(typeof trans.config==="object"&&trans.config!==null){auto=SLDiagram.getProperty(trans,"config/figure/auto")||0}else{if(typeof trans.figure==="object"&&trans.figure!==null){auto=SLDiagram.getProperty(trans,"figure/auto")||0}else{if(typeof trans==="object"&&trans!==null){auto=SLDiagram.getProperty(trans,"auto")||0}else{auto=0}}}}checkAuto=Boolean((SLDiagram.isNumber(auto)||typeof auto==="boolean")&&Number(auto)!==0&&auto!==false);return checkAuto};Auto.prototype={init:function(cfg){if(typeof cfg==="object"&&cfg!==null){if(cfg.transformer){this.setTransformer(cfg.transformer)}else{if(cfg._transformer){this.setTransformer(cfg._transformer)}}}if(!this.getTransformer()){throw new Error("Transformer is undefined")}},setTransformer:function(transformer){if(SLDiagram.isElement(transformer)||SLDiagram.isType(transformer)){this._transformer=transformer;return true}else{return false}},getTransformer:function(){if(this._transformer){return this._transformer}else{return null}},isAutotransformer:function(){var trans=this.getTransformer();return Auto.isAutotransformer(trans)},getTopLeftPosition:function(){var windingsCount=this._getWindingsCount();var direction;if(windingsCount===2){return this._getTopLeftPosition1()}if(windingsCount===3){direction=this.getDirection();if(direction==="vertical"){return this._getTopLeftPositionVertical()}else{return this._getTopLeftPositionHorizontal()}}else{if(windingsCount===4){return this._getTopLeftPosition3()}else{throw new Error("Неверное число обмоток")}}},_getTopLeftPosition1:function(){return{x:-18,y:-32}},_getTopLeftPositionVertical:function(){return{x:-18,y:-47}},_getTopLeftPositionHorizontal:function(){return{x:-33,y:-47}},_getTopLeftPosition3:function(){return{x:-33,y:-57}},getRealRelativeTopLeftPosition:function(){var tl=this.getTopLeftPosition();return{x:tl.x-0.75,y:tl.y-0.75}},getRealSchemeSize:function(){var size=this.getSize();return{width:size.width+1.5,height:size.height+1.5}},getRelativeSnapPoints:function(){var count=this._getWindingsCount(),snapPoint,res=[],i;for(i=1;i<=count;i++){snapPoint=this._getRelativeSnapPoint(i);if(snapPoint){res.push(snapPoint)}}return res},getWidth:function(){var windingsCount=this._getWindingsCount();var direction;if(windingsCount===2){return this._getWidth1()}else{if(windingsCount===3){direction=this.getDirection();if(direction==="vertical"){return this._getWidthVertical()}else{return this._getWidthHorizontal()}}else{if(windingsCount===4){return this._getWidth3()}else{throw new Error("Неверное число обмоток")}}}},_getWidth1:function(){return 36},_getWidthHorizontal:function(){return 66},_getWidthVertical:function(){return 36},_getWidth3:function(){return 66},getHeight:function(){var windingsCount=this._getWindingsCount();var direction;if(windingsCount===2){return this._getHeight1()}else{if(windingsCount===3){direction=this.getDirection();if(direction==="vertical"){return this._getHeightVertical()}else{return this._getHeightHorizontal()}}else{if(windingsCount===4){return this._getHeight3()}else{throw new Error("Неверное число обмоток")}}}},_getHeight1:function(){return 50},_getHeightHorizontal:function(){return 18+47},_getHeightVertical:function(){return 80},_getHeight3:function(){return 75},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},drawFigure:function(){var res=[];var arc=this._createArc(this._getWindingConfig(1));res.push(arc);var windingsCount=this._getWindingsCount();var i,circle;for(i=2;i<=windingsCount;i++){circle=this._createCircle(this._getWindingConfig(i));res.push(circle)}return res},connTypeNames:{"1":"north","2":"east","3":"south","4":"west"},_getConnTypeName:function(conn){if(this.connTypeNames.hasOwnProperty(String(conn))){return this.connTypeNames[conn]}else{return null}},_getWindingsCount:function(){var trans=this.getTransformer();var windingsCount=trans.getConfigProperty("figure/windingsCount",null);if(!SLDiagram.isNumber(windingsCount)){windingsCount=2}return windingsCount},_getWindingConfig:function(no){var trans=this.getTransformer();var params=trans.getConfigProperty("figure/windings/"+String(no-1),null);if(typeof params==="object"&&params!==null){params=SLDiagram.Underscore.clone(params)}else{params={}}params=SLDiagram.Underscore.defaults(params,{index:Number(no),U:null,conn:null});return params},_getCircleParams:function(params){var windingsCount=this._getWindingsCount();if(windingsCount===2){return this._getCircleParams1(params)}else{if(windingsCount===4){return this._getCircleParams3(params)}else{if(this.getDirection()==="vertical"){return this._getCircleParamsVertical(params)}else{return this._getCircleParamsHorizontal(params)}}}},_getCircleParams1:function(params){if(params.index!==2){return null}var res={};res.type="circle";res.r=18;if(params.index===2){res.x=0;res.y=0}res.color=this._getColorParams(params);return res},_getCircleParamsVertical:function(params){if(params.index!==2&&params.index!==3){return null}var res={};res.type="circle";res.r=18;if(params.index===2){res.x=0;res.y=-15}else{if(params.index===3){res.x=0;res.y=15}}res.color=this._getColorParams(params);return res},_getCircleParamsHorizontal:function(params){if(params.index!==2&&params.index!==3){return null}var res={};res.type="circle";res.r=18;if(params.index===2){res.x=-15;res.y=0}else{if(params.index===3){res.x=15;res.y=0}}res.color=this._getColorParams(params);return res},_getCircleParams3:function(params){if([2,3,4].indexOf(params.index)<0){return null}var res={};res.type="circle3";res.r=18;if(params.index===2){res.x=-15;res.y=0}else{if(params.index===3){res.x=15;res.y=0}else{if(params.index===4){res.x=0;res.y=-25}}}res.color=this._getColorParams(params);return res},_getArcParams:function(params){var windingsCount=this._getWindingsCount();if(windingsCount===2){return this._getArcParams1(params)}else{if(windingsCount===4){return this._getArcParams3(params)}else{if(this.getDirection()==="vertical"){return this._getArcParamsVertical(params)}else{return this._getArcParamsHorizontal(params)}}}},_getArcParams1:function(params){var res={};res.type="arc";res.x1=18;res.y1=0;res.x2=18;res.y2=-18;res.x3=0;res.y3=-18*1.5;res.r=30;res.color=this._getColorParams(params);return res},_getArcParamsVertical:function(params){var res={};res.type="arc";res.x1=18;res.y1=-15;res.x2=18;res.y2=-15-18;res.x3=0;res.y3=-15-18*1.5;res.r=30;res.color=this._getColorParams(params);return res},_getArcParamsHorizontal:function(params){var res={};res.type="arc";res.x1=15+18;res.y1=0;res.x2=15+18;res.y2=-15-18;res.x3=0;res.y3=-15-18*1.5;res.r=40;res.color=this._getColorParams(params);return res},_getArcParams3:function(params){var res={};res.type="arc3";res.x1=18;res.y1=-25;res.x2=18;res.y2=-25-18;res.x3=0;res.y3=-25-18*1.5;res.r=30;res.color=this._getColorParams(params);return res},_getColorParams:function(params){var trans=this.getTransformer();var defU=trans.getConfigProperty("figure/U",null);var u;var sld,bgColor,bgBright,color;if(SLDiagram.isNumber(params.U)){return trans.getVoltageColor(params.U)}else{if(SLDiagram.isNumber(defU)){return trans.getVoltageColor(defU)}else{sld=trans.getSLDiagram();bgColor=sld.getBackgroundColor();bgBright=SLDiagram.getColorBright(bgColor);if(bgBright==="dark"){return"#FFFFFF"}else{return"#000000"}}}},_getConnCircleParams:function(params){var connName=this._getConnTypeName(params.conn);if(connName===null){return null}var res={};var circle=this._getCircleParams(params);var connR=5;res.points=[];res.type=connName;res.color=this._getColorParams(params);switch(connName){case"north":res.points.push({x:circle.x,y:circle.y-circle.r});res.points.push({x:circle.x,y:circle.y-circle.r-connR});break;case"east":res.points.push({x:circle.x+circle.r,y:circle.y});res.points.push({x:circle.x+circle.r+connR,y:circle.y});break;case"south":res.points.push({x:circle.x,y:circle.y+circle.r});res.points.push({x:circle.x,y:circle.y+circle.r+connR});break;case"west":res.points.push({x:circle.x-circle.r,y:circle.y});res.points.push({x:circle.x-circle.r-connR,y:circle.y});break;default:return null}return res},_getConnArcParams:function(params){if(params.index!==1){return null}var connName="north";var figure=this._getArcParams(params);var res={};res.points=[];res.type=connName;res.color=this._getColorParams(params);switch(connName){case"north":res.points.push({x:figure.x3,y:figure.y3});res.points.push({x:figure.x3,y:figure.y3-5});break;default:return null}return res},_createCircle:function(params){var figure=this._getCircleParams(params);if(figure===null){return null}var conn=this._getConnCircleParams(params);var schemeScale=this.getTransformer().getSLDiagram().getScale();var graphics=new createjs.Graphics();(graphics.setStrokeStyle(schemeScale,"round","round").beginStroke(figure.color).beginFill(null));graphics.drawCircle(figure.x*schemeScale,figure.y*schemeScale,figure.r*schemeScale);if(conn){graphics.beginStroke(conn.color);(graphics.moveTo(conn.points[0].x*schemeScale,conn.points[0].y*schemeScale).lineTo(conn.points[1].x*schemeScale,conn.points[1].y*schemeScale))}var shape=new createjs.Shape(graphics);return shape},_createArc:function(params){var figure=this._getArcParams(params);if(!figure){return null}var conn=this._getConnArcParams(params);var schemeScale=this.getTransformer().getSLDiagram().getScale();var graphics=new createjs.Graphics();(graphics.setStrokeStyle(schemeScale,"round","round").beginStroke(figure.color).beginFill(null));(graphics.moveTo(figure.x1*schemeScale,figure.y1*schemeScale).arcTo(figure.x2*schemeScale,figure.y2*schemeScale,figure.x3*schemeScale,figure.y3*schemeScale,figure.r*schemeScale).lineTo(figure.x3*schemeScale,figure.y3*schemeScale));if(conn){graphics.beginStroke(conn.color);(graphics.moveTo(conn.points[0].x*schemeScale,conn.points[0].y*schemeScale).lineTo(conn.points[1].x*schemeScale,conn.points[1].y*schemeScale))}var shape=new createjs.Shape(graphics);return shape},getIsN:function(){var trans=this.getTransformer();var isN=trans.getConfigProperty("figure/isN",false);return Boolean(isN)},setIsN:function(value){var trans=this.getTransformer();if(value===null){trans.delConfigProperty("figure/isN");return true}trans.setConfigProperty("figure/isN",Boolean(value));return true},getDirection:function(){var isN=this.getIsN();if(isN){return"vertical"}else{return"horizontal"}},setDirection:function(dir){if(dir===null){return this.setIsN(null)}else{if(dir==="horizontal"){return this.setIsN(false)}else{if(dir==="vertical"){return this.setIsN(true)}else{return false}}}},_getWindingsCountPropertyDescriptor:function(){var me=this;return{name:"windingsCount",value:{desc:"Количество обмоток",type:"List",nativeType:"number",list:{2:"1 шт",3:"2 шт",4:"3 шт"},setValue:function(el,value){var prop="figure/windingsCount";var res;var auto;if([2,3,4].indexOf(value)>=0){el.setConfigProperty(prop,value);res=true}else{if(value==="1 шт"){el.setConfigProperty(prop,2);res=true}else{if(value==="2 шт"){el.setConfigProperty(prop,3);res=true}else{if(value==="3 шт"){el.setConfigProperty(prop,4);res=true}else{res=false}}}}auto=el.getAuto();if(res&&auto.hasOwnProperty("_configDescriptor")){delete auto._configDescriptor}return res},getValue:function(el){var value=el.getConfigProperty("figure/windingsCount");if([2,3,4].indexOf(value)>=0){return value}else{return 3}}}}},_getDirectionPropertyDescriptor:function(){return{name:"direction",value:{desc:"Направление",type:"List",nativeType:"boolean",list:{0:"Горизонтальное",1:"Вертикальное"},setValue:function(el,value){var auto=el.getAuto();if(value==1||value==="Вертикальное"){auto.setDirection("vertical")}else{auto.setDirection("horizontal")}return true},getValue:function(el){var direction=el.getAuto().getDirection();if(direction==="vertical"){return 1}else{return 0}}}}},_getWindingsPropertyDescriptor:function(count){return["windings",{children:(function(){var res=[];var i;res.push({name:"0",value:"1",children:SLDiagram.batchConfigPropertyGenerator(["U-transformer"])});for(i=2;i<=count;i++){res.push({name:String(i-1),value:String(i),children:SLDiagram.batchConfigPropertyGenerator(["U-transformer","conn"])})}return res})()}]},_getConfigDescriptor1:function(){var trans=this.getTransformer();var sld=trans.getSLDiagram();var items=[{name:"figure",value:{desc:"Автотрансформатор (1-обмоточный)",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["x","y","rotate","sub",this._getWindingsPropertyDescriptor(2)])}];items[0].children.push(this._getDirectionPropertyDescriptor());items[0].children.push(this._getWindingsCountPropertyDescriptor());return SLDiagram.createConfigDescriptor(trans.config,items,sld)},_getConfigDescriptor2:function(){var trans=this.getTransformer();var sld=trans.getSLDiagram();var items=[{name:"figure",value:{desc:"Автотрансформатор (2х-обмоточный)",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["x","y","rotate","sub",this._getWindingsPropertyDescriptor(3)])}];items[0].children.push(this._getDirectionPropertyDescriptor());items[0].children.push(this._getWindingsCountPropertyDescriptor());return SLDiagram.createConfigDescriptor(trans.config,items,sld)},_getConfigDescriptor3:function(){var trans=this.getTransformer();var sld=trans.getSLDiagram();var items=[{name:"figure",value:{desc:"Автотрансформатор (3х-обмоточный)",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["x","y","rotate","sub",this._getWindingsPropertyDescriptor(4)])}];items[0].children.push(this._getWindingsCountPropertyDescriptor());return SLDiagram.createConfigDescriptor(trans.config,items,sld)},_createConfigDescriptor:function(){var windingsCount;windingsCount=this._getWindingsCount();if(windingsCount===2){this._configDescriptor=this._getConfigDescriptor1()}else{if(windingsCount===3){this._configDescriptor=this._getConfigDescriptor2()}else{if(windingsCount===4){this._configDescriptor=this._getConfigDescriptor3()}else{throw new Error("Неверное число обмоток")}}}return true},getConfigDescriptor:function(){if(!this._configDescriptor){this._createConfigDescriptor()}return this._configDescriptor},_getRelativeSnapPoint:function(no){var config=this._getWindingConfig(no),connParams,res;if(no===1){connParams=this._getConnArcParams(config)}else{connParams=this._getConnCircleParams(config)}if(connParams){res=connParams.points[1]}else{res=null}var el;if(res){el=this.getTransformer();if(el.getXMirror()){res.x=-res.x}if(el.getYMirror()){res.y=-res.y}}return res}};return Auto});define("types/transformer",["core/Type","types/flatType","types/fillRect","types/transformer-helper/auto","types/traits/angle-handler"],function(Type,flatType,fillRect,Auto){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var transformer=new SLDiagram.Type({parentType:flatType,name:"transformer",id:47,description:"Трансформатор силовой (2х-обмоточный)",groupName:"Трансформаторы",setConfigProperty:function(path,value){var newValue;var tValue=this.type.getConfigProperty.call(this.type,path,null,false);var type=null;if(tValue!==null&&typeof tValue!==typeof value){if(SLDiagram.debugMode){console.warn("WARN: Не совпадает тип устанавливаемого значения с общим типом для данного значения. Будет произведено приведение типа.",this,arguments)}type=typeof tValue}switch(type){case"number":newValue=Number(value);if(isNaN(newValue)){if(SLDiagram.debugMode){console.warn('WARN: Не удалось привести устанавливаемое значение к типу "number". Будет использовано общее значение для элементов данного типа',this,arguments)}newValue=tValue}break;case"string":newValue=String(value);break;case"boolean":newValue=Boolean(value);break;default:newValue=value}SLDiagram.setConfigProperty.call(this,path,newValue);if(typeof this.type.canvas==="object"&&this.type.canvas!==null){this.type.canvas.events.fireEvent("onUpdateElementConfig",{path:path,value:value,element:this},"SLDiagram.Type.setConfigProperty")}if(this.calcProps){delete this.calcProps}},config:{figure:{x:0,y:0,windings:{0:{U:"",conn:2,scheme:0},1:{U:"",conn:4,scheme:0}},windingsCount:2,rotate:0,sub:0,sn:0}},configDescriptor:[{name:"figure",value:{desc:"Трансформатор силовой (2х-обмоточный)",expanded:true},children:bgen(["x","y",["windings",{children:(function(){var el=bgen(["U-transformer","conn","scheme"]);var res=[];for(var i=0;i<2;i++){res.push({name:String(i),value:String(i+1),children:SLDiagram.recursCloneObject(el)})}return res})()}],"windingsCount","rotate","sub","sn"])}],draw:function(){var res=Type.prototype.draw.apply(this,arguments);var d=this.displayObject;if(this.getXMirror()){d.scaleX=-1}if(this.getYMirror()){d.scaleY=-1}return res},drawFigure:function(){var auto=this.getAuto();if(auto.isAutotransformer()){return auto.drawFigure()}var res=[];var el=this;var t=el.type;var windingsCount=t.getConfigProperty.call(el,"figure/windingsCount");if([2,3].indexOf(windingsCount)===-1){throw new Error("FATAL: count of windings is incorrect")}var windings=t.getConfigProperty.call(el,"figure/windings");var winding;var no;for(no=0;no<windingsCount;no=no+1){res.push(t.createWindingFigure.call(el,no))}return res},drawSelectRect:function(){var res=[];var size=this.getRealSchemeSize();var pos=this.getRealRelativeTopLeftPosition();var scale=this.getSLDiagram().getScale();var color=this.type.getConfigProperty.call(this,"selection/lineColor");var x,y,w,h;x=(pos.x)*scale;y=(pos.y)*scale;w=(size.width)*scale;h=(size.height)*scale;var shape=new createjs.Shape();(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(x,y,x+w,y,4).dashedLineTo(x+w,y,x+w,y+h,4).dashedLineTo(x+w,y+h,x,y+h,4).dashedLineTo(x,y+h,x,y,4));res.push(shape);return res},drawSnapPoints:function(){return Type.prototype.drawSnapPoints.apply(this,arguments)},getWidth:function(){var auto=this.getAuto();if(auto.isAutotransformer()){return auto.getWidth()}var el=this;var t=el.type;var ws=t.getWindingSize.call(el);var windingsCount=t.getConfigProperty.call(el,"figure/windingsCount");return t.sizes[windingsCount][ws].width},getHeight:function(){var auto=this.getAuto();if(auto.isAutotransformer()){return auto.getHeight()}var el=this;var t=el.type;var ws=t.getWindingSize.call(el);var windingsCount=t.getConfigProperty.call(el,"figure/windingsCount");return t.sizes[windingsCount][ws].height},setWidth:function(w){},setHeigth:function(h){},getTopLeftPosition:function(){var auto=this.getAuto();if(auto.isAutotransformer()){return auto.getTopLeftPosition()}var el=this;var t=el.type;var propName="figure/windingsCount";var windingsCount=t.getConfigProperty.call(el,propName);if(windingsCount>3){windingsCount=3}else{if(windingsCount<2){windingsCount=2}}t.setConfigProperty.call(el,propName,windingsCount);var ws=t.getWindingSize.call(el);return t.topLeftPositions[windingsCount][ws]},getHitArea:function(){var size=this.type.getScreenSize.call(this);var tl=this.type.getScreenTopLeftPosition.call(this);var figure=(new createjs.Graphics().beginFill("#000000").drawRect(tl.x,tl.y,size.width,size.height));return new createjs.Shape(figure)},getRelativeSnapPoints:function(){var auto=this.getAuto();if(auto.isAutotransformer()){return auto.getRelativeSnapPoints()}var el=this;var t=el.type;var res=[];var windingsCount=t.getConfigProperty.call(el,"figure/windingsCount",2);var windings=t.getConfigProperty.call(el,"figure/windings");var windingSize=t.getWindingSize.call(el);var windingsParams=t.windingsParams[windingsCount][windingSize];var angle=t.getRotation.call(el);var winding,windingParams;var i;var conn;var point;for(i=0;i<windingsCount;i=i+1){windingParams=windingsParams[i];conn=t.getConfigProperty.call(el,"figure/windings/"+String(i)+"/conn");switch(String(conn)){case"1":point={x:windingParams.x,y:windingParams.y-windingParams.r-windingParams.connR};break;case"2":point={x:windingParams.x+windingParams.r+windingParams.connR,y:windingParams.y};break;case"3":point={x:windingParams.x,y:windingParams.y+windingParams.r+windingParams.connR};break;case"4":point={x:windingParams.x-windingParams.r-windingParams.connR,y:windingParams.y};break;default:point=null}if(point){if(this.getXMirror()){point.x=-point.x}if(this.getYMirror()){point.y=-point.y}res.push(point)}}return res},getRealSchemeSize:function(){var auto=this.getAuto();if(auto.isAutotransformer()){return auto.getRealSchemeSize()}var el=this;var t=el.type;var res=new Object();var rect={min:{x:Infinity,y:Infinity},max:{x:-Infinity,y:-Infinity}};var no;var windingsCount=t.getConfigProperty.call(el,"figure/windingsCount",2,true);var props;for(no=0;no<windingsCount;no++){props=t.getWindingProps.call(el,no);rect.min.x=Math.min(rect.min.x,props.circle.x-props.circle.r,props.conn.points[0].x,props.conn.points[1].x);rect.min.y=Math.min(rect.min.y,props.circle.y-props.circle.r,props.conn.points[0].y,props.conn.points[1].y);rect.max.x=Math.max(rect.max.x,props.circle.x+props.circle.r,props.conn.points[0].x,props.conn.points[1].x);rect.max.y=Math.max(rect.max.y,props.circle.y+props.circle.r,props.conn.points[0].y,props.conn.points[1].y)}res.width=rect.max.x-rect.min.x+1.5;res.height=rect.max.y-rect.min.y+1.5;return res},getRealRelativeTopLeftPosition:function(){var auto=this.getAuto();if(auto.isAutotransformer()){return auto.getRealRelativeTopLeftPosition()}var el=this;var t=el.type;var res={x:Infinity,y:Infinity};var no;var windingsCount=t.getConfigProperty.call(el,"figure/windingsCount",2,true);var props;for(no=0;no<windingsCount;no++){props=t.getWindingProps.call(el,no);res.x=Math.min(res.x,props.circle.x-props.circle.r,props.conn.points[0].x,props.conn.points[1].x);res.y=Math.min(res.y,props.circle.y-props.circle.r,props.conn.points[0].y,props.conn.points[1].y)}res.x=res.x-0.75;res.y=res.y-0.75;return res},getWindingSize:function(){var el=this;var t=el.type;var sn=t.getConfigProperty.call(el,"figure/sn");return((sn>=1)?"small":"big")},getWindingProps:function(no){var el=this;var t=el.type;var bgColor,bgType,sld;var windingSize=t.getWindingSize.call(el);var windingsCount=t.getConfigProperty.call(el,"figure/windingsCount",2);sld=el.getSLDiagram();if(no<0||no>=windingsCount){return null}if(el.calcProps&&el.calcProps[no]){return el.calcProps[no]}var res=new Object();var windingConfigProps=t.getConfigProperty.call(el,"figure/windings/"+String(no));var defU,defColor;defU=t.getConfigProperty.call(el,"figure/U","");if(windingConfigProps&&typeof windingConfigProps.U!=="undefined"&&windingConfigProps.U!==""){res.color=t.getVoltageColor.call(el,windingConfigProps.U)}else{if(windingConfigProps&&windingConfigProps.U===""&&defU!==""){res.color=(t.getVoltageColor.call(el,defU)||"#000000")}else{bgColor=sld.getBackgroundColor();bgType=SLDiagram.getColorBright(bgColor);if(bgType==="dark"){res.color="#FFFFFF"}else{res.color="#000000"}}}res.conn=new Object();if(windingConfigProps&&typeof windingConfigProps.conn!=="undefined"){res.conn.type=windingConfigProps.conn}else{res.conn.type=t.getConfigProperty.call(el,"figure/windings/"+String(no)+"/conn")}res.symbol=new Object();if(windingConfigProps&&typeof windingConfigProps.scheme!=="undefined"){res.symbol.type=windingConfigProps.scheme}else{res.symbol.type=null}switch(windingSize){case"big":res.symbol.size=8;break;case"small":res.symbol.size=4;break}var windingStaticProps=t.windingsParams[windingsCount][windingSize][no];res.circle=new Object();res.circle.x=windingStaticProps.x;res.circle.y=windingStaticProps.y;res.circle.r=windingStaticProps.r;res.conn.r=windingStaticProps.connR;var x=res.circle.x;var y=res.circle.y;var r=res.circle.r;var connR=res.conn.r;switch(res.conn.type){case 4:res.conn.points=[{x:x-r,y:y},{x:x-r-connR,y:y}];break;case 3:res.conn.points=[{x:x,y:y+r},{x:x,y:y+r+connR}];break;case 2:res.conn.points=[{x:x+r,y:y},{x:x+r+connR,y:y}];break;case 1:res.conn.points=[{x:x,y:y-r},{x:x,y:y-r-connR}];break;default:res.conn.points=[{x:x,y:y},{x:x,y:y}]}if(typeof el.calcProps==="undefined"){el.calcProps=new Object()}el.calcProps[no]=res;return res},createWindingFigure:function(no){var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var figureRotation=t.getRotation.call(el);var wp=t.getWindingProps.call(el,no);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(wp.color).drawCircle(wp.circle.x*scale,wp.circle.y*scale,wp.circle.r*scale).moveTo(wp.conn.points[0].x*scale,wp.conn.points[0].y*scale).lineTo(wp.conn.points[1].x*scale,wp.conn.points[1].y*scale));var shape=new createjs.Shape(figure);var a;var p;if(wp.symbol&&wp.symbol.type===1){a=90-figureRotation;for(var i=0;i<3;i=i+1){p=SLDiagram.calcXandY({a:a,r:wp.symbol.size*scale},{x:wp.circle.x*scale,y:wp.circle.y*scale});shape.graphics.moveTo(wp.circle.x*scale,wp.circle.y*scale).lineTo(p.x,p.y);a=a+120}}else{if(wp.symbol&&(wp.symbol.type===2||wp.symbol.type===4)){a=-90-figureRotation;p=SLDiagram.calcXandY({a:a,r:wp.symbol.size*scale},{x:wp.circle.x*scale,y:wp.circle.y*scale});shape.graphics.moveTo(p.x,p.y);for(var i=0;i<3;i=i+1){a=a+120;p=SLDiagram.calcXandY({a:a,r:wp.symbol.size*scale},{x:wp.circle.x*scale,y:wp.circle.y*scale});shape.graphics.lineTo(p.x,p.y)}}}return shape},sizes:{2:{small:{width:42,height:24},big:{width:70,height:38}},3:{small:{width:42,height:39},big:{width:70,height:64}}},topLeftPositions:{2:{small:{x:-21,y:-12},big:{x:-35,y:-19}},3:{small:{x:-21,y:-27},big:{x:-35,y:-45}}},windingsParams:{2:{small:[{x:9,y:0,r:12,connR:4},{x:-9,y:0,r:12,connR:4}],big:[{x:16,y:0,r:19,connR:10},{x:-16,y:0,r:19,connR:10}]},3:{small:[{x:0,y:-15,r:12,connR:4},{x:9,y:0,r:12,connR:4},{x:-9,y:0,r:12,connR:4}],big:[{x:0,y:-26,r:19,connR:10},{x:16,y:0,r:19,connR:10},{x:-16,y:0,r:19,connR:10}]}},clearCache:function(){if(this.calcProps){delete this.calcProps}return true},getAuto:function(){if(!this._auto){this._auto=new Auto({transformer:this})}return this._auto},getConfigDescriptor:function(){var auto=this.getAuto();if(auto.isAutotransformer()){return auto.getConfigDescriptor()}else{return SLDiagram.Type.prototype.getConfigDescriptor.call(this)}},getVoltageClass:function(){var windingsCount=this.getConfigProperty("figure/windingsCount",2,true),i,u=[],equals=true;u.push(this.getWindingVoltageClass(0));for(i=1;i<windingsCount;i++){u.push(this.getWindingVoltageClass(i));if(u[i]!==u[i-1]){equals=false}}if(equals){return u[0]}else{return u}},setVoltageClass:function(value){var windingCount=this.getConfigProperty("figure/windingsCount",2),i,res=true;for(i=0;i<windingCount;i++){if(!this.setWindingVoltageClass(i,value)){res=false}}return res},getWindingVoltageClass:function(num){var sld=this.getSLDiagram(),path="figure/windings/"+String(num)+"/U",u=this.getConfigProperty(path,null,false),voltage=sld.getConfigProperty("voltageColors/"+String(u),null,false);if(voltage===null){return null}else{return u}},setWindingVoltageClass:function(num,value){var sld=this.getSLDiagram(),path="figure/windings/"+String(num)+"/U";if(value===null||value===""){this.delConfigProperty(path);sld.setDefaultVoltageClass(null);return true}else{if((typeof value==="string"&&value.length>0)||(typeof value==="number")){value=String(value);voltage=sld.getConfigProperty("voltageColors/"+value,null,false);if(voltage===null){return false}else{this.setConfigProperty(path,value);sld.setDefaultVoltageClass(value);return true}}else{return false}}},getCornRects:SLDiagram.AngleHandler.getSimpleGetter(),getXMirror:function(){var prop=this.getConfigProperty("figure/xMirror",0,true);return Boolean(prop)},setXMirror:function(value){var v=((value)?1:0);this.setConfigProperty("figure/xMirror",v);return true},getYMirror:function(){var yMirror=this.getConfigProperty("figure/yMirror",0,true);return Boolean(yMirror)},setYMirror:function(value){var v=((value)?1:0);this.setConfigProperty("figure/yMirror",v);return true}});return transformer});define("types/transformer3",["types/transformer"],function(transformer){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var transformer3=new SLDiagram.Type({parentType:transformer,name:"transformer3",id:48,description:"Трансформатор силовой (3х-обмоточный)",config:{figure:{x:0,y:0,windings:{0:{U:"",conn:1,scheme:0},1:{U:"",conn:2,scheme:0},2:{U:"",conn:4,scheme:0}},windingsCount:3,rotate:0,sub:0,sn:0}},configDescriptor:[{name:"figure",value:{desc:"Трансформатор силовой (3х-обмоточный)",expanded:true},children:bgen(["x","y",["windings",{children:(function(){var el=bgen(["U-transformer","conn","scheme"]);var res=[];for(var i=0;i<3;i++){res.push({name:String(i),value:String(i+1),children:SLDiagram.recursCloneObject(el)})}return res})()}],"windingsCount","rotate","sub","sn"])}]});return transformer3});define("types/transformerV",["types/transformer"],function(transformer){var transformerV=new SLDiagram.Type({parentType:transformer,name:"transformerV",id:55,description:"Трансформатор напряжения",config:{figure:{U:"",x:0,y:0,windings:{0:{U:"",conn:1,scheme:0},1:{U:"",conn:0,scheme:0},2:{U:"",conn:0,scheme:0}},windingsCount:3,rotate:0,sub:0,sn:1,tn:0}},configDescriptor:[{name:"figure",value:{desc:"Трансформатор напряжения",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["U","x","y","windingsCount","rotate","sub","sn","tn"])}],windingsParams:{2:{small:[{x:0,y:-7,r:9,connR:4},{x:0,y:7,r:9,connR:0}],big:[{x:9,y:0,r:12,connR:4},{x:-9,y:0,r:12,connR:4}]},3:{small:[{x:0,y:-11,r:9,connR:4},{x:7,y:0,r:9,connR:0},{x:-7,y:0,r:9,connR:0}],big:[{x:0,y:-15,r:12,connR:4},{x:9,y:0,r:12,connR:4},{x:-9,y:0,r:12,connR:4}]}},sizes:{2:{small:{width:18,height:32},big:{width:-(-9-12)+9+12,height:12*2}},3:{small:{width:32,height:29},big:{width:-(-9-12)+9+12,height:-(-15-12)+12}}},topLeftPositions:{2:{small:{x:-9,y:-16},big:{x:-9-12,y:-12}},3:{small:{x:-7-9,y:-11-9},big:{x:-9-12,y:-15-12}}}});return transformerV});define("types/coupling",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var RealSizes=RealGenerator({offset:0.75});var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var coupling=new SLDiagram.Type({name:"coupling",id:32,description:"Муфта",groupName:"Муфты, кабельный разъем",parentType:flatType,config:{figure:{U:"",rotate:0,x:0,y:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Муфта",expanded:true},children:bgen(["U","rotate","x","y","sub"])}],drawFigure:function(){var res=[];var width=this.type.getScreenWidth.call(this);var height=this.type.getScreenHeigth.call(this);var scale=this.type.canvas.getScale();var u=this.type.getConfigProperty.call(this,"figure/U");var color=this.type.getVoltageColor.call(this,u);var figure=new createjs.Graphics().beginStroke(color).setStrokeStyle(scale,"round","round").moveTo(0,-6*scale).lineTo(-6*scale,0).lineTo(6*scale,0).lineTo(0,-6*scale).lineTo(0,(-6-5)*scale).moveTo(0,0).lineTo(0,5*scale);var shape=new createjs.Shape(figure);res.push(shape);return res},setPosition:function(x,y){this.type.setConfigProperty.call(this,"figure/x",x);this.type.setConfigProperty.call(this,"figure/y",y)},getRotation:function(){return this.type.getConfigProperty.call(this,"figure/rotate")},getHitArea:RealSizes.getHitArea,getWidth:function(){return 12},getHeight:function(){return 5+6+5},getTopLeftPosition:function(){return{x:-6,y:-6-5}},snapPoints:[{x:0,y:-6-5},{x:0,y:5}],getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return coupling});define("types/breaker162",["types/breaker164","types/traits/invert"],function(breaker164,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var breaker162=new SLDiagram.Type({name:"breaker162",id:162,description:"Разъединитель",groupName:"Разъединители, отделители",parentType:breaker164,config:{figure:{U:"",rotate:0,state:false,ts:"",x:0,y:0,statuses:["OIC_DST_VALUENOCORRECT"],sub:0,scale:1}},configDescriptor:[{name:"figure",value:{desc:"Разъединитель",expanded:true},children:bgen(["U","rotate","state","x","y","statuses","sub","scale","identifier"])}],drawFigure:function(){var res=[];var scale=this.type.canvas.getScale();var u=this.type.getConfigProperty.call(this,"figure/U");var color=this.type.getVoltageColor.call(this,u);var figureScale=this.getType().getConfigProperty.call(this,"figure/scale",1);var coef=scale*figureScale;var figure=new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(-3*coef,-8*coef).lineTo(3*coef,-8*coef).moveTo(-3*coef,8*coef).lineTo(3*coef,8*coef);var shape=new createjs.Shape(figure);var state=this.getRenderedValue();if(state==false){shape.graphics.moveTo(-5*coef,0).lineTo(5*coef,0)}else{shape.graphics.moveTo(0,-5*coef).lineTo(0,5*coef)}res.push(shape);return res},setPosition:function(x,y){this.type.setConfigProperty.call(this,"figure/x",x);this.type.setConfigProperty.call(this,"figure/y",y)},getRotation:function(){return this.type.getConfigProperty.call(this,"figure/rotate")},getHitArea:function(){var size=this.type.getScreenSize.call(this);var figure=new createjs.Graphics().beginFill("#000000").drawRect(-size.width/2,-size.height/2,size.width,size.height);return new createjs.Shape(figure)},getWidth:function(){var figureScale=this.getType().getConfigProperty.call(this,"figure/scale",1);return 10*figureScale},getHeight:function(){var figureScale=this.getType().getConfigProperty.call(this,"figure/scale",1);return 16*figureScale},setWidth:function(w){},setHeigth:function(h){},getRelativeSnapPoints:function(){var res=[];var figureScale=this.getType().getConfigProperty.call(this,"figure/scale",1);res[0]={x:0,y:-8*figureScale};res[1]={x:0,y:8*figureScale};return res}});Invert.extend(breaker162);return breaker162});define("types/groundBreaker",["types/breaker164"],function(breaker164){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var groundBreaker=new SLDiagram.Type({name:"groundBreaker",id:1054,description:"Заземляющий нож",groupName:"Debug",parentType:breaker164,config:{figure:{U:"",dl:0,rotate:0,ts:"",x:0,y:0,sub:0,state:false}},configDescriptor:[{name:"figure",value:{desc:"Заземляющий нож",expanded:true},children:bgen(["U","dl","rotate","identifier","x","y","sub","state"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(this,u);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(-3*scale,0).lineTo(3*scale,0).moveTo(-3*scale,-14*scale).lineTo(3*scale,-14*scale).moveTo(0,-14*scale).lineTo(0,-17*scale).moveTo(-6*scale,-17*scale).lineTo(6*scale,-17*scale).moveTo(-4*scale,-20*scale).lineTo(4*scale,-20*scale).moveTo(-2*scale,-23*scale).lineTo(2*scale,-23*scale).moveTo(0,0).lineTo(0,8*scale));var shape=new createjs.Shape(figure);var state=this.getRenderedValue();if(state===false){shape.graphics.moveTo(-5*scale,-7*scale).lineTo(5*scale,-7*scale)}else{shape.graphics.moveTo(0,-2*scale).lineTo(0,-12*scale)}res.push(shape);return res},getHitArea:function(){var el=this;var t=el.type;var size=t.getScreenSize.call(el);var figure=(new createjs.Graphics().beginFill("#000000").drawRect(-size.width/2,-size.height,size.width,size.height));return new createjs.Shape(figure)},getWidth:function(){return 12},getHeight:function(){return 31},setWidth:function(w){},setHeight:function(h){},getTopLeftPosition:function(){return{x:-6,y:-23}},snapPoints:[{x:0,y:8}]});return groundBreaker});define("types/groundBreaker2",["types/breaker164","types/traits/real-generator","types/traits/invert"],function(breaker164,RealGenerator,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var groundBreaker2=new SLDiagram.Type({name:"groundBreaker2",id:54,description:"Заземляющий нож",groupName:"Заземления",parentType:breaker164,config:{figure:{U:"",dl:0,rotate:0,ts:"",x:0,y:0,sub:0,state:false}},configDescriptor:[{name:"figure",value:{desc:"Заземляющий нож",expanded:true},children:bgen(["U","dl","rotate","identifier","x","y","sub","state"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(this,u);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(-3*scale,0).lineTo(3*scale,0).moveTo(-3*scale,14*scale).lineTo(3*scale,14*scale).moveTo(0,14*scale).lineTo(0,17*scale).moveTo(-6*scale,17*scale).lineTo(6*scale,17*scale).moveTo(-4*scale,20*scale).lineTo(4*scale,20*scale).moveTo(-2*scale,23*scale).lineTo(2*scale,23*scale).moveTo(0,0).lineTo(0,-8*scale));var shape=new createjs.Shape(figure);var state=this.getRenderedValue();if(state===false){shape.graphics.moveTo(-5*scale,7*scale).lineTo(5*scale,7*scale)}else{shape.graphics.moveTo(0,2*scale).lineTo(0,12*scale)}res.push(shape);return res},getHitArea:function(){var el=this;var t=el.type;var size=t.getScreenSize.call(el);var tlPos=t.getScreenTopLeftPosition.call(el);var figure=(new createjs.Graphics().beginFill("#000000").drawRect(tlPos.x,tlPos.y,size.width,size.height));return new createjs.Shape(figure)},getWidth:function(){return 12},getHeight:function(){return 31},setWidth:function(w){},setHeight:function(h){},getTopLeftPosition:function(){return{x:-6,y:-8}},getRelativeSnapPoints:function(){return[{x:0,y:-8}]},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});Invert.extend(groundBreaker2);return groundBreaker2});define("types/switcher",["types/breaker164","types/fillRect","types/traits/angle-handler","types/traits/invert","types/traits/real-generator"],function(breaker164,fillRect,AngleHandler,Invert,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var switcher=new SLDiagram.Type({name:"switcher",id:41,description:"Выключатель",groupName:"Выключатели",parentType:breaker164,config:{figure:{U:"",scale:1,state:true,ts:"",x:0,y:0,rotate:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Выключатель",expanded:true},children:bgen(["U","scale","state","identifier","x","y","rotate","sub"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var lineColor=t.getVoltageColor.call(el,u);var value=this.getRenderedValue();var onColor=this.getConfigProperty("figure/onColor","#FF0000");var offColor=this.getConfigProperty("figure/offColor","#00FF00");var fillColor=((value===true)?onColor:offColor);var figureScale=t.getConfigProperty.call(el,"figure/scale");var s=t.getScreenSize.call(el);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(lineColor).beginFill(fillColor).drawRect(-s.width/2,-s.height/2,s.width,s.height).beginFill(null).moveTo(0,-s.height/2).lineTo(0,-s.height/2-(s.width/6)).moveTo(0,s.height/2).lineTo(0,s.height/2+(s.width/6)));var shape=new createjs.Shape(figure);res.push(shape);return res},drawSelectRect:function(){var res,shape,sld,schemeScale,color,tl,size,x,y,w,h;sld=this.getSLDiagram();schemeScale=sld.getScale();shape=new createjs.Shape();color=this.getConfigProperty("selection/lineColor",null);color=SLDiagram.toColor(color)||"#00FF00";tl=this.getRealRelativeTopLeftPosition();x=tl.x*schemeScale;y=tl.y*schemeScale;size=this.getRealScreenSize();w=size.width;h=size.height;(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(x,y,x+w,y,4).dashedLineTo(x+w,y,x+w,y+h,4).dashedLineTo(x+w,y+h,x,y+h,4).dashedLineTo(x,y+h,x,y,4));res=[shape];return res},getWidth:function(){var figureScale=this.type.getConfigProperty.call(this,"figure/scale",1);return(0.4*Math.pow(figureScale,3))-(1.3*Math.pow(figureScale,2))+(10.1*figureScale)+6.7},getHeight:function(){return this.type.getWidth.call(this)},setWidth:function(w){if(!(SLDiagram.isNumber(w))){console.error("ERROR: argument is not number");w=18}this.type.setConfigProperty.call(this,"figure/scale",Number(w/18))},setHeight:function(h){this.type.setWidth.call(this,h)},getValue:function(){return((this.type.getConfigProperty.call(this,"figure/state",0)>0)?true:false)},setValue:function(v){this.type.setConfigProperty.call(this,"figure/state",((v===true||v>0)?1:0))},changeValue:function(){var v=this.type.getValue.call(this);this.type.setValue.call(this,!v)},getRelativeSnapPoints:function(){var el=this;var t=el.type;var size=t.getSize.call(el);var points=[{x:0,y:-(size.height/2+5)},{x:0,y:(size.height/2+5)}];return points},getRealSchemeSize:function(){var el=this;var t=el.type;var size=t.getSize.call(el);return{width:size.width+1.5,height:size.height+10+1.5}},getRealRelativeTopLeftPosition:function(){var el=this;var t=el.type;var tlPos=t.getTopLeftPosition.call(el);return{x:tlPos.x-0.75,y:tlPos.y-5-0.75}},getCornRects:AngleHandler.getSimpleGetter(),getHitArea:RealSizes.getHitArea});Invert.extend(switcher);return switcher});define("types/switcher43",["types/switcher","types/traits/angle-handler","types/traits/invert-state-and-pullstate"],function(switcher,AngleHandler,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var switcher43=new SLDiagram.Type({name:"switcher43",id:43,description:"Выключатель выдвижной",groupName:"Выключатели",parentType:switcher,config:{figure:{U:"",scale:1,state:false,ts:"",x:0,y:0,rotate:0,sub:0,pullState:true}},configDescriptor:[{name:"figure",value:{desc:"Выключатель выдвижной",expanded:true},children:bgen(["U","scale","state","identifier","x","y","rotate","sub","pullState"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var pullState=t.getConfigProperty.call(el,"figure/pullState");var lineColor=t.getVoltageColor.call(el,u);var value=this.getRenderedValue();var onColor=this.getConfigProperty("figure/onColor","#FF0000");var offColor=this.getConfigProperty("figure/offColor","#00FF00");var fillColor=((value===true)?onColor:offColor);var figureScale=t.getConfigProperty.call(el,"figure/scale");var arrowCoef=figureScale*0.8;var s=t.getScreenSize.call(el);var dx=t.getPullDx.call(el);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(lineColor).beginFill(fillColor).drawRect(-s.width/2+dx*scale,-s.height/2,s.width,s.height).moveTo(dx*scale,-s.height/2).lineTo(dx*scale,-25*scale*arrowCoef).moveTo(dx*scale,-25*scale*arrowCoef).lineTo(-6*scale+dx*scale,-25*scale*arrowCoef+7*scale).moveTo(dx*scale,-25*scale*arrowCoef).lineTo(6*scale+dx*scale,-25*scale*arrowCoef+7*scale).moveTo(0,-25*scale*arrowCoef-7*scale).lineTo(-6*scale,-25*scale*arrowCoef-1*scale).moveTo(0,-25*scale*arrowCoef-7*scale).lineTo(6*scale,-25*scale*arrowCoef-1*scale).moveTo(dx*scale,s.height/2).lineTo(dx*scale,25*scale*arrowCoef).moveTo(dx*scale,25*scale*arrowCoef).lineTo(-6*scale+dx*scale,25*scale*arrowCoef-7*scale).moveTo(dx*scale,25*scale*arrowCoef).lineTo(6*scale+dx*scale,25*scale*arrowCoef-7*scale).moveTo(0,25*scale*arrowCoef+7*scale).lineTo(-6*scale,25*scale*arrowCoef+1*scale).moveTo(0,25*scale*arrowCoef+7*scale).lineTo(6*scale,25*scale*arrowCoef+1*scale));var shape=new createjs.Shape(figure);res.push(shape);return res},setWidth:function(w){if(!(SLDiagram.isNumber(w))){console.error("ERROR: argument is not number");w=17}if(w>38){w=38}else{if(w<6){w=6}}this.type.setConfigProperty.call(this,"figure/scale",Number(w/17))},setHeight:function(h){this.type.setWidth.call(this,h)},getRealSchemeSize:function(){var el=this;var t=el.getType();var schemeSize=t.getSize.call(el);var figureScale=t.getConfigProperty.call(el,"figure/scale",1);var dx=t.getPullDx.call(el);var res={};var arrowCoef=figureScale*0.8;res.width=Math.max(6+dx+schemeSize.width/2,schemeSize.width);res.width+=1.5;res.height=(25*arrowCoef+7)*2+1.5;return res},getRealRelativeTopLeftPosition:function(){var el=this;var t=el.getType();var realSchemeSize=t.getRealSchemeSize.call(el);var schemeSize=t.getSize.call(el);var res={};var dx=t.getPullDx.call(el);res.y=-realSchemeSize.height/2;if(dx>0){if(-schemeSize.width/2+dx<-6){res.x=-schemeSize.width/2+dx}else{res.x=-6}}else{res.x=-schemeSize.width/2}res.x-=0.75;return res},getWidth:function(){var figureScale=this.type.getConfigProperty.call(this,"figure/scale",1);return figureScale*17},getHeight:function(){return this.type.getWidth.call(this)},getTopLeftPosition:function(){var dx=this.type.getPullDx.call(this);var size=this.type.getSize.call(this);return{x:-size.width/2+dx,y:-size.height/2}},getPullDx:function(){var pullState=this.getRenderedPullState();return((pullState)?0:15)},setPullState:function(state){var value=((state)?1:0);this.type.setConfigProperty.call(this,"figure/pullState",value)},getPullState:function(){var def=this.type.getConfigProperty("figure/pullState",false,false);var value=this.type.getConfigProperty.call(this,"figure/pullState",def,false);return Boolean(value)},getHitArea:function(){var size=this.getRealSchemeSize();var tlpos=this.getRealRelativeTopLeftPosition();var scale=this.getSLDiagram().getScale();var figure=new createjs.Graphics().beginFill("#000000").drawRect(tlpos.x*scale,tlpos.y*scale,size.width*scale,size.height*scale);return new createjs.Shape(figure)},getRelativeSnapPoints:function(){var type=this.getType();var figureScale=type.getConfigProperty.call(this,"figure/scale",1);var arrowCoef=figureScale*0.8;return[{x:0,y:-25*arrowCoef-7},{x:0,y:25*arrowCoef+7}]},getCornRects:AngleHandler.getSimpleGetter(),datasourcesNames:["main","pullState","telecontrol"]});Invert.extend(switcher43);return switcher43});define("types/fuse154",["types/breaker49","types/traits/invert-pullstate"],function(breaker49,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var fuse154=new SLDiagram.Type({name:"fuse154",id:154,description:"Предохранитель на тележке",groupName:"Предохранители",parentType:breaker49,config:{figure:{U:"",x:0,y:0,rotate:0,sub:0,pullState:true,ts:null}},configDescriptor:[{name:"figure",value:{desc:"Предохранитель на тележке",expanded:true},children:bgen(["U","x","y","rotate","sub","pullState","identifier"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var dx=t.getPullDx.call(el);dx=dx*scale;var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).drawRect(-4*scale+dx,-8*scale,8*scale,16*scale).moveTo(0+dx,-19*scale).lineTo(0+dx,19*scale).moveTo(0+dx,-19*scale).lineTo(-4*scale+dx,-15*scale).moveTo(0+dx,-19*scale).lineTo(4*scale+dx,-15*scale).moveTo(0,-24*scale).lineTo(-4*scale,-20*scale).moveTo(0,-24*scale).lineTo(4*scale,-20*scale).moveTo(0+dx,19*scale).lineTo(-4*scale+dx,15*scale).moveTo(0+dx,19*scale).lineTo(4*scale+dx,15*scale).moveTo(0,24*scale).lineTo(-4*scale,20*scale).moveTo(0,24*scale).lineTo(4*scale,20*scale));var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){return 8},getHeight:function(){return 48},setWidth:function(w){},setHeight:function(h){},snapPoints:[{x:0,y:-24},{x:0,y:24}],setPullState:function(state){var value=((state)?1:0);this.type.setConfigProperty.call(this,"figure/pullState",value)},getPullState:function(){var def=this.type.getConfigProperty("figure/pullState",false,false);var value=this.type.getConfigProperty.call(this,"figure/pullState",def,false);return Boolean(value)},getPullDx:function(){var state=this.type.getRenderedPullState.call(this);return((state)?0:15)},getTopLeftPosition:function(){var dx=this.type.getPullDx.call(this);var size=this.type.getSize.call(this);return{x:-size.width/2+dx,y:-size.height/2}},getRealSchemeSize:function(){var size=this.type.getSize.call(this);var dx=this.type.getPullDx.call(this);return{width:size.width+dx+1.5,height:size.height+1.5}},getRealRelativeTopLeftPosition:function(){return{x:-4-0.75,y:-24-0.75}},datasourcesNames:["pullState"]});Invert.extend(fuse154);return fuse154});define("types/text",["core/Type","types/flatType"],function(Type,flatType){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var text=new SLDiagram.Type({name:"text",id:5,description:"Текст",groupName:"Графические элементы",parentType:flatType,config:{figure:{text:"text",scale:0,color:"#000000",x:0,y:0,rotate:0,sub:0,align:"left",valign:"top"}},configDescriptor:[{name:"figure",value:{desc:"Текст",expanded:true},children:bgen(["text","x","y","rotate","sub","fontScaleForText","text_color","textAlign","valign","fontSizeForText"])}],afterSetSLDiagram:function(sld){sld.events.listen("onUpdateSchemeConfig",this.onUpdateSchemeConfig,{block:true,anyContext:true},this);var data={path:"scheme/backColor",value:sld.getConfigProperty("scheme/backColor",null,false)};this.type.onUpdateSchemeConfig.call(this,null,null,data)},drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var color=SLDiagram.toColor(t.getConfigProperty.call(el,"figure/color","#000000"));var scale=t.canvas.getScale();var text=String(t.getConfigProperty.call(el,"figure/text"));text=text.replace(new RegExp("#x9","g"),"\n");var fontSize=t.getFontSize.call(el,scale);var fontStyle=t.getFontStyle.call(el);el.text=new createjs.Text(text,fontStyle+fontSize+"px Arial",color);el.text.isEmpty=function(){return false};el.text.textAlign=this.getTextAlign();el.text.textBaseline="top";var valign=this.getTextVAlign();var shape=new createjs.Shape(el.text);res.push(shape);return res},setPosition:function(x,y){var pos={x:x,y:y};var textAlign=this.getTextAlign();var textVAlign=this.getTextVAlign();var size=this.getSize();if(textAlign==="center"){pos.x-=size.width/2}else{if(textAlign==="right"){pos.x-=size.width}}switch(textVAlign){case"middle":pos.y+=size.height/2;break;case"bottom":pos.y+=size.height;break}this.type.setConfigProperty.call(this,"figure/x",pos.x);this.type.setConfigProperty.call(this,"figure/y",pos.y)},getPosition:function(){var res={};var textAlign=this.getTextAlign();var textVAlign=this.getTextVAlign();var size=this.getSize();res.x=this.getConfigProperty("figure/x",0);res.y=this.getConfigProperty("figure/y",0);if(textAlign==="center"){res.x+=size.width/2}else{if(textAlign==="right"){res.x+=size.width}}switch(textVAlign){case"middle":res.y-=size.height/2;break;case"bottom":res.y-=size.height;break}return res},getRotation:function(){return this.type.getConfigProperty.call(this,"figure/rotate",0)},getHitArea:function(){var figure,pos,size;pos=this.getScreenTopLeftPosition();size=this.getScreenSize();var valign=this.getTextVAlign();switch(valign){case"middle":pos.y-=size.height/2;break;case"bottom":pos.y-=size.height;break}figure=new createjs.Graphics().beginFill("#000000").drawRect(pos.x,pos.y,size.width,size.height);return new createjs.Shape(figure)},getWidth:function(){var scale=this.getSLDiagram().getScale();return this.getScreenWidth()/scale},getHeight:function(){var scale=this.getSLDiagram().getScale();return this.getScreenHeigth()/scale},getScreenWidth:function(){var bounds;if(typeof this.text==="object"&&this.text!==null){bounds=this.text.getBounds();if(bounds&&typeof bounds.width==="number"){return bounds.width}else{return this.text.getMeasuredWidth()}}else{return 1}},getScreenHeigth:function(){var bounds;if(typeof this.text==="object"&&this.text!==null){bounds=this.text.getBounds();if(bounds&&typeof bounds.height==="number"){return bounds.height}else{return this.text.getMeasuredHeight()}}else{return 1}},setWidth:function(w){},setHeigth:function(h){},getTopLeftPosition:function(){var tl,scale;tl=this.getScreenTopLeftPosition();scale=this.getSLDiagram().getScale();return{x:tl.x/scale,y:tl.y/scale}},getScreenTopLeftPosition:function(){var size=this.type.getSize.call(this);var height=this.getScreenHeigth();var width=this.getScreenWidth();var align=this.getTextAlign();var valign=this.getTextVAlign();var res={};if(align==="left"){res.x=0}else{if(align==="center"){res.x=-width/2}else{if(align==="right"){res.x=-width}else{res.x=0}}}switch(valign){case"top":res.y=0;break;case"middle":res.y=height/2;break;case"bottom":res.y=height;break;default:res.y=0}return res},clear:function(){delete this.displayObject;delete this.text},snapPoints:[{x:0,y:0}],getImageForCursor:function(){this.getSLDiagram().disableSetChangedState();var res={};SLDiagram.extendEaselJS();var type=this;var container=new createjs.Container();var el=new SLDiagram.Element({type:type});var scale=type.canvas.getScale();type.setPosition.call(el,0,0);var figures=el.type.drawFigure.call(el);var selects=el.drawSelectRect();var i,shape;for(i in figures){if(figures.hasOwnProperty(i)){shape=figures[i];container.addChild(shape)}}for(i in selects){if(selects.hasOwnProperty(i)){shape=selects[i];container.addChild(shape)}}type.setPosition.call(el,0,0);var pos=type.getRealRelativeTopLeftPosition.call(el);pos.x=pos.x*scale;pos.y=pos.y*scale;var size=type.getRealScreenSize.call(el);container.setTransform(-pos.x+3,-pos.y+3);var canvas=document.createElement("canvas");canvas.width=size.width+6;canvas.height=size.height+6;var stage=new createjs.Stage(canvas);stage.addChild(container);stage.update();res.url=canvas.toDataURL("image/png");res.x=-pos.x+3;res.y=-pos.y+3;res.width=size.width+6;res.height=size.height+6;res.toString=function(){var res='url("'+this.url+'")';if(typeof this.x==="number"&&typeof this.y==="number"){res=res+" "+String(this.x)+" "+String(this.y)}res=res+", auto";return res};this.getSLDiagram().enableSetChangedState();return res},getRawFontSize:function(){var value=this.getConfigProperty("figure/scale");if(value===null){value=0}else{if(value>7){value=4}else{if(value<-7){value=-4}}}return Number(value)},getFontSize:function(scale){var selfScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;var size=SLDiagram.toNumber(this.getConfigProperty("figure/fontSize"))||8;size=96*size/72;return size*selfScale*scale},getFontStyle:function(){var bold=this.type.getConfigProperty.call(this,"figure/stB");if(bold==1){bold="bold "}else{bold=""}return bold},onUpdateSchemeConfig:function(events,type,data){var backColor;var textColor="#000000";if(data&&data.path==="scheme/backColor"){backColor=SLDiagram.toColor(data.value);if(!(backColor===null||SLDiagram.getColorBright(backColor)==="light")){textColor="#FFFFFF"}this.type.setConfigProperty.call(this,"figure/color",textColor)}},beforeGetImageForPalette:function(){var el=this;var t=el.type;var origConfig={textColor:(SLDiagram.toColor(t.getConfigProperty.call(el,"figure/color",null,false))||"#000000")};t.setConfigProperty.call(el,"figure/color","#000000");return origConfig},afterGetImageForPalette:function(origConfig){var el=this;var t=el.type;t.setConfigProperty.call(el,"figure/color",origConfig.textColor)},getTextAlign:function(){var value=this.getConfigProperty("figure/align",null);if(typeof value!=="string"||value.length===0){return"left"}if(["left","center","right"].indexOf(value.toLowerCase())>=0){return value.toLowerCase()}else{return"left"}},setTextAlign:function(align){if(align===null){this.delConfigProperty("figure/align");return true}if(typeof align!=="string"||align.length===0){return false}if(["left","center","right"].indexOf(align.toLowerCase())>=0){this.setConfigProperty("figure/align",align.toLowerCase());return true}else{return false}},getTextVAlign:function(){var value=this.getConfigProperty("figure/valign",null);if(typeof value!=="string"||value.length===0){return"top"}value=value.toLowerCase();if(["top","middle","bottom"].indexOf(value)){return value}else{return"top"}},setTextVAlign:function(align){if(align===null){this.delConfigProperty("figure/valign");return true}if(typeof align!=="string"||align.length===0){return false}align=align.toLowerCase();if(["top","middle","bottom"].indexOf(align)>=0){this.setConfigProperty("figure/valign",align);return true}else{return false}},drawSelectRect:function(){var res=[];var size=this.type.getScreenSize.call(this);var pos=this.type.getScreenTopLeftPosition.call(this);var color=this.type.getConfigProperty.call(this,"selection/lineColor");var shape=new createjs.Shape();var valign=this.getTextVAlign();switch(valign){case"middle":pos.y-=size.height/2;break;case"bottom":pos.y-=size.height;break}size.height+=5*this.getSLDiagram().getScale();(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(pos.x,pos.y,pos.x+size.width,pos.y,4).dashedLineTo(pos.x+size.width,pos.y,pos.x+size.width,pos.y+size.height,4).dashedLineTo(pos.x+size.width,pos.y+size.height,pos.x,pos.y+size.height,4).dashedLineTo(pos.x,pos.y+size.height,pos.x,pos.y,4));res.push(shape);return res}});Type.prototype.getRawFontSize=function(){};return text});define("types/digitaldevice/statusstyles/deps",["core/sldiagram","core/StatusStyle","core/StatusStyleBottomRight","utils/Utils"],function(SLDiagram){if(!SLDiagram.digitaldevice){SLDiagram.digitaldevice={}}if(!SLDiagram.digitaldevice.statusstyles){SLDiagram.digitaldevice.statusstyles={}}return SLDiagram});define("types/digitaldevice/statusstyles/StatusStyle",["types/digitaldevice/statusstyles/deps"],function(SLDiagram){var StatusStyle=function(){this._init.apply(this,arguments)};StatusStyle.prototype=SLDiagram.Utils.extend(new SLDiagram.StatusStyle(),{getRelativeRegion:function(el){var t,schemeScale,tl,padding,res;t=el.getType();schemeScale=el.getSLDiagram().getScale();tl=t.getTopLeftPosition.call(el);size=t.getSize.call(el);padding=this.getPadding();res={x:tl.x*schemeScale-padding*schemeScale,y:tl.y*schemeScale-padding*schemeScale,width:size.width*schemeScale+padding*2*schemeScale,height:size.height*schemeScale+padding*2*schemeScale};return res}});SLDiagram.digitaldevice.statusstyles.StatusStyle=StatusStyle;return StatusStyle});define("types/digitaldevice/statusstyles/StatusStyleTopRight",["types/digitaldevice/statusstyles/deps"],function(SLDiagram){var StatusStyleTopRight=function(){this._init.apply(this,arguments)};StatusStyleTopRight.prototype=SLDiagram.Utils.extend(new SLDiagram.StatusStyleBottomRight(),{getRelativeRegion:function(el){var type=el.getType();var schemeScale=el.getSLDiagram().getScale();var tl=type.getTopLeftPosition.call(el);var size=type.getSize.call(el);var padding=this.getPadding();var statusSize=7;var res={x:tl.x*schemeScale+size.width*schemeScale-statusSize*schemeScale,y:tl.y*schemeScale,width:statusSize*schemeScale,height:statusSize*schemeScale};return res}});SLDiagram.digitaldevice.statusstyles.StatusStyleTopRight=StatusStyleTopRight;return StatusStyleTopRight});define("types/digitaldevice/statusstyles/StatusStyleBottomRight",["types/digitaldevice/statusstyles/deps"],function(SLDiagram){var StatusStyleBottomRight=function(){this._init.apply(this,arguments)};StatusStyleBottomRight.prototype=SLDiagram.Utils.extend(new SLDiagram.StatusStyleBottomRight(),{getRelativeRegion:function(el){var t=el.getType(),schemeScale=el.getSLDiagram().getScale(),tl=t.getTopLeftPosition.call(el),size=t.getSize.call(el),padding=this.getPadding(),res,statusSize=7;res={x:tl.x*schemeScale+size.width*schemeScale-statusSize*schemeScale,y:tl.y*schemeScale+size.height*schemeScale-statusSize*schemeScale,width:statusSize*schemeScale,height:statusSize*schemeScale};return res}});SLDiagram.digitaldevice.statusstyles.StatusStyleBottomRight=StatusStyleBottomRight;return StatusStyleBottomRight});define("types/digitaldevice/statusstyles/StatusStyleBottomRightInside",["types/digitaldevice/statusstyles/deps","types/digitaldevice/statusstyles/StatusStyle"],function(SLDiagram){var StatusStyleBottomRightInside=function(){this._init.apply(this,arguments)};StatusStyleBottomRightInside.prototype=Object.create(SLDiagram.digitaldevice.statusstyles.StatusStyle.prototype);StatusStyleBottomRightInside.prototype.getRelativeRegion=function(el){var schemeScale=el.getSLDiagram().getScale(),tl=el.getTopLeftPosition(),size=el.getSize(),padding=this.getPadding(),res,statusSize=5;res={x:tl.x*schemeScale+size.width*schemeScale-statusSize*schemeScale-2*schemeScale,y:tl.y*schemeScale+size.height*schemeScale-statusSize*schemeScale,width:statusSize*schemeScale,height:statusSize*schemeScale};return res};SLDiagram.digitaldevice.statusstyles.StatusStyleBottomRightInside=StatusStyleBottomRightInside;return StatusStyleBottomRightInside});define("types/digitaldevice/statusstyles/all",["types/digitaldevice/statusstyles/deps","types/digitaldevice/statusstyles/StatusStyle","types/digitaldevice/statusstyles/StatusStyleTopRight","types/digitaldevice/statusstyles/StatusStyleBottomRight","types/digitaldevice/statusstyles/StatusStyleBottomRightInside"],function(SLDiagram){return SLDiagram.digitaldevice.statusstyles});define("types/traits/digitaldevice-scale",["core/IsNumber"],function(IsNumber){var Invert={functions:{getInvertState:function(){var scale=this.getMainDatasourceScale();return((scale>0)?false:true)},setInvertState:function(value){if(value){return this.setMainDatasourceScale(-1)}else{return this.setMainDatasourceScale(1)}},getMainDatasourceScale:function(){var value=this.getConfigProperty("figure/scaleCoefficient",1,true);return value},setMainDatasourceScale:function(value){if(!IsNumber(value)){return false}this.setConfigProperty("figure/scaleCoefficient",Number(value));return true},getInvertPullState:function(){return false},setInvertPullState:function(){return false},getPullstateDatasourceScale:function(){return 1},setPullstateDatasourceScale:function(){return false},getRawValue:function(){var value=this.getConfigProperty("figure/value",0);return Number(value)},setRawValue:function(value){if(typeof value==="number"){this.setConfigProperty("figure/value",value);return true}else{if(typeof value==="string"&&isFinite(value)){value=Number(value);this.setConfigProperty("figure/value",value);return true}else{if(typeof value==="boolean"){this.setConfigProperty("figure/value",((value)?1:0))}else{return false}}}},getValue:function(){return this.getRawValue()},getRenderedValue:function(){return this.getValue()},setValue:function(value){var scale=this.getMainDatasourceScale();if(IsNumber(value)){value=Number(value);value*=scale;return this.setRawValue(value)}else{if(typeof value==="boolean"){value=scale*((value)?1:0);return this.setRawValue(value)}else{return false}}},getRawPullState:function(){return false},setRawPullState:function(){return false},getPullState:function(){return this.getRawPullState()},getRenderedPullState:function(){return this.getPullState()},setPullState:function(value){return this.setRawPullState(value)},setTelecontrolDatasourceScale:function(value){return false},getTelecontrolDatasourceScale:function(){return 1}},extend:function(proto){var fnName;for(fnName in this.functions){if(this.functions.hasOwnProperty(fnName)){proto[fnName]=this.functions[fnName]}}return true}};return Invert});define("types/digitalDevice",["types/breaker164","types/line","types/text","types/digitaldevice/statusstyles/all","core/Cursors","types/traits/digitaldevice-scale"],function(breaker164,line,text,statusstyles,Cursors,DigitalDeviceScale){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var digitalDevice=new SLDiagram.Type({name:"digitalDevice",id:134,description:"Прибор цифровой",groupName:"Устройства индикации",parentType:breaker164,config:{figure:{ti:null,x1:-30,y1:-10,x2:30,y2:10,unit:"",borderColor:"AAAAAA",uColor:"FFFFFF",textColor:"#000000",align:"center",font:8,acc:2,value:"0.00",statusPadding:2,countDigits:2,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Прибор цифровой",expanded:true},children:bgen(["identifier","x1","y1","x2","y2","sub","colorLine","backColor","textColor2","font","value","countDigits","unit","textAlign","statusPadding","acc"])}],drawFigure:function(){var res=[];var borderColor=this.type.getConfigProperty.call(this,"figure/borderColor","#AAAAAA");var uColor=this.type.getConfigProperty.call(this,"figure/uColor","#FFFFFF");var color=this.type.getConfigProperty.call(this,"figure/textColor","#000000");borderColor=SLDiagram.toColor(borderColor);uColor=SLDiagram.toColor(uColor);color=SLDiagram.toColor(color);var scale=this.type.canvas.getScale();var fontSize=this.type.getConfigProperty.call(this,"figure/font",8)*scale;var fontStyle="bold ";var value=this.getRenderedValue();var countDigits=this.type.getConfigProperty.call(this,"figure/countDigits",2);if(isNaN(countDigits)||!isFinite(countDigits)||countDigits<0){countDigits=0}if(!isNaN(value)&&isFinite(value)){value=(Number(value)).toFixed(countDigits)}var size=this.type.getScreenSize.call(this);var tlpos=this.getTopLeftPosition();tlpos.x*=scale;tlpos.y*=scale;var rect=new createjs.Graphics().beginFill(uColor).beginStroke(borderColor).drawRect(tlpos.x,tlpos.y,size.width,size.height);var rectShape=new createjs.Shape(rect);res.push(rectShape);this.text=new createjs.Text(value,fontStyle+fontSize+"pt Arial",color);this.text.isEmpty=function(){return false};var align=this.getTextAlign();this.text.textAlign=align;this.text.textBaseline="middle";var textShape=new createjs.Shape(this.text);if(align==="left"){textShape.x=-size.width/2+5}else{if(align==="right"){textShape.x=size.width/2-5}else{}}res.push(textShape);return res},drawSelectRect:function(){var res,shape,sld,schemeScale,color,tl,size,x,y,w,h,margin=2;sld=this.getSLDiagram();schemeScale=sld.getScale();shape=new createjs.Shape();color=this.getConfigProperty("selection/lineColor",null);color=SLDiagram.toColor(color)||"#00FF00";tl=this.getTopLeftPosition();x=tl.x*schemeScale-margin;y=tl.y*schemeScale-margin;size=this.getSize();w=size.width*schemeScale+2*margin;h=size.height*schemeScale+2*margin;(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(x,y,x+w,y,4).dashedLineTo(x+w,y,x+w,y+h,4).dashedLineTo(x+w,y+h,x,y+h,4).dashedLineTo(x,y+h,x,y,4));res=[shape];return res},getStatusStyles:function(){if(this._statusStyles){return this._statusStyles}var sld=this.getSLDiagram(),styles=sld._defaultsStatusStyles,i,style;this._statusStyles={};for(i in styles){if(styles.hasOwnProperty(i)){style=styles[i];if(SLDiagram.digitaldevice.statusstyles[style.className]){this._statusStyles[i]=new SLDiagram.digitaldevice.statusstyles[style.className](style)}}}return this._statusStyles},getStatuses:function(){if(this._statuses){return this._statuses}var sld,styles,res,i,style,type,getRelativeRegion,getRelativeRegionBottomRight;type=this.type;sld=this.getSLDiagram();styles=type.getStatusStyles.call(this);res={};for(i in styles){if(styles.hasOwnProperty(i)){style=styles[i];res[i]=new SLDiagram.Status({element:this,statusStyle:style})}}this._statuses=res;return this._statuses},getPosition:line.getPosition,move:line.move,setPosition:line.setPosition,getWidth:line.getWidth,getHeight:line.getHeight,setWidth:function(w){var el=this;var t=el.type;if(w<25){w=25}var wOld=t.getWidth.call(el);var dw=w-wOld;var x2=t.getConfigProperty.call(el,"figure/x2",0);t.setConfigProperty.call(el,"figure/x2",x2+dw)},setHeigth:function(h){var el=this;var t=el.type;if(h<15){h=15}var hOld=t.getHeight.call(el);var dh=h-hOld;var y2=t.getConfigProperty.call(el,"figure/y2",0);t.setConfigProperty.call(el,"figure/y2",y2+dh)},getHitArea:function(){var size=this.type.getScreenSize.call(this);var figure=new createjs.Graphics().beginFill("#000000").drawRect(-size.width/2,-size.height/2,size.width,size.height);return new createjs.Shape(figure)},clear:text.clear,getId:function(){var el=this;var t=el.type;var ti=t.getConfigProperty.call(el,"figure/ti",null,false);var a;if(ti===null){return null}try{a=ti.split(".")}catch(ex){return null}if(a.length!=3&&!(SLDiagram.isNumber(a[2]))){return null}else{return Number(a[2])}},setId:function(id){var el=this;var t=el.type;if(id===null){t.delConfigProperty.call(el,"figure/ti")}else{t.setConfigProperty.call(el,"figure/ti","1.1."+String(id))}var isActive=t.isActive.call(el);if(isActive){t.canvas.addActiveElement(el)}else{t.canvas.removeActiveElement(el)}},getValue:function(){return this.type.getConfigProperty.call(this,"figure/value","0.00")},setValue:function(value){if(typeof value!="undefined"){this.type.setConfigProperty.call(this,"figure/value",value)}},getCornRects:function(){var el=this;var t=el.type;var rects=[];var rectNames=["TopLeft","TopRight","BottomLeft","BottomRight"];for(var i in rectNames){if(rectNames.hasOwnProperty(i)){var rectName=rectNames[i];rects.push(new SLDiagram.CornRect({type:rectName,element:el,draw:function(){return this.element.type.corns.draw.call(this)},getRelativePoint:function(){return this.element.type.corns.getRelativePoint.call(this)},beforeMove:function(e){return(e.target.cornRect.element.type.corns.beforeMove.call(e.target.cornRect,e))},onMove:function(e){return(e.target.cornRect.element.type.corns.onResizerMove.call(e.target.cornRect,e))},afterMove:function(e){return(e.target.cornRect.element.type.corns.afterResizerMove.call(e.target.cornRect,e))}}))}}return rects},getRelativeSnapPoints:function(){var el=this;var t=el.type;var schemePoints=t.getPoints.call(el,1);var relativePoints={begin:{x:schemePoints.begin.x-schemePoints.center.x,y:schemePoints.begin.y-schemePoints.center.y},end:{x:schemePoints.end.x-schemePoints.center.x,y:schemePoints.end.y-schemePoints.center.y}};var p=relativePoints;var res=[{x:p.begin.x,y:p.begin.y},{x:p.end.x,y:p.begin.y},{x:p.begin.x,y:p.end.y},{x:p.end.x,y:p.end.y}];return res},getRealScreenSize:function(){var size=this.getSize();var schemeScale=this.getSLDiagram().getScale();var res={width:size.width*schemeScale+4,height:size.height*schemeScale+4};return res},getRealRelativeTopLeftPosition:function(){var pos=this.type.getTopLeftPosition.call(this);return{x:pos.x-2,y:pos.y-2}},getRealScreenTopLeftPosition:function(){var pos=this.getTopLeftPosition();var schemeScale=this.getSLDiagram().getScale();var res={x:pos.x*schemeScale-2,y:pos.y*schemeScale-2};return res},getPoints:line.getPoints,getFontStyle:text.getFontStyle,corns:{draw:function(){var cr=this;var el=cr.element;var t=el.type;var shape=new createjs.Shape();var topLeftPos=t.getTopLeftPosition.call(el);var size=t.getSize.call(el);var crPos=cr.getRelativePoint();var scale=t.canvas.getScale();var crFillColor=t.getConfigProperty.call(el,"selection/rect/color","#FFFF00");var crSize=t.getConfigProperty.call(el,"selection/rect/size",5);var selectionColor=t.getConfigProperty.call(el,"selection/lineColor","#00FF00");var angle=t.getRotation.call(el);var dmzCorns=SLDiagram.cursorCollections.dmzCorns;shape.graphics.beginFill(crFillColor).setStrokeStyle(1,"round","round").beginStroke(selectionColor);switch(cr.type){case"TopLeft":shape.graphics.drawRect(crPos.x*scale-crSize,crPos.y*scale-crSize,crSize,crSize);shape.cursor=Cursors.arrow(angle-135);break;case"TopRight":shape.graphics.drawRect(crPos.x*scale,crPos.y*scale-crSize,crSize,crSize);shape.cursor=Cursors.arrow(angle-45);break;case"BottomLeft":shape.graphics.drawRect(crPos.x*scale-crSize,crPos.y*scale,crSize,crSize);shape.cursor=Cursors.arrow(angle+135);break;case"BottomRight":shape.graphics.drawRect(crPos.x*scale,crPos.y*scale,crSize,crSize);shape.cursor=Cursors.arrow(angle+45);break;case"Rotate":default:(shape.graphics.beginFill(null).setStrokeStyle(1,"round","round").beginStroke(selectionColor).dashedLineTo(crPos.x*scale,topLeftPos.y*scale,crPos.x*scale,crPos.y*scale-crSize/2,4).beginFill(crFillColor).drawCircle(crPos.x*scale,crPos.y*scale,crSize/2));shape.cursor="url('shared/icons/fam/arrow_rotate_clockwise.png') 8 8, auto"}return shape},getRelativePoint:function(){var cr=this;var el=cr.element;var t=el.type;var topLeftPos=t.getTopLeftPosition.call(el);var size=t.getSize.call(el);var res={};switch(cr.type){case"TopLeft":res={x:topLeftPos.x,y:topLeftPos.y};break;case"TopRight":res={x:topLeftPos.x+size.width,y:topLeftPos.y};break;case"BottomLeft":res={x:topLeftPos.x,y:topLeftPos.y+size.height};break;case"BottomRight":res={x:topLeftPos.x+size.width,y:topLeftPos.y+size.height};break;case"Rotate":default:res={x:0,y:topLeftPos.y-20}}return res},beforeMove:function(e){var cr=e.target.cornRect;var el=cr.element;var t=el.type;var mouseScreenPos={x:e.stageX,y:e.stageY};t.setSysConfigProperty.call(el,"move",{mouseScreenPos:mouseScreenPos,x1:t.getConfigProperty.call(el,"figure/x1",0),y1:t.getConfigProperty.call(el,"figure/y1",0),x2:t.getConfigProperty.call(el,"figure/x2",0),y2:t.getConfigProperty.call(el,"figure/y2",0)})},onResizerMove:function(e){var cr=e.target.cornRect;var el=cr.element;var t=el.type;var size;var minWidth=el.getMinWidth(),minHeight=el.getMinHeight();var scale=t.canvas.getScale();var oldMouseScreenPos=t.getSysConfigProperty.call(el,"move/mouseScreenPos",{x:0,y:0},false);var newMouseScreenPos={x:e.stageX,y:e.stageY};var screenDiff={x:newMouseScreenPos.x-oldMouseScreenPos.x,y:newMouseScreenPos.y-oldMouseScreenPos.y};var schemeDiff={x:screenDiff.x/scale,y:screenDiff.y/scale};var xPropName,yPropName;var sign={x:0,y:0};switch(cr.type){case"TopLeft":xPropName="x1";yPropName="y1";sign.x=-1;sign.y=-1;break;case"TopRight":xPropName="x2";yPropName="y1";sign.x=+1;sign.y=-1;break;case"BottomLeft":xPropName="x1";yPropName="y2";sign.x=-1;sign.y=+1;break;case"BottomRight":xPropName="x2";yPropName="y2";sign.x=+1;sign.y=+1;break;default:return}var x=t.getSysConfigProperty.call(el,"move/"+xPropName,0)+schemeDiff.x;var y=t.getSysConfigProperty.call(el,"move/"+yPropName,0)+schemeDiff.y;if(e.type==="mouseup"){var deltaForSnap=t.canvas.calcDeltaForSnap({x:x,y:y,elementCaller:el});x=x+deltaForSnap.dx;y=y+deltaForSnap.dy}var startSize={width:el.getSysConfigProperty("move/x2",0)-el.getSysConfigProperty("move/x1",0),height:el.getSysConfigProperty("move/y2",0)-el.getSysConfigProperty("move/y1",0)};var diffSize={x:schemeDiff.x*sign.x,y:schemeDiff.y*sign.y};var currentSize={width:startSize.width+diffSize.x,height:startSize.height+diffSize.y};if(currentSize.width<minWidth){diffSize.x=diffSize.x+(minWidth-currentSize.width);currentSize.width=minWidth;schemeDiff.x=diffSize.x*sign.x;x=el.getSysConfigProperty("move/"+xPropName,0)+schemeDiff.x}if(currentSize.height<minHeight){diffSize.y=diffSize.y+(minHeight-currentSize.height);currentSize.height=minHeight;schemeDiff.y=diffSize.y*sign.y;y=el.getSysConfigProperty("move/"+yPropName,0)+schemeDiff.y}x=SLDiagram.precisionNumber(x,4);y=SLDiagram.precisionNumber(y,4);t.setConfigProperty.call(el,"figure/"+xPropName,x);t.setConfigProperty.call(el,"figure/"+yPropName,y);t.draw.call(el);t.canvas.stage.update()},afterResizerMove:function(e){var cr=e.target.cornRect;var el=cr.element;var t=el.type;e.type="mouseup";cr.onMove(e);t.delSysConfigProperty.call(el,"move");t.draw.call(el);t.canvas.stage.update()},onRotaterMove:function(e){},afterRotaterMove:function(e){}},getItemsForContextMenu:function(){return[]},getValueType:function(){return"number"},setBackgroundColor:function(color){if(color===null){this.delConfigProperty("figure/uColor");return true}color=SLDiagram.toColor(color);if(color===null){return false}else{this.setConfigProperty("figure/uColor",color);return true}},getBackgroundColor:function(){return this.getConfigProperty("figure/uColor",null,true)},setLineColor:function(color){if(color===null){this.delConfigProperty("figure/borderColor");return true}color=SLDiagram.toColor(color);if(color===null){return false}else{this.setConfigProperty("figure/borderColor",color);return true}},getLineColor:function(){return this.getConfigProperty("figure/borderColor",null,true)},datasourcesNames:["main"],getImageForCursor:function(){this.getSLDiagram().disableSetChangedState();var res={};SLDiagram.extendEaselJS();var type=this;var container=new createjs.Container();var el=new SLDiagram.Element({type:type});var scale=type.canvas.getScale();type.setPosition.call(el,0,0);var pos=type.getRealScreenTopLeftPosition.call(el);var size=type.getRealScreenSize.call(el);var figures=el.type.drawFigure.call(el);var selects=el.drawSelectRect();var i,shape;for(i in figures){if(figures.hasOwnProperty(i)){shape=figures[i];container.addChild(shape)}}for(i in selects){if(selects.hasOwnProperty(i)){shape=selects[i];container.addChild(shape)}}container.setTransform(-pos.x+3,-pos.y+3);var canvas=document.createElement("canvas");canvas.width=size.width+6;canvas.height=size.height+6;var stage=new createjs.Stage(canvas);stage.addChild(container);stage.update();res.url=canvas.toDataURL("image/png");res.x=-pos.x+3;res.y=-pos.y+3;res.width=size.width+6;res.height=size.height+6;res.toString=function(){var res='url("'+this.url+'")';if(typeof this.x==="number"&&typeof this.y==="number"){res=res+" "+String(this.x)+" "+String(this.y)}res=res+", auto";return res};this.getSLDiagram().enableSetChangedState();return res},getMinWidth:function(){return 25},getMinHeight:function(){return 15},getTextAlign:function(){var value=this.getConfigProperty("figure/align",null);if(typeof value!=="string"||value.length===0){return"left"}if(["left","center","right"].indexOf(value.toLowerCase())>=0){return value.toLowerCase()}else{return"left"}},setTextAlign:function(align){if(align===null){this.delConfigProperty("figure/align");return true}if(typeof align!=="string"||align.length===0){return false}if(["left","center","right"].indexOf(align.toLowerCase())>=0){this.setConfigProperty("figure/align",align.toLowerCase());return true}else{return false}}});DigitalDeviceScale.extend(digitalDevice);return digitalDevice});define("types/rect",["types/flatType","types/digitalDevice"],function(flatType,digitalDevice){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=SLDiagram.realGenerator({offset:0.5});var rect=new SLDiagram.Type({name:"rect",id:3,description:"Прямоугольник",groupName:"Графические элементы",config:{figure:{x1:-20,y1:-20,x2:20,y2:20,backColor:"#AAAAAA",color:"#CCCCCC",sub:0}},configDescriptor:[{name:"figure",value:{desc:"Прямоугольник",expanded:true},children:bgen(["x1","y1","x2","y2","backColor","colorLine","sub"])}],drawDashedFigure:function(figure,color,backColor,schemeScale,x,y,w,h){if((backColor===null)||(backColor==="")){(figure.setStrokeStyle(1).beginStroke(color).dashedLineTo(x,y,x+w,y,2*schemeScale).dashedLineTo(x+w,y,x+w,y+h,2*schemeScale).dashedLineTo(x+w,y+h,x,y+h,2*schemeScale).dashedLineTo(x,y+h,x,y,2*schemeScale).beginStroke("rgba(255,255,255,0.01)").beginFill("rgba(255,255,255,0.01)").rect(x,y,w,h))}else{(figure.setStrokeStyle(1).beginStroke(color).dashedLineTo(x,y,x+w,y,2*schemeScale).dashedLineTo(x+w,y,x+w,y+h,2*schemeScale).dashedLineTo(x+w,y+h,x,y+h,2*schemeScale).dashedLineTo(x,y+h,x,y,2*schemeScale).beginStroke("rgba(255,255,255,0.01)").beginFill(backColor).rect(x,y,w,h))}},drawFigure:function(){var res,schemeScale,sld,figure,shape,color,backColor,dashedLine,x1,y1,x2,y2,w,h,points;res=[];sld=this.getSLDiagram();schemeScale=sld.getScale();color=this.getConfigProperty("figure/color",null);backColor=this.getConfigProperty("figure/backColor",null);dashedLine=this.getConfigProperty("figure/dashedLine",null);color=SLDiagram.toColor(color)||"#CCCCCC";points=this.getPoints(schemeScale);x1=points.begin.x-points.center.x;y1=points.begin.y-points.center.y;x2=points.end.x-points.center.x;y2=points.end.y-points.center.y;w=x2-x1;h=y2-y1;figure=new createjs.Graphics();if(dashedLine===null){if((backColor===null)||(backColor==="")){(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).beginFill("rgba(255,255,255,0.01)").rect(x1,y1,w,h))}else{(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).beginFill(backColor).rect(x1,y1,w,h))}}else{this.drawDashedFigure(figure,color,backColor,1.5,x1,y1,w,h)}shape=new createjs.Shape(figure);res.push(shape);return res},getPoints:function(scale){if(typeof scale==="undefined"||scale===null){scale=this.getSLDiagram().getScale()}var p,x1,y1,x2,y2;x1=SLDiagram.precisionNumber(this.getConfigProperty("figure/x1")*scale,4);y1=SLDiagram.precisionNumber(this.getConfigProperty("figure/y1")*scale,4);x2=SLDiagram.precisionNumber(this.getConfigProperty("figure/x2")*scale,4);y2=SLDiagram.precisionNumber(this.getConfigProperty("figure/y2")*scale,4);p={begin:{x:Math.min(x1,x2),y:Math.min(y1,y2)},end:{x:Math.max(x1,x2),y:Math.max(y1,y2)}};p.center={x:SLDiagram.precisionNumber(p.begin.x+(p.end.x-p.begin.x)/2,4),y:SLDiagram.precisionNumber(p.begin.y+(p.end.y-p.begin.y)/2,4)};return p},getWidth:function(){var points=this.getPoints(1);var width=points.end.x-points.begin.x;return width},getHeight:function(){var points=this.getPoints(1);var height=points.end.y-points.begin.y;return height},setWidth:function(w){var points=this.getPoints(1);var x1=SLDiagram.precisionNumber(points.begin.x-w/2,4);var x2=SLDiagram.precisionNumber(points.end.x+w/2,4);this.setConfigProperty("figure/x1",x1);this.setConfigProperty("figure/x2",x2)},setHeigth:function(h){var points=this.getPoints.call(this,1);var y1=SLDiagram.precisionNumber(points.begin.y-h/2,4);var y2=SLDiagram.precisionNumber(points.end.y+h/2,4);this.setConfigProperty("figure/y1",y1);this.setConfigProperty("figure/y2",y2)},move:function(dx,dy){var sld,rtree,checkRTree,p;sld=this.getSLDiagram();rtree=sld.rtree;checkRTree=Boolean(typeof this.id!=="undefined"&&typeof rtree!=="undefined"&&rtree!==null);if(checkRTree){rtree.remove(this.id)}dx=SLDiagram.precisionNumber(dx,4);dy=SLDiagram.precisionNumber(dy,4);p=this.getPoints(1);p.begin.x+=dx;p.end.x+=dx;p.begin.y+=dy;p.end.y+=dy;this.setConfigProperty("figure/x1",p.begin.x);this.setConfigProperty("figure/y1",p.begin.y);this.setConfigProperty("figure/x2",p.end.x);this.setConfigProperty("figure/y2",p.end.y);if(checkRTree){rtree.insert(this.id)}},setPosition:function(x,y){var pos,dx,dy;pos=this.getType().getPosition.call(this);dx=x-pos.x;dy=y-pos.y;this.getType().move.call(this,dx,dy)},getPosition:function(){var p=this.getType().getPoints.call(this,1);return{x:p.center.x,y:p.center.y}},getRotation:function(){return 0},setRotation:function(r){},corns:digitalDevice.corns,getCornRects:digitalDevice.getCornRects,getBackgroundColor:function(){return this.getConfigProperty("figure/backColor",null)},setBackgroundColor:function(color){if(color===null){this.delConfigProperty("figure/backColor");return true}color=SLDiagram.toColor(color);if(color===null){return false}else{this.setConfigProperty("figure/backColor",color);return true}},getLineColor:function(){return this.getConfigProperty("figure/color")},setLineColor:function(color){if(color===null){this.delConfigProperty("figure/color");return true}color=SLDiagram.toColor(color);if(color===null){return false}else{this.setConfigProperty("figure/color",color);return true}},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect,getMinWidth:function(){return 2},getMinHeight:function(){return 2},getRelativeSnapPoints:function(){var points=this.getPoints(1),topLeft,topRight,bottomLeft,bottomRight;topLeft={x:points.begin.x-points.center.x,y:points.begin.y-points.center.y};topRight={x:points.end.x-points.center.x,y:points.begin.y-points.center.y};bottomLeft={x:points.begin.x-points.center.x,y:points.end.y-points.center.y};bottomRight={x:points.end.x-points.center.x,y:points.end.y-points.center.y};return[topLeft,topRight,bottomLeft,bottomRight]}});return rect});define("types/fuse203",["types/flatType","types/rect"],function(flatType,rect){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=SLDiagram.realGenerator({offset:1.5});var fuse203=new SLDiagram.Type({name:"fuse203",id:203,description:"Предохранитель",groupName:"Предохранители",parentType:flatType,config:{figure:{U:"",x:0,y:0,rotate:0,sub:0,scale:1}},configDescriptor:[{name:"figure",value:{desc:"Предохранитель",expanded:true},children:bgen(["U","x","y","rotate","sub","scale"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var fs=t.getScale.call(this);var s=scale*fs;var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).drawRect(-4*s,-8*s,8*s,16*s).moveTo(0,-8*s).lineTo(0,8*s));var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){var s=this.getType().getScale.call(this);return 8*s},getHeight:function(){var s=this.getType().getScale.call(this);return 16*s},setWidth:function(w){},setHeight:function(h){},getHitArea:function(){var size=this.type.getScreenSize.call(this);var figure=(new createjs.Graphics().beginFill("#000000").drawRect(-size.width/2,-size.height/2,size.width,size.height));return new createjs.Shape(figure)},getRelativeSnapPoints:function(){var s=this.getType().getScale.call(this);return[{x:0,y:-8*s},{x:0,y:8*s}]},getScale:function(){return this.getType().getConfigProperty.call(this,"figure/scale",1)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return fuse203});define("types/capacitor",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var capacitor=new SLDiagram.Type({name:"capacitor",id:388,description:"Конденсатор",groupName:"Устройства компенсации",parentType:flatType,config:{figure:{U:"",rotate:0,x:0,y:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Конденсатор",expanded:true},children:bgen(["U","rotate","x","y","sub"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(-10*scale,-3*scale).lineTo(10*scale,-3*scale).moveTo(-10*scale,3*scale).lineTo(10*scale,3*scale).moveTo(0,-3*scale).lineTo(0,-8*scale).moveTo(0,3*scale).lineTo(0,8*scale));var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){return 20},getHeight:function(){return 16},setWidth:function(w){},setHeight:function(h){},getHitArea:function(){var size=this.type.getScreenSize.call(this);var figure=(new createjs.Graphics().beginFill("#000000").drawRect(-size.width/2,-size.height/2,size.width,size.height));return new createjs.Shape(figure)},snapPoints:[{x:0,y:-8},{x:0,y:8}],getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return capacitor});define("types/sparkGap",["types/flatType","types/rect","types/traits/real-generator"],function(flatType,rect,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:1.5});var sparkGap=new SLDiagram.Type({name:"sparkGap",id:35,description:"Разрядник трубчатый",groupName:"Разрядники",parentType:flatType,config:{figure:{U:"",dl:0,rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"Разрядник трубчатый",expanded:true},children:bgen(["U","dl","rotate","sub","x","y"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).drawRect(-4*scale,-8*scale,8*scale,16*scale).moveTo(0,3*scale).lineTo(0,8*scale).moveTo(0,3*scale).lineTo(2*scale,6*scale).moveTo(0,3*scale).lineTo(-2*scale,6*scale).moveTo(0,-3*scale).lineTo(0,-8*scale).moveTo(0,-3*scale).lineTo(2*scale,-6*scale).moveTo(0,-3*scale).lineTo(-2*scale,-6*scale));var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){return 8},getHeight:function(){return 16},setWidth:function(w){},setHeight:function(h){},getHitArea:function(){var size=this.type.getScreenSize.call(this);var tlPos=this.type.getTopLeftPosition.call(this);var scale=this.type.canvas.getScale();var figure=(new createjs.Graphics().beginFill("#000000").drawRect(tlPos.x*scale,tlPos.y*scale,size.width,size.height));return new createjs.Shape(figure)},snapPoints:[{x:0,y:-8},{x:0,y:8}],getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return sparkGap});define("types/varistor",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var RealSizes=RealGenerator({offset:0.75});var bgen=SLDiagram.batchConfigPropertyGenerator;var varistor=new SLDiagram.Type({name:"varistor",id:168,description:"ОПН",groupName:"Разрядники",parentType:flatType,config:{figure:{U:"",dl:0,rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"ОПН",expanded:true},children:bgen(["U","dl","rotate","sub","x","y"])}],drawFigure:function(){var schemeScale=this.getSLDiagram().getScale();var elementScale=this.getScale();var scale=schemeScale*elementScale;var lineColor=this.getVoltageColor(this.getConfigProperty("figure/U"));var xMirror=this.getConfigProperty("figure/xMirror",0,false);var tl=this.getTopLeftPosition();var offset={x:tl.x*schemeScale,y:tl.y*schemeScale};if(xMirror){var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(8*scale,0*scale).lineTo(8*scale,6*scale).drawRect(4*scale,6*scale,8*scale,21*scale).moveTo(0,7*scale).lineTo(15*scale,26*scale).lineTo(15*scale,30*scale).moveTo(8*scale,27*scale).lineTo(8*scale,36*scale).moveTo(2*scale,36*scale).lineTo(14*scale,36*scale).moveTo(4*scale,39*scale).lineTo(12*scale,39*scale).moveTo(6*scale,42*scale).lineTo(10*scale,42*scale)}else{var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(8*scale,0*scale).lineTo(8*scale,6*scale).drawRect(4*scale,6*scale,8*scale,21*scale).moveTo(15*scale,7*scale).lineTo(0*scale,26*scale).lineTo(0*scale,30*scale).moveTo(8*scale,27*scale).lineTo(8*scale,36*scale).moveTo(2*scale,36*scale).lineTo(14*scale,36*scale).moveTo(4*scale,39*scale).lineTo(12*scale,39*scale).moveTo(6*scale,42*scale).lineTo(10*scale,42*scale)}var shape=new createjs.Shape(figure);shape.setTransform(offset.x,offset.y);return[shape]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 15*this.getScale()},getHeight:function(){return 42*this.getScale()},getTopLeftPosition:function(){var scale=this.getScale();return{x:-8*scale,y:-16*scale}},getRelativeSnapPoints:function(){var scale=this.getScale();var tl=this.getTopLeftPosition();var snapPoint={x:8,y:0};return[{x:snapPoint.x*scale+tl.x,y:snapPoint.y*scale+tl.y}]},getHitArea:function(){var size=this.getSize();var tl=this.getTopLeftPosition();var elementScale=this.getScale();var schemeScale=this.getSLDiagram().getScale();var scale=elementScale*schemeScale;var figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*scale,size.height*scale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return varistor});define("types/ground",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var ground=new SLDiagram.Type({name:"ground",id:31,description:"Заземляющее устройство",groupName:"Заземления",parentType:flatType,config:{figure:{U:"",dl:0,rotate:0,x:0,y:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Заземляющее устройство",expanded:true},children:bgen(["U","rotate","x","y","sub","dl"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(-6*scale,1*scale).lineTo(6*scale,1*scale).moveTo(-4*scale,4*scale).lineTo(4*scale,4*scale).moveTo(-2*scale,7*scale).lineTo(2*scale,7*scale).moveTo(0,1*scale).lineTo(0,-7*scale));var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){return 12},getHeight:function(){return 14},setWidth:function(w){},setHeight:function(h){},getHitArea:function(){var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var s=t.getScreenSize.call(el);return new createjs.Shape(new createjs.Graphics().beginFill("#000000").drawRect(-s.width/2,-s.height/2,s.width,s.height))},snapPoints:[{x:0,y:-7}],getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return ground});define("types/type52",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var type52=new SLDiagram.Type({name:"type52",id:52,description:"Полушасси",groupName:"Выключатели",parentType:flatType,config:{figure:{U:"",rotate:0,x:0,y:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Полушасси",expanded:true},children:bgen(["U","rotate","x","y","sub"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var figure=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(0,-2*scale).lineTo(0,-8*scale).moveTo(0,2*scale).lineTo(0,-2*scale).moveTo(0,2*scale).lineTo(-4*scale,-2*scale).moveTo(0,2*scale).lineTo(4*scale,-2*scale).moveTo(0,8*scale).lineTo(-4*scale,4*scale).moveTo(0,8*scale).lineTo(4*scale,4*scale));var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){return 8},getHeight:function(){return 16},setWidth:function(w){},setHeight:function(h){},getTopLeftPosition:function(){return{x:-4,y:-8}},getHitArea:function(){var size=this.type.getScreenSize.call(this);var tl=this.type.getScreenTopLeftPosition.call(this);var figure=(new createjs.Graphics().beginFill("#000000").drawRect(tl.x,tl.y,size.width,size.height));return new createjs.Shape(figure)},snapPoints:[{x:0,y:-8},{x:0,y:8}],getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return type52});define("types/point1102",["types/flatType"],function(flatType){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var point=new SLDiagram.Type({name:"point1102",id:1102,description:"Точка",groupName:"Линии, шины, соединительные элементы",config:{figure:{U:"",x:0,y:0,sub:0,transparent:false}},configDescriptor:[{name:"figure",value:{desc:"Точка",expanded:true},children:bgen(["U","x","y","sub","transparent"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var sub=t.getConfigProperty.call(el,"figure/sub");var transparent=this.getConfigProperty("figure/transparent",false);var u,color;if(transparent){color=sld.getConfigProperty("scheme/backColor","#F8F8F8",false)}else{u=t.getConfigProperty.call(el,"figure/U");color=t.getVoltageColor.call(el,u)}var figure=new createjs.Graphics().beginFill(color).drawCircle(0,0,2*scale);var shape=new createjs.Shape(figure);res.push(shape);return res},getPosition:flatType.getPosition,setPosition:function(x,y){this.type.setConfigProperty.call(this,"figure/x",x);this.type.setConfigProperty.call(this,"figure/y",y)},getRotation:function(){return 0},setRotation:flatType.setRotation,getHitArea:function(){var size=this.type.getScreenSize.call(this);var figure=new createjs.Graphics().beginFill("#000000").drawRect(-size.width/2,-size.height/2,size.width,size.height);return new createjs.Shape(figure)},getWidth:function(){return 16},getHeight:function(){return 16},setWidth:function(w){},setHeigth:function(h){},getCornRects:function(){return[]},getRelativeSnapPoints:function(){return[{x:0,y:0}]},getVoltageColor:flatType.getVoltageColor,setVoltageClass:flatType.setVoltageClass,getVoltageClass:flatType.getVoltageClass});return point});define("types/point",["types/flatType","types/point1102"],function(flatType,point1102){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var point=new SLDiagram.Type({name:"point",id:7,description:"Точка modus",groupName:"Debug",parentType:point1102,config:{figure:{U:"",x:0,y:0,sub:0,type:0}},configDescriptor:[{name:"figure",value:{desc:"Точка",expanded:true},children:bgen(["U","x","y","sub"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var sub=t.getConfigProperty.call(el,"figure/sub");var fillColor,lineColor;var type=this.getConfigProperty("figure/type",0);var u=this.getConfigProperty("figure/U");if(type===0){fillColor=this.getVoltageColor(u);lineColor=null}else{fillColor=sld.getConfigProperty("scheme/backColor","#F8F8F8",false);lineColor=this.getVoltageColor(u)}var figure=new createjs.Graphics();if(lineColor){figure.setStrokeStyle(scale,"round","round").beginStroke(lineColor)}figure.beginFill(fillColor).drawCircle(0,0,2*scale);var shape=new createjs.Shape(figure);res.push(shape);return res}});return point});define("types/bus",["types/line"],function(line){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var bus=new SLDiagram.Type({name:"bus",id:24,description:"Шина",groupName:"Линии, шины, соединительные элементы",parentType:line,config:{figure:{U:"",weight:2,x1:-20,x2:20,y1:0,y2:0,sub:0,dashed:false}},configDescriptor:[{name:"figure",value:{desc:"Шина",expanded:true},children:bgen(["U","weight","x1","x2","y1","y2","sub","dashed"])}],drawFigure:function(){var res=[];var u=this.type.getConfigProperty.call(this,"figure/U");var color=this.type.getVoltageColor.call(this,u);var weight=this.type.getWeight.call(this);var scale=this.getSLDiagram().getScale();var p=this.type.getPoints.call(this,scale);var figure=this.type.createLineFigure.call(this,p,weight*scale,color);var shape=new createjs.Shape(figure);res.push(shape);return res},getWeight:function(){var weight=this.type.getConfigProperty.call(this,"figure/weight");return Math.log(weight)*4},getHitWeight:function(){var base=this.type.getWeight.call(this);return((base*7<10)?base*7:base)},getRealSchemeSize:function(){var el=this;var t=el.type;var weight=t.getConfigProperty.call(el,"figure/weight");var lineWidth=Math.log(weight)*6;var size=t.getSize.call(el);return{width:size.width+lineWidth,height:size.height+lineWidth}},getRealRelativeTopLeftPosition:function(){var el=this;var t=el.type;var tlPos=t.getTopLeftPosition.call(el);var weight=t.getConfigProperty.call(el,"figure/weight");var lineWidth=Math.log(weight)*6;return{x:tlPos.x-lineWidth/2,y:tlPos.y-lineWidth/2}}});return bus});define("types/busway",["types/line"],function(line){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var busway=new SLDiagram.Type({name:"busway",id:21,description:"Ошиновка",groupName:"Линии, шины, соединительные элементы",parentType:line,config:{figure:{U:"",x1:-20,x2:20,y1:0,y2:0,sub:0,dashed:false}},configDescriptor:[{name:"figure",value:{desc:"Ошиновка",expanded:true},children:bgen(["U","x1","x2","y1","y2","sub","dashed"])}],drawFigure:function(){var res=[];var u=this.type.getConfigProperty.call(this,"figure/U");var color=this.type.getVoltageColor.call(this,u);var scale=this.type.canvas.getScale();var p=this.type.getPoints.call(this,scale);var figure=this.type.createLineFigure.call(this,p,scale,color);var shape=new createjs.Shape(figure);res.push(shape);return res}});return busway});define("types/overheadLine",["types/bus"],function(bus){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var overheadLine=new SLDiagram.Type({name:"overheadLine",id:22,description:"Воздушная линия",groupName:"Линии, шины, соединительные элементы",parentType:bus,config:{figure:{U:"",weight:3,x1:-20,x2:20,y1:0,y2:0,sub:0,dashed:false}},configDescriptor:[{name:"figure",value:{desc:"Воздушная линия",expanded:true},children:bgen(["U","weight","x1","x2","y1","y2","sub","dashed"])}],drawFigure:function(){var res=[];var u=this.type.getConfigProperty.call(this,"figure/U");var color=this.type.getVoltageColor.call(this,u);var weight=this.type.getWeight.call(this);var scale=this.type.canvas.getScale();var p=this.type.getPoints.call(this,scale);var figure=this.type.createLineFigure.call(this,p,weight*scale,color);var shape=new createjs.Shape(figure);res.push(shape);return res},getWeight:function(){return this.type.getConfigProperty.call(this,"figure/weight")},getRealSchemeSize:function(){var el=this;var t=el.type;var lineWidth=t.getConfigProperty.call(el,"figure/weight");var size=t.getSize.call(el);return{width:size.width+lineWidth*2,height:size.height+lineWidth*2}},getRealRelativeTopLeftPosition:function(){var el=this;var t=el.type;var lineWidth=t.getConfigProperty.call(el,"figure/weight");var tlPos=t.getTopLeftPosition.call(el);return{x:tlPos.x-lineWidth,y:tlPos.y-lineWidth}}});return overheadLine});define("types/arrowLine",["types/line"],function(line){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var arrowLine=new SLDiagram.Type({name:"arrowLine",id:28,description:"Стрелка",groupName:"Линии, шины, соединительные элементы",parentType:line,config:{figure:{U:"",sub:0,x1:-20,x2:20,y1:0,y2:0}},configDescriptor:[{name:"figure",value:{desc:"Стрелка",expanded:true},children:bgen(["U","sub","x1","x2","y1","y2"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var scale=sld.getScale();var p=SLDiagram.recursCloneObject(t.getPoints.call(el,scale));p.end=SLDiagram.calcRandA(p.end,p.center);p.end.r=p.end.r-11*scale;p.end=SLDiagram.calcXandY(p.end,p.center);var line=t.createLineFigure.call(el,p,scale,color);var x=p.end.r;var arrow=(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(x,0).lineTo(x,5*scale).lineTo(x+11*scale,0).lineTo(x,-5*scale).lineTo(x,0));var lineShape=new createjs.Shape(line);var arrowShape=new createjs.Shape(arrow);arrowShape.setTransform(0,0,1,1,p.end.a);res.push(lineShape);res.push(arrowShape);return res},getRealSchemeSize:function(){var el=this;var t=el.type;var size=t.getSize.call(el);return{width:size.width+1,height:size.height+10+1}},getRealRelativeTopLeftPosition:function(){var el=this;var t=el.type;var tlPos=t.getTopLeftPosition.call(el);return{x:tlPos.x-0.5,y:tlPos.y-5-0.5}}});return arrowLine});define("types/spaceLine",["types/line"],function(line){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var spaceLine=new SLDiagram.Type({name:"spaceLine",id:1023,description:"Линия с пробелом",groupName:"Линии, шины, соединительные элементы",parentType:line,config:{figure:{U:"",x1:-20,x2:20,y1:0,y2:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Линия с пробелом",expanded:true},children:bgen(["U","x1","x2","y1","y2","sub"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var p=t.getPoints.call(this,scale);var shortyLine=function(line){line.end=SLDiagram.calcRandA(line.end,line.begin);line.end.r=line.end.r-2*scale;line.end=SLDiagram.calcXandY(line.end,line.begin);return line};var createLine=function(line){return(new createjs.Graphics().setStrokeStyle(scale,"round","round").beginStroke(color).moveTo(line.begin.x,line.begin.y).lineTo(line.end.x,line.end.y))};var line1={begin:{x:p.begin.x,y:p.begin.y},end:{x:p.center.x,y:p.center.y},center:p.center};line1=shortyLine(line1);var figureLine1=t.createLineFigure.call(el,line1,scale,color);var shape1=new createjs.Shape(figureLine1);res.push(shape1);var line2={begin:{x:p.end.x,y:p.end.y},end:{x:p.center.x,y:p.center.y},center:p.center};line2=shortyLine(line2);var figureLine2=t.createLineFigure.call(el,line2,scale,color);var shape2=new createjs.Shape(figureLine2);res.push(shape2);return res}});return line});define("types/dashedLine",["types/line"],function(line){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var dashedLine=new SLDiagram.Type({name:"dashedLine",id:23,description:"Кабельная линия",groupName:"Линии, шины, соединительные элементы",parentType:line,config:{figure:{U:"",x1:-20,x2:20,y1:0,y2:0,dashLen:4,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Кабельная линия",expanded:true},children:bgen(["U","x1","x2","y1","y2","dashLen","sub"])}],drawFigure:function(){var res=[];var el=this;var t=el.type;var sld=t.canvas;var scale=sld.getScale();var u=t.getConfigProperty.call(el,"figure/U");var color=t.getVoltageColor.call(el,u);var points=t.getPoints.call(this,scale);var dashLen=t.getConfigProperty.call(el,"figure/dashLen");var shape=new createjs.Shape();(shape.graphics.setStrokeStyle(scale,"round","round").beginStroke(color).dashedLineTo(points.begin.x-points.center.x,points.begin.y-points.center.y,points.end.x-points.center.x,points.end.y-points.center.y,scale*dashLen));res.push(shape);return res}});return dashedLine});define("types/wireRound",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var wireRound=new SLDiagram.Type({name:"wireRound",id:14,description:"Пересечение провода",groupName:"Линии, шины, соединительные элементы",parentType:flatType,config:{figure:{U:"",scale:1,rotate:0,x:0,y:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Пересечение провода",expanded:true},children:bgen(["U","scale","rotate","x","y","sub"])}],drawFigure:function(){var sld,type,schemeScale,figureScale,lineWidth,arcRadius,U,color,figure,shape,res;res=[];sld=this.getSLDiagram();type=this.getType();schemeScale=sld.getScale();figureScale=type.getScale.call(this);arcRadius=schemeScale*figureScale*3;lineWidth=(arcRadius*0.85)*2;U=type.getConfigProperty.call(this,"figure/U","");color=type.getVoltageColor.call(this,U);figure=new createjs.Graphics();(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(arcRadius,0).lineTo(arcRadius+lineWidth,0).moveTo(-arcRadius,0).lineTo(-arcRadius-lineWidth,0).moveTo(-arcRadius,0).arc(0,0,arcRadius,-Math.PI,0,false));shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){var figureScale=this.getType().getScale.call(this);return 8*figureScale*2},getHeight:function(){var figureScale=this.getType().getScale.call(this);return 3*figureScale},setWidth:function(w){},setHeight:function(h){},getTopLeftPosition:function(){var figureScale=this.getType().getScale.call(this);return{x:-8*figureScale,y:-3*figureScale}},getScale:function(){return this.getType().getConfigProperty.call(this,"figure/scale",1)},getHitArea:function(){var type=this.getType();var size=type.getScreenSize.call(this);var tl=type.getTopLeftPosition.call(this);var scale=this.getSLDiagram().getScale();var figure=(new createjs.Graphics().beginFill("#000000").drawRect(tl.x*scale,tl.y*scale,size.width,size.height));return new createjs.Shape(figure)},getRelativeSnapPoints:function(){var figureScale=this.getType().getScale.call(this);return[{x:-8*figureScale,y:0},{x:8*figureScale,y:0}]},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return wireRound});define("types/electricityPylon",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var electricityPylon=new SLDiagram.Type({name:"electricityPylon",id:1101,description:"Опора ЛЭП",groupName:"Линии, шины, соединительные элементы",parentType:flatType,config:{figure:{x:0,y:0,rotate:0,U:"",scale:1,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Опора ЛЭП",expanded:true},children:bgen(["x","y","rotate","U","scale","sub"])}],drawFigure:function(){var res,sld,type,schemeScale,figureScale,U,color,figure,shape,coef;res=[];sld=this.getSLDiagram();type=this.getType();schemeScale=sld.getScale();figureScale=type.getScale.call(this);coef=schemeScale*figureScale;U=type.getConfigProperty.call(this,"figure/U","");color=type.getVoltageColor.call(this,U);figure=new createjs.Graphics();(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(-8*coef,0).lineTo(-6*coef,0).moveTo(8*coef,0).lineTo(6*coef,0).drawCircle(0,0,6*coef));shape=new createjs.Shape(figure);res.push(shape);return res},getScale:function(){return this.getType().getConfigProperty.call(this,"figure/scale",1)},getWidth:function(){var figureScale=this.getType().getScale.call(this);return 8*figureScale*2},getHeight:function(){var figureScale=this.getType().getScale.call(this);return 6*figureScale*2},setWidth:function(w){},setHeight:function(h){},getHitArea:RealSizes.getHitArea,getRelativeSnapPoints:function(){var figureScale=this.getType().getScale.call(this);return[{x:-8*figureScale,y:0},{x:8*figureScale,y:0}]},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return electricityPylon});define("types/switcherV",["types/breaker164","types/traits/real-generator","types/traits/invert"],function(breaker164,RealGenerator,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var switcherV=new SLDiagram.Type({name:"switcherV",id:42,description:"Разъединитель напряжения",groupName:"Разъединители, отделители",parentType:breaker164,config:{figure:{x:0,y:0,rotate:0,scale:1,U:"",state:false,ts:"",sub:0}},configDescriptor:[{name:"figure",value:{desc:"Разъединитель напряжения",expanded:true},children:bgen(["x","y","rotate","scale","U","state","identifier","sub"])}],drawFigure:function(){var res,schemeScale,figureScale,coef,type,sld,figure,shape,U,color,state;res=[];type=this.getType();sld=this.getSLDiagram();figureScale=type.getScale.call(this);schemeScale=sld.getScale();coef=figureScale*schemeScale;U=type.getConfigProperty.call(this,"figure/U","");color=type.getVoltageColor.call(this,U);figure=new createjs.Graphics();(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(-6*coef,-6*coef).lineTo(6*coef,-6*coef).moveTo(-6*coef,6*coef).lineTo(6*coef,6*coef).moveTo(0,-6*coef).lineTo(-6*coef,0).lineTo(0,6*coef).lineTo(6*coef,0).lineTo(0,-6*coef).moveTo(0,-6*coef).lineTo(0,-8*coef).moveTo(0,6*coef).lineTo(0,8*coef));state=this.getRenderedValue();if(state){figure.moveTo(0,-4*coef).lineTo(0,4*coef)}else{figure.moveTo(-4*coef,0).lineTo(4*coef,0)}shape=new createjs.Shape(figure);res.push(shape);return res},getScale:function(){return this.getType().getConfigProperty.call(this,"figure/scale",1)},getWidth:function(){var scale=this.getType().getScale.call(this);return 6*scale*2},getHeight:function(){var scale=this.getType().getScale.call(this);return 8*scale*2},setWidth:function(w){},setHeight:function(h){},getHitArea:function(){var size=this.getType().getScreenSize.call(this);var tl=this.getType().getTopLeftPosition.call(this);var scale=this.getSLDiagram().getScale();var figure=(new createjs.Graphics().beginFill("#000000").drawRect(tl.x*scale,tl.y*scale,size.width,size.height));return new createjs.Shape(figure)},getRelativeSnapPoints:function(){var figureScale=this.getType().getScale.call(this);return[{x:0,y:-8*figureScale},{x:0,y:8*figureScale}]},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});Invert.extend(switcherV);return switcherV});define("types/line-separator",["types/line"],function(line){var lineSeparator=new SLDiagram.Type({name:"lineSeparator",id:1,description:"Разделитель",groupName:"Графические элементы",parentType:line,config:{figure:{color:"#000000",st:1,x1:-20,y1:0,x2:20,y2:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Разделитель",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["colorLine","st","x1","y1","x2","y2","sub"])}],drawFigure:function(){var points,type,schemeScale,figure,shape,color;type=this.getType();schemeScale=this.getSLDiagram().getScale();color=this.getLineColor();points=type.getRelativePoints.call(this);figure=new createjs.Graphics();(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).dashedLineTo(points.begin.x*schemeScale,points.begin.y*schemeScale,points.end.x*schemeScale,points.end.y*schemeScale,schemeScale*4));shape=new createjs.Shape(figure);return[shape]},setLineColor:function(color){if(color===null){this.delConfigProperty("figure/color");return true}color=SLDiagram.toColor(color);if(color===null){return false}else{this.setConfigProperty("figure/color",color);return true}},getLineColor:function(){var color=SLDiagram.toColor(this.getConfigProperty("figure/color",null,false));if(!(typeof color==="string"&&color.length>0&&SLDiagram.isColor(color))){color=this.getSLDiagram().getForegroundColor()}return color}});return lineSeparator});define("types/inductor",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var RealSizes=RealGenerator({offset:0.75});var inductor=new SLDiagram.Type({name:"inductor",id:33,description:"Дроссельная катушка",groupName:"Устройства компенсации",parentType:flatType,config:{figure:{U:"",dl:0,rotate:0,x:0,y:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Дроссельная катушка",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["U","dl","rotate","x","y","sub"])}],drawFigure:function(){var type,sld,schemeScale,figure,shape,U,color,cMirror;type=this.getType();sld=this.getSLDiagram();schemeScale=sld.getScale();U=type.getConfigProperty.call(this,"figure/U","");color=type.getVoltageColor.call(this,U);xMirror=this.getConfigProperty("figure/xMirror",0,false);figure=new createjs.Graphics();if(xMirror){(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(0,-16*schemeScale).lineTo(0,-12*schemeScale).lineTo(-2*schemeScale,-12*schemeScale).quadraticCurveTo(-8*schemeScale-2*schemeScale,-8*schemeScale,0-2*schemeScale,-4*schemeScale).quadraticCurveTo(-8*schemeScale-2*schemeScale,0,0-2*schemeScale,4*schemeScale).quadraticCurveTo(-8*schemeScale-2*schemeScale,8*schemeScale,0-2*schemeScale,12*schemeScale).lineTo(0,12*schemeScale).lineTo(0,16*schemeScale))}else{(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(0,-16*schemeScale).lineTo(0,-12*schemeScale).lineTo(2*schemeScale,-12*schemeScale).quadraticCurveTo(8*schemeScale+2*schemeScale,-8*schemeScale,0+2*schemeScale,-4*schemeScale).quadraticCurveTo(8*schemeScale+2*schemeScale,0,0+2*schemeScale,4*schemeScale).quadraticCurveTo(8*schemeScale+2*schemeScale,8*schemeScale,0+2*schemeScale,12*schemeScale).lineTo(0,12*schemeScale).lineTo(0,16*schemeScale))}shape=new createjs.Shape(figure);return[shape]},getWidth:function(){return 6},getHeight:function(){return 32},getTopLeftPosition:function(){var xMirror=this.getConfigProperty("figure/xMirror",0,false);if(xMirror){return{x:-6,y:-16}}else{return{x:0,y:-16}}},getHitArea:function(){var schemeScale,type,figure,tl,size;type=this.getType();tl=type.getTopLeftPosition.call(this);size=type.getScreenSize.call(this);schemeScale=type.getSLDiagram().getScale();figure=new createjs.Graphics();figure.beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width,size.height);return new createjs.Shape(figure)},getRelativeSnapPoints:function(){return[{x:0,y:-16},{x:0,y:16}]},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return inductor});define("types/reactor",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var RealSizes=RealGenerator({offset:0.75});var reactor=new SLDiagram.Type({name:"reactor",id:37,description:"Реактор сдвоенный",groupName:"Устройства компенсации",parentType:flatType,config:{figure:{U:"",dl:0,rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"Реактор сдвоенный",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["U","dl","rotate","sub","x","y"])}],drawFigure:function(){var type,sld,figure,shape,schemeScale,U,color;type=this.getType();sld=this.getSLDiagram();schemeScale=sld.getScale();U=type.getConfigProperty.call(this,"figure/U",null);color=type.getVoltageColor.call(this,U);figure=new createjs.Graphics();(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).arc(0,0,12*schemeScale,SLDiagram.degreeToRadian(10),SLDiagram.degreeToRadian(-10)).moveTo(-16*schemeScale,0).lineTo(-12*schemeScale,0).moveTo(0,-16*schemeScale).lineTo(0,-2*schemeScale).lineTo(12*schemeScale,-2*schemeScale).moveTo(0,16*schemeScale).lineTo(0,2*schemeScale).lineTo(12*schemeScale,2*schemeScale));shape=new createjs.Shape(figure);return[shape]},getWidth:function(){return 28},getHeight:function(){return 32},getTopLeftPosition:function(){return{x:-16,y:-16}},getHitArea:function(){var schemeScale,type,figure,tl,size;type=this.getType();tl=type.getTopLeftPosition.call(this);size=type.getScreenSize.call(this);schemeScale=this.getSLDiagram().getScale();figure=new createjs.Graphics();(figure.beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width,size.height));return new createjs.Shape(figure)},getRelativeSnapPoints:function(){return[{x:0,y:-16},{x:0,y:16},{x:-16,y:0}]},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return reactor});define("types/switcher163",["types/flatType","types/switcher","types/traits/real-generator","types/traits/invert"],function(flatType,switcher,RealGenerator,Invert){var RealSizes=RealGenerator({offset:0.75});var switcher163=new SLDiagram.Type({name:"switcher163",id:163,description:"Короткозамыкатель без земли",groupName:"Разъединители, отделители",parentType:switcher,config:{figure:{U:"",dl:0,rotate:0,scale:1,ts:"",x:0,y:0,state:false,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Короткозамыкатель без земли",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["U","dl","rotate","scale","identifier","x","y","state","sub"])}],drawFigure:function(){var type,sld,ss,fs,s,U,color,backColor,value,figure,shape,dk;type=this.getType();sld=this.getSLDiagram();ss=sld.getScale();fs=type.getScale.call(this);s=ss*fs;U=type.getConfigProperty.call(this,"figure/U",null);color=type.getVoltageColor.call(this,U);value=this.getRenderedValue();backColor=sld.getBackgroundColor();dk=type.getDelta.call(this);figure=new createjs.Graphics();(figure.setStrokeStyle(ss,"round","round").beginStroke(color).beginFill(null));if(value){(figure.moveTo(0,10*s).lineTo(0,-10*s))}else{(figure.moveTo(0,10*s).lineTo(6*s,-8*s))}dk=dk*ss;(figure.moveTo(0+dk,-3*s).lineTo(12*s+dk,-3*s).moveTo(6*s+dk,-6*s).lineTo(0+dk,-3*s).lineTo(6*s+dk,0));figure.beginFill(backColor);figure.moveTo(2*s,10*s).drawCircle(0,10*s,2*s);figure.beginFill(null);figure.moveTo(-4*s,-10*s).lineTo(4*s,-10*s);(figure.moveTo(0,-10*s).lineTo(0,-14*s).moveTo(0,12*s).lineTo(0,16*s));shape=new createjs.Shape(figure);return[shape]},getScale:function(){return this.getType().getConfigProperty.call(this,"figure/scale",1)},getDelta:function(){var value=this.getRenderedValue();var fs=this.getType().getScale.call(this);return((value)?0:5)*fs},getHeight:function(){var fs=this.getType().getScale.call(this);return 30*fs},getWidth:function(){var dk=this.getType().getDelta.call(this);var fs=this.getType().getScale.call(this);return 12*fs+4*fs+dk},setWidth:function(w){},setHeigth:function(h){},setHeight:function(h){},getTopLeftPosition:function(){var fs=this.getType().getScale.call(this);return{x:-4*fs,y:-14*fs}},getRelativeSnapPoints:function(){var fs=this.getType().getScale.call(this);return[{x:0,y:-14*fs},{x:0,y:16*fs}]},getHitArea:function(){var ss,fs,figure,type,tl,size;type=this.getType();ss=this.getSLDiagram().getScale();fs=type.getScale.call(this);tl=type.getTopLeftPosition.call(this);size=type.getScreenSize.call(this);figure=new createjs.Graphics();figure.beginFill("#000000").drawRect(tl.x*ss,tl.y*ss,size.width,size.height);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});Invert.extend(switcher163);return switcher163});define("types/auto-transformer-1",["types/transformer"],function(transformer){var autoTransformer1=new SLDiagram.Type({parentType:transformer,name:"autotransformer1",id:3001,description:"Автотрансформатор (1-обмоточный)",config:{figure:{x:0,y:0,rotate:0,sub:0,auto:true,isN:false,windingsCount:2,windings:{"0":{U:""},"1":{U:"",conn:0}}}}});return autoTransformer1});define("types/auto-transformer-2",["types/transformer"],function(transformer){var autoTransformer2=new SLDiagram.Type({parentType:transformer,name:"autotransformer2",id:3002,description:"Автотрансформатор (2х-обмоточный)",config:{figure:{x:0,y:0,rotate:0,sub:0,auto:true,isN:false,windingsCount:3,windings:{"0":{U:""},"1":{U:"",conn:0},"2":{U:"",conn:0}}}}});return autoTransformer2});define("types/auto-transformer-3",["types/transformer"],function(transformer){var autoTransformer3=new SLDiagram.Type({parentType:transformer,name:"autotransformer3",id:3003,description:"Автотрансформатор (3х-обмоточный)",config:{figure:{x:0,y:0,rotate:0,sub:0,auto:true,isN:false,windingsCount:4,windings:{"0":{U:""},"1":{U:"",conn:0},"2":{U:"",conn:0},"3":{U:"",conn:0}}}}});return autoTransformer3});define("types/breaker50",["core/core","types/breaker164","types/breaker49","types/traits/invert-state-and-pullstate"],function(SLDiagram,breaker164,breaker49,Invert){var bgen=SLDiagram.batchConfigPropertyGenerator;var breaker50=new SLDiagram.Type({name:"switcher50",id:50,description:"Отделитель выдвижной",parentType:breaker164,groupName:"Разъединители, отделители",config:{figure:{U:"",scale:1,state:0,pullState:true,dl:20,ts:null,x:0,y:0,sub:0,rotate:0}},configDescriptor:[{name:"figure",value:{desc:"Отделитель выдвижной",expanded:true},children:bgen(["U","scale","state","pullState","identifier","x","y","rotate","sub"])}],drawFigure:function(){var figure,schemeScale=this.getSLDiagram().getScale(),lineColor=this.getVoltageColor(this.getConfigProperty("figure/U")),scale=this.getScale()*schemeScale,dx=this.getPullDx()*schemeScale;figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(0+dx,11*scale).lineTo(0+dx,25*scale).moveTo(0+dx,25*scale).lineTo(-4*scale+dx,21*scale).moveTo(0+dx,25*scale).lineTo(4*scale+dx,21*scale).moveTo(0,34*scale).lineTo(-4*scale,30*scale).moveTo(0,34*scale).lineTo(4*scale,30*scale).moveTo(-4*scale+dx,11*scale).lineTo(4*scale+dx,11*scale).moveTo(0+dx,-11*scale).lineTo(0+dx,-25*scale).moveTo(0+dx,-25*scale).lineTo(-4*scale+dx,-21*scale).moveTo(0+dx,-25*scale).lineTo(4*scale+dx,-21*scale).moveTo(0,-34*scale).lineTo(-4*scale,-30*scale).moveTo(0,-34*scale).lineTo(4*scale,-30*scale).moveTo(-4*scale+dx,-11*scale).lineTo(4*scale+dx,-11*scale);if(this.getRenderedValue()){figure.moveTo(0+dx,8*scale).lineTo(0+dx,-8*scale).beginFill(lineColor).drawRect(0+dx,-5*scale,4*scale,5*scale)}else{figure.moveTo(8*scale+dx,0).lineTo(-8*scale+dx,0).beginFill(lineColor).drawRect(-5*scale+dx,-4*scale,5*scale,4*scale)}return[new createjs.Shape(figure)]},setWidth:function(){},setHeight:function(){},getWidth:function(){var scale=this.getScale();var dx=this.getPullDx();if(this.getRenderedValue()){return 8*scale+dx}else{return 16*scale+dx}},getHeight:function(){return 68*this.getScale()},getTopLeftPosition:function(){var size=this.getSize();var dx=this.getPullDx();return{x:-size.width/2+dx/2,y:-size.height/2}},getRelativeSnapPoints:function(){var height=this.getHeight();return[{x:0,y:-height/2},{x:0,y:height/2}]},setPullState:breaker49.setPullState,getPullState:breaker49.getPullState,getPullDx:function(){var pullState=this.getRenderedPullState();var scale=this.getScale();return((pullState)?0:15*scale)},getHitArea:function(){var size=this.getSize(),tl=this.getTopLeftPosition(),schemeScale=this.getSLDiagram().getScale(),figure;figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*schemeScale,size.height*schemeScale);return new createjs.Shape(figure)},datasourcesNames:["main","pullState","telecontrol"]});Invert.extend(breaker50);return breaker50});define("types/rvp",["core/core","types/flatType","types/traits/real-generator"],function(SLDiagram,flatType,RealGenerator){var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var rvp=new SLDiagram.Type({name:"rvp",id:1103,description:"РВП",parentType:flatType,groupName:"Разрядники",config:{figure:{U:"",scale:1,x:0,y:0,sub:0,rotate:0}},configDescriptor:[{name:"figure",value:{desc:"РВП",expanded:true},children:bgen(["U","scale","x","y","sub","rotate"])}],drawFigure:function(){var schemeScale=this.getSLDiagram().getScale();var elementScale=this.getScale();var scale=schemeScale*elementScale;var lineColor=this.getVoltageColor(this.getConfigProperty("figure/U"));var tl=this.getTopLeftPosition();var offset={x:tl.x*schemeScale,y:tl.y*schemeScale};var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(6*scale,0*scale).lineTo(6*scale,21*scale).moveTo(4*scale,17*scale).lineTo(6*scale,21*scale).lineTo(8*scale,17*scale).drawRect(2*scale,6*scale,8*scale,21*scale).moveTo(2*scale,21*scale).lineTo(10*scale,21*scale).moveTo(2*scale,24*scale).lineTo(10*scale,24*scale).moveTo(6*scale,27*scale).lineTo(6*scale,36*scale).moveTo(0*scale,36*scale).lineTo(12*scale,36*scale).moveTo(2*scale,39*scale).lineTo(10*scale,39*scale).moveTo(4*scale,42*scale).lineTo(8*scale,42*scale);var shape=new createjs.Shape(figure);shape.setTransform(offset.x,offset.y);return[shape]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 12*this.getScale()},getHeight:function(){return 42*this.getScale()},getTopLeftPosition:function(){var scale=this.getScale();return{x:-6*scale,y:-16*scale}},getRelativeSnapPoints:function(){var scale=this.getScale();var tl=this.getTopLeftPosition();var snapPoint={x:6,y:0};return[{x:snapPoint.x*scale+tl.x,y:snapPoint.y*scale+tl.y}]},setScale:function(scale){if(SLDiagram.isNumber(scale)){this.setConfigProperty("figure/scale",Number(scale));return true}else{return false}},getScale:function(){return this.getConfigProperty("figure/scale")},getHitArea:function(){var size=this.getSize();var tl=this.getTopLeftPosition();var elementScale=this.getScale();var schemeScale=this.getSLDiagram().getScale();var scale=elementScale*schemeScale;var figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*schemeScale,size.height*schemeScale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return rvp});define("types/generator",["core/core","types/flatType","types/traits/real-generator"],function(SLDiagram,flatType,RealGenerator){var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var generator=new SLDiagram.Type({name:"generator",id:1104,description:"Генератор",parentType:flatType,groupName:"Генераторы",config:{figure:{U:"",scale:1,x:0,y:0,sub:0,rotate:0}},configDescriptor:[{name:"figure",value:{desc:"Генератор",expanded:true},children:bgen(["U","scale","x","y","sub","rotate"])}],drawFigure:function(){var figure,schemeScale=this.getSLDiagram().getScale(),lineColor=this.getVoltageColor(this.getConfigProperty("figure/U")),scale=this.getScale()*schemeScale;figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).drawCircle(0,0,11*scale).moveTo(0,-11*scale).lineTo(0,-15*scale).moveTo(-6*scale,0).arcTo(-3*scale,-4*scale,0,0,3*scale).lineTo(0,0).moveTo(6*scale,0).arcTo(3*scale,4*scale,0,0,3*scale).lineTo(0,0);return[new createjs.Shape(figure)]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 11*2*this.getScale()},getHeight:function(){return(11*2+4)*this.getScale()},getScale:function(){return this.getConfigProperty("figure/scale")},getTopLeftPosition:function(){var size=this.getSize();return{x:-size.width/2,y:-size.height/2}},getTopLeftPosition:function(){var scale=this.getScale();return{x:-11*scale,y:-(11+4)*scale}},getRelativeSnapPoints:function(){return[{x:0,y:-(11+4)*this.getScale()}]},getHitArea:function(){var size=this.getScreenSize();var tl=this.getTopLeftPosition();var schemeScale=this.getSLDiagram().getScale();var figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width,size.height);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return generator});define("types/fuse1105",["core/core","types/breaker164","types/traits/invert"],function(SLDiagram,breaker164,Invert){var fuse1105=new SLDiagram.Type({name:"fuse1105",id:1105,description:"Разъединитель-предохранитель",parentType:breaker164,groupName:"Предохранители",config:{figure:{U:"",scale:1,state:0,ts:null,x:0,y:0,sub:0,rotate:0}},configDescriptor:[{name:"figure",value:{desc:"Разъединитель-предохранитель",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["U","scale","state","identifier","x","y","sub","rotate"])}],drawFigure:function(){var figure,schemeScale=this.getSLDiagram().getScale(),lineColor=this.getVoltageColor(this.getConfigProperty("figure/U")),scale=this.getScale()*schemeScale;figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(-6*scale,-16*scale).lineTo(6*scale,-16*scale).moveTo(-6*scale,16*scale).lineTo(6*scale,16*scale);if(this.getRenderedValue()){figure.drawRect(-4*scale,-8*scale,8*scale,16*scale).moveTo(0,-12*scale).lineTo(0,12*scale)}else{figure.drawRect(-8*scale,-4*scale,16*scale,8*scale).moveTo(-12*scale,0).lineTo(12*scale,0)}return[new createjs.Shape(figure)]},setWidth:function(){},setHeight:function(){},getWidth:function(){var scale=this.getScale();return((this.getRenderedValue())?12*scale:24*scale)},getHeight:function(){return 32*this.getScale()},getTopLeftPosition:function(){var size=this.getSize();return{x:-size.width/2,y:-size.height/2}},getRelativeSnapPoints:function(){var size=this.getSize();return[{x:0,y:-size.height/2},{x:0,y:size.height/2}]}});Invert.extend(fuse1105);return fuse1105});define("types/switcher1106",["core/core","types/switcher","types/traits/real-generator","types/traits/invert"],function(SLDiagram,switcher,RealGenerator,Invert){var bgen=SLDiagram.batchConfigPropertyGenerator;var pointRadius=2;var RealSizes=RealGenerator({offset:0.75});var switcher1106=new SLDiagram.Type({name:"switcher1106",id:1106,description:"Рубильник",parentType:switcher,groupName:"Разъединители, отделители",config:{figure:{U:"",scale:1,state:false,ts:null,x:0,y:0,rotate:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Рубильник",expanded:true},children:bgen(["U","scale","state","identifier","x","y","rotate","sub"])}],drawFigure:function(){var figure,sld=this.getSLDiagram(),schemeScale=sld.getScale(),lineColor=this.getVoltageColor(this.getConfigProperty("figure/U")),backgroundColor=sld.getBackgroundColor(),scale=this.getScale()*schemeScale;figure=new createjs.Graphics().setStrokeStyle(schemeScale*2,"round","round").beginStroke(lineColor);figure.moveTo(0,0);if(this.getRenderedValue()){figure.lineTo(11*scale,-22*scale)}else{figure.lineTo(-11*scale,-22*scale)}figure.beginFill(backgroundColor).setStrokeStyle(schemeScale,"round","round").moveTo(pointRadius*scale,0).drawCircle(0,0,pointRadius*scale).moveTo(-11*scale+pointRadius*scale,-22*scale).drawCircle(-11*scale,-22*scale,pointRadius*scale).moveTo(11*scale+pointRadius*scale,-22*scale).drawCircle(11*scale,-22*scale,pointRadius*scale);return[new createjs.Shape(figure)]},setWidth:function(){},setHeight:function(){},getWidth:function(){return(11+11+2*pointRadius)*this.getScale()},getHeight:function(){return(22+2*pointRadius)*this.getScale()},getTopLeftPosition:function(){var scale=this.getScale();return{x:-(11+pointRadius)*scale,y:-(22+pointRadius)*scale}},getRelativeSnapPoints:function(){var scale=this.getScale();return[{x:0,y:pointRadius*scale},{x:-11*scale,y:-22*scale-pointRadius*scale},{x:11*scale,y:-22*scale-pointRadius*scale}]},getHitArea:function(){var scale=this.getSLDiagram().getScale(),size=this.getSize(),tl=this.getTopLeftPosition(),figure;figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*scale,tl.y*scale,size.width*scale,size.height*scale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});Invert.extend(switcher1106);return switcher1106});define("types/reactor1107",["core/core","types/flatType","types/traits/real-generator"],function(SLDiagram,flatType,RealGenerator){var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var reactor1107=new SLDiagram.Type({name:"reactor1107",id:1107,description:"Реактор",parentType:flatType,groupName:"Устройства компенсации",config:{figure:{U:"",scale:1,x:0,y:0,rotate:0,sub:0}},configDescriptor:[{name:"figure",value:{desc:"Реактор",expanded:true},children:bgen(["U","scale","x","y","rotate","sub"])}],drawFigure:function(){var figure,schemeScale=this.getSLDiagram().getScale(),lineColor=this.getVoltageColor(this.getConfigProperty("figure/U")),scale=this.getScale()*schemeScale,xMirror=this.getConfigProperty("figure/xMirror",0,false);if(xMirror){figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(0,-16*scale).lineTo(0,-9*scale).arc(0,0,9*scale,-Math.PI/2,Math.PI*2,true).lineTo(0,0).lineTo(0,16*scale)}else{figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(0,-16*scale).lineTo(0,-9*scale).arc(0,0,9*scale,-Math.PI/2,Math.PI,false).lineTo(0,0).lineTo(0,16*scale)}return[new createjs.Shape(figure)]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 18*this.getScale()},getHeight:function(){return 32*this.getScale()},setScale:function(scale){if(SLDiagram.isNumber(scale)){this.setConfigProperty("figure/scale",Number(scale));return true}else{return false}},getScale:function(){return this.getConfigProperty("figure/scale")},getTopLeftPosition:function(){var size=this.getSize();return{x:-size.width/2,y:-size.height/2}},getRelativeSnapPoints:function(){var height=this.getHeight();return[{x:0,y:-height/2},{x:0,y:height/2}]},getHitArea:function(){var size=this.getSize(),tl=this.getTopLeftPosition(),scale=this.getSLDiagram().getScale(),figure;figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*scale,tl.y*scale,size.width*scale,size.height*scale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return reactor1107});define("types/motor-async",["types/flatType","types/traits/real-generator","types/properties/properties"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var motorASync=new SLDiagram.Type({name:"motorASync",id:39,description:"Асинхронный двигатель",groupName:"Генераторы",parentType:flatType,config:{figure:{U:"",rotate:0,x:0,y:0,sub:0,scale:1}},configDescriptor:[{name:"figure",value:{desc:"Асинхронный двигатель",expanded:true},children:bgen(["U","scale","x","y","sub","rotate"])}],drawFigure:function(){var res=[];var sld=this.getSLDiagram();var schemeScale=sld.getScale();var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;var scale=schemeScale*elementScale;var u=this.getConfigProperty("figure/U");var color=this.getVoltageColor(u);if(!SLDiagram.isColor(color)){color="#000000"}var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(0,-8*scale).lineTo(0,-10*scale).moveTo(6*scale,3*scale).drawCircle(0,3*scale,6*scale).moveTo(11*scale,3*scale).drawCircle(0,3*scale,11*scale);var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return 22*elementScale},getHeight:function(){var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return 24*elementScale},getTopLeftPosition:function(){var scale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return{x:-11*scale,y:-10*scale}},getRelativeSnapPoints:function(){var scale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return[{x:0,y:-10*scale}]},setWidth:function(){},setHeigth:function(){},getHitArea:RealSizes.getHitArea,getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return motorASync});define("types/rt",["core/core","types/flatType","types/traits/real-generator"],function(SLDiagram,FlatType,RealGenerator){var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var rt=new SLDiagram.Type({name:"rt",id:1108,description:"РТ",parentType:FlatType,groupName:"Разрядники",config:{figure:{U:"",rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"РТ",expanded:true},children:bgen(["U","rotate","sub","x","y"])}],drawFigure:function(){var schemeScale=this.getSLDiagram().getScale();var elementScale=this.getScale();var scale=schemeScale*elementScale;var lineColor=this.getVoltageColor(this.getConfigProperty("figure/U"));var tl=this.getTopLeftPosition();var offset={x:tl.x*schemeScale,y:tl.y*schemeScale};var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(6*scale,0*scale).lineTo(6*scale,6*scale).moveTo(4*scale,4*scale).lineTo(6*scale,6*scale).lineTo(8*scale,4*scale).moveTo(6*scale,17*scale).lineTo(6*scale,10*scale).moveTo(4*scale,12*scale).lineTo(6*scale,10*scale).lineTo(8*scale,12*scale).drawRect(2*scale,17*scale,8*scale,14*scale).moveTo(6*scale,17*scale).lineTo(6*scale,22*scale).moveTo(4*scale,20*scale).lineTo(6*scale,22*scale).lineTo(8*scale,20*scale).moveTo(6*scale,31*scale).lineTo(6*scale,26*scale).moveTo(4*scale,28*scale).lineTo(6*scale,26*scale).lineTo(8*scale,28*scale).moveTo(6*scale,31*scale).lineTo(6*scale,36*scale).moveTo(0*scale,36*scale).lineTo(12*scale,36*scale).moveTo(2*scale,39*scale).lineTo(10*scale,39*scale).moveTo(4*scale,42*scale).lineTo(8*scale,42*scale);var shape=new createjs.Shape(figure);shape.setTransform(offset.x,offset.y);return[shape]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 12*this.getScale()},getHeight:function(){return 42*this.getScale()},getTopLeftPosition:function(){var scale=this.getScale();return{x:-6*scale,y:-16*scale}},getRelativeSnapPoints:function(){var scale=this.getScale();var tl=this.getTopLeftPosition();var snapPoint={x:6,y:0};return[{x:snapPoint.x*scale+tl.x,y:snapPoint.y*scale+tl.y}]},getHitArea:function(){var size=this.getSize();var tl=this.getTopLeftPosition();var elementScale=this.getScale();var schemeScale=this.getSLDiagram().getScale();var scale=elementScale*schemeScale;var figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*scale,size.height*scale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return rt});define("types/transformer-v-4x",["core/core","types/flatType","types/traits/real-generator","core/transformer/ConnDirections"],function(SLDiagram,flatType,RealGenerator,ConnDirections){var RealSizes=RealGenerator({offset:0.75});var CirclesBaseCfg=[{name:"left",x:9,y:17,radius:8.5,connection:0},{name:"up",x:23,y:9,radius:8.5,connection:ConnDirections.UP},{name:"right",x:37,y:17,radius:8.5,connection:0},{name:"down",x:23,y:25,radius:8.5,connection:0}];var CONNECTION_LENGTH=7;var transformerV4x=new SLDiagram.Type({parentType:flatType,name:"transformerV4x",id:1109,description:"Трансформатор напряжения 4х-обмоточный",groupName:"Трансформаторы",config:{figure:{U:"",x:0,y:0,windings:{0:{U:"",conn:0,scheme:0},1:{U:"",conn:0,scheme:0},2:{U:"",conn:0,scheme:0},3:{U:"",conn:0,scheme:0}},windingsCount:4,rotate:0,sub:0,sn:1,tn:0}},configDescriptor:[{name:"figure",value:{desc:"Трансформатор напряжения 4х-обмоточный",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["U","x","y","rotate","sub","tn"])}],getWindings:function(){var i;var wind;if(!this._windings){this._windings=new SLDiagram.transformer.WindingStore();for(i=0;i<CirclesBaseCfg.length;i++){wind=new SLDiagram.transformer.Winding(CirclesBaseCfg[i]);wind.getConnection().setLength(CONNECTION_LENGTH);this._windings.push(wind)}this._windings.offset({x:-23,y:-17})}return this._windings},drawFigure:function(){var schemeScale=this.getSLDiagram().getScale();var elementScale=this.getScale();var scale=schemeScale*elementScale;var lineColor=this.getVoltageColor(this.getConfigProperty("figure/U"));var circles=this.getWindings();var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor);circles.each(function(circle){circle.drawFigure(figure,schemeScale)});var shape=new createjs.Shape(figure);return[shape]},setWidth:function(){},setHeigth:function(){},getWidth:function(){if(!this._size){this._size=this.getWindings().size()}return this._size.width},getHeight:function(){if(!this._size){this._size=this.getWindings().size()}return this._size.height},getTopLeftPosition:function(){if(!this._tl){this._tl=this.getWindings().min()}return this._tl},getRelativeSnapPoints:function(){var windings,conns;if(!this._snapPoints){windings=this.getWindings();conns=windings.map(function(winding){var v=winding.getConnection().toVector();return(v&&v.end)?v.end:null});this._snapPoints=SLDiagram.Underscore.filter(conns,function(conn){return Boolean(conn)})}return this._snapPoints},getHitArea:function(){var size=this.getSize();var tl=this.getTopLeftPosition();var elementScale=this.getScale();var schemeScale=this.getSLDiagram().getScale();var scale=elementScale*schemeScale;var figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*scale,size.height*scale);return new createjs.Shape(figure)},clearCache:function(){delete this._tl;delete this._size;delete this._windings;delete this._snapPoints;return true},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return transformerV4x});define("types/varistor-without-ground",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var varistorWithoutGround=new SLDiagram.Type({name:"varistor-wo-ground",id:29,description:"ОПН без земли",parentType:flatType,groupName:"Разрядники",config:{figure:{U:"",rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"ОПН без земли",expanded:true},children:bgen(["U","rotate","sub","x","y"])}],drawFigure:function(){var schemeScale=this.getSLDiagram().getScale();var elementScale=this.getScale();var scale=schemeScale*elementScale;var lineColor=this.getVoltageColor(this.getConfigProperty("figure/U"));var xMirror=this.getConfigProperty("figure/xMirror",0,false);var tl=this.getTopLeftPosition();var offset={x:tl.x*schemeScale,y:tl.y*schemeScale};if(xMirror){var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).drawRect(4*scale,6*scale,8*scale,20*scale).moveTo(8*scale,6*scale).lineTo(8*scale,0).moveTo(8*scale,26*scale).lineTo(8*scale,32*scale).moveTo(0,7*scale).lineTo(15*scale,26*scale).lineTo(15*scale,30*scale)}else{var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).drawRect(4*scale,6*scale,8*scale,20*scale).moveTo(8*scale,6*scale).lineTo(8*scale,0).moveTo(8*scale,26*scale).lineTo(8*scale,32*scale).moveTo(15*scale,7*scale).lineTo(0,26*scale).lineTo(0,30*scale)}var shape=new createjs.Shape(figure);shape.setTransform(offset.x,offset.y);return[shape]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 15*this.getScale()},getHeight:function(){return 32*this.getScale()},getTopLeftPosition:function(){var scale=this.getScale();return{x:-8*scale,y:-16*scale}},getRelativeSnapPoints:function(){var scale=this.getScale();var tl=this.getTopLeftPosition();var points=[{x:8,y:0},{x:8,y:32}];var i,point;for(i=0;i<points.length;i++){point=points[i];point.x=point.x*scale+tl.x;point.y=point.y*scale+tl.y}return points},getHitArea:function(){var size=this.getSize();var tl=this.getTopLeftPosition();var schemeScale=this.getSLDiagram().getScale();var BLACK="#000000";var figure=new createjs.Graphics().beginFill(BLACK).drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*schemeScale,size.height*schemeScale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return varistorWithoutGround});define("types/bandstop-filter",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var bandstopFilter=new SLDiagram.Type({name:"bandstop-filter",id:389,description:"Заградительный фильтр",groupName:"Устройства компенсации",parentType:flatType,config:{figure:{U:"",rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"Заградительный фильтр",expanded:true},children:bgen(["U","rotate","sub","x","y"])}],drawFigure:function(){var schemeScale=this.getSLDiagram().getScale();var elementScale=this.getScale();var scale=schemeScale*elementScale;var lineColor=this.getVoltageColor(this.getConfigProperty("figure/U"));var xMirror=this.getConfigProperty("figure/xMirror",0,false);var tl=this.getTopLeftPosition();var offset={x:tl.x*schemeScale,y:tl.y*schemeScale};if(xMirror){var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(0,10*scale).lineTo(8*scale,0).lineTo(8*scale,20*scale).lineTo(15*scale,10*scale)}else{var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(0,10*scale).lineTo(8*scale,20*scale).lineTo(8*scale,0).lineTo(15*scale,10*scale)}var shape=new createjs.Shape(figure);shape.setTransform(offset.x,offset.y);return[shape]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 15*this.getScale()},getHeight:function(){return 20*this.getScale()},getTopLeftPosition:function(){var scale=this.getScale();return{x:-8*scale,y:-10*scale}},getRelativeSnapPoints:function(){var scale=this.getScale();var tl=this.getTopLeftPosition();var points=[{x:0,y:10},{x:15,y:10}];var i,point;for(i=0;i<points.length;i++){point=points[i];point.x=point.x*scale+tl.x;point.y=point.y*scale+tl.y}return points},getHitArea:function(){var size=this.getSize();var tl=this.getTopLeftPosition();var schemeScale=this.getSLDiagram().getScale();var BLACK="#000000";var figure=new createjs.Graphics().beginFill(BLACK).drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*schemeScale,size.height*schemeScale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return bandstopFilter});define("types/reactor-with-ground",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var reactorWithGround=new SLDiagram.Type({name:"reactor-with-ground",id:397,description:"Реактор шунтирующий",parentType:flatType,groupName:"Устройства компенсации",config:{figure:{U:"",rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"Реактор шунтирующий",expanded:true},children:bgen(["U","rotate","sub","x","y"])}],drawFigure:function(){var schemeScale=this.getSLDiagram().getScale();var elementScale=this.getScale();var scale=schemeScale*elementScale;var lineColor=this.getVoltageColor(this.getConfigProperty("figure/U"));var xMirror=this.getConfigProperty("figure/xMirror",0,false);var tl=this.getTopLeftPosition();var offset={x:tl.x*schemeScale,y:tl.y*schemeScale};if(xMirror){var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(9*scale,0).lineTo(9*scale,7*scale).arc(9*scale,16*scale,9*scale,-Math.PI/2,Math.PI,false).lineTo(9*scale,16*scale).lineTo(9*scale,32*scale).moveTo(3*scale,32*scale).lineTo(15*scale,32*scale).moveTo(5*scale,35*scale).lineTo(13*scale,35*scale).moveTo(7*scale,38*scale).lineTo(11*scale,38*scale)}else{var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(9*scale,0).lineTo(9*scale,7*scale).arc(9*scale,16*scale,9*scale,-Math.PI/2,Math.PI*2,true).lineTo(9*scale,16*scale).lineTo(9*scale,32*scale).moveTo(3*scale,32*scale).lineTo(15*scale,32*scale).moveTo(5*scale,35*scale).lineTo(13*scale,35*scale).moveTo(7*scale,38*scale).lineTo(11*scale,38*scale)}var shape=new createjs.Shape(figure);shape.setTransform(offset.x,offset.y);return[shape]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 18*this.getScale()},getHeight:function(){return 38*this.getScale()},getTopLeftPosition:function(){var scale=this.getScale();return{x:-9*scale,y:-16*scale}},getRelativeSnapPoints:function(){var scale=this.getScale();var tl=this.getTopLeftPosition();var point={x:9*scale+tl.x,y:tl.y};return[point]},getHitArea:function(){var size=this.getSize();var tl=this.getTopLeftPosition();var schemeScale=this.getSLDiagram().getScale();var BLACK="#000000";var figure=new createjs.Graphics().beginFill(BLACK).drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*schemeScale,size.height*schemeScale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return reactorWithGround});define("types/arrester-valve",["core/core","types/flatType","types/traits/real-generator"],function(SLDiagram,FlatType,RealGenerator){var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var arrester=new SLDiagram.Type({name:"arrester-valve",id:1110,description:"Разрядник вентильный",parentType:FlatType,groupName:"Разрядники",config:{figure:{U:"",rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"Разрядник вентильный",expanded:true},children:bgen(["U","rotate","sub","x","y"])}],drawFigure:function(){var schemeScale=this.getSLDiagram().getScale();var elementScale=this.getScale();var scale=schemeScale*elementScale;var lineColor=this.getVoltageColor(this.getConfigProperty("figure/U"));var tl=this.getTopLeftPosition();var offset={x:tl.x*schemeScale,y:tl.y*schemeScale};var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(lineColor).moveTo(5*scale,0*scale).lineTo(5*scale,6*scale).moveTo(3*scale,4*scale).lineTo(5*scale,6*scale).lineTo(7*scale,4*scale).moveTo(5*scale,16*scale).lineTo(5*scale,10*scale).moveTo(3*scale,12*scale).lineTo(5*scale,10*scale).lineTo(7*scale,12*scale).drawRect(2*scale,16*scale,6*scale,12*scale).moveTo(2*scale,20*scale).lineTo(8*scale,20*scale).moveTo(2*scale,24*scale).lineTo(8*scale,24*scale).moveTo(5*scale,28*scale).lineTo(5*scale,32*scale);var shape=new createjs.Shape(figure);shape.setTransform(offset.x,offset.y);return[shape]},setWidth:function(){},setHeight:function(){},getWidth:function(){return 10*this.getScale()},getHeight:function(){return 32*this.getScale()},getTopLeftPosition:function(){var scale=this.getScale();return{x:-5*scale,y:-16*scale}},getRelativeSnapPoints:function(){var scale=this.getScale();var tl=this.getTopLeftPosition();var snapPoint={x:5,y:0};return[{x:snapPoint.x*scale+tl.x,y:snapPoint.y*scale+tl.y}]},getHitArea:function(){var size=this.getSize();var tl=this.getTopLeftPosition();var elementScale=this.getScale();var schemeScale=this.getSLDiagram().getScale();var scale=elementScale*schemeScale;var figure=new createjs.Graphics().beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width*scale,size.height*scale);return new createjs.Shape(figure)},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return arrester});define("types/compensator_sync",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var RealSizes=RealGenerator({offset:0.75});var compensatorSync=new SLDiagram.Type({name:"compensator-sync",id:174,description:"Компенсатор синхронный",groupName:"Устройства компенсации",parentType:flatType,config:{figure:{U:"",dl:0,rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"Компенсатор синхронный",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["U","dl","rotate","sub","x","y"])}],drawFigure:function(){var type,sld,figure,shape,schemeScale,U,color;type=this.getType();sld=this.getSLDiagram();schemeScale=sld.getScale();U=type.getConfigProperty.call(this,"figure/U",null);color=type.getVoltageColor.call(this,U);figure=new createjs.Graphics();(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).arc(0,0,12*schemeScale,SLDiagram.degreeToRadian(0),SLDiagram.degreeToRadian(360)).moveTo(0,-12*schemeScale).lineTo(0,-16*schemeScale).moveTo(-4*schemeScale,-2*schemeScale).lineTo(4*schemeScale,-2*schemeScale).moveTo(-4*schemeScale,2*schemeScale).lineTo(4*schemeScale,2*schemeScale));shape=new createjs.Shape(figure);return[shape]},getWidth:function(){return 24},getHeight:function(){return 28},getTopLeftPosition:function(){return{x:-12,y:-16}},getHitArea:function(){var schemeScale,type,figure,tl,size;type=this.getType();tl=type.getTopLeftPosition.call(this);size=type.getScreenSize.call(this);schemeScale=this.getSLDiagram().getScale();figure=new createjs.Graphics();(figure.beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width,size.height));return new createjs.Shape(figure)},getRelativeSnapPoints:function(){return[{x:0,y:-16}]},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return compensatorSync});define("types/chassis-main",["types/breaker164","types/traits/invert"],function(breaker164,Invert){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var chassisMain=new SLDiagram.Type({name:"chassis-main",id:1111,description:"Шасси с источником КА",groupName:"Debug",parentType:breaker164,config:{figure:{U:"",rotate:0,state:false,x:0,y:0,sub:0,ts:"",scale:1}},configDescriptor:[{name:"figure",value:{desc:"Шасси с источником КА",expanded:true},children:bgen(["U","rotate","state","x","y","scale","sub","identifier"])}],drawFigure:function(){var res=[];var sld=this.getSLDiagram();var schemeScale=sld.getScale();var selfScale=this.getConfigProperty("figure/scale",1);var u=this.getConfigProperty("figure/U");var xMirror=this.getConfigProperty("figure/xMirror");var color=this.getVoltageColor(u);var dx=this.getPullDx()/selfScale;if(xMirror==1){dx=-1*dx}var i,line;var lines=[{from:{x:0+dx,y:-24},to:{x:0+dx,y:24}},{from:{x:0+dx,y:-24},to:{x:0+dx-4,y:-24+4}},{from:{x:0+dx,y:-24},to:{x:0+dx+4,y:-24+4}},{from:{x:0+dx,y:24},to:{x:0+dx-4,y:24-4}},{from:{x:0+dx,y:24},to:{x:0+dx+4,y:24-4}},{from:{x:0,y:-32},to:{x:0-4,y:-32+4}},{from:{x:0,y:-32},to:{x:0+4,y:-32+4}},{from:{x:0,y:32},to:{x:0-4,y:32-4}},{from:{x:0,y:32},to:{x:0+4,y:32-4}}];for(i=0;i<lines.length;i++){line=lines[i];line.from.x*=schemeScale*selfScale;line.from.y*=schemeScale*selfScale;line.to.x*=schemeScale*selfScale;line.to.y*=schemeScale*selfScale}var figure=(new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(color));for(i=0;i<lines.length;i++){line=lines[i];figure.moveTo(line.from.x,line.from.y).lineTo(line.to.x,line.to.y)}var shape=new createjs.Shape(figure);res.push(shape);return res},drawSelectRect:function(){var res=[],shape,size,tlPos,scale=this.getSLDiagram().getScale(),color;size=this.getRealScreenSize();tlPos=this.getRealRelativeTopLeftPosition();tlPos.x*=scale;tlPos.y*=scale;color=SLDiagram.toColor(this.getConfigProperty("selection/lineColor"));if(!color){color="#00FF00"}shape=new createjs.Shape();(shape.graphics.setStrokeStyle(1).beginStroke(color).dashedLineTo(tlPos.x,tlPos.y,tlPos.x+size.width,tlPos.y,4).dashedLineTo(tlPos.x+size.width,tlPos.y,tlPos.x+size.width,tlPos.y+size.height,4).dashedLineTo(tlPos.x+size.width,tlPos.y+size.height,tlPos.x,tlPos.y+size.height,4).dashedLineTo(tlPos.x,tlPos.y+size.height,tlPos.x,tlPos.y,4));res=res.concat([shape]);return res},getWidth:function(){var scale=this.getScale();var dx=this.getPullDx();return 8*scale+dx},getHeight:function(){var scale=this.getScale();return 64*scale},setWidth:function(w){},setHeight:function(h){},getHitArea:function(){var size=this.getSize(),tlpos=this.getTopLeftPosition(),schemeScale=this.getSLDiagram().getScale(),figure;figure=new createjs.Graphics().beginFill("#000000").drawRect(tlpos.x*schemeScale,tlpos.y*schemeScale,size.width*schemeScale,size.height*schemeScale);return new createjs.Shape(figure)},getPullDx:function(){var state=this.getRenderedValue();var scale=this.getConfigProperty("figure/scale",1);return((state)?0:15*scale)},getTopLeftPosition:function(){var scale=this.getScale();var xMirror=this.getConfigProperty("figure/xMirror");var dx=this.getPullDx();if(xMirror==1){return{x:-4*scale-dx,y:-32*scale}}else{return{x:-4*scale,y:-32*scale}}},getRealSchemeSize:function(){var size=this.getSize();return{width:size.width+1.5,height:size.height+1.5}},getRealRelativeTopLeftPosition:function(){var tlpos=this.getTopLeftPosition();return{x:tlpos.x-0.75,y:tlpos.y-0.75}},getRelativeSnapPoints:function(){var scale=this.getScale();return[{x:0,y:-32*scale},{x:0,y:32*scale}]},datasourcesNames:["main"]});Invert.extend(chassisMain);return chassisMain});define("types/contact-arcing",["types/flatType","types/traits/real-generator"],function(flatType,RealGenerator){var RealSizes=RealGenerator({offset:0.75});var contact_arcing=new SLDiagram.Type({name:"contact-arcing",id:320,description:"Контакт дугогасительный",groupName:"Контакты коммутационных устройств",parentType:flatType,config:{figure:{U:"",dl:0,rotate:0,sub:0,x:0,y:0}},configDescriptor:[{name:"figure",value:{desc:"Контакт дугогасительный",expanded:true},children:SLDiagram.batchConfigPropertyGenerator(["U","dl","rotate","sub","x","y"])}],drawFigure:function(){var type,sld,figure,shape,schemeScale,U,color,xMirror;type=this.getType();sld=this.getSLDiagram();schemeScale=sld.getScale();U=type.getConfigProperty.call(this,"figure/U",null);xMirror=this.getConfigProperty("figure/xMirror",0,true);color=type.getVoltageColor.call(this,U);figure=new createjs.Graphics();if(xMirror){(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(0,-16*schemeScale).lineTo(0,-4*schemeScale).moveTo(0,8*schemeScale).lineTo(0,16*schemeScale).moveTo(0,8*schemeScale).lineTo(8*schemeScale,-8*schemeScale).moveTo(0,-12*schemeScale).lineTo(4*schemeScale,-8*schemeScale).lineTo(-4*schemeScale,-8*schemeScale).lineTo(0,-4*schemeScale))}else{(figure.setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(0,-16*schemeScale).lineTo(0,-4*schemeScale).moveTo(0,8*schemeScale).lineTo(0,16*schemeScale).moveTo(0,8*schemeScale).lineTo(-8*schemeScale,-8*schemeScale).moveTo(0,-12*schemeScale).lineTo(-4*schemeScale,-8*schemeScale).lineTo(4*schemeScale,-8*schemeScale).lineTo(0,-4*schemeScale))}shape=new createjs.Shape(figure);return[shape]},getWidth:function(){return 16},getHeight:function(){return 32},getTopLeftPosition:function(){return{x:-8,y:-16}},getHitArea:function(){var schemeScale,type,figure,tl,size;type=this.getType();tl=type.getTopLeftPosition.call(this);size=type.getScreenSize.call(this);schemeScale=this.getSLDiagram().getScale();figure=new createjs.Graphics();(figure.beginFill("#000000").drawRect(tl.x*schemeScale,tl.y*schemeScale,size.width,size.height));return new createjs.Shape(figure)},getRelativeSnapPoints:function(){return[{x:0,y:-16},{x:0,y:16}]},getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return contact_arcing});define("types/motor-direct",["types/flatType","types/traits/real-generator","types/properties/properties"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var motorDirect=new SLDiagram.Type({name:"motorDirect",id:1112,description:"Двигатель постоянного тока",groupName:"Генераторы",parentType:flatType,config:{figure:{U:"",rotate:0,x:0,y:0,sub:0,scale:1}},configDescriptor:[{name:"figure",value:{desc:"Двигатель постоянного тока",expanded:true},children:bgen(["U","scale","x","y","sub","rotate"])}],drawFigure:function(){var res=[];var sld=this.getSLDiagram();var schemeScale=sld.getScale();var backColor=sld.getBackgroundColor();var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;var scale=schemeScale*elementScale;var u=this.getConfigProperty("figure/U");var color=this.getVoltageColor(u);if(!SLDiagram.isColor(color)){color="#000000"}var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(0,-20*scale).lineTo(0,-16*scale).moveTo(11*scale,0).arc(0,0,11*scale,SLDiagram.degreeToRadian(0),SLDiagram.degreeToRadian(63)).lineTo(5*scale,16*scale).lineTo(0,16*scale).moveTo(-11*scale,0).arc(0,0,11*scale,SLDiagram.degreeToRadian(180),SLDiagram.degreeToRadian(117),true).lineTo(-5*scale,16*scale).lineTo(0,16*scale).moveTo(11*scale,0).arc(0,0,11*scale,SLDiagram.degreeToRadian(0),SLDiagram.degreeToRadian(-63),true).lineTo(5*scale,-16*scale).lineTo(0,-16*scale).moveTo(-11*scale,0).arc(0,0,11*scale,SLDiagram.degreeToRadian(180),SLDiagram.degreeToRadian(243)).lineTo(-5*scale,-16*scale).lineTo(0,-16*scale).moveTo(11*scale,0).drawCircle(0,0,11*scale).moveTo(0,16*scale).lineTo(0,20*scale);var shape=new createjs.Shape(figure);res.push(shape);return res},getRelativeSnapPoints:function(){var sld=this.getSLDiagram();var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return[{x:0,y:-20*elementScale},{x:0,y:20*elementScale}]},getWidth:function(){var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return 11*2*elementScale},getHeight:function(){var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return 32*elementScale},setWidth:function(){},setHeigth:function(){},getHitArea:RealSizes.getHitArea,getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return motorDirect});define("types/motor-simple",["types/flatType","types/traits/real-generator","types/properties/properties"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var motorSimple=new SLDiagram.Type({name:"motorSimple",id:1113,description:"Двигатель",groupName:"Генераторы",parentType:flatType,config:{figure:{U:"",rotate:0,x:0,y:0,sub:0,scale:1}},configDescriptor:[{name:"figure",value:{desc:"Двигатель",expanded:true},children:bgen(["U","scale","x","y","sub","rotate"])}],drawFigure:function(){var res=[];var sld=this.getSLDiagram();var schemeScale=sld.getScale();var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;var scale=schemeScale*elementScale;var u=this.getConfigProperty("figure/U");var color=this.getVoltageColor(u);if(!SLDiagram.isColor(color)){color="#000000"}var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(0,-8*scale).lineTo(0,-10*scale).moveTo(11*scale,3*scale).drawCircle(0,3*scale,11*scale).moveTo(-4*scale,8*scale).lineTo(-4*scale,-2*scale).lineTo(0,8*scale).lineTo(4*scale,-2*scale).lineTo(4*scale,8*scale);var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return 22*elementScale},getHeight:function(){var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return 24*elementScale},getTopLeftPosition:function(){var scale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return{x:-11*scale,y:-10*scale}},getRelativeSnapPoints:function(){var scale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return[{x:0,y:-10*scale}]},setWidth:function(){},setHeigth:function(){},getHitArea:RealSizes.getHitArea,getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return motorSimple});define("types/motor-sync",["types/flatType","types/traits/real-generator","types/properties/properties"],function(flatType,RealGenerator){var cgen=SLDiagram.configPropertyGenerator;var bgen=SLDiagram.batchConfigPropertyGenerator;var RealSizes=RealGenerator({offset:0.75});var motorSync=new SLDiagram.Type({name:"motorSync",id:1114,description:"Синхронный двигатель",groupName:"Генераторы",parentType:flatType,config:{figure:{U:"",rotate:0,x:0,y:0,sub:0,scale:1}},configDescriptor:[{name:"figure",value:{desc:"Синхронный двигатель",expanded:true},children:bgen(["U","scale","x","y","sub","rotate"])}],drawFigure:function(){var res=[];var sld=this.getSLDiagram();var schemeScale=sld.getScale();var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;var scale=schemeScale*elementScale;var u=this.getConfigProperty("figure/U");var color=this.getVoltageColor(u);if(!SLDiagram.isColor(color)){color="#000000"}var figure=new createjs.Graphics().setStrokeStyle(schemeScale,"round","round").beginStroke(color).moveTo(0,-8*scale).lineTo(0,-10*scale).moveTo(11*scale,3*scale).drawCircle(0,3*scale,11*scale).moveTo(-6*scale,3*scale).arc(0,3*scale,6*scale,SLDiagram.degreeToRadian(180),SLDiagram.degreeToRadian(-40)).moveTo(-6*scale,3*scale).arc(0,3*scale,6*scale,SLDiagram.degreeToRadian(180),SLDiagram.degreeToRadian(40),true);var shape=new createjs.Shape(figure);res.push(shape);return res},getWidth:function(){var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return 22*elementScale},getHeight:function(){var elementScale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return 24*elementScale},getTopLeftPosition:function(){var scale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return{x:-11*scale,y:-10*scale}},getRelativeSnapPoints:function(){var scale=SLDiagram.toNumber(this.getConfigProperty("figure/scale"))||1;return[{x:0,y:-10*scale}]},setWidth:function(){},setHeigth:function(){},getHitArea:RealSizes.getHitArea,getRealRelativeTopLeftPosition:RealSizes.getRealRelativeTopLeftPosition,getRealSchemeSize:RealSizes.getRealSchemeSize,drawSelectRect:RealSizes.drawSelectRect});return motorSync});define("types/types",["core/core","types/fillCircle","types/fillRect","types/line","types/simpleTransformer","types/lamp","types/chassis","types/transformerI","types/transformer","types/transformer3","types/transformerV","types/coupling","types/breaker164","types/breaker162","types/groundBreaker","types/groundBreaker2","types/switcher","types/switcher43","types/breaker49","types/fuse154","types/fuse203","types/capacitor","types/sparkGap","types/varistor","types/ground","types/type52","types/point1102","types/point","types/bus","types/busway","types/overheadLine","types/arrowLine","types/spaceLine","types/dashedLine","types/text","types/digitalDevice","types/wireRound","types/electricityPylon","types/switcherV","types/rect","types/line-separator","types/inductor","types/reactor","types/switcher163","types/auto-transformer-1","types/auto-transformer-2","types/auto-transformer-3","types/breaker50","types/rvp","types/generator","types/fuse1105","types/switcher1106","types/reactor1107","types/motor-async","types/rt","types/transformer-v-4x","types/varistor-without-ground","types/bandstop-filter","types/reactor-with-ground","types/arrester-valve","types/compensator_sync","types/chassis-main","types/contact-arcing","types/motor-direct","types/motor-simple","types/motor-sync"],function(){SLDiagram.types=[];for(var i in arguments){if(arguments.hasOwnProperty(i)&&SLDiagram.isType(arguments[i])){SLDiagram.types.push(arguments[i])}}SLDiagram.createTypes=function(){var res=[];for(var i in SLDiagram.types){if(SLDiagram.types.hasOwnProperty(i)){res.push(new SLDiagram.Type(SLDiagram.types[i]))}}return res};return SLDiagram.createTypes});define("formats/rtree",["core/core"],function(){var rtree=new SLDiagram.Format({id:2,name:"rtree",config:{scheme:{format:{name:"rtree"},urls:{getconfig:"/json/newschemesrtree/",getdata:"/json/newschemesrtree/get-data-by-id",getscheme:"/json/newschemesrtree/get-scheme-by-id",send:"/json/newschemesrtree/send",savescheme:"/json/newschemesrtree/save-scheme"},statuses:{OIC_DST_NOPRESENT:{line:{width:2,color:"#00B000"}},OIC_DST_VALUENOCORRECT:{line:{width:2,color:"#EDE613"}},OIC_DST_ADERATING:{line:{width:2,color:"#FF0000"}},OIC_DST_WDERATING:{line:{width:2,color:"#C43C35"}},OIC_DST_MANUAL:{line:{width:0.5,color:"#FFFFFF"},fill:{color:"#0000C0"}},OIC_DST_SRCMANUAL:{line:{width:2,color:"#808080"}},OIC_DST_SUBSTITUTION:{line:{width:0.5,color:"#FFFFFF"},fill:{color:"#FF6000"}}}}},requests:{getScheme:function(cfg,callback){if(typeof callback!=="function"){callback=function(){}}var params="";if(cfg&&typeof cfg.params=="string"){params=cfg.params}else{params="id="+String(this.sldiagram.getConfigProperty("scheme/id",0))}var url="";if(cfg&&typeof cfg.url=="string"){url=cfg.url}else{url=this.sldiagram.getConfigProperty("scheme/urls/getscheme","/json/newschemesrtree/get-scheme-by-id")}if(url==""){console.warn("getScheme url is empty");return}SLDiagram.Ajax.request({url:url,params:params,success:function(response){var resp=response;var sld=this.sldiagram;var config=((resp.data&&resp.data.config)?resp.data.config:resp.config);var x,y;sld.delConfigProperty("voltageColors");if(config){sld.setConfigProperty("",SLDiagram.recursCloneObject(config))}sld.clearScheme();var els=((resp.data&&resp.data.elements)?resp.data.elements:resp.elements);if(els&&SLDiagram.isArray(els)){for(var i=0;i<els.length;i=i+1){try{var el=els[i];if(SLDiagram.isEmptyObject(el)){continue}el.type=sld.getTypeById(el.type);el=new SLDiagram.Element(els[i]);if(el.type.getConfigProperty.call(el,"figure/selected",false)===true){el.type.delConfigProperty.call(el,"figure/selected")}el.getSetterVoltageClass().disable();sld.addElement(el);el.getSetterVoltageClass().enable()}catch(ex){console.error("ERROR: Ошибка при подготовке и добавлении элемента из файла схемы","resp.data.elements["+i+"]:",els[i])}}}var rtree=((resp.data&&resp.data.rtree)?resp.data.rtree:(resp.rtree)?resp.rtree:null);if(rtree){try{var rt=sld.initIndex();rt.set_tree(rtree)}catch(ex){console.dir(resp);console.error("Error at exec RTree.set_tree")}}sld.prepareDefaultConfig();if(config){x=SLDiagram.getProperty(config,"currentOffset/x");y=SLDiagram.getProperty(config,"currentOffset/y");sld.setCurrentOffset(x,y)}sld.events.fireEvent("afterGetScheme",null);sld.render({updateVisibleElements:true});callback(null,true)},acl:{success:function(){},failure:function(){callback(new Error("ACL failure"),false)}},scope:this})},getData:function(cfg){var params="";if(typeof cfg=="object"&&typeof cfg.params=="string"){params=cfg.params}else{var id=this.sldiagram.getConfigProperty("scheme/id",null,false);if(id===null){SLDiagram.Debug.addMessage("SLDiagram","Невозможно получить настройки для схемы без идентификатора",SLDiagram.Debug.statuses.ERROR);return}params="ids="+String(id)}var url="";if(typeof cfg=="object"&&typeof cfg.url=="string"){url=cfg.url}else{url=this.sldiagram.getConfigProperty("scheme/urls/getdata","/json/newschemesrtree/get-data-by-id")}if(url==""){console.warn("getData url is empty");return}var format=this;var sld=format.sldiagram;SLDiagram.Ajax.request({url:url,params:params,success:function(resp){var data,sldiagram;this.sldiagram.getRunner().restart("getData");if(resp&&resp.data&&resp.data[0]&&resp.data[0].data){data=resp.data[0].data;sldiagram=this.sldiagram;this.applyData(data)}else{format._setStatusOnFailure()}},unsuccess:function(response){format._setStatusOnFailure();format.sldiagram.getRunner().restart("getData")},failure:function(response){format._setStatusOnFailure();format.sldiagram.getRunner().restart("getData")},scope:format})},getConfig:function(cfg,callback){if(typeof callback!=="function"){callback=function(){}}var params="";var me=this;if(cfg&&typeof cfg.params=="string"){params=cfg.params}else{var id=this.sldiagram.getConfigProperty("scheme/id",null,false);if(id===null){SLDiagram.Debug.addMessage("SLDiagram","Невозможно получить настройки для схемы без идентификатора",SLDiagram.Debug.statuses.ERROR);return}params="id="+String(id)}var url="";if(cfg&&typeof cfg.url=="string"){url=cfg.url}else{url=this.sldiagram.getConfigProperty("scheme/urls/getconfig","/json/newschemesrtree/")}if(url==""){console.warn("getConfig url is empty");return}SLDiagram.Ajax.request({url:url,params:params,success:function(resp){var sld=this.sldiagram;sld.setConfigProperty("scheme/id",(SLDiagram.getProperty(resp,"data/id")));sld.setConfigProperty("scheme/name",(SLDiagram.getProperty(resp,"data/name")));if(SLDiagram.isObject(resp.data.schemeAndDatabaseIds)===false||SLDiagram.isEmptyObject(resp.data.schemeAndDatabaseIds)){sld.getSchemeAndDatabaseIds().clearData()}else{me.getDataSetter().setData(resp.data.schemeAndDatabaseIds)}sld.events.fireEvent("afterGetConfig",null);callback(null,true)},acl:{success:function(){},failure:function(){callback(new Error("ACL failure"),false)}},scope:this})},saveScheme:function(cfg,callback){if(typeof callback!=="function"){callback=function(){}}var format=this;var sld=format.sldiagram;var params,url;sld.events.fireEvent("beforeSaveScheme",cfg);if(typeof cfg==="object"&&cfg!==null&&!SLDiagram.Underscore.isEmpty(cfg)){params={};if(SLDiagram.isNumber(cfg.id)){params.id=Number(cfg.id)}if(SLDiagram.isNumber(cfg.old_id)){params.old_id=Number(cfg.old_id)}if(typeof cfg.name==="string"&&cfg.name.length>0){params.name=cfg.name}if(cfg.force_replace){params.force_replace=true}if(typeof cfg.url==="string"&&cfg.url.length>0){url=cfg.url}}else{params={id:sld.getConfigProperty("scheme/id",null,false),name:sld.getConfigProperty("scheme/name",null,false)}}if(!url){url=sld.getConfigProperty("scheme/urls/savescheme","/json/newschemesrtree/save-scheme")}params.scheme=JSON.stringify(sld);SLDiagram.Ajax.request({url:url,params:params,success:function(resp){var err;var format=this;var sld=format.sldiagram;if(resp&&resp.data&&resp.data.last_res){var schemeName=SLDiagram.getProperty(resp,"data/name")||"";if(!(resp.errors&&resp.errors.length>0)){SLDiagram.Debug.addMessage('Схема "'+schemeName+'" сохранена',"",SLDiagram.Debug.statuses.INFO,{showPopUp:true})}if(resp.data){if(resp.data.id){sld.setConfigProperty("scheme/id",Number(resp.data.id))}if(resp.data.name){sld.setConfigProperty("scheme/name",resp.data.name)}}sld.events.fireEvent("afterSaveScheme",resp.data);sld.setChangedState(false,true);callback(null,resp.data)}else{if(resp&&resp.data){sld.events.fireEvent("afterSaveScheme",resp.data);callback(null,resp.data)}else{sld.events.fireEvent("afterSaveScheme",{last_res:false});err="Неожиданный ответ на запрос сохранения схемы";console.error(new Error(err));if(SLDiagram.debugMode){console.log("Дополнительная информация об ошибке: "+err,{url:url,params:params,resp:resp})}callback(new Error(err),null)}}},failure:function(){this.sldiagram.events.fireEvent("afterSaveScheme",{last_res:false});callback(null,null)},unsuccess:function(){this.sldiagram.events.fireEvent("afterSaveScheme",{last_res:false});callback(null,null)},acl:{success:function(){},failure:function(){sld.events.fireEvent("afterSaveScheme",{last_res:false});callback(null,null)}},scope:format})},saveDataSources:function(callback){try{var saveDatasoursesRequest=new SLDiagram.SaveDatasoursesRequest({sldiagram:this.getSLDiagram()});saveDatasoursesRequest.save(callback);return}catch(ex){callback(ex,null);return}}},openScheme:function(callback){if(typeof callback!=="function"){callback=function(){}}var c=this.sldiagram;var f=this;var getConfigData;SLDiagram.Utils.series([function(callback){var getconfig=c.getConfigProperty("scheme/urls/getconfig",null);if(getconfig!==null){f.execRequest("getConfig",null,function(err){if(err){callback(err,false)}else{getConfigData={id:c.config.scheme.id,name:c.config.scheme.name,period:c.config.scheme.period};callback(null,true)}})}else{callback(null,false)}},function(callback){var getscheme=c.getConfigProperty("scheme/urls/getscheme",null);if(getscheme!==null){f.execRequest("getScheme",null,function(err){if(err){callback(err,false)}else{callback(null,true)}})}else{callback(null,false)}}],function(err,results){if(err){console.error(err)}var dataSetter=f.getDataSetter();c.setConfigProperty("scheme",getConfigData);dataSetter.applyData(c);dataSetter.clearData();c.events.listen("beforeRender",function(){var changes=new SLDiagram.DatasourceResponse({sldiagram:c});changes.applyData([])},{once:true,anyContext:true},c,null);c.render({updateVisibleElements:true});c.setChangedState(false,true);c.events.fireEvent("afterOpenScheme",((results[0]&&results[1])?true:false));callback(err,results)})},saveScheme:function(saveParams,callback){var SUCCESS=1,DISABLED_CHANGE_DATASOURCES=2,FAILURE=0;try{if(typeof callback!=="function"){callback=function(){}}if(typeof saveParams!=="object"||saveParams===null){saveParams={}}var me=this;var sld=this.getSLDiagram();var saveSchemeUrl=sld.getConfigProperty("scheme/urls/savescheme",null);if(typeof saveSchemeUrl!=="string"||saveSchemeUrl.length<=0){throw new Error("save/urls/savescheme is empty")}SLDiagram.Async.auto({saveScheme:function(callback){try{return me.execRequest("saveScheme",saveParams,callback)}catch(ex){return callback(ex,null)}},saveDatasources:["saveScheme",function(callback,results){var disabledChangeDatasources=me._getDisableChangeDatasourcesState();if(results.saveScheme&&results.saveScheme.last_res&&!disabledChangeDatasources){me.execRequest("saveDataSources",function(err,res){if(err){return callback(null,FAILURE)}else{return callback(null,SUCCESS)}})}else{if(disabledChangeDatasources){callback(null,DISABLED_CHANGE_DATASOURCES)}else{callback(null,FAILURE)}}}]},function(err,results){var res,resSaveDatasources;if(err){callback(err,null)}else{saveDatasources=Boolean(results.saveDatasources===SUCCESS||results.saveDatasources===DISABLED_CHANGE_DATASOURCES);if(results.saveDatasources===DISABLED_CHANGE_DATASOURCES){console.warn(rtree.MESSAGE_DISABLED_CHANGE_DATASOURCES)}res=Boolean(results.saveScheme&&results.saveScheme.last_res&&saveDatasources);callback(null,res,results)}})}catch(ex){console.error(ex);callback(ex,null)}},afterSetSLDiagram:function(){this.prepareRunner();this.sldiagram.events.listen("setEditMode",this.onSetEditMode,{block:true},this,"format")},beforeClearFormat:function(){this.sldiagram.events.removeEvent("setEditMode","format");this.sldiagram.getRunner().stopAll();this.sldiagram.getRunner().remove("getData")},deleteComponent:function(ids,callback){console.warn("Выполнение устаревшего метода deleteComponent")}});rtree.onSetEditMode=function(events,type,data){var f=this;var sld=f.sldiagram;var m=data.editMode;if(m==true){f.sldiagram.getRunner().stop("getData")}else{f.sldiagram.getRunner().start("getData")}};rtree.prepareRunner=function(){var me=this;var sld=this.getSLDiagram();var period=sld.getDataPeriodUpdate()||5000;sld.getRunner().add({name:"getData",fn:function(){me.execRequest("getData")},scope:this,period:period,timeout:true})};rtree._setStatusOnFailure=function(){var sld=this.sldiagram;var datasourceResponse=new SLDiagram.DatasourceResponse({sldiagram:sld});var els=datasourceResponse.getActiveElements();var i,el;for(i=0;i<els.length;i++){el=els[i];el.setStatus(["OIC_DST_NOPRESENT"]);el.draw()}sld.render()};rtree._getDisableChangeDatasourcesState=function(){var path="appHelper/config/wasutpConfig/disableChangeDatasources";return Boolean(SLDiagram.getProperty(window,path))};rtree.MESSAGE_DISABLED_CHANGE_DATASOURCES="Установлен запрет на редактирование источников данных";rtree.getDataSetter=function(){if(!this.dataSetter){this.dataSetter=new SLDiagram.SetData()}return this.dataSetter};return rtree});define("utils/ModusVoltageClasses",[],function(){return{"0.1":"#555555","0.23":"#003300","0.4":"#555555","0.67":"#000000","3.5":"#00ffff","3":"#00ffff","6":"#339966","10":"#333399","14":"#3355ff","15":"#5555ff","20":"#000000","27.5":"#000000","35":"#aa00aa","110":"#ff5555","150":"#00aa00","220":"#ffc055","330":"#5555ff","500":"#000000","750":"#aa0000","1150":"#aa00aa","0.825":"#000000","1.65":"#000000","400":"#885520","800":"#555555","1500":"#55ff55"}});define("formats/aris",["core/core","formats/rtree","types/transformer-helper/auto","utils/ModusVoltageClasses"],function(core,rtree,AutoTransformer,ModusVoltageClasses){var aris=new SLDiagram.Format({id:1,name:"aris",config:{scheme:{format:{name:"aris"},urls:{getconfig:"",getdata:"",getscheme:"/php/load_scheme.php",send:""},statuses:SLDiagram.recursCloneObject(rtree.config.scheme.statuses)}},requests:{getScheme:function(cfg){var ajax;var me=this;var params="";if(typeof cfg=="object"&&typeof cfg.params=="string"){params=cfg.params}else{var fileName=this.sldiagram.getConfigProperty("scheme/filename","filename.xsde").replace(".xsde","");params="scheme="+String(fileName)}var url="";if(typeof cfg=="object"&&typeof cfg.url=="string"){url=cfg.url}else{url=this.sldiagram.getConfigProperty("scheme/urls/getscheme","/php/load_scheme.php")}if(url.length===0){console.warn("getScheme url is empty");return}ajax=new XMLHttpRequest();ajax.onreadystatechange=function(){var resp,updatedDescription,el;if(ajax.readyState===4){if(ajax.status===200){resp=JSON.parse(ajax.responseText);var format=me;var sld=format.sldiagram;var angle,msg,genEmptyElement,text,x,y;var maxx,maxy,minx,miny;var xy;var k;var checkVariable=function(arg){return Boolean(!(typeof arg==="undefined"||arg===null))};for(var i in resp.objects){if(resp.objects.hasOwnProperty(i)){var typeId=resp.objects[i].type;if(!resp.objects[i]||!resp.objects[i].instances){continue}var els=resp.objects[i].instances;for(var j in els){el=aris.createElement(typeId,els[j],sld);if(el){el.getSetterVoltageClass().disable();sld.addElement(el);el.getSetterVoltageClass().enable()}}}}var bg="#"+String(resp.backColor);if(SLDiagram.isColor(bg)===false){bg="#F8F8F8"}sld.setConfigProperty("scheme/backColor",bg);sld.setConfigProperty("voltageColors",aris.fixVoltageColors(resp.voltageColors));sld.prepareDefaultConfig();sld.updateVisibleElements();sld.render()}}};ajax.open("GET",url+"?"+params);ajax.send()},getData:function(cfg){var params="";if(typeof cfg=="object"&&typeof cfg.params=="string"){params=cfg.params}else{params="ids="+String(this.sldiagram.getConfigProperty("scheme/id",0))}var url="";if(typeof cfg=="object"&&typeof cfg.url=="string"){url=cfg.url}else{url=this.sldiagram.getConfigProperty("scheme/urls/getdata","/json/newschemesaris/get-data-by-id")}var format=this;var sld=format.sldiagram;SLDiagram.Ajax.request({url:url,params:params,success:function(response){this.runner.restart("getData");var data=response.data[0].data;this.applyData(data)},unsuccess:function(response){this.runner.restart("getData")},failure:function(response){this.runner.restart("getData")},scope:format})},getConfig:function(cfg){var params="";if(typeof cfg=="object"&&typeof cfg.params=="string"){params=cfg.params}else{params="ids="+String(this.sldiagram.getConfigProperty("scheme/id",0))}var url="";if(typeof cfg=="object"&&typeof cfg.url=="string"){url=cfg.url}else{url=this.sldiagram.getConfigProperty("scheme/urls/getconfig","/json/newschemesaris/")}if(url.length===0){console.warn("getConfig url is empty");if(typeof this.afterGetConfig==="function"){this.afterGetConfig()}return}SLDiagram.Ajax.request({url:url,params:params,success:function(response){var resp=response;var store;if(typeof resp.filename!=="string"||resp.filename.length===0){console.warn("WARN: resp.filename not valid value")}var sld=this.sldiagram;store=sld.getSchemeAndDatabaseIds();sld.setConfigProperty("scheme/id",resp.scheme.id);sld.setConfigProperty("scheme/name",resp.scheme.name);sld.setConfigProperty("scheme/filename",resp.scheme.filename);if(SLDiagram.isObject(resp.schemeAndDatabaseIds)===false||SLDiagram.isEmptyObject(resp.schemeAndDatabaseIds)){console.warn("WARN: schemeAndDatabaseIds is empty")}else{store.setData(resp.scheme.schemeAndDatabaseIds)}if(typeof this.afterGetConfig=="function"){this.afterGetConfig()}},unsuccess:function(response){if(typeof this.afterGetConfig=="function"){this.afterGetConfig()}},failure:function(response){if(typeof this.afterGetConfig=="function"){this.afterGetConfig()}},scope:this})},saveScheme:function(cfg){console.warn("WARN: Format ARIS not support saving")}},openScheme:function(){var c=this.canvas;var f=this;f.afterGetConfig=function(){var f=this;var getscheme=f.getConfigProperty("scheme/urls/getscheme",null,false);if(getscheme!==null&&getscheme.length>0){f.execRequest("getScheme")}};var getconfig=f.getConfigProperty("scheme/urls/getconfig",null,false);if(getconfig!==null&&getconfig.length>0){f.requests.getConfig.call(f)}else{f.afterGetConfig.call(f)}c.setChangedState(false,true);c.updateVisibleElements();c.render()},saveScheme:function(){console.warn('Format "aris" not support saving')},afterSetSLDiagram:rtree.afterSetSLDiagram,beforeClearFormat:rtree.beforeClearFormat});aris.onSetEditMode=rtree.onSetEditMode;aris.prepareRunner=rtree.prepareRunner;aris.createElement=function(typeId,conf,sld){var type;var updatedDescription;this.fixVoltageName(conf);updatedDescription=aris.universalConverter(typeId,conf);if(!updatedDescription){return null}type=sld.getTypeById(updatedDescription.typeId);if(!type){return this.createTextElement(updatedDescription.typeId,updatedDescription.config,sld)}else{return new SLDiagram.Element({config:updatedDescription.config,type:type})}};aris.fixVoltageName=function(cfg){var fixedVoltageName;if(typeof cfg.U!=="undefined"){fixedVoltageName=SLDiagram.Utils.fixVoltageName(cfg.U);if(fixedVoltageName!==null){cfg.U=fixedVoltageName}else{console.error(aris.fixVoltageNameError+": "+cfg.U)}}return cfg};aris.universalConverter=function(typeId,cfg){var updatedDescription;if(aris.universalConverters.hasOwnProperty(typeId)){updatedDescription=aris.universalConverters[typeId](typeId,cfg)}else{updatedDescription=aris.universalConverters["default"](typeId,cfg)}return updatedDescription};aris.universalConverters={"37":function(typeId,cfg){var dl=SLDiagram.getProperty(cfg,"dl"),sub=SLDiagram.getProperty(cfg,"sub"),replace;replace=Boolean((SLDiagram.isNumber(dl)&&Number(dl)===30)||(SLDiagram.isNumber(sub)&&Number(sub)===1));if(sub!==null){delete cfg.sub}if(replace){typeId=1107;if(dl!==null){delete cfg.dl}}return{typeId:typeId,config:{figure:cfg}}},"168":function(typeId,cfg){var dl=SLDiagram.getProperty(cfg,"dl");if(SLDiagram.isNumber(dl)&&Number(dl)===30){typeId=1103;delete cfg.dl}return{typeId:typeId,config:{figure:cfg}}},"173":function(typeId,cfg){return{typeId:1104,config:{figure:cfg}}},"54":function(typeId,conf){var res=SLDiagram.recursCloneObject(conf);var angle=SLDiagram.getProperty(res,"rotate")||0;angle+=180;SLDiagram.setProperty(res,"rotate",angle);return{typeId:typeId,config:{figure:res}}},"164":function(typeId,conf){var res=SLDiagram.recursCloneObject(conf);var x=SLDiagram.getProperty(res,"x");var y=SLDiagram.getProperty(res,"y");var x1,x2;if(x===null){x1=SLDiagram.getProperty(res,"x1")||0;x2=SLDiagram.getProperty(res,"x2")||0;x=x2+x1/2}var y1,y2;if(y===null){y1=SLDiagram.getProperty(res,"y1")||0;y2=SLDiagram.getProperty(res,"y2")||0;y=y2+y1/2}SLDiagram.setProperty(res,"x",x);SLDiagram.setProperty(res,"y",y);return{typeId:typeId,config:{figure:res}}},"5":function(typeId,cfg){return aris.universalConverters["164"](5,cfg)},"41":function(typeId,cfg){return aris.universalConverters["164"](41,cfg)},"47":function(typeId,cfg){var newCfg,windingsCount,windingTmp,windings,newTypeId=typeId,winding,n,fixedU;newCfg={typeId:typeId,config:{figure:cfg}};windingsCount=SLDiagram.getProperty(newCfg,"config/figure/windingsCount")||3;if(AutoTransformer.isAutotransformer(newCfg)){if(windingsCount===4||windingsCount==="4"){newTypeId=3003;try{windings=newCfg.config.figure.windings;windingTmp=windings[3];windings[3]=windings[1];windings[1]=windingTmp}catch(ex){console.error("Ошибка во время импорта 3-х обмоточного автотрансформатора:",ex)}}else{newTypeId=3002}}else{if(windingsCount===3){newTypeId=48}}windings=SLDiagram.getProperty(newCfg,"config/figure/windings");if(windings){for(n in windings){if(windings.hasOwnProperty(n)){winding=windings[n];if(typeof winding.U!=="undefined"){fixedU=SLDiagram.Utils.fixVoltageName(winding.U);if(fixedU!==null){winding.U=fixedU}}}}}newCfg.typeId=newTypeId;return newCfg},"310":function(typeId,cfg){return null},"default":function(typeId,cfg){return{typeId:typeId,config:{figure:cfg}}}};aris.createTextElement=function(typeId,cfg,sld){var text,x,y;text=new SLDiagram.Element({config:{figure:{text:"id="+String(typeId)}},type:sld.getTypeByName("text")});if(typeof cfg==="object"&&cfg!==null&&typeof cfg.figure==="object"&&cfg.figure!==null){cfg=cfg.figure}try{x=cfg.x;y=cfg.y}catch(ex1){x=null;y=null}if(typeof x==="undefined"||x===null||isNaN(x)){try{x=(cfg.x1+cfg.x2)/2}catch(ex2){x=null}}if(typeof y==="undefined"||y===null||isNaN(y)){try{y=(cfg.y1+cfg.y2)/2}catch(ex2){y=null}}if(typeof x==="undefined"||x===null||isNaN(x)){try{minx=Infinity;maxx=-Infinity;for(k=0;k<cfg.xy.length;k++){xy=cfg.xy[k];minx=Math.min(minx,xy.x);maxx=Math.max(maxx,xy.x)}x=(maxx-minx)/2}catch(ex2){x=null}}if(typeof y==="undefined"||y===null||isNaN(y)){try{miny=Infinity;maxy=-Infinity;for(k=0;k<cfg.xy.length;k++){xy=cfg.xy[k];miny=Math.min(miny,xy.y);maxy=Math.max(maxy,xy.y)}y=(maxy-miny)/2}catch(ex2){y=null}}if(typeof y==="undefined"||y===null||isNaN(y)){console.error("ERROR: Невозможно определить координату X для неизвестного типа. Используется координата 0.");x=0}if(typeof y==="undefined"||y===null||isNaN(y)){console.error("ERROR: Невозможно определить координату X для неизвестного типа. Используется координата 0.");y=0}text.setPosition(x,y);return text};aris.modusVoltageClasses=ModusVoltageClasses;aris.fixVoltageColors=function(store){var fixedStore={},voltageName,newVoltageName,voltageColor,newVoltageColor;for(voltageName in store){if(store.hasOwnProperty(voltageName)){voltageColor=store[voltageName];newVoltageName=SLDiagram.Utils.fixVoltageName(voltageName);if(newVoltageName!==null){newVoltageColor=SLDiagram.toColor(voltageColor);if(newVoltageColor!==null){fixedStore[newVoltageName]=newVoltageColor}else{if(ModusVoltageClasses.hasOwnProperty(newVoltageName)){newVoltageColor=SLDiagram.toColor(ModusVoltageClasses[newVoltageName]);fixedStore[newVoltageName]=newVoltageColor}else{console.error(aris.fixVoltageColorError+": "+voltageColor)}}}else{console.error(aris.fixVoltageNameError+": "+voltageName)}}}return fixedStore};aris.fixVoltageNameError="Не удалось определить название класса напряжения";aris.fixVoltageColorError="Не удалось определить цвет класса напряжения";return aris});define("formats/modus",["core/core","formats/rtree"],function(SLDiagram,rtree){var modus=new SLDiagram.Format({id:3,name:"modus",config:{scheme:{format:{name:"modus"},urls:{getconfig:"/json/schemesxsde/",getdata:"/json/newschemesrtree/get-data-by-id",send:"/json/newschemesrtree/send"},statuses:{OIC_DST_NOPRESENT:{line:{width:2,color:"#00B000"}},OIC_DST_VALUENOCORRECT:{line:{width:2,color:"#EDE613"}},OIC_DST_ADERATING:{line:{width:2,color:"#FF0000"}},OIC_DST_WDERATING:{line:{width:2,color:"#C43C35"}},OIC_DST_MANUAL:{line:{width:0.5,color:"#FFFFFF"},fill:{color:"#0000C0"}},OIC_DST_SRCMANUAL:{line:{width:2,color:"#808080"}},OIC_DST_SUBSTITUTION:{line:{width:0.5,color:"#FFFFFF"},fill:{color:"#FF6000"}}}}},requests:{getConfig:function(cfg){var me=this;var sld=this.sldiagram;var id,cfgId,schemeId;cfgId=SLDiagram.getProperty(cfg,"id");schemeId=sld.getConfigProperty("scheme/id");if(SLDiagram.isNumber(cfgId)){id=Number(cfgId)}else{if(SLDiagram.isNumber(schemeId)){id=Number(schemeId)}else{return SLDiagram.Utils.Bluebird.reject(new Error(this.MESSAGE_UNDEFINED_ID))}}var url="/json/schemesxsde/?id="+String(id);return new SLDiagram.Utils.Bluebird(function(resolve,reject){SLDiagram.Ajax.request({url:url,method:"GET",success:function(resp){var data;var msg;try{if(!resp.data.last_res){msg=SLDiagram.getProperty(resp,"data/message")||"Не удалось загрузить информацию о схеме с id="+id;return reject(new Error(msg))}sld.setConfigProperty("scheme/id",resp.data.id);sld.setConfigProperty("scheme/name",resp.data.name);sld.setConfigProperty("scheme/filename",resp.data.file_name);sld.getSchemeAndDatabaseIds().clearData();me.getDataSetter().setData(resp.data.data_sources);sld.events.fireEvent("afterGetConfig",resp.data);return resolve(resp.data)}catch(ex){return reject(ex)}},unsuccess:function(){return reject(new Error("unsuccess"))},failure:function(){return reject(new Error("failure"))},acl:{success:function(){},failure:function(){return reject(new Error(me.MESSAGE_ACCESS_DENIED))}}})})},getScheme:function(data){var fullFileName;var sld=this.sldiagram;if(data&&data.full_file_name){fullFileName=data.full_file_name}else{fullFileName=sld.getConfigProperty("scheme/filename",null)}if(typeof fullFileName!=="string"||fullFileName.length<=0){return SLDiagram.Utils.Bluebird.reject(new Error(this.MESSAGE_UNDEFINED_FILE_NAME))}return SLDiagram.Modus.simpleConvert({url:fullFileName,sldiagram:sld})},getData:function(){return rtree.requests.getData.apply(this,arguments)}},openScheme:function(callback){if(typeof callback!=="function"){callback=function(){}}var me=this;return this.requests.getConfig.call(this).then(this.requests.getScheme.bind(this),this.requests.getScheme.bind(this,null)).then(function(){var dataSetter=me.getDataSetter();var sld=me.sldiagram;dataSetter.applyData(sld);dataSetter.clearData();sld.render({delay:100,updateVisibleElements:true});sld.events.fireEvent("afterOpenScheme",true);return callback(null,true)}).caught(function(err){console.error(err);SLDiagram.Debug.addMessage("Схема Xsde",err.message);me.sldiagram.events.fireEvent("afterOpenScheme",false);return callback(err,false)})}});modus._pushElementsToSldiagram=function(els){var sld=this.sldiagram,elDesc,el,type,i,res=false;for(i in els){if(els.hasOwnProperty(i)){elDesc=els[i];type=sld.getTypeById(elDesc.typeId);if(type){el=new SLDiagram.Element({type:type,config:elDesc.config});sld.addElement(el);res=true}}}return res};modus.getDataSetter=function(){if(!this.dataSetter){this.dataSetter=new SLDiagram.SetData()}return this.dataSetter};modus.onSetEditMode=rtree.onSetEditMode;modus.prepareRunner=rtree.prepareRunner;modus.afterSetSLDiagram=rtree.afterSetSLDiagram;modus.beforeClearFormat=rtree.beforeClearFormat;modus.saveScheme=function(){var msg="Не поддерживается сохранение в формате xsde";console.error(msg);SLDiagram.Debug.addMessage("Сохранение xsde",msg,0,{showPopUp:true})};modus._setStatusOnFailure=rtree._setStatusOnFailure;modus._getDisableChangeDatasourcesState=rtree._getDisableChangeDatasourcesState;modus.MESSAGE_UNDEFINED_ID="Не удалось определить идентификатор схемы";modus.MESSAGE_ACCESS_DENIED="Доступ запрещён";modus.MESSAGE_UNDEFINED_FILE_NAME="Не удалось определить имя файла";return modus});define("formats/formats",["core/core","formats/rtree","formats/aris","formats/modus"],function(){SLDiagram.formats=[];for(var i in arguments){if(arguments.hasOwnProperty(i)&&SLDiagram.isFormat(arguments[i])){SLDiagram.formats.push(arguments[i])}}SLDiagram.createFormats=function(){return SLDiagram.formats};return SLDiagram.createFormats});define("cursorCollections",["core/core"],function(){SLDiagram.cursorCollection=function(cfg){this.arrowCursors=new Object();this.cursors=new Object();this.getArrow=function(a){var r;var max=-Infinity;a=SLDiagram.simplifyAngle(a);for(var i in this.arrowCursors){if(this.arrowCursors.hasOwnProperty(i)&&SLDiagram.isNumber(i)){var cond=(Number(a)>=Number(i));if(cond){max=((Number(max)<=Number(i))?Number(i):Number(max))}}}return this.arrowCursors[max]};this.getCursor=function(name){if(this.cursors[name]){return this.cursors[name]}else{return null}};this.getCursorStyle=function(name){var c=this.cursors[name];var res;if(c){res="";if(c.url){res=res+'url("'+c.url+'")';if(typeof c.x==="number"&&typeof c.y==="number"){res=res+" "+String(c.x)+" "+String(c.y)}}if(c["default"]){res=res+", "+c["default"]}}else{res=null}return res};SLDiagram.applyObject(this,cfg)};SLDiagram.cursorCollections={dmzCorns:new SLDiagram.cursorCollection({arrowCursors:{0:"nwse-resize",90:"nesw-resize",180:"nwse-resize",270:"nesw-resize"}}),dmz:new SLDiagram.cursorCollection({arrowCursors:{0:"nwse-resize",90:"nesw-resize",180:"nwse-resize",270:"nesw-resize"},cursors:{"default":{url:"/shared/cursors/dmzwhite/left_ptr.png",x:6,y:4,"default":"default"},crosshair:{url:"/shared/cursors/dmzwhite/cross.png",x:12,y:12,"default":"crosshair"},help:{url:"/shared/cursors/dmzwhite/question_arrow.png",x:12,y:21,"default":"help"},move:{url:"/shared/cursors/dmzwhite/crosshair.png",x:12,y:12,"default":"move"},pointer:{url:"/shared/cursors/dmzwhite/hand1.png",x:8,y:5,"default":"pointer"},progress:{url:"/shared/cursors/dmzwhite/left_ptr_watch.gif",x:6,y:3,"default":"progress"},text:{url:"/shared/cursors/dmzwhite/xterm.png",x:12,y:12,"default":"text"},wait:{url:"/shared/cursors/dmzwhite/watch.gif",x:12,y:12,"default":"wait"},"n-resize":{url:"/shared/cursors/dmzwhite/top_side.png",x:13,y:5,"default":"n-resize"},"ne-resize":{url:"/shared/cursors/dmzwhite/top_right_corner.png",x:18,y:6,"default":"ne-resize"},"e-resize":{url:"/shared/cursors/dmzwhite/right_side.png",x:18,y:13,"default":"e-resize"},"se-resize":{url:"/shared/cursors/dmzwhite/bottom_right_corner.png",x:18,y:18,"default":"se-resize"},"s-resize":{url:"/shared/cursors/dmzwhite/bottom_side.png",x:13,y:17,"default":"s-resize"},"sw-resize":{url:"/shared/cursors/dmzwhite/bottom_left_corner.png",x:7,y:18,"default":"sw-resize"},"w-resize":{url:"/shared/cursors/dmzwhite/left_side.png",x:7,y:12,"default":"w-resize"},"nw-resize":{url:"/shared/cursors/dmzwhite/top_left_corner.png",x:5,y:6,"default":"nw-resize"}}})};SLDiagram.cursorCollections.current=SLDiagram.cursorCollections.dmz;return});define("tests/load",["core/sldiagram"],function(SLDiagram){var Tests={load:function(tests,callback){var prepareTests=function(tests){var res=[];if(typeof tests==="string"&&tests.length>0){res.push(tests)}else{if(typeof tests==="object"&&tests.length>0){res=res.concat(tests)}}if(res.indexOf("deps")<0){res.splice(0,0,"deps")}return res};tests=prepareTests(tests);if(typeof callback!=="function"){callback=function(){}}var testsLoader=requirejs.config({context:"SLDiagram.Tests",baseUrl:"/sldiagram/tests",shim:{mocha:{deps:["chai"],exports:"mocha",init:function(){return this.mocha}}}});testsLoader(tests,function(Tests){SLDiagram.Tests=SLDiagram.Utils.extend(SLDiagram.Tests,Tests);callback(SLDiagram.Tests)})}};SLDiagram.Tests=Tests;return Tests});Ext.onReady(function(){requirejs.config({baseUrl:"/sldiagram"});requirejs(["core/core","modus/all","utils/all","types/types","formats/formats","cursorCollections","tests/load"],function(SLDiagram){window.SLDiagram=SLDiagram})});define("load",function(){});Ext.define("Wasutp.dispCharts.Chart",{extend:"Ext.chart.Chart"});Ext.define("Wasutp.dispCharts.Window",{winId:"",itemCls:"",fileName:null,path:null,store:null,chart:null,window:null,chartProps:null,lastValueTime:null,updatingPeriod:60000,minUDGOffset:5,gridColor:"#444444",textColor:"#ffffff",textSize:14,offset:0.05,getGridColor:function(){var me=this,gridColor=me.gridColor;if(me.chartProps.GENERAL["gridColor"]){gridColor=me.chartProps.GENERAL["gridColor"]}return gridColor},getTextColor:function(){var me=this,textColor=me.textColor;if(me.chartProps.GENERAL["textColor"]){textColor=me.chartProps.GENERAL["textColor"]}return textColor},getTextSize:function(){var me=this,textSize=me.textSize;if(me.chartProps.GENERAL["textSize"]){textSize=parseFloat(me.chartProps.GENERAL["textSize"])}return textSize},constructor:function(params){var me=this;me.winId=Ext.id();me.itemCls=Wasutp.Menu.getItem(["dispCharts"]).iconCls;if(typeof params.fileName!=="undefined"){me.fileName=params.fileName}if(typeof params.path!=="undefined"){me.path=params.path}},getUpdatingPeriod:function(){var me=this,updatingPeriod=me.updatingPeriod;if(me.chartProps.GENERAL["updatingPeriod"]){updatingPeriod=parseInt(me.chartProps.GENERAL["updatingPeriod"])*1000}return updatingPeriod},show:function(){var me=this;Wasutp.Ajax.request({url:"/json/disp-charts/get-chart-props",params:{fileName:JSON.stringify(me.fileName),path:JSON.stringify(me.path)},success:function(response){if(response.data){if(!response.data.GENERAL){errorsHandler.addMessage("Ошибка",'Не сконфигурирован раздел "GENERAL" диспетчерского графика',0);return false}me.launchChart(response.data)}}})},launchChart:function(data){var me=this;me.chartProps=data;me._launchChart()},getMaxSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.MAX.timeField,yField:me.mapChartValues.MAX.valueField,title:"Раб. максимум",showMarkers:false,style:{"stroke-width":me.getThickness(),stroke:me.chartProps.MAX["color"]||me.mapChartValues.MAX.color,opacity:1}};return series},getMinSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.MIN.timeField,yField:me.mapChartValues.MIN.valueField,title:"Раб. минимум",showMarkers:false,style:{"stroke-width":me.getThickness(),stroke:me.chartProps.MIN["color"]||me.mapChartValues.MIN.color,opacity:1}};return series},getUdgMaxSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.UDG_MAX.timeField,yField:me.mapChartValues.UDG_MAX.valueField,title:"Диапазон УДГ, макс.",showMarkers:false,style:{"stroke-width":me.getThickness(),stroke:me.chartProps.UDG_MAX["color"]||me.mapChartValues.UDG_MAX.color,opacity:1}};return series},getUdgMinSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.UDG_MIN.timeField,yField:me.mapChartValues.UDG_MIN.valueField,title:"Диапазон УДГ, мин.",showMarkers:false,style:{"stroke-width":me.getThickness(),stroke:me.chartProps.UDG_MIN["color"]||me.mapChartValues.UDG_MIN.color,opacity:1}};return series},getFactSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.FACT.timeField,yField:me.mapChartValues.FACT.valueField,title:"Рмгн",showMarkers:false,style:{"stroke-width":me.getThickness(),stroke:me.chartProps.FACT["color"]||me.mapChartValues.FACT.color,opacity:1}};return series},getMiddleSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.MIDDLE.timeField,yField:me.mapChartValues.MIDDLE.valueField,title:"Рсред",showMarkers:false,style:{"stroke-width":me.getThickness(),stroke:me.chartProps.MIDDLE["color"]||me.mapChartValues.MIDDLE.color,opacity:1}};return series},getUdgSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.UDG.timeField,yField:me.mapChartValues.UDG.valueField,title:"УДГ",showMarkers:false,style:{"stroke-width":me.getThickness(),stroke:me.chartProps.UDG["color"]||me.mapChartValues.UDG.color,opacity:1}};return series},getDdgSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.DDG.timeField,yField:me.mapChartValues.DDG.valueField,title:"ДДГ",showMarkers:false,style:{"stroke-width":me.getThickness(),stroke:me.chartProps.DDG["color"]||me.mapChartValues.DDG.color,opacity:1}};return series},getCurrentLineSeries:function(){var me=this,series={type:"line",axis:"left",xField:me.mapChartValues.CURRENT.timeField,yField:me.mapChartValues.CURRENT.valueField,showInLegend:false,showMarkers:false,style:{"stroke-width":1,stroke:me.mapChartValues.CURRENT.color,opacity:1,"stroke-dasharray":3}};return series},getDataAxis:function(){var me=this,axis={type:"Numeric",position:"left",label:{fill:me.getTextColor(),"stroke-width":1,"font-size":me.getTextSize(),renderer:Ext.util.Format.numberRenderer("0")},fields:[me.mapChartValues.DDG.valueField,me.mapChartValues.MAX.valueField,me.mapChartValues.MIN.valueField,me.mapChartValues.UDG_MAX.valueField,me.mapChartValues.UDG_MIN.valueField,me.mapChartValues.FACT.valueField,me.mapChartValues.MIDDLE.valueField,me.mapChartValues.UDG.valueField,me.mapChartValues.CURRENT.valueField],gridColor:me.getGridColor(),grid:true,constrain:false,majorTickSteps:9,minorTickSteps:1};return axis},getTimeAxis:function(){var me=this,axis={grid:true,gridColor:me.getGridColor(),type:"Time",position:"bottom",constrain:true,label:{fill:me.getTextColor(),"stroke-width":1,"font-size":me.getTextSize()},fields:[me.mapChartValues.DDG.timeField,me.mapChartValues.MAX.timeField,me.mapChartValues.MIN.timeField,me.mapChartValues.UDG_MAX.timeField,me.mapChartValues.UDG_MIN.timeField,me.mapChartValues.FACT.timeField,me.mapChartValues.MIDDLE.timeField,me.mapChartValues.UDG.timeField,me.mapChartValues.CURRENT.timeField],title:me.getDateTitle(),labelTitle:{fill:me.getTextColor(),font:"26px Arial"},dateFormat:"H:i",step:[Ext.Date.HOUR,1],fromDate:me.getDateFrom(),toDate:me.getDateTo()};return axis},getStore:function(){var me=this;if(me.store===null){me.store=Ext.create("Ext.data.JsonStore",{fields:[me.mapChartValues.DDG.timeField,me.mapChartValues.DDG.valueField,me.mapChartValues.MAX.timeField,me.mapChartValues.MAX.valueField,me.mapChartValues.MIN.timeField,me.mapChartValues.MIN.valueField,me.mapChartValues.UDG_MAX.timeField,me.mapChartValues.UDG_MAX.valueField,me.mapChartValues.UDG_MIN.timeField,me.mapChartValues.UDG_MIN.valueField,me.mapChartValues.FACT.timeField,me.mapChartValues.FACT.valueField,me.mapChartValues.MIDDLE.timeField,me.mapChartValues.MIDDLE.valueField,me.mapChartValues.UDG.timeField,me.mapChartValues.UDG.valueField,me.mapChartValues.CURRENT.timeField,me.mapChartValues.CURRENT.valueField,]})}return me.store},_launchChart:function(){var me=this,store=me.getStore(),series=[];me.loadInitialData();series.push(me.getCurrentLineSeries());if(me.hasFactSeries()){series.push(me.getFactSeries())}if(me.hasMiddleSeries()){series.push(me.getMiddleSeries())}if(me.hasUdgSeries()){series.push(me.getUdgSeries())}if(me.hasUdgMinSeries()){series.push(me.getUdgMinSeries())}if(me.hasUdgMaxSeries()){series.push(me.getUdgMaxSeries())}if(me.hasDdgSeries()){series.push(me.getDdgSeries())}if(me.hasMinSeries()){series.push(me.getMinSeries())}if(me.hasMaxSeries()){series.push(me.getMaxSeries())}me.chart=Ext.create("Wasutp.dispCharts.Chart",{style:"background: "+me.getBackgroundColor(),store:store,shadow:false,animate:false,insetPadding:20,legend:{position:"bottom",labelColor:me.getTextColor(),boxFill:me.getBackgroundColor(),labelFont:me.getTextSize()+"px Helvetica, sans-serif"},axes:[me.getDataAxis(),me.getTimeAxis()],series:series});var desktop=wasutpApp.getDesktop();me.window=desktop.getWindow(me.winId);if(!me.window){me.window=desktop.createWindow({id:me.winId,iconCls:me.itemCls,width:900,height:600,minHeight:400,minWidth:550,hidden:false,maximizable:true,title:me.getWindowTitle(),layout:"fit",items:me.chart,listeners:{destroy:function(){me.chart=null}}})}me.window.show()},getDateTitle:function(d){var me=this,dt=d||new Date();return Ext.Date.format(dt,"d.m.Y H:i")},getDateFrom:function(){var me=this,now=new Date();return new Date(now.getFullYear(),now.getMonth(),now.getDate()-1,24-me.getHoursOffset(),0,0,0)},getDateTo:function(){var me=this,now=new Date();return new Date(now.getFullYear(),now.getMonth(),now.getDate()+1,me.getHoursOffset(),0,0,0)},getWindowTitle:function(){var me=this,windowTitle=me.chartProps.GENERAL["windowTitle"]||"Диспетчерский график";return windowTitle},getUnits:function(){var me=this,units=me.chartProps.GENERAL["units"]||"";return units},getBackgroundColor:function(){var me=this,backgroundColor=me.chartProps.GENERAL["backgroundColor"]||"#000000";return backgroundColor},getHoursOffset:function(){var me=this,hoursOffset=me.chartProps.GENERAL["hoursOffset"]||2;return hoursOffset},hasFactSeries:function(){var me=this;return me.chartProps.FACT&&me.chartProps.FACT["tableName"]},hasMiddleSeries:function(){var me=this;return me.chartProps.MIDDLE&&me.chartProps.MIDDLE["tableName"]},hasDdgSeries:function(){var me=this;return me.chartProps.DDG&&me.chartProps.DDG["tableName"]},hasMaxSeries:function(){var me=this;return me.chartProps.MAX&&me.chartProps.MAX["tableName"]},hasMinSeries:function(){var me=this;return me.chartProps.MIN&&me.chartProps.MIN["tableName"]},hasUdgMaxSeries:function(){var me=this;return me.chartProps.UDG_MAX},hasUdgMinSeries:function(){var me=this;return me.chartProps.UDG_MIN},hasUdgSeries:function(){var me=this;return me.chartProps.UDG&&me.chartProps.UDG["tableName"]},loadInitialData:function(){var me=this,store=me.getStore();Wasutp.Ajax.request({url:"/json/disp-charts/get-initial-data",params:{fileName:JSON.stringify(me.fileName),path:JSON.stringify(me.path)},success:function(response){if(!me.chart){return}var data=response.data.charts,serverTime=response.data.time*1000,values=[],valueAxes=me.chart.axes.get(0),timeAxes=me.chart.axes.get(1),redrawTime=+timeAxes.toDate-me.getHoursOffset()*60*60*1000,length=data.length,maximum=length?data[0]["VAL"]:10,minimum=length?data[0]["VAL"]:0,currentValue,currentDate,offsetFromUTCServer=response.data.offsetFromUTC,offsetFromUTCClient=new Date().getTimezoneOffset()/60;if(+new Date>=redrawTime){me.redrawDateValues()}if(length){for(var d in data){var obj={},chartName=data[d]["NAME"],date=new Date((+data[d]["TIME1970"]+(offsetFromUTCServer+offsetFromUTCClient)*60*60)*1000),value=parseFloat(data[d]["VAL"]),UDGOffset=me.getUDGOffset(value);if(value>maximum){maximum=value}if(value<minimum){minimum=value}obj[me.mapChartValues[chartName]["valueField"]]=value;obj[me.mapChartValues[chartName]["timeField"]]=date;if(chartName==="UDG"){if(value+UDGOffset>maximum){maximum=value+UDGOffset}if(value-UDGOffset<minimum){minimum=value-UDGOffset}obj[me.mapChartValues.UDG_MAX["valueField"]]=value+UDGOffset;obj[me.mapChartValues.UDG_MAX["timeField"]]=date;obj[me.mapChartValues.UDG_MIN["valueField"]]=value-UDGOffset;obj[me.mapChartValues.UDG_MIN["timeField"]]=date}else{if(chartName==="FACT"){me.lastValueTime=data[d]["TIME1970"];currentValue=value;currentDate=date}}values.push(obj)}var mx=Math.ceil(maximum/10)*10,mn=Math.floor(minimum/10)*10,hall=mx-mn,hallRoundTo50=hall%50===0?Math.ceil(hall/50)*50+50:Math.ceil(hall/50)*50,delta=(hallRoundTo50-hall)/2,axesMax=mx+delta,axesMin=mn-delta;valueAxes.maximum=axesMax;valueAxes.minimum=axesMin;values.push({currentValue:valueAxes.maximum,currentTime:serverTime});values.push({currentValue:valueAxes.minimum,currentTime:serverTime});timeAxes.setTitle(new Ext.XTemplate(me.timeAxisTitleTemplate).apply({date:me.getDateTitle(currentDate),value:Math.floor(currentValue)||" -- ",unit:me.getUnits()}));store.loadData(values);me.chart.redraw()}setTimeout(function(){me.loadInitialData()},me.getUpdatingPeriod())},failure:function(){if(me.chart){setTimeout(function(){me.loadInitialData()},me.getUpdatingPeriod())}}})},timeAxisTitleTemplate:"{date}, {value} {unit}",redrawDateValues:function(){var me=this,timeAxes=me.chart.axes.get(1),store=me.getStore();timeAxes.fromDate=me.getDateFrom();timeAxes.toDate=me.getDateTo();store.loadData([]);me.chart.redraw()},getUDGOffset:function(value){var me=this,offset=value*0.02;if(offset<me.minUDGOffset){offset=me.minUDGOffset}return offset},mapChartValues:{DDG:{valueField:"DDGValue",timeField:"DDGTime",color:"#003CFF"},MAX:{valueField:"maxValue",timeField:"maxTime",color:"#FF9100"},MIN:{valueField:"minValue",timeField:"minTime",color:"#FF9100"},UDG:{valueField:"udgValue",timeField:"udgTime",color:"#00FF44"},UDG_MAX:{valueField:"udgMaxValue",timeField:"udgMaxTime",color:"#FFD500"},UDG_MIN:{valueField:"udgMinValue",timeField:"udgMinTime",color:"#FFD500"},FACT:{valueField:"factValue",timeField:"factTime",color:"#FF0000"},MIDDLE:{valueField:"middleValue",timeField:"middleTime",color:"#33FFFF"},CURRENT:{valueField:"currentValue",timeField:"currentTime",color:"#ffffff"}},getThickness:function(){var me=this,thickness=1.5;if(me.chartProps.GENERAL&&me.chartProps.GENERAL["thickness"]){thickness=parseFloat(me.chartProps.GENERAL["thickness"])}return thickness}});Ext.define("Wasutp.dispCharts.Module",{extend:"Ext.ux.desktop.Module",itemCls:"",dirCls:"x-tree-icon-parent",updatePeriod:5000,id:"isms-disp-charts",init:function(){var me=this;me.itemCls=Wasutp.Menu.getItem(["dispCharts"]).iconCls;this.launcher={text:Wasutp.Menu.getItem(["dispCharts"]).title,iconCls:me.itemCls,hideOnClick:false,handler:function(ths,e){},listeners:{added:function(){me.loadMenuItems(this,"/")}}}},loadMenuItems:function(parentMenuItem,path){var me=this;Wasutp.Ajax.request({url:"/json/disp-charts/get-menu-items",params:{path:JSON.stringify(path)},success:function(response){if(response.data&&response.data.items){var configs=response.data.items;if(configs.length){me.addMenuItems(configs,parentMenuItem)}}}})},addMenuItems:function(configs,parentMenuItem){var me=this,menu={},items=[];for(var c in configs){var item={text:configs[c].menuItemName,chartProps:configs[c]};if(configs[c].type==="file"){item.iconCls=me.itemCls;item.handler=me.launchChart;item.scope=me;item.module=me.id;item.id=me.id+configs[c].path+configs[c].fileName;item.listeners={afterrender:Wasutp.desktop.ShortcutManager.afterrenderMenuFn(me)}}else{item.iconCls=me.dirCls;item.listeners={afterrender:function(){me.loadMenuItems(this,configs[c].path)}}}items.push(item)}menu=Ext.create("Wasutp.menu.Menu",{items:items});parentMenuItem.setMenu(menu)},launchChart:function(src){var me=this,win=Ext.create("Wasutp.dispCharts.Window",{fileName:src.chartProps.fileName,path:src.chartProps.path});win.show()}});Ext.define("Wasutp.Configurations.Form.Update.Dcs.UpdateIEC61850Param",{extend:"Wasutp.Configurations.Form.Update.Dcs.UpdateParam",tabHeight:340,getAttrNameField:function(){var me=this;return{xtype:"displayfield",name:"ATTR_NAME",fieldLabel:me.params.columns.ATTR_NAME["title"],margin:"5 0 10 0",height:me.height,value:me.params.record.ATTR_NAME,listeners:{afterrender:function(field){Wasutp.Ajax.request({url:"/json/configuration/get-attr-name",params:{id:me.params.record.ID},success:function(response){if(response.data.value){field.setValue(response.data.value)}}})}}}},getItems:function(){var me=this,items=[];if(typeof me.params.columns.ID!=="undefined"){items.push(me.getIdField())}if(typeof me.params.columns.ATTR_NAME!=="undefined"){items.push(me.getAttrNameField())}if(typeof me.params.columns.NAME!=="undefined"){items.push(me.getNameField())}if(typeof me.params.columns.CVALIF1!=="undefined"){items.push(me.getCvalif1Field())}if(typeof me.params.columns.UNIT!=="undefined"){items.push(me.getUnitField())}if(typeof me.params.columns.PRECIS!=="undefined"){items.push(me.getPrecisField())}if(typeof me.params.columns.SCALE!=="undefined"){items.push(me.getScaleField())}return items},getTabItems:function(){var me=this,tabItems=[];tabItems.push({title:"Основные свойства",autoScroll:true,items:me.getForm(),border:0});return tabItems},save:function(ths){var me=this,win=ths.up("window"),saveFn=win.save;saveFn.call(me)}});Ext.define("Wasutp.Configurations.Form.Update.Profile.UpdateIEC61850Node",{extend:"Wasutp.Configurations.Form.Update.Profile.UpdateNode",constructor:function(params){this.superclass.constructor(params)},getAttrNameItem:function(){var me=this;return{disabled:false,xtype:"textfield",name:"ATTR_NAME",margin:me.margin,height:me.height,fieldLabel:me.params.columns.ATTR_NAME["title"],value:me.params.record.ATTR_NAME,validator:me.validateString256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}},getItems:function(){var me=this,items=[];if(typeof me.params.columns.ID!=="undefined"){items.push(me.getIdItem())}items.push(me.getIdDevItem());items.push(me.getProtoLevelNameItem());if(typeof me.params.columns.NAME!=="undefined"){items.push(me.getNameItem())}if(typeof me.params.columns.CVALIF!=="undefined"){items.push(me.getCvalifItem())}if(typeof me.params.columns.ATTR_NAME!=="undefined"){items.push(me.getAttrNameItem())}if(typeof me.params.columns.TYPE!=="undefined"){items.push(me.getTypeItem())}return items}});Ext.define("Wasutp.Configurations.Form.Update.Profile.UpdateIEC61850Param",{extend:"Wasutp.Configurations.Form.Update.Profile.UpdateParam",leftColumnWidth:0.15,rightColumnWidth:0.85,labelWidth:94,getAttrNameItem:function(){var me=this;return{disabled:false,xtype:"textfield",name:"ATTR_NAME",margin:me.margin,height:me.height,fieldLabel:me.params.columns.ATTR_NAME["title"],value:me.params.record.ATTR_NAME,validator:me.validateLength256,labelWidth:me.labelWidth,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}},getItems:function(){var me=this,items=[];if(typeof me.params.columns.ID!=="undefined"){items.push(me.getIdItem())}if(typeof me.params.columns.NAME!=="undefined"){items.push(me.getNameItem())}if(typeof me.params.columns.ATTR_NAME!=="undefined"){items.push(me.getAttrNameItem())}if(typeof me.params.columns.TYPE!=="undefined"){items.push(me.getTypeItem())}if(typeof me.params.columns.OPT!=="undefined"){items.push(me.getOptItem())}if(typeof me.params.columns.SCALE!=="undefined"){items.push(me.getScaleItem())}return items}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateIEC61850Node",{extend:"Wasutp.Configurations.Form.Create.Profile.CreateNode",constructor:function(params){this.superclass.constructor(params)},getAttrNameItem:function(){var me=this;return{disabled:false,xtype:"textfield",name:"ATTR_NAME",margin:me.margin,height:me.height,fieldLabel:me.params.columns.ATTR_NAME["title"],value:me.params.record.ATTR_NAME,validator:me.validateString256,labelWidth:me.labelWidth,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}},getItems:function(){var me=this,items=[];if(typeof me.params.columns.PROTO_LEVEL_NAME!=="undefined"){me.params.record.PROTO_LEVEL_ID=me.getProtoLevelId();items.push(me.getProtoLevelNameItem())}if(typeof me.params.columns.NAME!=="undefined"){if(!me.params.record.NAME&&me.params.record.PROTO_LEVEL_NAME){me.params.record.NAME=me.params.record.PROTO_LEVEL_NAME}items.push(me.getNameItem())}if(typeof me.params.columns.CVALIF!=="undefined"){if(!me.params.record.CVALIF){me.params.record.CVALIF=1}items.push(me.getCvalifItem())}if(typeof me.params.columns.ATTR_NAME!=="undefined"){items.push(me.getAttrNameItem())}if(typeof me.params.columns.TYPE!=="undefined"){items.push(me.getTypeItem())}return items}});Ext.define("Wasutp.Configurations.Form.Create.Profile.CreateIEC61850Param",{extend:"Wasutp.Configurations.Form.Create.Profile.CreateParam",getNameItem:function(){var me=this;return{xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.142,xtype:"panel",margin:"5 0 8 0",border:0,html:me.params.columns.NAME["title"]+":"},{columnWidth:0.858,xtype:"textfield",name:"NAME",validator:me.validateString,maxLengthText:me.getNameLengthHelper().maxFieldLengthText,maxLength:me.getNameLengthHelper().maxFieldLength,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}},afterrender:function(field){field.setValue(me.getDefaultName());Ext.defer(function(){field.focus(true)},1)}}}]}},getAttrNameItem:function(){var me=this;return{xtype:"panel",border:0,layout:"column",items:[{columnWidth:0.142,xtype:"panel",margin:"5 0 8 0",border:0,html:me.params.columns.ATTR_NAME["title"]+":"},{columnWidth:0.858,xtype:"textfield",name:"ATTR_NAME",validator:me.validateLength256,listeners:{change:{fn:function(ths,newValue,oldValue,eOpts){me.params.record[ths.name]=newValue}},specialkey:function(field,event){if(event.getKey()==event.ENTER){this.up("window").save()}}}}]}},getItems:function(){var me=this,items=[];if(typeof me.params.columns.NAME!=="undefined"){items.push(me.getNameItem())}if(typeof me.params.columns.ATTR_NAME!=="undefined"){items.push(me.getAttrNameItem())}if(typeof me.params.columns.TYPE!=="undefined"){items.push(me.getTypeItem())}if(typeof me.params.columns.OPT!=="undefined"){items.push(me.getOptItem())}if(typeof me.params.columns.SCALE!=="undefined"){items.push(me.getScaleItem())}return items}});var QRCode;(function(){function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE;this.data=data;this.parsedData=[];for(var i=0,l=this.data.length;i<l;i++){var byteArray=[];var code=this.data.charCodeAt(i);if(code>65536){byteArray[0]=240|((code&1835008)>>>18);byteArray[1]=128|((code&258048)>>>12);byteArray[2]=128|((code&4032)>>>6);byteArray[3]=128|(code&63)}else{if(code>2048){byteArray[0]=224|((code&61440)>>>12);byteArray[1]=128|((code&4032)>>>6);byteArray[2]=128|(code&63)}else{if(code>128){byteArray[0]=192|((code&1984)>>>6);byteArray[1]=128|(code&63)}else{byteArray[0]=code}}}this.parsedData.push(byteArray)}this.parsedData=Array.prototype.concat.apply([],this.parsedData);if(this.parsedData.length!=this.data.length){this.parsedData.unshift(191);this.parsedData.unshift(187);this.parsedData.unshift(239)}}QR8bitByte.prototype={getLength:function(buffer){return this.parsedData.length},write:function(buffer){for(var i=0,l=this.parsedData.length;i<l;i++){buffer.put(this.parsedData[i],8)}}};function QRCodeModel(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber;this.errorCorrectLevel=errorCorrectLevel;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+","+col)}return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(false,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null}}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test)}if(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)}this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r){continue}for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c){continue}if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true}else{this.modules[row+r][col+c]=false}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i}}return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill()}}}return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue}this.modules[r][6]=(r%2==0)}for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue}this.modules[6][c]=(c%2==0)}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue}for(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true}else{this.modules[row+r][col+c]=false}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod}for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod}else{if(i<8){this.modules[i+1][8]=mod}else{this.modules[this.moduleCount-15+i][8]=mod}}}for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod}else{if(i<9){this.modules[8][15-i-1+1]=mod}else{this.modules[8][15-i-1]=mod}}}this.modules[this.moduleCount-8][8]=(!test)},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6){col--}while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1)}var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark}this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7}}}row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break}}}}};QRCodeModel.PAD0=236;QRCodeModel.PAD1=17;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer)}var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount}if(buffer.getLengthInBits()>totalDataCount*8){throw new Error("code length overflow. ("+buffer.getLengthInBits()+">"+totalDataCount*8+")")}if(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4)}while(buffer.getLengthInBits()%8!=0){buffer.putBit(false)}while(true){if(buffer.getLengthInBits()>=totalDataCount*8){break}buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break}buffer.put(QRCodeModel.PAD1,8)}return QRCodeModel.createBytes(buffer,rsBlocks)};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=255&buffer.buffer[i+offset]}offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0}}var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount}var data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i]}}}for(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i]}}}return data};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)))}return((data<<10)|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)))}return(data<<12)|d},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1}return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern)}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0))}return a},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode)}}else{if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode)}}else{if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode)}}else{throw new Error("type:"+type)}}}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue}for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue}if(r==0&&c==0){continue}if(dark==qrCode.isDark(row+r,col+c)){sameCount++}}}if(sameCount>5){lostPoint+=(3+sameCount-5)}}}for(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col)){count++}if(qrCode.isDark(row+1,col)){count++}if(qrCode.isDark(row,col+1)){count++}if(qrCode.isDark(row+1,col+1)){count++}if(count==0||count==4){lostPoint+=3}}}for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40}}}for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40}}}var darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++}}}var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint}};var QRMath={glog:function(n){if(n<1){throw new Error("glog("+n+")")}return QRMath.LOG_TABLE[n]},gexp:function(n){while(n<0){n+=255}while(n>=256){n-=255}return QRMath.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i}for(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8]}for(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i}function QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+"/"+shift)}var offset=0;while(offset<num.length&&num[offset]==0){offset++}this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset]}}QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)))}}return new QRPolynomial(num,0)},mod:function(e){if(this.getLength()-e.getLength()<0){return this}var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i)}for(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio)}return new QRPolynomial(num,0).mod(e)}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel)}var length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount))}}return list};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined}};function QRBitBuffer(){this.buffer=[];this.length=0}QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1)}},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0)}if(bit){this.buffer[bufIndex]|=(128>>>(this.length%8))}this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _isSupportCanvas(){return typeof CanvasRenderingContext2D!="undefined"}function _getAndroid(){var android=false;var sAgent=navigator.userAgent;if(/android/i.test(sAgent)){android=true;var aMat=sAgent.toString().match(/android ([0-9]\.[0-9])/i);if(aMat&&aMat[1]){android=parseFloat(aMat[1])}}return android}var svgDrawer=(function(){var Drawing=function(el,htOption){this._el=el;this._htOption=htOption};Drawing.prototype.draw=function(oQRCode){var _htOption=this._htOption;var _el=this._el;var nCount=oQRCode.getModuleCount();var nWidth=Math.floor(_htOption.width/nCount);var nHeight=Math.floor(_htOption.height/nCount);this.clear();function makeSVG(tag,attrs){var el=document.createElementNS("http://www.w3.org/2000/svg",tag);for(var k in attrs){if(attrs.hasOwnProperty(k)){el.setAttribute(k,attrs[k])}}return el}var svg=makeSVG("svg",{viewBox:"0 0 "+String(nCount)+" "+String(nCount),width:"100%",height:"100%",fill:_htOption.colorLight});svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");_el.appendChild(svg);svg.appendChild(makeSVG("rect",{fill:_htOption.colorLight,width:"100%",height:"100%"}));svg.appendChild(makeSVG("rect",{fill:_htOption.colorDark,width:"1",height:"1",id:"template"}));for(var row=0;row<nCount;row++){for(var col=0;col<nCount;col++){if(oQRCode.isDark(row,col)){var child=makeSVG("use",{x:String(col),y:String(row)});child.setAttributeNS("http://www.w3.org/1999/xlink","href","#template");svg.appendChild(child)}}}};Drawing.prototype.clear=function(){while(this._el.hasChildNodes()){this._el.removeChild(this._el.lastChild)}};return Drawing})();var useSVG=document.documentElement.tagName.toLowerCase()==="svg";var Drawing=useSVG?svgDrawer:!_isSupportCanvas()?(function(){var Drawing=function(el,htOption){this._el=el;this._htOption=htOption};Drawing.prototype.draw=function(oQRCode){var _htOption=this._htOption;var _el=this._el;var nCount=oQRCode.getModuleCount();var nWidth=Math.floor(_htOption.width/nCount);var nHeight=Math.floor(_htOption.height/nCount);var aHTML=['<table style="border:0;border-collapse:collapse;">'];for(var row=0;row<nCount;row++){aHTML.push("<tr>");for(var col=0;col<nCount;col++){aHTML.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+nWidth+"px;height:"+nHeight+"px;background-color:"+(oQRCode.isDark(row,col)?_htOption.colorDark:_htOption.colorLight)+';"></td>')}aHTML.push("</tr>")}aHTML.push("</table>");_el.innerHTML=aHTML.join("");var elTable=_el.childNodes[0];var nLeftMarginTable=(_htOption.width-elTable.offsetWidth)/2;var nTopMarginTable=(_htOption.height-elTable.offsetHeight)/2;if(nLeftMarginTable>0&&nTopMarginTable>0){elTable.style.margin=nTopMarginTable+"px "+nLeftMarginTable+"px"}};Drawing.prototype.clear=function(){this._el.innerHTML=""};return Drawing})():(function(){function _onMakeImage(){this._elImage.src=this._elCanvas.toDataURL("image/png");this._elImage.style.display="block";this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var factor=1/window.devicePixelRatio;var drawImage=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(image,sx,sy,sw,sh,dx,dy,dw,dh){if(("nodeName" in image)&&/img/i.test(image.nodeName)){for(var i=arguments.length-1;i>=1;i--){arguments[i]=arguments[i]*factor}}else{if(typeof dw=="undefined"){arguments[1]*=factor;arguments[2]*=factor;arguments[3]*=factor;arguments[4]*=factor}}drawImage.apply(this,arguments)}}function _safeSetDataURI(fSuccess,fFail){var self=this;self._fFail=fFail;self._fSuccess=fSuccess;if(self._bSupportDataURI===null){var el=document.createElement("img");var fOnError=function(){self._bSupportDataURI=false;if(self._fFail){self._fFail.call(self)}};var fOnSuccess=function(){self._bSupportDataURI=true;if(self._fSuccess){self._fSuccess.call(self)}};el.onabort=fOnError;el.onerror=fOnError;el.onload=fOnSuccess;el.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";return}else{if(self._bSupportDataURI===true&&self._fSuccess){self._fSuccess.call(self)}else{if(self._bSupportDataURI===false&&self._fFail){self._fFail.call(self)}}}}var Drawing=function(el,htOption){this._bIsPainted=false;this._android=_getAndroid();this._htOption=htOption;this._elCanvas=document.createElement("canvas");this._elCanvas.width=htOption.width;this._elCanvas.height=htOption.height;el.appendChild(this._elCanvas);this._el=el;this._oContext=this._elCanvas.getContext("2d");this._bIsPainted=false;this._elImage=document.createElement("img");this._elImage.alt="Scan me!";this._elImage.style.display="none";this._el.appendChild(this._elImage);this._bSupportDataURI=null};Drawing.prototype.draw=function(oQRCode){var _elImage=this._elImage;var _oContext=this._oContext;var _htOption=this._htOption;var nCount=oQRCode.getModuleCount();var nWidth=_htOption.width/nCount;var nHeight=_htOption.height/nCount;var nRoundedWidth=Math.round(nWidth);var nRoundedHeight=Math.round(nHeight);_elImage.style.display="none";this.clear();for(var row=0;row<nCount;row++){for(var col=0;col<nCount;col++){var bIsDark=oQRCode.isDark(row,col);var nLeft=col*nWidth;var nTop=row*nHeight;_oContext.strokeStyle=bIsDark?_htOption.colorDark:_htOption.colorLight;_oContext.lineWidth=1;_oContext.fillStyle=bIsDark?_htOption.colorDark:_htOption.colorLight;_oContext.fillRect(nLeft,nTop,nWidth,nHeight);_oContext.strokeRect(Math.floor(nLeft)+0.5,Math.floor(nTop)+0.5,nRoundedWidth,nRoundedHeight);_oContext.strokeRect(Math.ceil(nLeft)-0.5,Math.ceil(nTop)-0.5,nRoundedWidth,nRoundedHeight)}}this._bIsPainted=true};Drawing.prototype.makeImage=function(){if(this._bIsPainted){_safeSetDataURI.call(this,_onMakeImage)}};Drawing.prototype.isPainted=function(){return this._bIsPainted};Drawing.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height);this._bIsPainted=false};Drawing.prototype.round=function(nNumber){if(!nNumber){return nNumber}return Math.floor(nNumber*1000)/1000};return Drawing})();function _getTypeNumber(sText,nCorrectLevel){var nType=1;var length=_getUTF8Length(sText);for(var i=0,len=QRCodeLimitLength.length;i<=len;i++){var nLimit=0;switch(nCorrectLevel){case QRErrorCorrectLevel.L:nLimit=QRCodeLimitLength[i][0];break;case QRErrorCorrectLevel.M:nLimit=QRCodeLimitLength[i][1];break;case QRErrorCorrectLevel.Q:nLimit=QRCodeLimitLength[i][2];break;case QRErrorCorrectLevel.H:nLimit=QRCodeLimitLength[i][3];break}if(length<=nLimit){break}else{nType++}}if(nType>QRCodeLimitLength.length){throw new Error("Too long data")}return nType}function _getUTF8Length(sText){var replacedText=encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return replacedText.length+(replacedText.length!=sText?3:0)}QRCode=function(el,vOption){this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRErrorCorrectLevel.H};if(typeof vOption==="string"){vOption={text:vOption}}if(vOption){for(var i in vOption){this._htOption[i]=vOption[i]}}if(typeof el=="string"){el=document.getElementById(el)}if(this._htOption.useSVG){Drawing=svgDrawer}this._android=_getAndroid();this._el=el;this._oQRCode=null;this._oDrawing=new Drawing(this._el,this._htOption);if(this._htOption.text){this.makeCode(this._htOption.text)}};QRCode.prototype.makeCode=function(sText){this._oQRCode=new QRCodeModel(_getTypeNumber(sText,this._htOption.correctLevel),this._htOption.correctLevel);this._oQRCode.addData(sText);this._oQRCode.make();this._el.title=sText;this._oDrawing.draw(this._oQRCode);this.makeImage()};QRCode.prototype.makeImage=function(){if(typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)){this._oDrawing.makeImage()}};QRCode.prototype.clear=function(){this._oDrawing.clear()};QRCode.CorrectLevel=QRErrorCorrectLevel})();Ext.define("Wasutp.Configurations.NameLengthHelper",{maxFieldLengthText:"Максимальная длина этого поля {0} символов, лишние символы будут обрезаны",maxStringLengthText:"Максимальная длина строки {0} символов, лишние символы будут обрезаны",maxFieldLength:255});